(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))a(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function s(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(c){if(c.ep)return;c.ep=!0;const u=s(c);fetch(c.href,u)}})();var Wg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function z1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function zl(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var r=n.default;if(typeof r=="function"){var s=function a(){var c=!1;try{c=this instanceof a}catch{}return c?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};s.prototype=r.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(n).forEach(function(a){var c=Object.getOwnPropertyDescriptor(n,a);Object.defineProperty(s,a,c.get?c:{enumerable:!0,get:function(){return n[a]}})}),s}var vd={exports:{}},jo={};var Gg;function L1(){if(Gg)return jo;Gg=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function s(a,c,u){var h=null;if(u!==void 0&&(h=""+u),c.key!==void 0&&(h=""+c.key),"key"in c){u={};for(var p in c)p!=="key"&&(u[p]=c[p])}else u=c;return c=u.ref,{$$typeof:n,type:a,key:h,ref:c!==void 0?c:null,props:u}}return jo.Fragment=r,jo.jsx=s,jo.jsxs=s,jo}var Yg;function B1(){return Yg||(Yg=1,vd.exports=L1()),vd.exports}var i=B1(),bd={exports:{}},Xe={};var Xg;function H1(){if(Xg)return Xe;Xg=1;var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),U=Symbol.iterator;function V(j){return j===null||typeof j!="object"?null:(j=U&&j[U]||j["@@iterator"],typeof j=="function"?j:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,z={};function Q(j,B,C){this.props=j,this.context=B,this.refs=z,this.updater=C||I}Q.prototype.isReactComponent={},Q.prototype.setState=function(j,B){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,B,"setState")},Q.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function Y(){}Y.prototype=Q.prototype;function fe(j,B,C){this.props=j,this.context=B,this.refs=z,this.updater=C||I}var le=fe.prototype=new Y;le.constructor=fe,q(le,Q.prototype),le.isPureReactComponent=!0;var K=Array.isArray;function ie(){}var ae={H:null,A:null,T:null,S:null},Ce=Object.prototype.hasOwnProperty;function De(j,B,C){var T=C.ref;return{$$typeof:n,type:j,key:B,ref:T!==void 0?T:null,props:C}}function Re(j,B){return De(j.type,B,j.props)}function ze(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function Fe(j){var B={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(C){return B[C]})}var Me=/\/+/g;function be(j,B){return typeof j=="object"&&j!==null&&j.key!=null?Fe(""+j.key):B.toString(36)}function Ue(j){switch(j.status){case"fulfilled":return j.value;case"rejected":throw j.reason;default:switch(typeof j.status=="string"?j.then(ie,ie):(j.status="pending",j.then(function(B){j.status==="pending"&&(j.status="fulfilled",j.value=B)},function(B){j.status==="pending"&&(j.status="rejected",j.reason=B)})),j.status){case"fulfilled":return j.value;case"rejected":throw j.reason}}throw j}function W(j,B,C,T,b){var E=typeof j;(E==="undefined"||E==="boolean")&&(j=null);var A=!1;if(j===null)A=!0;else switch(E){case"bigint":case"string":case"number":A=!0;break;case"object":switch(j.$$typeof){case n:case r:A=!0;break;case y:return A=j._init,W(A(j._payload),B,C,T,b)}}if(A)return b=b(j),A=T===""?"."+be(j,0):T,K(b)?(C="",A!=null&&(C=A.replace(Me,"$&/")+"/"),W(b,B,C,"",function(N){return N})):b!=null&&(ze(b)&&(b=Re(b,C+(b.key==null||j&&j.key===b.key?"":(""+b.key).replace(Me,"$&/")+"/")+A)),B.push(b)),1;A=0;var v=T===""?".":T+":";if(K(j))for(var S=0;S<j.length;S++)T=j[S],E=v+be(T,S),A+=W(T,B,C,E,b);else if(S=V(j),typeof S=="function")for(j=S.call(j),S=0;!(T=j.next()).done;)T=T.value,E=v+be(T,S++),A+=W(T,B,C,E,b);else if(E==="object"){if(typeof j.then=="function")return W(Ue(j),B,C,T,b);throw B=String(j),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return A}function M(j,B,C){if(j==null)return j;var T=[],b=0;return W(j,T,"","",function(E){return B.call(C,E,b++)}),T}function J(j){if(j._status===-1){var B=j._result;B=B(),B.then(function(C){(j._status===0||j._status===-1)&&(j._status=1,j._result=C)},function(C){(j._status===0||j._status===-1)&&(j._status=2,j._result=C)}),j._status===-1&&(j._status=0,j._result=B)}if(j._status===1)return j._result.default;throw j._result}var H=typeof reportError=="function"?reportError:function(j){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof j=="object"&&j!==null&&typeof j.message=="string"?String(j.message):String(j),error:j});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",j);return}console.error(j)},ee={map:M,forEach:function(j,B,C){M(j,function(){B.apply(this,arguments)},C)},count:function(j){var B=0;return M(j,function(){B++}),B},toArray:function(j){return M(j,function(B){return B})||[]},only:function(j){if(!ze(j))throw Error("React.Children.only expected to receive a single React element child.");return j}};return Xe.Activity=k,Xe.Children=ee,Xe.Component=Q,Xe.Fragment=s,Xe.Profiler=c,Xe.PureComponent=fe,Xe.StrictMode=a,Xe.Suspense=m,Xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ae,Xe.__COMPILER_RUNTIME={__proto__:null,c:function(j){return ae.H.useMemoCache(j)}},Xe.cache=function(j){return function(){return j.apply(null,arguments)}},Xe.cacheSignal=function(){return null},Xe.cloneElement=function(j,B,C){if(j==null)throw Error("The argument must be a React element, but you passed "+j+".");var T=q({},j.props),b=j.key;if(B!=null)for(E in B.key!==void 0&&(b=""+B.key),B)!Ce.call(B,E)||E==="key"||E==="__self"||E==="__source"||E==="ref"&&B.ref===void 0||(T[E]=B[E]);var E=arguments.length-2;if(E===1)T.children=C;else if(1<E){for(var A=Array(E),v=0;v<E;v++)A[v]=arguments[v+2];T.children=A}return De(j.type,b,T)},Xe.createContext=function(j){return j={$$typeof:h,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null},j.Provider=j,j.Consumer={$$typeof:u,_context:j},j},Xe.createElement=function(j,B,C){var T,b={},E=null;if(B!=null)for(T in B.key!==void 0&&(E=""+B.key),B)Ce.call(B,T)&&T!=="key"&&T!=="__self"&&T!=="__source"&&(b[T]=B[T]);var A=arguments.length-2;if(A===1)b.children=C;else if(1<A){for(var v=Array(A),S=0;S<A;S++)v[S]=arguments[S+2];b.children=v}if(j&&j.defaultProps)for(T in A=j.defaultProps,A)b[T]===void 0&&(b[T]=A[T]);return De(j,E,b)},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(j){return{$$typeof:p,render:j}},Xe.isValidElement=ze,Xe.lazy=function(j){return{$$typeof:y,_payload:{_status:-1,_result:j},_init:J}},Xe.memo=function(j,B){return{$$typeof:g,type:j,compare:B===void 0?null:B}},Xe.startTransition=function(j){var B=ae.T,C={};ae.T=C;try{var T=j(),b=ae.S;b!==null&&b(C,T),typeof T=="object"&&T!==null&&typeof T.then=="function"&&T.then(ie,H)}catch(E){H(E)}finally{B!==null&&C.types!==null&&(B.types=C.types),ae.T=B}},Xe.unstable_useCacheRefresh=function(){return ae.H.useCacheRefresh()},Xe.use=function(j){return ae.H.use(j)},Xe.useActionState=function(j,B,C){return ae.H.useActionState(j,B,C)},Xe.useCallback=function(j,B){return ae.H.useCallback(j,B)},Xe.useContext=function(j){return ae.H.useContext(j)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(j,B){return ae.H.useDeferredValue(j,B)},Xe.useEffect=function(j,B){return ae.H.useEffect(j,B)},Xe.useEffectEvent=function(j){return ae.H.useEffectEvent(j)},Xe.useId=function(){return ae.H.useId()},Xe.useImperativeHandle=function(j,B,C){return ae.H.useImperativeHandle(j,B,C)},Xe.useInsertionEffect=function(j,B){return ae.H.useInsertionEffect(j,B)},Xe.useLayoutEffect=function(j,B){return ae.H.useLayoutEffect(j,B)},Xe.useMemo=function(j,B){return ae.H.useMemo(j,B)},Xe.useOptimistic=function(j,B){return ae.H.useOptimistic(j,B)},Xe.useReducer=function(j,B,C){return ae.H.useReducer(j,B,C)},Xe.useRef=function(j){return ae.H.useRef(j)},Xe.useState=function(j){return ae.H.useState(j)},Xe.useSyncExternalStore=function(j,B,C){return ae.H.useSyncExternalStore(j,B,C)},Xe.useTransition=function(){return ae.H.useTransition()},Xe.version="19.2.3",Xe}var Jg;function lh(){return Jg||(Jg=1,bd.exports=H1()),bd.exports}var R=lh();const q1=z1(R);var xd={exports:{}},To={},Sd={exports:{}},wd={};var Kg;function $1(){return Kg||(Kg=1,(function(n){function r(W,M){var J=W.length;W.push(M);e:for(;0<J;){var H=J-1>>>1,ee=W[H];if(0<c(ee,M))W[H]=M,W[J]=ee,J=H;else break e}}function s(W){return W.length===0?null:W[0]}function a(W){if(W.length===0)return null;var M=W[0],J=W.pop();if(J!==M){W[0]=J;e:for(var H=0,ee=W.length,j=ee>>>1;H<j;){var B=2*(H+1)-1,C=W[B],T=B+1,b=W[T];if(0>c(C,J))T<ee&&0>c(b,C)?(W[H]=b,W[T]=J,H=T):(W[H]=C,W[B]=J,H=B);else if(T<ee&&0>c(b,J))W[H]=b,W[T]=J,H=T;else break e}}return M}function c(W,M){var J=W.sortIndex-M.sortIndex;return J!==0?J:W.id-M.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;n.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();n.unstable_now=function(){return h.now()-p}}var m=[],g=[],y=1,k=null,U=3,V=!1,I=!1,q=!1,z=!1,Q=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,fe=typeof setImmediate<"u"?setImmediate:null;function le(W){for(var M=s(g);M!==null;){if(M.callback===null)a(g);else if(M.startTime<=W)a(g),M.sortIndex=M.expirationTime,r(m,M);else break;M=s(g)}}function K(W){if(q=!1,le(W),!I)if(s(m)!==null)I=!0,ie||(ie=!0,Fe());else{var M=s(g);M!==null&&Ue(K,M.startTime-W)}}var ie=!1,ae=-1,Ce=5,De=-1;function Re(){return z?!0:!(n.unstable_now()-De<Ce)}function ze(){if(z=!1,ie){var W=n.unstable_now();De=W;var M=!0;try{e:{I=!1,q&&(q=!1,Y(ae),ae=-1),V=!0;var J=U;try{t:{for(le(W),k=s(m);k!==null&&!(k.expirationTime>W&&Re());){var H=k.callback;if(typeof H=="function"){k.callback=null,U=k.priorityLevel;var ee=H(k.expirationTime<=W);if(W=n.unstable_now(),typeof ee=="function"){k.callback=ee,le(W),M=!0;break t}k===s(m)&&a(m),le(W)}else a(m);k=s(m)}if(k!==null)M=!0;else{var j=s(g);j!==null&&Ue(K,j.startTime-W),M=!1}}break e}finally{k=null,U=J,V=!1}M=void 0}}finally{M?Fe():ie=!1}}}var Fe;if(typeof fe=="function")Fe=function(){fe(ze)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,be=Me.port2;Me.port1.onmessage=ze,Fe=function(){be.postMessage(null)}}else Fe=function(){Q(ze,0)};function Ue(W,M){ae=Q(function(){W(n.unstable_now())},M)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ce=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return U},n.unstable_next=function(W){switch(U){case 1:case 2:case 3:var M=3;break;default:M=U}var J=U;U=M;try{return W()}finally{U=J}},n.unstable_requestPaint=function(){z=!0},n.unstable_runWithPriority=function(W,M){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var J=U;U=W;try{return M()}finally{U=J}},n.unstable_scheduleCallback=function(W,M,J){var H=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?H+J:H):J=H,W){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=J+ee,W={id:y++,callback:M,priorityLevel:W,startTime:J,expirationTime:ee,sortIndex:-1},J>H?(W.sortIndex=J,r(g,W),s(m)===null&&W===s(g)&&(q?(Y(ae),ae=-1):q=!0,Ue(K,J-H))):(W.sortIndex=ee,r(m,W),I||V||(I=!0,ie||(ie=!0,Fe()))),W},n.unstable_shouldYield=Re,n.unstable_wrapCallback=function(W){var M=U;return function(){var J=U;U=M;try{return W.apply(this,arguments)}finally{U=J}}}})(wd)),wd}var Qg;function F1(){return Qg||(Qg=1,Sd.exports=$1()),Sd.exports}var Cd={exports:{}},Kt={};var Zg;function V1(){if(Zg)return Kt;Zg=1;var n=lh();function r(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var a={d:{f:s,r:function(){throw Error(r(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(m,g,y){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:k==null?null:""+k,children:m,containerInfo:g,implementation:y}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Kt.createPortal=function(m,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(r(299));return u(m,g,null,y)},Kt.flushSync=function(m){var g=h.T,y=a.p;try{if(h.T=null,a.p=2,m)return m()}finally{h.T=g,a.p=y,a.d.f()}},Kt.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,a.d.C(m,g))},Kt.prefetchDNS=function(m){typeof m=="string"&&a.d.D(m)},Kt.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var y=g.as,k=p(y,g.crossOrigin),U=typeof g.integrity=="string"?g.integrity:void 0,V=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?a.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:k,integrity:U,fetchPriority:V}):y==="script"&&a.d.X(m,{crossOrigin:k,integrity:U,fetchPriority:V,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Kt.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=p(g.as,g.crossOrigin);a.d.M(m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&a.d.M(m)},Kt.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,k=p(y,g.crossOrigin);a.d.L(m,y,{crossOrigin:k,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Kt.preloadModule=function(m,g){if(typeof m=="string")if(g){var y=p(g.as,g.crossOrigin);a.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else a.d.m(m)},Kt.requestFormReset=function(m){a.d.r(m)},Kt.unstable_batchedUpdates=function(m,g){return m(g)},Kt.useFormState=function(m,g,y){return h.H.useFormState(m,g,y)},Kt.useFormStatus=function(){return h.H.useHostTransitionStatus()},Kt.version="19.2.3",Kt}var ey;function W1(){if(ey)return Cd.exports;ey=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),Cd.exports=V1(),Cd.exports}var ty;function G1(){if(ty)return To;ty=1;var n=F1(),r=lh(),s=W1();function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)t+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,o=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(o=t.return),e=t.return;while(e)}return t.tag===3?o:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(u(e)!==e)throw Error(a(188))}function g(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(a(188));return t!==e?null:e}for(var o=e,l=t;;){var d=o.return;if(d===null)break;var f=d.alternate;if(f===null){if(l=d.return,l!==null){o=l;continue}break}if(d.child===f.child){for(f=d.child;f;){if(f===o)return m(d),e;if(f===l)return m(d),t;f=f.sibling}throw Error(a(188))}if(o.return!==l.return)o=d,l=f;else{for(var x=!1,_=d.child;_;){if(_===o){x=!0,o=d,l=f;break}if(_===l){x=!0,l=d,o=f;break}_=_.sibling}if(!x){for(_=f.child;_;){if(_===o){x=!0,o=f,l=d;break}if(_===l){x=!0,l=f,o=d;break}_=_.sibling}if(!x)throw Error(a(189))}}if(o.alternate!==l)throw Error(a(190))}if(o.tag!==3)throw Error(a(188));return o.stateNode.current===o?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var k=Object.assign,U=Symbol.for("react.element"),V=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),Y=Symbol.for("react.consumer"),fe=Symbol.for("react.context"),le=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),Ce=Symbol.for("react.lazy"),De=Symbol.for("react.activity"),Re=Symbol.for("react.memo_cache_sentinel"),ze=Symbol.iterator;function Fe(e){return e===null||typeof e!="object"?null:(e=ze&&e[ze]||e["@@iterator"],typeof e=="function"?e:null)}var Me=Symbol.for("react.client.reference");function be(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Me?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case q:return"Fragment";case Q:return"Profiler";case z:return"StrictMode";case K:return"Suspense";case ie:return"SuspenseList";case De:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case I:return"Portal";case fe:return e.displayName||"Context";case Y:return(e._context.displayName||"Context")+".Consumer";case le:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ae:return t=e.displayName||null,t!==null?t:be(e.type)||"Memo";case Ce:t=e._payload,e=e._init;try{return be(e(t))}catch{}}return null}var Ue=Array.isArray,W=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},H=[],ee=-1;function j(e){return{current:e}}function B(e){0>ee||(e.current=H[ee],H[ee]=null,ee--)}function C(e,t){ee++,H[ee]=e.current,e.current=t}var T=j(null),b=j(null),E=j(null),A=j(null);function v(e,t){switch(C(E,t),C(b,e),C(T,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?mg(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=mg(t),e=gg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}B(T),C(T,e)}function S(){B(T),B(b),B(E)}function N(e){e.memoizedState!==null&&C(A,e);var t=T.current,o=gg(t,e.type);t!==o&&(C(b,e),C(T,o))}function F(e){b.current===e&&(B(T),B(b)),A.current===e&&(B(A),xo._currentValue=J)}var te,X;function $(e){if(te===void 0)try{throw Error()}catch(o){var t=o.stack.trim().match(/\n( *(at )?)/);te=t&&t[1]||"",X=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+te+e+X}var de=!1;function he(e,t){if(!e||de)return"";de=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var Pe=function(){throw Error()};if(Object.defineProperty(Pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Pe,[])}catch(we){var ve=we}Reflect.construct(e,[],Pe)}else{try{Pe.call()}catch(we){ve=we}e.call(Pe.prototype)}}else{try{throw Error()}catch(we){ve=we}(Pe=e())&&typeof Pe.catch=="function"&&Pe.catch(function(){})}}catch(we){if(we&&ve&&typeof we.stack=="string")return[we.stack,ve.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),x=f[0],_=f[1];if(x&&_){var Z=x.split(`
`),ge=_.split(`
`);for(d=l=0;l<Z.length&&!Z[l].includes("DetermineComponentFrameRoot");)l++;for(;d<ge.length&&!ge[d].includes("DetermineComponentFrameRoot");)d++;if(l===Z.length||d===ge.length)for(l=Z.length-1,d=ge.length-1;1<=l&&0<=d&&Z[l]!==ge[d];)d--;for(;1<=l&&0<=d;l--,d--)if(Z[l]!==ge[d]){if(l!==1||d!==1)do if(l--,d--,0>d||Z[l]!==ge[d]){var Ee=`
`+Z[l].replace(" at new "," at ");return e.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",e.displayName)),Ee}while(1<=l&&0<=d);break}}}finally{de=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?$(o):""}function ce(e,t){switch(e.tag){case 26:case 27:case 5:return $(e.type);case 16:return $("Lazy");case 13:return e.child!==t&&t!==null?$("Suspense Fallback"):$("Suspense");case 19:return $("SuspenseList");case 0:case 15:return he(e.type,!1);case 11:return he(e.type.render,!1);case 1:return he(e.type,!0);case 31:return $("Activity");default:return""}}function se(e){try{var t="",o=null;do t+=ce(e,o),o=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var G=Object.prototype.hasOwnProperty,je=n.unstable_scheduleCallback,Ne=n.unstable_cancelCallback,xe=n.unstable_shouldYield,ne=n.unstable_requestPaint,Te=n.unstable_now,ke=n.unstable_getCurrentPriorityLevel,O=n.unstable_ImmediatePriority,w=n.unstable_UserBlockingPriority,L=n.unstable_NormalPriority,P=n.unstable_LowPriority,D=n.unstable_IdlePriority,re=n.log,ye=n.unstable_setDisableYieldValue,Be=null,Oe=null;function Ie(e){if(typeof re=="function"&&ye(e),Oe&&typeof Oe.setStrictMode=="function")try{Oe.setStrictMode(Be,e)}catch{}}var pe=Math.clz32?Math.clz32:dt,He=Math.log,Ye=Math.LN2;function dt(e){return e>>>=0,e===0?32:31-(He(e)/Ye|0)|0}var vt=256,qn=262144,$n=4194304;function ln(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Nn(e,t,o){var l=e.pendingLanes;if(l===0)return 0;var d=0,f=e.suspendedLanes,x=e.pingedLanes;e=e.warmLanes;var _=l&134217727;return _!==0?(l=_&~f,l!==0?d=ln(l):(x&=_,x!==0?d=ln(x):o||(o=_&~e,o!==0&&(d=ln(o))))):(_=l&~f,_!==0?d=ln(_):x!==0?d=ln(x):o||(o=l&~e,o!==0&&(d=ln(o)))),d===0?0:t!==0&&t!==d&&(t&f)===0&&(f=d&-d,o=t&-t,f>=o||f===32&&(o&4194048)!==0)?t:d}function ai(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function Tx(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xh(){var e=$n;return $n<<=1,($n&62914560)===0&&($n=4194304),e}function oc(e){for(var t=[],o=0;31>o;o++)t.push(e);return t}function Ms(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Rx(e,t,o,l,d,f){var x=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var _=e.entanglements,Z=e.expirationTimes,ge=e.hiddenUpdates;for(o=x&~o;0<o;){var Ee=31-pe(o),Pe=1<<Ee;_[Ee]=0,Z[Ee]=-1;var ve=ge[Ee];if(ve!==null)for(ge[Ee]=null,Ee=0;Ee<ve.length;Ee++){var we=ve[Ee];we!==null&&(we.lane&=-536870913)}o&=~Pe}l!==0&&Jh(e,l,0),f!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=f&~(x&~t))}function Jh(e,t,o){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-pe(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|o&261930}function Kh(e,t){var o=e.entangledLanes|=t;for(e=e.entanglements;o;){var l=31-pe(o),d=1<<l;d&t|e[l]&t&&(e[l]|=t),o&=~d}}function Qh(e,t){var o=t&-t;return o=(o&42)!==0?1:ac(o),(o&(e.suspendedLanes|t))!==0?0:o}function ac(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function lc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Zh(){var e=M.p;return e!==0?e:(e=window.event,e===void 0?32:Lg(e.type))}function ef(e,t){var o=M.p;try{return M.p=e,t()}finally{M.p=o}}var Ar=Math.random().toString(36).slice(2),Ft="__reactFiber$"+Ar,un="__reactProps$"+Ar,Di="__reactContainer$"+Ar,cc="__reactEvents$"+Ar,Ex="__reactListeners$"+Ar,kx="__reactHandles$"+Ar,tf="__reactResources$"+Ar,Os="__reactMarker$"+Ar;function uc(e){delete e[Ft],delete e[un],delete e[cc],delete e[Ex],delete e[kx]}function Ii(e){var t=e[Ft];if(t)return t;for(var o=e.parentNode;o;){if(t=o[Di]||o[Ft]){if(o=t.alternate,t.child!==null||o!==null&&o.child!==null)for(e=Cg(e);e!==null;){if(o=e[Ft])return o;e=Cg(e)}return t}e=o,o=e.parentNode}return null}function Ui(e){if(e=e[Ft]||e[Di]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ds(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(a(33))}function zi(e){var t=e[tf];return t||(t=e[tf]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ht(e){e[Os]=!0}var nf=new Set,rf={};function li(e,t){Li(e,t),Li(e+"Capture",t)}function Li(e,t){for(rf[e]=t,e=0;e<t.length;e++)nf.add(t[e])}var Ax=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sf={},of={};function Nx(e){return G.call(of,e)?!0:G.call(sf,e)?!1:Ax.test(e)?of[e]=!0:(sf[e]=!0,!1)}function Jo(e,t,o){if(Nx(t))if(o===null)e.removeAttribute(t);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+o)}}function Ko(e,t,o){if(o===null)e.removeAttribute(t);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+o)}}function ar(e,t,o,l){if(l===null)e.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(t,o,""+l)}}function _n(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function af(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function _x(e,t,o){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,f=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(x){o=""+x,f.call(this,x)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return o},setValue:function(x){o=""+x},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function dc(e){if(!e._valueTracker){var t=af(e)?"checked":"value";e._valueTracker=_x(e,t,""+e[t])}}function lf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var o=t.getValue(),l="";return e&&(l=af(e)?e.checked?"true":"false":e.value),e=l,e!==o?(t.setValue(e),!0):!1}function Qo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Px=/[\n"\\]/g;function Pn(e){return e.replace(Px,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function hc(e,t,o,l,d,f,x,_){e.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.type=x:e.removeAttribute("type"),t!=null?x==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+_n(t)):e.value!==""+_n(t)&&(e.value=""+_n(t)):x!=="submit"&&x!=="reset"||e.removeAttribute("value"),t!=null?fc(e,x,_n(t)):o!=null?fc(e,x,_n(o)):l!=null&&e.removeAttribute("value"),d==null&&f!=null&&(e.defaultChecked=!!f),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+_n(_):e.removeAttribute("name")}function cf(e,t,o,l,d,f,x,_){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||o!=null){if(!(f!=="submit"&&f!=="reset"||t!=null)){dc(e);return}o=o!=null?""+_n(o):"",t=t!=null?""+_n(t):o,_||t===e.value||(e.value=t),e.defaultValue=t}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=_?e.checked:!!l,e.defaultChecked=!!l,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(e.name=x),dc(e)}function fc(e,t,o){t==="number"&&Qo(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function Bi(e,t,o,l){if(e=e.options,t){t={};for(var d=0;d<o.length;d++)t["$"+o[d]]=!0;for(o=0;o<e.length;o++)d=t.hasOwnProperty("$"+e[o].value),e[o].selected!==d&&(e[o].selected=d),d&&l&&(e[o].defaultSelected=!0)}else{for(o=""+_n(o),t=null,d=0;d<e.length;d++){if(e[d].value===o){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function uf(e,t,o){if(t!=null&&(t=""+_n(t),t!==e.value&&(e.value=t),o==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=o!=null?""+_n(o):""}function df(e,t,o,l){if(t==null){if(l!=null){if(o!=null)throw Error(a(92));if(Ue(l)){if(1<l.length)throw Error(a(93));l=l[0]}o=l}o==null&&(o=""),t=o}o=_n(t),e.defaultValue=o,l=e.textContent,l===o&&l!==""&&l!==null&&(e.value=l),dc(e)}function Hi(e,t){if(t){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=t;return}}e.textContent=t}var Mx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hf(e,t,o){var l=t.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,o):typeof o!="number"||o===0||Mx.has(t)?t==="float"?e.cssFloat=o:e[t]=(""+o).trim():e[t]=o+"px"}function ff(e,t,o){if(t!=null&&typeof t!="object")throw Error(a(62));if(e=e.style,o!=null){for(var l in o)!o.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var d in t)l=t[d],t.hasOwnProperty(d)&&o[d]!==l&&hf(e,d,l)}else for(var f in t)t.hasOwnProperty(f)&&hf(e,f,t[f])}function pc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ox=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Dx=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Zo(e){return Dx.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function lr(){}var mc=null;function gc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var qi=null,$i=null;function pf(e){var t=Ui(e);if(t&&(e=t.stateNode)){var o=e[un]||null;e:switch(e=t.stateNode,t.type){case"input":if(hc(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),t=o.name,o.type==="radio"&&t!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Pn(""+t)+'"][type="radio"]'),t=0;t<o.length;t++){var l=o[t];if(l!==e&&l.form===e.form){var d=l[un]||null;if(!d)throw Error(a(90));hc(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(t=0;t<o.length;t++)l=o[t],l.form===e.form&&lf(l)}break e;case"textarea":uf(e,o.value,o.defaultValue);break e;case"select":t=o.value,t!=null&&Bi(e,!!o.multiple,t,!1)}}}var yc=!1;function mf(e,t,o){if(yc)return e(t,o);yc=!0;try{var l=e(t);return l}finally{if(yc=!1,(qi!==null||$i!==null)&&(Ba(),qi&&(t=qi,e=$i,$i=qi=null,pf(t),e)))for(t=0;t<e.length;t++)pf(e[t])}}function Is(e,t){var o=e.stateNode;if(o===null)return null;var l=o[un]||null;if(l===null)return null;o=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(a(231,t,typeof o));return o}var cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vc=!1;if(cr)try{var Us={};Object.defineProperty(Us,"passive",{get:function(){vc=!0}}),window.addEventListener("test",Us,Us),window.removeEventListener("test",Us,Us)}catch{vc=!1}var Nr=null,bc=null,ea=null;function gf(){if(ea)return ea;var e,t=bc,o=t.length,l,d="value"in Nr?Nr.value:Nr.textContent,f=d.length;for(e=0;e<o&&t[e]===d[e];e++);var x=o-e;for(l=1;l<=x&&t[o-l]===d[f-l];l++);return ea=d.slice(e,1<l?1-l:void 0)}function ta(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function na(){return!0}function yf(){return!1}function dn(e){function t(o,l,d,f,x){this._reactName=o,this._targetInst=d,this.type=l,this.nativeEvent=f,this.target=x,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(o=e[_],this[_]=o?o(f):f[_]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?na:yf,this.isPropagationStopped=yf,this}return k(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=na)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=na)},persist:function(){},isPersistent:na}),t}var ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ra=dn(ci),zs=k({},ci,{view:0,detail:0}),Ix=dn(zs),xc,Sc,Ls,ia=k({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ls&&(Ls&&e.type==="mousemove"?(xc=e.screenX-Ls.screenX,Sc=e.screenY-Ls.screenY):Sc=xc=0,Ls=e),xc)},movementY:function(e){return"movementY"in e?e.movementY:Sc}}),vf=dn(ia),Ux=k({},ia,{dataTransfer:0}),zx=dn(Ux),Lx=k({},zs,{relatedTarget:0}),wc=dn(Lx),Bx=k({},ci,{animationName:0,elapsedTime:0,pseudoElement:0}),Hx=dn(Bx),qx=k({},ci,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$x=dn(qx),Fx=k({},ci,{data:0}),bf=dn(Fx),Vx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Gx[e])?!!t[e]:!1}function Cc(){return Yx}var Xx=k({},zs,{key:function(e){if(e.key){var t=Vx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ta(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cc,charCode:function(e){return e.type==="keypress"?ta(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ta(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Jx=dn(Xx),Kx=k({},ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xf=dn(Kx),Qx=k({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cc}),Zx=dn(Qx),eS=k({},ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),tS=dn(eS),nS=k({},ia,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),rS=dn(nS),iS=k({},ci,{newState:0,oldState:0}),sS=dn(iS),oS=[9,13,27,32],jc=cr&&"CompositionEvent"in window,Bs=null;cr&&"documentMode"in document&&(Bs=document.documentMode);var aS=cr&&"TextEvent"in window&&!Bs,Sf=cr&&(!jc||Bs&&8<Bs&&11>=Bs),wf=" ",Cf=!1;function jf(e,t){switch(e){case"keyup":return oS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Fi=!1;function lS(e,t){switch(e){case"compositionend":return Tf(t);case"keypress":return t.which!==32?null:(Cf=!0,wf);case"textInput":return e=t.data,e===wf&&Cf?null:e;default:return null}}function cS(e,t){if(Fi)return e==="compositionend"||!jc&&jf(e,t)?(e=gf(),ea=bc=Nr=null,Fi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sf&&t.locale!=="ko"?null:t.data;default:return null}}var uS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!uS[e.type]:t==="textarea"}function Ef(e,t,o,l){qi?$i?$i.push(l):$i=[l]:qi=l,t=Ga(t,"onChange"),0<t.length&&(o=new ra("onChange","change",null,o,l),e.push({event:o,listeners:t}))}var Hs=null,qs=null;function dS(e){cg(e,0)}function sa(e){var t=Ds(e);if(lf(t))return e}function kf(e,t){if(e==="change")return t}var Af=!1;if(cr){var Tc;if(cr){var Rc="oninput"in document;if(!Rc){var Nf=document.createElement("div");Nf.setAttribute("oninput","return;"),Rc=typeof Nf.oninput=="function"}Tc=Rc}else Tc=!1;Af=Tc&&(!document.documentMode||9<document.documentMode)}function _f(){Hs&&(Hs.detachEvent("onpropertychange",Pf),qs=Hs=null)}function Pf(e){if(e.propertyName==="value"&&sa(qs)){var t=[];Ef(t,qs,e,gc(e)),mf(dS,t)}}function hS(e,t,o){e==="focusin"?(_f(),Hs=t,qs=o,Hs.attachEvent("onpropertychange",Pf)):e==="focusout"&&_f()}function fS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return sa(qs)}function pS(e,t){if(e==="click")return sa(t)}function mS(e,t){if(e==="input"||e==="change")return sa(t)}function gS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var xn=typeof Object.is=="function"?Object.is:gS;function $s(e,t){if(xn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var o=Object.keys(e),l=Object.keys(t);if(o.length!==l.length)return!1;for(l=0;l<o.length;l++){var d=o[l];if(!G.call(t,d)||!xn(e[d],t[d]))return!1}return!0}function Mf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Of(e,t){var o=Mf(e);e=0;for(var l;o;){if(o.nodeType===3){if(l=e+o.textContent.length,e<=t&&l>=t)return{node:o,offset:t-e};e=l}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Mf(o)}}function Df(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Df(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function If(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Qo(e.document);t instanceof e.HTMLIFrameElement;){try{var o=typeof t.contentWindow.location.href=="string"}catch{o=!1}if(o)e=t.contentWindow;else break;t=Qo(e.document)}return t}function Ec(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var yS=cr&&"documentMode"in document&&11>=document.documentMode,Vi=null,kc=null,Fs=null,Ac=!1;function Uf(e,t,o){var l=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Ac||Vi==null||Vi!==Qo(l)||(l=Vi,"selectionStart"in l&&Ec(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Fs&&$s(Fs,l)||(Fs=l,l=Ga(kc,"onSelect"),0<l.length&&(t=new ra("onSelect","select",null,t,o),e.push({event:t,listeners:l}),t.target=Vi)))}function ui(e,t){var o={};return o[e.toLowerCase()]=t.toLowerCase(),o["Webkit"+e]="webkit"+t,o["Moz"+e]="moz"+t,o}var Wi={animationend:ui("Animation","AnimationEnd"),animationiteration:ui("Animation","AnimationIteration"),animationstart:ui("Animation","AnimationStart"),transitionrun:ui("Transition","TransitionRun"),transitionstart:ui("Transition","TransitionStart"),transitioncancel:ui("Transition","TransitionCancel"),transitionend:ui("Transition","TransitionEnd")},Nc={},zf={};cr&&(zf=document.createElement("div").style,"AnimationEvent"in window||(delete Wi.animationend.animation,delete Wi.animationiteration.animation,delete Wi.animationstart.animation),"TransitionEvent"in window||delete Wi.transitionend.transition);function di(e){if(Nc[e])return Nc[e];if(!Wi[e])return e;var t=Wi[e],o;for(o in t)if(t.hasOwnProperty(o)&&o in zf)return Nc[e]=t[o];return e}var Lf=di("animationend"),Bf=di("animationiteration"),Hf=di("animationstart"),vS=di("transitionrun"),bS=di("transitionstart"),xS=di("transitioncancel"),qf=di("transitionend"),$f=new Map,_c="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_c.push("scrollEnd");function Fn(e,t){$f.set(e,t),li(t,[e])}var oa=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Mn=[],Gi=0,Pc=0;function aa(){for(var e=Gi,t=Pc=Gi=0;t<e;){var o=Mn[t];Mn[t++]=null;var l=Mn[t];Mn[t++]=null;var d=Mn[t];Mn[t++]=null;var f=Mn[t];if(Mn[t++]=null,l!==null&&d!==null){var x=l.pending;x===null?d.next=d:(d.next=x.next,x.next=d),l.pending=d}f!==0&&Ff(o,d,f)}}function la(e,t,o,l){Mn[Gi++]=e,Mn[Gi++]=t,Mn[Gi++]=o,Mn[Gi++]=l,Pc|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Mc(e,t,o,l){return la(e,t,o,l),ca(e)}function hi(e,t){return la(e,null,null,t),ca(e)}function Ff(e,t,o){e.lanes|=o;var l=e.alternate;l!==null&&(l.lanes|=o);for(var d=!1,f=e.return;f!==null;)f.childLanes|=o,l=f.alternate,l!==null&&(l.childLanes|=o),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(d=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,d&&t!==null&&(d=31-pe(o),e=f.hiddenUpdates,l=e[d],l===null?e[d]=[t]:l.push(t),t.lane=o|536870912),f):null}function ca(e){if(50<fo)throw fo=0,qu=null,Error(a(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Yi={};function SS(e,t,o,l){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(e,t,o,l){return new SS(e,t,o,l)}function Oc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ur(e,t){var o=e.alternate;return o===null?(o=Sn(e.tag,t,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=t,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&65011712,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,t=e.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function Vf(e,t){e.flags&=65011714;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,t=o.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ua(e,t,o,l,d,f){var x=0;if(l=e,typeof e=="function")Oc(e)&&(x=1);else if(typeof e=="string")x=R1(e,o,T.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case De:return e=Sn(31,o,t,d),e.elementType=De,e.lanes=f,e;case q:return fi(o.children,d,f,t);case z:x=8,d|=24;break;case Q:return e=Sn(12,o,t,d|2),e.elementType=Q,e.lanes=f,e;case K:return e=Sn(13,o,t,d),e.elementType=K,e.lanes=f,e;case ie:return e=Sn(19,o,t,d),e.elementType=ie,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case fe:x=10;break e;case Y:x=9;break e;case le:x=11;break e;case ae:x=14;break e;case Ce:x=16,l=null;break e}x=29,o=Error(a(130,e===null?"null":typeof e,"")),l=null}return t=Sn(x,o,t,d),t.elementType=e,t.type=l,t.lanes=f,t}function fi(e,t,o,l){return e=Sn(7,e,l,t),e.lanes=o,e}function Dc(e,t,o){return e=Sn(6,e,null,t),e.lanes=o,e}function Wf(e){var t=Sn(18,null,null,0);return t.stateNode=e,t}function Ic(e,t,o){return t=Sn(4,e.children!==null?e.children:[],e.key,t),t.lanes=o,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Gf=new WeakMap;function On(e,t){if(typeof e=="object"&&e!==null){var o=Gf.get(e);return o!==void 0?o:(t={value:e,source:t,stack:se(t)},Gf.set(e,t),t)}return{value:e,source:t,stack:se(t)}}var Xi=[],Ji=0,da=null,Vs=0,Dn=[],In=0,_r=null,Zn=1,er="";function dr(e,t){Xi[Ji++]=Vs,Xi[Ji++]=da,da=e,Vs=t}function Yf(e,t,o){Dn[In++]=Zn,Dn[In++]=er,Dn[In++]=_r,_r=e;var l=Zn;e=er;var d=32-pe(l)-1;l&=~(1<<d),o+=1;var f=32-pe(t)+d;if(30<f){var x=d-d%5;f=(l&(1<<x)-1).toString(32),l>>=x,d-=x,Zn=1<<32-pe(t)+d|o<<d|l,er=f+e}else Zn=1<<f|o<<d|l,er=e}function Uc(e){e.return!==null&&(dr(e,1),Yf(e,1,0))}function zc(e){for(;e===da;)da=Xi[--Ji],Xi[Ji]=null,Vs=Xi[--Ji],Xi[Ji]=null;for(;e===_r;)_r=Dn[--In],Dn[In]=null,er=Dn[--In],Dn[In]=null,Zn=Dn[--In],Dn[In]=null}function Xf(e,t){Dn[In++]=Zn,Dn[In++]=er,Dn[In++]=_r,Zn=t.id,er=t.overflow,_r=e}var Vt=null,xt=null,ot=!1,Pr=null,Un=!1,Lc=Error(a(519));function Mr(e){var t=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ws(On(t,e)),Lc}function Jf(e){var t=e.stateNode,o=e.type,l=e.memoizedProps;switch(t[Ft]=e,t[un]=l,o){case"dialog":nt("cancel",t),nt("close",t);break;case"iframe":case"object":case"embed":nt("load",t);break;case"video":case"audio":for(o=0;o<mo.length;o++)nt(mo[o],t);break;case"source":nt("error",t);break;case"img":case"image":case"link":nt("error",t),nt("load",t);break;case"details":nt("toggle",t);break;case"input":nt("invalid",t),cf(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":nt("invalid",t);break;case"textarea":nt("invalid",t),df(t,l.value,l.defaultValue,l.children)}o=l.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||t.textContent===""+o||l.suppressHydrationWarning===!0||fg(t.textContent,o)?(l.popover!=null&&(nt("beforetoggle",t),nt("toggle",t)),l.onScroll!=null&&nt("scroll",t),l.onScrollEnd!=null&&nt("scrollend",t),l.onClick!=null&&(t.onclick=lr),t=!0):t=!1,t||Mr(e,!0)}function Kf(e){for(Vt=e.return;Vt;)switch(Vt.tag){case 5:case 31:case 13:Un=!1;return;case 27:case 3:Un=!0;return;default:Vt=Vt.return}}function Ki(e){if(e!==Vt)return!1;if(!ot)return Kf(e),ot=!0,!1;var t=e.tag,o;if((o=t!==3&&t!==27)&&((o=t===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||rd(e.type,e.memoizedProps)),o=!o),o&&xt&&Mr(e),Kf(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));xt=wg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));xt=wg(e)}else t===27?(t=xt,Gr(e.type)?(e=ld,ld=null,xt=e):xt=t):xt=Vt?Ln(e.stateNode.nextSibling):null;return!0}function pi(){xt=Vt=null,ot=!1}function Bc(){var e=Pr;return e!==null&&(mn===null?mn=e:mn.push.apply(mn,e),Pr=null),e}function Ws(e){Pr===null?Pr=[e]:Pr.push(e)}var Hc=j(null),mi=null,hr=null;function Or(e,t,o){C(Hc,t._currentValue),t._currentValue=o}function fr(e){e._currentValue=Hc.current,B(Hc)}function qc(e,t,o){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===o)break;e=e.return}}function $c(e,t,o,l){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var f=d.dependencies;if(f!==null){var x=d.child;f=f.firstContext;e:for(;f!==null;){var _=f;f=d;for(var Z=0;Z<t.length;Z++)if(_.context===t[Z]){f.lanes|=o,_=f.alternate,_!==null&&(_.lanes|=o),qc(f.return,o,e),l||(x=null);break e}f=_.next}}else if(d.tag===18){if(x=d.return,x===null)throw Error(a(341));x.lanes|=o,f=x.alternate,f!==null&&(f.lanes|=o),qc(x,o,e),x=null}else x=d.child;if(x!==null)x.return=d;else for(x=d;x!==null;){if(x===e){x=null;break}if(d=x.sibling,d!==null){d.return=x.return,x=d;break}x=x.return}d=x}}function Qi(e,t,o,l){e=null;for(var d=t,f=!1;d!==null;){if(!f){if((d.flags&524288)!==0)f=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var x=d.alternate;if(x===null)throw Error(a(387));if(x=x.memoizedProps,x!==null){var _=d.type;xn(d.pendingProps.value,x.value)||(e!==null?e.push(_):e=[_])}}else if(d===A.current){if(x=d.alternate,x===null)throw Error(a(387));x.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(xo):e=[xo])}d=d.return}e!==null&&$c(t,e,o,l),t.flags|=262144}function ha(e){for(e=e.firstContext;e!==null;){if(!xn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function gi(e){mi=e,hr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Wt(e){return Qf(mi,e)}function fa(e,t){return mi===null&&gi(e),Qf(e,t)}function Qf(e,t){var o=t._currentValue;if(t={context:t,memoizedValue:o,next:null},hr===null){if(e===null)throw Error(a(308));hr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else hr=hr.next=t;return o}var wS=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(o,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(o){return o()})}},CS=n.unstable_scheduleCallback,jS=n.unstable_NormalPriority,Pt={$$typeof:fe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fc(){return{controller:new wS,data:new Map,refCount:0}}function Gs(e){e.refCount--,e.refCount===0&&CS(jS,function(){e.controller.abort()})}var Ys=null,Vc=0,Zi=0,es=null;function TS(e,t){if(Ys===null){var o=Ys=[];Vc=0,Zi=Yu(),es={status:"pending",value:void 0,then:function(l){o.push(l)}}}return Vc++,t.then(Zf,Zf),t}function Zf(){if(--Vc===0&&Ys!==null){es!==null&&(es.status="fulfilled");var e=Ys;Ys=null,Zi=0,es=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function RS(e,t){var o=[],l={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var d=0;d<o.length;d++)(0,o[d])(t)},function(d){for(l.status="rejected",l.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),l}var ep=W.S;W.S=function(e,t){Um=Te(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&TS(e,t),ep!==null&&ep(e,t)};var yi=j(null);function Wc(){var e=yi.current;return e!==null?e:yt.pooledCache}function pa(e,t){t===null?C(yi,yi.current):C(yi,t.pool)}function tp(){var e=Wc();return e===null?null:{parent:Pt._currentValue,pool:e}}var ts=Error(a(460)),Gc=Error(a(474)),ma=Error(a(542)),ga={then:function(){}};function np(e){return e=e.status,e==="fulfilled"||e==="rejected"}function rp(e,t,o){switch(o=e[o],o===void 0?e.push(t):o!==t&&(t.then(lr,lr),t=o),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,sp(e),e;default:if(typeof t.status=="string")t.then(lr,lr);else{if(e=yt,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=l}},function(l){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,sp(e),e}throw bi=t,ts}}function vi(e){try{var t=e._init;return t(e._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(bi=o,ts):o}}var bi=null;function ip(){if(bi===null)throw Error(a(459));var e=bi;return bi=null,e}function sp(e){if(e===ts||e===ma)throw Error(a(483))}var ns=null,Xs=0;function ya(e){var t=Xs;return Xs+=1,ns===null&&(ns=[]),rp(ns,e,t)}function Js(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function va(e,t){throw t.$$typeof===U?Error(a(525)):(e=Object.prototype.toString.call(t),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function op(e){function t(ue,oe){if(e){var me=ue.deletions;me===null?(ue.deletions=[oe],ue.flags|=16):me.push(oe)}}function o(ue,oe){if(!e)return null;for(;oe!==null;)t(ue,oe),oe=oe.sibling;return null}function l(ue){for(var oe=new Map;ue!==null;)ue.key!==null?oe.set(ue.key,ue):oe.set(ue.index,ue),ue=ue.sibling;return oe}function d(ue,oe){return ue=ur(ue,oe),ue.index=0,ue.sibling=null,ue}function f(ue,oe,me){return ue.index=me,e?(me=ue.alternate,me!==null?(me=me.index,me<oe?(ue.flags|=67108866,oe):me):(ue.flags|=67108866,oe)):(ue.flags|=1048576,oe)}function x(ue){return e&&ue.alternate===null&&(ue.flags|=67108866),ue}function _(ue,oe,me,Ae){return oe===null||oe.tag!==6?(oe=Dc(me,ue.mode,Ae),oe.return=ue,oe):(oe=d(oe,me),oe.return=ue,oe)}function Z(ue,oe,me,Ae){var We=me.type;return We===q?Ee(ue,oe,me.props.children,Ae,me.key):oe!==null&&(oe.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===Ce&&vi(We)===oe.type)?(oe=d(oe,me.props),Js(oe,me),oe.return=ue,oe):(oe=ua(me.type,me.key,me.props,null,ue.mode,Ae),Js(oe,me),oe.return=ue,oe)}function ge(ue,oe,me,Ae){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==me.containerInfo||oe.stateNode.implementation!==me.implementation?(oe=Ic(me,ue.mode,Ae),oe.return=ue,oe):(oe=d(oe,me.children||[]),oe.return=ue,oe)}function Ee(ue,oe,me,Ae,We){return oe===null||oe.tag!==7?(oe=fi(me,ue.mode,Ae,We),oe.return=ue,oe):(oe=d(oe,me),oe.return=ue,oe)}function Pe(ue,oe,me){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return oe=Dc(""+oe,ue.mode,me),oe.return=ue,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case V:return me=ua(oe.type,oe.key,oe.props,null,ue.mode,me),Js(me,oe),me.return=ue,me;case I:return oe=Ic(oe,ue.mode,me),oe.return=ue,oe;case Ce:return oe=vi(oe),Pe(ue,oe,me)}if(Ue(oe)||Fe(oe))return oe=fi(oe,ue.mode,me,null),oe.return=ue,oe;if(typeof oe.then=="function")return Pe(ue,ya(oe),me);if(oe.$$typeof===fe)return Pe(ue,fa(ue,oe),me);va(ue,oe)}return null}function ve(ue,oe,me,Ae){var We=oe!==null?oe.key:null;if(typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint")return We!==null?null:_(ue,oe,""+me,Ae);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case V:return me.key===We?Z(ue,oe,me,Ae):null;case I:return me.key===We?ge(ue,oe,me,Ae):null;case Ce:return me=vi(me),ve(ue,oe,me,Ae)}if(Ue(me)||Fe(me))return We!==null?null:Ee(ue,oe,me,Ae,null);if(typeof me.then=="function")return ve(ue,oe,ya(me),Ae);if(me.$$typeof===fe)return ve(ue,oe,fa(ue,me),Ae);va(ue,me)}return null}function we(ue,oe,me,Ae,We){if(typeof Ae=="string"&&Ae!==""||typeof Ae=="number"||typeof Ae=="bigint")return ue=ue.get(me)||null,_(oe,ue,""+Ae,We);if(typeof Ae=="object"&&Ae!==null){switch(Ae.$$typeof){case V:return ue=ue.get(Ae.key===null?me:Ae.key)||null,Z(oe,ue,Ae,We);case I:return ue=ue.get(Ae.key===null?me:Ae.key)||null,ge(oe,ue,Ae,We);case Ce:return Ae=vi(Ae),we(ue,oe,me,Ae,We)}if(Ue(Ae)||Fe(Ae))return ue=ue.get(me)||null,Ee(oe,ue,Ae,We,null);if(typeof Ae.then=="function")return we(ue,oe,me,ya(Ae),We);if(Ae.$$typeof===fe)return we(ue,oe,me,fa(oe,Ae),We);va(oe,Ae)}return null}function $e(ue,oe,me,Ae){for(var We=null,at=null,Ve=oe,et=oe=0,st=null;Ve!==null&&et<me.length;et++){Ve.index>et?(st=Ve,Ve=null):st=Ve.sibling;var lt=ve(ue,Ve,me[et],Ae);if(lt===null){Ve===null&&(Ve=st);break}e&&Ve&&lt.alternate===null&&t(ue,Ve),oe=f(lt,oe,et),at===null?We=lt:at.sibling=lt,at=lt,Ve=st}if(et===me.length)return o(ue,Ve),ot&&dr(ue,et),We;if(Ve===null){for(;et<me.length;et++)Ve=Pe(ue,me[et],Ae),Ve!==null&&(oe=f(Ve,oe,et),at===null?We=Ve:at.sibling=Ve,at=Ve);return ot&&dr(ue,et),We}for(Ve=l(Ve);et<me.length;et++)st=we(Ve,ue,et,me[et],Ae),st!==null&&(e&&st.alternate!==null&&Ve.delete(st.key===null?et:st.key),oe=f(st,oe,et),at===null?We=st:at.sibling=st,at=st);return e&&Ve.forEach(function(Qr){return t(ue,Qr)}),ot&&dr(ue,et),We}function Ge(ue,oe,me,Ae){if(me==null)throw Error(a(151));for(var We=null,at=null,Ve=oe,et=oe=0,st=null,lt=me.next();Ve!==null&&!lt.done;et++,lt=me.next()){Ve.index>et?(st=Ve,Ve=null):st=Ve.sibling;var Qr=ve(ue,Ve,lt.value,Ae);if(Qr===null){Ve===null&&(Ve=st);break}e&&Ve&&Qr.alternate===null&&t(ue,Ve),oe=f(Qr,oe,et),at===null?We=Qr:at.sibling=Qr,at=Qr,Ve=st}if(lt.done)return o(ue,Ve),ot&&dr(ue,et),We;if(Ve===null){for(;!lt.done;et++,lt=me.next())lt=Pe(ue,lt.value,Ae),lt!==null&&(oe=f(lt,oe,et),at===null?We=lt:at.sibling=lt,at=lt);return ot&&dr(ue,et),We}for(Ve=l(Ve);!lt.done;et++,lt=me.next())lt=we(Ve,ue,et,lt.value,Ae),lt!==null&&(e&&lt.alternate!==null&&Ve.delete(lt.key===null?et:lt.key),oe=f(lt,oe,et),at===null?We=lt:at.sibling=lt,at=lt);return e&&Ve.forEach(function(U1){return t(ue,U1)}),ot&&dr(ue,et),We}function gt(ue,oe,me,Ae){if(typeof me=="object"&&me!==null&&me.type===q&&me.key===null&&(me=me.props.children),typeof me=="object"&&me!==null){switch(me.$$typeof){case V:e:{for(var We=me.key;oe!==null;){if(oe.key===We){if(We=me.type,We===q){if(oe.tag===7){o(ue,oe.sibling),Ae=d(oe,me.props.children),Ae.return=ue,ue=Ae;break e}}else if(oe.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===Ce&&vi(We)===oe.type){o(ue,oe.sibling),Ae=d(oe,me.props),Js(Ae,me),Ae.return=ue,ue=Ae;break e}o(ue,oe);break}else t(ue,oe);oe=oe.sibling}me.type===q?(Ae=fi(me.props.children,ue.mode,Ae,me.key),Ae.return=ue,ue=Ae):(Ae=ua(me.type,me.key,me.props,null,ue.mode,Ae),Js(Ae,me),Ae.return=ue,ue=Ae)}return x(ue);case I:e:{for(We=me.key;oe!==null;){if(oe.key===We)if(oe.tag===4&&oe.stateNode.containerInfo===me.containerInfo&&oe.stateNode.implementation===me.implementation){o(ue,oe.sibling),Ae=d(oe,me.children||[]),Ae.return=ue,ue=Ae;break e}else{o(ue,oe);break}else t(ue,oe);oe=oe.sibling}Ae=Ic(me,ue.mode,Ae),Ae.return=ue,ue=Ae}return x(ue);case Ce:return me=vi(me),gt(ue,oe,me,Ae)}if(Ue(me))return $e(ue,oe,me,Ae);if(Fe(me)){if(We=Fe(me),typeof We!="function")throw Error(a(150));return me=We.call(me),Ge(ue,oe,me,Ae)}if(typeof me.then=="function")return gt(ue,oe,ya(me),Ae);if(me.$$typeof===fe)return gt(ue,oe,fa(ue,me),Ae);va(ue,me)}return typeof me=="string"&&me!==""||typeof me=="number"||typeof me=="bigint"?(me=""+me,oe!==null&&oe.tag===6?(o(ue,oe.sibling),Ae=d(oe,me),Ae.return=ue,ue=Ae):(o(ue,oe),Ae=Dc(me,ue.mode,Ae),Ae.return=ue,ue=Ae),x(ue)):o(ue,oe)}return function(ue,oe,me,Ae){try{Xs=0;var We=gt(ue,oe,me,Ae);return ns=null,We}catch(Ve){if(Ve===ts||Ve===ma)throw Ve;var at=Sn(29,Ve,null,ue.mode);return at.lanes=Ae,at.return=ue,at}}}var xi=op(!0),ap=op(!1),Dr=!1;function Yc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Xc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ir(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ur(e,t,o){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(ut&2)!==0){var d=l.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),l.pending=t,t=ca(e),Ff(e,null,o),t}return la(e,l,t,o),ca(e)}function Ks(e,t,o){if(t=t.updateQueue,t!==null&&(t=t.shared,(o&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,o|=l,t.lanes=o,Kh(e,o)}}function Jc(e,t){var o=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,o===l)){var d=null,f=null;if(o=o.firstBaseUpdate,o!==null){do{var x={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};f===null?d=f=x:f=f.next=x,o=o.next}while(o!==null);f===null?d=f=t:f=f.next=t}else d=f=t;o={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=t:e.next=t,o.lastBaseUpdate=t}var Kc=!1;function Qs(){if(Kc){var e=es;if(e!==null)throw e}}function Zs(e,t,o,l){Kc=!1;var d=e.updateQueue;Dr=!1;var f=d.firstBaseUpdate,x=d.lastBaseUpdate,_=d.shared.pending;if(_!==null){d.shared.pending=null;var Z=_,ge=Z.next;Z.next=null,x===null?f=ge:x.next=ge,x=Z;var Ee=e.alternate;Ee!==null&&(Ee=Ee.updateQueue,_=Ee.lastBaseUpdate,_!==x&&(_===null?Ee.firstBaseUpdate=ge:_.next=ge,Ee.lastBaseUpdate=Z))}if(f!==null){var Pe=d.baseState;x=0,Ee=ge=Z=null,_=f;do{var ve=_.lane&-536870913,we=ve!==_.lane;if(we?(it&ve)===ve:(l&ve)===ve){ve!==0&&ve===Zi&&(Kc=!0),Ee!==null&&(Ee=Ee.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var $e=e,Ge=_;ve=t;var gt=o;switch(Ge.tag){case 1:if($e=Ge.payload,typeof $e=="function"){Pe=$e.call(gt,Pe,ve);break e}Pe=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=Ge.payload,ve=typeof $e=="function"?$e.call(gt,Pe,ve):$e,ve==null)break e;Pe=k({},Pe,ve);break e;case 2:Dr=!0}}ve=_.callback,ve!==null&&(e.flags|=64,we&&(e.flags|=8192),we=d.callbacks,we===null?d.callbacks=[ve]:we.push(ve))}else we={lane:ve,tag:_.tag,payload:_.payload,callback:_.callback,next:null},Ee===null?(ge=Ee=we,Z=Pe):Ee=Ee.next=we,x|=ve;if(_=_.next,_===null){if(_=d.shared.pending,_===null)break;we=_,_=we.next,we.next=null,d.lastBaseUpdate=we,d.shared.pending=null}}while(!0);Ee===null&&(Z=Pe),d.baseState=Z,d.firstBaseUpdate=ge,d.lastBaseUpdate=Ee,f===null&&(d.shared.lanes=0),qr|=x,e.lanes=x,e.memoizedState=Pe}}function lp(e,t){if(typeof e!="function")throw Error(a(191,e));e.call(t)}function cp(e,t){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)lp(o[e],t)}var rs=j(null),ba=j(0);function up(e,t){e=wr,C(ba,e),C(rs,t),wr=e|t.baseLanes}function Qc(){C(ba,wr),C(rs,rs.current)}function Zc(){wr=ba.current,B(rs),B(ba)}var wn=j(null),zn=null;function zr(e){var t=e.alternate;C(kt,kt.current&1),C(wn,e),zn===null&&(t===null||rs.current!==null||t.memoizedState!==null)&&(zn=e)}function eu(e){C(kt,kt.current),C(wn,e),zn===null&&(zn=e)}function dp(e){e.tag===22?(C(kt,kt.current),C(wn,e),zn===null&&(zn=e)):Lr()}function Lr(){C(kt,kt.current),C(wn,wn.current)}function Cn(e){B(wn),zn===e&&(zn=null),B(kt)}var kt=j(0);function xa(e){for(var t=e;t!==null;){if(t.tag===13){var o=t.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||od(o)||ad(o)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pr=0,Qe=null,pt=null,Mt=null,Sa=!1,is=!1,Si=!1,wa=0,eo=0,ss=null,ES=0;function Tt(){throw Error(a(321))}function tu(e,t){if(t===null)return!1;for(var o=0;o<t.length&&o<e.length;o++)if(!xn(e[o],t[o]))return!1;return!0}function nu(e,t,o,l,d,f){return pr=f,Qe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,W.H=e===null||e.memoizedState===null?Yp:yu,Si=!1,f=o(l,d),Si=!1,is&&(f=fp(t,o,l,d)),hp(e),f}function hp(e){W.H=ro;var t=pt!==null&&pt.next!==null;if(pr=0,Mt=pt=Qe=null,Sa=!1,eo=0,ss=null,t)throw Error(a(300));e===null||Ot||(e=e.dependencies,e!==null&&ha(e)&&(Ot=!0))}function fp(e,t,o,l){Qe=e;var d=0;do{if(is&&(ss=null),eo=0,is=!1,25<=d)throw Error(a(301));if(d+=1,Mt=pt=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}W.H=Xp,f=t(o,l)}while(is);return f}function kS(){var e=W.H,t=e.useState()[0];return t=typeof t.then=="function"?to(t):t,e=e.useState()[0],(pt!==null?pt.memoizedState:null)!==e&&(Qe.flags|=1024),t}function ru(){var e=wa!==0;return wa=0,e}function iu(e,t,o){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o}function su(e){if(Sa){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Sa=!1}pr=0,Mt=pt=Qe=null,is=!1,eo=wa=0,ss=null}function cn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Mt===null?Qe.memoizedState=Mt=e:Mt=Mt.next=e,Mt}function At(){if(pt===null){var e=Qe.alternate;e=e!==null?e.memoizedState:null}else e=pt.next;var t=Mt===null?Qe.memoizedState:Mt.next;if(t!==null)Mt=t,pt=e;else{if(e===null)throw Qe.alternate===null?Error(a(467)):Error(a(310));pt=e,e={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Mt===null?Qe.memoizedState=Mt=e:Mt=Mt.next=e}return Mt}function Ca(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function to(e){var t=eo;return eo+=1,ss===null&&(ss=[]),e=rp(ss,e,t),t=Qe,(Mt===null?t.memoizedState:Mt.next)===null&&(t=t.alternate,W.H=t===null||t.memoizedState===null?Yp:yu),e}function ja(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return to(e);if(e.$$typeof===fe)return Wt(e)}throw Error(a(438,String(e)))}function ou(e){var t=null,o=Qe.updateQueue;if(o!==null&&(t=o.memoCache),t==null){var l=Qe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),o===null&&(o=Ca(),Qe.updateQueue=o),o.memoCache=t,o=t.data[t.index],o===void 0)for(o=t.data[t.index]=Array(e),l=0;l<e;l++)o[l]=Re;return t.index++,o}function mr(e,t){return typeof t=="function"?t(e):t}function Ta(e){var t=At();return au(t,pt,e)}function au(e,t,o){var l=e.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=o;var d=e.baseQueue,f=l.pending;if(f!==null){if(d!==null){var x=d.next;d.next=f.next,f.next=x}t.baseQueue=d=f,l.pending=null}if(f=e.baseState,d===null)e.memoizedState=f;else{t=d.next;var _=x=null,Z=null,ge=t,Ee=!1;do{var Pe=ge.lane&-536870913;if(Pe!==ge.lane?(it&Pe)===Pe:(pr&Pe)===Pe){var ve=ge.revertLane;if(ve===0)Z!==null&&(Z=Z.next={lane:0,revertLane:0,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),Pe===Zi&&(Ee=!0);else if((pr&ve)===ve){ge=ge.next,ve===Zi&&(Ee=!0);continue}else Pe={lane:0,revertLane:ge.revertLane,gesture:null,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},Z===null?(_=Z=Pe,x=f):Z=Z.next=Pe,Qe.lanes|=ve,qr|=ve;Pe=ge.action,Si&&o(f,Pe),f=ge.hasEagerState?ge.eagerState:o(f,Pe)}else ve={lane:Pe,revertLane:ge.revertLane,gesture:ge.gesture,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null},Z===null?(_=Z=ve,x=f):Z=Z.next=ve,Qe.lanes|=Pe,qr|=Pe;ge=ge.next}while(ge!==null&&ge!==t);if(Z===null?x=f:Z.next=_,!xn(f,e.memoizedState)&&(Ot=!0,Ee&&(o=es,o!==null)))throw o;e.memoizedState=f,e.baseState=x,e.baseQueue=Z,l.lastRenderedState=f}return d===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function lu(e){var t=At(),o=t.queue;if(o===null)throw Error(a(311));o.lastRenderedReducer=e;var l=o.dispatch,d=o.pending,f=t.memoizedState;if(d!==null){o.pending=null;var x=d=d.next;do f=e(f,x.action),x=x.next;while(x!==d);xn(f,t.memoizedState)||(Ot=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),o.lastRenderedState=f}return[f,l]}function pp(e,t,o){var l=Qe,d=At(),f=ot;if(f){if(o===void 0)throw Error(a(407));o=o()}else o=t();var x=!xn((pt||d).memoizedState,o);if(x&&(d.memoizedState=o,Ot=!0),d=d.queue,du(yp.bind(null,l,d,e),[e]),d.getSnapshot!==t||x||Mt!==null&&Mt.memoizedState.tag&1){if(l.flags|=2048,os(9,{destroy:void 0},gp.bind(null,l,d,o,t),null),yt===null)throw Error(a(349));f||(pr&127)!==0||mp(l,t,o)}return o}function mp(e,t,o){e.flags|=16384,e={getSnapshot:t,value:o},t=Qe.updateQueue,t===null?(t=Ca(),Qe.updateQueue=t,t.stores=[e]):(o=t.stores,o===null?t.stores=[e]:o.push(e))}function gp(e,t,o,l){t.value=o,t.getSnapshot=l,vp(t)&&bp(e)}function yp(e,t,o){return o(function(){vp(t)&&bp(e)})}function vp(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!xn(e,o)}catch{return!0}}function bp(e){var t=hi(e,2);t!==null&&gn(t,e,2)}function cu(e){var t=cn();if(typeof e=="function"){var o=e;if(e=o(),Si){Ie(!0);try{o()}finally{Ie(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mr,lastRenderedState:e},t}function xp(e,t,o,l){return e.baseState=o,au(e,pt,typeof l=="function"?l:mr)}function AS(e,t,o,l,d){if(ka(e))throw Error(a(485));if(e=t.action,e!==null){var f={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){f.listeners.push(x)}};W.T!==null?o(!0):f.isTransition=!1,l(f),o=t.pending,o===null?(f.next=t.pending=f,Sp(t,f)):(f.next=o.next,t.pending=o.next=f)}}function Sp(e,t){var o=t.action,l=t.payload,d=e.state;if(t.isTransition){var f=W.T,x={};W.T=x;try{var _=o(d,l),Z=W.S;Z!==null&&Z(x,_),wp(e,t,_)}catch(ge){uu(e,t,ge)}finally{f!==null&&x.types!==null&&(f.types=x.types),W.T=f}}else try{f=o(d,l),wp(e,t,f)}catch(ge){uu(e,t,ge)}}function wp(e,t,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(l){Cp(e,t,l)},function(l){return uu(e,t,l)}):Cp(e,t,o)}function Cp(e,t,o){t.status="fulfilled",t.value=o,jp(t),e.state=o,t=e.pending,t!==null&&(o=t.next,o===t?e.pending=null:(o=o.next,t.next=o,Sp(e,o)))}function uu(e,t,o){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=o,jp(t),t=t.next;while(t!==l)}e.action=null}function jp(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Tp(e,t){return t}function Rp(e,t){if(ot){var o=yt.formState;if(o!==null){e:{var l=Qe;if(ot){if(xt){t:{for(var d=xt,f=Un;d.nodeType!==8;){if(!f){d=null;break t}if(d=Ln(d.nextSibling),d===null){d=null;break t}}f=d.data,d=f==="F!"||f==="F"?d:null}if(d){xt=Ln(d.nextSibling),l=d.data==="F!";break e}}Mr(l)}l=!1}l&&(t=o[0])}}return o=cn(),o.memoizedState=o.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tp,lastRenderedState:t},o.queue=l,o=Vp.bind(null,Qe,l),l.dispatch=o,l=cu(!1),f=gu.bind(null,Qe,!1,l.queue),l=cn(),d={state:t,dispatch:null,action:e,pending:null},l.queue=d,o=AS.bind(null,Qe,d,f,o),d.dispatch=o,l.memoizedState=e,[t,o,!1]}function Ep(e){var t=At();return kp(t,pt,e)}function kp(e,t,o){if(t=au(e,t,Tp)[0],e=Ta(mr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=to(t)}catch(x){throw x===ts?ma:x}else l=t;t=At();var d=t.queue,f=d.dispatch;return o!==t.memoizedState&&(Qe.flags|=2048,os(9,{destroy:void 0},NS.bind(null,d,o),null)),[l,f,e]}function NS(e,t){e.action=t}function Ap(e){var t=At(),o=pt;if(o!==null)return kp(t,o,e);At(),t=t.memoizedState,o=At();var l=o.queue.dispatch;return o.memoizedState=e,[t,l,!1]}function os(e,t,o,l){return e={tag:e,create:o,deps:l,inst:t,next:null},t=Qe.updateQueue,t===null&&(t=Ca(),Qe.updateQueue=t),o=t.lastEffect,o===null?t.lastEffect=e.next=e:(l=o.next,o.next=e,e.next=l,t.lastEffect=e),e}function Np(){return At().memoizedState}function Ra(e,t,o,l){var d=cn();Qe.flags|=e,d.memoizedState=os(1|t,{destroy:void 0},o,l===void 0?null:l)}function Ea(e,t,o,l){var d=At();l=l===void 0?null:l;var f=d.memoizedState.inst;pt!==null&&l!==null&&tu(l,pt.memoizedState.deps)?d.memoizedState=os(t,f,o,l):(Qe.flags|=e,d.memoizedState=os(1|t,f,o,l))}function _p(e,t){Ra(8390656,8,e,t)}function du(e,t){Ea(2048,8,e,t)}function _S(e){Qe.flags|=4;var t=Qe.updateQueue;if(t===null)t=Ca(),Qe.updateQueue=t,t.events=[e];else{var o=t.events;o===null?t.events=[e]:o.push(e)}}function Pp(e){var t=At().memoizedState;return _S({ref:t,nextImpl:e}),function(){if((ut&2)!==0)throw Error(a(440));return t.impl.apply(void 0,arguments)}}function Mp(e,t){return Ea(4,2,e,t)}function Op(e,t){return Ea(4,4,e,t)}function Dp(e,t){if(typeof t=="function"){e=e();var o=t(e);return function(){typeof o=="function"?o():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ip(e,t,o){o=o!=null?o.concat([e]):null,Ea(4,4,Dp.bind(null,t,e),o)}function hu(){}function Up(e,t){var o=At();t=t===void 0?null:t;var l=o.memoizedState;return t!==null&&tu(t,l[1])?l[0]:(o.memoizedState=[e,t],e)}function zp(e,t){var o=At();t=t===void 0?null:t;var l=o.memoizedState;if(t!==null&&tu(t,l[1]))return l[0];if(l=e(),Si){Ie(!0);try{e()}finally{Ie(!1)}}return o.memoizedState=[l,t],l}function fu(e,t,o){return o===void 0||(pr&1073741824)!==0&&(it&261930)===0?e.memoizedState=t:(e.memoizedState=o,e=Lm(),Qe.lanes|=e,qr|=e,o)}function Lp(e,t,o,l){return xn(o,t)?o:rs.current!==null?(e=fu(e,o,l),xn(e,t)||(Ot=!0),e):(pr&42)===0||(pr&1073741824)!==0&&(it&261930)===0?(Ot=!0,e.memoizedState=o):(e=Lm(),Qe.lanes|=e,qr|=e,t)}function Bp(e,t,o,l,d){var f=M.p;M.p=f!==0&&8>f?f:8;var x=W.T,_={};W.T=_,gu(e,!1,t,o);try{var Z=d(),ge=W.S;if(ge!==null&&ge(_,Z),Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var Ee=RS(Z,l);no(e,t,Ee,Rn(e))}else no(e,t,l,Rn(e))}catch(Pe){no(e,t,{then:function(){},status:"rejected",reason:Pe},Rn())}finally{M.p=f,x!==null&&_.types!==null&&(x.types=_.types),W.T=x}}function PS(){}function pu(e,t,o,l){if(e.tag!==5)throw Error(a(476));var d=Hp(e).queue;Bp(e,d,t,J,o===null?PS:function(){return qp(e),o(l)})}function Hp(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mr,lastRenderedState:J},next:null};var o={};return t.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mr,lastRenderedState:o},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function qp(e){var t=Hp(e);t.next===null&&(t=e.alternate.memoizedState),no(e,t.next.queue,{},Rn())}function mu(){return Wt(xo)}function $p(){return At().memoizedState}function Fp(){return At().memoizedState}function MS(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var o=Rn();e=Ir(o);var l=Ur(t,e,o);l!==null&&(gn(l,t,o),Ks(l,t,o)),t={cache:Fc()},e.payload=t;return}t=t.return}}function OS(e,t,o){var l=Rn();o={lane:l,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},ka(e)?Wp(t,o):(o=Mc(e,t,o,l),o!==null&&(gn(o,e,l),Gp(o,t,l)))}function Vp(e,t,o){var l=Rn();no(e,t,o,l)}function no(e,t,o,l){var d={lane:l,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(ka(e))Wp(t,d);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var x=t.lastRenderedState,_=f(x,o);if(d.hasEagerState=!0,d.eagerState=_,xn(_,x))return la(e,t,d,0),yt===null&&aa(),!1}catch{}if(o=Mc(e,t,d,l),o!==null)return gn(o,e,l),Gp(o,t,l),!0}return!1}function gu(e,t,o,l){if(l={lane:2,revertLane:Yu(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},ka(e)){if(t)throw Error(a(479))}else t=Mc(e,o,l,2),t!==null&&gn(t,e,2)}function ka(e){var t=e.alternate;return e===Qe||t!==null&&t===Qe}function Wp(e,t){is=Sa=!0;var o=e.pending;o===null?t.next=t:(t.next=o.next,o.next=t),e.pending=t}function Gp(e,t,o){if((o&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,o|=l,t.lanes=o,Kh(e,o)}}var ro={readContext:Wt,use:ja,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt};ro.useEffectEvent=Tt;var Yp={readContext:Wt,use:ja,useCallback:function(e,t){return cn().memoizedState=[e,t===void 0?null:t],e},useContext:Wt,useEffect:_p,useImperativeHandle:function(e,t,o){o=o!=null?o.concat([e]):null,Ra(4194308,4,Dp.bind(null,t,e),o)},useLayoutEffect:function(e,t){return Ra(4194308,4,e,t)},useInsertionEffect:function(e,t){Ra(4,2,e,t)},useMemo:function(e,t){var o=cn();t=t===void 0?null:t;var l=e();if(Si){Ie(!0);try{e()}finally{Ie(!1)}}return o.memoizedState=[l,t],l},useReducer:function(e,t,o){var l=cn();if(o!==void 0){var d=o(t);if(Si){Ie(!0);try{o(t)}finally{Ie(!1)}}}else d=t;return l.memoizedState=l.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},l.queue=e,e=e.dispatch=OS.bind(null,Qe,e),[l.memoizedState,e]},useRef:function(e){var t=cn();return e={current:e},t.memoizedState=e},useState:function(e){e=cu(e);var t=e.queue,o=Vp.bind(null,Qe,t);return t.dispatch=o,[e.memoizedState,o]},useDebugValue:hu,useDeferredValue:function(e,t){var o=cn();return fu(o,e,t)},useTransition:function(){var e=cu(!1);return e=Bp.bind(null,Qe,e.queue,!0,!1),cn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,o){var l=Qe,d=cn();if(ot){if(o===void 0)throw Error(a(407));o=o()}else{if(o=t(),yt===null)throw Error(a(349));(it&127)!==0||mp(l,t,o)}d.memoizedState=o;var f={value:o,getSnapshot:t};return d.queue=f,_p(yp.bind(null,l,f,e),[e]),l.flags|=2048,os(9,{destroy:void 0},gp.bind(null,l,f,o,t),null),o},useId:function(){var e=cn(),t=yt.identifierPrefix;if(ot){var o=er,l=Zn;o=(l&~(1<<32-pe(l)-1)).toString(32)+o,t="_"+t+"R_"+o,o=wa++,0<o&&(t+="H"+o.toString(32)),t+="_"}else o=ES++,t="_"+t+"r_"+o.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:mu,useFormState:Rp,useActionState:Rp,useOptimistic:function(e){var t=cn();t.memoizedState=t.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=o,t=gu.bind(null,Qe,!0,o),o.dispatch=t,[e,t]},useMemoCache:ou,useCacheRefresh:function(){return cn().memoizedState=MS.bind(null,Qe)},useEffectEvent:function(e){var t=cn(),o={impl:e};return t.memoizedState=o,function(){if((ut&2)!==0)throw Error(a(440));return o.impl.apply(void 0,arguments)}}},yu={readContext:Wt,use:ja,useCallback:Up,useContext:Wt,useEffect:du,useImperativeHandle:Ip,useInsertionEffect:Mp,useLayoutEffect:Op,useMemo:zp,useReducer:Ta,useRef:Np,useState:function(){return Ta(mr)},useDebugValue:hu,useDeferredValue:function(e,t){var o=At();return Lp(o,pt.memoizedState,e,t)},useTransition:function(){var e=Ta(mr)[0],t=At().memoizedState;return[typeof e=="boolean"?e:to(e),t]},useSyncExternalStore:pp,useId:$p,useHostTransitionStatus:mu,useFormState:Ep,useActionState:Ep,useOptimistic:function(e,t){var o=At();return xp(o,pt,e,t)},useMemoCache:ou,useCacheRefresh:Fp};yu.useEffectEvent=Pp;var Xp={readContext:Wt,use:ja,useCallback:Up,useContext:Wt,useEffect:du,useImperativeHandle:Ip,useInsertionEffect:Mp,useLayoutEffect:Op,useMemo:zp,useReducer:lu,useRef:Np,useState:function(){return lu(mr)},useDebugValue:hu,useDeferredValue:function(e,t){var o=At();return pt===null?fu(o,e,t):Lp(o,pt.memoizedState,e,t)},useTransition:function(){var e=lu(mr)[0],t=At().memoizedState;return[typeof e=="boolean"?e:to(e),t]},useSyncExternalStore:pp,useId:$p,useHostTransitionStatus:mu,useFormState:Ap,useActionState:Ap,useOptimistic:function(e,t){var o=At();return pt!==null?xp(o,pt,e,t):(o.baseState=e,[e,o.queue.dispatch])},useMemoCache:ou,useCacheRefresh:Fp};Xp.useEffectEvent=Pp;function vu(e,t,o,l){t=e.memoizedState,o=o(l,t),o=o==null?t:k({},t,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var bu={enqueueSetState:function(e,t,o){e=e._reactInternals;var l=Rn(),d=Ir(l);d.payload=t,o!=null&&(d.callback=o),t=Ur(e,d,l),t!==null&&(gn(t,e,l),Ks(t,e,l))},enqueueReplaceState:function(e,t,o){e=e._reactInternals;var l=Rn(),d=Ir(l);d.tag=1,d.payload=t,o!=null&&(d.callback=o),t=Ur(e,d,l),t!==null&&(gn(t,e,l),Ks(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var o=Rn(),l=Ir(o);l.tag=2,t!=null&&(l.callback=t),t=Ur(e,l,o),t!==null&&(gn(t,e,o),Ks(t,e,o))}};function Jp(e,t,o,l,d,f,x){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,f,x):t.prototype&&t.prototype.isPureReactComponent?!$s(o,l)||!$s(d,f):!0}function Kp(e,t,o,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(o,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(o,l),t.state!==e&&bu.enqueueReplaceState(t,t.state,null)}function wi(e,t){var o=t;if("ref"in t){o={};for(var l in t)l!=="ref"&&(o[l]=t[l])}if(e=e.defaultProps){o===t&&(o=k({},o));for(var d in e)o[d]===void 0&&(o[d]=e[d])}return o}function Qp(e){oa(e)}function Zp(e){console.error(e)}function em(e){oa(e)}function Aa(e,t){try{var o=e.onUncaughtError;o(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function tm(e,t,o){try{var l=e.onCaughtError;l(o.value,{componentStack:o.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function xu(e,t,o){return o=Ir(o),o.tag=3,o.payload={element:null},o.callback=function(){Aa(e,t)},o}function nm(e){return e=Ir(e),e.tag=3,e}function rm(e,t,o,l){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var f=l.value;e.payload=function(){return d(f)},e.callback=function(){tm(t,o,l)}}var x=o.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(e.callback=function(){tm(t,o,l),typeof d!="function"&&($r===null?$r=new Set([this]):$r.add(this));var _=l.stack;this.componentDidCatch(l.value,{componentStack:_!==null?_:""})})}function DS(e,t,o,l,d){if(o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=o.alternate,t!==null&&Qi(t,o,d,!0),o=wn.current,o!==null){switch(o.tag){case 31:case 13:return zn===null?Ha():o.alternate===null&&Rt===0&&(Rt=3),o.flags&=-257,o.flags|=65536,o.lanes=d,l===ga?o.flags|=16384:(t=o.updateQueue,t===null?o.updateQueue=new Set([l]):t.add(l),Vu(e,l,d)),!1;case 22:return o.flags|=65536,l===ga?o.flags|=16384:(t=o.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},o.updateQueue=t):(o=t.retryQueue,o===null?t.retryQueue=new Set([l]):o.add(l)),Vu(e,l,d)),!1}throw Error(a(435,o.tag))}return Vu(e,l,d),Ha(),!1}if(ot)return t=wn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,l!==Lc&&(e=Error(a(422),{cause:l}),Ws(On(e,o)))):(l!==Lc&&(t=Error(a(423),{cause:l}),Ws(On(t,o))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,l=On(l,o),d=xu(e.stateNode,l,d),Jc(e,d),Rt!==4&&(Rt=2)),!1;var f=Error(a(520),{cause:l});if(f=On(f,o),ho===null?ho=[f]:ho.push(f),Rt!==4&&(Rt=2),t===null)return!0;l=On(l,o),o=t;do{switch(o.tag){case 3:return o.flags|=65536,e=d&-d,o.lanes|=e,e=xu(o.stateNode,l,e),Jc(o,e),!1;case 1:if(t=o.type,f=o.stateNode,(o.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&($r===null||!$r.has(f))))return o.flags|=65536,d&=-d,o.lanes|=d,d=nm(d),rm(d,e,o,l),Jc(o,d),!1}o=o.return}while(o!==null);return!1}var Su=Error(a(461)),Ot=!1;function Gt(e,t,o,l){t.child=e===null?ap(t,null,o,l):xi(t,e.child,o,l)}function im(e,t,o,l,d){o=o.render;var f=t.ref;if("ref"in l){var x={};for(var _ in l)_!=="ref"&&(x[_]=l[_])}else x=l;return gi(t),l=nu(e,t,o,x,f,d),_=ru(),e!==null&&!Ot?(iu(e,t,d),gr(e,t,d)):(ot&&_&&Uc(t),t.flags|=1,Gt(e,t,l,d),t.child)}function sm(e,t,o,l,d){if(e===null){var f=o.type;return typeof f=="function"&&!Oc(f)&&f.defaultProps===void 0&&o.compare===null?(t.tag=15,t.type=f,om(e,t,f,l,d)):(e=ua(o.type,null,l,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!Au(e,d)){var x=f.memoizedProps;if(o=o.compare,o=o!==null?o:$s,o(x,l)&&e.ref===t.ref)return gr(e,t,d)}return t.flags|=1,e=ur(f,l),e.ref=t.ref,e.return=t,t.child=e}function om(e,t,o,l,d){if(e!==null){var f=e.memoizedProps;if($s(f,l)&&e.ref===t.ref)if(Ot=!1,t.pendingProps=l=f,Au(e,d))(e.flags&131072)!==0&&(Ot=!0);else return t.lanes=e.lanes,gr(e,t,d)}return wu(e,t,o,l,d)}function am(e,t,o,l){var d=l.children,f=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(f=f!==null?f.baseLanes|o:o,e!==null){for(l=t.child=e.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~f}else l=0,t.child=null;return lm(e,t,f,o,l)}if((o&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&pa(t,f!==null?f.cachePool:null),f!==null?up(t,f):Qc(),dp(t);else return l=t.lanes=536870912,lm(e,t,f!==null?f.baseLanes|o:o,o,l)}else f!==null?(pa(t,f.cachePool),up(t,f),Lr(),t.memoizedState=null):(e!==null&&pa(t,null),Qc(),Lr());return Gt(e,t,d,o),t.child}function io(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function lm(e,t,o,l,d){var f=Wc();return f=f===null?null:{parent:Pt._currentValue,pool:f},t.memoizedState={baseLanes:o,cachePool:f},e!==null&&pa(t,null),Qc(),dp(t),e!==null&&Qi(e,t,l,!0),t.childLanes=d,null}function Na(e,t){return t=Pa({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function cm(e,t,o){return xi(t,e.child,null,o),e=Na(t,t.pendingProps),e.flags|=2,Cn(t),t.memoizedState=null,e}function IS(e,t,o){var l=t.pendingProps,d=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ot){if(l.mode==="hidden")return e=Na(t,l),t.lanes=536870912,io(null,e);if(eu(t),(e=xt)?(e=Sg(e,Un),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:_r!==null?{id:Zn,overflow:er}:null,retryLane:536870912,hydrationErrors:null},o=Wf(e),o.return=t,t.child=o,Vt=t,xt=null)):e=null,e===null)throw Mr(t);return t.lanes=536870912,null}return Na(t,l)}var f=e.memoizedState;if(f!==null){var x=f.dehydrated;if(eu(t),d)if(t.flags&256)t.flags&=-257,t=cm(e,t,o);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(a(558));else if(Ot||Qi(e,t,o,!1),d=(o&e.childLanes)!==0,Ot||d){if(l=yt,l!==null&&(x=Qh(l,o),x!==0&&x!==f.retryLane))throw f.retryLane=x,hi(e,x),gn(l,e,x),Su;Ha(),t=cm(e,t,o)}else e=f.treeContext,xt=Ln(x.nextSibling),Vt=t,ot=!0,Pr=null,Un=!1,e!==null&&Xf(t,e),t=Na(t,l),t.flags|=4096;return t}return e=ur(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function _a(e,t){var o=t.ref;if(o===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(a(284));(e===null||e.ref!==o)&&(t.flags|=4194816)}}function wu(e,t,o,l,d){return gi(t),o=nu(e,t,o,l,void 0,d),l=ru(),e!==null&&!Ot?(iu(e,t,d),gr(e,t,d)):(ot&&l&&Uc(t),t.flags|=1,Gt(e,t,o,d),t.child)}function um(e,t,o,l,d,f){return gi(t),t.updateQueue=null,o=fp(t,l,o,d),hp(e),l=ru(),e!==null&&!Ot?(iu(e,t,f),gr(e,t,f)):(ot&&l&&Uc(t),t.flags|=1,Gt(e,t,o,f),t.child)}function dm(e,t,o,l,d){if(gi(t),t.stateNode===null){var f=Yi,x=o.contextType;typeof x=="object"&&x!==null&&(f=Wt(x)),f=new o(l,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=bu,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=l,f.state=t.memoizedState,f.refs={},Yc(t),x=o.contextType,f.context=typeof x=="object"&&x!==null?Wt(x):Yi,f.state=t.memoizedState,x=o.getDerivedStateFromProps,typeof x=="function"&&(vu(t,o,x,l),f.state=t.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(x=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),x!==f.state&&bu.enqueueReplaceState(f,f.state,null),Zs(t,l,f,d),Qs(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){f=t.stateNode;var _=t.memoizedProps,Z=wi(o,_);f.props=Z;var ge=f.context,Ee=o.contextType;x=Yi,typeof Ee=="object"&&Ee!==null&&(x=Wt(Ee));var Pe=o.getDerivedStateFromProps;Ee=typeof Pe=="function"||typeof f.getSnapshotBeforeUpdate=="function",_=t.pendingProps!==_,Ee||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_||ge!==x)&&Kp(t,f,l,x),Dr=!1;var ve=t.memoizedState;f.state=ve,Zs(t,l,f,d),Qs(),ge=t.memoizedState,_||ve!==ge||Dr?(typeof Pe=="function"&&(vu(t,o,Pe,l),ge=t.memoizedState),(Z=Dr||Jp(t,o,Z,l,ve,ge,x))?(Ee||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=ge),f.props=l,f.state=ge,f.context=x,l=Z):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{f=t.stateNode,Xc(e,t),x=t.memoizedProps,Ee=wi(o,x),f.props=Ee,Pe=t.pendingProps,ve=f.context,ge=o.contextType,Z=Yi,typeof ge=="object"&&ge!==null&&(Z=Wt(ge)),_=o.getDerivedStateFromProps,(ge=typeof _=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(x!==Pe||ve!==Z)&&Kp(t,f,l,Z),Dr=!1,ve=t.memoizedState,f.state=ve,Zs(t,l,f,d),Qs();var we=t.memoizedState;x!==Pe||ve!==we||Dr||e!==null&&e.dependencies!==null&&ha(e.dependencies)?(typeof _=="function"&&(vu(t,o,_,l),we=t.memoizedState),(Ee=Dr||Jp(t,o,Ee,l,ve,we,Z)||e!==null&&e.dependencies!==null&&ha(e.dependencies))?(ge||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,we,Z),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,we,Z)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||x===e.memoizedProps&&ve===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&ve===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=we),f.props=l,f.state=we,f.context=Z,l=Ee):(typeof f.componentDidUpdate!="function"||x===e.memoizedProps&&ve===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&ve===e.memoizedState||(t.flags|=1024),l=!1)}return f=l,_a(e,t),l=(t.flags&128)!==0,f||l?(f=t.stateNode,o=l&&typeof o.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&l?(t.child=xi(t,e.child,null,d),t.child=xi(t,null,o,d)):Gt(e,t,o,d),t.memoizedState=f.state,e=t.child):e=gr(e,t,d),e}function hm(e,t,o,l){return pi(),t.flags|=256,Gt(e,t,o,l),t.child}var Cu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ju(e){return{baseLanes:e,cachePool:tp()}}function Tu(e,t,o){return e=e!==null?e.childLanes&~o:0,t&&(e|=Tn),e}function fm(e,t,o){var l=t.pendingProps,d=!1,f=(t.flags&128)!==0,x;if((x=f)||(x=e!==null&&e.memoizedState===null?!1:(kt.current&2)!==0),x&&(d=!0,t.flags&=-129),x=(t.flags&32)!==0,t.flags&=-33,e===null){if(ot){if(d?zr(t):Lr(),(e=xt)?(e=Sg(e,Un),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:_r!==null?{id:Zn,overflow:er}:null,retryLane:536870912,hydrationErrors:null},o=Wf(e),o.return=t,t.child=o,Vt=t,xt=null)):e=null,e===null)throw Mr(t);return ad(e)?t.lanes=32:t.lanes=536870912,null}var _=l.children;return l=l.fallback,d?(Lr(),d=t.mode,_=Pa({mode:"hidden",children:_},d),l=fi(l,d,o,null),_.return=t,l.return=t,_.sibling=l,t.child=_,l=t.child,l.memoizedState=ju(o),l.childLanes=Tu(e,x,o),t.memoizedState=Cu,io(null,l)):(zr(t),Ru(t,_))}var Z=e.memoizedState;if(Z!==null&&(_=Z.dehydrated,_!==null)){if(f)t.flags&256?(zr(t),t.flags&=-257,t=Eu(e,t,o)):t.memoizedState!==null?(Lr(),t.child=e.child,t.flags|=128,t=null):(Lr(),_=l.fallback,d=t.mode,l=Pa({mode:"visible",children:l.children},d),_=fi(_,d,o,null),_.flags|=2,l.return=t,_.return=t,l.sibling=_,t.child=l,xi(t,e.child,null,o),l=t.child,l.memoizedState=ju(o),l.childLanes=Tu(e,x,o),t.memoizedState=Cu,t=io(null,l));else if(zr(t),ad(_)){if(x=_.nextSibling&&_.nextSibling.dataset,x)var ge=x.dgst;x=ge,l=Error(a(419)),l.stack="",l.digest=x,Ws({value:l,source:null,stack:null}),t=Eu(e,t,o)}else if(Ot||Qi(e,t,o,!1),x=(o&e.childLanes)!==0,Ot||x){if(x=yt,x!==null&&(l=Qh(x,o),l!==0&&l!==Z.retryLane))throw Z.retryLane=l,hi(e,l),gn(x,e,l),Su;od(_)||Ha(),t=Eu(e,t,o)}else od(_)?(t.flags|=192,t.child=e.child,t=null):(e=Z.treeContext,xt=Ln(_.nextSibling),Vt=t,ot=!0,Pr=null,Un=!1,e!==null&&Xf(t,e),t=Ru(t,l.children),t.flags|=4096);return t}return d?(Lr(),_=l.fallback,d=t.mode,Z=e.child,ge=Z.sibling,l=ur(Z,{mode:"hidden",children:l.children}),l.subtreeFlags=Z.subtreeFlags&65011712,ge!==null?_=ur(ge,_):(_=fi(_,d,o,null),_.flags|=2),_.return=t,l.return=t,l.sibling=_,t.child=l,io(null,l),l=t.child,_=e.child.memoizedState,_===null?_=ju(o):(d=_.cachePool,d!==null?(Z=Pt._currentValue,d=d.parent!==Z?{parent:Z,pool:Z}:d):d=tp(),_={baseLanes:_.baseLanes|o,cachePool:d}),l.memoizedState=_,l.childLanes=Tu(e,x,o),t.memoizedState=Cu,io(e.child,l)):(zr(t),o=e.child,e=o.sibling,o=ur(o,{mode:"visible",children:l.children}),o.return=t,o.sibling=null,e!==null&&(x=t.deletions,x===null?(t.deletions=[e],t.flags|=16):x.push(e)),t.child=o,t.memoizedState=null,o)}function Ru(e,t){return t=Pa({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Pa(e,t){return e=Sn(22,e,null,t),e.lanes=0,e}function Eu(e,t,o){return xi(t,e.child,null,o),e=Ru(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function pm(e,t,o){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),qc(e.return,t,o)}function ku(e,t,o,l,d,f){var x=e.memoizedState;x===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:o,tailMode:d,treeForkCount:f}:(x.isBackwards=t,x.rendering=null,x.renderingStartTime=0,x.last=l,x.tail=o,x.tailMode=d,x.treeForkCount=f)}function mm(e,t,o){var l=t.pendingProps,d=l.revealOrder,f=l.tail;l=l.children;var x=kt.current,_=(x&2)!==0;if(_?(x=x&1|2,t.flags|=128):x&=1,C(kt,x),Gt(e,t,l,o),l=ot?Vs:0,!_&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pm(e,o,t);else if(e.tag===19)pm(e,o,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(o=t.child,d=null;o!==null;)e=o.alternate,e!==null&&xa(e)===null&&(d=o),o=o.sibling;o=d,o===null?(d=t.child,t.child=null):(d=o.sibling,o.sibling=null),ku(t,!1,d,o,f,l);break;case"backwards":case"unstable_legacy-backwards":for(o=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&xa(e)===null){t.child=d;break}e=d.sibling,d.sibling=o,o=d,d=e}ku(t,!0,o,null,f,l);break;case"together":ku(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function gr(e,t,o){if(e!==null&&(t.dependencies=e.dependencies),qr|=t.lanes,(o&t.childLanes)===0)if(e!==null){if(Qi(e,t,o,!1),(o&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(a(153));if(t.child!==null){for(e=t.child,o=ur(e,e.pendingProps),t.child=o,o.return=t;e.sibling!==null;)e=e.sibling,o=o.sibling=ur(e,e.pendingProps),o.return=t;o.sibling=null}return t.child}function Au(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ha(e)))}function US(e,t,o){switch(t.tag){case 3:v(t,t.stateNode.containerInfo),Or(t,Pt,e.memoizedState.cache),pi();break;case 27:case 5:N(t);break;case 4:v(t,t.stateNode.containerInfo);break;case 10:Or(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,eu(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(zr(t),t.flags|=128,null):(o&t.child.childLanes)!==0?fm(e,t,o):(zr(t),e=gr(e,t,o),e!==null?e.sibling:null);zr(t);break;case 19:var d=(e.flags&128)!==0;if(l=(o&t.childLanes)!==0,l||(Qi(e,t,o,!1),l=(o&t.childLanes)!==0),d){if(l)return mm(e,t,o);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),C(kt,kt.current),l)break;return null;case 22:return t.lanes=0,am(e,t,o,t.pendingProps);case 24:Or(t,Pt,e.memoizedState.cache)}return gr(e,t,o)}function gm(e,t,o){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ot=!0;else{if(!Au(e,o)&&(t.flags&128)===0)return Ot=!1,US(e,t,o);Ot=(e.flags&131072)!==0}else Ot=!1,ot&&(t.flags&1048576)!==0&&Yf(t,Vs,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=vi(t.elementType),t.type=e,typeof e=="function")Oc(e)?(l=wi(e,l),t.tag=1,t=dm(null,t,e,l,o)):(t.tag=0,t=wu(null,t,e,l,o));else{if(e!=null){var d=e.$$typeof;if(d===le){t.tag=11,t=im(null,t,e,l,o);break e}else if(d===ae){t.tag=14,t=sm(null,t,e,l,o);break e}}throw t=be(e)||e,Error(a(306,t,""))}}return t;case 0:return wu(e,t,t.type,t.pendingProps,o);case 1:return l=t.type,d=wi(l,t.pendingProps),dm(e,t,l,d,o);case 3:e:{if(v(t,t.stateNode.containerInfo),e===null)throw Error(a(387));l=t.pendingProps;var f=t.memoizedState;d=f.element,Xc(e,t),Zs(t,l,null,o);var x=t.memoizedState;if(l=x.cache,Or(t,Pt,l),l!==f.cache&&$c(t,[Pt],o,!0),Qs(),l=x.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:x.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=hm(e,t,l,o);break e}else if(l!==d){d=On(Error(a(424)),t),Ws(d),t=hm(e,t,l,o);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,xt=Ln(e.firstChild),Vt=t,ot=!0,Pr=null,Un=!0,o=ap(t,null,l,o),t.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(pi(),l===d){t=gr(e,t,o);break e}Gt(e,t,l,o)}t=t.child}return t;case 26:return _a(e,t),e===null?(o=Eg(t.type,null,t.pendingProps,null))?t.memoizedState=o:ot||(o=t.type,e=t.pendingProps,l=Ya(E.current).createElement(o),l[Ft]=t,l[un]=e,Yt(l,o,e),Ht(l),t.stateNode=l):t.memoizedState=Eg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return N(t),e===null&&ot&&(l=t.stateNode=jg(t.type,t.pendingProps,E.current),Vt=t,Un=!0,d=xt,Gr(t.type)?(ld=d,xt=Ln(l.firstChild)):xt=d),Gt(e,t,t.pendingProps.children,o),_a(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ot&&((d=l=xt)&&(l=f1(l,t.type,t.pendingProps,Un),l!==null?(t.stateNode=l,Vt=t,xt=Ln(l.firstChild),Un=!1,d=!0):d=!1),d||Mr(t)),N(t),d=t.type,f=t.pendingProps,x=e!==null?e.memoizedProps:null,l=f.children,rd(d,f)?l=null:x!==null&&rd(d,x)&&(t.flags|=32),t.memoizedState!==null&&(d=nu(e,t,kS,null,null,o),xo._currentValue=d),_a(e,t),Gt(e,t,l,o),t.child;case 6:return e===null&&ot&&((e=o=xt)&&(o=p1(o,t.pendingProps,Un),o!==null?(t.stateNode=o,Vt=t,xt=null,e=!0):e=!1),e||Mr(t)),null;case 13:return fm(e,t,o);case 4:return v(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=xi(t,null,l,o):Gt(e,t,l,o),t.child;case 11:return im(e,t,t.type,t.pendingProps,o);case 7:return Gt(e,t,t.pendingProps,o),t.child;case 8:return Gt(e,t,t.pendingProps.children,o),t.child;case 12:return Gt(e,t,t.pendingProps.children,o),t.child;case 10:return l=t.pendingProps,Or(t,t.type,l.value),Gt(e,t,l.children,o),t.child;case 9:return d=t.type._context,l=t.pendingProps.children,gi(t),d=Wt(d),l=l(d),t.flags|=1,Gt(e,t,l,o),t.child;case 14:return sm(e,t,t.type,t.pendingProps,o);case 15:return om(e,t,t.type,t.pendingProps,o);case 19:return mm(e,t,o);case 31:return IS(e,t,o);case 22:return am(e,t,o,t.pendingProps);case 24:return gi(t),l=Wt(Pt),e===null?(d=Wc(),d===null&&(d=yt,f=Fc(),d.pooledCache=f,f.refCount++,f!==null&&(d.pooledCacheLanes|=o),d=f),t.memoizedState={parent:l,cache:d},Yc(t),Or(t,Pt,d)):((e.lanes&o)!==0&&(Xc(e,t),Zs(t,null,null,o),Qs()),d=e.memoizedState,f=t.memoizedState,d.parent!==l?(d={parent:l,cache:l},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),Or(t,Pt,l)):(l=f.cache,Or(t,Pt,l),l!==d.cache&&$c(t,[Pt],o,!0))),Gt(e,t,t.pendingProps.children,o),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function yr(e){e.flags|=4}function Nu(e,t,o,l,d){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if($m())e.flags|=8192;else throw bi=ga,Gc}else e.flags&=-16777217}function ym(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Pg(t))if($m())e.flags|=8192;else throw bi=ga,Gc}function Ma(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Xh():536870912,e.lanes|=t,us|=t)}function so(e,t){if(!ot)switch(e.tailMode){case"hidden":t=e.tail;for(var o=null;t!==null;)t.alternate!==null&&(o=t),t=t.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function St(e){var t=e.alternate!==null&&e.alternate.child===e.child,o=0,l=0;if(t)for(var d=e.child;d!==null;)o|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)o|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=o,t}function zS(e,t,o){var l=t.pendingProps;switch(zc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(t),null;case 1:return St(t),null;case 3:return o=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),fr(Pt),S(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Ki(t)?yr(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Bc())),St(t),null;case 26:var d=t.type,f=t.memoizedState;return e===null?(yr(t),f!==null?(St(t),ym(t,f)):(St(t),Nu(t,d,null,l,o))):f?f!==e.memoizedState?(yr(t),St(t),ym(t,f)):(St(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&yr(t),St(t),Nu(t,d,e,l,o)),null;case 27:if(F(t),o=E.current,d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&yr(t);else{if(!l){if(t.stateNode===null)throw Error(a(166));return St(t),null}e=T.current,Ki(t)?Jf(t):(e=jg(d,l,o),t.stateNode=e,yr(t))}return St(t),null;case 5:if(F(t),d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&yr(t);else{if(!l){if(t.stateNode===null)throw Error(a(166));return St(t),null}if(f=T.current,Ki(t))Jf(t);else{var x=Ya(E.current);switch(f){case 1:f=x.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:f=x.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":f=x.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":f=x.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":f=x.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?x.createElement("select",{is:l.is}):x.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?x.createElement(d,{is:l.is}):x.createElement(d)}}f[Ft]=t,f[un]=l;e:for(x=t.child;x!==null;){if(x.tag===5||x.tag===6)f.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===t)break e;for(;x.sibling===null;){if(x.return===null||x.return===t)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}t.stateNode=f;e:switch(Yt(f,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&yr(t)}}return St(t),Nu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,o),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&yr(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(a(166));if(e=E.current,Ki(t)){if(e=t.stateNode,o=t.memoizedProps,l=null,d=Vt,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}e[Ft]=t,e=!!(e.nodeValue===o||l!==null&&l.suppressHydrationWarning===!0||fg(e.nodeValue,o)),e||Mr(t,!0)}else e=Ya(e).createTextNode(l),e[Ft]=t,t.stateNode=e}return St(t),null;case 31:if(o=t.memoizedState,e===null||e.memoizedState!==null){if(l=Ki(t),o!==null){if(e===null){if(!l)throw Error(a(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(557));e[Ft]=t}else pi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;St(t),e=!1}else o=Bc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),e=!0;if(!e)return t.flags&256?(Cn(t),t):(Cn(t),null);if((t.flags&128)!==0)throw Error(a(558))}return St(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Ki(t),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(a(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(a(317));d[Ft]=t}else pi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;St(t),d=!1}else d=Bc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return t.flags&256?(Cn(t),t):(Cn(t),null)}return Cn(t),(t.flags&128)!==0?(t.lanes=o,t):(o=l!==null,e=e!==null&&e.memoizedState!==null,o&&(l=t.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==d&&(l.flags|=2048)),o!==e&&o&&(t.child.flags|=8192),Ma(t,t.updateQueue),St(t),null);case 4:return S(),e===null&&Qu(t.stateNode.containerInfo),St(t),null;case 10:return fr(t.type),St(t),null;case 19:if(B(kt),l=t.memoizedState,l===null)return St(t),null;if(d=(t.flags&128)!==0,f=l.rendering,f===null)if(d)so(l,!1);else{if(Rt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=xa(e),f!==null){for(t.flags|=128,so(l,!1),e=f.updateQueue,t.updateQueue=e,Ma(t,e),t.subtreeFlags=0,e=o,o=t.child;o!==null;)Vf(o,e),o=o.sibling;return C(kt,kt.current&1|2),ot&&dr(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&Te()>za&&(t.flags|=128,d=!0,so(l,!1),t.lanes=4194304)}else{if(!d)if(e=xa(f),e!==null){if(t.flags|=128,d=!0,e=e.updateQueue,t.updateQueue=e,Ma(t,e),so(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!ot)return St(t),null}else 2*Te()-l.renderingStartTime>za&&o!==536870912&&(t.flags|=128,d=!0,so(l,!1),t.lanes=4194304);l.isBackwards?(f.sibling=t.child,t.child=f):(e=l.last,e!==null?e.sibling=f:t.child=f,l.last=f)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Te(),e.sibling=null,o=kt.current,C(kt,d?o&1|2:o&1),ot&&dr(t,l.treeForkCount),e):(St(t),null);case 22:case 23:return Cn(t),Zc(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(o&536870912)!==0&&(t.flags&128)===0&&(St(t),t.subtreeFlags&6&&(t.flags|=8192)):St(t),o=t.updateQueue,o!==null&&Ma(t,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==o&&(t.flags|=2048),e!==null&&B(yi),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),fr(Pt),St(t),null;case 25:return null;case 30:return null}throw Error(a(156,t.tag))}function LS(e,t){switch(zc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return fr(Pt),S(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return F(t),null;case 31:if(t.memoizedState!==null){if(Cn(t),t.alternate===null)throw Error(a(340));pi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Cn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(a(340));pi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return B(kt),null;case 4:return S(),null;case 10:return fr(t.type),null;case 22:case 23:return Cn(t),Zc(),e!==null&&B(yi),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return fr(Pt),null;case 25:return null;default:return null}}function vm(e,t){switch(zc(t),t.tag){case 3:fr(Pt),S();break;case 26:case 27:case 5:F(t);break;case 4:S();break;case 31:t.memoizedState!==null&&Cn(t);break;case 13:Cn(t);break;case 19:B(kt);break;case 10:fr(t.type);break;case 22:case 23:Cn(t),Zc(),e!==null&&B(yi);break;case 24:fr(Pt)}}function oo(e,t){try{var o=t.updateQueue,l=o!==null?o.lastEffect:null;if(l!==null){var d=l.next;o=d;do{if((o.tag&e)===e){l=void 0;var f=o.create,x=o.inst;l=f(),x.destroy=l}o=o.next}while(o!==d)}}catch(_){ft(t,t.return,_)}}function Br(e,t,o){try{var l=t.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var f=d.next;l=f;do{if((l.tag&e)===e){var x=l.inst,_=x.destroy;if(_!==void 0){x.destroy=void 0,d=t;var Z=o,ge=_;try{ge()}catch(Ee){ft(d,Z,Ee)}}}l=l.next}while(l!==f)}}catch(Ee){ft(t,t.return,Ee)}}function bm(e){var t=e.updateQueue;if(t!==null){var o=e.stateNode;try{cp(t,o)}catch(l){ft(e,e.return,l)}}}function xm(e,t,o){o.props=wi(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(l){ft(e,t,l)}}function ao(e,t){try{var o=e.ref;if(o!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof o=="function"?e.refCleanup=o(l):o.current=l}}catch(d){ft(e,t,d)}}function tr(e,t){var o=e.ref,l=e.refCleanup;if(o!==null)if(typeof l=="function")try{l()}catch(d){ft(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){ft(e,t,d)}else o.current=null}function Sm(e){var t=e.type,o=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":o.autoFocus&&l.focus();break e;case"img":o.src?l.src=o.src:o.srcSet&&(l.srcset=o.srcSet)}}catch(d){ft(e,e.return,d)}}function _u(e,t,o){try{var l=e.stateNode;a1(l,e.type,o,t),l[un]=t}catch(d){ft(e,e.return,d)}}function wm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Gr(e.type)||e.tag===4}function Pu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||wm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Gr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Mu(e,t,o){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(e,t):(t=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,t.appendChild(e),o=o._reactRootContainer,o!=null||t.onclick!==null||(t.onclick=lr));else if(l!==4&&(l===27&&Gr(e.type)&&(o=e.stateNode,t=null),e=e.child,e!==null))for(Mu(e,t,o),e=e.sibling;e!==null;)Mu(e,t,o),e=e.sibling}function Oa(e,t,o){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?o.insertBefore(e,t):o.appendChild(e);else if(l!==4&&(l===27&&Gr(e.type)&&(o=e.stateNode),e=e.child,e!==null))for(Oa(e,t,o),e=e.sibling;e!==null;)Oa(e,t,o),e=e.sibling}function Cm(e){var t=e.stateNode,o=e.memoizedProps;try{for(var l=e.type,d=t.attributes;d.length;)t.removeAttributeNode(d[0]);Yt(t,l,o),t[Ft]=e,t[un]=o}catch(f){ft(e,e.return,f)}}var vr=!1,Dt=!1,Ou=!1,jm=typeof WeakSet=="function"?WeakSet:Set,qt=null;function BS(e,t){if(e=e.containerInfo,td=tl,e=If(e),Ec(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var l=o.getSelection&&o.getSelection();if(l&&l.rangeCount!==0){o=l.anchorNode;var d=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{o.nodeType,f.nodeType}catch{o=null;break e}var x=0,_=-1,Z=-1,ge=0,Ee=0,Pe=e,ve=null;t:for(;;){for(var we;Pe!==o||d!==0&&Pe.nodeType!==3||(_=x+d),Pe!==f||l!==0&&Pe.nodeType!==3||(Z=x+l),Pe.nodeType===3&&(x+=Pe.nodeValue.length),(we=Pe.firstChild)!==null;)ve=Pe,Pe=we;for(;;){if(Pe===e)break t;if(ve===o&&++ge===d&&(_=x),ve===f&&++Ee===l&&(Z=x),(we=Pe.nextSibling)!==null)break;Pe=ve,ve=Pe.parentNode}Pe=we}o=_===-1||Z===-1?null:{start:_,end:Z}}else o=null}o=o||{start:0,end:0}}else o=null;for(nd={focusedElem:e,selectionRange:o},tl=!1,qt=t;qt!==null;)if(t=qt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,qt=e;else for(;qt!==null;){switch(t=qt,f=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(o=0;o<e.length;o++)d=e[o],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,o=t,d=f.memoizedProps,f=f.memoizedState,l=o.stateNode;try{var $e=wi(o.type,d);e=l.getSnapshotBeforeUpdate($e,f),l.__reactInternalSnapshotBeforeUpdate=e}catch(Ge){ft(o,o.return,Ge)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,o=e.nodeType,o===9)sd(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":sd(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=t.sibling,e!==null){e.return=t.return,qt=e;break}qt=t.return}}function Tm(e,t,o){var l=o.flags;switch(o.tag){case 0:case 11:case 15:xr(e,o),l&4&&oo(5,o);break;case 1:if(xr(e,o),l&4)if(e=o.stateNode,t===null)try{e.componentDidMount()}catch(x){ft(o,o.return,x)}else{var d=wi(o.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(x){ft(o,o.return,x)}}l&64&&bm(o),l&512&&ao(o,o.return);break;case 3:if(xr(e,o),l&64&&(e=o.updateQueue,e!==null)){if(t=null,o.child!==null)switch(o.child.tag){case 27:case 5:t=o.child.stateNode;break;case 1:t=o.child.stateNode}try{cp(e,t)}catch(x){ft(o,o.return,x)}}break;case 27:t===null&&l&4&&Cm(o);case 26:case 5:xr(e,o),t===null&&l&4&&Sm(o),l&512&&ao(o,o.return);break;case 12:xr(e,o);break;case 31:xr(e,o),l&4&&km(e,o);break;case 13:xr(e,o),l&4&&Am(e,o),l&64&&(e=o.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(o=XS.bind(null,o),m1(e,o))));break;case 22:if(l=o.memoizedState!==null||vr,!l){t=t!==null&&t.memoizedState!==null||Dt,d=vr;var f=Dt;vr=l,(Dt=t)&&!f?Sr(e,o,(o.subtreeFlags&8772)!==0):xr(e,o),vr=d,Dt=f}break;case 30:break;default:xr(e,o)}}function Rm(e){var t=e.alternate;t!==null&&(e.alternate=null,Rm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&uc(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var wt=null,hn=!1;function br(e,t,o){for(o=o.child;o!==null;)Em(e,t,o),o=o.sibling}function Em(e,t,o){if(Oe&&typeof Oe.onCommitFiberUnmount=="function")try{Oe.onCommitFiberUnmount(Be,o)}catch{}switch(o.tag){case 26:Dt||tr(o,t),br(e,t,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Dt||tr(o,t);var l=wt,d=hn;Gr(o.type)&&(wt=o.stateNode,hn=!1),br(e,t,o),yo(o.stateNode),wt=l,hn=d;break;case 5:Dt||tr(o,t);case 6:if(l=wt,d=hn,wt=null,br(e,t,o),wt=l,hn=d,wt!==null)if(hn)try{(wt.nodeType===9?wt.body:wt.nodeName==="HTML"?wt.ownerDocument.body:wt).removeChild(o.stateNode)}catch(f){ft(o,t,f)}else try{wt.removeChild(o.stateNode)}catch(f){ft(o,t,f)}break;case 18:wt!==null&&(hn?(e=wt,bg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,o.stateNode),vs(e)):bg(wt,o.stateNode));break;case 4:l=wt,d=hn,wt=o.stateNode.containerInfo,hn=!0,br(e,t,o),wt=l,hn=d;break;case 0:case 11:case 14:case 15:Br(2,o,t),Dt||Br(4,o,t),br(e,t,o);break;case 1:Dt||(tr(o,t),l=o.stateNode,typeof l.componentWillUnmount=="function"&&xm(o,t,l)),br(e,t,o);break;case 21:br(e,t,o);break;case 22:Dt=(l=Dt)||o.memoizedState!==null,br(e,t,o),Dt=l;break;default:br(e,t,o)}}function km(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{vs(e)}catch(o){ft(t,t.return,o)}}}function Am(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{vs(e)}catch(o){ft(t,t.return,o)}}function HS(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new jm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new jm),t;default:throw Error(a(435,e.tag))}}function Da(e,t){var o=HS(e);t.forEach(function(l){if(!o.has(l)){o.add(l);var d=JS.bind(null,e,l);l.then(d,d)}})}function fn(e,t){var o=t.deletions;if(o!==null)for(var l=0;l<o.length;l++){var d=o[l],f=e,x=t,_=x;e:for(;_!==null;){switch(_.tag){case 27:if(Gr(_.type)){wt=_.stateNode,hn=!1;break e}break;case 5:wt=_.stateNode,hn=!1;break e;case 3:case 4:wt=_.stateNode.containerInfo,hn=!0;break e}_=_.return}if(wt===null)throw Error(a(160));Em(f,x,d),wt=null,hn=!1,f=d.alternate,f!==null&&(f.return=null),d.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Nm(t,e),t=t.sibling}var Vn=null;function Nm(e,t){var o=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:fn(t,e),pn(e),l&4&&(Br(3,e,e.return),oo(3,e),Br(5,e,e.return));break;case 1:fn(t,e),pn(e),l&512&&(Dt||o===null||tr(o,o.return)),l&64&&vr&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?l:o.concat(l))));break;case 26:var d=Vn;if(fn(t,e),pn(e),l&512&&(Dt||o===null||tr(o,o.return)),l&4){var f=o!==null?o.memoizedState:null;if(l=e.memoizedState,o===null)if(l===null)if(e.stateNode===null){e:{l=e.type,o=e.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":f=d.getElementsByTagName("title")[0],(!f||f[Os]||f[Ft]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=d.createElement(l),d.head.insertBefore(f,d.querySelector("head > title"))),Yt(f,l,o),f[Ft]=e,Ht(f),l=f;break e;case"link":var x=Ng("link","href",d).get(l+(o.href||""));if(x){for(var _=0;_<x.length;_++)if(f=x[_],f.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&f.getAttribute("rel")===(o.rel==null?null:o.rel)&&f.getAttribute("title")===(o.title==null?null:o.title)&&f.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){x.splice(_,1);break t}}f=d.createElement(l),Yt(f,l,o),d.head.appendChild(f);break;case"meta":if(x=Ng("meta","content",d).get(l+(o.content||""))){for(_=0;_<x.length;_++)if(f=x[_],f.getAttribute("content")===(o.content==null?null:""+o.content)&&f.getAttribute("name")===(o.name==null?null:o.name)&&f.getAttribute("property")===(o.property==null?null:o.property)&&f.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&f.getAttribute("charset")===(o.charSet==null?null:o.charSet)){x.splice(_,1);break t}}f=d.createElement(l),Yt(f,l,o),d.head.appendChild(f);break;default:throw Error(a(468,l))}f[Ft]=e,Ht(f),l=f}e.stateNode=l}else _g(d,e.type,e.stateNode);else e.stateNode=Ag(d,l,e.memoizedProps);else f!==l?(f===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):f.count--,l===null?_g(d,e.type,e.stateNode):Ag(d,l,e.memoizedProps)):l===null&&e.stateNode!==null&&_u(e,e.memoizedProps,o.memoizedProps)}break;case 27:fn(t,e),pn(e),l&512&&(Dt||o===null||tr(o,o.return)),o!==null&&l&4&&_u(e,e.memoizedProps,o.memoizedProps);break;case 5:if(fn(t,e),pn(e),l&512&&(Dt||o===null||tr(o,o.return)),e.flags&32){d=e.stateNode;try{Hi(d,"")}catch($e){ft(e,e.return,$e)}}l&4&&e.stateNode!=null&&(d=e.memoizedProps,_u(e,d,o!==null?o.memoizedProps:d)),l&1024&&(Ou=!0);break;case 6:if(fn(t,e),pn(e),l&4){if(e.stateNode===null)throw Error(a(162));l=e.memoizedProps,o=e.stateNode;try{o.nodeValue=l}catch($e){ft(e,e.return,$e)}}break;case 3:if(Ka=null,d=Vn,Vn=Xa(t.containerInfo),fn(t,e),Vn=d,pn(e),l&4&&o!==null&&o.memoizedState.isDehydrated)try{vs(t.containerInfo)}catch($e){ft(e,e.return,$e)}Ou&&(Ou=!1,_m(e));break;case 4:l=Vn,Vn=Xa(e.stateNode.containerInfo),fn(t,e),pn(e),Vn=l;break;case 12:fn(t,e),pn(e);break;case 31:fn(t,e),pn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Da(e,l)));break;case 13:fn(t,e),pn(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Ua=Te()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Da(e,l)));break;case 22:d=e.memoizedState!==null;var Z=o!==null&&o.memoizedState!==null,ge=vr,Ee=Dt;if(vr=ge||d,Dt=Ee||Z,fn(t,e),Dt=Ee,vr=ge,pn(e),l&8192)e:for(t=e.stateNode,t._visibility=d?t._visibility&-2:t._visibility|1,d&&(o===null||Z||vr||Dt||Ci(e)),o=null,t=e;;){if(t.tag===5||t.tag===26){if(o===null){Z=o=t;try{if(f=Z.stateNode,d)x=f.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{_=Z.stateNode;var Pe=Z.memoizedProps.style,ve=Pe!=null&&Pe.hasOwnProperty("display")?Pe.display:null;_.style.display=ve==null||typeof ve=="boolean"?"":(""+ve).trim()}}catch($e){ft(Z,Z.return,$e)}}}else if(t.tag===6){if(o===null){Z=t;try{Z.stateNode.nodeValue=d?"":Z.memoizedProps}catch($e){ft(Z,Z.return,$e)}}}else if(t.tag===18){if(o===null){Z=t;try{var we=Z.stateNode;d?xg(we,!0):xg(Z.stateNode,!1)}catch($e){ft(Z,Z.return,$e)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;o===t&&(o=null),t=t.return}o===t&&(o=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(o=l.retryQueue,o!==null&&(l.retryQueue=null,Da(e,o))));break;case 19:fn(t,e),pn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Da(e,l)));break;case 30:break;case 21:break;default:fn(t,e),pn(e)}}function pn(e){var t=e.flags;if(t&2){try{for(var o,l=e.return;l!==null;){if(wm(l)){o=l;break}l=l.return}if(o==null)throw Error(a(160));switch(o.tag){case 27:var d=o.stateNode,f=Pu(e);Oa(e,f,d);break;case 5:var x=o.stateNode;o.flags&32&&(Hi(x,""),o.flags&=-33);var _=Pu(e);Oa(e,_,x);break;case 3:case 4:var Z=o.stateNode.containerInfo,ge=Pu(e);Mu(e,ge,Z);break;default:throw Error(a(161))}}catch(Ee){ft(e,e.return,Ee)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _m(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;_m(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function xr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Tm(e,t.alternate,t),t=t.sibling}function Ci(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Br(4,t,t.return),Ci(t);break;case 1:tr(t,t.return);var o=t.stateNode;typeof o.componentWillUnmount=="function"&&xm(t,t.return,o),Ci(t);break;case 27:yo(t.stateNode);case 26:case 5:tr(t,t.return),Ci(t);break;case 22:t.memoizedState===null&&Ci(t);break;case 30:Ci(t);break;default:Ci(t)}e=e.sibling}}function Sr(e,t,o){for(o=o&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,d=e,f=t,x=f.flags;switch(f.tag){case 0:case 11:case 15:Sr(d,f,o),oo(4,f);break;case 1:if(Sr(d,f,o),l=f,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(ge){ft(l,l.return,ge)}if(l=f,d=l.updateQueue,d!==null){var _=l.stateNode;try{var Z=d.shared.hiddenCallbacks;if(Z!==null)for(d.shared.hiddenCallbacks=null,d=0;d<Z.length;d++)lp(Z[d],_)}catch(ge){ft(l,l.return,ge)}}o&&x&64&&bm(f),ao(f,f.return);break;case 27:Cm(f);case 26:case 5:Sr(d,f,o),o&&l===null&&x&4&&Sm(f),ao(f,f.return);break;case 12:Sr(d,f,o);break;case 31:Sr(d,f,o),o&&x&4&&km(d,f);break;case 13:Sr(d,f,o),o&&x&4&&Am(d,f);break;case 22:f.memoizedState===null&&Sr(d,f,o),ao(f,f.return);break;case 30:break;default:Sr(d,f,o)}t=t.sibling}}function Du(e,t){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&Gs(o))}function Iu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Gs(e))}function Wn(e,t,o,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Pm(e,t,o,l),t=t.sibling}function Pm(e,t,o,l){var d=t.flags;switch(t.tag){case 0:case 11:case 15:Wn(e,t,o,l),d&2048&&oo(9,t);break;case 1:Wn(e,t,o,l);break;case 3:Wn(e,t,o,l),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Gs(e)));break;case 12:if(d&2048){Wn(e,t,o,l),e=t.stateNode;try{var f=t.memoizedProps,x=f.id,_=f.onPostCommit;typeof _=="function"&&_(x,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(Z){ft(t,t.return,Z)}}else Wn(e,t,o,l);break;case 31:Wn(e,t,o,l);break;case 13:Wn(e,t,o,l);break;case 23:break;case 22:f=t.stateNode,x=t.alternate,t.memoizedState!==null?f._visibility&2?Wn(e,t,o,l):lo(e,t):f._visibility&2?Wn(e,t,o,l):(f._visibility|=2,as(e,t,o,l,(t.subtreeFlags&10256)!==0||!1)),d&2048&&Du(x,t);break;case 24:Wn(e,t,o,l),d&2048&&Iu(t.alternate,t);break;default:Wn(e,t,o,l)}}function as(e,t,o,l,d){for(d=d&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var f=e,x=t,_=o,Z=l,ge=x.flags;switch(x.tag){case 0:case 11:case 15:as(f,x,_,Z,d),oo(8,x);break;case 23:break;case 22:var Ee=x.stateNode;x.memoizedState!==null?Ee._visibility&2?as(f,x,_,Z,d):lo(f,x):(Ee._visibility|=2,as(f,x,_,Z,d)),d&&ge&2048&&Du(x.alternate,x);break;case 24:as(f,x,_,Z,d),d&&ge&2048&&Iu(x.alternate,x);break;default:as(f,x,_,Z,d)}t=t.sibling}}function lo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var o=e,l=t,d=l.flags;switch(l.tag){case 22:lo(o,l),d&2048&&Du(l.alternate,l);break;case 24:lo(o,l),d&2048&&Iu(l.alternate,l);break;default:lo(o,l)}t=t.sibling}}var co=8192;function ls(e,t,o){if(e.subtreeFlags&co)for(e=e.child;e!==null;)Mm(e,t,o),e=e.sibling}function Mm(e,t,o){switch(e.tag){case 26:ls(e,t,o),e.flags&co&&e.memoizedState!==null&&E1(o,Vn,e.memoizedState,e.memoizedProps);break;case 5:ls(e,t,o);break;case 3:case 4:var l=Vn;Vn=Xa(e.stateNode.containerInfo),ls(e,t,o),Vn=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=co,co=16777216,ls(e,t,o),co=l):ls(e,t,o));break;default:ls(e,t,o)}}function Om(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function uo(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var o=0;o<t.length;o++){var l=t[o];qt=l,Im(l,e)}Om(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Dm(e),e=e.sibling}function Dm(e){switch(e.tag){case 0:case 11:case 15:uo(e),e.flags&2048&&Br(9,e,e.return);break;case 3:uo(e);break;case 12:uo(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ia(e)):uo(e);break;default:uo(e)}}function Ia(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var o=0;o<t.length;o++){var l=t[o];qt=l,Im(l,e)}Om(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Br(8,t,t.return),Ia(t);break;case 22:o=t.stateNode,o._visibility&2&&(o._visibility&=-3,Ia(t));break;default:Ia(t)}e=e.sibling}}function Im(e,t){for(;qt!==null;){var o=qt;switch(o.tag){case 0:case 11:case 15:Br(8,o,t);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var l=o.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Gs(o.memoizedState.cache)}if(l=o.child,l!==null)l.return=o,qt=l;else e:for(o=e;qt!==null;){l=qt;var d=l.sibling,f=l.return;if(Rm(l),l===o){qt=null;break e}if(d!==null){d.return=f,qt=d;break e}qt=f}}}var qS={getCacheForType:function(e){var t=Wt(Pt),o=t.data.get(e);return o===void 0&&(o=e(),t.data.set(e,o)),o},cacheSignal:function(){return Wt(Pt).controller.signal}},$S=typeof WeakMap=="function"?WeakMap:Map,ut=0,yt=null,tt=null,it=0,ht=0,jn=null,Hr=!1,cs=!1,Uu=!1,wr=0,Rt=0,qr=0,ji=0,zu=0,Tn=0,us=0,ho=null,mn=null,Lu=!1,Ua=0,Um=0,za=1/0,La=null,$r=null,Bt=0,Fr=null,ds=null,Cr=0,Bu=0,Hu=null,zm=null,fo=0,qu=null;function Rn(){return(ut&2)!==0&&it!==0?it&-it:W.T!==null?Yu():Zh()}function Lm(){if(Tn===0)if((it&536870912)===0||ot){var e=qn;qn<<=1,(qn&3932160)===0&&(qn=262144),Tn=e}else Tn=536870912;return e=wn.current,e!==null&&(e.flags|=32),Tn}function gn(e,t,o){(e===yt&&(ht===2||ht===9)||e.cancelPendingCommit!==null)&&(hs(e,0),Vr(e,it,Tn,!1)),Ms(e,o),((ut&2)===0||e!==yt)&&(e===yt&&((ut&2)===0&&(ji|=o),Rt===4&&Vr(e,it,Tn,!1)),nr(e))}function Bm(e,t,o){if((ut&6)!==0)throw Error(a(327));var l=!o&&(t&127)===0&&(t&e.expiredLanes)===0||ai(e,t),d=l?WS(e,t):Fu(e,t,!0),f=l;do{if(d===0){cs&&!l&&Vr(e,t,0,!1);break}else{if(o=e.current.alternate,f&&!FS(o)){d=Fu(e,t,!1),f=!1;continue}if(d===2){if(f=t,e.errorRecoveryDisabledLanes&f)var x=0;else x=e.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){t=x;e:{var _=e;d=ho;var Z=_.current.memoizedState.isDehydrated;if(Z&&(hs(_,x).flags|=256),x=Fu(_,x,!1),x!==2){if(Uu&&!Z){_.errorRecoveryDisabledLanes|=f,ji|=f,d=4;break e}f=mn,mn=d,f!==null&&(mn===null?mn=f:mn.push.apply(mn,f))}d=x}if(f=!1,d!==2)continue}}if(d===1){hs(e,0),Vr(e,t,0,!0);break}e:{switch(l=e,f=d,f){case 0:case 1:throw Error(a(345));case 4:if((t&4194048)!==t)break;case 6:Vr(l,t,Tn,!Hr);break e;case 2:mn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((t&62914560)===t&&(d=Ua+300-Te(),10<d)){if(Vr(l,t,Tn,!Hr),Nn(l,0,!0)!==0)break e;Cr=t,l.timeoutHandle=yg(Hm.bind(null,l,o,mn,La,Lu,t,Tn,ji,us,Hr,f,"Throttled",-0,0),d);break e}Hm(l,o,mn,La,Lu,t,Tn,ji,us,Hr,f,null,-0,0)}}break}while(!0);nr(e)}function Hm(e,t,o,l,d,f,x,_,Z,ge,Ee,Pe,ve,we){if(e.timeoutHandle=-1,Pe=t.subtreeFlags,Pe&8192||(Pe&16785408)===16785408){Pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:lr},Mm(t,f,Pe);var $e=(f&62914560)===f?Ua-Te():(f&4194048)===f?Um-Te():0;if($e=k1(Pe,$e),$e!==null){Cr=f,e.cancelPendingCommit=$e(Xm.bind(null,e,t,f,o,l,d,x,_,Z,Ee,Pe,null,ve,we)),Vr(e,f,x,!ge);return}}Xm(e,t,f,o,l,d,x,_,Z)}function FS(e){for(var t=e;;){var o=t.tag;if((o===0||o===11||o===15)&&t.flags&16384&&(o=t.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var l=0;l<o.length;l++){var d=o[l],f=d.getSnapshot;d=d.value;try{if(!xn(f(),d))return!1}catch{return!1}}if(o=t.child,t.subtreeFlags&16384&&o!==null)o.return=t,t=o;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Vr(e,t,o,l){t&=~zu,t&=~ji,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var d=t;0<d;){var f=31-pe(d),x=1<<f;l[f]=-1,d&=~x}o!==0&&Jh(e,o,t)}function Ba(){return(ut&6)===0?(po(0),!1):!0}function $u(){if(tt!==null){if(ht===0)var e=tt.return;else e=tt,hr=mi=null,su(e),ns=null,Xs=0,e=tt;for(;e!==null;)vm(e.alternate,e),e=e.return;tt=null}}function hs(e,t){var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,u1(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),Cr=0,$u(),yt=e,tt=o=ur(e.current,null),it=t,ht=0,jn=null,Hr=!1,cs=ai(e,t),Uu=!1,us=Tn=zu=ji=qr=Rt=0,mn=ho=null,Lu=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var d=31-pe(l),f=1<<d;t|=e[d],l&=~f}return wr=t,aa(),o}function qm(e,t){Qe=null,W.H=ro,t===ts||t===ma?(t=ip(),ht=3):t===Gc?(t=ip(),ht=4):ht=t===Su?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,jn=t,tt===null&&(Rt=1,Aa(e,On(t,e.current)))}function $m(){var e=wn.current;return e===null?!0:(it&4194048)===it?zn===null:(it&62914560)===it||(it&536870912)!==0?e===zn:!1}function Fm(){var e=W.H;return W.H=ro,e===null?ro:e}function Vm(){var e=W.A;return W.A=qS,e}function Ha(){Rt=4,Hr||(it&4194048)!==it&&wn.current!==null||(cs=!0),(qr&134217727)===0&&(ji&134217727)===0||yt===null||Vr(yt,it,Tn,!1)}function Fu(e,t,o){var l=ut;ut|=2;var d=Fm(),f=Vm();(yt!==e||it!==t)&&(La=null,hs(e,t)),t=!1;var x=Rt;e:do try{if(ht!==0&&tt!==null){var _=tt,Z=jn;switch(ht){case 8:$u(),x=6;break e;case 3:case 2:case 9:case 6:wn.current===null&&(t=!0);var ge=ht;if(ht=0,jn=null,fs(e,_,Z,ge),o&&cs){x=0;break e}break;default:ge=ht,ht=0,jn=null,fs(e,_,Z,ge)}}VS(),x=Rt;break}catch(Ee){qm(e,Ee)}while(!0);return t&&e.shellSuspendCounter++,hr=mi=null,ut=l,W.H=d,W.A=f,tt===null&&(yt=null,it=0,aa()),x}function VS(){for(;tt!==null;)Wm(tt)}function WS(e,t){var o=ut;ut|=2;var l=Fm(),d=Vm();yt!==e||it!==t?(La=null,za=Te()+500,hs(e,t)):cs=ai(e,t);e:do try{if(ht!==0&&tt!==null){t=tt;var f=jn;t:switch(ht){case 1:ht=0,jn=null,fs(e,t,f,1);break;case 2:case 9:if(np(f)){ht=0,jn=null,Gm(t);break}t=function(){ht!==2&&ht!==9||yt!==e||(ht=7),nr(e)},f.then(t,t);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:np(f)?(ht=0,jn=null,Gm(t)):(ht=0,jn=null,fs(e,t,f,7));break;case 5:var x=null;switch(tt.tag){case 26:x=tt.memoizedState;case 5:case 27:var _=tt;if(x?Pg(x):_.stateNode.complete){ht=0,jn=null;var Z=_.sibling;if(Z!==null)tt=Z;else{var ge=_.return;ge!==null?(tt=ge,qa(ge)):tt=null}break t}}ht=0,jn=null,fs(e,t,f,5);break;case 6:ht=0,jn=null,fs(e,t,f,6);break;case 8:$u(),Rt=6;break e;default:throw Error(a(462))}}GS();break}catch(Ee){qm(e,Ee)}while(!0);return hr=mi=null,W.H=l,W.A=d,ut=o,tt!==null?0:(yt=null,it=0,aa(),Rt)}function GS(){for(;tt!==null&&!xe();)Wm(tt)}function Wm(e){var t=gm(e.alternate,e,wr);e.memoizedProps=e.pendingProps,t===null?qa(e):tt=t}function Gm(e){var t=e,o=t.alternate;switch(t.tag){case 15:case 0:t=um(o,t,t.pendingProps,t.type,void 0,it);break;case 11:t=um(o,t,t.pendingProps,t.type.render,t.ref,it);break;case 5:su(t);default:vm(o,t),t=tt=Vf(t,wr),t=gm(o,t,wr)}e.memoizedProps=e.pendingProps,t===null?qa(e):tt=t}function fs(e,t,o,l){hr=mi=null,su(t),ns=null,Xs=0;var d=t.return;try{if(DS(e,d,t,o,it)){Rt=1,Aa(e,On(o,e.current)),tt=null;return}}catch(f){if(d!==null)throw tt=d,f;Rt=1,Aa(e,On(o,e.current)),tt=null;return}t.flags&32768?(ot||l===1?e=!0:cs||(it&536870912)!==0?e=!1:(Hr=e=!0,(l===2||l===9||l===3||l===6)&&(l=wn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Ym(t,e)):qa(t)}function qa(e){var t=e;do{if((t.flags&32768)!==0){Ym(t,Hr);return}e=t.return;var o=zS(t.alternate,t,wr);if(o!==null){tt=o;return}if(t=t.sibling,t!==null){tt=t;return}tt=t=e}while(t!==null);Rt===0&&(Rt=5)}function Ym(e,t){do{var o=LS(e.alternate,e);if(o!==null){o.flags&=32767,tt=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!t&&(e=e.sibling,e!==null)){tt=e;return}tt=e=o}while(e!==null);Rt=6,tt=null}function Xm(e,t,o,l,d,f,x,_,Z){e.cancelPendingCommit=null;do $a();while(Bt!==0);if((ut&6)!==0)throw Error(a(327));if(t!==null){if(t===e.current)throw Error(a(177));if(f=t.lanes|t.childLanes,f|=Pc,Rx(e,o,f,x,_,Z),e===yt&&(tt=yt=null,it=0),ds=t,Fr=e,Cr=o,Bu=f,Hu=d,zm=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,KS(L,function(){return eg(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=W.T,W.T=null,d=M.p,M.p=2,x=ut,ut|=4;try{BS(e,t,o)}finally{ut=x,M.p=d,W.T=l}}Bt=1,Jm(),Km(),Qm()}}function Jm(){if(Bt===1){Bt=0;var e=Fr,t=ds,o=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||o){o=W.T,W.T=null;var l=M.p;M.p=2;var d=ut;ut|=4;try{Nm(t,e);var f=nd,x=If(e.containerInfo),_=f.focusedElem,Z=f.selectionRange;if(x!==_&&_&&_.ownerDocument&&Df(_.ownerDocument.documentElement,_)){if(Z!==null&&Ec(_)){var ge=Z.start,Ee=Z.end;if(Ee===void 0&&(Ee=ge),"selectionStart"in _)_.selectionStart=ge,_.selectionEnd=Math.min(Ee,_.value.length);else{var Pe=_.ownerDocument||document,ve=Pe&&Pe.defaultView||window;if(ve.getSelection){var we=ve.getSelection(),$e=_.textContent.length,Ge=Math.min(Z.start,$e),gt=Z.end===void 0?Ge:Math.min(Z.end,$e);!we.extend&&Ge>gt&&(x=gt,gt=Ge,Ge=x);var ue=Of(_,Ge),oe=Of(_,gt);if(ue&&oe&&(we.rangeCount!==1||we.anchorNode!==ue.node||we.anchorOffset!==ue.offset||we.focusNode!==oe.node||we.focusOffset!==oe.offset)){var me=Pe.createRange();me.setStart(ue.node,ue.offset),we.removeAllRanges(),Ge>gt?(we.addRange(me),we.extend(oe.node,oe.offset)):(me.setEnd(oe.node,oe.offset),we.addRange(me))}}}}for(Pe=[],we=_;we=we.parentNode;)we.nodeType===1&&Pe.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<Pe.length;_++){var Ae=Pe[_];Ae.element.scrollLeft=Ae.left,Ae.element.scrollTop=Ae.top}}tl=!!td,nd=td=null}finally{ut=d,M.p=l,W.T=o}}e.current=t,Bt=2}}function Km(){if(Bt===2){Bt=0;var e=Fr,t=ds,o=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||o){o=W.T,W.T=null;var l=M.p;M.p=2;var d=ut;ut|=4;try{Tm(e,t.alternate,t)}finally{ut=d,M.p=l,W.T=o}}Bt=3}}function Qm(){if(Bt===4||Bt===3){Bt=0,ne();var e=Fr,t=ds,o=Cr,l=zm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Bt=5:(Bt=0,ds=Fr=null,Zm(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&($r=null),lc(o),t=t.stateNode,Oe&&typeof Oe.onCommitFiberRoot=="function")try{Oe.onCommitFiberRoot(Be,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=W.T,d=M.p,M.p=2,W.T=null;try{for(var f=e.onRecoverableError,x=0;x<l.length;x++){var _=l[x];f(_.value,{componentStack:_.stack})}}finally{W.T=t,M.p=d}}(Cr&3)!==0&&$a(),nr(e),d=e.pendingLanes,(o&261930)!==0&&(d&42)!==0?e===qu?fo++:(fo=0,qu=e):fo=0,po(0)}}function Zm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Gs(t)))}function $a(){return Jm(),Km(),Qm(),eg()}function eg(){if(Bt!==5)return!1;var e=Fr,t=Bu;Bu=0;var o=lc(Cr),l=W.T,d=M.p;try{M.p=32>o?32:o,W.T=null,o=Hu,Hu=null;var f=Fr,x=Cr;if(Bt=0,ds=Fr=null,Cr=0,(ut&6)!==0)throw Error(a(331));var _=ut;if(ut|=4,Dm(f.current),Pm(f,f.current,x,o),ut=_,po(0,!1),Oe&&typeof Oe.onPostCommitFiberRoot=="function")try{Oe.onPostCommitFiberRoot(Be,f)}catch{}return!0}finally{M.p=d,W.T=l,Zm(e,t)}}function tg(e,t,o){t=On(o,t),t=xu(e.stateNode,t,2),e=Ur(e,t,2),e!==null&&(Ms(e,2),nr(e))}function ft(e,t,o){if(e.tag===3)tg(e,e,o);else for(;t!==null;){if(t.tag===3){tg(t,e,o);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&($r===null||!$r.has(l))){e=On(o,e),o=nm(2),l=Ur(t,o,2),l!==null&&(rm(o,l,t,e),Ms(l,2),nr(l));break}}t=t.return}}function Vu(e,t,o){var l=e.pingCache;if(l===null){l=e.pingCache=new $S;var d=new Set;l.set(t,d)}else d=l.get(t),d===void 0&&(d=new Set,l.set(t,d));d.has(o)||(Uu=!0,d.add(o),e=YS.bind(null,e,t,o),t.then(e,e))}function YS(e,t,o){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,yt===e&&(it&o)===o&&(Rt===4||Rt===3&&(it&62914560)===it&&300>Te()-Ua?(ut&2)===0&&hs(e,0):zu|=o,us===it&&(us=0)),nr(e)}function ng(e,t){t===0&&(t=Xh()),e=hi(e,t),e!==null&&(Ms(e,t),nr(e))}function XS(e){var t=e.memoizedState,o=0;t!==null&&(o=t.retryLane),ng(e,o)}function JS(e,t){var o=0;switch(e.tag){case 31:case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(o=d.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(t),ng(e,o)}function KS(e,t){return je(e,t)}var Fa=null,ps=null,Wu=!1,Va=!1,Gu=!1,Wr=0;function nr(e){e!==ps&&e.next===null&&(ps===null?Fa=ps=e:ps=ps.next=e),Va=!0,Wu||(Wu=!0,ZS())}function po(e,t){if(!Gu&&Va){Gu=!0;do for(var o=!1,l=Fa;l!==null;){if(e!==0){var d=l.pendingLanes;if(d===0)var f=0;else{var x=l.suspendedLanes,_=l.pingedLanes;f=(1<<31-pe(42|e)+1)-1,f&=d&~(x&~_),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(o=!0,og(l,f))}else f=it,f=Nn(l,l===yt?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||ai(l,f)||(o=!0,og(l,f));l=l.next}while(o);Gu=!1}}function QS(){rg()}function rg(){Va=Wu=!1;var e=0;Wr!==0&&c1()&&(e=Wr);for(var t=Te(),o=null,l=Fa;l!==null;){var d=l.next,f=ig(l,t);f===0?(l.next=null,o===null?Fa=d:o.next=d,d===null&&(ps=o)):(o=l,(e!==0||(f&3)!==0)&&(Va=!0)),l=d}Bt!==0&&Bt!==5||po(e),Wr!==0&&(Wr=0)}function ig(e,t){for(var o=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var x=31-pe(f),_=1<<x,Z=d[x];Z===-1?((_&o)===0||(_&l)!==0)&&(d[x]=Tx(_,t)):Z<=t&&(e.expiredLanes|=_),f&=~_}if(t=yt,o=it,o=Nn(e,e===t?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,o===0||e===t&&(ht===2||ht===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Ne(l),e.callbackNode=null,e.callbackPriority=0;if((o&3)===0||ai(e,o)){if(t=o&-o,t===e.callbackPriority)return t;switch(l!==null&&Ne(l),lc(o)){case 2:case 8:o=w;break;case 32:o=L;break;case 268435456:o=D;break;default:o=L}return l=sg.bind(null,e),o=je(o,l),e.callbackPriority=t,e.callbackNode=o,t}return l!==null&&l!==null&&Ne(l),e.callbackPriority=2,e.callbackNode=null,2}function sg(e,t){if(Bt!==0&&Bt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var o=e.callbackNode;if($a()&&e.callbackNode!==o)return null;var l=it;return l=Nn(e,e===yt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Bm(e,l,t),ig(e,Te()),e.callbackNode!=null&&e.callbackNode===o?sg.bind(null,e):null)}function og(e,t){if($a())return null;Bm(e,t,!0)}function ZS(){d1(function(){(ut&6)!==0?je(O,QS):rg()})}function Yu(){if(Wr===0){var e=Zi;e===0&&(e=vt,vt<<=1,(vt&261888)===0&&(vt=256)),Wr=e}return Wr}function ag(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Zo(""+e)}function lg(e,t){var o=t.ownerDocument.createElement("input");return o.name=t.name,o.value=t.value,e.id&&o.setAttribute("form",e.id),t.parentNode.insertBefore(o,t),e=new FormData(e),o.parentNode.removeChild(o),e}function e1(e,t,o,l,d){if(t==="submit"&&o&&o.stateNode===d){var f=ag((d[un]||null).action),x=l.submitter;x&&(t=(t=x[un]||null)?ag(t.formAction):x.getAttribute("formAction"),t!==null&&(f=t,x=null));var _=new ra("action","action",null,l,d);e.push({event:_,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Wr!==0){var Z=x?lg(d,x):new FormData(d);pu(o,{pending:!0,data:Z,method:d.method,action:f},null,Z)}}else typeof f=="function"&&(_.preventDefault(),Z=x?lg(d,x):new FormData(d),pu(o,{pending:!0,data:Z,method:d.method,action:f},f,Z))},currentTarget:d}]})}}for(var Xu=0;Xu<_c.length;Xu++){var Ju=_c[Xu],t1=Ju.toLowerCase(),n1=Ju[0].toUpperCase()+Ju.slice(1);Fn(t1,"on"+n1)}Fn(Lf,"onAnimationEnd"),Fn(Bf,"onAnimationIteration"),Fn(Hf,"onAnimationStart"),Fn("dblclick","onDoubleClick"),Fn("focusin","onFocus"),Fn("focusout","onBlur"),Fn(vS,"onTransitionRun"),Fn(bS,"onTransitionStart"),Fn(xS,"onTransitionCancel"),Fn(qf,"onTransitionEnd"),Li("onMouseEnter",["mouseout","mouseover"]),Li("onMouseLeave",["mouseout","mouseover"]),Li("onPointerEnter",["pointerout","pointerover"]),Li("onPointerLeave",["pointerout","pointerover"]),li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),li("onBeforeInput",["compositionend","keypress","textInput","paste"]),li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),r1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mo));function cg(e,t){t=(t&4)!==0;for(var o=0;o<e.length;o++){var l=e[o],d=l.event;l=l.listeners;e:{var f=void 0;if(t)for(var x=l.length-1;0<=x;x--){var _=l[x],Z=_.instance,ge=_.currentTarget;if(_=_.listener,Z!==f&&d.isPropagationStopped())break e;f=_,d.currentTarget=ge;try{f(d)}catch(Ee){oa(Ee)}d.currentTarget=null,f=Z}else for(x=0;x<l.length;x++){if(_=l[x],Z=_.instance,ge=_.currentTarget,_=_.listener,Z!==f&&d.isPropagationStopped())break e;f=_,d.currentTarget=ge;try{f(d)}catch(Ee){oa(Ee)}d.currentTarget=null,f=Z}}}}function nt(e,t){var o=t[cc];o===void 0&&(o=t[cc]=new Set);var l=e+"__bubble";o.has(l)||(ug(t,e,2,!1),o.add(l))}function Ku(e,t,o){var l=0;t&&(l|=4),ug(o,e,l,t)}var Wa="_reactListening"+Math.random().toString(36).slice(2);function Qu(e){if(!e[Wa]){e[Wa]=!0,nf.forEach(function(o){o!=="selectionchange"&&(r1.has(o)||Ku(o,!1,e),Ku(o,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Wa]||(t[Wa]=!0,Ku("selectionchange",!1,t))}}function ug(e,t,o,l){switch(Lg(t)){case 2:var d=_1;break;case 8:d=P1;break;default:d=fd}o=d.bind(null,t,o,e),d=void 0,!vc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(t,o,{capture:!0,passive:d}):e.addEventListener(t,o,!0):d!==void 0?e.addEventListener(t,o,{passive:d}):e.addEventListener(t,o,!1)}function Zu(e,t,o,l,d){var f=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var x=l.tag;if(x===3||x===4){var _=l.stateNode.containerInfo;if(_===d)break;if(x===4)for(x=l.return;x!==null;){var Z=x.tag;if((Z===3||Z===4)&&x.stateNode.containerInfo===d)return;x=x.return}for(;_!==null;){if(x=Ii(_),x===null)return;if(Z=x.tag,Z===5||Z===6||Z===26||Z===27){l=f=x;continue e}_=_.parentNode}}l=l.return}mf(function(){var ge=f,Ee=gc(o),Pe=[];e:{var ve=$f.get(e);if(ve!==void 0){var we=ra,$e=e;switch(e){case"keypress":if(ta(o)===0)break e;case"keydown":case"keyup":we=Jx;break;case"focusin":$e="focus",we=wc;break;case"focusout":$e="blur",we=wc;break;case"beforeblur":case"afterblur":we=wc;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=vf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=zx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=Zx;break;case Lf:case Bf:case Hf:we=Hx;break;case qf:we=tS;break;case"scroll":case"scrollend":we=Ix;break;case"wheel":we=rS;break;case"copy":case"cut":case"paste":we=$x;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=xf;break;case"toggle":case"beforetoggle":we=sS}var Ge=(t&4)!==0,gt=!Ge&&(e==="scroll"||e==="scrollend"),ue=Ge?ve!==null?ve+"Capture":null:ve;Ge=[];for(var oe=ge,me;oe!==null;){var Ae=oe;if(me=Ae.stateNode,Ae=Ae.tag,Ae!==5&&Ae!==26&&Ae!==27||me===null||ue===null||(Ae=Is(oe,ue),Ae!=null&&Ge.push(go(oe,Ae,me))),gt)break;oe=oe.return}0<Ge.length&&(ve=new we(ve,$e,null,o,Ee),Pe.push({event:ve,listeners:Ge}))}}if((t&7)===0){e:{if(ve=e==="mouseover"||e==="pointerover",we=e==="mouseout"||e==="pointerout",ve&&o!==mc&&($e=o.relatedTarget||o.fromElement)&&(Ii($e)||$e[Di]))break e;if((we||ve)&&(ve=Ee.window===Ee?Ee:(ve=Ee.ownerDocument)?ve.defaultView||ve.parentWindow:window,we?($e=o.relatedTarget||o.toElement,we=ge,$e=$e?Ii($e):null,$e!==null&&(gt=u($e),Ge=$e.tag,$e!==gt||Ge!==5&&Ge!==27&&Ge!==6)&&($e=null)):(we=null,$e=ge),we!==$e)){if(Ge=vf,Ae="onMouseLeave",ue="onMouseEnter",oe="mouse",(e==="pointerout"||e==="pointerover")&&(Ge=xf,Ae="onPointerLeave",ue="onPointerEnter",oe="pointer"),gt=we==null?ve:Ds(we),me=$e==null?ve:Ds($e),ve=new Ge(Ae,oe+"leave",we,o,Ee),ve.target=gt,ve.relatedTarget=me,Ae=null,Ii(Ee)===ge&&(Ge=new Ge(ue,oe+"enter",$e,o,Ee),Ge.target=me,Ge.relatedTarget=gt,Ae=Ge),gt=Ae,we&&$e)t:{for(Ge=i1,ue=we,oe=$e,me=0,Ae=ue;Ae;Ae=Ge(Ae))me++;Ae=0;for(var We=oe;We;We=Ge(We))Ae++;for(;0<me-Ae;)ue=Ge(ue),me--;for(;0<Ae-me;)oe=Ge(oe),Ae--;for(;me--;){if(ue===oe||oe!==null&&ue===oe.alternate){Ge=ue;break t}ue=Ge(ue),oe=Ge(oe)}Ge=null}else Ge=null;we!==null&&dg(Pe,ve,we,Ge,!1),$e!==null&&gt!==null&&dg(Pe,gt,$e,Ge,!0)}}e:{if(ve=ge?Ds(ge):window,we=ve.nodeName&&ve.nodeName.toLowerCase(),we==="select"||we==="input"&&ve.type==="file")var at=kf;else if(Rf(ve))if(Af)at=mS;else{at=fS;var Ve=hS}else we=ve.nodeName,!we||we.toLowerCase()!=="input"||ve.type!=="checkbox"&&ve.type!=="radio"?ge&&pc(ge.elementType)&&(at=kf):at=pS;if(at&&(at=at(e,ge))){Ef(Pe,at,o,Ee);break e}Ve&&Ve(e,ve,ge),e==="focusout"&&ge&&ve.type==="number"&&ge.memoizedProps.value!=null&&fc(ve,"number",ve.value)}switch(Ve=ge?Ds(ge):window,e){case"focusin":(Rf(Ve)||Ve.contentEditable==="true")&&(Vi=Ve,kc=ge,Fs=null);break;case"focusout":Fs=kc=Vi=null;break;case"mousedown":Ac=!0;break;case"contextmenu":case"mouseup":case"dragend":Ac=!1,Uf(Pe,o,Ee);break;case"selectionchange":if(yS)break;case"keydown":case"keyup":Uf(Pe,o,Ee)}var et;if(jc)e:{switch(e){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else Fi?jf(e,o)&&(st="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(st="onCompositionStart");st&&(Sf&&o.locale!=="ko"&&(Fi||st!=="onCompositionStart"?st==="onCompositionEnd"&&Fi&&(et=gf()):(Nr=Ee,bc="value"in Nr?Nr.value:Nr.textContent,Fi=!0)),Ve=Ga(ge,st),0<Ve.length&&(st=new bf(st,e,null,o,Ee),Pe.push({event:st,listeners:Ve}),et?st.data=et:(et=Tf(o),et!==null&&(st.data=et)))),(et=aS?lS(e,o):cS(e,o))&&(st=Ga(ge,"onBeforeInput"),0<st.length&&(Ve=new bf("onBeforeInput","beforeinput",null,o,Ee),Pe.push({event:Ve,listeners:st}),Ve.data=et)),e1(Pe,e,ge,o,Ee)}cg(Pe,t)})}function go(e,t,o){return{instance:e,listener:t,currentTarget:o}}function Ga(e,t){for(var o=t+"Capture",l=[];e!==null;){var d=e,f=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||f===null||(d=Is(e,o),d!=null&&l.unshift(go(e,d,f)),d=Is(e,t),d!=null&&l.push(go(e,d,f))),e.tag===3)return l;e=e.return}return[]}function i1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function dg(e,t,o,l,d){for(var f=t._reactName,x=[];o!==null&&o!==l;){var _=o,Z=_.alternate,ge=_.stateNode;if(_=_.tag,Z!==null&&Z===l)break;_!==5&&_!==26&&_!==27||ge===null||(Z=ge,d?(ge=Is(o,f),ge!=null&&x.unshift(go(o,ge,Z))):d||(ge=Is(o,f),ge!=null&&x.push(go(o,ge,Z)))),o=o.return}x.length!==0&&e.push({event:t,listeners:x})}var s1=/\r\n?/g,o1=/\u0000|\uFFFD/g;function hg(e){return(typeof e=="string"?e:""+e).replace(s1,`
`).replace(o1,"")}function fg(e,t){return t=hg(t),hg(e)===t}function mt(e,t,o,l,d,f){switch(o){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||Hi(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&Hi(e,""+l);break;case"className":Ko(e,"class",l);break;case"tabIndex":Ko(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ko(e,o,l);break;case"style":ff(e,l,f);break;case"data":if(t!=="object"){Ko(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||o!=="href")){e.removeAttribute(o);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(o);break}l=Zo(""+l),e.setAttribute(o,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(o==="formAction"?(t!=="input"&&mt(e,t,"name",d.name,d,null),mt(e,t,"formEncType",d.formEncType,d,null),mt(e,t,"formMethod",d.formMethod,d,null),mt(e,t,"formTarget",d.formTarget,d,null)):(mt(e,t,"encType",d.encType,d,null),mt(e,t,"method",d.method,d,null),mt(e,t,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(o);break}l=Zo(""+l),e.setAttribute(o,l);break;case"onClick":l!=null&&(e.onclick=lr);break;case"onScroll":l!=null&&nt("scroll",e);break;case"onScrollEnd":l!=null&&nt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(o=l.__html,o!=null){if(d.children!=null)throw Error(a(60));e.innerHTML=o}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}o=Zo(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(o,""+l):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":l===!0?e.setAttribute(o,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(o,l):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(o,l):e.removeAttribute(o);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(o):e.setAttribute(o,l);break;case"popover":nt("beforetoggle",e),nt("toggle",e),Jo(e,"popover",l);break;case"xlinkActuate":ar(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ar(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ar(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ar(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ar(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ar(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ar(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ar(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ar(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Jo(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Ox.get(o)||o,Jo(e,o,l))}}function ed(e,t,o,l,d,f){switch(o){case"style":ff(e,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(o=l.__html,o!=null){if(d.children!=null)throw Error(a(60));e.innerHTML=o}}break;case"children":typeof l=="string"?Hi(e,l):(typeof l=="number"||typeof l=="bigint")&&Hi(e,""+l);break;case"onScroll":l!=null&&nt("scroll",e);break;case"onScrollEnd":l!=null&&nt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=lr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rf.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),t=o.slice(2,d?o.length-7:void 0),f=e[un]||null,f=f!=null?f[o]:null,typeof f=="function"&&e.removeEventListener(t,f,d),typeof l=="function")){typeof f!="function"&&f!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(t,l,d);break e}o in e?e[o]=l:l===!0?e.setAttribute(o,""):Jo(e,o,l)}}}function Yt(e,t,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",e),nt("load",e);var l=!1,d=!1,f;for(f in o)if(o.hasOwnProperty(f)){var x=o[f];if(x!=null)switch(f){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:mt(e,t,f,x,o,null)}}d&&mt(e,t,"srcSet",o.srcSet,o,null),l&&mt(e,t,"src",o.src,o,null);return;case"input":nt("invalid",e);var _=f=x=d=null,Z=null,ge=null;for(l in o)if(o.hasOwnProperty(l)){var Ee=o[l];if(Ee!=null)switch(l){case"name":d=Ee;break;case"type":x=Ee;break;case"checked":Z=Ee;break;case"defaultChecked":ge=Ee;break;case"value":f=Ee;break;case"defaultValue":_=Ee;break;case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(a(137,t));break;default:mt(e,t,l,Ee,o,null)}}cf(e,f,_,Z,ge,x,d,!1);return;case"select":nt("invalid",e),l=x=f=null;for(d in o)if(o.hasOwnProperty(d)&&(_=o[d],_!=null))switch(d){case"value":f=_;break;case"defaultValue":x=_;break;case"multiple":l=_;default:mt(e,t,d,_,o,null)}t=f,o=x,e.multiple=!!l,t!=null?Bi(e,!!l,t,!1):o!=null&&Bi(e,!!l,o,!0);return;case"textarea":nt("invalid",e),f=d=l=null;for(x in o)if(o.hasOwnProperty(x)&&(_=o[x],_!=null))switch(x){case"value":l=_;break;case"defaultValue":d=_;break;case"children":f=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(a(91));break;default:mt(e,t,x,_,o,null)}df(e,l,d,f);return;case"option":for(Z in o)o.hasOwnProperty(Z)&&(l=o[Z],l!=null)&&(Z==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":mt(e,t,Z,l,o,null));return;case"dialog":nt("beforetoggle",e),nt("toggle",e),nt("cancel",e),nt("close",e);break;case"iframe":case"object":nt("load",e);break;case"video":case"audio":for(l=0;l<mo.length;l++)nt(mo[l],e);break;case"image":nt("error",e),nt("load",e);break;case"details":nt("toggle",e);break;case"embed":case"source":case"link":nt("error",e),nt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ge in o)if(o.hasOwnProperty(ge)&&(l=o[ge],l!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:mt(e,t,ge,l,o,null)}return;default:if(pc(t)){for(Ee in o)o.hasOwnProperty(Ee)&&(l=o[Ee],l!==void 0&&ed(e,t,Ee,l,o,void 0));return}}for(_ in o)o.hasOwnProperty(_)&&(l=o[_],l!=null&&mt(e,t,_,l,o,null))}function a1(e,t,o,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,f=null,x=null,_=null,Z=null,ge=null,Ee=null;for(we in o){var Pe=o[we];if(o.hasOwnProperty(we)&&Pe!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":Z=Pe;default:l.hasOwnProperty(we)||mt(e,t,we,null,l,Pe)}}for(var ve in l){var we=l[ve];if(Pe=o[ve],l.hasOwnProperty(ve)&&(we!=null||Pe!=null))switch(ve){case"type":f=we;break;case"name":d=we;break;case"checked":ge=we;break;case"defaultChecked":Ee=we;break;case"value":x=we;break;case"defaultValue":_=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(a(137,t));break;default:we!==Pe&&mt(e,t,ve,we,l,Pe)}}hc(e,x,_,Z,ge,Ee,f,d);return;case"select":we=x=_=ve=null;for(f in o)if(Z=o[f],o.hasOwnProperty(f)&&Z!=null)switch(f){case"value":break;case"multiple":we=Z;default:l.hasOwnProperty(f)||mt(e,t,f,null,l,Z)}for(d in l)if(f=l[d],Z=o[d],l.hasOwnProperty(d)&&(f!=null||Z!=null))switch(d){case"value":ve=f;break;case"defaultValue":_=f;break;case"multiple":x=f;default:f!==Z&&mt(e,t,d,f,l,Z)}t=_,o=x,l=we,ve!=null?Bi(e,!!o,ve,!1):!!l!=!!o&&(t!=null?Bi(e,!!o,t,!0):Bi(e,!!o,o?[]:"",!1));return;case"textarea":we=ve=null;for(_ in o)if(d=o[_],o.hasOwnProperty(_)&&d!=null&&!l.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:mt(e,t,_,null,l,d)}for(x in l)if(d=l[x],f=o[x],l.hasOwnProperty(x)&&(d!=null||f!=null))switch(x){case"value":ve=d;break;case"defaultValue":we=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(a(91));break;default:d!==f&&mt(e,t,x,d,l,f)}uf(e,ve,we);return;case"option":for(var $e in o)ve=o[$e],o.hasOwnProperty($e)&&ve!=null&&!l.hasOwnProperty($e)&&($e==="selected"?e.selected=!1:mt(e,t,$e,null,l,ve));for(Z in l)ve=l[Z],we=o[Z],l.hasOwnProperty(Z)&&ve!==we&&(ve!=null||we!=null)&&(Z==="selected"?e.selected=ve&&typeof ve!="function"&&typeof ve!="symbol":mt(e,t,Z,ve,l,we));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ge in o)ve=o[Ge],o.hasOwnProperty(Ge)&&ve!=null&&!l.hasOwnProperty(Ge)&&mt(e,t,Ge,null,l,ve);for(ge in l)if(ve=l[ge],we=o[ge],l.hasOwnProperty(ge)&&ve!==we&&(ve!=null||we!=null))switch(ge){case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(a(137,t));break;default:mt(e,t,ge,ve,l,we)}return;default:if(pc(t)){for(var gt in o)ve=o[gt],o.hasOwnProperty(gt)&&ve!==void 0&&!l.hasOwnProperty(gt)&&ed(e,t,gt,void 0,l,ve);for(Ee in l)ve=l[Ee],we=o[Ee],!l.hasOwnProperty(Ee)||ve===we||ve===void 0&&we===void 0||ed(e,t,Ee,ve,l,we);return}}for(var ue in o)ve=o[ue],o.hasOwnProperty(ue)&&ve!=null&&!l.hasOwnProperty(ue)&&mt(e,t,ue,null,l,ve);for(Pe in l)ve=l[Pe],we=o[Pe],!l.hasOwnProperty(Pe)||ve===we||ve==null&&we==null||mt(e,t,Pe,ve,l,we)}function pg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function l1(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,o=performance.getEntriesByType("resource"),l=0;l<o.length;l++){var d=o[l],f=d.transferSize,x=d.initiatorType,_=d.duration;if(f&&_&&pg(x)){for(x=0,_=d.responseEnd,l+=1;l<o.length;l++){var Z=o[l],ge=Z.startTime;if(ge>_)break;var Ee=Z.transferSize,Pe=Z.initiatorType;Ee&&pg(Pe)&&(Z=Z.responseEnd,x+=Ee*(Z<_?1:(_-ge)/(Z-ge)))}if(--l,t+=8*(f+x)/(d.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var td=null,nd=null;function Ya(e){return e.nodeType===9?e:e.ownerDocument}function mg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function gg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function rd(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var id=null;function c1(){var e=window.event;return e&&e.type==="popstate"?e===id?!1:(id=e,!0):(id=null,!1)}var yg=typeof setTimeout=="function"?setTimeout:void 0,u1=typeof clearTimeout=="function"?clearTimeout:void 0,vg=typeof Promise=="function"?Promise:void 0,d1=typeof queueMicrotask=="function"?queueMicrotask:typeof vg<"u"?function(e){return vg.resolve(null).then(e).catch(h1)}:yg;function h1(e){setTimeout(function(){throw e})}function Gr(e){return e==="head"}function bg(e,t){var o=t,l=0;do{var d=o.nextSibling;if(e.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"||o==="/&"){if(l===0){e.removeChild(d),vs(t);return}l--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")l++;else if(o==="html")yo(e.ownerDocument.documentElement);else if(o==="head"){o=e.ownerDocument.head,yo(o);for(var f=o.firstChild;f;){var x=f.nextSibling,_=f.nodeName;f[Os]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&f.rel.toLowerCase()==="stylesheet"||o.removeChild(f),f=x}}else o==="body"&&yo(e.ownerDocument.body);o=d}while(o);vs(t)}function xg(e,t){var o=e;e=0;do{var l=o.nextSibling;if(o.nodeType===1?t?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(t?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),l&&l.nodeType===8)if(o=l.data,o==="/$"){if(e===0)break;e--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||e++;o=l}while(o)}function sd(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var o=t;switch(t=t.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":sd(o),uc(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function f1(e,t,o,l){for(;e.nodeType===1;){var d=o;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Os])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Ln(e.nextSibling),e===null)break}return null}function p1(e,t,o){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=Ln(e.nextSibling),e===null))return null;return e}function Sg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Ln(e.nextSibling),e===null))return null;return e}function od(e){return e.data==="$?"||e.data==="$~"}function ad(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function m1(e,t){var o=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||o.readyState!=="loading")t();else{var l=function(){t(),o.removeEventListener("DOMContentLoaded",l)};o.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Ln(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var ld=null;function wg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"||o==="/&"){if(t===0)return Ln(e.nextSibling);t--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||t++}e=e.nextSibling}return null}function Cg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(t===0)return e;t--}else o!=="/$"&&o!=="/&"||t++}e=e.previousSibling}return null}function jg(e,t,o){switch(t=Ya(o),e){case"html":if(e=t.documentElement,!e)throw Error(a(452));return e;case"head":if(e=t.head,!e)throw Error(a(453));return e;case"body":if(e=t.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function yo(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);uc(e)}var Bn=new Map,Tg=new Set;function Xa(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var jr=M.d;M.d={f:g1,r:y1,D:v1,C:b1,L:x1,m:S1,X:C1,S:w1,M:j1};function g1(){var e=jr.f(),t=Ba();return e||t}function y1(e){var t=Ui(e);t!==null&&t.tag===5&&t.type==="form"?qp(t):jr.r(e)}var ms=typeof document>"u"?null:document;function Rg(e,t,o){var l=ms;if(l&&typeof t=="string"&&t){var d=Pn(t);d='link[rel="'+e+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),Tg.has(d)||(Tg.add(d),e={rel:e,crossOrigin:o,href:t},l.querySelector(d)===null&&(t=l.createElement("link"),Yt(t,"link",e),Ht(t),l.head.appendChild(t)))}}function v1(e){jr.D(e),Rg("dns-prefetch",e,null)}function b1(e,t){jr.C(e,t),Rg("preconnect",e,t)}function x1(e,t,o){jr.L(e,t,o);var l=ms;if(l&&e&&t){var d='link[rel="preload"][as="'+Pn(t)+'"]';t==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+Pn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+Pn(o.imageSizes)+'"]')):d+='[href="'+Pn(e)+'"]';var f=d;switch(t){case"style":f=gs(e);break;case"script":f=ys(e)}Bn.has(f)||(e=k({rel:"preload",href:t==="image"&&o&&o.imageSrcSet?void 0:e,as:t},o),Bn.set(f,e),l.querySelector(d)!==null||t==="style"&&l.querySelector(vo(f))||t==="script"&&l.querySelector(bo(f))||(t=l.createElement("link"),Yt(t,"link",e),Ht(t),l.head.appendChild(t)))}}function S1(e,t){jr.m(e,t);var o=ms;if(o&&e){var l=t&&typeof t.as=="string"?t.as:"script",d='link[rel="modulepreload"][as="'+Pn(l)+'"][href="'+Pn(e)+'"]',f=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=ys(e)}if(!Bn.has(f)&&(e=k({rel:"modulepreload",href:e},t),Bn.set(f,e),o.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(bo(f)))return}l=o.createElement("link"),Yt(l,"link",e),Ht(l),o.head.appendChild(l)}}}function w1(e,t,o){jr.S(e,t,o);var l=ms;if(l&&e){var d=zi(l).hoistableStyles,f=gs(e);t=t||"default";var x=d.get(f);if(!x){var _={loading:0,preload:null};if(x=l.querySelector(vo(f)))_.loading=5;else{e=k({rel:"stylesheet",href:e,"data-precedence":t},o),(o=Bn.get(f))&&cd(e,o);var Z=x=l.createElement("link");Ht(Z),Yt(Z,"link",e),Z._p=new Promise(function(ge,Ee){Z.onload=ge,Z.onerror=Ee}),Z.addEventListener("load",function(){_.loading|=1}),Z.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Ja(x,t,l)}x={type:"stylesheet",instance:x,count:1,state:_},d.set(f,x)}}}function C1(e,t){jr.X(e,t);var o=ms;if(o&&e){var l=zi(o).hoistableScripts,d=ys(e),f=l.get(d);f||(f=o.querySelector(bo(d)),f||(e=k({src:e,async:!0},t),(t=Bn.get(d))&&ud(e,t),f=o.createElement("script"),Ht(f),Yt(f,"link",e),o.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function j1(e,t){jr.M(e,t);var o=ms;if(o&&e){var l=zi(o).hoistableScripts,d=ys(e),f=l.get(d);f||(f=o.querySelector(bo(d)),f||(e=k({src:e,async:!0,type:"module"},t),(t=Bn.get(d))&&ud(e,t),f=o.createElement("script"),Ht(f),Yt(f,"link",e),o.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(d,f))}}function Eg(e,t,o,l){var d=(d=E.current)?Xa(d):null;if(!d)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(t=gs(o.href),o=zi(d).hoistableStyles,l=o.get(t),l||(l={type:"style",instance:null,count:0,state:null},o.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=gs(o.href);var f=zi(d).hoistableStyles,x=f.get(e);if(x||(d=d.ownerDocument||d,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,x),(f=d.querySelector(vo(e)))&&!f._p&&(x.instance=f,x.state.loading=5),Bn.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Bn.set(e,o),f||T1(d,e,o,x.state))),t&&l===null)throw Error(a(528,""));return x}if(t&&l!==null)throw Error(a(529,""));return null;case"script":return t=o.async,o=o.src,typeof o=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ys(o),o=zi(d).hoistableScripts,l=o.get(t),l||(l={type:"script",instance:null,count:0,state:null},o.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function gs(e){return'href="'+Pn(e)+'"'}function vo(e){return'link[rel="stylesheet"]['+e+"]"}function kg(e){return k({},e,{"data-precedence":e.precedence,precedence:null})}function T1(e,t,o,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),Yt(t,"link",o),Ht(t),e.head.appendChild(t))}function ys(e){return'[src="'+Pn(e)+'"]'}function bo(e){return"script[async]"+e}function Ag(e,t,o){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+Pn(o.href)+'"]');if(l)return t.instance=l,Ht(l),l;var d=k({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Ht(l),Yt(l,"style",d),Ja(l,o.precedence,e),t.instance=l;case"stylesheet":d=gs(o.href);var f=e.querySelector(vo(d));if(f)return t.state.loading|=4,t.instance=f,Ht(f),f;l=kg(o),(d=Bn.get(d))&&cd(l,d),f=(e.ownerDocument||e).createElement("link"),Ht(f);var x=f;return x._p=new Promise(function(_,Z){x.onload=_,x.onerror=Z}),Yt(f,"link",l),t.state.loading|=4,Ja(f,o.precedence,e),t.instance=f;case"script":return f=ys(o.src),(d=e.querySelector(bo(f)))?(t.instance=d,Ht(d),d):(l=o,(d=Bn.get(f))&&(l=k({},o),ud(l,d)),e=e.ownerDocument||e,d=e.createElement("script"),Ht(d),Yt(d,"link",l),e.head.appendChild(d),t.instance=d);case"void":return null;default:throw Error(a(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Ja(l,o.precedence,e));return t.instance}function Ja(e,t,o){for(var l=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,f=d,x=0;x<l.length;x++){var _=l[x];if(_.dataset.precedence===t)f=_;else if(f!==d)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=o.nodeType===9?o.head:o,t.insertBefore(e,t.firstChild))}function cd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function ud(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Ka=null;function Ng(e,t,o){if(Ka===null){var l=new Map,d=Ka=new Map;d.set(o,l)}else d=Ka,l=d.get(o),l||(l=new Map,d.set(o,l));if(l.has(e))return l;for(l.set(e,null),o=o.getElementsByTagName(e),d=0;d<o.length;d++){var f=o[d];if(!(f[Os]||f[Ft]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var x=f.getAttribute(t)||"";x=e+x;var _=l.get(x);_?_.push(f):l.set(x,[f])}}return l}function _g(e,t,o){e=e.ownerDocument||e,e.head.insertBefore(o,t==="title"?e.querySelector("head > title"):null)}function R1(e,t,o){if(o===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Pg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function E1(e,t,o,l){if(o.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=gs(l.href),f=t.querySelector(vo(d));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Qa.bind(e),t.then(e,e)),o.state.loading|=4,o.instance=f,Ht(f);return}f=t.ownerDocument||t,l=kg(l),(d=Bn.get(d))&&cd(l,d),f=f.createElement("link"),Ht(f);var x=f;x._p=new Promise(function(_,Z){x.onload=_,x.onerror=Z}),Yt(f,"link",l),o.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(o,t),(t=o.state.preload)&&(o.state.loading&3)===0&&(e.count++,o=Qa.bind(e),t.addEventListener("load",o),t.addEventListener("error",o))}}var dd=0;function k1(e,t){return e.stylesheets&&e.count===0&&el(e,e.stylesheets),0<e.count||0<e.imgCount?function(o){var l=setTimeout(function(){if(e.stylesheets&&el(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+t);0<e.imgBytes&&dd===0&&(dd=62500*l1());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&el(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>dd?50:800)+t);return e.unsuspend=o,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function Qa(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)el(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Za=null;function el(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Za=new Map,t.forEach(A1,e),Za=null,Qa.call(e))}function A1(e,t){if(!(t.state.loading&4)){var o=Za.get(e);if(o)var l=o.get(null);else{o=new Map,Za.set(e,o);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<d.length;f++){var x=d[f];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(o.set(x.dataset.precedence,x),l=x)}l&&o.set(null,l)}d=t.instance,x=d.getAttribute("data-precedence"),f=o.get(x)||l,f===l&&o.set(null,d),o.set(x,d),this.count++,l=Qa.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),f?f.parentNode.insertBefore(d,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),t.state.loading|=4}}var xo={$$typeof:fe,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function N1(e,t,o,l,d,f,x,_,Z){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=oc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oc(0),this.hiddenUpdates=oc(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=f,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Z,this.incompleteTransitions=new Map}function Mg(e,t,o,l,d,f,x,_,Z,ge,Ee,Pe){return e=new N1(e,t,o,x,Z,ge,Ee,Pe,_),t=1,f===!0&&(t|=24),f=Sn(3,null,null,t),e.current=f,f.stateNode=e,t=Fc(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:l,isDehydrated:o,cache:t},Yc(f),e}function Og(e){return e?(e=Yi,e):Yi}function Dg(e,t,o,l,d,f){d=Og(d),l.context===null?l.context=d:l.pendingContext=d,l=Ir(t),l.payload={element:o},f=f===void 0?null:f,f!==null&&(l.callback=f),o=Ur(e,l,t),o!==null&&(gn(o,e,t),Ks(o,e,t))}function Ig(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<t?o:t}}function hd(e,t){Ig(e,t),(e=e.alternate)&&Ig(e,t)}function Ug(e){if(e.tag===13||e.tag===31){var t=hi(e,67108864);t!==null&&gn(t,e,67108864),hd(e,67108864)}}function zg(e){if(e.tag===13||e.tag===31){var t=Rn();t=ac(t);var o=hi(e,t);o!==null&&gn(o,e,t),hd(e,t)}}var tl=!0;function _1(e,t,o,l){var d=W.T;W.T=null;var f=M.p;try{M.p=2,fd(e,t,o,l)}finally{M.p=f,W.T=d}}function P1(e,t,o,l){var d=W.T;W.T=null;var f=M.p;try{M.p=8,fd(e,t,o,l)}finally{M.p=f,W.T=d}}function fd(e,t,o,l){if(tl){var d=pd(l);if(d===null)Zu(e,t,l,nl,o),Bg(e,l);else if(O1(d,e,t,o,l))l.stopPropagation();else if(Bg(e,l),t&4&&-1<M1.indexOf(e)){for(;d!==null;){var f=Ui(d);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var x=ln(f.pendingLanes);if(x!==0){var _=f;for(_.pendingLanes|=2,_.entangledLanes|=2;x;){var Z=1<<31-pe(x);_.entanglements[1]|=Z,x&=~Z}nr(f),(ut&6)===0&&(za=Te()+500,po(0))}}break;case 31:case 13:_=hi(f,2),_!==null&&gn(_,f,2),Ba(),hd(f,2)}if(f=pd(l),f===null&&Zu(e,t,l,nl,o),f===d)break;d=f}d!==null&&l.stopPropagation()}else Zu(e,t,l,null,o)}}function pd(e){return e=gc(e),md(e)}var nl=null;function md(e){if(nl=null,e=Ii(e),e!==null){var t=u(e);if(t===null)e=null;else{var o=t.tag;if(o===13){if(e=h(t),e!==null)return e;e=null}else if(o===31){if(e=p(t),e!==null)return e;e=null}else if(o===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return nl=e,null}function Lg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ke()){case O:return 2;case w:return 8;case L:case P:return 32;case D:return 268435456;default:return 32}default:return 32}}var gd=!1,Yr=null,Xr=null,Jr=null,So=new Map,wo=new Map,Kr=[],M1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Bg(e,t){switch(e){case"focusin":case"focusout":Yr=null;break;case"dragenter":case"dragleave":Xr=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":So.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":wo.delete(t.pointerId)}}function Co(e,t,o,l,d,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:o,eventSystemFlags:l,nativeEvent:f,targetContainers:[d]},t!==null&&(t=Ui(t),t!==null&&Ug(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function O1(e,t,o,l,d){switch(t){case"focusin":return Yr=Co(Yr,e,t,o,l,d),!0;case"dragenter":return Xr=Co(Xr,e,t,o,l,d),!0;case"mouseover":return Jr=Co(Jr,e,t,o,l,d),!0;case"pointerover":var f=d.pointerId;return So.set(f,Co(So.get(f)||null,e,t,o,l,d)),!0;case"gotpointercapture":return f=d.pointerId,wo.set(f,Co(wo.get(f)||null,e,t,o,l,d)),!0}return!1}function Hg(e){var t=Ii(e.target);if(t!==null){var o=u(t);if(o!==null){if(t=o.tag,t===13){if(t=h(o),t!==null){e.blockedOn=t,ef(e.priority,function(){zg(o)});return}}else if(t===31){if(t=p(o),t!==null){e.blockedOn=t,ef(e.priority,function(){zg(o)});return}}else if(t===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function rl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var o=pd(e.nativeEvent);if(o===null){o=e.nativeEvent;var l=new o.constructor(o.type,o);mc=l,o.target.dispatchEvent(l),mc=null}else return t=Ui(o),t!==null&&Ug(t),e.blockedOn=o,!1;t.shift()}return!0}function qg(e,t,o){rl(e)&&o.delete(t)}function D1(){gd=!1,Yr!==null&&rl(Yr)&&(Yr=null),Xr!==null&&rl(Xr)&&(Xr=null),Jr!==null&&rl(Jr)&&(Jr=null),So.forEach(qg),wo.forEach(qg)}function il(e,t){e.blockedOn===t&&(e.blockedOn=null,gd||(gd=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,D1)))}var sl=null;function $g(e){sl!==e&&(sl=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){sl===e&&(sl=null);for(var t=0;t<e.length;t+=3){var o=e[t],l=e[t+1],d=e[t+2];if(typeof l!="function"){if(md(l||o)===null)continue;break}var f=Ui(o);f!==null&&(e.splice(t,3),t-=3,pu(f,{pending:!0,data:d,method:o.method,action:l},l,d))}}))}function vs(e){function t(Z){return il(Z,e)}Yr!==null&&il(Yr,e),Xr!==null&&il(Xr,e),Jr!==null&&il(Jr,e),So.forEach(t),wo.forEach(t);for(var o=0;o<Kr.length;o++){var l=Kr[o];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Kr.length&&(o=Kr[0],o.blockedOn===null);)Hg(o),o.blockedOn===null&&Kr.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(l=0;l<o.length;l+=3){var d=o[l],f=o[l+1],x=d[un]||null;if(typeof f=="function")x||$g(o);else if(x){var _=null;if(f&&f.hasAttribute("formAction")){if(d=f,x=f[un]||null)_=x.formAction;else if(md(d)!==null)continue}else _=x.action;typeof _=="function"?o[l+1]=_:(o.splice(l,3),l-=3),$g(o)}}}function Fg(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(x){return d=x})},focusReset:"manual",scroll:"manual"})}function t(){d!==null&&(d(),d=null),l||setTimeout(o,20)}function o(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(o,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),d!==null&&(d(),d=null)}}}function yd(e){this._internalRoot=e}ol.prototype.render=yd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(a(409));var o=t.current,l=Rn();Dg(o,l,e,t,null,null)},ol.prototype.unmount=yd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Dg(e.current,2,null,e,null,null),Ba(),t[Di]=null}};function ol(e){this._internalRoot=e}ol.prototype.unstable_scheduleHydration=function(e){if(e){var t=Zh();e={blockedOn:null,target:e,priority:t};for(var o=0;o<Kr.length&&t!==0&&t<Kr[o].priority;o++);Kr.splice(o,0,e),o===0&&Hg(e)}};var Vg=r.version;if(Vg!=="19.2.3")throw Error(a(527,Vg,"19.2.3"));M.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=g(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var I1={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!al.isDisabled&&al.supportsFiber)try{Be=al.inject(I1),Oe=al}catch{}}return To.createRoot=function(e,t){if(!c(e))throw Error(a(299));var o=!1,l="",d=Qp,f=Zp,x=em;return t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(d=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(x=t.onRecoverableError)),t=Mg(e,1,!1,null,null,o,l,null,d,f,x,Fg),e[Di]=t.current,Qu(e),new yd(t)},To.hydrateRoot=function(e,t,o){if(!c(e))throw Error(a(299));var l=!1,d="",f=Qp,x=Zp,_=em,Z=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(f=o.onUncaughtError),o.onCaughtError!==void 0&&(x=o.onCaughtError),o.onRecoverableError!==void 0&&(_=o.onRecoverableError),o.formState!==void 0&&(Z=o.formState)),t=Mg(e,1,!0,t,o??null,l,d,Z,f,x,_,Fg),t.context=Og(null),o=t.current,l=Rn(),l=ac(l),d=Ir(l),d.callback=null,Ur(o,d,l),o=l,t.current.lanes=o,Ms(t,o),nr(t),e[Di]=t.current,Qu(e),new ol(t)},To.version="19.2.3",To}var ny;function Y1(){if(ny)return xd.exports;ny=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(r){console.error(r)}}return n(),xd.exports=G1(),xd.exports}var X1=Y1();var ry="popstate";function J1(n={}){function r(a,c){let{pathname:u,search:h,hash:p}=a.location;return Vd("",{pathname:u,search:h,hash:p},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function s(a,c){return typeof c=="string"?c:Do(c)}return Q1(r,s,null,n)}function Ct(n,r){if(n===!1||n===null||typeof n>"u")throw new Error(r)}function kn(n,r){if(!n){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function K1(){return Math.random().toString(36).substring(2,10)}function iy(n,r){return{usr:n.state,key:n.key,idx:r}}function Vd(n,r,s=null,a){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof r=="string"?Rs(r):r,state:s,key:r&&r.key||a||K1()}}function Do({pathname:n="/",search:r="",hash:s=""}){return r&&r!=="?"&&(n+=r.charAt(0)==="?"?r:"?"+r),s&&s!=="#"&&(n+=s.charAt(0)==="#"?s:"#"+s),n}function Rs(n){let r={};if(n){let s=n.indexOf("#");s>=0&&(r.hash=n.substring(s),n=n.substring(0,s));let a=n.indexOf("?");a>=0&&(r.search=n.substring(a),n=n.substring(0,a)),n&&(r.pathname=n)}return r}function Q1(n,r,s,a={}){let{window:c=document.defaultView,v5Compat:u=!1}=a,h=c.history,p="POP",m=null,g=y();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function y(){return(h.state||{idx:null}).idx}function k(){p="POP";let z=y(),Q=z==null?null:z-g;g=z,m&&m({action:p,location:q.location,delta:Q})}function U(z,Q){p="PUSH";let Y=Vd(q.location,z,Q);g=y()+1;let fe=iy(Y,g),le=q.createHref(Y);try{h.pushState(fe,"",le)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;c.location.assign(le)}u&&m&&m({action:p,location:q.location,delta:1})}function V(z,Q){p="REPLACE";let Y=Vd(q.location,z,Q);g=y();let fe=iy(Y,g),le=q.createHref(Y);h.replaceState(fe,"",le),u&&m&&m({action:p,location:q.location,delta:0})}function I(z){return Z1(z)}let q={get action(){return p},get location(){return n(c,h)},listen(z){if(m)throw new Error("A history only accepts one active listener");return c.addEventListener(ry,k),m=z,()=>{c.removeEventListener(ry,k),m=null}},createHref(z){return r(c,z)},createURL:I,encodeLocation(z){let Q=I(z);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:U,replace:V,go(z){return h.go(z)}};return q}function Z1(n,r=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Ct(s,"No window.location.(origin|href) available to create URL");let a=typeof n=="string"?n:Do(n);return a=a.replace(/ $/,"%20"),!r&&a.startsWith("//")&&(a=s+a),new URL(a,s)}function S0(n,r,s="/"){return ew(n,r,s,!1)}function ew(n,r,s,a){let c=typeof r=="string"?Rs(r):r,u=Rr(c.pathname||"/",s);if(u==null)return null;let h=w0(n);tw(h);let p=null;for(let m=0;p==null&&m<h.length;++m){let g=hw(u);p=uw(h[m],g,a)}return p}function w0(n,r=[],s=[],a="",c=!1){let u=(h,p,m=c,g)=>{let y={relativePath:g===void 0?h.path||"":g,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(a)&&m)return;Ct(y.relativePath.startsWith(a),`Absolute route path "${y.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(a.length)}let k=Tr([a,y.relativePath]),U=s.concat(y);h.children&&h.children.length>0&&(Ct(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${k}".`),w0(h.children,r,U,k,m)),!(h.path==null&&!h.index)&&r.push({path:k,score:lw(k,h.index),routesMeta:U})};return n.forEach((h,p)=>{if(h.path===""||!h.path?.includes("?"))u(h,p);else for(let m of C0(h.path))u(h,p,!0,m)}),r}function C0(n){let r=n.split("/");if(r.length===0)return[];let[s,...a]=r,c=s.endsWith("?"),u=s.replace(/\?$/,"");if(a.length===0)return c?[u,""]:[u];let h=C0(a.join("/")),p=[];return p.push(...h.map(m=>m===""?u:[u,m].join("/"))),c&&p.push(...h),p.map(m=>n.startsWith("/")&&m===""?"/":m)}function tw(n){n.sort((r,s)=>r.score!==s.score?s.score-r.score:cw(r.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}var nw=/^:[\w-]+$/,rw=3,iw=2,sw=1,ow=10,aw=-2,sy=n=>n==="*";function lw(n,r){let s=n.split("/"),a=s.length;return s.some(sy)&&(a+=aw),r&&(a+=iw),s.filter(c=>!sy(c)).reduce((c,u)=>c+(nw.test(u)?rw:u===""?sw:ow),a)}function cw(n,r){return n.length===r.length&&n.slice(0,-1).every((a,c)=>a===r[c])?n[n.length-1]-r[r.length-1]:0}function uw(n,r,s=!1){let{routesMeta:a}=n,c={},u="/",h=[];for(let p=0;p<a.length;++p){let m=a[p],g=p===a.length-1,y=u==="/"?r:r.slice(u.length)||"/",k=Rl({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},y),U=m.route;if(!k&&g&&s&&!a[a.length-1].route.index&&(k=Rl({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!k)return null;Object.assign(c,k.params),h.push({params:c,pathname:Tr([u,k.pathname]),pathnameBase:gw(Tr([u,k.pathnameBase])),route:U}),k.pathnameBase!=="/"&&(u=Tr([u,k.pathnameBase]))}return h}function Rl(n,r){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[s,a]=dw(n.path,n.caseSensitive,n.end),c=r.match(s);if(!c)return null;let u=c[0],h=u.replace(/(.)\/+$/,"$1"),p=c.slice(1);return{params:a.reduce((g,{paramName:y,isOptional:k},U)=>{if(y==="*"){let I=p[U]||"";h=u.slice(0,u.length-I.length).replace(/(.)\/+$/,"$1")}const V=p[U];return k&&!V?g[y]=void 0:g[y]=(V||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:h,pattern:n}}function dw(n,r=!1,s=!0){kn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let a=[],c="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,m)=>(a.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(a.push({paramName:"*"}),c+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?c+="\\/*$":n!==""&&n!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,r?void 0:"i"),a]}function hw(n){try{return n.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return kn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),n}}function Rr(n,r){if(r==="/")return n;if(!n.toLowerCase().startsWith(r.toLowerCase()))return null;let s=r.endsWith("/")?r.length-1:r.length,a=n.charAt(s);return a&&a!=="/"?null:n.slice(s)||"/"}var j0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fw=n=>j0.test(n);function pw(n,r="/"){let{pathname:s,search:a="",hash:c=""}=typeof n=="string"?Rs(n):n,u;if(s)if(fw(s))u=s;else{if(s.includes("//")){let h=s;s=s.replace(/\/\/+/g,"/"),kn(!1,`Pathnames cannot have embedded double slashes - normalizing ${h} -> ${s}`)}s.startsWith("/")?u=oy(s.substring(1),"/"):u=oy(s,r)}else u=r;return{pathname:u,search:yw(a),hash:vw(c)}}function oy(n,r){let s=r.replace(/\/+$/,"").split("/");return n.split("/").forEach(c=>{c===".."?s.length>1&&s.pop():c!=="."&&s.push(c)}),s.length>1?s.join("/"):"/"}function jd(n,r,s,a){return`Cannot include a '${n}' character in a manually specified \`to.${r}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mw(n){return n.filter((r,s)=>s===0||r.route.path&&r.route.path.length>0)}function ch(n){let r=mw(n);return r.map((s,a)=>a===r.length-1?s.pathname:s.pathnameBase)}function uh(n,r,s,a=!1){let c;typeof n=="string"?c=Rs(n):(c={...n},Ct(!c.pathname||!c.pathname.includes("?"),jd("?","pathname","search",c)),Ct(!c.pathname||!c.pathname.includes("#"),jd("#","pathname","hash",c)),Ct(!c.search||!c.search.includes("#"),jd("#","search","hash",c)));let u=n===""||c.pathname==="",h=u?"/":c.pathname,p;if(h==null)p=s;else{let k=r.length-1;if(!a&&h.startsWith("..")){let U=h.split("/");for(;U[0]==="..";)U.shift(),k-=1;c.pathname=U.join("/")}p=k>=0?r[k]:"/"}let m=pw(c,p),g=h&&h!=="/"&&h.endsWith("/"),y=(u||h===".")&&s.endsWith("/");return!m.pathname.endsWith("/")&&(g||y)&&(m.pathname+="/"),m}var Tr=n=>n.join("/").replace(/\/\/+/g,"/"),gw=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),yw=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,vw=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,bw=class{constructor(n,r,s,a=!1){this.status=n,this.statusText=r||"",this.internal=a,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}};function xw(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function Sw(n){return n.map(r=>r.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var T0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function R0(n,r){let s=n;if(typeof s!="string"||!j0.test(s))return{absoluteURL:void 0,isExternal:!1,to:s};let a=s,c=!1;if(T0)try{let u=new URL(window.location.href),h=s.startsWith("//")?new URL(u.protocol+s):new URL(s),p=Rr(h.pathname,r);h.origin===u.origin&&p!=null?s=p+h.search+h.hash:c=!0}catch{kn(!1,`<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:c,to:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var E0=["POST","PUT","PATCH","DELETE"];new Set(E0);var ww=["GET",...E0];new Set(ww);var Es=R.createContext(null);Es.displayName="DataRouter";var Ll=R.createContext(null);Ll.displayName="DataRouterState";var Cw=R.createContext(!1),k0=R.createContext({isTransitioning:!1});k0.displayName="ViewTransition";var jw=R.createContext(new Map);jw.displayName="Fetchers";var Tw=R.createContext(null);Tw.displayName="Await";var An=R.createContext(null);An.displayName="Navigation";var Bo=R.createContext(null);Bo.displayName="Location";var Xn=R.createContext({outlet:null,matches:[],isDataRoute:!1});Xn.displayName="Route";var dh=R.createContext(null);dh.displayName="RouteError";var A0="REACT_ROUTER_ERROR",Rw="REDIRECT",Ew="ROUTE_ERROR_RESPONSE";function kw(n){if(n.startsWith(`${A0}:${Rw}:{`))try{let r=JSON.parse(n.slice(28));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.location=="string"&&typeof r.reloadDocument=="boolean"&&typeof r.replace=="boolean")return r}catch{}}function Aw(n){if(n.startsWith(`${A0}:${Ew}:{`))try{let r=JSON.parse(n.slice(40));if(typeof r=="object"&&r&&typeof r.status=="number"&&typeof r.statusText=="string")return new bw(r.status,r.statusText,r.data)}catch{}}function Nw(n,{relative:r}={}){Ct(ks(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:a}=R.useContext(An),{hash:c,pathname:u,search:h}=Ho(n,{relative:r}),p=u;return s!=="/"&&(p=u==="/"?s:Tr([s,u])),a.createHref({pathname:p,search:h,hash:c})}function ks(){return R.useContext(Bo)!=null}function Jn(){return Ct(ks(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Bo).location}var N0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _0(n){R.useContext(An).static||R.useLayoutEffect(n)}function Kn(){let{isDataRoute:n}=R.useContext(Xn);return n?$w():_w()}function _w(){Ct(ks(),"useNavigate() may be used only in the context of a <Router> component.");let n=R.useContext(Es),{basename:r,navigator:s}=R.useContext(An),{matches:a}=R.useContext(Xn),{pathname:c}=Jn(),u=JSON.stringify(ch(a)),h=R.useRef(!1);return _0(()=>{h.current=!0}),R.useCallback((m,g={})=>{if(kn(h.current,N0),!h.current)return;if(typeof m=="number"){s.go(m);return}let y=uh(m,JSON.parse(u),c,g.relative==="path");n==null&&r!=="/"&&(y.pathname=y.pathname==="/"?r:Tr([r,y.pathname])),(g.replace?s.replace:s.push)(y,g.state,g)},[r,s,u,c,n])}R.createContext(null);function hh(){let{matches:n}=R.useContext(Xn),r=n[n.length-1];return r?r.params:{}}function Ho(n,{relative:r}={}){let{matches:s}=R.useContext(Xn),{pathname:a}=Jn(),c=JSON.stringify(ch(s));return R.useMemo(()=>uh(n,JSON.parse(c),a,r==="path"),[n,c,a,r])}function Pw(n,r){return P0(n,r)}function P0(n,r,s,a,c){Ct(ks(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=R.useContext(An),{matches:h}=R.useContext(Xn),p=h[h.length-1],m=p?p.params:{},g=p?p.pathname:"/",y=p?p.pathnameBase:"/",k=p&&p.route;{let Y=k&&k.path||"";O0(g,!k||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let U=Jn(),V;if(r){let Y=typeof r=="string"?Rs(r):r;Ct(y==="/"||Y.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),V=Y}else V=U;let I=V.pathname||"/",q=I;if(y!=="/"){let Y=y.replace(/^\//,"").split("/");q="/"+I.replace(/^\//,"").split("/").slice(Y.length).join("/")}let z=S0(n,{pathname:q});kn(k||z!=null,`No routes matched location "${V.pathname}${V.search}${V.hash}" `),kn(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${V.pathname}${V.search}${V.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Q=Uw(z&&z.map(Y=>Object.assign({},Y,{params:Object.assign({},m,Y.params),pathname:Tr([y,u.encodeLocation?u.encodeLocation(Y.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?y:Tr([y,u.encodeLocation?u.encodeLocation(Y.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathnameBase])})),h,s,a,c);return r&&Q?R.createElement(Bo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...V},navigationType:"POP"}},Q):Q}function Mw(){let n=qw(),r=xw(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),s=n instanceof Error?n.stack:null,a="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:a},u={padding:"2px 4px",backgroundColor:a},h=null;return console.error("Error handled by React Router default ErrorBoundary:",n),h=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:u},"ErrorBoundary")," or"," ",R.createElement("code",{style:u},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},r),s?R.createElement("pre",{style:c},s):null,h)}var Ow=R.createElement(Mw,null),M0=class extends R.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,r){return r.location!==n.location||r.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:r.error,location:r.location,revalidation:n.revalidation||r.revalidation}}componentDidCatch(n,r){this.props.onError?this.props.onError(n,r):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const s=Aw(n.digest);s&&(n=s)}let r=n!==void 0?R.createElement(Xn.Provider,{value:this.props.routeContext},R.createElement(dh.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?R.createElement(Dw,{error:n},r):r}};M0.contextType=Cw;var Td=new WeakMap;function Dw({children:n,error:r}){let{basename:s}=R.useContext(An);if(typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){let a=kw(r.digest);if(a){let c=Td.get(r);if(c)throw c;let u=R0(a.location,s);if(T0&&!Td.get(r))if(u.isExternal||a.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:a.replace}));throw Td.set(r,h),h}return R.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return n}function Iw({routeContext:n,match:r,children:s}){let a=R.useContext(Es);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),R.createElement(Xn.Provider,{value:n},s)}function Uw(n,r=[],s=null,a=null,c=null){if(n==null){if(!s)return null;if(s.errors)n=s.matches;else if(r.length===0&&!s.initialized&&s.matches.length>0)n=s.matches;else return null}let u=n,h=s?.errors;if(h!=null){let y=u.findIndex(k=>k.route.id&&h?.[k.route.id]!==void 0);Ct(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,y+1))}let p=!1,m=-1;if(s)for(let y=0;y<u.length;y++){let k=u[y];if((k.route.HydrateFallback||k.route.hydrateFallbackElement)&&(m=y),k.route.id){let{loaderData:U,errors:V}=s,I=k.route.loader&&!U.hasOwnProperty(k.route.id)&&(!V||V[k.route.id]===void 0);if(k.route.lazy||I){p=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}let g=s&&a?(y,k)=>{a(y,{location:s.location,params:s.matches?.[0]?.params??{},unstable_pattern:Sw(s.matches),errorInfo:k})}:void 0;return u.reduceRight((y,k,U)=>{let V,I=!1,q=null,z=null;s&&(V=h&&k.route.id?h[k.route.id]:void 0,q=k.route.errorElement||Ow,p&&(m<0&&U===0?(O0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,z=null):m===U&&(I=!0,z=k.route.hydrateFallbackElement||null)));let Q=r.concat(u.slice(0,U+1)),Y=()=>{let fe;return V?fe=q:I?fe=z:k.route.Component?fe=R.createElement(k.route.Component,null):k.route.element?fe=k.route.element:fe=y,R.createElement(Iw,{match:k,routeContext:{outlet:y,matches:Q,isDataRoute:s!=null},children:fe})};return s&&(k.route.ErrorBoundary||k.route.errorElement||U===0)?R.createElement(M0,{location:s.location,revalidation:s.revalidation,component:q,error:V,children:Y(),routeContext:{outlet:null,matches:Q,isDataRoute:!0},onError:g}):Y()},null)}function fh(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function zw(n){let r=R.useContext(Es);return Ct(r,fh(n)),r}function Lw(n){let r=R.useContext(Ll);return Ct(r,fh(n)),r}function Bw(n){let r=R.useContext(Xn);return Ct(r,fh(n)),r}function ph(n){let r=Bw(n),s=r.matches[r.matches.length-1];return Ct(s.route.id,`${n} can only be used on routes that contain a unique "id"`),s.route.id}function Hw(){return ph("useRouteId")}function qw(){let n=R.useContext(dh),r=Lw("useRouteError"),s=ph("useRouteError");return n!==void 0?n:r.errors?.[s]}function $w(){let{router:n}=zw("useNavigate"),r=ph("useNavigate"),s=R.useRef(!1);return _0(()=>{s.current=!0}),R.useCallback(async(c,u={})=>{kn(s.current,N0),s.current&&(typeof c=="number"?await n.navigate(c):await n.navigate(c,{fromRouteId:r,...u}))},[n,r])}var ay={};function O0(n,r,s){!r&&!ay[n]&&(ay[n]=!0,kn(!1,s))}R.memo(Fw);function Fw({routes:n,future:r,state:s,onError:a}){return P0(n,void 0,s,a,r)}function Hn({to:n,replace:r,state:s,relative:a}){Ct(ks(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=R.useContext(An);kn(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=R.useContext(Xn),{pathname:h}=Jn(),p=Kn(),m=uh(n,ch(u),h,a==="path"),g=JSON.stringify(m);return R.useEffect(()=>{p(JSON.parse(g),{replace:r,state:s,relative:a})},[p,g,a,r,s]),null}function Et(n){Ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Vw({basename:n="/",children:r=null,location:s,navigationType:a="POP",navigator:c,static:u=!1,unstable_useTransitions:h}){Ct(!ks(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=n.replace(/^\/*/,"/"),m=R.useMemo(()=>({basename:p,navigator:c,static:u,unstable_useTransitions:h,future:{}}),[p,c,u,h]);typeof s=="string"&&(s=Rs(s));let{pathname:g="/",search:y="",hash:k="",state:U=null,key:V="default"}=s,I=R.useMemo(()=>{let q=Rr(g,p);return q==null?null:{location:{pathname:q,search:y,hash:k,state:U,key:V},navigationType:a}},[p,g,y,k,U,V,a]);return kn(I!=null,`<Router basename="${p}"> is not able to match the URL "${g}${y}${k}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:R.createElement(An.Provider,{value:m},R.createElement(Bo.Provider,{children:r,value:I}))}function Ww({children:n,location:r}){return Pw(Wd(n),r)}function Wd(n,r=[]){let s=[];return R.Children.forEach(n,(a,c)=>{if(!R.isValidElement(a))return;let u=[...r,c];if(a.type===R.Fragment){s.push.apply(s,Wd(a.props.children,u));return}Ct(a.type===Et,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ct(!a.props.index||!a.props.children,"An index route cannot have child routes.");let h={id:a.props.id||u.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(h.children=Wd(a.props.children,u)),s.push(h)}),s}var yl="get",vl="application/x-www-form-urlencoded";function Bl(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function Gw(n){return Bl(n)&&n.tagName.toLowerCase()==="button"}function Yw(n){return Bl(n)&&n.tagName.toLowerCase()==="form"}function Xw(n){return Bl(n)&&n.tagName.toLowerCase()==="input"}function Jw(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Kw(n,r){return n.button===0&&(!r||r==="_self")&&!Jw(n)}function Gd(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((r,s)=>{let a=n[s];return r.concat(Array.isArray(a)?a.map(c=>[s,c]):[[s,a]])},[]))}function Qw(n,r){let s=Gd(n);return r&&r.forEach((a,c)=>{s.has(c)||r.getAll(c).forEach(u=>{s.append(c,u)})}),s}var ll=null;function Zw(){if(ll===null)try{new FormData(document.createElement("form"),0),ll=!1}catch{ll=!0}return ll}var eC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Rd(n){return n!=null&&!eC.has(n)?(kn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vl}"`),null):n}function tC(n,r){let s,a,c,u,h;if(Yw(n)){let p=n.getAttribute("action");a=p?Rr(p,r):null,s=n.getAttribute("method")||yl,c=Rd(n.getAttribute("enctype"))||vl,u=new FormData(n)}else if(Gw(n)||Xw(n)&&(n.type==="submit"||n.type==="image")){let p=n.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=n.getAttribute("formaction")||p.getAttribute("action");if(a=m?Rr(m,r):null,s=n.getAttribute("formmethod")||p.getAttribute("method")||yl,c=Rd(n.getAttribute("formenctype"))||Rd(p.getAttribute("enctype"))||vl,u=new FormData(p,n),!Zw()){let{name:g,type:y,value:k}=n;if(y==="image"){let U=g?`${g}.`:"";u.append(`${U}x`,"0"),u.append(`${U}y`,"0")}else g&&u.append(g,k)}}else{if(Bl(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=yl,a=null,c=vl,h=n}return u&&c==="text/plain"&&(h=u,u=void 0),{action:a,method:s.toLowerCase(),encType:c,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function mh(n,r){if(n===!1||n===null||typeof n>"u")throw new Error(r)}function nC(n,r,s){let a=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return a.pathname==="/"?a.pathname=`_root.${s}`:r&&Rr(a.pathname,r)==="/"?a.pathname=`${r.replace(/\/$/,"")}/_root.${s}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${s}`,a}async function rC(n,r){if(n.id in r)return r[n.id];try{let s=await import(n.module);return r[n.id]=s,s}catch(s){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function iC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function sC(n,r,s){let a=await Promise.all(n.map(async c=>{let u=r.routes[c.route.id];if(u){let h=await rC(u,s);return h.links?h.links():[]}return[]}));return cC(a.flat(1).filter(iC).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function ly(n,r,s,a,c,u){let h=(m,g)=>s[g]?m.route.id!==s[g].route.id:!0,p=(m,g)=>s[g].pathname!==m.pathname||s[g].route.path?.endsWith("*")&&s[g].params["*"]!==m.params["*"];return u==="assets"?r.filter((m,g)=>h(m,g)||p(m,g)):u==="data"?r.filter((m,g)=>{let y=a.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(h(m,g)||p(m,g))return!0;if(m.route.shouldRevalidate){let k=m.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:s[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function oC(n,r,{includeHydrateFallback:s}={}){return aC(n.map(a=>{let c=r.routes[a.route.id];if(!c)return[];let u=[c.module];return c.clientActionModule&&(u=u.concat(c.clientActionModule)),c.clientLoaderModule&&(u=u.concat(c.clientLoaderModule)),s&&c.hydrateFallbackModule&&(u=u.concat(c.hydrateFallbackModule)),c.imports&&(u=u.concat(c.imports)),u}).flat(1))}function aC(n){return[...new Set(n)]}function lC(n){let r={},s=Object.keys(n).sort();for(let a of s)r[a]=n[a];return r}function cC(n,r){let s=new Set;return new Set(r),n.reduce((a,c)=>{let u=JSON.stringify(lC(c));return s.has(u)||(s.add(u),a.push({key:u,link:c})),a},[])}function D0(){let n=R.useContext(Es);return mh(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function uC(){let n=R.useContext(Ll);return mh(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var gh=R.createContext(void 0);gh.displayName="FrameworkContext";function I0(){let n=R.useContext(gh);return mh(n,"You must render this element inside a <HydratedRouter> element"),n}function dC(n,r){let s=R.useContext(gh),[a,c]=R.useState(!1),[u,h]=R.useState(!1),{onFocus:p,onBlur:m,onMouseEnter:g,onMouseLeave:y,onTouchStart:k}=r,U=R.useRef(null);R.useEffect(()=>{if(n==="render"&&h(!0),n==="viewport"){let q=Q=>{Q.forEach(Y=>{h(Y.isIntersecting)})},z=new IntersectionObserver(q,{threshold:.5});return U.current&&z.observe(U.current),()=>{z.disconnect()}}},[n]),R.useEffect(()=>{if(a){let q=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(q)}}},[a]);let V=()=>{c(!0)},I=()=>{c(!1),h(!1)};return s?n!=="intent"?[u,U,{}]:[u,U,{onFocus:Ro(p,V),onBlur:Ro(m,I),onMouseEnter:Ro(g,V),onMouseLeave:Ro(y,I),onTouchStart:Ro(k,V)}]:[!1,U,{}]}function Ro(n,r){return s=>{n&&n(s),s.defaultPrevented||r(s)}}function hC({page:n,...r}){let{router:s}=D0(),a=R.useMemo(()=>S0(s.routes,n,s.basename),[s.routes,n,s.basename]);return a?R.createElement(pC,{page:n,matches:a,...r}):null}function fC(n){let{manifest:r,routeModules:s}=I0(),[a,c]=R.useState([]);return R.useEffect(()=>{let u=!1;return sC(n,r,s).then(h=>{u||c(h)}),()=>{u=!0}},[n,r,s]),a}function pC({page:n,matches:r,...s}){let a=Jn(),{manifest:c,routeModules:u}=I0(),{basename:h}=D0(),{loaderData:p,matches:m}=uC(),g=R.useMemo(()=>ly(n,r,m,c,a,"data"),[n,r,m,c,a]),y=R.useMemo(()=>ly(n,r,m,c,a,"assets"),[n,r,m,c,a]),k=R.useMemo(()=>{if(n===a.pathname+a.search+a.hash)return[];let I=new Set,q=!1;if(r.forEach(Q=>{let Y=c.routes[Q.route.id];!Y||!Y.hasLoader||(!g.some(fe=>fe.route.id===Q.route.id)&&Q.route.id in p&&u[Q.route.id]?.shouldRevalidate||Y.hasClientLoader?q=!0:I.add(Q.route.id))}),I.size===0)return[];let z=nC(n,h,"data");return q&&I.size>0&&z.searchParams.set("_routes",r.filter(Q=>I.has(Q.route.id)).map(Q=>Q.route.id).join(",")),[z.pathname+z.search]},[h,p,a,c,g,r,n,u]),U=R.useMemo(()=>oC(y,c),[y,c]),V=fC(y);return R.createElement(R.Fragment,null,k.map(I=>R.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...s})),U.map(I=>R.createElement("link",{key:I,rel:"modulepreload",href:I,...s})),V.map(({key:I,link:q})=>R.createElement("link",{key:I,nonce:s.nonce,...q})))}function mC(...n){return r=>{n.forEach(s=>{typeof s=="function"?s(r):s!=null&&(s.current=r)})}}var gC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{gC&&(window.__reactRouterVersion="7.11.0")}catch{}function yC({basename:n,children:r,unstable_useTransitions:s,window:a}){let c=R.useRef();c.current==null&&(c.current=J1({window:a,v5Compat:!0}));let u=c.current,[h,p]=R.useState({action:u.action,location:u.location}),m=R.useCallback(g=>{s===!1?p(g):R.startTransition(()=>p(g))},[s]);return R.useLayoutEffect(()=>u.listen(m),[u,m]),R.createElement(Vw,{basename:n,children:r,location:h.location,navigationType:h.action,navigator:u,unstable_useTransitions:s})}var U0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nt=R.forwardRef(function({onClick:r,discover:s="render",prefetch:a="none",relative:c,reloadDocument:u,replace:h,state:p,target:m,to:g,preventScrollReset:y,viewTransition:k,unstable_defaultShouldRevalidate:U,...V},I){let{basename:q,unstable_useTransitions:z}=R.useContext(An),Q=typeof g=="string"&&U0.test(g),Y=R0(g,q);g=Y.to;let fe=Nw(g,{relative:c}),[le,K,ie]=dC(a,V),ae=SC(g,{replace:h,state:p,target:m,preventScrollReset:y,relative:c,viewTransition:k,unstable_defaultShouldRevalidate:U,unstable_useTransitions:z});function Ce(Re){r&&r(Re),Re.defaultPrevented||ae(Re)}let De=R.createElement("a",{...V,...ie,href:Y.absoluteURL||fe,onClick:Y.isExternal||u?r:Ce,ref:mC(I,K),target:m,"data-discover":!Q&&s==="render"?"true":void 0});return le&&!Q?R.createElement(R.Fragment,null,De,R.createElement(hC,{page:fe})):De});Nt.displayName="Link";var vC=R.forwardRef(function({"aria-current":r="page",caseSensitive:s=!1,className:a="",end:c=!1,style:u,to:h,viewTransition:p,children:m,...g},y){let k=Ho(h,{relative:g.relative}),U=Jn(),V=R.useContext(Ll),{navigator:I,basename:q}=R.useContext(An),z=V!=null&&EC(k)&&p===!0,Q=I.encodeLocation?I.encodeLocation(k).pathname:k.pathname,Y=U.pathname,fe=V&&V.navigation&&V.navigation.location?V.navigation.location.pathname:null;s||(Y=Y.toLowerCase(),fe=fe?fe.toLowerCase():null,Q=Q.toLowerCase()),fe&&q&&(fe=Rr(fe,q)||fe);const le=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let K=Y===Q||!c&&Y.startsWith(Q)&&Y.charAt(le)==="/",ie=fe!=null&&(fe===Q||!c&&fe.startsWith(Q)&&fe.charAt(Q.length)==="/"),ae={isActive:K,isPending:ie,isTransitioning:z},Ce=K?r:void 0,De;typeof a=="function"?De=a(ae):De=[a,K?"active":null,ie?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let Re=typeof u=="function"?u(ae):u;return R.createElement(Nt,{...g,"aria-current":Ce,className:De,ref:y,style:Re,to:h,viewTransition:p},typeof m=="function"?m(ae):m)});vC.displayName="NavLink";var bC=R.forwardRef(({discover:n="render",fetcherKey:r,navigate:s,reloadDocument:a,replace:c,state:u,method:h=yl,action:p,onSubmit:m,relative:g,preventScrollReset:y,viewTransition:k,unstable_defaultShouldRevalidate:U,...V},I)=>{let{unstable_useTransitions:q}=R.useContext(An),z=TC(),Q=RC(p,{relative:g}),Y=h.toLowerCase()==="get"?"get":"post",fe=typeof p=="string"&&U0.test(p),le=K=>{if(m&&m(K),K.defaultPrevented)return;K.preventDefault();let ie=K.nativeEvent.submitter,ae=ie?.getAttribute("formmethod")||h,Ce=()=>z(ie||K.currentTarget,{fetcherKey:r,method:ae,navigate:s,replace:c,state:u,relative:g,preventScrollReset:y,viewTransition:k,unstable_defaultShouldRevalidate:U});q&&s!==!1?R.startTransition(()=>Ce()):Ce()};return R.createElement("form",{ref:I,method:Y,action:Q,onSubmit:a?m:le,...V,"data-discover":!fe&&n==="render"?"true":void 0})});bC.displayName="Form";function xC(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function z0(n){let r=R.useContext(Es);return Ct(r,xC(n)),r}function SC(n,{target:r,replace:s,state:a,preventScrollReset:c,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p,unstable_useTransitions:m}={}){let g=Kn(),y=Jn(),k=Ho(n,{relative:u});return R.useCallback(U=>{if(Kw(U,r)){U.preventDefault();let V=s!==void 0?s:Do(y)===Do(k),I=()=>g(n,{replace:V,state:a,preventScrollReset:c,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p});m?R.startTransition(()=>I()):I()}},[y,g,k,s,a,r,n,c,u,h,p,m])}function wC(n){kn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let r=R.useRef(Gd(n)),s=R.useRef(!1),a=Jn(),c=R.useMemo(()=>Qw(a.search,s.current?null:r.current),[a.search]),u=Kn(),h=R.useCallback((p,m)=>{const g=Gd(typeof p=="function"?p(new URLSearchParams(c)):p);s.current=!0,u("?"+g,m)},[u,c]);return[c,h]}var CC=0,jC=()=>`__${String(++CC)}__`;function TC(){let{router:n}=z0("useSubmit"),{basename:r}=R.useContext(An),s=Hw(),a=n.fetch,c=n.navigate;return R.useCallback(async(u,h={})=>{let{action:p,method:m,encType:g,formData:y,body:k}=tC(u,r);if(h.navigate===!1){let U=h.fetcherKey||jC();await a(U,s,h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:y,body:k,formMethod:h.method||m,formEncType:h.encType||g,flushSync:h.flushSync})}else await c(h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:y,body:k,formMethod:h.method||m,formEncType:h.encType||g,replace:h.replace,state:h.state,fromRouteId:s,flushSync:h.flushSync,viewTransition:h.viewTransition})},[a,c,r,s])}function RC(n,{relative:r}={}){let{basename:s}=R.useContext(An),a=R.useContext(Xn);Ct(a,"useFormAction must be used inside a RouteContext");let[c]=a.matches.slice(-1),u={...Ho(n||".",{relative:r})},h=Jn();if(n==null){u.search=h.search;let p=new URLSearchParams(u.search),m=p.getAll("index");if(m.some(y=>y==="")){p.delete("index"),m.filter(k=>k).forEach(k=>p.append("index",k));let y=p.toString();u.search=y?`?${y}`:""}}return(!n||n===".")&&c.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(u.pathname=u.pathname==="/"?s:Tr([s,u.pathname])),Do(u)}function EC(n,{relative:r}={}){let s=R.useContext(k0);Ct(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=z0("useViewTransitionState"),c=Ho(n,{relative:r});if(!s.isTransitioning)return!1;let u=Rr(s.currentLocation.pathname,a)||s.currentLocation.pathname,h=Rr(s.nextLocation.pathname,a)||s.nextLocation.pathname;return Rl(c.pathname,h)!=null||Rl(c.pathname,u)!=null}const kC=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),AC=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,s,a)=>a?a.toUpperCase():s.toLowerCase()),cy=n=>{const r=AC(n);return r.charAt(0).toUpperCase()+r.slice(1)},L0=(...n)=>n.filter((r,s,a)=>!!r&&r.trim()!==""&&a.indexOf(r)===s).join(" ").trim(),NC=n=>{for(const r in n)if(r.startsWith("aria-")||r==="role"||r==="title")return!0};var _C={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const PC=R.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:c="",children:u,iconNode:h,...p},m)=>R.createElement("svg",{ref:m,..._C,width:r,height:r,stroke:n,strokeWidth:a?Number(s)*24/Number(r):s,className:L0("lucide",c),...!u&&!NC(p)&&{"aria-hidden":"true"},...p},[...h.map(([g,y])=>R.createElement(g,y)),...Array.isArray(u)?u:[u]]));const Je=(n,r)=>{const s=R.forwardRef(({className:a,...c},u)=>R.createElement(PC,{ref:u,iconNode:r,className:L0(`lucide-${kC(cy(n))}`,`lucide-${n}`,a),...c}));return s.displayName=cy(n),s};const MC=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],yh=Je("arrow-left",MC);const OC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ed=Je("calendar",OC);const DC=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],IC=Je("car",DC);const UC=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],uy=Je("check",UC);const zC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],rr=Je("circle-alert",zC);const LC=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Eo=Je("circle-check-big",LC);const BC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],El=Je("circle-question-mark",BC);const HC=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],B0=Je("clock",HC);const qC=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],$C=Je("copy",qC);const FC=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],kl=Je("crown",FC);const VC=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],WC=Je("ellipsis-vertical",VC);const GC=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Al=Je("eye-off",GC);const YC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Nl=Je("eye",YC);const XC=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],dy=Je("file-text",XC);const JC=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],vh=Je("funnel",JC);const KC=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],bl=Je("gift",KC);const QC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],hy=Je("globe",QC);const ZC=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],ej=Je("house",ZC);const tj=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],xl=Je("key",tj);const nj=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],rj=Je("layout-dashboard",nj);const ij=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],sj=Je("lock",ij);const oj=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],fy=Je("log-out",oj);const aj=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],py=Je("mail",aj);const lj=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],H0=Je("map-pin",lj);const cj=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],uj=Je("menu",cj);const dj=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],ii=Je("message-circle",dj);const hj=[["path",{d:"M5 12h14",key:"1ays0h"}]],bh=Je("minus",hj);const fj=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],pj=Je("phone",fj);const mj=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],_l=Je("plus",mj);const gj=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],yj=Je("refresh-cw",gj);const vj=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Io=Je("send",vj);const bj=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],my=Je("share-2",bj);const xj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Sj=Je("shield-check",xj);const wj=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Cj=Je("shield",wj);const jj=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Sl=Je("square-pen",jj);const Tj=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Yd=Je("star",Tj);const Rj=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],gy=Je("trash-2",Rj);const Ej=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],kj=Je("trending-up",Ej);const Aj=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Nj=Je("upload",Aj);const _j=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Pj=Je("user",_j);const Mj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Gn=Je("users",Mj);const Oj=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],Dj=Je("utensils",Oj);const Ij=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],Uj=Je("wifi",Ij);const zj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xh=Je("x",zj),q0=R.createContext(),Lj=()=>{const n=R.useContext(q0);if(!n)throw new Error("useNotifications must be used within NotificationProvider");return n},Bj=({children:n})=>{const[r,s]=R.useState(0),a=()=>{s(0)};return i.jsx(q0.Provider,{value:{unreadCount:r,clearUnreadCount:a},children:n})},yy={en:{faqHowBecomeHost:"How do I become a host?",faqHowBecomeHostAnswer:'Go to the registration page, select "Local Host", and fill out your profile details including your location, offerings, and bio. Once registered, you can start connecting with travelers looking for authentic local experiences.',faqIsFree:"Is it free to use?",faqIsFreeAnswer:"Registration is completely free for both travelers and hosts. You can browse profiles, chat with other users, and arrange local experiences at no cost. Individual arrangements between hosts and travelers may have their own terms.",faqHowFindHosts:"How do I find hosts or travelers?",faqHowFindHostsAnswer:"After logging in, go to your dashboard where you can browse profiles, filter by location, and view detailed information about other users. Use the chat feature to connect and arrange local experiences.",faqReferralSystem:"How does the referral system work?",faqReferralSystemAnswer:"Share your referral code with friends. When they register using your code, both of you get special benefits. Invite 3 friends to unlock Premium features for 1 month including priority support and advanced filters!",faqSafetyMeasures:"What safety measures should I take?",faqSafetyMeasuresAnswer:"Always meet in public places first, share your plans with trusted contacts, verify the other person's identity through video calls, keep emergency contacts handy, and trust your instincts. Never share personal financial information or make large advance payments.",faqReportSuspicious:"How do I report suspicious behavior?",faqReportSuspiciousAnswer:"If you encounter any suspicious behavior, inappropriate messages, or safety concerns, immediately contact our support team via WhatsApp or email. We take all reports seriously and will investigate promptly to ensure community safety.",faqDispute:"What if I have a dispute with a host/traveler?",faqDisputeAnswer:"Contact our support team immediately with details of the issue. We'll mediate between both parties to find a fair resolution. Remember, all arrangements are between users - we facilitate introductions but cannot guarantee outcomes.",faqPayments:"How should I handle payments?",faqPaymentsAnswer:"Use secure payment methods, avoid large advance payments, and consider paying after services are rendered when possible. Never share banking passwords or OTPs. For high-value arrangements, consider meeting in person first to build trust.",faqVerifyIdentity:"Can I verify someone's identity?",faqVerifyIdentityAnswer:"Yes! We recommend video calls before meeting, checking their profile completeness, reading reviews from other users, and asking for references if needed. Trust your instincts - if something feels off, it's better to be cautious.",faqExperiences:"What types of experiences can I find?",faqExperiencesAnswer:"Our platform connects you for various travel needs: business travel accommodation, leisure tourism, festival celebrations, educational exchanges, family visits, cultural immersion, local food experiences, and city tours with insider knowledge.",faqInfoSafe:"Is my information safe?",faqInfoSafeAnswer:"Yes, we take privacy seriously. Your personal information is protected and only shared with users you choose to connect with. We strongly recommend meeting in public places first, sharing your plans with trusted contacts, and taking all necessary safety precautions.",troubleLoginTitle:"Can't log in or forgot password?",troubleLoginDesc:"Try these steps:",troubleLoginStep1:"Clear your browser cache and cookies",troubleLoginStep2:"Try using incognito/private browsing mode",troubleLoginStep3:"Check if your email is correct (no extra spaces)",troubleLoginStep4:'Use the "Forgot Password" link to reset',troubleLoginStep5:"Contact support if issue persists",troubleLoadingTitle:"Website not loading or showing errors?",troubleLoadingDesc:"Try these solutions:",troubleLoadingStep1:"Refresh the page (Ctrl+F5 or Cmd+Shift+R)",troubleLoadingStep2:"Clear browser cache: Settings  Privacy  Clear browsing data",troubleLoadingStep3:"Try a different browser (Chrome, Firefox, Edge)",troubleLoadingStep4:"Check your internet connection",troubleLoadingStep5:'Flush DNS: Open Command Prompt and type "ipconfig /flushdns"',troubleLoadingStep6:"Disable browser extensions temporarily",troublePaymentTitle:"Payment not processing?",troublePaymentDesc:"Common payment issues:",troublePaymentStep1:"Verify card details are entered correctly",troublePaymentStep2:"Check if your card has sufficient balance",troublePaymentStep3:"Ensure international transactions are enabled",troublePaymentStep4:"Try a different payment method",troublePaymentStep5:"Contact your bank if payment is declined",troublePaymentStep6:"Wait 5 minutes and retry if gateway timeout occurs",troubleEmailTitle:"Not receiving emails or notifications?",troubleEmailDesc:"Check these:",troubleEmailStep1:"Check your spam/junk folder",troubleEmailStep2:"Add customer-support@festiveguest.com to contacts",troubleEmailStep3:"Verify email address in your profile settings",troubleEmailStep4:"Check notification settings in your account",troubleEmailStep5:"Wait up to 10 minutes for email delivery",indiaSupportLang:"Language Support: English and Hindi support available",indiaSupportPayment:"Payment Methods: UPI, Net Banking, Cards, and Wallets accepted",indiaSupportCompliance:"Compliance: Adheres to Indian IT Act 2000, Consumer Protection Act 2019, and DPDP Act 2023",indiaSupportTime:"Local Time Support: Customer support available during IST business hours (9 AM - 6 PM)",indiaSupportGST:"GST Compliant: All transactions include applicable GST as per Indian tax laws",indiaSupportConsumer:"Consumer Rights: Full compliance with Indian consumer protection regulations",warningMessage:"We will NEVER ask for your password, OTP, or banking details via email, WhatsApp, or phone. Our only official support channels are customer-support@festiveguest.com and the WhatsApp number listed above. Report any suspicious contact claiming to be FestiveGuest support immediately."},te:{faqHowBecomeHost:"   ?",faqHowBecomeHostAnswer:'  , " "    ,        .   ,          .',faqIsFree:"  ?",faqIsFreeAnswer:"      .    ,            .          .",faqHowFindHosts:"     ?",faqHowFindHostsAnswer:"  ,   ,     ,           .          .",faqReferralSystem:"   ?",faqReferralSystemAnswer:"    .      ,    .       1       3   !",faqSafetyMeasures:"    ?",faqSafetyMeasuresAnswer:"    ,     ,       ,        .          .",faqReportSuspicious:"    ?",faqReportSuspiciousAnswer:"   ,      ,         .            .",faqDispute:"/     ?",faqDisputeAnswer:"      .         . ,      -        .",faqPayments:"   ?",faqPaymentsAnswer:"   ,           .    OTP  . -  ,      .",faqVerifyIdentity:"   ?",faqVerifyIdentityAnswer:"!     ,     ,            .    -   ,   .",faqExperiences:"    ?",faqExperiencesAnswer:"        :   ,  ,  ,  ,  ,  ,        .",faqInfoSafe:"   ?",faqInfoSafeAnswer:",    .            .     ,              .",troubleLoginTitle:"    ?",troubleLoginDesc:"  :",troubleLoginStep1:"      ",troubleLoginStep2:"/    ",troubleLoginStep3:"     (  )",troubleLoginStep4:'  " "  ',troubleLoginStep5:"   ",troubleLoadingTitle:"     ?",troubleLoadingDesc:"  :",troubleLoadingStep1:"   (Ctrl+F5  Cmd+Shift+R)",troubleLoadingStep2:"   :        ",troubleLoadingStep3:"   (Chrome, Firefox, Edge)",troubleLoadingStep4:"    ",troubleLoadingStep5:'DNS  :    "ipconfig /flushdns"  ',troubleLoadingStep6:"   ",troublePaymentTitle:"   ?",troublePaymentDesc:"  :",troublePaymentStep1:"     ",troublePaymentStep2:"      ",troublePaymentStep3:"   ",troublePaymentStep4:"   ",troublePaymentStep5:"    ",troublePaymentStep6:"   5     ",troubleEmailTitle:"    ?",troubleEmailDesc:"  :",troubleEmailStep1:" /   ",troubleEmailStep2:"customer-support@festiveguest.com   ",troubleEmailStep3:"     ",troubleEmailStep4:"     ",troubleEmailStep5:"   10    ",indiaSupportLang:" :      ",indiaSupportPayment:" : UPI,  ,    ",indiaSupportCompliance:":  IT  2000,    2019  DPDP  2023  ",indiaSupportTime:"  : IST   ( 9   6 )    ",indiaSupportGST:"GST :        GST  ",indiaSupportConsumer:" :      ",warningMessage:" ,      , OTP      .      customer-support@festiveguest.com      . FestiveGuest        ."}},Hj={en:{...yy.en,loading:"Loading...",save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",submit:"Submit",close:"Close",help:"Help",home:"Home",posts:"Posts",chats:"Chats",profile:"Profile",logout:"Logout",referEarnNav:"Refer & Earn",login:"Login",register:"Register",email:"Email",password:"Password",name:"Name",allPosts:"All Posts",myPosts:"My Posts",createPost:"Create Post",guestPosts:"Guest Posts",title:"Title",location:"Location",description:"Description",filterByLocation:"Filter By Location",filterByHostingAreas:"Filter By Hosting Areas",clear:"Clear",noHostingAreasConfigured:"No hosting areas configured",manageYourPosts:"Manage Your {userType} Posts",browseAccommodationRequests:"Browse accommodation requests from guests",browseAllAccommodation:"Browse all accommodation posts",found:"Found",howItWorks:"How It Works?",loadingPosts:"Loading posts...",noPostsForLocation:"No posts found for selected locations. Try selecting different locations or clear filters.",noPostsAvailable:"No posts available at the moment. Check back later for new postings.",clearFilters:"Clear Filters",availableLocations:"Available Locations",visitingLocation:"Visiting Location",locationNotSpecified:"Location not specified",since:"Since",upTo:"Up to",guest:"Guest",guests:"Guests",night:"Night",preferredFacilities:"Preferred Facilities",amenitiesServices:"Amenities & Services",contactGuest:"Contact Guest",contactHost:"Contact Host",deletePost:"Delete Post",areYouSureDelete:"Are you sure you want to delete",thisActionCannotBeUndone:"This action cannot be undone.",createHostPost:"Create Host Post",editHostPost:"Edit Host Post",shareHostingServices:"Share your hosting services with guests",serviceTitle:"Service Title",commenceDate:"Commence Date",maxGuests:"Max Guests",pricePerNight:"Price Per Night ()",amenities:"Amenities",additionalDetails:"Additional Details",updateHostingAreas:"Update hosting areas in your profile settings",describeHostingServices:"Describe your hosting services, house rules, nearby attractions, and other important information for guests...",createNewPost:"Create New Post",editPost:"Edit Post",shareAccommodationNeeds:"Share your accommodation needs with hosts",updateAccommodationRequest:"Update your accommodation request",planningDate:"Planning Date",visitingState:"Visiting State",visitingCity:"Visiting City",visitors:"Visitors",days:"Days",describeAccommodationNeeds:"Describe your accommodation needs, preferences, and any special requirements...",saving:"Saving...",updatePost:"Update Post",titleRequired:"Title is required",titleMinLength:"Title must be at least {length} characters",commenceDateRequired:"Commence date is required",maxGuestsRange:"Max guests must be between 1 and 20",priceCannotBeNegative:"Price cannot be negative",detailsMinLength:"Additional details must be at least {length} characters",selectState:"Please select a state",selectCity:"Please select a city",planningDateFuture:"Planning date must be today or in the future",visitorsRange:"Visitors must be between 1 and 10",daysRange:"Days must be between 1 and 30",descriptionMinLength:"Description must be at least {length} characters",browseGuestRequests:"Browse accommodation requests from guests looking to stay in your hosting areas.",filterByLocationDesc:"Use the location filter to find guests visiting your area.",contactGuestsDesc:'Click "Contact Guest" to start a conversation and offer your hosting services. Use the built-in chat to discuss details, availability, and arrangements.',createYourHostPost:'Switch to "My Posts" to create your own hosting post showcasing your services and amenities.',browseAllPostsDesc:"Browse accommodation posts from guests and hosts.",filterByLocationGuest:"Use the location filter to find posts in your desired destination.",createYourGuestPost:'Click "My Posts" then "Create Post" to share your accommodation needs with hosts.',manageYourPostsDesc:'Edit or delete your posts anytime from the "My Posts" section.',about:"About",reviews:"Reviews",writeReview:"Write Review",rating:"Rating",comment:"Comment",hostingAreas:"Hosting Areas",myProfile:"My Profile",viewProfileInfo:"View your profile information",editProfile:"Edit Profile",upgradeToPremium:"Upgrade to premium or refer 3 friends to edit your profile",referrals:"referrals",editPhoto:"Edit Photo",chooseFile:"Choose File",upload:"Upload",uploadProfilePhoto:"Upload a profile photo",phone:"Phone",role:"Role",host:"Host",guest:"Guest",myOfferings:"My Offerings",myFestivalWishes:"My Festival Wishes",notSpecified:"Not specified",myHostingAreas:"My Hosting Areas",noHostingAreas:"No hosting areas selected yet. Update your hosting preferences in settings.",status:"Status",contactEnabled:"Contact Enabled",yes:"Yes",no:"No",security:"Security",manageAccountSecurity:"Manage your account security",changePassword:"Change Password",subscription:"Subscription",currentStatus:"Current Status",premium:"Premium",pendingApproval:"Pending Approval",free:"Free",freePlan:"Free Plan",foreverFree:"Forever free",currentPlan:"Current Plan",premiumPlan:"Premium",months:"months",nonRefundable:"Non-refundable",upgradeViaWhatsApp:"Upgrade via WhatsApp",youArePremium:"You're Premium!",currentPasswordLabel:"Current Password",enterCurrentPassword:"Enter current password",newPasswordLabel:"New Password",enterNewPassword:"Enter new password (min 8 characters)",confirmNewPassword:"Confirm New Password",confirmNewPasswordPlaceholder:"Confirm new password",atLeast8Chars:"At least 8 characters",oneUppercase:"One uppercase letter",oneLowercase:"One lowercase letter",oneNumber:"One number",oneSpecialChar:"One special character",changingPassword:"Changing...",describeOfferings:"Describe what you offer to guests...",describeFestivalWishes:"Describe your festival wishes...",locations:"locations",saveChanges:"Save Changes",updating:"Updating...",loadingProfile:"Loading profile...",noPostsFound:"No posts found",noReviews:"No reviews yet. Be the first to share your experience!",helpSupport:"Help & Support",helpDescription:"We're here to help you with any questions or issues you may have.",emailSupport:"Email Support",emailSupportDesc:"Send us an email and we'll get back to you as soon as possible.",customerSupport:"Customer Support",whatsappSupport:"WhatsApp Support",whatsappSupportDesc:"Chat with our support team directly for quick assistance.",chatOnWhatsapp:"Chat on WhatsApp",sendFeedback:"Send Feedback",sendFeedbackDesc:"Share your thoughts, suggestions, or report issues directly with us",yourName:"Your Name",yourEmail:"Your Email",yourFeedback:"Your feedback, suggestions, or issues...",sending:"Sending...",feedbackSent:"Feedback Sent Successfully!",feedbackThanks:"Thank you for your feedback. We'll review it and get back to you if needed.",faq:"Frequently Asked Questions",faqDesc:"Find answers to common questions about Local Host Connect",importantPolicies:"Important Policies & Guidelines",policiesDesc:"Please review our policies to understand your rights and responsibilities",termsOfService:"Terms of Service",termsDesc:"User rights & responsibilities",privacyPolicy:"Privacy Policy",privacyDesc:"How we protect your data",safetyGuidelines:"Safety Guidelines",safetyDesc:"Stay safe while connecting",troubleshooting:"Troubleshooting Common Issues",troubleshootingDesc:"Quick fixes for common technical problems",indiaSupport:"India-Focused Support",indiaSupportDesc:"Tailored for Indian users with local language support and compliance",bewareImpersonators:" Beware of Impersonators",officialContactOnly:"Official Contact Only",connectWithUs:"Connect With Us",socialMediaDesc:"Follow us on social media for updates, tips, and community stories",referEarn:"Refer & Earn",yourReferralPoints:"Your Referral Points",progressToFree:"Progress to 3 months FREE",points:"points",readyToRedeem:" Ready to redeem!",needMorePoints:"Need {points} more points ({referrals} referrals)",yourReferralCode:"Your Referral Code",copy:"Copy",share:"Share",redeemPoints:"Redeem Points",referrals:"Referrals",goal:"Goal (500 pts)",howReferralWorks:"How the Referral Program Works",howItWorksTitle:" How the Referral Program Works:",step1Title:"Step 1: Share Your Code",step1Desc:"Copy your unique referral code and share it with friends via WhatsApp, social media, or direct message.",step2Title:"Step 2: Friend Registers",step2Desc:"Your friend signs up using your referral code during registration.",step3Title:"Step 3: Friend Subscribes",step3Desc:"When your friend purchases a premium subscription (199 for Guests or 299 for Hosts), you earn points!",step4Title:"Step 4: Earn 100 Points",step4Desc:"You receive 100 points for each successful referral. Points are credited instantly after payment verification.",step5Title:"Step 5: Collect 500 Points",step5Desc:"Accumulate 500 points (5 successful referrals) to unlock your reward.",step6Title:"Step 6: Redeem for 3 Months FREE",step6Desc:"Once you have 500 points, redeem them for 3 months of premium subscription absolutely FREE! (Worth {price})",proTip:" Pro Tip: Points never expire! Keep referring friends and stack up points for multiple free months.",pointsHistory:"Points History",noReferralHistory:"No referral history yet. Start sharing your code!",earned:" Earned",redeemed:" Redeemed",earnedPoints:"Earned 100 points for referring user {user}",subscriptionActivated:"3 months subscription activated",redeemYourPoints:"Redeem Your Points",currentBalance:"Current Balance",redeemFor:"Redeem for:",monthsPremium:"3 Months Premium Subscription",worth:"Worth {price} (3 months for {userType})",afterRedemption:"After redemption:",pointsZero:"Points: 0",subscriptionActive:"Subscription: Active for 3 months",confirmRedemption:"Confirm Redemption",redeeming:"Redeeming...",loadingReferralData:"Loading referral data...",failedToLoad:"Failed to load referral data",codeCopied:"Referral code copied to clipboard!",alreadySubscribed:"You already have an active subscription. Redeem after it expires.",needPointsToRedeem:"You need 500 points to redeem. Keep referring!",redemptionSuccess:" Congratulations! Your 3-month premium subscription is now active! Check your Profile page to see your updated subscription status.",redemptionFailed:"Redemption failed: {error}",importantDisclaimer:" Important Disclaimer - Please Read Carefully",disclaimerIntro:"is a platform that connects travelers with local hosts for authentic cultural experiences. By proceeding, you acknowledge and agree that:",notResponsible:"We are not responsible for any incidents, damages, or issues that may occur during your interactions or meetings.",noGuarantee:"We do not guarantee that you will find suitable hosts or guests, as this depends on availability and mutual compatibility.",platformOnly:"We act solely as a platform for introductions and do not verify the background, intentions, or authenticity of users.",ownRisk:"All interactions, arrangements, and meetings are at your own risk and discretion.",paymentCaution:"Payment & Financial Caution: Hosts may request payment for services. It is entirely your responsibility to decide payment terms. Exercise caution and verify authenticity before any financial transactions.",meetPublic:"We strongly recommend meeting in public places first and taking necessary safety precautions.",fullResponsibility:"By proceeding, you accept full responsibility for your safety and interactions.",iAgree:"I have read, understood, and agree to the Important Disclaimer above. I acknowledge that I am using this platform at my own risk and accept full responsibility for my safety and interactions. I also agree to the",and:"and",agreeContinue:"Agree & Continue",paymentRequired:"Payment Required",purpose:"Purpose",amount:"Amount",payViaUpi:"Pay via UPI",qrCode:"QR Code",scanUpi:"Scan with any UPI app",upiId:"UPI ID",payWithUpiApp:"Pay with UPI App",manualPaymentInstructions:"Manual Payment Instructions:",openUpiApp:"Open any UPI app (PhonePe, Google Pay, Paytm, etc.)",sendAmount:"Send {amount} to UPI ID:",addNote:'Add note: "{purpose}"',completePayment:"Complete the payment",enterTransactionId:"Enter the transaction ID below",upiTransactionId:"UPI Transaction ID",enterTransactionIdPlaceholder:"Enter 12-digit transaction ID",verifyPayment:"Verify Payment",verifying:"Verifying...",paymentNote:"Note: Payment verification may take a few minutes. You'll be notified once approved by admin.",freeBadge:"Free",pendingBadge:"Pending",premiumBadge:"Premium",connectWithLocalHosts:"Connect with Local Hosts Anywhere",experienceAuthentic:"Experience authentic local culture and hospitality during your travels",joinAsGuest:"Join as a Guest",joinAsHost:"Join as a Host",goToPosts:"Go to Posts",travelConnect:"Travel & Connect",stayWithLocals:"Stay with locals, experience culture, make lasting memories",alreadyHaveAccount:"Already have an account?",createAccount:"Create Account"},te:{...yy.te,loading:" ...",save:" ",cancel:" ",delete:"",edit:"",submit:"",close:"",help:"",home:"",posts:"",chats:"",profile:"",logout:"",referEarnNav:"",login:"",register:"",email:"",password:"",name:"",allPosts:" ",myPosts:" ",createPost:" ",guestPosts:" ",title:"",location:"",description:"",filterByLocation:"   ",filterByHostingAreas:"    ",clear:"",noHostingAreasConfigured:"   ",manageYourPosts:" {userType}  ",browseAccommodationRequests:"     ",browseAllAccommodation:"    ",found:"",howItWorks:"  ?",loadingPosts:"  ...",noPostsForLocation:"    .       .",noPostsAvailable:"   .      .",clearFilters:"  ",availableLocations:"  ",visitingLocation:" ",locationNotSpecified:" ",since:"",upTo:"",guest:"",guests:"",night:"",preferredFacilities:" ",amenitiesServices:" & ",contactGuest:" ",contactHost:" ",deletePost:" ",areYouSureDelete:"  ",thisActionCannotBeUndone:"   .",createHostPost:"  ",editHostPost:"  ",shareHostingServices:"    ",serviceTitle:" ",commenceDate:" ",maxGuests:" ",pricePerNight:"  ()",amenities:"",additionalDetails:" ",updateHostingAreas:"     ",describeHostingServices:"  ,  ,         ...",createNewPost:"  ",editPost:" ",shareAccommodationNeeds:"    ",updateAccommodationRequest:"   ",planningDate:" ",visitingState:" ",visitingCity:" ",visitors:"",days:"",describeAccommodationNeeds:"  ,      ...",saving:" ...",updatePost:" ",titleRequired:" ",titleMinLength:"  {length}  ",commenceDateRequired:"  ",maxGuestsRange:"  1  20  ",priceCannotBeNegative:"  ",detailsMinLength:"   {length}  ",selectState:"  ",selectCity:"  ",planningDateFuture:"     ",visitorsRange:" 1  10  ",daysRange:" 1  30  ",descriptionMinLength:"  {length}  ",browseGuestRequests:"         .",filterByLocationDesc:"       .",contactGuestsDesc:'       " "  . ,       .',createYourHostPost:'          " " .',browseAllPostsDesc:"      .",filterByLocationGuest:"       .",createYourGuestPost:'     " "  " "  .',manageYourPostsDesc:'" "        .',about:"",reviews:"",writeReview:" ",rating:"",comment:"",hostingAreas:" ",myProfile:" ",viewProfileInfo:"   ",editProfile:" ",upgradeToPremium:"    3   ",referrals:"",editPhoto:" ",chooseFile:" ",upload:"",uploadProfilePhoto:"   ",phone:"",role:"",host:"",guest:"",myOfferings:" ",myFestivalWishes:"  ",notSpecified:" ",myHostingAreas:"  ",noHostingAreas:"   .     .",status:"",contactEnabled:" ",yes:"",no:"",security:"",manageAccountSecurity:"   ",changePassword:" ",subscription:"",currentStatus:" ",premium:"",pendingApproval:"   ",free:"",freePlan:" ",foreverFree:" ",currentPlan:" ",premiumPlan:"",months:"",nonRefundable:" ",upgradeViaWhatsApp:"   ",youArePremium:" !",currentPasswordLabel:" ",enterCurrentPassword:"  ",newPasswordLabel:" ",enterNewPassword:"   ( 8 )",confirmNewPassword:"  ",confirmNewPasswordPlaceholder:"  ",atLeast8Chars:" 8 ",oneUppercase:"  ",oneLowercase:"  ",oneNumber:" ",oneSpecialChar:"  ",changingPassword:"...",describeOfferings:"    ...",describeFestivalWishes:"   ...",locations:"",saveChanges:"  ",updating:"...",loadingProfile:"  ...",noPostsFound:" ",noReviews:"  .   !",helpSupport:" & ",helpDescription:"          .",emailSupport:" ",emailSupportDesc:"         .",customerSupport:" ",whatsappSupport:" ",whatsappSupportDesc:"        .",chatOnWhatsapp:"  ",sendFeedback:" ",sendFeedbackDesc:" ,      ",yourName:" ",yourEmail:" ",yourFeedback:" ,   ...",sending:"...",feedbackSent:"  !",feedbackThanks:"  .        .",faq:"  ",faqDesc:"       ",importantPolicies:"  & ",policiesDesc:"         ",termsOfService:" ",termsDesc:"  & ",privacyPolicy:" ",privacyDesc:"    ",safetyGuidelines:" ",safetyDesc:"   ",troubleshooting:"  ",troubleshootingDesc:"    ",indiaSupport:"- ",indiaSupportDesc:"        ",bewareImpersonators:"    ",officialContactOnly:"  ",connectWithUs:"  ",socialMediaDesc:",         ",referEarn:"  ",yourReferralPoints:"  ",progressToFree:"3    ",points:"",readyToRedeem:"    !",needMorePoints:"{points}    ({referrals} )",yourReferralCode:"  ",copy:"",share:"",redeemPoints:"  ",referrals:"",goal:" (500 )",howReferralWorks:"   ",howItWorksTitle:"    :",step1Title:" 1:    ",step1Desc:"      ,        .",step2Title:" 2:   ",step2Desc:"          .",step3Title:" 3:   ",step3Desc:"    (  199    299)  ,   !",step4Title:" 4: 100  ",step4Desc:"     100  .       .",step5Title:" 5: 500  ",step5Desc:"    500  (5  ) .",step6Title:" 6: 3     ",step6Desc:" 500  ,  3        ! ( {price})",proTip:"  :    !            .",pointsHistory:" ",noReferralHistory:"   .     !",earned:" ",redeemed:"  ",earnedPoints:" {user}   100  ",subscriptionActivated:"3    ",redeemYourPoints:"   ",currentBalance:" ",redeemFor:"   :",monthsPremium:"3   ",worth:" {price} ({userType}  3 )",afterRedemption:" :",pointsZero:": 0",subscriptionActive:": 3   ",confirmRedemption:" ",redeeming:" ...",loadingReferralData:"   ...",failedToLoad:"    ",codeCopied:"    !",alreadySubscribed:"    .     .",needPointsToRedeem:"   500  .   !",redemptionSuccess:" !  3-     !          .",redemptionFailed:" : {error}",importantDisclaimer:"   -   ",disclaimerIntro:"         .  ,     :",notResponsible:"        ,      .",noGuarantee:"      ,         .",platformOnly:"        ,    .",ownRisk:"  ,         .",paymentCaution:" &  :     .      .         .",meetPublic:"            .",fullResponsibility:" ,         .",iAgree:"     ,    .                 .   ",and:"",agreeContinue:" ",paymentRequired:" ",purpose:"",amount:"",payViaUpi:"UPI  ",qrCode:"QR ",scanUpi:" UPI   ",upiId:"UPI ID",payWithUpiApp:"UPI  ",manualPaymentInstructions:"  :",openUpiApp:" UPI   (PhonePe, Google Pay, Paytm, )",sendAmount:"UPI ID {amount} :",addNote:' : "{purpose}"',completePayment:"  ",enterTransactionId:"  ID  ",upiTransactionId:"UPI  ID",enterTransactionIdPlaceholder:"12-  ID  ",verifyPayment:" ",verifying:"...",paymentNote:":     .     .",freeBadge:"",pendingBadge:"",premiumBadge:"",connectWithLocalHosts:"    ",experienceAuthentic:"        ",joinAsGuest:" ",joinAsHost:" ",goToPosts:" ",travelConnect:" & ",stayWithLocals:" ,  ,   ",alreadyHaveAccount:"  ?",createAccount:" "}},$0=R.createContext(),qj=({children:n})=>{const[r,s]=R.useState(()=>localStorage.getItem("language")||"en");R.useEffect(()=>{localStorage.setItem("language",r)},[r]);const a=u=>Hj[r][u]||u,c=()=>{s(u=>u==="en"?"te":"en")};return i.jsx($0.Provider,{value:{language:r,setLanguage:s,t:a,toggleLanguage:c},children:n})},Er=()=>{const n=R.useContext($0);if(!n)throw new Error("useLanguage must be used within LanguageProvider");return n};function F0(n,r){return function(){return n.apply(r,arguments)}}const{toString:$j}=Object.prototype,{getPrototypeOf:Sh}=Object,{iterator:Hl,toStringTag:V0}=Symbol,ql=(n=>r=>{const s=$j.call(r);return n[s]||(n[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Qn=n=>(n=n.toLowerCase(),r=>ql(r)===n),$l=n=>r=>typeof r===n,{isArray:As}=Array,xs=$l("undefined");function qo(n){return n!==null&&!xs(n)&&n.constructor!==null&&!xs(n.constructor)&&vn(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const W0=Qn("ArrayBuffer");function Fj(n){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(n):r=n&&n.buffer&&W0(n.buffer),r}const Vj=$l("string"),vn=$l("function"),G0=$l("number"),$o=n=>n!==null&&typeof n=="object",Wj=n=>n===!0||n===!1,wl=n=>{if(ql(n)!=="object")return!1;const r=Sh(n);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(V0 in n)&&!(Hl in n)},Gj=n=>{if(!$o(n)||qo(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},Yj=Qn("Date"),Xj=Qn("File"),Jj=Qn("Blob"),Kj=Qn("FileList"),Qj=n=>$o(n)&&vn(n.pipe),Zj=n=>{let r;return n&&(typeof FormData=="function"&&n instanceof FormData||vn(n.append)&&((r=ql(n))==="formdata"||r==="object"&&vn(n.toString)&&n.toString()==="[object FormData]"))},eT=Qn("URLSearchParams"),[tT,nT,rT,iT]=["ReadableStream","Request","Response","Headers"].map(Qn),sT=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Fo(n,r,{allOwnKeys:s=!1}={}){if(n===null||typeof n>"u")return;let a,c;if(typeof n!="object"&&(n=[n]),As(n))for(a=0,c=n.length;a<c;a++)r.call(null,n[a],a,n);else{if(qo(n))return;const u=s?Object.getOwnPropertyNames(n):Object.keys(n),h=u.length;let p;for(a=0;a<h;a++)p=u[a],r.call(null,n[p],p,n)}}function Y0(n,r){if(qo(n))return null;r=r.toLowerCase();const s=Object.keys(n);let a=s.length,c;for(;a-- >0;)if(c=s[a],r===c.toLowerCase())return c;return null}const Ti=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,X0=n=>!xs(n)&&n!==Ti;function Xd(){const{caseless:n,skipUndefined:r}=X0(this)&&this||{},s={},a=(c,u)=>{const h=n&&Y0(s,u)||u;wl(s[h])&&wl(c)?s[h]=Xd(s[h],c):wl(c)?s[h]=Xd({},c):As(c)?s[h]=c.slice():(!r||!xs(c))&&(s[h]=c)};for(let c=0,u=arguments.length;c<u;c++)arguments[c]&&Fo(arguments[c],a);return s}const oT=(n,r,s,{allOwnKeys:a}={})=>(Fo(r,(c,u)=>{s&&vn(c)?n[u]=F0(c,s):n[u]=c},{allOwnKeys:a}),n),aT=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),lT=(n,r,s,a)=>{n.prototype=Object.create(r.prototype,a),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:r.prototype}),s&&Object.assign(n.prototype,s)},cT=(n,r,s,a)=>{let c,u,h;const p={};if(r=r||{},n==null)return r;do{for(c=Object.getOwnPropertyNames(n),u=c.length;u-- >0;)h=c[u],(!a||a(h,n,r))&&!p[h]&&(r[h]=n[h],p[h]=!0);n=s!==!1&&Sh(n)}while(n&&(!s||s(n,r))&&n!==Object.prototype);return r},uT=(n,r,s)=>{n=String(n),(s===void 0||s>n.length)&&(s=n.length),s-=r.length;const a=n.indexOf(r,s);return a!==-1&&a===s},dT=n=>{if(!n)return null;if(As(n))return n;let r=n.length;if(!G0(r))return null;const s=new Array(r);for(;r-- >0;)s[r]=n[r];return s},hT=(n=>r=>n&&r instanceof n)(typeof Uint8Array<"u"&&Sh(Uint8Array)),fT=(n,r)=>{const a=(n&&n[Hl]).call(n);let c;for(;(c=a.next())&&!c.done;){const u=c.value;r.call(n,u[0],u[1])}},pT=(n,r)=>{let s;const a=[];for(;(s=n.exec(r))!==null;)a.push(s);return a},mT=Qn("HTMLFormElement"),gT=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,a,c){return a.toUpperCase()+c}),vy=(({hasOwnProperty:n})=>(r,s)=>n.call(r,s))(Object.prototype),yT=Qn("RegExp"),J0=(n,r)=>{const s=Object.getOwnPropertyDescriptors(n),a={};Fo(s,(c,u)=>{let h;(h=r(c,u,n))!==!1&&(a[u]=h||c)}),Object.defineProperties(n,a)},vT=n=>{J0(n,(r,s)=>{if(vn(n)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const a=n[s];if(vn(a)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},bT=(n,r)=>{const s={},a=c=>{c.forEach(u=>{s[u]=!0})};return As(n)?a(n):a(String(n).split(r)),s},xT=()=>{},ST=(n,r)=>n!=null&&Number.isFinite(n=+n)?n:r;function wT(n){return!!(n&&vn(n.append)&&n[V0]==="FormData"&&n[Hl])}const CT=n=>{const r=new Array(10),s=(a,c)=>{if($o(a)){if(r.indexOf(a)>=0)return;if(qo(a))return a;if(!("toJSON"in a)){r[c]=a;const u=As(a)?[]:{};return Fo(a,(h,p)=>{const m=s(h,c+1);!xs(m)&&(u[p]=m)}),r[c]=void 0,u}}return a};return s(n,0)},jT=Qn("AsyncFunction"),TT=n=>n&&($o(n)||vn(n))&&vn(n.then)&&vn(n.catch),K0=((n,r)=>n?setImmediate:r?((s,a)=>(Ti.addEventListener("message",({source:c,data:u})=>{c===Ti&&u===s&&a.length&&a.shift()()},!1),c=>{a.push(c),Ti.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",vn(Ti.postMessage)),RT=typeof queueMicrotask<"u"?queueMicrotask.bind(Ti):typeof process<"u"&&process.nextTick||K0,ET=n=>n!=null&&vn(n[Hl]),Se={isArray:As,isArrayBuffer:W0,isBuffer:qo,isFormData:Zj,isArrayBufferView:Fj,isString:Vj,isNumber:G0,isBoolean:Wj,isObject:$o,isPlainObject:wl,isEmptyObject:Gj,isReadableStream:tT,isRequest:nT,isResponse:rT,isHeaders:iT,isUndefined:xs,isDate:Yj,isFile:Xj,isBlob:Jj,isRegExp:yT,isFunction:vn,isStream:Qj,isURLSearchParams:eT,isTypedArray:hT,isFileList:Kj,forEach:Fo,merge:Xd,extend:oT,trim:sT,stripBOM:aT,inherits:lT,toFlatObject:cT,kindOf:ql,kindOfTest:Qn,endsWith:uT,toArray:dT,forEachEntry:fT,matchAll:pT,isHTMLForm:mT,hasOwnProperty:vy,hasOwnProp:vy,reduceDescriptors:J0,freezeMethods:vT,toObjectSet:bT,toCamelCase:gT,noop:xT,toFiniteNumber:ST,findKey:Y0,global:Ti,isContextDefined:X0,isSpecCompliantForm:wT,toJSONObject:CT,isAsyncFn:jT,isThenable:TT,setImmediate:K0,asap:RT,isIterable:ET};function Ze(n,r,s,a,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",r&&(this.code=r),s&&(this.config=s),a&&(this.request=a),c&&(this.response=c,this.status=c.status?c.status:null)}Se.inherits(Ze,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Se.toJSONObject(this.config),code:this.code,status:this.status}}});const Q0=Ze.prototype,Z0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Z0[n]={value:n}});Object.defineProperties(Ze,Z0);Object.defineProperty(Q0,"isAxiosError",{value:!0});Ze.from=(n,r,s,a,c,u)=>{const h=Object.create(Q0);Se.toFlatObject(n,h,function(y){return y!==Error.prototype},g=>g!=="isAxiosError");const p=n&&n.message?n.message:"Error",m=r==null&&n?n.code:r;return Ze.call(h,p,m,s,a,c),n&&h.cause==null&&Object.defineProperty(h,"cause",{value:n,configurable:!0}),h.name=n&&n.name||"Error",u&&Object.assign(h,u),h};const kT=null;function Jd(n){return Se.isPlainObject(n)||Se.isArray(n)}function ev(n){return Se.endsWith(n,"[]")?n.slice(0,-2):n}function by(n,r,s){return n?n.concat(r).map(function(c,u){return c=ev(c),!s&&u?"["+c+"]":c}).join(s?".":""):r}function AT(n){return Se.isArray(n)&&!n.some(Jd)}const NT=Se.toFlatObject(Se,{},null,function(r){return/^is[A-Z]/.test(r)});function Fl(n,r,s){if(!Se.isObject(n))throw new TypeError("target must be an object");r=r||new FormData,s=Se.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(q,z){return!Se.isUndefined(z[q])});const a=s.metaTokens,c=s.visitor||y,u=s.dots,h=s.indexes,m=(s.Blob||typeof Blob<"u"&&Blob)&&Se.isSpecCompliantForm(r);if(!Se.isFunction(c))throw new TypeError("visitor must be a function");function g(I){if(I===null)return"";if(Se.isDate(I))return I.toISOString();if(Se.isBoolean(I))return I.toString();if(!m&&Se.isBlob(I))throw new Ze("Blob is not supported. Use a Buffer instead.");return Se.isArrayBuffer(I)||Se.isTypedArray(I)?m&&typeof Blob=="function"?new Blob([I]):Buffer.from(I):I}function y(I,q,z){let Q=I;if(I&&!z&&typeof I=="object"){if(Se.endsWith(q,"{}"))q=a?q:q.slice(0,-2),I=JSON.stringify(I);else if(Se.isArray(I)&&AT(I)||(Se.isFileList(I)||Se.endsWith(q,"[]"))&&(Q=Se.toArray(I)))return q=ev(q),Q.forEach(function(fe,le){!(Se.isUndefined(fe)||fe===null)&&r.append(h===!0?by([q],le,u):h===null?q:q+"[]",g(fe))}),!1}return Jd(I)?!0:(r.append(by(z,q,u),g(I)),!1)}const k=[],U=Object.assign(NT,{defaultVisitor:y,convertValue:g,isVisitable:Jd});function V(I,q){if(!Se.isUndefined(I)){if(k.indexOf(I)!==-1)throw Error("Circular reference detected in "+q.join("."));k.push(I),Se.forEach(I,function(Q,Y){(!(Se.isUndefined(Q)||Q===null)&&c.call(r,Q,Se.isString(Y)?Y.trim():Y,q,U))===!0&&V(Q,q?q.concat(Y):[Y])}),k.pop()}}if(!Se.isObject(n))throw new TypeError("data must be an object");return V(n),r}function xy(n){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(a){return r[a]})}function wh(n,r){this._pairs=[],n&&Fl(n,this,r)}const tv=wh.prototype;tv.append=function(r,s){this._pairs.push([r,s])};tv.toString=function(r){const s=r?function(a){return r.call(this,a,xy)}:xy;return this._pairs.map(function(c){return s(c[0])+"="+s(c[1])},"").join("&")};function _T(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function nv(n,r,s){if(!r)return n;const a=s&&s.encode||_T;Se.isFunction(s)&&(s={serialize:s});const c=s&&s.serialize;let u;if(c?u=c(r,s):u=Se.isURLSearchParams(r)?r.toString():new wh(r,s).toString(a),u){const h=n.indexOf("#");h!==-1&&(n=n.slice(0,h)),n+=(n.indexOf("?")===-1?"?":"&")+u}return n}class Sy{constructor(){this.handlers=[]}use(r,s,a){return this.handlers.push({fulfilled:r,rejected:s,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){Se.forEach(this.handlers,function(a){a!==null&&r(a)})}}const rv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},PT=typeof URLSearchParams<"u"?URLSearchParams:wh,MT=typeof FormData<"u"?FormData:null,OT=typeof Blob<"u"?Blob:null,DT={isBrowser:!0,classes:{URLSearchParams:PT,FormData:MT,Blob:OT},protocols:["http","https","file","blob","url","data"]},Ch=typeof window<"u"&&typeof document<"u",Kd=typeof navigator=="object"&&navigator||void 0,IT=Ch&&(!Kd||["ReactNative","NativeScript","NS"].indexOf(Kd.product)<0),UT=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",zT=Ch&&window.location.href||"http://localhost",LT=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ch,hasStandardBrowserEnv:IT,hasStandardBrowserWebWorkerEnv:UT,navigator:Kd,origin:zT},Symbol.toStringTag,{value:"Module"})),sn={...LT,...DT};function BT(n,r){return Fl(n,new sn.classes.URLSearchParams,{visitor:function(s,a,c,u){return sn.isNode&&Se.isBuffer(s)?(this.append(a,s.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)},...r})}function HT(n){return Se.matchAll(/\w+|\[(\w*)]/g,n).map(r=>r[0]==="[]"?"":r[1]||r[0])}function qT(n){const r={},s=Object.keys(n);let a;const c=s.length;let u;for(a=0;a<c;a++)u=s[a],r[u]=n[u];return r}function iv(n){function r(s,a,c,u){let h=s[u++];if(h==="__proto__")return!0;const p=Number.isFinite(+h),m=u>=s.length;return h=!h&&Se.isArray(c)?c.length:h,m?(Se.hasOwnProp(c,h)?c[h]=[c[h],a]:c[h]=a,!p):((!c[h]||!Se.isObject(c[h]))&&(c[h]=[]),r(s,a,c[h],u)&&Se.isArray(c[h])&&(c[h]=qT(c[h])),!p)}if(Se.isFormData(n)&&Se.isFunction(n.entries)){const s={};return Se.forEachEntry(n,(a,c)=>{r(HT(a),c,s,0)}),s}return null}function $T(n,r,s){if(Se.isString(n))try{return(r||JSON.parse)(n),Se.trim(n)}catch(a){if(a.name!=="SyntaxError")throw a}return(s||JSON.stringify)(n)}const Vo={transitional:rv,adapter:["xhr","http","fetch"],transformRequest:[function(r,s){const a=s.getContentType()||"",c=a.indexOf("application/json")>-1,u=Se.isObject(r);if(u&&Se.isHTMLForm(r)&&(r=new FormData(r)),Se.isFormData(r))return c?JSON.stringify(iv(r)):r;if(Se.isArrayBuffer(r)||Se.isBuffer(r)||Se.isStream(r)||Se.isFile(r)||Se.isBlob(r)||Se.isReadableStream(r))return r;if(Se.isArrayBufferView(r))return r.buffer;if(Se.isURLSearchParams(r))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let p;if(u){if(a.indexOf("application/x-www-form-urlencoded")>-1)return BT(r,this.formSerializer).toString();if((p=Se.isFileList(r))||a.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Fl(p?{"files[]":r}:r,m&&new m,this.formSerializer)}}return u||c?(s.setContentType("application/json",!1),$T(r)):r}],transformResponse:[function(r){const s=this.transitional||Vo.transitional,a=s&&s.forcedJSONParsing,c=this.responseType==="json";if(Se.isResponse(r)||Se.isReadableStream(r))return r;if(r&&Se.isString(r)&&(a&&!this.responseType||c)){const h=!(s&&s.silentJSONParsing)&&c;try{return JSON.parse(r,this.parseReviver)}catch(p){if(h)throw p.name==="SyntaxError"?Ze.from(p,Ze.ERR_BAD_RESPONSE,this,null,this.response):p}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:sn.classes.FormData,Blob:sn.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Se.forEach(["delete","get","head","post","put","patch"],n=>{Vo.headers[n]={}});const FT=Se.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),VT=n=>{const r={};let s,a,c;return n&&n.split(`
`).forEach(function(h){c=h.indexOf(":"),s=h.substring(0,c).trim().toLowerCase(),a=h.substring(c+1).trim(),!(!s||r[s]&&FT[s])&&(s==="set-cookie"?r[s]?r[s].push(a):r[s]=[a]:r[s]=r[s]?r[s]+", "+a:a)}),r},wy=Symbol("internals");function ko(n){return n&&String(n).trim().toLowerCase()}function Cl(n){return n===!1||n==null?n:Se.isArray(n)?n.map(Cl):String(n)}function WT(n){const r=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=s.exec(n);)r[a[1]]=a[2];return r}const GT=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function kd(n,r,s,a,c){if(Se.isFunction(a))return a.call(this,r,s);if(c&&(r=s),!!Se.isString(r)){if(Se.isString(a))return r.indexOf(a)!==-1;if(Se.isRegExp(a))return a.test(r)}}function YT(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,s,a)=>s.toUpperCase()+a)}function XT(n,r){const s=Se.toCamelCase(" "+r);["get","set","has"].forEach(a=>{Object.defineProperty(n,a+s,{value:function(c,u,h){return this[a].call(this,r,c,u,h)},configurable:!0})})}let bn=class{constructor(r){r&&this.set(r)}set(r,s,a){const c=this;function u(p,m,g){const y=ko(m);if(!y)throw new Error("header name must be a non-empty string");const k=Se.findKey(c,y);(!k||c[k]===void 0||g===!0||g===void 0&&c[k]!==!1)&&(c[k||m]=Cl(p))}const h=(p,m)=>Se.forEach(p,(g,y)=>u(g,y,m));if(Se.isPlainObject(r)||r instanceof this.constructor)h(r,s);else if(Se.isString(r)&&(r=r.trim())&&!GT(r))h(VT(r),s);else if(Se.isObject(r)&&Se.isIterable(r)){let p={},m,g;for(const y of r){if(!Se.isArray(y))throw TypeError("Object iterator must return a key-value pair");p[g=y[0]]=(m=p[g])?Se.isArray(m)?[...m,y[1]]:[m,y[1]]:y[1]}h(p,s)}else r!=null&&u(s,r,a);return this}get(r,s){if(r=ko(r),r){const a=Se.findKey(this,r);if(a){const c=this[a];if(!s)return c;if(s===!0)return WT(c);if(Se.isFunction(s))return s.call(this,c,a);if(Se.isRegExp(s))return s.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,s){if(r=ko(r),r){const a=Se.findKey(this,r);return!!(a&&this[a]!==void 0&&(!s||kd(this,this[a],a,s)))}return!1}delete(r,s){const a=this;let c=!1;function u(h){if(h=ko(h),h){const p=Se.findKey(a,h);p&&(!s||kd(a,a[p],p,s))&&(delete a[p],c=!0)}}return Se.isArray(r)?r.forEach(u):u(r),c}clear(r){const s=Object.keys(this);let a=s.length,c=!1;for(;a--;){const u=s[a];(!r||kd(this,this[u],u,r,!0))&&(delete this[u],c=!0)}return c}normalize(r){const s=this,a={};return Se.forEach(this,(c,u)=>{const h=Se.findKey(a,u);if(h){s[h]=Cl(c),delete s[u];return}const p=r?YT(u):String(u).trim();p!==u&&delete s[u],s[p]=Cl(c),a[p]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const s=Object.create(null);return Se.forEach(this,(a,c)=>{a!=null&&a!==!1&&(s[c]=r&&Se.isArray(a)?a.join(", "):a)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,s])=>r+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...s){const a=new this(r);return s.forEach(c=>a.set(c)),a}static accessor(r){const a=(this[wy]=this[wy]={accessors:{}}).accessors,c=this.prototype;function u(h){const p=ko(h);a[p]||(XT(c,h),a[p]=!0)}return Se.isArray(r)?r.forEach(u):u(r),this}};bn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Se.reduceDescriptors(bn.prototype,({value:n},r)=>{let s=r[0].toUpperCase()+r.slice(1);return{get:()=>n,set(a){this[s]=a}}});Se.freezeMethods(bn);function Ad(n,r){const s=this||Vo,a=r||s,c=bn.from(a.headers);let u=a.data;return Se.forEach(n,function(p){u=p.call(s,u,c.normalize(),r?r.status:void 0)}),c.normalize(),u}function sv(n){return!!(n&&n.__CANCEL__)}function Ns(n,r,s){Ze.call(this,n??"canceled",Ze.ERR_CANCELED,r,s),this.name="CanceledError"}Se.inherits(Ns,Ze,{__CANCEL__:!0});function ov(n,r,s){const a=s.config.validateStatus;!s.status||!a||a(s.status)?n(s):r(new Ze("Request failed with status code "+s.status,[Ze.ERR_BAD_REQUEST,Ze.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function JT(n){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return r&&r[1]||""}function KT(n,r){n=n||10;const s=new Array(n),a=new Array(n);let c=0,u=0,h;return r=r!==void 0?r:1e3,function(m){const g=Date.now(),y=a[u];h||(h=g),s[c]=m,a[c]=g;let k=u,U=0;for(;k!==c;)U+=s[k++],k=k%n;if(c=(c+1)%n,c===u&&(u=(u+1)%n),g-h<r)return;const V=y&&g-y;return V?Math.round(U*1e3/V):void 0}}function QT(n,r){let s=0,a=1e3/r,c,u;const h=(g,y=Date.now())=>{s=y,c=null,u&&(clearTimeout(u),u=null),n(...g)};return[(...g)=>{const y=Date.now(),k=y-s;k>=a?h(g,y):(c=g,u||(u=setTimeout(()=>{u=null,h(c)},a-k)))},()=>c&&h(c)]}const Pl=(n,r,s=3)=>{let a=0;const c=KT(50,250);return QT(u=>{const h=u.loaded,p=u.lengthComputable?u.total:void 0,m=h-a,g=c(m),y=h<=p;a=h;const k={loaded:h,total:p,progress:p?h/p:void 0,bytes:m,rate:g||void 0,estimated:g&&p&&y?(p-h)/g:void 0,event:u,lengthComputable:p!=null,[r?"download":"upload"]:!0};n(k)},s)},Cy=(n,r)=>{const s=n!=null;return[a=>r[0]({lengthComputable:s,total:n,loaded:a}),r[1]]},jy=n=>(...r)=>Se.asap(()=>n(...r)),ZT=sn.hasStandardBrowserEnv?((n,r)=>s=>(s=new URL(s,sn.origin),n.protocol===s.protocol&&n.host===s.host&&(r||n.port===s.port)))(new URL(sn.origin),sn.navigator&&/(msie|trident)/i.test(sn.navigator.userAgent)):()=>!0,eR=sn.hasStandardBrowserEnv?{write(n,r,s,a,c,u,h){if(typeof document>"u")return;const p=[`${n}=${encodeURIComponent(r)}`];Se.isNumber(s)&&p.push(`expires=${new Date(s).toUTCString()}`),Se.isString(a)&&p.push(`path=${a}`),Se.isString(c)&&p.push(`domain=${c}`),u===!0&&p.push("secure"),Se.isString(h)&&p.push(`SameSite=${h}`),document.cookie=p.join("; ")},read(n){if(typeof document>"u")return null;const r=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return r?decodeURIComponent(r[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function tR(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function nR(n,r){return r?n.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):n}function av(n,r,s){let a=!tR(r);return n&&(a||s==!1)?nR(n,r):r}const Ty=n=>n instanceof bn?{...n}:n;function Ni(n,r){r=r||{};const s={};function a(g,y,k,U){return Se.isPlainObject(g)&&Se.isPlainObject(y)?Se.merge.call({caseless:U},g,y):Se.isPlainObject(y)?Se.merge({},y):Se.isArray(y)?y.slice():y}function c(g,y,k,U){if(Se.isUndefined(y)){if(!Se.isUndefined(g))return a(void 0,g,k,U)}else return a(g,y,k,U)}function u(g,y){if(!Se.isUndefined(y))return a(void 0,y)}function h(g,y){if(Se.isUndefined(y)){if(!Se.isUndefined(g))return a(void 0,g)}else return a(void 0,y)}function p(g,y,k){if(k in r)return a(g,y);if(k in n)return a(void 0,g)}const m={url:u,method:u,data:u,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:p,headers:(g,y,k)=>c(Ty(g),Ty(y),k,!0)};return Se.forEach(Object.keys({...n,...r}),function(y){const k=m[y]||c,U=k(n[y],r[y],y);Se.isUndefined(U)&&k!==p||(s[y]=U)}),s}const lv=n=>{const r=Ni({},n);let{data:s,withXSRFToken:a,xsrfHeaderName:c,xsrfCookieName:u,headers:h,auth:p}=r;if(r.headers=h=bn.from(h),r.url=nv(av(r.baseURL,r.url,r.allowAbsoluteUrls),n.params,n.paramsSerializer),p&&h.set("Authorization","Basic "+btoa((p.username||"")+":"+(p.password?unescape(encodeURIComponent(p.password)):""))),Se.isFormData(s)){if(sn.hasStandardBrowserEnv||sn.hasStandardBrowserWebWorkerEnv)h.setContentType(void 0);else if(Se.isFunction(s.getHeaders)){const m=s.getHeaders(),g=["content-type","content-length"];Object.entries(m).forEach(([y,k])=>{g.includes(y.toLowerCase())&&h.set(y,k)})}}if(sn.hasStandardBrowserEnv&&(a&&Se.isFunction(a)&&(a=a(r)),a||a!==!1&&ZT(r.url))){const m=c&&u&&eR.read(u);m&&h.set(c,m)}return r},rR=typeof XMLHttpRequest<"u",iR=rR&&function(n){return new Promise(function(s,a){const c=lv(n);let u=c.data;const h=bn.from(c.headers).normalize();let{responseType:p,onUploadProgress:m,onDownloadProgress:g}=c,y,k,U,V,I;function q(){V&&V(),I&&I(),c.cancelToken&&c.cancelToken.unsubscribe(y),c.signal&&c.signal.removeEventListener("abort",y)}let z=new XMLHttpRequest;z.open(c.method.toUpperCase(),c.url,!0),z.timeout=c.timeout;function Q(){if(!z)return;const fe=bn.from("getAllResponseHeaders"in z&&z.getAllResponseHeaders()),K={data:!p||p==="text"||p==="json"?z.responseText:z.response,status:z.status,statusText:z.statusText,headers:fe,config:n,request:z};ov(function(ae){s(ae),q()},function(ae){a(ae),q()},K),z=null}"onloadend"in z?z.onloadend=Q:z.onreadystatechange=function(){!z||z.readyState!==4||z.status===0&&!(z.responseURL&&z.responseURL.indexOf("file:")===0)||setTimeout(Q)},z.onabort=function(){z&&(a(new Ze("Request aborted",Ze.ECONNABORTED,n,z)),z=null)},z.onerror=function(le){const K=le&&le.message?le.message:"Network Error",ie=new Ze(K,Ze.ERR_NETWORK,n,z);ie.event=le||null,a(ie),z=null},z.ontimeout=function(){let le=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const K=c.transitional||rv;c.timeoutErrorMessage&&(le=c.timeoutErrorMessage),a(new Ze(le,K.clarifyTimeoutError?Ze.ETIMEDOUT:Ze.ECONNABORTED,n,z)),z=null},u===void 0&&h.setContentType(null),"setRequestHeader"in z&&Se.forEach(h.toJSON(),function(le,K){z.setRequestHeader(K,le)}),Se.isUndefined(c.withCredentials)||(z.withCredentials=!!c.withCredentials),p&&p!=="json"&&(z.responseType=c.responseType),g&&([U,I]=Pl(g,!0),z.addEventListener("progress",U)),m&&z.upload&&([k,V]=Pl(m),z.upload.addEventListener("progress",k),z.upload.addEventListener("loadend",V)),(c.cancelToken||c.signal)&&(y=fe=>{z&&(a(!fe||fe.type?new Ns(null,n,z):fe),z.abort(),z=null)},c.cancelToken&&c.cancelToken.subscribe(y),c.signal&&(c.signal.aborted?y():c.signal.addEventListener("abort",y)));const Y=JT(c.url);if(Y&&sn.protocols.indexOf(Y)===-1){a(new Ze("Unsupported protocol "+Y+":",Ze.ERR_BAD_REQUEST,n));return}z.send(u||null)})},sR=(n,r)=>{const{length:s}=n=n?n.filter(Boolean):[];if(r||s){let a=new AbortController,c;const u=function(g){if(!c){c=!0,p();const y=g instanceof Error?g:this.reason;a.abort(y instanceof Ze?y:new Ns(y instanceof Error?y.message:y))}};let h=r&&setTimeout(()=>{h=null,u(new Ze(`timeout ${r} of ms exceeded`,Ze.ETIMEDOUT))},r);const p=()=>{n&&(h&&clearTimeout(h),h=null,n.forEach(g=>{g.unsubscribe?g.unsubscribe(u):g.removeEventListener("abort",u)}),n=null)};n.forEach(g=>g.addEventListener("abort",u));const{signal:m}=a;return m.unsubscribe=()=>Se.asap(p),m}},oR=function*(n,r){let s=n.byteLength;if(s<r){yield n;return}let a=0,c;for(;a<s;)c=a+r,yield n.slice(a,c),a=c},aR=async function*(n,r){for await(const s of lR(n))yield*oR(s,r)},lR=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const r=n.getReader();try{for(;;){const{done:s,value:a}=await r.read();if(s)break;yield a}}finally{await r.cancel()}},Ry=(n,r,s,a)=>{const c=aR(n,r);let u=0,h,p=m=>{h||(h=!0,a&&a(m))};return new ReadableStream({async pull(m){try{const{done:g,value:y}=await c.next();if(g){p(),m.close();return}let k=y.byteLength;if(s){let U=u+=k;s(U)}m.enqueue(new Uint8Array(y))}catch(g){throw p(g),g}},cancel(m){return p(m),c.return()}},{highWaterMark:2})},Ey=64*1024,{isFunction:cl}=Se,cR=(({Request:n,Response:r})=>({Request:n,Response:r}))(Se.global),{ReadableStream:ky,TextEncoder:Ay}=Se.global,Ny=(n,...r)=>{try{return!!n(...r)}catch{return!1}},uR=n=>{n=Se.merge.call({skipUndefined:!0},cR,n);const{fetch:r,Request:s,Response:a}=n,c=r?cl(r):typeof fetch=="function",u=cl(s),h=cl(a);if(!c)return!1;const p=c&&cl(ky),m=c&&(typeof Ay=="function"?(I=>q=>I.encode(q))(new Ay):async I=>new Uint8Array(await new s(I).arrayBuffer())),g=u&&p&&Ny(()=>{let I=!1;const q=new s(sn.origin,{body:new ky,method:"POST",get duplex(){return I=!0,"half"}}).headers.has("Content-Type");return I&&!q}),y=h&&p&&Ny(()=>Se.isReadableStream(new a("").body)),k={stream:y&&(I=>I.body)};c&&["text","arrayBuffer","blob","formData","stream"].forEach(I=>{!k[I]&&(k[I]=(q,z)=>{let Q=q&&q[I];if(Q)return Q.call(q);throw new Ze(`Response type '${I}' is not supported`,Ze.ERR_NOT_SUPPORT,z)})});const U=async I=>{if(I==null)return 0;if(Se.isBlob(I))return I.size;if(Se.isSpecCompliantForm(I))return(await new s(sn.origin,{method:"POST",body:I}).arrayBuffer()).byteLength;if(Se.isArrayBufferView(I)||Se.isArrayBuffer(I))return I.byteLength;if(Se.isURLSearchParams(I)&&(I=I+""),Se.isString(I))return(await m(I)).byteLength},V=async(I,q)=>{const z=Se.toFiniteNumber(I.getContentLength());return z??U(q)};return async I=>{let{url:q,method:z,data:Q,signal:Y,cancelToken:fe,timeout:le,onDownloadProgress:K,onUploadProgress:ie,responseType:ae,headers:Ce,withCredentials:De="same-origin",fetchOptions:Re}=lv(I),ze=r||fetch;ae=ae?(ae+"").toLowerCase():"text";let Fe=sR([Y,fe&&fe.toAbortSignal()],le),Me=null;const be=Fe&&Fe.unsubscribe&&(()=>{Fe.unsubscribe()});let Ue;try{if(ie&&g&&z!=="get"&&z!=="head"&&(Ue=await V(Ce,Q))!==0){let j=new s(q,{method:"POST",body:Q,duplex:"half"}),B;if(Se.isFormData(Q)&&(B=j.headers.get("content-type"))&&Ce.setContentType(B),j.body){const[C,T]=Cy(Ue,Pl(jy(ie)));Q=Ry(j.body,Ey,C,T)}}Se.isString(De)||(De=De?"include":"omit");const W=u&&"credentials"in s.prototype,M={...Re,signal:Fe,method:z.toUpperCase(),headers:Ce.normalize().toJSON(),body:Q,duplex:"half",credentials:W?De:void 0};Me=u&&new s(q,M);let J=await(u?ze(Me,Re):ze(q,M));const H=y&&(ae==="stream"||ae==="response");if(y&&(K||H&&be)){const j={};["status","statusText","headers"].forEach(b=>{j[b]=J[b]});const B=Se.toFiniteNumber(J.headers.get("content-length")),[C,T]=K&&Cy(B,Pl(jy(K),!0))||[];J=new a(Ry(J.body,Ey,C,()=>{T&&T(),be&&be()}),j)}ae=ae||"text";let ee=await k[Se.findKey(k,ae)||"text"](J,I);return!H&&be&&be(),await new Promise((j,B)=>{ov(j,B,{data:ee,headers:bn.from(J.headers),status:J.status,statusText:J.statusText,config:I,request:Me})})}catch(W){throw be&&be(),W&&W.name==="TypeError"&&/Load failed|fetch/i.test(W.message)?Object.assign(new Ze("Network Error",Ze.ERR_NETWORK,I,Me),{cause:W.cause||W}):Ze.from(W,W&&W.code,I,Me)}}},dR=new Map,cv=n=>{let r=n&&n.env||{};const{fetch:s,Request:a,Response:c}=r,u=[a,c,s];let h=u.length,p=h,m,g,y=dR;for(;p--;)m=u[p],g=y.get(m),g===void 0&&y.set(m,g=p?new Map:uR(r)),y=g;return g};cv();const jh={http:kT,xhr:iR,fetch:{get:cv}};Se.forEach(jh,(n,r)=>{if(n){try{Object.defineProperty(n,"name",{value:r})}catch{}Object.defineProperty(n,"adapterName",{value:r})}});const _y=n=>`- ${n}`,hR=n=>Se.isFunction(n)||n===null||n===!1;function fR(n,r){n=Se.isArray(n)?n:[n];const{length:s}=n;let a,c;const u={};for(let h=0;h<s;h++){a=n[h];let p;if(c=a,!hR(a)&&(c=jh[(p=String(a)).toLowerCase()],c===void 0))throw new Ze(`Unknown adapter '${p}'`);if(c&&(Se.isFunction(c)||(c=c.get(r))))break;u[p||"#"+h]=c}if(!c){const h=Object.entries(u).map(([m,g])=>`adapter ${m} `+(g===!1?"is not supported by the environment":"is not available in the build"));let p=s?h.length>1?`since :
`+h.map(_y).join(`
`):" "+_y(h[0]):"as no adapter specified";throw new Ze("There is no suitable adapter to dispatch the request "+p,"ERR_NOT_SUPPORT")}return c}const uv={getAdapter:fR,adapters:jh};function Nd(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Ns(null,n)}function Py(n){return Nd(n),n.headers=bn.from(n.headers),n.data=Ad.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),uv.getAdapter(n.adapter||Vo.adapter,n)(n).then(function(a){return Nd(n),a.data=Ad.call(n,n.transformResponse,a),a.headers=bn.from(a.headers),a},function(a){return sv(a)||(Nd(n),a&&a.response&&(a.response.data=Ad.call(n,n.transformResponse,a.response),a.response.headers=bn.from(a.response.headers))),Promise.reject(a)})}const dv="1.13.2",Vl={};["object","boolean","number","function","string","symbol"].forEach((n,r)=>{Vl[n]=function(a){return typeof a===n||"a"+(r<1?"n ":" ")+n}});const My={};Vl.transitional=function(r,s,a){function c(u,h){return"[Axios v"+dv+"] Transitional option '"+u+"'"+h+(a?". "+a:"")}return(u,h,p)=>{if(r===!1)throw new Ze(c(h," has been removed"+(s?" in "+s:"")),Ze.ERR_DEPRECATED);return s&&!My[h]&&(My[h]=!0,console.warn(c(h," has been deprecated since v"+s+" and will be removed in the near future"))),r?r(u,h,p):!0}};Vl.spelling=function(r){return(s,a)=>(console.warn(`${a} is likely a misspelling of ${r}`),!0)};function pR(n,r,s){if(typeof n!="object")throw new Ze("options must be an object",Ze.ERR_BAD_OPTION_VALUE);const a=Object.keys(n);let c=a.length;for(;c-- >0;){const u=a[c],h=r[u];if(h){const p=n[u],m=p===void 0||h(p,u,n);if(m!==!0)throw new Ze("option "+u+" must be "+m,Ze.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Ze("Unknown option "+u,Ze.ERR_BAD_OPTION)}}const jl={assertOptions:pR,validators:Vl},ir=jl.validators;let Ri=class{constructor(r){this.defaults=r||{},this.interceptors={request:new Sy,response:new Sy}}async request(r,s){try{return await this._request(r,s)}catch(a){if(a instanceof Error){let c={};Error.captureStackTrace?Error.captureStackTrace(c):c=new Error;const u=c.stack?c.stack.replace(/^.+\n/,""):"";try{a.stack?u&&!String(a.stack).endsWith(u.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+u):a.stack=u}catch{}}throw a}}_request(r,s){typeof r=="string"?(s=s||{},s.url=r):s=r||{},s=Ni(this.defaults,s);const{transitional:a,paramsSerializer:c,headers:u}=s;a!==void 0&&jl.assertOptions(a,{silentJSONParsing:ir.transitional(ir.boolean),forcedJSONParsing:ir.transitional(ir.boolean),clarifyTimeoutError:ir.transitional(ir.boolean)},!1),c!=null&&(Se.isFunction(c)?s.paramsSerializer={serialize:c}:jl.assertOptions(c,{encode:ir.function,serialize:ir.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),jl.assertOptions(s,{baseUrl:ir.spelling("baseURL"),withXsrfToken:ir.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let h=u&&Se.merge(u.common,u[s.method]);u&&Se.forEach(["delete","get","head","post","put","patch","common"],I=>{delete u[I]}),s.headers=bn.concat(h,u);const p=[];let m=!0;this.interceptors.request.forEach(function(q){typeof q.runWhen=="function"&&q.runWhen(s)===!1||(m=m&&q.synchronous,p.unshift(q.fulfilled,q.rejected))});const g=[];this.interceptors.response.forEach(function(q){g.push(q.fulfilled,q.rejected)});let y,k=0,U;if(!m){const I=[Py.bind(this),void 0];for(I.unshift(...p),I.push(...g),U=I.length,y=Promise.resolve(s);k<U;)y=y.then(I[k++],I[k++]);return y}U=p.length;let V=s;for(;k<U;){const I=p[k++],q=p[k++];try{V=I(V)}catch(z){q.call(this,z);break}}try{y=Py.call(this,V)}catch(I){return Promise.reject(I)}for(k=0,U=g.length;k<U;)y=y.then(g[k++],g[k++]);return y}getUri(r){r=Ni(this.defaults,r);const s=av(r.baseURL,r.url,r.allowAbsoluteUrls);return nv(s,r.params,r.paramsSerializer)}};Se.forEach(["delete","get","head","options"],function(r){Ri.prototype[r]=function(s,a){return this.request(Ni(a||{},{method:r,url:s,data:(a||{}).data}))}});Se.forEach(["post","put","patch"],function(r){function s(a){return function(u,h,p){return this.request(Ni(p||{},{method:r,headers:a?{"Content-Type":"multipart/form-data"}:{},url:u,data:h}))}}Ri.prototype[r]=s(),Ri.prototype[r+"Form"]=s(!0)});let mR=class hv{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(u){s=u});const a=this;this.promise.then(c=>{if(!a._listeners)return;let u=a._listeners.length;for(;u-- >0;)a._listeners[u](c);a._listeners=null}),this.promise.then=c=>{let u;const h=new Promise(p=>{a.subscribe(p),u=p}).then(c);return h.cancel=function(){a.unsubscribe(u)},h},r(function(u,h,p){a.reason||(a.reason=new Ns(u,h,p),s(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const s=this._listeners.indexOf(r);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const r=new AbortController,s=a=>{r.abort(a)};return this.subscribe(s),r.signal.unsubscribe=()=>this.unsubscribe(s),r.signal}static source(){let r;return{token:new hv(function(c){r=c}),cancel:r}}};function gR(n){return function(s){return n.apply(null,s)}}function yR(n){return Se.isObject(n)&&n.isAxiosError===!0}const Qd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Qd).forEach(([n,r])=>{Qd[r]=n});function fv(n){const r=new Ri(n),s=F0(Ri.prototype.request,r);return Se.extend(s,Ri.prototype,r,{allOwnKeys:!0}),Se.extend(s,r,null,{allOwnKeys:!0}),s.create=function(c){return fv(Ni(n,c))},s}const _t=fv(Vo);_t.Axios=Ri;_t.CanceledError=Ns;_t.CancelToken=mR;_t.isCancel=sv;_t.VERSION=dv;_t.toFormData=Fl;_t.AxiosError=Ze;_t.Cancel=_t.CanceledError;_t.all=function(r){return Promise.all(r)};_t.spread=gR;_t.isAxiosError=yR;_t.mergeConfig=Ni;_t.AxiosHeaders=bn;_t.formToJSON=n=>iv(Se.isHTMLForm(n)?new FormData(n):n);_t.getAdapter=uv.getAdapter;_t.HttpStatusCode=Qd;_t.default=_t;const{Axios:u4,AxiosError:d4,CanceledError:h4,isCancel:f4,CancelToken:p4,VERSION:m4,all:g4,Cancel:y4,isAxiosError:v4,spread:b4,toFormData:x4,AxiosHeaders:S4,HttpStatusCode:w4,formToJSON:C4,getAdapter:j4,mergeConfig:T4}=_t,vR=()=>"https://festive-guest-api.azurewebsites.net/api",qe=_t.create({baseURL:vR(),timeout:6e4});qe.interceptors.request.use(n=>(console.log("API Request:",{method:n.method?.toUpperCase(),url:n.baseURL+"/"+n.url,headers:{...n.headers,Authorization:n.headers.Authorization?"[HIDDEN]":void 0}}),n),n=>(console.error("Request Error:",n),Promise.reject(n)));qe.interceptors.request.use(n=>{try{const r=localStorage.getItem("user");if(r){const s=JSON.parse(r);s&&s.token&&(n.headers.Authorization=`Bearer ${s.token}`)}}catch{console.warn("Failed to read user from storage")}return n},n=>Promise.reject(n));qe.interceptors.response.use(n=>n,n=>(console.error("API Error Details:",{status:n.response?.status,statusText:n.response?.statusText,url:n.config?.url,method:n.config?.method,baseURL:n.config?.baseURL,data:n.response?.data,message:n.message}),(n.response?.status===401||n.response?.status===403)&&(localStorage.removeItem("user"),localStorage.removeItem("userId"),window.dispatchEvent(new Event("storage")),window.location.pathname!=="/login"&&window.location.pathname!=="/"&&(window.location.href="/login")),Promise.reject(n)));const bR=({className:n="",style:r={},alt:s="FestiveGuest Logo",isLoginLogo:a=!1})=>{const c=a?"/assets/login-logo.png":"/assets/logo.png";return i.jsx("img",{src:c,alt:s,className:n,style:r})},xR=()=>i.jsx("div",{className:"loader-container",children:i.jsx("div",{className:"logo-loader",children:i.jsx("img",{src:"/assets/login-logo.png",alt:"FestiveGuest",className:"loader-logo"})})});class SR{constructor(){this.locations=null,this.loading=!1}async getLocations(){if(this.locations)return this.locations;if(this.loading){for(;this.loading;)await new Promise(r=>setTimeout(r,100));return this.locations}this.loading=!0;try{const r=await qe.get("location/states-with-cities");return this.locations=r.data,this.locations}catch(r){throw console.error("DEBUG: Failed to fetch locations from API:",r),new Error("Unable to load location data (API Error). Please try again later.")}finally{this.loading=!1}}async seedLocations(){try{const r=await qe.post("location/seed");return this.locations=null,r.data}catch(r){throw console.error("Failed to seed locations:",r),r}}clearCache(){this.locations=null}}const Wo=new SR,wR=()=>{const[n,r]=R.useState([]),[s,a]=R.useState(!1),c=(p,m="info")=>{r(g=>[...g,{message:p,type:m,timestamp:new Date().toLocaleTimeString()}])},u=async()=>{a(!0),r([]);try{c(" Testing API connectivity...","info");try{c(` API Base URL: ${qe.defaults.baseURL}`,"info");const p=await qe.get("health");c(" API Health Check: SUCCESS","success")}catch(p){c(` API Health Check: ${p.message}`,"error")}try{c(" Testing location service...","info");const p=await Wo.getLocations(),m=Object.keys(p||{}).length;c(` Locations loaded: ${m} states found`,"success")}catch(p){c(` Location service: ${p.message}`,"error")}try{c(" Testing direct location API...","info");const p=await qe.get("location/states-with-cities"),m=Object.keys(p.data||{}).length;c(` Direct API call: ${m} states found`,"success")}catch(p){c(` Direct API call: ${p.message}`,"error")}}catch(p){c(` Test suite failed: ${p.message}`,"error")}finally{a(!1)}},h=()=>{r([])};return i.jsxs("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto",fontFamily:"monospace"},children:[i.jsx("h2",{children:" API Connectivity Test"}),i.jsx("p",{children:"Use this tool to test your API connectivity and location loading."}),i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("button",{onClick:u,disabled:s,style:{padding:"0.75rem 1.5rem",backgroundColor:s?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"0.5rem",cursor:s?"not-allowed":"pointer",marginRight:"1rem"},children:s?" Testing...":" Run Tests"}),i.jsx("button",{onClick:h,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer"},children:" Clear Results"})]}),i.jsx("div",{style:{backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"0.5rem",padding:"1rem",minHeight:"200px",maxHeight:"400px",overflowY:"auto"},children:n.length===0?i.jsx("p",{style:{color:"#6c757d",fontStyle:"italic"},children:'Click "Run Tests" to start testing your API connectivity...'}):n.map((p,m)=>i.jsxs("div",{style:{marginBottom:"0.5rem",padding:"0.5rem",borderRadius:"0.25rem",backgroundColor:p.type==="success"?"#d4edda":p.type==="error"?"#f8d7da":"#d1ecf1",color:p.type==="success"?"#155724":p.type==="error"?"#721c24":"#0c5460"},children:[i.jsxs("span",{style:{fontSize:"0.8rem",opacity:.7},children:["[",p.timestamp,"]"]})," ",p.message]},m))}),i.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.9rem",color:"#6c757d"},children:[i.jsxs("p",{children:[i.jsx("strong",{children:"Environment:"})," ","production"]}),i.jsxs("p",{children:[i.jsx("strong",{children:"Current API Base:"})," ",qe.defaults.baseURL]})]})]})};class Ei extends Error{constructor(r,s){const a=new.target.prototype;super(`${r}: Status code '${s}'`),this.statusCode=s,this.__proto__=a}}class Th extends Error{constructor(r="A timeout occurred."){const s=new.target.prototype;super(r),this.__proto__=s}}let Yn=class extends Error{constructor(r="An abort occurred."){const s=new.target.prototype;super(r),this.__proto__=s}};class CR extends Error{constructor(r,s){const a=new.target.prototype;super(r),this.transport=s,this.errorType="UnsupportedTransportError",this.__proto__=a}}class jR extends Error{constructor(r,s){const a=new.target.prototype;super(r),this.transport=s,this.errorType="DisabledTransportError",this.__proto__=a}}class TR extends Error{constructor(r,s){const a=new.target.prototype;super(r),this.transport=s,this.errorType="FailedToStartTransportError",this.__proto__=a}}class Oy extends Error{constructor(r){const s=new.target.prototype;super(r),this.errorType="FailedToNegotiateWithServerError",this.__proto__=s}}class RR extends Error{constructor(r,s){const a=new.target.prototype;super(r),this.innerErrors=s,this.__proto__=a}}class pv{constructor(r,s,a){this.statusCode=r,this.statusText=s,this.content=a}}class Wl{get(r,s){return this.send({...s,method:"GET",url:r})}post(r,s){return this.send({...s,method:"POST",url:r})}delete(r,s){return this.send({...s,method:"DELETE",url:r})}getCookieString(r){return""}}var _e;(function(n){n[n.Trace=0]="Trace",n[n.Debug=1]="Debug",n[n.Information=2]="Information",n[n.Warning=3]="Warning",n[n.Error=4]="Error",n[n.Critical=5]="Critical",n[n.None=6]="None"})(_e||(_e={}));class Uo{constructor(){}log(r,s){}}Uo.instance=new Uo;const ER="10.0.0";class Ut{static isRequired(r,s){if(r==null)throw new Error(`The '${s}' argument is required.`)}static isNotEmpty(r,s){if(!r||r.match(/^\s*$/))throw new Error(`The '${s}' argument should not be empty.`)}static isIn(r,s,a){if(!(r in s))throw new Error(`Unknown ${a} value: ${r}.`)}}class jt{static get isBrowser(){return!jt.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!jt.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!jt.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function zo(n,r){let s="";return _i(n)?(s=`Binary data of length ${n.byteLength}`,r&&(s+=`. Content: '${kR(n)}'`)):typeof n=="string"&&(s=`String data of length ${n.length}`,r&&(s+=`. Content: '${n}'`)),s}function kR(n){const r=new Uint8Array(n);let s="";return r.forEach(a=>{const c=a<16?"0":"";s+=`0x${c}${a.toString(16)} `}),s.substring(0,s.length-1)}function _i(n){return n&&typeof ArrayBuffer<"u"&&(n instanceof ArrayBuffer||n.constructor&&n.constructor.name==="ArrayBuffer")}async function mv(n,r,s,a,c,u){const h={},[p,m]=Ss();h[p]=m,n.log(_e.Trace,`(${r} transport) sending data. ${zo(c,u.logMessageContent)}.`);const g=_i(c)?"arraybuffer":"text",y=await s.post(a,{content:c,headers:{...h,...u.headers},responseType:g,timeout:u.timeout,withCredentials:u.withCredentials});n.log(_e.Trace,`(${r} transport) request complete. Response status: ${y.statusCode}.`)}function AR(n){return n===void 0?new Ml(_e.Information):n===null?Uo.instance:n.log!==void 0?n:new Ml(n)}class NR{constructor(r,s){this._subject=r,this._observer=s}dispose(){const r=this._subject.observers.indexOf(this._observer);r>-1&&this._subject.observers.splice(r,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(s=>{})}}class Ml{constructor(r){this._minLevel=r,this.out=console}log(r,s){if(r>=this._minLevel){const a=`[${new Date().toISOString()}] ${_e[r]}: ${s}`;switch(r){case _e.Critical:case _e.Error:this.out.error(a);break;case _e.Warning:this.out.warn(a);break;case _e.Information:this.out.info(a);break;default:this.out.log(a);break}}}}function Ss(){let n="X-SignalR-User-Agent";return jt.isNode&&(n="User-Agent"),[n,_R(ER,PR(),OR(),MR())]}function _R(n,r,s,a){let c="Microsoft SignalR/";const u=n.split(".");return c+=`${u[0]}.${u[1]}`,c+=` (${n}; `,r&&r!==""?c+=`${r}; `:c+="Unknown OS; ",c+=`${s}`,a?c+=`; ${a}`:c+="; Unknown Runtime Version",c+=")",c}function PR(){if(jt.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function MR(){if(jt.isNode)return process.versions.node}function OR(){return jt.isNode?"NodeJS":"Browser"}function _d(n){return n.stack?n.stack:n.message?n.message:`${n}`}function DR(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}let IR=class extends Wl{constructor(r){if(super(),this._logger=r,typeof fetch>"u"||jt.isNode){const s=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(s("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=s("node-fetch"):this._fetchType=fetch,this._fetchType=s("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(DR());if(typeof AbortController>"u"){const s=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=s("abort-controller")}else this._abortControllerType=AbortController}async send(r){if(r.abortSignal&&r.abortSignal.aborted)throw new Yn;if(!r.method)throw new Error("No method defined.");if(!r.url)throw new Error("No url defined.");const s=new this._abortControllerType;let a;r.abortSignal&&(r.abortSignal.onabort=()=>{s.abort(),a=new Yn});let c=null;if(r.timeout){const m=r.timeout;c=setTimeout(()=>{s.abort(),this._logger.log(_e.Warning,"Timeout from HTTP request."),a=new Th},m)}r.content===""&&(r.content=void 0),r.content&&(r.headers=r.headers||{},_i(r.content)?r.headers["Content-Type"]="application/octet-stream":r.headers["Content-Type"]="text/plain;charset=UTF-8");let u;try{u=await this._fetchType(r.url,{body:r.content,cache:"no-cache",credentials:r.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...r.headers},method:r.method,mode:"cors",redirect:"follow",signal:s.signal})}catch(m){throw a||(this._logger.log(_e.Warning,`Error from HTTP request. ${m}.`),m)}finally{c&&clearTimeout(c),r.abortSignal&&(r.abortSignal.onabort=null)}if(!u.ok){const m=await Dy(u,"text");throw new Ei(m||u.statusText,u.status)}const p=await Dy(u,r.responseType);return new pv(u.status,u.statusText,p)}getCookieString(r){let s="";return jt.isNode&&this._jar&&this._jar.getCookies(r,(a,c)=>s=c.join("; ")),s}};function Dy(n,r){let s;switch(r){case"arraybuffer":s=n.arrayBuffer();break;case"text":s=n.text();break;case"blob":case"document":case"json":throw new Error(`${r} is not supported.`);default:s=n.text();break}return s}class UR extends Wl{constructor(r){super(),this._logger=r}send(r){return r.abortSignal&&r.abortSignal.aborted?Promise.reject(new Yn):r.method?r.url?new Promise((s,a)=>{const c=new XMLHttpRequest;c.open(r.method,r.url,!0),c.withCredentials=r.withCredentials===void 0?!0:r.withCredentials,c.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.content===""&&(r.content=void 0),r.content&&(_i(r.content)?c.setRequestHeader("Content-Type","application/octet-stream"):c.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const u=r.headers;u&&Object.keys(u).forEach(h=>{c.setRequestHeader(h,u[h])}),r.responseType&&(c.responseType=r.responseType),r.abortSignal&&(r.abortSignal.onabort=()=>{c.abort(),a(new Yn)}),r.timeout&&(c.timeout=r.timeout),c.onload=()=>{r.abortSignal&&(r.abortSignal.onabort=null),c.status>=200&&c.status<300?s(new pv(c.status,c.statusText,c.response||c.responseText)):a(new Ei(c.response||c.responseText||c.statusText,c.status))},c.onerror=()=>{this._logger.log(_e.Warning,`Error from HTTP request. ${c.status}: ${c.statusText}.`),a(new Ei(c.statusText,c.status))},c.ontimeout=()=>{this._logger.log(_e.Warning,"Timeout from HTTP request."),a(new Th)},c.send(r.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class zR extends Wl{constructor(r){if(super(),typeof fetch<"u"||jt.isNode)this._httpClient=new IR(r);else if(typeof XMLHttpRequest<"u")this._httpClient=new UR(r);else throw new Error("No usable HttpClient found.")}send(r){return r.abortSignal&&r.abortSignal.aborted?Promise.reject(new Yn):r.method?r.url?this._httpClient.send(r):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(r){return this._httpClient.getCookieString(r)}}class En{static write(r){return`${r}${En.RecordSeparator}`}static parse(r){if(r[r.length-1]!==En.RecordSeparator)throw new Error("Message is incomplete.");const s=r.split(En.RecordSeparator);return s.pop(),s}}En.RecordSeparatorCode=30;En.RecordSeparator=String.fromCharCode(En.RecordSeparatorCode);class LR{writeHandshakeRequest(r){return En.write(JSON.stringify(r))}parseHandshakeResponse(r){let s,a;if(_i(r)){const p=new Uint8Array(r),m=p.indexOf(En.RecordSeparatorCode);if(m===-1)throw new Error("Message is incomplete.");const g=m+1;s=String.fromCharCode.apply(null,Array.prototype.slice.call(p.slice(0,g))),a=p.byteLength>g?p.slice(g).buffer:null}else{const p=r,m=p.indexOf(En.RecordSeparator);if(m===-1)throw new Error("Message is incomplete.");const g=m+1;s=p.substring(0,g),a=p.length>g?p.substring(g):null}const c=En.parse(s),u=JSON.parse(c[0]);if(u.type)throw new Error("Expected a handshake response from the server.");return[a,u]}}var Ke;(function(n){n[n.Invocation=1]="Invocation",n[n.StreamItem=2]="StreamItem",n[n.Completion=3]="Completion",n[n.StreamInvocation=4]="StreamInvocation",n[n.CancelInvocation=5]="CancelInvocation",n[n.Ping=6]="Ping",n[n.Close=7]="Close",n[n.Ack=8]="Ack",n[n.Sequence=9]="Sequence"})(Ke||(Ke={}));class BR{constructor(){this.observers=[]}next(r){for(const s of this.observers)s.next(r)}error(r){for(const s of this.observers)s.error&&s.error(r)}complete(){for(const r of this.observers)r.complete&&r.complete()}subscribe(r){return this.observers.push(r),new NR(this,r)}}class HR{constructor(r,s,a){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=r,this._connection=s,this._bufferSize=a}async _send(r){const s=this._protocol.writeMessage(r);let a=Promise.resolve();if(this._isInvocationMessage(r)){this._totalMessageCount++;let c=()=>{},u=()=>{};_i(s)?this._bufferedByteCount+=s.byteLength:this._bufferedByteCount+=s.length,this._bufferedByteCount>=this._bufferSize&&(a=new Promise((h,p)=>{c=h,u=p})),this._messages.push(new qR(s,this._totalMessageCount,c,u))}try{this._reconnectInProgress||await this._connection.send(s)}catch{this._disconnected()}await a}_ack(r){let s=-1;for(let a=0;a<this._messages.length;a++){const c=this._messages[a];if(c._id<=r.sequenceId)s=a,_i(c._message)?this._bufferedByteCount-=c._message.byteLength:this._bufferedByteCount-=c._message.length,c._resolver();else if(this._bufferedByteCount<this._bufferSize)c._resolver();else break}s!==-1&&(this._messages=this._messages.slice(s+1))}_shouldProcessMessage(r){if(this._waitForSequenceMessage)return r.type!==Ke.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(r))return!0;const s=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,s<=this._latestReceivedSequenceId?(s===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=s,this._ackTimer(),!0)}_resetSequence(r){if(r.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=r.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const r=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:Ke.Sequence,sequenceId:r}));const s=this._messages;for(const a of s)await this._connection.send(a._message);this._reconnectInProgress=!1}_dispose(r){r??(r=new Error("Unable to reconnect to server."));for(const s of this._messages)s._rejector(r)}_isInvocationMessage(r){switch(r.type){case Ke.Invocation:case Ke.StreamItem:case Ke.Completion:case Ke.StreamInvocation:case Ke.CancelInvocation:return!0;case Ke.Close:case Ke.Sequence:case Ke.Ping:case Ke.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:Ke.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class qR{constructor(r,s,a,c){this._message=r,this._id=s,this._resolver=a,this._rejector=c}}const $R=30*1e3,FR=15*1e3,VR=1e5;var bt;(function(n){n.Disconnected="Disconnected",n.Connecting="Connecting",n.Connected="Connected",n.Disconnecting="Disconnecting",n.Reconnecting="Reconnecting"})(bt||(bt={}));class Rh{static create(r,s,a,c,u,h,p){return new Rh(r,s,a,c,u,h,p)}constructor(r,s,a,c,u,h,p){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(_e.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},Ut.isRequired(r,"connection"),Ut.isRequired(s,"logger"),Ut.isRequired(a,"protocol"),this.serverTimeoutInMilliseconds=u??$R,this.keepAliveIntervalInMilliseconds=h??FR,this._statefulReconnectBufferSize=p??VR,this._logger=s,this._protocol=a,this.connection=r,this._reconnectPolicy=c,this._handshakeProtocol=new LR,this.connection.onreceive=m=>this._processIncomingData(m),this.connection.onclose=m=>this._connectionClosed(m),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=bt.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Ke.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(r){if(this._connectionState!==bt.Disconnected&&this._connectionState!==bt.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!r)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=r}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==bt.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=bt.Connecting,this._logger.log(_e.Debug,"Starting HubConnection.");try{await this._startInternal(),jt.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=bt.Connected,this._connectionStarted=!0,this._logger.log(_e.Debug,"HubConnection connected successfully.")}catch(r){return this._connectionState=bt.Disconnected,this._logger.log(_e.Debug,`HubConnection failed to start successfully because of error '${r}'.`),Promise.reject(r)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const r=new Promise((s,a)=>{this._handshakeResolver=s,this._handshakeRejecter=a});await this.connection.start(this._protocol.transferFormat);try{let s=this._protocol.version;this.connection.features.reconnect||(s=1);const a={protocol:this._protocol.name,version:s};if(this._logger.log(_e.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(a)),this._logger.log(_e.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await r,this._stopDuringStartError)throw this._stopDuringStartError;this.connection.features.reconnect&&(this._messageBuffer=new HR(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(s){throw this._logger.log(_e.Debug,`Hub handshake failed with error '${s}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(s),s}}async stop(){const r=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await r}catch{}}_stopInternal(r){if(this._connectionState===bt.Disconnected)return this._logger.log(_e.Debug,`Call to HubConnection.stop(${r}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===bt.Disconnecting)return this._logger.log(_e.Debug,`Call to HttpConnection.stop(${r}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const s=this._connectionState;return this._connectionState=bt.Disconnecting,this._logger.log(_e.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(_e.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(s===bt.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=r||new Yn("The connection was stopped before the hub handshake could complete."),this.connection.stop(r))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(r,...s){const[a,c]=this._replaceStreamingParams(s),u=this._createStreamInvocation(r,s,c);let h;const p=new BR;return p.cancelCallback=()=>{const m=this._createCancelInvocation(u.invocationId);return delete this._callbacks[u.invocationId],h.then(()=>this._sendWithProtocol(m))},this._callbacks[u.invocationId]=(m,g)=>{if(g){p.error(g);return}else m&&(m.type===Ke.Completion?m.error?p.error(new Error(m.error)):p.complete():p.next(m.item))},h=this._sendWithProtocol(u).catch(m=>{p.error(m),delete this._callbacks[u.invocationId]}),this._launchStreams(a,h),p}_sendMessage(r){return this._resetKeepAliveInterval(),this.connection.send(r)}_sendWithProtocol(r){return this._messageBuffer?this._messageBuffer._send(r):this._sendMessage(this._protocol.writeMessage(r))}send(r,...s){const[a,c]=this._replaceStreamingParams(s),u=this._sendWithProtocol(this._createInvocation(r,s,!0,c));return this._launchStreams(a,u),u}invoke(r,...s){const[a,c]=this._replaceStreamingParams(s),u=this._createInvocation(r,s,!1,c);return new Promise((p,m)=>{this._callbacks[u.invocationId]=(y,k)=>{if(k){m(k);return}else y&&(y.type===Ke.Completion?y.error?m(new Error(y.error)):p(y.result):m(new Error(`Unexpected message type: ${y.type}`)))};const g=this._sendWithProtocol(u).catch(y=>{m(y),delete this._callbacks[u.invocationId]});this._launchStreams(a,g)})}on(r,s){!r||!s||(r=r.toLowerCase(),this._methods[r]||(this._methods[r]=[]),this._methods[r].indexOf(s)===-1&&this._methods[r].push(s))}off(r,s){if(!r)return;r=r.toLowerCase();const a=this._methods[r];if(a)if(s){const c=a.indexOf(s);c!==-1&&(a.splice(c,1),a.length===0&&delete this._methods[r])}else delete this._methods[r]}onclose(r){r&&this._closedCallbacks.push(r)}onreconnecting(r){r&&this._reconnectingCallbacks.push(r)}onreconnected(r){r&&this._reconnectedCallbacks.push(r)}_processIncomingData(r){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(r=this._processHandshakeResponse(r),this._receivedHandshakeResponse=!0),r){const s=this._protocol.parseMessages(r,this._logger);for(const a of s)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(a)))switch(a.type){case Ke.Invocation:this._invokeClientMethod(a).catch(c=>{this._logger.log(_e.Error,`Invoke client method threw error: ${_d(c)}`)});break;case Ke.StreamItem:case Ke.Completion:{const c=this._callbacks[a.invocationId];if(c){a.type===Ke.Completion&&delete this._callbacks[a.invocationId];try{c(a)}catch(u){this._logger.log(_e.Error,`Stream callback threw error: ${_d(u)}`)}}break}case Ke.Ping:break;case Ke.Close:{this._logger.log(_e.Information,"Close message received from server.");const c=a.error?new Error("Server returned an error on close: "+a.error):void 0;a.allowReconnect===!0?this.connection.stop(c):this._stopPromise=this._stopInternal(c);break}case Ke.Ack:this._messageBuffer&&this._messageBuffer._ack(a);break;case Ke.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(a);break;default:this._logger.log(_e.Warning,`Invalid message type: ${a.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(r){let s,a;try{[a,s]=this._handshakeProtocol.parseHandshakeResponse(r)}catch(c){const u="Error parsing handshake response: "+c;this._logger.log(_e.Error,u);const h=new Error(u);throw this._handshakeRejecter(h),h}if(s.error){const c="Server returned handshake error: "+s.error;this._logger.log(_e.Error,c);const u=new Error(c);throw this._handshakeRejecter(u),u}else this._logger.log(_e.Debug,"Server handshake complete.");return this._handshakeResolver(),a}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if(!this.connection.features||!this.connection.features.inherentKeepAlive){this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds);let r=this._nextKeepAlive-new Date().getTime();if(r<0){this._connectionState===bt.Connected&&this._trySendPingMessage();return}this._pingServerHandle===void 0&&(r<0&&(r=0),this._pingServerHandle=setTimeout(async()=>{this._connectionState===bt.Connected&&await this._trySendPingMessage()},r))}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(r){const s=r.target.toLowerCase(),a=this._methods[s];if(!a){this._logger.log(_e.Warning,`No client method with the name '${s}' found.`),r.invocationId&&(this._logger.log(_e.Warning,`No result given for '${s}' method and invocation ID '${r.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(r.invocationId,"Client didn't provide a result.",null)));return}const c=a.slice(),u=!!r.invocationId;let h,p,m;for(const g of c)try{const y=h;h=await g.apply(this,r.arguments),u&&h&&y&&(this._logger.log(_e.Error,`Multiple results provided for '${s}'. Sending error to server.`),m=this._createCompletionMessage(r.invocationId,"Client provided multiple results.",null)),p=void 0}catch(y){p=y,this._logger.log(_e.Error,`A callback for the method '${s}' threw error '${y}'.`)}m?await this._sendWithProtocol(m):u?(p?m=this._createCompletionMessage(r.invocationId,`${p}`,null):h!==void 0?m=this._createCompletionMessage(r.invocationId,null,h):(this._logger.log(_e.Warning,`No result given for '${s}' method and invocation ID '${r.invocationId}'.`),m=this._createCompletionMessage(r.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(m)):h&&this._logger.log(_e.Error,`Result given for '${s}' method but server is not expecting a result.`)}_connectionClosed(r){this._logger.log(_e.Debug,`HubConnection.connectionClosed(${r}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||r||new Yn("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(r||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===bt.Disconnecting?this._completeClose(r):this._connectionState===bt.Connected&&this._reconnectPolicy?this._reconnect(r):this._connectionState===bt.Connected&&this._completeClose(r)}_completeClose(r){if(this._connectionStarted){this._connectionState=bt.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(r??new Error("Connection closed.")),this._messageBuffer=void 0),jt.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(s=>s.apply(this,[r]))}catch(s){this._logger.log(_e.Error,`An onclose callback called with error '${r}' threw error '${s}'.`)}}}async _reconnect(r){const s=Date.now();let a=0,c=r!==void 0?r:new Error("Attempting to reconnect due to a unknown error."),u=this._getNextRetryDelay(a,0,c);if(u===null){this._logger.log(_e.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(r);return}if(this._connectionState=bt.Reconnecting,r?this._logger.log(_e.Information,`Connection reconnecting because of error '${r}'.`):this._logger.log(_e.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(h=>h.apply(this,[r]))}catch(h){this._logger.log(_e.Error,`An onreconnecting callback called with error '${r}' threw error '${h}'.`)}if(this._connectionState!==bt.Reconnecting){this._logger.log(_e.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;u!==null;){if(this._logger.log(_e.Information,`Reconnect attempt number ${a+1} will start in ${u} ms.`),await new Promise(h=>{this._reconnectDelayHandle=setTimeout(h,u)}),this._reconnectDelayHandle=void 0,this._connectionState!==bt.Reconnecting){this._logger.log(_e.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=bt.Connected,this._logger.log(_e.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(h=>h.apply(this,[this.connection.connectionId]))}catch(h){this._logger.log(_e.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${h}'.`)}return}catch(h){if(this._logger.log(_e.Information,`Reconnect attempt failed because of error '${h}'.`),this._connectionState!==bt.Reconnecting){this._logger.log(_e.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===bt.Disconnecting&&this._completeClose();return}a++,c=h instanceof Error?h:new Error(h.toString()),u=this._getNextRetryDelay(a,Date.now()-s,c)}}this._logger.log(_e.Information,`Reconnect retries have been exhausted after ${Date.now()-s} ms and ${a} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(r,s,a){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:s,previousRetryCount:r,retryReason:a})}catch(c){return this._logger.log(_e.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${r}, ${s}) threw error '${c}'.`),null}}_cancelCallbacksWithError(r){const s=this._callbacks;this._callbacks={},Object.keys(s).forEach(a=>{const c=s[a];try{c(null,r)}catch(u){this._logger.log(_e.Error,`Stream 'error' callback called with '${r}' threw error: ${_d(u)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(r,s,a,c){if(a)return c.length!==0?{target:r,arguments:s,streamIds:c,type:Ke.Invocation}:{target:r,arguments:s,type:Ke.Invocation};{const u=this._invocationId;return this._invocationId++,c.length!==0?{target:r,arguments:s,invocationId:u.toString(),streamIds:c,type:Ke.Invocation}:{target:r,arguments:s,invocationId:u.toString(),type:Ke.Invocation}}}_launchStreams(r,s){if(r.length!==0){s||(s=Promise.resolve());for(const a in r)r[a].subscribe({complete:()=>{s=s.then(()=>this._sendWithProtocol(this._createCompletionMessage(a)))},error:c=>{let u;c instanceof Error?u=c.message:c&&c.toString?u=c.toString():u="Unknown error",s=s.then(()=>this._sendWithProtocol(this._createCompletionMessage(a,u)))},next:c=>{s=s.then(()=>this._sendWithProtocol(this._createStreamItemMessage(a,c)))}})}}_replaceStreamingParams(r){const s=[],a=[];for(let c=0;c<r.length;c++){const u=r[c];if(this._isObservable(u)){const h=this._invocationId;this._invocationId++,s[h]=u,a.push(h.toString()),r.splice(c,1)}}return[s,a]}_isObservable(r){return r&&r.subscribe&&typeof r.subscribe=="function"}_createStreamInvocation(r,s,a){const c=this._invocationId;return this._invocationId++,a.length!==0?{target:r,arguments:s,invocationId:c.toString(),streamIds:a,type:Ke.StreamInvocation}:{target:r,arguments:s,invocationId:c.toString(),type:Ke.StreamInvocation}}_createCancelInvocation(r){return{invocationId:r,type:Ke.CancelInvocation}}_createStreamItemMessage(r,s){return{invocationId:r,item:s,type:Ke.StreamItem}}_createCompletionMessage(r,s,a){return s?{error:s,invocationId:r,type:Ke.Completion}:{invocationId:r,result:a,type:Ke.Completion}}_createCloseMessage(){return{type:Ke.Close}}async _trySendPingMessage(){try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}}const WR=[0,2e3,1e4,3e4,null];class Iy{constructor(r){this._retryDelays=r!==void 0?[...r,null]:WR}nextRetryDelayInMilliseconds(r){return this._retryDelays[r.previousRetryCount]}}class ki{}ki.Authorization="Authorization";ki.Cookie="Cookie";class GR extends Wl{constructor(r,s){super(),this._innerClient=r,this._accessTokenFactory=s}async send(r){let s=!0;this._accessTokenFactory&&(!this._accessToken||r.url&&r.url.indexOf("/negotiate?")>0)&&(s=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(r);const a=await this._innerClient.send(r);return s&&a.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(r),await this._innerClient.send(r)):a}_setAuthorizationHeader(r){r.headers||(r.headers={}),this._accessToken?r.headers[ki.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&r.headers[ki.Authorization]&&delete r.headers[ki.Authorization]}getCookieString(r){return this._innerClient.getCookieString(r)}}var It;(function(n){n[n.None=0]="None",n[n.WebSockets=1]="WebSockets",n[n.ServerSentEvents=2]="ServerSentEvents",n[n.LongPolling=4]="LongPolling"})(It||(It={}));var rn;(function(n){n[n.Text=1]="Text",n[n.Binary=2]="Binary"})(rn||(rn={}));let YR=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class Uy{get pollAborted(){return this._pollAbort.aborted}constructor(r,s,a){this._httpClient=r,this._logger=s,this._pollAbort=new YR,this._options=a,this._running=!1,this.onreceive=null,this.onclose=null}async connect(r,s){if(Ut.isRequired(r,"url"),Ut.isRequired(s,"transferFormat"),Ut.isIn(s,rn,"transferFormat"),this._url=r,this._logger.log(_e.Trace,"(LongPolling transport) Connecting."),s===rn.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[a,c]=Ss(),u={[a]:c,...this._options.headers},h={abortSignal:this._pollAbort.signal,headers:u,timeout:1e5,withCredentials:this._options.withCredentials};s===rn.Binary&&(h.responseType="arraybuffer");const p=`${r}&_=${Date.now()}`;this._logger.log(_e.Trace,`(LongPolling transport) polling: ${p}.`);const m=await this._httpClient.get(p,h);m.statusCode!==200?(this._logger.log(_e.Error,`(LongPolling transport) Unexpected response code: ${m.statusCode}.`),this._closeError=new Ei(m.statusText||"",m.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,h)}async _poll(r,s){try{for(;this._running;)try{const a=`${r}&_=${Date.now()}`;this._logger.log(_e.Trace,`(LongPolling transport) polling: ${a}.`);const c=await this._httpClient.get(a,s);c.statusCode===204?(this._logger.log(_e.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):c.statusCode!==200?(this._logger.log(_e.Error,`(LongPolling transport) Unexpected response code: ${c.statusCode}.`),this._closeError=new Ei(c.statusText||"",c.statusCode),this._running=!1):c.content?(this._logger.log(_e.Trace,`(LongPolling transport) data received. ${zo(c.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(c.content)):this._logger.log(_e.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(a){this._running?a instanceof Th?this._logger.log(_e.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=a,this._running=!1):this._logger.log(_e.Trace,`(LongPolling transport) Poll errored after shutdown: ${a.message}`)}}finally{this._logger.log(_e.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(r){return this._running?mv(this._logger,"LongPolling",this._httpClient,this._url,r,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(_e.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(_e.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const r={},[s,a]=Ss();r[s]=a;const c={headers:{...r,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let u;try{await this._httpClient.delete(this._url,c)}catch(h){u=h}u?u instanceof Ei&&(u.statusCode===404?this._logger.log(_e.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(_e.Trace,`(LongPolling transport) Error sending a DELETE request: ${u}`)):this._logger.log(_e.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(_e.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let r="(LongPolling transport) Firing onclose event.";this._closeError&&(r+=" Error: "+this._closeError),this._logger.log(_e.Trace,r),this.onclose(this._closeError)}}}class XR{constructor(r,s,a,c){this._httpClient=r,this._accessToken=s,this._logger=a,this._options=c,this.onreceive=null,this.onclose=null}async connect(r,s){return Ut.isRequired(r,"url"),Ut.isRequired(s,"transferFormat"),Ut.isIn(s,rn,"transferFormat"),this._logger.log(_e.Trace,"(SSE transport) Connecting."),this._url=r,this._accessToken&&(r+=(r.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((a,c)=>{let u=!1;if(s!==rn.Text){c(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let h;if(jt.isBrowser||jt.isWebWorker)h=new this._options.EventSource(r,{withCredentials:this._options.withCredentials});else{const p=this._httpClient.getCookieString(r),m={};m.Cookie=p;const[g,y]=Ss();m[g]=y,h=new this._options.EventSource(r,{withCredentials:this._options.withCredentials,headers:{...m,...this._options.headers}})}try{h.onmessage=p=>{if(this.onreceive)try{this._logger.log(_e.Trace,`(SSE transport) data received. ${zo(p.data,this._options.logMessageContent)}.`),this.onreceive(p.data)}catch(m){this._close(m);return}},h.onerror=p=>{u?this._close():c(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},h.onopen=()=>{this._logger.log(_e.Information,`SSE connected to ${this._url}`),this._eventSource=h,u=!0,a()}}catch(p){c(p);return}})}async send(r){return this._eventSource?mv(this._logger,"SSE",this._httpClient,this._url,r,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(r){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(r))}}class JR{constructor(r,s,a,c,u,h){this._logger=a,this._accessTokenFactory=s,this._logMessageContent=c,this._webSocketConstructor=u,this._httpClient=r,this.onreceive=null,this.onclose=null,this._headers=h}async connect(r,s){Ut.isRequired(r,"url"),Ut.isRequired(s,"transferFormat"),Ut.isIn(s,rn,"transferFormat"),this._logger.log(_e.Trace,"(WebSockets transport) Connecting.");let a;return this._accessTokenFactory&&(a=await this._accessTokenFactory()),new Promise((c,u)=>{r=r.replace(/^http/,"ws");let h;const p=this._httpClient.getCookieString(r);let m=!1;if(jt.isNode||jt.isReactNative){const g={},[y,k]=Ss();g[y]=k,a&&(g[ki.Authorization]=`Bearer ${a}`),p&&(g[ki.Cookie]=p),h=new this._webSocketConstructor(r,void 0,{headers:{...g,...this._headers}})}else a&&(r+=(r.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(a)}`);h||(h=new this._webSocketConstructor(r)),s===rn.Binary&&(h.binaryType="arraybuffer"),h.onopen=g=>{this._logger.log(_e.Information,`WebSocket connected to ${r}.`),this._webSocket=h,m=!0,c()},h.onerror=g=>{let y=null;typeof ErrorEvent<"u"&&g instanceof ErrorEvent?y=g.error:y="There was an error with the transport",this._logger.log(_e.Information,`(WebSockets transport) ${y}.`)},h.onmessage=g=>{if(this._logger.log(_e.Trace,`(WebSockets transport) data received. ${zo(g.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(g.data)}catch(y){this._close(y);return}},h.onclose=g=>{if(m)this._close(g);else{let y=null;typeof ErrorEvent<"u"&&g instanceof ErrorEvent?y=g.error:y="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",u(new Error(y))}}})}send(r){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(_e.Trace,`(WebSockets transport) sending data. ${zo(r,this._logMessageContent)}.`),this._webSocket.send(r),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(r){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(_e.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(r)&&(r.wasClean===!1||r.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${r.code} (${r.reason||"no reason given"}).`)):r instanceof Error?this.onclose(r):this.onclose())}_isCloseEvent(r){return r&&typeof r.wasClean=="boolean"&&typeof r.code=="number"}}const zy=100;class KR{constructor(r,s={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,Ut.isRequired(r,"url"),this._logger=AR(s.logger),this.baseUrl=this._resolveUrl(r),s=s||{},s.logMessageContent=s.logMessageContent===void 0?!1:s.logMessageContent,typeof s.withCredentials=="boolean"||s.withCredentials===void 0)s.withCredentials=s.withCredentials===void 0?!0:s.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");s.timeout=s.timeout===void 0?100*1e3:s.timeout;let a=null,c=null;if(jt.isNode&&typeof require<"u"){const u=typeof __webpack_require__=="function"?__non_webpack_require__:require;a=u("ws"),c=u("eventsource")}!jt.isNode&&typeof WebSocket<"u"&&!s.WebSocket?s.WebSocket=WebSocket:jt.isNode&&!s.WebSocket&&a&&(s.WebSocket=a),!jt.isNode&&typeof EventSource<"u"&&!s.EventSource?s.EventSource=EventSource:jt.isNode&&!s.EventSource&&typeof c<"u"&&(s.EventSource=c),this._httpClient=new GR(s.httpClient||new zR(this._logger),s.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=s,this.onreceive=null,this.onclose=null}async start(r){if(r=r||rn.Binary,Ut.isIn(r,rn,"transferFormat"),this._logger.log(_e.Debug,`Starting connection with transfer format '${rn[r]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(r),await this._startInternalPromise,this._connectionState==="Disconnecting"){const s="Failed to start the HttpConnection before stop() was called.";return this._logger.log(_e.Error,s),await this._stopPromise,Promise.reject(new Yn(s))}else if(this._connectionState!=="Connected"){const s="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(_e.Error,s),Promise.reject(new Yn(s))}this._connectionStarted=!0}send(r){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new Eh(this.transport)),this._sendQueue.send(r))}async stop(r){if(this._connectionState==="Disconnected")return this._logger.log(_e.Debug,`Call to HttpConnection.stop(${r}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(_e.Debug,`Call to HttpConnection.stop(${r}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(s=>{this._stopPromiseResolver=s}),await this._stopInternal(r),await this._stopPromise}async _stopInternal(r){this._stopError=r;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(s){this._logger.log(_e.Error,`HttpConnection.transport.stop() threw error '${s}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(_e.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(r){let s=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===It.WebSockets)this.transport=this._constructTransport(It.WebSockets),await this._startTransport(s,r);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let a=null,c=0;do{if(a=await this._getNegotiationResponse(s),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new Yn("The connection was stopped during negotiation.");if(a.error)throw new Error(a.error);if(a.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(a.url&&(s=a.url),a.accessToken){const u=a.accessToken;this._accessTokenFactory=()=>u,this._httpClient._accessToken=u,this._httpClient._accessTokenFactory=void 0}c++}while(a.url&&c<zy);if(c===zy&&a.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(s,this._options.transport,a,r)}this.transport instanceof Uy&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(_e.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(a){return this._logger.log(_e.Error,"Failed to start the connection: "+a),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(a)}}async _getNegotiationResponse(r){const s={},[a,c]=Ss();s[a]=c;const u=this._resolveNegotiateUrl(r);this._logger.log(_e.Debug,`Sending negotiation request: ${u}.`);try{const h=await this._httpClient.post(u,{content:"",headers:{...s,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(h.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${h.statusCode}'`));const p=JSON.parse(h.content);return(!p.negotiateVersion||p.negotiateVersion<1)&&(p.connectionToken=p.connectionId),p.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new Oy("Client didn't negotiate Stateful Reconnect but the server did.")):p}catch(h){let p="Failed to complete negotiation with the server: "+h;return h instanceof Ei&&h.statusCode===404&&(p=p+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(_e.Error,p),Promise.reject(new Oy(p))}}_createConnectUrl(r,s){return s?r+(r.indexOf("?")===-1?"?":"&")+`id=${s}`:r}async _createTransport(r,s,a,c){let u=this._createConnectUrl(r,a.connectionToken);if(this._isITransport(s)){this._logger.log(_e.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=s,await this._startTransport(u,c),this.connectionId=a.connectionId;return}const h=[],p=a.availableTransports||[];let m=a;for(const g of p){const y=this._resolveTransportOrError(g,s,c,m?.useStatefulReconnect===!0);if(y instanceof Error)h.push(`${g.transport} failed:`),h.push(y);else if(this._isITransport(y)){if(this.transport=y,!m){try{m=await this._getNegotiationResponse(r)}catch(k){return Promise.reject(k)}u=this._createConnectUrl(r,m.connectionToken)}try{await this._startTransport(u,c),this.connectionId=m.connectionId;return}catch(k){if(this._logger.log(_e.Error,`Failed to start the transport '${g.transport}': ${k}`),m=void 0,h.push(new TR(`${g.transport} failed: ${k}`,It[g.transport])),this._connectionState!=="Connecting"){const U="Failed to select transport before stop() was called.";return this._logger.log(_e.Debug,U),Promise.reject(new Yn(U))}}}}return h.length>0?Promise.reject(new RR(`Unable to connect to the server with any of the available transports. ${h.join(" ")}`,h)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(r){switch(r){case It.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new JR(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case It.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new XR(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case It.LongPolling:return new Uy(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${r}.`)}}_startTransport(r,s){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async a=>{let c=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(r,s),await this.features.resend()}catch{c=!0}else{this._stopConnection(a);return}c&&this._stopConnection(a)}:this.transport.onclose=a=>this._stopConnection(a),this.transport.connect(r,s)}_resolveTransportOrError(r,s,a,c){const u=It[r.transport];if(u==null)return this._logger.log(_e.Debug,`Skipping transport '${r.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${r.transport}' because it is not supported by this client.`);if(QR(s,u))if(r.transferFormats.map(p=>rn[p]).indexOf(a)>=0){if(u===It.WebSockets&&!this._options.WebSocket||u===It.ServerSentEvents&&!this._options.EventSource)return this._logger.log(_e.Debug,`Skipping transport '${It[u]}' because it is not supported in your environment.'`),new CR(`'${It[u]}' is not supported in your environment.`,u);this._logger.log(_e.Debug,`Selecting transport '${It[u]}'.`);try{return this.features.reconnect=u===It.WebSockets?c:void 0,this._constructTransport(u)}catch(p){return p}}else return this._logger.log(_e.Debug,`Skipping transport '${It[u]}' because it does not support the requested transfer format '${rn[a]}'.`),new Error(`'${It[u]}' does not support ${rn[a]}.`);else return this._logger.log(_e.Debug,`Skipping transport '${It[u]}' because it was disabled by the client.`),new jR(`'${It[u]}' is disabled by the client.`,u)}_isITransport(r){return r&&typeof r=="object"&&"connect"in r}_stopConnection(r){if(this._logger.log(_e.Debug,`HttpConnection.stopConnection(${r}) called while in state ${this._connectionState}.`),this.transport=void 0,r=this._stopError||r,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(_e.Debug,`Call to HttpConnection.stopConnection(${r}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(_e.Warning,`Call to HttpConnection.stopConnection(${r}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${r}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),r?this._logger.log(_e.Error,`Connection disconnected with error '${r}'.`):this._logger.log(_e.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(s=>{this._logger.log(_e.Error,`TransportSendQueue.stop() threw error '${s}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(r)}catch(s){this._logger.log(_e.Error,`HttpConnection.onclose(${r}) threw error '${s}'.`)}}}_resolveUrl(r){if(r.lastIndexOf("https://",0)===0||r.lastIndexOf("http://",0)===0)return r;if(!jt.isBrowser)throw new Error(`Cannot resolve '${r}'.`);const s=window.document.createElement("a");return s.href=r,this._logger.log(_e.Information,`Normalizing '${r}' to '${s.href}'.`),s.href}_resolveNegotiateUrl(r){const s=new URL(r);s.pathname.endsWith("/")?s.pathname+="negotiate":s.pathname+="/negotiate";const a=new URLSearchParams(s.searchParams);return a.has("negotiateVersion")||a.append("negotiateVersion",this._negotiateVersion.toString()),a.has("useStatefulReconnect")?a.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&a.append("useStatefulReconnect","true"),s.search=a.toString(),s.toString()}}function QR(n,r){return!n||(r&n)!==0}class Eh{constructor(r){this._transport=r,this._buffer=[],this._executing=!0,this._sendBufferedData=new ul,this._transportResult=new ul,this._sendLoopPromise=this._sendLoop()}send(r){return this._bufferData(r),this._transportResult||(this._transportResult=new ul),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(r){if(this._buffer.length&&typeof this._buffer[0]!=typeof r)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof r}`);this._buffer.push(r),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new ul;const r=this._transportResult;this._transportResult=void 0;const s=typeof this._buffer[0]=="string"?this._buffer.join(""):Eh._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(s),r.resolve()}catch(a){r.reject(a)}}}static _concatBuffers(r){const s=r.map(u=>u.byteLength).reduce((u,h)=>u+h),a=new Uint8Array(s);let c=0;for(const u of r)a.set(new Uint8Array(u),c),c+=u.byteLength;return a.buffer}}class ul{constructor(){this.promise=new Promise((r,s)=>[this._resolver,this._rejecter]=[r,s])}resolve(){this._resolver()}reject(r){this._rejecter(r)}}const ZR="json";class e2{constructor(){this.name=ZR,this.version=2,this.transferFormat=rn.Text}parseMessages(r,s){if(typeof r!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!r)return[];s===null&&(s=Uo.instance);const a=En.parse(r),c=[];for(const u of a){const h=JSON.parse(u);if(typeof h.type!="number")throw new Error("Invalid payload.");switch(h.type){case Ke.Invocation:this._isInvocationMessage(h);break;case Ke.StreamItem:this._isStreamItemMessage(h);break;case Ke.Completion:this._isCompletionMessage(h);break;case Ke.Ping:break;case Ke.Close:break;case Ke.Ack:this._isAckMessage(h);break;case Ke.Sequence:this._isSequenceMessage(h);break;default:s.log(_e.Information,"Unknown message type '"+h.type+"' ignored.");continue}c.push(h)}return c}writeMessage(r){return En.write(JSON.stringify(r))}_isInvocationMessage(r){this._assertNotEmptyString(r.target,"Invalid payload for Invocation message."),r.invocationId!==void 0&&this._assertNotEmptyString(r.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(r){if(this._assertNotEmptyString(r.invocationId,"Invalid payload for StreamItem message."),r.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(r){if(r.result&&r.error)throw new Error("Invalid payload for Completion message.");!r.result&&r.error&&this._assertNotEmptyString(r.error,"Invalid payload for Completion message."),this._assertNotEmptyString(r.invocationId,"Invalid payload for Completion message.")}_isAckMessage(r){if(typeof r.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(r){if(typeof r.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(r,s){if(typeof r!="string"||r==="")throw new Error(s)}}const t2={trace:_e.Trace,debug:_e.Debug,info:_e.Information,information:_e.Information,warn:_e.Warning,warning:_e.Warning,error:_e.Error,critical:_e.Critical,none:_e.None};function n2(n){const r=t2[n.toLowerCase()];if(typeof r<"u")return r;throw new Error(`Unknown log level: ${n}`)}class r2{configureLogging(r){if(Ut.isRequired(r,"logging"),i2(r))this.logger=r;else if(typeof r=="string"){const s=n2(r);this.logger=new Ml(s)}else this.logger=new Ml(r);return this}withUrl(r,s){return Ut.isRequired(r,"url"),Ut.isNotEmpty(r,"url"),this.url=r,typeof s=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...s}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:s},this}withHubProtocol(r){return Ut.isRequired(r,"protocol"),this.protocol=r,this}withAutomaticReconnect(r){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return r?Array.isArray(r)?this.reconnectPolicy=new Iy(r):this.reconnectPolicy=r:this.reconnectPolicy=new Iy,this}withServerTimeout(r){return Ut.isRequired(r,"milliseconds"),this._serverTimeoutInMilliseconds=r,this}withKeepAliveInterval(r){return Ut.isRequired(r,"milliseconds"),this._keepAliveIntervalInMilliseconds=r,this}withStatefulReconnect(r){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=r?.bufferSize,this}build(){const r=this.httpConnectionOptions||{};if(r.logger===void 0&&(r.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const s=new KR(this.url,r);return Rh.create(s,this.logger||Uo.instance,this.protocol||new e2,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function i2(n){return n.log!==void 0}class s2{constructor(){this.connection=null,this.isConnected=!1}async connect(){if(this.isConnected&&this.connection?.state===bt.Connected)return;if(this.connection)try{await this.connection.stop()}catch(s){console.log("Error stopping existing connection:",s)}const r="https://festive-guest-api.azurewebsites.net/chathub";this.connection=new r2().withUrl(r,{skipNegotiation:!0,transport:It.WebSockets,accessTokenFactory:()=>{const s=localStorage.getItem("user");return s?JSON.parse(s).token:null}}).withAutomaticReconnect().build(),this.connection.onreconnected(()=>{this.isConnected=!0}),this.connection.onreconnecting(()=>{this.isConnected=!1}),this.connection.onclose(()=>{this.isConnected=!1});try{await this.connection.start(),this.isConnected=!0,console.log("SignalR Connected")}catch(s){throw console.error("SignalR Connection Error:",s),this.isConnected=!1,s}}async joinChat(r){this.isConnected||await this.connect();try{await this.connection.invoke("JoinChat",r)}catch(s){console.error("Error joining chat:",s)}}async sendMessage(r,s){this.isConnected||await this.connect();try{await this.connection.invoke("SendMessage",r,s)}catch(a){throw console.error("Error sending message:",a),a}}onReceiveMessage(r){this.connection&&this.connection.on("ReceiveMessage",r)}offReceiveMessage(r){this.connection&&this.connection.off("ReceiveMessage",r)}}const Ao=new s2,o2={sasCache:new Map,async getSasUrl(n,r="logos"){const s=`${r}/${n}`,a=this.sasCache.get(s);if(a&&a.expiresAt>Date.now())return a.url;try{const u=(await qe.get("storage/get-sas-url",{params:{fileName:n,container:r}})).data.url;return this.sasCache.set(s,{url:u,expiresAt:Date.now()+3e3*1e3}),u}catch(c){return console.warn("SAS URL fetch failed, using direct blob URL:",c.message),`https://festivegueststorage.blob.core.windows.net/${r}/${n}`}},clearCache(){this.sasCache.clear()},needsSasToken(n){return n&&n.includes("blob.core.windows.net")&&!n.includes("?")}},or=({src:n,alt:r,className:s,style:a,fallbackText:c="No Image",userId:u=null})=>{const[h,p]=R.useState(null),[m,g]=R.useState(!0),[y,k]=R.useState(!1),U=`data:image/svg+xml;base64,${btoa(`
    <svg width="150" height="150" viewBox="0 0 150 150" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="150" height="150" rx="8" fill="#f1f5f9"/>
      <text x="75" y="80" text-anchor="middle" fill="#64748b" font-family="Arial" font-size="14">${c.replace(/[^\x00-\x7F]/g,"User")}</text>
    </svg>
  `)}`;R.useEffect(()=>{(async()=>{if(!n||y){p(U),g(!1);return}try{if(g(!0),n.includes("blob.core.windows.net")&&!n.includes("?")){const q=n.split("/"),z=q[q.length-1],Q=q[q.length-2]||"logos",Y=await o2.getSasUrl(z,Q);p(Y||U)}else p(n)}catch(q){console.error("Error loading image with SAS:",q),p(U),k(!0)}finally{g(!1)}})()},[n,y,U]);const V=()=>{y||(k(!0),p(U),g(!1))};return m?i.jsx("div",{className:s,style:{...a,display:"flex",alignItems:"center",justifyContent:"center",background:"#f1f5f9",color:"#64748b",fontSize:"12px"},children:"Loading..."}):i.jsx("img",{src:h,alt:r,className:s,style:a,onError:V})},Gl=({recipientId:n,recipientName:r,recipientImageUrl:s,onClose:a})=>{const[c,u]=R.useState([]),[h,p]=R.useState(""),[m,g]=R.useState(!1),[y,k]=R.useState(!1),[U,V]=R.useState(!0),[I,q]=R.useState(null),z=localStorage.getItem("userId")||JSON.parse(localStorage.getItem("user")||"{}").userId,Q=R.useRef(null),Y=R.useRef(null);R.useEffect(()=>(console.log("ChatWidget mounted with:",{recipientId:n,recipientName:r}),fe(),()=>{console.log("ChatWidget unmounting"),Y.current&&Ao.offReceiveMessage(Y.current)}),[n]);const fe=async()=>{try{console.log("Initializing chat..."),V(!0),q(null);const K=setTimeout(()=>{y||(console.log("Using fallback connection state"),k(!0))},2e3);try{await Ao.connect(),await Ao.joinChat(n),clearTimeout(K),console.log("Chat service connected successfully")}catch(ie){console.warn("Chat service connection failed, using fallback:",ie),clearTimeout(K)}Y.current=ie=>{console.log("Received message:",ie),ie.senderId===n&&u(ae=>ae.find(Ce=>Ce.id===ie.id)?ae:[...ae,{id:ie.id,sender:"Recipient",text:ie.message,timestamp:new Date(ie.timestamp),status:"delivered"}])},Ao.onReceiveMessage(Y.current);try{const ie=await qe.get(`chat/messages/${n}`);if(ie.data&&ie.data.length>0){const ae=ie.data.map(Ce=>({id:Ce.id,sender:Ce.senderId===z?"Me":"Recipient",text:Ce.message,timestamp:new Date(Ce.timestamp),status:Ce.status?.toLowerCase()||"sent"}));u(ae),console.log("Loaded message history:",ae.length,"messages")}}catch(ie){console.error("Failed to load message history:",ie),q("Failed to load message history")}k(!0)}catch(K){console.error("Failed to initialize chat:",K),q("Failed to connect to chat service"),k(!0)}finally{V(!1)}};R.useEffect(()=>{Q.current?.scrollIntoView({behavior:"smooth"})},[c]);const le=async K=>{if(K.preventDefault(),!!h.trim())try{g(!0);const ie=h.trim();p(""),console.log("Sending message:",ie,"to:",n);const ae={id:Date.now(),sender:"Me",text:ie,timestamp:new Date,status:"sending"};u(Ce=>[...Ce,ae]);try{await Ao.sendMessage(n,ie),console.log("Message sent successfully via SignalR"),u(Ce=>Ce.map(De=>De.id===ae.id?{...De,status:"sent"}:De))}catch(Ce){console.error("Failed to send message via chat service:",Ce);try{console.log("Attempting API fallback for message send"),await qe.post("chat/send",{recipientId:n,message:ie}),console.log("Message sent via API fallback"),u(De=>De.map(Re=>Re.id===ae.id?{...Re,status:"sent"}:Re))}catch(De){console.error("Failed to send message via API:",De),u(Re=>Re.map(ze=>ze.id===ae.id?{...ze,status:"failed"}:ze)),p(ie)}}}catch(ie){console.error("Failed to send message:",ie),p(messageText)}finally{g(!1)}};return i.jsxs("div",{className:"chat-widget",children:[i.jsxs("div",{className:"chat-header",children:[i.jsxs("div",{className:"chat-user-info",children:[i.jsx(or,{src:s,alt:r,className:"user-avatar",fallbackText:"User"}),i.jsxs("div",{children:[i.jsx("div",{className:"user-name",children:r||"Chat"}),i.jsxs("div",{className:"user-status",children:[" ",y?"Online":U?"Connecting...":"Offline"]})]})]}),i.jsx("button",{onClick:a,className:"close-btn",title:"Close chat",children:i.jsx(xh,{size:16})})]}),i.jsxs("div",{className:"chat-messages",children:[U?i.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:[i.jsx("div",{style:{marginBottom:"0.5rem"},children:""}),"Loading messages..."]}):I?i.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#ef4444"},children:[i.jsx("div",{style:{marginBottom:"0.5rem"},children:""}),I,i.jsx("button",{onClick:fe,style:{display:"block",margin:"1rem auto 0",padding:"0.5rem 1rem",background:"var(--primary)",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer"},children:"Retry"})]}):c.length===0?i.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:[i.jsx("div",{style:{marginBottom:"0.5rem"},children:""}),"Start a conversation with ",r]}):c.map((K,ie)=>i.jsxs("div",{className:`message ${K.sender==="Me"?"sent":"received"}`,children:[i.jsx("div",{className:"message-content",children:K.text}),i.jsxs("div",{style:{fontSize:"11px",color:"#65676b",marginTop:"2px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem"},children:[new Date(K.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),K.sender==="Me"&&i.jsxs("span",{className:`message-status ${K.status}`,children:[K.status==="sending"&&"",K.status==="sent"&&"",K.status==="delivered"&&"",K.status==="failed"&&""]})]})]},K.id||ie)),i.jsx("div",{ref:Q})]}),i.jsxs("form",{onSubmit:le,className:"chat-input",children:[i.jsx("input",{type:"text",value:h,onChange:K=>p(K.target.value),placeholder:"Type a message...",className:"message-input",disabled:m||U}),i.jsx("button",{type:"submit",className:"send-btn",disabled:m||!h.trim()||U,title:"Send message",children:m?i.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid white",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}):i.jsx(Io,{size:16})})]})]})},a2=()=>{const[n,r]=R.useState(null),[s,a]=R.useState(""),[c,u]=R.useState(""),h=()=>{if(!s.trim()||!c.trim()){alert("Please enter both recipient ID and name");return}console.log("Opening test chat with:",{id:s,name:c}),r({id:s.trim(),name:c.trim(),imageUrl:null})},p=()=>{console.log("Closing test chat"),r(null)};return i.jsxs("div",{style:{padding:"2rem",maxWidth:"500px",margin:"0 auto"},children:[i.jsx("h2",{children:"Chat Debug Tool"}),i.jsx("div",{style:{marginBottom:"1rem"},children:i.jsxs("label",{style:{display:"block",marginBottom:"0.5rem"},children:["Recipient ID:",i.jsx("input",{type:"text",value:s,onChange:m=>a(m.target.value),placeholder:"Enter recipient user ID",style:{width:"100%",padding:"0.5rem",border:"1px solid #ccc",borderRadius:"0.25rem",marginTop:"0.25rem"}})]})}),i.jsx("div",{style:{marginBottom:"1rem"},children:i.jsxs("label",{style:{display:"block",marginBottom:"0.5rem"},children:["Recipient Name:",i.jsx("input",{type:"text",value:c,onChange:m=>u(m.target.value),placeholder:"Enter recipient name",style:{width:"100%",padding:"0.5rem",border:"1px solid #ccc",borderRadius:"0.25rem",marginTop:"0.25rem"}})]})}),i.jsx("button",{onClick:h,style:{padding:"0.75rem 1.5rem",background:"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",marginRight:"1rem"},children:"Open Test Chat"}),i.jsx("button",{onClick:p,style:{padding:"0.75rem 1.5rem",background:"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer"},children:"Close Chat"}),n&&i.jsx("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,width:"350px",height:"500px",boxShadow:"0 10px 25px rgba(0,0,0,0.2)",borderRadius:"12px",overflow:"hidden",animation:"slideInUp 0.3s ease-out"},children:i.jsx(Gl,{recipientId:n.id,recipientName:n.name,recipientImageUrl:n.imageUrl,onClose:p})})]})},l2=({isOpen:n,onClose:r,selectedRole:s})=>{const{t:a}=Er(),c=Kn(),[u,h]=R.useState(!1),[p,m]=R.useState(null),g=()=>{if(!u)return;const U=Date.now(),V={accepted:!0,timestamp:U,role:s,userAgent:navigator.userAgent,sessionId:crypto.randomUUID()};sessionStorage.setItem("disclaimerAcceptance",JSON.stringify(V)),c(`/register?role=${s}&disclaimerAccepted=${U}`),r()},y=()=>{c("/"),r()},k=U=>{const V=U.target.checked;h(V),m(V?Date.now():null)};return n?i.jsx("div",{className:"modal-overlay",style:{zIndex:9999},children:i.jsxs("div",{className:"modal-content",style:{maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column"},children:[i.jsx("div",{className:"modal-header",style:{padding:"1.5rem",flexShrink:0},children:i.jsx("h3",{style:{color:"#1e293b",margin:0},children:a("importantDisclaimer")})}),i.jsxs("div",{className:"modal-body",style:{padding:"0 1.5rem",overflowY:"auto",flex:1},children:[i.jsx("style",{children:`
              .modal-body::-webkit-scrollbar {
                width: 4px;
              }
              .modal-body::-webkit-scrollbar-track {
                background: transparent;
              }
              .modal-body::-webkit-scrollbar-thumb {
                background: #cbd5e1;
                border-radius: 2px;
              }
              .modal-body::-webkit-scrollbar-thumb:hover {
                background: #94a3b8;
              }
            `}),i.jsx("div",{style:{padding:"1.5rem",background:"#fef3c7",border:"2px solid #f59e0b",borderRadius:"0.75rem",marginBottom:"1.5rem"},children:i.jsxs("div",{style:{color:"#92400e",fontSize:"0.95rem",lineHeight:"1.6"},children:[i.jsxs("p",{style:{margin:"0 0 1rem 0",fontWeight:"600"},children:[i.jsx("strong",{children:"Local Host Connect"})," ",a("disclaimerIntro")]}),i.jsxs("ul",{style:{margin:"0",paddingLeft:"1.5rem"},children:[i.jsx("li",{style:{marginBottom:"0.75rem"},children:a("notResponsible")}),i.jsx("li",{style:{marginBottom:"0.75rem"},children:a("noGuarantee")}),i.jsx("li",{style:{marginBottom:"0.75rem"},children:a("platformOnly")}),i.jsx("li",{style:{marginBottom:"0.75rem"},children:a("ownRisk")}),i.jsx("li",{style:{marginBottom:"0.75rem"},children:a("paymentCaution")}),i.jsx("li",{style:{marginBottom:"0.75rem"},children:a("meetPublic")}),i.jsx("li",{children:a("fullResponsibility")})]})]})}),i.jsx("div",{style:{padding:"1.5rem",background:"#f0f9ff",border:"2px solid #0ea5e9",borderRadius:"0.75rem",marginBottom:"1.5rem"},children:i.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"1rem",cursor:"pointer",fontSize:"1rem",lineHeight:"1.5"},children:[i.jsx("input",{type:"checkbox",checked:u,onChange:k,required:!0,style:{width:"20px",height:"20px",marginTop:"2px",cursor:"pointer",accentColor:"#0ea5e9"}}),i.jsxs("span",{style:{color:"#0c4a6e",fontWeight:"500"},children:[a("iAgree")," ",i.jsx("button",{type:"button",style:{background:"none",border:"none",color:"#0ea5e9",textDecoration:"underline",cursor:"pointer",padding:0,font:"inherit"},onClick:()=>window.open("/privacy-policy","_blank"),children:a("privacyPolicy")})," ",a("and")," ",i.jsx("button",{type:"button",style:{background:"none",border:"none",color:"#0ea5e9",textDecoration:"underline",cursor:"pointer",padding:0,font:"inherit"},onClick:()=>window.open("/terms-of-service","_blank"),children:a("termsOfService")}),"."]})]})})]}),i.jsxs("div",{className:"modal-footer",style:{display:"flex",gap:"1rem",justifyContent:"flex-end",padding:"1.5rem",marginBottom:"1rem",flexShrink:0},children:[i.jsx("button",{onClick:y,className:"btn btn-outline",style:{padding:"0.75rem 1.5rem"},children:a("cancel")}),i.jsx("button",{onClick:g,className:"btn btn-primary",disabled:!u,style:{padding:"0.75rem 1.5rem",opacity:u?1:.5,cursor:u?"pointer":"not-allowed"},children:a("agreeContinue")})]})]})}):null},Ly=({user:n})=>{const{t:r}=Er(),s=Kn(),[a]=wC(),[c,u]=R.useState(!1),[h,p]=R.useState("");R.useEffect(()=>{a.get("register")==="true"&&m("Guest")},[a]);const m=k=>{p(k),u(!0)};R.useEffect(()=>{const k=a.get("ref");k&&sessionStorage.setItem("pendingReferralCode",k.toUpperCase())},[a]);const g=()=>"/posts",y=()=>r("goToPosts");return i.jsxs("div",{className:"landing-page",children:[i.jsxs("section",{className:"hero",children:[i.jsxs("div",{className:"hero-content",children:[i.jsx("h1",{className:"hero-title",children:r("connectWithLocalHosts")}),i.jsx("p",{className:"hero-subtitle",children:r("experienceAuthentic")}),i.jsx("div",{className:"hero-buttons",children:n?i.jsx("button",{className:"btn btn-primary",onClick:()=>s(g()),children:y()}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"btn btn-primary",onClick:()=>m("Guest"),children:r("joinAsGuest")}),i.jsx("button",{className:"btn btn-secondary",onClick:()=>m("Host"),children:r("joinAsHost")})]})})]}),i.jsx("div",{className:"hero-image",children:i.jsxs("div",{className:"festival-card",children:[i.jsxs("h3",{children:[" ",r("travelConnect")]}),i.jsx("p",{children:r("stayWithLocals")}),i.jsx("br",{}),i.jsx("p",{children:" Safely explore new places"}),i.jsx("p",{children:" Connect with trusted hosts"}),i.jsx("p",{children:" Discover hidden gems"})]})})]}),i.jsx("section",{className:"features",children:i.jsxs("div",{className:"container",children:[i.jsx("h2",{children:"Why Choose Local Host Connect?"}),i.jsxs("div",{className:"features-grid",children:[i.jsxs("div",{className:"feature-card",children:[i.jsx("div",{className:"feature-icon",children:""}),i.jsx("h3",{children:"Local Accommodation"}),i.jsx("p",{children:"Stay with friendly hosts who provide comfortable accommodation and local insights"})]}),i.jsxs("div",{className:"feature-card",children:[i.jsx("div",{className:"feature-icon",children:""}),i.jsx("h3",{children:"Local Experiences"}),i.jsx("p",{children:"Discover hidden gems, local attractions, and authentic experiences with insider knowledge"})]}),i.jsxs("div",{className:"feature-card",children:[i.jsx("div",{className:"feature-icon",children:""}),i.jsx("h3",{children:"Cultural Exchange"}),i.jsx("p",{children:"Connect with locals and fellow travellers, learn about local customs and traditions"})]}),i.jsxs("div",{className:"feature-card",children:[i.jsx("div",{className:"feature-icon",children:""}),i.jsx("h3",{children:"Authentic Cuisine"}),i.jsx("p",{children:"Enjoy homemade local food and discover regional specialties you won't find in restaurants"})]})]})]})}),i.jsx("section",{className:"testimonials",children:i.jsxs("div",{className:"container",children:[i.jsx("h2",{children:"Perfect for Every Type of Travel"}),i.jsxs("div",{className:"travel-types-grid",children:[i.jsxs("div",{className:"travel-card",children:[i.jsx("div",{className:"feature-icon",children:""}),i.jsx("h3",{children:"Business & Work"}),i.jsx("p",{children:"Comfortable stays for work trips with local networking opportunities"})]}),i.jsxs("div",{className:"travel-card",children:[i.jsx("div",{className:"feature-icon",children:""}),i.jsx("h3",{children:"Adventure & Leisure"}),i.jsx("p",{children:"Explore new destinations with insider tips from local hosts"})]}),i.jsxs("div",{className:"travel-card",children:[i.jsx("div",{className:"feature-icon",children:""}),i.jsx("h3",{children:"Festivals & Events"}),i.jsx("p",{children:"Experience authentic celebrations during Diwali, Pongal, and local festivals"})]}),i.jsxs("div",{className:"travel-card",children:[i.jsx("div",{className:"feature-icon",children:""}),i.jsx("h3",{children:"Education & Research"}),i.jsx("p",{children:"Perfect for students, researchers, and cultural learning experiences"})]}),i.jsxs("div",{className:"travel-card",children:[i.jsx("div",{className:"feature-icon",children:""}),i.jsx("h3",{children:"Family Visits"}),i.jsx("p",{children:"Extended family stays and reunions in different cities"})]}),i.jsxs("div",{className:"travel-card",children:[i.jsx("div",{className:"feature-icon",children:""}),i.jsx("h3",{children:"Cultural Exchange"}),i.jsx("p",{children:"Immerse yourself in local traditions and make lasting connections"})]})]})]})}),i.jsx("section",{className:"how-it-works",children:i.jsxs("div",{className:"container",children:[i.jsx("h2",{children:"How It Works"}),i.jsxs("div",{className:"steps",children:[i.jsxs("div",{className:"step",children:[i.jsx("div",{className:"step-number",children:"1"}),i.jsx("h3",{children:"Register"}),i.jsx("p",{children:"Sign up as a Guest or Host for free"})]}),i.jsxs("div",{className:"step",children:[i.jsx("div",{className:"step-number",children:"2"}),i.jsx("h3",{children:"Connect"}),i.jsx("p",{children:"Browse profiles and connect with hosts/guests in your destination"})]}),i.jsxs("div",{className:"step",children:[i.jsx("div",{className:"step-number",children:"3"}),i.jsx("h3",{children:"Experience"}),i.jsx("p",{children:"Enjoy authentic local experiences and create lasting memories"})]})]})]})}),i.jsx("section",{className:"testimonials",children:i.jsxs("div",{className:"container",children:[i.jsx("h2",{children:"What Our Users Say"}),i.jsxs("div",{className:"testimonials-compact-grid",children:[i.jsxs("div",{className:"testimonial-compact",children:[i.jsx("p",{children:'"Amazing experience staying with a local family in Rajahmundry! They showed me places I never would have found on my own."'}),i.jsx("div",{className:"testimonial-author",children:"- Priya, Hyderabad"})]}),i.jsxs("div",{className:"testimonial-compact",children:[i.jsx("p",{children:`"Hosting travellers has been so rewarding. I've made friends from all over India and learned so much about different cultures."`}),i.jsx("div",{className:"testimonial-author",children:"- Ravi, Kakinada"})]}),i.jsxs("div",{className:"testimonial-compact",children:[i.jsx("p",{children:'"Perfect for my business trips to Chennai. My host helped me navigate the city and even introduced me to local business contacts."'}),i.jsx("div",{className:"testimonial-author",children:"- Amit, Mumbai"})]}),i.jsxs("div",{className:"testimonial-compact",children:[i.jsx("p",{children:'"As a student researching folk traditions, staying with local families gave me insights no textbook could provide."'}),i.jsx("div",{className:"testimonial-author",children:"- Meera, Delhi"})]})]})]})}),i.jsx("section",{className:"features",children:i.jsxs("div",{className:"container",children:[i.jsx("h2",{children:"Your Safety & Trust is Our Priority"}),i.jsxs("div",{className:"features-grid",children:[i.jsxs("div",{className:"feature-card",children:[i.jsx("div",{className:"feature-icon",children:""}),i.jsx("h3",{children:"Profile Registration"}),i.jsx("p",{children:"All users create detailed profiles with personal information for transparency and trust"})]}),i.jsxs("div",{className:"feature-card",children:[i.jsx("div",{className:"feature-icon",children:""}),i.jsx("h3",{children:"Review System"}),i.jsx("p",{children:"Read genuine reviews from previous guests and hosts to make informed decisions"})]}),i.jsxs("div",{className:"feature-card",children:[i.jsx("div",{className:"feature-icon",children:""}),i.jsx("h3",{children:"Secure Messaging"}),i.jsx("p",{children:"Connect with hosts and guests through our secure in-app messaging system"})]}),i.jsxs("div",{className:"feature-card",children:[i.jsx("div",{className:"feature-icon",children:""}),i.jsx("h3",{children:"24/7 Support"}),i.jsx("p",{children:"Our support team is available round the clock to help with any issues or concerns"})]})]})]})}),i.jsx("section",{className:"how-it-works",children:i.jsxs("div",{className:"container",children:[i.jsx("h2",{children:"Benefits of Becoming a Host"}),i.jsxs("div",{className:"steps",children:[i.jsxs("div",{className:"step",children:[i.jsx("div",{className:"step-number",children:""}),i.jsx("h3",{children:"Earn Extra Income"}),i.jsx("p",{children:"Generate additional revenue by hosting travelers in your spare room"})]}),i.jsxs("div",{className:"step",children:[i.jsx("div",{className:"step-number",children:""}),i.jsx("h3",{children:"Meet New People"}),i.jsx("p",{children:"Connect with travellers from different cultures and backgrounds"})]}),i.jsxs("div",{className:"step",children:[i.jsx("div",{className:"step-number",children:""}),i.jsx("h3",{children:"Share Your Culture"}),i.jsx("p",{children:"Showcase your local traditions, food, and hidden gems to visitors"})]})]})]})}),i.jsx("section",{className:"features",children:i.jsxs("div",{className:"container",children:[i.jsx("h2",{children:" Safety Guidelines - Please Read Before Meeting"}),i.jsxs("div",{className:"safety-grid",children:[i.jsxs("div",{className:"safety-card",children:[i.jsx("div",{className:"feature-icon",children:""}),i.jsx("h3",{children:"Share Your Plans"}),i.jsx("p",{children:"Always inform family/friends about your travel plans, host details, and expected return time"})]}),i.jsxs("div",{className:"safety-card",children:[i.jsx("div",{className:"feature-icon",children:""}),i.jsx("h3",{children:"Meet in Public First"}),i.jsx("p",{children:"Arrange initial meetings in public places like cafes or restaurants before going to private locations"})]}),i.jsxs("div",{className:"safety-card",children:[i.jsx("div",{className:"feature-icon",children:""}),i.jsx("h3",{children:"Video Call Before Meeting"}),i.jsx("p",{children:"Have a video conversation to verify identity and get comfortable before meeting in person"})]}),i.jsxs("div",{className:"safety-card",children:[i.jsx("div",{className:"feature-icon",children:""}),i.jsx("h3",{children:"Keep Emergency Contacts"}),i.jsx("p",{children:"Save local emergency numbers and keep your phone charged. Share live location with trusted contacts"})]}),i.jsxs("div",{className:"safety-card",children:[i.jsx("div",{className:"feature-icon",children:""}),i.jsx("h3",{children:"Trust Your Instincts"}),i.jsx("p",{children:"If something feels wrong, don't hesitate to leave. Your safety is more important than being polite"})]}),i.jsxs("div",{className:"safety-card",children:[i.jsx("div",{className:"feature-icon",children:""}),i.jsx("h3",{children:"Secure Payment Methods"}),i.jsx("p",{children:"Use secure payment methods and avoid carrying large amounts of cash. Keep copies of important documents"})]})]})]})}),i.jsx("section",{className:"cta",children:i.jsxs("div",{className:"container",children:[i.jsx("h2",{children:"Ready to Start Your Travel Journey?"}),i.jsx("p",{children:"Join thousands of travellers and hosts connecting across India"}),i.jsx("div",{className:"cta-buttons",children:n?i.jsx("button",{className:"btn btn-primary",onClick:()=>s(g()),children:y()}):i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"btn btn-primary",onClick:()=>m("Guest"),children:r("joinAsGuest")}),i.jsx("button",{className:"btn btn-primary",onClick:()=>s("/login"),children:r("alreadyHaveAccount")})]})})]})}),i.jsx("section",{className:"features",children:i.jsxs("div",{className:"container",children:[i.jsx("h2",{children:" Mobile Apps"}),i.jsxs("div",{className:"mobile-apps-grid",children:[i.jsxs("div",{className:"mobile-app-card",children:[i.jsx("h3",{children:"iOS App"}),i.jsx("p",{children:"App Store - Coming Soon!"}),i.jsx("button",{className:"btn btn-outline",disabled:!0,style:{opacity:.6,cursor:"not-allowed"},children:"App Store"})]}),i.jsxs("div",{className:"mobile-app-card",children:[i.jsx("h3",{children:"Android App"}),i.jsx("p",{children:"Google Play - Coming Soon!"}),i.jsx("button",{className:"btn btn-outline",disabled:!0,style:{opacity:.6,cursor:"not-allowed"},children:"Google Play"})]})]})]})}),i.jsx("footer",{className:"footer",children:i.jsxs("div",{className:"container",children:[i.jsx("p",{children:" 2024 Local Host Connect. Connecting travellers with local experiences."}),i.jsxs("div",{className:"footer-links",style:{marginTop:"1rem",display:"flex",justifyContent:"center",gap:"2rem",flexWrap:"wrap"},children:[i.jsx(Nt,{to:"/privacy-policy",style:{color:"white",textDecoration:"none"},children:"Privacy Policy"}),i.jsx(Nt,{to:"/terms-of-service",style:{color:"white",textDecoration:"none"},children:"Terms of Service"}),i.jsx(Nt,{to:"/help",style:{color:"white",textDecoration:"none"},children:"Help & Support"})]}),i.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",justifyContent:"center",gap:"1.5rem",alignItems:"center"},children:[i.jsx("p",{style:{margin:0,color:"white",fontSize:"0.9rem"},children:"Follow Us:"}),i.jsx("a",{href:"https://twitter.com/festiveguest",target:"_blank",rel:"noopener noreferrer",style:{color:"white",transition:"opacity 0.3s"},title:"X (Twitter)",children:i.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})}),i.jsx("a",{href:"https://instagram.com/festiveguest",target:"_blank",rel:"noopener noreferrer",style:{color:"white",transition:"opacity 0.3s"},title:"Instagram",children:i.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),i.jsx("a",{href:"https://youtube.com/@festiveguest",target:"_blank",rel:"noopener noreferrer",style:{color:"white",transition:"opacity 0.3s"},title:"YouTube",children:i.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})})}),i.jsx("a",{href:"https://facebook.com/festiveguest",target:"_blank",rel:"noopener noreferrer",style:{color:"white",transition:"opacity 0.3s"},title:"Facebook",children:i.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})})]})]})}),i.jsx(l2,{isOpen:c,onClose:()=>u(!1),selectedRole:h})]})},c2=({setUser:n})=>{const{t:r}=Er(),[s,a]=R.useState(""),[c,u]=R.useState(""),[h,p]=R.useState(!1),[m,g]=R.useState(!1),[y,k]=R.useState(null),[U,V]=R.useState(""),[I,q]=R.useState(""),[z,Q]=R.useState(!1),[Y,fe]=R.useState(""),[le,K]=R.useState(!1),[ie,ae]=R.useState(""),[Ce,De]=R.useState(""),[Re,ze]=R.useState(""),[Fe,Me]=R.useState(!1),[be,Ue]=R.useState(!1),[W,M]=R.useState(""),J=Kn(),H=[{label:"At least 8 characters",test:E=>E.length>=8},{label:"One uppercase letter",test:E=>/[A-Z]/.test(E)},{label:"One lowercase letter",test:E=>/[a-z]/.test(E)},{label:"One number",test:E=>/\d/.test(E)},{label:"One special character",test:E=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(E)}],ee=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,j=E=>E?ee.test(E)?(V(""),!0):(V("Please enter a valid email address"),!1):(V(""),!0);R.useEffect(()=>{const E=localStorage.getItem("user"),A=localStorage.getItem("token");E&&A&&J("/"),q("/assets/login-logo.png")},[J]);const B=(E,A="success")=>{k({message:E,type:A}),A==="success"&&setTimeout(()=>{k(v=>v?{...v,hiding:!0}:null),setTimeout(()=>k(null),300)},5e3)},C=async E=>{E?.preventDefault(),g(!0);try{const A=await qe.post("auth/login",{email:s,password:c});if(A?.data?.success&&A?.data?.token){const{token:v,user:S}=A.data,N={...S,token:v};localStorage.setItem("user",JSON.stringify(N)),localStorage.setItem("userId",S.userId),localStorage.setItem("token",v),n(N),B("Login successful! Redirecting...","success"),J("/posts");return}B("Login failed","error")}catch(A){A.response?.status===429?B("Too many login attempts. Please wait 15 minutes and try again.","error"):B("Login failed: "+(A.response?.data?.message||A.message),"error")}finally{g(!1)}},T=async()=>{if(M(""),!Y||Y.trim()===""){M("Please enter your email address");return}if(!ee.test(Y)){M("Please enter a valid email address");return}Me(!0);try{(await qe.post("email/send-otp",{email:Y,purpose:"password-reset"})).data.success&&(K(!0),M(""))}catch(E){const A=E.response?.data?.message||E.message;M("Failed to send OTP: "+A)}finally{Me(!1)}},b=async()=>{if(M(""),!ie||ie.trim()===""){M("Please enter the OTP");return}if(ie.length!==6){M("OTP must be exactly 6 digits");return}if(!Ce||Ce.trim()===""){M("Please enter a new password");return}if(!Re||Re.trim()===""){M("Please confirm your new password");return}if(!H.every(A=>A.test(Ce))){M("Password must meet all requirements shown below");return}if(Ce!==Re){M("New password and confirm password do not match");return}Ue(!0);try{(await qe.post("auth/reset-password",{email:Y,otpCode:ie,newPassword:Ce})).data.success&&(B("Password reset successful! Please login with your new password.","success"),Q(!1),K(!1),ae(""),De(""),ze(""),fe(""),M(""))}catch(A){const v=A.response?.data?.message||A.message;M("Password reset failed: "+v)}finally{Ue(!1)}};return i.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"1rem",position:"relative"},children:[y&&i.jsx("div",{className:"toast-container",children:i.jsxs("div",{className:`toast ${y.type} ${y.hiding?"hiding":""}`,children:[i.jsx("span",{className:"toast-icon",children:y.type==="success"?"":y.type==="error"?"":""}),i.jsx("div",{className:"toast-content",children:i.jsx("p",{className:"toast-message",children:y.message})}),y.type!=="success"&&i.jsx("button",{onClick:()=>k(null),style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.5rem"},children:""})]})}),i.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, calc(-50% - 260px))",width:"140px",height:"140px",background:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.3)",zIndex:2,padding:"5px",overflow:"hidden"},children:i.jsx("img",{src:"/assets/login-logo.png",alt:"Festive Guest Logo",style:{width:"100%",height:"100%",objectFit:"cover"}})}),i.jsxs("div",{style:{maxWidth:"420px",width:"100%",background:"white",borderRadius:"1.5rem",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",padding:"5rem 2rem 2.5rem",position:"relative",marginTop:"70px"},children:[i.jsxs("div",{style:{marginBottom:"2rem",textAlign:"center"},children:[i.jsx("h1",{style:{margin:"0 0 0.5rem 0",fontSize:"1.75rem",fontWeight:"700",color:"#1e293b"},children:"Welcome Back"}),i.jsx("p",{style:{color:"#64748b",fontSize:"0.95rem",margin:0},children:"Sign in to continue"})]}),!z&&i.jsxs("form",{onSubmit:C,style:{pointerEvents:m?"none":"auto",opacity:m?.6:1},children:[i.jsxs("div",{className:"form-group",children:[i.jsx("input",{type:"email",className:"form-control",placeholder:"Email address",value:s,onChange:E=>{a(E.target.value),j(E.target.value)},onBlur:E=>j(E.target.value),required:!0,style:{fontSize:"0.95rem",padding:"0.875rem",borderColor:U?"#dc2626":"#e2e8f0",transform:"none"}}),U&&i.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.8rem"},children:[" ",U]})]}),i.jsxs("div",{className:"form-group",style:{position:"relative"},children:[i.jsx("input",{type:h?"text":"password",className:"form-control",placeholder:"Password",value:c,onChange:E=>u(E.target.value),required:!0,style:{fontSize:"0.95rem",padding:"0.875rem",paddingRight:"3rem",transform:"none"}}),i.jsx("button",{type:"button",onClick:()=>p(!h),style:{position:"absolute",right:"0.875rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#64748b",display:"flex",alignItems:"center",padding:"0"},children:h?i.jsx(Al,{size:18}):i.jsx(Nl,{size:18})})]}),i.jsx("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",padding:"0.875rem",fontSize:"1rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",marginTop:"0.5rem",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center"},disabled:m||U!=="",children:m?"Signing in...":"Sign In"})]}),i.jsx("div",{style:{marginTop:"1rem",textAlign:"center",pointerEvents:m?"none":"auto",opacity:m?.6:1},children:i.jsx("button",{type:"button",onClick:()=>Q(!0),style:{background:"none",border:"none",color:"#667eea",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Forgot Password?"})}),i.jsxs("div",{style:{marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid #e2e8f0",textAlign:"center",pointerEvents:m?"none":"auto",opacity:m?.6:1},children:[i.jsx("p",{style:{margin:"0 0 0.75rem 0",color:"#64748b",fontSize:"0.9rem"},children:"Don't have an account?"}),i.jsx("button",{onClick:()=>J("/?register=true"),style:{width:"100%",padding:"0.875rem",background:"white",border:"2px solid #667eea",borderRadius:"var(--radius-sm)",color:"#667eea",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:E=>{E.target.style.background="#667eea",E.target.style.color="white"},onMouseLeave:E=>{E.target.style.background="white",E.target.style.color="#667eea"},children:r("createAccount")})]})]}),z&&i.jsx("div",{className:"modal-overlay",onClick:()=>Q(!1),children:i.jsxs("div",{className:"modal-content",onClick:E=>E.stopPropagation(),style:{maxWidth:"400px"},children:[i.jsxs("div",{className:"modal-header",children:[i.jsxs("h3",{children:[i.jsx(xl,{size:20})," Reset Password"]}),i.jsx("button",{onClick:()=>Q(!1),className:"modal-close",children:""})]}),i.jsxs("div",{className:"modal-body",children:[W&&i.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"0.75rem",borderRadius:"0.5rem",marginBottom:"1rem",fontSize:"0.875rem"},children:[" ",W]}),le?i.jsxs("div",{children:[i.jsxs("p",{style:{marginBottom:"1rem",color:"#64748b"},children:["Enter the OTP sent to ",Y," and your new password"]}),i.jsx("div",{className:"form-group",children:i.jsx("input",{type:"text",value:ie,onChange:E=>ae(E.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter 6-digit OTP",maxLength:6,style:{fontSize:"1rem",padding:"0.75rem",width:"100%"}})}),i.jsxs("div",{className:"form-group",children:[i.jsx("input",{type:"password",value:Ce,onChange:E=>De(E.target.value),placeholder:"Enter new password",style:{fontSize:"1rem",padding:"0.75rem",width:"100%"}}),i.jsx("div",{style:{marginTop:"0.75rem",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:H.map((E,A)=>{const v=E.test(Ce);return i.jsxs("div",{style:{fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.25rem",color:v?"#16a34a":"#dc2626",transition:"color 0.2s"},children:[i.jsx("span",{style:{fontSize:"0.9rem"},children:v?"":""}),E.label]},A)})})]}),i.jsx("div",{className:"form-group",children:i.jsx("input",{type:"password",value:Re,onChange:E=>ze(E.target.value),placeholder:"Confirm new password",style:{fontSize:"1rem",padding:"0.75rem",width:"100%"}})}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsx("button",{onClick:()=>{K(!1),ae(""),De(""),ze(""),M("")},className:"btn btn-secondary",style:{flex:1,padding:"0.75rem"},children:"Back"}),i.jsx("button",{onClick:b,disabled:be,className:"btn btn-primary",style:{flex:1,padding:"0.75rem"},children:be?"Resetting...":"Reset Password"})]})]}):i.jsxs("div",{children:[i.jsx("p",{style:{marginBottom:"1rem",color:"#64748b"},children:"Enter your email to receive a password reset OTP"}),i.jsx("div",{className:"form-group",children:i.jsx("input",{type:"email",value:Y,onChange:E=>fe(E.target.value),placeholder:"Enter your email address",style:{fontSize:"1rem",padding:"0.75rem",width:"100%"}})}),i.jsx("button",{onClick:T,disabled:Fe||!Y,className:"btn btn-primary",style:{width:"100%",padding:"0.75rem"},children:Fe?"Sending OTP...":"Send OTP"})]})]})]})})]})},u2=({setUser:n})=>{const r=Kn(),s=Jn(),[a,c]=R.useState(1),[u,h]=R.useState({}),[p,m]=R.useState({userId:crypto.randomUUID(),name:"",email:"",password:"",phone:"",state:"",city:"",otherCity:"",bio:"",role:"Guest",status:"Active",hostingAreas:[]}),[g,y]=R.useState(!1),[k,U]=R.useState(null),[V,I]=R.useState(""),[q,z]=R.useState(""),[Q,Y]=R.useState(null),[fe,le]=R.useState(""),[K,ie]=R.useState(!1),[ae,Ce]=R.useState(""),[De,Re]=R.useState(!1),[ze,Fe]=R.useState(!1),[Me,be]=R.useState(!1),[Ue,W]=R.useState(""),[M,J]=R.useState(""),[H,ee]=R.useState(""),[j,B]=R.useState(""),[C,T]=R.useState(!1),[b,E]=R.useState({}),[A,v]=R.useState(0),[S,N]=R.useState(!1),[F,te]=R.useState(!1),[X,$]=R.useState([]),[de,he]=R.useState(0),ce=[{label:"At least 8 characters",test:P=>P.length>=8},{label:"One uppercase letter",test:P=>/[A-Z]/.test(P)},{label:"One lowercase letter",test:P=>/[a-z]/.test(P)},{label:"One number",test:P=>/\d/.test(P)},{label:"One special character",test:P=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(P)}],se=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,G=/^[6-9]\d{9}$/,je=P=>P?se.test(P)?(W(""),!0):(W("Please enter a valid email address"),!1):(W(""),!0),Ne=P=>{if(!P)return J(""),!0;const D=P.replace(/\D/g,"");return G.test(D)?(J(""),!0):(J("Please enter a valid 10-digit Indian mobile number (starting with 6-9). This helps other users contact you accurately."),!1)},xe=(P,D="success")=>{U({message:P,type:D}),D==="success"&&setTimeout(()=>{U(re=>re?{...re,hiding:!0}:null),setTimeout(()=>U(null),300)},5e3)};R.useEffect(()=>{const P=new URLSearchParams(s.search),D=P.get("role");let re=P.get("referralCode")||P.get("ref");const ye=P.get("disclaimerAccepted"),Be=sessionStorage.getItem("pendingReferralCode");Be&&(re=Be,sessionStorage.removeItem("pendingReferralCode"));const Oe=sessionStorage.getItem("disclaimerAcceptance");if(!Oe||!ye){r("/");return}try{const Ie=JSON.parse(Oe);if(Date.now()-Ie.timestamp>6e5||Ie.timestamp.toString()!==ye){sessionStorage.removeItem("disclaimerAcceptance"),r("/");return}}catch{r("/");return}(D==="Guest"||D==="Host")&&m(Ie=>({...Ie,role:D})),re&&m(Ie=>({...Ie,ReferredBy:re.toUpperCase()}))},[s.search,r]),R.useEffect(()=>{(async()=>{try{console.log("Loading locations using locationService...");const D=await Wo.getLocations();console.log("Locations loaded successfully:",D),h(D)}catch(D){console.error("DEBUG: Failed to load locations:",D),console.error("Error details:",{message:D.message,response:D.response?.data,status:D.response?.status,url:D.config?.url}),xe("Registration Error: "+D.message,"error")}})().catch(D=>console.error("CRITICAL: loadLocations failed",D))},[]);const ne=P=>{const D=P.target.value;Te(P),je(D),D!==ae&&(Re(!1),ie(!1),I(""))},Te=P=>{const{name:D,value:re}=P.target;m(ye=>{const Be={...ye,[D]:re};return D==="state"&&(Be.city=""),Be})},ke=P=>{P.preventDefault();const D={};if(p.name.trim()||(D.name="Name is required"),p.email.trim()||(D.email="Email is required"),p.password.trim()||(D.password="Password is required"),p.phone.trim()||(D.phone="Phone number is required"),p.state||(D.state="State is required"),p.city||(D.city="City is required"),p.bio.trim()||(D.bio="Bio is required"),S||(D.ageConfirmed="You must confirm that you are at least 18 years old"),p.role==="Host"&&(p.hostingAreas.some(ye=>ye.cities&&ye.cities.length>0)||(D.hostingAreas="Please select at least one hosting area",xe("Hosts must select at least one hosting area","error"))),E(D),Object.keys(D).length>0){xe("Please fill in all required fields","error");return}O()},O=async()=>{y(!0),Y(null);try{if(!De){Y("Please verify your email before completing registration."),xe("Please verify your email before registering","error"),y(!1);return}const P=sessionStorage.getItem("disclaimerAcceptance");if(!P){Y("Disclaimer acceptance expired. Please start registration again."),xe("Please accept the disclaimer again","error"),r("/");return}try{const Oe=JSON.parse(P);if(Date.now()-Oe.timestamp>6e5){Y("Disclaimer acceptance expired. Please start registration again."),sessionStorage.removeItem("disclaimerAcceptance"),xe("Disclaimer acceptance expired","error"),r("/");return}}catch{Y("Invalid disclaimer acceptance. Please start registration again."),r("/");return}const D=p.city==="Other"?p.otherCity:p.city,re={email:ae,password:p.password,name:p.name,phone:p.phone,userType:p.role,location:`${D}, ${p.state}`,bio:p.bio,ReferredBy:p.ReferredBy||null,hostingAreas:p.role==="Host"?p.hostingAreas.length>0&&p.hostingAreas.some(Oe=>Oe.cities.length>0)?JSON.stringify(p.hostingAreas.filter(Oe=>Oe.cities.length>0)):"":null};console.log("Sending registration payload:",re);let Be=(await qe.post("auth/register",re)).data;if(console.log("Registration response:",Be),Be.success||Be.message==="User registered successfully"){sessionStorage.removeItem("disclaimerAcceptance"),xe(" Registration successful!","success"),v(5);const Oe=setInterval(()=>{v(Ie=>Ie<=1?(clearInterval(Oe),r("/login"),0):Ie-1)},1e3)}else throw new Error(Be.message||"Registration failed")}catch(P){console.error("Registration error:",P),console.error("Error response:",P.response?.data);const D=P.response?.data?.message||P.response?.data?.error||P.message;if(P.response?.status===429){const re="Too many attempts. Please wait 15 minutes and try again.";Y(re),xe(re,"error")}else if(P.response?.status===500){const re="Server error occurred. Please try again later or contact support if the issue persists.";Y(`Server Error: ${D||"Internal server error"}`),xe(re,"error")}else Y(D),xe("Registration failed: "+D,"error")}finally{y(!1)}},w=async()=>{if(!p.email){xe("Please enter an email address first","error");return}Fe(!0);try{console.log("Sending OTP request:",{email:p.email,purpose:"registration"});const P=await qe.post("email/send-otp",{email:p.email,purpose:"registration"});console.log("OTP response:",P.data),P.data.success&&(ie(!0),z(p.email),xe("OTP sent to your email","success"))}catch(P){console.error("OTP Error Details:",{status:P.response?.status,data:P.response?.data,message:P.message,fullResponse:P.response}),console.error("Full error object:",P);const D=P.response?.data?.message||P.response?.data?.error||P.response?.data||P.message;Y(JSON.stringify(P.response?.data)||D),xe("Failed to send OTP: "+D,"error")}finally{Fe(!1)}},L=async()=>{if(!V||V.length!==6){ee("Please enter a valid 6-digit OTP code");return}y(!0),ee("");try{const P=await qe.post("email/validate-otp",{email:p.email,otpCode:V});P.data.success&&(Ce(p.email),Re(!0),ie(!1),le(""),ee(""),xe(P.data?.message||"Email verified","success"))}catch(P){const D=P.response?.data?.message||P.message;ee("Verification failed: "+D)}finally{y(!1)}};return i.jsxs("div",{className:"container",children:[k&&i.jsx("div",{className:"toast-container",children:i.jsxs("div",{className:`toast ${k.type} ${k.hiding?"hiding":""}`,children:[i.jsx("span",{className:"toast-icon",children:k.type==="success"?"":k.type==="error"?"":""}),i.jsxs("div",{className:"toast-content",children:[i.jsx("p",{className:"toast-message",children:k.message}),k.type==="success"&&A>0&&i.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",textAlign:"center",marginTop:"0.5rem"},children:A})]}),k.type!=="success"&&i.jsx("button",{onClick:()=>U(null),style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.5rem"},children:""})]})}),Q&&i.jsxs("div",{style:{maxWidth:"1200px",margin:"10px auto",color:"#b91c1c",background:"#fee2e2",padding:"10px",borderRadius:"6px"},children:[i.jsx("strong",{children:"Error:"})," ",Q]}),i.jsxs("div",{className:"registration-layout",children:[i.jsxs("div",{className:"disclaimer-section",children:[i.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[i.jsx("h2",{style:{color:"#1e293b",marginBottom:"0.5rem"},children:"Welcome to Local Host Connect"}),i.jsx("p",{style:{color:"#64748b"},children:"Connect with local hosts and travelers anywhere"})]}),i.jsxs("div",{style:{padding:"1.5rem",background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"0.75rem",marginBottom:"1.5rem"},children:[i.jsx("h4",{style:{margin:"0 0 1rem 0",color:"#0c4a6e",fontSize:"1rem",fontWeight:"600"},children:" Terms Accepted"}),i.jsxs("div",{style:{color:"#0c4a6e",fontSize:"0.9rem",lineHeight:"1.5"},children:[i.jsx("p",{style:{margin:"0 0 0.75rem 0"},children:"By proceeding to this page, you have already read and agreed to our:"}),i.jsxs("ul",{style:{margin:"0",paddingLeft:"1.25rem"},children:[i.jsxs("li",{style:{marginBottom:"0.5rem"},children:[i.jsx("button",{type:"button",style:{background:"none",border:"none",color:"#0ea5e9",textDecoration:"underline",cursor:"pointer",padding:0,font:"inherit"},onClick:()=>window.open("/privacy-policy","_blank"),children:"Privacy Policy"})," - How we handle your personal information"]}),i.jsxs("li",{style:{marginBottom:"0.5rem"},children:[i.jsx("button",{type:"button",style:{background:"none",border:"none",color:"#0ea5e9",textDecoration:"underline",cursor:"pointer",padding:0,font:"inherit"},onClick:()=>window.open("/terms-of-service","_blank"),children:"Terms of Service"})," - Platform usage guidelines"]}),i.jsxs("li",{children:[i.jsx("button",{type:"button",style:{background:"none",border:"none",color:"#0ea5e9",textDecoration:"underline",cursor:"pointer",padding:0,font:"inherit"},onClick:()=>window.open("/safety-guidelines","_blank"),children:"Safety Guidelines"})," - Important safety recommendations"]})]})]})]})]}),i.jsx("div",{className:"registration-form-section",children:i.jsxs("div",{className:"card",style:{margin:"0",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},children:[i.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[i.jsx("h3",{style:{color:"#1e293b",marginBottom:"0.5rem"},children:"Complete Your Registration"}),i.jsx("p",{style:{color:"#64748b",marginBottom:"1.5rem"},children:"Join our community of travelers and local hosts"}),i.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:"0.75rem",marginBottom:"2rem"},children:[i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.25rem"},children:[i.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:a>=1?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"#e2e8f0",color:a>=1?"white":"#64748b",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"1rem",flexShrink:0},children:"1"}),i.jsx("span",{style:{fontSize:"0.75rem",color:a===1?"#667eea":"#64748b",fontWeight:a===1?"600":"400",whiteSpace:"nowrap"},children:"Basic Info"})]}),i.jsx("div",{style:{width:"40px",height:"2px",background:a>=2?"#667eea":"#e2e8f0",marginBottom:"1rem"}}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.25rem"},children:[i.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:a>=2?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"#e2e8f0",color:a>=2?"white":"#64748b",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"1rem",flexShrink:0},children:"2"}),i.jsx("span",{style:{fontSize:"0.75rem",color:a===2?"#667eea":"#64748b",fontWeight:a===2?"600":"400",whiteSpace:"nowrap"},children:"Preferences"})]}),i.jsx("div",{style:{width:"40px",height:"2px",background:a>=3?"#667eea":"#e2e8f0",marginBottom:"1rem"}}),i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.25rem"},children:[i.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:a>=3?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"#e2e8f0",color:a>=3?"white":"#64748b",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"600",fontSize:"1rem",flexShrink:0},children:"3"}),i.jsx("span",{style:{fontSize:"0.75rem",color:a===3?"#667eea":"#64748b",fontWeight:a===3?"600":"400",whiteSpace:"nowrap"},children:"Confirm"})]})]})]}),i.jsxs("form",{onSubmit:ke,children:[a===1&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Choose Your Role"}),i.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"0.5rem"},children:[i.jsx("button",{type:"button",onClick:()=>m(P=>({...P,role:"Guest"})),className:`btn ${p.role==="Guest"?"btn-primary":"btn-outline"}`,style:{flex:1,padding:"1rem",fontSize:"1rem"},children:" Traveler (Guest)"}),i.jsx("button",{type:"button",onClick:()=>m(P=>({...P,role:"Host"})),className:`btn ${p.role==="Host"?"btn-primary":"btn-outline"}`,style:{flex:1,padding:"1rem",fontSize:"1rem"},children:" Local Host"})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Full Name"}),i.jsx("input",{type:"text",name:"name",value:p.name,onChange:P=>{Te(P),b.name&&E(D=>({...D,name:""}))},placeholder:"Enter your full name",required:!0,style:{fontSize:"1rem",padding:"1rem",border:b.name?"2px solid #dc2626 !important":"2px solid #cbd5e1"}}),b.name&&i.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",b.name]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Email Address"}),i.jsx("input",{type:"email",name:"email",value:p.email,onChange:P=>{ne(P),b.email&&E(D=>({...D,email:""}))},onBlur:P=>je(P.target.value),placeholder:"Enter your email address",required:!0,disabled:De,style:{fontSize:"1rem",padding:"1rem",border:Ue||b.email?"2px solid #dc2626 !important":"2px solid #cbd5e1",backgroundColor:De?"#f3f4f6":"white",cursor:De?"not-allowed":"text"}}),(Ue||b.email)&&i.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",Ue||b.email]}),i.jsxs("div",{style:{marginTop:"0.75rem",display:"flex",gap:"0.5rem",alignItems:"center"},children:[!De&&!K&&i.jsx("button",{type:"button",className:"btn btn-secondary",onClick:w,disabled:ze||Ue!=="",children:ze?"Sending OTP...":"Send OTP"}),K&&i.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[i.jsx("input",{type:"text",value:V,onChange:P=>{I(P.target.value.replace(/\D/g,"").slice(0,6)),ee("")},placeholder:"Enter OTP",maxLength:6,style:{padding:"0.5rem",fontSize:"1rem",width:"160px",borderColor:H?"#dc2626":"#cbd5e1"}}),H&&i.jsxs("p",{style:{margin:"0",color:"#dc2626",fontSize:"0.75rem"},children:[" ",H]})]}),i.jsx("button",{type:"button",className:"btn btn-primary",onClick:L,disabled:g||V.length!==6,style:{opacity:V.length!==6?.5:1,cursor:V.length!==6?"not-allowed":"pointer"},children:"Verify"})]}),De&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx("span",{style:{color:"#16a34a",fontWeight:"600"},children:" Email verified"}),i.jsx("button",{type:"button",onClick:()=>{Re(!1),Ce(""),ie(!1),I("")},className:"btn btn-outline",style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},children:"Change Email"})]})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Password"}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("input",{type:Me?"text":"password",name:"password",value:p.password,onChange:P=>{Te(P),b.password&&E(D=>({...D,password:""}))},placeholder:"Create a strong password",required:!0,style:{fontSize:"1rem",padding:"1rem",paddingRight:"2.5rem",width:"100%",boxSizing:"border-box",border:b.password?"2px solid #dc2626 !important":"2px solid #cbd5e1"}}),i.jsx("button",{type:"button",onClick:()=>be(!Me),style:{position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#64748b",display:"flex",alignItems:"center",padding:"0"},children:Me?i.jsx(Al,{size:20}):i.jsx(Nl,{size:20})})]}),b.password&&i.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",b.password]}),i.jsx("div",{style:{marginTop:"0.75rem",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:ce.map((P,D)=>{const re=P.test(p.password);return i.jsxs("div",{style:{fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.25rem",color:re?"#16a34a":"#dc2626",transition:"color 0.2s"},children:[i.jsx("span",{style:{fontSize:"0.9rem"},children:re?"":""}),P.label]},D)})})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Phone Number"}),i.jsx("input",{type:"tel",name:"phone",value:p.phone,onChange:P=>{const D=P.target.value.replace(/\D/g,"").slice(0,10);Te({target:{name:"phone",value:D}}),Ne(D),b.phone&&E(re=>({...re,phone:""}))},onBlur:P=>Ne(P.target.value),placeholder:"Enter your 10-digit mobile number",required:!0,maxLength:10,style:{fontSize:"1rem",padding:"1rem",border:M||b.phone?"2px solid #dc2626 !important":"2px solid #cbd5e1"}}),(M||b.phone)&&i.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",M||b.phone]})]}),i.jsxs("div",{className:"form-group",children:[i.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",padding:"1rem",background:"#fef3c7",border:"2px solid #f59e0b",borderRadius:"0.75rem",marginBottom:"1rem"},children:[i.jsx("input",{type:"checkbox",id:"ageConfirmation",checked:S,onChange:P=>{N(P.target.checked),b.ageConfirmed&&E(D=>({...D,ageConfirmed:""}))},style:{marginTop:"0.25rem",width:"18px",height:"18px",cursor:"pointer"}}),i.jsxs("label",{htmlFor:"ageConfirmation",style:{fontWeight:"600",color:"#92400e",cursor:"pointer",lineHeight:"1.5",fontSize:"0.95rem"},children:[i.jsx("strong",{children:"Age Verification Required:"})," I confirm that I am at least 18 years of age and have the legal capacity to enter into binding agreements. Users under 18 are not permitted to use this platform."]})]}),b.ageConfirmed&&i.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem",fontWeight:"600"},children:[" ",b.ageConfirmed]})]}),i.jsx("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"1.5rem"},children:i.jsx("button",{type:"button",onClick:()=>{if(!p.name||!p.email||!De||!p.phone||!S){xe("Please complete all required fields in this step","error");return}c(2)},className:"btn btn-primary",style:{padding:"0.875rem 2rem"},children:"Next: Preferences "})})]}),a===2&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"form-group",children:[i.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"State"}),i.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginTop:"0.5rem"},children:Object.keys(u||{}).map(P=>i.jsx("button",{type:"button",onClick:()=>{m(D=>({...D,state:P,city:""})),b.state&&E(D=>({...D,state:""}))},className:`btn ${p.state===P?"btn-primary":"btn-outline"}`,style:{padding:"0.75rem 1rem",fontSize:"0.9rem"},children:P},P))}),b.state&&i.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",b.state]})]}),p.state&&i.jsxs("div",{className:"form-group",children:[i.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"City"}),i.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginTop:"0.5rem"},children:u[p.state]&&u[p.state].map(P=>i.jsx("button",{type:"button",onClick:()=>{m(D=>({...D,city:P})),b.city&&E(D=>({...D,city:""}))},className:`btn ${p.city===P?"btn-primary":"btn-outline"}`,style:{padding:"0.75rem 1rem",fontSize:"0.9rem"},children:P},P))}),b.city&&i.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",b.city]})]}),p.city==="Other"&&i.jsxs("div",{className:"form-group",children:[i.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Enter Your City"}),i.jsx("input",{type:"text",name:"otherCity",value:p.otherCity,onChange:Te,placeholder:"Name of your city",required:!0,style:{fontSize:"1rem",padding:"1rem"}})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:p.role==="Host"?"What You Offer as a Host":"What You're Looking For"}),i.jsx("textarea",{name:"bio",value:p.bio,onChange:P=>{Te(P),b.bio&&E(D=>({...D,bio:""}))},placeholder:p.role==="Host"?"Describe what you offer to travelers (e.g., accommodation, local experiences, cultural insights, authentic cuisine, city tours)...":"Tell hosts what you're looking for (e.g., local experiences, cultural exchange, authentic food, business travel accommodation, educational opportunities)...",required:!0,rows:"4",maxLength:250,style:{fontSize:"1rem",padding:"1rem",width:"100%",borderRadius:"0.5rem",border:b.bio?"2px solid #dc2626 !important":"2px solid #cbd5e1"}}),b.bio&&i.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",b.bio]}),i.jsxs("div",{style:{textAlign:"right",fontSize:"0.875rem",color:"#64748b",marginTop:"0.25rem"},children:[p.bio.length,"/250 characters"]})]}),p.role==="Host"&&i.jsxs("div",{className:"form-group",children:[i.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Areas Where You Can Host"}),i.jsx("p",{style:{margin:"0.5rem 0",color:"#64748b",fontSize:"0.9rem"},children:"Select up to 3 hosting areas (upgrade to premium for more)."}),i.jsxs("button",{type:"button",onClick:()=>{const P=[...p.hostingAreas];$(P),he(P.reduce((D,re)=>D+re.cities.length,0)),te(!0)},className:"btn btn-outline",style:{padding:"1rem",fontSize:"1rem",width:"100%",marginBottom:"1rem",borderColor:b.hostingAreas?"#dc2626":"#cbd5e1"},children:[" Select Hosting Areas (",p.hostingAreas.reduce((P,D)=>P+D.cities.length,0)," cities selected)"]}),b.hostingAreas&&i.jsxs("p",{style:{margin:"0 0 1rem 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",b.hostingAreas]}),p.hostingAreas.length>0&&p.hostingAreas.some(P=>P.cities.length>0)&&i.jsxs("div",{style:{padding:"1rem",background:"#f0fdf4",borderRadius:"0.5rem",border:"1px solid #16a34a"},children:[i.jsx("p",{style:{margin:"0 0 0.5rem 0",fontWeight:"600",color:"#15803d"},children:"Selected Hosting Areas:"}),p.hostingAreas.filter(P=>P.cities.length>0).map(P=>i.jsxs("div",{style:{marginBottom:"0.25rem",color:"#15803d",fontSize:"0.9rem"},children:[i.jsxs("strong",{children:[P.state,":"]})," ",P.cities.join(", ")]},P.state))]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Referral Code (Optional)"}),i.jsx("input",{type:"text",name:"ReferredBy",value:p.ReferredBy||"",onChange:P=>{const D=P.target.value.toUpperCase();m(re=>({...re,ReferredBy:D}))},placeholder:"Enter referral code if you have one",style:{fontSize:"1rem",padding:"1rem"}}),i.jsx("p",{style:{margin:"0.5rem 0 0 0",color:"#64748b",fontSize:"0.875rem"},children:" Enter a friend's referral code to help them earn points!"}),p.ReferredBy&&i.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#16a34a",fontSize:"0.875rem"},children:[" Referral code applied: ",p.ReferredBy]})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"1.5rem"},children:[i.jsx("button",{type:"button",onClick:()=>c(1),className:"btn btn-outline",style:{padding:"0.875rem 2rem"},children:" Back"}),i.jsx("button",{type:"button",onClick:()=>{if(!p.state||!p.city||!p.bio){xe("Please complete all required fields in this step","error");return}if(p.role==="Host"&&!p.hostingAreas.some(P=>P.cities&&P.cities.length>0)){xe("Hosts must select at least one hosting area","error");return}c(3)},className:"btn btn-primary",style:{padding:"0.875rem 2rem"},children:"Next: Confirm "})]})]}),a===3&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{padding:"1.5rem",background:"#f0fdf4",border:"2px solid #16a34a",borderRadius:"0.75rem",marginBottom:"1.5rem"},children:[i.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"#15803d",fontWeight:"600",fontSize:"1.1rem"},children:" Age Verification Confirmed"}),i.jsx("p",{style:{margin:"0",color:"#15803d",fontSize:"0.95rem"},children:"You have confirmed that you are at least 18 years of age."})]}),i.jsxs("div",{style:{padding:"1.5rem",background:"#f0fdf4",border:"2px solid #16a34a",borderRadius:"0.75rem"},children:[i.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"#15803d",fontWeight:"600",fontSize:"1.1rem"},children:" Disclaimer Accepted"}),i.jsx("p",{style:{margin:"0",color:"#15803d",fontSize:"0.95rem"},children:"You have read and agreed to our Terms of Service, Privacy Policy, and Safety Guidelines."})]}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"1.5rem"},children:[i.jsx("button",{type:"button",onClick:()=>c(2),className:"btn btn-outline",style:{padding:"0.875rem 2rem"},children:" Back"}),i.jsx("button",{type:"submit",className:"btn btn-primary",disabled:g||A>0||!S,style:{padding:"0.875rem 2rem",opacity:g||A>0||!S?.5:1},children:g?"Registering...":"Register Now"})]})]})]}),i.jsx("div",{style:{marginTop:"2rem",textAlign:"center",padding:"1.5rem",background:"#f8fafc",borderRadius:"1rem",border:"1px solid #e2e8f0"},children:i.jsxs("p",{style:{margin:"0",color:"#64748b",fontSize:"1.05rem"},children:["Already have an account? ",i.jsx("button",{className:"btn btn-primary",onClick:()=>r("/login"),style:{marginLeft:"0.5rem",padding:"0.5rem 1.5rem"},children:"Login"})]})})]})})]}),F&&i.jsx("div",{className:"modal-overlay",onClick:()=>te(!1),children:i.jsxs("div",{className:"modal",onClick:P=>P.stopPropagation(),style:{width:"800px"},children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h3",{children:" Select Hosting Areas"}),i.jsx("button",{className:"modal-close",onClick:()=>te(!1),children:""})]}),i.jsx("div",{className:"modal-body",children:Object.entries(u||{}).map(([P,D])=>{const re=X.find(ye=>ye.state===P)?.cities||[];return i.jsxs("div",{className:"state-section",children:[i.jsx("div",{className:"state-header",children:P}),i.jsx("div",{className:"cities-grid",children:D.map(ye=>{const Be=re.includes(ye);return i.jsx("button",{type:"button",onClick:()=>{const Oe=[...X],Ie=Oe.findIndex(pe=>pe.state===P);if(Ie>=0)Be?(Oe[Ie].cities=Oe[Ie].cities.filter(pe=>pe!==ye),Oe[Ie].cities.length===0&&Oe.splice(Ie,1)):Oe[Ie].cities.push(ye);else{if(Oe.length>=3){xe("Free users can select up to 3 hosting areas only","error");return}Oe.push({state:P,cities:[ye]})}$(Oe),he(Oe.reduce((pe,He)=>pe+He.cities.length,0))},className:`city-btn ${Be?"selected":""}`,children:ye},ye)})})]},P)})}),i.jsx("div",{className:"modal-footer",children:i.jsxs("button",{className:"btn btn-primary",onClick:()=>{m(P=>({...P,hostingAreas:X})),te(!1)},style:{padding:"0.75rem 2rem",fontSize:"1.1rem"},children:[" Done (",de," cities selected)"]})})]})})]})},By=({user:n})=>{Kn();const[r,s]=R.useState([]),[a,c]=R.useState(!0),[u,h]=R.useState({}),[p,m]=R.useState([]),[g,y]=R.useState([]),[k,U]=R.useState(null),[V,I]=R.useState(!1),[q,z]=R.useState(!1),[Q,Y]=R.useState(window.innerWidth>768),[fe,le]=R.useState({}),[K,ie]=R.useState("Not connected"),[ae,Ce]=R.useState(null),[De,Re]=R.useState(null),[ze,Fe]=R.useState(!1),[Me,be]=R.useState(!1),[Ue,W]=R.useState({rating:0,comment:""}),[M,J]=R.useState(!1),[H,ee]=R.useState(""),[j,B]=R.useState(!1),[C,T]=R.useState({name:"",email:"",userType:"Guest",message:""}),[b,E]=R.useState(!1),[A,v]=R.useState(""),[S,N]=R.useState(!1),[F,te]=R.useState(0),[X,$]=R.useState(!1),[de,he]=R.useState({title:"",content:"",location:"",facilities:[],visitors:"",days:""}),[ce,se]=R.useState(!1),[G,je]=R.useState(""),[Ne,xe]=R.useState([]),[ne,Te]=R.useState(!1);R.useEffect(()=>{const pe=JSON.parse(localStorage.getItem("user")||"{}");pe&&pe.token&&(re(),ke())},[]),R.useEffect(()=>{const pe=()=>{const He=window.innerWidth>768;Y(He),He&&z(!0)};return pe(),window.addEventListener("resize",pe),()=>window.removeEventListener("resize",pe)},[]);const ke=async()=>{try{const pe=await qe.get("location/states-with-cities");le(pe.data)}catch(pe){console.error("Error fetching locations:",pe),le({"Tamil Nadu":["Chennai","Coimbatore","Madurai","Other"],Karnataka:["Bangalore","Mysore","Mangalore","Other"],Kerala:["Kochi","Thiruvananthapuram","Kozhikode","Other"],"Andhra Pradesh":["Hyderabad","Visakhapatnam","Vijayawada","Other"],Maharashtra:["Mumbai","Pune","Nagpur","Other"],Delhi:["New Delhi","Other"]})}};R.useEffect(()=>{O()},[r,p]);const O=()=>{if(p.length===0)y(r);else{const pe=r.filter(He=>p.some(Ye=>He.location?.toLowerCase().includes(Ye.toLowerCase())));y(pe)}},w=pe=>{h(He=>({...He,[pe]:!He[pe]}))},L=pe=>{m(He=>He.includes(pe)?He.filter(Ye=>Ye!==pe):[...He,pe])},P=()=>{m([])},D=()=>{Ce(null),Re(null),document.body.style.overflow="unset"};R.useEffect(()=>(ae?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[ae]);const re=async()=>{try{const pe=await qe.get("user/browse"),Ye=(Array.isArray(pe.data)?pe.data:[pe.data]).filter(dt=>dt.status==="Active"||dt.status==="Verified");s(Ye)}catch(pe){console.error("Error fetching hosts:",pe),pe.response?.status===500?(console.error("Server error - API may be down or misconfigured"),s([])):pe.response?.status!==401&&pe.response?.status!==403&&s([])}finally{c(!1)}},ye=async pe=>{Re(pe.userId),Fe(!0);try{const He=await qe.post("user/public-profile",{userId:pe.userId}),Ye=n?.userId,dt=He.data.reviews||[],vt=dt.find(Nn=>Nn.reviewerId===Ye),qn=dt.filter(Nn=>Nn.reviewerId!==Ye).sort((Nn,ai)=>new Date(ai.createdAt)-new Date(Nn.createdAt)),$n=vt?[vt,...qn]:qn,ln=!!vt;Ce({...He.data,reviews:$n,hasUserReview:ln}),be(!1),W({rating:0,comment:""})}catch(He){console.error("Failed to fetch profile:",He)}finally{Fe(!1)}},Be=pe=>{U({id:pe.userId,name:pe.name})},Oe=async()=>{if(console.log("Submit clicked, reviewError before:",H),console.log("Rating:",Ue.rating,"Comment:",Ue.comment),ee(""),!Ue.comment.trim()||Ue.rating===0){console.log("Setting error message"),ee("Please provide both rating and comment"),console.log("reviewError after setting:","Please provide both rating and comment");return}J(!0);try{await qe.post("review",{userId:ae.userId,rating:Ue.rating,comment:Ue.comment.trim()});const pe=await qe.post("user/public-profile",{userId:ae.userId}),He=n?.userId,Ye=pe.data.reviews||[],dt=Ye.find(ln=>ln.reviewerId===He),vt=Ye.filter(ln=>ln.reviewerId!==He).sort((ln,Nn)=>new Date(Nn.createdAt)-new Date(ln.createdAt)),qn=dt?[dt,...vt]:vt,$n=!!dt;Ce({...pe.data,reviews:qn,hasUserReview:$n}),be(!1),W({rating:0,comment:""}),ee("")}catch(pe){console.error("Failed to submit review:",pe),pe.response?.data?.message?ee(pe.response.data.message):ee("Failed to submit review. Please try again.")}finally{J(!1)}},Ie=async()=>{if(v(""),!C.name.trim()||!C.email.trim()||!C.message.trim()){v("Please fill in all required fields");return}E(!0);try{await qe.post("feedback",{name:C.name.trim(),email:C.email.trim(),userType:C.userType,message:C.message.trim()}),N(!0),T({name:"",email:"",userType:"Guest",message:""}),te(5);const pe=setInterval(()=>{te(He=>He<=1?(clearInterval(pe),B(!1),N(!1),te(0),0):He-1)},1e3)}catch(pe){console.error("Failed to submit feedback:",pe),pe.response?.data?.message?v(pe.response.data.message):v("Failed to submit feedback. Please try again.")}finally{E(!1)}};return a?i.jsx("div",{className:"container",children:i.jsxs("div",{className:"loading",style:{padding:"4rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),i.jsx("h3",{children:"Finding amazing hosts for you..."})]})}):i.jsxs("div",{className:"browse-layout",children:[i.jsxs("button",{className:"mobile-filter-toggle",onClick:pe=>{pe.stopPropagation(),I(!V)},children:[i.jsxs("span",{children:["Filter by Location ",p.length>0&&`(${p.length})`]}),V?i.jsx(bh,{size:16}):i.jsx(_l,{size:16})]}),i.jsxs("div",{className:`location-sidebar ${V?"mobile-visible":""}`,onClick:pe=>pe.stopPropagation(),children:[i.jsxs("div",{className:"filter-header",children:[i.jsxs("h3",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:Q?"default":"pointer",width:"100%"},onClick:()=>!Q&&z(!q),children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(vh,{size:20,style:{color:"var(--primary)"}}),"Filter by Location"]}),!Q&&i.jsx("span",{style:{color:"var(--primary)",fontSize:"1.2rem"},children:q?"":"+"})]}),i.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:p.length>0&&i.jsxs("button",{onClick:P,className:"clear-filters-btn",children:["Clear (",p.length,")"]})})]}),(Q||q)&&i.jsx("div",{className:"location-filters",children:Object.entries(fe).map(([pe,He])=>i.jsxs("div",{className:"state-group",children:[i.jsxs("button",{className:"state-toggle",onClick:()=>w(pe),children:[i.jsx("span",{children:pe}),i.jsx("span",{className:"expand-icon",style:{color:"var(--primary)",background:"none",border:"none",borderRadius:"0",fontSize:"1.2rem"},children:u[pe]?"-":"+"})]}),u[pe]&&i.jsx("div",{className:"cities-list",children:He.map(Ye=>i.jsx("button",{className:`city-btn ${p.includes(Ye)?"selected":""}`,onClick:()=>L(Ye),children:Ye},Ye))})]},pe))})]}),i.jsxs("div",{className:"browse-main",children:[i.jsxs("div",{className:"browse-header",children:[i.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(ej,{size:24,style:{color:"var(--primary)"}}),"Available Hosts"]}),i.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:i.jsx("div",{className:"results-count",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:!a&&i.jsxs(i.Fragment,{children:[i.jsx(Gn,{size:16,style:{color:"var(--text-light)"}}),i.jsxs("span",{children:[g.length," host",g.length!==1?"s":""," found"]})]})})})]}),a?i.jsxs("div",{className:"loading",style:{padding:"4rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),i.jsx("h3",{children:"Finding amazing hosts for you..."})]}):i.jsx("div",{children:g.length===0?i.jsxs("div",{className:"no-results",children:[i.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),i.jsxs("h3",{style:{color:"#1e293b"},children:["No hosts found",p.length>0?" for selected locations":" in this area yet"]}),i.jsx("p",{style:{color:"#64748b"},children:p.length>0?"Try selecting different locations or clear filters.":"We're growing fast! Check back tomorrow for new local hosts."}),p.length>0&&i.jsx("button",{onClick:P,className:"btn btn-outline",children:"Clear filters"})]}):i.jsx("div",{className:"compact-grid",children:g.map(pe=>i.jsxs("div",{className:`host-card-horizontal ${De===pe.userId?"selected":""}`,onClick:()=>ye(pe),children:[i.jsxs("div",{className:"host-image-section",children:[i.jsx(or,{src:pe.profileImageUrl,alt:pe.name,className:"host-card-img",userId:pe.userId,fallbackText:"Host"}),i.jsx("button",{className:"chat-btn",onClick:He=>{He.stopPropagation(),Be(pe)},children:i.jsx(ii,{size:16,fill:"currentColor"})}),pe.status==="Verified"&&i.jsx("div",{className:"verified-badge",children:" Verified"})]}),i.jsxs("div",{className:"host-content-section",children:[i.jsx("h3",{className:"host-name",children:pe.name}),i.jsx("div",{className:"host-location",children:pe.location.split(",")[0]})]})]},pe.userId))})})]}),ae&&i.jsx("div",{className:"modal-overlay",onClick:D,children:i.jsxs("div",{className:"modal-content",onClick:pe=>pe.stopPropagation(),style:{maxHeight:"90vh",overflowY:"auto"},children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h3",{children:ae.name}),i.jsx("button",{onClick:D,className:"modal-close",children:""})]}),i.jsxs("div",{className:"modal-body",children:[i.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",alignItems:"flex-start"},children:[i.jsx(or,{src:ae.profileImageUrl,alt:ae.name,className:"modal-profile-image",fallbackText:"Profile",style:{flexShrink:0,width:"100px",height:"100px"}}),i.jsxs("div",{style:{flex:1},children:[i.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1.25rem"},children:ae.name}),i.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:i.jsxs("span",{style:{color:"#64748b"},children:[" ",ae.location]})}),i.jsxs("p",{style:{color:"#64748b",fontSize:"0.9rem",margin:"0"},children:[ae.userType,"  Joined ",new Date(ae.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"})]})]})]}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("h4",{style:{marginBottom:"0.75rem",color:"var(--text)"},children:ae.userType==="Host"?" About My Hosting":" About Me"}),i.jsx("p",{style:{color:"#475569",lineHeight:"1.5",background:"#f8fafc",padding:"1rem",borderRadius:"0.5rem",margin:"0"},children:ae.bio||"No description provided."})]}),i.jsxs("div",{children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[i.jsxs("h4",{style:{margin:"0",color:"var(--text)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[" Reviews (",ae.totalReviews||ae.reviews?.length||0,")",ae.averageRating>0&&i.jsxs("span",{style:{fontSize:"0.9rem",color:"#64748b"},children:["(",ae.averageRating.toFixed(1)," avg)"]})]}),!ae.hasUserReview&&i.jsx("button",{className:"btn btn-outline",onClick:()=>be(!Me),style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:Me?"Cancel":"Write Review"})]}),Me&&i.jsxs("div",{className:"review-form",children:[H&&i.jsx("div",{className:"review-error",children:H}),i.jsxs("div",{style:{marginBottom:"0.75rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Rating:"}),i.jsx("div",{className:"rating-input",children:Array.from({length:5},(pe,He)=>i.jsx("button",{type:"button",className:"rating-star",onClick:()=>{W(Ye=>({...Ye,rating:He+1})),ee("")},style:{color:He<Ue.rating?"#fbbf24":"#d1d5db"},children:""},He))})]}),i.jsxs("div",{style:{marginBottom:"0.75rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Comment:"}),i.jsx("textarea",{value:Ue.comment,onChange:pe=>{W(He=>({...He,comment:pe.target.value})),ee("")},placeholder:"Share your experience...",rows:3,style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",resize:"vertical",fontFamily:"inherit"}})]}),i.jsx("button",{className:"btn btn-primary",onClick:Oe,disabled:M,style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:M?"Submitting...":"Submit Review"})]}),ae.reviews&&ae.reviews.length>0&&i.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:ae.reviews.map((pe,He)=>{const Ye=pe.reviewerId===n?.userId;return i.jsxs("div",{className:`review-item ${Ye?"user-review":""}`,children:[Ye&&i.jsx("div",{className:"user-review-badge",children:"Your Review"}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.25rem",paddingRight:Ye?"5rem":"0"},children:[i.jsx("strong",{style:{fontSize:"0.9rem"},children:pe.reviewerName}),i.jsx("div",{className:"review-stars",children:Array.from({length:5},(dt,vt)=>i.jsx("span",{style:{color:vt<pe.rating?"#fbbf24":"#d1d5db"},children:""},vt))})]}),i.jsx("p",{style:{margin:"0",fontSize:"0.85rem",color:"#475569",lineHeight:"1.4"},children:pe.comment}),i.jsx("div",{className:"review-meta",children:new Date(pe.createdAt).toLocaleDateString()})]},He)})}),(!ae.reviews||ae.reviews.length===0)&&!Me&&i.jsx("p",{style:{color:"#64748b",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:"No reviews yet. Be the first to share your experience!"})]})]})]})}),ze&&i.jsx("div",{className:"modal-overlay",children:i.jsx("div",{className:"loading",style:{color:"white"},children:"Loading profile..."})}),j&&i.jsx("div",{className:"modal-overlay",onClick:()=>B(!1),children:i.jsxs("div",{className:"modal-content",onClick:pe=>pe.stopPropagation(),style:{maxWidth:"500px"},children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h3",{children:"Share Your Feedback"}),i.jsx("button",{onClick:()=>B(!1),className:"modal-close",children:""})]}),i.jsx("div",{className:"modal-body",children:S?i.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[i.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),i.jsx("h4",{style:{color:"var(--success)",marginBottom:"0.5rem"},children:"Thank you!"}),i.jsx("p",{style:{color:"#64748b"},children:"Your feedback has been submitted successfully."}),F>0&&i.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",marginTop:"1rem"},children:F})]}):i.jsxs(i.Fragment,{children:[A&&i.jsx("div",{style:{background:"#fee2e2",color:"#dc2626",padding:"0.75rem",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.9rem"},children:A}),i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Name *"}),i.jsx("input",{type:"text",value:C.name,onChange:pe=>{T(He=>({...He,name:pe.target.value})),v("")},placeholder:"Your name",style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",fontFamily:"inherit"}})]}),i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Email *"}),i.jsx("input",{type:"email",value:C.email,onChange:pe=>{T(He=>({...He,email:pe.target.value})),v("")},placeholder:"your.email@example.com",style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",fontFamily:"inherit"}})]}),i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"User Type"}),i.jsxs("select",{value:C.userType,onChange:pe=>T(He=>({...He,userType:pe.target.value})),style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",fontFamily:"inherit"},children:[i.jsx("option",{value:"Guest",children:"Guest"}),i.jsx("option",{value:"Host",children:"Host"})]})]}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Message *"}),i.jsx("textarea",{value:C.message,onChange:pe=>{T(He=>({...He,message:pe.target.value})),v("")},placeholder:"Share your thoughts, suggestions, or report any issues...",rows:4,style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",resize:"vertical",fontFamily:"inherit"}})]}),i.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[i.jsx("button",{className:"btn btn-outline",onClick:()=>B(!1),disabled:b,children:"Cancel"}),i.jsx("button",{className:"btn btn-primary",onClick:Ie,disabled:b,children:b?"Submitting...":"Submit Feedback"})]})]})})]})}),k&&i.jsx(Gl,{recipientId:k.id,recipientName:k.name,recipientImageUrl:r.find(pe=>pe.userId===k.id)?.profileImageUrl,onClose:()=>U(null)})]})},d2=({user:n})=>{const[r,s]=R.useState([]),[a,c]=R.useState(!0),[u,h]=R.useState({}),[p,m]=R.useState([]),[g,y]=R.useState([]),[k,U]=R.useState(null),[V,I]=R.useState(!1),[q,z]=R.useState(!1),[Q,Y]=R.useState(window.innerWidth>768),[fe,le]=R.useState({}),[K,ie]=R.useState(null),[ae,Ce]=R.useState(null),[De,Re]=R.useState(!1),[ze,Fe]=R.useState(!1),[Me,be]=R.useState({rating:0,comment:""}),[Ue,W]=R.useState(!1),[M,J]=R.useState("");R.useEffect(()=>{const v=n?.status;v==="Active"||v==="Verified"?(ee(),H()):c(!1)},[]),R.useEffect(()=>{const v=()=>{const S=window.innerWidth>768;Y(S),S&&z(!0)};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const H=async()=>{try{const v=await qe.get("location/states-with-cities");le(v.data)}catch(v){console.error("Error fetching locations:",v)}};R.useEffect(()=>{j()},[r,p]);const ee=async()=>{try{const v=await qe.get("user/browse"),S=Array.isArray(v.data)?v.data:[v.data];s(S)}catch(v){console.error("Error fetching guests:",v),s([])}finally{c(!1)}},j=()=>{if(p.length===0)y(r);else{const v=r.filter(S=>p.some(N=>S.location?.toLowerCase().includes(N.toLowerCase())));y(v)}},B=v=>{h(S=>({...S,[v]:!S[v]}))},C=v=>{m(S=>S.includes(v)?S.filter(N=>N!==v):[...S,v])},T=()=>{m([])},b=()=>{ie(null),Ce(null),document.body.style.overflow="unset"};R.useEffect(()=>(K?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[K]);const E=async v=>{Ce(v.userId),Re(!0);try{const S=await qe.post("user/public-profile",{userId:v.userId}),N=n?.userId,F=S.data.reviews||[],te=F.find(he=>he.reviewerId===N),X=F.filter(he=>he.reviewerId!==N).sort((he,ce)=>new Date(ce.createdAt)-new Date(he.createdAt)),$=te?[te,...X]:X,de=!!te;ie({...S.data,reviews:$,hasUserReview:de}),Fe(!1),be({rating:0,comment:""})}catch(S){console.error("Failed to fetch profile:",S)}finally{Re(!1)}},A=async()=>{if(J(""),!Me.comment.trim()||Me.rating===0){J("Please provide both rating and comment");return}W(!0);try{await qe.post("review",{userId:K.userId,rating:Me.rating,comment:Me.comment.trim()});const v=await qe.post("user/public-profile",{userId:K.userId}),S=n?.userId,N=v.data.reviews||[],F=N.find(de=>de.reviewerId===S),te=N.filter(de=>de.reviewerId!==S).sort((de,he)=>new Date(he.createdAt)-new Date(de.createdAt)),X=F?[F,...te]:te,$=!!F;ie({...v.data,reviews:X,hasUserReview:$}),Fe(!1),be({rating:0,comment:""}),J("")}catch(v){console.error("Failed to submit review:",v),v.response?.data?.message?J(v.response.data.message):J("Failed to submit review. Please try again.")}finally{W(!1)}};return n.status==="Pending"?i.jsx("div",{className:"container",style:{paddingTop:"5rem"},children:i.jsxs("div",{className:"card text-center",style:{maxWidth:"600px",margin:"0 auto",padding:"3rem 2rem",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[i.jsx("div",{style:{fontSize:"4rem",marginBottom:"1.5rem"},children:""}),i.jsx("h2",{style:{color:"#1e293b",fontSize:"2rem",marginBottom:"1rem"},children:"Registration Pending"}),i.jsx("p",{style:{color:"#64748b",fontSize:"1.1rem",lineHeight:"1.6",marginBottom:"2rem"},children:"Thank you for joining as a Host! Your registration is currently being verified by our team. Once approved, you'll be able to see guests and start hosting."}),i.jsxs("div",{style:{padding:"1.5rem",background:"#f8fafc",borderRadius:"0.75rem",border:"1px solid #e2e8f0",color:"#475569",textAlign:"left"},children:[i.jsx("p",{style:{margin:"0 0 0.5rem 0"},children:i.jsx("strong",{children:"Next Steps:"})}),i.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[i.jsx("li",{children:"Admin verifies your payment"}),i.jsx("li",{children:'Your profile becomes "Active"'}),i.jsx("li",{children:"You receive guests' contact requests"})]})]})]})}):a?i.jsx("div",{className:"container",children:i.jsxs("div",{className:"loading",style:{padding:"4rem",textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),i.jsx("h3",{children:"Loading guests near you..."})]})}):i.jsxs("div",{className:"browse-layout",children:[i.jsxs("button",{className:"mobile-filter-toggle",onClick:v=>{v.stopPropagation(),I(!V)},children:[i.jsxs("span",{children:["Filter by Location ",p.length>0&&`(${p.length})`]}),V?i.jsx(bh,{size:16}):i.jsx(_l,{size:16})]}),i.jsxs("div",{className:`location-sidebar ${V?"mobile-visible":""}`,onClick:v=>v.stopPropagation(),children:[i.jsxs("div",{className:"filter-header",children:[i.jsxs("h3",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:Q?"default":"pointer",width:"100%"},onClick:()=>!Q&&z(!q),children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(vh,{size:20,style:{color:"var(--primary)"}}),"Filter by Location"]}),!Q&&i.jsx("span",{style:{color:"var(--primary)",fontSize:"1.2rem"},children:q?"":"+"})]}),i.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:p.length>0&&i.jsxs("button",{onClick:T,className:"clear-filters-btn",children:["Clear (",p.length,")"]})})]}),(Q||q)&&i.jsx("div",{className:"location-filters",children:Object.entries(fe).map(([v,S])=>i.jsxs("div",{className:"state-group",children:[i.jsxs("button",{className:"state-toggle",onClick:()=>B(v),children:[i.jsx("span",{children:v}),i.jsx("span",{className:"expand-icon",style:{color:"var(--primary)",background:"none",border:"none",borderRadius:"0",fontSize:"1.2rem"},children:u[v]?"-":"+"})]}),u[v]&&i.jsx("div",{className:"cities-list",children:S.map(N=>i.jsx("button",{className:`city-btn ${p.includes(N)?"selected":""}`,onClick:()=>C(N),children:N},N))})]},v))})]}),i.jsxs("div",{className:"browse-main",children:[i.jsxs("div",{className:"browse-header",children:[i.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Yd,{size:24,style:{color:"var(--primary)"}}),i.jsx("span",{style:{fontSize:"clamp(1.2rem, 4vw, 1.5rem)"},children:"Travellers Looking for Local Hosts"})]}),i.jsx("div",{className:"results-count",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:!a&&i.jsxs(i.Fragment,{children:[i.jsx(Gn,{size:16,style:{color:"var(--text-light)"}}),i.jsxs("span",{children:[g.length," guest",g.length!==1?"s":""," found"]})]})})]}),g.length===0?i.jsxs("div",{className:"no-results",children:[i.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),i.jsx("h3",{style:{color:"#1e293b"},children:p.length>0?"No guests found for selected locations":"No guests found right now"}),i.jsx("p",{style:{color:"#64748b"},children:p.length>0?"Try adjusting your location filters or check back later.":"Check back soon as more travelers discover local experiences!"}),p.length>0&&i.jsx("button",{onClick:T,className:"btn btn-outline",children:"Clear filters"})]}):i.jsx("div",{className:"compact-grid",children:g.map(v=>i.jsxs("div",{className:`host-card-horizontal ${ae===v.userId?"selected":""}`,onClick:()=>E(v),children:[i.jsxs("div",{className:"host-image-section",children:[i.jsx(or,{src:v.profileImageUrl,alt:v.name,className:"host-card-img",fallbackText:"Guest"}),i.jsx("button",{className:"chat-btn",onClick:S=>{S.stopPropagation(),console.log("Opening chat with guest:",{id:v.userId,name:v.name}),U(null),setTimeout(()=>{U({id:v.userId,name:v.name,imageUrl:v.profileImageUrl})},50)},title:`Chat with ${v.name}`,children:i.jsx(ii,{size:16})})]}),i.jsxs("div",{className:"host-content-section",children:[i.jsx("h3",{className:"host-name",children:v.name}),i.jsx("div",{className:"host-location",children:v.location?.split(",")[0]||"Location not specified"})]})]},v.userId))})]}),K&&i.jsx("div",{className:"modal-overlay",onClick:b,children:i.jsxs("div",{className:"modal-content",onClick:v=>v.stopPropagation(),style:{maxHeight:"90vh",overflowY:"auto"},children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h3",{children:K.name}),i.jsx("button",{onClick:b,className:"modal-close",children:""})]}),i.jsxs("div",{className:"modal-body",children:[i.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",alignItems:"flex-start"},children:[i.jsx(or,{src:K.profileImageUrl,alt:K.name,className:"modal-profile-image",fallbackText:"Guest",style:{flexShrink:0,width:"100px",height:"100px"}}),i.jsxs("div",{style:{flex:1},children:[i.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1.25rem"},children:K.name}),i.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:i.jsxs("span",{style:{color:"#64748b"},children:[" ",K.location]})}),i.jsxs("p",{style:{color:"#64748b",fontSize:"0.9rem",margin:"0"},children:[K.userType,"  Joined ",new Date(K.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"})]})]})]}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("h4",{style:{marginBottom:"0.75rem",color:"var(--text)"},children:K.userType==="Host"?" About My Hosting":" About Me"}),i.jsx("p",{style:{color:"#475569",lineHeight:"1.5",background:"#f8fafc",padding:"1rem",borderRadius:"0.5rem",margin:"0"},children:K.bio||"No description provided."})]}),i.jsxs("div",{children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[i.jsxs("h4",{style:{margin:"0",color:"var(--text)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[" Reviews (",K.totalReviews||K.reviews?.length||0,")",K.averageRating>0&&i.jsxs("span",{style:{fontSize:"0.9rem",color:"#64748b"},children:["(",K.averageRating.toFixed(1)," avg)"]})]}),!K.hasUserReview&&i.jsx("button",{className:"btn btn-outline",onClick:()=>Fe(!ze),style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:ze?"Cancel":"Write Review"})]}),ze&&i.jsxs("div",{className:"review-form",children:[M&&i.jsx("div",{className:"review-error",children:M}),i.jsxs("div",{style:{marginBottom:"0.75rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Rating:"}),i.jsx("div",{className:"rating-input",children:Array.from({length:5},(v,S)=>i.jsx("button",{type:"button",className:"rating-star",onClick:()=>{be(N=>({...N,rating:S+1})),J("")},style:{color:S<Me.rating?"#fbbf24":"#d1d5db"},children:""},S))})]}),i.jsxs("div",{style:{marginBottom:"0.75rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Comment:"}),i.jsx("textarea",{value:Me.comment,onChange:v=>{be(S=>({...S,comment:v.target.value})),J("")},placeholder:"Share your experience...",rows:3,style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",resize:"vertical",fontFamily:"inherit"}})]}),i.jsx("button",{className:"btn btn-primary",onClick:A,disabled:Ue,style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:Ue?"Submitting...":"Submit Review"})]}),K.reviews&&K.reviews.length>0&&i.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:K.reviews.map((v,S)=>{const N=v.reviewerId===n?.userId;return i.jsxs("div",{className:`review-item ${N?"user-review":""}`,children:[N&&i.jsx("div",{className:"user-review-badge",children:"Your Review"}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.25rem",paddingRight:N?"5rem":"0"},children:[i.jsx("strong",{style:{fontSize:"0.9rem"},children:v.reviewerName}),i.jsx("div",{className:"review-stars",children:Array.from({length:5},(F,te)=>i.jsx("span",{style:{color:te<v.rating?"#fbbf24":"#d1d5db"},children:""},te))})]}),i.jsx("p",{style:{margin:"0",fontSize:"0.85rem",color:"#475569",lineHeight:"1.4"},children:v.comment}),i.jsx("div",{className:"review-meta",children:new Date(v.createdAt).toLocaleDateString()})]},S)})}),(!K.reviews||K.reviews.length===0)&&!ze&&i.jsx("p",{style:{color:"#64748b",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:"No reviews yet. Be the first to share your experience!"})]})]})]})}),De&&i.jsx("div",{className:"modal-overlay",children:i.jsx("div",{className:"loading",style:{color:"white"},children:"Loading profile..."})}),k&&i.jsx(Gl,{recipientId:k.id,recipientName:k.name,recipientImageUrl:r.find(v=>v.userId===k.id)?.profileImageUrl,onClose:()=>U(null)})]})};function kr(n,r){var s={};for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&r.indexOf(a)<0&&(s[a]=n[a]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,a=Object.getOwnPropertySymbols(n);c<a.length;c++)r.indexOf(a[c])<0&&Object.prototype.propertyIsEnumerable.call(n,a[c])&&(s[a[c]]=n[a[c]]);return s}function Hy(n){var r=typeof Symbol=="function"&&Symbol.iterator,s=r&&n[r],a=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&a>=n.length&&(n=void 0),{value:n&&n[a++],done:!n}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function ct(n){return this instanceof ct?(this.v=n,this):new ct(n)}function ti(n,r,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(n,r||[]),c,u=[];return c=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",h),c[Symbol.asyncIterator]=function(){return this},c;function h(V){return function(I){return Promise.resolve(I).then(V,k)}}function p(V,I){a[V]&&(c[V]=function(q){return new Promise(function(z,Q){u.push([V,q,z,Q])>1||m(V,q)})},I&&(c[V]=I(c[V])))}function m(V,I){try{g(a[V](I))}catch(q){U(u[0][3],q)}}function g(V){V.value instanceof ct?Promise.resolve(V.value.v).then(y,k):U(u[0][2],V)}function y(V){m("next",V)}function k(V){m("throw",V)}function U(V,I){V(I),u.shift(),u.length&&m(u[0][0],u[0][1])}}function Tl(n){var r,s;return r={},a("next"),a("throw",function(c){throw c}),a("return"),r[Symbol.iterator]=function(){return this},r;function a(c,u){r[c]=n[c]?function(h){return(s=!s)?{value:ct(n[c](h)),done:!1}:u?u(h):h}:u}}function ni(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n[Symbol.asyncIterator],s;return r?r.call(n):(n=typeof Hy=="function"?Hy(n):n[Symbol.iterator](),s={},a("next"),a("throw"),a("return"),s[Symbol.asyncIterator]=function(){return this},s);function a(u){s[u]=n[u]&&function(h){return new Promise(function(p,m){h=n[u](h),c(p,m,h.done,h.value)})}}function c(u,h,p,m){Promise.resolve(m).then(function(g){u({value:g,done:p})},h)}}var Pd={exports:{}},dl,h2=new Uint8Array(16);function gv(){if(!dl&&(dl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!dl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return dl(h2)}const f2=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Yl(n){return typeof n=="string"&&f2.test(n)}var Xt=[];for(var Md=0;Md<256;++Md)Xt.push((Md+256).toString(16).substr(1));function Xl(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=(Xt[n[r+0]]+Xt[n[r+1]]+Xt[n[r+2]]+Xt[n[r+3]]+"-"+Xt[n[r+4]]+Xt[n[r+5]]+"-"+Xt[n[r+6]]+Xt[n[r+7]]+"-"+Xt[n[r+8]]+Xt[n[r+9]]+"-"+Xt[n[r+10]]+Xt[n[r+11]]+Xt[n[r+12]]+Xt[n[r+13]]+Xt[n[r+14]]+Xt[n[r+15]]).toLowerCase();if(!Yl(s))throw TypeError("Stringified UUID is invalid");return s}var qy,Od,Dd=0,Id=0;function p2(n,r,s){var a=r&&s||0,c=r||new Array(16);n=n||{};var u=n.node||qy,h=n.clockseq!==void 0?n.clockseq:Od;if(u==null||h==null){var p=n.random||(n.rng||gv)();u==null&&(u=qy=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),h==null&&(h=Od=(p[6]<<8|p[7])&16383)}var m=n.msecs!==void 0?n.msecs:Date.now(),g=n.nsecs!==void 0?n.nsecs:Id+1,y=m-Dd+(g-Id)/1e4;if(y<0&&n.clockseq===void 0&&(h=h+1&16383),(y<0||m>Dd)&&n.nsecs===void 0&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Dd=m,Id=g,Od=h,m+=122192928e5;var k=((m&268435455)*1e4+g)%4294967296;c[a++]=k>>>24&255,c[a++]=k>>>16&255,c[a++]=k>>>8&255,c[a++]=k&255;var U=m/4294967296*1e4&268435455;c[a++]=U>>>8&255,c[a++]=U&255,c[a++]=U>>>24&15|16,c[a++]=U>>>16&255,c[a++]=h>>>8|128,c[a++]=h&255;for(var V=0;V<6;++V)c[a+V]=u[V];return r||Xl(c)}function yv(n){if(!Yl(n))throw TypeError("Invalid UUID");var r,s=new Uint8Array(16);return s[0]=(r=parseInt(n.slice(0,8),16))>>>24,s[1]=r>>>16&255,s[2]=r>>>8&255,s[3]=r&255,s[4]=(r=parseInt(n.slice(9,13),16))>>>8,s[5]=r&255,s[6]=(r=parseInt(n.slice(14,18),16))>>>8,s[7]=r&255,s[8]=(r=parseInt(n.slice(19,23),16))>>>8,s[9]=r&255,s[10]=(r=parseInt(n.slice(24,36),16))/1099511627776&255,s[11]=r/4294967296&255,s[12]=r>>>24&255,s[13]=r>>>16&255,s[14]=r>>>8&255,s[15]=r&255,s}function m2(n){n=unescape(encodeURIComponent(n));for(var r=[],s=0;s<n.length;++s)r.push(n.charCodeAt(s));return r}var g2="6ba7b810-9dad-11d1-80b4-00c04fd430c8",y2="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function vv(n,r,s){function a(c,u,h,p){if(typeof c=="string"&&(c=m2(c)),typeof u=="string"&&(u=yv(u)),u.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var m=new Uint8Array(16+c.length);if(m.set(u),m.set(c,u.length),m=s(m),m[6]=m[6]&15|r,m[8]=m[8]&63|128,h){p=p||0;for(var g=0;g<16;++g)h[p+g]=m[g];return h}return Xl(m)}try{a.name=n}catch{}return a.DNS=g2,a.URL=y2,a}function v2(n){if(typeof n=="string"){var r=unescape(encodeURIComponent(n));n=new Uint8Array(r.length);for(var s=0;s<r.length;++s)n[s]=r.charCodeAt(s)}return b2(x2(S2(n),n.length*8))}function b2(n){for(var r=[],s=n.length*32,a="0123456789abcdef",c=0;c<s;c+=8){var u=n[c>>5]>>>c%32&255,h=parseInt(a.charAt(u>>>4&15)+a.charAt(u&15),16);r.push(h)}return r}function bv(n){return(n+64>>>9<<4)+14+1}function x2(n,r){n[r>>5]|=128<<r%32,n[bv(r)-1]=r;for(var s=1732584193,a=-271733879,c=-1732584194,u=271733878,h=0;h<n.length;h+=16){var p=s,m=a,g=c,y=u;s=Qt(s,a,c,u,n[h],7,-680876936),u=Qt(u,s,a,c,n[h+1],12,-389564586),c=Qt(c,u,s,a,n[h+2],17,606105819),a=Qt(a,c,u,s,n[h+3],22,-1044525330),s=Qt(s,a,c,u,n[h+4],7,-176418897),u=Qt(u,s,a,c,n[h+5],12,1200080426),c=Qt(c,u,s,a,n[h+6],17,-1473231341),a=Qt(a,c,u,s,n[h+7],22,-45705983),s=Qt(s,a,c,u,n[h+8],7,1770035416),u=Qt(u,s,a,c,n[h+9],12,-1958414417),c=Qt(c,u,s,a,n[h+10],17,-42063),a=Qt(a,c,u,s,n[h+11],22,-1990404162),s=Qt(s,a,c,u,n[h+12],7,1804603682),u=Qt(u,s,a,c,n[h+13],12,-40341101),c=Qt(c,u,s,a,n[h+14],17,-1502002290),a=Qt(a,c,u,s,n[h+15],22,1236535329),s=Zt(s,a,c,u,n[h+1],5,-165796510),u=Zt(u,s,a,c,n[h+6],9,-1069501632),c=Zt(c,u,s,a,n[h+11],14,643717713),a=Zt(a,c,u,s,n[h],20,-373897302),s=Zt(s,a,c,u,n[h+5],5,-701558691),u=Zt(u,s,a,c,n[h+10],9,38016083),c=Zt(c,u,s,a,n[h+15],14,-660478335),a=Zt(a,c,u,s,n[h+4],20,-405537848),s=Zt(s,a,c,u,n[h+9],5,568446438),u=Zt(u,s,a,c,n[h+14],9,-1019803690),c=Zt(c,u,s,a,n[h+3],14,-187363961),a=Zt(a,c,u,s,n[h+8],20,1163531501),s=Zt(s,a,c,u,n[h+13],5,-1444681467),u=Zt(u,s,a,c,n[h+2],9,-51403784),c=Zt(c,u,s,a,n[h+7],14,1735328473),a=Zt(a,c,u,s,n[h+12],20,-1926607734),s=en(s,a,c,u,n[h+5],4,-378558),u=en(u,s,a,c,n[h+8],11,-2022574463),c=en(c,u,s,a,n[h+11],16,1839030562),a=en(a,c,u,s,n[h+14],23,-35309556),s=en(s,a,c,u,n[h+1],4,-1530992060),u=en(u,s,a,c,n[h+4],11,1272893353),c=en(c,u,s,a,n[h+7],16,-155497632),a=en(a,c,u,s,n[h+10],23,-1094730640),s=en(s,a,c,u,n[h+13],4,681279174),u=en(u,s,a,c,n[h],11,-358537222),c=en(c,u,s,a,n[h+3],16,-722521979),a=en(a,c,u,s,n[h+6],23,76029189),s=en(s,a,c,u,n[h+9],4,-640364487),u=en(u,s,a,c,n[h+12],11,-421815835),c=en(c,u,s,a,n[h+15],16,530742520),a=en(a,c,u,s,n[h+2],23,-995338651),s=tn(s,a,c,u,n[h],6,-198630844),u=tn(u,s,a,c,n[h+7],10,1126891415),c=tn(c,u,s,a,n[h+14],15,-1416354905),a=tn(a,c,u,s,n[h+5],21,-57434055),s=tn(s,a,c,u,n[h+12],6,1700485571),u=tn(u,s,a,c,n[h+3],10,-1894986606),c=tn(c,u,s,a,n[h+10],15,-1051523),a=tn(a,c,u,s,n[h+1],21,-2054922799),s=tn(s,a,c,u,n[h+8],6,1873313359),u=tn(u,s,a,c,n[h+15],10,-30611744),c=tn(c,u,s,a,n[h+6],15,-1560198380),a=tn(a,c,u,s,n[h+13],21,1309151649),s=tn(s,a,c,u,n[h+4],6,-145523070),u=tn(u,s,a,c,n[h+11],10,-1120210379),c=tn(c,u,s,a,n[h+2],15,718787259),a=tn(a,c,u,s,n[h+9],21,-343485551),s=ri(s,p),a=ri(a,m),c=ri(c,g),u=ri(u,y)}return[s,a,c,u]}function S2(n){if(n.length===0)return[];for(var r=n.length*8,s=new Uint32Array(bv(r)),a=0;a<r;a+=8)s[a>>5]|=(n[a/8]&255)<<a%32;return s}function ri(n,r){var s=(n&65535)+(r&65535),a=(n>>16)+(r>>16)+(s>>16);return a<<16|s&65535}function w2(n,r){return n<<r|n>>>32-r}function Jl(n,r,s,a,c,u){return ri(w2(ri(ri(r,n),ri(a,u)),c),s)}function Qt(n,r,s,a,c,u,h){return Jl(r&s|~r&a,n,r,c,u,h)}function Zt(n,r,s,a,c,u,h){return Jl(r&a|s&~a,n,r,c,u,h)}function en(n,r,s,a,c,u,h){return Jl(r^s^a,n,r,c,u,h)}function tn(n,r,s,a,c,u,h){return Jl(s^(r|~a),n,r,c,u,h)}var C2=vv("v3",48,v2);function j2(n,r,s){n=n||{};var a=n.random||(n.rng||gv)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,r){s=s||0;for(var c=0;c<16;++c)r[s+c]=a[c];return r}return Xl(a)}function T2(n,r,s,a){switch(n){case 0:return r&s^~r&a;case 1:return r^s^a;case 2:return r&s^r&a^s&a;case 3:return r^s^a}}function Ud(n,r){return n<<r|n>>>32-r}function R2(n){var r=[1518500249,1859775393,2400959708,3395469782],s=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof n=="string"){var a=unescape(encodeURIComponent(n));n=[];for(var c=0;c<a.length;++c)n.push(a.charCodeAt(c))}else Array.isArray(n)||(n=Array.prototype.slice.call(n));n.push(128);for(var u=n.length/4+2,h=Math.ceil(u/16),p=new Array(h),m=0;m<h;++m){for(var g=new Uint32Array(16),y=0;y<16;++y)g[y]=n[m*64+y*4]<<24|n[m*64+y*4+1]<<16|n[m*64+y*4+2]<<8|n[m*64+y*4+3];p[m]=g}p[h-1][14]=(n.length-1)*8/Math.pow(2,32),p[h-1][14]=Math.floor(p[h-1][14]),p[h-1][15]=(n.length-1)*8&4294967295;for(var k=0;k<h;++k){for(var U=new Uint32Array(80),V=0;V<16;++V)U[V]=p[k][V];for(var I=16;I<80;++I)U[I]=Ud(U[I-3]^U[I-8]^U[I-14]^U[I-16],1);for(var q=s[0],z=s[1],Q=s[2],Y=s[3],fe=s[4],le=0;le<80;++le){var K=Math.floor(le/20),ie=Ud(q,5)+T2(K,z,Q,Y)+fe+r[K]+U[le]>>>0;fe=Y,Y=Q,Q=Ud(z,30)>>>0,z=q,q=ie}s[0]=s[0]+q>>>0,s[1]=s[1]+z>>>0,s[2]=s[2]+Q>>>0,s[3]=s[3]+Y>>>0,s[4]=s[4]+fe>>>0}return[s[0]>>24&255,s[0]>>16&255,s[0]>>8&255,s[0]&255,s[1]>>24&255,s[1]>>16&255,s[1]>>8&255,s[1]&255,s[2]>>24&255,s[2]>>16&255,s[2]>>8&255,s[2]&255,s[3]>>24&255,s[3]>>16&255,s[3]>>8&255,s[3]&255,s[4]>>24&255,s[4]>>16&255,s[4]>>8&255,s[4]&255]}var E2=vv("v5",80,R2);const k2="00000000-0000-0000-0000-000000000000";function A2(n){if(!Yl(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}const N2=Object.freeze(Object.defineProperty({__proto__:null,NIL:k2,parse:yv,stringify:Xl,v1:p2,v3:C2,v4:j2,v5:E2,validate:Yl,version:A2},Symbol.toStringTag,{value:"Module"})),_2=zl(N2);function xv(n,r){return n=Math.ceil(n),r=Math.floor(r),Math.floor(Math.random()*(r-n+1))+n}function Sv(n,r){const s=r.retryDelayInMs*Math.pow(2,n),a=Math.min(r.maxRetryDelayInMs,s);return{retryAfterInMs:a/2+xv(0,a/2)}}function kh(n){return typeof n=="object"&&n!==null&&!Array.isArray(n)&&!(n instanceof RegExp)&&!(n instanceof Date)}function Ah(n){if(kh(n)){const r=typeof n.name=="string",s=typeof n.message=="string";return r&&s}return!1}function Kl(n,r){switch(r){case"utf-8":return M2(n);case"base64":return wv(n);case"base64url":return P2(n);case"hex":return O2(n)}}function yn(n,r){switch(r){case"utf-8":return D2(n);case"base64":return Cv(n);case"base64url":return I2(n);case"hex":return U2(n)}}function wv(n){return btoa([...n].map(r=>String.fromCharCode(r)).join(""))}function P2(n){return wv(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function M2(n){return new TextDecoder().decode(n)}function O2(n){return[...n].map(r=>r.toString(16).padStart(2,"0")).join("")}function D2(n){return new TextEncoder().encode(n)}function Cv(n){return new Uint8Array([...atob(n)].map(r=>r.charCodeAt(0)))}function I2(n){const r=n.replace(/-/g,"+").replace(/_/g,"/");return Cv(r)}const $y=new Set("0123456789abcdefABCDEF");function U2(n){const r=new Uint8Array(n.length/2);for(let s=0;s<n.length/2;++s){const a=n[2*s],c=n[2*s+1];if(!$y.has(a)||!$y.has(c))return r.slice(0,s);r[s]=parseInt(`${a}${c}`,16)}return r}let hl;function jv(){if(hl)return hl;if(!self.crypto||!self.crypto.subtle)throw new Error("Your browser environment does not support cryptography functions.");return hl=self.crypto.subtle,hl}async function z2(n,r,s){const a=jv(),c=yn(n,"base64"),u=yn(r,"utf-8"),h=await a.importKey("raw",c,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),p=await a.sign({name:"HMAC",hash:{name:"SHA-256"}},h,u);return Kl(new Uint8Array(p),s)}async function L2(n,r){const s=yn(n,"utf-8"),a=await jv().digest({name:"SHA-256"},s);return Kl(new Uint8Array(a),r)}function B2(){let n="";for(let r=0;r<32;r++){const s=Math.floor(Math.random()*16);r===12?n+="4":r===16?n+=s&3|8:n+=s.toString(16),(r===7||r===11||r===15||r===19)&&(n+="-")}return n}const H2=typeof globalThis?.crypto?.randomUUID=="function"?globalThis.crypto.randomUUID.bind(globalThis.crypto):B2;function Nh(){return H2()}const q2=typeof window<"u"&&typeof window.document<"u",$2=typeof self=="object"&&typeof self?.importScripts=="function"&&(self.constructor?.name==="DedicatedWorkerGlobalScope"||self.constructor?.name==="ServiceWorkerGlobalScope"||self.constructor?.name==="SharedWorkerGlobalScope"),Tv=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u",Rv=typeof Bun<"u"&&typeof Bun.version<"u",oi=typeof globalThis.process<"u"&&!!globalThis.process.version&&!!globalThis.process.versions?.node,F2=oi&&!Rv&&!Tv,V2=typeof navigator<"u"&&navigator?.product==="ReactNative",zd="REDACTED",W2=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],G2=["api-version"];class _h{allowedHeaderNames;allowedQueryParameters;constructor({additionalAllowedHeaderNames:r=[],additionalAllowedQueryParameters:s=[]}={}){r=W2.concat(r),s=G2.concat(s),this.allowedHeaderNames=new Set(r.map(a=>a.toLowerCase())),this.allowedQueryParameters=new Set(s.map(a=>a.toLowerCase()))}sanitize(r){const s=new Set;return JSON.stringify(r,(a,c)=>{if(c instanceof Error)return{...c,name:c.name,message:c.message};if(a==="headers")return this.sanitizeHeaders(c);if(a==="url")return this.sanitizeUrl(c);if(a==="query")return this.sanitizeQuery(c);if(a==="body")return;if(a==="response")return;if(a==="operationSpec")return;if(Array.isArray(c)||kh(c)){if(s.has(c))return"[Circular]";s.add(c)}return c},2)}sanitizeUrl(r){if(typeof r!="string"||r===null||r==="")return r;const s=new URL(r);if(!s.search)return r;for(const[a]of s.searchParams)this.allowedQueryParameters.has(a.toLowerCase())||s.searchParams.set(a,zd);return s.toString()}sanitizeHeaders(r){const s={};for(const a of Object.keys(r))this.allowedHeaderNames.has(a.toLowerCase())?s[a]=r[a]:s[a]=zd;return s}sanitizeQuery(r){if(typeof r!="object"||r===null)return r;const s={};for(const a of Object.keys(r))this.allowedQueryParameters.has(a.toLowerCase())?s[a]=r[a]:s[a]=zd;return s}}async function Y2(n,r){const s=new AbortController;function a(){s.abort()}r?.abortSignal?.addEventListener("abort",a);try{return await Promise.race(n.map(c=>c({abortSignal:s.signal})))}finally{s.abort(),r?.abortSignal?.removeEventListener("abort",a)}}let X2=class extends Error{constructor(r){super(r),this.name="AbortError"}};function Ev(n,r){const{cleanupBeforeAbort:s,abortSignal:a,abortErrorMsg:c}=r??{};return new Promise((u,h)=>{function p(){h(new X2(c??"The operation was aborted."))}function m(){a?.removeEventListener("abort",g)}function g(){s?.(),m(),p()}if(a?.aborted)return p();try{n(y=>{m(),u(y)},y=>{m(),h(y)})}catch(y){h(y)}a?.addEventListener("abort",g)})}const J2="The delay was aborted.";function kv(n,r){let s;const{abortSignal:a,abortErrorMsg:c}=r??{};return Ev(u=>{s=setTimeout(u,n)},{cleanupBeforeAbort:()=>clearTimeout(s),abortSignal:a,abortErrorMsg:c??J2})}function Go(n){if(Ah(n))return n.message;{let r;try{typeof n=="object"&&n?r=JSON.stringify(n):r=String(n)}catch{r="[unable to stringify input]"}return`Unknown error ${r}`}}function Ph(n){return typeof n<"u"&&n!==null}function K2(n,r){if(!Ph(n)||typeof n!="object")return!1;for(const s of r)if(!Av(n,s))return!1;return!0}function Av(n,r){return Ph(n)&&typeof n=="object"&&r in n}function Q2(n,r){return Sv(n,r)}function Z2(n,r){return L2(n,r)}function eE(n,r,s){return z2(n,r,s)}function tE(n,r){return xv(n,r)}function Nv(n){return Ah(n)}function nE(n){return kh(n)}function _v(){return Nh()}const rE=q2,iE=Rv,sE=Tv,oE=oi,Ol=oi,aE=F2,lE=V2,cE=$2;function uE(n,r){return Kl(n,r)}function dE(n,r){return yn(n,r)}const hE=Object.freeze(Object.defineProperty({__proto__:null,calculateRetryDelay:Q2,cancelablePromiseRace:Y2,computeSha256Hash:Z2,computeSha256Hmac:eE,createAbortablePromise:Ev,delay:kv,getErrorMessage:Go,getRandomIntegerInclusive:tE,isBrowser:rE,isBun:iE,isDefined:Ph,isDeno:sE,isError:Nv,isNode:oE,isNodeLike:Ol,isNodeRuntime:aE,isObject:nE,isObjectWithProperties:K2,isReactNative:lE,isWebWorker:cE,objectHasProperty:Av,randomUUID:_v,stringToUint8Array:dE,uint8ArrayToString:uE},Symbol.toStringTag,{value:"Module"})),fE=zl(hE);function Pv(n){let r="";for(let s=0;s<n.length;s++)r+=String.fromCharCode(n[s]);return btoa(r)}function Mv(n){const r=atob(n),s=new Uint8Array(r.length);for(let a=0;a<r.length;a++)s[a]=r.charCodeAt(a);return s}function pE(n){return atob(n)}const $t="$",ws="_";function mE(n,r){return r!=="Composite"&&r!=="Dictionary"&&(typeof n=="string"||typeof n=="number"||typeof n=="boolean"||r?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||n===void 0||n===null)}const gE=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function yE(n){return gE.test(n)}const vE=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function bE(n){return vE.test(n)}function xE(n){const r={...n.headers,...n.body};return n.hasNullableType&&Object.getOwnPropertyNames(r).length===0?n.shouldWrapBody?{body:null}:null:n.shouldWrapBody?{...n.headers,body:n.body}:r}function Fy(n,r){const s=n.parsedHeaders;if(n.request.method==="HEAD")return{...s,body:n.parsedBody};const a=r&&r.bodyMapper,c=!!a?.nullable,u=a?.type.name;if(u==="Stream")return{...s,blobBody:n.blobBody,readableStreamBody:n.readableStreamBody};const h=u==="Composite"&&a.type.modelProperties||{},p=Object.keys(h).some(m=>h[m].serializedName==="");if(u==="Sequence"||p){const m=n.parsedBody??[];for(const g of Object.keys(h))h[g].serializedName&&(m[g]=n.parsedBody?.[g]);if(s)for(const g of Object.keys(s))m[g]=s[g];return c&&!n.parsedBody&&!s&&Object.getOwnPropertyNames(h).length===0?null:m}return xE({body:n.parsedBody,headers:s,hasNullableType:c,shouldWrapBody:mE(n.parsedBody,u)})}class SE{modelMappers;isXML;constructor(r={},s=!1){this.modelMappers=r,this.isXML=s}validateConstraints(r,s,a){const c=(u,h)=>{throw new Error(`"${a}" with value "${s}" should satisfy the constraint "${u}": ${h}.`)};if(r.constraints&&s!==void 0&&s!==null){const{ExclusiveMaximum:u,ExclusiveMinimum:h,InclusiveMaximum:p,InclusiveMinimum:m,MaxItems:g,MaxLength:y,MinItems:k,MinLength:U,MultipleOf:V,Pattern:I,UniqueItems:q}=r.constraints;if(u!==void 0&&s>=u&&c("ExclusiveMaximum",u),h!==void 0&&s<=h&&c("ExclusiveMinimum",h),p!==void 0&&s>p&&c("InclusiveMaximum",p),m!==void 0&&s<m&&c("InclusiveMinimum",m),g!==void 0&&s.length>g&&c("MaxItems",g),y!==void 0&&s.length>y&&c("MaxLength",y),k!==void 0&&s.length<k&&c("MinItems",k),U!==void 0&&s.length<U&&c("MinLength",U),V!==void 0&&s%V!==0&&c("MultipleOf",V),I){const z=typeof I=="string"?new RegExp(I):I;(typeof s!="string"||s.match(z)===null)&&c("Pattern",I)}q&&s.some((z,Q,Y)=>Y.indexOf(z)!==Q)&&c("UniqueItems",q)}}serialize(r,s,a,c={xml:{}}){const u={xml:{rootName:c.xml.rootName??"",includeRoot:c.xml.includeRoot??!1,xmlCharKey:c.xml.xmlCharKey??ws}};let h={};const p=r.type.name;a||(a=r.serializedName),p.match(/^Sequence$/i)!==null&&(h=[]),r.isConstant&&(s=r.defaultValue);const{required:m,nullable:g}=r;if(m&&g&&s===void 0)throw new Error(`${a} cannot be undefined.`);if(m&&!g&&s==null)throw new Error(`${a} cannot be null or undefined.`);if(!m&&g===!1&&s===null)throw new Error(`${a} cannot be null.`);return s==null||p.match(/^any$/i)!==null?h=s:p.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)!==null?h=EE(p,a,s):p.match(/^Enum$/i)!==null?h=kE(a,r.type.allowedValues,s):p.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)!==null?h=_E(p,s,a):p.match(/^ByteArray$/i)!==null?h=AE(a,s):p.match(/^Base64Url$/i)!==null?h=NE(a,s):p.match(/^Sequence$/i)!==null?h=PE(this,r,s,a,!!this.isXML,u):p.match(/^Dictionary$/i)!==null?h=ME(this,r,s,a,!!this.isXML,u):p.match(/^Composite$/i)!==null&&(h=DE(this,r,s,a,!!this.isXML,u)),h}deserialize(r,s,a,c={xml:{}}){const u={xml:{rootName:c.xml.rootName??"",includeRoot:c.xml.includeRoot??!1,xmlCharKey:c.xml.xmlCharKey??ws},ignoreUnknownProperties:c.ignoreUnknownProperties??!1};if(s==null)return this.isXML&&r.type.name==="Sequence"&&!r.xmlIsWrapped&&(s=[]),r.defaultValue!==void 0&&(s=r.defaultValue),s;let h;const p=r.type.name;if(a||(a=r.serializedName),p.match(/^Composite$/i)!==null)h=UE(this,r,s,a,u);else{if(this.isXML){const m=u.xml.xmlCharKey;s[$t]!==void 0&&s[m]!==void 0&&(s=s[m])}p.match(/^Number$/i)!==null?(h=parseFloat(s),isNaN(h)&&(h=s)):p.match(/^Boolean$/i)!==null?s==="true"?h=!0:s==="false"?h=!1:h=s:p.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)!==null?h=s:p.match(/^(Date|DateTime|DateTimeRfc1123)$/i)!==null?h=new Date(s):p.match(/^UnixTime$/i)!==null?h=RE(s):p.match(/^ByteArray$/i)!==null?h=Mv(s):p.match(/^Base64Url$/i)!==null?h=jE(s):p.match(/^Sequence$/i)!==null?h=LE(this,r,s,a,u):p.match(/^Dictionary$/i)!==null&&(h=zE(this,r,s,a,u))}return r.isConstant&&(h=r.defaultValue),h}}function Mh(n={},r=!1){return new SE(n,r)}function wE(n,r){let s=n.length;for(;s-1>=0&&n[s-1]===r;)--s;return n.substr(0,s)}function CE(n){if(!n)return;if(!(n instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");const r=Pv(n);return wE(r,"=").replace(/\+/g,"-").replace(/\//g,"_")}function jE(n){if(n){if(n&&typeof n.valueOf()!="string")throw new Error("Please provide an input of type string for converting to Uint8Array");return n=n.replace(/-/g,"+").replace(/_/g,"/"),Mv(n)}}function Zd(n){const r=[];let s="";if(n){const a=n.split(".");for(const c of a)c.charAt(c.length-1)==="\\"?s+=c.substr(0,c.length-1)+".":(s+=c,r.push(s),s="")}return r}function TE(n){if(n)return typeof n.valueOf()=="string"&&(n=new Date(n)),Math.floor(n.getTime()/1e3)}function RE(n){if(n)return new Date(n*1e3)}function EE(n,r,s){if(s!=null){if(n.match(/^Number$/i)!==null){if(typeof s!="number")throw new Error(`${r} with value ${s} must be of type number.`)}else if(n.match(/^String$/i)!==null){if(typeof s.valueOf()!="string")throw new Error(`${r} with value "${s}" must be of type string.`)}else if(n.match(/^Uuid$/i)!==null){if(!(typeof s.valueOf()=="string"&&bE(s)))throw new Error(`${r} with value "${s}" must be of type string and a valid uuid.`)}else if(n.match(/^Boolean$/i)!==null){if(typeof s!="boolean")throw new Error(`${r} with value ${s} must be of type boolean.`)}else if(n.match(/^Stream$/i)!==null){const a=typeof s;if(a!=="string"&&typeof s.pipe!="function"&&typeof s.tee!="function"&&!(s instanceof ArrayBuffer)&&!ArrayBuffer.isView(s)&&!((typeof Blob=="function"||typeof Blob=="object")&&s instanceof Blob)&&a!=="function")throw new Error(`${r} must be a string, Blob, ArrayBuffer, ArrayBufferView, ReadableStream, or () => ReadableStream.`)}}return s}function kE(n,r,s){if(!r)throw new Error(`Please provide a set of allowedValues to validate ${n} as an Enum Type.`);if(!r.some(c=>typeof c.valueOf()=="string"?c.toLowerCase()===s.toLowerCase():c===s))throw new Error(`${s} is not a valid value for ${n}. The valid values are: ${JSON.stringify(r)}.`);return s}function AE(n,r){if(r!=null){if(!(r instanceof Uint8Array))throw new Error(`${n} must be of type Uint8Array.`);r=Pv(r)}return r}function NE(n,r){if(r!=null){if(!(r instanceof Uint8Array))throw new Error(`${n} must be of type Uint8Array.`);r=CE(r)}return r}function _E(n,r,s){if(r!=null){if(n.match(/^Date$/i)!==null){if(!(r instanceof Date||typeof r.valueOf()=="string"&&!isNaN(Date.parse(r))))throw new Error(`${s} must be an instanceof Date or a string in ISO8601 format.`);r=r instanceof Date?r.toISOString().substring(0,10):new Date(r).toISOString().substring(0,10)}else if(n.match(/^DateTime$/i)!==null){if(!(r instanceof Date||typeof r.valueOf()=="string"&&!isNaN(Date.parse(r))))throw new Error(`${s} must be an instanceof Date or a string in ISO8601 format.`);r=r instanceof Date?r.toISOString():new Date(r).toISOString()}else if(n.match(/^DateTimeRfc1123$/i)!==null){if(!(r instanceof Date||typeof r.valueOf()=="string"&&!isNaN(Date.parse(r))))throw new Error(`${s} must be an instanceof Date or a string in RFC-1123 format.`);r=r instanceof Date?r.toUTCString():new Date(r).toUTCString()}else if(n.match(/^UnixTime$/i)!==null){if(!(r instanceof Date||typeof r.valueOf()=="string"&&!isNaN(Date.parse(r))))throw new Error(`${s} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);r=TE(r)}else if(n.match(/^TimeSpan$/i)!==null&&!yE(r))throw new Error(`${s} must be a string in ISO 8601 format. Instead was "${r}".`)}return r}function PE(n,r,s,a,c,u){if(!Array.isArray(s))throw new Error(`${a} must be of type Array.`);let h=r.type.element;if(!h||typeof h!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${a}.`);h.type.name==="Composite"&&h.type.className&&(h=n.modelMappers[h.type.className]??h);const p=[];for(let m=0;m<s.length;m++){const g=n.serialize(h,s[m],a,u);if(c&&h.xmlNamespace){const y=h.xmlNamespacePrefix?`xmlns:${h.xmlNamespacePrefix}`:"xmlns";h.type.name==="Composite"?(p[m]={...g},p[m][$t]={[y]:h.xmlNamespace}):(p[m]={},p[m][u.xml.xmlCharKey]=g,p[m][$t]={[y]:h.xmlNamespace})}else p[m]=g}return p}function ME(n,r,s,a,c,u){if(typeof s!="object")throw new Error(`${a} must be of type object.`);const h=r.type.value;if(!h||typeof h!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${a}.`);const p={};for(const m of Object.keys(s)){const g=n.serialize(h,s[m],a,u);p[m]=Iv(h,g,c,u)}if(c&&r.xmlNamespace){const m=r.xmlNamespacePrefix?`xmlns:${r.xmlNamespacePrefix}`:"xmlns",g=p;return g[$t]={[m]:r.xmlNamespace},g}return p}function OE(n,r,s){const a=r.type.additionalProperties;return!a&&r.type.className?Ov(n,r,s)?.type.additionalProperties:a}function Ov(n,r,s){const a=r.type.className;if(!a)throw new Error(`Class name for model "${s}" is not provided in the mapper "${JSON.stringify(r,void 0,2)}".`);return n.modelMappers[a]}function Dv(n,r,s){let a=r.type.modelProperties;if(!a){const c=Ov(n,r,s);if(!c)throw new Error(`mapper() cannot be null or undefined for model "${r.type.className}".`);if(a=c?.type.modelProperties,!a)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(c)}" of type "${r.type.className}" for object "${s}".`)}return a}function DE(n,r,s,a,c,u){if(Dl(n,r)&&(r=Uv(n,r,s,"clientName")),s!=null){const h={},p=Dv(n,r,a);for(const g of Object.keys(p)){const y=p[g];if(y.readOnly)continue;let k,U=h;if(n.isXML)y.xmlIsWrapped?k=y.xmlName:k=y.xmlElementName||y.xmlName;else{const V=Zd(y.serializedName);k=V.pop();for(const I of V){const q=U[I];q==null&&(s[g]!==void 0&&s[g]!==null||y.defaultValue!==void 0)&&(U[I]={}),U=U[I]}}if(U!=null){if(c&&r.xmlNamespace){const Q=r.xmlNamespacePrefix?`xmlns:${r.xmlNamespacePrefix}`:"xmlns";U[$t]={...U[$t],[Q]:r.xmlNamespace}}const V=y.serializedName!==""?a+"."+y.serializedName:a;let I=s[g];const q=Dl(n,r);q&&q.clientName===g&&I==null&&(I=r.serializedName);const z=n.serialize(y,I,V,u);if(z!==void 0&&k!==void 0&&k!==null){const Q=Iv(y,z,c,u);c&&y.xmlIsAttribute?(U[$t]=U[$t]||{},U[$t][k]=z):c&&y.xmlIsWrapped?U[k]={[y.xmlElementName]:Q}:U[k]=Q}}}const m=OE(n,r,a);if(m){const g=Object.keys(p);for(const y in s)g.every(U=>U!==y)&&(h[y]=n.serialize(m,s[y],a+'["'+y+'"]',u))}return h}return s}function Iv(n,r,s,a){if(!s||!n.xmlNamespace)return r;const u={[n.xmlNamespacePrefix?`xmlns:${n.xmlNamespacePrefix}`:"xmlns"]:n.xmlNamespace};if(["Composite"].includes(n.type.name)){if(r[$t])return r;{const p={...r};return p[$t]=u,p}}const h={};return h[a.xml.xmlCharKey]=r,h[$t]=u,h}function IE(n,r){return[$t,r.xml.xmlCharKey].includes(n)}function UE(n,r,s,a,c){const u=c.xml.xmlCharKey??ws;Dl(n,r)&&(r=Uv(n,r,s,"serializedName"));const h=Dv(n,r,a);let p={};const m=[];for(const y of Object.keys(h)){const k=h[y],U=Zd(h[y].serializedName);m.push(U[0]);const{serializedName:V,xmlName:I,xmlElementName:q}=k;let z=a;V!==""&&V!==void 0&&(z=a+"."+V);const Q=k.headerCollectionPrefix;if(Q){const Y={};for(const fe of Object.keys(s))fe.startsWith(Q)&&(Y[fe.substring(Q.length)]=n.deserialize(k.type.value,s[fe],z,c)),m.push(fe);p[y]=Y}else if(n.isXML)if(k.xmlIsAttribute&&s[$t])p[y]=n.deserialize(k,s[$t][I],z,c);else if(k.xmlIsMsText)s[u]!==void 0?p[y]=s[u]:typeof s=="string"&&(p[y]=s);else{const Y=q||I||V;if(k.xmlIsWrapped){const le=s[I]?.[q]??[];p[y]=n.deserialize(k,le,z,c),m.push(I)}else{const fe=s[Y];p[y]=n.deserialize(k,fe,z,c),m.push(Y)}}else{let Y,fe=s,le=0;for(const ae of U){if(!fe)break;le++,fe=fe[ae]}fe===null&&le<U.length&&(fe=void 0),Y=fe;const K=r.type.polymorphicDiscriminator;K&&y===K.clientName&&Y==null&&(Y=r.serializedName);let ie;if(Array.isArray(s[y])&&h[y].serializedName===""){Y=s[y];const ae=n.deserialize(k,Y,z,c);for(const[Ce,De]of Object.entries(p))Object.prototype.hasOwnProperty.call(ae,Ce)||(ae[Ce]=De);p=ae}else(Y!==void 0||k.defaultValue!==void 0)&&(ie=n.deserialize(k,Y,z,c),p[y]=ie)}}const g=r.type.additionalProperties;if(g){const y=k=>{for(const U in h)if(Zd(h[U].serializedName)[0]===k)return!1;return!0};for(const k in s)y(k)&&(p[k]=n.deserialize(g,s[k],a+'["'+k+'"]',c))}else if(s&&!c.ignoreUnknownProperties)for(const y of Object.keys(s))p[y]===void 0&&!m.includes(y)&&!IE(y,c)&&(p[y]=s[y]);return p}function zE(n,r,s,a,c){const u=r.type.value;if(!u||typeof u!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${a}`);if(s){const h={};for(const p of Object.keys(s))h[p]=n.deserialize(u,s[p],a,c);return h}return s}function LE(n,r,s,a,c){let u=r.type.element;if(!u||typeof u!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${a}`);if(s){Array.isArray(s)||(s=[s]),u.type.name==="Composite"&&u.type.className&&(u=n.modelMappers[u.type.className]??u);const h=[];for(let p=0;p<s.length;p++)h[p]=n.deserialize(u,s[p],`${a}[${p}]`,c);return h}return s}function BE(n,r,s){const a=[s];for(;a.length;){const c=a.shift(),u=r===c?r:c+"."+r;if(Object.prototype.hasOwnProperty.call(n,u))return n[u];for(const[h,p]of Object.entries(n))h.startsWith(c+".")&&p.type.uberParent===c&&p.type.className&&a.push(p.type.className)}}function Uv(n,r,s,a){const c=Dl(n,r);if(c){let u=c[a];if(u){a==="serializedName"&&(u=u.replace(/\\/gi,""));const h=s[u],p=r.type.uberParent??r.type.className;if(typeof h=="string"&&p){const m=BE(n.modelMappers.discriminators,h,p);m&&(r=m)}}}return r}function Dl(n,r){return r.type.polymorphicDiscriminator||Vy(n,r.type.uberParent)||Vy(n,r.type.className)}function Vy(n,r){return r&&n.modelMappers[r]&&n.modelMappers[r].type.polymorphicDiscriminator}const Ai={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};class Oh extends Error{constructor(r){super(r),this.name="AbortError"}}function HE(...n){if(n.length>0){const r=String(n[0]);r.includes(":error")?console.error(...n):r.includes(":warning")?console.warn(...n):r.includes(":info")?console.info(...n):r.includes(":verbose")?console.debug(...n):console.debug(...n)}}var Wy={};const Gy=typeof process<"u"&&Wy&&Wy.DEBUG||void 0;let zv,eh=[],th=[];const Il=[];Gy&&Dh(Gy);const bs=Object.assign(n=>Lv(n),{enable:Dh,enabled:Ih,disable:qE,log:HE});function Dh(n){zv=n,eh=[],th=[];const r=n.split(",").map(s=>s.trim());for(const s of r)s.startsWith("-")?th.push(s.substring(1)):eh.push(s);for(const s of Il)s.enabled=Ih(s.namespace)}function Ih(n){if(n.endsWith("*"))return!0;for(const r of th)if(Yy(n,r))return!1;for(const r of eh)if(Yy(n,r))return!0;return!1}function Yy(n,r){if(r.indexOf("*")===-1)return n===r;let s=r;if(r.indexOf("**")!==-1){const U=[];let V="";for(const I of r)I==="*"&&V==="*"||(V=I,U.push(I));s=U.join("")}let a=0,c=0;const u=s.length,h=n.length;let p=-1,m=-1;for(;a<h&&c<u;)if(s[c]==="*"){if(p=c,c++,c===u)return!0;for(;n[a]!==s[c];)if(a++,a===h)return!1;m=a,a++,c++;continue}else if(s[c]===n[a])c++,a++;else if(p>=0){if(c=p+1,a=m+1,a===h)return!1;for(;n[a]!==s[c];)if(a++,a===h)return!1;m=a,a++,c++;continue}else return!1;const g=a===n.length,y=c===s.length,k=c===s.length-1&&s[c]==="*";return g&&(y||k)}function qE(){const n=zv||"";return Dh(""),n}function Lv(n){const r=Object.assign(s,{enabled:Ih(n),destroy:$E,log:bs.log,namespace:n,extend:FE});function s(...a){r.enabled&&(a.length>0&&(a[0]=`${n} ${a[0]}`),r.log(...a))}return Il.push(r),r}function $E(){const n=Il.indexOf(this);return n>=0?(Il.splice(n,1),!0):!1}function FE(n){const r=Lv(`${this.namespace}:${n}`);return r.log=this.log,r}var Xy={};const nh=["verbose","info","warning","error"],Jy={verbose:400,info:300,warning:200,error:100};function Ky(n,r){r.log=(...s)=>{n.log(...s)}}function Qy(n){return nh.includes(n)}function Bv(n){const r=new Set,s=typeof process<"u"&&Xy&&Xy[n.logLevelEnvVarName]||void 0;let a;const c=bs(n.namespace);c.log=(...y)=>{bs.log(...y)};function u(y){if(y&&!Qy(y))throw new Error(`Unknown log level '${y}'. Acceptable values: ${nh.join(",")}`);a=y;const k=[];for(const U of r)h(U)&&k.push(U.namespace);bs.enable(k.join(","))}s&&(Qy(s)?u(s):console.error(`${n.logLevelEnvVarName} set to unknown log level '${s}'; logging is not enabled. Acceptable values: ${nh.join(", ")}.`));function h(y){return!!(a&&Jy[y.level]<=Jy[a])}function p(y,k){const U=Object.assign(y.extend(k),{level:k});if(Ky(y,U),h(U)){const V=bs.disable();bs.enable(V+","+U.namespace)}return r.add(U),U}function m(){return a}function g(y){const k=c.extend(y);return Ky(c,k),{error:p(k,"error"),warning:p(k,"warning"),info:p(k,"info"),verbose:p(k,"verbose")}}return{setLogLevel:u,getLogLevel:m,createClientLogger:g,logger:c}}const VE=Bv({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"});function Hv(n){return VE.createClientLogger(n)}function fl(n){return n.toLowerCase()}function*WE(n){for(const r of n.values())yield[r.name,r.value]}class GE{_headersMap;constructor(r){if(this._headersMap=new Map,r)for(const s of Object.keys(r))this.set(s,r[s])}set(r,s){this._headersMap.set(fl(r),{name:r,value:String(s).trim()})}get(r){return this._headersMap.get(fl(r))?.value}has(r){return this._headersMap.has(fl(r))}delete(r){this._headersMap.delete(fl(r))}toJSON(r={}){const s={};if(r.preserveCase)for(const a of this._headersMap.values())s[a.name]=a.value;else for(const[a,c]of this._headersMap)s[a]=c.value;return s}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return WE(this._headersMap)}}function Pi(n){return new GE(n)}class YE{url;method;headers;timeout;withCredentials;body;multipartBody;formData;streamResponseStatusCodes;enableBrowserStreams;proxySettings;disableKeepAlive;abortSignal;requestId;allowInsecureConnection;onUploadProgress;onDownloadProgress;requestOverrides;authSchemes;constructor(r){this.url=r.url,this.body=r.body,this.headers=r.headers??Pi(),this.method=r.method??"GET",this.timeout=r.timeout??0,this.multipartBody=r.multipartBody,this.formData=r.formData,this.disableKeepAlive=r.disableKeepAlive??!1,this.proxySettings=r.proxySettings,this.streamResponseStatusCodes=r.streamResponseStatusCodes,this.withCredentials=r.withCredentials??!1,this.abortSignal=r.abortSignal,this.onUploadProgress=r.onUploadProgress,this.onDownloadProgress=r.onDownloadProgress,this.requestId=r.requestId||Nh(),this.allowInsecureConnection=r.allowInsecureConnection??!1,this.enableBrowserStreams=r.enableBrowserStreams??!1,this.requestOverrides=r.requestOverrides,this.authSchemes=r.authSchemes}}function qv(n){return new YE(n)}const Zy=new Set(["Deserialize","Serialize","Retry","Sign"]);class Ul{_policies=[];_orderedPolicies;constructor(r){this._policies=r?.slice(0)??[],this._orderedPolicies=void 0}addPolicy(r,s={}){if(s.phase&&s.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(s.phase&&!Zy.has(s.phase))throw new Error(`Invalid phase name: ${s.phase}`);if(s.afterPhase&&!Zy.has(s.afterPhase))throw new Error(`Invalid afterPhase name: ${s.afterPhase}`);this._policies.push({policy:r,options:s}),this._orderedPolicies=void 0}removePolicy(r){const s=[];return this._policies=this._policies.filter(a=>r.name&&a.policy.name===r.name||r.phase&&a.options.phase===r.phase?(s.push(a.policy),!1):!0),this._orderedPolicies=void 0,s}sendRequest(r,s){return this.getOrderedPolicies().reduceRight((u,h)=>p=>h.sendRequest(p,u),u=>r.sendRequest(u))(s)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new Ul(this._policies)}static create(){return new Ul}orderPolicies(){const r=[],s=new Map;function a(I){return{name:I,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}const c=a("Serialize"),u=a("None"),h=a("Deserialize"),p=a("Retry"),m=a("Sign"),g=[c,u,h,p,m];function y(I){return I==="Retry"?p:I==="Serialize"?c:I==="Deserialize"?h:I==="Sign"?m:u}for(const I of this._policies){const q=I.policy,z=I.options,Q=q.name;if(s.has(Q))throw new Error("Duplicate policy names not allowed in pipeline");const Y={policy:q,dependsOn:new Set,dependants:new Set};z.afterPhase&&(Y.afterPhase=y(z.afterPhase),Y.afterPhase.hasAfterPolicies=!0),s.set(Q,Y),y(z.phase).policies.add(Y)}for(const I of this._policies){const{policy:q,options:z}=I,Q=q.name,Y=s.get(Q);if(!Y)throw new Error(`Missing node for policy ${Q}`);if(z.afterPolicies)for(const fe of z.afterPolicies){const le=s.get(fe);le&&(Y.dependsOn.add(le),le.dependants.add(Y))}if(z.beforePolicies)for(const fe of z.beforePolicies){const le=s.get(fe);le&&(le.dependsOn.add(Y),Y.dependants.add(le))}}function k(I){I.hasRun=!0;for(const q of I.policies)if(!(q.afterPhase&&(!q.afterPhase.hasRun||q.afterPhase.policies.size))&&q.dependsOn.size===0){r.push(q.policy);for(const z of q.dependants)z.dependsOn.delete(q);s.delete(q.policy.name),I.policies.delete(q)}}function U(){for(const I of g){if(k(I),I.policies.size>0&&I!==u){u.hasRun||k(u);return}I.hasAfterPolicies&&k(u)}}let V=0;for(;s.size>0;){V++;const I=r.length;if(U(),r.length<=I&&V>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return r}}function $v(){return Ul.create()}const XE=Symbol(),JE=new _h;let Mi=class Fv extends Error{static REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";static PARSE_ERROR="PARSE_ERROR";code;statusCode;request;response;details;constructor(r,s={}){super(r),this.name="RestError",this.code=s.code,this.statusCode=s.statusCode,Object.defineProperty(this,"request",{value:s.request,enumerable:!1}),Object.defineProperty(this,"response",{value:s.response,enumerable:!1});const a=this.request?.agent?{maxFreeSockets:this.request.agent.maxFreeSockets,maxSockets:this.request.agent.maxSockets}:void 0;Object.defineProperty(this,XE,{value:()=>`RestError: ${this.message} 
 ${JE.sanitize({...this,request:{...this.request,agent:a},response:this.response})}`,enumerable:!1}),Object.setPrototypeOf(this,Fv.prototype)}};function Vv(n){return n instanceof Mi?!0:Ah(n)&&n.name==="RestError"}function Wv(n){return!!(n&&typeof n.pipe=="function")}function Ql(n){return!!(n&&typeof n.getReader=="function"&&typeof n.tee=="function")}function Gv(n){return n!==void 0&&(n instanceof Uint8Array||Yv(n)||typeof n=="function"||n instanceof Blob)}function Yv(n){return Wv(n)||Ql(n)}function KE(n){return typeof n.stream=="function"}function QE(n){if(n.buffer instanceof ArrayBuffer&&n.byteOffset===0&&n.byteLength===n.buffer.byteLength)return n.buffer;const r=new ArrayBuffer(n.byteLength),s=new Uint8Array(r),a=new Uint8Array(n.buffer,n.byteOffset,n.byteLength);return s.set(a),s.buffer}function ZE(n){return(typeof Blob=="function"||typeof Blob=="object")&&n instanceof Blob}class ek{async sendRequest(r){if(new URL(r.url).protocol!=="https:"&&!r.allowInsecureConnection)throw new Error(`Cannot connect to ${r.url} while allowInsecureConnection is false.`);if(r.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");try{return await tk(r)}catch(c){throw ik(c,r)}}}async function tk(n){const{abortController:r,abortControllerCleanup:s}=rk(n);try{const a=sk(n.headers),{streaming:c,body:u}=ak(n),h={body:u,method:n.method,headers:a,signal:r.signal,..."credentials"in Request.prototype?{credentials:n.withCredentials?"include":"same-origin"}:{},..."cache"in Request.prototype?{cache:"no-store"}:{}};c&&(h.duplex="half");const p=await fetch(n.url,{...h,...n.requestOverrides});return ZE(n.body)&&n.onUploadProgress&&n.onUploadProgress({loadedBytes:n.body.size}),nk(p,n,s)}catch(a){throw s?.(),a}}async function nk(n,r,s){const a=ok(n),c={request:r,headers:a,status:n.status},u=Ql(n.body)?Xv(n.body,{onProgress:r.onDownloadProgress,onEnd:s}):n.body;if(r.streamResponseStatusCodes?.has(Number.POSITIVE_INFINITY)||r.streamResponseStatusCodes?.has(c.status))if(r.enableBrowserStreams)c.browserStreamBody=u??void 0;else{const h=new Response(u);c.blobBody=h.blob(),s?.()}else{const h=new Response(u);c.bodyAsText=await h.text(),s?.()}return c}function rk(n){const r=new AbortController;let s,a;if(n.abortSignal){if(n.abortSignal.aborted)throw new Oh("The operation was aborted. Request has already been canceled.");a=c=>{c.type==="abort"&&r.abort()},n.abortSignal.addEventListener("abort",a),s=()=>{a&&n.abortSignal?.removeEventListener("abort",a)}}return n.timeout>0&&setTimeout(()=>{r.abort()},n.timeout),{abortController:r,abortControllerCleanup:s}}function ik(n,r){return n&&n?.name==="AbortError"?n:new Mi(`Error sending request: ${n.message}`,{code:n?.code??Mi.REQUEST_SEND_ERROR,request:r})}function sk(n){const r=new Headers;for(const[s,a]of n)r.append(s,a);return r}function ok(n){const r=Pi();for(const[s,a]of n.headers)r.set(s,a);return r}function ak(n){const r=typeof n.body=="function"?n.body():n.body;if(Wv(r))throw new Error("Node streams are not supported in browser environment.");return Ql(r)?{streaming:!0,body:Xv(r,{onProgress:n.onUploadProgress})}:typeof r=="object"&&r&&"buffer"in r?{streaming:!1,body:QE(r)}:r===void 0?{streaming:!1}:{streaming:!1,body:r}}function Xv(n,r={}){let s=0;const{onProgress:a,onEnd:c}=r;if(ck(n))return n.pipeThrough(new TransformStream({transform(u,h){if(u===null){h.terminate();return}h.enqueue(u),s+=u.length,a&&a({loadedBytes:s})},flush(){c?.()}}));{const u=n.getReader();return new ReadableStream({async pull(h){const{done:p,value:m}=await u.read();if(p||!m){c?.(),h.close(),u.releaseLock();return}s+=m?.length??0,h.enqueue(m),a&&a({loadedBytes:s})},cancel(h){return c?.(),u.cancel(h)}})}}function lk(){return new ek}function ck(n){return n.pipeThrough!==void 0&&self.TransformStream!==void 0}function Jv(){return lk()}const Kv=Hv("ts-http-runtime"),Qv="logPolicy";function Zv(n={}){const r=n.logger??Kv.info,s=new _h({additionalAllowedHeaderNames:n.additionalAllowedHeaderNames,additionalAllowedQueryParameters:n.additionalAllowedQueryParameters});return{name:Qv,async sendRequest(a,c){if(!r.enabled)return c(a);r(`Request: ${s.sanitize(a)}`);const u=await c(a);return r(`Response status code: ${u.status}`),r(`Headers: ${s.sanitize(u.headers)}`),u}}}const eb="redirectPolicy",e0=["GET","HEAD"];function tb(n={}){const{maxRetries:r=20}=n;return{name:eb,async sendRequest(s,a){const c=await a(s);return nb(a,c,r)}}}async function nb(n,r,s,a=0){const{request:c,status:u,headers:h}=r,p=h.get("location");if(p&&(u===300||u===301&&e0.includes(c.method)||u===302&&e0.includes(c.method)||u===303&&c.method==="POST"||u===307)&&a<s){const m=new URL(p,c.url);c.url=m.toString(),u===303&&(c.method="GET",c.headers.delete("Content-Length"),delete c.body),c.headers.delete("Authorization");const g=await n(c);return nb(n,g,s,a+1)}return r}function uk(){return"x-ms-useragent"}function dk(n){const r=[{name:"Firefox",regex:/Firefox\/([\d.]+)/},{name:"Safari",regex:/Version\/([\d.]+).*Safari/}];for(const s of r){const a=n.match(s.regex);if(a)return{brand:s.name,version:a[1]}}}function hk(n){const r=["Google Chrome","Microsoft Edge","Opera","Brave","Chromium"];for(const s of r){const a=n.find(c=>c.brand===s);if(a)return a}}async function fk(n){const r=globalThis.navigator;let s="unknown";if(r?.userAgentData){const a=await r.userAgentData.getHighEntropyValues(["architecture","platformVersion"]);s=`${a.platform} ${a.platformVersion}; ${a.architecture}`;const c=hk(r.userAgentData.brands);c&&n.set(c.brand,`${c.version} (${s})`)}else if(r?.platform){s=r.platform;const a=dk(r.userAgent);a&&n.set(a.brand,`${a.version} (${s})`)}else typeof globalThis.EdgeRuntime=="string"&&n.set("EdgeRuntime",`${globalThis.EdgeRuntime} (${s})`)}const pk="0.3.2",Cs=3;function mk(n){const r=[];for(const[s,a]of n){const c=a?`${s}/${a}`:s;r.push(c)}return r.join(" ")}function gk(){return uk()}async function yk(n){const r=new Map;r.set("ts-http-runtime",pk),await fk(r);const s=mk(r);return n?`${n} ${s}`:s}const t0=gk(),vk="userAgentPolicy";function bk(n={}){const r=yk(n.userAgentPrefix);return{name:vk,async sendRequest(s,a){return s.headers.has(t0)||s.headers.set(t0,await r),a(s)}}}const xk="decompressResponsePolicy";function rb(){throw new Error("decompressResponsePolicy is not supported in browser environment")}const Sk="The operation was aborted.";function wk(n,r,s){return new Promise((a,c)=>{let u,h;const p=()=>c(new Oh(s?.abortErrorMsg?s?.abortErrorMsg:Sk)),m=()=>{s?.abortSignal&&h&&s.abortSignal.removeEventListener("abort",h)};if(h=()=>(u&&clearTimeout(u),m(),p()),s?.abortSignal&&s.abortSignal.aborted)return p();u=setTimeout(()=>{m(),a(r)},n),s?.abortSignal&&s.abortSignal.addEventListener("abort",h)})}function Ck(n,r){const s=n.headers.get(r);if(!s)return;const a=Number(s);if(!Number.isNaN(a))return a}const rh="Retry-After",jk=["retry-after-ms","x-ms-retry-after-ms",rh];function ib(n){if(n&&[429,503].includes(n.status))try{for(const c of jk){const u=Ck(n,c);if(u===0||u)return u*(c===rh?1e3:1)}const r=n.headers.get(rh);if(!r)return;const a=Date.parse(r)-Date.now();return Number.isFinite(a)?Math.max(0,a):void 0}catch{return}}function Tk(n){return Number.isFinite(ib(n))}function sb(){return{name:"throttlingRetryStrategy",retry({response:n}){const r=ib(n);return Number.isFinite(r)?{retryAfterInMs:r}:{skipStrategy:!0}}}}const Rk=1e3,Ek=1e3*64;function Uh(n={}){const r=n.retryDelayInMs??Rk,s=n.maxRetryDelayInMs??Ek;return{name:"exponentialRetryStrategy",retry({retryCount:a,response:c,responseError:u}){const h=Ak(u),p=h&&n.ignoreSystemErrors,m=kk(c),g=m&&n.ignoreHttpStatusCodes;return c&&(Tk(c)||!m)||g||p?{skipStrategy:!0}:u&&!h&&!m?{errorToThrow:u}:Sv(a,{retryDelayInMs:r,maxRetryDelayInMs:s})}}}function kk(n){return!!(n&&n.status!==void 0&&(n.status>=500||n.status===408)&&n.status!==501&&n.status!==505)}function Ak(n){return n?n.code==="ETIMEDOUT"||n.code==="ESOCKETTIMEDOUT"||n.code==="ECONNREFUSED"||n.code==="ECONNRESET"||n.code==="ENOENT"||n.code==="ENOTFOUND":!1}const Nk=Hv("ts-http-runtime retryPolicy"),_k="retryPolicy";function Yo(n,r={maxRetries:Cs}){const s=r.logger||Nk;return{name:_k,async sendRequest(a,c){let u,h,p=-1;e:for(;;){p+=1,u=void 0,h=void 0;try{s.info(`Retry ${p}: Attempting to send request`,a.requestId),u=await c(a),s.info(`Retry ${p}: Received a response from request`,a.requestId)}catch(m){if(s.error(`Retry ${p}: Received an error from request`,a.requestId),h=m,!m||h.name!=="RestError")throw m;u=h.response}if(a.abortSignal?.aborted)throw s.error(`Retry ${p}: Request aborted.`),new Oh;if(p>=(r.maxRetries??Cs)){if(s.info(`Retry ${p}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),h)throw h;if(u)return u;throw new Error("Maximum retries reached with no response or error to throw")}s.info(`Retry ${p}: Processing ${n.length} retry strategies.`);t:for(const m of n){const g=m.logger||s;g.info(`Retry ${p}: Processing retry strategy ${m.name}.`);const y=m.retry({retryCount:p,response:u,responseError:h});if(y.skipStrategy){g.info(`Retry ${p}: Skipped.`);continue t}const{errorToThrow:k,retryAfterInMs:U,redirectTo:V}=y;if(k)throw g.error(`Retry ${p}: Retry strategy ${m.name} throws error:`,k),k;if(U||U===0){g.info(`Retry ${p}: Retry strategy ${m.name} retries after ${U}`),await wk(U,void 0,{abortSignal:a.abortSignal});continue e}if(V){g.info(`Retry ${p}: Retry strategy ${m.name} redirects to ${V}`),a.url=V;continue e}}if(h)throw s.info("None of the retry strategies could work with the received error. Throwing it."),h;if(u)return s.info("None of the retry strategies could work with the received response. Returning it."),u}}}}const Pk="defaultRetryPolicy";function ob(n={}){return{name:Pk,sendRequest:Yo([sb(),Uh(n)],{maxRetries:n.maxRetries??Cs}).sendRequest}}const ab="formDataPolicy";function Mk(n){const r={};for(const[s,a]of n.entries())r[s]??=[],r[s].push(a);return r}function lb(){return{name:ab,async sendRequest(n,r){if(oi&&typeof FormData<"u"&&n.body instanceof FormData&&(n.formData=Mk(n.body),n.body=void 0),n.formData){const s=n.headers.get("Content-Type");s&&s.indexOf("application/x-www-form-urlencoded")!==-1?n.body=Ok(n.formData):await Dk(n.formData,n),n.formData=void 0}return r(n)}}}function Ok(n){const r=new URLSearchParams;for(const[s,a]of Object.entries(n))if(Array.isArray(a))for(const c of a)r.append(s,c.toString());else r.append(s,a.toString());return r.toString()}async function Dk(n,r){const s=r.headers.get("Content-Type");if(s&&!s.startsWith("multipart/form-data"))return;r.headers.set("Content-Type",s??"multipart/form-data");const a=[];for(const[c,u]of Object.entries(n))for(const h of Array.isArray(u)?u:[u])if(typeof h=="string")a.push({headers:Pi({"Content-Disposition":`form-data; name="${c}"`}),body:yn(h,"utf-8")});else{if(h==null||typeof h!="object")throw new Error(`Unexpected value for key ${c}: ${h}. Value should be serialized to string first.`);{const p=h.name||"blob",m=Pi();m.set("Content-Disposition",`form-data; name="${c}"; filename="${p}"`),m.set("Content-Type",h.type||"application/octet-stream"),a.push({headers:m,body:h})}}r.multipartBody={parts:a}}const Ik="proxyPolicy",cb="proxyPolicy is not supported in browser environment";function Uk(){throw new Error(cb)}function ub(){throw new Error(cb)}const db="agentPolicy";function hb(n){return{name:db,sendRequest:async(r,s)=>(r.agent||(r.agent=n),s(r))}}const fb="tlsPolicy";function pb(n){return{name:fb,sendRequest:async(r,s)=>(r.tlsSettings||(r.tlsSettings=n),s(r))}}function zk(n){return new Response(n).blob()}async function Lk(n){if(n instanceof Blob||n instanceof Uint8Array)return n;if(Ql(n))return zk(n);throw new Error("Unsupported source type. Only Blob, Uint8Array, and ReadableStream are supported in browser.")}function Bk(n){return"resize"in n.buffer?n:n.map(r=>r)}async function Hk(n){const r=[];for(const s of n){const a=await Lk(typeof s=="function"?s():s);a instanceof Blob?r.push(a):r.push(new Blob([Bk(a)]))}return new Blob(r)}function qk(){return`----AzSDKFormBoundary${Nh()}`}function $k(n){let r="";for(const[s,a]of n)r+=`${s}: ${a}\r
`;return r}function Fk(n){return n instanceof Uint8Array?n.byteLength:KE(n)?n.size===-1?void 0:n.size:void 0}function Vk(n){let r=0;for(const s of n){const a=Fk(s);if(a===void 0)return;r+=a}return r}async function Wk(n,r,s){const a=[yn(`--${s}`,"utf-8"),...r.flatMap(u=>[yn(`\r
`,"utf-8"),yn($k(u.headers),"utf-8"),yn(`\r
`,"utf-8"),u.body,yn(`\r
--${s}`,"utf-8")]),yn(`--\r
\r
`,"utf-8")],c=Vk(a);c&&n.headers.set("Content-Length",c),n.body=await Hk(a)}const zh="multipartPolicy",Gk=70,Yk=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function Xk(n){if(n.length>Gk)throw new Error(`Multipart boundary "${n}" exceeds maximum length of 70 characters`);if(Array.from(n).some(r=>!Yk.has(r)))throw new Error(`Multipart boundary "${n}" contains invalid characters`)}function mb(){return{name:zh,async sendRequest(n,r){if(!n.multipartBody)return r(n);if(n.body)throw new Error("multipartBody and regular body cannot be set at the same time");let s=n.multipartBody.boundary;const a=n.headers.get("Content-Type")??"multipart/mixed",c=a.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!c)throw new Error(`Got multipart request body, but content-type header was not multipart: ${a}`);const[,u,h]=c;if(h&&s&&h!==s)throw new Error(`Multipart boundary was specified as ${h} in the header, but got ${s} in the request body`);return s??=h,s?Xk(s):s=qk(),n.headers.set("Content-Type",`${u}; boundary=${s}`),await Wk(n,n.multipartBody.parts,s),n.multipartBody=void 0,r(n)}}}function Jk(n){const r=$v();return oi&&(n.agent&&r.addPolicy(hb(n.agent)),n.tlsOptions&&r.addPolicy(pb(n.tlsOptions)),r.addPolicy(ub(n.proxyOptions)),r.addPolicy(rb())),r.addPolicy(lb(),{beforePolicies:[zh]}),r.addPolicy(bk(n.userAgentOptions)),r.addPolicy(mb(),{afterPhase:"Deserialize"}),r.addPolicy(ob(n.retryOptions),{phase:"Retry"}),oi&&r.addPolicy(tb(n.redirectOptions),{afterPhase:"Retry"}),r.addPolicy(Zv(n.loggingOptions),{afterPhase:"Sign"}),r}const Kk="ApiVersionPolicy";function Qk(n){return{name:Kk,sendRequest:(r,s)=>{const a=new URL(r.url);return!a.searchParams.get("api-version")&&n.apiVersion&&(r.url=`${r.url}${Array.from(a.searchParams.keys()).length>0?"&":"?"}api-version=${n.apiVersion}`),s(r)}}}function Zk(n){return"getOAuth2Token"in n}function e5(n){return"getBearerToken"in n}function t5(n){return"username"in n&&"password"in n}function n5(n){return"key"in n}let n0=!1;function r5(n,r){if(r.allowInsecureConnection&&n.allowInsecureConnection){const s=new URL(n.url);if(s.hostname==="localhost"||s.hostname==="127.0.0.1")return!0}return!1}function i5(){const n="Sending token over insecure transport. Assume any token issued is compromised.";Kv.warning(n),typeof process?.emitWarning=="function"&&!n0&&(n0=!0,process.emitWarning(n))}function Zl(n,r){if(!n.url.toLowerCase().startsWith("https://"))if(r5(n,r))i5();else throw new Error("Authentication is not permitted for non-TLS protected (non-https) URLs when allowInsecureConnection is false.")}const s5="apiKeyAuthenticationPolicy";function o5(n){return{name:s5,async sendRequest(r,s){Zl(r,n);const a=(r.authSchemes??n.authSchemes)?.find(c=>c.kind==="apiKey");if(!a)return s(r);if(a.apiKeyLocation!=="header")throw new Error(`Unsupported API key location: ${a.apiKeyLocation}`);return r.headers.set(a.name,n.credential.key),s(r)}}}const a5="bearerAuthenticationPolicy";function l5(n){return{name:a5,async sendRequest(r,s){if(Zl(r,n),!(r.authSchemes??n.authSchemes)?.find(p=>p.kind==="http"&&p.scheme==="basic"))return s(r);const{username:c,password:u}=n.credential,h=Kl(yn(`${c}:${u}`,"utf-8"),"base64");return r.headers.set("Authorization",`Basic ${h}`),s(r)}}}const c5="bearerAuthenticationPolicy";function u5(n){return{name:c5,async sendRequest(r,s){if(Zl(r,n),!(r.authSchemes??n.authSchemes)?.find(u=>u.kind==="http"&&u.scheme==="bearer"))return s(r);const c=await n.credential.getBearerToken({abortSignal:r.abortSignal});return r.headers.set("Authorization",`Bearer ${c}`),s(r)}}}const d5="oauth2AuthenticationPolicy";function h5(n){return{name:d5,async sendRequest(r,s){Zl(r,n);const a=(r.authSchemes??n.authSchemes)?.find(u=>u.kind==="oauth2");if(!a)return s(r);const c=await n.credential.getOAuth2Token(a.flows,{abortSignal:r.abortSignal});return r.headers.set("Authorization",`Bearer ${c}`),s(r)}}}let Ld;function f5(n={}){const r=Jk(n);r.addPolicy(Qk(n));const{credential:s,authSchemes:a,allowInsecureConnection:c}=n;return s&&(n5(s)?r.addPolicy(o5({authSchemes:a,credential:s,allowInsecureConnection:c})):t5(s)?r.addPolicy(l5({authSchemes:a,credential:s,allowInsecureConnection:c})):e5(s)?r.addPolicy(u5({authSchemes:a,credential:s,allowInsecureConnection:c})):Zk(s)&&r.addPolicy(h5({authSchemes:a,credential:s,allowInsecureConnection:c}))),r}function p5(){return Ld||(Ld=Jv()),Ld}function gb(n,r){if(n.headers){const s=Object.keys(n.headers).find(a=>a.toLowerCase()===r.toLowerCase());if(s)return n.headers[s]}}function m5(n){const r=gb(n,"content-type");if(r)return r;if(n.contentType===null)return;if(n.contentType)return n.contentType;const{body:s}=n;if(s!=null)return typeof s=="string"||typeof s=="number"||typeof s=="boolean"?"text/plain; charset=UTF-8":s instanceof Blob?s.type||"application/octet-stream":Gv(s)?"application/octet-stream":"application/json"}function r0(n){return JSON.stringify(n)}function g5(n){const r=gb(n,"content-disposition");if(r)return r;if(n.dispositionType===void 0&&n.name===void 0&&n.filename===void 0)return;let a=n.dispositionType??"form-data";n.name&&(a+=`; name=${r0(n.name)}`);let c;if(n.filename)c=n.filename;else if(typeof File<"u"&&n.body instanceof File){const u=n.body.name;u!==""&&(c=u)}return c&&(a+=`; filename=${r0(c)}`),a}function y5(n,r){if(n===void 0)return new Uint8Array([]);if(Gv(n))return n;if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")return yn(String(n),"utf-8");if(r&&/application\/(.+\+)?json(;.+)?/i.test(String(r)))return yn(JSON.stringify(n),"utf-8");throw new Mi(`Unsupported body/content-type combination: ${n}, ${r}`)}function v5(n){const r=m5(n),s=g5(n),a=Pi(n.headers??{});r&&a.set("content-type",r),s&&a.set("content-disposition",s);const c=y5(n.body,r);return{headers:a,body:c}}function b5(n){return{parts:n.map(v5)}}async function Bd(n,r,s,a={},c){const u=c??p5(),h=w5(n,r,a);try{const p=await s.sendRequest(u,h),m=p.headers.toJSON(),g=p.readableStreamBody??p.browserStreamBody,y=a.responseAsStream||g!==void 0?void 0:j5(p),k=g??y;return a?.onResponse&&a.onResponse({...p,request:h,rawHeaders:m,parsedBody:y}),{request:h,headers:m,status:`${p.status}`,body:k}}catch(p){if(Vv(p)&&p.response&&a.onResponse){const{response:m}=p,g=m.headers.toJSON();a?.onResponse({...m,request:h,rawHeaders:g},p)}throw p}}function x5(n={}){return n.contentType??n.headers?.["content-type"]??S5(n.body)}function S5(n){if(ArrayBuffer.isView(n))return"application/octet-stream";if(typeof n=="string")try{return JSON.parse(n),"application/json"}catch{return}return"application/json"}function w5(n,r,s={}){const a=x5(s),{body:c,multipartBody:u}=C5(s.body,a),h=c!==void 0||u!==void 0,p=Pi({...s.headers?s.headers:{},accept:s.accept??s.headers?.accept??"application/json",...h&&a&&{"content-type":a}});return qv({url:r,method:n,body:c,multipartBody:u,headers:p,allowInsecureConnection:s.allowInsecureConnection,abortSignal:s.abortSignal,onUploadProgress:s.onUploadProgress,onDownloadProgress:s.onDownloadProgress,timeout:s.timeout,enableBrowserStreams:!0,streamResponseStatusCodes:s.responseAsStream?new Set([Number.POSITIVE_INFINITY]):void 0})}function C5(n,r=""){if(n===void 0)return{body:void 0};if(typeof FormData<"u"&&n instanceof FormData)return{body:n};if(Yv(n))return{body:n};if(ArrayBuffer.isView(n))return{body:n instanceof Uint8Array?n:JSON.stringify(n)};switch(r.split(";")[0]){case"application/json":return{body:JSON.stringify(n)};case"multipart/form-data":return Array.isArray(n)?{multipartBody:b5(n)}:{body:JSON.stringify(n)};case"text/plain":return{body:String(n)};default:return typeof n=="string"?{body:n}:{body:JSON.stringify(n)}}}function j5(n){const s=(n.headers.get("content-type")??"").split(";")[0],a=n.bodyAsText??"";if(s==="text/plain")return String(a);try{return a?JSON.parse(a):void 0}catch(c){if(s==="application/json")throw T5(n,c);return String(a)}}function T5(n,r){const s=`Error "${r}" occurred while parsing the response body - ${n.bodyAsText}.`,a=r.code??Mi.PARSE_ERROR;return new Mi(s,{code:a,statusCode:n.status,request:n.request,response:n})}function R5(n){const r=n.value;return r!==void 0&&r.toString!==void 0&&typeof r.toString=="function"}function E5(n,r,s,a={}){if(r.startsWith("https://")||r.startsWith("http://"))return r;n=A5(n,a),r=N5(r,s,a);const c=k5(`${n}/${r}`,a);return new URL(c).toString().replace(/([^:]\/)\/+/g,"$1")}function Hd(n,r,s,a){let c;s==="pipeDelimited"?c="|":s==="spaceDelimited"?c="%20":c=",";let u;Array.isArray(a)?u=a:typeof a=="object"&&a.toString===Object.prototype.toString?u=Object.entries(a).flat():u=[a];const h=u.map(p=>{if(p==null)return"";if(!p.toString||typeof p.toString!="function")throw new Error(`Query parameters must be able to be represented as string, ${n} can't`);const m=p.toISOString!==void 0?p.toISOString():p.toString();return r?m:encodeURIComponent(m)}).join(c);return`${r?n:encodeURIComponent(n)}=${h}`}function k5(n,r={}){if(!r.queryParameters)return n;const s=new URL(n),a=r.queryParameters,c=[];for(const u of Object.keys(a)){const h=a[u];if(h==null)continue;const p=R5(h),m=p?h.value:h,g=p?h.explode??!1:!1,y=p&&h.style?h.style:"form";if(g)if(Array.isArray(m))for(const k of m)c.push(Hd(u,r.skipUrlEncoding??!1,y,k));else if(typeof m=="object")for(const[k,U]of Object.entries(m))c.push(Hd(k,r.skipUrlEncoding??!1,y,U));else throw new Error("explode can only be set to true for objects and arrays");else c.push(Hd(u,r.skipUrlEncoding??!1,y,m))}return s.search!==""&&(s.search+="&"),s.search+=c.join("&"),s.toString()}function A5(n,r){if(!r.pathParameters)return n;const s=r.pathParameters;for(const[a,c]of Object.entries(s)){if(c==null)throw new Error(`Path parameters ${a} must not be undefined or null`);if(!c.toString||typeof c.toString!="function")throw new Error(`Path parameters must be able to be represented as string, ${a} can't`);let u=c.toISOString!==void 0?c.toISOString():String(c);r.skipUrlEncoding||(u=encodeURIComponent(c)),n=_5(n,`{${a}}`,u)??""}return n}function N5(n,r,s={}){for(const a of r){const c=typeof a=="object"&&(a.allowReserved??!1);let u=typeof a=="object"?a.value:a;!s.skipUrlEncoding&&!c&&(u=encodeURIComponent(u)),n=n.replace(/\{[\w-]+\}/,String(u))}return n}function _5(n,r,s){return!n||!r?n:n.split(r).join(s||"")}function P5(n,r={}){const s=r.pipeline??f5(r);if(r.additionalPolicies?.length)for(const{policy:p,position:m}of r.additionalPolicies){const g=m==="perRetry"?"Sign":void 0;s.addPolicy(p,{afterPhase:g})}const{allowInsecureConnection:a,httpClient:c}=r,u=r.endpoint??n,h=(p,...m)=>{const g=y=>E5(u,p,m,{...y});return{get:(y={})=>Zr("GET",g(y),s,y,a,c),post:(y={})=>Zr("POST",g(y),s,y,a,c),put:(y={})=>Zr("PUT",g(y),s,y,a,c),patch:(y={})=>Zr("PATCH",g(y),s,y,a,c),delete:(y={})=>Zr("DELETE",g(y),s,y,a,c),head:(y={})=>Zr("HEAD",g(y),s,y,a,c),options:(y={})=>Zr("OPTIONS",g(y),s,y,a,c),trace:(y={})=>Zr("TRACE",g(y),s,y,a,c)}};return{path:h,pathUnchecked:h,pipeline:s}}function Zr(n,r,s,a,c,u){return c=a.allowInsecureConnection??c,{then:function(h,p){return Bd(n,r,s,{...a,allowInsecureConnection:c},u).then(h,p)},async asBrowserStream(){if(oi)throw new Error("`asBrowserStream` is supported only in the browser environment. Use `asNodeStream` instead to obtain the response body stream. If you require a Web stream of the response in Node, consider using `Readable.toWeb` on the result of `asNodeStream`.");return Bd(n,r,s,{...a,allowInsecureConnection:c,responseAsStream:!0},u)},async asNodeStream(){if(oi)return Bd(n,r,s,{...a,allowInsecureConnection:c,responseAsStream:!0},u);throw new Error("`isNodeStream` is not supported in the browser environment. Use `asBrowserStream` to obtain the response body stream.")}}}function yb(){return $v()}const M5=Bv({logLevelEnvVarName:"AZURE_LOG_LEVEL",namespace:"azure"});function ec(n){return M5.createClientLogger(n)}const Oi=ec("core-rest-pipeline"),O5="exponentialRetryPolicy";function D5(n={}){return Yo([Uh({...n,ignoreSystemErrors:!0})],{maxRetries:n.maxRetries??Cs})}const vb="systemErrorRetryPolicy";function I5(n={}){return{name:vb,sendRequest:Yo([Uh({...n,ignoreHttpStatusCodes:!0})],{maxRetries:n.maxRetries??Cs}).sendRequest}}const bb="throttlingRetryPolicy";function U5(n={}){return{name:bb,sendRequest:Yo([sb()],{maxRetries:n.maxRetries??Cs}).sendRequest}}const z5=Qv;function xb(n={}){return Zv({logger:Oi.info,...n})}const L5=eb;function Sb(n={}){return tb(n)}function B5(){return"x-ms-useragent"}function H5(n){const r=[{name:"Firefox",regex:/Firefox\/([\d.]+)/},{name:"Safari",regex:/Version\/([\d.]+).*Safari/}];for(const s of r){const a=n.match(s.regex);if(a)return{brand:s.name,version:a[1]}}}function q5(n){const r=["Google Chrome","Microsoft Edge","Opera","Brave","Chromium"];for(const s of r){const a=n.find(c=>c.brand===s);if(a)return a}}async function $5(n){const r=globalThis.navigator;let s="unknown";if(r?.userAgentData){const a=await r.userAgentData.getHighEntropyValues(["architecture","platformVersion"]);s=`${a.platform} ${a.platformVersion}; ${a.architecture}`;const c=q5(r.userAgentData.brands);c&&n.set(c.brand,`${c.version} (${s})`)}else if(r?.platform){s=r.platform;const a=H5(r.userAgent);a&&n.set(a.brand,`${a.version} (${s})`)}else typeof globalThis.EdgeRuntime=="string"&&n.set("EdgeRuntime",`${globalThis.EdgeRuntime} (${s})`)}const wb="1.22.2",F5=3;function V5(n){const r=[];for(const[s,a]of n){const c=a?`${s}/${a}`:s;r.push(c)}return r.join(" ")}function W5(){return B5()}async function Cb(n){const r=new Map;r.set("core-rest-pipeline",wb),await $5(r);const s=V5(r);return n?`${n} ${s}`:s}const i0=W5(),jb="userAgentPolicy";function Tb(n={}){const r=Cb(n.userAgentPrefix);return{name:jb,async sendRequest(s,a){return s.headers.has(i0)||s.headers.set(i0,await r),a(s)}}}function G5(n){return!!(n&&typeof n.pipe=="function")}const Rb={arrayBuffer:()=>{throw new Error("Not implemented")},bytes:()=>{throw new Error("Not implemented")},slice:()=>{throw new Error("Not implemented")},text:()=>{throw new Error("Not implemented")}},tc=Symbol("rawContent");function Eb(n){return typeof n[tc]=="function"}function Y5(n){return Eb(n)?n[tc]():n}function X5(n,r,s={}){return{...Rb,type:s.type??"",lastModified:s.lastModified??new Date().getTime(),webkitRelativePath:s.webkitRelativePath??"",size:s.size??-1,name:r,stream:()=>{const a=n();if(G5(a))throw new Error("Not supported: a Node stream was provided as input to createFileFromStream.");return a},[tc]:n}}function J5(n,r,s={}){return Ol?{...Rb,type:s.type??"",lastModified:s.lastModified??new Date().getTime(),webkitRelativePath:s.webkitRelativePath??"",size:n.byteLength,name:r,arrayBuffer:async()=>n.buffer,stream:()=>new Blob([s0(n)]).stream(),[tc]:()=>n}:new File([s0(n)],r,s)}function s0(n){return"resize"in n.buffer?n:n.map(r=>r)}const Lh=zh;function kb(){const n=mb();return{name:Lh,sendRequest:async(r,s)=>{if(r.multipartBody)for(const a of r.multipartBody.parts)Eb(a.body)&&(a.body=Y5(a.body));return n.sendRequest(r,s)}}}const K5=xk;function Ab(){return rb()}function Nb(n={}){return ob(n)}const Q5=ab;function _b(){return lb()}const Z5=Ik;function eA(n){return Uk()}function Pb(n,r){return ub()}const Mb="setClientRequestIdPolicy";function Ob(n="x-ms-client-request-id"){return{name:Mb,async sendRequest(r,s){return r.headers.has(n)||r.headers.set(n,r.requestId),s(r)}}}const tA=db;function Db(n){return hb(n)}const nA=fb;function Ib(n){return pb(n)}const Po={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function rA(n={}){let r=new Mo(n.parentContext);return n.span&&(r=r.setValue(Po.span,n.span)),n.namespace&&(r=r.setValue(Po.namespace,n.namespace)),r}class Mo{_contextMap;constructor(r){this._contextMap=r instanceof Mo?new Map(r._contextMap):new Map}setValue(r,s){const a=new Mo(this);return a._contextMap.set(r,s),a}getValue(r){return this._contextMap.get(r)}deleteValue(r){const s=new Mo(this);return s._contextMap.delete(r),s}}const qd={instrumenterImplementation:void 0};function iA(){return{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{},addEvent:()=>{}}}function sA(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(n,r)=>({span:iA(),tracingContext:rA({parentContext:r.tracingContext})}),withContext(n,r,...s){return r(...s)}}}function pl(){return qd.instrumenterImplementation||(qd.instrumenterImplementation=sA()),qd.instrumenterImplementation}function Ub(n){const{namespace:r,packageName:s,packageVersion:a}=n;function c(g,y,k){const U=pl().startSpan(g,{...k,packageName:s,packageVersion:a,tracingContext:y?.tracingOptions?.tracingContext});let V=U.tracingContext;const I=U.span;V.getValue(Po.namespace)||(V=V.setValue(Po.namespace,r)),I.setAttribute("az.namespace",V.getValue(Po.namespace));const q=Object.assign({},y,{tracingOptions:{...y?.tracingOptions,tracingContext:V}});return{span:I,updatedOptions:q}}async function u(g,y,k,U){const{span:V,updatedOptions:I}=c(g,y,U);try{const q=await h(I.tracingOptions.tracingContext,()=>Promise.resolve(k(I,V)));return V.setStatus({status:"success"}),q}catch(q){throw V.setStatus({status:"error",error:q}),q}finally{V.end()}}function h(g,y,...k){return pl().withContext(g,y,...k)}function p(g){return pl().parseTraceparentHeader(g)}function m(g){return pl().createRequestHeaders(g)}return{startSpan:c,withSpan:u,withContext:h,parseTraceparentHeader:p,createRequestHeaders:m}}const Lo=Mi;function Bh(n){return Vv(n)}const zb="tracingPolicy";function Lb(n={}){const r=Cb(n.userAgentPrefix),s=new _h({additionalAllowedQueryParameters:n.additionalAllowedQueryParameters}),a=oA();return{name:zb,async sendRequest(c,u){if(!a)return u(c);const h=await r,p={"http.url":s.sanitizeUrl(c.url),"http.method":c.method,"http.user_agent":h,requestId:c.requestId};h&&(p["http.user_agent"]=h);const{span:m,tracingContext:g}=aA(a,c,p)??{};if(!m||!g)return u(c);try{const y=await a.withContext(g,u,c);return cA(m,y),y}catch(y){throw lA(m,y),y}}}}function oA(){try{return Ub({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:wb})}catch(n){Oi.warning(`Error when creating the TracingClient: ${Go(n)}`);return}}function aA(n,r,s){try{const{span:a,updatedOptions:c}=n.startSpan(`HTTP ${r.method}`,{tracingOptions:r.tracingOptions},{spanKind:"client",spanAttributes:s});if(!a.isRecording()){a.end();return}const u=n.createRequestHeaders(c.tracingOptions.tracingContext);for(const[h,p]of Object.entries(u))r.headers.set(h,p);return{span:a,tracingContext:c.tracingOptions.tracingContext}}catch(a){Oi.warning(`Skipping creating a tracing span due to an error: ${Go(a)}`);return}}function lA(n,r){try{n.setStatus({status:"error",error:Nv(r)?r:void 0}),Bh(r)&&r.statusCode&&n.setAttribute("http.status_code",r.statusCode),n.end()}catch(s){Oi.warning(`Skipping tracing span processing due to an error: ${Go(s)}`)}}function cA(n,r){try{n.setAttribute("http.status_code",r.status);const s=r.headers.get("x-ms-request-id");s&&n.setAttribute("serviceRequestId",s),r.status>=400&&n.setStatus({status:"error"}),n.end()}catch(s){Oi.warning(`Skipping tracing span processing due to an error: ${Go(s)}`)}}function Bb(n){if(n instanceof AbortSignal)return{abortSignal:n};if(n.aborted)return{abortSignal:AbortSignal.abort(n.reason)};const r=new AbortController;let s=!0;function a(){s&&(n.removeEventListener("abort",c),s=!1)}function c(){r.abort(n.reason),a()}return n.addEventListener("abort",c),{abortSignal:r.signal,cleanup:a}}const uA="wrapAbortSignalLikePolicy";function dA(){return{name:uA,sendRequest:async(n,r)=>{if(!n.abortSignal)return r(n);const{abortSignal:s,cleanup:a}=Bb(n.abortSignal);n.abortSignal=s;try{return await r(n)}finally{a?.()}}}}function Hh(n){const r=yb();return Ol&&(n.agent&&r.addPolicy(Db(n.agent)),n.tlsOptions&&r.addPolicy(Ib(n.tlsOptions)),r.addPolicy(Pb(n.proxyOptions)),r.addPolicy(Ab())),r.addPolicy(dA()),r.addPolicy(_b(),{beforePolicies:[Lh]}),r.addPolicy(Tb(n.userAgentOptions)),r.addPolicy(Ob(n.telemetryOptions?.clientRequestIdHeaderName)),r.addPolicy(kb(),{afterPhase:"Deserialize"}),r.addPolicy(Nb(n.retryOptions),{phase:"Retry"}),r.addPolicy(Lb({...n.userAgentOptions,...n.loggingOptions}),{afterPhase:"Retry"}),Ol&&r.addPolicy(Sb(n.redirectOptions),{afterPhase:"Retry"}),r.addPolicy(xb(n.loggingOptions),{afterPhase:"Sign"}),r}function qh(){const n=Jv();return{async sendRequest(r){const{abortSignal:s,cleanup:a}=r.abortSignal?Bb(r.abortSignal):{};try{return r.abortSignal=s,await n.sendRequest(r)}finally{a?.()}}}}function Hb(n){return Pi(n)}function $h(n){return qv(n)}const hA=O5;function fA(n={}){return D5(n)}const pA=vb;function mA(n={}){return I5(n)}const gA=bb;function yA(n={}){return U5(n)}const vA=ec("core-rest-pipeline retryPolicy");function bA(n,r={maxRetries:F5}){return Yo(n,{logger:vA,...r})}const xA={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function SA(n,r,s){async function a(){if(Date.now()<s)try{return await n()}catch{return null}else{const u=await n();if(u===null)throw new Error("Failed to refresh access token.");return u}}let c=await a();for(;c===null;)await kv(r),c=await a();return c}function qb(n,r){let s=null,a=null,c;const u={...xA,...r},h={get isRefreshing(){return s!==null},get shouldRefresh(){return h.isRefreshing?!1:a?.refreshAfterTimestamp&&a.refreshAfterTimestamp<Date.now()?!0:(a?.expiresOnTimestamp??0)-u.refreshWindowInMs<Date.now()},get mustRefresh(){return a===null||a.expiresOnTimestamp-u.forcedRefreshWindowInMs<Date.now()}};function p(m,g){return h.isRefreshing||(s=SA(()=>n.getToken(m,g),u.retryIntervalInMs,a?.expiresOnTimestamp??Date.now()).then(k=>(s=null,a=k,c=g.tenantId,a)).catch(k=>{throw s=null,a=null,c=void 0,k})),s}return async(m,g)=>{const y=!!g.claims,k=c!==g.tenantId;return y&&(a=null),k||y||h.mustRefresh?p(m,g):(h.shouldRefresh&&p(m,g),a)}}const $b="bearerTokenAuthenticationPolicy";async function ml(n,r){try{return[await r(n),void 0]}catch(s){if(Bh(s)&&s.response)return[s.response,s];throw s}}async function wA(n){const{scopes:r,getAccessToken:s,request:a}=n,c={abortSignal:a.abortSignal,tracingOptions:a.tracingOptions,enableCae:!0},u=await s(r,c);u&&n.request.headers.set("Authorization",`Bearer ${u.token}`)}function o0(n){return n.status===401&&n.headers.has("WWW-Authenticate")}async function a0(n,r){const{scopes:s}=n,a=await n.getAccessToken(s,{enableCae:!0,claims:r});return a?(n.request.headers.set("Authorization",`${a.tokenType??"Bearer"} ${a.token}`),!0):!1}function nc(n){const{credential:r,scopes:s,challengeCallbacks:a}=n,c=n.logger||Oi,u={authorizeRequest:a?.authorizeRequest?.bind(a)??wA,authorizeRequestOnChallenge:a?.authorizeRequestOnChallenge?.bind(a)},h=r?qb(r):()=>Promise.resolve(null);return{name:$b,async sendRequest(p,m){if(!p.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await u.authorizeRequest({scopes:Array.isArray(s)?s:[s],request:p,getAccessToken:h,logger:c});let g,y,k;if([g,y]=await ml(p,m),o0(g)){let U=l0(g.headers.get("WWW-Authenticate"));if(U){let V;try{V=atob(U)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${U}`),g}k=await a0({scopes:Array.isArray(s)?s:[s],response:g,request:p,getAccessToken:h,logger:c},V),k&&([g,y]=await ml(p,m))}else if(u.authorizeRequestOnChallenge&&(k=await u.authorizeRequestOnChallenge({scopes:Array.isArray(s)?s:[s],request:p,response:g,getAccessToken:h,logger:c}),k&&([g,y]=await ml(p,m)),o0(g)&&(U=l0(g.headers.get("WWW-Authenticate")),U))){let V;try{V=atob(U)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${U}`),g}k=await a0({scopes:Array.isArray(s)?s:[s],response:g,request:p,getAccessToken:h,logger:c},V),k&&([g,y]=await ml(p,m))}}if(y)throw y;return g}}}function CA(n){const r=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,s=/(\w+)="([^"]*)"/g,a=[];let c;for(;(c=r.exec(n))!==null;){const u=c[1],h=c[2],p={};let m;for(;(m=s.exec(h))!==null;)p[m[1]]=m[2];a.push({scheme:u,params:p})}return a}function l0(n){return n?CA(n).find(s=>s.scheme==="Bearer"&&s.params.claims&&s.params.error==="insufficient_claims")?.params.claims:void 0}const Fb="ndJsonPolicy";function jA(){return{name:Fb,async sendRequest(n,r){if(typeof n.body=="string"&&n.body.startsWith("[")){const s=JSON.parse(n.body);Array.isArray(s)&&(n.body=s.map(a=>JSON.stringify(a)+`
`).join(""))}return r(n)}}}const ih="auxiliaryAuthenticationHeaderPolicy",c0="x-ms-authorization-auxiliary";async function TA(n){const{scopes:r,getAccessToken:s,request:a}=n,c={abortSignal:a.abortSignal,tracingOptions:a.tracingOptions};return(await s(r,c))?.token??""}function RA(n){const{credentials:r,scopes:s}=n,a=n.logger||Oi,c=new WeakMap;return{name:ih,async sendRequest(u,h){if(!u.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication for auxiliary header is not permitted for non-TLS protected (non-https) URLs.");if(!r||r.length===0)return a.info(`${ih} header will not be set due to empty credentials.`),h(u);const p=[];for(const g of r){let y=c.get(g);y||(y=qb(g),c.set(g,y)),p.push(TA({scopes:Array.isArray(s)?s:[s],request:u,getAccessToken:y}))}const m=(await Promise.all(p)).filter(g=>!!g);return m.length===0?(a.warning(`None of the auxiliary tokens are valid. ${c0} header will not be set.`),h(u)):(u.headers.set(c0,m.map(g=>`Bearer ${g}`).join(", ")),h(u))}}}const EA=Object.freeze(Object.defineProperty({__proto__:null,RestError:Lo,agentPolicy:Db,agentPolicyName:tA,auxiliaryAuthenticationHeaderPolicy:RA,auxiliaryAuthenticationHeaderPolicyName:ih,bearerTokenAuthenticationPolicy:nc,bearerTokenAuthenticationPolicyName:$b,createDefaultHttpClient:qh,createEmptyPipeline:yb,createFile:J5,createFileFromStream:X5,createHttpHeaders:Hb,createPipelineFromOptions:Hh,createPipelineRequest:$h,decompressResponsePolicy:Ab,decompressResponsePolicyName:K5,defaultRetryPolicy:Nb,exponentialRetryPolicy:fA,exponentialRetryPolicyName:hA,formDataPolicy:_b,formDataPolicyName:Q5,getDefaultProxySettings:eA,isRestError:Bh,logPolicy:xb,logPolicyName:z5,multipartPolicy:kb,multipartPolicyName:Lh,ndJsonPolicy:jA,ndJsonPolicyName:Fb,proxyPolicy:Pb,proxyPolicyName:Z5,redirectPolicy:Sb,redirectPolicyName:L5,retryPolicy:bA,setClientRequestIdPolicy:Ob,setClientRequestIdPolicyName:Mb,systemErrorRetryPolicy:mA,systemErrorRetryPolicyName:pA,throttlingRetryPolicy:yA,throttlingRetryPolicyName:gA,tlsPolicy:Ib,tlsPolicyName:nA,tracingPolicy:Lb,tracingPolicyName:zb,userAgentPolicy:Tb,userAgentPolicyName:jb},Symbol.toStringTag,{value:"Module"})),u0={operationRequestMap:new WeakMap};function js(n,r,s){let a=r.parameterPath;const c=r.mapper;let u;if(typeof a=="string"&&(a=[a]),Array.isArray(a)){if(a.length>0)if(c.isConstant)u=c.defaultValue;else{let h=d0(n,a);!h.propertyFound&&s&&(h=d0(s,a));let p=!1;h.propertyFound||(p=c.required||a[0]==="options"&&a.length===2),u=p?c.defaultValue:h.propertyValue}}else{c.required&&(u={});for(const h in a){const p=c.type.modelProperties[h],m=a[h],g=js(n,{parameterPath:m,mapper:p},s);g!==void 0&&(u||(u={}),u[h]=g)}}return u}function d0(n,r){const s={propertyFound:!1};let a=0;for(;a<r.length;++a){const c=r[a];if(n&&c in n)n=n[c];else break}return a===r.length&&(s.propertyValue=n,s.propertyFound=!0),s}const Vb=Symbol.for("@azure/core-client original request");function kA(n){return Vb in n}function _s(n){if(kA(n))return _s(n[Vb]);let r=u0.operationRequestMap.get(n);return r||(r={},u0.operationRequestMap.set(n,r)),r}const AA=["application/json","text/json"],NA=["application/xml","application/atom+xml"],Wb="deserializationPolicy";function Gb(n={}){const r=n.expectedContentTypes?.json??AA,s=n.expectedContentTypes?.xml??NA,a=n.parseXML,c=n.serializerOptions,u={xml:{rootName:c?.xml.rootName??"",includeRoot:c?.xml.includeRoot??!1,xmlCharKey:c?.xml.xmlCharKey??ws}};return{name:Wb,async sendRequest(h,p){const m=await p(h);return MA(r,s,m,u,a)}}}function _A(n){let r;const s=n.request,a=_s(s),c=a?.operationSpec;return c&&(a?.operationResponseGetter?r=a?.operationResponseGetter(c,n):r=c.responses[n.status]),r}function PA(n){const r=n.request,a=_s(r)?.shouldDeserialize;let c;return a===void 0?c=!0:typeof a=="boolean"?c=a:c=a(n),c}async function MA(n,r,s,a,c){const u=await IA(n,r,s,a,c);if(!PA(u))return u;const p=_s(u.request)?.operationSpec;if(!p||!p.responses)return u;const m=_A(u),{error:g,shouldReturnResponse:y}=DA(u,p,m,a);if(g)throw g;if(y)return u;if(m){if(m.bodyMapper){let k=u.parsedBody;p.isXML&&m.bodyMapper.type.name===Ai.Sequence&&(k=typeof k=="object"?k[m.bodyMapper.xmlElementName]:[]);try{u.parsedBody=p.serializer.deserialize(m.bodyMapper,k,"operationRes.parsedBody",a)}catch(U){throw new Lo(`Error ${U} occurred in deserializing the responseBody - ${u.bodyAsText}`,{statusCode:u.status,request:u.request,response:u})}}else p.httpMethod==="HEAD"&&(u.parsedBody=s.status>=200&&s.status<300);m.headersMapper&&(u.parsedHeaders=p.serializer.deserialize(m.headersMapper,u.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return u}function OA(n){const r=Object.keys(n.responses);return r.length===0||r.length===1&&r[0]==="default"}function DA(n,r,s,a){const c=200<=n.status&&n.status<300;if(OA(r)?c:!!s)if(s){if(!s.isError)return{error:null,shouldReturnResponse:!1}}else return{error:null,shouldReturnResponse:!1};const h=s??r.responses.default,p=n.request.streamResponseStatusCodes?.has(n.status)?`Unexpected status code: ${n.status}`:n.bodyAsText,m=new Lo(p,{statusCode:n.status,request:n.request,response:n});if(!h&&!(n.parsedBody?.error?.code&&n.parsedBody?.error?.message))throw m;const g=h?.bodyMapper,y=h?.headersMapper;try{if(n.parsedBody){const k=n.parsedBody;let U;if(g){let I=k;if(r.isXML&&g.type.name===Ai.Sequence){I=[];const q=g.xmlElementName;typeof k=="object"&&q&&(I=k[q])}U=r.serializer.deserialize(g,I,"error.response.parsedBody",a)}const V=k.error||U||k;m.code=V.code,V.message&&(m.message=V.message),g&&(m.response.parsedBody=U)}n.headers&&y&&(m.response.parsedHeaders=r.serializer.deserialize(y,n.headers.toJSON(),"operationRes.parsedHeaders"))}catch(k){m.message=`Error "${k.message}" occurred in deserializing the responseBody - "${n.bodyAsText}" for the default response.`}return{error:m,shouldReturnResponse:!1}}async function IA(n,r,s,a,c){if(!s.request.streamResponseStatusCodes?.has(s.status)&&s.bodyAsText){const u=s.bodyAsText,h=s.headers.get("Content-Type")||"",p=h?h.split(";").map(m=>m.toLowerCase()):[];try{if(p.length===0||p.some(m=>n.indexOf(m)!==-1))return s.parsedBody=JSON.parse(u),s;if(p.some(m=>r.indexOf(m)!==-1)){if(!c)throw new Error("Parsing XML not supported.");const m=await c(u,a.xml);return s.parsedBody=m,s}}catch(m){const g=`Error "${m}" occurred while parsing the response body - ${s.bodyAsText}.`,y=m.code||Lo.PARSE_ERROR;throw new Lo(g,{code:y,statusCode:s.status,request:s.request,response:s})}}return s}function UA(n){const r=new Set;for(const s in n.responses){const a=n.responses[s];a.bodyMapper&&a.bodyMapper.type.name===Ai.Stream&&r.add(Number(s))}return r}function si(n){const{parameterPath:r,mapper:s}=n;let a;return typeof r=="string"?a=r:Array.isArray(r)?a=r.join("."):a=s.serializedName,a}const Yb="serializationPolicy";function Xb(n={}){const r=n.stringifyXML;return{name:Yb,async sendRequest(s,a){const c=_s(s),u=c?.operationSpec,h=c?.operationArguments;return u&&h&&(zA(s,h,u),LA(s,h,u,r)),a(s)}}}function zA(n,r,s){if(s.headerParameters)for(const c of s.headerParameters){let u=js(r,c);if(u!=null||c.mapper.required){u=s.serializer.serialize(c.mapper,u,si(c));const h=c.mapper.headerCollectionPrefix;if(h)for(const p of Object.keys(u))n.headers.set(h+p,u[p]);else n.headers.set(c.mapper.serializedName||si(c),u)}}const a=r.options?.requestOptions?.customHeaders;if(a)for(const c of Object.keys(a))n.headers.set(c,a[c])}function LA(n,r,s,a=function(){throw new Error("XML serialization unsupported!")}){const c=r.options?.serializerOptions,u={xml:{rootName:c?.xml.rootName??"",includeRoot:c?.xml.includeRoot??!1,xmlCharKey:c?.xml.xmlCharKey??ws}},h=u.xml.xmlCharKey;if(s.requestBody&&s.requestBody.mapper){n.body=js(r,s.requestBody);const p=s.requestBody.mapper,{required:m,serializedName:g,xmlName:y,xmlElementName:k,xmlNamespace:U,xmlNamespacePrefix:V,nullable:I}=p,q=p.type.name;try{if(n.body!==void 0&&n.body!==null||I&&n.body===null||m){const z=si(s.requestBody);n.body=s.serializer.serialize(p,n.body,z,u);const Q=q===Ai.Stream;if(s.isXML){const Y=V?`xmlns:${V}`:"xmlns",fe=BA(U,Y,q,n.body,u);q===Ai.Sequence?n.body=a(HA(fe,k||y||g,Y,U),{rootName:y||g,xmlCharKey:h}):Q||(n.body=a(fe,{rootName:y||g,xmlCharKey:h}))}else{if(q===Ai.String&&(s.contentType?.match("text/plain")||s.mediaType==="text"))return;Q||(n.body=JSON.stringify(n.body))}}}catch(z){throw new Error(`Error "${z.message}" occurred in serializing the payload - ${JSON.stringify(g,void 0,"  ")}.`)}}else if(s.formDataParameters&&s.formDataParameters.length>0){n.formData={};for(const p of s.formDataParameters){const m=js(r,p);if(m!=null){const g=p.mapper.serializedName||si(p);n.formData[g]=s.serializer.serialize(p.mapper,m,si(p),u)}}}}function BA(n,r,s,a,c){if(n&&!["Composite","Sequence","Dictionary"].includes(s)){const u={};return u[c.xml.xmlCharKey]=a,u[$t]={[r]:n},u}return a}function HA(n,r,s,a){if(Array.isArray(n)||(n=[n]),!s||!a)return{[r]:n};const c={[r]:n};return c[$t]={[s]:a},c}function Jb(n={}){const r=Hh(n??{});return n.credentialOptions&&r.addPolicy(nc({credential:n.credentialOptions.credential,scopes:n.credentialOptions.credentialScopes})),r.addPolicy(Xb(n.serializationOptions),{phase:"Serialize"}),r.addPolicy(Gb(n.deserializationOptions),{phase:"Deserialize"}),r}let $d;function qA(){return $d||($d=qh()),$d}const $A={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function FA(n,r,s,a){const c=VA(r,s,a);let u=!1,h=h0(n,c);if(r.path){let g=h0(r.path,c);r.path==="/{nextLink}"&&g.startsWith("/")&&(g=g.substring(1)),WA(g)?(h=g,u=!0):h=GA(h,g)}const{queryParams:p,sequenceParams:m}=YA(r,s,a);return h=JA(h,p,m,u),h}function h0(n,r){let s=n;for(const[a,c]of r)s=s.split(a).join(c);return s}function VA(n,r,s){const a=new Map;if(n.urlParameters?.length)for(const c of n.urlParameters){let u=js(r,c,s);const h=si(c);u=n.serializer.serialize(c.mapper,u,h),c.skipEncoding||(u=encodeURIComponent(u)),a.set(`{${c.mapper.serializedName||h}}`,u)}return a}function WA(n){return n.includes("://")}function GA(n,r){if(!r)return n;const s=new URL(n);let a=s.pathname;a.endsWith("/")||(a=`${a}/`),r.startsWith("/")&&(r=r.substring(1));const c=r.indexOf("?");if(c!==-1){const u=r.substring(0,c),h=r.substring(c+1);a=a+u,h&&(s.search=s.search?`${s.search}&${h}`:h)}else a=a+r;return s.pathname=a,s.toString()}function YA(n,r,s){const a=new Map,c=new Set;if(n.queryParameters?.length)for(const u of n.queryParameters){u.mapper.type.name==="Sequence"&&u.mapper.serializedName&&c.add(u.mapper.serializedName);let h=js(r,u,s);if(h!=null||u.mapper.required){h=n.serializer.serialize(u.mapper,h,si(u));const p=u.collectionFormat?$A[u.collectionFormat]:"";if(Array.isArray(h)&&(h=h.map(m=>m??"")),u.collectionFormat==="Multi"&&h.length===0)continue;Array.isArray(h)&&(u.collectionFormat==="SSV"||u.collectionFormat==="TSV")&&(h=h.join(p)),u.skipEncoding||(Array.isArray(h)?h=h.map(m=>encodeURIComponent(m)):h=encodeURIComponent(h)),Array.isArray(h)&&(u.collectionFormat==="CSV"||u.collectionFormat==="Pipes")&&(h=h.join(p)),a.set(u.mapper.serializedName||si(u),h)}}return{queryParams:a,sequenceParams:c}}function XA(n){const r=new Map;if(!n||n[0]!=="?")return r;n=n.slice(1);const s=n.split("&");for(const a of s){const[c,u]=a.split("=",2),h=r.get(c);h?Array.isArray(h)?h.push(u):r.set(c,[h,u]):r.set(c,u)}return r}function JA(n,r,s,a=!1){if(r.size===0)return n;const c=new URL(n),u=XA(c.search);for(const[p,m]of r){const g=u.get(p);if(Array.isArray(g))if(Array.isArray(m)){g.push(...m);const y=new Set(g);u.set(p,Array.from(y))}else g.push(m);else g?(Array.isArray(m)?m.unshift(g):s.has(p)&&u.set(p,[g,m]),a||u.set(p,m)):u.set(p,m)}const h=[];for(const[p,m]of u)if(typeof m=="string")h.push(`${p}=${m}`);else if(Array.isArray(m))for(const g of m)h.push(`${p}=${g}`);else h.push(`${p}=${m}`);return c.search=h.length?`?${h.join("&")}`:"",c.toString()}const Kb=ec("core-client");class Qb{_endpoint;_requestContentType;_allowInsecureConnection;_httpClient;pipeline;constructor(r={}){if(this._requestContentType=r.requestContentType,this._endpoint=r.endpoint??r.baseUri,r.baseUri&&Kb.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=r.allowInsecureConnection,this._httpClient=r.httpClient||qA(),this.pipeline=r.pipeline||KA(r),r.additionalPolicies?.length)for(const{policy:s,position:a}of r.additionalPolicies){const c=a==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(s,{afterPhase:c})}}async sendRequest(r){return this.pipeline.sendRequest(this._httpClient,r)}async sendOperationRequest(r,s){const a=s.baseUrl||this._endpoint;if(!a)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");const c=FA(a,s,r,this),u=$h({url:c});u.method=s.httpMethod;const h=_s(u);h.operationSpec=s,h.operationArguments=r;const p=s.contentType||this._requestContentType;p&&s.requestBody&&u.headers.set("Content-Type",p);const m=r.options;if(m){const g=m.requestOptions;g&&(g.timeout&&(u.timeout=g.timeout),g.onUploadProgress&&(u.onUploadProgress=g.onUploadProgress),g.onDownloadProgress&&(u.onDownloadProgress=g.onDownloadProgress),g.shouldDeserialize!==void 0&&(h.shouldDeserialize=g.shouldDeserialize),g.allowInsecureConnection&&(u.allowInsecureConnection=!0)),m.abortSignal&&(u.abortSignal=m.abortSignal),m.tracingOptions&&(u.tracingOptions=m.tracingOptions)}this._allowInsecureConnection&&(u.allowInsecureConnection=!0),u.streamResponseStatusCodes===void 0&&(u.streamResponseStatusCodes=UA(s));try{const g=await this.sendRequest(u),y=Fy(g,s.responses[g.status]);return m?.onResponse&&m.onResponse(g,y),y}catch(g){if(typeof g=="object"&&g?.response){const y=g.response,k=Fy(y,s.responses[g.statusCode]||s.responses.default);g.details=k,m?.onResponse&&m.onResponse(y,k,g)}throw g}}}function KA(n){const r=QA(n),s=n.credential&&r?{credentialScopes:r,credential:n.credential}:void 0;return Jb({...n,credentialOptions:s})}function QA(n){if(n.credentialScopes)return n.credentialScopes;if(n.endpoint)return`${n.endpoint}/.default`;if(n.baseUri)return`${n.baseUri}/.default`;if(n.credential&&!n.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}function ZA(n){return`, ${n.trim()}`.split(", Bearer ").filter(s=>s).map(s=>`${s.trim()}, `.split('", ').filter(u=>u).map(u=>(([h,p])=>({[h]:p}))(u.trim().split('="'))).reduce((u,h)=>({...u,...h}),{}))}async function eN(n){const{scopes:r,response:s}=n,a=n.logger||Kb,c=s.headers.get("WWW-Authenticate");if(!c)return a.info("The WWW-Authenticate header was missing. Failed to perform the Continuous Access Evaluation authentication flow."),!1;const h=(ZA(c)||[]).find(m=>m.claims);if(!h)return a.info('The WWW-Authenticate header was missing the necessary "claims" to perform the Continuous Access Evaluation authentication flow.'),!1;const p=await n.getAccessToken(h.scope?[h.scope]:r,{claims:pE(h.claims)});return p?(n.request.headers.set("Authorization",`${p.tokenType??"Bearer"} ${p.token}`),!0):!1}const Zb={DefaultScope:"/.default",HeaderConstants:{AUTHORIZATION:"authorization"}};function tN(n){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(n)}const nN=async n=>{const r=aN(n.request),s=sN(n.response);if(s){const a=oN(s),c=iN(n,a),u=rN(a);if(!u)return!1;const h=await n.getAccessToken(c,{...r,tenantId:u});return h?(n.request.headers.set(Zb.HeaderConstants.AUTHORIZATION,`${h.tokenType??"Bearer"} ${h.token}`),!0):!1}return!1};function rN(n){const a=new URL(n.authorization_uri).pathname.split("/")[1];if(a&&tN(a))return a}function iN(n,r){if(!r.resource_id)return n.scopes;const s=new URL(r.resource_id);s.pathname=Zb.DefaultScope;let a=s.toString();return a==="https://disk.azure.com/.default"&&(a="https://disk.azure.com//.default"),[a]}function sN(n){const r=n.headers.get("WWW-Authenticate");if(n.status===401&&r)return r}function oN(n){return`${n.slice(7).trim()} `.split(" ").filter(c=>c).map(c=>(([u,h])=>({[u]:h}))(c.trim().split("="))).reduce((c,u)=>({...c,...u}),{})}function aN(n){return{abortSignal:n.abortSignal,requestOptions:{timeout:n.timeout},tracingOptions:n.tracingOptions}}const lN=Object.freeze(Object.defineProperty({__proto__:null,MapperTypeNames:Ai,ServiceClient:Qb,XML_ATTRKEY:$t,XML_CHARKEY:ws,authorizeRequestOnClaimChallenge:eN,authorizeRequestOnTenantChallenge:nN,createClientPipeline:Jb,createSerializer:Mh,deserializationPolicy:Gb,deserializationPolicyName:Wb,serializationPolicy:Xb,serializationPolicyName:Yb},Symbol.toStringTag,{value:"Module"})),cN=zl(lN),uN=zl(EA);var f0;function dN(){return f0||(f0=1,(function(n){var r=_2,s=fE,a=cN,c=uN;function u(Me){return Me&&typeof Me=="object"&&"default"in Me?Me:{default:Me}}var h=u(r),p=u(s),m=u(a),g=u(c),y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Wg<"u"?Wg:typeof self<"u"?self:{};function k(Me){return Me&&Me.__esModule&&Object.prototype.hasOwnProperty.call(Me,"default")?Me.default:Me}function U(Me,be){return be={exports:{}},Me(be,be.exports),be.exports}var V=U(function(Me,be){(function(Ue,W){Me.exports=W()})(y,function(){return(function(Ue){function W(J){if(M[J])return M[J].exports;var H=M[J]={i:J,l:!1,exports:{}};return Ue[J].call(H.exports,H,H.exports,W),H.l=!0,H.exports}var M={};return W.m=Ue,W.c=M,W.i=function(J){return J},W.d=function(J,H,ee){W.o(J,H)||Object.defineProperty(J,H,{configurable:!1,enumerable:!0,get:ee})},W.n=function(J){var H=J&&J.__esModule?function(){return J.default}:function(){return J};return W.d(H,"a",H),H},W.o=function(J,H){return Object.prototype.hasOwnProperty.call(J,H)},W.p="",W(W.s=1)})([function(Ue,W,M){function J(j,B){var C,T=new Promise(function(E,A){fetch(j).then(function(v){C!==void 0&&clearTimeout(C),E(v)}).catch(function(v){C!==void 0&&clearTimeout(C),A(v)})});if(B!==0){var b=new Promise(function(E,A){C=setTimeout(A,B,new Error("Fetch for '".concat(j.url,"' timed out")))});return Promise.race([T,b])}return T}function H(j){try{return JSON.stringify(j)}catch{return"Unable to serialize object of type ".concat(typeof j)}}Object.defineProperty(W,"__esModule",{value:!0}),W.Timespan=W.toJson=W.fetchWithTimeout=void 0,W.fetchWithTimeout=J,W.toJson=H;var ee=(function(){function j(){this.start=Date.now()}return Object.defineProperty(j.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(j.prototype,"startTime",{get:function(){return this.start},enumerable:!1,configurable:!0}),j.prototype.reset=function(){this.start=Date.now()},j})();W.Timespan=ee},function(Ue,W,M){function J(v,S,N){return new A(v,S,N)}var H=this&&this.__extends||(function(){var v=function(S,N){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,te){F.__proto__=te}||function(F,te){for(var X in te)Object.prototype.hasOwnProperty.call(te,X)&&(F[X]=te[X])})(S,N)};return function(S,N){function F(){this.constructor=S}if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");v(S,N),S.prototype=N===null?Object.create(N):(F.prototype=N.prototype,new F)}})(),ee=this&&this.__assign||function(){return ee=Object.assign||function(v){for(var S,N=1,F=arguments.length;N<F;N++){S=arguments[N];for(var te in S)Object.prototype.hasOwnProperty.call(S,te)&&(v[te]=S[te])}return v},ee.apply(this,arguments)},j=this&&this.__awaiter||function(v,S,N,F){function te(X){return X instanceof N?X:new N(function($){$(X)})}return new(N||(N=Promise))(function(X,$){function de(se){try{ce(F.next(se))}catch(G){$(G)}}function he(se){try{ce(F.throw(se))}catch(G){$(G)}}function ce(se){se.done?X(se.value):te(se.value).then(de,he)}ce((F=F.apply(v,S||[])).next())})},B=this&&this.__generator||function(v,S){function N(ce){return function(se){return F([ce,se])}}function F(ce){if(te)throw new TypeError("Generator is already executing.");for(;de&&(de=0,ce[0]&&(he=0)),he;)try{if(te=1,X&&($=2&ce[0]?X.return:ce[0]?X.throw||(($=X.return)&&$.call(X),0):X.next)&&!($=$.call(X,ce[1])).done)return $;switch(X=0,$&&(ce=[2&ce[0],$.value]),ce[0]){case 0:case 1:$=ce;break;case 4:return he.label++,{value:ce[1],done:!1};case 5:he.label++,X=ce[1],ce=[0];continue;case 7:ce=he.ops.pop(),he.trys.pop();continue;default:if($=he.trys,!($=$.length>0&&$[$.length-1])&&(ce[0]===6||ce[0]===2)){he=0;continue}if(ce[0]===3&&(!$||ce[1]>$[0]&&ce[1]<$[3])){he.label=ce[1];break}if(ce[0]===6&&he.label<$[1]){he.label=$[1],$=ce;break}if($&&he.label<$[2]){he.label=$[2],he.ops.push(ce);break}$[2]&&he.ops.pop(),he.trys.pop();continue}ce=S.call(v,he)}catch(se){ce=[6,se],X=0}finally{te=$=0}if(5&ce[0])throw ce[1];return{value:ce[0]?ce[1]:void 0,done:!0}}var te,X,$,de,he={label:0,sent:function(){if(1&$[0])throw $[1];return $[1]},trys:[],ops:[]};return de={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(de[Symbol.iterator]=function(){return this}),de};Object.defineProperty(W,"__esModule",{value:!0}),W.createRegistrarClient=W.RegistrarClient=void 0;var C=M(0),T=["skype","aad","cae"],b=(function(v){function S(N){var F=v.call(this,N)||this;return F.name="CancelationError",F}return H(S,v),S})(Error),E=(function(){function v(S,N,F){this.logger=S,this.maxBackoffInMs=N,this.initialDelay=F,this.backoffCount=0,this.id=++v.idCounter}return v.prototype.delay=function(S){var N=this;if(this.timerHandle!==void 0)throw new Error("Retry sequence logical failure");if(this.backoffCount===-1)return new Promise(function(te,X){X(new b("Cancelled"))});var F=this.calculateNextBackoffMs();return this.backoffCount++,this.logger.info("[RegistrarClient] Backing off ".concat(S," for ").concat(F," milliseconds with ID ").concat(this.id)),new Promise(function(te,X){N.cancelFunc=X,N.timerHandle=setTimeout(function(){N.logger.info("[RegistrarClient] Back off for ".concat(S," with ID ").concat(N.id," complete")),N.timerHandle=void 0,te()},F)})},v.prototype.cancel=function(){this.timerHandle!==void 0&&(this.logger.debug("Resetting back off"),clearTimeout(this.timerHandle),this.cancelFunc!==void 0&&this.cancelFunc(new b("Cancelled"))),this.backoffCount=-1},v.prototype.calculateNextBackoffMs=function(){var S=1+.4*(Math.random()-.5),N=this.initialDelay*Math.pow(2,this.backoffCount)*S;return N=Math.round(N),Math.min(this.maxBackoffInMs,N)},v.idCounter=0,v})(),A=(function(){function v(S,N,F){var te;this.logger=S,this.tokenProvider=N,this.options=F,this.DEFAULT_MAX_RETRIES_FOR_GET_TOKEN=15,this.DEFAULT_MAX_BACKOFF_TIME_IN_MS=3e5,this.backoffs={},this.maxBackOffTime=this.options.maxRetryDelayMs>0?this.options.maxRetryDelayMs:this.DEFAULT_MAX_BACKOFF_TIME_IN_MS,this.maxRetriesForGetToken=F.maxRetriesForGetToken===void 0||F.maxRetriesForGetToken===null?this.DEFAULT_MAX_RETRIES_FOR_GET_TOKEN:F.maxRetriesForGetToken,this.proxyUrlRewrite=(te=F.proxyUrlRewrite)!==null&&te!==void 0?te:function(X){return X}}return v.prototype.setTelemetryLogger=function(S){this.eventLogger=S},v.prototype.register=function(S,N){return j(this,void 0,void 0,function(){return B(this,function(F){switch(F.label){case 0:return[4,this.performRegistration(S,N,"pr_set_registration")];case 1:return F.sent(),this.cachedRegistrationParams=[S,N],[2]}})})},v.prototype.unregister=function(){return j(this,void 0,void 0,function(){var S;return B(this,function(N){switch(N.label){case 0:return this.logger.info("[RegistrarClient] sending unregister request"),S=new Request(this.proxyUrlRewrite("".concat(this.options.registrarUrl,"/").concat(this.options.registrationId)),{method:"DELETE",mode:"cors",headers:new Headers(ee(ee({},this.options.extraRegistrationHeaders),{accept:"application/json, text/javascript"}))}),[4,this.callRegistrar(S,"pr_delete_registration")];case 1:return N.sent(),[2]}})})},v.prototype.cancelPendingRequests=function(){var S=this;Object.keys(this.backoffs).forEach(function(N){S.backoffs[N].cancel()}),this.backoffs={}},v.prototype.resendRegistration=function(){return j(this,void 0,void 0,function(){return B(this,function(S){switch(S.label){case 0:if(!this.cachedRegistrationParams)throw new Error("Re-registration failed because there is no registration parameters cached");return[4,this.performRegistration(this.cachedRegistrationParams[0],this.cachedRegistrationParams[1],"pr_resend_registration")];case 1:return S.sent(),[2]}})})},v.prototype.performRegistration=function(S,N,F){return j(this,void 0,void 0,function(){var te,X;return B(this,function($){switch($.label){case 0:return this.logger.info("[RegistrarClient] Sending register request"),te={clientDescription:S,registrationId:this.options.registrationId,nodeId:"",transports:N},X=new Request(this.proxyUrlRewrite(this.options.registrarUrl),{method:"POST",mode:"cors",headers:new Headers(ee(ee({},this.options.extraRegistrationHeaders),{"content-type":"application/json",accept:"application/json, text/javascript"})),body:(0,C.toJson)(te)}),[4,this.callRegistrar(X,F)];case 1:return $.sent(),[2]}})})},v.prototype.startBackoff=function(){var S=new E(this.logger,this.maxBackOffTime,this.options.initialRetryDelayMs);return this.backoffs[S.id]=S,S},v.prototype.stopBackoff=function(S){S.cancel(),delete this.backoffs[S.id]},v.prototype.getToken=function(S){return j(this,void 0,void 0,function(){var N,F,te,X,$,de,he;return B(this,function(ce){switch(ce.label){case 0:N=this.startBackoff(),F=0,ce.label=1;case 1:return ce.trys.push([1,3,,8]),this.logger.info("[RegistrarClient] Asking for a new token"),[4,this.tokenProvider({needFresh:!0,supportedTokenTypes:T,wwwAuthenticateHeader:S,purpose:"registrar"})];case 2:return te=ce.sent(),this.stopBackoff(N),[2,te];case 3:X=ce.sent(),ce.label=4;case 4:return ce.trys.push([4,6,,7]),F++,$=JSON.stringify(X),F>this.maxRetriesForGetToken?(de="[RegistrarClient] getToken retry limit hit. Will not retry now. Error: ".concat($),this.logger.error(de),this.stopBackoff(N),[2,Promise.reject(de)]):(this.logger.warn("[RegistrarClient] Retrying for a new token. Retry Count: ".concat(F," Error: ").concat($)),[4,N.delay("Fetching a new token")]);case 5:return ce.sent(),[3,8];case 6:throw he=ce.sent(),this.stopBackoff(N),he;case 7:return[3,8];case 8:return[3,1];case 9:return[2]}})})},v.prototype.callRegistrar=function(S,N){var F,te,X;return j(this,void 0,void 0,function(){var $,de,he,ce,se,G,je,Ne,xe,ne,Te,ke,O,w,L,P;return B(this,function(D){switch(D.label){case 0:return $=this.startBackoff(),[4,this.tokenProvider({needFresh:!1,supportedTokenTypes:T,wwwAuthenticateHeader:void 0,purpose:"registrar"})];case 1:de=D.sent(),this.setTokenHeader(S,de),he=new C.Timespan,ce=0,D.label=2;case 2:se=void 0,D.label=3;case 3:return D.trys.push([3,10,15,16]),G=S.clone(),[4,(0,C.fetchWithTimeout)(G,this.options.requestTimeoutMs)];case 4:return se=D.sent(),se.status!==401?[3,8]:++ce>this.maxRetriesForGetToken?(je="[RegistrarClient] getSkypeToken retry limit hit. Will not retry now. Request '".concat(S.url,"' failed with ").concat(se.status," ").concat(se.statusText),this.logger.error(je),this.stopBackoff($),[2,Promise.reject(je)]):(this.logger.warn("[RegistrarClient] Retry Count ".concat(ce,". Request '").concat(S.url,"' failed with ").concat(se.status," ").concat(se.statusText)),Ne=(te=(F=se.headers)===null||F===void 0?void 0:F.get("www-authenticate"))!==null&&te!==void 0?te:void 0,xe=this.setTokenHeader,ne=[S],[4,this.getToken(Ne)]);case 5:return xe.apply(this,ne.concat([D.sent()])),ce>1?[4,$.delay("Registrar call retry after 401")]:[3,7];case 6:D.sent(),D.label=7;case 7:return[3,22];case 8:if(se.status>=500&&se.status<600)throw new Error("Fetch for '".concat(S.url,"' failed with ").concat(se.status," ").concat(se.statusText));D.label=9;case 9:return[3,16];case 10:Te=D.sent(),this.logger.error("[RegistrarClient] Request failed with ".concat(Te)),D.label=11;case 11:return D.trys.push([11,13,,14]),[4,$.delay("Registrar call retry")];case 12:return D.sent(),[3,22];case 13:throw ke=D.sent(),this.logger.error("[RegistrarClient] Request cancelled"),this.stopBackoff($),ke;case 14:return[3,16];case 15:return this.sendTelemetryEvent(N,S,se,he),[7];case 16:return this.stopBackoff($),se.ok?[2,se]:[3,17];case 17:O=void 0,D.label=18;case 18:return D.trys.push([18,20,,21]),L=(w=JSON).stringify,[4,se.json()];case 19:return O=L.apply(w,[D.sent()]),[3,21];case 20:return D.sent(),O="no details",[3,21];case 21:throw P="Fetch for '".concat(S.url,"' failed with ").concat(se.status," ").concat(se.statusText," (").concat(O,", MS-CV: ").concat((X=se.headers)===null||X===void 0?void 0:X.get("MS-CV"),")"),this.logger.error("[RegistrarClient] ".concat(P)),new Error(P);case 22:return[3,2];case 23:return[2]}})})},v.prototype.setTokenHeader=function(S,N){switch(S.headers.delete("X-Skypetoken"),S.headers.delete("Authorization"),S.headers.delete("X-MS-Migration"),N.tokenType.toLowerCase()){case"skype":S.headers.set("X-Skypetoken",N.token);break;case"aad":case"cae":S.headers.set("Authorization","Bearer ".concat(N.token));break;default:throw new Error("unsupported token type: ".concat(N.tokenType))}this.options.usingLegacyTokenApi===!1&&S.headers.set("X-MS-Migration","True")},v.prototype.sendTelemetryEvent=function(S,N,F,te){if(this.eventLogger!==void 0){var X={name:S,properties:{url:{value:N.url},result_code:{value:F!==void 0?F.status:0},begin_timestamp:{value:te.startTime},elapsed:{value:te.duration}}};this.eventLogger.logEvent(X)}},v})();W.RegistrarClient=A,W.createRegistrarClient=J}])})});k(V);var I=U(function(Me,be){(function(Ue,W){Me.exports=W(V)})(y,function(Ue){return(function(W){function M(H){if(J[H])return J[H].exports;var ee=J[H]={i:H,l:!1,exports:{}};return W[H].call(ee.exports,ee,ee.exports,M),ee.l=!0,ee.exports}var J={};return M.m=W,M.c=J,M.i=function(H){return H},M.d=function(H,ee,j){M.o(H,ee)||Object.defineProperty(H,ee,{configurable:!1,enumerable:!0,get:j})},M.n=function(H){var ee=H&&H.__esModule?function(){return H.default}:function(){return H};return M.d(ee,"a",ee),ee},M.o=function(H,ee){return Object.prototype.hasOwnProperty.call(H,ee)},M.p="",M(M.s=20)})([function(W,M,J){Object.defineProperty(M,"__esModule",{value:!0}),M.Logger=void 0;var H=(function(){function ee(j,B){this.name=j,this.logger=B}return ee.prototype.debug=function(j){this.logger.debug("[".concat(this.name,"] ").concat(j))},ee.prototype.info=function(j){this.logger.info("[".concat(this.name,"] ").concat(j))},ee.prototype.warn=function(j){this.logger.warn("[".concat(this.name,"] ").concat(j))},ee.prototype.error=function(j){this.logger.error("[".concat(this.name,"] ").concat(j))},ee})();M.Logger=H},function(W,M,J){Object.defineProperty(M,"__esModule",{value:!0}),M.USER_AUTHENTICATE_EVENT_NAME=M.SUPPORTED_TOKEN_TYPES=M.FAILED_MESSAGE_ACK=M.UNHANDLED_MESSAGE_ACK=M.HANDLED_MESSAGE_ACK=M.CLIENT_VERSION=M.constants=void 0,M.constants={TROUTER_INIT:"trouterinit",TROUTER_READY_EVENT:"trouterReadyEvent",TROUTER_READY_TIMEOUT:"trouterReadyTimeout",TROUTER_TOKEN_REQUEST:"trouterTokenRequest",TROUTER_TOKEN_GET_SUCCEEDED:"trouterTokenGetSucceeded",TROUTER_TOKEN_GET_FAILED:"trouterTokenGetFailed",TROUTER_RECONNECTING:"trouterReconnecting",RENEWAL:"renewal",NEW_CONNECTION:"newConnection",ENDPOINT_REGISTRATION_FAILED:"endpointRegistrationFailed"},M.CLIENT_VERSION="2024.14.01.55",M.HANDLED_MESSAGE_ACK=200,M.UNHANDLED_MESSAGE_ACK=404,M.FAILED_MESSAGE_ACK=500,M.SUPPORTED_TOKEN_TYPES=["skype","aad","cae"],M.USER_AUTHENTICATE_EVENT_NAME="user.authenticate"},function(W,M,J){Object.defineProperty(M,"__esModule",{value:!0}),M.TrouterState=M.UserActivityState=void 0;var H;(function(j){j[j.Unknown=0]="Unknown",j[j.Active=1]="Active",j[j.Inactive=2]="Inactive"})(H||(M.UserActivityState=H={}));var ee;(function(j){j[j.Unknown=0]="Unknown",j[j.Connected=2]="Connected",j[j.Disconnected=3]="Disconnected",j[j.Switching=9]="Switching"})(ee||(M.TrouterState=ee={}))},function(W,M,J){function H(A){try{return JSON.stringify(A)}catch{return"Unable to serialize object of type ".concat(typeof A)}}function ee(A){var v=Math.round(new Date().getTime()/1e3);return A!==void 0&&A>v?A-v:0}function j(A){return Math.round(new Date().getTime()/1e3)+A}function B(A,v){return C(this,void 0,void 0,function(){var S,N,F;return T(this,function(te){return N=new Promise(function(X,$){fetch(A).then(function(de){clearTimeout(S),X(de)}).catch(function(de){clearTimeout(S),$(de)})}),v!==0?(F=new Promise(function(X,$){var de=new URL(A.url),he=new Error("".concat(A.method," ").concat(de.origin).concat(de.pathname," timed out"));S=setTimeout($,v,he)}),[2,Promise.race([N,F])]):[2,N]})})}var C=this&&this.__awaiter||function(A,v,S,N){function F(te){return te instanceof S?te:new S(function(X){X(te)})}return new(S||(S=Promise))(function(te,X){function $(ce){try{he(N.next(ce))}catch(se){X(se)}}function de(ce){try{he(N.throw(ce))}catch(se){X(se)}}function he(ce){ce.done?te(ce.value):F(ce.value).then($,de)}he((N=N.apply(A,v||[])).next())})},T=this&&this.__generator||function(A,v){function S(he){return function(ce){return N([he,ce])}}function N(he){if(F)throw new TypeError("Generator is already executing.");for(;$&&($=0,he[0]&&(de=0)),de;)try{if(F=1,te&&(X=2&he[0]?te.return:he[0]?te.throw||((X=te.return)&&X.call(te),0):te.next)&&!(X=X.call(te,he[1])).done)return X;switch(te=0,X&&(he=[2&he[0],X.value]),he[0]){case 0:case 1:X=he;break;case 4:return de.label++,{value:he[1],done:!1};case 5:de.label++,te=he[1],he=[0];continue;case 7:he=de.ops.pop(),de.trys.pop();continue;default:if(X=de.trys,!(X=X.length>0&&X[X.length-1])&&(he[0]===6||he[0]===2)){de=0;continue}if(he[0]===3&&(!X||he[1]>X[0]&&he[1]<X[3])){de.label=he[1];break}if(he[0]===6&&de.label<X[1]){de.label=X[1],X=he;break}if(X&&de.label<X[2]){de.label=X[2],de.ops.push(he);break}X[2]&&de.ops.pop(),de.trys.pop();continue}he=v.call(A,de)}catch(ce){he=[6,ce],te=0}finally{F=X=0}if(5&he[0])throw he[1];return{value:he[0]?he[1]:void 0,done:!0}}var F,te,X,$,de={label:0,sent:function(){if(1&X[0])throw X[1];return X[1]},trys:[],ops:[]};return $={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&($[Symbol.iterator]=function(){return this}),$};Object.defineProperty(M,"__esModule",{value:!0}),M.Timespan=M.CorrelationVector=M.fetchWithTimeout=M.calculateExpireTsInSec=M.calculateTtlInSec=M.toJson=void 0,M.toJson=H,M.calculateTtlInSec=ee,M.calculateExpireTsInSec=j,M.fetchWithTimeout=B;var b=(function(){function A(v){this.base=v!==void 0?v:this.createCorrelationVectorBase(),this.extension=0}return A.extend=function(v){return new A(v)},A.prototype.increase=function(){this.extension++},A.prototype.value=function(){return"".concat(this.base,".").concat(this.extension)},A.prototype.createCorrelationVectorBase=function(){for(var v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0987654321/+",S="AQgw",N="",F=0;F<21;F++)N+=v.charAt(Math.floor(Math.random()*v.length));return N+=S.charAt(Math.floor(Math.random()*S.length))},A})();M.CorrelationVector=b;var E=(function(){function A(){this.start=Date.now()}return Object.defineProperty(A.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"startTime",{get:function(){return this.start},enumerable:!1,configurable:!0}),A.prototype.reset=function(){this.start=Date.now()},A})();M.Timespan=E},function(W,M,J){Object.defineProperty(M,"__esModule",{value:!0}),M.TrouterManagerState=M.UserActivityEventReason=M.ServerState=void 0;var H=J(3),ee=(function(){function C(T,b,E,A,v,S,N){this.connectionId=T,this.connectedClientId=b,this.domId=E,this.unsecureUrl=A,this.url=v,this.c2cUrlBase=S,this.expirationTsSec=N}return C.prototype.getRemainingTtlInSec=function(){return(0,H.calculateTtlInSec)(this.expirationTsSec)},C})();M.ServerState=ee;var j;(function(C){C[C.Unknown=0]="Unknown",C[C.Modified=1]="Modified",C[C.Snapshot=2]="Snapshot",C[C.Connected=3]="Connected"})(j||(M.UserActivityEventReason=j={}));var B;(function(C){C[C.Unknown=0]="Unknown",C[C.Connected=2]="Connected",C[C.Disconnected=3]="Disconnected",C[C.Switching=9]="Switching",C[C.TerminalError=10]="TerminalError"})(B||(M.TrouterManagerState=B={}))},function(W,M,J){function H(v,S){return v==="skype"&&ee(S?.scae)!=="1"?"v4a":"v4c"}function ee(v){return typeof v=="string"?v:typeof v=="number"?v.toString():void 0}function j(v,S){return S?.kind==="v4c-websocket-failure"?"v4a":v}function B(v){return Object.prototype.hasOwnProperty.call(v,"connectparams")}function C(v,S){return S==="v4a"?v.replace(/\/v4\/c\b/,"/v4/a").replace("wss://","https://").replace("ws://","http://"):v.replace(/\/v4\/a\b/,"/v4/c").replace("https://","wss://").replace("http://","ws://")}function T(v){if(v!==void 0)return A(A({},v),{reconnectUrl:void 0,serviceUrl:void 0})}function b(v){return typeof v=="string"?parseInt(v,10):v}function E(v){if(v?.kind==="redirect"&&v.host!==void 0){var S=v.host;return S.endsWith("/")&&(S=S.substring(0,S.length-1)),S.endsWith("/v4/c")||S.endsWith("/v4/a")||(S+="/v4/c"),S}}var A=this&&this.__assign||function(){return A=Object.assign||function(v){for(var S,N=1,F=arguments.length;N<F;N++){S=arguments[N];for(var te in S)Object.prototype.hasOwnProperty.call(S,te)&&(v[te]=S[te])}return v},A.apply(this,arguments)};Object.defineProperty(M,"__esModule",{value:!0}),M.redirectUrlIfPresent=M.ensureNumber=M.reconnectParamsWithoutUrls=M.adaptUrl=M.isV4ConnectEvent=M.usedProtocolAfterFallback=M.usedProtocol=void 0,M.usedProtocol=H,M.usedProtocolAfterFallback=j,M.isV4ConnectEvent=B,M.adaptUrl=C,M.reconnectParamsWithoutUrls=T,M.ensureNumber=b,M.redirectUrlIfPresent=E},function(W,M,J){Object.defineProperty(M,"__esModule",{value:!0}),M.TrouterFsm=M.State=void 0;var H,ee=J(4),j=J(0),B=J(5);(function(b){b[b.Initial=0]="Initial",b[b.RetrievingToken=1]="RetrievingToken",b[b.Allocating=2]="Allocating",b[b.Handshaking=3]="Handshaking",b[b.Connecting=4]="Connecting",b[b.AnonymousConnecting=5]="AnonymousConnecting",b[b.WebsocketAuthenticating=6]="WebsocketAuthenticating",b[b.Connected=7]="Connected",b[b.Unregistering=8]="Unregistering",b[b.TerminalError=9]="TerminalError"})(H||(M.State=H={}));var C;(function(b){b[b.Initial=0]="Initial",b[b.Registering=1]="Registering",b[b.RegisteringButResendPending=2]="RegisteringButResendPending",b[b.Retrying=3]="Retrying",b[b.Registered=4]="Registered",b[b.RegistrationDisabled=5]="RegistrationDisabled"})(C||(C={}));var T=(function(){function b(E,A,v,S){this.worker=A,this.incallModeEnabled=v,this.protocolSelector=S,this.state=H.Initial,this.autoReconnect=!0,this.logger=new j.Logger("ConnectionFsm",E),this.registrationState=C.Initial}return b.prototype.getState=function(){return this.state},b.prototype.isActive=function(){return this.state===H.Allocating||this.state===H.Connected||this.state===H.Handshaking||this.state===H.Connecting||this.state===H.RetrievingToken||this.state===H.AnonymousConnecting||this.state===H.WebsocketAuthenticating},b.prototype.isConnecting=function(){return this.state===H.Allocating||this.state===H.Handshaking||this.state===H.Connecting||this.state===H.AnonymousConnecting},b.prototype.start=function(){return this.state===H.Initial?(this.setState(H.RetrievingToken),this.worker.getToken(!0,!1,void 0),!0):(this.showIgnored("start"),!1)},b.prototype.stop=function(E,A){E&&(this.registrationState=C.Initial),this.worker.isIncallMode()&&this.worker.exitIncallMode(),this.worker.resetTokenBackoff(),this.worker.cancelPendingRegistrationRequests(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearSentEventTimers(),this.worker.stopRegistrationTimer(),this.worker.stopSocketIo(),this.state===H.Connected&&this.worker.sendDisconnectTelemetryEvent("connection stopped"),this.registrationState!==C.Registered&&this.registrationState!==C.Registering&&this.registrationState!==C.RegisteringButResendPending||this.state===H.Unregistering?A?(this.setState(H.TerminalError),this.worker.dispatchTerminalError()):(this.setState(H.Initial),this.worker.dispatchDisconnected()):(this.registrationState=C.Initial,this.setState(H.Unregistering),this.worker.sendUnregisterRequest())},b.prototype.onTokenReceived=function(E,A,v){this.state===H.RetrievingToken?(0,B.usedProtocolAfterFallback)(this.protocolSelector(E.tokenType,v),A)==="v4c"?(this.setState(H.AnonymousConnecting),this.worker.startConnectionTimer(),this.worker.connectV4c(E,A)):(this.setState(H.Allocating),this.worker.startConnectionTimer(),this.worker.sendAllocateRequest(E)):this.showIgnored("onTokenReceived")},b.prototype.checkConnection=function(E){E&&this.onPingInterval()},b.prototype.onAllocationSucceed=function(E){return this.state===H.Allocating&&this.registrationState===C.Registered&&this.worker.dispatchUnregistered(),this.state===H.Allocating?(this.setState(H.Handshaking),this.registrationState=C.Initial,this.worker.startSocketIo(E),!0):(this.showIgnored("onAllocationSucceed"),!1)},b.prototype.onAllocationFailed=function(E,A){this.state===H.Allocating?this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!E,claimsChallenge:A}):this.showIgnored("onAllocationFailed")},b.prototype.onV4cException=function(){this.state!==H.AnonymousConnecting&&this.state!==H.WebsocketAuthenticating||(this.logger.error("v4c exception, falling back to longpoll"),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"v4c-websocket-failure"}}))},b.prototype.onConnectingTimeout=function(){this.state===H.Allocating||this.state===H.Connecting||this.state===H.Handshaking||this.state===H.AnonymousConnecting||this.state===H.WebsocketAuthenticating?this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0}):this.showIgnored("onConnectingTimeout")},b.prototype.onConnecting=function(){this.state===H.Handshaking?this.setState(H.Connecting):this.showIgnored("onConnecting")},b.prototype.onSocketConnect=function(E){this.state===H.AnonymousConnecting?(this.setState(H.WebsocketAuthenticating),this.worker.sendV4cAuthenticationEvent(E)):this.showIgnored("onSocketConnect")},b.prototype.onConnectingFailed=function(){this.state===H.Connecting?this.onConnectingTimeout():this.state===H.Handshaking?(this.logger.error("Unexpected error in Socket.io - no valid transports"),this.onConnectingTimeout()):this.state===H.AnonymousConnecting||this.state===H.WebsocketAuthenticating?(this.logger.info("/v4/c falling back to longpoll"),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"v4c-websocket-failure"}})):this.showIgnored("onConnectingFailed")},b.prototype.onSocketDisconnect=function(E){this.state===H.Handshaking||this.state===H.Connected||this.state===H.WebsocketAuthenticating?(this.state===H.Connected&&this.worker.sendDisconnectTelemetryEvent(E?.toTelemetryString()),this.state===H.WebsocketAuthenticating&&this.worker.countDisconnectBeforeConnectionEstablishment(),E?.reason==="skypetoken-deprecated"?(this.logger.error("Skypetoken deprecated response, not retrying any further"),this.onTerminalError()):this.cleanUpAndInitiateReconnect({backoff:this.state!==H.Connected&&E?.reason!=="dup",allowCachedToken:E?.reason!=="unauthorized",claimsChallenge:E?.claims})):this.showIgnored("onSocketDisconnect")},b.prototype.onTrouterConnected=function(){this.state===H.Connecting||this.state===H.WebsocketAuthenticating?(this.setState(H.Connected),this.worker.resetTokenBackoff(),this.worker.stopConnectionTimer(),this.worker.sendUserActivityState(ee.UserActivityEventReason.Connected,!0),this.worker.startPingTimer(),this.worker.dispatchConnected(),this.worker.shouldSkipRegistration()?(this.registrationState=C.RegistrationDisabled,this.worker.dispatchRegistered()):(this.registrationState=C.Registering,this.worker.sendRegisterRequest())):this.showIgnored("onTrouterConnected")},b.prototype.onReconnectRequired=function(E,A,v){this.state===H.AnonymousConnecting||this.state===H.WebsocketAuthenticating?v===void 0||v.target!=="host"||v.url===void 0||v.url===""?(this.logger.error("unexpected reconnect arguments: ".concat(v?.target," ").concat(v?.url,", reconnecting without cache")),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"redirect-no-host"}})):this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"redirect",host:v.url}}):this.worker.dispatchReconnectIsRequired(E,A)},b.prototype.disableAutoReconnect=function(){this.autoReconnect=!1},b.prototype.onDownstreamRequest=function(E){this.state===H.Connected?(this.switchToIncallModeIfEnabled(),this.worker.dispatchDownstreamRequest(E)):this.showIgnored("onDownstreamRequest")},b.prototype.onTrouterMessageLost=function(E){this.state===H.Connected?this.worker.dispatchTrouterMessageLost(E):this.showIgnored("onTrouterMessageLost")},b.prototype.onPingInterval=function(){this.state===H.Connected?this.worker.sendPingRequest():this.showIgnored("onPingInterval")},b.prototype.onPingResponseTimeout=function(){this.onMissedResponse("onPingResponseTimeout")},b.prototype.onPingResponse=function(){this.state===H.Connected||this.showIgnored("onPingResponse")},b.prototype.onRegistrationFailed=function(){this.state===H.Connected&&this.registrationState===C.Registering?(this.worker.dispatchUnregistered(),this.registrationState=C.Retrying,this.worker.startRegistrationRetryTimer()):this.state===H.Connected&&this.registrationState===C.RegisteringButResendPending?(this.registrationState=C.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationFailed")},b.prototype.onRetryRegistration=function(){this.state===H.Connected&&this.registrationState===C.Retrying?(this.registrationState=C.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRetryRegistration")},b.prototype.onRegistrationSucceeded=function(){this.state===H.Connected&&this.registrationState===C.Registering?(this.registrationState=C.Registered,this.worker.dispatchRegistered(),this.worker.startRegistrationTimer()):this.state===H.Connected&&this.registrationState===C.RegisteringButResendPending?(this.registrationState=C.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationSucceeded")},b.prototype.onRegistrationNearExpiry=function(){this.state===H.Connected&&this.registrationState===C.Registered?(this.registrationState=C.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationNearExpiry")},b.prototype.onUnregistrationDone=function(){this.state===H.Unregistering?(this.setState(H.Initial),this.worker.dispatchUnregistered(),this.worker.dispatchDisconnected()):this.showIgnored("onUnregistrationDone")},b.prototype.onResendRegistration=function(){this.worker.dispatchUnregistered(),this.state===H.Connected&&this.registrationState===C.Registered?(this.registrationState=C.Registering,this.worker.stopRegistrationTimer(),this.worker.sendRegisterRequest()):this.state===H.Connected&&this.registrationState===C.Registering&&(this.registrationState=C.RegisteringButResendPending)},b.prototype.onIncallModeTimer=function(){this.worker.exitIncallMode(),this.state===H.Connected?(this.worker.stopPingTimer(),this.worker.startPingTimer()):this.showIgnored("onIncallModeTimer")},b.prototype.onSetNewUserActivityState=function(){this.worker.sendUserActivityState(ee.UserActivityEventReason.Modified,this.state===H.Connected)},b.prototype.onActivityStateResponseTimeout=function(){this.onMissedResponse("onActivityStateResponseTimeout")},b.prototype.forceReconnect=function(E){this.state===H.Connected&&this.worker.sendDisconnectTelemetryEvent(E),this.worker.resetTokenBackoff(),this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0})},b.prototype.onTerminalError=function(){this.logger.error("Cannot proceed, reached terminal state. Switching from state '".concat(H[this.state],"' to ").concat(H[H.TerminalError])),this.stop(!0,!0),this.setState(H.TerminalError)},b.prototype.onMissedResponse=function(E){this.state===H.Connected?(this.worker.sendDisconnectTelemetryEvent(E),this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0})):this.showIgnored(E)},b.prototype.showIgnored=function(E){this.logger.debug("Ignoring event '".concat(E,"' in state '").concat(H[this.state],"'"))},b.prototype.setState=function(E){if(this.logger.info("Switching from state '".concat(H[this.state],"' to state '").concat(H[E],"'")),this.state===E)return void this.logger.error("Attempt to switch to the current state '".concat(H[E],"'"));this.state=E},b.prototype.switchToIncallModeIfEnabled=function(){this.incallModeEnabled&&(this.worker.isIncallMode()||(this.worker.enterIncallMode(),this.worker.stopPingTimer(),this.worker.startPingTimer()),this.worker.restartIncallModeTimer())},b.prototype.cleanUpAndInitiateReconnect=function(E){if(!this.autoReconnect)return this.logger.info("Automatic reconnect is disabled, stopping this connection"),void this.stop(!0);this.worker.cancelPendingRegistrationRequests(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearSentEventTimers(),this.worker.stopRegistrationTimer(),this.worker.stopSocketIo(),this.setState(H.RetrievingToken),this.worker.dispatchReconnecting(),this.worker.getToken(E.allowCachedToken,E.backoff,E.claimsChallenge,E.fallbackReason)},b})();M.TrouterFsm=T},function(W,M,J){function H(O,w){var L=w?void 0:{"X-MS-Migration":"True"};switch(O.tokenType.toLowerCase()){case"skype":return C({"X-Skypetoken":O.token},L);case"aad":case"cae":return C({Authorization:"Bearer ".concat(O.token)},L);default:throw new Error("unsupported token type: ".concat(O.tokenType))}}function ee(O){return O!=null&&typeof O.toString=="function"?O.toString():"[".concat(typeof O,"]")}function j(O){return typeof O=="object"&&O!==null&&O.stack!==void 0?(0,v.toJson)(O.stack):'"(no error.stack)"'}function B(O){return typeof O=="object"&&O!==null&&typeof O.message=="string"?O.message:"(no error.message)"}var C=this&&this.__assign||function(){return C=Object.assign||function(O){for(var w,L=1,P=arguments.length;L<P;L++){w=arguments[L];for(var D in w)Object.prototype.hasOwnProperty.call(w,D)&&(O[D]=w[D])}return O},C.apply(this,arguments)},T=this&&this.__awaiter||function(O,w,L,P){function D(re){return re instanceof L?re:new L(function(ye){ye(re)})}return new(L||(L=Promise))(function(re,ye){function Be(pe){try{Ie(P.next(pe))}catch(He){ye(He)}}function Oe(pe){try{Ie(P.throw(pe))}catch(He){ye(He)}}function Ie(pe){pe.done?re(pe.value):D(pe.value).then(Be,Oe)}Ie((P=P.apply(O,w||[])).next())})},b=this&&this.__generator||function(O,w){function L(Ie){return function(pe){return P([Ie,pe])}}function P(Ie){if(D)throw new TypeError("Generator is already executing.");for(;Be&&(Be=0,Ie[0]&&(Oe=0)),Oe;)try{if(D=1,re&&(ye=2&Ie[0]?re.return:Ie[0]?re.throw||((ye=re.return)&&ye.call(re),0):re.next)&&!(ye=ye.call(re,Ie[1])).done)return ye;switch(re=0,ye&&(Ie=[2&Ie[0],ye.value]),Ie[0]){case 0:case 1:ye=Ie;break;case 4:return Oe.label++,{value:Ie[1],done:!1};case 5:Oe.label++,re=Ie[1],Ie=[0];continue;case 7:Ie=Oe.ops.pop(),Oe.trys.pop();continue;default:if(ye=Oe.trys,!(ye=ye.length>0&&ye[ye.length-1])&&(Ie[0]===6||Ie[0]===2)){Oe=0;continue}if(Ie[0]===3&&(!ye||Ie[1]>ye[0]&&Ie[1]<ye[3])){Oe.label=Ie[1];break}if(Ie[0]===6&&Oe.label<ye[1]){Oe.label=ye[1],ye=Ie;break}if(ye&&Oe.label<ye[2]){Oe.label=ye[2],Oe.ops.push(Ie);break}ye[2]&&Oe.ops.pop(),Oe.trys.pop();continue}Ie=w.call(O,Oe)}catch(pe){Ie=[6,pe],re=0}finally{D=ye=0}if(5&Ie[0])throw Ie[1];return{value:Ie[0]?Ie[1]:void 0,done:!0}}var D,re,ye,Be,Oe={label:0,sent:function(){if(1&ye[0])throw ye[1];return ye[1]},trys:[],ops:[]};return Be={next:L(0),throw:L(1),return:L(2)},typeof Symbol=="function"&&(Be[Symbol.iterator]=function(){return this}),Be};Object.defineProperty(M,"__esModule",{value:!0}),M.TrouterConnection=M.ReconnectReason=void 0;var E,A=J(21),v=J(3),S=J(15),N=J(1),F=J(16),te=J(17),X=J(2),$=J(4),de=J(0),he=J(5),ce=J(6),se=J(12),G=(function(){function O(){this.cv=N.CLIENT_VERSION,this.ua="",this.hr="",this.v=""}return O})(),je=(function(){function O(){this["force new connection"]=!0,this.reconnect=!1,this.query="",this.ackTimeoutMs=5e3}return O.prototype.rewriteUrlForProxy=function(w){return w},O})(),Ne="MS-CV",xe=(function(){function O(w,L){this.logger=L,this.cvCounter=0;var P=JSON.parse(w);this.startTS=this.safeJsonNumber(P,"startTS",0),this.url=this.safeJsonString(P,"url",""),this.shortUrl=this.safeJsonString(P,"shortUrl",""),this.body=this.safeJsonString(P,"body",""),this.headers=this.safeJsonRecord(P,"headers",{}),this.id=this.safeJsonNumber(P,"id",-1),this.method=this.safeJsonString(P,"method",""),this.replied=!1,this.timedout=!1,this.receivedCv=this.headers[Ne],this.updateCvHeader()}return Object.defineProperty(O.prototype,"correlationVector",{get:function(){return this.receivedCv?"".concat(this.receivedCv,".").concat(this.cvCounter):""},enumerable:!1,configurable:!0}),O.prototype.on=function(w,L){w==="data"?this.dataCallback=L:w==="end"&&(typeof this.dataCallback=="function"&&this.dataCallback(this.body),L())},O.prototype.incrementCorrelationVector=function(){++this.cvCounter,this.updateCvHeader()},O.prototype.updateCvHeader=function(){var w=this.correlationVector;w&&(this.headers[Ne]=w)},O.prototype.safeJsonNumber=function(w,L,P){var D;if(w!=null&&Object.prototype.hasOwnProperty.call(w,L)){var re=w;if(typeof re[L]=="number")return re[L];if(typeof re[L]=="string")return parseFloat(re[L]);(D=this.logger)===null||D===void 0||D.warn("unexpected type of '".concat(L,"': ").concat(typeof re[L]))}return P},O.prototype.safeJsonString=function(w,L,P){var D;if(w!=null&&Object.prototype.hasOwnProperty.call(w,L)){var re=w;if(typeof re[L]=="string")return re[L];(D=this.logger)===null||D===void 0||D.warn("unexpected type of '".concat(L,"': ").concat(typeof re[L]))}return P},O.prototype.safeJsonRecord=function(w,L,P){var D;if(w!=null&&Object.prototype.hasOwnProperty.call(w,L)){var re=w;if(typeof re[L]=="object")return re[L];(D=this.logger)===null||D===void 0||D.warn("unexpected type of '".concat(L,"': ").concat(typeof re[L]))}return P},O})(),ne=(function(){function O(w,L,P){this.request=w,this.responseData=L,this.sendResponse=P}return O.prototype.writeHead=function(w,L){this.responseData.status=w,this.responseData.headers=L},O.prototype.write=function(w){this.responseData.body+=w},O.prototype.end=function(w){return w&&(this.responseData.body+=w),this.sendResponse(this.request,this.responseData)},O})(),Te=(function(){function O(w){this.name=w,this.args={},this.timeoutTimerId=0}return O})();(function(O){O[O.Configuration=0]="Configuration",O[O.ServerInitiated=1]="ServerInitiated"})(E||(M.ReconnectReason=E={}));var ke=(function(){function O(w,L,P,D,re,ye,Be,Oe){var Ie,pe=this;this.options=L,this.manager=P,this.tokenProvider=D,this.usingLegacyTokenApi=re,this.protocolSelector=Be,this.audienceSubscriptionState=Oe,this.WEBSOCKET_TRANSPORT_NAME="websocket",this.XHR_POLLING_TRANSPORT_NAME="xhr-polling",this.AUDIENCE_SUBSCRIPTION_RESULT_ERROR="Error",this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED="Unsubscribed",this.AUDIENCE_SUBSCRIPTION_RESULT_TIMEOUT="Timeout",this.AUDIENCE_SUBSCRIPTION_RESULT_BAD_REQUEST="BadRequest",this.AUDIENCE_SUBSCRIPTION_STATE_QUERY_PARAM_REGEX=/&audienceSubscriptionState=[^&]*|^audienceSubscriptionState=[^&]*&?/,this.connectionId="",this.inIncallMode=!1,this.connectionAttempt=0,this.connectedClientId="",this.isNavigatorOnline=!0,this.onNavigatorOnlineStatusUpdateBound=this.onNavigatorOnlineStatusUpdate.bind(this),this.c2cUrlBase="",this.connectingErrorsInRow=0,this.unauthorizedErrorCount=0,this.pendingSentEventTimers={},this.lastDisconnectReason="",this.UNKNOWN_TRANSPORT="unknown_transport",this.connectingErrorsThreshold=3,this.pendingAudienceSubscription=void 0,this.logger=new de.Logger("Connection",w),this.timeoutOptions=this.options.timeoutOptions,this.tokenBackoff=new te.ExponentialBackoff(this.logger,this.timeoutOptions.maxBackoffMs),this.clientID=Date.now(),typeof window<"u"&&window.location&&(this.domId=window.location.hostname);var He=new G;He.cv=N.CLIENT_VERSION,He.ua="",!((Ie=this.options)===null||Ie===void 0)&&Ie.clientInfo&&(He.ua=this.safeString(this.options.clientInfo.ua),He.v=this.safeString(this.options.clientInfo.v)),this.clientInfo=He,this.connectionTracker=new S.ConnectionTracker(w,this.clientID,this.clientInfo,function(){return pe.getServerState()},this.options.endpointId,this.options.clientCorrelationID,this.options.environment),this.applyConnectionTrackerOptions(L);var Ye=this.options.incallModeTimeoutMs>0;if(this.fsm=new ce.TrouterFsm(w,this,Ye,this.protocolSelector),L.registration){var dt={registrarUrl:L.registration.registrarUrl,proxyUrlRewrite:L.rewriteUrlForProxy,registrationId:L.registration.registrationId,requestTimeoutMs:L.timeoutOptions.fetchTimeoutMs,initialRetryDelayMs:1e3,maxRetryDelayMs:L.timeoutOptions.maxBackoffMs,usingLegacyTokenApi:this.usingLegacyTokenApi,maxRetriesForGetToken:L.retryLimitOnTokenFetch,extraRegistrationHeaders:L.extraConnectionHeaders};this.registrarClient=(0,A.createRegistrarClient)(w,this.tokenProvider,dt)}this.userActivityState=ye}return O.prototype.start=function(w){this.logger.info("Starting"),this.reconnectParams=w,typeof window<"u"&&window.navigator&&window.addEventListener?(this.isNavigatorOnline=window.navigator.onLine,window.addEventListener("online",this.onNavigatorOnlineStatusUpdateBound),window.addEventListener("offline",this.onNavigatorOnlineStatusUpdateBound),this.logger.debug("Registered for browser online notifications - current state: ".concat(this.isNavigatorOnline))):this.isNavigatorOnline=!0,this.fsm.start()},O.prototype.stop=function(w){this.logger.info("Stopping"),typeof window<"u"&&window.navigator&&(window.removeEventListener("online",this.onNavigatorOnlineStatusUpdateBound),window.removeEventListener("offline",this.onNavigatorOnlineStatusUpdateBound)),this.fsm.stop(w),this.connectionTracker.close()},O.prototype.configure=function(w){var L=this.options.trouterUrl!==w.trouterUrl;this.options=w,this.applyConnectionTrackerOptions(w),L&&(this.logger.info("Configuration changed. Reconnection required."),this.fsm.onReconnectRequired(!1,E.Configuration))},O.prototype.checkConnection=function(w){this.logger.info("checkConnection called with ".concat(w)),this.fsm.checkConnection(w),w&&this.connectionTracker.sendTelemetry(S.ClientEventName.CheckConnection,{disconnectDetected:w},[])},O.prototype.disableRegistrationsAndAutoReconnect=function(){this.stopRegistrationTimer(),this.cancelPendingRegistrationRequests(),this.fsm.disableAutoReconnect()},O.prototype.getServerState=function(){return new $.ServerState(this.connectionId,this.connectedClientId,this.domId?this.domId:"",this.allocateResult?this.allocateResult.url:"",this.allocateResult?this.allocateResult.surl:"",this.c2cUrlBase,this.connectionExpireTimestampInSecs)},O.prototype.getState=function(){return this.fsm.getState()},O.prototype.getToken=function(w,L,P,D,re){var ye=this;re===void 0&&(re=0),this.logger.info("Getting token ".concat(L?"with backoff":"without backoff"));var Be=function(){ye.connectionTracker.trackStart("token");var Oe={needFresh:!w,wwwAuthenticateHeader:P,supportedTokenTypes:N.SUPPORTED_TOKEN_TYPES,purpose:"trouter"};ye.logger.info("Requesting token: needFresh=".concat(Oe.needFresh," ")+"types=[".concat(N.SUPPORTED_TOKEN_TYPES,"], ")+"wwwAuthenticateHeader is ".concat(Oe.wwwAuthenticateHeader?"non empty":"empty")),ye.tokenProvider(Oe).then(function(Ie){ye.logger.debug("".concat(Ie.tokenType," token is received")),ye.connectionTracker.trackEnd("token"),ye.fsm.onTokenReceived(Ie,D,ye.reconnectParams)}).catch(function(Ie){var pe=(0,v.toJson)(Ie.stack);if(ye.logger.error("Getting token failed, will retry after timeout. Error: ".concat(pe)),ye.connectionTracker.trackError("token",pe),!ye.canRetryTokenFetchRequest(re+ye.unauthorizedErrorCount))return ye.connectionTracker.trackError("token","getToken retry limit hit, reached terminal error state"),ye.resetTokenBackoff(),void ye.fsm.onTerminalError();ye.getToken(w,!0,P,D,re+1)})};L?this.tokenBackoff.backoff("getting token",Be):(this.resetTokenBackoff(),Be())},O.prototype.startConnectionTimer=function(){var w=this;this.stopConnectionTimer(),this.logger.debug("Starting connection timeout for ".concat(this.timeoutOptions.connectionTimeoutMs," ms")),this.connectionTimeoutId=setTimeout(function(){w.logger.info("Connection timeout is fired"),w.fsm.onConnectingTimeout()},this.timeoutOptions.connectionTimeoutMs)},O.prototype.stopConnectionTimer=function(){this.connectionTimeoutId&&(this.logger.debug("Stopping connection timeout"),clearTimeout(this.connectionTimeoutId),this.connectionTimeoutId=void 0)},O.prototype.startPingTimer=function(){var w=this;this.transportTypeName==="websocket"?(this.logger.debug("Starting ping timeout for ".concat(this.timeoutOptions.pingTimeoutMs," ms")),this.pingTimerId=setInterval(function(){w.logger.info("Ping interval fired"),w.fsm.onPingInterval()},this.timeoutOptions.pingTimeoutMs)):this.logger.debug("Not starting ping for transport ".concat(this.transportTypeName))},O.prototype.stopPingTimer=function(){this.pingTimerId&&(this.logger.debug("Stopping ping timeout"),this.clearPingResponseTimer(),clearInterval(this.pingTimerId),this.pingTimerId=void 0)},O.prototype.shouldSkipRegistration=function(){return this.options.registration===void 0},O.prototype.hasCustomRegistrationTtl=function(){var w,L;return((w=this.options.registration)===null||w===void 0?void 0:w.registrarTtlSec)!==void 0&&((L=this.options.registration)===null||L===void 0?void 0:L.registrarTtlSec)!==0},O.prototype.startRegistrationTimer=function(){var w=this;this.stopRegistrationTimer();var L=this.getRegistrationTtl(),P=L[0],D=L[1];if(P<=30||!D)return this.logger.debug("Starting registration expiration timer (TTL ".concat(P," sec)")),void(this.registrationTimerId=setTimeout(function(){w.registrationTimerId=void 0,w.logger.warn("Registration expired but the connection is still alive. Should never happen"),w.dispatchUnregistered()},1e3*P));var re=P-30;this.logger.debug("Starting registration extension timer for ".concat(re," sec")),this.registrationTimerId=setTimeout(function(){w.logger.info("Registration extension timer fired"),w.registrationTimerId=setTimeout(function(){w.registrationTimerId=void 0,w.logger.debug("Registration extension did not happen in time"),w.dispatchUnregistered()},3e4),w.fsm.onRegistrationNearExpiry()},1e3*re)},O.prototype.startRegistrationRetryTimer=function(){var w=this;this.stopRegistrationTimer(),this.registrationTimerId=setTimeout(function(){w.registrationTimerId=void 0,w.fsm.onRetryRegistration()},123e3)},O.prototype.stopRegistrationTimer=function(){this.registrationTimerId&&(this.logger.debug("Stopping registration timeout"),clearTimeout(this.registrationTimerId),this.registrationTimerId=void 0)},O.prototype.resendRegistration=function(){if(!this.registrarClient)throw new Error("Trouter Client not configured to handle registrations");return this.fsm.onResendRegistration(),Promise.resolve()},O.prototype.buildSocketIoUrlParams=function(w,L){if(!this.allocateResult)throw new Error("Allocate result is undefined in buildSocketIoUrlParams()");for(var P={},D=this.allocateResult.connectparams,re=0,ye=Object.keys(D);re<ye.length;re++){var Be=ye[re];if(D[Be]!==void 0){var Oe=D[Be];typeof Oe=="string"||typeof Oe=="number"?P[Be]=Oe:this.logger.error("signatureData[".concat(Be,"] has unsupported type ").concat(typeof Oe))}}return P.v="v4",P.tc=encodeURI((0,v.toJson)(this.clientInfo)),P.timeout=this.timeoutOptions.pingTimeoutMs/1e3,P.auth="true",this.options.endpointId&&(P.epid=this.options.endpointId),w&&(P.userActivity=encodeURI((0,v.toJson)(w))),L&&(P.audienceSubscriptionState=encodeURIComponent((0,v.toJson)(L))),this.appendConnectedClientIds(this.buildQuery(P),!0)},O.prototype.startSocketIo=function(w){var L,P;if(this.logger.debug("Starting socket io"),this.connectionTracker.trackStart("connectSocket"),!this.allocateResult)throw new Error("Allocate result is undefined in startSocketIo()");var D=this.options.ioOptions?C({},this.options.ioOptions):new je,re=this.userActivityState.state!==X.UserActivityState.Unknown?this.userActivityState.increaseCvAndGetEventObject():void 0,ye=(L=this.audienceSubscriptionState)===null||L===void 0?void 0:L.increaseCvAndGetEventObject();if(D["force new connection"]=!0,D.reconnect=!1,D.rewriteUrlForProxy=this.options.rewriteUrlForProxy,D.requestHeaders=C(C({},this.options.extraConnectionHeaders),H(w,this.usingLegacyTokenApi)),D.query=this.buildSocketIoUrlParams(re,ye),this.logger.info("connecting to ".concat(this.allocateResult.socketio,"?").concat(D.query)),this.stopSocketIo(),this.socket=((P=this.options.io)!==null&&P!==void 0?P:se).connect(this.allocateResult.socketio,D),this.socket===void 0)throw new Error("Can't create Socket.io object");this.attachSocketIoHandlers(this.socket,w,re,ye)},O.prototype.stopSocketIo=function(){if(this.socket){this.logger.debug("clearing socket.io");try{for(var w=0,L=["connecting","connect","connect_failed","close_during_connecting","disconnect","reconnect","reconnect_failed","reconnecting","error","message","trouter.connected","trouter.reconnect","trouter.message_loss"];w<L.length;w++){var P=L[w];this.socket.removeAllListeners(P)}this.socket.disconnect(),this.logger.debug("cleared socket"),this.socket=void 0}catch(D){this.logger.error("exception in disconnecting previous socket. Error: ".concat(j(D)))}}},O.prototype.dispatchConnected=function(){this.logger.info("dispatching connected"),this.manager.onConnected(this)},O.prototype.dispatchRegistered=function(){this.logger.info("dispatching registered"),this.manager.onRegistered(this)},O.prototype.dispatchUnregistered=function(){this.logger.info("dispatching unregistered"),this.manager.onUnregistered(this)},O.prototype.dispatchDownstreamRequest=function(w){var L=this;this.logger.debug("dispatching downstream request");try{var P=new ne(w,new S.ResponseData(w.id),function(D,re){return L.logger.debug("sending response to downstream"),L.sendResponse(D,re)});this.manager.onDownstreamRequest(this,w,P)}catch(D){this.logger.error("exception in socket.on message. Error : ".concat(j(D)))}},O.prototype.dispatchReconnecting=function(){this.logger.info("dispatching reconnecting"),this.manager.onReconnecting(this)},O.prototype.dispatchReconnectIsRequired=function(w,L){this.logger.info("dispatching reconnect is required by server"),this.manager.onReconnectIsRequired(this,w,L)},O.prototype.dispatchDisconnected=function(){this.logger.info("dispatching disconnected"),this.manager.onDisconnected(this)},O.prototype.dispatchTerminalError=function(){this.logger.info("dispatching terminal error"),this.manager.onTerminalError(this)},O.prototype.dispatchTrouterMessageLost=function(w){this.logger.info("dispatching trouter message lost"),this.manager.onTrouterMessageLost(w)},O.prototype.countDisconnectBeforeConnectionEstablishment=function(){this.logger.warn("counting disconnect before connection was fully established as a connection failure"),++this.connectingErrorsInRow>=this.connectingErrorsThreshold&&this.resetReconnectParamsOnErrorThreshold()},O.prototype.sendProcessedDroppedIndicators=function(w){var L=this;try{this.logger.debug("emitting processed flow tags to the server");var P=new Te("trouter.processed_message_loss");P.args={droppedIndicators:w},this.sendDownstreamEvent(P,function(){L.logger.info("emitted processed flow tags to the server")})}catch(re){var D=j(re);this.logger.error("unable to send processed message loss event. Error: ".concat(D)),this.connectionTracker.trackError("trouter.processed_message_loss",D,!1)}},O.prototype.sendAllocateRequest=function(w){var L=this;this.connectionAttempt++,this.connectionTracker.trackNewConnection();var P,D=this.options.trouterUrl,re=this.reconnectParams,ye=typeof re?.se=="string"?parseInt(re.se,10):typeof re?.se=="number"?re.se:void 0;ye&&ye<=Date.now()+36e5&&(this.logger.warn("Dropping expired cached connection parameters: ".concat(new Date(ye))),this.reconnectParams=re=void 0),re&&re.serviceUrl!==D&&(this.logger.warn("Dropping cached connection parameters for a different environment (".concat(re.serviceUrl,", now ").concat(D,")")),this.reconnectParams=re=void 0),re?.reconnectUrl&&(D=re.reconnectUrl),P=re?C(C({},re),{serviceUrl:void 0,reconnectUrl:void 0}):null,D=(0,he.adaptUrl)(D,"v4a"),D=this.appendCorrelationIds(D,!1),D=this.appendEndpointId(D,!1),P&&(D+="&".concat(this.buildQuery(P)),P.v||(D+="&v=".concat("v4"))),D=this.options.rewriteUrlForProxy(D);var Be=new Request(D,{method:"POST",mode:"cors",headers:new Headers(C(C({"Content-Type":"text/plain"},this.options.extraConnectionHeaders),H(w,this.usingLegacyTokenApi)))});this.logger.info("sendAllocateRequest: POST ".concat(D)),this.connectionTracker.trackStart("allocation");var Oe,Ie=Date.now(),pe=-1,He=!1;(0,v.fetchWithTimeout)(Be,this.timeoutOptions.fetchTimeoutMs).then(function(Ye){var dt;if(pe=Ye.status,!Ye.ok)throw Oe=(dt=Ye.headers.get("www-authenticate"))!==null&&dt!==void 0?dt:void 0,He=Ye.headers.get("x-trouter-skypetoken-deprecated")==="1",L.logger.warn("Allocation request got response status ".concat(Ye.status,", www-authenticate header was ").concat(Oe?"not empty":"empty")),new Error(Ye.statusText);var vt=Ye.headers.get("content-type");if(!vt||vt!=="application/json"&&!vt.startsWith("application/json;"))throw new Error("Content-type '".concat(vt,"' is unexpected"));return L.connectionTracker.trackEnd("allocation"),Ye.json()}).then(function(Ye){L.unauthorizedErrorCount=0,L.onAllocationResponse(Ye,w)}).catch(function(Ye){L.connectingErrorsInRow++;var dt="".concat(Ye).concat(pe>=0?", status code ".concat(pe):"");if(L.logger.error("".concat(L.connectingErrorsInRow," failed connecting attempt(s) in a row. ").concat(dt)),L.connectionTracker.trackError("allocation",dt),He){var vt="Skypetoken deprecated response, not retrying any further";return L.logger.error(vt),L.connectionTracker.trackError("allocation",vt),void L.fsm.onTerminalError()}if(pe===401&&L.unauthorizedErrorCount++,!L.canRetryTokenFetchRequest(L.unauthorizedErrorCount)){var vt="getToken retry limit hit, reached terminal error state";return L.connectionTracker.trackError("allocation",vt),void L.fsm.onTerminalError()}if(pe!==-1||L.isNavigatorOnline){if(L.reconnectParams&&L.connectingErrorsInRow>=L.connectingErrorsThreshold){if(pe>=400&&pe<=599)L.resetReconnectParamsOnErrorThreshold();else if(L.reconnectParams.reconnectUrl&&L.connectingErrorsInRow%3==0){L.logger.warn("".concat(L.connectingErrorsInRow," connection attempts, testing nominal service URL"));var qn=Math.min(L.timeoutOptions.connectionTimeoutMs-(Date.now()-Ie)-500,L.timeoutOptions.fetchTimeoutMs);return void L.testNominalUrlConnectivity(qn).then(function($n){L.connectionTracker.trackProgress("nomcheck",$n?"ok":"failed"),$n?(L.logger.warn("Nominal service URL is reachable, erasing cached reconnect URL"),L.reconnectParams&&delete L.reconnectParams.reconnectUrl):L.logger.warn("Nominal service URL is not reachable either, keeping cached reconnect URL"),L.fsm.onAllocationFailed(!1,void 0)},function(){L.fsm.onAllocationFailed(!1,void 0)})}}}else L.logger.info("Expected failure, the browser says it is not online at the moment");L.fsm.onAllocationFailed(pe===401,Oe)})},O.prototype.testNominalUrlConnectivity=function(w){var L=this;if(w<1e3)return this.logger.warn("There is no time left to reasonably perform the nominal service URL connectivity check (".concat(w," ms), falling back to assuming that the connectivity is fine")),Promise.resolve(!0);var P;try{var D=new URL(this.options.trouterUrl);D.pathname="/",D.search="?"+this.buildQuery({check:Date.now(),cor_id:encodeURIComponent(this.options.clientCorrelationID),epid:encodeURIComponent(this.options.endpointId?this.options.endpointId:""),tc:encodeURIComponent((0,v.toJson)(this.clientInfo))}),P=new Request(this.options.rewriteUrlForProxy(D.toString()),{method:"GET",headers:{Accept:"text/plain"}})}catch(re){return this.logger.warn("Nominal service URL connectivity test request could not be created (".concat(re,"), falling back to assuming that the connectivity is fine")),Promise.resolve(!0)}return(0,v.fetchWithTimeout)(P,w).then(function(re){if(re.status!==200)throw new Error("Not 200 OK: ".concat(re.status," ").concat(re.statusText));return re.text()}).then(function(re){if(re!=="Trouter")throw new Error('Not "Trouter": '.concat(re.substring(0,16)).concat(re.length>16?"...":""));return!0}).catch(function(re){return L.logger.error("Nominal service URL connectivity test failed: ".concat(re)),!1})},O.prototype.sendPingRequest=function(){var w=this;if(this.socket&&this.pingResponseTimerId===void 0)try{this.logger.debug("emitting ping event");var L=!1;this.socket.emit("ping",function(){L!==!0&&w.onPingResponse()}),this.pingResponseTimerId=setTimeout(function(){w.logger.error("Ping response timeout is fired"),L=!0,w.clearPingResponseTimer(),w.fsm.onPingResponseTimeout()},this.timeoutOptions.pongTimeoutMs)}catch(D){var P=j(D);this.logger.error("unable to send ping. Error: ".concat(P)),this.connectionTracker.trackError("ping",P,!1)}},O.prototype.connectV4c=function(w,L){var P,D,re,ye,Be,Oe,Ie=this.options.ioOptions?C({},this.options.ioOptions):new je;Ie["force new connection"]=!0,Ie.reconnect=!1,!((P=this.reconnectParams)===null||P===void 0)&&P.serviceUrl&&(0,he.adaptUrl)(this.reconnectParams.serviceUrl,"v4c")!==(0,he.adaptUrl)(this.options.trouterUrl,"v4c")&&(this.logger.warn("Dropping cached connection parameters for a different environment (".concat(this.reconnectParams.serviceUrl,", now ").concat(this.options.trouterUrl,")")),this.reconnectParams=void 0);var pe=(ye=(D=(0,he.redirectUrlIfPresent)(L))!==null&&D!==void 0?D:L?.kind!=="redirect-no-host"?(re=this.reconnectParams)===null||re===void 0?void 0:re.reconnectUrl:void 0)!==null&&ye!==void 0?ye:this.options.trouterUrl,He=(0,he.adaptUrl)(pe,"v4c");Ie["skipped handshake data"]={timeout:70,websocketUrl:He},Ie.query=this.buildV4cUrlParams(),Ie.rewriteUrlForProxy=this.options.rewriteUrlForProxy;try{if(this.stopSocketIo(),this.transportTypeName="websocket",this.socket=((Be=this.options.io)!==null&&Be!==void 0?Be:se).connect(this.options.trouterUrl,Ie),this.socket===void 0)throw new Error("failed to create Socket.io object");var Ye=(Oe=this.audienceSubscriptionState)===null||Oe===void 0?void 0:Oe.increaseCvAndGetEventObject();this.attachSocketIoHandlers(this.socket,w,void 0,Ye)}catch(dt){this.logger.error("".concat(dt)),this.connectionTracker.trackError("v4c","".concat(dt)),this.fsm.onV4cException()}},O.prototype.sendV4cAuthenticationEvent=function(w){var L,P={headers:C(C({},this.options.extraConnectionHeaders),H(w,this.usingLegacyTokenApi)),connectparams:(0,he.reconnectParamsWithoutUrls)(this.reconnectParams)};(L=this.socket)===null||L===void 0||L.emit(N.USER_AUTHENTICATE_EVENT_NAME,P)},O.prototype.setUserActivityState=function(w){var L=w.state!==this.userActivityState.state;this.userActivityState=w,L?(this.logger.info("Changing user activity state to '".concat(w.toEventJSON(),"'")),this.fsm.onSetNewUserActivityState()):(this.logger.debug("Not changing the same user activity state '".concat(w.toEventJSON(),"'")),this.manager.onUserActivityStateAccepted(w.correlationVector.value()))},O.prototype.sendUserActivityState=function(w,L){this.userActivityState.state!==X.UserActivityState.Unknown&&(this.transportTypeName==="websocket"&&L?w===$.UserActivityEventReason.Connected?this.sendUserActivityStateMultiple(2):this.sendUserActivityStateMultiple(1):this.transportTypeName==="xhr-polling"&&w===$.UserActivityEventReason.Modified&&this.fsm.forceReconnect("user activity/force reconnect"))},O.prototype.setAudienceSubscriptionsAsync=function(w,L){var P=this.audienceSubscriptionState;if(this.audienceSubscriptionState=w,this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME)return this.setAudienceSubscriptionsInternalAsync(w.increaseCvAndGetEventObject(),L);if(this.transportTypeName===this.XHR_POLLING_TRANSPORT_NAME){var D=this.setAudienceSubscriptionsLongpollInternalAsync(w.increaseCvAndGetEventObject(),L,P);return this.fsm.forceReconnect("set audience subscription force reconnect"),D}throw new Error("set audience subscription executed on an unknown transport")},O.prototype.setAudienceSubscriptionsUnsafeAsync=function(w){if(w)return this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME?this.setAudienceSubscriptionsInternalAsync(w,15e3):void 0},O.prototype.setAudienceSubscriptionsInternalAsync=function(w,L){return T(this,void 0,void 0,function(){var P,D,re=this;return b(this,function(ye){switch(ye.label){case 0:return this.logger.info("[WebSocket] Audience subscription set requested."),P=new Te("audience.subscribe"),P.args=w,[4,new Promise(function(Be){var Oe=!1,Ie=setTimeout(function(){return Oe=!0,Be(re.buildAudienceSubscriptionsTimeoutResponse(w))},L);re.sendDownstreamEvent(P,function(pe,He){Oe||(clearTimeout(Ie),re.logger.debug("[Websocket] Audience subscription response: ".concat(He)),re.pendingAudienceSubscription&&re.onAudienceSubscriptionResult(He),Be(He))})})];case 1:return D=ye.sent(),this.manager.onAudiencesSetResolved(D,w.cv),[2,D]}})})},O.prototype.setAudienceSubscriptionsLongpollInternalAsync=function(w,L,P){var D;return T(this,void 0,void 0,function(){var re,ye,Be,Oe,Ie,pe,He=this;return b(this,function(Ye){switch(Ye.label){case 0:return this.logger.info("[XHR Polling] Audience subscription set requested."),this.pendingAudienceSubscription&&(this.logger.error("Racing audience subscriptions occured. This situation resolves into undefined scenario and/or nasal demons."),clearTimeout(this.pendingAudienceSubscription.timeoutId)),w.audiences.length===0?[2,this.handleAudienceUnsubscribeLongpoll(w.cv,P)]:[4,new Promise(function(dt){var vt=setTimeout(function(){return He.pendingAudienceSubscription=void 0,dt(He.buildAudienceSubscriptionsTimeoutResponse(w))},L);He.pendingAudienceSubscription={audienceSetResolve:dt,timeoutId:vt}})];case 1:return re=Ye.sent(),this.manager.getState()===X.TrouterState.Unknown||this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME?[2,re]:(ye=re.responses[0],ye?.result.audienceSubscriptionState===this.AUDIENCE_SUBSCRIPTION_RESULT_BAD_REQUEST?(this.clearAudienceSubscriptionStateQueryParam(),this.manager.onAudiencesSetResolved(re,w.cv),[2,re]):(Be=re.responses.find(function(dt){return dt.audienceId===w.audiences[0].id}),Be?.result.audienceSubscriptionState===this.AUDIENCE_SUBSCRIPTION_RESULT_ERROR?(this.clearAudienceSubscriptionStateQueryParam(),this.manager.onAudiencesSetResolved(re,w.cv),[2,re]):(Oe=((D=P?.audienceSubscriptionModel.audienceSubscriptions[0])===null||D===void 0?void 0:D.id)!==ye?.audienceId,P&&Oe&&(Ie=this.mapToSyntheticAudienceSubscriptionResponses(P.audienceSubscriptionModel.audienceSubscriptions,this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED,200),(pe=re.responses).push.apply(pe,Ie)),this.manager.onAudiencesSetResolved(re,w.cv),[2,re])))}})})},O.prototype.clearAudienceSubscriptionStateQueryParam=function(){var w,L,P;!((P=(L=(w=this.socket)===null||w===void 0?void 0:w.socket)===null||L===void 0?void 0:L.options)===null||P===void 0)&&P.query&&(this.socket.socket.options.query=this.socket.socket.options.query.replace(this.AUDIENCE_SUBSCRIPTION_STATE_QUERY_PARAM_REGEX,""))},O.prototype.handleAudienceUnsubscribeLongpoll=function(w,L){var P;this.audienceSubscriptionState=void 0;var D={responses:[]};if(L){var re=this.mapToSyntheticAudienceSubscriptionResponses(L.audienceSubscriptionModel.audienceSubscriptions,this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED,200);(P=D.responses).push.apply(P,re)}return this.manager.onAudiencesSetResolved(D,w),D},O.prototype.buildAudienceSubscriptionsTimeoutResponse=function(w){return this.logger.error("Audience subscription attempt has timed out."),{responses:this.mapToSyntheticAudienceSubscriptionResponses(w.audiences,this.AUDIENCE_SUBSCRIPTION_RESULT_TIMEOUT)}},O.prototype.mapToSyntheticAudienceSubscriptionResponses=function(w,L,P){return w.map(function(D){return{audienceId:D.id,result:{audienceSubscriptionState:L,responseStatus:P}}})},O.prototype.expediteBackoff=function(){this.tokenBackoff.expediteIfPending()},O.prototype.sendRegisterRequest=function(){var w=this;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");if(!this.allocateResult)throw new Error("Allocate result is undefined in sendRegisterRequest()");this.logger.info("sending register request");var L=new v.Timespan;this.connectionTracker.trackStart("registration");var P=this.getRegistrationTtl()[0];this.registrarClient.register({appId:this.options.registration.pnhAppId,aesKey:"",languageId:"en-US",platform:this.options.registration.platform,templateKey:this.options.registration.pnhTemplateKey,platformUIVersion:this.options.registration.platformUIVersion,productContext:this.options.registration.productContext},{TROUTER:[{context:this.options.registration.context,path:this.allocateResult.surl,ttl:P}]}).then(function(){w.logger.info("Register request successful"),w.connectionTracker.trackEnd("registration"),w.fsm.onRegistrationSucceeded(),w.connectionTracker.sendTelemetry(S.ClientEventName.Registration,{duration:L.duration},[])}).catch(function(D){w.logger.error("Register request failed. Error: ".concat(D)),w.connectionTracker.trackError("registration",B(D)),w.fsm.onRegistrationFailed(),w.connectionTracker.sendTelemetry(S.ClientEventName.Registration,{duration:L.duration},[])})},O.prototype.sendUnregisterRequest=function(){var w=this;this.logger.info("sending unregister request");var L=new v.Timespan;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");this.connectionTracker.trackStart("unregistration"),this.registrarClient.unregister().then(function(){w.logger.info("Unregister request successful"),w.connectionTracker.trackEnd("unregistration"),w.fsm.onUnregistrationDone(),w.connectionTracker.sendTelemetry(S.ClientEventName.Unregistration,{duration:L.duration},[])}).catch(function(P){w.logger.error("Unregister request failed. Error: ".concat(P)),w.connectionTracker.trackError("unregistration",B(P)),w.fsm.onUnregistrationDone(),w.connectionTracker.sendTelemetry(S.ClientEventName.Unregistration,{duration:L.duration},[])})},O.prototype.resetTokenBackoff=function(){this.tokenBackoff.reset()},O.prototype.cancelPendingRegistrationRequests=function(){this.registrarClient&&this.registrarClient.cancelPendingRequests()},O.prototype.clearSentEventTimers=function(){var w=Object.keys(this.pendingSentEventTimers);if(w.length>0){this.logger.debug("Clearing all pending downstream events related timers");for(var L=0,P=w;L<P.length;L++){var D=P[L];this.clearSentEventTimer(Number(D))}}},O.prototype.restartIncallModeTimer=function(){var w=this;this.clearIncallModeTimerId(),this.logger.debug("Restarting incall mode timer"),this.incallModeTimerId=setTimeout(function(){w.logger.info("Call mode timer fired"),w.fsm.onIncallModeTimer()},this.options.incallModeTimeoutMs)},O.prototype.enterIncallMode=function(){this.logger.info("Entering incall mode"),this.timeoutOptions=this.options.incallTimeoutOptions,this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!0},O.prototype.exitIncallMode=function(){this.logger.info("Exiting incall mode"),this.clearIncallModeTimerId(),this.timeoutOptions=this.options.timeoutOptions,this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!1},O.prototype.isIncallMode=function(){return this.inIncallMode},O.prototype.sendDisconnectTelemetryEvent=function(w){var L={reason:w,serverClosed:!this.fsm.isActive()};this.connectionTracker.trackDisconnected(L),this.connectionTracker.clearConnectedInfo()},O.prototype.forceReconnectDueToNoRegistration=function(){this.fsm.forceReconnect("force reconnect due to no registration")},O.prototype.resetReconnectParamsOnErrorThreshold=function(){this.logger.warn("".concat(this.connectingErrorsInRow," connection attempts, server-side failure: erasing cached connection parameters")),this.reconnectParams=void 0},O.prototype.onSocketConnecting=function(w){this.logger.info("onSocketConnecting(".concat(w,")")),this.transportTypeName=w,this.connectionTracker.trackProgress("connecting",this.transportTypeName),this.fsm.onConnecting()},O.prototype.onSocketConnect=function(w){this.logger.info("onSocketConnect"),this.fsm.onSocketConnect(w)},O.prototype.onSocketConnectFailed=function(w){this.logger.error("onSocketConnectFailed"),this.connectionTracker.trackError("connect_failed",w,!0,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),this.fsm.onConnectingFailed()},O.prototype.onSocketDisconnect=function(w){var L=this.connectionTracker.getSessionLength()||0,P=F.DisconnectReason.fromRawReason(w);this.logger.error("onSocketDisconnect, reason: ".concat(P.reason)),P.reason==="dup"&&this.lastDisconnectReason==="dup"&&L<this.options.duplicateDisconnectThresholdMs&&(this.logger.warn("Socket was closed by server as Duplicate for the second time in a row "+"after ".concat(L," ms which is below the threshold of ")+"".concat(this.options.duplicateDisconnectThresholdMs," ms. Resetting cached ")+"connection parameters and making a new allocation."),this.reconnectParams=void 0),this.lastDisconnectReason=P.reason,this.fsm.onSocketDisconnect(P),this.connectionExpireTimestampInSecs=void 0},O.prototype.onSocketReconnect=function(){this.logger.error("onSocketReconnect"),this.fsm.onTrouterConnected()},O.prototype.onSocketReconnectFailed=function(w){this.logger.error("onSocketReconnectFailed with '".concat(w,"'")),this.fsm.onSocketDisconnect(F.DisconnectReason.fromSocketIoEventData("reconnecterror",w))},O.prototype.onSocketReconnecting=function(){this.logger.error("onSocketReconnecting")},O.prototype.onSocketError=function(w){this.logger.error("onSocketError with '".concat((0,v.toJson)(w),"'")),this.fsm.isConnecting()&&++this.connectingErrorsInRow>=this.connectingErrorsThreshold&&this.resetReconnectParamsOnErrorThreshold(),this.connectionTracker.trackError("connectSocket",ee(w)),this.fsm.onSocketDisconnect(F.DisconnectReason.fromSocketIoEventData("socketerror",w))},O.prototype.onSocketMessage=function(w){var L,P=this;this.logger.debug("onSocketMessage");var D;try{D=new xe(w,this.logger);var re=(L=D.headers)===null||L===void 0?void 0:L["X-Microsoft-Skype-Chain-ID"],ye=re?" Chain-Id ".concat(re):"";this.logger.info("Received request N ".concat(D.id).concat(ye," CV ").concat(D.correlationVector," to '").concat(D.url,"'")),D.startTS=Date.now(),D.url&&this.urlPath&&D.url.startsWith(this.urlPath)&&(D.shortUrl=D.url.substring(this.urlPath.length))}catch(Oe){var Be=j(Oe);return this.logger.error("unable to parse request. Error: ".concat(Be)),this.connectionTracker.trackRequest(void 0,Be),void this.connectionTracker.sendResponseError("unable to parse request, error: ".concat(Oe))}D.timeoutTimerId=setTimeout(function(){if(!D.replied){P.logger.error("Request ".concat(D.id," timed out"));var Oe=new S.ResponseData(D.id);Oe.status=504,Oe.headers={"Trouter-Responder":"ClientLib"},P.sendResponse(D,Oe),D.timedout=!0}},this.timeoutOptions.requestTimeoutMs);try{this.connectionTracker.trackRequest(D),this.fsm.onDownstreamRequest(D)}catch(Oe){this.logger.error("exception in socket.on message. Error: ".concat(j(Oe))),this.connectionTracker.sendResponseError(B(Oe),D,void 0)}},O.prototype.onTrouterConnected=function(w,L,P){var D,re,ye,Be,Oe=this;if((0,he.isV4ConnectEvent)(w)){var Ie=w;this.allocateResult=C(C({},Ie),{ttl:w.ttl.toString()}),this.populateAndCacheReconnectParams(Ie,Ie.reconnectUrl),this.populateConnectionStateFields(Ie)}else if(!this.allocateResult)return void this.logger.error("Invalid internal state - received onTrouterConnected while allocateResult is not set");this.connectingErrorsInRow=0,this.logger.info("onTrouterConnected: ".concat(this.allocateResult.url)),this.transportTypeName==="xhr-polling"&&L&&this.manager.onUserActivityStateAccepted(L.cv),!((ye=(re=(D=this.socket)===null||D===void 0?void 0:D.socket)===null||re===void 0?void 0:re.options)===null||ye===void 0)&&ye.query&&(this.socket.socket.options.query+="&connected=true"),this.urlPath=this.allocateResult.url.replace(/https?:\/\/([A-z0-9\:\$\-\_\.\+\!\*\"\(\)\,]*)\//,"/");var pe=this.connectedUrl!==this.allocateResult.url;this.connectedUrl=this.allocateResult.url,this.connectionExpireTimestampInSecs=(0,v.calculateExpireTsInSec)((0,he.ensureNumber)(w.ttl)),this.connectionTracker.trackEnd("connectSocket"),this.connectionTracker.trackConnected(pe,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),(Be=this.setAudienceSubscriptionsUnsafeAsync(P))===null||Be===void 0||Be.catch(function(He){return Oe.logger.error("Re-subscribe to audiences has failed with ".concat(He))}),this.fsm.onTrouterConnected()},O.prototype.onTrouterReconnect=function(w){var L=w.target;this.logger.info("onTrouterReconnect target: ".concat(L)),L==="self"?this.fsm.onReconnectRequired(!0,E.ServerInitiated):this.fsm.onReconnectRequired(!1,E.ServerInitiated,w)},O.prototype.onTrouterMessageLoss=function(w){this.logger.debug("onTrouterMessageLoss"),this.fsm.onTrouterMessageLost(w.droppedIndicators)},O.prototype.onAudienceSubscriptionResult=function(w){this.logger.info("onAudienceSubscriptionResult"),this.pendingAudienceSubscription&&(clearTimeout(this.pendingAudienceSubscription.timeoutId),this.pendingAudienceSubscription.audienceSetResolve(w),this.pendingAudienceSubscription=void 0)},O.prototype.buildV4cUrlParams=function(){var w={};return w.tc=encodeURI((0,v.toJson)(this.clientInfo)),w.timeout=Math.floor(this.timeoutOptions.pingTimeoutMs/1e3),this.options.endpointId&&(w.epid=this.options.endpointId),this.appendConnectedClientIds(this.buildQuery(w),!0)},O.prototype.attachSocketIoHandlers=function(w,L,P,D){var re=this;w.on("connecting",function(ye){re.onSocketConnecting(ye)}),w.on("connect",function(){re.onSocketConnect(L)}),w.on("connect_failed",function(ye){re.onSocketConnectFailed(ye)}),w.on("close_during_connecting",function(ye){re.onSocketConnectFailed(ye)}),w.on("disconnect",function(ye){re.onSocketDisconnect(ye)}),w.on("reconnect",function(){re.onSocketReconnect()}),w.on("reconnect_failed",function(ye){re.onSocketReconnectFailed(ye)}),w.on("reconnecting",function(){re.onSocketReconnecting()}),w.on("error",function(ye){re.onSocketError(ye)}),w.on("message",function(ye){re.onSocketMessage(ye)}),w.on("trouter.connected",function(ye){re.onTrouterConnected(ye,P,D)}),w.on("trouter.reconnect",function(ye){re.onTrouterReconnect(ye)}),w.on("trouter.message_loss",function(ye){re.onTrouterMessageLoss(ye)}),w.on("audience.subscriptionresult",function(ye,Be){re.onAudienceSubscriptionResult(Be)})},O.prototype.onNavigatorOnlineStatusUpdate=function(){var w=window.navigator.onLine;this.logger.debug("Browser online status update - new state: ".concat(w,", previously: ").concat(this.isNavigatorOnline)),w&&!this.isNavigatorOnline?(this.isNavigatorOnline=!0,this.tokenBackoff.expediteIfPending(),this.connectionTracker.trackProgress("browserNet","online")):!w&&this.isNavigatorOnline&&(this.isNavigatorOnline=!1,this.connectionTracker.trackProgress("browserNet","offline"))},O.prototype.onAllocationResponse=function(w,L){this.logger.info("Received allocation response ".concat(JSON.stringify(w))),this.allocateResult=w,this.populateAndCacheReconnectParams(this.allocateResult,"".concat(this.allocateResult.socketio,"v4/a")),this.populateConnectionStateFields(this.allocateResult),this.fsm.onAllocationSucceed(L)},O.prototype.populateAndCacheReconnectParams=function(w,L){this.reconnectParams=C({serviceUrl:this.options.trouterUrl,reconnectUrl:L},w.connectparams),this.manager.onConnectionParametersUpdated(this.reconnectParams)},O.prototype.populateConnectionStateFields=function(w){var L,P,D=typeof w.ttl=="string"?parseInt(w.ttl,10):w.ttl;if(this.connectionExpireTimestampInSecs=(0,v.calculateExpireTsInSec)(D),this.connectionId=(L=w.id)!==null&&L!==void 0?L:"",this.connectedClientId=w.ccid,this.logger.debug("connected client id set {connectedClientId:".concat(this.connectedClientId,"}")),this.c2cUrlBase=(P=w.curlb)!==null&&P!==void 0?P:"",this.c2cUrlBase===""){var re=w.surl.indexOf("://");re>=0&&(re=w.surl.indexOf("/",re+3))>=5&&w.surl.substr(re-5,5)===":3443"&&(this.c2cUrlBase=w.surl.substr(0,re-5))}},O.prototype.onPingResponse=function(){this.logger.debug("onPingResponse"),this.connectionTracker.increasePingResponseCount(),this.clearPingResponseTimer(),this.fsm.onPingResponse()},O.prototype.clearPingResponseTimer=function(){this.pingResponseTimerId!==void 0&&(clearTimeout(this.pingResponseTimerId),this.pingResponseTimerId=void 0)},O.prototype.buildQuery=function(w){for(var L=[],P=0,D=Object.keys(w);P<D.length;P++){var re=D[P];w[re]!==void 0&&L.push("".concat(re,"=").concat(w[re]))}return L.join("&")},O.prototype.appendConnectedClientIds=function(w,L){var P="";w.includes("ccid=")||(P="ccid=".concat(this.connectedClientId,"&")),this.domId&&(P+="dom=".concat(this.domId,"&")),P.length>0&&(P=P.slice(0,-1));var D=L||w.includes("?")?"&":"?";return this.appendCorrelationIds(w+D+P,L)},O.prototype.appendEndpointId=function(w,L){var P=L||w.includes("?")?"&":"?";return!w.includes("epid")&&this.options.endpointId?"".concat(w).concat(P,"epid=").concat(this.options.endpointId):w},O.prototype.appendCorrelationIds=function(w,L){var P=L||w.includes("?")?"&":"?";return w.includes("cor_id")?w:"".concat(w).concat(P,"cor_id=").concat(this.options.clientCorrelationID)+"&con_num=".concat(this.clientID,"_").concat(this.connectionAttempt)},O.prototype.safeString=function(w){return typeof w=="string"?w:""},O.prototype.sendResponse=function(w,L){var P,D,re;if(w.timedout)return this.logger.error("Request ".concat(w.id," already timed out")),1;if(w.replied)return this.logger.error("Response for request ".concat(w.id," already sent")),2;clearTimeout(w.timeoutTimerId),w.timeoutTimerId=void 0,w.replied=!0,L.headers=(P=L.headers)!==null&&P!==void 0?P:{};var ye=w.correlationVector;this.logger.info("Sending response N ".concat(w.id," CV ").concat(ye," with status ").concat(L.status)),ye&&(L.headers[Ne]=ye),!((D=w.headers)===null||D===void 0)&&D["trouter-request"]&&(L.headers["trouter-request"]=w.headers["trouter-request"]);var Be=Date.now()-w.startTS;if(L.headers["trouter-client"]=(0,v.toJson)({cd:Be}),!((re=w.headers)===null||re===void 0)&&re["trouter-is-broadcast"]&&(L.headers["trouter-is-broadcast"]=w.headers["trouter-is-broadcast"]),this.logger.debug("response: ".concat((0,v.toJson)(L))),!this.socket)return this.connectionTracker.sendResponseError("no socket",w,L),4;try{return this.socket.send((0,v.toJson)(L)),L.sentTS=Date.now(),w.incrementCorrelationVector(),this.connectionTracker.trackResponse(w,Be,L),this.transportTypeName==="websocket"&&this.sendPingRequest(),0}catch(Ie){var Oe="unable to send data on response.end. Error: ".concat(j(Ie));return this.logger.error(Oe),this.connectionTracker.sendResponseError(Oe,w,L),4}},O.prototype.sendUserActivityStateMultiple=function(w){var L=this,P=new Te("user.activity"),D=this.userActivityState.increaseCvAndGetEventObject();P.args=D,this.logger.debug("Sending user activity '".concat(this.userActivityState.toEventJSON(),"', remaining ").concat(w-1));var re=!1;this.sendDownstreamEvent(P,function(){if(re!==!0&&(L.logger.info("User activity state: ".concat(D.state,", cv: ").concat(D.cv," accepted")),L.manager.onUserActivityStateAccepted(D.cv),L.clearSentEventTimer(P.timeoutTimerId),w>1)){var ye=setTimeout(function(){L.clearSentEventTimer(ye),L.sendUserActivityStateMultiple(w-1)},L.options.userActivitySecondResendDelayMs);L.registerSentEventTimer(ye,"user.activity/resend")}}),P.timeoutTimerId=setTimeout(function(){L.logger.error("Activity state response timeout is fired"),re=!0,L.fsm.onActivityStateResponseTimeout(),L.clearSentEventTimer(P.timeoutTimerId)},this.timeoutOptions.userActivityResponseTimeoutMs),this.registerSentEventTimer(P.timeoutTimerId,"user.activity/response")},O.prototype.sendDownstreamEvent=function(w,L){this.logger.debug("Sending downstream event ".concat(w.name)),this.socket&&this.socket.emit(w.name,w.args,L)},O.prototype.registerSentEventTimer=function(w,L){this.logger.debug("registering timer ".concat(w," -> ").concat(L)),this.pendingSentEventTimers[w]=L},O.prototype.clearSentEventTimer=function(w){var L=this.pendingSentEventTimers[w];this.logger.debug("clearing timer ".concat(w," -> ").concat(L)),delete this.pendingSentEventTimers[w],clearTimeout(w)},O.prototype.getRegistrationTtl=function(){var w,L,P=(0,v.calculateTtlInSec)(this.connectionExpireTimestampInSecs);if(this.logger.debug("Current connectionID will expire in ".concat(P," seconds")),((w=this.options.registration)===null||w===void 0?void 0:w.registrarTtlSec)&&P>0){var D=this.options.registration.registrarTtlSec<P;return[Math.min(this.options.registration.registrarTtlSec,P),D]}return!((L=this.options.registration)===null||L===void 0)&&L.registrarTtlSec?[this.options.registration.registrarTtlSec,!1]:P>0?[P,!1]:[3600,!1]},O.prototype.clearIncallModeTimerId=function(){this.incallModeTimerId!==void 0&&(this.logger.debug("Clearing in-call mode timer"),clearTimeout(this.incallModeTimerId),this.incallModeTimerId=void 0)},O.prototype.applyConnectionTrackerOptions=function(w){try{w.eventLogger&&typeof w.eventLogger.logEvent=="function"?(this.connectionTracker.mergeSettings(w.telemetrySettings),this.connectionTracker.enable(w.eventLogger)):this.logger.warn("Trouter client event logging disabled due to invalid configuration.")}catch(L){this.logger.warn("Trouter client event logging disabled. Error: ".concat(j(L))),this.connectionTracker.disable()}},O.prototype.canRetryTokenFetchRequest=function(w){var L=this.options.retryLimitOnTokenFetch;return L==null||w<L||(this.logger.warn("Reached limit on maximum number of token fetch request. Current count: ".concat(w,", retry limit: ").concat(L)),!1)},O})();M.TrouterConnection=ke},function(W,M,J){Object.defineProperty(M,"__esModule",{value:!0}),M.MessageHandlerRegistry=void 0;var H=J(1),ee=J(0),j=(function(){function B(C){this.messageHandlers=[],this.logger=new ee.Logger("MessageHandlers",C)}return B.prototype.register=function(C){if(this.messageHandlers.some(function(T){return T===C}))throw new Error("Registering the same handler twice is not allowed");this.messageHandlers.push(C)},B.prototype.clear=function(){this.logger.debug("Clearing message handlers"),this.messageHandlers=[]},B.prototype.active=function(){return this.messageHandlers.length>0},B.prototype.handleMessage=function(C){for(var T={resultCode:H.UNHANDLED_MESSAGE_ACK,isHandled:!1},b=0,E=this.messageHandlers;b<E.length;b++){var A=E[b],v=this.safeExecuteHandle(A,C);if(v!==void 0&&(v.isHandled===void 0||v.isHandled))return v.resultCode===void 0&&(v.resultCode=H.HANDLED_MESSAGE_ACK),v}return T},B.prototype.safeExecuteHandle=function(C,T){try{return C.handleMessage(T)}catch(b){return void this.logger.warn("Trouter message handler threw an exception: ".concat(b))}},B})();M.MessageHandlerRegistry=j},function(W,M,J){function H(B){var C,T=this;return function(b){return ee(T,void 0,void 0,function(){return j(this,function(E){return b&&(C=void 0),[2,new Promise(function(A,v){B(b).then(function(S){C=S,A(S)}).catch(function(S){C!==void 0&&C.length>0&&A(C),v(S)})})]})})}}var ee=this&&this.__awaiter||function(B,C,T,b){function E(A){return A instanceof T?A:new T(function(v){v(A)})}return new(T||(T=Promise))(function(A,v){function S(te){try{F(b.next(te))}catch(X){v(X)}}function N(te){try{F(b.throw(te))}catch(X){v(X)}}function F(te){te.done?A(te.value):E(te.value).then(S,N)}F((b=b.apply(B,C||[])).next())})},j=this&&this.__generator||function(B,C){function T(F){return function(te){return b([F,te])}}function b(F){if(E)throw new TypeError("Generator is already executing.");for(;S&&(S=0,F[0]&&(N=0)),N;)try{if(E=1,A&&(v=2&F[0]?A.return:F[0]?A.throw||((v=A.return)&&v.call(A),0):A.next)&&!(v=v.call(A,F[1])).done)return v;switch(A=0,v&&(F=[2&F[0],v.value]),F[0]){case 0:case 1:v=F;break;case 4:return N.label++,{value:F[1],done:!1};case 5:N.label++,A=F[1],F=[0];continue;case 7:F=N.ops.pop(),N.trys.pop();continue;default:if(v=N.trys,!(v=v.length>0&&v[v.length-1])&&(F[0]===6||F[0]===2)){N=0;continue}if(F[0]===3&&(!v||F[1]>v[0]&&F[1]<v[3])){N.label=F[1];break}if(F[0]===6&&N.label<v[1]){N.label=v[1],v=F;break}if(v&&N.label<v[2]){N.label=v[2],N.ops.push(F);break}v[2]&&N.ops.pop(),N.trys.pop();continue}F=C.call(B,N)}catch(te){F=[6,te],A=0}finally{E=v=0}if(5&F[0])throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}var E,A,v,S,N={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return S={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(S[Symbol.iterator]=function(){return this}),S};Object.defineProperty(M,"__esModule",{value:!0}),M.addCacheAsBackupTo=void 0,M.addCacheAsBackupTo=H},function(W,M,J){var H=this&&this.__awaiter||function(X,$,de,he){function ce(se){return se instanceof de?se:new de(function(G){G(se)})}return new(de||(de=Promise))(function(se,G){function je(ne){try{xe(he.next(ne))}catch(Te){G(Te)}}function Ne(ne){try{xe(he.throw(ne))}catch(Te){G(Te)}}function xe(ne){ne.done?se(ne.value):ce(ne.value).then(je,Ne)}xe((he=he.apply(X,$||[])).next())})},ee=this&&this.__generator||function(X,$){function de(xe){return function(ne){return he([xe,ne])}}function he(xe){if(ce)throw new TypeError("Generator is already executing.");for(;je&&(je=0,xe[0]&&(Ne=0)),Ne;)try{if(ce=1,se&&(G=2&xe[0]?se.return:xe[0]?se.throw||((G=se.return)&&G.call(se),0):se.next)&&!(G=G.call(se,xe[1])).done)return G;switch(se=0,G&&(xe=[2&xe[0],G.value]),xe[0]){case 0:case 1:G=xe;break;case 4:return Ne.label++,{value:xe[1],done:!1};case 5:Ne.label++,se=xe[1],xe=[0];continue;case 7:xe=Ne.ops.pop(),Ne.trys.pop();continue;default:if(G=Ne.trys,!(G=G.length>0&&G[G.length-1])&&(xe[0]===6||xe[0]===2)){Ne=0;continue}if(xe[0]===3&&(!G||xe[1]>G[0]&&xe[1]<G[3])){Ne.label=xe[1];break}if(xe[0]===6&&Ne.label<G[1]){Ne.label=G[1],G=xe;break}if(G&&Ne.label<G[2]){Ne.label=G[2],Ne.ops.push(xe);break}G[2]&&Ne.ops.pop(),Ne.trys.pop();continue}xe=$.call(X,Ne)}catch(ne){xe=[6,ne],se=0}finally{ce=G=0}if(5&xe[0])throw xe[1];return{value:xe[0]?xe[1]:void 0,done:!0}}var ce,se,G,je,Ne={label:0,sent:function(){if(1&G[0])throw G[1];return G[1]},trys:[],ops:[]};return je={next:de(0),throw:de(1),return:de(2)},typeof Symbol=="function"&&(je[Symbol.iterator]=function(){return this}),je};Object.defineProperty(M,"__esModule",{value:!0}),M.TrouterManager=M.AudienceSubscriptionState=M.UserActivityObject=void 0;var j=J(3),B=J(2),C=J(4),T=J(0),b=J(5),E=J(18),A=J(7),v=J(6),S=J(19),N=(function(){function X($,de){this.state=$,this.correlationVector=de!==void 0?de:j.CorrelationVector.extend()}return X.prototype.getStateString=function(){switch(this.state){case B.UserActivityState.Active:return"active";case B.UserActivityState.Inactive:return"inactive";case B.UserActivityState.Unknown:return"unknown";default:return"undefined"}},X.prototype.increaseCvAndGetEventObject=function(){return this.correlationVector.increase(),this.toEventObject()},X.prototype.toEventObject=function(){return{state:this.getStateString(),cv:this.correlationVector.value()}},X.prototype.toEventJSON=function(){return(0,j.toJson)(this.toEventObject())},X})();M.UserActivityObject=N;var F=(function(){function X($,de){de===void 0&&(de=j.CorrelationVector.extend()),this.audienceSubscriptionModel=$,this.correlationVector=de}return X.prototype.increaseCvAndGetEventObject=function(){return this.correlationVector.increase(),this.toEventObject()},X.prototype.toEventObject=function(){return{audiences:this.audienceSubscriptionModel.audienceSubscriptions,cv:this.correlationVector.value()}},X.prototype.toEventJSON=function(){return(0,j.toJson)(this.toEventObject())},X})();M.AudienceSubscriptionState=F;var te=(function(){function X($,de,he,ce,se,G){var je=this;this.logFunc=$,this.options=de,this.tokenProvider=he,this.usingLegacyTokenApi=ce,this.listener=se,this.tokenTypeProtocolSelector=function(Ne,xe){return je.options.forceV4aProtocol?"v4a":(0,b.usedProtocol)(Ne,xe)},this.logger=new T.Logger("Manager",$),this.logger.info("Created TrouterManager with options ".concat((0,j.toJson)(this.options))),this.fsm=new S.TrouterManagerFsm($,this),this.baseEndpointUrl="",this.processedMessageLoss={},this.userActivityObject=new N(B.UserActivityState.Unknown),this.protocolSelector=G??this.tokenTypeProtocolSelector.bind(this)}return X.prototype.start=function(){this.fsm.start()},X.prototype.stop=function($){this.fsm.stop($)},X.prototype.configure=function($){this.options=$,this.firstConnection!==void 0&&this.firstConnection.configure($),this.secondConnection!==void 0&&this.secondConnection.configure($),this.logger.info("Reconfigured TrouterManager with options ".concat((0,j.toJson)(this.options)))},X.prototype.checkConnection=function($){this.firstConnection!==void 0&&this.firstConnection.checkConnection($),this.secondConnection!==void 0&&this.secondConnection.checkConnection($)},X.prototype.resendRegistration=function(){return H(this,void 0,void 0,function(){return ee(this,function($){return this.secondConnection!==void 0?(this.logger.info("Resending registration on the second/new connection"),[2,this.secondConnection.resendRegistration()]):this.firstConnection!==void 0?(this.logger.info("Resending registration on the first/current connection"),[2,this.firstConnection.resendRegistration()]):(this.logger.info("No connection to resend registration on, will be done upon (re)connect"),[2])})})},X.prototype.getServerState=function(){if(this.firstConnection!==void 0)return this.firstConnection.getServerState()},X.prototype.getState=function(){return this.fsm.getState()},X.prototype.isInTerminalState=function(){return this.fsm.getInternalState()===C.TrouterManagerState.TerminalError},X.prototype.reportStateInfo=function(){var $=this.firstConnection?v.State[this.firstConnection.getState()]:"Unknown",de=C.TrouterManagerState[this.fsm.getInternalState()];if(this.secondConnection){var he=v.State[this.secondConnection.getState()];return"Manager ".concat(de,"; 1st ").concat($,"; 2nd ").concat(he)}return"Manager ".concat(de,"; Connection ").concat($)},X.prototype.startFirstConnection=function(){var $=new A.TrouterConnection(this.logFunc,this.options,this.configuredTrouterManager(),this.tokenProvider,this.usingLegacyTokenApi,this.userActivityObject,this.protocolSelector,this.audienceSubscriptionState);this.firstConnection=$,this.getConnectionCache().then(function(de){$.start(de)}).catch(function(){})},X.prototype.startSecondConnection=function($){var de=new A.TrouterConnection(this.logFunc,this.options,this.configuredTrouterManager(),this.tokenProvider,this.usingLegacyTokenApi,this.userActivityObject,this.protocolSelector,this.audienceSubscriptionState);this.secondConnection=de,this.firstConnection!==void 0&&this.firstConnection.disableRegistrationsAndAutoReconnect(),$?this.getConnectionCache().then(function(he){de.start(he)}).catch(function(){}):de.start()},X.prototype.stopFirstConnection=function($){this.firstConnection!==void 0&&(this.storedFirstConnection=this.firstConnection,this.firstConnection.stop($),this.firstConnection=void 0)},X.prototype.stopSecondConnection=function($){this.secondConnection!==void 0&&(this.secondConnection.stop($),this.secondConnection=void 0)},X.prototype.stopSecondConnectionDelayed=function(){if(this.secondConnection!==void 0){var $=this.secondConnection;this.secondConnection=void 0,this.logger.info("Closing an inactive connection in ".concat(Math.round(this.options.lingeringConnectionDelayMs/1e3),"s")),setTimeout(function(){$.stop(!0)},this.options.lingeringConnectionDelayMs)}},X.prototype.forceStopLingeringConnection=function(){this.storedFirstConnection&&(this.storedFirstConnection.stop(!1),this.storedFirstConnection=void 0)},X.prototype.switchConnections=function(){var $=this.firstConnection;this.firstConnection=this.secondConnection,this.secondConnection=$},X.prototype.doesSecondConnectionExist=function(){return this.secondConnection!==void 0},X.prototype.dispatchConnected=function(){if(this.firstConnection!==void 0){var $=this.firstConnection.getServerState(),de=$.url.endsWith("/")?$.url.slice(0,-1):$.url,he={baseEndpointUrl:de,newEndpointUrl:de!==this.baseEndpointUrl,c2cUrlBase:$.c2cUrlBase,clientId:$.connectedClientId,connectionId:$.connectionId,connectionTtlSec:$.getRemainingTtlInSec()};this.baseEndpointUrl=de,this.listener.onTrouterConnected($.url,he)}},X.prototype.dispatchDisconnected=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},X.prototype.dispatchTerminalError=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},X.prototype.dispatchRegistrationState=function($){this.options.registrationStateCallback&&this.options.registrationStateCallback($)},X.prototype.expediteBackoffOnConnections=function(){var $;if(this.lastExpediteBackoffCallAt!==void 0&&Date.now()-this.lastExpediteBackoffCallAt<(($=this.options.expediteBackoffOnStartMinimumDelayMs)!==null&&$!==void 0?$:1e4))return void this.logger.info("Expedite backoff due to start() too frequent, skipping");this.lastExpediteBackoffCallAt=Date.now(),this.firstConnection!==void 0&&this.firstConnection.expediteBackoff(),this.secondConnection!==void 0&&this.secondConnection.expediteBackoff()},X.prototype.onDownstreamRequest=function($,de,he){var ce={id:de.id,method:de.method,path:"/".concat(de.shortUrl),body:de.body,headers:de.headers},se={id:de.id,status:0,headers:{},body:"",send:function(){return se.status<=100||se.status>=999?3:(he.writeHead(se.status,se.headers),he.end(se.body))}};this.listener.onTrouterRequest(ce,se)},X.prototype.onConnected=function($){this.fsm.onConnected($===this.firstConnection)},X.prototype.onRegistered=function($){this.fsm.onRegistered($===this.firstConnection)},X.prototype.onUnregistered=function($){this.fsm.onUnregistered($===this.firstConnection||$===this.storedFirstConnection)},X.prototype.onReconnecting=function($){this.fsm.onReconnecting($===this.firstConnection)},X.prototype.onReconnectIsRequired=function($,de,he){this.fsm.onReconnectionRequired($===this.firstConnection,de,he)},X.prototype.onDisconnected=function($){this.fsm.onDisconnected($===this.firstConnection||$==this.storedFirstConnection),this.storedFirstConnection=void 0},X.prototype.onTerminalError=function(){this.fsm.onTerminalError(),this.storedFirstConnection=void 0},X.prototype.onUserActivityStateAccepted=function($){this.listener.onTrouterUserActivityStateAccepted&&this.listener.onTrouterUserActivityStateAccepted($)},X.prototype.onAudiencesSetResolved=function($,de){var he,ce;(ce=(he=this.listener).onAudiencesSetResolved)===null||ce===void 0||ce.call(he,$,de)},X.prototype.onConnectionParametersUpdated=function($){this.setConnectionCache($)},X.prototype.setUserActivityState=function($,de){return this.userActivityObject=new N($,j.CorrelationVector.extend(de)),this.secondConnection!==void 0?(this.logger.info("Setting user activity ".concat(this.userActivityObject.toEventJSON()," on the second/new connection")),void this.secondConnection.setUserActivityState(this.userActivityObject)):this.firstConnection!==void 0?(this.logger.info("Setting user activity ".concat(this.userActivityObject.toEventJSON()," on the first/current connection")),void this.firstConnection.setUserActivityState(this.userActivityObject)):void 0},X.prototype.setAudienceSubscriptionsAsync=function($,de,he){if(this.audienceSubscriptionState=new F($,j.CorrelationVector.extend(he)),this.secondConnection)return this.logger.info("Setting audience subscriptions ".concat(this.audienceSubscriptionState.toEventJSON()," on second/new connection")),this.secondConnection.setAudienceSubscriptionsAsync(this.audienceSubscriptionState,de);if(this.firstConnection)return this.logger.info("Setting audience subscriptions ".concat(this.audienceSubscriptionState.toEventJSON()," on first/current connection")),this.firstConnection.setAudienceSubscriptionsAsync(this.audienceSubscriptionState,de);throw new Error("No connection found")},X.prototype.onTrouterMessageLost=function($){var de=this;if(this.listener.onTrouterMessageLoss)if($?.length){var he=$.filter(function(se){return de.processedMessageLoss["".concat(se.tag,"-").concat(se.etag)]!==void 0});if(he.length&&(this.logger.info("onTrouterMessageLoss - immediately acknowledging ".concat(he.length," seen dropped indicators")),this.sendProcessedDroppedIndicators(he),$=$.filter(function(se){return de.processedMessageLoss["".concat(se.tag,"-").concat(se.etag)]===void 0}),!$.length))return void this.logger.info("onTrouterMessageLoss - all declared dropped indicators have been seen before");var ce=this.listener.onTrouterMessageLoss($.map(function(se){return se.tag}));if(!ce)return void this.logger.warn("onTrouterMessageLoss - some flow tag(s) have not been processed by listeners");$.forEach(function(se){de.processedMessageLoss["".concat(se.tag,"-").concat(se.etag)]=""}),this.sendProcessedDroppedIndicators($)}else this.logger.warn("onTrouterMessageLoss - no flow tags have been provided")},X.prototype.getConnectionCache=function(){var $=this;return this.options.connectionCache?(this.logger.debug("Querying host's connection cache"),this.options.connectionCache.onGetTrouterConnectionCache().then(function(de){var he=de?JSON.parse(de):void 0;return typeof he=="object"?he:void 0}).catch(function(de){return $.logger.warn("Invalid connection cache content provided: ".concat(de)),$.connectionCache})):Promise.resolve(this.connectionCache)},X.prototype.setConnectionCache=function($){if(this.connectionCache=$,this.options.connectionCache)try{this.options.connectionCache.onSetTrouterConnectionCache(JSON.stringify($))}catch(de){this.logger.warn("Error setting external connection cache: ".concat(de))}},X.prototype.sendProcessedDroppedIndicators=function($){return this.firstConnection!==void 0?void this.firstConnection.sendProcessedDroppedIndicators($):this.secondConnection!==void 0?void this.secondConnection.sendProcessedDroppedIndicators($):void 0},X.prototype.configuredTrouterManager=function(){return new E.RegistrationEnforcer(this,this.options.connectionDependsOnRegistration,this.options.delayEventsUntilRegistered)},X})();M.TrouterManager=te},function(W,M,J){Object.defineProperty(M,"__esModule",{value:!0}),M.TrouterUrlPromise=void 0;var H=J(0),ee=(function(){function j(B){this.logger=new H.Logger("UrlPromise",B)}return j.prototype.getPromise=function(){var B=this;return this.url!==void 0?(this.logger.debug("returning previously resolved url: ".concat(this.url)),Promise.resolve(this.url)):(this.pendingPromise===void 0?(this.logger.debug("creating and returning promise"),this.pendingPromise=new Promise(function(C,T){B.pendingPromiseResolveRef=C,B.pendingPromiseRejectRef=T})):this.logger.debug("returning existing promise"),this.pendingPromise)},j.prototype.resolveUrl=function(B){this.url=B,this.logger.debug("got url: ".concat(this.url));var C=this.pendingPromiseResolveRef;this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,C!==void 0&&(this.logger.debug("resolving promise"),C(B))},j.prototype.rejectUrl=function(B){this.logger.debug("aborting");var C=this.pendingPromiseRejectRef;this.url=void 0,this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,C!==void 0&&(this.logger.debug("rejecting promise"),C(B))},j.prototype.resetUrl=function(){this.logger.debug("resetting url"),this.url=void 0},j})();M.TrouterUrlPromise=ee},function(W,M,J){(function(H,ee){(function(B,C){var T=B;T.version="0.9.6",T.protocol=1,T.transports=[],T.j=[],T.sockets={},T.connect=function(b,E){var A,v,S=T.util.parseUri(b);C&&C.location&&(S.protocol=S.protocol||C.location.protocol.slice(0,-1),S.host=S.host||(C.document?C.document.domain:C.location.hostname),S.port=S.port||C.location.port),A=T.util.uniqueUri(S);var N={host:S.host,secure:S.protocol=="https",port:S.port||(S.protocol=="https"?443:80),query:S.query||""};return T.util.merge(N,E),!N["force new connection"]&&T.sockets[A]||(v=new T.Socket(N)),!N["force new connection"]&&v&&(T.sockets[A]=v),v=v||T.sockets[A],N["skipped handshake data"]?v.of(""):v.of(S.path.length>1?S.path:"")}})(ee.exports,H===void 0?window:H);var j=ee.exports;(function(B,C){var T=B.util={},b=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,E=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];T.parseUri=function(v){for(var S=b.exec(v||""),N={},F=14;F--;)N[E[F]]=S[F]||"";return N},T.uniqueUri=function(v){var S=v.protocol,N=v.host,F=v.port;return"document"in C?(N=N||document.domain,F=F||(S=="https"&&document.location.protocol!=="https:"?443:document.location.port)):(N=N||"localhost",F||S!="https"||(F=443)),(S||"http")+"://"+N+":"+(F||80)},T.query=function(v,S){var N=T.chunkQuery(v||""),F=[];T.merge(N,T.chunkQuery(S||""));for(var te in N)N.hasOwnProperty(te)&&F.push(te+"="+N[te]);return F.length?"?"+F.join("&"):""},T.chunkQuery=function(v){for(var S,N={},F=v.split("&"),te=0,X=F.length;te<X;++te)S=F[te].split("="),S[0]&&(N[S[0]]=S[1]);return N};var A=!1;T.load=function(v){if("document"in C&&document.readyState==="complete"||A)return v();T.on(C,"load",v,!1)},T.on=function(v,S,N,F){v.attachEvent?v.attachEvent("on"+S,N):v.addEventListener&&v.addEventListener(S,N,F)},T.request=function(v){if(v&&typeof XDomainRequest<"u")return new XDomainRequest;if(typeof XMLHttpRequest<"u"&&(!v||T.ua.hasCORS))return new XMLHttpRequest;if(!v)try{return new window[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}return null},typeof window<"u"&&T.load(function(){A=!0}),T.defer=function(v){if(!T.ua.webkit||typeof importScripts<"u")return v();T.load(function(){setTimeout(v,100)})},T.merge=function(v,S,N,F){var te,X=F||[],$=N===void 0?2:N;for(te in S)S.hasOwnProperty(te)&&T.indexOf(X,te)<0&&(typeof v[te]=="object"&&$?T.merge(v[te],S[te],$-1,X):(v[te]=S[te],X.push(S[te])));return v},T.mixin=function(v,S){T.merge(v.prototype,S.prototype)},T.inherit=function(v,S){function N(){}N.prototype=S.prototype,v.prototype=new N},T.isArray=Array.isArray||function(v){return Object.prototype.toString.call(v)==="[object Array]"},T.intersect=function(v,S){for(var N=[],F=v.length>S.length?v:S,te=v.length>S.length?S:v,X=0,$=te.length;X<$;X++)~T.indexOf(F,te[X])&&N.push(te[X]);return N},T.indexOf=function(v,S,N){for(var F=v.length,N=N<0?N+F<0?0:N+F:N||0;N<F&&v[N]!==S;N++);return F<=N?-1:N},T.toArray=function(v){for(var S=[],N=0,F=v.length;N<F;N++)S.push(v[N]);return S},T.ua={},T.ua.hasCORS=typeof XMLHttpRequest<"u"&&(function(){try{var v=new XMLHttpRequest}catch{return!1}return v.withCredentials!=null})(),T.ua.webkit=typeof navigator<"u"&&/webkit/i.test(navigator.userAgent)})(j!==void 0?j:ee.exports,H===void 0?window:H),(function(B,C){function T(){}B.EventEmitter=T,T.prototype.on=function(b,E){return this.$events||(this.$events={}),this.$events[b]?C.util.isArray(this.$events[b])?this.$events[b].push(E):this.$events[b]=[this.$events[b],E]:this.$events[b]=E,this},T.prototype.addListener=T.prototype.on,T.prototype.once=function(b,E){function A(){v.removeListener(b,A),E.apply(this,arguments)}var v=this;return A.listener=E,this.on(b,A),this},T.prototype.removeListener=function(b,E){if(this.$events&&this.$events[b]){var A=this.$events[b];if(C.util.isArray(A)){for(var v=-1,S=0,N=A.length;S<N;S++)if(A[S]===E||A[S].listener&&A[S].listener===E){v=S;break}if(v<0)return this;A.splice(v,1),A.length||delete this.$events[b]}else(A===E||A.listener&&A.listener===E)&&delete this.$events[b]}return this},T.prototype.removeAllListeners=function(b){return this.$events&&this.$events[b]&&(this.$events[b]=null),this},T.prototype.listeners=function(b){return this.$events||(this.$events={}),this.$events[b]||(this.$events[b]=[]),C.util.isArray(this.$events[b])||(this.$events[b]=[this.$events[b]]),this.$events[b]},T.prototype.emit=function(b){if(!this.$events)return!1;var E=this.$events[b];if(!E)return!1;var A=Array.prototype.slice.call(arguments,1);if(typeof E=="function")E.apply(this,A);else{if(!C.util.isArray(E))return!1;for(var v=E.slice(),S=0,N=v.length;S<N;S++)v[S].apply(this,A)}return!0}})(j!==void 0?j:ee.exports,j!==void 0?j:ee.parent.exports),(function(B,C){if(C&&C.parse)return B.JSON={parse:C.parse,stringify:C.stringify};throw new Error("JSON not available")})(j!==void 0?j:ee.exports,typeof JSON<"u"?JSON:void 0),(function(B,C){var T=B.parser={},b=T.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],E=T.reasons=["transport not supported","client not handshaken","unauthorized"],A=T.advice=["reconnect"],v=C.JSON,S=C.util.indexOf;T.encodePacket=function(F){var te=S(b,F.type),X=F.id||"",$=F.endpoint||"",de=F.ack,he=null;switch(F.type){case"error":var ce=F.reason?S(E,F.reason):"",se=F.advice?S(A,F.advice):"";ce===""&&se===""||(he=ce+(se!==""?"+"+se:""));break;case"message":F.data!==""&&(he=F.data);break;case"event":var G={name:F.name};F.args&&F.args.length&&(G.args=F.args),he=v.stringify(G);break;case"json":he=v.stringify(F.data);break;case"connect":F.qs&&(he=F.qs);break;case"ack":he=F.ackId+(F.args&&F.args.length?"+"+v.stringify(F.args):"")}var je=[te,X+(de=="data"?"+":""),$];return he!=null&&je.push(he),je.join(":")},T.encodePayload=function(F){var te="";if(F.length==1)return F[0];for(var X=0,$=F.length;X<$;X++)te+=""+F[X].length+""+F[X];return te};var N=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;T.decodePacket=function($){var te=$.match(N);if(!te)return{};var X=te[2]||"",$=te[5]||"",de={type:b[te[1]],endpoint:te[4]||""};switch(X&&(de.id=X,te[3]?de.ack="data":de.ack=!0),de.type){case"error":var te=$.split("+");de.reason=E[te[0]]||"",de.advice=A[te[1]]||"";break;case"message":de.data=$||"";break;case"event":try{var he=v.parse($);de.name=he.name,de.args=he.args}catch{}de.args=de.args||[];break;case"json":try{de.data=v.parse($)}catch{}break;case"connect":de.qs=$||"";break;case"ack":var te=$.match(/^([0-9]+)(\+)?(.*)/);if(te&&(de.ackId=te[1],de.args=[],te[3]))try{de.args=te[3]?v.parse(te[3]):[]}catch{}break;case"disconnect":de.reason=$}return de},T.decodePayload=function(F){if(F.charAt(0)==""){for(var te=[],X=1,$="";X<F.length;X++)F.charAt(X)==""?(te.push(T.decodePacket(F.substr(X+1).substr(0,$))),X+=Number($)+1,$=""):$+=F.charAt(X);return te}return[T.decodePacket(F)]}})(j!==void 0?j:ee.exports,j!==void 0?j:ee.parent.exports),(function(B,C){function T(b,E){this.socket=b,this.sessid=E,this.connectErrorCallback=void 0,this.isOpened=!1}B.Transport=T,C.util.mixin(T,C.EventEmitter),T.prototype.onData=function(b){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),b!==""){var E=C.parser.decodePayload(b);if(E&&E.length)for(var A=0,v=E.length;A<v;A++)this.onPacket(E[A])}return this},T.prototype.onPacket=function(b){return this.socket.setHeartbeatTimeout(),b.type=="heartbeat"?this.onHeartbeat():(b.type=="connect"&&b.endpoint==""&&this.onConnect(),b.type=="error"&&b.advice=="reconnect"&&(this.isOpened=!1),this.socket.onPacket(b),this)},T.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var b=this;this.closeTimeout=setTimeout(function(){b.onDisconnect()},this.socket.closeTimeout)}},T.prototype.onDisconnect=function(){return this.close&&this.isOpened&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},T.prototype.onConnect=function(){return this.socket.onConnect(),this.connectErrorCallback=void 0,this},T.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},T.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},T.prototype.packet=function(b){this.send(C.parser.encodePacket(b))},T.prototype.onHeartbeat=function(b){this.packet({type:"heartbeat"})},T.prototype.onOpen=function(){this.isOpened=!0,this.clearCloseTimeout(),this.socket.onOpen()},T.prototype.onClose=function(){this.isOpened=!1,this.socket.onClose(),this.onDisconnect()},T.prototype.prepareUrl=function(b){var E=this.socket.options;if(E["skipped handshake data"])return E.rewriteUrlForProxy(E["skipped handshake data"].websocketUrl+(b||""));var A=this.scheme()+"://"+E.host+":"+E.port+"/"+E.resource+"/"+C.protocol+"/"+this.name+"/"+this.sessid+(b||"");return E.rewriteUrlForProxy(A)},T.prototype.ready=function(b,E){E.call(this)},T.prototype.clearEventHandlers=function(){return this}})(j!==void 0?j:ee.exports,j!==void 0?j:ee.parent.exports),(function(B,C,T){function b(A){if(this.options={port:80,secure:!1,document:"document"in T&&document,resource:"socket.io",transports:C.transports.slice(),"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843},C.util.merge(this.options,A),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.disconnected=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||C.util.ua.hasCORS)){var v=this;C.util.on(T,"unload",function(){v.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function E(){}B.Socket=b,C.util.mixin(b,C.EventEmitter),b.prototype.of=function(A){return this.namespaces[A]||(this.namespaces[A]=new C.SocketNamespace(this,A),A!==""&&this.namespaces[A].packet({type:"connect"})),this.namespaces[A]},b.prototype.publish=function(){this.emit.apply(this,arguments);var A;for(var v in this.namespaces)this.namespaces.hasOwnProperty(v)&&(A=this.of(v),A.$emit.apply(A,arguments))},b.prototype.handshake=function(A){function v(he){he instanceof Error?S.onError(he.message):A.apply(null,he.split(":"))}var S=this,N=this.options;if(!S.disconnected){var F=N.rewriteUrlForProxy(["http"+(N.secure?"s":"")+":/",N.host+":"+N.port,N.resource,C.protocol,C.util.query(this.options.query,"t="+ +new Date)].join("/"));if(this.isXDomain()&&!C.util.ua.hasCORS){var te=document.getElementsByTagName("script")[0],X=document.createElement("script");X.src=F+"&jsonp="+C.j.length,te.parentNode.insertBefore(X,te),C.j.push(function(he){v(he),X.parentNode.removeChild(X)})}else{var $=C.util.request();$.open("GET",F,!0);var de=this.options.requestHeaders;de!==void 0&&Object.keys(de).forEach(function(he){$.setRequestHeader(he,de[he])}),$.onreadystatechange=function(){$.readyState==4&&($.onreadystatechange=E,$.status==200?v($.responseText):!S.reconnecting&&S.onError($.responseText))},$.send(null)}}},b.prototype.getTransport=function(A){for(var v,S=A||this.transports,N=0;v=S[N];N++)if(C.Transport[v]&&C.Transport[v].check(this)&&(!this.isXDomain()||C.Transport[v].xdomainCheck()))return new C.Transport[v](this,this.sessionid);return null},b.prototype.connect=function(A){if(this.connecting||this.disconnected)return this;var v=this,S=function(F,te,X,$){function de(){if(!v.connected&&!v.disconnected)if(v.connecting=!1,clearTimeout(v.connectTimeoutTimer),v.options["try multiple transports"]){for(;v.remainingTransports.length>0&&v.remainingTransports.splice(0,1)[0]!=v.transport.name;);v.remainingTransports.length?he(v.remainingTransports):v.publish("connect_failed")}else v.publish("connect_failed")}function he(ce){if(v.transport&&(v.transport.clearTimeouts(),v.transport.clearEventHandlers()),v.transport=v.getTransport(ce),!v.transport||v.disconnected)return v.publish("connect_failed");v.transport.ready(v,function(){v.connecting=!0,v.publish("connecting",v.transport.name),v.transport.open(de),v.options["connect timeout"]&&(v.connectTimeoutTimer=setTimeout(function(){de()},v.options["connect timeout"]))})}v.sessionid=F,v.closeTimeout=1e3*X+2e3,v.heartbeatTimeout=1e3*te+2e3,v.transports=$?C.util.intersect($.split(","),v.options.transports):v.options.transports,v.setHeartbeatTimeout(),v.remainingTransports=v.transports.slice(0),he(v.transports),v.once("connect",function(){clearTimeout(v.connectTimeoutTimer),A&&typeof A=="function"&&A()})};if(this.options["skipped handshake data"]){var N=this.options["skipped handshake data"];S("v4c-"+new Date().getTime(),N.timeout,N.timeout,"websocket")}else this.handshake(S);return this},b.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);var A=this;this.heartbeatTimeoutTimer=setTimeout(function(){A.transport.onClose()},this.heartbeatTimeout)},b.prototype.packet=function(A){return this.connected&&!this.doBuffer?this.transport.packet(A):this.buffer.push(A),this},b.prototype.setBuffer=function(A){this.doBuffer=A,!A&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])},b.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this.disconnected=!0,this},b.prototype.disconnectSync=function(){var A=C.util.request(),v=this.resource+"/"+C.protocol+"/"+this.sessionid;A.open("GET",v,!0),this.onDisconnect("booted")},b.prototype.isXDomain=function(){var A=T.location.port||(T.location.protocol=="https:"?443:80);return this.options.host!==T.location.hostname||this.options.port!=A},b.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},b.prototype.onOpen=function(){this.open=!0},b.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},b.prototype.onPacket=function(A){this.of(A.endpoint).onPacket(A)},b.prototype.onError=function(A){A&&A.advice&&A.advice==="reconnect"&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",A&&A.reason?A.reason:A)},b.prototype.onDisconnect=function(A){var v=this.connected,S=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(v||S)&&(this.transport.close(),this.transport.clearTimeouts(),v?(this.publish("disconnect",A),A!="booted"&&this.options.reconnect&&!this.reconnecting&&this.reconnect()):this.publish("close_during_connecting",A))},b.prototype.reconnect=function(){function A(){if(S.connected){for(var X in S.namespaces)S.namespaces.hasOwnProperty(X)&&X!==""&&S.namespaces[X].packet({type:"connect"});S.publish("reconnect",S.transport.name,S.reconnectionAttempts)}clearTimeout(S.reconnectionTimer),S.removeListener("connect_failed",v),S.removeListener("connect",v),S.reconnecting=!1,delete S.reconnectionAttempts,delete S.reconnectionDelay,delete S.reconnectionTimer,delete S.redoTransports,S.options["try multiple transports"]=F}function v(){if(S.reconnecting)return S.connected?A():S.connecting&&S.reconnecting?S.reconnectionTimer=setTimeout(v,1e3):void(S.reconnectionAttempts++>=N?S.redoTransports?(S.publish("reconnect_failed"),A()):(S.on("connect_failed",v),S.options["try multiple transports"]=!0,S.transport=S.getTransport(),S.redoTransports=!0,S.connect()):(S.reconnectionDelay<te&&(S.reconnectionDelay*=2),S.connect(),S.publish("reconnecting",S.reconnectionDelay,S.reconnectionAttempts),S.reconnectionTimer=setTimeout(v,S.reconnectionDelay)))}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var S=this,N=this.options["max reconnection attempts"],F=this.options["try multiple transports"],te=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(v,this.reconnectionDelay),this.on("connect",v)}})(j!==void 0?j:ee.exports,j!==void 0?j:ee.parent.exports,H===void 0?window:H),(function(B,C){function T(E,A){this.socket=E,this.name=A||"",this.flags={},this.json=new b(this,"json"),this.ackPackets=0,this.acks={}}function b(E,A){this.namespace=E,this.name=A}B.SocketNamespace=T,C.util.mixin(T,C.EventEmitter),T.prototype.$emit=C.EventEmitter.prototype.emit,T.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},T.prototype.packet=function(E){return E.endpoint=this.name,this.socket.packet(E),this.flags={},this},T.prototype.send=function(E,A){var v={type:this.flags.json?"json":"message",data:E};return typeof A=="function"&&(v.id=++this.ackPackets,v.ack=!0,this.acks[v.id]=A),this.packet(v)},T.prototype.emit=function(E){var A=Array.prototype.slice.call(arguments,1),v=A[A.length-1],S={type:"event",name:E};return typeof v=="function"&&(S.id=++this.ackPackets,S.ack="data",this.acks[S.id]=v,A=A.slice(0,A.length-1)),S.args=A,this.packet(S)},T.prototype.disconnect=function(){return this.name===""?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},T.prototype.onPacket=function(E){function A(){v.packet({type:"ack",args:C.util.toArray(arguments),ackId:E.id})}var v=this;switch(E.type){case"connect":this.$emit("connect");break;case"disconnect":this.name===""?this.socket.onDisconnect(E.reason||"booted"):this.$emit("disconnect",E.reason||"");break;case"message":case"json":var S=["message",E.data];E.ack=="data"?S.push(A):E.ack&&this.packet({type:"ack",ackId:E.id}),this.$emit.apply(this,S);break;case"event":var S=[E.name].concat(E.args);E.ack=="data"&&S.push(A),this.$emit.apply(this,S);break;case"ack":this.acks[E.ackId]&&(this.acks[E.ackId].apply(this,E.args),delete this.acks[E.ackId]);break;case"error":E.advice?this.socket.onError(E):E.reason=="unauthorized"?this.$emit("connect_failed",E.reason):this.$emit("error",E.reason)}},b.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},b.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}})(j!==void 0?j:ee.exports,j!==void 0?j:ee.parent.exports),(function(B,C,T){function b(A){C.Transport.apply(this,arguments)}function E(){}B.websocket=b,C.util.inherit(b,C.Transport),b.prototype.name="websocket",b.prototype.open=function(A){var v,S=C.util.query(this.socket.options.query),N=this;return this.connectErrorCallback=A,v||(v=T.MozWebSocket||T.WebSocket),this.websocket=new v(this.prepareUrl(S)),this.websocket.onopen=function(){N.onOpen(),N.socket.setBuffer(!1)},this.websocket.onmessage=function(F){N.onData(F.data)},this.websocket.onclose=function(){N.onClose(),N.socket.setBuffer(!0)},this.websocket.onerror=function(F){N.onError(F)},this},b.prototype.send=function(A){return this.websocket.send(A),this},b.prototype.payload=function(A){for(var v=0,S=A.length;v<S;v++)this.packet(A[v]);return this},b.prototype.close=function(){return this.websocket.close(),this},b.prototype.onError=function(A){this.connectErrorCallback!==void 0&&(this.connectErrorCallback(),this.connectErrorCallback=void 0),this.socket.onError(A)},b.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},b.check=function(){return"WebSocket"in T&&!("__addTask"in WebSocket)||"MozWebSocket"in T},b.xdomainCheck=function(){return!0},b.prototype.clearEventHandlers=function(){return this.websocket&&(this.websocket.onopen=this.websocket.onmessage=this.websocket.onclose=this.websocket.onerror=E),this},C.transports.push("websocket")})(j!==void 0?j.Transport:ee.exports,j!==void 0?j:ee.parent.exports,H===void 0?window:H),(function(B,C,T){function b(A){A&&C.Transport.apply(this,arguments)}function E(){}B.XHR=b,C.util.inherit(b,C.Transport),b.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},b.prototype.payload=function(A){for(var v=[],S=0,N=A.length;S<N;S++)v.push(C.parser.encodePacket(A[S]));this.send(C.parser.encodePayload(v))},b.prototype.send=function(A){return this.post(A),this},b.prototype.post=function(A){function v(){this.readyState==4&&(this.onreadystatechange=E,this.status==200?(clearTimeout(this.ackTimeoutTimer),N.socket.setBuffer(!1)):N.onClose())}function S(){this.onload=E,N.socket.setBuffer(!1)}var N=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),T.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=S:this.sendXHR.onreadystatechange=v,this.sendXHR.send(A),N.sendXHR.ackTimeoutTimer=setTimeout(function(){N.onClose()},N.socket.options.ackTimeoutMs)},b.prototype.close=function(){return this.onClose(),this},b.prototype.request=function(A){var v=C.util.request(this.socket.isXDomain()),S=C.util.query(this.socket.options.query,"t="+ +new Date);v.open(A||"GET",this.prepareUrl(S),!0);var N=this.socket.options.requestHeaders;if(N!==void 0&&Object.keys(N).forEach(function(F){v.setRequestHeader(F,N[F])}),A=="POST")try{v.setRequestHeader?v.setRequestHeader("Content-type","text/plain;charset=UTF-8"):v.contentType="text/plain"}catch{}return v},b.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},b.check=function(A,v){try{var S=C.util.request(v),N=T.XDomainRequest&&S instanceof XDomainRequest,F=A&&A.options&&A.options.secure?"https:":"http:",te=F!=T.location.protocol;if(S&&(!N||!te))return!0}catch{}return!1},b.xdomainCheck=function(){return b.check(null,!0)},b.prototype.clearEventHandlers=function(){return this.sendXHR&&(this.sendXHR.onreadystatechange=this.sendXHR.onload=E),this}})(j!==void 0?j.Transport:ee.exports,j!==void 0?j:ee.parent.exports,H===void 0?window:H),(function(B,C,T){function b(){C.Transport.XHR.apply(this,arguments)}function E(){}B["xhr-polling"]=b,C.util.inherit(b,C.Transport.XHR),C.util.merge(b,C.Transport.XHR),b.prototype.name="xhr-polling",b.prototype.open=function(A){var v=this;return v.connectErrorCallback=A,C.Transport.XHR.prototype.open.call(v),!1},b.prototype.get=function(){function A(){this.readyState==4&&(this.onreadystatechange=E,this.status==200?(N.connectErrorCallback=void 0,N.onData(this.responseText),N.get()):(N.onClose(),N.connectErrorCallback!==void 0&&(N.connectErrorCallback(),N.connectErrorCallback=void 0)))}function v(){N.connectErrorCallback=void 0,this.onload=E,this.onerror=E,N.onData(this.responseText),N.get()}function S(){N.onClose(),N.connectErrorCallback!==void 0&&(N.connectErrorCallback(),N.connectErrorCallback=void 0)}if(this.isOpened){var N=this;this.xhr=this.request(),T.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=v,this.xhr.onerror=S):this.xhr.onreadystatechange=A,this.xhr.send(null)}},b.prototype.onClose=function(){if(C.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=E;try{this.xhr.abort()}catch{}this.xhr=null}},b.prototype.ready=function(A,v){var S=this;C.util.defer(function(){v.call(S)})},b.prototype.clearEventHandlers=function(){return C.Transport.XHR.prototype.clearEventHandlers.call(this),this.xhr&&(this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=E),this},C.transports.push("xhr-polling")})(j!==void 0?j.Transport:ee.exports,j!==void 0?j:ee.parent.exports,H===void 0?window:H),M.io=j}).call(M,J(13),J(14)(W))},function(W,M){var J;J=(function(){return this})();try{J=J||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(J=window)}W.exports=J},function(W,M){W.exports=function(J){return J.webpackPolyfill||(J.deprecate=function(){},J.paths=[],J.children||(J.children=[]),Object.defineProperty(J,"loaded",{enumerable:!0,get:function(){return J.l}}),Object.defineProperty(J,"id",{enumerable:!0,get:function(){return J.i}}),J.webpackPolyfill=1),J}},function(W,M,J){Object.defineProperty(M,"__esModule",{value:!0}),M.ConnectionTracker=M.Properties=M.TrackerStep=M.ClientEventName=M.ResponseData=void 0;var H=J(3),ee=J(1),j=J(0),B=(function(){function S(N){this.id=N,this.status=200,this.headers={},this.body=""}return S})();M.ResponseData=B;var C;(function(S){S.Connected="trouter_js_client_connected",S.Disconnected="trouter_js_client_disconnected",S.Error="trouter_js_client_error",S.Progress="trouter_js_client_progress",S.Response="trouter_js_client_response",S.Request="trouter_js_client_request",S.CheckConnection="trouter_js_client_check_connection",S.Registration="trouter_js_client_registration",S.Unregistration="trouter_js_client_unregistration"})(C||(M.ClientEventName=C={}));var T=(function(){function S(N,F,te,X,$){this.stepName=N,this.operation=F,this.delta=te,this.ts=X,this.error=$}return S})();M.TrackerStep=T;var b=(function(){function S(){}return S})();M.Properties=b;var E=(function(){function S(){this.numberOfPingReplies=0,this.connectedTimestamp=0,this.isNewUrl=!1,this.transportType="",this.connectionNumber=0}return S})(),A=(function(){function S(){this.enabled=!1,this.numberOfStepsToMaintain=40,this.logHealthCheckError=!1,this.sendProgressTimeoutSecs=55,this.logSendPingError=!1,this.maxBackoffInMs=12e4,this.trouter_js_client_connected=!1,this.trouter_js_client_disconnected=!1,this.trouter_js_client_error=!1,this.trouter_js_client_progress=!1,this.trouter_js_client_response=!1,this.trouter_js_client_request=!1,this.trouter_js_client_registration=!1,this.trouter_js_client_unregistration=!1,this.trouter_js_client_check_connection=!0}return S})(),v=(function(){function S(N,F,te,X,$,de,he){this.clientId=F,this.clientInfo=te,this.getServerState=X,this.endpointId=$,this.clientCorrelationID=de,this.environment=he,this.logger=new j.Logger("ConnectionTracker",N),this.clientCorrelationID=de!==void 0?de:"",this.steps=[],this.connectionAttempt=0,this.totalStepCount=0,this.beginTimestamp=new H.Timespan,this.eventLogSettings=new A,this.connectedInfo=new E}return S.prototype.enable=function(N){this.eventLogSettings.enabled=!0,this.eventLogger=N},S.prototype.disable=function(){this.eventLogSettings.enabled=!1},S.prototype.sendProgress=function(N){this.steps.length>0&&this.sendTelemetry(C.Progress,N,this.steps)},S.prototype.cancelProgressTimer=function(){this.progressTimeout!==void 0&&(clearTimeout(this.progressTimeout),this.progressTimeout=void 0)},S.prototype.resetProgressSendTimer=function(){var N=this;this.cancelProgressTimer(),this.eventLogSettings.sendProgressTimeoutSecs!==void 0&&this.eventLogSettings.sendProgressTimeoutSecs>0&&(this.progressTimeout=setTimeout(function(){N.sendProgress({reason:"timeout",timeoutSecs:N.eventLogSettings.sendProgressTimeoutSecs})},1e3*this.eventLogSettings.sendProgressTimeoutSecs))},S.prototype.setConnectedInfo=function(N,F){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=Date.now(),this.connectedInfo.isNewUrl=N,this.connectedInfo.transportType=F,++this.connectedInfo.connectionNumber},S.prototype.clearConnectedInfo=function(){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=0,this.connectedInfo.isNewUrl=!0,this.connectedInfo.transportType=""},S.prototype.copyProperties=function(N,F){for(var te=0,X=Object.keys(F);te<X.length;te++){var $=X[te];F[$]!==void 0&&(N[$.replace(/-/g,"_")]={value:F[$]})}},S.prototype.increasePingResponseCount=function(){++this.connectedInfo.numberOfPingReplies},S.prototype.sendTelemetry=function(N,F,te){try{if(this.eventLogSettings.enabled===!0&&this.eventLogSettings[N]===!0&&this.eventLogger!==void 0){var X=this.getServerState(),$={name:N,properties:{connectionAttempt:{value:this.connectionAttempt},epid:{value:this.endpointId},clientCorrelationID:{value:this.clientCorrelationID},steps:{value:(0,H.toJson)(te)},clientID:{value:this.clientId},eventVersion:{value:3},environment:{value:this.environment},cv:{value:ee.CLIENT_VERSION},ua:{value:this.clientInfo.ua},connectionId:{value:X.connectionId},connectedClientId:{value:X.connectedClientId},domId:{value:X.domId},url:{value:X.unsecureUrl},surl:{value:X.url},ttlInSecs:{value:X.getRemainingTtlInSec()},numberOfPingReplies:{value:this.connectedInfo.numberOfPingReplies},connectedTimestamp:{value:this.connectedInfo.connectedTimestamp},isNewUrl:{value:this.connectedInfo.isNewUrl},transportType:{value:this.connectedInfo.transportType},connectionNumber:{value:this.connectedInfo.connectionNumber}}};this.copyProperties($.properties,F),this.eventLogger.logEvent($)}}catch(de){this.logger.warn("error in sending event ".concat(N,": ").concat((0,H.toJson)(de)))}},S.prototype.createStep=function(N,F,te){return new T(N,F,this.beginTimestamp.duration,Date.now(),te)},S.prototype.addStep=function(N,F,te){if(this.eventLogSettings.enabled!==!1&&(this.steps.length===0&&this.beginTimestamp.reset(),this.steps.push(this.createStep(N,F,te)),++this.totalStepCount,this.eventLogSettings.numberOfStepsToMaintain!==void 0&&this.steps.length>this.eventLogSettings.numberOfStepsToMaintain)){var X=this.steps.slice(0);this.steps.length=0,this.sendTelemetry(C.Progress,{reason:"flush"},X)}},S.prototype.trackStart=function(N){this.addStep(N,"start")},S.prototype.trackEnd=function(N){this.addStep(N,"end")},S.prototype.trackError=function(N,F,te,X){te===void 0&&(te=!0),N==="health"&&this.eventLogSettings.logHealthCheckError!==!0||N==="ping"&&this.eventLogSettings.logSendPingError===!1||(X===void 0&&(X="error"),te===!0&&this.addStep(N,X,F),this.sendTelemetry(C.Error,{},[this.createStep(N,X,F)]))},S.prototype.trackProgress=function(N,F){this.addStep(N,F)},S.prototype.trackConnected=function(N,F){this.setConnectedInfo(N,F);var te=this.steps.slice(0),X=this.totalStepCount,$=this.beginTimestamp.duration;this.steps.length=0,this.totalStepCount=0,this.sendTelemetry(C.Connected,{stepCount:te.length,totalStepCount:X,connectionEstablishmentMs_Total:$},te),this.cancelProgressTimer()},S.prototype.getSessionLength=function(){return Date.now()-this.connectedInfo.connectedTimestamp},S.prototype.trackDisconnected=function(N){N.sessionLengthMS=this.getSessionLength(),this.sendTelemetry(C.Disconnected,N,[]),this.resetProgressSendTimer()},S.prototype.trackNewConnection=function(){++this.connectionAttempt},S.prototype.trackRequest=function(N,F){var te={};F!==void 0&&(te.hasError=!0,te.error=F);try{if(N){te.requestID=N.id,te.httpMethod=N.method,te.url=N.url,te.bodyLength=N.body.length,te.shortUrl=N.shortUrl,te.requestTimeStamp=N.startTS,te.correlationVector=N.correlationVector;for(var X=N.headers,$=0,de=Object.keys(X);$<de.length;$++){var he=de[$];te[he]=X[he]}}}catch(ce){te.hasError=!0,te.error="".concat(te.error," error creating request context ").concat((0,H.toJson)(ce))}this.sendTelemetry(C.Request,te,[])},S.prototype.trackResponse=function(N,F,te,X){var $={};X!==void 0&&($.hasError=!0,$.error=X);try{if($.responseTimestamp=te!==void 0?te.sentTS:Date.now(),N){$.requestID=N.id,$.httpMethod=N.method,$.shortUrl=N.shortUrl,$.correlationVector=N.correlationVector;for(var de=N.headers,he=0,ce=Object.keys(de);he<ce.length;he++){var se=ce[he];$[se]=de[se]}}te&&($.latencyMS=F,$.responseCode=te.status,$.responseLength=te.body.length)}catch(G){$.hasError=!0,$.error="".concat($.error," error creating response context ").concat((0,H.toJson)(G))}this.sendTelemetry(C.Response,$,[])},S.prototype.sendResponseError=function(N,F,te){this.trackResponse(F,void 0,te,N)},S.prototype.close=function(){this.sendProgress({reason:"closed"}),this.steps.length=0,this.cancelProgressTimer()},S.prototype.mergeSettings=function(N){if(N){this.eventLogSettings.numberOfStepsToMaintain=Math.min(40,Math.max(10,N.numberOfStepsToMaintain!==void 0?N.numberOfStepsToMaintain:0));var F=Math.min(3600,Math.max(55,N.sendProgressTimeoutSecs!==void 0?N.sendProgressTimeoutSecs:0));this.eventLogSettings.logHealthCheckError=N.logHealthCheckError,this.eventLogSettings.logSendPingError=N.logSendPingError;for(var te=0,X=Object.keys(C).map(function(de){return C[de]});te<X.length;te++){var $=X[te];N[$]!==void 0&&(this.eventLogSettings[$]=N[$])}this.eventLogSettings.sendProgressTimeoutSecs!==F&&(this.eventLogSettings.sendProgressTimeoutSecs=F,this.resetProgressSendTimer())}},S})();M.ConnectionTracker=v},function(W,M,J){Object.defineProperty(M,"__esModule",{value:!0}),M.DisconnectReason=void 0;var H=(function(){function ee(j,B,C){this.reason=j,this.claims=B,this.details=C}return ee.fromRawReason=function(j,B){if(j===""||j==="dup")return new ee(j);try{var C=JSON.parse(j);return typeof C!="object"||C.reason===void 0?(B?.error("invalid disconnect reason format"),new ee("unknown",void 0,j)):new ee(C.reason,C.claims,C.details)}catch{return new ee("disconnect",void 0,j)}},ee.fromSocketIoEventData=function(j,B){return typeof B=="string"?new ee(j,void 0,B):void 0},ee.prototype.toTelemetryString=function(){return this.reason==="socketerror"||this.reason==="reconnecterror"||this.reason==="disconnect"?this.details:this.reason},ee})();M.DisconnectReason=H},function(W,M,J){function H(j,B,C){if(j===void 0||B===void 0)return!1;var T=Date.now()-j;return T>B*C.tolerance&&T>C.minimumWaitMs}Object.defineProperty(M,"__esModule",{value:!0}),M.ExponentialBackoff=void 0;var ee=(function(){function j(B,C,T){T===void 0&&(T={tolerance:2,minimumWaitMs:1e4}),this.logger=B,this.maxBackoffInMs=C,this.gapDetectionSettings=T,this.backoffId=0,this.backoffCount=0}return j.calculateNextBackoffMs=function(B,C){var T=1+.4*(Math.random()-.5),b=1e3*Math.pow(2,B)*T;return b=Math.round(b),Math.min(C,b)},j.prototype.setMaxBackoffMs=function(B){this.maxBackoffInMs=B},j.prototype.backoff=function(B,C){var T=this;if(this.timerHandle!==void 0&&(this.logger.debug("Clearing current back off"),clearTimeout(this.timerHandle),this.timerHandle=void 0),this.previousCompleteTime!==void 0){var b=Date.now()-this.previousCompleteTime;b>this.maxBackoffInMs*this.gapDetectionSettings.tolerance&&b>this.gapDetectionSettings.minimumWaitMs&&(this.logger.info("Back off for ".concat(B," with ID ").concat(this.backoffId," will be reset due to a lot of time having passed since the previous backoff (").concat(b," ms)")),this.backoffCount=0,this.previousCompleteTime=void 0)}var E=j.calculateNextBackoffMs(this.backoffCount,this.maxBackoffInMs);this.backoffId++,this.backoffCount++,this.logger.info("Backing off ".concat(B," for ").concat(E," milliseconds with ID ").concat(this.backoffId)),this.callback=function(v,S){H(v,S,T.gapDetectionSettings)&&(T.logger.info("Back off for ".concat(B," with ID ").concat(T.backoffId," will be reset due to the wait (").concat(Date.now()-(v??0)," ms) being longer than expected (").concat(S," ms)")),T.backoffCount=0),T.logger.info("Back off for ".concat(B," with ID ").concat(T.backoffId," complete, invoking handler")),T.timerHandle=void 0,T.callback=void 0,T.previousCompleteTime=Date.now(),C()};var A=Date.now();this.timerHandle=setTimeout(function(){var v;return(v=T.callback)===null||v===void 0?void 0:v.call(T,A,E)},E)},j.prototype.reset=function(){this.timerHandle!==void 0&&(this.logger.debug("Resetting back off with ID ".concat(this.backoffId)),clearTimeout(this.timerHandle),this.timerHandle=void 0,this.callback=void 0),this.backoffCount=0},j.prototype.expediteIfPending=function(){if(this.backoffCount=0,this.timerHandle!==void 0){this.logger.debug("Expediting back off with ID ".concat(this.backoffId)),clearTimeout(this.timerHandle),this.timerHandle=void 0;var B=this.callback;this.callback=void 0,B&&B()}},j})();M.ExponentialBackoff=ee},function(W,M,J){var H=this&&this.__spreadArray||function(C,T,b){if(b||arguments.length===2)for(var E,A=0,v=T.length;A<v;A++)!E&&A in T||(E||(E=Array.prototype.slice.call(T,0,A)),E[A]=T[A]);return C.concat(E||Array.prototype.slice.call(T))};Object.defineProperty(M,"__esModule",{value:!0}),M.LoggingManagerConsumer=M.RegistrationEnforcer=void 0;var ee=J(6),j=(function(){function C(T,b,E){this.wrapped=T,this.shouldConnectionDependOnRegistration=b,this.shouldHoldBackEvents=E,this.isRegistered=!1,this.heldBackEvents=[]}return C.prototype.onDownstreamRequest=function(T,b,E){this.passIfRegisteredOrNotNeeded("onDownstreamRequest",T,b,E)},C.prototype.onConnected=function(T){this.passIfRegisteredOrNotNeeded("onConnected",T)},C.prototype.onRegistered=function(T){this.isRegistered=!0,this.wrapped.onRegistered(T),this.fireHeldBackEvents()},C.prototype.onUnregistered=function(T){this.isRegistered=!1,this.wrapped.onUnregistered(T),T.getState()===ee.State.Connected&&this.shouldConnectionDependOnRegistration()&&T.forceReconnectDueToNoRegistration()},C.prototype.onReconnecting=function(T){this.wrapped.onReconnecting(T)},C.prototype.onReconnectIsRequired=function(T,b,E){this.wrapped.onReconnectIsRequired(T,b,E)},C.prototype.onDisconnected=function(T){this.isRegistered=!1,this.dropHeldBackEvents(),this.wrapped.onDisconnected(T)},C.prototype.onTerminalError=function(T){this.wrapped.onTerminalError(T)},C.prototype.onConnectionParametersUpdated=function(T){this.wrapped.onConnectionParametersUpdated(T)},C.prototype.onTrouterMessageLost=function(T){this.passIfRegisteredOrNotNeeded("onTrouterMessageLost",T)},C.prototype.onUserActivityStateAccepted=function(T){this.passIfRegisteredOrNotNeeded("onUserActivityStateAccepted",T)},C.prototype.onAudiencesSetResolved=function(T,b){this.passIfRegisteredOrNotNeeded("onAudiencesSetResolved",T,b)},C.prototype.getState=function(){return this.wrapped.getState()},C.prototype.holdBackEvent=function(T){for(var b=[],E=1;E<arguments.length;E++)b[E-1]=arguments[E];this.heldBackEvents.push({kind:T,args:b})},C.prototype.passIfRegisteredOrNotNeeded=function(T){for(var b,E=[],A=1;A<arguments.length;A++)E[A-1]=arguments[A];var v=this.shouldConnectionDependOnRegistration(),S=this.shouldHoldBackEvents();v&&S||this.fireHeldBackEvents(v?function(N){return N.kind!=="onConnected"}:void 0),this.isRegistered||!v||S===!1&&T!=="onConnected"?(b=this.wrapped)[T].apply(b,E):this.holdBackEvent.apply(this,H([T],E,!1))},C.prototype.fireHeldBackEvents=function(T){for(var b,E=0,A=this.heldBackEvents;E<A.length;E++){var v=A[E];(T===void 0||T(v))&&(b=this.wrapped)[v.kind].apply(b,v.args)}this.heldBackEvents=T===void 0?[]:this.heldBackEvents.filter(function(S){return!T(S)})},C.prototype.dropHeldBackEvents=function(){this.heldBackEvents=[]},C})();M.RegistrationEnforcer=j;var B=(function(){function C(T,b,E,A){this.wrapped=T,this.prefix=b,this.logger=E,this.onEventAction=A}return C.prototype.onEvent=function(T,b){var E;this.onEventAction!==void 0?this.onEventAction(T,b):((E=this.logger)!==null&&E!==void 0?E:console).log("".concat(this.prefix," TracingEnforcer: ").concat(T,"(").concat(b,")"))},C.prototype.onDownstreamRequest=function(T,b,E){this.onEvent("onDownstreamRequest",JSON.stringify({request:b,response:E})),this.wrapped.onDownstreamRequest(T,b,E)},C.prototype.onConnected=function(T){this.onEvent("onConnected",T.getState().toString()),this.wrapped.onConnected(T)},C.prototype.onRegistered=function(T){this.onEvent("onRegistered",T.getState().toString()),this.wrapped.onRegistered(T)},C.prototype.onUnregistered=function(T){this.onEvent("onUnregistered",T.getState().toString()),this.wrapped.onUnregistered(T)},C.prototype.onReconnecting=function(T){this.onEvent("onReconnecting",T.getState().toString()),this.wrapped.onReconnecting(T)},C.prototype.onReconnectIsRequired=function(T,b,E){this.onEvent("onReconnectIsRequired",JSON.stringify({connection:T.getState().toString(),useConnectParamsFromCache:b,reason:E})),this.wrapped.onReconnectIsRequired(T,b,E)},C.prototype.onDisconnected=function(T){this.onEvent("onDisconnected",T.getState().toString()),this.wrapped.onDisconnected(T)},C.prototype.onTerminalError=function(T){this.onEvent("onTerminalError",JSON.stringify({connection:T})),this.wrapped.onTerminalError(T)},C.prototype.onConnectionParametersUpdated=function(T){this.onEvent("onConnectionParametersUpdated",JSON.stringify({connectParams:T})),this.wrapped.onConnectionParametersUpdated(T)},C.prototype.onTrouterMessageLost=function(T){this.onEvent("onTrouterMessageLost",JSON.stringify({flowTags:T})),this.wrapped.onTrouterMessageLost(T)},C.prototype.onUserActivityStateAccepted=function(T){this.onEvent("onUserActivityStateAccepted",JSON.stringify({cv:T})),this.wrapped.onUserActivityStateAccepted(T)},C.prototype.onAudiencesSetResolved=function(T,b){this.onEvent("onAudiencesSetResolved",JSON.stringify({audienceSubscriptionsResponse:T,cv:b})),this.wrapped.onAudiencesSetResolved(T,b)},C.prototype.getState=function(){return this.wrapped.getState()},C})();M.LoggingManagerConsumer=B},function(W,M,J){Object.defineProperty(M,"__esModule",{value:!0}),M.TrouterManagerFsm=void 0;var H=J(2),ee=J(4),j=J(0),B=J(7),C=(function(){function T(b,E){this.worker=E,this.state=ee.TrouterManagerState.Unknown,this.logger=new j.Logger("ManagerFsm",b)}return T.prototype.start=function(){this.state===ee.TrouterManagerState.Unknown?(this.setState(ee.TrouterManagerState.Disconnected),this.worker.forceStopLingeringConnection(),this.worker.startFirstConnection()):(this.logger.info("start called in state '".concat(ee.TrouterManagerState[this.state],"', expediting pending backoffs, if any")),this.worker.expediteBackoffOnConnections())},T.prototype.stop=function(b){this.state!==ee.TrouterManagerState.Unknown?(this.setState(ee.TrouterManagerState.Unknown),this.worker.stopFirstConnection(b===!0),this.worker.stopSecondConnection(b===!0)):this.showIgnored("stop")},T.prototype.getState=function(){switch(this.state){case ee.TrouterManagerState.Unknown:case ee.TrouterManagerState.Connected:case ee.TrouterManagerState.Disconnected:case ee.TrouterManagerState.Switching:return this.state;case ee.TrouterManagerState.TerminalError:return H.TrouterState.Disconnected}},T.prototype.getInternalState=function(){return this.state},T.prototype.onConnected=function(b){this.state===ee.TrouterManagerState.Disconnected&&b?this.worker.doesSecondConnectionExist()?this.setState(ee.TrouterManagerState.Switching):(this.setState(ee.TrouterManagerState.Connected),this.worker.dispatchConnected()):this.showIgnored("onConnected(".concat(b,")"))},T.prototype.onRegistered=function(b){this.state!==ee.TrouterManagerState.Disconnected||b?this.state!==ee.TrouterManagerState.Switching||b?this.state===ee.TrouterManagerState.Disconnected&&b&&(this.setState(ee.TrouterManagerState.Connected),this.worker.dispatchConnected()):(this.setState(ee.TrouterManagerState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnectionDelayed(),this.worker.dispatchConnected()):(this.setState(ee.TrouterManagerState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnection(!0),this.worker.dispatchConnected()),this.worker.dispatchRegistrationState(!0)},T.prototype.onUnregistered=function(b){b&&this.worker.dispatchRegistrationState(!1)},T.prototype.onReconnecting=function(b){this.state!==ee.TrouterManagerState.Connected&&this.state!==ee.TrouterManagerState.Switching||!b?this.showIgnored("onReconnecting(".concat(b,")")):(this.setState(ee.TrouterManagerState.Disconnected),this.worker.dispatchDisconnected())},T.prototype.onReconnectionRequired=function(b,E,A){this.state===ee.TrouterManagerState.Connected&&b?(this.setState(ee.TrouterManagerState.Switching),this.worker.startSecondConnection(E)):this.state===ee.TrouterManagerState.Disconnected&&b?this.worker.startSecondConnection(E):this.state===ee.TrouterManagerState.Switching&&b&&A===B.ReconnectReason.Configuration?(this.logger.debug("onReconnectionRequired: switch requested while already in Switching state"),this.worker.stopSecondConnection(!0),this.worker.startSecondConnection(E)):this.showIgnored("onReconnectionRequired(".concat(b,")"))},T.prototype.onDisconnected=function(b){this.state==ee.TrouterManagerState.Unknown&&b?this.worker.dispatchDisconnected():this.state==ee.TrouterManagerState.Switching&&b?(this.worker.switchConnections(),this.worker.stopSecondConnection(!1),this.setState(ee.TrouterManagerState.Disconnected),this.worker.dispatchDisconnected()):this.showIgnored("onDisconnected(".concat(b,")"))},T.prototype.onTerminalError=function(){this.setState(ee.TrouterManagerState.TerminalError),this.worker.dispatchTerminalError()},T.prototype.showIgnored=function(b){this.logger.info("Ignoring event '".concat(b,"' in state '").concat(ee.TrouterManagerState[this.state],"'"))},T.prototype.setState=function(b){if(this.logger.info("Switching from state '".concat(ee.TrouterManagerState[this.state],"' to state '").concat(ee.TrouterManagerState[b],"'")),this.state===b)return void this.logger.error("Attempt to switch to the current state '".concat(ee.TrouterManagerState[b],"'"));this.state=b},T})();M.TrouterManagerFsm=C},function(W,M,J){function H(ce,se){if(!se)return ce;var G=E(E({},ce),{enabled:se.TelemetryEnabled});return se.ClientTelemetryEventEnabled!==void 0&&(G=E(E({},G),se.ClientTelemetryEventEnabled)),G}function ee(ce,se,G){var je,Ne,xe,ne,Te,ke,O,w,L,P,D=function(re){return ce.proxyUrlRewrite?(se.info("Using rewritten URL for proxy"),ce.proxyUrlRewrite(re)):re};return{clientInfo:{ua:ce.trouterSettings.productName,v:ce.trouterSettings.version},ioOptions:{ackTimeoutMs:5e3,rewriteUrlForProxy:D},clientCorrelationID:ce.trouterSettings.sessionId,environment:ce.trouterSettings.environment,telemetrySettings:H(ce.telemetryConfig.settings,G),eventLogger:ce.telemetryConfig.eventLogger,endpointId:ce.trouterSettings.registrationId,trouterUrl:G?.TrouterConnectionUrl||ce.trouterSettings.trouterServiceUrl,registration:ce.trouterSettings.registrarServiceUrl?{registrarUrl:ce.trouterSettings.registrarServiceUrl,registrationId:(je=ce.trouterSettings.registrationId)!==null&&je!==void 0?je:"",pnhAppId:(Ne=ce.trouterSettings.pnhAppId)!==null&&Ne!==void 0?Ne:"",platform:(xe=ce.trouterSettings.platform)!==null&&xe!==void 0?xe:"",pnhTemplateKey:(ne=ce.trouterSettings.pnhTemplate)!==null&&ne!==void 0?ne:"",platformUIVersion:(Te=ce.trouterSettings.platformUIVersion)!==null&&Te!==void 0?Te:"",productContext:ce.trouterSettings.pnhProductContext||void 0,context:(ke=ce.trouterSettings.pnhContext)!==null&&ke!==void 0?ke:"",registrarTtlSec:((O=ce.trouterSettings.maxRegistrationTimeInMs)!==null&&O!==void 0?O:0)/1e3}:void 0,connectionDependsOnRegistration:ce.trouterSettings.registrarServiceUrl===void 0?function(){return!1}:(w=ce.trouterSettings.connectionDependsOnRegistration)!==null&&w!==void 0?w:function(){return!1},delayEventsUntilRegistered:(L=ce.trouterSettings.delayEventsUntilRegistered)!==null&&L!==void 0?L:function(){return!1},timeoutOptions:E({connectionTimeoutMs:ce.trouterSettings.trouterConnectTimeoutInMs||3e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:ce.trouterSettings.productName==="TeamsCDL"?3e5:3e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},ce.trouterSettings.timeoutOptions),incallTimeoutOptions:E({connectionTimeoutMs:1e4,fetchTimeoutMs:5e3,pingTimeoutMs:5e3,pongTimeoutMs:2e3,maxBackoffMs:ce.trouterSettings.productName==="TeamsCDL"?3e5:1e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},ce.trouterSettings.incallTimeoutOptions),incallModeTimeoutMs:(P=ce.trouterSettings.incallModeTimeoutMs)!==null&&P!==void 0?P:0,lingeringConnectionDelayMs:6e4,userActivitySecondResendDelayMs:ce.trouterSettings.userActivitySecondResendDelayMs||1e4,duplicateDisconnectThresholdMs:1e4,connectionCache:ce.connectionCache,registrationStateCallback:ce.registrationStateCallbackForAcsDoNotUse,rewriteUrlForProxy:D,retryLimitOnTokenFetch:ce.trouterSettings.retryLimitOnTokenFetch,extraConnectionHeaders:ce.trouterSettings.extraConnectionHeaders,expediteBackoffOnStartMinimumDelayMs:1e4,toJSON:function(){return E(E({},this),{connectionCache:this.connectionCache?{}:this.connectionCache})}}}function j(ce){return new he(ce)}function B(){return S.CLIENT_VERSION}function C(ce,se){var G=ce.indexOf("://");if(G>=0){var je=ce.indexOf("/",G+3);if(je>=0)return se+ce.substr(je)}return""}function T(ce){var se=this;return function(G){return A(se,void 0,void 0,function(){var je;return v(this,function(Ne){switch(Ne.label){case 0:return je={},[4,ce(G.needFresh)];case 1:return[2,(je.token=Ne.sent(),je.tokenType="skype",je)]}})})}}function b(ce,se){var G,je=this;return function(Ne){return A(je,void 0,void 0,function(){var xe,ne,Te;return v(this,function(ke){switch(ke.label){case 0:xe=new Date,ne=setInterval(function(){var O=Math.round((Date.now()-xe.getTime())/6e4);ce.warn("Note: Trouter auth token request promise from ".concat(xe.toISOString()," has not been resolved for ").concat(O," minutes. The client is blocked from operating properly"))},3e5),ke.label=1;case 1:return ke.trys.push([1,,3,4]),[4,se(Ne)];case 2:return Te=ke.sent(),Ne.needFresh&&Te.token===G&&ce.error("API violation: Trouter auth token provider got a request with needRefresh=true, but returned the same token as last time anyway. Please fix the host app"),G=Te.token,[2,Te];case 3:return clearInterval(ne),[7];case 4:return[2]}})})}}var E=this&&this.__assign||function(){return E=Object.assign||function(ce){for(var se,G=1,je=arguments.length;G<je;G++){se=arguments[G];for(var Ne in se)Object.prototype.hasOwnProperty.call(se,Ne)&&(ce[Ne]=se[Ne])}return ce},E.apply(this,arguments)},A=this&&this.__awaiter||function(ce,se,G,je){function Ne(xe){return xe instanceof G?xe:new G(function(ne){ne(xe)})}return new(G||(G=Promise))(function(xe,ne){function Te(w){try{O(je.next(w))}catch(L){ne(L)}}function ke(w){try{O(je.throw(w))}catch(L){ne(L)}}function O(w){w.done?xe(w.value):Ne(w.value).then(Te,ke)}O((je=je.apply(ce,se||[])).next())})},v=this&&this.__generator||function(ce,se){function G(O){return function(w){return je([O,w])}}function je(O){if(Ne)throw new TypeError("Generator is already executing.");for(;Te&&(Te=0,O[0]&&(ke=0)),ke;)try{if(Ne=1,xe&&(ne=2&O[0]?xe.return:O[0]?xe.throw||((ne=xe.return)&&ne.call(xe),0):xe.next)&&!(ne=ne.call(xe,O[1])).done)return ne;switch(xe=0,ne&&(O=[2&O[0],ne.value]),O[0]){case 0:case 1:ne=O;break;case 4:return ke.label++,{value:O[1],done:!1};case 5:ke.label++,xe=O[1],O=[0];continue;case 7:O=ke.ops.pop(),ke.trys.pop();continue;default:if(ne=ke.trys,!(ne=ne.length>0&&ne[ne.length-1])&&(O[0]===6||O[0]===2)){ke=0;continue}if(O[0]===3&&(!ne||O[1]>ne[0]&&O[1]<ne[3])){ke.label=O[1];break}if(O[0]===6&&ke.label<ne[1]){ke.label=ne[1],ne=O;break}if(ne&&ke.label<ne[2]){ke.label=ne[2],ke.ops.push(O);break}ne[2]&&ke.ops.pop(),ke.trys.pop();continue}O=se.call(ce,ke)}catch(w){O=[6,w],xe=0}finally{Ne=ne=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}var Ne,xe,ne,Te,ke={label:0,sent:function(){if(1&ne[0])throw ne[1];return ne[1]},trys:[],ops:[]};return Te={next:G(0),throw:G(1),return:G(2)},typeof Symbol=="function"&&(Te[Symbol.iterator]=function(){return this}),Te};Object.defineProperty(M,"__esModule",{value:!0}),M.replaceTrouterUrlBase=M.getTrouterServiceVersion=M.createTrouterService=M.TrouterService=M.UserActivityState=M.TrouterState=void 0;var S=J(1),N=J(2);Object.defineProperty(M,"TrouterState",{enumerable:!0,get:function(){return N.TrouterState}}),Object.defineProperty(M,"UserActivityState",{enumerable:!0,get:function(){return N.UserActivityState}});var F=J(0),te=J(8),X=J(9),$=J(10),de=J(11),he=(function(){function ce(se){this.logProvider=se,this.stateChangedListeners=[],this.logger=new F.Logger("Trouter",se),this.trouterUrlPromise=new de.TrouterUrlPromise(se),this.messageHandlers=new te.MessageHandlerRegistry(se),this.listeners={},this.connectionInfo=null,this.logger.info("Created TrouterService version ".concat(S.CLIENT_VERSION))}return ce.prototype.start=function(se){var G;if(this.logger.info("Start"),!se.skypeTokenProvider&&!se.authTokenProvider)throw new Error("no token provider has been configured, either skypeTokenProvider or authTokenProvider must be populated");se.skypeTokenProvider&&!se.trouterSettings.disableInternalSkypeTokenCache&&(se.skypeTokenProvider=(0,X.addCacheAsBackupTo)(se.skypeTokenProvider)),this.trouterCfg=se;var je=ee(se,this.logger,this.ecsCfg);se.internalEnableV4cProtocol===!1&&(je.forceV4aProtocol=!0);var Ne=b(this.logger,(G=se.authTokenProvider)!==null&&G!==void 0?G:T(se.skypeTokenProvider));this.trouterServer===void 0&&(this.trouterServer=new $.TrouterManager(this.logProvider,je,Ne,se.authTokenProvider===void 0,this)),this.pendingActivityState!==void 0&&(this.trouterServer.setUserActivityState(this.pendingActivityState[0],this.pendingActivityState[1]),this.pendingActivityState=void 0),this.trouterServer.start()},ce.prototype.stop=function(se){this.logger.info("close connection"),this.trouterUrlPromise.rejectUrl(new Error("TrouterService is stopped")),this.trouterServer!==void 0&&this.trouterServer.stop(se)},ce.prototype.setEcsConfig=function(se){return A(this,void 0,void 0,function(){var G=this;return v(this,function(je){return[2,new Promise(function(Ne){if(G.ecsCfg=se.TrouterJScriptClient,G.logger.info("Setting ECS configuration to ".concat(JSON.stringify(G.ecsCfg))),G.trouterServer!==void 0&&G.trouterCfg!==void 0){var xe=ee(G.trouterCfg,G.logger,G.ecsCfg);G.trouterServer.configure(xe)}Ne()})]})})},ce.prototype.checkConnection=function(se){this.trouterServer!==void 0&&this.trouterServer.checkConnection(se!=null&&se)},ce.prototype.resendRegistration=function(){return A(this,void 0,void 0,function(){return v(this,function(se){if(!this.trouterServer)throw new Error("resendRegistration called too early");return[2,this.trouterServer.resendRegistration()]})})},ce.prototype.registerListener=function(se,G){return G===""||!G.startsWith("/")||G.includes("?")||G.includes("#")?(this.logger.error("Listener path '".concat(G,"' is not valid")),!1):this.listeners[G]?(this.logger.error("Another listener is already registered for path '".concat(G,"'")),!1):(this.listeners[G]=se,this.logger.debug("Listener for path '".concat(G,"' registered")),this.connectionInfo&&se.onTrouterConnected(this.connectionInfo.baseEndpointUrl+G,this.connectionInfo),!0)},ce.prototype.unregisterListener=function(se){for(var G=[],je=0,Ne=Object.keys(this.listeners);je<Ne.length;je++){var xe=Ne[je];this.listeners[xe]===se&&G.push(xe)}if(G.length===0)return!1;for(var ne=0,Te=G;ne<Te.length;ne++){var xe=Te[ne];delete this.listeners[xe]}return this.logger.debug("Listener for path(s) '".concat(G.join("', '"),"' unregistered")),!0},ce.prototype.onTrouterConnected=function(se,G){this.logger.debug("Trouter is now connected");for(var je=0,Ne=Object.keys(this.listeners);je<Ne.length;je++){var xe=Ne[je];try{this.listeners[xe].onTrouterConnected(G.baseEndpointUrl+xe,G)}catch(ne){this.logger.error("Listener '".concat(xe,"' threw an exception from onTrouterConnected(): ").concat(ne))}}this.connectionInfo=G,this.trouterUrlPromise.resolveUrl(se),this.notifyStateChanged(N.TrouterState.Connected,{url:se,getRemainingTtlInSec:function(){return G.connectionTtlSec}})},ce.prototype.onTrouterDisconnected=function(){this.logger.debug("Trouter is now disconnected"),this.connectionInfo=null;for(var se=0,G=Object.keys(this.listeners);se<G.length;se++){var je=G[se],Ne=this.listeners[je];if(Ne.onTrouterDisconnected)try{Ne.onTrouterDisconnected()}catch(xe){this.logger.error("Listener '".concat(je,"' threw an exception from onTrouterDisconnected(): ").concat(xe))}}this.notifyStateChanged(N.TrouterState.Disconnected)},ce.prototype.onTrouterRequest=function(se,G){for(var je="",Ne=0,xe=Object.keys(this.listeners);Ne<xe.length;Ne++){var ne=xe[Ne];se.path.startsWith(ne)&&ne.length>je.length&&(je=ne)}if(je==="")this.tryMessageHandlers(se,G)||(G.status=404,G.headers={"Trouter-Responder":"ClientLib"},G.send());else try{this.listeners[je].onTrouterRequest(se,G)}catch(Te){this.logger.error("Listener '".concat(je,"' threw an exception from onTrouterRequest(): ").concat(Te)),G.status=500,G.headers={"Trouter-Responder":"ClientLib"},G.send()}},ce.prototype.onTrouterMessageLoss=function(se){this.logger.info("onTrouterMessageLoss called with tags [".concat(se,"]"));for(var G=!0,je=0,Ne=Object.keys(this.listeners);je<Ne.length;je++){var xe=Ne[je],ne=this.listeners[xe];if(ne.onTrouterMessageLoss)try{G=ne.onTrouterMessageLoss(se)&&G,G===void 0&&(this.logger.error("Listener '".concat(xe,"' did not return a boolean value from onTrouterMessageLoss()")),G=!1)}catch(Te){this.logger.error("Listener '".concat(xe,"' threw an exception from onTrouterMessageLoss(): ").concat(Te)),G=!1}}return G},ce.prototype.onTrouterUserActivityStateAccepted=function(se){this.logger.debug("onTrouterUserActivityStateAccepted cv: ".concat(se));for(var G=0,je=Object.keys(this.listeners);G<je.length;G++){var Ne=je[G],xe=this.listeners[Ne];if(xe.onTrouterUserActivityStateAccepted)try{xe.onTrouterUserActivityStateAccepted(se)}catch(ne){this.logger.error("Listener '".concat(Ne,"' threw an exception from onTrouterUserActivityStateAccepted(): ").concat(ne))}}},ce.prototype.onAudiencesSetResolved=function(se,G){this.logger.debug("onAudiencesSetResolved cv: ".concat(G));for(var je=0,Ne=Object.keys(this.listeners);je<Ne.length;je++){var xe=Ne[je],ne=this.listeners[xe];if(ne.onAudiencesSetResolved)try{ne.onAudiencesSetResolved(se,G)}catch(Te){this.logger.error("Listener '".concat(xe,"' threw an exception from onAudienceSubscribed(): ").concat(Te))}}},ce.prototype.setUserActivityState=function(se,G){if(se!==N.UserActivityState.Active&&se!==N.UserActivityState.Inactive)throw new Error("setUserActivityState called with unsupported value ".concat(se));this.logger.info("setUserActivityState called with value ".concat(N.UserActivityState[se])),this.trouterServer&&this.state()!==N.TrouterState.Unknown?this.trouterServer.setUserActivityState(se,G):(this.pendingActivityState=[se,G],this.logger.warn("setUserActivityState called before start() or after stop()"))},ce.prototype.setAudienceSubscriptions=function(se,G){if(se.audienceSubscriptions.length>1)throw new Error("Only singular audience subscription is supported");if(this.trouterServer&&this.state()!==N.TrouterState.Unknown)return this.trouterServer.setAudienceSubscriptionsAsync(se,15e3,G);throw new Error("audience subscribe called before start() or after stop()")},ce.prototype.state=function(){return this.trouterServer!==void 0?this.trouterServer.getState():N.TrouterState.Unknown},ce.prototype.isInTerminalState=function(){return this.trouterServer!==void 0&&this.trouterServer.isInTerminalState()},ce.prototype.reportStateInfo=function(){return this.trouterServer===void 0?"":this.trouterServer.reportStateInfo()},ce.prototype.getServerState=function(){if(this.trouterServer!==void 0)return this.trouterServer.getServerState()},ce.prototype.getTrouterUrlAsync=function(){return this.trouterServer!==void 0?this.trouterUrlPromise.getPromise():Promise.reject(new Error("TrouterService has not been started"))},ce.prototype.onStateChanged=function(se){if(this.logger.info("onStateChanged called"),se===void 0)this.stateChangedListeners=this.stateChangedListeners.filter(function(je){return je.wrappedCallback===void 0});else{this.offStateChanged(se);var G=function(je,Ne){se(je,Ne?Ne.url:"")};G.wrappedCallback=se,this.stateChangedListeners.push(G)}},ce.prototype.offStateChanged=function(se){this.logger.info("offStateChanged called");var G=this.stateChangedListeners.length;return this.stateChangedListeners=this.stateChangedListeners.filter(function(je){return je.wrappedCallback!==se}),G>this.stateChangedListeners.length},ce.prototype.addCallback=function(se){this.logger.info("addListener called"),this.stateChangedListeners.indexOf(se,0)===-1&&se!==void 0&&this.stateChangedListeners.push(se)},ce.prototype.removeCallback=function(se){this.logger.info("removeListener called");var G=this.stateChangedListeners.indexOf(se,0);return G>-1&&(this.stateChangedListeners.splice(G,1),!0)},ce.prototype.registerMessageHandler=function(se){this.logger.info("registerMessageHandler is called"),this.messageHandlers.register(se)},ce.prototype.clearMessageHandlers=function(){this.logger.info("clearMessageHandlers is called"),this.messageHandlers.clear()},ce.prototype.notifyStateChanged=function(se,G){var je=this;this.logger.info("notifyStateChanged called, will forward to ".concat(this.stateChangedListeners.length," listeners")),this.stateChangedListeners.forEach(function(Ne){try{Ne(se,G)}catch(xe){je.logger.error("Error in callback ".concat(xe))}})},ce.prototype.tryMessageHandlers=function(se,G){if(!this.messageHandlers.active())return!1;var je,Ne=null;try{je=JSON.parse(se.body),Ne=je&&(je.evt||je.eventId)||null}catch{}var xe={eventId:Ne,url:(this.connectionInfo?this.connectionInfo.baseEndpointUrl:"")+se.path,body:je,rawBody:se.body,headers:se.headers},ne=this.messageHandlers.handleMessage(xe);return!!ne.isHandled&&(G.status=ne.resultCode,ne.responseHeaders&&(G.headers=ne.responseHeaders),ne.responseBody&&(G.body=ne.responseBody),G.send(),!0)},ce})();M.TrouterService=he,M.createTrouterService=j,M.getTrouterServiceVersion=B,M.replaceTrouterUrlBase=C},function(W,M){W.exports=Ue}])})});k(I);var q=U(function(Me,be){Object.defineProperty(be,"__esModule",{value:!0}),be.DeleteReason=void 0;var Ue;(function(W){W.DeletedByPolicy="deletedByPolicy",W.DeletedByUser="deletedByUser"})(Ue||(be.DeleteReason=Ue={}))});k(q),q.DeleteReason;var z=U(function(Me,be){Object.defineProperty(be,"__esModule",{value:!0}),be.PACKAGE_VERSION=be.CONFIG_API_VERSION=be.EudbCountries=be.CloudPrefix=be.CloudType=be.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES=void 0,be.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES=3;var Ue;(function(M){M.Public="Public",M.GccHigh="GCC High",M.Dod="DoD"})(Ue||(be.CloudType=Ue={}));var W;(function(M){M.OrgId="orgid",M.Acs="acs",M.Spool="spool",M.GccHigh="gcch",M.GccHighAcs="gcch-acs",M.Dod="dod",M.DodAcs="dod-acs"})(W||(be.CloudPrefix=W={})),be.EudbCountries=["europe","france","germany","norway","switzerland","sweden"],be.CONFIG_API_VERSION="2024-09-01",be.PACKAGE_VERSION="1.0.0-beta.34"});k(z),z.PACKAGE_VERSION,z.CONFIG_API_VERSION,z.EudbCountries,z.CloudPrefix,z.CloudType,z.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES;var Q=q,Y=z,fe=U(function(Me,be){var Ue=y&&y.__awaiter||function(O,w,L,P){function D(re){return re instanceof L?re:new L(function(ye){ye(re)})}return new(L||(L=Promise))(function(re,ye){function Be(pe){try{Ie(P.next(pe))}catch(He){ye(He)}}function Oe(pe){try{Ie(P.throw(pe))}catch(He){ye(He)}}function Ie(pe){pe.done?re(pe.value):D(pe.value).then(Be,Oe)}Ie((P=P.apply(O,w||[])).next())})};Object.defineProperty(be,"__esModule",{value:!0}),be.isEudbLocation=be.parseTokenCredential=be.base64decode=be.toTelemetrySender=be.toLogProvider=be.toMessageHandler=void 0,be.generateUuid=ne;const W=new Map([["chatMessageReceived",200],["typingIndicatorReceived",245],["readReceiptReceived",246],["chatMessageEdited",247],["chatMessageDeleted",248],["chatThreadCreated",257],["chatThreadPropertiesUpdated",258],["chatThreadDeleted",259],["participantsAdded",260],["participantsRemoved",261]]),M="8:orgid:",J="8:dod:",H="8:gcch:",ee="8:teamsvisitor:",j="4:",B="8:acs:",C="8:gcch-acs:",T="8:dod-acs:",b="8:spool:",E=(O,w,L,P)=>{const D=W.get(O);return{handleMessage(re){let ye=null;if(re?.rawBody&&(ye=JSON.parse(re.rawBody)),ye===null||ye.eventId!==D)return;const Be=S(O,ye,L,P);if(Be!==null)return w(Be),{isHandled:!0,resultCode:200}}}};be.toMessageHandler=E;function A(O,w,L){return{threadId:O.groupId,sender:de(O.senderId),senderDisplayName:O.senderDisplayName,recipient:de(O.recipientMri),id:O.messageId,createdOn:new Date(O.originalArrivalTime),version:O.version,type:O.messageType,message:O.messageBody,metadata:he(O.acsChatMessageMetadata)||{},attachments:G(he(O.attachments)||[],w,L)}}function v(O,w,L){return Object.assign(Object.assign({},A(O,w,L)),{editedOn:new Date(O.edittime)})}const S=(O,w,L,P)=>{if(O==="chatMessageReceived")return A(w,L,P);if(O==="chatMessageEdited")return v(w,L,P);if(O==="chatMessageDeleted"){const D=w;return{threadId:D.groupId,sender:de(D.senderId),senderDisplayName:D.senderDisplayName,recipient:de(D.recipientMri),id:D.messageId,createdOn:new Date(D.originalArrivalTime),version:D.version,deletedOn:new Date(D.deletetime),type:D.messageType}}if(O==="typingIndicatorReceived"){const D=w;return{threadId:D.groupId,sender:de(D.senderId),senderDisplayName:D.senderDisplayName,recipient:de(D.recipientMri),version:D.version,receivedOn:new Date(D.originalArrivalTime)}}if(O==="readReceiptReceived"){const D=w,ye=JSON.parse(D.messageBody).consumptionhorizon.split(";");return{threadId:D.groupId,sender:de(D.senderId),senderDisplayName:"",recipient:de(D.recipientMri),chatMessageId:D.messageId,readOn:new Date(+ye[1])}}if(O==="chatThreadCreated"){const D=w,re=JSON.parse(unescape(D.createdBy)),ye=JSON.parse(unescape(D.members)),Be=N(re),Oe=ye.map(pe=>N(pe));return{threadId:D.threadId,createdOn:new Date(D.createTime),createdBy:Be,version:D.version,participants:Oe,properties:F(JSON.parse(unescape(D.properties))),retentionPolicy:te(JSON.parse(unescape(D.properties)))}}if(O==="chatThreadPropertiesUpdated"){const D=w,re=JSON.parse(unescape(D.editedBy)),ye=N(re);return{threadId:D.threadId,updatedOn:new Date(D.editTime),updatedBy:ye,version:D.version,properties:F(JSON.parse(unescape(D.properties))),retentionPolicy:te(JSON.parse(unescape(D.properties)))}}if(O==="chatThreadDeleted"){const D=w,re=w.reason==Q.DeleteReason.DeletedByPolicy?null:N(JSON.parse(unescape(D.deletedBy)));return{threadId:D.threadId,deletedOn:new Date(D.deleteTime),deletedBy:re,version:D.version,reason:D.reason}}if(O==="participantsAdded"){const D=w,re=JSON.parse(unescape(D.addedBy)),ye=JSON.parse(unescape(D.participantsAdded)),Be=N(re),Oe=ye.map(pe=>N(pe));return{threadId:D.threadId,addedOn:new Date(D.time),addedBy:Be,version:D.version,participantsAdded:Oe}}if(O==="participantsRemoved"){const D=w,re=JSON.parse(unescape(D.removedBy)),ye=JSON.parse(unescape(D.participantsRemoved)),Be=N(re),Oe=ye.map(pe=>N(pe));return{threadId:D.threadId,removedOn:new Date(D.time),removedBy:Be,version:D.version,participantsRemoved:Oe}}return null},N=O=>{var w;const L={id:de(O.participantId),displayName:O.displayName,metadata:he((w=O.memberMetaData)!==null&&w!==void 0?w:"")||{}};return O.shareHistoryTime&&(L.shareHistoryTime=new Date(O.shareHistoryTime)),L},F=O=>{var w;return{topic:O.topic,metadata:he((w=O.acsChatThreadMetadata)!==null&&w!==void 0?w:"")||{}}},te=O=>{const w=O.retentionPolicy;if(!w)return{kind:"none"};let L;try{L=JSON.parse(w)}catch{return{kind:"none"}}if(L.retentionPolicyType==="DeleteAfterCreationTime"&&typeof L.executeAfter=="string"){const P=L.executeAfter.trim().replace(/^[+-]/,""),D=P.includes(".")?P.split(".")[0]:"0",re=parseInt(D,10);return{kind:"threadCreationDate",deleteThreadAfterDays:isNaN(re)?0:re}}return{kind:"none"}},X=O=>({log:(...w)=>O.info(w),warn:(...w)=>O.warning(w),error:(...w)=>O.error(w),debug:(...w)=>O.verbose(w),info:(...w)=>O.verbose(w)});be.toLogProvider=X;const $=O=>({logEvent:w=>O.info(w)});be.toTelemetrySender=$;const de=O=>O.startsWith(M)?{kind:"microsoftTeamsUser",rawId:O,microsoftTeamsUserId:O.substring(M.length),isAnonymous:!1,cloud:"public"}:O.startsWith(J)?{kind:"microsoftTeamsUser",rawId:O,microsoftTeamsUserId:O.substring(J.length),isAnonymous:!1,cloud:"dod"}:O.startsWith(H)?{kind:"microsoftTeamsUser",rawId:O,microsoftTeamsUserId:O.substring(H.length),isAnonymous:!1,cloud:"gcch"}:O.startsWith(ee)?{kind:"microsoftTeamsUser",rawId:O,microsoftTeamsUserId:O.substring(ee.length),isAnonymous:!0}:O.startsWith(j)?{kind:"phoneNumber",rawId:O,phoneNumber:O.substring(j.length)}:O.startsWith(B)||O.startsWith(C)||O.startsWith(T)||O.startsWith(b)?{kind:"communicationUser",communicationUserId:O}:{kind:"unknown",id:O},he=O=>{if(!(O==null||O===""||O==="null"||O==="{}"||O==="[]"))return JSON.parse(O)},ce=(O,w,L)=>{let P;try{P=new URL(O),(P.protocol==="http:"||P.protocol==="https:")&&(P=new URL(P.pathname,w))}catch{try{P=new URL(O,w)}catch{return O}}return P.searchParams.set("api-version",L),P.toString()},se=O=>{let w;try{w=new URL(O)}catch{return!1}return w.protocol==="http:"||w.protocol==="https:"},G=(O,w,L)=>(w==null||w===""||!se(w)||O.filter(P=>P.attachmentType.toLowerCase()==="image".toLowerCase()).map(P=>{P.previewUrl&&(P.previewUrl=ce(P.previewUrl,w,L)),P.url&&(P.url=ce(P.url,w,L))}),O),je=O=>p.default.isNodeLike?Buffer.from(O,"base64").toString():atob(O);be.base64decode=je;const Ne=O=>{let[,w]=O?.split(".");if(w===void 0)throw new Error("Invalid token");return w=w.replace(/-/g,"+").replace(/_/g,"/"),JSON.parse(decodeURIComponent(escape((0,be.base64decode)(w))))},xe=O=>Ue(void 0,void 0,void 0,function*(){const w=yield O.getToken(),L=w?.token,P=Ne(L),D=P.skypeid,re=P.resourceId,ye=ke(D),Be=P.resourceLocation||"";return{jwtToken:L,acsResourceId:re,identityMri:D,cloudType:ye,resourceLocation:Be}});be.parseTokenCredential=xe;function ne(){return(0,h.default.v4)()}const Te=O=>!!O&&!!Y.EudbCountries.find(w=>w===O);be.isEudbLocation=Te;function ke(O){switch(O.substring(0,O.indexOf(":"))){case Y.CloudPrefix.OrgId:case Y.CloudPrefix.Acs:case Y.CloudPrefix.Spool:return Y.CloudType.Public;case Y.CloudPrefix.GccHigh:case Y.CloudPrefix.GccHighAcs:return Y.CloudType.GccHigh;case Y.CloudPrefix.Dod:case Y.CloudPrefix.DodAcs:return Y.CloudType.Dod;default:return Y.CloudType.Public}}});k(fe),fe.isEudbLocation,fe.parseTokenCredential,fe.base64decode,fe.toTelemetrySender,fe.toLogProvider,fe.toMessageHandler,fe.generateUuid;var le=U(function(Me,be){var Ue=y&&y.__createBinding||(Object.create?(function(B,C,T,b){b===void 0&&(b=T);var E=Object.getOwnPropertyDescriptor(C,T);(!E||("get"in E?!C.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return C[T]}}),Object.defineProperty(B,b,E)}):(function(B,C,T,b){b===void 0&&(b=T),B[b]=C[T]})),W=y&&y.__setModuleDefault||(Object.create?(function(B,C){Object.defineProperty(B,"default",{enumerable:!0,value:C})}):function(B,C){B.default=C}),M=y&&y.__importStar||function(B){if(B&&B.__esModule)return B;var C={};if(B!=null)for(var T in B)T!=="default"&&Object.prototype.hasOwnProperty.call(B,T)&&Ue(C,B,T);return W(C,B),C},J=y&&y.__awaiter||function(B,C,T,b){function E(A){return A instanceof T?A:new T(function(v){v(A)})}return new(T||(T=Promise))(function(A,v){function S(te){try{F(b.next(te))}catch(X){v(X)}}function N(te){try{F(b.throw(te))}catch(X){v(X)}}function F(te){te.done?A(te.value):E(te.value).then(S,N)}F((b=b.apply(B,C||[])).next())})};Object.defineProperty(be,"__esModule",{value:!0}),be.RealTimeNotificationConfiguration=be.TrouterConfigClient=void 0;const H=M(m.default);class ee extends H.ServiceClient{constructor(C,T){T||(T={});const b=`azsdk-js-communication-signaling/${Y.PACKAGE_VERSION}`,E=T.userAgentOptions&&T.userAgentOptions.userAgentPrefix?`${T.userAgentOptions.userAgentPrefix} ${b}`:`${b}`,A=Object.assign(Object.assign({},T),{userAgentOptions:{userAgentPrefix:E},additionalPolicies:T.additionalPolicies});super(A),this.apiVersion=Y.CONFIG_API_VERSION,this.endpoint=C,this.httpClient=(0,g.default.createDefaultHttpClient)()}fetchServiceUrls(C){return J(this,void 0,void 0,function*(){try{const T=(yield C.getToken()).token,b=(0,g.default.createPipelineRequest)({url:`${this.endpoint}/chat/config/realTimeNotifications?api-version=${this.apiVersion}`,method:"GET",headers:(0,g.default.createHttpHeaders)({Authorization:`Bearer ${T}`})}),E=yield this.pipeline.sendRequest(this.httpClient,b);if(E.status!==200||!E.bodyAsText)throw new Error(`Failed to fetch service URLs. Status: ${E.status}, Body: ${E.bodyAsText||"No response body"}`);const A=JSON.parse(E.bodyAsText);if(!A.trouterServiceUrl||!A.registrarServiceUrl||!A.cloudType)throw new Error("One or more required fields are missing in the response data");return new j(A.trouterServiceUrl,A.registrarServiceUrl,A.cloudType)}catch(T){throw new Error(`Error fetching real-time notification configuration from Chat Gateway: ${T.message}`)}})}}be.TrouterConfigClient=ee;class j{constructor(C,T,b){this.trouterServiceUrl=C,this.registrarServiceUrl=T,this.cloudType=b}}be.RealTimeNotificationConfiguration=j});k(le),le.RealTimeNotificationConfiguration,le.TrouterConfigClient;var K=fe,ie=le,ae=U(function(Me,be){var Ue=y&&y.__awaiter||function(J,H,ee,j){function B(C){return C instanceof ee?C:new ee(function(T){T(C)})}return new(ee||(ee=Promise))(function(C,T){function b(v){try{A(j.next(v))}catch(S){T(S)}}function E(v){try{A(j.throw(v))}catch(S){T(S)}}function A(v){v.done?C(v.value):B(v.value).then(b,E)}A((j=j.apply(J,H||[])).next())})};Object.defineProperty(be,"__esModule",{value:!0}),be.defaultTelemetrySettings=be.createSettings=void 0;const W={version:"1.0.0",registrationId:"",sessionId:"",pnhAppId:"AcsWeb",pnhTemplate:"AcsWeb_Chat_2.1",platform:"SPOOL",platformUIVersion:"0.0.0",environment:"",productName:"acs-chat-web",trouterServiceUrl:"",registrarServiceUrl:"",registrarRefreshTimeoutInMs:35e4,timeoutOptions:{connectionTimeoutMs:2e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:5e4,requestTimeoutMs:5e3},maxRegistrationTimeInMs:72e5},M=(J,H)=>Ue(void 0,void 0,void 0,function*(){var ee;const j=H?.resourceEndpoint;if(j===void 0)throw new Error("'endpoint' cannot be null");const B=Object.assign({},W);B.registrationId=(0,K.generateUuid)(),B.sessionId=(0,K.generateUuid)();const T=yield new ie.TrouterConfigClient(j,H).fetchServiceUrls(J);return B.trouterServiceUrl=`${T.trouterServiceUrl}/v4/a`,B.registrarServiceUrl=`${T.registrarServiceUrl}/v3/registrations`,T.cloudType==="int"&&(B.pnhAppId="cns-e2e-test",B.pnhTemplate="cns-e2e-test:1.8"),B.maxRegistrationTimeInMs=(ee=H?.registrationTimeInMs)!==null&&ee!==void 0?ee:W.maxRegistrationTimeInMs,B});be.createSettings=M,be.defaultTelemetrySettings={enabled:!1}});k(ae),ae.defaultTelemetrySettings,ae.createSettings;var Ce=ae,De=U(function(Me,be){var Ue=y&&y.__awaiter||function(J,H,ee,j){function B(C){return C instanceof ee?C:new ee(function(T){T(C)})}return new(ee||(ee=Promise))(function(C,T){function b(v){try{A(j.next(v))}catch(S){T(S)}}function E(v){try{A(j.throw(v))}catch(S){T(S)}}function A(v){v.done?C(v.value):B(v.value).then(b,E)}A((j=j.apply(J,H||[])).next())})};Object.defineProperty(be,"__esModule",{value:!0}),be.CommunicationSignalingClient=be.ConnectionState=void 0;var W;(function(J){J[J.Unknown=0]="Unknown",J[J.Connected=2]="Connected",J[J.Disconnected=3]="Disconnected",J[J.Switching=9]="Switching"})(W||(be.ConnectionState=W={}));class M{constructor(H,ee,j){this.credential=H,this.logger=ee,this.options=j,this.stateChangedListener=null,this.tokenFetchRetries=0,this.trouter=(0,I.createTrouterService)((0,K.toLogProvider)(ee))}start(){return Ue(this,void 0,void 0,function*(){var H,ee;if(this.resourceEndpoint=(H=this.options)===null||H===void 0?void 0:H.resourceEndpoint,this.resourceEndpoint===void 0)throw new Error("'endpoint' cannot be null");this.gatewayApiVersion=((ee=this.options)===null||ee===void 0?void 0:ee.gatewayApiVersion)||"2024-03-07",this.config===void 0&&(this.config={trouterSettings:yield(0,Ce.createSettings)(this.credential,this.options),skypeTokenProvider:j=>Ue(this,void 0,void 0,function*(){if(j){if(this.tokenFetchRetries+=1,this.tokenFetchRetries>Y.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES)throw yield this.stop(!0),new Error(`Access token is expired and failed to fetch a valid one after ${Y.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES} retries`)}else this.tokenFetchRetries=0;return Promise.resolve((yield this.credential.getToken()).token)}),telemetryConfig:{eventLogger:(0,K.toTelemetrySender)(this.logger),settings:Ce.defaultTelemetrySettings}}),this.trouter.start(this.config),this.trouter.setUserActivityState(I.UserActivityState.Active)})}stop(H){return Ue(this,void 0,void 0,function*(){this.trouter.offStateChanged(this.stateChangedListener),this.trouter.clearMessageHandlers(),this.trouter.stop(H??this.tokenFetchRetries>Y.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES)})}on(H,ee){if(H==="connectionChanged"){this.trouter.offStateChanged(this.stateChangedListener),this.stateChangedListener=(j,B)=>ee(j),this.trouter.onStateChanged(this.stateChangedListener);return}this.trouter.registerMessageHandler((0,K.toMessageHandler)(H,ee,this.resourceEndpoint,this.gatewayApiVersion))}}be.CommunicationSignalingClient=M});k(De),De.CommunicationSignalingClient,De.ConnectionState;var Re=De,ze=U(function(Me,be){var Ue=y&&y.__createBinding||(Object.create?(function(M,J,H,ee){ee===void 0&&(ee=H);var j=Object.getOwnPropertyDescriptor(J,H);(!j||("get"in j?!J.__esModule:j.writable||j.configurable))&&(j={enumerable:!0,get:function(){return J[H]}}),Object.defineProperty(M,ee,j)}):(function(M,J,H,ee){ee===void 0&&(ee=H),M[ee]=J[H]})),W=y&&y.__exportStar||function(M,J){for(var H in M)H!=="default"&&!Object.prototype.hasOwnProperty.call(J,H)&&Ue(J,M,H)};Object.defineProperty(be,"__esModule",{value:!0}),W(Re,be)}),Fe=k(ze);n.exports=Fe})(Pd)),Pd.exports}var sh=dN();class _o extends Error{}_o.prototype.name="InvalidTokenError";function hN(n){return decodeURIComponent(atob(n).replace(/(.)/g,(r,s)=>{let a=s.charCodeAt(0).toString(16).toUpperCase();return a.length<2&&(a="0"+a),"%"+a}))}function fN(n){let r=n.replace(/-/g,"+").replace(/_/g,"/");switch(r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return hN(r)}catch{return atob(r)}}function pN(n,r){if(typeof n!="string")throw new _o("Invalid token specified: must be a string");r||(r={});const s=r.header===!0?0:1,a=n.split(".")[s];if(typeof a!="string")throw new _o(`Invalid token specified: missing part #${s+1}`);let c;try{c=fN(a)}catch(u){throw new _o(`Invalid token specified: invalid base64 for part #${s+1} (${u.message})`)}try{return JSON.parse(c)}catch(u){throw new _o(`Invalid token specified: invalid json for part #${s+1} (${u.message})`)}}const oh=n=>{const{exp:r}=pN(n);return{token:n,expiresOnTimestamp:r*1e3}},p0={token:"",expiresOnTimestamp:-10},mN=n=>n*1e3*60,gN=mN(10),yN=.5;class vN{constructor(r){this.expiringSoonIntervalInMs=gN,this.refreshAfterLifetimePercentage=yN,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.disposed=!1;const{tokenRefresher:s,token:a,refreshProactively:c}=r;this.refresh=s,this.currentToken=a?oh(a):p0,this.refreshProactively=c??!1,this.refreshProactively&&this.scheduleRefresh()}async getToken(r){return this.isTokenExpiringSoon(this.currentToken)?(this.isTokenValid(this.currentToken)||await this.updateTokenAndReschedule(r?.abortSignal),this.currentToken):this.currentToken}dispose(){this.disposed=!0,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.currentToken=p0,this.activeTimeout&&clearTimeout(this.activeTimeout)}async updateTokenAndReschedule(r){if(this.activeTokenUpdating)return this.activeTokenUpdating;this.activeTokenUpdating=this.refreshTokenAndReschedule(r);try{await this.activeTokenUpdating}finally{this.activeTokenUpdating=null}}async refreshTokenAndReschedule(r){const s=await this.refreshToken(r);if(!this.isTokenValid(s))throw new Error("The token returned from the tokenRefresher is expired.");this.currentToken=s,this.refreshProactively&&this.scheduleRefresh()}async refreshToken(r){try{return this.activeTokenFetching||(this.activeTokenFetching=this.refresh(r)),oh(await this.activeTokenFetching)}finally{this.activeTokenFetching=null}}scheduleRefresh(){if(this.disposed)return;this.activeTimeout&&clearTimeout(this.activeTimeout);const r=this.currentToken.expiresOnTimestamp-Date.now();let s=null;this.isTokenExpiringSoon(this.currentToken)?s=r*this.refreshAfterLifetimePercentage:s=r-this.expiringSoonIntervalInMs,this.activeTimeout=setTimeout(()=>this.updateTokenAndReschedule(),s)}isTokenValid(r){return r&&Date.now()<r.expiresOnTimestamp}isTokenExpiringSoon(r){return!r||Date.now()>=r.expiresOnTimestamp-this.expiringSoonIntervalInMs}}class bN{constructor(r){this.token=r}async getToken(){return this.token}dispose(){}}function xN(n){const r=n;return r&&typeof r.getToken=="function"&&(r.signRequest===void 0||r.getToken.length>0)}const SN="ApiVersionPolicy";function wN(n){return{name:SN,sendRequest:(r,s)=>{const a=new URL(r.url);return!a.searchParams.get("api-version")&&n.apiVersion&&(r.url=`${r.url}${Array.from(a.searchParams.keys()).length>0?"&":"?"}api-version=${n.apiVersion}`),s(r)}}}const CN="keyCredentialAuthenticationPolicy";function jN(n,r){return{name:CN,async sendRequest(s,a){return s.headers.set(r,n.key),a(s)}}}function TN(n,r,s={}){const{credential:a,clientOptions:c}=s;if(a){if(xN(a)){const u=nc({credential:a,scopes:c?.credentials?.scopes??`${r}/.default`});n.addPolicy(u)}else if(EN(a)){if(!c?.credentials?.apiKeyHeaderName)throw new Error("Missing API Key Header Name");const u=jN(a,c?.credentials?.apiKeyHeaderName);n.addPolicy(u)}}}function RN(n,r,s={}){const a=Hh(s);return a.addPolicy(wN(s)),TN(a,n,{credential:r,clientOptions:s}),a}function EN(n){return n.key!==void 0}function ei(n){return n.onResponse?{...n,onResponse(r,s){n.onResponse?.(r,s,s)}}:n}function kN(n,r,s={}){const c=RN(n,void 0,s),u=P5(n,{...s,pipeline:c}),h=(p,...m)=>({get:(g={})=>u.path(p,...m).get(ei(g)),post:(g={})=>u.path(p,...m).post(ei(g)),put:(g={})=>u.path(p,...m).put(ei(g)),patch:(g={})=>u.path(p,...m).patch(ei(g)),delete:(g={})=>u.path(p,...m).delete(ei(g)),head:(g={})=>u.path(p,...m).head(ei(g)),options:(g={})=>u.path(p,...m).options(ei(g)),trace:(g={})=>u.path(p,...m).trace(ei(g))});return{path:h,pathUnchecked:h,pipeline:u.pipeline}}const AN="https://auth.msft.communication.azure.com/",NN="https://communication.azure.com/clients/",_N="/access/teamsExtension/:exchangeAccessToken",PN="2025-06-30",MN="/access/entra/:exchangeAccessToken",ON="2025-03-02-preview";class DN{constructor(r){this.options=r,this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}},this.client=kN(r.resourceEndpoint),this.httpClient=qh(),this.options=r,this.options.scopes=this.options.scopes||["https://communication.azure.com/clients/.default"],this.isPending=this.getToken()}async getToken(r){var s;if(!((s=r?.abortSignal)===null||s===void 0)&&s.aborted)return{token:"",expiresOnTimestamp:0};this.isPending||(this.isPending=this.getTokenInternal(r));try{await this.isPending}finally{this.isPending=null}return this.result.acsToken}async getTokenInternal(r){const s=r?.abortSignal?{abortSignal:r.abortSignal}:void 0,a=await this.options.tokenCredential.getToken(this.options.scopes?this.options.scopes:["https://communication.azure.com/clients/.default"],s),c=new Date,u=new Date(this.result.acsToken.expiresOnTimestamp);if(a===null)this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}};else if(this.result.acsToken.token===""||a.token!==this.result.entraToken||u<c){const h=await this.exchangeEntraToken(this.options.resourceEndpoint,a.token,s);this.result={entraToken:a.token,acsToken:h}}return this.result.acsToken}dispose(){this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}}}async exchangeEntraToken(r,s,a){const c=$h({url:this.createRequestUri(r),method:"POST",headers:Hb({Authorization:`Bearer ${s}`,"Content-Type":"application/json",Accept:"application/json"}),abortSignal:a?.abortSignal,body:JSON.stringify({})}),u=await this.client.pipeline.sendRequest(this.httpClient,c);if(u.status!==200||!u.bodyAsText)throw new Error(`Service request failed. Status: ${u.status}, Body: ${u.bodyAsText}`);const h=JSON.parse(u.bodyAsText);return{token:h.accessToken.token,expiresOnTimestamp:Date.parse(h.accessToken.expiresOn)}}createRequestUri(r){const[s,a]=this.determineEndpointAndApiVersion();return`${r}${s}?api-version=${a}`}determineEndpointAndApiVersion(){if(!this.options.scopes||this.options.scopes.length===0)throw new Error("Scopes validation failed. Ensure all scopes start with either {TeamsExtensionScopePrefix} or {CommunicationClientsScopePrefix}.");if(this.options.scopes.every(r=>r.startsWith(AN)))return[_N,PN];if(this.options.scopes.every(r=>r.startsWith(NN)))return[MN,ON];throw new Error("Scopes validation failed. Ensure all scopes start with either {TeamsExtensionScopePrefix} or {CommunicationClientsScopePrefix}.")}}class IN{constructor(r){this.disposed=!1,typeof r=="string"?this.tokenCredential=new bN(oh(r)):"tokenRefresher"in r?this.tokenCredential=new vN(r):this.tokenCredential=new DN(r)}async getToken(r){this.throwIfDisposed();const s=await this.tokenCredential.getToken(r);return this.throwIfDisposed(),s}dispose(){this.disposed=!0,this.tokenCredential.dispose()}throwIfDisposed(){if(this.disposed)throw new Error("User credential is disposed")}}const UN=n=>typeof n.communicationUserId=="string",zN=n=>typeof n.phoneNumber=="string",LN=n=>typeof n.microsoftTeamsUserId=="string",BN=n=>typeof n.teamsAppId=="string",HN=n=>{const r=typeof n.userId=="string",s=typeof n.tenantId=="string",a=typeof n.resourceId=="string";return r&&s&&a},ex=n=>UN(n)?Object.assign(Object.assign({},n),{kind:"communicationUser"}):zN(n)?Object.assign(Object.assign({},n),{kind:"phoneNumber"}):LN(n)?Object.assign(Object.assign({},n),{kind:"microsoftTeamsUser"}):BN(n)?Object.assign(Object.assign({},n),{kind:"microsoftTeamsApp"}):HN(n)?Object.assign(Object.assign({},n),{kind:"teamsExtensionUser"}):Object.assign(Object.assign({},n),{kind:"unknown"}),No=n=>{const r=ex(n);switch(r.kind){case"communicationUser":return r.communicationUserId;case"microsoftTeamsUser":{const{microsoftTeamsUserId:s,rawId:a,cloud:c,isAnonymous:u}=r;if(a)return a;if(u)return`8:teamsvisitor:${s}`;switch(c){case"dod":return`8:dod:${s}`;case"gcch":return`8:gcch:${s}`;case"public":return`8:orgid:${s}`}return`8:orgid:${s}`}case"microsoftTeamsApp":{const{teamsAppId:s,rawId:a,cloud:c}=r;if(a)return a;switch(c){case"dod":return`28:dod:${s}`;case"gcch":return`28:gcch:${s}`}return`28:orgid:${s}`}case"phoneNumber":{const{phoneNumber:s,rawId:a}=r;return a||`4:${s}`}case"teamsExtensionUser":{const{userId:s,tenantId:a,resourceId:c,rawId:u,cloud:h}=r;if(u)return u;switch(h){case"dod":return`8:dod-acs:${c}_${a}_${s}`;case"gcch":return`8:gcch-acs:${c}_${a}_${s}`}return`8:acs:${c}_${a}_${s}`}case"unknown":return r.id}},nn=(n,r)=>{const s=Object.keys(n)[0],a=n[s];if(r in a)return a[r];throw new Error(`Property ${r} is required for identifier of type ${s}.`)},qN=n=>{const r=[];if(n.communicationUser!==void 0&&r.push("communicationUser"),n.microsoftTeamsUser!==void 0&&r.push("microsoftTeamsUser"),n.microsoftTeamsApp!==void 0&&r.push("microsoftTeamsApp"),n.phoneNumber!==void 0&&r.push("phoneNumber"),n.teamsExtensionUser!==void 0&&r.push("teamsExtensionUser"),r.length>1)throw new Error(`Only one of the properties in ${JSON.stringify(r)} should be present.`)},tx=n=>{var r,s,a,c,u,h,p,m,g;const y=ex(n);switch(y.kind){case"communicationUser":return{rawId:No(y),communicationUser:{id:y.communicationUserId}};case"phoneNumber":return{rawId:(r=y.rawId)!==null&&r!==void 0?r:No(y),phoneNumber:{value:y.phoneNumber,isAnonymous:(s=y.isAnonymous)!==null&&s!==void 0?s:!1,assertedId:y.assertedId}};case"microsoftTeamsUser":return{rawId:(a=y.rawId)!==null&&a!==void 0?a:No(y),microsoftTeamsUser:{userId:y.microsoftTeamsUserId,isAnonymous:(c=y.isAnonymous)!==null&&c!==void 0?c:!1,cloud:(u=y.cloud)!==null&&u!==void 0?u:"public"}};case"microsoftTeamsApp":return{rawId:(h=y.rawId)!==null&&h!==void 0?h:No(y),microsoftTeamsApp:{appId:y.teamsAppId,cloud:(p=y.cloud)!==null&&p!==void 0?p:"public"}};case"teamsExtensionUser":return{rawId:(m=y.rawId)!==null&&m!==void 0?m:No(y),teamsExtensionUser:{userId:y.userId,tenantId:y.tenantId,resourceId:y.resourceId,cloud:(g=y.cloud)!==null&&g!==void 0?g:"public"}};case"unknown":return{rawId:y.id};default:throw new Error(`Can't serialize an identifier with kind ${y.kind}`)}},$N=n=>n.communicationUser?"communicationUser":n.phoneNumber?"phoneNumber":n.microsoftTeamsUser?"microsoftTeamsUser":n.microsoftTeamsApp?"microsoftTeamsApp":n.teamsExtensionUser?"teamsExtensionUser":"unknown",Xo=n=>{var r,s;qN(n);const a=n.communicationUser,c=n.microsoftTeamsUser,u=n.microsoftTeamsApp,h=n.phoneNumber,p=n.teamsExtensionUser,m=(r=n.kind)!==null&&r!==void 0?r:$N(n);return m==="communicationUser"&&a?{kind:"communicationUser",communicationUserId:nn({communicationUser:a},"id")}:m==="phoneNumber"&&h?{kind:"phoneNumber",phoneNumber:nn({phoneNumber:h},"value"),rawId:nn({phoneNumber:n},"rawId"),isAnonymous:(s=h.isAnonymous)!==null&&s!==void 0?s:!1,assertedId:h.assertedId}:m==="microsoftTeamsUser"&&c?{kind:"microsoftTeamsUser",microsoftTeamsUserId:nn({microsoftTeamsUser:c},"userId"),isAnonymous:nn({microsoftTeamsUser:c},"isAnonymous"),cloud:nn({microsoftTeamsUser:c},"cloud"),rawId:nn({microsoftTeamsUser:n},"rawId")}:m==="microsoftTeamsApp"&&u?{kind:"microsoftTeamsApp",teamsAppId:nn({microsoftTeamsApp:u},"appId"),cloud:nn({microsoftTeamsApp:u},"cloud"),rawId:nn({microsoftTeamsApp:n},"rawId")}:m==="teamsExtensionUser"&&p?{kind:"teamsExtensionUser",userId:nn({teamsExtensionUser:p},"userId"),tenantId:nn({teamsExtensionUser:p},"tenantId"),resourceId:nn({teamsExtensionUser:p},"resourceId"),cloud:nn({teamsExtensionUser:p},"cloud"),rawId:nn({teamsExtensionUser:n},"rawId")}:{kind:"unknown",id:nn({unknown:n},"rawId")}},FN=n=>{const{participants:r,idempotencyToken:s}=n,a=kr(n,["participants","idempotencyToken"]);return Object.assign({repeatabilityRequestId:s},a)},nx=n=>{const{id:r}=n,s=kr(n,["id"]);return Object.assign(Object.assign({},s),{communicationIdentifier:tx(r)})},VN=n=>{var r;return{participants:(r=n.participants)===null||r===void 0?void 0:r.map(s=>nx(s))}},ah=n=>{const{communicationIdentifier:r}=n,s=kr(n,["communicationIdentifier"]);return Object.assign(Object.assign({},s),{id:Xo(r)})},WN=n=>{const{participants:r,initiatorCommunicationIdentifier:s}=n,a=kr(n,["participants","initiatorCommunicationIdentifier"]);let c=Object.assign({},a);if(s){const u=Xo(s);c=Object.assign(Object.assign({},c),{initiator:u})}return r&&(c=Object.assign(Object.assign({},c),{participants:r?.map(u=>ah(u))})),c},Fd=n=>{const{content:r,senderCommunicationIdentifier:s}=n,a=kr(n,["content","senderCommunicationIdentifier"]);let c=Object.assign({},a);if(r&&(c=Object.assign(Object.assign({},c),{content:WN(r)})),s){const u=Xo(s);c=Object.assign(Object.assign({},c),{sender:u})}return c},GN=n=>{if(n.kind==="threadCreationDate"||n.kind==="none")return n;throw new Error(`Retention Policy ${n.kind} is not supported`)},rx=n=>{const{createdByCommunicationIdentifier:r,retentionPolicy:s}=n,a=kr(n,["createdByCommunicationIdentifier","retentionPolicy"]);let c=Object.assign({},a);return r&&(c=Object.assign(Object.assign({},c),{createdBy:Xo(r)})),s&&(c=Object.assign(Object.assign({},c),{retentionPolicy:GN(s)})),c},YN=n=>{const{chatThread:r}=n,s=kr(n,["chatThread"]);return r?Object.assign(Object.assign({},s),{chatThread:rx(r)}):Object.assign({},s)},m0=n=>{const{senderCommunicationIdentifier:r}=n,s=kr(n,["senderCommunicationIdentifier"]);return Object.assign(Object.assign({},s),{sender:Xo(r)})};var g0;(function(n){n.Unknown="unknown",n.CommunicationUser="communicationUser",n.PhoneNumber="phoneNumber",n.MicrosoftTeamsUser="microsoftTeamsUser",n.MicrosoftTeamsApp="microsoftTeamsApp"})(g0||(g0={}));var y0;(function(n){n.Public="public",n.Dod="dod",n.Gcch="gcch"})(y0||(y0={}));var v0;(function(n){n.ThreadCreationDate="threadCreationDate",n.None="none"})(v0||(v0={}));const rt=Ub({namespace:"Azure.Communication",packageName:"@azure/communication-chat",packageVersion:"1.6.0"}),Fh={type:{name:"Composite",className:"ChatMessageReadReceiptsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessageReadReceipt"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},XN={type:{name:"Composite",className:"ChatMessageReadReceipt",modelProperties:{senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}},readOn:{serializedName:"readOn",required:!0,type:{name:"DateTime"}}}}},ix={type:{name:"Composite",className:"CommunicationIdentifierModel",modelProperties:{kind:{serializedName:"kind",type:{name:"String"}},rawId:{serializedName:"rawId",type:{name:"String"}},communicationUser:{serializedName:"communicationUser",type:{name:"Composite",className:"CommunicationUserIdentifierModel"}},phoneNumber:{serializedName:"phoneNumber",type:{name:"Composite",className:"PhoneNumberIdentifierModel"}},microsoftTeamsUser:{serializedName:"microsoftTeamsUser",type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel"}},microsoftTeamsApp:{serializedName:"microsoftTeamsApp",type:{name:"Composite",className:"MicrosoftTeamsAppIdentifierModel"}}}}},JN={type:{name:"Composite",className:"CommunicationUserIdentifierModel",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},KN={type:{name:"Composite",className:"PhoneNumberIdentifierModel",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"String"}}}}},QN={type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel",modelProperties:{userId:{serializedName:"userId",required:!0,type:{name:"String"}},isAnonymous:{serializedName:"isAnonymous",type:{name:"Boolean"}},cloud:{serializedName:"cloud",type:{name:"String"}}}}},ZN={type:{name:"Composite",className:"MicrosoftTeamsAppIdentifierModel",modelProperties:{appId:{serializedName:"appId",required:!0,type:{name:"String"}},cloud:{serializedName:"cloud",type:{name:"String"}}}}},Le={type:{name:"Composite",className:"CommunicationErrorResponse",modelProperties:{error:{serializedName:"error",type:{name:"Composite",className:"ChatError"}}}}},e_={type:{name:"Composite",className:"ChatError",modelProperties:{code:{serializedName:"code",required:!0,type:{name:"String"}},message:{serializedName:"message",required:!0,type:{name:"String"}},target:{serializedName:"target",readOnly:!0,type:{name:"String"}},details:{serializedName:"details",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}},innerError:{serializedName:"innererror",type:{name:"Composite",className:"ChatError"}}}}},sx={type:{name:"Composite",className:"SendReadReceiptRequest",modelProperties:{chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}}}},ox={type:{name:"Composite",className:"SendChatMessageRequest",modelProperties:{content:{serializedName:"content",required:!0,type:{name:"String"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},type:{serializedName:"type",type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},ax={type:{name:"Composite",className:"SendChatMessageResult",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},Vh={type:{name:"Composite",className:"ChatMessagesCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessage"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},lx={type:{name:"Composite",className:"ChatMessage",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},type:{serializedName:"type",required:!0,type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},sequenceId:{serializedName:"sequenceId",required:!0,type:{name:"String"}},version:{serializedName:"version",required:!0,type:{name:"String"}},content:{serializedName:"content",type:{name:"Composite",className:"ChatMessageContent"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},editedOn:{serializedName:"editedOn",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},t_={type:{name:"Composite",className:"ChatMessageContent",modelProperties:{message:{serializedName:"message",type:{name:"String"}},topic:{serializedName:"topic",type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},attachments:{serializedName:"attachments",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatAttachment"}}}},initiatorCommunicationIdentifier:{serializedName:"initiatorCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}}}}},n_={type:{name:"Composite",className:"ChatParticipant",modelProperties:{communicationIdentifier:{serializedName:"communicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},displayName:{serializedName:"displayName",type:{name:"String"}},shareHistoryTime:{serializedName:"shareHistoryTime",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},r_={type:{name:"Composite",className:"ChatAttachment",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},attachmentType:{serializedName:"attachmentType",required:!0,type:{name:"Enum",allowedValues:["image","file"]}},name:{serializedName:"name",type:{name:"String"}},url:{serializedName:"url",type:{name:"String"}},previewUrl:{serializedName:"previewUrl",type:{name:"String"}}}}},cx={type:{name:"Composite",className:"UpdateChatMessageRequest",modelProperties:{content:{serializedName:"content",type:{name:"String"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},Wh={type:{name:"Composite",className:"ChatParticipantsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},ux={type:{name:"Composite",className:"AddChatParticipantsRequest",modelProperties:{participants:{serializedName:"participants",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}}}}},dx={type:{name:"Composite",className:"AddChatParticipantsResult",modelProperties:{invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},hx={type:{name:"Composite",className:"CreateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",required:!0,type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},Ts={type:{name:"Composite",className:"ChatRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:{serializedName:"kind",clientName:"kind"},modelProperties:{kind:{serializedName:"kind",required:!0,type:{name:"String"}}}}},fx={type:{name:"Composite",className:"CreateChatThreadResult",modelProperties:{chatThread:{serializedName:"chatThread",type:{name:"Composite",className:"ChatThreadProperties"}},invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},px={type:{name:"Composite",className:"ChatThreadProperties",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},createdByCommunicationIdentifier:{serializedName:"createdByCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},Gh={type:{name:"Composite",className:"ChatThreadsItemCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatThreadItem"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},i_={type:{name:"Composite",className:"ChatThreadItem",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},lastMessageReceivedOn:{serializedName:"lastMessageReceivedOn",readOnly:!0,type:{name:"DateTime"}}}}},mx={type:{name:"Composite",className:"UpdateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",type:{name:"String"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},gx={type:{name:"Composite",className:"SendTypingNotificationRequest",modelProperties:{senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}}}}},yx={serializedName:"threadCreationDate",type:{name:"Composite",className:"ThreadCreationDateRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:Ts.type.polymorphicDiscriminator,modelProperties:Object.assign(Object.assign({},Ts.type.modelProperties),{deleteThreadAfterDays:{serializedName:"deleteThreadAfterDays",required:!0,type:{name:"Number"}}})}},vx={serializedName:"none",type:{name:"Composite",className:"NoneRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:Ts.type.polymorphicDiscriminator,modelProperties:Object.assign({},Ts.type.modelProperties)}};let s_={ChatRetentionPolicy:Ts,"ChatRetentionPolicy.threadCreationDate":yx,"ChatRetentionPolicy.none":vx};const bx=Object.freeze(Object.defineProperty({__proto__:null,AddChatParticipantsRequest:ux,AddChatParticipantsResult:dx,ChatAttachment:r_,ChatError:e_,ChatMessage:lx,ChatMessageContent:t_,ChatMessageReadReceipt:XN,ChatMessageReadReceiptsCollection:Fh,ChatMessagesCollection:Vh,ChatParticipant:n_,ChatParticipantsCollection:Wh,ChatRetentionPolicy:Ts,ChatThreadItem:i_,ChatThreadProperties:px,ChatThreadsItemCollection:Gh,CommunicationErrorResponse:Le,CommunicationIdentifierModel:ix,CommunicationUserIdentifierModel:JN,CreateChatThreadRequest:hx,CreateChatThreadResult:fx,MicrosoftTeamsAppIdentifierModel:ZN,MicrosoftTeamsUserIdentifierModel:QN,NoneRetentionPolicy:vx,PhoneNumberIdentifierModel:KN,SendChatMessageRequest:ox,SendChatMessageResult:ax,SendReadReceiptRequest:sx,SendTypingNotificationRequest:gx,ThreadCreationDateRetentionPolicy:yx,UpdateChatMessageRequest:cx,UpdateChatThreadRequest:mx,discriminators:s_},Symbol.toStringTag,{value:"Module"})),zt={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},Lt={parameterPath:"endpoint",mapper:{serializedName:"endpoint",required:!0,type:{name:"String"}},skipEncoding:!0},Jt={parameterPath:"chatThreadId",mapper:{serializedName:"chatThreadId",required:!0,type:{name:"String"}}},rc={parameterPath:["options","maxPageSize"],mapper:{serializedName:"maxPageSize",type:{name:"Number"}}},xx={parameterPath:["options","skip"],mapper:{serializedName:"skip",type:{name:"Number"}}},on={parameterPath:"apiVersion",mapper:{defaultValue:"2025-03-15",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},Ps={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},o_={parameterPath:"sendReadReceiptRequest",mapper:sx},a_={parameterPath:"sendChatMessageRequest",mapper:ox},Sx={parameterPath:["options","startTime"],mapper:{serializedName:"startTime",type:{name:"DateTime"}}},Yh={parameterPath:"chatMessageId",mapper:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}},wx={parameterPath:["options","contentType"],mapper:{defaultValue:"application/merge-patch+json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},l_={parameterPath:"updateChatMessageRequest",mapper:cx},c_={parameterPath:"participantCommunicationIdentifier",mapper:ix},u_={parameterPath:"addChatParticipantsRequest",mapper:ux},d_={parameterPath:"updateChatThreadRequest",mapper:mx},h_={parameterPath:["options","sendTypingNotificationRequest"],mapper:gx},ic={parameterPath:"nextLink",mapper:{serializedName:"nextLink",required:!0,type:{name:"String"}},skipEncoding:!0},f_={parameterPath:"createChatThreadRequest",mapper:hx},p_={parameterPath:["options","repeatabilityRequestId"],mapper:{serializedName:"repeatability-request-id",type:{name:"String"}}};class m_{constructor(r){this.client=r}async listChatReadReceipts(r,s){return rt.withSpan("ChatApiClient.listChatReadReceipts",s??{},async a=>this.client.sendOperationRequest({chatThreadId:r,options:a},g_))}async sendChatReadReceipt(r,s,a){return rt.withSpan("ChatApiClient.sendChatReadReceipt",a??{},async c=>this.client.sendOperationRequest({chatThreadId:r,sendReadReceiptRequest:s,options:c},y_))}async sendChatMessage(r,s,a){return rt.withSpan("ChatApiClient.sendChatMessage",a??{},async c=>this.client.sendOperationRequest({chatThreadId:r,sendChatMessageRequest:s,options:c},v_))}async listChatMessages(r,s){return rt.withSpan("ChatApiClient.listChatMessages",s??{},async a=>this.client.sendOperationRequest({chatThreadId:r,options:a},b_))}async getChatMessage(r,s,a){return rt.withSpan("ChatApiClient.getChatMessage",a??{},async c=>this.client.sendOperationRequest({chatThreadId:r,chatMessageId:s,options:c},x_))}async updateChatMessage(r,s,a,c){return rt.withSpan("ChatApiClient.updateChatMessage",c??{},async u=>this.client.sendOperationRequest({chatThreadId:r,chatMessageId:s,updateChatMessageRequest:a,options:u},S_))}async deleteChatMessage(r,s,a){return rt.withSpan("ChatApiClient.deleteChatMessage",a??{},async c=>this.client.sendOperationRequest({chatThreadId:r,chatMessageId:s,options:c},w_))}async listChatParticipants(r,s){return rt.withSpan("ChatApiClient.listChatParticipants",s??{},async a=>this.client.sendOperationRequest({chatThreadId:r,options:a},C_))}async removeChatParticipant(r,s,a){return rt.withSpan("ChatApiClient.removeChatParticipant",a??{},async c=>this.client.sendOperationRequest({chatThreadId:r,participantCommunicationIdentifier:s,options:c},j_))}async addChatParticipants(r,s,a){return rt.withSpan("ChatApiClient.addChatParticipants",a??{},async c=>this.client.sendOperationRequest({chatThreadId:r,addChatParticipantsRequest:s,options:c},T_))}async updateChatThreadProperties(r,s,a){return rt.withSpan("ChatApiClient.updateChatThreadProperties",a??{},async c=>this.client.sendOperationRequest({chatThreadId:r,updateChatThreadRequest:s,options:c},R_))}async getChatThreadProperties(r,s){return rt.withSpan("ChatApiClient.getChatThreadProperties",s??{},async a=>this.client.sendOperationRequest({chatThreadId:r,options:a},E_))}async sendTypingNotification(r,s){return rt.withSpan("ChatApiClient.sendTypingNotification",s??{},async a=>this.client.sendOperationRequest({chatThreadId:r,options:a},k_))}async listChatReadReceiptsNext(r,s,a){return rt.withSpan("ChatApiClient.listChatReadReceiptsNext",a??{},async c=>this.client.sendOperationRequest({chatThreadId:r,nextLink:s,options:c},A_))}async listChatMessagesNext(r,s,a){return rt.withSpan("ChatApiClient.listChatMessagesNext",a??{},async c=>this.client.sendOperationRequest({chatThreadId:r,nextLink:s,options:c},N_))}async listChatParticipantsNext(r,s,a){return rt.withSpan("ChatApiClient.listChatParticipantsNext",a??{},async c=>this.client.sendOperationRequest({chatThreadId:r,nextLink:s,options:c},__))}}const an=Mh(bx,!1),g_={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"GET",responses:{200:{bodyMapper:Fh},401:{bodyMapper:Le,isError:!0},403:{bodyMapper:Le,isError:!0},429:{bodyMapper:Le,isError:!0},503:{bodyMapper:Le,isError:!0}},queryParameters:[rc,xx,on],urlParameters:[Lt,Jt],headerParameters:[zt],serializer:an},y_={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"POST",responses:{200:{},401:{bodyMapper:Le,isError:!0},403:{bodyMapper:Le,isError:!0},429:{bodyMapper:Le,isError:!0},503:{bodyMapper:Le,isError:!0}},requestBody:o_,queryParameters:[on],urlParameters:[Lt,Jt],headerParameters:[zt,Ps],mediaType:"json",serializer:an},v_={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"POST",responses:{201:{bodyMapper:ax},401:{bodyMapper:Le,isError:!0},403:{bodyMapper:Le,isError:!0},429:{bodyMapper:Le,isError:!0},503:{bodyMapper:Le,isError:!0}},requestBody:a_,queryParameters:[on],urlParameters:[Lt,Jt],headerParameters:[zt,Ps],mediaType:"json",serializer:an},b_={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"GET",responses:{200:{bodyMapper:Vh},401:{bodyMapper:Le,isError:!0},403:{bodyMapper:Le,isError:!0},429:{bodyMapper:Le,isError:!0},503:{bodyMapper:Le,isError:!0}},queryParameters:[rc,on,Sx],urlParameters:[Lt,Jt],headerParameters:[zt],serializer:an},x_={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"GET",responses:{200:{bodyMapper:lx},401:{bodyMapper:Le,isError:!0},403:{bodyMapper:Le,isError:!0},429:{bodyMapper:Le,isError:!0},503:{bodyMapper:Le,isError:!0}},queryParameters:[on],urlParameters:[Lt,Jt,Yh],headerParameters:[zt],serializer:an},S_={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:Le,isError:!0},403:{bodyMapper:Le,isError:!0},429:{bodyMapper:Le,isError:!0},503:{bodyMapper:Le,isError:!0}},requestBody:l_,queryParameters:[on],urlParameters:[Lt,Jt,Yh],headerParameters:[zt,wx],mediaType:"json",serializer:an},w_={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:Le,isError:!0},403:{bodyMapper:Le,isError:!0},429:{bodyMapper:Le,isError:!0},503:{bodyMapper:Le,isError:!0}},queryParameters:[on],urlParameters:[Lt,Jt,Yh],headerParameters:[zt],serializer:an},C_={path:"/chat/threads/{chatThreadId}/participants",httpMethod:"GET",responses:{200:{bodyMapper:Wh},401:{bodyMapper:Le,isError:!0},403:{bodyMapper:Le,isError:!0},429:{bodyMapper:Le,isError:!0},503:{bodyMapper:Le,isError:!0}},queryParameters:[rc,xx,on],urlParameters:[Lt,Jt],headerParameters:[zt],serializer:an},j_={path:"/chat/threads/{chatThreadId}/participants/:remove",httpMethod:"POST",responses:{204:{},401:{bodyMapper:Le,isError:!0},403:{bodyMapper:Le,isError:!0},429:{bodyMapper:Le,isError:!0},503:{bodyMapper:Le,isError:!0}},requestBody:c_,queryParameters:[on],urlParameters:[Lt,Jt],headerParameters:[zt,Ps],mediaType:"json",serializer:an},T_={path:"/chat/threads/{chatThreadId}/participants/:add",httpMethod:"POST",responses:{201:{bodyMapper:dx},401:{bodyMapper:Le,isError:!0},403:{bodyMapper:Le,isError:!0},429:{bodyMapper:Le,isError:!0},503:{bodyMapper:Le,isError:!0}},requestBody:u_,queryParameters:[on],urlParameters:[Lt,Jt],headerParameters:[zt,Ps],mediaType:"json",serializer:an},R_={path:"/chat/threads/{chatThreadId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:Le,isError:!0},403:{bodyMapper:Le,isError:!0},429:{bodyMapper:Le,isError:!0},503:{bodyMapper:Le,isError:!0}},requestBody:d_,queryParameters:[on],urlParameters:[Lt,Jt],headerParameters:[zt,wx],mediaType:"json",serializer:an},E_={path:"/chat/threads/{chatThreadId}",httpMethod:"GET",responses:{200:{bodyMapper:px},401:{bodyMapper:Le,isError:!0},403:{bodyMapper:Le,isError:!0},429:{bodyMapper:Le,isError:!0},503:{bodyMapper:Le,isError:!0}},queryParameters:[on],urlParameters:[Lt,Jt],headerParameters:[zt],serializer:an},k_={path:"/chat/threads/{chatThreadId}/typing",httpMethod:"POST",responses:{200:{},401:{bodyMapper:Le,isError:!0},403:{bodyMapper:Le,isError:!0},429:{bodyMapper:Le,isError:!0},503:{bodyMapper:Le,isError:!0}},requestBody:h_,queryParameters:[on],urlParameters:[Lt,Jt],headerParameters:[zt,Ps],mediaType:"json",serializer:an},A_={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Fh},401:{bodyMapper:Le,isError:!0},403:{bodyMapper:Le,isError:!0},429:{bodyMapper:Le,isError:!0},503:{bodyMapper:Le,isError:!0}},urlParameters:[Lt,Jt,ic],headerParameters:[zt],serializer:an},N_={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Vh},401:{bodyMapper:Le,isError:!0},403:{bodyMapper:Le,isError:!0},429:{bodyMapper:Le,isError:!0},503:{bodyMapper:Le,isError:!0}},urlParameters:[Lt,Jt,ic],headerParameters:[zt],serializer:an},__={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Wh},401:{bodyMapper:Le,isError:!0},403:{bodyMapper:Le,isError:!0},429:{bodyMapper:Le,isError:!0},503:{bodyMapper:Le,isError:!0}},urlParameters:[Lt,Jt,ic],headerParameters:[zt],serializer:an};class P_{constructor(r){this.client=r}async createChatThread(r,s){return rt.withSpan("ChatApiClient.createChatThread",s??{},async a=>this.client.sendOperationRequest({createChatThreadRequest:r,options:a},M_))}async listChatThreads(r){return rt.withSpan("ChatApiClient.listChatThreads",r??{},async s=>this.client.sendOperationRequest({options:s},O_))}async deleteChatThread(r,s){return rt.withSpan("ChatApiClient.deleteChatThread",s??{},async a=>this.client.sendOperationRequest({chatThreadId:r,options:a},D_))}async listChatThreadsNext(r,s){return rt.withSpan("ChatApiClient.listChatThreadsNext",s??{},async a=>this.client.sendOperationRequest({nextLink:r,options:a},I_))}}const sc=Mh(bx,!1),M_={path:"/chat/threads",httpMethod:"POST",responses:{201:{bodyMapper:fx},401:{bodyMapper:Le,isError:!0},403:{bodyMapper:Le,isError:!0},429:{bodyMapper:Le,isError:!0},503:{bodyMapper:Le,isError:!0}},requestBody:f_,queryParameters:[on],urlParameters:[Lt],headerParameters:[zt,Ps,p_],mediaType:"json",serializer:sc},O_={path:"/chat/threads",httpMethod:"GET",responses:{200:{bodyMapper:Gh},401:{bodyMapper:Le,isError:!0},403:{bodyMapper:Le,isError:!0},429:{bodyMapper:Le,isError:!0},503:{bodyMapper:Le,isError:!0}},queryParameters:[rc,on,Sx],urlParameters:[Lt],headerParameters:[zt],serializer:sc},D_={path:"/chat/threads/{chatThreadId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:Le,isError:!0},403:{bodyMapper:Le,isError:!0},429:{bodyMapper:Le,isError:!0},503:{bodyMapper:Le,isError:!0}},queryParameters:[on],urlParameters:[Lt,Jt],headerParameters:[zt],serializer:sc},I_={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Gh},401:{bodyMapper:Le,isError:!0},403:{bodyMapper:Le,isError:!0},429:{bodyMapper:Le,isError:!0},503:{bodyMapper:Le,isError:!0}},urlParameters:[Lt,ic],headerParameters:[zt],serializer:sc};class Cx extends Qb{constructor(r,s){var a,c;if(r===void 0)throw new Error("'endpoint' cannot be null");s||(s={});const u={requestContentType:"application/json; charset=utf-8"},h="azsdk-js-communication-chat/1.6.0",p=s.userAgentOptions&&s.userAgentOptions.userAgentPrefix?`${s.userAgentOptions.userAgentPrefix} ${h}`:`${h}`,m=Object.assign(Object.assign(Object.assign({},u),s),{userAgentOptions:{userAgentPrefix:p},endpoint:(c=(a=s.endpoint)!==null&&a!==void 0?a:s.baseUri)!==null&&c!==void 0?c:"{endpoint}"});super(m),this.endpoint=r,this.apiVersion=s.apiVersion||"2025-03-15",this.chatThread=new m_(this),this.chat=new P_(this),this.addCustomApiVersionPolicy(s.apiVersion)}addCustomApiVersionPolicy(r){if(!r)return;const s={name:"CustomApiVersionPolicy",async sendRequest(a,c){const u=a.url.split("?");if(u.length>1){const h=u[1].split("&").map(p=>p.indexOf("api-version")>-1?"api-version="+r:p);a.url=u[0]+"?"+h.join("&")}return c(a)}};this.pipeline.addPolicy(s)}}const Oo=ec("communication-chat"),jx=n=>nc({credential:{getToken:(s,a)=>n.getToken({abortSignal:a?.abortSignal})},scopes:[]}),U_=8e3;class z_{constructor(r,s,a,c={}){this.endpoint=r,this.timeOfLastTypingRequest=void 0,this.threadId=s,this.tokenCredential=a;const u=Object.assign(Object.assign({},c),{loggingOptions:{logger:Oo.info}});this.client=new Cx(this.endpoint,Object.assign({endpoint:this.endpoint},u));const h=jx(this.tokenCredential);this.client.pipeline.addPolicy(h)}getProperties(r={}){return rt.withSpan("ChatClient-GetProperties",r,async s=>{const a=await this.client.chatThread.getChatThreadProperties(this.threadId,s);return rx(a)})}updateTopic(r,s={}){return rt.withSpan("ChatThreadClient-UpdateTopic",s,async a=>{await this.client.chatThread.updateChatThreadProperties(this.threadId,{topic:r},a)})}updateProperties(r={}){return rt.withSpan("ChatThreadClient-UpdateProperties",r,async s=>{await this.client.chatThread.updateChatThreadProperties(this.threadId,r,s)})}sendMessage(r,s={}){return rt.withSpan("ChatThreadClient-SendMessage",s,async a=>(this.timeOfLastTypingRequest=void 0,await this.client.chatThread.sendChatMessage(this.threadId,Object.assign(Object.assign({},r),s),a)))}getMessage(r,s={}){return rt.withSpan("ChatThreadClient-GetMessage",s,async a=>{const c=await this.client.chatThread.getChatMessage(this.threadId,r,a);return Fd(c)})}listMessagesPage(r){return ti(this,arguments,function*(a,c={}){if(!a.continuationToken){const u=yield ct(this.client.chatThread.listChatMessages(this.threadId,c));a.continuationToken=u.nextLink,u.value&&(yield yield ct(u.value.map(Fd,this)))}for(;a.continuationToken;){const u=yield ct(this.client.chatThread.listChatMessagesNext(this.threadId,a.continuationToken,c));if(a.continuationToken=u.nextLink,u.value)yield yield ct(u.value.map(Fd,this));else break}})}listMessagesAll(r){return ti(this,arguments,function*(){var a,c,u,h;try{for(var p=!0,m=ni(this.listMessagesPage({},r)),g;g=yield ct(m.next()),a=g.done,!a;p=!0)h=g.value,p=!1,yield ct(yield*Tl(ni(h)))}catch(y){c={error:y}}finally{try{!p&&!a&&(u=m.return)&&(yield ct(u.call(m)))}finally{if(c)throw c.error}}})}listMessages(r={}){const{span:s,updatedOptions:a}=rt.startSpan("ChatThreadClient-ListMessages",r);try{const c=this.listMessagesAll(a);return{next(){return c.next()},[Symbol.asyncIterator](){return this},byPage:(u={})=>this.listMessagesPage(u,a)}}catch(c){throw s.setStatus({status:"error",error:c}),c}finally{s.end()}}deleteMessage(r,s={}){return rt.withSpan("ChatThreadClient-DeleteMessage",s,async a=>{await this.client.chatThread.deleteChatMessage(this.threadId,r,a)})}async updateMessage(r,s={}){return rt.withSpan("ChatThreadClient-UpdateMessage",s,async a=>{await this.client.chatThread.updateChatMessage(this.threadId,r,s,a)})}async addParticipants(r,s={}){return rt.withSpan("ChatThreadClient-AddParticipants",s,async a=>await this.client.chatThread.addChatParticipants(this.threadId,VN(r),a))}listParticipantsPage(r){return ti(this,arguments,function*(a,c={}){if(!a.continuationToken){const u=yield ct(this.client.chatThread.listChatParticipants(this.threadId,c));a.continuationToken=u.nextLink,u.value&&(yield yield ct(u.value.map(ah,this)))}for(;a.continuationToken;){const u=yield ct(this.client.chatThread.listChatParticipantsNext(this.threadId,a.continuationToken,c));if(a.continuationToken=u.nextLink,u.value)yield yield ct(u.value.map(ah,this));else break}})}listParticipantsAll(r){return ti(this,arguments,function*(){var a,c,u,h;try{for(var p=!0,m=ni(this.listParticipantsPage({},r)),g;g=yield ct(m.next()),a=g.done,!a;p=!0)h=g.value,p=!1,yield ct(yield*Tl(ni(h)))}catch(y){c={error:y}}finally{try{!p&&!a&&(u=m.return)&&(yield ct(u.call(m)))}finally{if(c)throw c.error}}})}listParticipants(r={}){const{span:s,updatedOptions:a}=rt.startSpan("ChatThreadClient-ListParticipants",r);try{const c=this.listParticipantsAll(a);return{next(){return c.next()},[Symbol.asyncIterator](){return this},byPage:(u={})=>this.listParticipantsPage(u,a)}}catch(c){throw s.setStatus({status:"error",error:c}),c}finally{s.end()}}async removeParticipant(r,s={}){return rt.withSpan("ChatThreadClient-RemoveParticipant",s,async a=>{await this.client.chatThread.removeChatParticipant(this.threadId,tx(r),a)})}async sendTypingNotification(r={}){return rt.withSpan("ChatThreadClient-SendTypingNotification",r,async s=>{const a=new Date,{senderDisplayName:c}=s,u=kr(s,["senderDisplayName"]);return this.canPostTypingNotification(a)?(this.timeOfLastTypingRequest=a,await this.client.chatThread.sendTypingNotification(this.threadId,Object.assign({sendTypingNotificationRequest:{senderDisplayName:c}},u)),!0):(Oo.info(`Typing Notification NOT Send. [thread_id=${this.threadId}]`),!1)})}async sendReadReceipt(r,s={}){return rt.withSpan("ChatThreadClient-SendReadReceipt",s,async a=>{await this.client.chatThread.sendChatReadReceipt(this.threadId,r,a)})}listReadReceiptsPage(r){return ti(this,arguments,function*(a,c={}){if(!a.continuationToken){const u=yield ct(this.client.chatThread.listChatReadReceipts(this.threadId,c));a.continuationToken=u.nextLink,u.value&&(yield yield ct(u.value.map(m0,this)))}for(;a.continuationToken;){const u=yield ct(this.client.chatThread.listChatReadReceiptsNext(this.threadId,a.continuationToken,c));if(a.continuationToken=u.nextLink,u.value)yield yield ct(u.value.map(m0,this));else break}})}listReadReceiptsAll(r){return ti(this,arguments,function*(){var a,c,u,h;try{for(var p=!0,m=ni(this.listReadReceiptsPage({},r)),g;g=yield ct(m.next()),a=g.done,!a;p=!0)h=g.value,p=!1,yield ct(yield*Tl(ni(h)))}catch(y){c={error:y}}finally{try{!p&&!a&&(u=m.return)&&(yield ct(u.call(m)))}finally{if(c)throw c.error}}})}listReadReceipts(r={}){const{span:s,updatedOptions:a}=rt.startSpan("ChatThreadClient-ListChatReadReceipts",r);try{const c=this.listReadReceiptsAll(a);return{next(){return c.next()},[Symbol.asyncIterator](){return this},byPage:(u={})=>this.listReadReceiptsPage(u,a)}}catch(c){throw s.setStatus({status:"error",error:c}),c}finally{s.end()}}canPostTypingNotification(r){return this.timeOfLastTypingRequest&&r.getTime()-this.timeOfLastTypingRequest.getTime()<U_?(Oo.info(`Typing interval check failed. [last_request=${this.timeOfLastTypingRequest}]`),!1):!0}}var gl={exports:{}},b0;function L_(){if(b0)return gl.exports;b0=1;var n=typeof Reflect=="object"?Reflect:null,r=n&&typeof n.apply=="function"?n.apply:function(K,ie,ae){return Function.prototype.apply.call(K,ie,ae)},s;n&&typeof n.ownKeys=="function"?s=n.ownKeys:Object.getOwnPropertySymbols?s=function(K){return Object.getOwnPropertyNames(K).concat(Object.getOwnPropertySymbols(K))}:s=function(K){return Object.getOwnPropertyNames(K)};function a(le){console&&console.warn&&console.warn(le)}var c=Number.isNaN||function(K){return K!==K};function u(){u.init.call(this)}gl.exports=u,gl.exports.once=Q,u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var h=10;function p(le){if(typeof le!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof le)}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(le){if(typeof le!="number"||le<0||c(le))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+le+".");h=le}}),u.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(K){if(typeof K!="number"||K<0||c(K))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+K+".");return this._maxListeners=K,this};function m(le){return le._maxListeners===void 0?u.defaultMaxListeners:le._maxListeners}u.prototype.getMaxListeners=function(){return m(this)},u.prototype.emit=function(K){for(var ie=[],ae=1;ae<arguments.length;ae++)ie.push(arguments[ae]);var Ce=K==="error",De=this._events;if(De!==void 0)Ce=Ce&&De.error===void 0;else if(!Ce)return!1;if(Ce){var Re;if(ie.length>0&&(Re=ie[0]),Re instanceof Error)throw Re;var ze=new Error("Unhandled error."+(Re?" ("+Re.message+")":""));throw ze.context=Re,ze}var Fe=De[K];if(Fe===void 0)return!1;if(typeof Fe=="function")r(Fe,this,ie);else for(var Me=Fe.length,be=I(Fe,Me),ae=0;ae<Me;++ae)r(be[ae],this,ie);return!0};function g(le,K,ie,ae){var Ce,De,Re;if(p(ie),De=le._events,De===void 0?(De=le._events=Object.create(null),le._eventsCount=0):(De.newListener!==void 0&&(le.emit("newListener",K,ie.listener?ie.listener:ie),De=le._events),Re=De[K]),Re===void 0)Re=De[K]=ie,++le._eventsCount;else if(typeof Re=="function"?Re=De[K]=ae?[ie,Re]:[Re,ie]:ae?Re.unshift(ie):Re.push(ie),Ce=m(le),Ce>0&&Re.length>Ce&&!Re.warned){Re.warned=!0;var ze=new Error("Possible EventEmitter memory leak detected. "+Re.length+" "+String(K)+" listeners added. Use emitter.setMaxListeners() to increase limit");ze.name="MaxListenersExceededWarning",ze.emitter=le,ze.type=K,ze.count=Re.length,a(ze)}return le}u.prototype.addListener=function(K,ie){return g(this,K,ie,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(K,ie){return g(this,K,ie,!0)};function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function k(le,K,ie){var ae={fired:!1,wrapFn:void 0,target:le,type:K,listener:ie},Ce=y.bind(ae);return Ce.listener=ie,ae.wrapFn=Ce,Ce}u.prototype.once=function(K,ie){return p(ie),this.on(K,k(this,K,ie)),this},u.prototype.prependOnceListener=function(K,ie){return p(ie),this.prependListener(K,k(this,K,ie)),this},u.prototype.removeListener=function(K,ie){var ae,Ce,De,Re,ze;if(p(ie),Ce=this._events,Ce===void 0)return this;if(ae=Ce[K],ae===void 0)return this;if(ae===ie||ae.listener===ie)--this._eventsCount===0?this._events=Object.create(null):(delete Ce[K],Ce.removeListener&&this.emit("removeListener",K,ae.listener||ie));else if(typeof ae!="function"){for(De=-1,Re=ae.length-1;Re>=0;Re--)if(ae[Re]===ie||ae[Re].listener===ie){ze=ae[Re].listener,De=Re;break}if(De<0)return this;De===0?ae.shift():q(ae,De),ae.length===1&&(Ce[K]=ae[0]),Ce.removeListener!==void 0&&this.emit("removeListener",K,ze||ie)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(K){var ie,ae,Ce;if(ae=this._events,ae===void 0)return this;if(ae.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):ae[K]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete ae[K]),this;if(arguments.length===0){var De=Object.keys(ae),Re;for(Ce=0;Ce<De.length;++Ce)Re=De[Ce],Re!=="removeListener"&&this.removeAllListeners(Re);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(ie=ae[K],typeof ie=="function")this.removeListener(K,ie);else if(ie!==void 0)for(Ce=ie.length-1;Ce>=0;Ce--)this.removeListener(K,ie[Ce]);return this};function U(le,K,ie){var ae=le._events;if(ae===void 0)return[];var Ce=ae[K];return Ce===void 0?[]:typeof Ce=="function"?ie?[Ce.listener||Ce]:[Ce]:ie?z(Ce):I(Ce,Ce.length)}u.prototype.listeners=function(K){return U(this,K,!0)},u.prototype.rawListeners=function(K){return U(this,K,!1)},u.listenerCount=function(le,K){return typeof le.listenerCount=="function"?le.listenerCount(K):V.call(le,K)},u.prototype.listenerCount=V;function V(le){var K=this._events;if(K!==void 0){var ie=K[le];if(typeof ie=="function")return 1;if(ie!==void 0)return ie.length}return 0}u.prototype.eventNames=function(){return this._eventsCount>0?s(this._events):[]};function I(le,K){for(var ie=new Array(K),ae=0;ae<K;++ae)ie[ae]=le[ae];return ie}function q(le,K){for(;K+1<le.length;K++)le[K]=le[K+1];le.pop()}function z(le){for(var K=new Array(le.length),ie=0;ie<K.length;++ie)K[ie]=le[ie].listener||le[ie];return K}function Q(le,K){return new Promise(function(ie,ae){function Ce(Re){le.removeListener(K,De),ae(Re)}function De(){typeof le.removeListener=="function"&&le.removeListener("error",Ce),ie([].slice.call(arguments))}fe(le,K,De,{once:!0}),K!=="error"&&Y(le,Ce,{once:!0})})}function Y(le,K,ie){typeof le.on=="function"&&fe(le,"error",K,ie)}function fe(le,K,ie,ae){if(typeof le.on=="function")ae.once?le.once(K,ie):le.on(K,ie);else if(typeof le.addEventListener=="function")le.addEventListener(K,function Ce(De){ae.once&&le.removeEventListener(K,Ce),ie(De)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof le)}return gl.exports}var B_=L_();function H_(){return _v()}const q_=(n,r,s)=>{var a,c,u,h;return new sh.CommunicationSignalingClient(n,r,{resourceEndpoint:(a=s?.resourceEndpoint)!==null&&a!==void 0?a:void 0,gatewayApiVersion:(c=s?.gatewayApiVersion)!==null&&c!==void 0?c:void 0,additionalPolicies:(u=s?.additionalPolicies)!==null&&u!==void 0?u:void 0,userAgentOptions:(h=s?.userAgentOptions)!==null&&h!==void 0?h:void 0})};class $_{constructor(r,s,a={}){this.endpoint=r,this.signalingClient=void 0,this.emitter=new B_.EventEmitter,this.isRealtimeNotificationsStarted=!1,this.tokenCredential=s;const c=Object.assign(Object.assign({},a),{loggingOptions:{logger:Oo.info}});this.client=new Cx(this.endpoint,Object.assign({endpoint:this.endpoint},c));const u=jx(this.tokenCredential);this.client.pipeline.addPolicy(u),this.clientOptions=Object.assign({},a),this.clientOptions.signalingClientOptions=Object.assign(Object.assign({},this.clientOptions.signalingClientOptions),{resourceEndpoint:this.endpoint,gatewayApiVersion:this.client.apiVersion}),this.signalingClient=q_(s,Oo,this.clientOptions.signalingClientOptions)}getChatThreadClient(r){return new z_(this.endpoint,r,this.tokenCredential,this.clientOptions)}async createChatThread(r,s={}){return rt.withSpan("ChatClient-CreateChatThread",s,async a=>{var c,u;a.idempotencyToken=(c=a.idempotencyToken)!==null&&c!==void 0?c:H_();const h=FN(a),p=await this.client.chat.createChatThread({topic:r.topic,participants:(u=s.participants)===null||u===void 0?void 0:u.map(m=>nx(m)),metadata:s.metadata,retentionPolicy:s.retentionPolicy},h);return YN(p)})}listChatThreadsPage(r){return ti(this,arguments,function*(a,c={}){if(!a.continuationToken){const u=yield ct(this.client.chat.listChatThreads(c));a.continuationToken=u.nextLink,u.value&&(yield yield ct(u.value))}for(;a.continuationToken;){const u=yield ct(this.client.chat.listChatThreadsNext(a.continuationToken,c));if(a.continuationToken=u.nextLink,u.value)yield yield ct(u.value);else break}})}listChatThreadsAll(r){return ti(this,arguments,function*(){var a,c,u,h;try{for(var p=!0,m=ni(this.listChatThreadsPage({},r)),g;g=yield ct(m.next()),a=g.done,!a;p=!0)h=g.value,p=!1,yield ct(yield*Tl(ni(h)))}catch(y){c={error:y}}finally{try{!p&&!a&&(u=m.return)&&(yield ct(u.call(m)))}finally{if(c)throw c.error}}})}listChatThreads(r={}){const{span:s,updatedOptions:a}=rt.startSpan("ChatClient-ListChatThreads",r);try{const c=this.listChatThreadsAll(a);return{next(){return c.next()},[Symbol.asyncIterator](){return this},byPage:(u={})=>this.listChatThreadsPage(u,a)}}catch(c){throw s.setStatus({error:c,status:"error"}),c}finally{s.end()}}async deleteChatThread(r,s={}){return rt.withSpan("ChatClient-DeleteChatThread",s,async a=>{await this.client.chat.deleteChatThread(r,a)})}async startRealtimeNotifications(){if(this.signalingClient===void 0)throw new Error("Realtime notifications are not supported in node js.");this.isRealtimeNotificationsStarted||(this.isRealtimeNotificationsStarted=!0,await this.signalingClient.start(),this.subscribeToSignalingEvents())}async stopRealtimeNotifications(){if(this.signalingClient===void 0)throw new Error("Realtime notifications are not supported in node js.");this.isRealtimeNotificationsStarted=!1,await this.signalingClient.stop(),this.emitter.removeAllListeners()}on(r,s){if(this.signalingClient===void 0)throw new Error("Realtime notifications are only supported in the browser.");if(!this.isRealtimeNotificationsStarted&&r!=="realTimeNotificationConnected"&&r!=="realTimeNotificationDisconnected")throw new Error("You must call startRealtimeNotifications before you can subscribe to events.");this.emitter.on(r,s)}off(r,s){if(this.signalingClient===void 0)throw new Error("Realtime notifications are only supported in the browser.");this.emitter.removeListener(r,s)}subscribeToSignalingEvents(){if(this.signalingClient===void 0)throw new Error("Realtime notifications are only supported in the browser.");this.signalingClient.on("connectionChanged",r=>{r===sh.ConnectionState.Connected?this.emitter.emit("realTimeNotificationConnected"):r===sh.ConnectionState.Disconnected&&this.emitter.emit("realTimeNotificationDisconnected")}),this.signalingClient.on("chatMessageReceived",r=>{this.emitter.emit("chatMessageReceived",r)}),this.signalingClient.on("chatMessageEdited",r=>{this.emitter.emit("chatMessageEdited",r)}),this.signalingClient.on("chatMessageDeleted",r=>{this.emitter.emit("chatMessageDeleted",r)}),this.signalingClient.on("typingIndicatorReceived",r=>{this.emitter.emit("typingIndicatorReceived",r)}),this.signalingClient.on("readReceiptReceived",r=>{this.emitter.emit("readReceiptReceived",r)}),this.signalingClient.on("chatThreadCreated",r=>{this.emitter.emit("chatThreadCreated",r)}),this.signalingClient.on("chatThreadDeleted",r=>{this.emitter.emit("chatThreadDeleted",r)}),this.signalingClient.on("chatThreadPropertiesUpdated",r=>{this.emitter.emit("chatThreadPropertiesUpdated",r)}),this.signalingClient.on("participantsAdded",r=>{this.emitter.emit("participantsAdded",r)}),this.signalingClient.on("participantsRemoved",r=>{this.emitter.emit("participantsRemoved",r)})}}function F_(){const{recipientId:n}=hh(),r=Kn(),[s,a]=R.useState(null),[c,u]=R.useState(null),[h,p]=R.useState(null),[m,g]=R.useState([]),[y,k]=R.useState(""),[U,V]=R.useState(!0),[I,q]=R.useState(!1),[z,Q]=R.useState(null),Y=localStorage.getItem("userId"),fe=R.useRef(null),le=R.useRef(!1),K=R.useRef(null),ie=R.useRef(null),ae=R.useRef(null),Ce=(Me,be="success")=>{Q({message:Me,type:be}),be==="success"&&setTimeout(()=>{Q(Ue=>Ue?{...Ue,hiding:!0}:null),setTimeout(()=>Q(null),300)},3e3)},De=Me=>{console.log("Real-time message event received:",Me),Me.threadId===ie.current&&Me.sender.communicationUserId!==ae.current&&g(be=>be.find(Ue=>Ue.id===Me.id)?be:[...be,{id:Me.id,sender:"Recipient",text:Me.message,timestamp:new Date}])};R.useEffect(()=>(Y&&n&&!le.current&&(le.current=!0,ze()),()=>{K.current&&(console.log("Cleaning up chat real-time notifications..."),K.current.off("chatMessageReceived",De),K.current.stopRealtimeNotifications().catch(console.error),K.current=null)}),[Y,n]),R.useEffect(()=>{Re()},[m]);const Re=()=>{fe.current?.scrollIntoView({behavior:"smooth"})},ze=async()=>{try{V(!0),console.log("Initializing chat for user:",Y,"with recipient:",n),console.log("Fetching chat token...");const Me=await qe.get("issuechattoken",{params:{userId:Y}}),{token:be,user:Ue}=Me.data;a(be),ae.current=Ue.communicationUserId,console.log("Token received for ACS ID:",Ue.communicationUserId);const W=new IN(be),M=new $_("https://acs-festive-guest.india.communication.azure.com/",W);K.current=M,u(M),console.log("Getting or creating chat thread...");const H=(await qe.post("getorcreatechatthread",{userId:Y,recipientId:n})).data.threadId;console.log("Thread ID received:",H),ie.current=H,p(H),console.log("Loading message history...");const j=M.getChatThreadClient(H).listMessages(),B=[];for await(const C of j)C.type==="text"&&B.push({id:C.id,sender:C.sender.communicationUserId===Ue.communicationUserId?"Me":"Recipient",text:C.content.message,timestamp:C.createdOn});g(B.reverse()),console.log("Starting real-time notifications..."),await M.startRealtimeNotifications(),M.on("chatMessageReceived",De),console.log("Chat initialization complete.")}catch(Me){console.error("Failed to init chat:",Me),Ce("Failed to initialize chat: "+(Me.response?.data?.error||Me.message),"error")}finally{V(!1)}},Fe=async Me=>{if(Me.preventDefault(),!!y.trim()){if(!K.current||!ie.current){Ce("Chat not fully initialized. Please wait...","error");return}try{q(!0);const be=K.current.getChatThreadClient(ie.current),Ue=y;console.log("Attempting to send message to ACS...");const W=await be.sendMessage({content:Ue});console.log("Message sent successfully. ID:",W.id),k(""),g(M=>M.find(J=>J.id===W.id)?M:[...M,{id:W.id,sender:"Me",text:Ue,timestamp:new Date}])}catch(be){console.error("Failed to send message:",be),Ce("Failed to send message: "+be.message,"error")}finally{q(!1)}}};return U?i.jsxs("div",{className:"container",style:{textAlign:"center",padding:"5rem"},children:[i.jsx("div",{className:"spinner"}),i.jsx("p",{children:"Initializing secure chat..."})]}):i.jsxs("div",{className:"modern-chat-page",children:[z&&i.jsx("div",{className:"toast-container",children:i.jsxs("div",{className:`toast ${z.type} ${z.hiding?"hiding":""}`,children:[i.jsx("span",{className:"toast-icon",children:z.type==="success"?"":z.type==="error"?"":""}),i.jsx("div",{className:"toast-content",children:i.jsx("p",{className:"toast-message",children:z.message})}),z.type!=="success"&&i.jsx("button",{onClick:()=>Q(null),style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.5rem"},children:""})]})}),i.jsxs("div",{className:"chat-window-full",children:[i.jsx("div",{className:"chat-header-full",children:i.jsxs("div",{className:"chat-user-info-full",children:[i.jsx("button",{onClick:()=>r(-1),className:"back-btn-modern",title:"Go Back",children:i.jsx(yh,{size:20})}),i.jsx("div",{className:"user-avatar",children:""}),i.jsxs("div",{className:"user-details",children:[i.jsx("h3",{children:"Secure Chat"}),i.jsx("span",{className:"user-status",children:" Online"})]})]})}),i.jsxs("div",{className:"chat-messages",children:[m.map((Me,be)=>i.jsxs("div",{className:`message-bubble ${Me.sender==="Me"?"sent":"received"}`,children:[i.jsx("div",{className:"message-content",children:Me.text}),i.jsx("div",{className:"message-time",children:new Date(Me.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},Me.id||be)),i.jsx("div",{ref:fe})]}),i.jsxs("form",{onSubmit:Fe,className:"chat-input",children:[i.jsx("input",{type:"text",value:y,onChange:Me=>k(Me.target.value),placeholder:"Type a message...",className:"message-input"}),i.jsx("button",{type:"submit",className:"send-btn",disabled:I,children:I?i.jsx("span",{className:"spinner-small"}):i.jsx(Io,{size:20})})]})]})]})}const V_=()=>{const[n,r]=R.useState([]),[s,a]=R.useState(null),[c,u]=R.useState([]),[h,p]=R.useState(""),[m,g]=R.useState(!1),[y,k]=R.useState(!1),[U,V]=R.useState(!1),[I,q]=R.useState(null),Q=(()=>{const Re=localStorage.getItem("userId");if(Re)return Re;try{const ze=JSON.parse(localStorage.getItem("user")||"{}");return ze.userId||ze.id}catch{return null}})(),Y=R.useRef(null);R.useEffect(()=>{le()},[]),R.useEffect(()=>{Y.current?.scrollIntoView({behavior:"auto"})},[c]);const fe=async Re=>{try{const ze=await qe.post("user/public-profile",{userId:Re});q(ze.data)}catch(ze){console.error("Failed to fetch profile:",ze)}},le=async()=>{try{g(!0);const ze=((await qe.get("chat/conversations")).data||[]).map(Fe=>({...Fe,otherUserName:Fe.otherUserName||"Unknown User",lastMessage:Fe.lastMessage||"",timestamp:Fe.timestamp||new Date().toISOString(),unreadCount:Fe.unreadCount||0}));r(ze)}catch(Re){console.error("Failed to fetch conversations:",Re)}finally{g(!1)}},K=async Re=>{if(a(Re),u([]),!Re.otherUserId){console.error("No otherUserId in conversation:",Re);return}await ie(Re.otherUserId),V(!0)},ie=async Re=>{try{const ze=await qe.get(`chat/messages/${Re}`);if(!ze.data||!Array.isArray(ze.data)){u([]);return}const Fe=ze.data.map(Me=>({id:Me.id,sender:Me.senderId===Q?"Me":"Recipient",text:Me.message||"",timestamp:new Date(Me.timestamp),status:Me.status||"sent"}));u(Fe)}catch(ze){console.error("Failed to load messages:",ze),u([])}},ae=()=>{V(!1),a(null)},Ce=async Re=>{if(Re.preventDefault(),!(!h.trim()||!s))try{k(!0);const ze=h;p(""),u(Me=>[...Me,{id:Date.now(),sender:"Me",text:ze,timestamp:new Date,status:"Sent"}]);const Fe=await qe.post("chat/send",{recipientId:s.otherUserId,message:ze});le()}catch(ze){console.error("Failed to send message:",ze)}finally{k(!1)}},De=Re=>{const ze=new Date(Re),Me=new Date-ze;return Math.floor(Me/(1e3*60*60))<24?ze.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):ze.toLocaleDateString([],{month:"short",day:"numeric"})};return i.jsxs("div",{className:"chats-container",children:[i.jsxs("div",{className:`conversations-sidebar ${U?"mobile-hidden":""}`,children:[i.jsx("div",{className:"sidebar-header",children:i.jsx("h3",{children:" Messages"})}),i.jsx("div",{className:"conversations-list",children:m?i.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:"Loading..."}):n.length===0?i.jsx("div",{className:"no-conversations",children:i.jsx("p",{children:"No conversations yet"})}):n.map(Re=>i.jsxs("div",{className:`conversation-item ${s?.otherUserId===Re.otherUserId?"active":""}`,onClick:()=>K(Re),children:[i.jsx("div",{className:"conversation-avatar",children:i.jsx(or,{src:Re.profileImageUrl,alt:Re.otherUserName,style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"},fallbackText:"User"})}),i.jsxs("div",{className:"conversation-content",children:[i.jsxs("div",{className:"conversation-header",children:[i.jsx("div",{className:"conversation-name",children:Re.otherUserName||"Unknown User"}),i.jsx("div",{className:"conversation-time",children:De(Re.timestamp)})]}),i.jsxs("div",{className:"conversation-preview",children:[Re.lastSenderId===Q?"You: ":"",Re.lastMessage||"Start chatting"]})]}),Re.unreadCount>0&&i.jsx("div",{style:{minWidth:"20px",height:"20px",borderRadius:"10px",background:"#6366f1",color:"white",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 6px"},children:Re.unreadCount})]},Re.chatRoom))})]}),i.jsx("div",{className:`chat-window ${U?"mobile-visible":""}`,children:s?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"chat-header",children:[i.jsx("button",{className:"mobile-back-btn",onClick:ae,children:i.jsx(yh,{size:20})}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[i.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#e2e8f0",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",cursor:"pointer"},onClick:()=>fe(s.otherUserId),children:i.jsx(or,{src:s.profileImageUrl,alt:s.otherUserName,style:{width:"100%",height:"100%",objectFit:"cover"},fallbackText:"User"})}),i.jsx("h4",{style:{margin:0,cursor:"pointer"},onClick:()=>fe(s.otherUserId),children:s.otherUserName})]})]}),i.jsxs("div",{className:"chat-messages",children:[c.map((Re,ze)=>i.jsxs("div",{className:`message ${Re.sender==="Me"?"sent":"received"}`,children:[i.jsx("div",{className:"message-content",children:Re.text}),i.jsxs("div",{className:"message-time",children:[new Date(Re.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Re.sender==="Me"&&Re.status&&i.jsxs("span",{style:{marginLeft:"4px",fontSize:"10px"},children:[" ",Re.status]})]})]},Re.id||ze)),i.jsx("div",{ref:Y})]}),i.jsxs("form",{onSubmit:Ce,className:"chat-input",children:[i.jsx("input",{type:"text",value:h,onChange:Re=>p(Re.target.value),placeholder:"Type a message...",className:"message-input"}),i.jsx("button",{type:"submit",className:"send-btn",disabled:y,children:i.jsx(Io,{size:16})})]})]}):i.jsxs("div",{className:"no-chat-selected",children:[i.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),i.jsx("h3",{children:"Select a conversation"}),i.jsx("p",{children:"Choose a conversation from the list to start chatting"})]})}),I&&i.jsx("div",{className:"modal-overlay",onClick:()=>q(null),children:i.jsxs("div",{className:"modal-content",onClick:Re=>Re.stopPropagation(),style:{maxHeight:"90vh",overflowY:"auto"},children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h3",{children:I.name}),i.jsx("button",{onClick:()=>q(null),className:"modal-close",children:""})]}),i.jsxs("div",{className:"modal-body",children:[i.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",alignItems:"flex-start"},children:[i.jsx(or,{src:I.profileImageUrl,alt:I.name,className:"modal-profile-image",fallbackText:"Profile",style:{flexShrink:0,width:"100px",height:"100px"}}),i.jsxs("div",{style:{flex:1},children:[i.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1.25rem"},children:I.name}),i.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:i.jsxs("span",{style:{color:"#64748b"},children:[" ",I.location]})}),i.jsxs("p",{style:{color:"#64748b",fontSize:"0.9rem",margin:"0"},children:[I.userType,"  Joined ",new Date(I.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"})]})]})]}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("h4",{style:{marginBottom:"0.75rem",color:"var(--text)"},children:I.userType==="Host"?" About My Hosting":" About Me"}),i.jsx("p",{style:{color:"#475569",lineHeight:"1.5",background:"#f8fafc",padding:"1rem",borderRadius:"0.5rem",margin:"0"},children:I.bio||"No description provided."})]})]})]})})]})},W_=({status:n})=>{const{t:r}=Er(),s={free:{text:r("freeBadge"),color:"#64748b",bg:"#f1f5f9"},pending:{text:r("pendingBadge"),color:"#f59e0b",bg:"#fef3c7"},paid:{text:r("premiumBadge"),color:"#10b981",bg:"#dcfce7"}},a=s[n]||s.free;return i.jsx("span",{style:{fontWeight:"600",color:a.color,padding:"0.25rem 0.75rem",borderRadius:"1rem",background:a.bg,fontSize:"0.85rem",display:"inline-block"},children:a.text})};function G_(){const[n,r]=R.useState([]),[s,a]=R.useState([]),[c,u]=R.useState(!0),[h,p]=R.useState(!1),[m,g]=R.useState(""),[y,k]=R.useState(!1),[U,V]=R.useState("subscriptions"),[I,q]=R.useState({}),[z,Q]=R.useState(!1),[Y,fe]=R.useState("all"),[le,K]=R.useState("all"),[ie,ae]=R.useState("createdDate"),[Ce,De]=R.useState("desc"),[Re,ze]=R.useState({}),[Fe,Me]=R.useState(!1),[be,Ue]=R.useState(""),[W,M]=R.useState("");R.useEffect(()=>{(U==="subscriptions"||U==="payments")&&(j(),B()),U==="locations"&&J()},[U]);const J=async()=>{Q(!0);try{const b=await qe.get("location/states-with-cities");q(b.data||{})}catch(b){console.error("Failed to fetch locations:",b),q({})}finally{Q(!1)}},H=async()=>{if(!W.trim()){alert("Please enter a city name");return}Q(!0);try{await qe.post("location/add",{state:be,city:W.trim()}),alert("City added successfully!"),Me(!1),M(""),J()}catch(b){alert("Failed to add city: "+b.message),Q(!1)}},ee=async(b,E)=>{if(confirm(`Delete ${E}, ${b}?`)){Q(!0);try{await qe.delete(`location/delete?state=${encodeURIComponent(b)}&city=${encodeURIComponent(E)}`),alert("Location deleted successfully!"),J()}catch(A){alert("Failed to delete location: "+A.message),Q(!1)}}},j=async()=>{u(!0);try{const b=await qe.get("admin/listpayments");r(b.data)}catch(b){console.error("Failed to fetch payments:",b)}finally{u(!1)}},B=async()=>{u(!0);try{const b=await qe.get("admin/users");a(b.data||[])}catch(b){console.error("Failed to fetch users:",b)}finally{u(!1)}},C=async(b,E)=>{const v={approve:"paid",reject:"free",revoke:"free",pending:"pending"}[E]||E;u(!0);try{await qe.post("subscription/update",{userId:b,subscriptionStatus:v,paymentVerifiedTimestamp:v==="paid"?new Date().toISOString():null}),alert(`Subscription updated to ${v}!`),B()}catch(S){console.error("Subscription action error:",S),alert("Failed to update subscription: "+S.message),u(!1)}},T=async(b,E)=>{try{await qe.post("verifypayment",{paymentId:b,userId:E}),alert("Payment verified and user updated!"),j()}catch(A){alert("Verification failed: "+A.message)}};return i.jsxs("div",{className:"admin-container",style:{maxWidth:"1200px",margin:"0 auto",padding:"2rem"},children:[i.jsx("h2",{style:{marginBottom:"2rem"},children:"Admin Dashboard"}),i.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"2rem",borderBottom:"2px solid #e2e8f0"},children:[i.jsx("button",{onClick:()=>V("subscriptions"),style:{padding:"0.75rem 1.5rem",background:"none",border:"none",borderBottom:U==="subscriptions"?"3px solid #667eea":"none",color:U==="subscriptions"?"#667eea":"#64748b",fontWeight:U==="subscriptions"?"bold":"normal",cursor:"pointer",fontSize:"1rem"},children:"Subscription Management"}),i.jsx("button",{onClick:()=>V("payments"),style:{padding:"0.75rem 1.5rem",background:"none",border:"none",borderBottom:U==="payments"?"3px solid #667eea":"none",color:U==="payments"?"#667eea":"#64748b",fontWeight:U==="payments"?"bold":"normal",cursor:"pointer",fontSize:"1rem"},children:"Payment Verification"}),i.jsx("button",{onClick:()=>V("locations"),style:{padding:"0.75rem 1.5rem",background:"none",border:"none",borderBottom:U==="locations"?"3px solid #667eea":"none",color:U==="locations"?"#667eea":"#64748b",fontWeight:U==="locations"?"bold":"normal",cursor:"pointer",fontSize:"1rem"},children:"Location Management"})]}),U==="subscriptions"&&i.jsxs("div",{className:"admin-section",style:{minHeight:"400px"},children:[i.jsx("h3",{style:{marginBottom:"1rem"},children:"User Subscriptions"}),i.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",padding:"1rem",background:"#f8fafc",borderRadius:"0.5rem"},children:[i.jsxs("div",{style:{flex:1},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",fontSize:"0.875rem",color:"#475569"},children:"Role"}),i.jsxs("select",{value:Y,onChange:b=>fe(b.target.value),style:{width:"100%",padding:"0.625rem 0.75rem",border:"1px solid #cbd5e1",borderRadius:"0.375rem",background:"white",fontSize:"0.875rem",cursor:"pointer",outline:"none"},children:[i.jsx("option",{value:"all",children:"All Roles"}),i.jsx("option",{value:"Guest",children:"Guest"}),i.jsx("option",{value:"Host",children:"Host"})]})]}),i.jsxs("div",{style:{flex:1},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",fontSize:"0.875rem",color:"#475569"},children:"Status"}),i.jsxs("select",{value:le,onChange:b=>K(b.target.value),style:{width:"100%",padding:"0.625rem 0.75rem",border:"1px solid #cbd5e1",borderRadius:"0.375rem",background:"white",fontSize:"0.875rem",cursor:"pointer",outline:"none"},children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"free",children:"Free"}),i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"paid",children:"Paid"})]})]}),i.jsxs("div",{style:{flex:1},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",fontSize:"0.875rem",color:"#475569"},children:"Sort By"}),i.jsxs("select",{value:ie,onChange:b=>ae(b.target.value),style:{width:"100%",padding:"0.625rem 0.75rem",border:"1px solid #cbd5e1",borderRadius:"0.375rem",background:"white",fontSize:"0.875rem",cursor:"pointer",outline:"none"},children:[i.jsx("option",{value:"name",children:"Name"}),i.jsx("option",{value:"email",children:"Email"}),i.jsx("option",{value:"role",children:"Role"}),i.jsx("option",{value:"status",children:"Status"}),i.jsx("option",{value:"createdDate",children:"Created Date"}),i.jsx("option",{value:"referrals",children:"Referrals"}),i.jsx("option",{value:"points",children:"Points"})]})]}),i.jsxs("div",{style:{flex:1},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",fontSize:"0.875rem",color:"#475569"},children:"Order"}),i.jsxs("select",{value:Ce,onChange:b=>De(b.target.value),style:{width:"100%",padding:"0.625rem 0.75rem",border:"1px solid #cbd5e1",borderRadius:"0.375rem",background:"white",fontSize:"0.875rem",cursor:"pointer",outline:"none"},children:[i.jsx("option",{value:"asc",children:"Ascending"}),i.jsx("option",{value:"desc",children:"Descending"})]})]})]}),i.jsx("div",{style:{overflowX:"auto"},children:i.jsxs("table",{className:"admin-table",style:{width:"100%",borderCollapse:"collapse"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{background:"#f8fafc",borderBottom:"2px solid #e2e8f0"},children:[i.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Name"}),i.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Email"}),i.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Role"}),i.jsx("th",{style:{padding:"1rem",textAlign:"center"},children:"Referrals"}),i.jsx("th",{style:{padding:"1rem",textAlign:"center"},children:"Points"}),i.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Created Date"}),i.jsx("th",{style:{padding:"1rem",textAlign:"center"},children:"Status"}),i.jsx("th",{style:{padding:"1rem",textAlign:"center"},children:"Actions"})]})}),i.jsx("tbody",{children:c?i.jsx("tr",{children:i.jsxs("td",{colSpan:"8",style:{textAlign:"center",padding:"3rem"},children:[i.jsx("div",{style:{display:"inline-block",width:"40px",height:"40px",border:"4px solid #f3f4f6",borderTop:"4px solid #667eea",borderRadius:"50%",animation:"spin 1s linear infinite"}}),i.jsx("p",{style:{marginTop:"1rem",color:"#64748b"},children:"Loading users..."})]})}):s.filter(b=>!(Y!=="all"&&b.userType!==Y||le!=="all"&&(b.subscriptionStatus||"free")!==le)).sort((b,E)=>{let A,v;return ie==="name"?(A=b.name?.toLowerCase()||"",v=E.name?.toLowerCase()||""):ie==="email"?(A=b.email?.toLowerCase()||"",v=E.email?.toLowerCase()||""):ie==="role"?(A=b.userType||"",v=E.userType||""):ie==="status"?(A=b.subscriptionStatus||"free",v=E.subscriptionStatus||"free"):ie==="createdDate"?(A=new Date(b.createdDate||0).getTime(),v=new Date(E.createdDate||0).getTime()):ie==="referrals"?(A=b.successfulReferrals||0,v=E.successfulReferrals||0):ie==="points"&&(A=b.referralPoints||0,v=E.referralPoints||0),Ce==="asc"?A>v?1:-1:A<v?1:-1}).length>0?s.filter(b=>!(Y!=="all"&&b.userType!==Y||le!=="all"&&(b.subscriptionStatus||"free")!==le)).sort((b,E)=>{let A,v;return ie==="name"?(A=b.name?.toLowerCase()||"",v=E.name?.toLowerCase()||""):ie==="email"?(A=b.email?.toLowerCase()||"",v=E.email?.toLowerCase()||""):ie==="role"?(A=b.userType||"",v=E.userType||""):ie==="status"?(A=b.subscriptionStatus||"free",v=E.subscriptionStatus||"free"):ie==="createdDate"?(A=new Date(b.createdDate||0).getTime(),v=new Date(E.createdDate||0).getTime()):ie==="referrals"?(A=b.successfulReferrals||0,v=E.successfulReferrals||0):ie==="points"&&(A=b.referralPoints||0,v=E.referralPoints||0),Ce==="asc"?A>v?1:-1:A<v?1:-1}).map(b=>i.jsxs("tr",{style:{borderBottom:"1px solid #e2e8f0"},children:[i.jsx("td",{style:{padding:"1rem"},children:b.name}),i.jsx("td",{style:{padding:"1rem"},children:b.email}),i.jsx("td",{style:{padding:"1rem"},children:b.userType}),i.jsx("td",{style:{padding:"1rem",textAlign:"center",fontWeight:"600",color:"#667eea"},children:b.successfulReferrals||0}),i.jsx("td",{style:{padding:"1rem",textAlign:"center",fontWeight:"600",color:"#10b981"},children:b.referralPoints||0}),i.jsx("td",{style:{padding:"1rem",fontSize:"0.875rem",color:"#64748b"},children:b.createdDate?new Date(b.createdDate).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"-"}),i.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:i.jsx(W_,{status:b.subscriptionStatus||"free"})}),i.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:i.jsxs("select",{value:b.subscriptionStatus||"free",onChange:E=>C(b.userId,E.target.value==="paid"?"approve":E.target.value==="pending"?"pending":"reject"),style:{padding:"0.5rem 0.75rem",border:"1px solid #cbd5e1",borderRadius:"0.375rem",cursor:"pointer",fontWeight:"600",fontSize:"0.875rem",outline:"none",background:b.subscriptionStatus==="paid"?"#d1fae5":b.subscriptionStatus==="pending"?"#fef3c7":"#f3f4f6",color:b.subscriptionStatus==="paid"?"#065f46":b.subscriptionStatus==="pending"?"#92400e":"#374151"},children:[i.jsx("option",{value:"free",children:"Free"}),i.jsx("option",{value:"pending",children:"Pending"}),i.jsx("option",{value:"paid",children:"Paid"})]})})]},b.userId)):i.jsx("tr",{children:i.jsx("td",{colSpan:"8",style:{textAlign:"center",padding:"2rem",color:"#64748b"},children:"No users found"})})})]})})]},"subscriptions"),U==="payments"&&i.jsxs("div",{className:"admin-section",style:{minHeight:"400px"},children:[i.jsx("h3",{style:{marginBottom:"1rem"},children:"Payment Verification"}),i.jsx("p",{style:{marginBottom:"1.5rem",color:"#64748b"},children:"Review and verify user payment submissions for subscription upgrades."}),c?i.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[i.jsx("div",{style:{display:"inline-block",width:"40px",height:"40px",border:"4px solid #f3f4f6",borderTop:"4px solid #667eea",borderRadius:"50%",animation:"spin 1s linear infinite"}}),i.jsx("p",{style:{marginTop:"1rem",color:"#64748b"},children:"Loading payments..."})]}):n.length===0?i.jsxs("div",{style:{textAlign:"center",padding:"3rem",background:"#f8fafc",borderRadius:"0.5rem",border:"1px solid #e2e8f0"},children:[i.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),i.jsx("h4",{style:{marginBottom:"0.5rem",color:"#1e293b"},children:"No Pending Payments"}),i.jsx("p",{style:{color:"#64748b",margin:0},children:"All payment submissions have been processed. New submissions will appear here."})]}):i.jsx("div",{style:{overflowX:"auto"},children:i.jsxs("table",{className:"admin-table",style:{width:"100%",borderCollapse:"collapse"},children:[i.jsx("thead",{children:i.jsxs("tr",{style:{background:"#f8fafc",borderBottom:"2px solid #e2e8f0"},children:[i.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"User ID"}),i.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Type"}),i.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"UPI Ref"}),i.jsx("th",{style:{padding:"1rem",textAlign:"left"},children:"Amount"}),i.jsx("th",{style:{padding:"1rem",textAlign:"center"},children:"Action"})]})}),i.jsx("tbody",{children:n.length>0?n.map(b=>i.jsxs("tr",{style:{borderBottom:"1px solid #e2e8f0"},children:[i.jsx("td",{style:{padding:"1rem"},children:b.partitionKey}),i.jsx("td",{style:{padding:"1rem"},children:b.type}),i.jsx("td",{style:{padding:"1rem"},children:b.upiRef}),i.jsxs("td",{style:{padding:"1rem"},children:["",b.amount]}),i.jsx("td",{style:{padding:"1rem",textAlign:"center"},children:i.jsx("button",{onClick:()=>T(b.rowKey,b.partitionKey),style:{padding:"0.5rem 1rem",background:"#10b981",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem"},children:"Verify"})})]},b.rowKey)):i.jsx("tr",{children:i.jsx("td",{colSpan:"5",style:{textAlign:"center",padding:"2rem",color:"#64748b"},children:"No pending payments"})})})]})})]},"payments"),U==="locations"&&i.jsxs("div",{className:"admin-section",style:{minHeight:"400px"},children:[i.jsx("h3",{style:{marginBottom:"1.5rem"},children:"Location Management"}),z?i.jsxs("div",{style:{textAlign:"center",padding:"3rem"},children:[i.jsx("div",{style:{display:"inline-block",width:"40px",height:"40px",border:"4px solid #f3f4f6",borderTop:"4px solid #667eea",borderRadius:"50%",animation:"spin 1s linear infinite"}}),i.jsx("p",{style:{marginTop:"1rem",color:"#64748b"},children:"Loading locations..."})]}):Object.keys(I).length===0?i.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#64748b",background:"#f8fafc",borderRadius:"0.5rem"},children:i.jsx("p",{children:"No locations found."})}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:Object.keys(I).sort().map(b=>i.jsxs("div",{style:{border:"1px solid #e2e8f0",borderRadius:"0.5rem",overflow:"hidden"},children:[i.jsxs("button",{onClick:()=>ze(E=>({...E,[b]:!E[b]})),style:{width:"100%",padding:"1rem",background:"#f8fafc",border:"none",textAlign:"left",cursor:"pointer",fontWeight:"600",fontSize:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[i.jsxs("span",{children:[" ",b," (",I[b].length,")"]}),i.jsx("span",{children:Re[b]?"":""})]}),Re[b]&&i.jsxs("div",{style:{padding:"1rem",background:"white",display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:[[...I[b]].sort().map(E=>i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",background:"#f8fafc",borderRadius:"0.375rem",border:"1px solid #e2e8f0"},children:[i.jsx("span",{children:E}),i.jsx("button",{onClick:()=>ee(b,E),style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",padding:"0.25rem",fontSize:"1.2rem",lineHeight:1},children:""})]},E)),i.jsx("button",{onClick:()=>{Ue(b),Me(!0)},style:{padding:"0.5rem 1rem",background:"#10b981",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600"},children:"+ Add City"})]})]},b))})]},"locations"),Fe&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>Me(!1),children:i.jsxs("div",{style:{background:"white",padding:"2rem",borderRadius:"0.5rem",minWidth:"400px"},onClick:b=>b.stopPropagation(),children:[i.jsxs("h3",{style:{marginBottom:"1.5rem"},children:["Add City to ",be]}),i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"State"}),i.jsx("input",{type:"text",value:be,disabled:!0,style:{width:"100%",padding:"0.5rem",border:"1px solid #e2e8f0",borderRadius:"0.375rem",background:"#f8fafc",color:"#64748b"}})]}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"City Name"}),i.jsx("input",{type:"text",value:W,onChange:b=>M(b.target.value),placeholder:"Enter city name",style:{width:"100%",padding:"0.5rem",border:"1px solid #e2e8f0",borderRadius:"0.375rem"},onKeyPress:b=>b.key==="Enter"&&H()})]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:[i.jsx("button",{onClick:()=>{Me(!1),M("")},style:{padding:"0.5rem 1rem",background:"#e2e8f0",border:"none",borderRadius:"0.375rem",cursor:"pointer"},children:"Cancel"}),i.jsx("button",{onClick:H,disabled:z,style:{padding:"0.5rem 1rem",background:"#10b981",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",fontWeight:"600"},children:z?"Adding...":"Add City"})]})]})})]})}function Y_(){const{t:n}=Er(),[r,s]=R.useState(null),[a,c]=R.useState("free"),[u,h]=R.useState(0),[p,m]=R.useState(null),[g,y]=R.useState(""),[k,U]=R.useState(!1),[V,I]=R.useState(""),[q,z]=R.useState(!1),[Q,Y]=R.useState(!1),[fe,le]=R.useState(!1),[K,ie]=R.useState(""),[ae,Ce]=R.useState(""),[De,Re]=R.useState(""),[ze,Fe]=R.useState(!1),[Me,be]=R.useState(!1),[Ue,W]=R.useState(!1),[M,J]=R.useState(""),[H,ee]=R.useState(0),[j,B]=R.useState(!1),[C,T]=R.useState({bio:"",hostingAreas:[]}),[b,E]=R.useState(!1),[A,v]=R.useState(""),[S,N]=R.useState(null),F=q1.useRef(null),te=[{label:n("atLeast8Chars"),test:G=>G.length>=8},{label:n("oneUppercase"),test:G=>/[A-Z]/.test(G)},{label:n("oneLowercase"),test:G=>/[a-z]/.test(G)},{label:n("oneNumber"),test:G=>/\d/.test(G)},{label:n("oneSpecialChar"),test:G=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(G)}];R.useEffect(()=>{localStorage.getItem("userId")&&X(),Wo.getLocations().then(je=>N(je)).catch(je=>console.error("Failed to load locations:",je))},[]);const X=async()=>{try{const G=await qe.get("user/profile");console.log("DEBUG: Full API response:",G);let je=G.data;console.log("DEBUG: Fetched user data:",je),console.log("DEBUG: HostingAreas:",je.hostingAreas);const Ne=JSON.parse(localStorage.getItem("user")),xe={...je,token:Ne?.token,role:je.userType||Ne?.role};s(xe),c(je.subscriptionStatus||"free"),h(je.successfulReferrals||0),localStorage.setItem("user",JSON.stringify(xe)),T({bio:xe.bio||"",hostingAreas:xe.hostingAreas||[]}),I(xe.referralCode||"Loading..."),window.dispatchEvent(new Event("storage"))}catch{console.error("User not found")}},$=G=>{const je=G.target.files[0];je&&(m(je),y(URL.createObjectURL(je)))},de=async()=>{if(!p||!r){alert("Please select a file and ensure your profile is loaded before uploading.");return}try{console.log("Step 1: Compressing image...");const G=await he(p);console.log("Step 2: Getting SAS token from API...");const je=await qe.get("user/upload-sas-token");console.log("SAS token response:",je.data);const{sasUrl:Ne}=je.data;console.log("Step 3: Uploading to blob storage...",Ne);const xe=await fetch(Ne,{method:"PUT",headers:{"x-ms-blob-type":"BlockBlob","Content-Type":"image/jpeg"},body:G});if(console.log("Upload response status:",xe.status),!xe.ok)throw new Error(`Upload failed: ${xe.status} ${xe.statusText}`);console.log("Step 4: Confirming upload with API...");const ne=Ne.split("?")[0];await qe.post("user/confirm-upload",{imageUrl:ne}),alert("Profile image uploaded successfully!"),m(null),y(""),U(!1),await X()}catch(G){console.error("Upload failed:",G),console.error("Error details:",G.response?.data),alert("Image upload failed: "+(G.response?.data?.error||G.message))}},he=G=>new Promise(je=>{const Ne=document.createElement("canvas"),xe=Ne.getContext("2d"),ne=new Image;ne.onload=()=>{let{width:Te,height:ke}=ne;const O=800;Te>ke?Te>O&&(ke=ke*O/Te,Te=O):ke>O&&(Te=Te*O/ke,ke=O),Ne.width=Te,Ne.height=ke,xe.drawImage(ne,0,0,Te,ke),Ne.toBlob(w=>{je(w)},"image/jpeg",.8)},ne.src=URL.createObjectURL(G)}),ce=async()=>{if(!C.bio||C.bio.trim().length<10){v("Bio must be at least 10 characters"),setTimeout(()=>F.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100);return}E(!0),v("");try{const G=r.userType==="Host"?{bio:C.bio,hostingAreas:C.hostingAreas.length>0?JSON.stringify(C.hostingAreas.filter(Ne=>Ne.cities.length>0)):""}:{bio:C.bio};(await qe.put("user/profile",G)).data.success&&(v(" Profile updated successfully!"),setTimeout(()=>F.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100),await X())}catch(G){const je=G.response?.data?.message||G.message;v(je),setTimeout(()=>F.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100)}finally{E(!1)}},se=async()=>{if(!K||!ae||!De){J("Please fill all password fields");return}if(!te.every(je=>je.test(ae))){J("New password must meet all requirements");return}if(ae!==De){J("New passwords do not match");return}W(!0),J("");try{if((await qe.post("auth/change-password",{currentPassword:K,newPassword:ae})).data.success){J(" Password changed successfully!"),ee(5);const Ne=setInterval(()=>{ee(xe=>xe<=1?(clearInterval(Ne),le(!1),ie(""),Ce(""),Re(""),J(""),ee(0),0):xe-1)},1e3)}}catch(je){const Ne=je.response?.data?.message||je.message;J(Ne)}finally{W(!1)}};return r?i.jsxs("div",{className:"profile-container",children:[i.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[i.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[" ",n("myProfile")]}),i.jsx("p",{style:{color:"#64748b",margin:"0 0 1rem 0"},children:n("viewProfileInfo")}),(a==="paid"||u>=3)&&i.jsxs("button",{onClick:()=>B(!0),className:"btn btn-primary",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Sl,{size:16}),n("editProfile")]}),a!=="paid"&&u<3&&i.jsxs("p",{style:{color:"#f59e0b",fontSize:"0.9rem",marginTop:"0.5rem"},children:[" ",n("upgradeToPremium")," (",u,"/3 ",n("referrals"),")"]})]}),i.jsxs("div",{className:"profile-card",children:[i.jsxs("div",{className:"profile-image-section",children:[i.jsx(or,{src:g||r.profileImageUrl,alt:"Profile",className:"profile-img-preview",fallbackText:"Profile"}),i.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexDirection:"column",gap:"0.4rem",alignItems:"center"},children:k?i.jsxs(i.Fragment,{children:[i.jsxs("label",{htmlFor:"file-input",className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.3rem",cursor:"pointer",padding:"0.4rem 0.8rem",fontSize:"0.875rem"},children:[" ",n("chooseFile")]}),i.jsx("input",{id:"file-input",type:"file",accept:"image/*",onChange:$,style:{display:"none"}}),i.jsxs("button",{className:"btn btn-primary",onClick:de,disabled:!p,style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.4rem 0.8rem",fontSize:"0.875rem"},children:[i.jsx(Nj,{size:14})," ",n("upload")]}),i.jsxs("button",{className:"btn btn-secondary",onClick:()=>{U(!1),m(null),y("")},style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.4rem 0.8rem",fontSize:"0.875rem"},children:[i.jsx(xh,{size:14})," ",n("cancel")]})]}):i.jsxs("button",{className:"btn btn-secondary",onClick:()=>U(!0),style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.4rem 0.8rem",fontSize:"0.875rem"},children:[i.jsx(Sl,{size:14})," ",n("editPhoto")]})}),i.jsx("p",{style:{color:"#64748b",fontSize:"0.875rem",textAlign:"center"},children:n("uploadProfilePhoto")})]}),i.jsx("div",{className:"profile-details",children:i.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[i.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #3b82f6"},children:i.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsxs("strong",{children:[" ",n("email"),":"]})," ",r.email]})}),i.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #ef4444"},children:i.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsxs("strong",{children:[" ",n("phone"),":"]})," ",r.phone]})}),i.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #6366f1"},children:i.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsxs("strong",{children:[" ",n("name"),":"]})," ",r.name]})}),i.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #10b981"},children:i.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsxs("strong",{children:[" ",n("role"),":"]})," ",r.userType==="Host"?` ${n("host")}`:` ${n("guest")}`]})}),i.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #f59e0b"},children:i.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsxs("strong",{children:[" ",n("location"),":"]})," ",r.location]})}),i.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #ec4899"},children:i.jsxs("p",{style:{margin:"0",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[i.jsx("strong",{children:r.userType==="Host"?` ${n("myOfferings")}:`:` ${n("myFestivalWishes")}:`}),i.jsx("span",{style:{color:"#475569",fontSize:"0.95rem",lineHeight:"1.5"},children:r.bio||n("notSpecified")})]})}),console.log("DEBUG: Checking hosting areas display:",{userType:r.userType,hostingAreas:r.hostingAreas,hasAreas:r.hostingAreas&&r.hostingAreas.length>0}),r.userType==="Host"&&i.jsxs("div",{style:{padding:"1rem",background:"#f0fdf4",borderRadius:"0.75rem",borderLeft:"4px solid #16a34a"},children:[i.jsxs("p",{style:{margin:"0 0 0.75rem 0",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:"bold"},children:[" ",n("myHostingAreas"),":"]}),r.hostingAreas&&r.hostingAreas.length>0?r.hostingAreas.filter(G=>G.state&&G.state.trim()!==""&&G.cities&&G.cities.length>0).length>0?i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:r.hostingAreas.filter(G=>G.state&&G.state.trim()!==""&&G.cities&&G.cities.length>0).map((G,je)=>i.jsxs("div",{style:{color:"#15803d",fontSize:"0.9rem",lineHeight:"1.4"},children:[i.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.25rem"},children:G.state}),i.jsx("div",{style:{paddingLeft:"1rem",fontSize:"0.85rem"},children:G.cities.join(", ")})]},`${G.state}-${je}`))}):i.jsx("div",{style:{color:"#64748b",fontSize:"0.9rem",fontStyle:"italic",lineHeight:"1.4"},children:n("noHostingAreas")}):i.jsx("div",{style:{color:"#64748b",fontSize:"0.9rem",fontStyle:"italic",lineHeight:"1.4"},children:n("noHostingAreas")})]}),i.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #f59e0b"},children:i.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsxs("strong",{children:[" ",n("status"),":"]}),i.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.875rem",background:r.status==="Active"?"#dcfce7":"#fef3c7",color:r.status==="Active"?"#166534":"#92400e"},children:r.status})]})}),i.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #8b5cf6"},children:i.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsxs("strong",{children:[" ",n("contactEnabled"),":"]}),i.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.875rem",background:r.isVerified?"#dcfce7":"#fee2e2",color:r.isVerified?"#166534":"#dc2626"},children:r.isVerified?` ${n("yes")}`:` ${n("no")}`})]})})]})})]}),i.jsxs("div",{style:{marginTop:"2rem",background:"var(--surface)",padding:"2rem",borderRadius:"var(--radius)",boxShadow:"var(--shadow)",border:"1px solid var(--border)",textAlign:"center"},children:[i.jsxs("h3",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[i.jsx(xl,{size:24,style:{color:"var(--primary)"}}),n("security")]}),i.jsx("p",{style:{color:"#64748b",margin:"0 0 1rem 0"},children:n("manageAccountSecurity")}),i.jsxs("button",{onClick:()=>le(!0),className:"btn btn-secondary",style:{display:"inline-flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(xl,{size:16}),n("changePassword")]})]}),i.jsxs("div",{style:{marginTop:"2rem",background:"var(--surface)",padding:"2rem",borderRadius:"var(--radius)",boxShadow:"var(--shadow)",border:"1px solid var(--border)"},children:[i.jsxs("h3",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 1rem 0"},children:[i.jsx(kl,{size:24,style:{color:a==="paid"?"#f59e0b":"#64748b"}}),n("subscription")]}),i.jsxs("p",{style:{textAlign:"center",color:"#64748b",marginBottom:"1.5rem"},children:[n("currentStatus"),":",i.jsx("span",{style:{fontWeight:"bold",color:a==="paid"?"#10b981":a==="pending"?"#f59e0b":"#64748b",padding:"0.25rem 0.75rem",borderRadius:"1rem",background:a==="paid"?"#dcfce7":a==="pending"?"#fef3c7":"#f1f5f9",marginLeft:"0.5rem"},children:a==="paid"?` ${n("premium")}`:n(a==="pending"?"pendingApproval":"free")})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"1.5rem"},children:[i.jsxs("div",{style:{background:"white",border:"2px solid #e2e8f0",borderRadius:"0.75rem",padding:"1.5rem"},children:[i.jsx("h4",{style:{margin:"0 0 0.5rem 0",fontSize:"1.2rem"},children:n("freePlan")}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"0"}),i.jsx("div",{style:{color:"#64748b",fontSize:"0.85rem",marginBottom:"1rem"},children:n("foreverFree")}),a==="free"&&i.jsx("div",{style:{padding:"0.5rem",background:"#f1f5f9",borderRadius:"0.375rem",textAlign:"center",color:"#64748b",fontWeight:"600",fontSize:"0.9rem"},children:n("currentPlan")})]}),i.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"2px solid #667eea",borderRadius:"0.75rem",padding:"1.5rem",color:"white",position:"relative"},children:[a==="paid"&&i.jsx("div",{style:{position:"absolute",top:"-10px",right:"15px",background:"#f59e0b",color:"white",padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.75rem",fontWeight:"bold"},children:"ACTIVE"}),i.jsxs("h4",{style:{margin:"0 0 0.5rem 0",fontSize:"1.2rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(kl,{size:20,style:{color:"#f59e0b"}}),n("premium")]}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"0.25rem"},children:["",r.userType==="Host"?299:199]}),i.jsxs("div",{style:{opacity:.8,fontSize:"0.85rem",marginBottom:"1rem"},children:["3 ",n("months"),"  ",n("nonRefundable")]}),a!=="paid"&&a!=="pending"&&i.jsx("button",{onClick:()=>window.open(`https://wa.me/919966888484?text=${encodeURIComponent("I want to upgrade my subscription.")}`,"_blank"),style:{width:"100%",padding:"0.75rem",background:"white",color:"#667eea",border:"none",borderRadius:"0.375rem",fontSize:"0.95rem",fontWeight:"bold",cursor:"pointer"},children:n("upgradeViaWhatsApp")}),a==="pending"&&i.jsxs("div",{style:{padding:"0.75rem",background:"rgba(251, 191, 36, 0.2)",borderRadius:"0.375rem",textAlign:"center",fontWeight:"600",fontSize:"0.9rem"},children:[" ",n("pendingApproval")]}),a==="paid"&&i.jsxs("div",{style:{padding:"0.75rem",background:"rgba(255, 255, 255, 0.2)",borderRadius:"0.375rem",textAlign:"center",fontWeight:"600",fontSize:"0.9rem"},children:[" ",n("youArePremium")]})]})]})]}),fe&&i.jsx("div",{className:"modal-overlay",onClick:()=>le(!1),children:i.jsxs("div",{className:"modal-content",onClick:G=>G.stopPropagation(),style:{maxWidth:"400px"},children:[i.jsxs("div",{className:"modal-header",children:[i.jsxs("h3",{children:[i.jsx(xl,{size:20})," ",n("changePassword")]}),i.jsx("button",{onClick:()=>le(!1),className:"modal-close",children:""})]}),i.jsxs("div",{className:"modal-body",children:[M&&i.jsx("div",{style:{color:M.includes("")?"#16a34a":"#dc2626",background:M.includes("")?"#dcfce7":"#fee2e2",padding:"0.75rem",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:M.includes("")?i.jsxs("div",{style:{textAlign:"center"},children:[M,H>0&&i.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",marginTop:"0.5rem"},children:H})]}):` ${M}`}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:n("currentPasswordLabel")}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("input",{type:ze?"text":"password",value:K,onChange:G=>{ie(G.target.value),J("")},placeholder:n("enterCurrentPassword"),disabled:H>0,style:{fontSize:"1rem",padding:"0.75rem",width:"100%",paddingRight:"2.5rem",opacity:H>0?.5:1}}),i.jsx("button",{type:"button",onClick:()=>Fe(!ze),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#64748b"},children:ze?i.jsx(Al,{size:16}):i.jsx(Nl,{size:16})})]})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:n("newPasswordLabel")}),i.jsxs("div",{style:{position:"relative"},children:[i.jsx("input",{type:Me?"text":"password",value:ae,onChange:G=>{Ce(G.target.value),J("")},placeholder:n("enterNewPassword"),disabled:H>0,style:{fontSize:"1rem",padding:"0.75rem",width:"100%",paddingRight:"2.5rem",opacity:H>0?.5:1}}),i.jsx("button",{type:"button",onClick:()=>be(!Me),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#64748b"},children:Me?i.jsx(Al,{size:16}):i.jsx(Nl,{size:16})})]}),i.jsx("div",{style:{marginTop:"0.75rem",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:te.map((G,je)=>{const Ne=G.test(ae);return i.jsxs("div",{style:{fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.25rem",color:Ne?"#16a34a":"#dc2626",transition:"color 0.2s"},children:[i.jsx("span",{style:{fontSize:"0.9rem"},children:Ne?"":""}),G.label]},je)})})]}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:n("confirmNewPassword")}),i.jsx("input",{type:"password",value:De,onChange:G=>{Re(G.target.value),J("")},placeholder:n("confirmNewPasswordPlaceholder"),disabled:H>0,style:{fontSize:"1rem",padding:"0.75rem",width:"100%",opacity:H>0?.5:1}})]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[i.jsx("button",{onClick:()=>{le(!1),ie(""),Ce(""),Re(""),J("")},className:"btn btn-secondary",disabled:H>0,style:{flex:1,padding:"0.75rem",opacity:H>0?.5:1},children:n("cancel")}),i.jsx("button",{onClick:se,disabled:Ue||!K||!ae||!De||H>0,className:"btn btn-primary",style:{flex:1,padding:"0.75rem",opacity:Ue||H>0?.5:1},children:n(Ue?"changingPassword":"changePassword")})]})]})]})}),j&&i.jsx("div",{className:"modal-overlay",onClick:()=>B(!1),children:i.jsxs("div",{className:"modal-content",onClick:G=>G.stopPropagation(),style:{maxWidth:"500px"},children:[i.jsxs("div",{className:"modal-header",children:[i.jsxs("h3",{children:[i.jsx(Sl,{size:20})," ",n("editProfile")]}),i.jsx("button",{onClick:()=>B(!1),className:"modal-close",children:""})]}),i.jsxs("div",{className:"modal-body",children:[A&&i.jsx("div",{ref:F,style:{color:A.includes("")?"#16a34a":"#dc2626",background:A.includes("")?"#dcfce7":"#fee2e2",padding:"0.75rem",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem",textAlign:"center"},children:A.includes("")?A:` ${A}`}),i.jsxs("div",{className:"form-group",children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:r.userType==="Host"?` ${n("myOfferings")}`:` ${n("myFestivalWishes")}`}),i.jsx("textarea",{value:C.bio,onChange:G=>{T({...C,bio:G.target.value}),v("")},placeholder:r.userType==="Host"?n("describeOfferings"):n("describeFestivalWishes"),rows:4,style:{fontSize:"1rem",padding:"0.75rem",width:"100%",resize:"vertical"}})]}),r.userType==="Host"&&i.jsxs("div",{className:"form-group",children:[i.jsxs("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:[" ",n("hostingAreas")," ",i.jsxs("span",{style:{fontSize:"0.85rem",color:"#64748b",fontWeight:"normal"},children:["(",C.hostingAreas.length,"/5 ",n("locations"),")"]})]}),i.jsx("div",{style:{maxHeight:"300px",overflow:"auto",border:"1px solid #e2e8f0",borderRadius:"0.5rem",padding:"1rem",scrollbarWidth:"thin",scrollbarColor:"#cbd5e1 #f1f5f9"},children:S&&Object.entries(S).map(([G,je])=>{const Ne=C.hostingAreas.find(xe=>xe.state===G)?.cities||[];return Ne.length>0,i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",fontSize:"0.95rem",marginBottom:"0.5rem",color:"var(--primary)"},children:G}),i.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.4rem"},children:je.map(xe=>{const ne=Ne.includes(xe);return i.jsx("button",{type:"button",onClick:()=>{const Te=[...C.hostingAreas],ke=Te.findIndex(O=>O.state===G);if(ke>=0)ne?(Te[ke].cities=Te[ke].cities.filter(O=>O!==xe),Te[ke].cities.length===0&&Te.splice(ke,1)):Te[ke].cities.push(xe),T({...C,hostingAreas:Te});else{if(Te.length>=5){v("You can select up to 5 locations only"),setTimeout(()=>F.current?.scrollIntoView({behavior:"smooth",block:"nearest"}),100);return}Te.push({state:G,cities:[xe]}),T({...C,hostingAreas:Te})}},style:{padding:"0.4rem 0.6rem",border:ne?"2px solid var(--primary)":"1px solid #cbd5e1",background:ne?"var(--primary)":"white",color:ne?"white":"var(--text)",borderRadius:"0.375rem",cursor:"pointer",fontSize:"0.8rem",transition:"all 0.2s",whiteSpace:"nowrap"},children:xe},xe)})})]},G)})})]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[i.jsx("button",{onClick:()=>{B(!1),v("")},className:"btn btn-secondary",disabled:b,style:{flex:1,padding:"0.75rem"},children:n("cancel")}),i.jsx("button",{onClick:ce,disabled:b,className:"btn btn-primary",style:{flex:1,padding:"0.75rem",opacity:b?.5:1},children:n(b?"updating":"saveChanges")})]})]})]})})]}):i.jsx("div",{className:"profile-container text-center",style:{padding:"3rem"},children:i.jsx("div",{className:"loading",children:n("loadingProfile")})})}function X_(){const{userName:n}=hh(),r=Kn(),[s,a]=R.useState(null),[c,u]=R.useState([]),[h,p]=R.useState(!0);R.useEffect(()=>{m()},[n]);const m=async()=>{try{console.log("Fetching profile for userName:",n);const[U,V]=await Promise.all([qe.get(`user/public-profile-by-name/${encodeURIComponent(n)}`),qe.get(`user/reviews-by-name/${encodeURIComponent(n)}`)]);a(U.data),u(V.data||[])}catch(U){console.error("Failed to fetch profile:",U),console.error("Error details:",U.response?.data),console.error("Requested userName:",n)}finally{p(!1)}},g=U=>Array.from({length:5},(V,I)=>i.jsx(Yd,{size:16,fill:I<U?"#fbbf24":"none",color:I<U?"#fbbf24":"#d1d5db"},I)),y=U=>new Date(U).toLocaleDateString("en-US",{year:"numeric",month:"long"});if(h)return i.jsx("div",{className:"profile-container text-center",style:{padding:"3rem"},children:i.jsx("div",{className:"loading",children:"Loading profile..."})});if(!s)return i.jsxs("div",{className:"profile-container text-center",style:{padding:"3rem"},children:[i.jsx("h3",{children:"Profile not found"}),i.jsx("button",{onClick:()=>r(-1),className:"btn btn-primary",children:"Go Back"})]});const k=c.length>0?c.reduce((U,V)=>U+V.rating,0)/c.length:0;return i.jsxs("div",{className:"profile-container",children:[i.jsxs("div",{style:{marginBottom:"2rem"},children:[i.jsxs("button",{onClick:()=>r(-1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[i.jsx(yh,{size:16})," Back"]}),i.jsxs("div",{style:{textAlign:"center"},children:[i.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[s.userType==="Host"?"":""," ",s.name]}),i.jsxs("p",{style:{color:"#64748b",margin:"0"},children:[s.userType,"  Joined ",y(s.createdAt)]})]})]}),i.jsxs("div",{className:"profile-card",children:[i.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[i.jsx(or,{src:s.profileImageUrl,alt:s.name,style:{width:"150px",height:"150px",borderRadius:"50%",objectFit:"cover",border:"4px solid var(--border)",marginBottom:"1rem"},fallbackText:"Profile"}),i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[i.jsx(H0,{size:16,color:"#64748b"}),i.jsx("span",{style:{color:"#64748b"},children:s.location})]}),c.length>0&&i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[i.jsx("div",{style:{display:"flex",gap:"2px"},children:g(Math.round(k))}),i.jsx("span",{style:{fontWeight:"600"},children:k.toFixed(1)}),i.jsxs("span",{style:{color:"#64748b"},children:["(",c.length," reviews)"]})]})]}),i.jsxs("div",{style:{marginBottom:"2rem"},children:[i.jsx("h4",{style:{marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:s.userType==="Host"?" About My Hosting":" About Me"}),i.jsx("p",{style:{color:"#475569",lineHeight:"1.6",background:"#f8fafc",padding:"1rem",borderRadius:"0.75rem",borderLeft:"4px solid var(--primary)"},children:s.bio||"No description provided."})]})]}),c.length>0&&i.jsxs("div",{className:"profile-card",style:{marginTop:"2rem"},children:[i.jsxs("h3",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(Yd,{size:20,color:"#fbbf24"}),"Reviews (",c.length,")"]}),i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:c.map((U,V)=>i.jsxs("div",{style:{background:"#f8fafc",padding:"1rem",borderRadius:"0.75rem",border:"1px solid var(--border)"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx("strong",{children:U.reviewerName}),i.jsx("div",{style:{display:"flex",gap:"2px"},children:g(U.rating)})]}),i.jsx("span",{style:{color:"#64748b",fontSize:"0.875rem"},children:y(U.createdAt)})]}),i.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.5"},children:U.comment})]},V))})]})]})}const J_=()=>{const{t:n}=Er(),[r,s]=R.useState({name:"",email:"",message:""}),[a,c]=R.useState(!1),[u,h]=R.useState(!1),[p,m]=R.useState(""),[g,y]=R.useState(null);R.useEffect(()=>{const V=localStorage.getItem("user");if(V){const I=JSON.parse(V);y(I),s(q=>({...q,name:I.name||"",email:I.email||""}))}},[]);const k=async V=>{if(V.preventDefault(),!r.name||!r.email||!r.message){m("Please fill all fields");return}c(!0),m("");try{const I={name:r.name,email:r.email,message:r.message,userType:g?.userType||g?.role||"Guest"};console.log("Sending feedback:",I);const q=await qe.post("feedback",I);console.log("Feedback response:",q),h(!0),s({...r,message:""}),setTimeout(()=>h(!1),5e3)}catch(I){console.error("Feedback error details:",{message:I.message,response:I.response?.data,status:I.response?.status,statusText:I.response?.statusText});let q="Failed to send feedback. Please try again.";I.response?.status===404?q="Feedback service not found. Please contact support.":I.response?.status===500?q="Server error occurred. Please try again later.":I.response?.data?.message&&(q=I.response.data.message),m(q)}finally{c(!1)}},U=()=>{window.open("https://wa.me/919966888484","_blank","noopener,noreferrer")};return i.jsx("div",{className:"help-page",children:i.jsxs("div",{className:"help-container",children:[i.jsxs("div",{className:"help-header",children:[i.jsx(El,{size:48,className:"help-icon",style:{color:"var(--primary)"}}),i.jsxs("h1",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem"},children:[i.jsx(Gn,{size:32,style:{color:"var(--primary)"}}),n("helpSupport")]}),i.jsx("p",{children:n("helpDescription")})]}),i.jsxs("div",{className:"help-content",children:[i.jsxs("div",{className:"help-card",children:[i.jsx(py,{size:32,className:"card-icon",style:{color:"var(--primary)"}}),i.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(B0,{size:20}),n("emailSupport")]}),i.jsx("p",{children:n("emailSupportDesc")}),i.jsxs("a",{href:"mailto:customer-support@festiveguest.com",className:"btn btn-outline",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(py,{size:16}),n("customerSupport")]})]}),i.jsxs("div",{className:"help-card",children:[i.jsx(ii,{size:32,className:"card-icon",style:{color:"#25D366"}}),i.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(pj,{size:20}),n("whatsappSupport")]}),i.jsx("p",{children:n("whatsappSupportDesc")}),i.jsxs("button",{onClick:U,className:"btn btn-primary whatsapp-btn",style:{cursor:"pointer",border:"none",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(ii,{size:16}),n("chatOnWhatsapp")]})]})]}),i.jsxs("div",{style:{marginTop:"3rem",background:"#fef3c7",padding:"2rem",borderRadius:"var(--radius)",border:"2px solid #f59e0b"},children:[i.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[i.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0",color:"#92400e"},children:[i.jsx(dy,{size:28,style:{color:"#f59e0b"}}),n("importantPolicies")]}),i.jsx("p",{style:{color:"#78350f",margin:"0"},children:n("policiesDesc")})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1rem",maxWidth:"800px",margin:"0 auto"},children:[i.jsx(Nt,{to:"/terms-of-service",style:{textDecoration:"none"},children:i.jsxs("div",{style:{background:"white",padding:"1.25rem",borderRadius:"0.5rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",textAlign:"center",cursor:"pointer",transition:"transform 0.2s",border:"1px solid #fbbf24"},children:[i.jsx(dy,{size:24,style:{color:"#f59e0b",marginBottom:"0.5rem"}}),i.jsx("h4",{style:{margin:"0 0 0.25rem 0",color:"#1e293b"},children:n("termsOfService")}),i.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"#64748b"},children:n("termsDesc")})]})}),i.jsx(Nt,{to:"/privacy-policy",style:{textDecoration:"none"},children:i.jsxs("div",{style:{background:"white",padding:"1.25rem",borderRadius:"0.5rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",textAlign:"center",cursor:"pointer",transition:"transform 0.2s",border:"1px solid #fbbf24"},children:[i.jsx(sj,{size:24,style:{color:"#f59e0b",marginBottom:"0.5rem"}}),i.jsx("h4",{style:{margin:"0 0 0.25rem 0",color:"#1e293b"},children:n("privacyPolicy")}),i.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"#64748b"},children:n("privacyDesc")})]})}),i.jsxs("div",{style:{background:"white",padding:"1.25rem",borderRadius:"0.5rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",textAlign:"center",border:"1px solid #fbbf24"},children:[i.jsx(Cj,{size:24,style:{color:"#f59e0b",marginBottom:"0.5rem"}}),i.jsx("h4",{style:{margin:"0 0 0.25rem 0",color:"#1e293b"},children:n("safetyGuidelines")}),i.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"#64748b"},children:n("safetyDesc")})]})]})]}),i.jsxs("div",{style:{marginTop:"3rem"},children:[i.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[i.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[i.jsx(rr,{size:28,style:{color:"var(--warning)"}}),n("troubleshooting")]}),i.jsx("p",{style:{color:"#64748b",margin:"0"},children:n("troubleshootingDesc")})]}),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[i.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[i.jsx(rr,{size:20,style:{color:"var(--warning)"}}),n("troubleLoginTitle")]}),i.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"#475569",lineHeight:"1.6"},children:n("troubleLoginDesc")}),i.jsxs("ol",{style:{margin:"0",paddingLeft:"1.5rem",color:"#475569",lineHeight:"1.8"},children:[i.jsx("li",{children:n("troubleLoginStep1")}),i.jsx("li",{children:n("troubleLoginStep2")}),i.jsx("li",{children:n("troubleLoginStep3")}),i.jsx("li",{children:n("troubleLoginStep4")}),i.jsx("li",{children:n("troubleLoginStep5")})]})]}),i.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[i.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[i.jsx(rr,{size:20,style:{color:"var(--warning)"}}),n("troubleLoadingTitle")]}),i.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"#475569",lineHeight:"1.6"},children:n("troubleLoadingDesc")}),i.jsxs("ol",{style:{margin:"0",paddingLeft:"1.5rem",color:"#475569",lineHeight:"1.8"},children:[i.jsx("li",{children:n("troubleLoadingStep1")}),i.jsx("li",{children:n("troubleLoadingStep2")}),i.jsx("li",{children:n("troubleLoadingStep3")}),i.jsx("li",{children:n("troubleLoadingStep4")}),i.jsx("li",{children:n("troubleLoadingStep5")}),i.jsx("li",{children:n("troubleLoadingStep6")})]})]}),i.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[i.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[i.jsx(rr,{size:20,style:{color:"var(--warning)"}}),n("troublePaymentTitle")]}),i.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"#475569",lineHeight:"1.6"},children:n("troublePaymentDesc")}),i.jsxs("ol",{style:{margin:"0",paddingLeft:"1.5rem",color:"#475569",lineHeight:"1.8"},children:[i.jsx("li",{children:n("troublePaymentStep1")}),i.jsx("li",{children:n("troublePaymentStep2")}),i.jsx("li",{children:n("troublePaymentStep3")}),i.jsx("li",{children:n("troublePaymentStep4")}),i.jsx("li",{children:n("troublePaymentStep5")}),i.jsx("li",{children:n("troublePaymentStep6")})]})]}),i.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[i.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[i.jsx(rr,{size:20,style:{color:"var(--warning)"}}),n("troubleEmailTitle")]}),i.jsx("p",{style:{margin:"0 0 0.5rem 0",color:"#475569",lineHeight:"1.6"},children:n("troubleEmailDesc")}),i.jsxs("ol",{style:{margin:"0",paddingLeft:"1.5rem",color:"#475569",lineHeight:"1.8"},children:[i.jsx("li",{children:n("troubleEmailStep1")}),i.jsx("li",{children:n("troubleEmailStep2")}),i.jsx("li",{children:n("troubleEmailStep3")}),i.jsx("li",{children:n("troubleEmailStep4")}),i.jsx("li",{children:n("troubleEmailStep5")})]})]})]})]}),i.jsxs("div",{style:{marginTop:"3rem",background:"linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%)",padding:"2rem",borderRadius:"var(--radius)",border:"2px solid #f97316"},children:[i.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[i.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0",color:"#9a3412"},children:[i.jsx(Gn,{size:28,style:{color:"#f97316"}}),n("indiaSupport")]}),i.jsx("p",{style:{color:"#78350f",margin:"0"},children:n("indiaSupportDesc")})]}),i.jsx("div",{style:{maxWidth:"700px",margin:"0 auto",background:"white",padding:"1.5rem",borderRadius:"0.5rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:i.jsxs("ul",{style:{margin:0,paddingLeft:"1.5rem",color:"#475569",lineHeight:"2"},children:[i.jsx("li",{children:n("indiaSupportLang")}),i.jsx("li",{children:n("indiaSupportPayment")}),i.jsx("li",{children:n("indiaSupportCompliance")}),i.jsx("li",{children:n("indiaSupportTime")}),i.jsx("li",{children:n("indiaSupportGST")}),i.jsx("li",{children:n("indiaSupportConsumer")})]})})]}),i.jsx("div",{style:{marginTop:"3rem",background:"#fee2e2",padding:"1.5rem",borderRadius:"var(--radius)",border:"2px solid #dc2626"},children:i.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[i.jsx(rr,{size:32,style:{color:"#dc2626",flexShrink:0}}),i.jsxs("div",{children:[i.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"#991b1b"},children:n("bewareImpersonators")}),i.jsxs("p",{style:{margin:"0",color:"#7f1d1d",lineHeight:"1.6"},children:[i.jsxs("strong",{children:[n("officialContactOnly"),":"]})," ",n("warningMessage")]})]})]})}),i.jsxs("div",{className:"feedback-section",style:{marginTop:"3rem"},children:[i.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[i.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[i.jsx(Io,{size:28,style:{color:"var(--primary)"}}),n("sendFeedback")]}),i.jsx("p",{style:{color:"#64748b",margin:"0"},children:n("sendFeedbackDesc")})]}),i.jsx("div",{style:{display:"flex",justifyContent:"center"},children:i.jsxs("div",{style:{width:"100%",maxWidth:"500px",background:"#f8fafc",padding:"2rem",borderRadius:"var(--radius)",boxShadow:"var(--shadow)",border:"1px solid var(--border)"},children:[p&&i.jsxs("div",{style:{color:"#dc2626",background:"#fee2e2",padding:"0.75rem",borderRadius:"0.5rem",marginBottom:"1rem",fontSize:"0.875rem",border:"1px solid #fecaca"},children:[" ",p]}),u?i.jsxs("div",{style:{color:"var(--success)",textAlign:"center",padding:"1rem"},children:[i.jsx(Eo,{size:48,style:{marginBottom:"1rem",color:"#16a34a"}}),i.jsx("h3",{style:{color:"#16a34a",margin:"0 0 0.5rem 0"},children:n("feedbackSent")}),i.jsx("p",{style:{margin:"0",color:"#64748b"},children:n("feedbackThanks")})]}):i.jsx("form",{onSubmit:k,children:i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[i.jsx("input",{type:"text",placeholder:n("yourName"),value:r.name,onChange:V=>s({...r,name:V.target.value}),disabled:!!g,style:{padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"0.5rem",width:"100%",boxSizing:"border-box",fontSize:"1rem",backgroundColor:g?"#f3f4f6":"white",cursor:g?"not-allowed":"text"}}),i.jsx("input",{type:"email",placeholder:n("yourEmail"),value:r.email,onChange:V=>s({...r,email:V.target.value}),disabled:!!g,style:{padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"0.5rem",width:"100%",boxSizing:"border-box",fontSize:"1rem",backgroundColor:g?"#f3f4f6":"white",cursor:g?"not-allowed":"text"}}),i.jsx("textarea",{placeholder:n("yourFeedback"),value:r.message,onChange:V=>{s({...r,message:V.target.value}),m("")},rows:5,style:{padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"0.5rem",resize:"vertical",width:"100%",boxSizing:"border-box",fontSize:"1rem"}}),i.jsxs("button",{type:"submit",disabled:a,className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"center",padding:"0.75rem 1.5rem",fontSize:"1rem"},children:[i.jsx(Io,{size:16}),n(a?"sending":"sendFeedback")]})]})})]})})]}),i.jsxs("div",{className:"faq-section",style:{marginTop:"3rem"},children:[i.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[i.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[i.jsx(El,{size:28,style:{color:"var(--primary)"}}),n("faq")]}),i.jsx("p",{style:{color:"#64748b",margin:"0"},children:n("faqDesc")})]}),i.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[i.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[i.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[i.jsx(Eo,{size:20,style:{color:"var(--success)"}}),n("faqHowBecomeHost")]}),i.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:n("faqHowBecomeHostAnswer")})]}),i.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[i.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[i.jsx(rr,{size:20,style:{color:"var(--warning)"}}),n("faqIsFree")]}),i.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:n("faqIsFreeAnswer")})]}),i.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[i.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[i.jsx(Gn,{size:20,style:{color:"var(--primary)"}}),n("faqHowFindHosts")]}),i.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:n("faqHowFindHostsAnswer")})]}),i.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[i.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[i.jsx(ii,{size:20,style:{color:"var(--primary)"}}),n("faqReferralSystem")]}),i.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:n("faqReferralSystemAnswer")})]}),i.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[i.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[i.jsx(rr,{size:20,style:{color:"var(--warning)"}}),n("faqSafetyMeasures")]}),i.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:n("faqSafetyMeasuresAnswer")})]}),i.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[i.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[i.jsx(rr,{size:20,style:{color:"var(--warning)"}}),n("faqReportSuspicious")]}),i.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:n("faqReportSuspiciousAnswer")})]}),i.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[i.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[i.jsx(Eo,{size:20,style:{color:"var(--success)"}}),n("faqDispute")]}),i.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:n("faqDisputeAnswer")})]}),i.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[i.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[i.jsx(rr,{size:20,style:{color:"var(--warning)"}}),n("faqPayments")]}),i.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:n("faqPaymentsAnswer")})]}),i.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[i.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[i.jsx(Eo,{size:20,style:{color:"var(--success)"}}),n("faqVerifyIdentity")]}),i.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:n("faqVerifyIdentityAnswer")})]}),i.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[i.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[i.jsx(Gn,{size:20,style:{color:"var(--primary)"}}),n("faqExperiences")]}),i.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:n("faqExperiencesAnswer")})]}),i.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[i.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[i.jsx(Eo,{size:20,style:{color:"var(--success)"}}),n("faqInfoSafe")]}),i.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:n("faqInfoSafeAnswer")})]})]})]}),i.jsxs("div",{style:{marginTop:"3rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"2rem",borderRadius:"var(--radius)",textAlign:"center"},children:[i.jsx("h2",{style:{color:"white",margin:"0 0 0.5rem 0"},children:n("connectWithUs")}),i.jsx("p",{style:{color:"white",margin:"0 0 1.5rem 0",opacity:.9},children:n("socialMediaDesc")}),i.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"2rem",flexWrap:"wrap"},children:[i.jsxs("a",{href:"https://twitter.com/festiveguest",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",color:"white",textDecoration:"none",transition:"transform 0.3s"},children:[i.jsx("div",{style:{background:"white",borderRadius:"50%",padding:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"#667eea",children:i.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})}),i.jsx("span",{style:{fontSize:"0.9rem",fontWeight:"600"},children:"X (Twitter)"})]}),i.jsxs("a",{href:"https://instagram.com/festiveguest",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",color:"white",textDecoration:"none",transition:"transform 0.3s"},children:[i.jsx("div",{style:{background:"white",borderRadius:"50%",padding:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"#667eea",children:i.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})})}),i.jsx("span",{style:{fontSize:"0.9rem",fontWeight:"600"},children:"Instagram"})]}),i.jsxs("a",{href:"https://youtube.com/@festiveguest",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",color:"white",textDecoration:"none",transition:"transform 0.3s"},children:[i.jsx("div",{style:{background:"white",borderRadius:"50%",padding:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"#667eea",children:i.jsx("path",{d:"M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"})})}),i.jsx("span",{style:{fontSize:"0.9rem",fontWeight:"600"},children:"YouTube"})]}),i.jsxs("a",{href:"https://facebook.com/festiveguest",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"0.5rem",color:"white",textDecoration:"none",transition:"transform 0.3s"},children:[i.jsx("div",{style:{background:"white",borderRadius:"50%",padding:"1rem",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"#667eea",children:i.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),i.jsx("span",{style:{fontSize:"0.9rem",fontWeight:"600"},children:"Facebook"})]})]})]})]})})};class K_{async createGuestPost(r){return(await qe.post("guestposts",r)).data}async getGuestPosts(){return(await qe.get("guestposts")).data}async getMyGuestPosts(){return(await qe.get("guestposts/my-posts")).data}async deleteGuestPost(r){return(await qe.delete(`guestposts/${r}`)).data}async updateGuestPost(r,s){return(await qe.put(`guestposts/${r}`,s)).data}async createHostPost(r){return(await qe.post("hostposts",r)).data}async getHostPosts(){return(await qe.get("hostposts")).data}async getMyHostPosts(){return(await qe.get("hostposts/my-posts")).data}async deleteHostPost(r){return(await qe.delete(`hostposts/${r}`)).data}async updateHostPost(r,s){return(await qe.put(`hostposts/${r}`,s)).data}}const sr=new K_,Q_=()=>{const{t:n}=Er(),[r,s]=R.useState([]),[a,c]=R.useState([]),[u,h]=R.useState(!0),[p,m]=R.useState(!1),[g,y]=R.useState(!1),[k,U]=R.useState(!1),[V,I]=R.useState(null),[q,z]=R.useState(null),[Q,Y]=R.useState(null),[fe,le]=R.useState(null),[K,ie]=R.useState(null),[ae,Ce]=R.useState([]),[De,Re]=R.useState(!1),[ze,Fe]=R.useState(!1),[Me,be]=R.useState({}),[Ue,W]=R.useState({}),[M,J]=R.useState({}),[H,ee]=R.useState(window.innerWidth>768),[j,B]=R.useState(!1),[C,T]=R.useState(!1),[b,E]=R.useState(!1),[A,v]=R.useState(null),[S,N]=R.useState(!1);R.useEffect(()=>{console.log("Posts: activeChat state changed:",K)},[K]),R.useEffect(()=>{const ne=localStorage.getItem("user");if(ne){const Te=JSON.parse(ne);console.log("DEBUG Posts: User data:",Te),console.log("DEBUG Posts: HostingAreas:",Te.hostingAreas),Y(Te)}te()},[]),R.useEffect(()=>{if(Q)if(Q.userType==="Host"&&Q.hostingAreas){const ne={};Q.hostingAreas.filter(Te=>Te.state&&Te.cities&&Te.cities.length>0).forEach(Te=>{ne[Te.state]=Te.cities}),J(ne)}else F()},[Q]),R.useEffect(()=>{const ne=()=>{const Te=window.innerWidth>1024;ee(Te),Fe(Te)};return ne(),window.addEventListener("resize",ne),()=>window.removeEventListener("resize",ne)},[]),R.useEffect(()=>{X()},[r,ae]),R.useEffect(()=>{te()},[j]),R.useEffect(()=>{const ne=()=>le(null);if(fe)return document.addEventListener("click",ne),()=>document.removeEventListener("click",ne)},[fe]);const F=async()=>{try{const ne=await Wo.getLocations();W(ne)}catch(ne){console.error("Error fetching locations:",ne)}},te=async()=>{try{h(!0);let ne=[];j?ne=(Q?.userType==="Host"?await sr.getMyHostPosts():await sr.getMyGuestPosts()).map(ke=>({id:ke.rowKey,title:ke.title,content:ke.content,location:ke.location,planningDate:ke.planningDate,visitors:ke.visitors||1,days:ke.days||1,maxGuests:ke.maxGuests||1,pricePerNight:ke.pricePerNight,facilities:ke.facilities?ke.facilities.split(","):[],amenities:ke.amenities?ke.amenities.split(","):[],userName:ke.userName||Q?.name||"Unknown",userId:ke.userId,userType:Q?.userType,createdAt:new Date(ke.createdAt),status:ke.status,commenceDate:ke.commenceDate})):Q?.userType==="Host"?ne=(await sr.getGuestPosts()).map(ke=>({id:ke.rowKey,title:ke.title,content:ke.content,location:ke.location,planningDate:ke.planningDate,visitors:ke.visitors||1,days:ke.days||1,facilities:ke.facilities?ke.facilities.split(","):[],userName:ke.userName||"Unknown",userId:ke.userId,userType:"Guest",createdAt:new Date(ke.createdAt),status:ke.status})):ne=(await sr.getHostPosts()).map(ke=>({id:ke.rowKey,title:ke.title,content:ke.content,location:ke.location,maxGuests:ke.maxGuests||1,pricePerNight:ke.pricePerNight,amenities:ke.amenities?ke.amenities.split(","):[],userName:ke.userName||"Unknown",userId:ke.userId,userType:"Host",createdAt:new Date(ke.createdAt),status:ke.status,commenceDate:ke.commenceDate})),ne.sort((Te,ke)=>ke.createdAt-Te.createdAt),s(ne)}catch(ne){console.error("Error fetching posts:",ne)}finally{h(!1)}},X=()=>{if(ae.length===0)c(r);else{const ne=r.filter(Te=>ae.some(ke=>Te.location?.toLowerCase().includes(ke.toLowerCase())));c(ne)}},$=ne=>{be(Te=>({...Te,[ne]:!Te[ne]}))},de=ne=>{Ce(Te=>Te.includes(ne)?Te.filter(ke=>ke!==ne):[...Te,ne])},he=()=>{Ce([])},ce={WiFi:i.jsx(Uj,{size:16}),Parking:i.jsx(IC,{size:16}),Meals:i.jsx(Dj,{size:16})},se=async ne=>{try{const Te={...ne,userName:Q?.name||"Unknown User",userId:Q?.userId||Q?.id,planningDate:ne.planningDate?new Date(ne.planningDate+"T00:00:00.000Z").toISOString():null};Q?.userType==="Guest"?await sr.createGuestPost(Te):await sr.createHostPost(Te),m(!1),te()}catch(Te){console.error("Error creating post:",Te);const ke=Te.response?.data?.message||Te.message||"Failed to create post. Please try again.";alert(ke)}},G=ne=>{I(ne),y(!0),le(null)},je=async ne=>{try{V.userType==="Guest"?await sr.updateGuestPost(V.id,ne):await sr.updateHostPost(V.id,ne),y(!1),I(null),te()}catch(Te){console.error("Error updating post:",Te),alert("Failed to update post. Please try again.")}},Ne=async ne=>{z(ne),U(!0),le(null)},xe=async()=>{if(q)try{q.userType==="Guest"?await sr.deleteGuestPost(q.id):await sr.deleteHostPost(q.id),U(!1),z(null),te()}catch(ne){console.error("Error deleting post:",ne),alert("Failed to delete post. Please try again.")}};return i.jsxs("div",{className:"browse-layout",children:[i.jsxs("button",{className:"mobile-filter-toggle",onClick:ne=>{ne.stopPropagation(),Re(!De)},children:[i.jsxs("span",{children:[n("filterByLocation")," ",ae.length>0&&`(${ae.length})`]}),De?i.jsx(bh,{size:16}):i.jsx(_l,{size:16})]}),i.jsxs("div",{className:`location-sidebar ${De?"mobile-visible":""}`,onClick:ne=>ne.stopPropagation(),children:[i.jsxs("div",{className:"filter-header",children:[i.jsxs("h3",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:H?"default":"pointer",width:"100%"},onClick:()=>!H&&Fe(!ze),children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(vh,{size:20,style:{color:"var(--primary)"}}),Q?.userType==="Host"?n("filterByHostingAreas"):n("filterByLocation")]}),!H&&i.jsx("span",{style:{color:"var(--primary)",fontSize:"1.2rem"},children:ze?"":"+"})]}),i.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:ae.length>0&&i.jsxs("button",{onClick:he,className:"clear-filters-btn",children:[n("clear")," (",ae.length,")"]})})]}),(H||ze)&&i.jsx("div",{className:"location-filters",children:Q?.userType==="Host"?Object.keys(M).length>0?Object.entries(M).map(([ne,Te])=>i.jsxs("div",{className:"state-group",children:[i.jsxs("button",{className:"state-toggle",onClick:()=>$(ne),children:[i.jsx("span",{children:ne}),i.jsx("span",{className:"expand-icon",style:{color:"var(--primary)",background:"none",border:"none",borderRadius:"0",fontSize:"1.2rem"},children:Me[ne]?"-":"+"})]}),Me[ne]&&i.jsx("div",{className:"cities-list",children:Te.map(ke=>i.jsx("button",{className:`city-btn ${ae.includes(ke)?"selected":""}`,onClick:()=>de(ke),children:ke},ke))})]},ne)):i.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#64748b",fontSize:"0.9rem"},children:n("noHostingAreasConfigured")}):Object.entries(Ue).map(([ne,Te])=>i.jsxs("div",{className:"state-group",children:[i.jsxs("button",{className:"state-toggle",onClick:()=>$(ne),children:[i.jsx("span",{children:ne}),i.jsx("span",{className:"expand-icon",style:{color:"var(--primary)",background:"none",border:"none",borderRadius:"0",fontSize:"1.2rem"},children:Me[ne]?"-":"+"})]}),Me[ne]&&i.jsx("div",{className:"cities-list",children:Te.map(ke=>i.jsx("button",{className:`city-btn ${ae.includes(ke)?"selected":""}`,onClick:()=>de(ke),children:ke},ke))})]},ne))})]}),i.jsx("div",{className:"browse-main",children:i.jsxs("div",{className:"container",children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[i.jsxs("div",{style:{flex:"1 1 auto",minWidth:"200px"},children:[i.jsx("h1",{style:{margin:"0 0 0.5rem 0",color:"var(--text)"},children:j?n("myPosts"):Q?.userType==="Host"?n("guestPosts"):n("allPosts")}),i.jsxs("p",{style:{margin:0,color:"var(--text-light)"},children:[j?`${n("manageYourPosts").replace("{userType}",Q?.userType==="Host"?n("host"):n("guest"))} (${a.length} ${n("found")})`:Q?.userType==="Host"?`${n("browseAccommodationRequests")} (${a.length} ${n("found")})`:`${n("browseAllAccommodation")} (${a.length} ${n("found")})`,"  ",i.jsx("a",{href:"#",onClick:ne=>{ne.preventDefault(),T(!0)},style:{color:"var(--primary)",textDecoration:"underline",cursor:"pointer"},children:n("howItWorks")})]})]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",flexWrap:"wrap"},children:[i.jsx("button",{onClick:()=>B(!j),className:j?"btn btn-outline":"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem",whiteSpace:"nowrap"},children:n(j?"allPosts":"myPosts")}),j&&i.jsxs("button",{onClick:()=>m(!0),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem",whiteSpace:"nowrap"},children:[i.jsx(_l,{size:20}),n("createPost")]})]})]}),i.jsx("div",{className:"posts-grid",style:{display:"grid",gap:"1.5rem"},children:u?i.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[i.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),i.jsx("p",{children:n("loadingPosts")})]}):a.length===0?i.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[i.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),i.jsx("p",{children:ae.length>0?n("noPostsForLocation"):n("noPostsAvailable")}),ae.length>0&&i.jsx("button",{onClick:he,className:"btn btn-outline",children:n("clearFilters")})]}):a.map(ne=>i.jsxs("div",{className:"post-card",style:{background:"white",borderRadius:"var(--radius)",border:"1px solid var(--border)",padding:"1.5rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[i.jsxs("div",{children:[i.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"var(--text)",fontSize:"1.25rem"},children:ne.title}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",color:"var(--text-light)",fontSize:"0.875rem"},children:[i.jsx("span",{onClick:()=>{v({userName:ne.userName,userId:ne.userId}),E(!0)},style:{cursor:"pointer",color:"var(--primary)",textDecoration:"underline"},children:ne.userName}),i.jsx("span",{children:""}),i.jsx("span",{children:ne.createdAt.toLocaleDateString()})]})]}),i.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:Q&&(Q.userType==="Guest"||j)&&ne.userId===Q.userId&&i.jsxs("div",{style:{position:"relative"},children:[i.jsx("button",{onClick:Te=>{Te.stopPropagation(),le(fe===ne.id?null:ne.id)},style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem",borderRadius:"0.25rem",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx(WC,{size:16,color:"var(--text-light)"})}),fe===ne.id&&i.jsxs("div",{style:{position:"absolute",top:"100%",right:0,background:"white",border:"1px solid var(--border)",borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:10,minWidth:"120px"},children:[i.jsxs("button",{onClick:()=>G(ne),style:{width:"100%",padding:"0.5rem 0.75rem",border:"none",background:"none",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem"},children:[i.jsx(Sl,{size:14}),n("edit")]}),i.jsxs("button",{onClick:()=>Ne(ne),style:{width:"100%",padding:"0.5rem 0.75rem",border:"none",background:"none",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:"#dc2626"},children:[i.jsx(gy,{size:14}),"Delete"]})]})]})})]}),i.jsx("p",{style:{margin:"0 0 1rem 0",color:"var(--text)",lineHeight:"1.6"},children:ne.content}),i.jsx("p",{style:{fontSize:"0.75rem",fontWeight:"600",color:"#64748b",margin:"0 0 0.5rem 0",textTransform:"uppercase",letterSpacing:"0.5px"},children:ne.userType==="Host"?n("availableLocations"):n("visitingLocation")}),i.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",marginBottom:"1rem",fontSize:"0.875rem",color:"var(--text-light)"},children:[i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(H0,{size:16}),ne.location||n("locationNotSpecified")]}),ne.userType==="Guest"&&i.jsxs(i.Fragment,{children:[ne.planningDate&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(Ed,{size:16}),new Date(ne.planningDate).toLocaleDateString()]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(Gn,{size:16}),ne.visitors," visitor",ne.visitors!==1?"s":""]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(Ed,{size:16}),ne.days," day",ne.days!==1?"s":""]})]}),ne.userType==="Host"&&i.jsxs(i.Fragment,{children:[ne.commenceDate&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(Ed,{size:16}),n("since")," ",new Date(ne.commenceDate).toLocaleDateString()]}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[i.jsx(Gn,{size:16}),n("upTo")," ",ne.maxGuests," ",ne.maxGuests!==1?n("guests"):n("guest")]}),ne.pricePerNight>0&&i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:["",ne.pricePerNight,"/",n("night")]})]})]}),ne.facilities&&ne.facilities.length>0&&i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("p",{style:{fontSize:"0.75rem",fontWeight:"600",color:"#64748b",margin:"0 0 0.5rem 0",textTransform:"uppercase",letterSpacing:"0.5px"},children:n("preferredFacilities")}),i.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:ne.facilities.map(Te=>i.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",background:"#f1f5f9",color:"var(--primary)",padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.75rem",fontWeight:"500"},children:[ce[Te],Te]},Te))})]}),ne.amenities&&ne.amenities.length>0&&i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("p",{style:{fontSize:"0.75rem",fontWeight:"600",color:"#64748b",margin:"0 0 0.5rem 0",textTransform:"uppercase",letterSpacing:"0.5px"},children:n("amenitiesServices")}),i.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:ne.amenities.map(Te=>i.jsx("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",background:"#f1f5f9",color:"var(--primary)",padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.75rem",fontWeight:"500"},children:Te},Te))})]}),Q?.userType==="Host"&&ne.userId!==Q.userId&&i.jsx("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:i.jsxs("button",{onClick:Te=>{Te.stopPropagation(),console.log("Opening chat with:",{id:ne.userId,name:ne.userName}),ie(null),setTimeout(()=>{ie({id:ne.userId,name:ne.userName,imageUrl:null})},50)},className:"btn btn-primary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.75rem 1rem",fontSize:"0.9rem",fontWeight:"600"},children:[i.jsx(ii,{size:16}),n("contactGuest")]})}),Q&&ne.userId!==Q.userId&&i.jsx("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:i.jsxs("button",{onClick:Te=>{Te.stopPropagation(),console.log("Opening chat with:",{id:ne.userId,name:ne.userName}),ie(null),setTimeout(()=>{ie({id:ne.userId,name:ne.userName,imageUrl:null})},50)},className:"btn btn-primary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.75rem 1rem",fontSize:"0.9rem",fontWeight:"600"},children:[i.jsx(ii,{size:16}),ne.userType==="Host"?n("contactHost"):n("contactGuest")]})})]},ne.id))})]})}),p&&(Q?.userType==="Host"?i.jsx(e4,{onClose:()=>m(!1),onSubmit:se,user:Q}):i.jsx(x0,{onClose:()=>m(!1),onSubmit:se})),g&&V&&i.jsx(x0,{onClose:()=>{y(!1),I(null)},onSubmit:je,initialData:V,isEditing:!0}),k&&q&&i.jsx("div",{className:"modal-overlay",onClick:()=>U(!1),children:i.jsxs("div",{className:"modal-content",onClick:ne=>ne.stopPropagation(),style:{maxWidth:"400px"},children:[i.jsx("div",{className:"modal-header",children:i.jsxs("h3",{style:{color:"#dc2626",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(gy,{size:20}),n("deletePost")]})}),i.jsxs("div",{className:"modal-body",children:[i.jsxs("p",{style:{margin:"0 0 1rem 0",color:"var(--text)"},children:[n("areYouSureDelete")," ",i.jsxs("strong",{children:['"',q.title,'"']}),"?"]}),i.jsx("p",{style:{margin:"0",color:"var(--text-light)",fontSize:"0.875rem"},children:n("thisActionCannotBeUndone")})]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",padding:"1rem"},children:[i.jsx("button",{onClick:()=>U(!1),className:"btn btn-outline",style:{minWidth:"80px"},children:n("cancel")}),i.jsx("button",{onClick:xe,className:"btn",style:{minWidth:"80px",backgroundColor:"#dc2626",color:"white",border:"1px solid #dc2626"},children:n("delete")})]})]})}),K&&i.jsx("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,width:"350px",height:"500px",boxShadow:"0 10px 25px rgba(0,0,0,0.2)",borderRadius:"12px",overflow:"hidden",animation:"slideInUp 0.3s ease-out"},children:i.jsx(Gl,{recipientId:K.id,recipientName:K.name,recipientImageUrl:K.imageUrl,onClose:()=>{console.log("Closing chat widget"),ie(null)}})}),C&&i.jsx("div",{className:"modal-overlay",onClick:()=>T(!1),children:i.jsxs("div",{className:"modal-content",onClick:ne=>ne.stopPropagation(),style:{maxWidth:"600px"},children:[i.jsxs("div",{className:"modal-header",children:[i.jsx("h3",{children:n("howItWorks")}),i.jsx("button",{onClick:()=>T(!1),className:"modal-close",children:""})]}),i.jsx("div",{className:"modal-body",children:Q?.userType==="Host"?i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[i.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-start"},children:[i.jsx("div",{style:{fontSize:"2rem",flexShrink:0},children:"1"}),i.jsxs("div",{children:[i.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"var(--text)"},children:n("browseGuestRequests")}),i.jsx("p",{style:{margin:0,color:"#64748b",lineHeight:"1.5"},children:n("browseGuestRequests")})]})]}),i.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-start"},children:[i.jsx("div",{style:{fontSize:"2rem",flexShrink:0},children:"2"}),i.jsxs("div",{children:[i.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"var(--text)"},children:n("filterByLocation")}),i.jsx("p",{style:{margin:0,color:"#64748b",lineHeight:"1.5"},children:n("filterByLocationDesc")})]})]}),i.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-start"},children:[i.jsx("div",{style:{fontSize:"2rem",flexShrink:0},children:"3"}),i.jsxs("div",{children:[i.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"var(--text)"},children:n("contactGuest")}),i.jsx("p",{style:{margin:0,color:"#64748b",lineHeight:"1.5"},children:n("contactGuestsDesc")})]})]}),i.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-start"},children:[i.jsx("div",{style:{fontSize:"2rem",flexShrink:0},children:"4"}),i.jsxs("div",{children:[i.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"var(--text)"},children:n("createPost")}),i.jsx("p",{style:{margin:0,color:"#64748b",lineHeight:"1.5"},children:n("createYourHostPost")})]})]})]}):i.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem"},children:[i.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-start"},children:[i.jsx("div",{style:{fontSize:"2rem",flexShrink:0},children:"1"}),i.jsxs("div",{children:[i.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"var(--text)"},children:n("allPosts")}),i.jsx("p",{style:{margin:0,color:"#64748b",lineHeight:"1.5"},children:n("browseAllPostsDesc")})]})]}),i.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-start"},children:[i.jsx("div",{style:{fontSize:"2rem",flexShrink:0},children:"2"}),i.jsxs("div",{children:[i.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"var(--text)"},children:n("filterByLocation")}),i.jsx("p",{style:{margin:0,color:"#64748b",lineHeight:"1.5"},children:n("filterByLocationGuest")})]})]}),i.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-start"},children:[i.jsx("div",{style:{fontSize:"2rem",flexShrink:0},children:"3"}),i.jsxs("div",{children:[i.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"var(--text)"},children:n("createPost")}),i.jsx("p",{style:{margin:0,color:"#64748b",lineHeight:"1.5"},children:n("createYourGuestPost")})]})]}),i.jsxs("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-start"},children:[i.jsx("div",{style:{fontSize:"2rem",flexShrink:0},children:"4"}),i.jsxs("div",{children:[i.jsx("h4",{style:{margin:"0 0 0.5rem 0",color:"var(--text)"},children:n("myPosts")}),i.jsx("p",{style:{margin:0,color:"#64748b",lineHeight:"1.5"},children:n("manageYourPostsDesc")})]})]})]})})]})}),b&&A&&i.jsx(Z_,{userName:A.userName,userId:A.userId,onClose:()=>{E(!1),v(null)}})]})},Z_=({userName:n,userId:r,onClose:s})=>{const[a,c]=R.useState(null),[u,h]=R.useState(!0),[p,m]=R.useState(!1),[g,y]=R.useState({rating:0,comment:""}),[k,U]=R.useState(!1),[V,I]=R.useState(""),q=JSON.parse(localStorage.getItem("user")||"{}");R.useEffect(()=>{z()},[r]);const z=async()=>{try{const Y=await qe.post("user/public-profile",{userId:r}),fe=q?.userId,le=Y.data.reviews||[],K=le.find(De=>De.reviewerId===fe),ie=le.filter(De=>De.reviewerId!==fe).sort((De,Re)=>new Date(Re.createdAt)-new Date(De.createdAt)),ae=K?[K,...ie]:ie,Ce=!!K;c({...Y.data,reviews:ae,hasUserReview:Ce})}catch(Y){console.error("Failed to fetch profile:",Y)}finally{h(!1)}},Q=async()=>{if(I(""),!g.comment.trim()||g.rating===0){I("Please provide both rating and comment");return}U(!0);try{await qe.post("review",{userId:a.userId,rating:g.rating,comment:g.comment.trim()}),await z(),m(!1),y({rating:0,comment:""}),I("")}catch(Y){console.error("Failed to submit review:",Y),I(Y.response?.data?.message||"Failed to submit review. Please try again.")}finally{U(!1)}};return i.jsx("div",{className:"modal-overlay",onClick:s,children:i.jsxs("div",{className:"modal-content",onClick:Y=>Y.stopPropagation(),style:{maxWidth:"600px",maxHeight:"90vh",overflowY:"auto"},children:[i.jsxs("div",{className:"modal-header",style:{padding:"0.75rem 1rem"},children:[i.jsx("h3",{style:{margin:0,fontSize:"1rem"},children:u?"Loading...":a?.name||n}),i.jsx("button",{onClick:s,className:"modal-close",style:{width:"28px",height:"28px",display:"flex",alignItems:"center",justifyContent:"center",lineHeight:"1"},children:""})]}),i.jsx("div",{className:"modal-body",style:{paddingTop:"0.5rem"},children:u?i.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Loading profile..."}):a?i.jsxs(i.Fragment,{children:[i.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1rem",alignItems:"center"},children:[a.profileImageUrl?i.jsx("img",{src:a.profileImageUrl,alt:a.name,style:{width:"120px",height:"120px",borderRadius:"50%",objectFit:"cover",border:"2px solid var(--primary)",flexShrink:0}}):i.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"50%",background:"var(--primary)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"2.5rem",fontWeight:"bold",flexShrink:0},children:a.name.charAt(0).toUpperCase()}),i.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:[i.jsx("h3",{style:{margin:"0 0 0.25rem 0",fontSize:"1.1rem"},children:a.name}),i.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:i.jsxs("span",{style:{color:"#64748b",fontSize:"0.85rem"},children:[" ",a.location]})}),i.jsxs("p",{style:{color:"#64748b",fontSize:"0.8rem",margin:"0"},children:[a.userType,"  Joined ",new Date(a.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"})]})]})]}),a.bio&&i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("h4",{style:{marginBottom:"0.75rem",color:"var(--text)"},children:a.userType==="Host"?" About My Hosting":" About Me"}),i.jsx("p",{style:{color:"#475569",lineHeight:"1.5",background:"#f8fafc",padding:"1rem",borderRadius:"0.5rem",margin:0},children:a.bio})]}),a.userType==="Host"&&a.hostingAreas&&a.hostingAreas.length>0&&i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("h4",{style:{marginBottom:"0.75rem",color:"var(--text)"},children:" Hosting Areas"}),i.jsx("div",{style:{background:"#f0fdf4",padding:"1rem",borderRadius:"0.5rem",border:"1px solid #86efac"},children:a.hostingAreas.map((Y,fe)=>i.jsxs("div",{style:{marginBottom:fe<a.hostingAreas.length-1?"0.5rem":"0",color:"#166534"},children:[i.jsxs("strong",{children:[Y.state,":"]})," ",Y.cities.join(", ")]},fe))})]}),i.jsxs("div",{children:[i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[i.jsxs("h4",{style:{margin:"0",color:"var(--text)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[" Reviews (",a.totalReviews||a.reviews?.length||0,")",a.averageRating>0&&i.jsxs("span",{style:{fontSize:"0.9rem",color:"#64748b"},children:["(",a.averageRating.toFixed(1)," avg)"]})]}),!a.hasUserReview&&i.jsx("button",{className:"btn btn-outline",onClick:()=>m(!p),style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:p?"Cancel":"Write Review"})]}),p&&i.jsxs("div",{style:{background:"#f8fafc",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1rem"},children:[V&&i.jsx("div",{style:{background:"#fee2e2",color:"#dc2626",padding:"0.5rem",borderRadius:"0.375rem",marginBottom:"0.75rem",fontSize:"0.85rem"},children:V}),i.jsxs("div",{style:{marginBottom:"0.75rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Rating:"}),i.jsx("div",{style:{display:"flex",gap:"0.25rem"},children:Array.from({length:5},(Y,fe)=>i.jsx("button",{type:"button",onClick:()=>{y(le=>({...le,rating:fe+1})),I("")},style:{background:"none",border:"none",fontSize:"1.5rem",cursor:"pointer",color:fe<g.rating?"#fbbf24":"#d1d5db",padding:"0"},children:""},fe))})]}),i.jsxs("div",{style:{marginBottom:"0.75rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Comment:"}),i.jsx("textarea",{value:g.comment,onChange:Y=>{y(fe=>({...fe,comment:Y.target.value})),I("")},placeholder:"Share your experience...",rows:3,style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",resize:"vertical",fontFamily:"inherit"}})]}),i.jsx("button",{className:"btn btn-primary",onClick:Q,disabled:k,style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:k?"Submitting...":"Submit Review"})]}),a.reviews&&a.reviews.length>0&&i.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:a.reviews.map((Y,fe)=>{const le=Y.reviewerId===q?.userId;return i.jsxs("div",{style:{background:le?"#fef3c7":"#f8fafc",padding:"0.75rem",borderRadius:"0.5rem",border:`1px solid ${le?"#fbbf24":"var(--border)"}`,marginBottom:"0.75rem",position:"relative"},children:[le&&i.jsx("div",{style:{position:"absolute",top:"0.5rem",right:"0.5rem",background:"#fbbf24",color:"white",padding:"0.125rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.7rem",fontWeight:"600"},children:"Your Review"}),i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.25rem",paddingRight:le?"5rem":"0"},children:[i.jsx("strong",{style:{fontSize:"0.9rem"},children:Y.reviewerName}),i.jsx("div",{children:Array.from({length:5},(K,ie)=>i.jsx("span",{style:{color:ie<Y.rating?"#fbbf24":"#d1d5db"},children:""},ie))})]}),i.jsx("p",{style:{margin:"0 0 0.25rem 0",fontSize:"0.85rem",color:"#475569",lineHeight:"1.4"},children:Y.comment}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#94a3b8"},children:new Date(Y.createdAt).toLocaleDateString()})]},fe)})}),(!a.reviews||a.reviews.length===0)&&!p&&i.jsx("p",{style:{color:"#64748b",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:"No reviews yet. Be the first to share your experience!"})]})]}):i.jsx("div",{style:{textAlign:"center",padding:"2rem"},children:"Profile not found"})})]})})},e4=({onClose:n,onSubmit:r,user:s,initialData:a=null,isEditing:c=!1})=>{const[u,h]=R.useState({title:a?.title||"",commenceDate:a?.commenceDate||"",maxGuests:a?.maxGuests||2,pricePerNight:a?.pricePerNight||0,amenities:a?.amenities||[],content:a?.content||""}),[p,m]=R.useState({}),[g,y]=R.useState(!1),U=(s?.hostingAreas||[]).filter(z=>z.state&&z.cities&&z.cities.length>0).map(z=>`${z.cities.join(", ")} (${z.state})`).join(" | "),V=[{name:"WiFi",icon:""},{name:"Parking",icon:""},{name:"Meals",icon:""},{name:"AC",icon:""},{name:"Kitchen",icon:""},{name:"Laundry",icon:""},{name:"TV",icon:""},{name:"Hot Water",icon:""}],I=async z=>{if(z.preventDefault(),g)return;const Q={};if(u.title.trim()?u.title.trim().length<10&&(Q.title="Title must be at least 10 characters long"):Q.title="Title is required",u.commenceDate||(Q.commenceDate="Commence date is required"),(!u.maxGuests||u.maxGuests<1||u.maxGuests>20)&&(Q.maxGuests="Max guests must be between 1 and 20"),u.pricePerNight<0&&(Q.pricePerNight="Price cannot be negative"),u.content&&u.content.trim().length>0&&u.content.trim().length<20&&(Q.content="Additional details should be at least 20 characters long"),m(Q),!(Object.keys(Q).length>0))try{y(!0);const Y={...u,location:U,maxGuests:parseInt(u.maxGuests),pricePerNight:parseFloat(u.pricePerNight),content:u.content.trim(),commenceDate:new Date(u.commenceDate+"T00:00:00.000Z").toISOString()};await r(Y)}catch(Y){console.error("Error submitting post:",Y),alert(Y.response?.data?.message||Y.message||"Failed to save post. Please try again.")}finally{y(!1)}},q=z=>{h(Q=>({...Q,amenities:Q.amenities.includes(z)?Q.amenities.filter(Y=>Y!==z):[...Q.amenities,z]}))};return i.jsx("div",{className:"modal-overlay",onClick:n,children:i.jsxs("div",{className:"create-post-modal",onClick:z=>z.stopPropagation(),children:[i.jsxs("div",{className:"modal-header-modern",children:[i.jsxs("div",{className:"modal-title-section",children:[i.jsx("div",{className:"modal-icon",children:""}),i.jsxs("div",{children:[i.jsx("h2",{children:c?"Edit Host Post":"Create Host Post"}),i.jsx("p",{children:"Share your hosting services with guests"})]})]}),i.jsx("button",{onClick:n,className:"modal-close-modern",children:""})]}),i.jsx("div",{className:"modal-body-modern",children:i.jsxs("form",{onSubmit:I,className:"modern-form",children:[i.jsxs("div",{className:"form-group-modern",children:[i.jsxs("label",{className:"modern-label",children:[i.jsx("span",{className:"label-text",children:"Service Title"}),i.jsx("span",{className:"required-star",children:"*"})]}),i.jsx("input",{type:"text",className:"modern-input",value:u.title,onChange:z=>{h(Q=>({...Q,title:z.target.value})),m(Q=>({...Q,title:!1}))},placeholder:"e.g., Comfortable stay with traditional hospitality",required:!0,style:{borderColor:p.title?"#dc2626":"var(--border)"}}),p.title&&i.jsx("div",{style:{color:"#dc2626",fontSize:"0.875rem",marginTop:"0.25rem"},children:p.title})]}),i.jsxs("div",{className:"form-group-modern",children:[i.jsxs("label",{className:"modern-label",children:[i.jsx("span",{className:"label-text",children:"Commence Date"}),i.jsx("span",{className:"required-star",children:"*"})]}),i.jsx("input",{type:"date",className:"modern-input",value:u.commenceDate,onChange:z=>{h(Q=>({...Q,commenceDate:z.target.value})),m(Q=>({...Q,commenceDate:!1}))},style:{borderColor:p.commenceDate?"#dc2626":"var(--border)"},required:!0}),p.commenceDate&&i.jsx("div",{style:{color:"#dc2626",fontSize:"0.875rem",marginTop:"0.25rem"},children:p.commenceDate})]}),i.jsxs("div",{className:"form-group-modern",children:[i.jsx("label",{className:"modern-label",children:i.jsx("span",{className:"label-text",children:"Hosting Areas"})}),i.jsx("div",{style:{padding:"1rem",background:"#f0fdf4",border:"1px solid #86efac",borderRadius:"0.5rem",color:"#166534",fontSize:"0.9rem"},children:U||"No hosting areas configured in profile"}),i.jsx("p",{style:{fontSize:"0.75rem",color:"#64748b",margin:"0.5rem 0 0 0"},children:"Update hosting areas in your profile settings"})]}),i.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{className:"modern-label",style:{marginBottom:"0.5rem",display:"block"},children:i.jsx("span",{className:"label-text",children:"Max Guests"})}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx("button",{type:"button",onClick:()=>h(z=>({...z,maxGuests:Math.max(1,z.maxGuests-1)})),style:{width:"32px",height:"32px",border:"1px solid var(--border)",borderRadius:"0.375rem",background:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:""}),i.jsx("input",{type:"number",min:"1",max:"20",value:u.maxGuests,onChange:z=>h(Q=>({...Q,maxGuests:parseInt(z.target.value)||1})),style:{width:"60px",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",textAlign:"center"}}),i.jsx("button",{type:"button",onClick:()=>h(z=>({...z,maxGuests:Math.min(20,z.maxGuests+1)})),style:{width:"32px",height:"32px",border:"1px solid var(--border)",borderRadius:"0.375rem",background:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"modern-label",style:{marginBottom:"0.5rem",display:"block"},children:i.jsx("span",{className:"label-text",children:"Price/Night ()"})}),i.jsx("input",{type:"number",min:"0",step:"100",value:u.pricePerNight,onChange:z=>h(Q=>({...Q,pricePerNight:parseFloat(z.target.value)||0})),style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem"},placeholder:"0"})]})]}),i.jsxs("div",{className:"form-group-modern",children:[i.jsx("label",{className:"modern-label",children:i.jsx("span",{className:"label-text",children:"Amenities & Services"})}),i.jsx("div",{className:"facilities-compact",children:V.map(z=>i.jsxs("button",{type:"button",onClick:()=>q(z.name),className:`facility-btn-compact ${u.amenities.includes(z.name)?"selected":""}`,children:[i.jsx("span",{className:"facility-icon-small",children:z.icon}),i.jsx("span",{children:z.name})]},z.name))})]}),i.jsxs("div",{className:"form-group-modern",children:[i.jsx("label",{className:"modern-label",children:i.jsx("span",{className:"label-text",children:"Additional Details"})}),i.jsx("textarea",{className:"modern-textarea",value:u.content,onChange:z=>{h(Q=>({...Q,content:z.target.value})),m(Q=>({...Q,content:!1}))},placeholder:"Describe your hosting services, house rules, nearby attractions, and any other important information for guests...",rows:4,style:{borderColor:p.content?"#dc2626":"var(--border)"}}),p.content&&i.jsx("div",{style:{color:"#dc2626",fontSize:"0.875rem",marginTop:"0.25rem"},children:p.content})]}),i.jsxs("div",{className:"form-actions",children:[i.jsx("button",{type:"button",onClick:n,className:"btn-secondary-modern",disabled:g,children:"Cancel"}),i.jsx("button",{type:"submit",className:"btn-primary-modern",disabled:g,children:g?i.jsxs(i.Fragment,{children:[i.jsx("span",{children:"Saving..."}),i.jsx("span",{className:"btn-icon",children:""})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{children:c?"Update Post":"Create Post"}),i.jsx("span",{className:"btn-icon",children:c?"":""})]})})]})]})})]})})},x0=({onClose:n,onSubmit:r,initialData:s=null,isEditing:a=!1})=>{const[c,u]=R.useState({title:s?.title||"",planningDate:s?.planningDate||"",state:s?.location?.split(", ")[1]||"",city:s?.location?.split(", ")[0]||"",facilities:s?.facilities||[],visitors:s?.visitors||1,days:s?.days||1,content:s?.content||""}),[h,p]=R.useState({}),[m,g]=R.useState({}),[y,k]=R.useState(!1);R.useEffect(()=>{(async()=>{try{const z=await Wo.getLocations();p(z)}catch(z){console.error("Failed to load locations:",z),p({"Tamil Nadu":["Chennai","Coimbatore","Madurai","Other"],Karnataka:["Bangalore","Mysore","Mangalore","Other"],Kerala:["Kochi","Thiruvananthapuram","Kozhikode","Other"],"Andhra Pradesh":["Hyderabad","Visakhapatnam","Vijayawada","Other"],Maharashtra:["Mumbai","Pune","Nagpur","Other"],Delhi:["New Delhi","Other"]})}})()},[]);const U=[{name:"WiFi",icon:""},{name:"Parking",icon:""},{name:"Meals",icon:""},{name:"AC",icon:""},{name:"Kitchen",icon:""},{name:"Laundry",icon:""},{name:"TV",icon:""},{name:"Hot Water",icon:""}],V=async q=>{if(q.preventDefault(),y)return;const z={};if(c.title.trim()?c.title.trim().length<5&&(z.title="Title must be at least 5 characters long"):z.title="Title is required",c.state||(z.state="Please select a state"),c.city||(z.city="Please select a city"),c.planningDate){const Q=new Date(c.planningDate),Y=new Date;Y.setHours(0,0,0,0),Q<Y&&(z.planningDate="Planning date should be today or in the future")}if((!c.visitors||c.visitors<1||c.visitors>10)&&(z.visitors="Visitors must be between 1 and 10"),(!c.days||c.days<1||c.days>30)&&(z.days="Days must be between 1 and 30"),c.content&&c.content.trim().length>0&&c.content.trim().length<10&&(z.content="Description should be at least 10 characters long"),g(z),!(Object.keys(z).length>0))try{k(!0);const Q=`${c.city}, ${c.state}`,Y={...c,location:Q,visitors:parseInt(c.visitors),days:parseInt(c.days),content:c.content.trim()};await r(Y)}catch(Q){console.error("Error submitting post:",Q);const Y=Q.response?.data?.message||Q.message||"Failed to save post. Please try again.";alert(Y)}finally{k(!1)}},I=q=>{u(z=>({...z,facilities:z.facilities.includes(q)?z.facilities.filter(Q=>Q!==q):[...z.facilities,q]}))};return i.jsx("div",{className:"modal-overlay",onClick:n,children:i.jsxs("div",{className:"create-post-modal",onClick:q=>q.stopPropagation(),children:[i.jsxs("div",{className:"modal-header-modern",children:[i.jsxs("div",{className:"modal-title-section",children:[i.jsx("div",{className:"modal-icon",children:""}),i.jsxs("div",{children:[i.jsx("h2",{children:a?"Edit Post":"Create New Post"}),i.jsx("p",{children:a?"Update your accommodation request":"Share your accommodation needs with hosts"})]})]}),i.jsx("button",{onClick:n,className:"modal-close-modern",children:""})]}),i.jsx("div",{className:"modal-body-modern",children:i.jsxs("form",{onSubmit:V,className:"modern-form",children:[i.jsxs("div",{className:"form-group-modern",children:[i.jsxs("label",{className:"modern-label",children:[i.jsx("span",{className:"label-text",children:"Title"}),i.jsx("span",{className:"required-star",children:"*"})]}),i.jsx("input",{type:"text",className:"modern-input",value:c.title,onChange:q=>{u(z=>({...z,title:q.target.value})),g(z=>({...z,title:!1}))},placeholder:"e.g., Looking for cozy stay during Diwali",required:!0,style:{borderColor:m.title?"#dc2626":"var(--border)"}}),m.title&&i.jsx("div",{style:{color:"#dc2626",fontSize:"0.875rem",marginTop:"0.25rem"},children:m.title})]}),i.jsxs("div",{className:"form-group-modern",children:[i.jsx("label",{className:"modern-label",children:i.jsx("span",{className:"label-text",children:"Planning Date"})}),i.jsx("input",{type:"date",className:"modern-input",value:c.planningDate,onChange:q=>{u(z=>({...z,planningDate:q.target.value})),g(z=>({...z,planningDate:!1}))},style:{borderColor:m.planningDate?"#dc2626":"var(--border)"},min:new Date().toISOString().split("T")[0]}),m.planningDate&&i.jsx("div",{style:{color:"#dc2626",fontSize:"0.875rem",marginTop:"0.25rem"},children:m.planningDate})]}),i.jsxs("div",{className:"form-group-modern",children:[i.jsxs("label",{className:"modern-label",children:[i.jsx("span",{className:"label-text",children:"Visiting State"}),i.jsx("span",{className:"required-star",children:"*"})]}),i.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:Object.keys(h).map(q=>i.jsx("button",{type:"button",onClick:()=>{u(z=>({...z,state:q,city:""})),g(z=>({...z,state:!1,city:!1}))},style:{padding:"0.75rem 1.25rem",border:`2px solid ${m.state?"#dc2626":"#e5e7eb"}`,borderRadius:"8px",background:c.state===q?"#667eea":"white",color:c.state===q?"white":"#374151",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",transition:"all 0.2s ease",boxShadow:c.state===q?"0 4px 12px rgba(102, 126, 234, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1)"},children:q},q))}),m.state&&i.jsx("div",{style:{color:"#dc2626",fontSize:"0.875rem",marginTop:"0.25rem"},children:m.state})]}),c.state&&i.jsxs("div",{className:"form-group-modern",children:[i.jsxs("label",{className:"modern-label",children:[i.jsx("span",{className:"label-text",children:"Visiting City"}),i.jsx("span",{className:"required-star",children:"*"})]}),i.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:h[c.state]&&h[c.state].map(q=>i.jsx("button",{type:"button",onClick:()=>{u(z=>({...z,city:q})),g(z=>({...z,city:!1}))},style:{padding:"0.5rem 1rem",border:`2px solid ${m.city?"#dc2626":"#e5e7eb"}`,borderRadius:"6px",background:c.city===q?"#667eea":"white",color:c.city===q?"white":"#374151",cursor:"pointer",fontSize:"0.8rem",fontWeight:"500",transition:"all 0.2s ease"},children:q},q))}),m.city&&i.jsx("div",{style:{color:"#dc2626",fontSize:"0.875rem",marginTop:"0.25rem"},children:m.city})]}),i.jsxs("div",{className:"form-group-modern",children:[i.jsx("label",{className:"modern-label",children:i.jsx("span",{className:"label-text",children:"Preferred Facilities"})}),i.jsx("div",{className:"facilities-compact",children:U.map(q=>i.jsxs("button",{type:"button",onClick:()=>I(q.name),className:`facility-btn-compact ${c.facilities.includes(q.name)?"selected":""}`,children:[i.jsx("span",{className:"facility-icon-small",children:q.icon}),i.jsx("span",{children:q.name})]},q.name))})]}),i.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[i.jsxs("div",{children:[i.jsx("label",{className:"modern-label",style:{marginBottom:"0.5rem",display:"block"},children:i.jsx("span",{className:"label-text",children:"Visitors"})}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx("button",{type:"button",onClick:()=>u(q=>({...q,visitors:Math.max(1,q.visitors-1)})),style:{width:"32px",height:"32px",border:"1px solid var(--border)",borderRadius:"0.375rem",background:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:""}),i.jsx("input",{type:"number",min:"1",max:"10",value:c.visitors,onChange:q=>u(z=>({...z,visitors:parseInt(q.target.value)||1})),style:{width:"60px",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",textAlign:"center"}}),i.jsx("button",{type:"button",onClick:()=>u(q=>({...q,visitors:Math.min(10,q.visitors+1)})),style:{width:"32px",height:"32px",border:"1px solid var(--border)",borderRadius:"0.375rem",background:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"modern-label",style:{marginBottom:"0.5rem",display:"block"},children:i.jsx("span",{className:"label-text",children:"Days"})}),i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx("button",{type:"button",onClick:()=>u(q=>({...q,days:Math.max(1,q.days-1)})),style:{width:"32px",height:"32px",border:"1px solid var(--border)",borderRadius:"0.375rem",background:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:""}),i.jsx("input",{type:"number",min:"1",max:"30",value:c.days,onChange:q=>u(z=>({...z,days:parseInt(q.target.value)||1})),style:{width:"60px",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",textAlign:"center"}}),i.jsx("button",{type:"button",onClick:()=>u(q=>({...q,days:Math.min(30,q.days+1)})),style:{width:"32px",height:"32px",border:"1px solid var(--border)",borderRadius:"0.375rem",background:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"})]})]})]}),i.jsxs("div",{className:"form-group-modern",children:[i.jsx("label",{className:"modern-label",children:i.jsx("span",{className:"label-text",children:"Additional Details"})}),i.jsx("textarea",{className:"modern-textarea",value:c.content,onChange:q=>{u(z=>({...z,content:q.target.value})),g(z=>({...z,content:!1}))},placeholder:"Describe your accommodation needs, preferences, and any special requirements...",rows:4,style:{borderColor:m.content?"#dc2626":"var(--border)"}}),m.content&&i.jsx("div",{style:{color:"#dc2626",fontSize:"0.875rem",marginTop:"0.25rem"},children:m.content})]}),i.jsxs("div",{className:"form-actions",children:[i.jsx("button",{type:"button",onClick:n,className:"btn-secondary-modern",disabled:y,children:"Cancel"}),i.jsx("button",{type:"submit",className:"btn-primary-modern",disabled:y,children:y?i.jsxs(i.Fragment,{children:[i.jsx("span",{children:"Saving..."}),i.jsx("span",{className:"btn-icon",children:""})]}):i.jsxs(i.Fragment,{children:[i.jsx("span",{children:a?"Update Post":"Create Post"}),i.jsx("span",{className:"btn-icon",children:a?"":""})]})})]})]})})]})})},t4=()=>i.jsx("div",{className:"legal-document",children:i.jsxs("div",{className:"container",children:[i.jsx("h1",{children:"Privacy Policy"}),i.jsxs("p",{className:"last-updated",children:["Last Updated: ",new Date().toLocaleDateString("en-IN")]}),i.jsxs("section",{children:[i.jsx("h2",{children:"1. Introduction"}),i.jsx("p",{children:'Local Host Connect ("we," "our," or "us") operates the FestiveGuestWebApp platform that connects travelers with local hosts. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our service.'}),i.jsx("p",{children:"By using our service, you agree to the collection and use of information in accordance with this policy."})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"2. Information We Collect"}),i.jsx("h3",{children:"2.1 Personal Information"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Full name, email address, phone number, and state (from registration)"}),i.jsx("li",{children:"Messages exchanged via WhatsApp (only for subscription verification)"}),i.jsx("li",{children:"Screenshots of payment confirmations (used solely for subscription activation)"}),i.jsx("li",{children:"Profile photos and accommodation photos"}),i.jsx("li",{children:"Address and location information"}),i.jsx("li",{children:"Emergency contact details"})]}),i.jsx("h3",{children:"2.2 Usage Information"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Device information (IP address, browser type, operating system)"}),i.jsx("li",{children:"Usage patterns and preferences"}),i.jsx("li",{children:"Communication records between users"}),i.jsx("li",{children:"Location data when using our services"}),i.jsx("li",{children:"Cookies and similar tracking technologies"})]}),i.jsx("h3",{children:"2.3 User-Generated Content"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Reviews and ratings"}),i.jsx("li",{children:"Messages and communications"}),i.jsx("li",{children:"Photos and descriptions of accommodations"}),i.jsx("li",{children:"Profile information and preferences"})]})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"3. How We Use Your Information"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Facilitate connections between hosts and guests"}),i.jsx("li",{children:"Verify subscription payments manually via WhatsApp"}),i.jsx("li",{children:"Update your database and unlock premium features"}),i.jsx("li",{children:"Communicate with users about their account and support"}),i.jsx("li",{children:"Verify user identity and ensure platform safety"}),i.jsx("li",{children:"Provide customer support and resolve disputes"}),i.jsx("li",{children:"Send important notifications about bookings and safety"}),i.jsx("li",{children:"Improve our services and user experience"}),i.jsx("li",{children:"Comply with legal obligations and prevent fraud"})]})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"4. Information Sharing and Disclosure"}),i.jsx("h3",{children:"4.1 No Third-Party Sharing"}),i.jsxs("p",{children:[i.jsx("strong",{children:"We do not share your personal information or payment details with any external services or third parties."})," Your data remains confidential and is used solely for platform operations."]}),i.jsx("h3",{children:"4.2 Privacy-First Approach"}),i.jsx("p",{children:"We prioritize user privacy and do NOT share personal contact details (email addresses, phone numbers) directly between users. Instead:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Contact information is masked/hidden in user profiles"}),i.jsx("li",{children:"Users communicate through our secure in-app chat system"}),i.jsx("li",{children:"Contact sharing is entirely voluntary and at user discretion"}),i.jsx("li",{children:"We collect contact details solely for our reference and emergency purposes"})]}),i.jsx("h3",{children:"4.3 What We Share Between Users"}),i.jsx("p",{children:"We only share non-sensitive information necessary for connections:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Profile information (name, photo, bio, preferences)"}),i.jsx("li",{children:"Accommodation details and photos (for hosts)"}),i.jsx("li",{children:"Reviews and ratings"}),i.jsx("li",{children:"General location area (not exact addresses)"}),i.jsx("li",{children:"Availability and travel dates"})]}),i.jsx("h3",{children:"4.4 Legal Requirements"}),i.jsx("p",{children:"We may disclose your information when required by law, court order, or government request, or to protect our rights, property, or safety."}),i.jsx("h3",{children:"4.5 Business Transfers"}),i.jsx("p",{children:"In the event of a merger, acquisition, or sale of assets, your information may be transferred as part of the business transaction."})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"5. Data Storage and Security"}),i.jsx("h3",{children:"5.1 Data Storage"}),i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Payment Screenshots:"})," Stored temporarily until verification is complete, then deleted within 7 days"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"User Account Details:"})," Stored securely in our database hosted on Azure Static Web Apps"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Access Control:"})," Access to user data is restricted to authorized admins only"]})]}),i.jsx("h3",{children:"5.2 Security Measures"}),i.jsx("p",{children:"We implement appropriate technical and organizational security measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction. However, no method of transmission over the internet is 100% secure, and we cannot guarantee absolute security."}),i.jsx("p",{children:"Security Measures Include:"}),i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Secure Hosting:"})," Hosted on Microsoft Azure with enterprise-grade security features"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Encryption:"})," SSL/TLS encryption for data in transit"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Access Controls:"})," Role-based access control with restricted admin access"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Limited Access:"})," Personal data access restricted to authorized personnel only on a need-to-know basis"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Regular Monitoring:"})," Security monitoring and vulnerability assessments"]})]}),i.jsx("h3",{children:"5.3 Data Breach Notification"}),i.jsx("p",{children:"In the event of a data breach that may compromise your personal information, we will notify affected users within 72 hours of becoming aware of the breach, as required by applicable law."})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"6. Data Retention"}),i.jsx("p",{children:"We retain your personal information for as long as necessary to provide our services and comply with legal obligations. Specific retention periods:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Account information: Until account deletion plus 7 years for legal compliance"}),i.jsx("li",{children:"Transaction records: 7 years from transaction date"}),i.jsx("li",{children:"Communication records: 3 years from last communication"}),i.jsx("li",{children:"Marketing data: Until you withdraw consent"})]})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"7. Your Rights"}),i.jsx("p",{children:"Under applicable data protection laws, you have the following rights:"}),i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Access:"})," Request copies of your personal information"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Rectification:"})," Request correction of inaccurate information"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Erasure:"})," Request deletion of your personal information (account + payment proof)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Portability:"})," Request transfer of your data to another service"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Restriction:"})," Request limitation of processing"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Objection:"})," Object to processing for marketing purposes"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Withdraw Consent:"})," Withdraw consent for data processing"]})]}),i.jsx("p",{children:"To exercise these rights, contact us via WhatsApp at [Your WhatsApp Number] or email at privacy@localhostconnect.com"})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"8. Cookies and Tracking Technologies"}),i.jsx("p",{children:"We use cookies and similar technologies to enhance your experience. Types of cookies we use:"}),i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Essential Cookies:"})," Required for basic platform functionality (session management, authentication)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Performance Cookies:"})," Google Analytics to understand user interactions and improve platform performance"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Functional Cookies:"})," Remember your preferences, settings, and language choices"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Marketing Cookies:"})," Used to deliver relevant advertisements (if applicable)"]})]}),i.jsx("p",{children:"You can control cookie preferences through your browser settings. Note that disabling essential cookies may affect platform functionality."}),i.jsx("h3",{children:"8.1 Session Cookies"}),i.jsx("p",{children:"We use session cookies to maintain your login state and ensure secure access to your account. These cookies are deleted when you close your browser."}),i.jsx("h3",{children:"8.2 Analytics and Tracking"}),i.jsx("p",{children:"We use Google Analytics to collect anonymized data about how users interact with our platform. This helps us improve user experience and identify technical issues. You can opt out of Google Analytics by installing the Google Analytics Opt-out Browser Add-on."})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"9. International Data Transfers"}),i.jsx("p",{children:"Your information may be transferred to and processed in countries other than your country of residence. We ensure appropriate safeguards are in place for such transfers, including:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Adequacy decisions by relevant authorities"}),i.jsx("li",{children:"Standard contractual clauses"}),i.jsx("li",{children:"Binding corporate rules"}),i.jsx("li",{children:"Certification schemes"})]})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"10. Children's Privacy"}),i.jsx("p",{children:"Our service is not intended for individuals under 18 years of age. We do not knowingly collect personal information from children under 18. If we become aware that we have collected personal information from a child under 18, we will take steps to delete such information."})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"11. Third-Party Links"}),i.jsx("p",{children:"Our platform may contain links to third-party websites or services. We are not responsible for the privacy practices of these third parties. We encourage you to review their privacy policies before providing any personal information."})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"12. Changes to This Privacy Policy"}),i.jsx("p",{children:"We may update this Privacy Policy from time to time. We will notify you of any material changes by:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Posting the updated policy on our platform"}),i.jsx("li",{children:"Sending email notifications to registered users"}),i.jsx("li",{children:"Displaying prominent notices on our platform"})]}),i.jsx("p",{children:"Your continued use of our service after changes become effective constitutes acceptance of the updated policy."})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"13. Contact Information"}),i.jsxs("div",{className:"contact-info",children:[i.jsx("p",{children:i.jsx("strong",{children:"Data Protection Officer / Privacy Contact:"})}),i.jsx("p",{children:"Email: privacy@localhostconnect.com"}),i.jsx("p",{children:"Support Email: support@localhostconnect.com"}),i.jsxs("p",{children:["For general inquiries, please visit our ",i.jsx(Nt,{to:"/help",style:{color:"var(--primary)",textDecoration:"none"},children:"Help & Support page"}),"."]}),i.jsx("p",{children:i.jsx("strong",{children:"Mailing Address:"})}),i.jsxs("p",{children:["Local Host Connect",i.jsx("br",{}),"[Your Business Address]",i.jsx("br",{}),"[City, State, PIN Code]",i.jsx("br",{}),"India"]})]})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"14. Manual Payment Verification"}),i.jsxs("p",{children:[i.jsx("strong",{children:"Important Notice:"})," FestiveGuest uses a manual payment verification process via WhatsApp for subscription payments."]}),i.jsx("h3",{children:"14.1 Process"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Payments are verified manually by our team"}),i.jsx("li",{children:"Users submit payment screenshots via WhatsApp"}),i.jsx("li",{children:"Verification may take up to 24-48 hours"})]}),i.jsx("h3",{children:"14.2 Limitations"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Delays may occur due to manual verification process"}),i.jsx("li",{children:"FestiveGuest is not liable for incorrect or fraudulent payment screenshots"}),i.jsx("li",{children:"Users are responsible for submitting accurate payment proof"}),i.jsx("li",{children:"Refunds are subject to verification and our refund policy"})]}),i.jsx("h3",{children:"14.3 Data Handling"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Payment screenshots are stored temporarily for verification only"}),i.jsx("li",{children:"Screenshots are deleted within 7 days after verification"}),i.jsx("li",{children:"No payment information is shared with third parties"})]})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"15. Governing Law"}),i.jsx("p",{children:"This Privacy Policy is governed by the laws of India. Any disputes arising from this policy will be subject to the exclusive jurisdiction of the courts in [Your City], India."})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"16. Compliance"}),i.jsx("p",{children:"We comply with applicable data protection laws, including:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Information Technology Act, 2000 (India)"}),i.jsx("li",{children:"Information Technology (Reasonable Security Practices and Procedures and Sensitive Personal Data or Information) Rules, 2011"}),i.jsx("li",{children:"Digital Personal Data Protection Act, 2023 (when applicable)"}),i.jsx("li",{children:"General Data Protection Regulation (GDPR) for EU users"})]})]})]})});function n4(){const[n,r]=R.useState("free"),[s,a]=R.useState(!0),[c,u]=R.useState(0),[h,p]=R.useState(""),[m,g]=R.useState("Guest");R.useEffect(()=>{y()},[]);const y=async()=>{try{const Y=await qe.get("user/profile");r(Y.data.subscriptionStatus||"free"),u(Y.data.referralPoints||0),p(Y.data.referralCode||""),g(Y.data.userType||"Guest")}catch(Y){console.error("Failed to fetch subscription status:",Y)}finally{a(!1)}},k=()=>{const Y=encodeURIComponent("I want to upgrade my subscription.");window.open(`https://wa.me/919966888484?text=${Y}`,"_blank")},U=()=>{const Y={free:{text:"Free",color:"#64748b",bg:"#f1f5f9"},pending:{text:"Pending Approval",color:"#f59e0b",bg:"#fef3c7"},paid:{text:" Premium",color:"#10b981",bg:"#dcfce7"}},fe=Y[n]||Y.free;return i.jsx("span",{style:{fontWeight:"bold",color:fe.color,padding:"0.25rem 0.75rem",borderRadius:"1rem",background:fe.bg},children:fe.text})},V=["View host profiles","Basic search filters","Send up to 5 messages per day","View public reviews"],I=["Unlimited messaging","Advanced search filters","Priority support","Verified badge on profile","See who viewed your profile","Ad-free experience"];if(s)return i.jsx("div",{style:{textAlign:"center",padding:"3rem"},children:i.jsx("div",{className:"loading",children:"Loading subscription details..."})});const q=n==="paid",z=n==="pending",Q=m==="Host"?299:199;return i.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",padding:"2rem"},children:[i.jsxs("div",{style:{textAlign:"center",marginBottom:"3rem"},children:[i.jsxs("h1",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[i.jsx(kl,{size:32,style:{color:q?"#f59e0b":"#64748b"}}),"Subscription"]}),i.jsxs("p",{style:{color:"#64748b",fontSize:"1.1rem"},children:["Current Status: ",U()]}),z&&i.jsx("div",{style:{marginTop:"1rem",padding:"1rem",background:"#fef3c7",border:"1px solid #fbbf24",borderRadius:"0.5rem",color:"#92400e",maxWidth:"500px",margin:"1rem auto 0"},children:" Your upgrade request is pending admin approval. You'll be notified once approved."})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"2rem"},children:[i.jsxs("div",{style:{background:"white",border:"2px solid #e2e8f0",borderRadius:"1rem",padding:"2rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)"},children:[i.jsx("h2",{style:{margin:"0 0 0.5rem 0",fontSize:"1.5rem"},children:"Free Plan"}),i.jsx("p",{style:{color:"#64748b",marginBottom:"1.5rem"},children:"Basic features for casual users"}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:"0"}),i.jsx("div",{style:{color:"#64748b",fontSize:"0.9rem"},children:"Forever free"})]}),i.jsx("div",{style:{marginBottom:"1.5rem"},children:V.map((Y,fe)=>i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[i.jsx(uy,{size:18,style:{color:"#10b981",flexShrink:0}}),i.jsx("span",{style:{fontSize:"0.9rem"},children:Y})]},fe))}),!q&&!z&&i.jsx("div",{style:{padding:"0.75rem",background:"#f1f5f9",borderRadius:"0.5rem",textAlign:"center",color:"#64748b",fontWeight:"600"},children:"Current Plan"})]}),i.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"2px solid #667eea",borderRadius:"1rem",padding:"2rem",boxShadow:"0 10px 25px rgba(102, 126, 234, 0.3)",color:"white",position:"relative"},children:[q&&i.jsx("div",{style:{position:"absolute",top:"-12px",right:"20px",background:"#f59e0b",color:"white",padding:"0.25rem 1rem",borderRadius:"1rem",fontSize:"0.8rem",fontWeight:"bold",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.2)"},children:"ACTIVE"}),i.jsxs("h2",{style:{margin:"0 0 0.5rem 0",fontSize:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(kl,{size:24,style:{color:"#f59e0b"}}),"Premium Plan"]}),i.jsx("p",{style:{opacity:.9,marginBottom:"1.5rem"},children:"Unlock all features"}),i.jsxs("div",{style:{marginBottom:"1.5rem"},children:[i.jsxs("div",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"0.5rem"},children:["",Q]}),i.jsx("div",{style:{opacity:.8,fontSize:"0.9rem"},children:"Per month  Non-refundable"})]}),i.jsx("div",{style:{marginBottom:"1.5rem"},children:I.map((Y,fe)=>i.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem"},children:[i.jsx(uy,{size:18,style:{color:"#4ade80",flexShrink:0}}),i.jsx("span",{style:{fontSize:"0.9rem"},children:Y})]},fe))}),!q&&!z?i.jsxs("button",{onClick:k,style:{width:"100%",padding:"0.875rem",background:"white",color:"#667eea",border:"none",borderRadius:"0.5rem",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",transition:"all 0.3s ease"},onMouseOver:Y=>Y.target.style.transform="translateY(-2px)",onMouseOut:Y=>Y.target.style.transform="translateY(0)",children:[i.jsx(ii,{size:20}),"Upgrade via WhatsApp"]}):z?i.jsx("div",{style:{padding:"0.875rem",background:"rgba(251, 191, 36, 0.2)",borderRadius:"0.5rem",textAlign:"center",fontWeight:"600",backdropFilter:"blur(10px)",border:"1px solid rgba(251, 191, 36, 0.3)"},children:" Pending Approval"}):i.jsx("div",{style:{padding:"0.875rem",background:"rgba(255, 255, 255, 0.2)",borderRadius:"0.5rem",textAlign:"center",fontWeight:"600",backdropFilter:"blur(10px)"},children:" You're Premium!"})]})]}),!q&&i.jsxs("div",{style:{marginTop:"3rem",background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",border:"2px solid #10b981",borderRadius:"1rem",padding:"2rem",color:"white",boxShadow:"0 10px 25px rgba(16, 185, 129, 0.3)"},children:[i.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[i.jsx(Gn,{size:40,style:{marginBottom:"0.5rem"}}),i.jsx("h3",{style:{margin:"0 0 0.5rem 0"},children:" Get Premium FREE!"}),i.jsx("p",{style:{opacity:.9,margin:0,fontSize:"1.05rem",fontWeight:"500"},children:"Earn 100 points for each friend who registers and subscribes using your referral code. Collect 500 points to unlock 3 months of Premium FREE!"})]}),i.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.2)",borderRadius:"0.75rem",padding:"1.5rem",backdropFilter:"blur(10px)",marginBottom:"1.5rem"},children:[i.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"3rem",fontWeight:"bold",marginBottom:"0.25rem"},children:[c," / 500"]}),i.jsx("div",{style:{fontSize:"0.9rem",opacity:.9},children:"Referral Points"}),i.jsx("div",{style:{fontSize:"0.85rem",opacity:.8,marginTop:"0.5rem"},children:c>=500?" Ready to redeem!":`Need ${500-c} more points (${Math.ceil((500-c)/100)} referrals)`})]}),i.jsx("div",{style:{background:"rgba(255, 255, 255, 0.3)",borderRadius:"0.5rem",height:"12px",overflow:"hidden"},children:i.jsx("div",{style:{background:"white",height:"100%",width:`${Math.min(100,c/500*100)}%`,transition:"width 0.3s ease",borderRadius:"0.5rem"}})})]}),h&&i.jsxs("div",{style:{textAlign:"center"},children:[i.jsx("div",{style:{fontSize:"0.9rem",opacity:.9,marginBottom:"0.5rem"},children:"Your Referral Code"}),i.jsx("div",{style:{background:"rgba(255, 255, 255, 0.2)",padding:"0.75rem 1.5rem",borderRadius:"0.5rem",fontSize:"1.5rem",fontWeight:"bold",letterSpacing:"2px",display:"inline-block",backdropFilter:"blur(10px)",marginBottom:"1rem"},children:h}),i.jsx("div",{style:{marginBottom:"1rem"},children:c>=500?i.jsxs("button",{onClick:()=>window.location.href="/referrals",style:{padding:"0.75rem 2rem",background:"white",color:"#10b981",border:"none",borderRadius:"0.5rem",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:[i.jsx(bl,{size:20}),"Redeem 500 Points Now!"]}):i.jsx("a",{href:"/referrals",style:{color:"white",textDecoration:"underline",fontSize:"0.95rem",opacity:.9},children:"View detailed referral stats "})})]})]}),!q&&!z&&i.jsxs("div",{style:{marginTop:"3rem",background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"1rem",padding:"2rem"},children:[i.jsx("h3",{style:{margin:"0 0 1rem 0",textAlign:"center"},children:"How to Upgrade via Payment"}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem"},children:[i.jsxs("div",{style:{textAlign:"center"},children:[i.jsx("div",{style:{width:"50px",height:"50px",background:"#667eea",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 0.75rem",fontSize:"1.5rem",fontWeight:"bold"},children:"1"}),i.jsx("p",{style:{margin:0,fontSize:"0.9rem"},children:'Click "Upgrade via WhatsApp"'})]}),i.jsxs("div",{style:{textAlign:"center"},children:[i.jsx("div",{style:{width:"50px",height:"50px",background:"#667eea",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 0.75rem",fontSize:"1.5rem",fontWeight:"bold"},children:"2"}),i.jsx("p",{style:{margin:0,fontSize:"0.9rem"},children:"Send payment screenshot"})]}),i.jsxs("div",{style:{textAlign:"center"},children:[i.jsx("div",{style:{width:"50px",height:"50px",background:"#667eea",color:"white",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 0.75rem",fontSize:"1.5rem",fontWeight:"bold"},children:"3"}),i.jsx("p",{style:{margin:0,fontSize:"0.9rem"},children:"Get verified within 24 hours"})]})]})]}),z&&i.jsx("div",{style:{textAlign:"center",marginTop:"2rem"},children:i.jsxs("button",{onClick:y,style:{padding:"0.75rem 1.5rem",background:"#667eea",color:"white",border:"none",borderRadius:"0.5rem",fontSize:"1rem",fontWeight:"600",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"0.5rem",transition:"all 0.3s ease"},onMouseOver:Y=>Y.target.style.background="#5856eb",onMouseOut:Y=>Y.target.style.background="#667eea",children:[i.jsx(yj,{size:18}),"Refresh Status"]})})]})}function r4(){const{t:n}=Er(),[r,s]=R.useState(!0),[a,c]=R.useState(0),[u,h]=R.useState(""),[p,m]=R.useState(0),[g,y]=R.useState([]),[k,U]=R.useState(!1),[V,I]=R.useState(!1),[q,z]=R.useState("Guest"),[Q,Y]=R.useState("free"),[fe,le]=R.useState(null);R.useEffect(()=>{K()},[]);const K=async()=>{s(!0);try{const[be,Ue]=await Promise.all([qe.get("user/profile"),qe.get("referralpoints/history").catch(()=>({data:[]}))]);c(be.data.referralPoints||0),h(be.data.referralCode||""),m(be.data.successfulReferrals||0),z(be.data.userType||"Guest"),Y(be.data.subscriptionStatus||"free"),y(Ue.data||[])}catch(be){console.error("Failed to fetch referral data:",be),ie(n("failedToLoad"),"error")}finally{s(!1)}},ie=(be,Ue="success")=>{le({message:be,type:Ue}),setTimeout(()=>le(null),5e3)},ae=()=>{navigator.clipboard.writeText(u),ie(n("codeCopied"),"success")},Ce=()=>{const be=`${window.location.origin}/r/${u}`,Ue=`Join Local Host Connect using my referral code ${u}! 

Click here to register: ${be}`;window.open(`https://wa.me/?text=${encodeURIComponent(Ue)}`,"_blank")},De=async()=>{if(Q==="paid"){ie(n("alreadySubscribed"),"error");return}if(a<500){ie(n("needPointsToRedeem"),"error");return}I(!0);try{(await qe.post("referralpoints/redeem")).data.success&&(ie(n("redemptionSuccess"),"success"),U(!1),await K())}catch(be){const Ue=be.response?.data?.message||be.message;ie(n("redemptionFailed").replace("{error}",Ue),"error")}finally{I(!1)}},Re=q==="Host"?299:199,ze=Math.max(0,500-a),Fe=Math.ceil(ze/100),Me=Math.min(100,a/500*100);return r?i.jsx("div",{style:{textAlign:"center",padding:"3rem"},children:i.jsx("div",{className:"loading",children:n("loadingReferralData")})}):i.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",padding:"1rem"},children:[fe&&i.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",background:fe.type==="success"?"#10b981":"#ef4444",color:"white",padding:"1rem 1.5rem",borderRadius:"0.5rem",boxShadow:"0 10px 25px rgba(0,0,0,0.2)",zIndex:1e3,fontSize:"0.9rem",maxWidth:"400px",lineHeight:"1.5"},children:fe.message}),i.jsxs("h1",{style:{marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1.5rem"},children:[i.jsx(bl,{size:28,style:{color:"#667eea"}}),n("referEarn")]}),i.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",borderRadius:"0.75rem",padding:"1.25rem",color:"white",marginBottom:"1rem",boxShadow:"0 4px 12px rgba(102, 126, 234, 0.3)"},children:[i.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem"},children:[i.jsxs("div",{style:{fontSize:"2.5rem",fontWeight:"bold",marginBottom:"0.25rem"},children:[a," "]}),i.jsx("div",{style:{fontSize:"1rem",opacity:.9},children:n("yourReferralPoints")})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.2)",borderRadius:"0.5rem",padding:"0.75rem",backdropFilter:"blur(10px)"},children:[i.jsx("div",{style:{fontSize:"0.85rem",opacity:.9,marginBottom:"0.5rem"},children:n("progressToFree")}),i.jsxs("div",{style:{fontSize:"1.25rem",fontWeight:"bold",marginBottom:"0.5rem"},children:[a,"/500 ",n("points")]}),i.jsx("div",{style:{background:"rgba(255, 255, 255, 0.3)",borderRadius:"0.5rem",height:"8px",overflow:"hidden",marginBottom:"0.5rem"},children:i.jsx("div",{style:{background:"white",height:"100%",width:`${Me}%`,transition:"width 0.3s ease",borderRadius:"0.5rem"}})}),i.jsx("div",{style:{fontSize:"0.8rem",opacity:.9},children:a>=500?n("readyToRedeem"):n("needMorePoints").replace("{points}",ze).replace("{referrals}",Fe)})]}),i.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.2)",borderRadius:"0.5rem",padding:"0.75rem",backdropFilter:"blur(10px)"},children:[i.jsx("div",{style:{fontSize:"0.85rem",opacity:.9,marginBottom:"0.5rem"},children:n("yourReferralCode")}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",letterSpacing:"2px",marginBottom:"0.75rem"},children:u}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsxs("button",{onClick:ae,style:{flex:1,padding:"0.5rem",background:"white",color:"#667eea",border:"none",borderRadius:"0.375rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontWeight:"600",fontSize:"0.85rem"},children:[i.jsx($C,{size:14}),n("copy")]}),i.jsxs("button",{onClick:Ce,style:{flex:1,padding:"0.5rem",background:"#25D366",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontWeight:"600",fontSize:"0.85rem"},children:[i.jsx(my,{size:14}),n("share")]})]})]})]}),a<500?i.jsxs("div",{style:{textAlign:"center",fontSize:"0.95rem"},children:["Need ",ze," more points (",Fe," more referral",Fe>1?"s":"",")"]}):i.jsxs("button",{onClick:()=>U(!0),style:{width:"100%",padding:"0.75rem",background:"white",color:"#667eea",border:"none",borderRadius:"0.5rem",fontSize:"1rem",fontWeight:"bold",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[i.jsx(bl,{size:18}),n("redeemPoints")]})]}),i.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"0.75rem",marginBottom:"1rem"},children:[i.jsxs("div",{style:{background:"white",border:"2px solid #e2e8f0",borderRadius:"0.5rem",padding:"1rem",textAlign:"center"},children:[i.jsx(Gn,{size:24,style:{color:"#667eea",marginBottom:"0.25rem"}}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1e293b"},children:p}),i.jsx("div",{style:{color:"#64748b",fontSize:"0.8rem"},children:n("referrals")})]}),i.jsxs("div",{style:{background:"white",border:"2px solid #e2e8f0",borderRadius:"0.5rem",padding:"1rem",textAlign:"center"},children:[i.jsx(kj,{size:24,style:{color:"#10b981",marginBottom:"0.25rem"}}),i.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1e293b"},children:a}),i.jsx("div",{style:{color:"#64748b",fontSize:"0.8rem"},children:n("points")})]}),i.jsxs("div",{style:{background:"white",border:"2px solid #e2e8f0",borderRadius:"0.5rem",padding:"1rem",textAlign:"center"},children:[i.jsx(bl,{size:24,style:{color:"#f59e0b",marginBottom:"0.25rem"}}),i.jsxs("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#1e293b"},children:["",Re]}),i.jsx("div",{style:{color:"#64748b",fontSize:"0.8rem"},children:n("goal")})]})]}),i.jsxs("div",{style:{background:"white",border:"2px solid #e2e8f0",borderRadius:"0.75rem",padding:"1.25rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[i.jsxs("h2",{style:{marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1.1rem"},children:[i.jsx(my,{size:20}),n("howReferralWorks")]}),"        ",i.jsxs("div",{style:{background:"#f0fdf4",border:"1px solid #16a34a",borderRadius:"0.5rem",padding:"1rem"},children:[i.jsx("h3",{style:{margin:"0 0 0.75rem 0",color:"#15803d",fontSize:"0.95rem"},children:n("howItWorksTitle")}),i.jsxs("div",{style:{color:"#15803d",lineHeight:"1.8",fontSize:"0.85rem"},children:[i.jsxs("div",{style:{marginBottom:"0.75rem",paddingLeft:"1rem",borderLeft:"3px solid #16a34a"},children:[i.jsx("strong",{children:n("step1Title")}),i.jsx("p",{style:{margin:"0.25rem 0 0 0",opacity:.9},children:n("step1Desc")})]}),i.jsxs("div",{style:{marginBottom:"0.75rem",paddingLeft:"1rem",borderLeft:"3px solid #16a34a"},children:[i.jsx("strong",{children:n("step2Title")}),i.jsx("p",{style:{margin:"0.25rem 0 0 0",opacity:.9},children:n("step2Desc")})]}),i.jsxs("div",{style:{marginBottom:"0.75rem",paddingLeft:"1rem",borderLeft:"3px solid #16a34a"},children:[i.jsx("strong",{children:n("step3Title")}),i.jsx("p",{style:{margin:"0.25rem 0 0 0",opacity:.9},children:n("step3Desc")})]}),i.jsxs("div",{style:{marginBottom:"0.75rem",paddingLeft:"1rem",borderLeft:"3px solid #16a34a"},children:[i.jsx("strong",{children:n("step4Title")}),i.jsx("p",{style:{margin:"0.25rem 0 0 0",opacity:.9},children:n("step4Desc")})]}),i.jsxs("div",{style:{marginBottom:"0.75rem",paddingLeft:"1rem",borderLeft:"3px solid #16a34a"},children:[i.jsx("strong",{children:n("step5Title")}),i.jsx("p",{style:{margin:"0.25rem 0 0 0",opacity:.9},children:n("step5Desc")})]}),i.jsxs("div",{style:{paddingLeft:"1rem",borderLeft:"3px solid #16a34a"},children:[i.jsx("strong",{children:n("step6Title")}),i.jsx("p",{style:{margin:"0.25rem 0 0 0",opacity:.9},children:n("step6Desc").replace("{price}",Re)})]})]}),i.jsx("div",{style:{marginTop:"1rem",padding:"0.75rem",background:"rgba(22, 163, 74, 0.1)",borderRadius:"0.375rem"},children:i.jsx("p",{style:{margin:0,fontSize:"0.8rem",color:"#15803d",fontWeight:"600"},children:n("proTip")})})]})]}),i.jsxs("div",{style:{background:"white",border:"2px solid #e2e8f0",borderRadius:"0.75rem",padding:"1.25rem",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[i.jsxs("h2",{style:{marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"1.1rem"},children:[i.jsx(B0,{size:20}),n("pointsHistory")]}),g.length===0?i.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"#64748b"},children:[i.jsx(Gn,{size:40,style:{opacity:.3,marginBottom:"0.5rem"}}),i.jsx("p",{style:{fontSize:"0.9rem",margin:0},children:n("noReferralHistory")})]}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:g.map((be,Ue)=>i.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",background:"#f8fafc",borderRadius:"0.375rem",border:"1px solid #e2e8f0"},children:[i.jsxs("div",{children:[i.jsxs("div",{style:{fontWeight:"600",color:"#1e293b",marginBottom:"0.125rem",fontSize:"0.9rem"},children:[be.type==="earned"?n("earned"):n("redeemed")," ",Math.abs(be.points)," ",n("points")]}),i.jsx("div",{style:{fontSize:"0.8rem",color:"#64748b"},children:be.type==="earned"?n("earnedPoints").replace("{user}",be.referredUserName||be.userName||"User"):be.description||n("subscriptionActivated")})]}),i.jsx("div",{style:{fontSize:"0.75rem",color:"#64748b",textAlign:"right"},children:new Date(be.createdDate||be.timestamp).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})})]},Ue))})]}),k&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>U(!1),children:i.jsxs("div",{style:{background:"white",borderRadius:"1rem",padding:"2rem",maxWidth:"500px",width:"90%"},onClick:be=>be.stopPropagation(),children:[i.jsx("h2",{style:{marginBottom:"1.5rem",color:"#1e293b"},children:n("redeemYourPoints")}),i.jsxs("div",{style:{background:"#f8fafc",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1.5rem"},children:[i.jsxs("div",{style:{marginBottom:"1rem"},children:[i.jsx("div",{style:{color:"#64748b",fontSize:"0.9rem"},children:n("currentBalance")}),i.jsxs("div",{style:{fontSize:"2rem",fontWeight:"bold",color:"#667eea"},children:[a," points"]})]}),i.jsxs("div",{style:{borderTop:"1px solid #e2e8f0",paddingTop:"1rem",marginTop:"1rem"},children:[i.jsx("div",{style:{fontWeight:"600",color:"#1e293b",marginBottom:"0.5rem"},children:n("redeemFor")}),i.jsxs("div",{style:{color:"#15803d",marginBottom:"0.25rem"},children:[" ",n("monthsPremium")]}),i.jsxs("div",{style:{color:"#15803d"},children:[" ",n("worth").replace("{price}",Re).replace("{userType}",q)]})]}),i.jsxs("div",{style:{borderTop:"1px solid #e2e8f0",paddingTop:"1rem",marginTop:"1rem",color:"#64748b",fontSize:"0.9rem"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.5rem"},children:n("afterRedemption")}),i.jsxs("div",{children:[" ",n("pointsZero")]}),i.jsxs("div",{children:[" ",n("subscriptionActive")]})]})]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[i.jsx("button",{onClick:()=>U(!1),style:{flex:1,padding:"0.75rem",background:"#e2e8f0",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"600"},children:n("cancel")}),i.jsx("button",{onClick:De,disabled:V,style:{flex:1,padding:"0.75rem",background:"#10b981",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer",fontWeight:"600",opacity:V?.5:1},children:n(V?"redeeming":"confirmRedemption")})]})]})})]})}function i4(){const{code:n}=hh(),r=Kn();return R.useEffect(()=>{n&&sessionStorage.setItem("pendingReferralCode",n),r("/?register=true",{replace:!0})},[n,r]),i.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",flexDirection:"column",gap:"1rem"},children:[i.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #f3f4f6",borderTop:"4px solid #667eea",borderRadius:"50%",animation:"spin 1s linear infinite"}}),i.jsx("p",{style:{color:"#64748b"},children:"Redirecting to registration..."})]})}const s4=()=>i.jsx("div",{className:"legal-document",children:i.jsxs("div",{className:"container",children:[i.jsx("h1",{children:"Terms of Service"}),i.jsxs("p",{className:"last-updated",children:["Last Updated: ",new Date().toLocaleDateString("en-IN")]}),i.jsxs("section",{children:[i.jsx("h2",{children:"1. Acceptance of Terms"}),i.jsx("p",{children:'By accessing or using Local Host Connect ("Service"), you agree to be bound by these Terms of Service ("Terms"). If you disagree with any part of these terms, you may not access the Service.'}),i.jsx("p",{children:"These Terms constitute a legally binding agreement between you and Local Host Connect."})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"2. Description of Service"}),i.jsx("p",{children:'Local Host Connect is a platform that connects travelers ("Guests") with local accommodation providers ("Hosts"). We facilitate introductions and provide tools for communication, but we do not provide accommodation services directly.'}),i.jsx("h3",{children:"2.1 Platform Services Include:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"User registration and profile creation"}),i.jsx("li",{children:"Host and guest matching services"}),i.jsx("li",{children:"Secure messaging system"}),i.jsx("li",{children:"Review and rating system"}),i.jsx("li",{children:"Payment processing facilitation"}),i.jsx("li",{children:"Customer support services"})]}),i.jsx("h3",{children:"2.2 IMPORTANT: We Are an Introduction Service Only"}),i.jsx("p",{children:i.jsx("strong",{children:"Local Host Connect operates solely as an introduction and communication platform. We explicitly disclaim any responsibility for:"})}),i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:"User Verification:"})," We do not conduct background checks, criminal record searches, or verify the identity, character, or existence of users"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"User Behavior:"})," We are not responsible for the conduct, actions, or behavior of any user on or off the platform"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Communication Quality:"})," We do not monitor, moderate, or take responsibility for the quality, tone, or content of communications between users"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Meeting Arrangements:"})," We are not involved in or responsible for any in-person meetings, accommodations, or arrangements made between users"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Safety and Security:"})," We do not guarantee the safety, security, or well-being of users during interactions or meetings"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Disputes and Conflicts:"})," We are not responsible for resolving disputes, conflicts, or disagreements between users"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Financial Transactions:"})," While we may facilitate payment processing, we are not responsible for payment disputes or financial arrangements between users"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Property and Belongings:"})," We are not responsible for damage to property, theft, or loss of belongings during user interactions"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Accommodation Quality:"})," We do not inspect, verify, or guarantee the quality, safety, or suitability of accommodations"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"User Representations:"})," We do not verify the accuracy of information provided by users in their profiles or communications"]})]})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"3. User Eligibility"}),i.jsx("p",{children:"To use our Service, you must:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Be at least 18 years of age"}),i.jsx("li",{children:"Have the legal capacity to enter into binding contracts"}),i.jsx("li",{children:"Provide accurate and complete registration information"}),i.jsx("li",{children:"Comply with all applicable laws and regulations"}),i.jsx("li",{children:"Not be prohibited from using the Service under applicable law"})]})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"4. User Accounts and Registration"}),i.jsx("h3",{children:"4.1 Account Creation"}),i.jsx("p",{children:"You must create an account to use our Service. You are responsible for:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Providing accurate, current, and complete information"}),i.jsx("li",{children:"Maintaining the security of your account credentials"}),i.jsx("li",{children:"All activities that occur under your account"}),i.jsx("li",{children:"Immediately notifying us of any unauthorized use"})]}),i.jsx("h3",{children:"4.2 Identity Verification"}),i.jsx("p",{children:"We may require identity verification through government-issued documents. Failure to provide required verification may result in account suspension or termination."}),i.jsx("h3",{children:"4.3 Account Termination"}),i.jsx("p",{children:"You may terminate your account at any time. We reserve the right to suspend or terminate accounts that violate these Terms."})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"5. User Conduct and Responsibilities"}),i.jsx("h3",{children:"5.1 Prohibited Activities"}),i.jsx("p",{children:"You agree not to:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Violate any applicable laws or regulations"}),i.jsx("li",{children:"Provide false, misleading, or fraudulent information"}),i.jsx("li",{children:"Impersonate any person or entity"}),i.jsx("li",{children:"Harass, threaten, or harm other users"}),i.jsx("li",{children:"Use the Service for commercial purposes without authorization"}),i.jsx("li",{children:"Attempt to gain unauthorized access to our systems"}),i.jsx("li",{children:"Interfere with the proper functioning of the Service"}),i.jsx("li",{children:"Post inappropriate, offensive, or illegal content"}),i.jsx("li",{children:"Discriminate based on race, religion, gender, or other protected characteristics"})]}),i.jsx("h3",{children:"5.2 Host Responsibilities"}),i.jsx("p",{children:"As a Host, you must:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Provide accurate descriptions of your accommodation"}),i.jsx("li",{children:"Ensure your property meets safety and legal requirements"}),i.jsx("li",{children:"Comply with local laws, regulations, and tax obligations"}),i.jsx("li",{children:"Maintain appropriate insurance coverage"}),i.jsx("li",{children:"Treat guests with respect and without discrimination"}),i.jsx("li",{children:"Honor confirmed bookings or provide adequate notice of cancellation"})]}),i.jsx("h3",{children:"5.3 Guest Responsibilities"}),i.jsx("p",{children:"As a Guest, you must:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Provide accurate information about your travel plans"}),i.jsx("li",{children:"Respect the host's property and house rules"}),i.jsx("li",{children:"Comply with local laws and customs"}),i.jsx("li",{children:"Leave the accommodation in good condition"}),i.jsx("li",{children:"Honor confirmed bookings or provide adequate notice of cancellation"})]})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"6. Booking and Communication"}),i.jsx("h3",{children:"6.1 Privacy-Protected Communication"}),i.jsx("p",{children:"All initial communication between users occurs through our secure in-app messaging system. We do not share personal contact details (email, phone) between users. Contact sharing is entirely voluntary and at the discretion of individual users."}),i.jsx("h3",{children:"6.2 Booking Process"}),i.jsx("p",{children:"Connections and arrangements are facilitated through our platform messaging system. We provide the tools for communication but are not a party to agreements between users."}),i.jsx("h3",{children:"6.3 Payment Processing and Terms"}),i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Payment Methods:"})," We use third-party payment processors (Stripe, PayPal, or similar) for secure transactions"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Service Fees:"})," We charge a service fee of [X]% on each transaction for platform usage"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Payment Terms:"})," Payment terms are agreed upon between hosts and guests through our platform"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Currency:"})," All payments are processed in Indian Rupees (INR) unless otherwise specified"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Taxes:"})," All payments are subject to applicable GST and other taxes as per Indian law"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Payment Security:"})," We do not store credit card information; all payment data is handled by PCI-compliant processors"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Failed Payments:"})," Failed payments may result in booking cancellation or account suspension"]})]}),i.jsx("h3",{children:"6.4 Refund Policy"}),i.jsx("p",{children:i.jsx("strong",{children:"Refund eligibility depends on the following:"})}),i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:"Host Cancellation Policy:"})," Each host sets their own cancellation policy (Flexible, Moderate, or Strict)"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Cancellation Timeframes:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Flexible: Full refund if cancelled 24 hours before check-in"}),i.jsx("li",{children:"Moderate: Full refund if cancelled 5 days before check-in"}),i.jsx("li",{children:"Strict: 50% refund if cancelled 7 days before check-in"})]})]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Service Fee:"})," Service fees are non-refundable except in cases of host cancellation"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Extraordinary Circumstances:"})," Full refunds may be provided for natural disasters, government travel bans, or platform errors"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Dispute Resolution:"})," Refund disputes must be submitted within 14 days of check-in date"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"Processing Time:"})," Approved refunds are processed within 5-10 business days"]})]}),i.jsx("h3",{children:"6.5 Chargebacks and Payment Disputes"}),i.jsx("p",{children:i.jsx("strong",{children:"Important Notice:"})}),i.jsxs("ul",{children:[i.jsx("li",{children:"Initiating a chargeback without contacting us first may result in immediate account suspension"}),i.jsx("li",{children:"We provide dispute resolution services and will work with both parties to resolve payment issues"}),i.jsx("li",{children:"Fraudulent chargebacks may result in permanent account termination and legal action"}),i.jsx("li",{children:"All payment disputes must be reported within 30 days of the transaction"})]})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"7. Safety and Security"}),i.jsx("h3",{children:"7.1 Safety Guidelines"}),i.jsx("p",{children:"We provide safety guidelines and recommendations, but users are responsible for their own safety and security. We strongly recommend:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Meeting in public places initially"}),i.jsx("li",{children:"Informing trusted contacts of your plans"}),i.jsx("li",{children:"Verifying host/guest identity before meeting"}),i.jsx("li",{children:"Trusting your instincts and leaving if uncomfortable"}),i.jsx("li",{children:"Maintaining emergency contact information"})]}),i.jsx("h3",{children:"7.2 Background Checks"}),i.jsx("p",{children:"We may conduct background checks on users but do not guarantee the accuracy or completeness of such checks. Users should exercise their own judgment when interacting with others."}),i.jsx("h3",{children:"7.3 Reporting and Response"}),i.jsx("p",{children:"Users must report any safety concerns, inappropriate behavior, or violations of these Terms immediately. We will investigate reports and take appropriate action."})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"8. Platform Limitations and User Responsibility"}),i.jsx("h3",{children:"8.1 No Verification or Background Checks"}),i.jsxs("p",{children:[i.jsx("strong",{children:"IMPORTANT NOTICE:"})," Local Host Connect does not:"]}),i.jsxs("ul",{children:[i.jsx("li",{children:"Conduct background checks on users"}),i.jsx("li",{children:"Verify criminal records or legal history"}),i.jsx("li",{children:"Confirm the identity, age, or personal details of users"}),i.jsx("li",{children:"Investigate the character, reputation, or trustworthiness of users"}),i.jsx("li",{children:"Verify the existence or legitimacy of users or their accommodations"}),i.jsx("li",{children:"Confirm the accuracy of profile information, photos, or descriptions"})]}),i.jsx("h3",{children:"8.2 User Responsibility for Due Diligence"}),i.jsx("p",{children:"Users are solely responsible for:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Conducting their own research and verification of other users"}),i.jsx("li",{children:"Making informed decisions about interactions and meetings"}),i.jsx("li",{children:"Ensuring their own safety and security during all interactions"}),i.jsx("li",{children:"Verifying the identity and legitimacy of other users before meeting"}),i.jsx("li",{children:"Assessing the safety and suitability of accommodations"}),i.jsx("li",{children:"Taking appropriate precautions during communications and meetings"})]}),i.jsx("h3",{children:"8.3 No Monitoring of Communications"}),i.jsx("p",{children:"We do not:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Monitor private messages between users"}),i.jsx("li",{children:"Review or moderate user communications"}),i.jsx("li",{children:"Intervene in disputes or disagreements between users"}),i.jsx("li",{children:"Guarantee the quality, tone, or appropriateness of communications"}),i.jsx("li",{children:"Take responsibility for misunderstandings or conflicts"})]}),i.jsx("h3",{children:"8.4 No Involvement in User Arrangements"}),i.jsx("p",{children:"Local Host Connect is not involved in and takes no responsibility for:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Arrangements made between hosts and guests"}),i.jsx("li",{children:"The quality, safety, or condition of accommodations"}),i.jsx("li",{children:"Payment arrangements or financial transactions between users"}),i.jsx("li",{children:"Cancellations, no-shows, or changes to arrangements"}),i.jsx("li",{children:"Disputes over accommodation quality, cleanliness, or amenities"}),i.jsx("li",{children:"Personal conflicts or disagreements between users"})]})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"9. Intellectual Property Rights"}),i.jsx("h3",{children:"9.1 Platform Ownership"}),i.jsx("p",{children:i.jsx("strong",{children:"Local Host Connect owns all rights to:"})}),i.jsxs("ul",{children:[i.jsx("li",{children:'The "Local Host Connect" and "FestiveGuest" brand names, logos, and trademarks'}),i.jsx("li",{children:"Platform design, layout, and user interface"}),i.jsx("li",{children:"Software, code, algorithms, and technology"}),i.jsx("li",{children:"Platform features and functionality"}),i.jsx("li",{children:"Documentation, guides, and support materials"})]}),i.jsx("p",{children:"All platform content is protected by copyright, trademark, patent, and other intellectual property laws of India and international treaties."}),i.jsx("h3",{children:"9.2 User Content License"}),i.jsx("p",{children:"By posting content on our platform, you grant us:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"A worldwide, non-exclusive, royalty-free, transferable license"}),i.jsx("li",{children:"The right to use, display, reproduce, modify, and distribute your content"}),i.jsx("li",{children:"The right to use your content for marketing and promotional purposes"}),i.jsx("li",{children:"The right to sublicense your content to third parties for platform operation"})]}),i.jsx("p",{children:"You retain ownership of your content but grant us these rights for platform operation."}),i.jsx("h3",{children:"9.3 User Content Responsibilities"}),i.jsx("p",{children:"You represent and warrant that:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"You own or have rights to all content you post"}),i.jsx("li",{children:"Your content does not infringe on third-party intellectual property rights"}),i.jsx("li",{children:"You have obtained necessary permissions for photos of people or property"}),i.jsx("li",{children:"Your content complies with all applicable laws"})]}),i.jsx("h3",{children:"9.4 Prohibited Use of Platform IP"}),i.jsx("p",{children:"You may not:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Copy, reproduce, or distribute platform content without written permission"}),i.jsx("li",{children:"Use our trademarks, logos, or branding without authorization"}),i.jsx("li",{children:"Create derivative works based on our platform"}),i.jsx("li",{children:"Reverse engineer, decompile, or disassemble our software"}),i.jsx("li",{children:"Use automated tools to scrape or extract platform data"}),i.jsx("li",{children:"Frame or mirror any part of our platform"})]}),i.jsx("h3",{children:"9.5 DMCA and Copyright Infringement"}),i.jsx("p",{children:"We respect intellectual property rights. If you believe content on our platform infringes your copyright, contact us with:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Description of the copyrighted work"}),i.jsx("li",{children:"Location of the infringing content"}),i.jsx("li",{children:"Your contact information"}),i.jsx("li",{children:"A statement of good faith belief"}),i.jsx("li",{children:"A statement of accuracy under penalty of perjury"}),i.jsx("li",{children:"Your physical or electronic signature"})]})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"10. Privacy and Data Protection"}),i.jsxs("p",{children:["Your privacy is important to us. Our ",i.jsx(Nt,{to:"/privacy-policy",style:{color:"var(--primary)",textDecoration:"none",fontWeight:"bold"},children:"Privacy Policy"})," explains how we collect, use, and protect your information. By using the Service, you consent to our data practices as described in the Privacy Policy."]}),i.jsx("h3",{children:"10.1 Data Collection and Use"}),i.jsx("p",{children:"We collect and process personal data as outlined in our Privacy Policy, including:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Account information (name, email, phone, date of birth)"}),i.jsx("li",{children:"Identity verification documents"}),i.jsx("li",{children:"Payment information (processed by third-party processors)"}),i.jsx("li",{children:"Usage data and analytics"}),i.jsx("li",{children:"Communication records"})]}),i.jsx("h3",{children:"10.2 Data Protection Rights"}),i.jsx("p",{children:"You have the right to access, correct, delete, or export your personal data. Contact us to exercise these rights."})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"11. Disclaimers and Limitations of Liability"}),i.jsx("h3",{children:"11.1 Introduction Service Disclaimer"}),i.jsx("p",{children:i.jsx("strong",{children:"CRITICAL NOTICE: Local Host Connect is ONLY an introduction and communication platform. We explicitly disclaim all responsibility for:"})}),i.jsxs("ul",{children:[i.jsxs("li",{children:[i.jsx("strong",{children:"No Background Checks:"})," We do not conduct background checks, criminal record searches, identity verification, or character assessments of any users"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"No User Monitoring:"})," We do not monitor, supervise, or control user behavior, communications, or interactions"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"No Safety Guarantees:"})," We do not guarantee the safety, security, reliability, or trustworthiness of any user"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"No Verification of Information:"})," We do not verify the accuracy, completeness, or truthfulness of user profiles, descriptions, or communications"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"No Responsibility for Meetings:"})," We are not involved in or responsible for any in-person meetings, arrangements, or interactions between users"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"No Dispute Resolution Obligation:"})," While we may provide dispute resolution tools, we are not obligated to resolve conflicts between users"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"No Accommodation Oversight:"})," We do not inspect, verify, or guarantee the quality, safety, cleanliness, or suitability of any accommodation"]}),i.jsxs("li",{children:[i.jsx("strong",{children:"No Financial Responsibility:"})," We are not responsible for payment disputes, financial losses, or monetary arrangements between users"]})]}),i.jsx("h3",{children:"11.2 Service Disclaimer"}),i.jsx("p",{children:'THE SERVICE IS PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT WARRANTIES OF ANY KIND. WE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NON-INFRINGEMENT.'}),i.jsx("h3",{children:"11.3 Third-Party Services"}),i.jsx("p",{children:"We are not responsible for the actions, content, or services of third parties, including hosts, guests, payment processors, or other service providers."}),i.jsx("h3",{children:"11.4 Limitation of Liability"}),i.jsx("p",{children:"TO THE MAXIMUM EXTENT PERMITTED BY LAW, WE SHALL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, INCLUDING LOSS OF PROFITS, DATA, OR USE, ARISING FROM:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"User interactions, meetings, or communications"}),i.jsx("li",{children:"Theft, damage, or loss of property"}),i.jsx("li",{children:"Personal injury or harm during user interactions"}),i.jsx("li",{children:"Fraudulent or criminal activity by users"}),i.jsx("li",{children:"Disputes or conflicts between users"}),i.jsx("li",{children:"Accommodation quality or safety issues"}),i.jsx("li",{children:"Financial losses or payment disputes"}),i.jsx("li",{children:"Any other interactions between users"})]}),i.jsx("h3",{children:"11.5 Maximum Liability"}),i.jsx("p",{children:"Our total liability for any claims arising from your use of the Service shall not exceed the amount you paid to us in the twelve months preceding the claim, or $100, whichever is less."})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"12. Indemnification"}),i.jsx("p",{children:"You agree to indemnify, defend, and hold harmless Local Host Connect and its officers, directors, employees, and agents from any claims, damages, losses, or expenses arising from:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Your use of the Service"}),i.jsx("li",{children:"Your violation of these Terms"}),i.jsx("li",{children:"Your violation of any rights of another party"}),i.jsx("li",{children:"Your interactions with other users"})]})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"13. Force Majeure"}),i.jsx("p",{children:"We shall not be liable for any failure or delay in performance due to circumstances beyond our reasonable control, including natural disasters, war, terrorism, government actions, or pandemics."})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"14. Modification of Terms"}),i.jsx("p",{children:"We reserve the right to modify these Terms at any time. We will notify users of material changes through:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Email notifications to registered users"}),i.jsx("li",{children:"Prominent notices on our platform"}),i.jsx("li",{children:"In-app notifications"})]}),i.jsx("p",{children:"Continued use of the Service after changes become effective constitutes acceptance of the modified Terms."})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"15. Termination"}),i.jsx("h3",{children:"15.1 Termination by Users"}),i.jsx("p",{children:"You may terminate your account at any time by following the account deletion process in your settings."}),i.jsx("h3",{children:"15.2 Termination by Us"}),i.jsx("p",{children:"We may suspend or terminate your account immediately if you:"}),i.jsxs("ul",{children:[i.jsx("li",{children:"Violate these Terms"}),i.jsx("li",{children:"Engage in fraudulent or illegal activities"}),i.jsx("li",{children:"Pose a safety risk to other users"}),i.jsx("li",{children:"Fail to pay applicable fees"})]}),i.jsx("h3",{children:"15.3 Effect of Termination"}),i.jsx("p",{children:"Upon termination, your right to use the Service ceases immediately. Provisions that should survive termination will remain in effect."})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"16. Dispute Resolution"}),i.jsx("h3",{children:"16.1 Informal Resolution"}),i.jsx("p",{children:"Before initiating formal proceedings, parties agree to attempt informal resolution through direct communication or mediation."}),i.jsx("h3",{children:"16.2 Arbitration"}),i.jsx("p",{children:"Any disputes arising from these Terms shall be resolved through binding arbitration in accordance with the Arbitration and Conciliation Act, 2015 of India."}),i.jsx("h3",{children:"16.3 Class Action Waiver"}),i.jsx("p",{children:"You agree to resolve disputes individually and waive any right to participate in class action lawsuits."})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"17. Governing Law and Jurisdiction"}),i.jsx("p",{children:i.jsx("strong",{children:"These Terms are governed by the laws of India, specifically:"})}),i.jsxs("ul",{children:[i.jsx("li",{children:"Indian Contract Act, 1872"}),i.jsx("li",{children:"Information Technology Act, 2000"}),i.jsx("li",{children:"Consumer Protection Act, 2019"}),i.jsx("li",{children:"Digital Personal Data Protection Act, 2023 (when applicable)"})]}),i.jsx("h3",{children:"17.1 Jurisdiction"}),i.jsx("p",{children:"Any legal proceedings arising from these Terms shall be conducted exclusively in the courts of [Your City], [Your State], India."}),i.jsx("h3",{children:"17.2 International Users"}),i.jsx("p",{children:"If you access our Service from outside India, you are responsible for compliance with local laws. For users in the EU, GDPR provisions apply as outlined in our Privacy Policy. For users in California, CCPA provisions apply."})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"18. Severability"}),i.jsx("p",{children:"If any provision of these Terms is found to be unenforceable, the remaining provisions will remain in full force and effect."})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"19. Entire Agreement"}),i.jsx("p",{children:"These Terms, together with our Privacy Policy, constitute the entire agreement between you and Local Host Connect regarding the Service."})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"20. Contact Information"}),i.jsxs("div",{className:"contact-info",children:[i.jsx("p",{children:i.jsx("strong",{children:"Legal and Terms Inquiries:"})}),i.jsx("p",{children:"Email: legal@localhostconnect.com"}),i.jsx("p",{children:"Support: support@localhostconnect.com"}),i.jsxs("p",{children:["For general questions, visit our ",i.jsx(Nt,{to:"/help",style:{color:"var(--primary)",textDecoration:"none"},children:"Help & Support page"}),"."]}),i.jsx("p",{children:i.jsx("strong",{children:"Registered Office:"})}),i.jsxs("p",{children:["Local Host Connect",i.jsx("br",{}),"[Your Business Address]",i.jsx("br",{}),"[City, State, PIN Code]",i.jsx("br",{}),"India"]})]})]}),i.jsxs("section",{children:[i.jsx("h2",{children:"21. Acknowledgment"}),i.jsx("p",{children:"By using our Service, you acknowledge that you have read, understood, and agree to be bound by these Terms of Service."})]})]})}),o4=()=>{const[n,r]=R.useState(!1),[s,a]=R.useState(null),[c,u]=R.useState(!0),[h,p]=R.useState(!1),[m,g]=R.useState(0);R.useEffect(()=>{try{const K=localStorage.getItem("user");if(K){const ie=JSON.parse(K);ie&&ie.token&&ie.email&&(ie.role||ie.userType)&&(a(ie),g(ie.referralPoints||0))}}catch{console.warn("Invalid user data in localStorage"),localStorage.removeItem("user")}},[]);const{unreadCount:y,clearUnreadCount:k}=Lj(),{language:U,toggleLanguage:V,t:I}=Er(),q=Jn();R.useEffect(()=>{document.body.setAttribute("lang",U)},[U]),R.useEffect(()=>{const K=setTimeout(()=>{u(!1)},s?0:3e3),ie=()=>{try{const ae=localStorage.getItem("user");if(ae){const Ce=JSON.parse(ae);Ce&&Ce.token&&Ce.email&&(Ce.role||Ce.userType)?(a(Ce),g(Ce.referralPoints||0)):a(null)}else a(null)}catch{console.warn("Invalid user data in localStorage"),localStorage.removeItem("user"),a(null)}};return window.addEventListener("storage",ie),()=>{clearTimeout(K),window.removeEventListener("storage",ie)}},[s]);const z=K=>{const ie=K?.role||K?.userType||K?.partitionKey;return ie==="Host"?"/posts":ie==="Guest"?"/guest-dashboard":ie==="Admin"?"/admin":"/login"},Q=()=>{p(!0)},Y=()=>{localStorage.clear(),a(null),r(!1),p(!1),window.location.href="/"},fe=()=>{k(),r(!1)},le=K=>K==="/dashboard"?q.pathname===z(s)||q.pathname==="/browse":q.pathname===K;return c?i.jsx(xR,{}):i.jsxs("div",{className:"app-container",style:{animation:"fadeIn 0.8s ease-out"},children:[i.jsxs("nav",{className:"navbar",children:[i.jsx(Nt,{to:"/",className:"nav-logo",onClick:()=>r(!1),children:i.jsx(bR,{className:"nav-logo-img",style:{height:"65px"}})}),i.jsx("button",{className:"menu-toggle",onClick:()=>r(!n),"aria-label":"Toggle menu",children:n?i.jsx(xh,{size:28}):i.jsx(uj,{size:28})}),i.jsx("div",{className:`nav-links ${n?"mobile-open":""}`,"data-lang":U,children:s?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"user-badge",children:i.jsxs("span",{className:"user-badge-text",children:[i.jsx("strong",{children:s.name})," ",i.jsxs("span",{className:"user-badge-role",children:["(",s.role||s.userType||s.partitionKey,")"]})]})}),i.jsxs(Nt,{to:z(s),className:`nav-item ${le("/dashboard")?"active":""}`,onClick:()=>r(!1),style:{display:"none"},children:[i.jsx(rj,{size:20})," Dashboard"]}),i.jsxs(Nt,{to:"/posts",className:`nav-item ${le("/posts")?"active":""}`,onClick:()=>r(!1),children:[" ",I("posts")]}),i.jsxs(Nt,{to:"/chats",className:`nav-item chat-nav-item ${le("/chats")?"active":""}`,onClick:fe,children:[" ",I("chats"),y>0&&i.jsx("span",{className:`unread-badge ${y>9?"large-count":""}`,children:y>99?"99+":y})]}),i.jsxs(Nt,{to:"/profile",className:`nav-item ${le("/profile")?"active":""}`,onClick:()=>r(!1),children:[i.jsx(Pj,{size:20})," ",I("profile")]}),i.jsxs(Nt,{to:"/referrals",className:`nav-item ${le("/referrals")?"active":""}`,onClick:()=>r(!1),style:{position:"relative"},children:[" ",I("referEarnNav")]}),i.jsxs(Nt,{to:"/help",className:`nav-item ${le("/help")?"active":""}`,onClick:()=>r(!1),children:[i.jsx(El,{size:20})," ",I("help")]}),(s.role==="Admin"||s.userType==="Admin")&&i.jsxs(Nt,{to:"/admin",className:`nav-item ${le("/admin")?"active":""}`,onClick:()=>r(!1),children:[i.jsx(Sj,{size:20})," Admin"]}),i.jsxs("button",{onClick:V,className:"nav-item",style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(hy,{size:20})," ",U==="en"?"":"English"]}),i.jsxs("button",{onClick:Q,className:"nav-item logout-btn",style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(fy,{size:20})," ",I("logout")]})]}):i.jsxs(i.Fragment,{children:[i.jsxs(Nt,{to:"/help",className:"nav-item",onClick:()=>r(!1),children:[i.jsx(El,{size:20})," ",I("help")]}),i.jsx(Nt,{to:"/login",className:"nav-item",onClick:()=>r(!1),children:I("login")}),i.jsx(Nt,{to:"/?register=true",className:"nav-item btn btn-primary",style:{color:"white",padding:"0.5rem 1rem"},onClick:()=>r(!1),children:I("register")}),i.jsxs("button",{onClick:V,className:"nav-item",style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(hy,{size:20})," ",U==="en"?"":"English"]})]})})]}),s&&i.jsxs("div",{style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white",padding:"0.75rem 0.5rem",textAlign:"center",fontSize:"clamp(0.65rem, 2.5vw, 0.9rem)",fontWeight:"600",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",lineHeight:"1.4"},children:[" ",i.jsx("strong",{children:"Limited Time Offer!"})," All users can now access premium features FREE during our promotional period! "]}),i.jsx("main",{className:"content full-width",children:i.jsxs(Ww,{children:[i.jsx(Et,{path:"/",element:i.jsx(Ly,{user:s})}),i.jsx(Et,{path:"/r/:code",element:i.jsx(i4,{})}),i.jsx(Et,{path:"/home",element:i.jsx(Ly,{user:s})}),i.jsx(Et,{path:"/login",element:s?i.jsx(Hn,{to:"/posts"}):i.jsx(c2,{setUser:a})}),i.jsx(Et,{path:"/register",element:s?i.jsx(Hn,{to:"/home"}):i.jsx(u2,{setUser:a})}),i.jsx(Et,{path:"/browse",element:s?.role==="Guest"||s?.userType==="Guest"?i.jsx(By,{user:s}):i.jsx(Hn,{to:"/login"})}),i.jsx(Et,{path:"/guest-dashboard",element:s?.role==="Guest"||s?.userType==="Guest"?i.jsx(By,{user:s}):i.jsx(Hn,{to:"/login"})}),i.jsx(Et,{path:"/host-dashboard",element:s?.role==="Host"||s?.userType==="Host"?i.jsx(d2,{user:s}):i.jsx(Hn,{to:"/login"})}),i.jsx(Et,{path:"/chats",element:s?i.jsx(V_,{}):i.jsx(Hn,{to:"/login"})}),i.jsx(Et,{path:"/posts",element:s?i.jsx(Q_,{}):i.jsx(Hn,{to:"/login"})}),i.jsx(Et,{path:"/profile",element:s?i.jsx(Y_,{}):i.jsx(Hn,{to:"/login"})}),i.jsx(Et,{path:"/referrals",element:s?i.jsx(r4,{}):i.jsx(Hn,{to:"/login"})}),i.jsx(Et,{path:"/subscription",element:s?i.jsx(n4,{}):i.jsx(Hn,{to:"/login"})}),i.jsx(Et,{path:"/profile/:userName",element:i.jsx(X_,{})}),i.jsx(Et,{path:"/admin",element:s?.role==="Admin"||s?.userType==="Admin"?i.jsx(G_,{}):i.jsx(Hn,{to:"/login"})}),i.jsx(Et,{path:"/chat/:recipientId",element:s?i.jsx(F_,{user:s}):i.jsx(Hn,{to:"/login"})}),i.jsx(Et,{path:"/help",element:i.jsx(J_,{})}),i.jsx(Et,{path:"/privacy-policy",element:i.jsx(t4,{})}),i.jsx(Et,{path:"/terms-of-service",element:i.jsx(s4,{})}),i.jsx(Et,{path:"/api-test",element:i.jsx(wR,{})}),i.jsx(Et,{path:"/chat-debug",element:i.jsx(a2,{})})]})}),h&&i.jsx("div",{className:"modal-overlay",onClick:()=>p(!1),children:i.jsxs("div",{className:"modal-content",onClick:K=>K.stopPropagation(),style:{maxWidth:"400px"},children:[i.jsx("div",{className:"modal-header",children:i.jsxs("h3",{style:{color:"#dc2626",display:"flex",alignItems:"center",gap:"0.5rem"},children:[i.jsx(fy,{size:20}),"Confirm Logout"]})}),i.jsxs("div",{className:"modal-body",children:[i.jsx("p",{style:{margin:"0 0 1rem 0",color:"var(--text)"},children:"Are you sure you want to logout?"}),i.jsx("p",{style:{margin:"0",color:"var(--text-light)",fontSize:"0.875rem"},children:"You will need to login again to access your account."})]}),i.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",padding:"1rem"},children:[i.jsx("button",{onClick:()=>p(!1),className:"btn btn-outline",style:{minWidth:"80px"},children:I("cancel")}),i.jsx("button",{onClick:Y,className:"btn",style:{minWidth:"80px",backgroundColor:"#dc2626",color:"white",border:"1px solid #dc2626"},children:I("logout")})]})]})})]})};function a4(){return i.jsx(yC,{children:i.jsx(Bj,{children:i.jsx(qj,{children:i.jsx(o4,{})})})})}X1.createRoot(document.getElementById("root")).render(i.jsx(a4,{}));
