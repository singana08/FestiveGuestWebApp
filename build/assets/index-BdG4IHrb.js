(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const l of c)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function i(c){const l={};return c.integrity&&(l.integrity=c.integrity),c.referrerPolicy&&(l.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?l.credentials="include":c.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(c){if(c.ep)return;c.ep=!0;const l=i(c);fetch(c.href,l)}})();var Rg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cc(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var n=r.default;if(typeof n=="function"){var i=function s(){var c=!1;try{c=this instanceof s}catch{}return c?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};i.prototype=n.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(r).forEach(function(s){var c=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(i,s,c.get?c:{enumerable:!0,get:function(){return r[s]}})}),i}var nd={exports:{}},vs={};var Eg;function pw(){if(Eg)return vs;Eg=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(s,c,l){var d=null;if(l!==void 0&&(d=""+l),c.key!==void 0&&(d=""+c.key),"key"in c){l={};for(var h in c)h!=="key"&&(l[h]=c[h])}else l=c;return c=l.ref,{$$typeof:r,type:s,key:d,ref:c!==void 0?c:null,props:l}}return vs.Fragment=n,vs.jsx=i,vs.jsxs=i,vs}var _g;function mw(){return _g||(_g=1,nd.exports=pw()),nd.exports}var g=mw(),rd={exports:{}},Ve={};var xg;function gw(){if(xg)return Ve;xg=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),z=Symbol.iterator;function F(T){return T===null||typeof T!="object"?null:(T=z&&T[z]||T["@@iterator"],typeof T=="function"?T:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z=Object.assign,X={};function ye(T,j,C){this.props=T,this.context=j,this.refs=X,this.updater=C||U}ye.prototype.isReactComponent={},ye.prototype.setState=function(T,j){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,j,"setState")},ye.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function he(){}he.prototype=ye.prototype;function ue(T,j,C){this.props=T,this.context=j,this.refs=X,this.updater=C||U}var ne=ue.prototype=new he;ne.constructor=ue,Z(ne,ye.prototype),ne.isPureReactComponent=!0;var ae=Array.isArray;function ce(){}var ie={H:null,A:null,T:null,S:null},Re=Object.prototype.hasOwnProperty;function xe(T,j,C){var R=C.ref;return{$$typeof:r,type:T,key:j,ref:R!==void 0?R:null,props:C}}function Pe(T,j){return xe(T.type,j,T.props)}function Je(T){return typeof T=="object"&&T!==null&&T.$$typeof===r}function Ae(T){var j={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(C){return j[C]})}var Oe=/\/+/g;function Ce(T,j){return typeof T=="object"&&T!==null&&T.key!=null?Ae(""+T.key):j.toString(36)}function Be(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(ce,ce):(T.status="pending",T.then(function(j){T.status==="pending"&&(T.status="fulfilled",T.value=j)},function(j){T.status==="pending"&&(T.status="rejected",T.reason=j)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function G(T,j,C,R,E){var O=typeof T;(O==="undefined"||O==="boolean")&&(T=null);var k=!1;if(T===null)k=!0;else switch(O){case"bigint":case"string":case"number":k=!0;break;case"object":switch(T.$$typeof){case r:case n:k=!0;break;case y:return k=T._init,G(k(T._payload),j,C,R,E)}}if(k)return E=E(T),k=R===""?"."+Ce(T,0):R,ae(E)?(C="",k!=null&&(C=k.replace(Oe,"$&/")+"/"),G(E,j,C,"",function(A){return A})):E!=null&&(Je(E)&&(E=Pe(E,C+(E.key==null||T&&T.key===E.key?"":(""+E.key).replace(Oe,"$&/")+"/")+k)),j.push(E)),1;k=0;var b=R===""?".":R+":";if(ae(T))for(var w=0;w<T.length;w++)R=T[w],O=b+Ce(R,w),k+=G(R,j,C,O,E);else if(w=F(T),typeof w=="function")for(T=w.call(T),w=0;!(R=T.next()).done;)R=R.value,O=b+Ce(R,w++),k+=G(R,j,C,O,E);else if(O==="object"){if(typeof T.then=="function")return G(Be(T),j,C,R,E);throw j=String(T),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return k}function D(T,j,C){if(T==null)return T;var R=[],E=0;return G(T,R,"","",function(O){return j.call(C,O,E++)}),R}function J(T){if(T._status===-1){var j=T._result;j=j(),j.then(function(C){(T._status===0||T._status===-1)&&(T._status=1,T._result=C)},function(C){(T._status===0||T._status===-1)&&(T._status=2,T._result=C)}),T._status===-1&&(T._status=0,T._result=j)}if(T._status===1)return T._result.default;throw T._result}var P=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},K={map:D,forEach:function(T,j,C){D(T,function(){j.apply(this,arguments)},C)},count:function(T){var j=0;return D(T,function(){j++}),j},toArray:function(T){return D(T,function(j){return j})||[]},only:function(T){if(!Je(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return Ve.Activity=_,Ve.Children=K,Ve.Component=ye,Ve.Fragment=i,Ve.Profiler=c,Ve.PureComponent=ue,Ve.StrictMode=s,Ve.Suspense=p,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ie,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(T){return ie.H.useMemoCache(T)}},Ve.cache=function(T){return function(){return T.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(T,j,C){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var R=Z({},T.props),E=T.key;if(j!=null)for(O in j.key!==void 0&&(E=""+j.key),j)!Re.call(j,O)||O==="key"||O==="__self"||O==="__source"||O==="ref"&&j.ref===void 0||(R[O]=j[O]);var O=arguments.length-2;if(O===1)R.children=C;else if(1<O){for(var k=Array(O),b=0;b<O;b++)k[b]=arguments[b+2];R.children=k}return xe(T.type,E,R)},Ve.createContext=function(T){return T={$$typeof:d,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:l,_context:T},T},Ve.createElement=function(T,j,C){var R,E={},O=null;if(j!=null)for(R in j.key!==void 0&&(O=""+j.key),j)Re.call(j,R)&&R!=="key"&&R!=="__self"&&R!=="__source"&&(E[R]=j[R]);var k=arguments.length-2;if(k===1)E.children=C;else if(1<k){for(var b=Array(k),w=0;w<k;w++)b[w]=arguments[w+2];E.children=b}if(T&&T.defaultProps)for(R in k=T.defaultProps,k)E[R]===void 0&&(E[R]=k[R]);return xe(T,O,E)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(T){return{$$typeof:h,render:T}},Ve.isValidElement=Je,Ve.lazy=function(T){return{$$typeof:y,_payload:{_status:-1,_result:T},_init:J}},Ve.memo=function(T,j){return{$$typeof:m,type:T,compare:j===void 0?null:j}},Ve.startTransition=function(T){var j=ie.T,C={};ie.T=C;try{var R=T(),E=ie.S;E!==null&&E(C,R),typeof R=="object"&&R!==null&&typeof R.then=="function"&&R.then(ce,P)}catch(O){P(O)}finally{j!==null&&C.types!==null&&(j.types=C.types),ie.T=j}},Ve.unstable_useCacheRefresh=function(){return ie.H.useCacheRefresh()},Ve.use=function(T){return ie.H.use(T)},Ve.useActionState=function(T,j,C){return ie.H.useActionState(T,j,C)},Ve.useCallback=function(T,j){return ie.H.useCallback(T,j)},Ve.useContext=function(T){return ie.H.useContext(T)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(T,j){return ie.H.useDeferredValue(T,j)},Ve.useEffect=function(T,j){return ie.H.useEffect(T,j)},Ve.useEffectEvent=function(T){return ie.H.useEffectEvent(T)},Ve.useId=function(){return ie.H.useId()},Ve.useImperativeHandle=function(T,j,C){return ie.H.useImperativeHandle(T,j,C)},Ve.useInsertionEffect=function(T,j){return ie.H.useInsertionEffect(T,j)},Ve.useLayoutEffect=function(T,j){return ie.H.useLayoutEffect(T,j)},Ve.useMemo=function(T,j){return ie.H.useMemo(T,j)},Ve.useOptimistic=function(T,j){return ie.H.useOptimistic(T,j)},Ve.useReducer=function(T,j,C){return ie.H.useReducer(T,j,C)},Ve.useRef=function(T){return ie.H.useRef(T)},Ve.useState=function(T){return ie.H.useState(T)},Ve.useSyncExternalStore=function(T,j,C){return ie.H.useSyncExternalStore(T,j,C)},Ve.useTransition=function(){return ie.H.useTransition()},Ve.version="19.2.3",Ve}var Ag;function $d(){return Ag||(Ag=1,rd.exports=gw()),rd.exports}var q=$d(),id={exports:{}},bs={},od={exports:{}},sd={};var kg;function yw(){return kg||(kg=1,(function(r){function n(G,D){var J=G.length;G.push(D);e:for(;0<J;){var P=J-1>>>1,K=G[P];if(0<c(K,D))G[P]=D,G[J]=K,J=P;else break e}}function i(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var D=G[0],J=G.pop();if(J!==D){G[0]=J;e:for(var P=0,K=G.length,T=K>>>1;P<T;){var j=2*(P+1)-1,C=G[j],R=j+1,E=G[R];if(0>c(C,J))R<K&&0>c(E,C)?(G[P]=E,G[R]=J,P=R):(G[P]=C,G[j]=J,P=j);else if(R<K&&0>c(E,J))G[P]=E,G[R]=J,P=R;else break e}}return D}function c(G,D){var J=G.sortIndex-D.sortIndex;return J!==0?J:G.id-D.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var d=Date,h=d.now();r.unstable_now=function(){return d.now()-h}}var p=[],m=[],y=1,_=null,z=3,F=!1,U=!1,Z=!1,X=!1,ye=typeof setTimeout=="function"?setTimeout:null,he=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;function ne(G){for(var D=i(m);D!==null;){if(D.callback===null)s(m);else if(D.startTime<=G)s(m),D.sortIndex=D.expirationTime,n(p,D);else break;D=i(m)}}function ae(G){if(Z=!1,ne(G),!U)if(i(p)!==null)U=!0,ce||(ce=!0,Ae());else{var D=i(m);D!==null&&Be(ae,D.startTime-G)}}var ce=!1,ie=-1,Re=5,xe=-1;function Pe(){return X?!0:!(r.unstable_now()-xe<Re)}function Je(){if(X=!1,ce){var G=r.unstable_now();xe=G;var D=!0;try{e:{U=!1,Z&&(Z=!1,he(ie),ie=-1),F=!0;var J=z;try{t:{for(ne(G),_=i(p);_!==null&&!(_.expirationTime>G&&Pe());){var P=_.callback;if(typeof P=="function"){_.callback=null,z=_.priorityLevel;var K=P(_.expirationTime<=G);if(G=r.unstable_now(),typeof K=="function"){_.callback=K,ne(G),D=!0;break t}_===i(p)&&s(p),ne(G)}else s(p);_=i(p)}if(_!==null)D=!0;else{var T=i(m);T!==null&&Be(ae,T.startTime-G),D=!1}}break e}finally{_=null,z=J,F=!1}D=void 0}}finally{D?Ae():ce=!1}}}var Ae;if(typeof ue=="function")Ae=function(){ue(Je)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,Ce=Oe.port2;Oe.port1.onmessage=Je,Ae=function(){Ce.postMessage(null)}}else Ae=function(){ye(Je,0)};function Be(G,D){ie=ye(function(){G(r.unstable_now())},D)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Re=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return z},r.unstable_next=function(G){switch(z){case 1:case 2:case 3:var D=3;break;default:D=z}var J=z;z=D;try{return G()}finally{z=J}},r.unstable_requestPaint=function(){X=!0},r.unstable_runWithPriority=function(G,D){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var J=z;z=G;try{return D()}finally{z=J}},r.unstable_scheduleCallback=function(G,D,J){var P=r.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?P+J:P):J=P,G){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=J+K,G={id:y++,callback:D,priorityLevel:G,startTime:J,expirationTime:K,sortIndex:-1},J>P?(G.sortIndex=J,n(m,G),i(p)===null&&G===i(m)&&(Z?(he(ie),ie=-1):Z=!0,Be(ae,J-P))):(G.sortIndex=K,n(p,G),U||F||(U=!0,ce||(ce=!0,Ae()))),G},r.unstable_shouldYield=Pe,r.unstable_wrapCallback=function(G){var D=z;return function(){var J=z;z=D;try{return G.apply(this,arguments)}finally{z=J}}}})(sd)),sd}var Ng;function vw(){return Ng||(Ng=1,od.exports=yw()),od.exports}var ad={exports:{}},Jt={};var Og;function bw(){if(Og)return Jt;Og=1;var r=$d();function n(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(n(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},c=Symbol.for("react.portal");function l(p,m,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:_==null?null:""+_,children:p,containerInfo:m,implementation:y}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Jt.createPortal=function(p,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(n(299));return l(p,m,null,y)},Jt.flushSync=function(p){var m=d.T,y=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=m,s.p=y,s.d.f()}},Jt.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},Jt.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},Jt.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var y=m.as,_=h(y,m.crossOrigin),z=typeof m.integrity=="string"?m.integrity:void 0,F=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:z,fetchPriority:F}):y==="script"&&s.d.X(p,{crossOrigin:_,integrity:z,fetchPriority:F,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Jt.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=h(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},Jt.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,_=h(y,m.crossOrigin);s.d.L(p,y,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Jt.preloadModule=function(p,m){if(typeof p=="string")if(m){var y=h(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},Jt.requestFormReset=function(p){s.d.r(p)},Jt.unstable_batchedUpdates=function(p,m){return p(m)},Jt.useFormState=function(p,m,y){return d.H.useFormState(p,m,y)},Jt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Jt.version="19.2.3",Jt}var Mg;function Sw(){if(Mg)return ad.exports;Mg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),ad.exports=bw(),ad.exports}var Ug;function Tw(){if(Ug)return bs;Ug=1;var r=vw(),n=$d(),i=Sw();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)t+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function l(e){var t=e,o=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(o=t.return),e=t.return;while(e)}return t.tag===3?o:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function h(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(l(e)!==e)throw Error(s(188))}function m(e){var t=e.alternate;if(!t){if(t=l(e),t===null)throw Error(s(188));return t!==e?null:e}for(var o=e,a=t;;){var u=o.return;if(u===null)break;var f=u.alternate;if(f===null){if(a=u.return,a!==null){o=a;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===o)return p(u),e;if(f===a)return p(u),t;f=f.sibling}throw Error(s(188))}if(o.return!==a.return)o=u,a=f;else{for(var v=!1,x=u.child;x;){if(x===o){v=!0,o=u,a=f;break}if(x===a){v=!0,a=u,o=f;break}x=x.sibling}if(!v){for(x=f.child;x;){if(x===o){v=!0,o=f,a=u;break}if(x===a){v=!0,a=f,o=u;break}x=x.sibling}if(!v)throw Error(s(189))}}if(o.alternate!==a)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var _=Object.assign,z=Symbol.for("react.element"),F=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),ye=Symbol.for("react.profiler"),he=Symbol.for("react.consumer"),ue=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),xe=Symbol.for("react.activity"),Pe=Symbol.for("react.memo_cache_sentinel"),Je=Symbol.iterator;function Ae(e){return e===null||typeof e!="object"?null:(e=Je&&e[Je]||e["@@iterator"],typeof e=="function"?e:null)}var Oe=Symbol.for("react.client.reference");function Ce(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Oe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Z:return"Fragment";case ye:return"Profiler";case X:return"StrictMode";case ae:return"Suspense";case ce:return"SuspenseList";case xe:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case U:return"Portal";case ue:return e.displayName||"Context";case he:return(e._context.displayName||"Context")+".Consumer";case ne:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ie:return t=e.displayName||null,t!==null?t:Ce(e.type)||"Memo";case Re:t=e._payload,e=e._init;try{return Ce(e(t))}catch{}}return null}var Be=Array.isArray,G=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},P=[],K=-1;function T(e){return{current:e}}function j(e){0>K||(e.current=P[K],P[K]=null,K--)}function C(e,t){K++,P[K]=e.current,e.current=t}var R=T(null),E=T(null),O=T(null),k=T(null);function b(e,t){switch(C(O,t),C(E,e),C(R,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Xm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Xm(t),e=Ym(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}j(R),C(R,e)}function w(){j(R),j(E),j(O)}function A(e){e.memoizedState!==null&&C(k,e);var t=R.current,o=Ym(t,e.type);t!==o&&(C(E,e),C(R,o))}function H(e){E.current===e&&(j(R),j(E)),k.current===e&&(j(k),ps._currentValue=J)}var ee,V;function I(e){if(ee===void 0)try{throw Error()}catch(o){var t=o.stack.trim().match(/\n( *(at )?)/);ee=t&&t[1]||"",V=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ee+e+V}var L=!1;function re(e,t){if(!e||L)return"";L=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var we=function(){throw Error()};if(Object.defineProperty(we.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(we,[])}catch(ge){var pe=ge}Reflect.construct(e,[],we)}else{try{we.call()}catch(ge){pe=ge}e.call(we.prototype)}}else{try{throw Error()}catch(ge){pe=ge}(we=e())&&typeof we.catch=="function"&&we.catch(function(){})}}catch(ge){if(ge&&pe&&typeof ge.stack=="string")return[ge.stack,pe.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=a.DetermineComponentFrameRoot(),v=f[0],x=f[1];if(v&&x){var $=v.split(`
`),fe=x.split(`
`);for(u=a=0;a<$.length&&!$[a].includes("DetermineComponentFrameRoot");)a++;for(;u<fe.length&&!fe[u].includes("DetermineComponentFrameRoot");)u++;if(a===$.length||u===fe.length)for(a=$.length-1,u=fe.length-1;1<=a&&0<=u&&$[a]!==fe[u];)u--;for(;1<=a&&0<=u;a--,u--)if($[a]!==fe[u]){if(a!==1||u!==1)do if(a--,u--,0>u||$[a]!==fe[u]){var be=`
`+$[a].replace(" at new "," at ");return e.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",e.displayName)),be}while(1<=a&&0<=u);break}}}finally{L=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?I(o):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return I(e.type);case 16:return I("Lazy");case 13:return e.child!==t&&t!==null?I("Suspense Fallback"):I("Suspense");case 19:return I("SuspenseList");case 0:case 15:return re(e.type,!1);case 11:return re(e.type.render,!1);case 1:return re(e.type,!0);case 31:return I("Activity");default:return""}}function Q(e){try{var t="",o=null;do t+=te(e,o),o=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var le=Object.prototype.hasOwnProperty,_e=r.unstable_scheduleCallback,ke=r.unstable_cancelCallback,Ee=r.unstable_shouldYield,Ne=r.unstable_requestPaint,qe=r.unstable_now,Ke=r.unstable_getCurrentPriorityLevel,N=r.unstable_ImmediatePriority,S=r.unstable_UserBlockingPriority,M=r.unstable_NormalPriority,W=r.unstable_LowPriority,B=r.unstable_IdlePriority,oe=r.log,ve=r.unstable_setDisableYieldValue,Ie=null,Me=null;function De(e){if(typeof oe=="function"&&ve(e),Me&&typeof Me.setStrictMode=="function")try{Me.setStrictMode(Ie,e)}catch{}}var ze=Math.clz32?Math.clz32:It,at=Math.log,Et=Math.LN2;function It(e){return e>>>=0,e===0?32:31-(at(e)/Et|0)|0}var Yt=256,_i=262144,Qr=4194304;function Wr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Bs(e,t,o){var a=e.pendingLanes;if(a===0)return 0;var u=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var x=a&134217727;return x!==0?(a=x&~f,a!==0?u=Wr(a):(v&=x,v!==0?u=Wr(v):o||(o=x&~e,o!==0&&(u=Wr(o))))):(x=a&~f,x!==0?u=Wr(x):v!==0?u=Wr(v):o||(o=a&~e,o!==0&&(u=Wr(o)))),u===0?0:t!==0&&t!==u&&(t&f)===0&&(f=u&-u,o=t&-t,f>=o||f===32&&(o&4194048)!==0)?t:u}function xo(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function tS(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Af(){var e=Qr;return Qr<<=1,(Qr&62914560)===0&&(Qr=4194304),e}function Vc(e){for(var t=[],o=0;31>o;o++)t.push(e);return t}function Ao(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function nS(e,t,o,a,u,f){var v=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var x=e.entanglements,$=e.expirationTimes,fe=e.hiddenUpdates;for(o=v&~o;0<o;){var be=31-ze(o),we=1<<be;x[be]=0,$[be]=-1;var pe=fe[be];if(pe!==null)for(fe[be]=null,be=0;be<pe.length;be++){var ge=pe[be];ge!==null&&(ge.lane&=-536870913)}o&=~we}a!==0&&kf(e,a,0),f!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~t))}function kf(e,t,o){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-ze(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|o&261930}function Nf(e,t){var o=e.entangledLanes|=t;for(e=e.entanglements;o;){var a=31-ze(o),u=1<<a;u&t|e[a]&t&&(e[a]|=t),o&=~u}}function Of(e,t){var o=t&-t;return o=(o&42)!==0?1:Gc(o),(o&(e.suspendedLanes|t))!==0?0:o}function Gc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Mf(){var e=D.p;return e!==0?e:(e=window.event,e===void 0?32:yg(e.type))}function Uf(e,t){var o=D.p;try{return D.p=e,t()}finally{D.p=o}}var Sr=Math.random().toString(36).slice(2),Ht="__reactFiber$"+Sr,an="__reactProps$"+Sr,xi="__reactContainer$"+Sr,Xc="__reactEvents$"+Sr,rS="__reactListeners$"+Sr,iS="__reactHandles$"+Sr,Df="__reactResources$"+Sr,ko="__reactMarker$"+Sr;function Yc(e){delete e[Ht],delete e[an],delete e[Xc],delete e[rS],delete e[iS]}function Ai(e){var t=e[Ht];if(t)return t;for(var o=e.parentNode;o;){if(t=o[xi]||o[Ht]){if(o=t.alternate,t.child!==null||o!==null&&o.child!==null)for(e=tg(e);e!==null;){if(o=e[Ht])return o;e=tg(e)}return t}e=o,o=e.parentNode}return null}function ki(e){if(e=e[Ht]||e[xi]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function No(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function Ni(e){var t=e[Df];return t||(t=e[Df]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function zt(e){e[ko]=!0}var jf=new Set,Pf={};function Zr(e,t){Oi(e,t),Oi(e+"Capture",t)}function Oi(e,t){for(Pf[e]=t,e=0;e<t.length;e++)jf.add(t[e])}var oS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),If={},zf={};function sS(e){return le.call(zf,e)?!0:le.call(If,e)?!1:oS.test(e)?zf[e]=!0:(If[e]=!0,!1)}function Hs(e,t,o){if(sS(t))if(o===null)e.removeAttribute(t);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+o)}}function qs(e,t,o){if(o===null)e.removeAttribute(t);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+o)}}function Wn(e,t,o,a){if(a===null)e.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(t,o,""+a)}}function xn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Lf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function aS(e,t,o){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var u=a.get,f=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Jc(e){if(!e._valueTracker){var t=Lf(e)?"checked":"value";e._valueTracker=aS(e,t,""+e[t])}}function Bf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var o=t.getValue(),a="";return e&&(a=Lf(e)?e.checked?"true":"false":e.value),e=a,e!==o?(t.setValue(e),!0):!1}function $s(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var cS=/[\n"\\]/g;function An(e){return e.replace(cS,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Kc(e,t,o,a,u,f,v,x){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),t!=null?v==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+xn(t)):e.value!==""+xn(t)&&(e.value=""+xn(t)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),t!=null?Qc(e,v,xn(t)):o!=null?Qc(e,v,xn(o)):a!=null&&e.removeAttribute("value"),u==null&&f!=null&&(e.defaultChecked=!!f),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.name=""+xn(x):e.removeAttribute("name")}function Hf(e,t,o,a,u,f,v,x){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||o!=null){if(!(f!=="submit"&&f!=="reset"||t!=null)){Jc(e);return}o=o!=null?""+xn(o):"",t=t!=null?""+xn(t):o,x||t===e.value||(e.value=t),e.defaultValue=t}a=a??u,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=x?e.checked:!!a,e.defaultChecked=!!a,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),Jc(e)}function Qc(e,t,o){t==="number"&&$s(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function Mi(e,t,o,a){if(e=e.options,t){t={};for(var u=0;u<o.length;u++)t["$"+o[u]]=!0;for(o=0;o<e.length;o++)u=t.hasOwnProperty("$"+e[o].value),e[o].selected!==u&&(e[o].selected=u),u&&a&&(e[o].defaultSelected=!0)}else{for(o=""+xn(o),t=null,u=0;u<e.length;u++){if(e[u].value===o){e[u].selected=!0,a&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function qf(e,t,o){if(t!=null&&(t=""+xn(t),t!==e.value&&(e.value=t),o==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=o!=null?""+xn(o):""}function $f(e,t,o,a){if(t==null){if(a!=null){if(o!=null)throw Error(s(92));if(Be(a)){if(1<a.length)throw Error(s(93));a=a[0]}o=a}o==null&&(o=""),t=o}o=xn(t),e.defaultValue=o,a=e.textContent,a===o&&a!==""&&a!==null&&(e.value=a),Jc(e)}function Ui(e,t){if(t){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=t;return}}e.textContent=t}var lS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vf(e,t,o){var a=t.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,o):typeof o!="number"||o===0||lS.has(t)?t==="float"?e.cssFloat=o:e[t]=(""+o).trim():e[t]=o+"px"}function Gf(e,t,o){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,o!=null){for(var a in o)!o.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var u in t)a=t[u],t.hasOwnProperty(u)&&o[u]!==a&&Vf(e,u,a)}else for(var f in t)t.hasOwnProperty(f)&&Vf(e,f,t[f])}function Wc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),dS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vs(e){return dS.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Zn(){}var Zc=null;function el(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Di=null,ji=null;function Ff(e){var t=ki(e);if(t&&(e=t.stateNode)){var o=e[an]||null;e:switch(e=t.stateNode,t.type){case"input":if(Kc(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),t=o.name,o.type==="radio"&&t!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+An(""+t)+'"][type="radio"]'),t=0;t<o.length;t++){var a=o[t];if(a!==e&&a.form===e.form){var u=a[an]||null;if(!u)throw Error(s(90));Kc(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(t=0;t<o.length;t++)a=o[t],a.form===e.form&&Bf(a)}break e;case"textarea":qf(e,o.value,o.defaultValue);break e;case"select":t=o.value,t!=null&&Mi(e,!!o.multiple,t,!1)}}}var tl=!1;function Xf(e,t,o){if(tl)return e(t,o);tl=!0;try{var a=e(t);return a}finally{if(tl=!1,(Di!==null||ji!==null)&&(Oa(),Di&&(t=Di,e=ji,ji=Di=null,Ff(t),e)))for(t=0;t<e.length;t++)Ff(e[t])}}function Oo(e,t){var o=e.stateNode;if(o===null)return null;var a=o[an]||null;if(a===null)return null;o=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(s(231,t,typeof o));return o}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nl=!1;if(er)try{var Mo={};Object.defineProperty(Mo,"passive",{get:function(){nl=!0}}),window.addEventListener("test",Mo,Mo),window.removeEventListener("test",Mo,Mo)}catch{nl=!1}var Tr=null,rl=null,Gs=null;function Yf(){if(Gs)return Gs;var e,t=rl,o=t.length,a,u="value"in Tr?Tr.value:Tr.textContent,f=u.length;for(e=0;e<o&&t[e]===u[e];e++);var v=o-e;for(a=1;a<=v&&t[o-a]===u[f-a];a++);return Gs=u.slice(e,1<a?1-a:void 0)}function Fs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Xs(){return!0}function Jf(){return!1}function cn(e){function t(o,a,u,f,v){this._reactName=o,this._targetInst=u,this.type=a,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var x in e)e.hasOwnProperty(x)&&(o=e[x],this[x]=o?o(f):f[x]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Xs:Jf,this.isPropagationStopped=Jf,this}return _(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Xs)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Xs)},persist:function(){},isPersistent:Xs}),t}var ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ys=cn(ei),Uo=_({},ei,{view:0,detail:0}),fS=cn(Uo),il,ol,Do,Js=_({},Uo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:al,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Do&&(Do&&e.type==="mousemove"?(il=e.screenX-Do.screenX,ol=e.screenY-Do.screenY):ol=il=0,Do=e),il)},movementY:function(e){return"movementY"in e?e.movementY:ol}}),Kf=cn(Js),hS=_({},Js,{dataTransfer:0}),pS=cn(hS),mS=_({},Uo,{relatedTarget:0}),sl=cn(mS),gS=_({},ei,{animationName:0,elapsedTime:0,pseudoElement:0}),yS=cn(gS),vS=_({},ei,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bS=cn(vS),SS=_({},ei,{data:0}),Qf=cn(SS),TS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=CS[e])?!!t[e]:!1}function al(){return RS}var ES=_({},Uo,{key:function(e){if(e.key){var t=TS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Fs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:al,charCode:function(e){return e.type==="keypress"?Fs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Fs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),_S=cn(ES),xS=_({},Js,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wf=cn(xS),AS=_({},Uo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:al}),kS=cn(AS),NS=_({},ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),OS=cn(NS),MS=_({},Js,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),US=cn(MS),DS=_({},ei,{newState:0,oldState:0}),jS=cn(DS),PS=[9,13,27,32],cl=er&&"CompositionEvent"in window,jo=null;er&&"documentMode"in document&&(jo=document.documentMode);var IS=er&&"TextEvent"in window&&!jo,Zf=er&&(!cl||jo&&8<jo&&11>=jo),eh=" ",th=!1;function nh(e,t){switch(e){case"keyup":return PS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Pi=!1;function zS(e,t){switch(e){case"compositionend":return rh(t);case"keypress":return t.which!==32?null:(th=!0,eh);case"textInput":return e=t.data,e===eh&&th?null:e;default:return null}}function LS(e,t){if(Pi)return e==="compositionend"||!cl&&nh(e,t)?(e=Yf(),Gs=rl=Tr=null,Pi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Zf&&t.locale!=="ko"?null:t.data;default:return null}}var BS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ih(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!BS[e.type]:t==="textarea"}function oh(e,t,o,a){Di?ji?ji.push(a):ji=[a]:Di=a,t=za(t,"onChange"),0<t.length&&(o=new Ys("onChange","change",null,o,a),e.push({event:o,listeners:t}))}var Po=null,Io=null;function HS(e){Hm(e,0)}function Ks(e){var t=No(e);if(Bf(t))return e}function sh(e,t){if(e==="change")return t}var ah=!1;if(er){var ll;if(er){var ul="oninput"in document;if(!ul){var ch=document.createElement("div");ch.setAttribute("oninput","return;"),ul=typeof ch.oninput=="function"}ll=ul}else ll=!1;ah=ll&&(!document.documentMode||9<document.documentMode)}function lh(){Po&&(Po.detachEvent("onpropertychange",uh),Io=Po=null)}function uh(e){if(e.propertyName==="value"&&Ks(Io)){var t=[];oh(t,Io,e,el(e)),Xf(HS,t)}}function qS(e,t,o){e==="focusin"?(lh(),Po=t,Io=o,Po.attachEvent("onpropertychange",uh)):e==="focusout"&&lh()}function $S(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ks(Io)}function VS(e,t){if(e==="click")return Ks(t)}function GS(e,t){if(e==="input"||e==="change")return Ks(t)}function FS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vn=typeof Object.is=="function"?Object.is:FS;function zo(e,t){if(vn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(a=0;a<o.length;a++){var u=o[a];if(!le.call(t,u)||!vn(e[u],t[u]))return!1}return!0}function dh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fh(e,t){var o=dh(e);e=0;for(var a;o;){if(o.nodeType===3){if(a=e+o.textContent.length,e<=t&&a>=t)return{node:o,offset:t-e};e=a}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=dh(o)}}function hh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?hh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ph(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=$s(e.document);t instanceof e.HTMLIFrameElement;){try{var o=typeof t.contentWindow.location.href=="string"}catch{o=!1}if(o)e=t.contentWindow;else break;t=$s(e.document)}return t}function dl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var XS=er&&"documentMode"in document&&11>=document.documentMode,Ii=null,fl=null,Lo=null,hl=!1;function mh(e,t,o){var a=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;hl||Ii==null||Ii!==$s(a)||(a=Ii,"selectionStart"in a&&dl(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Lo&&zo(Lo,a)||(Lo=a,a=za(fl,"onSelect"),0<a.length&&(t=new Ys("onSelect","select",null,t,o),e.push({event:t,listeners:a}),t.target=Ii)))}function ti(e,t){var o={};return o[e.toLowerCase()]=t.toLowerCase(),o["Webkit"+e]="webkit"+t,o["Moz"+e]="moz"+t,o}var zi={animationend:ti("Animation","AnimationEnd"),animationiteration:ti("Animation","AnimationIteration"),animationstart:ti("Animation","AnimationStart"),transitionrun:ti("Transition","TransitionRun"),transitionstart:ti("Transition","TransitionStart"),transitioncancel:ti("Transition","TransitionCancel"),transitionend:ti("Transition","TransitionEnd")},pl={},gh={};er&&(gh=document.createElement("div").style,"AnimationEvent"in window||(delete zi.animationend.animation,delete zi.animationiteration.animation,delete zi.animationstart.animation),"TransitionEvent"in window||delete zi.transitionend.transition);function ni(e){if(pl[e])return pl[e];if(!zi[e])return e;var t=zi[e],o;for(o in t)if(t.hasOwnProperty(o)&&o in gh)return pl[e]=t[o];return e}var yh=ni("animationend"),vh=ni("animationiteration"),bh=ni("animationstart"),YS=ni("transitionrun"),JS=ni("transitionstart"),KS=ni("transitioncancel"),Sh=ni("transitionend"),Th=new Map,ml="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ml.push("scrollEnd");function Ln(e,t){Th.set(e,t),Zr(t,[e])}var Qs=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},kn=[],Li=0,gl=0;function Ws(){for(var e=Li,t=gl=Li=0;t<e;){var o=kn[t];kn[t++]=null;var a=kn[t];kn[t++]=null;var u=kn[t];kn[t++]=null;var f=kn[t];if(kn[t++]=null,a!==null&&u!==null){var v=a.pending;v===null?u.next=u:(u.next=v.next,v.next=u),a.pending=u}f!==0&&wh(o,u,f)}}function Zs(e,t,o,a){kn[Li++]=e,kn[Li++]=t,kn[Li++]=o,kn[Li++]=a,gl|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function yl(e,t,o,a){return Zs(e,t,o,a),ea(e)}function ri(e,t){return Zs(e,null,null,t),ea(e)}function wh(e,t,o){e.lanes|=o;var a=e.alternate;a!==null&&(a.lanes|=o);for(var u=!1,f=e.return;f!==null;)f.childLanes|=o,a=f.alternate,a!==null&&(a.childLanes|=o),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(u=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,u&&t!==null&&(u=31-ze(o),e=f.hiddenUpdates,a=e[u],a===null?e[u]=[t]:a.push(t),t.lane=o|536870912),f):null}function ea(e){if(50<as)throw as=0,_u=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Bi={};function QS(e,t,o,a){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(e,t,o,a){return new QS(e,t,o,a)}function vl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tr(e,t){var o=e.alternate;return o===null?(o=bn(e.tag,t,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=t,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&65011712,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,t=e.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function Ch(e,t){e.flags&=65011714;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,t=o.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ta(e,t,o,a,u,f){var v=0;if(a=e,typeof e=="function")vl(e)&&(v=1);else if(typeof e=="string")v=nw(e,o,R.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case xe:return e=bn(31,o,t,u),e.elementType=xe,e.lanes=f,e;case Z:return ii(o.children,u,f,t);case X:v=8,u|=24;break;case ye:return e=bn(12,o,t,u|2),e.elementType=ye,e.lanes=f,e;case ae:return e=bn(13,o,t,u),e.elementType=ae,e.lanes=f,e;case ce:return e=bn(19,o,t,u),e.elementType=ce,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ue:v=10;break e;case he:v=9;break e;case ne:v=11;break e;case ie:v=14;break e;case Re:v=16,a=null;break e}v=29,o=Error(s(130,e===null?"null":typeof e,"")),a=null}return t=bn(v,o,t,u),t.elementType=e,t.type=a,t.lanes=f,t}function ii(e,t,o,a){return e=bn(7,e,a,t),e.lanes=o,e}function bl(e,t,o){return e=bn(6,e,null,t),e.lanes=o,e}function Rh(e){var t=bn(18,null,null,0);return t.stateNode=e,t}function Sl(e,t,o){return t=bn(4,e.children!==null?e.children:[],e.key,t),t.lanes=o,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Eh=new WeakMap;function Nn(e,t){if(typeof e=="object"&&e!==null){var o=Eh.get(e);return o!==void 0?o:(t={value:e,source:t,stack:Q(t)},Eh.set(e,t),t)}return{value:e,source:t,stack:Q(t)}}var Hi=[],qi=0,na=null,Bo=0,On=[],Mn=0,wr=null,Fn=1,Xn="";function nr(e,t){Hi[qi++]=Bo,Hi[qi++]=na,na=e,Bo=t}function _h(e,t,o){On[Mn++]=Fn,On[Mn++]=Xn,On[Mn++]=wr,wr=e;var a=Fn;e=Xn;var u=32-ze(a)-1;a&=~(1<<u),o+=1;var f=32-ze(t)+u;if(30<f){var v=u-u%5;f=(a&(1<<v)-1).toString(32),a>>=v,u-=v,Fn=1<<32-ze(t)+u|o<<u|a,Xn=f+e}else Fn=1<<f|o<<u|a,Xn=e}function Tl(e){e.return!==null&&(nr(e,1),_h(e,1,0))}function wl(e){for(;e===na;)na=Hi[--qi],Hi[qi]=null,Bo=Hi[--qi],Hi[qi]=null;for(;e===wr;)wr=On[--Mn],On[Mn]=null,Xn=On[--Mn],On[Mn]=null,Fn=On[--Mn],On[Mn]=null}function xh(e,t){On[Mn++]=Fn,On[Mn++]=Xn,On[Mn++]=wr,Fn=t.id,Xn=t.overflow,wr=e}var qt=null,mt=null,nt=!1,Cr=null,Un=!1,Cl=Error(s(519));function Rr(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ho(Nn(t,e)),Cl}function Ah(e){var t=e.stateNode,o=e.type,a=e.memoizedProps;switch(t[Ht]=e,t[an]=a,o){case"dialog":We("cancel",t),We("close",t);break;case"iframe":case"object":case"embed":We("load",t);break;case"video":case"audio":for(o=0;o<ls.length;o++)We(ls[o],t);break;case"source":We("error",t);break;case"img":case"image":case"link":We("error",t),We("load",t);break;case"details":We("toggle",t);break;case"input":We("invalid",t),Hf(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":We("invalid",t);break;case"textarea":We("invalid",t),$f(t,a.value,a.defaultValue,a.children)}o=a.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||t.textContent===""+o||a.suppressHydrationWarning===!0||Gm(t.textContent,o)?(a.popover!=null&&(We("beforetoggle",t),We("toggle",t)),a.onScroll!=null&&We("scroll",t),a.onScrollEnd!=null&&We("scrollend",t),a.onClick!=null&&(t.onclick=Zn),t=!0):t=!1,t||Rr(e,!0)}function kh(e){for(qt=e.return;qt;)switch(qt.tag){case 5:case 31:case 13:Un=!1;return;case 27:case 3:Un=!0;return;default:qt=qt.return}}function $i(e){if(e!==qt)return!1;if(!nt)return kh(e),nt=!0,!1;var t=e.tag,o;if((o=t!==3&&t!==27)&&((o=t===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||Hu(e.type,e.memoizedProps)),o=!o),o&&mt&&Rr(e),kh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));mt=eg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));mt=eg(e)}else t===27?(t=mt,zr(e.type)?(e=Fu,Fu=null,mt=e):mt=t):mt=qt?jn(e.stateNode.nextSibling):null;return!0}function oi(){mt=qt=null,nt=!1}function Rl(){var e=Cr;return e!==null&&(fn===null?fn=e:fn.push.apply(fn,e),Cr=null),e}function Ho(e){Cr===null?Cr=[e]:Cr.push(e)}var El=T(null),si=null,rr=null;function Er(e,t,o){C(El,t._currentValue),t._currentValue=o}function ir(e){e._currentValue=El.current,j(El)}function _l(e,t,o){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===o)break;e=e.return}}function xl(e,t,o,a){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var f=u.dependencies;if(f!==null){var v=u.child;f=f.firstContext;e:for(;f!==null;){var x=f;f=u;for(var $=0;$<t.length;$++)if(x.context===t[$]){f.lanes|=o,x=f.alternate,x!==null&&(x.lanes|=o),_l(f.return,o,e),a||(v=null);break e}f=x.next}}else if(u.tag===18){if(v=u.return,v===null)throw Error(s(341));v.lanes|=o,f=v.alternate,f!==null&&(f.lanes|=o),_l(v,o,e),v=null}else v=u.child;if(v!==null)v.return=u;else for(v=u;v!==null;){if(v===e){v=null;break}if(u=v.sibling,u!==null){u.return=v.return,v=u;break}v=v.return}u=v}}function Vi(e,t,o,a){e=null;for(var u=t,f=!1;u!==null;){if(!f){if((u.flags&524288)!==0)f=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var v=u.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var x=u.type;vn(u.pendingProps.value,v.value)||(e!==null?e.push(x):e=[x])}}else if(u===k.current){if(v=u.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(ps):e=[ps])}u=u.return}e!==null&&xl(t,e,o,a),t.flags|=262144}function ra(e){for(e=e.firstContext;e!==null;){if(!vn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ai(e){si=e,rr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function $t(e){return Nh(si,e)}function ia(e,t){return si===null&&ai(e),Nh(e,t)}function Nh(e,t){var o=t._currentValue;if(t={context:t,memoizedValue:o,next:null},rr===null){if(e===null)throw Error(s(308));rr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else rr=rr.next=t;return o}var WS=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(o,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(o){return o()})}},ZS=r.unstable_scheduleCallback,eT=r.unstable_NormalPriority,At={$$typeof:ue,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Al(){return{controller:new WS,data:new Map,refCount:0}}function qo(e){e.refCount--,e.refCount===0&&ZS(eT,function(){e.controller.abort()})}var $o=null,kl=0,Gi=0,Fi=null;function tT(e,t){if($o===null){var o=$o=[];kl=0,Gi=Mu(),Fi={status:"pending",value:void 0,then:function(a){o.push(a)}}}return kl++,t.then(Oh,Oh),t}function Oh(){if(--kl===0&&$o!==null){Fi!==null&&(Fi.status="fulfilled");var e=$o;$o=null,Gi=0,Fi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function nT(e,t){var o=[],a={status:"pending",value:null,reason:null,then:function(u){o.push(u)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var u=0;u<o.length;u++)(0,o[u])(t)},function(u){for(a.status="rejected",a.reason=u,u=0;u<o.length;u++)(0,o[u])(void 0)}),a}var Mh=G.S;G.S=function(e,t){mm=qe(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&tT(e,t),Mh!==null&&Mh(e,t)};var ci=T(null);function Nl(){var e=ci.current;return e!==null?e:pt.pooledCache}function oa(e,t){t===null?C(ci,ci.current):C(ci,t.pool)}function Uh(){var e=Nl();return e===null?null:{parent:At._currentValue,pool:e}}var Xi=Error(s(460)),Ol=Error(s(474)),sa=Error(s(542)),aa={then:function(){}};function Dh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function jh(e,t,o){switch(o=e[o],o===void 0?e.push(t):o!==t&&(t.then(Zn,Zn),t=o),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ih(e),e;default:if(typeof t.status=="string")t.then(Zn,Zn);else{if(e=pt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var u=t;u.status="fulfilled",u.value=a}},function(a){if(t.status==="pending"){var u=t;u.status="rejected",u.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ih(e),e}throw ui=t,Xi}}function li(e){try{var t=e._init;return t(e._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(ui=o,Xi):o}}var ui=null;function Ph(){if(ui===null)throw Error(s(459));var e=ui;return ui=null,e}function Ih(e){if(e===Xi||e===sa)throw Error(s(483))}var Yi=null,Vo=0;function ca(e){var t=Vo;return Vo+=1,Yi===null&&(Yi=[]),jh(Yi,e,t)}function Go(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function la(e,t){throw t.$$typeof===z?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function zh(e){function t(se,Y){if(e){var de=se.deletions;de===null?(se.deletions=[Y],se.flags|=16):de.push(Y)}}function o(se,Y){if(!e)return null;for(;Y!==null;)t(se,Y),Y=Y.sibling;return null}function a(se){for(var Y=new Map;se!==null;)se.key!==null?Y.set(se.key,se):Y.set(se.index,se),se=se.sibling;return Y}function u(se,Y){return se=tr(se,Y),se.index=0,se.sibling=null,se}function f(se,Y,de){return se.index=de,e?(de=se.alternate,de!==null?(de=de.index,de<Y?(se.flags|=67108866,Y):de):(se.flags|=67108866,Y)):(se.flags|=1048576,Y)}function v(se){return e&&se.alternate===null&&(se.flags|=67108866),se}function x(se,Y,de,Se){return Y===null||Y.tag!==6?(Y=bl(de,se.mode,Se),Y.return=se,Y):(Y=u(Y,de),Y.return=se,Y)}function $(se,Y,de,Se){var He=de.type;return He===Z?be(se,Y,de.props.children,Se,de.key):Y!==null&&(Y.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===Re&&li(He)===Y.type)?(Y=u(Y,de.props),Go(Y,de),Y.return=se,Y):(Y=ta(de.type,de.key,de.props,null,se.mode,Se),Go(Y,de),Y.return=se,Y)}function fe(se,Y,de,Se){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==de.containerInfo||Y.stateNode.implementation!==de.implementation?(Y=Sl(de,se.mode,Se),Y.return=se,Y):(Y=u(Y,de.children||[]),Y.return=se,Y)}function be(se,Y,de,Se,He){return Y===null||Y.tag!==7?(Y=ii(de,se.mode,Se,He),Y.return=se,Y):(Y=u(Y,de),Y.return=se,Y)}function we(se,Y,de){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=bl(""+Y,se.mode,de),Y.return=se,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case F:return de=ta(Y.type,Y.key,Y.props,null,se.mode,de),Go(de,Y),de.return=se,de;case U:return Y=Sl(Y,se.mode,de),Y.return=se,Y;case Re:return Y=li(Y),we(se,Y,de)}if(Be(Y)||Ae(Y))return Y=ii(Y,se.mode,de,null),Y.return=se,Y;if(typeof Y.then=="function")return we(se,ca(Y),de);if(Y.$$typeof===ue)return we(se,ia(se,Y),de);la(se,Y)}return null}function pe(se,Y,de,Se){var He=Y!==null?Y.key:null;if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return He!==null?null:x(se,Y,""+de,Se);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case F:return de.key===He?$(se,Y,de,Se):null;case U:return de.key===He?fe(se,Y,de,Se):null;case Re:return de=li(de),pe(se,Y,de,Se)}if(Be(de)||Ae(de))return He!==null?null:be(se,Y,de,Se,null);if(typeof de.then=="function")return pe(se,Y,ca(de),Se);if(de.$$typeof===ue)return pe(se,Y,ia(se,de),Se);la(se,de)}return null}function ge(se,Y,de,Se,He){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return se=se.get(de)||null,x(Y,se,""+Se,He);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case F:return se=se.get(Se.key===null?de:Se.key)||null,$(Y,se,Se,He);case U:return se=se.get(Se.key===null?de:Se.key)||null,fe(Y,se,Se,He);case Re:return Se=li(Se),ge(se,Y,de,Se,He)}if(Be(Se)||Ae(Se))return se=se.get(de)||null,be(Y,se,Se,He,null);if(typeof Se.then=="function")return ge(se,Y,de,ca(Se),He);if(Se.$$typeof===ue)return ge(se,Y,de,ia(Y,Se),He);la(Y,Se)}return null}function je(se,Y,de,Se){for(var He=null,rt=null,Le=Y,Ye=Y=0,tt=null;Le!==null&&Ye<de.length;Ye++){Le.index>Ye?(tt=Le,Le=null):tt=Le.sibling;var it=pe(se,Le,de[Ye],Se);if(it===null){Le===null&&(Le=tt);break}e&&Le&&it.alternate===null&&t(se,Le),Y=f(it,Y,Ye),rt===null?He=it:rt.sibling=it,rt=it,Le=tt}if(Ye===de.length)return o(se,Le),nt&&nr(se,Ye),He;if(Le===null){for(;Ye<de.length;Ye++)Le=we(se,de[Ye],Se),Le!==null&&(Y=f(Le,Y,Ye),rt===null?He=Le:rt.sibling=Le,rt=Le);return nt&&nr(se,Ye),He}for(Le=a(Le);Ye<de.length;Ye++)tt=ge(Le,se,Ye,de[Ye],Se),tt!==null&&(e&&tt.alternate!==null&&Le.delete(tt.key===null?Ye:tt.key),Y=f(tt,Y,Ye),rt===null?He=tt:rt.sibling=tt,rt=tt);return e&&Le.forEach(function($r){return t(se,$r)}),nt&&nr(se,Ye),He}function $e(se,Y,de,Se){if(de==null)throw Error(s(151));for(var He=null,rt=null,Le=Y,Ye=Y=0,tt=null,it=de.next();Le!==null&&!it.done;Ye++,it=de.next()){Le.index>Ye?(tt=Le,Le=null):tt=Le.sibling;var $r=pe(se,Le,it.value,Se);if($r===null){Le===null&&(Le=tt);break}e&&Le&&$r.alternate===null&&t(se,Le),Y=f($r,Y,Ye),rt===null?He=$r:rt.sibling=$r,rt=$r,Le=tt}if(it.done)return o(se,Le),nt&&nr(se,Ye),He;if(Le===null){for(;!it.done;Ye++,it=de.next())it=we(se,it.value,Se),it!==null&&(Y=f(it,Y,Ye),rt===null?He=it:rt.sibling=it,rt=it);return nt&&nr(se,Ye),He}for(Le=a(Le);!it.done;Ye++,it=de.next())it=ge(Le,se,Ye,it.value,Se),it!==null&&(e&&it.alternate!==null&&Le.delete(it.key===null?Ye:it.key),Y=f(it,Y,Ye),rt===null?He=it:rt.sibling=it,rt=it);return e&&Le.forEach(function(hw){return t(se,hw)}),nt&&nr(se,Ye),He}function ft(se,Y,de,Se){if(typeof de=="object"&&de!==null&&de.type===Z&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case F:e:{for(var He=de.key;Y!==null;){if(Y.key===He){if(He=de.type,He===Z){if(Y.tag===7){o(se,Y.sibling),Se=u(Y,de.props.children),Se.return=se,se=Se;break e}}else if(Y.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===Re&&li(He)===Y.type){o(se,Y.sibling),Se=u(Y,de.props),Go(Se,de),Se.return=se,se=Se;break e}o(se,Y);break}else t(se,Y);Y=Y.sibling}de.type===Z?(Se=ii(de.props.children,se.mode,Se,de.key),Se.return=se,se=Se):(Se=ta(de.type,de.key,de.props,null,se.mode,Se),Go(Se,de),Se.return=se,se=Se)}return v(se);case U:e:{for(He=de.key;Y!==null;){if(Y.key===He)if(Y.tag===4&&Y.stateNode.containerInfo===de.containerInfo&&Y.stateNode.implementation===de.implementation){o(se,Y.sibling),Se=u(Y,de.children||[]),Se.return=se,se=Se;break e}else{o(se,Y);break}else t(se,Y);Y=Y.sibling}Se=Sl(de,se.mode,Se),Se.return=se,se=Se}return v(se);case Re:return de=li(de),ft(se,Y,de,Se)}if(Be(de))return je(se,Y,de,Se);if(Ae(de)){if(He=Ae(de),typeof He!="function")throw Error(s(150));return de=He.call(de),$e(se,Y,de,Se)}if(typeof de.then=="function")return ft(se,Y,ca(de),Se);if(de.$$typeof===ue)return ft(se,Y,ia(se,de),Se);la(se,de)}return typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint"?(de=""+de,Y!==null&&Y.tag===6?(o(se,Y.sibling),Se=u(Y,de),Se.return=se,se=Se):(o(se,Y),Se=bl(de,se.mode,Se),Se.return=se,se=Se),v(se)):o(se,Y)}return function(se,Y,de,Se){try{Vo=0;var He=ft(se,Y,de,Se);return Yi=null,He}catch(Le){if(Le===Xi||Le===sa)throw Le;var rt=bn(29,Le,null,se.mode);return rt.lanes=Se,rt.return=se,rt}}}var di=zh(!0),Lh=zh(!1),_r=!1;function Ml(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ul(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function xr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ar(e,t,o){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(st&2)!==0){var u=a.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),a.pending=t,t=ea(e),wh(e,null,o),t}return Zs(e,a,t,o),ea(e)}function Fo(e,t,o){if(t=t.updateQueue,t!==null&&(t=t.shared,(o&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,o|=a,t.lanes=o,Nf(e,o)}}function Dl(e,t){var o=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,o===a)){var u=null,f=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};f===null?u=f=v:f=f.next=v,o=o.next}while(o!==null);f===null?u=f=t:f=f.next=t}else u=f=t;o={baseState:a.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:a.shared,callbacks:a.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=t:e.next=t,o.lastBaseUpdate=t}var jl=!1;function Xo(){if(jl){var e=Fi;if(e!==null)throw e}}function Yo(e,t,o,a){jl=!1;var u=e.updateQueue;_r=!1;var f=u.firstBaseUpdate,v=u.lastBaseUpdate,x=u.shared.pending;if(x!==null){u.shared.pending=null;var $=x,fe=$.next;$.next=null,v===null?f=fe:v.next=fe,v=$;var be=e.alternate;be!==null&&(be=be.updateQueue,x=be.lastBaseUpdate,x!==v&&(x===null?be.firstBaseUpdate=fe:x.next=fe,be.lastBaseUpdate=$))}if(f!==null){var we=u.baseState;v=0,be=fe=$=null,x=f;do{var pe=x.lane&-536870913,ge=pe!==x.lane;if(ge?(et&pe)===pe:(a&pe)===pe){pe!==0&&pe===Gi&&(jl=!0),be!==null&&(be=be.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var je=e,$e=x;pe=t;var ft=o;switch($e.tag){case 1:if(je=$e.payload,typeof je=="function"){we=je.call(ft,we,pe);break e}we=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=$e.payload,pe=typeof je=="function"?je.call(ft,we,pe):je,pe==null)break e;we=_({},we,pe);break e;case 2:_r=!0}}pe=x.callback,pe!==null&&(e.flags|=64,ge&&(e.flags|=8192),ge=u.callbacks,ge===null?u.callbacks=[pe]:ge.push(pe))}else ge={lane:pe,tag:x.tag,payload:x.payload,callback:x.callback,next:null},be===null?(fe=be=ge,$=we):be=be.next=ge,v|=pe;if(x=x.next,x===null){if(x=u.shared.pending,x===null)break;ge=x,x=ge.next,ge.next=null,u.lastBaseUpdate=ge,u.shared.pending=null}}while(!0);be===null&&($=we),u.baseState=$,u.firstBaseUpdate=fe,u.lastBaseUpdate=be,f===null&&(u.shared.lanes=0),Ur|=v,e.lanes=v,e.memoizedState=we}}function Bh(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function Hh(e,t){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)Bh(o[e],t)}var Ji=T(null),ua=T(0);function qh(e,t){e=hr,C(ua,e),C(Ji,t),hr=e|t.baseLanes}function Pl(){C(ua,hr),C(Ji,Ji.current)}function Il(){hr=ua.current,j(Ji),j(ua)}var Sn=T(null),Dn=null;function kr(e){var t=e.alternate;C(_t,_t.current&1),C(Sn,e),Dn===null&&(t===null||Ji.current!==null||t.memoizedState!==null)&&(Dn=e)}function zl(e){C(_t,_t.current),C(Sn,e),Dn===null&&(Dn=e)}function $h(e){e.tag===22?(C(_t,_t.current),C(Sn,e),Dn===null&&(Dn=e)):Nr()}function Nr(){C(_t,_t.current),C(Sn,Sn.current)}function Tn(e){j(Sn),Dn===e&&(Dn=null),j(_t)}var _t=T(0);function da(e){for(var t=e;t!==null;){if(t.tag===13){var o=t.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Vu(o)||Gu(o)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var or=0,Fe=null,ut=null,kt=null,fa=!1,Ki=!1,fi=!1,ha=0,Jo=0,Qi=null,rT=0;function wt(){throw Error(s(321))}function Ll(e,t){if(t===null)return!1;for(var o=0;o<t.length&&o<e.length;o++)if(!vn(e[o],t[o]))return!1;return!0}function Bl(e,t,o,a,u,f){return or=f,Fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,G.H=e===null||e.memoizedState===null?_p:tu,fi=!1,f=o(a,u),fi=!1,Ki&&(f=Gh(t,o,a,u)),Vh(e),f}function Vh(e){G.H=Wo;var t=ut!==null&&ut.next!==null;if(or=0,kt=ut=Fe=null,fa=!1,Jo=0,Qi=null,t)throw Error(s(300));e===null||Nt||(e=e.dependencies,e!==null&&ra(e)&&(Nt=!0))}function Gh(e,t,o,a){Fe=e;var u=0;do{if(Ki&&(Qi=null),Jo=0,Ki=!1,25<=u)throw Error(s(301));if(u+=1,kt=ut=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}G.H=xp,f=t(o,a)}while(Ki);return f}function iT(){var e=G.H,t=e.useState()[0];return t=typeof t.then=="function"?Ko(t):t,e=e.useState()[0],(ut!==null?ut.memoizedState:null)!==e&&(Fe.flags|=1024),t}function Hl(){var e=ha!==0;return ha=0,e}function ql(e,t,o){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o}function $l(e){if(fa){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}fa=!1}or=0,kt=ut=Fe=null,Ki=!1,Jo=ha=0,Qi=null}function sn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Fe.memoizedState=kt=e:kt=kt.next=e,kt}function xt(){if(ut===null){var e=Fe.alternate;e=e!==null?e.memoizedState:null}else e=ut.next;var t=kt===null?Fe.memoizedState:kt.next;if(t!==null)kt=t,ut=e;else{if(e===null)throw Fe.alternate===null?Error(s(467)):Error(s(310));ut=e,e={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},kt===null?Fe.memoizedState=kt=e:kt=kt.next=e}return kt}function pa(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ko(e){var t=Jo;return Jo+=1,Qi===null&&(Qi=[]),e=jh(Qi,e,t),t=Fe,(kt===null?t.memoizedState:kt.next)===null&&(t=t.alternate,G.H=t===null||t.memoizedState===null?_p:tu),e}function ma(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ko(e);if(e.$$typeof===ue)return $t(e)}throw Error(s(438,String(e)))}function Vl(e){var t=null,o=Fe.updateQueue;if(o!==null&&(t=o.memoCache),t==null){var a=Fe.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(u){return u.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),o===null&&(o=pa(),Fe.updateQueue=o),o.memoCache=t,o=t.data[t.index],o===void 0)for(o=t.data[t.index]=Array(e),a=0;a<e;a++)o[a]=Pe;return t.index++,o}function sr(e,t){return typeof t=="function"?t(e):t}function ga(e){var t=xt();return Gl(t,ut,e)}function Gl(e,t,o){var a=e.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=o;var u=e.baseQueue,f=a.pending;if(f!==null){if(u!==null){var v=u.next;u.next=f.next,f.next=v}t.baseQueue=u=f,a.pending=null}if(f=e.baseState,u===null)e.memoizedState=f;else{t=u.next;var x=v=null,$=null,fe=t,be=!1;do{var we=fe.lane&-536870913;if(we!==fe.lane?(et&we)===we:(or&we)===we){var pe=fe.revertLane;if(pe===0)$!==null&&($=$.next={lane:0,revertLane:0,gesture:null,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),we===Gi&&(be=!0);else if((or&pe)===pe){fe=fe.next,pe===Gi&&(be=!0);continue}else we={lane:0,revertLane:fe.revertLane,gesture:null,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},$===null?(x=$=we,v=f):$=$.next=we,Fe.lanes|=pe,Ur|=pe;we=fe.action,fi&&o(f,we),f=fe.hasEagerState?fe.eagerState:o(f,we)}else pe={lane:we,revertLane:fe.revertLane,gesture:fe.gesture,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},$===null?(x=$=pe,v=f):$=$.next=pe,Fe.lanes|=we,Ur|=we;fe=fe.next}while(fe!==null&&fe!==t);if($===null?v=f:$.next=x,!vn(f,e.memoizedState)&&(Nt=!0,be&&(o=Fi,o!==null)))throw o;e.memoizedState=f,e.baseState=v,e.baseQueue=$,a.lastRenderedState=f}return u===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Fl(e){var t=xt(),o=t.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=e;var a=o.dispatch,u=o.pending,f=t.memoizedState;if(u!==null){o.pending=null;var v=u=u.next;do f=e(f,v.action),v=v.next;while(v!==u);vn(f,t.memoizedState)||(Nt=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),o.lastRenderedState=f}return[f,a]}function Fh(e,t,o){var a=Fe,u=xt(),f=nt;if(f){if(o===void 0)throw Error(s(407));o=o()}else o=t();var v=!vn((ut||u).memoizedState,o);if(v&&(u.memoizedState=o,Nt=!0),u=u.queue,Jl(Jh.bind(null,a,u,e),[e]),u.getSnapshot!==t||v||kt!==null&&kt.memoizedState.tag&1){if(a.flags|=2048,Wi(9,{destroy:void 0},Yh.bind(null,a,u,o,t),null),pt===null)throw Error(s(349));f||(or&127)!==0||Xh(a,t,o)}return o}function Xh(e,t,o){e.flags|=16384,e={getSnapshot:t,value:o},t=Fe.updateQueue,t===null?(t=pa(),Fe.updateQueue=t,t.stores=[e]):(o=t.stores,o===null?t.stores=[e]:o.push(e))}function Yh(e,t,o,a){t.value=o,t.getSnapshot=a,Kh(t)&&Qh(e)}function Jh(e,t,o){return o(function(){Kh(t)&&Qh(e)})}function Kh(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!vn(e,o)}catch{return!0}}function Qh(e){var t=ri(e,2);t!==null&&hn(t,e,2)}function Xl(e){var t=sn();if(typeof e=="function"){var o=e;if(e=o(),fi){De(!0);try{o()}finally{De(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sr,lastRenderedState:e},t}function Wh(e,t,o,a){return e.baseState=o,Gl(e,ut,typeof a=="function"?a:sr)}function oT(e,t,o,a,u){if(ba(e))throw Error(s(485));if(e=t.action,e!==null){var f={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};G.T!==null?o(!0):f.isTransition=!1,a(f),o=t.pending,o===null?(f.next=t.pending=f,Zh(t,f)):(f.next=o.next,t.pending=o.next=f)}}function Zh(e,t){var o=t.action,a=t.payload,u=e.state;if(t.isTransition){var f=G.T,v={};G.T=v;try{var x=o(u,a),$=G.S;$!==null&&$(v,x),ep(e,t,x)}catch(fe){Yl(e,t,fe)}finally{f!==null&&v.types!==null&&(f.types=v.types),G.T=f}}else try{f=o(u,a),ep(e,t,f)}catch(fe){Yl(e,t,fe)}}function ep(e,t,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(a){tp(e,t,a)},function(a){return Yl(e,t,a)}):tp(e,t,o)}function tp(e,t,o){t.status="fulfilled",t.value=o,np(t),e.state=o,t=e.pending,t!==null&&(o=t.next,o===t?e.pending=null:(o=o.next,t.next=o,Zh(e,o)))}function Yl(e,t,o){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=o,np(t),t=t.next;while(t!==a)}e.action=null}function np(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function rp(e,t){return t}function ip(e,t){if(nt){var o=pt.formState;if(o!==null){e:{var a=Fe;if(nt){if(mt){t:{for(var u=mt,f=Un;u.nodeType!==8;){if(!f){u=null;break t}if(u=jn(u.nextSibling),u===null){u=null;break t}}f=u.data,u=f==="F!"||f==="F"?u:null}if(u){mt=jn(u.nextSibling),a=u.data==="F!";break e}}Rr(a)}a=!1}a&&(t=o[0])}}return o=sn(),o.memoizedState=o.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rp,lastRenderedState:t},o.queue=a,o=Cp.bind(null,Fe,a),a.dispatch=o,a=Xl(!1),f=eu.bind(null,Fe,!1,a.queue),a=sn(),u={state:t,dispatch:null,action:e,pending:null},a.queue=u,o=oT.bind(null,Fe,u,f,o),u.dispatch=o,a.memoizedState=e,[t,o,!1]}function op(e){var t=xt();return sp(t,ut,e)}function sp(e,t,o){if(t=Gl(e,t,rp)[0],e=ga(sr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=Ko(t)}catch(v){throw v===Xi?sa:v}else a=t;t=xt();var u=t.queue,f=u.dispatch;return o!==t.memoizedState&&(Fe.flags|=2048,Wi(9,{destroy:void 0},sT.bind(null,u,o),null)),[a,f,e]}function sT(e,t){e.action=t}function ap(e){var t=xt(),o=ut;if(o!==null)return sp(t,o,e);xt(),t=t.memoizedState,o=xt();var a=o.queue.dispatch;return o.memoizedState=e,[t,a,!1]}function Wi(e,t,o,a){return e={tag:e,create:o,deps:a,inst:t,next:null},t=Fe.updateQueue,t===null&&(t=pa(),Fe.updateQueue=t),o=t.lastEffect,o===null?t.lastEffect=e.next=e:(a=o.next,o.next=e,e.next=a,t.lastEffect=e),e}function cp(){return xt().memoizedState}function ya(e,t,o,a){var u=sn();Fe.flags|=e,u.memoizedState=Wi(1|t,{destroy:void 0},o,a===void 0?null:a)}function va(e,t,o,a){var u=xt();a=a===void 0?null:a;var f=u.memoizedState.inst;ut!==null&&a!==null&&Ll(a,ut.memoizedState.deps)?u.memoizedState=Wi(t,f,o,a):(Fe.flags|=e,u.memoizedState=Wi(1|t,f,o,a))}function lp(e,t){ya(8390656,8,e,t)}function Jl(e,t){va(2048,8,e,t)}function aT(e){Fe.flags|=4;var t=Fe.updateQueue;if(t===null)t=pa(),Fe.updateQueue=t,t.events=[e];else{var o=t.events;o===null?t.events=[e]:o.push(e)}}function up(e){var t=xt().memoizedState;return aT({ref:t,nextImpl:e}),function(){if((st&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function dp(e,t){return va(4,2,e,t)}function fp(e,t){return va(4,4,e,t)}function hp(e,t){if(typeof t=="function"){e=e();var o=t(e);return function(){typeof o=="function"?o():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function pp(e,t,o){o=o!=null?o.concat([e]):null,va(4,4,hp.bind(null,t,e),o)}function Kl(){}function mp(e,t){var o=xt();t=t===void 0?null:t;var a=o.memoizedState;return t!==null&&Ll(t,a[1])?a[0]:(o.memoizedState=[e,t],e)}function gp(e,t){var o=xt();t=t===void 0?null:t;var a=o.memoizedState;if(t!==null&&Ll(t,a[1]))return a[0];if(a=e(),fi){De(!0);try{e()}finally{De(!1)}}return o.memoizedState=[a,t],a}function Ql(e,t,o){return o===void 0||(or&1073741824)!==0&&(et&261930)===0?e.memoizedState=t:(e.memoizedState=o,e=ym(),Fe.lanes|=e,Ur|=e,o)}function yp(e,t,o,a){return vn(o,t)?o:Ji.current!==null?(e=Ql(e,o,a),vn(e,t)||(Nt=!0),e):(or&42)===0||(or&1073741824)!==0&&(et&261930)===0?(Nt=!0,e.memoizedState=o):(e=ym(),Fe.lanes|=e,Ur|=e,t)}function vp(e,t,o,a,u){var f=D.p;D.p=f!==0&&8>f?f:8;var v=G.T,x={};G.T=x,eu(e,!1,t,o);try{var $=u(),fe=G.S;if(fe!==null&&fe(x,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var be=nT($,a);Qo(e,t,be,Rn(e))}else Qo(e,t,a,Rn(e))}catch(we){Qo(e,t,{then:function(){},status:"rejected",reason:we},Rn())}finally{D.p=f,v!==null&&x.types!==null&&(v.types=x.types),G.T=v}}function cT(){}function Wl(e,t,o,a){if(e.tag!==5)throw Error(s(476));var u=bp(e).queue;vp(e,u,t,J,o===null?cT:function(){return Sp(e),o(a)})}function bp(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sr,lastRenderedState:J},next:null};var o={};return t.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sr,lastRenderedState:o},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Sp(e){var t=bp(e);t.next===null&&(t=e.alternate.memoizedState),Qo(e,t.next.queue,{},Rn())}function Zl(){return $t(ps)}function Tp(){return xt().memoizedState}function wp(){return xt().memoizedState}function lT(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var o=Rn();e=xr(o);var a=Ar(t,e,o);a!==null&&(hn(a,t,o),Fo(a,t,o)),t={cache:Al()},e.payload=t;return}t=t.return}}function uT(e,t,o){var a=Rn();o={lane:a,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},ba(e)?Rp(t,o):(o=yl(e,t,o,a),o!==null&&(hn(o,e,a),Ep(o,t,a)))}function Cp(e,t,o){var a=Rn();Qo(e,t,o,a)}function Qo(e,t,o,a){var u={lane:a,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(ba(e))Rp(t,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var v=t.lastRenderedState,x=f(v,o);if(u.hasEagerState=!0,u.eagerState=x,vn(x,v))return Zs(e,t,u,0),pt===null&&Ws(),!1}catch{}if(o=yl(e,t,u,a),o!==null)return hn(o,e,a),Ep(o,t,a),!0}return!1}function eu(e,t,o,a){if(a={lane:2,revertLane:Mu(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ba(e)){if(t)throw Error(s(479))}else t=yl(e,o,a,2),t!==null&&hn(t,e,2)}function ba(e){var t=e.alternate;return e===Fe||t!==null&&t===Fe}function Rp(e,t){Ki=fa=!0;var o=e.pending;o===null?t.next=t:(t.next=o.next,o.next=t),e.pending=t}function Ep(e,t,o){if((o&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,o|=a,t.lanes=o,Nf(e,o)}}var Wo={readContext:$t,use:ma,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt,useHostTransitionStatus:wt,useFormState:wt,useActionState:wt,useOptimistic:wt,useMemoCache:wt,useCacheRefresh:wt};Wo.useEffectEvent=wt;var _p={readContext:$t,use:ma,useCallback:function(e,t){return sn().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:lp,useImperativeHandle:function(e,t,o){o=o!=null?o.concat([e]):null,ya(4194308,4,hp.bind(null,t,e),o)},useLayoutEffect:function(e,t){return ya(4194308,4,e,t)},useInsertionEffect:function(e,t){ya(4,2,e,t)},useMemo:function(e,t){var o=sn();t=t===void 0?null:t;var a=e();if(fi){De(!0);try{e()}finally{De(!1)}}return o.memoizedState=[a,t],a},useReducer:function(e,t,o){var a=sn();if(o!==void 0){var u=o(t);if(fi){De(!0);try{o(t)}finally{De(!1)}}}else u=t;return a.memoizedState=a.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},a.queue=e,e=e.dispatch=uT.bind(null,Fe,e),[a.memoizedState,e]},useRef:function(e){var t=sn();return e={current:e},t.memoizedState=e},useState:function(e){e=Xl(e);var t=e.queue,o=Cp.bind(null,Fe,t);return t.dispatch=o,[e.memoizedState,o]},useDebugValue:Kl,useDeferredValue:function(e,t){var o=sn();return Ql(o,e,t)},useTransition:function(){var e=Xl(!1);return e=vp.bind(null,Fe,e.queue,!0,!1),sn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,o){var a=Fe,u=sn();if(nt){if(o===void 0)throw Error(s(407));o=o()}else{if(o=t(),pt===null)throw Error(s(349));(et&127)!==0||Xh(a,t,o)}u.memoizedState=o;var f={value:o,getSnapshot:t};return u.queue=f,lp(Jh.bind(null,a,f,e),[e]),a.flags|=2048,Wi(9,{destroy:void 0},Yh.bind(null,a,f,o,t),null),o},useId:function(){var e=sn(),t=pt.identifierPrefix;if(nt){var o=Xn,a=Fn;o=(a&~(1<<32-ze(a)-1)).toString(32)+o,t="_"+t+"R_"+o,o=ha++,0<o&&(t+="H"+o.toString(32)),t+="_"}else o=rT++,t="_"+t+"r_"+o.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Zl,useFormState:ip,useActionState:ip,useOptimistic:function(e){var t=sn();t.memoizedState=t.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=o,t=eu.bind(null,Fe,!0,o),o.dispatch=t,[e,t]},useMemoCache:Vl,useCacheRefresh:function(){return sn().memoizedState=lT.bind(null,Fe)},useEffectEvent:function(e){var t=sn(),o={impl:e};return t.memoizedState=o,function(){if((st&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},tu={readContext:$t,use:ma,useCallback:mp,useContext:$t,useEffect:Jl,useImperativeHandle:pp,useInsertionEffect:dp,useLayoutEffect:fp,useMemo:gp,useReducer:ga,useRef:cp,useState:function(){return ga(sr)},useDebugValue:Kl,useDeferredValue:function(e,t){var o=xt();return yp(o,ut.memoizedState,e,t)},useTransition:function(){var e=ga(sr)[0],t=xt().memoizedState;return[typeof e=="boolean"?e:Ko(e),t]},useSyncExternalStore:Fh,useId:Tp,useHostTransitionStatus:Zl,useFormState:op,useActionState:op,useOptimistic:function(e,t){var o=xt();return Wh(o,ut,e,t)},useMemoCache:Vl,useCacheRefresh:wp};tu.useEffectEvent=up;var xp={readContext:$t,use:ma,useCallback:mp,useContext:$t,useEffect:Jl,useImperativeHandle:pp,useInsertionEffect:dp,useLayoutEffect:fp,useMemo:gp,useReducer:Fl,useRef:cp,useState:function(){return Fl(sr)},useDebugValue:Kl,useDeferredValue:function(e,t){var o=xt();return ut===null?Ql(o,e,t):yp(o,ut.memoizedState,e,t)},useTransition:function(){var e=Fl(sr)[0],t=xt().memoizedState;return[typeof e=="boolean"?e:Ko(e),t]},useSyncExternalStore:Fh,useId:Tp,useHostTransitionStatus:Zl,useFormState:ap,useActionState:ap,useOptimistic:function(e,t){var o=xt();return ut!==null?Wh(o,ut,e,t):(o.baseState=e,[e,o.queue.dispatch])},useMemoCache:Vl,useCacheRefresh:wp};xp.useEffectEvent=up;function nu(e,t,o,a){t=e.memoizedState,o=o(a,t),o=o==null?t:_({},t,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var ru={enqueueSetState:function(e,t,o){e=e._reactInternals;var a=Rn(),u=xr(a);u.payload=t,o!=null&&(u.callback=o),t=Ar(e,u,a),t!==null&&(hn(t,e,a),Fo(t,e,a))},enqueueReplaceState:function(e,t,o){e=e._reactInternals;var a=Rn(),u=xr(a);u.tag=1,u.payload=t,o!=null&&(u.callback=o),t=Ar(e,u,a),t!==null&&(hn(t,e,a),Fo(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var o=Rn(),a=xr(o);a.tag=2,t!=null&&(a.callback=t),t=Ar(e,a,o),t!==null&&(hn(t,e,o),Fo(t,e,o))}};function Ap(e,t,o,a,u,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,v):t.prototype&&t.prototype.isPureReactComponent?!zo(o,a)||!zo(u,f):!0}function kp(e,t,o,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(o,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(o,a),t.state!==e&&ru.enqueueReplaceState(t,t.state,null)}function hi(e,t){var o=t;if("ref"in t){o={};for(var a in t)a!=="ref"&&(o[a]=t[a])}if(e=e.defaultProps){o===t&&(o=_({},o));for(var u in e)o[u]===void 0&&(o[u]=e[u])}return o}function Np(e){Qs(e)}function Op(e){console.error(e)}function Mp(e){Qs(e)}function Sa(e,t){try{var o=e.onUncaughtError;o(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function Up(e,t,o){try{var a=e.onCaughtError;a(o.value,{componentStack:o.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function iu(e,t,o){return o=xr(o),o.tag=3,o.payload={element:null},o.callback=function(){Sa(e,t)},o}function Dp(e){return e=xr(e),e.tag=3,e}function jp(e,t,o,a){var u=o.type.getDerivedStateFromError;if(typeof u=="function"){var f=a.value;e.payload=function(){return u(f)},e.callback=function(){Up(t,o,a)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Up(t,o,a),typeof u!="function"&&(Dr===null?Dr=new Set([this]):Dr.add(this));var x=a.stack;this.componentDidCatch(a.value,{componentStack:x!==null?x:""})})}function dT(e,t,o,a,u){if(o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=o.alternate,t!==null&&Vi(t,o,u,!0),o=Sn.current,o!==null){switch(o.tag){case 31:case 13:return Dn===null?Ma():o.alternate===null&&Ct===0&&(Ct=3),o.flags&=-257,o.flags|=65536,o.lanes=u,a===aa?o.flags|=16384:(t=o.updateQueue,t===null?o.updateQueue=new Set([a]):t.add(a),ku(e,a,u)),!1;case 22:return o.flags|=65536,a===aa?o.flags|=16384:(t=o.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},o.updateQueue=t):(o=t.retryQueue,o===null?t.retryQueue=new Set([a]):o.add(a)),ku(e,a,u)),!1}throw Error(s(435,o.tag))}return ku(e,a,u),Ma(),!1}if(nt)return t=Sn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=u,a!==Cl&&(e=Error(s(422),{cause:a}),Ho(Nn(e,o)))):(a!==Cl&&(t=Error(s(423),{cause:a}),Ho(Nn(t,o))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,a=Nn(a,o),u=iu(e.stateNode,a,u),Dl(e,u),Ct!==4&&(Ct=2)),!1;var f=Error(s(520),{cause:a});if(f=Nn(f,o),ss===null?ss=[f]:ss.push(f),Ct!==4&&(Ct=2),t===null)return!0;a=Nn(a,o),o=t;do{switch(o.tag){case 3:return o.flags|=65536,e=u&-u,o.lanes|=e,e=iu(o.stateNode,a,e),Dl(o,e),!1;case 1:if(t=o.type,f=o.stateNode,(o.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Dr===null||!Dr.has(f))))return o.flags|=65536,u&=-u,o.lanes|=u,u=Dp(u),jp(u,e,o,a),Dl(o,u),!1}o=o.return}while(o!==null);return!1}var ou=Error(s(461)),Nt=!1;function Vt(e,t,o,a){t.child=e===null?Lh(t,null,o,a):di(t,e.child,o,a)}function Pp(e,t,o,a,u){o=o.render;var f=t.ref;if("ref"in a){var v={};for(var x in a)x!=="ref"&&(v[x]=a[x])}else v=a;return ai(t),a=Bl(e,t,o,v,f,u),x=Hl(),e!==null&&!Nt?(ql(e,t,u),ar(e,t,u)):(nt&&x&&Tl(t),t.flags|=1,Vt(e,t,a,u),t.child)}function Ip(e,t,o,a,u){if(e===null){var f=o.type;return typeof f=="function"&&!vl(f)&&f.defaultProps===void 0&&o.compare===null?(t.tag=15,t.type=f,zp(e,t,f,a,u)):(e=ta(o.type,null,a,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!hu(e,u)){var v=f.memoizedProps;if(o=o.compare,o=o!==null?o:zo,o(v,a)&&e.ref===t.ref)return ar(e,t,u)}return t.flags|=1,e=tr(f,a),e.ref=t.ref,e.return=t,t.child=e}function zp(e,t,o,a,u){if(e!==null){var f=e.memoizedProps;if(zo(f,a)&&e.ref===t.ref)if(Nt=!1,t.pendingProps=a=f,hu(e,u))(e.flags&131072)!==0&&(Nt=!0);else return t.lanes=e.lanes,ar(e,t,u)}return su(e,t,o,a,u)}function Lp(e,t,o,a){var u=a.children,f=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((t.flags&128)!==0){if(f=f!==null?f.baseLanes|o:o,e!==null){for(a=t.child=e.child,u=0;a!==null;)u=u|a.lanes|a.childLanes,a=a.sibling;a=u&~f}else a=0,t.child=null;return Bp(e,t,f,o,a)}if((o&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&oa(t,f!==null?f.cachePool:null),f!==null?qh(t,f):Pl(),$h(t);else return a=t.lanes=536870912,Bp(e,t,f!==null?f.baseLanes|o:o,o,a)}else f!==null?(oa(t,f.cachePool),qh(t,f),Nr(),t.memoizedState=null):(e!==null&&oa(t,null),Pl(),Nr());return Vt(e,t,u,o),t.child}function Zo(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Bp(e,t,o,a,u){var f=Nl();return f=f===null?null:{parent:At._currentValue,pool:f},t.memoizedState={baseLanes:o,cachePool:f},e!==null&&oa(t,null),Pl(),$h(t),e!==null&&Vi(e,t,a,!0),t.childLanes=u,null}function Ta(e,t){return t=Ca({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Hp(e,t,o){return di(t,e.child,null,o),e=Ta(t,t.pendingProps),e.flags|=2,Tn(t),t.memoizedState=null,e}function fT(e,t,o){var a=t.pendingProps,u=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(nt){if(a.mode==="hidden")return e=Ta(t,a),t.lanes=536870912,Zo(null,e);if(zl(t),(e=mt)?(e=Zm(e,Un),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:wr!==null?{id:Fn,overflow:Xn}:null,retryLane:536870912,hydrationErrors:null},o=Rh(e),o.return=t,t.child=o,qt=t,mt=null)):e=null,e===null)throw Rr(t);return t.lanes=536870912,null}return Ta(t,a)}var f=e.memoizedState;if(f!==null){var v=f.dehydrated;if(zl(t),u)if(t.flags&256)t.flags&=-257,t=Hp(e,t,o);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(Nt||Vi(e,t,o,!1),u=(o&e.childLanes)!==0,Nt||u){if(a=pt,a!==null&&(v=Of(a,o),v!==0&&v!==f.retryLane))throw f.retryLane=v,ri(e,v),hn(a,e,v),ou;Ma(),t=Hp(e,t,o)}else e=f.treeContext,mt=jn(v.nextSibling),qt=t,nt=!0,Cr=null,Un=!1,e!==null&&xh(t,e),t=Ta(t,a),t.flags|=4096;return t}return e=tr(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function wa(e,t){var o=t.ref;if(o===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(e===null||e.ref!==o)&&(t.flags|=4194816)}}function su(e,t,o,a,u){return ai(t),o=Bl(e,t,o,a,void 0,u),a=Hl(),e!==null&&!Nt?(ql(e,t,u),ar(e,t,u)):(nt&&a&&Tl(t),t.flags|=1,Vt(e,t,o,u),t.child)}function qp(e,t,o,a,u,f){return ai(t),t.updateQueue=null,o=Gh(t,a,o,u),Vh(e),a=Hl(),e!==null&&!Nt?(ql(e,t,f),ar(e,t,f)):(nt&&a&&Tl(t),t.flags|=1,Vt(e,t,o,f),t.child)}function $p(e,t,o,a,u){if(ai(t),t.stateNode===null){var f=Bi,v=o.contextType;typeof v=="object"&&v!==null&&(f=$t(v)),f=new o(a,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=ru,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=a,f.state=t.memoizedState,f.refs={},Ml(t),v=o.contextType,f.context=typeof v=="object"&&v!==null?$t(v):Bi,f.state=t.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(nu(t,o,v,a),f.state=t.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&ru.enqueueReplaceState(f,f.state,null),Yo(t,a,f,u),Xo(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){f=t.stateNode;var x=t.memoizedProps,$=hi(o,x);f.props=$;var fe=f.context,be=o.contextType;v=Bi,typeof be=="object"&&be!==null&&(v=$t(be));var we=o.getDerivedStateFromProps;be=typeof we=="function"||typeof f.getSnapshotBeforeUpdate=="function",x=t.pendingProps!==x,be||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(x||fe!==v)&&kp(t,f,a,v),_r=!1;var pe=t.memoizedState;f.state=pe,Yo(t,a,f,u),Xo(),fe=t.memoizedState,x||pe!==fe||_r?(typeof we=="function"&&(nu(t,o,we,a),fe=t.memoizedState),($=_r||Ap(t,o,$,a,pe,fe,v))?(be||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=fe),f.props=a,f.state=fe,f.context=v,a=$):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{f=t.stateNode,Ul(e,t),v=t.memoizedProps,be=hi(o,v),f.props=be,we=t.pendingProps,pe=f.context,fe=o.contextType,$=Bi,typeof fe=="object"&&fe!==null&&($=$t(fe)),x=o.getDerivedStateFromProps,(fe=typeof x=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==we||pe!==$)&&kp(t,f,a,$),_r=!1,pe=t.memoizedState,f.state=pe,Yo(t,a,f,u),Xo();var ge=t.memoizedState;v!==we||pe!==ge||_r||e!==null&&e.dependencies!==null&&ra(e.dependencies)?(typeof x=="function"&&(nu(t,o,x,a),ge=t.memoizedState),(be=_r||Ap(t,o,be,a,pe,ge,$)||e!==null&&e.dependencies!==null&&ra(e.dependencies))?(fe||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(a,ge,$),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(a,ge,$)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&pe===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&pe===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=ge),f.props=a,f.state=ge,f.context=$,a=be):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&pe===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&pe===e.memoizedState||(t.flags|=1024),a=!1)}return f=a,wa(e,t),a=(t.flags&128)!==0,f||a?(f=t.stateNode,o=a&&typeof o.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&a?(t.child=di(t,e.child,null,u),t.child=di(t,null,o,u)):Vt(e,t,o,u),t.memoizedState=f.state,e=t.child):e=ar(e,t,u),e}function Vp(e,t,o,a){return oi(),t.flags|=256,Vt(e,t,o,a),t.child}var au={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function cu(e){return{baseLanes:e,cachePool:Uh()}}function lu(e,t,o){return e=e!==null?e.childLanes&~o:0,t&&(e|=Cn),e}function Gp(e,t,o){var a=t.pendingProps,u=!1,f=(t.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(_t.current&2)!==0),v&&(u=!0,t.flags&=-129),v=(t.flags&32)!==0,t.flags&=-33,e===null){if(nt){if(u?kr(t):Nr(),(e=mt)?(e=Zm(e,Un),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:wr!==null?{id:Fn,overflow:Xn}:null,retryLane:536870912,hydrationErrors:null},o=Rh(e),o.return=t,t.child=o,qt=t,mt=null)):e=null,e===null)throw Rr(t);return Gu(e)?t.lanes=32:t.lanes=536870912,null}var x=a.children;return a=a.fallback,u?(Nr(),u=t.mode,x=Ca({mode:"hidden",children:x},u),a=ii(a,u,o,null),x.return=t,a.return=t,x.sibling=a,t.child=x,a=t.child,a.memoizedState=cu(o),a.childLanes=lu(e,v,o),t.memoizedState=au,Zo(null,a)):(kr(t),uu(t,x))}var $=e.memoizedState;if($!==null&&(x=$.dehydrated,x!==null)){if(f)t.flags&256?(kr(t),t.flags&=-257,t=du(e,t,o)):t.memoizedState!==null?(Nr(),t.child=e.child,t.flags|=128,t=null):(Nr(),x=a.fallback,u=t.mode,a=Ca({mode:"visible",children:a.children},u),x=ii(x,u,o,null),x.flags|=2,a.return=t,x.return=t,a.sibling=x,t.child=a,di(t,e.child,null,o),a=t.child,a.memoizedState=cu(o),a.childLanes=lu(e,v,o),t.memoizedState=au,t=Zo(null,a));else if(kr(t),Gu(x)){if(v=x.nextSibling&&x.nextSibling.dataset,v)var fe=v.dgst;v=fe,a=Error(s(419)),a.stack="",a.digest=v,Ho({value:a,source:null,stack:null}),t=du(e,t,o)}else if(Nt||Vi(e,t,o,!1),v=(o&e.childLanes)!==0,Nt||v){if(v=pt,v!==null&&(a=Of(v,o),a!==0&&a!==$.retryLane))throw $.retryLane=a,ri(e,a),hn(v,e,a),ou;Vu(x)||Ma(),t=du(e,t,o)}else Vu(x)?(t.flags|=192,t.child=e.child,t=null):(e=$.treeContext,mt=jn(x.nextSibling),qt=t,nt=!0,Cr=null,Un=!1,e!==null&&xh(t,e),t=uu(t,a.children),t.flags|=4096);return t}return u?(Nr(),x=a.fallback,u=t.mode,$=e.child,fe=$.sibling,a=tr($,{mode:"hidden",children:a.children}),a.subtreeFlags=$.subtreeFlags&65011712,fe!==null?x=tr(fe,x):(x=ii(x,u,o,null),x.flags|=2),x.return=t,a.return=t,a.sibling=x,t.child=a,Zo(null,a),a=t.child,x=e.child.memoizedState,x===null?x=cu(o):(u=x.cachePool,u!==null?($=At._currentValue,u=u.parent!==$?{parent:$,pool:$}:u):u=Uh(),x={baseLanes:x.baseLanes|o,cachePool:u}),a.memoizedState=x,a.childLanes=lu(e,v,o),t.memoizedState=au,Zo(e.child,a)):(kr(t),o=e.child,e=o.sibling,o=tr(o,{mode:"visible",children:a.children}),o.return=t,o.sibling=null,e!==null&&(v=t.deletions,v===null?(t.deletions=[e],t.flags|=16):v.push(e)),t.child=o,t.memoizedState=null,o)}function uu(e,t){return t=Ca({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ca(e,t){return e=bn(22,e,null,t),e.lanes=0,e}function du(e,t,o){return di(t,e.child,null,o),e=uu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Fp(e,t,o){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),_l(e.return,t,o)}function fu(e,t,o,a,u,f){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:o,tailMode:u,treeForkCount:f}:(v.isBackwards=t,v.rendering=null,v.renderingStartTime=0,v.last=a,v.tail=o,v.tailMode=u,v.treeForkCount=f)}function Xp(e,t,o){var a=t.pendingProps,u=a.revealOrder,f=a.tail;a=a.children;var v=_t.current,x=(v&2)!==0;if(x?(v=v&1|2,t.flags|=128):v&=1,C(_t,v),Vt(e,t,a,o),a=nt?Bo:0,!x&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fp(e,o,t);else if(e.tag===19)Fp(e,o,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(o=t.child,u=null;o!==null;)e=o.alternate,e!==null&&da(e)===null&&(u=o),o=o.sibling;o=u,o===null?(u=t.child,t.child=null):(u=o.sibling,o.sibling=null),fu(t,!1,u,o,f,a);break;case"backwards":case"unstable_legacy-backwards":for(o=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&da(e)===null){t.child=u;break}e=u.sibling,u.sibling=o,o=u,u=e}fu(t,!0,o,null,f,a);break;case"together":fu(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function ar(e,t,o){if(e!==null&&(t.dependencies=e.dependencies),Ur|=t.lanes,(o&t.childLanes)===0)if(e!==null){if(Vi(e,t,o,!1),(o&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,o=tr(e,e.pendingProps),t.child=o,o.return=t;e.sibling!==null;)e=e.sibling,o=o.sibling=tr(e,e.pendingProps),o.return=t;o.sibling=null}return t.child}function hu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ra(e)))}function hT(e,t,o){switch(t.tag){case 3:b(t,t.stateNode.containerInfo),Er(t,At,e.memoizedState.cache),oi();break;case 27:case 5:A(t);break;case 4:b(t,t.stateNode.containerInfo);break;case 10:Er(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,zl(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(kr(t),t.flags|=128,null):(o&t.child.childLanes)!==0?Gp(e,t,o):(kr(t),e=ar(e,t,o),e!==null?e.sibling:null);kr(t);break;case 19:var u=(e.flags&128)!==0;if(a=(o&t.childLanes)!==0,a||(Vi(e,t,o,!1),a=(o&t.childLanes)!==0),u){if(a)return Xp(e,t,o);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),C(_t,_t.current),a)break;return null;case 22:return t.lanes=0,Lp(e,t,o,t.pendingProps);case 24:Er(t,At,e.memoizedState.cache)}return ar(e,t,o)}function Yp(e,t,o){if(e!==null)if(e.memoizedProps!==t.pendingProps)Nt=!0;else{if(!hu(e,o)&&(t.flags&128)===0)return Nt=!1,hT(e,t,o);Nt=(e.flags&131072)!==0}else Nt=!1,nt&&(t.flags&1048576)!==0&&_h(t,Bo,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=li(t.elementType),t.type=e,typeof e=="function")vl(e)?(a=hi(e,a),t.tag=1,t=$p(null,t,e,a,o)):(t.tag=0,t=su(null,t,e,a,o));else{if(e!=null){var u=e.$$typeof;if(u===ne){t.tag=11,t=Pp(null,t,e,a,o);break e}else if(u===ie){t.tag=14,t=Ip(null,t,e,a,o);break e}}throw t=Ce(e)||e,Error(s(306,t,""))}}return t;case 0:return su(e,t,t.type,t.pendingProps,o);case 1:return a=t.type,u=hi(a,t.pendingProps),$p(e,t,a,u,o);case 3:e:{if(b(t,t.stateNode.containerInfo),e===null)throw Error(s(387));a=t.pendingProps;var f=t.memoizedState;u=f.element,Ul(e,t),Yo(t,a,null,o);var v=t.memoizedState;if(a=v.cache,Er(t,At,a),a!==f.cache&&xl(t,[At],o,!0),Xo(),a=v.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:v.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=Vp(e,t,a,o);break e}else if(a!==u){u=Nn(Error(s(424)),t),Ho(u),t=Vp(e,t,a,o);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,mt=jn(e.firstChild),qt=t,nt=!0,Cr=null,Un=!0,o=Lh(t,null,a,o),t.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(oi(),a===u){t=ar(e,t,o);break e}Vt(e,t,a,o)}t=t.child}return t;case 26:return wa(e,t),e===null?(o=og(t.type,null,t.pendingProps,null))?t.memoizedState=o:nt||(o=t.type,e=t.pendingProps,a=La(O.current).createElement(o),a[Ht]=t,a[an]=e,Gt(a,o,e),zt(a),t.stateNode=a):t.memoizedState=og(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return A(t),e===null&&nt&&(a=t.stateNode=ng(t.type,t.pendingProps,O.current),qt=t,Un=!0,u=mt,zr(t.type)?(Fu=u,mt=jn(a.firstChild)):mt=u),Vt(e,t,t.pendingProps.children,o),wa(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&nt&&((u=a=mt)&&(a=$T(a,t.type,t.pendingProps,Un),a!==null?(t.stateNode=a,qt=t,mt=jn(a.firstChild),Un=!1,u=!0):u=!1),u||Rr(t)),A(t),u=t.type,f=t.pendingProps,v=e!==null?e.memoizedProps:null,a=f.children,Hu(u,f)?a=null:v!==null&&Hu(u,v)&&(t.flags|=32),t.memoizedState!==null&&(u=Bl(e,t,iT,null,null,o),ps._currentValue=u),wa(e,t),Vt(e,t,a,o),t.child;case 6:return e===null&&nt&&((e=o=mt)&&(o=VT(o,t.pendingProps,Un),o!==null?(t.stateNode=o,qt=t,mt=null,e=!0):e=!1),e||Rr(t)),null;case 13:return Gp(e,t,o);case 4:return b(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=di(t,null,a,o):Vt(e,t,a,o),t.child;case 11:return Pp(e,t,t.type,t.pendingProps,o);case 7:return Vt(e,t,t.pendingProps,o),t.child;case 8:return Vt(e,t,t.pendingProps.children,o),t.child;case 12:return Vt(e,t,t.pendingProps.children,o),t.child;case 10:return a=t.pendingProps,Er(t,t.type,a.value),Vt(e,t,a.children,o),t.child;case 9:return u=t.type._context,a=t.pendingProps.children,ai(t),u=$t(u),a=a(u),t.flags|=1,Vt(e,t,a,o),t.child;case 14:return Ip(e,t,t.type,t.pendingProps,o);case 15:return zp(e,t,t.type,t.pendingProps,o);case 19:return Xp(e,t,o);case 31:return fT(e,t,o);case 22:return Lp(e,t,o,t.pendingProps);case 24:return ai(t),a=$t(At),e===null?(u=Nl(),u===null&&(u=pt,f=Al(),u.pooledCache=f,f.refCount++,f!==null&&(u.pooledCacheLanes|=o),u=f),t.memoizedState={parent:a,cache:u},Ml(t),Er(t,At,u)):((e.lanes&o)!==0&&(Ul(e,t),Yo(t,null,null,o),Xo()),u=e.memoizedState,f=t.memoizedState,u.parent!==a?(u={parent:a,cache:a},t.memoizedState=u,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=u),Er(t,At,a)):(a=f.cache,Er(t,At,a),a!==u.cache&&xl(t,[At],o,!0))),Vt(e,t,t.pendingProps.children,o),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function cr(e){e.flags|=4}function pu(e,t,o,a,u){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(Tm())e.flags|=8192;else throw ui=aa,Ol}else e.flags&=-16777217}function Jp(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!ug(t))if(Tm())e.flags|=8192;else throw ui=aa,Ol}function Ra(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Af():536870912,e.lanes|=t,no|=t)}function es(e,t){if(!nt)switch(e.tailMode){case"hidden":t=e.tail;for(var o=null;t!==null;)t.alternate!==null&&(o=t),t=t.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function gt(e){var t=e.alternate!==null&&e.alternate.child===e.child,o=0,a=0;if(t)for(var u=e.child;u!==null;)o|=u.lanes|u.childLanes,a|=u.subtreeFlags&65011712,a|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)o|=u.lanes|u.childLanes,a|=u.subtreeFlags,a|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=a,e.childLanes=o,t}function pT(e,t,o){var a=t.pendingProps;switch(wl(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(t),null;case 1:return gt(t),null;case 3:return o=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ir(At),w(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&($i(t)?cr(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Rl())),gt(t),null;case 26:var u=t.type,f=t.memoizedState;return e===null?(cr(t),f!==null?(gt(t),Jp(t,f)):(gt(t),pu(t,u,null,a,o))):f?f!==e.memoizedState?(cr(t),gt(t),Jp(t,f)):(gt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&cr(t),gt(t),pu(t,u,e,a,o)),null;case 27:if(H(t),o=O.current,u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&cr(t);else{if(!a){if(t.stateNode===null)throw Error(s(166));return gt(t),null}e=R.current,$i(t)?Ah(t):(e=ng(u,a,o),t.stateNode=e,cr(t))}return gt(t),null;case 5:if(H(t),u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&cr(t);else{if(!a){if(t.stateNode===null)throw Error(s(166));return gt(t),null}if(f=R.current,$i(t))Ah(t);else{var v=La(O.current);switch(f){case 1:f=v.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:f=v.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":f=v.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":f=v.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":f=v.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof a.is=="string"?v.createElement("select",{is:a.is}):v.createElement("select"),a.multiple?f.multiple=!0:a.size&&(f.size=a.size);break;default:f=typeof a.is=="string"?v.createElement(u,{is:a.is}):v.createElement(u)}}f[Ht]=t,f[an]=a;e:for(v=t.child;v!==null;){if(v.tag===5||v.tag===6)f.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}t.stateNode=f;e:switch(Gt(f,u,a),u){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&cr(t)}}return gt(t),pu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,o),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&cr(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(s(166));if(e=O.current,$i(t)){if(e=t.stateNode,o=t.memoizedProps,a=null,u=qt,u!==null)switch(u.tag){case 27:case 5:a=u.memoizedProps}e[Ht]=t,e=!!(e.nodeValue===o||a!==null&&a.suppressHydrationWarning===!0||Gm(e.nodeValue,o)),e||Rr(t,!0)}else e=La(e).createTextNode(a),e[Ht]=t,t.stateNode=e}return gt(t),null;case 31:if(o=t.memoizedState,e===null||e.memoizedState!==null){if(a=$i(t),o!==null){if(e===null){if(!a)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Ht]=t}else oi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;gt(t),e=!1}else o=Rl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),e=!0;if(!e)return t.flags&256?(Tn(t),t):(Tn(t),null);if((t.flags&128)!==0)throw Error(s(558))}return gt(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=$i(t),a!==null&&a.dehydrated!==null){if(e===null){if(!u)throw Error(s(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));u[Ht]=t}else oi(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;gt(t),u=!1}else u=Rl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return t.flags&256?(Tn(t),t):(Tn(t),null)}return Tn(t),(t.flags&128)!==0?(t.lanes=o,t):(o=a!==null,e=e!==null&&e.memoizedState!==null,o&&(a=t.child,u=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(u=a.alternate.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==u&&(a.flags|=2048)),o!==e&&o&&(t.child.flags|=8192),Ra(t,t.updateQueue),gt(t),null);case 4:return w(),e===null&&Pu(t.stateNode.containerInfo),gt(t),null;case 10:return ir(t.type),gt(t),null;case 19:if(j(_t),a=t.memoizedState,a===null)return gt(t),null;if(u=(t.flags&128)!==0,f=a.rendering,f===null)if(u)es(a,!1);else{if(Ct!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=da(e),f!==null){for(t.flags|=128,es(a,!1),e=f.updateQueue,t.updateQueue=e,Ra(t,e),t.subtreeFlags=0,e=o,o=t.child;o!==null;)Ch(o,e),o=o.sibling;return C(_t,_t.current&1|2),nt&&nr(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&qe()>ka&&(t.flags|=128,u=!0,es(a,!1),t.lanes=4194304)}else{if(!u)if(e=da(f),e!==null){if(t.flags|=128,u=!0,e=e.updateQueue,t.updateQueue=e,Ra(t,e),es(a,!0),a.tail===null&&a.tailMode==="hidden"&&!f.alternate&&!nt)return gt(t),null}else 2*qe()-a.renderingStartTime>ka&&o!==536870912&&(t.flags|=128,u=!0,es(a,!1),t.lanes=4194304);a.isBackwards?(f.sibling=t.child,t.child=f):(e=a.last,e!==null?e.sibling=f:t.child=f,a.last=f)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=qe(),e.sibling=null,o=_t.current,C(_t,u?o&1|2:o&1),nt&&nr(t,a.treeForkCount),e):(gt(t),null);case 22:case 23:return Tn(t),Il(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(o&536870912)!==0&&(t.flags&128)===0&&(gt(t),t.subtreeFlags&6&&(t.flags|=8192)):gt(t),o=t.updateQueue,o!==null&&Ra(t,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==o&&(t.flags|=2048),e!==null&&j(ci),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),ir(At),gt(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function mT(e,t){switch(wl(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ir(At),w(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return H(t),null;case 31:if(t.memoizedState!==null){if(Tn(t),t.alternate===null)throw Error(s(340));oi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Tn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));oi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return j(_t),null;case 4:return w(),null;case 10:return ir(t.type),null;case 22:case 23:return Tn(t),Il(),e!==null&&j(ci),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ir(At),null;case 25:return null;default:return null}}function Kp(e,t){switch(wl(t),t.tag){case 3:ir(At),w();break;case 26:case 27:case 5:H(t);break;case 4:w();break;case 31:t.memoizedState!==null&&Tn(t);break;case 13:Tn(t);break;case 19:j(_t);break;case 10:ir(t.type);break;case 22:case 23:Tn(t),Il(),e!==null&&j(ci);break;case 24:ir(At)}}function ts(e,t){try{var o=t.updateQueue,a=o!==null?o.lastEffect:null;if(a!==null){var u=a.next;o=u;do{if((o.tag&e)===e){a=void 0;var f=o.create,v=o.inst;a=f(),v.destroy=a}o=o.next}while(o!==u)}}catch(x){lt(t,t.return,x)}}function Or(e,t,o){try{var a=t.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var f=u.next;a=f;do{if((a.tag&e)===e){var v=a.inst,x=v.destroy;if(x!==void 0){v.destroy=void 0,u=t;var $=o,fe=x;try{fe()}catch(be){lt(u,$,be)}}}a=a.next}while(a!==f)}}catch(be){lt(t,t.return,be)}}function Qp(e){var t=e.updateQueue;if(t!==null){var o=e.stateNode;try{Hh(t,o)}catch(a){lt(e,e.return,a)}}}function Wp(e,t,o){o.props=hi(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(a){lt(e,t,a)}}function ns(e,t){try{var o=e.ref;if(o!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof o=="function"?e.refCleanup=o(a):o.current=a}}catch(u){lt(e,t,u)}}function Yn(e,t){var o=e.ref,a=e.refCleanup;if(o!==null)if(typeof a=="function")try{a()}catch(u){lt(e,t,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(u){lt(e,t,u)}else o.current=null}function Zp(e){var t=e.type,o=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":o.autoFocus&&a.focus();break e;case"img":o.src?a.src=o.src:o.srcSet&&(a.srcset=o.srcSet)}}catch(u){lt(e,e.return,u)}}function mu(e,t,o){try{var a=e.stateNode;IT(a,e.type,o,t),a[an]=t}catch(u){lt(e,e.return,u)}}function em(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&zr(e.type)||e.tag===4}function gu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||em(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&zr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function yu(e,t,o){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(e,t):(t=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,t.appendChild(e),o=o._reactRootContainer,o!=null||t.onclick!==null||(t.onclick=Zn));else if(a!==4&&(a===27&&zr(e.type)&&(o=e.stateNode,t=null),e=e.child,e!==null))for(yu(e,t,o),e=e.sibling;e!==null;)yu(e,t,o),e=e.sibling}function Ea(e,t,o){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?o.insertBefore(e,t):o.appendChild(e);else if(a!==4&&(a===27&&zr(e.type)&&(o=e.stateNode),e=e.child,e!==null))for(Ea(e,t,o),e=e.sibling;e!==null;)Ea(e,t,o),e=e.sibling}function tm(e){var t=e.stateNode,o=e.memoizedProps;try{for(var a=e.type,u=t.attributes;u.length;)t.removeAttributeNode(u[0]);Gt(t,a,o),t[Ht]=e,t[an]=o}catch(f){lt(e,e.return,f)}}var lr=!1,Ot=!1,vu=!1,nm=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function gT(e,t){if(e=e.containerInfo,Lu=Fa,e=ph(e),dl(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var a=o.getSelection&&o.getSelection();if(a&&a.rangeCount!==0){o=a.anchorNode;var u=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{o.nodeType,f.nodeType}catch{o=null;break e}var v=0,x=-1,$=-1,fe=0,be=0,we=e,pe=null;t:for(;;){for(var ge;we!==o||u!==0&&we.nodeType!==3||(x=v+u),we!==f||a!==0&&we.nodeType!==3||($=v+a),we.nodeType===3&&(v+=we.nodeValue.length),(ge=we.firstChild)!==null;)pe=we,we=ge;for(;;){if(we===e)break t;if(pe===o&&++fe===u&&(x=v),pe===f&&++be===a&&($=v),(ge=we.nextSibling)!==null)break;we=pe,pe=we.parentNode}we=ge}o=x===-1||$===-1?null:{start:x,end:$}}else o=null}o=o||{start:0,end:0}}else o=null;for(Bu={focusedElem:e,selectionRange:o},Fa=!1,Lt=t;Lt!==null;)if(t=Lt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Lt=e;else for(;Lt!==null;){switch(t=Lt,f=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(o=0;o<e.length;o++)u=e[o],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,o=t,u=f.memoizedProps,f=f.memoizedState,a=o.stateNode;try{var je=hi(o.type,u);e=a.getSnapshotBeforeUpdate(je,f),a.__reactInternalSnapshotBeforeUpdate=e}catch($e){lt(o,o.return,$e)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,o=e.nodeType,o===9)$u(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":$u(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,Lt=e;break}Lt=t.return}}function rm(e,t,o){var a=o.flags;switch(o.tag){case 0:case 11:case 15:dr(e,o),a&4&&ts(5,o);break;case 1:if(dr(e,o),a&4)if(e=o.stateNode,t===null)try{e.componentDidMount()}catch(v){lt(o,o.return,v)}else{var u=hi(o.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(u,t,e.__reactInternalSnapshotBeforeUpdate)}catch(v){lt(o,o.return,v)}}a&64&&Qp(o),a&512&&ns(o,o.return);break;case 3:if(dr(e,o),a&64&&(e=o.updateQueue,e!==null)){if(t=null,o.child!==null)switch(o.child.tag){case 27:case 5:t=o.child.stateNode;break;case 1:t=o.child.stateNode}try{Hh(e,t)}catch(v){lt(o,o.return,v)}}break;case 27:t===null&&a&4&&tm(o);case 26:case 5:dr(e,o),t===null&&a&4&&Zp(o),a&512&&ns(o,o.return);break;case 12:dr(e,o);break;case 31:dr(e,o),a&4&&sm(e,o);break;case 13:dr(e,o),a&4&&am(e,o),a&64&&(e=o.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(o=ET.bind(null,o),GT(e,o))));break;case 22:if(a=o.memoizedState!==null||lr,!a){t=t!==null&&t.memoizedState!==null||Ot,u=lr;var f=Ot;lr=a,(Ot=t)&&!f?fr(e,o,(o.subtreeFlags&8772)!==0):dr(e,o),lr=u,Ot=f}break;case 30:break;default:dr(e,o)}}function im(e){var t=e.alternate;t!==null&&(e.alternate=null,im(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Yc(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var bt=null,ln=!1;function ur(e,t,o){for(o=o.child;o!==null;)om(e,t,o),o=o.sibling}function om(e,t,o){if(Me&&typeof Me.onCommitFiberUnmount=="function")try{Me.onCommitFiberUnmount(Ie,o)}catch{}switch(o.tag){case 26:Ot||Yn(o,t),ur(e,t,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ot||Yn(o,t);var a=bt,u=ln;zr(o.type)&&(bt=o.stateNode,ln=!1),ur(e,t,o),ds(o.stateNode),bt=a,ln=u;break;case 5:Ot||Yn(o,t);case 6:if(a=bt,u=ln,bt=null,ur(e,t,o),bt=a,ln=u,bt!==null)if(ln)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(o.stateNode)}catch(f){lt(o,t,f)}else try{bt.removeChild(o.stateNode)}catch(f){lt(o,t,f)}break;case 18:bt!==null&&(ln?(e=bt,Qm(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,o.stateNode),uo(e)):Qm(bt,o.stateNode));break;case 4:a=bt,u=ln,bt=o.stateNode.containerInfo,ln=!0,ur(e,t,o),bt=a,ln=u;break;case 0:case 11:case 14:case 15:Or(2,o,t),Ot||Or(4,o,t),ur(e,t,o);break;case 1:Ot||(Yn(o,t),a=o.stateNode,typeof a.componentWillUnmount=="function"&&Wp(o,t,a)),ur(e,t,o);break;case 21:ur(e,t,o);break;case 22:Ot=(a=Ot)||o.memoizedState!==null,ur(e,t,o),Ot=a;break;default:ur(e,t,o)}}function sm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{uo(e)}catch(o){lt(t,t.return,o)}}}function am(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{uo(e)}catch(o){lt(t,t.return,o)}}function yT(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new nm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new nm),t;default:throw Error(s(435,e.tag))}}function _a(e,t){var o=yT(e);t.forEach(function(a){if(!o.has(a)){o.add(a);var u=_T.bind(null,e,a);a.then(u,u)}})}function un(e,t){var o=t.deletions;if(o!==null)for(var a=0;a<o.length;a++){var u=o[a],f=e,v=t,x=v;e:for(;x!==null;){switch(x.tag){case 27:if(zr(x.type)){bt=x.stateNode,ln=!1;break e}break;case 5:bt=x.stateNode,ln=!1;break e;case 3:case 4:bt=x.stateNode.containerInfo,ln=!0;break e}x=x.return}if(bt===null)throw Error(s(160));om(f,v,u),bt=null,ln=!1,f=u.alternate,f!==null&&(f.return=null),u.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)cm(t,e),t=t.sibling}var Bn=null;function cm(e,t){var o=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:un(t,e),dn(e),a&4&&(Or(3,e,e.return),ts(3,e),Or(5,e,e.return));break;case 1:un(t,e),dn(e),a&512&&(Ot||o===null||Yn(o,o.return)),a&64&&lr&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?a:o.concat(a))));break;case 26:var u=Bn;if(un(t,e),dn(e),a&512&&(Ot||o===null||Yn(o,o.return)),a&4){var f=o!==null?o.memoizedState:null;if(a=e.memoizedState,o===null)if(a===null)if(e.stateNode===null){e:{a=e.type,o=e.memoizedProps,u=u.ownerDocument||u;t:switch(a){case"title":f=u.getElementsByTagName("title")[0],(!f||f[ko]||f[Ht]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=u.createElement(a),u.head.insertBefore(f,u.querySelector("head > title"))),Gt(f,a,o),f[Ht]=e,zt(f),a=f;break e;case"link":var v=cg("link","href",u).get(a+(o.href||""));if(v){for(var x=0;x<v.length;x++)if(f=v[x],f.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&f.getAttribute("rel")===(o.rel==null?null:o.rel)&&f.getAttribute("title")===(o.title==null?null:o.title)&&f.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(x,1);break t}}f=u.createElement(a),Gt(f,a,o),u.head.appendChild(f);break;case"meta":if(v=cg("meta","content",u).get(a+(o.content||""))){for(x=0;x<v.length;x++)if(f=v[x],f.getAttribute("content")===(o.content==null?null:""+o.content)&&f.getAttribute("name")===(o.name==null?null:o.name)&&f.getAttribute("property")===(o.property==null?null:o.property)&&f.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&f.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(x,1);break t}}f=u.createElement(a),Gt(f,a,o),u.head.appendChild(f);break;default:throw Error(s(468,a))}f[Ht]=e,zt(f),a=f}e.stateNode=a}else lg(u,e.type,e.stateNode);else e.stateNode=ag(u,a,e.memoizedProps);else f!==a?(f===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):f.count--,a===null?lg(u,e.type,e.stateNode):ag(u,a,e.memoizedProps)):a===null&&e.stateNode!==null&&mu(e,e.memoizedProps,o.memoizedProps)}break;case 27:un(t,e),dn(e),a&512&&(Ot||o===null||Yn(o,o.return)),o!==null&&a&4&&mu(e,e.memoizedProps,o.memoizedProps);break;case 5:if(un(t,e),dn(e),a&512&&(Ot||o===null||Yn(o,o.return)),e.flags&32){u=e.stateNode;try{Ui(u,"")}catch(je){lt(e,e.return,je)}}a&4&&e.stateNode!=null&&(u=e.memoizedProps,mu(e,u,o!==null?o.memoizedProps:u)),a&1024&&(vu=!0);break;case 6:if(un(t,e),dn(e),a&4){if(e.stateNode===null)throw Error(s(162));a=e.memoizedProps,o=e.stateNode;try{o.nodeValue=a}catch(je){lt(e,e.return,je)}}break;case 3:if(qa=null,u=Bn,Bn=Ba(t.containerInfo),un(t,e),Bn=u,dn(e),a&4&&o!==null&&o.memoizedState.isDehydrated)try{uo(t.containerInfo)}catch(je){lt(e,e.return,je)}vu&&(vu=!1,lm(e));break;case 4:a=Bn,Bn=Ba(e.stateNode.containerInfo),un(t,e),dn(e),Bn=a;break;case 12:un(t,e),dn(e);break;case 31:un(t,e),dn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,_a(e,a)));break;case 13:un(t,e),dn(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Aa=qe()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,_a(e,a)));break;case 22:u=e.memoizedState!==null;var $=o!==null&&o.memoizedState!==null,fe=lr,be=Ot;if(lr=fe||u,Ot=be||$,un(t,e),Ot=be,lr=fe,dn(e),a&8192)e:for(t=e.stateNode,t._visibility=u?t._visibility&-2:t._visibility|1,u&&(o===null||$||lr||Ot||pi(e)),o=null,t=e;;){if(t.tag===5||t.tag===26){if(o===null){$=o=t;try{if(f=$.stateNode,u)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{x=$.stateNode;var we=$.memoizedProps.style,pe=we!=null&&we.hasOwnProperty("display")?we.display:null;x.style.display=pe==null||typeof pe=="boolean"?"":(""+pe).trim()}}catch(je){lt($,$.return,je)}}}else if(t.tag===6){if(o===null){$=t;try{$.stateNode.nodeValue=u?"":$.memoizedProps}catch(je){lt($,$.return,je)}}}else if(t.tag===18){if(o===null){$=t;try{var ge=$.stateNode;u?Wm(ge,!0):Wm($.stateNode,!1)}catch(je){lt($,$.return,je)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;o===t&&(o=null),t=t.return}o===t&&(o=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(o=a.retryQueue,o!==null&&(a.retryQueue=null,_a(e,o))));break;case 19:un(t,e),dn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,_a(e,a)));break;case 30:break;case 21:break;default:un(t,e),dn(e)}}function dn(e){var t=e.flags;if(t&2){try{for(var o,a=e.return;a!==null;){if(em(a)){o=a;break}a=a.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var u=o.stateNode,f=gu(e);Ea(e,f,u);break;case 5:var v=o.stateNode;o.flags&32&&(Ui(v,""),o.flags&=-33);var x=gu(e);Ea(e,x,v);break;case 3:case 4:var $=o.stateNode.containerInfo,fe=gu(e);yu(e,fe,$);break;default:throw Error(s(161))}}catch(be){lt(e,e.return,be)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function lm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;lm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function dr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)rm(e,t.alternate,t),t=t.sibling}function pi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Or(4,t,t.return),pi(t);break;case 1:Yn(t,t.return);var o=t.stateNode;typeof o.componentWillUnmount=="function"&&Wp(t,t.return,o),pi(t);break;case 27:ds(t.stateNode);case 26:case 5:Yn(t,t.return),pi(t);break;case 22:t.memoizedState===null&&pi(t);break;case 30:pi(t);break;default:pi(t)}e=e.sibling}}function fr(e,t,o){for(o=o&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,u=e,f=t,v=f.flags;switch(f.tag){case 0:case 11:case 15:fr(u,f,o),ts(4,f);break;case 1:if(fr(u,f,o),a=f,u=a.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(fe){lt(a,a.return,fe)}if(a=f,u=a.updateQueue,u!==null){var x=a.stateNode;try{var $=u.shared.hiddenCallbacks;if($!==null)for(u.shared.hiddenCallbacks=null,u=0;u<$.length;u++)Bh($[u],x)}catch(fe){lt(a,a.return,fe)}}o&&v&64&&Qp(f),ns(f,f.return);break;case 27:tm(f);case 26:case 5:fr(u,f,o),o&&a===null&&v&4&&Zp(f),ns(f,f.return);break;case 12:fr(u,f,o);break;case 31:fr(u,f,o),o&&v&4&&sm(u,f);break;case 13:fr(u,f,o),o&&v&4&&am(u,f);break;case 22:f.memoizedState===null&&fr(u,f,o),ns(f,f.return);break;case 30:break;default:fr(u,f,o)}t=t.sibling}}function bu(e,t){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&qo(o))}function Su(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&qo(e))}function Hn(e,t,o,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)um(e,t,o,a),t=t.sibling}function um(e,t,o,a){var u=t.flags;switch(t.tag){case 0:case 11:case 15:Hn(e,t,o,a),u&2048&&ts(9,t);break;case 1:Hn(e,t,o,a);break;case 3:Hn(e,t,o,a),u&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&qo(e)));break;case 12:if(u&2048){Hn(e,t,o,a),e=t.stateNode;try{var f=t.memoizedProps,v=f.id,x=f.onPostCommit;typeof x=="function"&&x(v,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch($){lt(t,t.return,$)}}else Hn(e,t,o,a);break;case 31:Hn(e,t,o,a);break;case 13:Hn(e,t,o,a);break;case 23:break;case 22:f=t.stateNode,v=t.alternate,t.memoizedState!==null?f._visibility&2?Hn(e,t,o,a):rs(e,t):f._visibility&2?Hn(e,t,o,a):(f._visibility|=2,Zi(e,t,o,a,(t.subtreeFlags&10256)!==0||!1)),u&2048&&bu(v,t);break;case 24:Hn(e,t,o,a),u&2048&&Su(t.alternate,t);break;default:Hn(e,t,o,a)}}function Zi(e,t,o,a,u){for(u=u&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var f=e,v=t,x=o,$=a,fe=v.flags;switch(v.tag){case 0:case 11:case 15:Zi(f,v,x,$,u),ts(8,v);break;case 23:break;case 22:var be=v.stateNode;v.memoizedState!==null?be._visibility&2?Zi(f,v,x,$,u):rs(f,v):(be._visibility|=2,Zi(f,v,x,$,u)),u&&fe&2048&&bu(v.alternate,v);break;case 24:Zi(f,v,x,$,u),u&&fe&2048&&Su(v.alternate,v);break;default:Zi(f,v,x,$,u)}t=t.sibling}}function rs(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var o=e,a=t,u=a.flags;switch(a.tag){case 22:rs(o,a),u&2048&&bu(a.alternate,a);break;case 24:rs(o,a),u&2048&&Su(a.alternate,a);break;default:rs(o,a)}t=t.sibling}}var is=8192;function eo(e,t,o){if(e.subtreeFlags&is)for(e=e.child;e!==null;)dm(e,t,o),e=e.sibling}function dm(e,t,o){switch(e.tag){case 26:eo(e,t,o),e.flags&is&&e.memoizedState!==null&&rw(o,Bn,e.memoizedState,e.memoizedProps);break;case 5:eo(e,t,o);break;case 3:case 4:var a=Bn;Bn=Ba(e.stateNode.containerInfo),eo(e,t,o),Bn=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=is,is=16777216,eo(e,t,o),is=a):eo(e,t,o));break;default:eo(e,t,o)}}function fm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function os(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var o=0;o<t.length;o++){var a=t[o];Lt=a,pm(a,e)}fm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)hm(e),e=e.sibling}function hm(e){switch(e.tag){case 0:case 11:case 15:os(e),e.flags&2048&&Or(9,e,e.return);break;case 3:os(e);break;case 12:os(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,xa(e)):os(e);break;default:os(e)}}function xa(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var o=0;o<t.length;o++){var a=t[o];Lt=a,pm(a,e)}fm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Or(8,t,t.return),xa(t);break;case 22:o=t.stateNode,o._visibility&2&&(o._visibility&=-3,xa(t));break;default:xa(t)}e=e.sibling}}function pm(e,t){for(;Lt!==null;){var o=Lt;switch(o.tag){case 0:case 11:case 15:Or(8,o,t);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var a=o.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:qo(o.memoizedState.cache)}if(a=o.child,a!==null)a.return=o,Lt=a;else e:for(o=e;Lt!==null;){a=Lt;var u=a.sibling,f=a.return;if(im(a),a===o){Lt=null;break e}if(u!==null){u.return=f,Lt=u;break e}Lt=f}}}var vT={getCacheForType:function(e){var t=$t(At),o=t.data.get(e);return o===void 0&&(o=e(),t.data.set(e,o)),o},cacheSignal:function(){return $t(At).controller.signal}},bT=typeof WeakMap=="function"?WeakMap:Map,st=0,pt=null,Qe=null,et=0,ct=0,wn=null,Mr=!1,to=!1,Tu=!1,hr=0,Ct=0,Ur=0,mi=0,wu=0,Cn=0,no=0,ss=null,fn=null,Cu=!1,Aa=0,mm=0,ka=1/0,Na=null,Dr=null,jt=0,jr=null,ro=null,pr=0,Ru=0,Eu=null,gm=null,as=0,_u=null;function Rn(){return(st&2)!==0&&et!==0?et&-et:G.T!==null?Mu():Mf()}function ym(){if(Cn===0)if((et&536870912)===0||nt){var e=_i;_i<<=1,(_i&3932160)===0&&(_i=262144),Cn=e}else Cn=536870912;return e=Sn.current,e!==null&&(e.flags|=32),Cn}function hn(e,t,o){(e===pt&&(ct===2||ct===9)||e.cancelPendingCommit!==null)&&(io(e,0),Pr(e,et,Cn,!1)),Ao(e,o),((st&2)===0||e!==pt)&&(e===pt&&((st&2)===0&&(mi|=o),Ct===4&&Pr(e,et,Cn,!1)),Jn(e))}function vm(e,t,o){if((st&6)!==0)throw Error(s(327));var a=!o&&(t&127)===0&&(t&e.expiredLanes)===0||xo(e,t),u=a?wT(e,t):Au(e,t,!0),f=a;do{if(u===0){to&&!a&&Pr(e,t,0,!1);break}else{if(o=e.current.alternate,f&&!ST(o)){u=Au(e,t,!1),f=!1;continue}if(u===2){if(f=t,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){t=v;e:{var x=e;u=ss;var $=x.current.memoizedState.isDehydrated;if($&&(io(x,v).flags|=256),v=Au(x,v,!1),v!==2){if(Tu&&!$){x.errorRecoveryDisabledLanes|=f,mi|=f,u=4;break e}f=fn,fn=u,f!==null&&(fn===null?fn=f:fn.push.apply(fn,f))}u=v}if(f=!1,u!==2)continue}}if(u===1){io(e,0),Pr(e,t,0,!0);break}e:{switch(a=e,f=u,f){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Pr(a,t,Cn,!Mr);break e;case 2:fn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(u=Aa+300-qe(),10<u)){if(Pr(a,t,Cn,!Mr),Bs(a,0,!0)!==0)break e;pr=t,a.timeoutHandle=Jm(bm.bind(null,a,o,fn,Na,Cu,t,Cn,mi,no,Mr,f,"Throttled",-0,0),u);break e}bm(a,o,fn,Na,Cu,t,Cn,mi,no,Mr,f,null,-0,0)}}break}while(!0);Jn(e)}function bm(e,t,o,a,u,f,v,x,$,fe,be,we,pe,ge){if(e.timeoutHandle=-1,we=t.subtreeFlags,we&8192||(we&16785408)===16785408){we={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zn},dm(t,f,we);var je=(f&62914560)===f?Aa-qe():(f&4194048)===f?mm-qe():0;if(je=iw(we,je),je!==null){pr=f,e.cancelPendingCommit=je(xm.bind(null,e,t,f,o,a,u,v,x,$,be,we,null,pe,ge)),Pr(e,f,v,!fe);return}}xm(e,t,f,o,a,u,v,x,$)}function ST(e){for(var t=e;;){var o=t.tag;if((o===0||o===11||o===15)&&t.flags&16384&&(o=t.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var a=0;a<o.length;a++){var u=o[a],f=u.getSnapshot;u=u.value;try{if(!vn(f(),u))return!1}catch{return!1}}if(o=t.child,t.subtreeFlags&16384&&o!==null)o.return=t,t=o;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Pr(e,t,o,a){t&=~wu,t&=~mi,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var u=t;0<u;){var f=31-ze(u),v=1<<f;a[f]=-1,u&=~v}o!==0&&kf(e,o,t)}function Oa(){return(st&6)===0?(cs(0),!1):!0}function xu(){if(Qe!==null){if(ct===0)var e=Qe.return;else e=Qe,rr=si=null,$l(e),Yi=null,Vo=0,e=Qe;for(;e!==null;)Kp(e.alternate,e),e=e.return;Qe=null}}function io(e,t){var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,BT(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),pr=0,xu(),pt=e,Qe=o=tr(e.current,null),et=t,ct=0,wn=null,Mr=!1,to=xo(e,t),Tu=!1,no=Cn=wu=mi=Ur=Ct=0,fn=ss=null,Cu=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var u=31-ze(a),f=1<<u;t|=e[u],a&=~f}return hr=t,Ws(),o}function Sm(e,t){Fe=null,G.H=Wo,t===Xi||t===sa?(t=Ph(),ct=3):t===Ol?(t=Ph(),ct=4):ct=t===ou?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,wn=t,Qe===null&&(Ct=1,Sa(e,Nn(t,e.current)))}function Tm(){var e=Sn.current;return e===null?!0:(et&4194048)===et?Dn===null:(et&62914560)===et||(et&536870912)!==0?e===Dn:!1}function wm(){var e=G.H;return G.H=Wo,e===null?Wo:e}function Cm(){var e=G.A;return G.A=vT,e}function Ma(){Ct=4,Mr||(et&4194048)!==et&&Sn.current!==null||(to=!0),(Ur&134217727)===0&&(mi&134217727)===0||pt===null||Pr(pt,et,Cn,!1)}function Au(e,t,o){var a=st;st|=2;var u=wm(),f=Cm();(pt!==e||et!==t)&&(Na=null,io(e,t)),t=!1;var v=Ct;e:do try{if(ct!==0&&Qe!==null){var x=Qe,$=wn;switch(ct){case 8:xu(),v=6;break e;case 3:case 2:case 9:case 6:Sn.current===null&&(t=!0);var fe=ct;if(ct=0,wn=null,oo(e,x,$,fe),o&&to){v=0;break e}break;default:fe=ct,ct=0,wn=null,oo(e,x,$,fe)}}TT(),v=Ct;break}catch(be){Sm(e,be)}while(!0);return t&&e.shellSuspendCounter++,rr=si=null,st=a,G.H=u,G.A=f,Qe===null&&(pt=null,et=0,Ws()),v}function TT(){for(;Qe!==null;)Rm(Qe)}function wT(e,t){var o=st;st|=2;var a=wm(),u=Cm();pt!==e||et!==t?(Na=null,ka=qe()+500,io(e,t)):to=xo(e,t);e:do try{if(ct!==0&&Qe!==null){t=Qe;var f=wn;t:switch(ct){case 1:ct=0,wn=null,oo(e,t,f,1);break;case 2:case 9:if(Dh(f)){ct=0,wn=null,Em(t);break}t=function(){ct!==2&&ct!==9||pt!==e||(ct=7),Jn(e)},f.then(t,t);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:Dh(f)?(ct=0,wn=null,Em(t)):(ct=0,wn=null,oo(e,t,f,7));break;case 5:var v=null;switch(Qe.tag){case 26:v=Qe.memoizedState;case 5:case 27:var x=Qe;if(v?ug(v):x.stateNode.complete){ct=0,wn=null;var $=x.sibling;if($!==null)Qe=$;else{var fe=x.return;fe!==null?(Qe=fe,Ua(fe)):Qe=null}break t}}ct=0,wn=null,oo(e,t,f,5);break;case 6:ct=0,wn=null,oo(e,t,f,6);break;case 8:xu(),Ct=6;break e;default:throw Error(s(462))}}CT();break}catch(be){Sm(e,be)}while(!0);return rr=si=null,G.H=a,G.A=u,st=o,Qe!==null?0:(pt=null,et=0,Ws(),Ct)}function CT(){for(;Qe!==null&&!Ee();)Rm(Qe)}function Rm(e){var t=Yp(e.alternate,e,hr);e.memoizedProps=e.pendingProps,t===null?Ua(e):Qe=t}function Em(e){var t=e,o=t.alternate;switch(t.tag){case 15:case 0:t=qp(o,t,t.pendingProps,t.type,void 0,et);break;case 11:t=qp(o,t,t.pendingProps,t.type.render,t.ref,et);break;case 5:$l(t);default:Kp(o,t),t=Qe=Ch(t,hr),t=Yp(o,t,hr)}e.memoizedProps=e.pendingProps,t===null?Ua(e):Qe=t}function oo(e,t,o,a){rr=si=null,$l(t),Yi=null,Vo=0;var u=t.return;try{if(dT(e,u,t,o,et)){Ct=1,Sa(e,Nn(o,e.current)),Qe=null;return}}catch(f){if(u!==null)throw Qe=u,f;Ct=1,Sa(e,Nn(o,e.current)),Qe=null;return}t.flags&32768?(nt||a===1?e=!0:to||(et&536870912)!==0?e=!1:(Mr=e=!0,(a===2||a===9||a===3||a===6)&&(a=Sn.current,a!==null&&a.tag===13&&(a.flags|=16384))),_m(t,e)):Ua(t)}function Ua(e){var t=e;do{if((t.flags&32768)!==0){_m(t,Mr);return}e=t.return;var o=pT(t.alternate,t,hr);if(o!==null){Qe=o;return}if(t=t.sibling,t!==null){Qe=t;return}Qe=t=e}while(t!==null);Ct===0&&(Ct=5)}function _m(e,t){do{var o=mT(e.alternate,e);if(o!==null){o.flags&=32767,Qe=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!t&&(e=e.sibling,e!==null)){Qe=e;return}Qe=e=o}while(e!==null);Ct=6,Qe=null}function xm(e,t,o,a,u,f,v,x,$){e.cancelPendingCommit=null;do Da();while(jt!==0);if((st&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(f=t.lanes|t.childLanes,f|=gl,nS(e,o,f,v,x,$),e===pt&&(Qe=pt=null,et=0),ro=t,jr=e,pr=o,Ru=f,Eu=u,gm=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,xT(M,function(){return Mm(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=G.T,G.T=null,u=D.p,D.p=2,v=st,st|=4;try{gT(e,t,o)}finally{st=v,D.p=u,G.T=a}}jt=1,Am(),km(),Nm()}}function Am(){if(jt===1){jt=0;var e=jr,t=ro,o=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||o){o=G.T,G.T=null;var a=D.p;D.p=2;var u=st;st|=4;try{cm(t,e);var f=Bu,v=ph(e.containerInfo),x=f.focusedElem,$=f.selectionRange;if(v!==x&&x&&x.ownerDocument&&hh(x.ownerDocument.documentElement,x)){if($!==null&&dl(x)){var fe=$.start,be=$.end;if(be===void 0&&(be=fe),"selectionStart"in x)x.selectionStart=fe,x.selectionEnd=Math.min(be,x.value.length);else{var we=x.ownerDocument||document,pe=we&&we.defaultView||window;if(pe.getSelection){var ge=pe.getSelection(),je=x.textContent.length,$e=Math.min($.start,je),ft=$.end===void 0?$e:Math.min($.end,je);!ge.extend&&$e>ft&&(v=ft,ft=$e,$e=v);var se=fh(x,$e),Y=fh(x,ft);if(se&&Y&&(ge.rangeCount!==1||ge.anchorNode!==se.node||ge.anchorOffset!==se.offset||ge.focusNode!==Y.node||ge.focusOffset!==Y.offset)){var de=we.createRange();de.setStart(se.node,se.offset),ge.removeAllRanges(),$e>ft?(ge.addRange(de),ge.extend(Y.node,Y.offset)):(de.setEnd(Y.node,Y.offset),ge.addRange(de))}}}}for(we=[],ge=x;ge=ge.parentNode;)ge.nodeType===1&&we.push({element:ge,left:ge.scrollLeft,top:ge.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<we.length;x++){var Se=we[x];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}Fa=!!Lu,Bu=Lu=null}finally{st=u,D.p=a,G.T=o}}e.current=t,jt=2}}function km(){if(jt===2){jt=0;var e=jr,t=ro,o=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||o){o=G.T,G.T=null;var a=D.p;D.p=2;var u=st;st|=4;try{rm(e,t.alternate,t)}finally{st=u,D.p=a,G.T=o}}jt=3}}function Nm(){if(jt===4||jt===3){jt=0,Ne();var e=jr,t=ro,o=pr,a=gm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?jt=5:(jt=0,ro=jr=null,Om(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(Dr=null),Fc(o),t=t.stateNode,Me&&typeof Me.onCommitFiberRoot=="function")try{Me.onCommitFiberRoot(Ie,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=G.T,u=D.p,D.p=2,G.T=null;try{for(var f=e.onRecoverableError,v=0;v<a.length;v++){var x=a[v];f(x.value,{componentStack:x.stack})}}finally{G.T=t,D.p=u}}(pr&3)!==0&&Da(),Jn(e),u=e.pendingLanes,(o&261930)!==0&&(u&42)!==0?e===_u?as++:(as=0,_u=e):as=0,cs(0)}}function Om(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,qo(t)))}function Da(){return Am(),km(),Nm(),Mm()}function Mm(){if(jt!==5)return!1;var e=jr,t=Ru;Ru=0;var o=Fc(pr),a=G.T,u=D.p;try{D.p=32>o?32:o,G.T=null,o=Eu,Eu=null;var f=jr,v=pr;if(jt=0,ro=jr=null,pr=0,(st&6)!==0)throw Error(s(331));var x=st;if(st|=4,hm(f.current),um(f,f.current,v,o),st=x,cs(0,!1),Me&&typeof Me.onPostCommitFiberRoot=="function")try{Me.onPostCommitFiberRoot(Ie,f)}catch{}return!0}finally{D.p=u,G.T=a,Om(e,t)}}function Um(e,t,o){t=Nn(o,t),t=iu(e.stateNode,t,2),e=Ar(e,t,2),e!==null&&(Ao(e,2),Jn(e))}function lt(e,t,o){if(e.tag===3)Um(e,e,o);else for(;t!==null;){if(t.tag===3){Um(t,e,o);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Dr===null||!Dr.has(a))){e=Nn(o,e),o=Dp(2),a=Ar(t,o,2),a!==null&&(jp(o,a,t,e),Ao(a,2),Jn(a));break}}t=t.return}}function ku(e,t,o){var a=e.pingCache;if(a===null){a=e.pingCache=new bT;var u=new Set;a.set(t,u)}else u=a.get(t),u===void 0&&(u=new Set,a.set(t,u));u.has(o)||(Tu=!0,u.add(o),e=RT.bind(null,e,t,o),t.then(e,e))}function RT(e,t,o){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,pt===e&&(et&o)===o&&(Ct===4||Ct===3&&(et&62914560)===et&&300>qe()-Aa?(st&2)===0&&io(e,0):wu|=o,no===et&&(no=0)),Jn(e)}function Dm(e,t){t===0&&(t=Af()),e=ri(e,t),e!==null&&(Ao(e,t),Jn(e))}function ET(e){var t=e.memoizedState,o=0;t!==null&&(o=t.retryLane),Dm(e,o)}function _T(e,t){var o=0;switch(e.tag){case 31:case 13:var a=e.stateNode,u=e.memoizedState;u!==null&&(o=u.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(s(314))}a!==null&&a.delete(t),Dm(e,o)}function xT(e,t){return _e(e,t)}var ja=null,so=null,Nu=!1,Pa=!1,Ou=!1,Ir=0;function Jn(e){e!==so&&e.next===null&&(so===null?ja=so=e:so=so.next=e),Pa=!0,Nu||(Nu=!0,kT())}function cs(e,t){if(!Ou&&Pa){Ou=!0;do for(var o=!1,a=ja;a!==null;){if(e!==0){var u=a.pendingLanes;if(u===0)var f=0;else{var v=a.suspendedLanes,x=a.pingedLanes;f=(1<<31-ze(42|e)+1)-1,f&=u&~(v&~x),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(o=!0,zm(a,f))}else f=et,f=Bs(a,a===pt?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(f&3)===0||xo(a,f)||(o=!0,zm(a,f));a=a.next}while(o);Ou=!1}}function AT(){jm()}function jm(){Pa=Nu=!1;var e=0;Ir!==0&&LT()&&(e=Ir);for(var t=qe(),o=null,a=ja;a!==null;){var u=a.next,f=Pm(a,t);f===0?(a.next=null,o===null?ja=u:o.next=u,u===null&&(so=o)):(o=a,(e!==0||(f&3)!==0)&&(Pa=!0)),a=u}jt!==0&&jt!==5||cs(e),Ir!==0&&(Ir=0)}function Pm(e,t){for(var o=e.suspendedLanes,a=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-ze(f),x=1<<v,$=u[v];$===-1?((x&o)===0||(x&a)!==0)&&(u[v]=tS(x,t)):$<=t&&(e.expiredLanes|=x),f&=~x}if(t=pt,o=et,o=Bs(e,e===t?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,o===0||e===t&&(ct===2||ct===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&ke(a),e.callbackNode=null,e.callbackPriority=0;if((o&3)===0||xo(e,o)){if(t=o&-o,t===e.callbackPriority)return t;switch(a!==null&&ke(a),Fc(o)){case 2:case 8:o=S;break;case 32:o=M;break;case 268435456:o=B;break;default:o=M}return a=Im.bind(null,e),o=_e(o,a),e.callbackPriority=t,e.callbackNode=o,t}return a!==null&&a!==null&&ke(a),e.callbackPriority=2,e.callbackNode=null,2}function Im(e,t){if(jt!==0&&jt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var o=e.callbackNode;if(Da()&&e.callbackNode!==o)return null;var a=et;return a=Bs(e,e===pt?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(vm(e,a,t),Pm(e,qe()),e.callbackNode!=null&&e.callbackNode===o?Im.bind(null,e):null)}function zm(e,t){if(Da())return null;vm(e,t,!0)}function kT(){HT(function(){(st&6)!==0?_e(N,AT):jm()})}function Mu(){if(Ir===0){var e=Gi;e===0&&(e=Yt,Yt<<=1,(Yt&261888)===0&&(Yt=256)),Ir=e}return Ir}function Lm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Vs(""+e)}function Bm(e,t){var o=t.ownerDocument.createElement("input");return o.name=t.name,o.value=t.value,e.id&&o.setAttribute("form",e.id),t.parentNode.insertBefore(o,t),e=new FormData(e),o.parentNode.removeChild(o),e}function NT(e,t,o,a,u){if(t==="submit"&&o&&o.stateNode===u){var f=Lm((u[an]||null).action),v=a.submitter;v&&(t=(t=v[an]||null)?Lm(t.formAction):v.getAttribute("formAction"),t!==null&&(f=t,v=null));var x=new Ys("action","action",null,a,u);e.push({event:x,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(Ir!==0){var $=v?Bm(u,v):new FormData(u);Wl(o,{pending:!0,data:$,method:u.method,action:f},null,$)}}else typeof f=="function"&&(x.preventDefault(),$=v?Bm(u,v):new FormData(u),Wl(o,{pending:!0,data:$,method:u.method,action:f},f,$))},currentTarget:u}]})}}for(var Uu=0;Uu<ml.length;Uu++){var Du=ml[Uu],OT=Du.toLowerCase(),MT=Du[0].toUpperCase()+Du.slice(1);Ln(OT,"on"+MT)}Ln(yh,"onAnimationEnd"),Ln(vh,"onAnimationIteration"),Ln(bh,"onAnimationStart"),Ln("dblclick","onDoubleClick"),Ln("focusin","onFocus"),Ln("focusout","onBlur"),Ln(YS,"onTransitionRun"),Ln(JS,"onTransitionStart"),Ln(KS,"onTransitionCancel"),Ln(Sh,"onTransitionEnd"),Oi("onMouseEnter",["mouseout","mouseover"]),Oi("onMouseLeave",["mouseout","mouseover"]),Oi("onPointerEnter",["pointerout","pointerover"]),Oi("onPointerLeave",["pointerout","pointerover"]),Zr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Zr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Zr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Zr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Zr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Zr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ls="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),UT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ls));function Hm(e,t){t=(t&4)!==0;for(var o=0;o<e.length;o++){var a=e[o],u=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var v=a.length-1;0<=v;v--){var x=a[v],$=x.instance,fe=x.currentTarget;if(x=x.listener,$!==f&&u.isPropagationStopped())break e;f=x,u.currentTarget=fe;try{f(u)}catch(be){Qs(be)}u.currentTarget=null,f=$}else for(v=0;v<a.length;v++){if(x=a[v],$=x.instance,fe=x.currentTarget,x=x.listener,$!==f&&u.isPropagationStopped())break e;f=x,u.currentTarget=fe;try{f(u)}catch(be){Qs(be)}u.currentTarget=null,f=$}}}}function We(e,t){var o=t[Xc];o===void 0&&(o=t[Xc]=new Set);var a=e+"__bubble";o.has(a)||(qm(t,e,2,!1),o.add(a))}function ju(e,t,o){var a=0;t&&(a|=4),qm(o,e,a,t)}var Ia="_reactListening"+Math.random().toString(36).slice(2);function Pu(e){if(!e[Ia]){e[Ia]=!0,jf.forEach(function(o){o!=="selectionchange"&&(UT.has(o)||ju(o,!1,e),ju(o,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ia]||(t[Ia]=!0,ju("selectionchange",!1,t))}}function qm(e,t,o,a){switch(yg(t)){case 2:var u=aw;break;case 8:u=cw;break;default:u=Qu}o=u.bind(null,t,o,e),u=void 0,!nl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),a?u!==void 0?e.addEventListener(t,o,{capture:!0,passive:u}):e.addEventListener(t,o,!0):u!==void 0?e.addEventListener(t,o,{passive:u}):e.addEventListener(t,o,!1)}function Iu(e,t,o,a,u){var f=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var v=a.tag;if(v===3||v===4){var x=a.stateNode.containerInfo;if(x===u)break;if(v===4)for(v=a.return;v!==null;){var $=v.tag;if(($===3||$===4)&&v.stateNode.containerInfo===u)return;v=v.return}for(;x!==null;){if(v=Ai(x),v===null)return;if($=v.tag,$===5||$===6||$===26||$===27){a=f=v;continue e}x=x.parentNode}}a=a.return}Xf(function(){var fe=f,be=el(o),we=[];e:{var pe=Th.get(e);if(pe!==void 0){var ge=Ys,je=e;switch(e){case"keypress":if(Fs(o)===0)break e;case"keydown":case"keyup":ge=_S;break;case"focusin":je="focus",ge=sl;break;case"focusout":je="blur",ge=sl;break;case"beforeblur":case"afterblur":ge=sl;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=Kf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=pS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=kS;break;case yh:case vh:case bh:ge=yS;break;case Sh:ge=OS;break;case"scroll":case"scrollend":ge=fS;break;case"wheel":ge=US;break;case"copy":case"cut":case"paste":ge=bS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=Wf;break;case"toggle":case"beforetoggle":ge=jS}var $e=(t&4)!==0,ft=!$e&&(e==="scroll"||e==="scrollend"),se=$e?pe!==null?pe+"Capture":null:pe;$e=[];for(var Y=fe,de;Y!==null;){var Se=Y;if(de=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||de===null||se===null||(Se=Oo(Y,se),Se!=null&&$e.push(us(Y,Se,de))),ft)break;Y=Y.return}0<$e.length&&(pe=new ge(pe,je,null,o,be),we.push({event:pe,listeners:$e}))}}if((t&7)===0){e:{if(pe=e==="mouseover"||e==="pointerover",ge=e==="mouseout"||e==="pointerout",pe&&o!==Zc&&(je=o.relatedTarget||o.fromElement)&&(Ai(je)||je[xi]))break e;if((ge||pe)&&(pe=be.window===be?be:(pe=be.ownerDocument)?pe.defaultView||pe.parentWindow:window,ge?(je=o.relatedTarget||o.toElement,ge=fe,je=je?Ai(je):null,je!==null&&(ft=l(je),$e=je.tag,je!==ft||$e!==5&&$e!==27&&$e!==6)&&(je=null)):(ge=null,je=fe),ge!==je)){if($e=Kf,Se="onMouseLeave",se="onMouseEnter",Y="mouse",(e==="pointerout"||e==="pointerover")&&($e=Wf,Se="onPointerLeave",se="onPointerEnter",Y="pointer"),ft=ge==null?pe:No(ge),de=je==null?pe:No(je),pe=new $e(Se,Y+"leave",ge,o,be),pe.target=ft,pe.relatedTarget=de,Se=null,Ai(be)===fe&&($e=new $e(se,Y+"enter",je,o,be),$e.target=de,$e.relatedTarget=ft,Se=$e),ft=Se,ge&&je)t:{for($e=DT,se=ge,Y=je,de=0,Se=se;Se;Se=$e(Se))de++;Se=0;for(var He=Y;He;He=$e(He))Se++;for(;0<de-Se;)se=$e(se),de--;for(;0<Se-de;)Y=$e(Y),Se--;for(;de--;){if(se===Y||Y!==null&&se===Y.alternate){$e=se;break t}se=$e(se),Y=$e(Y)}$e=null}else $e=null;ge!==null&&$m(we,pe,ge,$e,!1),je!==null&&ft!==null&&$m(we,ft,je,$e,!0)}}e:{if(pe=fe?No(fe):window,ge=pe.nodeName&&pe.nodeName.toLowerCase(),ge==="select"||ge==="input"&&pe.type==="file")var rt=sh;else if(ih(pe))if(ah)rt=GS;else{rt=$S;var Le=qS}else ge=pe.nodeName,!ge||ge.toLowerCase()!=="input"||pe.type!=="checkbox"&&pe.type!=="radio"?fe&&Wc(fe.elementType)&&(rt=sh):rt=VS;if(rt&&(rt=rt(e,fe))){oh(we,rt,o,be);break e}Le&&Le(e,pe,fe),e==="focusout"&&fe&&pe.type==="number"&&fe.memoizedProps.value!=null&&Qc(pe,"number",pe.value)}switch(Le=fe?No(fe):window,e){case"focusin":(ih(Le)||Le.contentEditable==="true")&&(Ii=Le,fl=fe,Lo=null);break;case"focusout":Lo=fl=Ii=null;break;case"mousedown":hl=!0;break;case"contextmenu":case"mouseup":case"dragend":hl=!1,mh(we,o,be);break;case"selectionchange":if(XS)break;case"keydown":case"keyup":mh(we,o,be)}var Ye;if(cl)e:{switch(e){case"compositionstart":var tt="onCompositionStart";break e;case"compositionend":tt="onCompositionEnd";break e;case"compositionupdate":tt="onCompositionUpdate";break e}tt=void 0}else Pi?nh(e,o)&&(tt="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(tt="onCompositionStart");tt&&(Zf&&o.locale!=="ko"&&(Pi||tt!=="onCompositionStart"?tt==="onCompositionEnd"&&Pi&&(Ye=Yf()):(Tr=be,rl="value"in Tr?Tr.value:Tr.textContent,Pi=!0)),Le=za(fe,tt),0<Le.length&&(tt=new Qf(tt,e,null,o,be),we.push({event:tt,listeners:Le}),Ye?tt.data=Ye:(Ye=rh(o),Ye!==null&&(tt.data=Ye)))),(Ye=IS?zS(e,o):LS(e,o))&&(tt=za(fe,"onBeforeInput"),0<tt.length&&(Le=new Qf("onBeforeInput","beforeinput",null,o,be),we.push({event:Le,listeners:tt}),Le.data=Ye)),NT(we,e,fe,o,be)}Hm(we,t)})}function us(e,t,o){return{instance:e,listener:t,currentTarget:o}}function za(e,t){for(var o=t+"Capture",a=[];e!==null;){var u=e,f=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||f===null||(u=Oo(e,o),u!=null&&a.unshift(us(e,u,f)),u=Oo(e,t),u!=null&&a.push(us(e,u,f))),e.tag===3)return a;e=e.return}return[]}function DT(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function $m(e,t,o,a,u){for(var f=t._reactName,v=[];o!==null&&o!==a;){var x=o,$=x.alternate,fe=x.stateNode;if(x=x.tag,$!==null&&$===a)break;x!==5&&x!==26&&x!==27||fe===null||($=fe,u?(fe=Oo(o,f),fe!=null&&v.unshift(us(o,fe,$))):u||(fe=Oo(o,f),fe!=null&&v.push(us(o,fe,$)))),o=o.return}v.length!==0&&e.push({event:t,listeners:v})}var jT=/\r\n?/g,PT=/\u0000|\uFFFD/g;function Vm(e){return(typeof e=="string"?e:""+e).replace(jT,`
`).replace(PT,"")}function Gm(e,t){return t=Vm(t),Vm(e)===t}function dt(e,t,o,a,u,f){switch(o){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||Ui(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&Ui(e,""+a);break;case"className":qs(e,"class",a);break;case"tabIndex":qs(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":qs(e,o,a);break;case"style":Gf(e,a,f);break;case"data":if(t!=="object"){qs(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||o!=="href")){e.removeAttribute(o);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(o);break}a=Vs(""+a),e.setAttribute(o,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(o==="formAction"?(t!=="input"&&dt(e,t,"name",u.name,u,null),dt(e,t,"formEncType",u.formEncType,u,null),dt(e,t,"formMethod",u.formMethod,u,null),dt(e,t,"formTarget",u.formTarget,u,null)):(dt(e,t,"encType",u.encType,u,null),dt(e,t,"method",u.method,u,null),dt(e,t,"target",u.target,u,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(o);break}a=Vs(""+a),e.setAttribute(o,a);break;case"onClick":a!=null&&(e.onclick=Zn);break;case"onScroll":a!=null&&We("scroll",e);break;case"onScrollEnd":a!=null&&We("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(o=a.__html,o!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=o}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}o=Vs(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(o,""+a):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":a===!0?e.setAttribute(o,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(o,a):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(o,a):e.removeAttribute(o);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(o):e.setAttribute(o,a);break;case"popover":We("beforetoggle",e),We("toggle",e),Hs(e,"popover",a);break;case"xlinkActuate":Wn(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Wn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Wn(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Wn(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Wn(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Wn(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Wn(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Wn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Wn(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Hs(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=uS.get(o)||o,Hs(e,o,a))}}function zu(e,t,o,a,u,f){switch(o){case"style":Gf(e,a,f);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(o=a.__html,o!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=o}}break;case"children":typeof a=="string"?Ui(e,a):(typeof a=="number"||typeof a=="bigint")&&Ui(e,""+a);break;case"onScroll":a!=null&&We("scroll",e);break;case"onScrollEnd":a!=null&&We("scrollend",e);break;case"onClick":a!=null&&(e.onclick=Zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Pf.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(u=o.endsWith("Capture"),t=o.slice(2,u?o.length-7:void 0),f=e[an]||null,f=f!=null?f[o]:null,typeof f=="function"&&e.removeEventListener(t,f,u),typeof a=="function")){typeof f!="function"&&f!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(t,a,u);break e}o in e?e[o]=a:a===!0?e.setAttribute(o,""):Hs(e,o,a)}}}function Gt(e,t,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",e),We("load",e);var a=!1,u=!1,f;for(f in o)if(o.hasOwnProperty(f)){var v=o[f];if(v!=null)switch(f){case"src":a=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:dt(e,t,f,v,o,null)}}u&&dt(e,t,"srcSet",o.srcSet,o,null),a&&dt(e,t,"src",o.src,o,null);return;case"input":We("invalid",e);var x=f=v=u=null,$=null,fe=null;for(a in o)if(o.hasOwnProperty(a)){var be=o[a];if(be!=null)switch(a){case"name":u=be;break;case"type":v=be;break;case"checked":$=be;break;case"defaultChecked":fe=be;break;case"value":f=be;break;case"defaultValue":x=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(s(137,t));break;default:dt(e,t,a,be,o,null)}}Hf(e,f,x,$,fe,v,u,!1);return;case"select":We("invalid",e),a=v=f=null;for(u in o)if(o.hasOwnProperty(u)&&(x=o[u],x!=null))switch(u){case"value":f=x;break;case"defaultValue":v=x;break;case"multiple":a=x;default:dt(e,t,u,x,o,null)}t=f,o=v,e.multiple=!!a,t!=null?Mi(e,!!a,t,!1):o!=null&&Mi(e,!!a,o,!0);return;case"textarea":We("invalid",e),f=u=a=null;for(v in o)if(o.hasOwnProperty(v)&&(x=o[v],x!=null))switch(v){case"value":a=x;break;case"defaultValue":u=x;break;case"children":f=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(s(91));break;default:dt(e,t,v,x,o,null)}$f(e,a,u,f);return;case"option":for($ in o)o.hasOwnProperty($)&&(a=o[$],a!=null)&&($==="selected"?e.selected=a&&typeof a!="function"&&typeof a!="symbol":dt(e,t,$,a,o,null));return;case"dialog":We("beforetoggle",e),We("toggle",e),We("cancel",e),We("close",e);break;case"iframe":case"object":We("load",e);break;case"video":case"audio":for(a=0;a<ls.length;a++)We(ls[a],e);break;case"image":We("error",e),We("load",e);break;case"details":We("toggle",e);break;case"embed":case"source":case"link":We("error",e),We("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(fe in o)if(o.hasOwnProperty(fe)&&(a=o[fe],a!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:dt(e,t,fe,a,o,null)}return;default:if(Wc(t)){for(be in o)o.hasOwnProperty(be)&&(a=o[be],a!==void 0&&zu(e,t,be,a,o,void 0));return}}for(x in o)o.hasOwnProperty(x)&&(a=o[x],a!=null&&dt(e,t,x,a,o,null))}function IT(e,t,o,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,f=null,v=null,x=null,$=null,fe=null,be=null;for(ge in o){var we=o[ge];if(o.hasOwnProperty(ge)&&we!=null)switch(ge){case"checked":break;case"value":break;case"defaultValue":$=we;default:a.hasOwnProperty(ge)||dt(e,t,ge,null,a,we)}}for(var pe in a){var ge=a[pe];if(we=o[pe],a.hasOwnProperty(pe)&&(ge!=null||we!=null))switch(pe){case"type":f=ge;break;case"name":u=ge;break;case"checked":fe=ge;break;case"defaultChecked":be=ge;break;case"value":v=ge;break;case"defaultValue":x=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(s(137,t));break;default:ge!==we&&dt(e,t,pe,ge,a,we)}}Kc(e,v,x,$,fe,be,f,u);return;case"select":ge=v=x=pe=null;for(f in o)if($=o[f],o.hasOwnProperty(f)&&$!=null)switch(f){case"value":break;case"multiple":ge=$;default:a.hasOwnProperty(f)||dt(e,t,f,null,a,$)}for(u in a)if(f=a[u],$=o[u],a.hasOwnProperty(u)&&(f!=null||$!=null))switch(u){case"value":pe=f;break;case"defaultValue":x=f;break;case"multiple":v=f;default:f!==$&&dt(e,t,u,f,a,$)}t=x,o=v,a=ge,pe!=null?Mi(e,!!o,pe,!1):!!a!=!!o&&(t!=null?Mi(e,!!o,t,!0):Mi(e,!!o,o?[]:"",!1));return;case"textarea":ge=pe=null;for(x in o)if(u=o[x],o.hasOwnProperty(x)&&u!=null&&!a.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:dt(e,t,x,null,a,u)}for(v in a)if(u=a[v],f=o[v],a.hasOwnProperty(v)&&(u!=null||f!=null))switch(v){case"value":pe=u;break;case"defaultValue":ge=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(s(91));break;default:u!==f&&dt(e,t,v,u,a,f)}qf(e,pe,ge);return;case"option":for(var je in o)pe=o[je],o.hasOwnProperty(je)&&pe!=null&&!a.hasOwnProperty(je)&&(je==="selected"?e.selected=!1:dt(e,t,je,null,a,pe));for($ in a)pe=a[$],ge=o[$],a.hasOwnProperty($)&&pe!==ge&&(pe!=null||ge!=null)&&($==="selected"?e.selected=pe&&typeof pe!="function"&&typeof pe!="symbol":dt(e,t,$,pe,a,ge));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in o)pe=o[$e],o.hasOwnProperty($e)&&pe!=null&&!a.hasOwnProperty($e)&&dt(e,t,$e,null,a,pe);for(fe in a)if(pe=a[fe],ge=o[fe],a.hasOwnProperty(fe)&&pe!==ge&&(pe!=null||ge!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(s(137,t));break;default:dt(e,t,fe,pe,a,ge)}return;default:if(Wc(t)){for(var ft in o)pe=o[ft],o.hasOwnProperty(ft)&&pe!==void 0&&!a.hasOwnProperty(ft)&&zu(e,t,ft,void 0,a,pe);for(be in a)pe=a[be],ge=o[be],!a.hasOwnProperty(be)||pe===ge||pe===void 0&&ge===void 0||zu(e,t,be,pe,a,ge);return}}for(var se in o)pe=o[se],o.hasOwnProperty(se)&&pe!=null&&!a.hasOwnProperty(se)&&dt(e,t,se,null,a,pe);for(we in a)pe=a[we],ge=o[we],!a.hasOwnProperty(we)||pe===ge||pe==null&&ge==null||dt(e,t,we,pe,a,ge)}function Fm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function zT(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,o=performance.getEntriesByType("resource"),a=0;a<o.length;a++){var u=o[a],f=u.transferSize,v=u.initiatorType,x=u.duration;if(f&&x&&Fm(v)){for(v=0,x=u.responseEnd,a+=1;a<o.length;a++){var $=o[a],fe=$.startTime;if(fe>x)break;var be=$.transferSize,we=$.initiatorType;be&&Fm(we)&&($=$.responseEnd,v+=be*($<x?1:(x-fe)/($-fe)))}if(--a,t+=8*(f+v)/(u.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Lu=null,Bu=null;function La(e){return e.nodeType===9?e:e.ownerDocument}function Xm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ym(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Hu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var qu=null;function LT(){var e=window.event;return e&&e.type==="popstate"?e===qu?!1:(qu=e,!0):(qu=null,!1)}var Jm=typeof setTimeout=="function"?setTimeout:void 0,BT=typeof clearTimeout=="function"?clearTimeout:void 0,Km=typeof Promise=="function"?Promise:void 0,HT=typeof queueMicrotask=="function"?queueMicrotask:typeof Km<"u"?function(e){return Km.resolve(null).then(e).catch(qT)}:Jm;function qT(e){setTimeout(function(){throw e})}function zr(e){return e==="head"}function Qm(e,t){var o=t,a=0;do{var u=o.nextSibling;if(e.removeChild(o),u&&u.nodeType===8)if(o=u.data,o==="/$"||o==="/&"){if(a===0){e.removeChild(u),uo(t);return}a--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")a++;else if(o==="html")ds(e.ownerDocument.documentElement);else if(o==="head"){o=e.ownerDocument.head,ds(o);for(var f=o.firstChild;f;){var v=f.nextSibling,x=f.nodeName;f[ko]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&f.rel.toLowerCase()==="stylesheet"||o.removeChild(f),f=v}}else o==="body"&&ds(e.ownerDocument.body);o=u}while(o);uo(t)}function Wm(e,t){var o=e;e=0;do{var a=o.nextSibling;if(o.nodeType===1?t?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(t?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),a&&a.nodeType===8)if(o=a.data,o==="/$"){if(e===0)break;e--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||e++;o=a}while(o)}function $u(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var o=t;switch(t=t.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":$u(o),Yc(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function $T(e,t,o,a){for(;e.nodeType===1;){var u=o;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[ko])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=jn(e.nextSibling),e===null)break}return null}function VT(e,t,o){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=jn(e.nextSibling),e===null))return null;return e}function Zm(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=jn(e.nextSibling),e===null))return null;return e}function Vu(e){return e.data==="$?"||e.data==="$~"}function Gu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function GT(e,t){var o=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||o.readyState!=="loading")t();else{var a=function(){t(),o.removeEventListener("DOMContentLoaded",a)};o.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function jn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Fu=null;function eg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"||o==="/&"){if(t===0)return jn(e.nextSibling);t--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||t++}e=e.nextSibling}return null}function tg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(t===0)return e;t--}else o!=="/$"&&o!=="/&"||t++}e=e.previousSibling}return null}function ng(e,t,o){switch(t=La(o),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function ds(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Yc(e)}var Pn=new Map,rg=new Set;function Ba(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var mr=D.d;D.d={f:FT,r:XT,D:YT,C:JT,L:KT,m:QT,X:ZT,S:WT,M:ew};function FT(){var e=mr.f(),t=Oa();return e||t}function XT(e){var t=ki(e);t!==null&&t.tag===5&&t.type==="form"?Sp(t):mr.r(e)}var ao=typeof document>"u"?null:document;function ig(e,t,o){var a=ao;if(a&&typeof t=="string"&&t){var u=An(t);u='link[rel="'+e+'"][href="'+u+'"]',typeof o=="string"&&(u+='[crossorigin="'+o+'"]'),rg.has(u)||(rg.add(u),e={rel:e,crossOrigin:o,href:t},a.querySelector(u)===null&&(t=a.createElement("link"),Gt(t,"link",e),zt(t),a.head.appendChild(t)))}}function YT(e){mr.D(e),ig("dns-prefetch",e,null)}function JT(e,t){mr.C(e,t),ig("preconnect",e,t)}function KT(e,t,o){mr.L(e,t,o);var a=ao;if(a&&e&&t){var u='link[rel="preload"][as="'+An(t)+'"]';t==="image"&&o&&o.imageSrcSet?(u+='[imagesrcset="'+An(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(u+='[imagesizes="'+An(o.imageSizes)+'"]')):u+='[href="'+An(e)+'"]';var f=u;switch(t){case"style":f=co(e);break;case"script":f=lo(e)}Pn.has(f)||(e=_({rel:"preload",href:t==="image"&&o&&o.imageSrcSet?void 0:e,as:t},o),Pn.set(f,e),a.querySelector(u)!==null||t==="style"&&a.querySelector(fs(f))||t==="script"&&a.querySelector(hs(f))||(t=a.createElement("link"),Gt(t,"link",e),zt(t),a.head.appendChild(t)))}}function QT(e,t){mr.m(e,t);var o=ao;if(o&&e){var a=t&&typeof t.as=="string"?t.as:"script",u='link[rel="modulepreload"][as="'+An(a)+'"][href="'+An(e)+'"]',f=u;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=lo(e)}if(!Pn.has(f)&&(e=_({rel:"modulepreload",href:e},t),Pn.set(f,e),o.querySelector(u)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(hs(f)))return}a=o.createElement("link"),Gt(a,"link",e),zt(a),o.head.appendChild(a)}}}function WT(e,t,o){mr.S(e,t,o);var a=ao;if(a&&e){var u=Ni(a).hoistableStyles,f=co(e);t=t||"default";var v=u.get(f);if(!v){var x={loading:0,preload:null};if(v=a.querySelector(fs(f)))x.loading=5;else{e=_({rel:"stylesheet",href:e,"data-precedence":t},o),(o=Pn.get(f))&&Xu(e,o);var $=v=a.createElement("link");zt($),Gt($,"link",e),$._p=new Promise(function(fe,be){$.onload=fe,$.onerror=be}),$.addEventListener("load",function(){x.loading|=1}),$.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Ha(v,t,a)}v={type:"stylesheet",instance:v,count:1,state:x},u.set(f,v)}}}function ZT(e,t){mr.X(e,t);var o=ao;if(o&&e){var a=Ni(o).hoistableScripts,u=lo(e),f=a.get(u);f||(f=o.querySelector(hs(u)),f||(e=_({src:e,async:!0},t),(t=Pn.get(u))&&Yu(e,t),f=o.createElement("script"),zt(f),Gt(f,"link",e),o.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},a.set(u,f))}}function ew(e,t){mr.M(e,t);var o=ao;if(o&&e){var a=Ni(o).hoistableScripts,u=lo(e),f=a.get(u);f||(f=o.querySelector(hs(u)),f||(e=_({src:e,async:!0,type:"module"},t),(t=Pn.get(u))&&Yu(e,t),f=o.createElement("script"),zt(f),Gt(f,"link",e),o.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},a.set(u,f))}}function og(e,t,o,a){var u=(u=O.current)?Ba(u):null;if(!u)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(t=co(o.href),o=Ni(u).hoistableStyles,a=o.get(t),a||(a={type:"style",instance:null,count:0,state:null},o.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=co(o.href);var f=Ni(u).hoistableStyles,v=f.get(e);if(v||(u=u.ownerDocument||u,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=u.querySelector(fs(e)))&&!f._p&&(v.instance=f,v.state.loading=5),Pn.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Pn.set(e,o),f||tw(u,e,o,v.state))),t&&a===null)throw Error(s(528,""));return v}if(t&&a!==null)throw Error(s(529,""));return null;case"script":return t=o.async,o=o.src,typeof o=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=lo(o),o=Ni(u).hoistableScripts,a=o.get(t),a||(a={type:"script",instance:null,count:0,state:null},o.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function co(e){return'href="'+An(e)+'"'}function fs(e){return'link[rel="stylesheet"]['+e+"]"}function sg(e){return _({},e,{"data-precedence":e.precedence,precedence:null})}function tw(e,t,o,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),Gt(t,"link",o),zt(t),e.head.appendChild(t))}function lo(e){return'[src="'+An(e)+'"]'}function hs(e){return"script[async]"+e}function ag(e,t,o){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+An(o.href)+'"]');if(a)return t.instance=a,zt(a),a;var u=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),zt(a),Gt(a,"style",u),Ha(a,o.precedence,e),t.instance=a;case"stylesheet":u=co(o.href);var f=e.querySelector(fs(u));if(f)return t.state.loading|=4,t.instance=f,zt(f),f;a=sg(o),(u=Pn.get(u))&&Xu(a,u),f=(e.ownerDocument||e).createElement("link"),zt(f);var v=f;return v._p=new Promise(function(x,$){v.onload=x,v.onerror=$}),Gt(f,"link",a),t.state.loading|=4,Ha(f,o.precedence,e),t.instance=f;case"script":return f=lo(o.src),(u=e.querySelector(hs(f)))?(t.instance=u,zt(u),u):(a=o,(u=Pn.get(f))&&(a=_({},o),Yu(a,u)),e=e.ownerDocument||e,u=e.createElement("script"),zt(u),Gt(u,"link",a),e.head.appendChild(u),t.instance=u);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,Ha(a,o.precedence,e));return t.instance}function Ha(e,t,o){for(var a=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=a.length?a[a.length-1]:null,f=u,v=0;v<a.length;v++){var x=a[v];if(x.dataset.precedence===t)f=x;else if(f!==u)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=o.nodeType===9?o.head:o,t.insertBefore(e,t.firstChild))}function Xu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Yu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var qa=null;function cg(e,t,o){if(qa===null){var a=new Map,u=qa=new Map;u.set(o,a)}else u=qa,a=u.get(o),a||(a=new Map,u.set(o,a));if(a.has(e))return a;for(a.set(e,null),o=o.getElementsByTagName(e),u=0;u<o.length;u++){var f=o[u];if(!(f[ko]||f[Ht]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(t)||"";v=e+v;var x=a.get(v);x?x.push(f):a.set(v,[f])}}return a}function lg(e,t,o){e=e.ownerDocument||e,e.head.insertBefore(o,t==="title"?e.querySelector("head > title"):null)}function nw(e,t,o){if(o===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function ug(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function rw(e,t,o,a){if(o.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var u=co(a.href),f=t.querySelector(fs(u));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=$a.bind(e),t.then(e,e)),o.state.loading|=4,o.instance=f,zt(f);return}f=t.ownerDocument||t,a=sg(a),(u=Pn.get(u))&&Xu(a,u),f=f.createElement("link"),zt(f);var v=f;v._p=new Promise(function(x,$){v.onload=x,v.onerror=$}),Gt(f,"link",a),o.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(o,t),(t=o.state.preload)&&(o.state.loading&3)===0&&(e.count++,o=$a.bind(e),t.addEventListener("load",o),t.addEventListener("error",o))}}var Ju=0;function iw(e,t){return e.stylesheets&&e.count===0&&Ga(e,e.stylesheets),0<e.count||0<e.imgCount?function(o){var a=setTimeout(function(){if(e.stylesheets&&Ga(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+t);0<e.imgBytes&&Ju===0&&(Ju=62500*zT());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ga(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>Ju?50:800)+t);return e.unsuspend=o,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(u)}}:null}function $a(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ga(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Va=null;function Ga(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Va=new Map,t.forEach(ow,e),Va=null,$a.call(e))}function ow(e,t){if(!(t.state.loading&4)){var o=Va.get(e);if(o)var a=o.get(null);else{o=new Map,Va.set(e,o);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<u.length;f++){var v=u[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),a=v)}a&&o.set(null,a)}u=t.instance,v=u.getAttribute("data-precedence"),f=o.get(v)||a,f===a&&o.set(null,u),o.set(v,u),this.count++,a=$a.bind(this),u.addEventListener("load",a),u.addEventListener("error",a),f?f.parentNode.insertBefore(u,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),t.state.loading|=4}}var ps={$$typeof:ue,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function sw(e,t,o,a,u,f,v,x,$){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vc(0),this.hiddenUpdates=Vc(null),this.identifierPrefix=a,this.onUncaughtError=u,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=$,this.incompleteTransitions=new Map}function dg(e,t,o,a,u,f,v,x,$,fe,be,we){return e=new sw(e,t,o,v,$,fe,be,we,x),t=1,f===!0&&(t|=24),f=bn(3,null,null,t),e.current=f,f.stateNode=e,t=Al(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:a,isDehydrated:o,cache:t},Ml(f),e}function fg(e){return e?(e=Bi,e):Bi}function hg(e,t,o,a,u,f){u=fg(u),a.context===null?a.context=u:a.pendingContext=u,a=xr(t),a.payload={element:o},f=f===void 0?null:f,f!==null&&(a.callback=f),o=Ar(e,a,t),o!==null&&(hn(o,e,t),Fo(o,e,t))}function pg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<t?o:t}}function Ku(e,t){pg(e,t),(e=e.alternate)&&pg(e,t)}function mg(e){if(e.tag===13||e.tag===31){var t=ri(e,67108864);t!==null&&hn(t,e,67108864),Ku(e,67108864)}}function gg(e){if(e.tag===13||e.tag===31){var t=Rn();t=Gc(t);var o=ri(e,t);o!==null&&hn(o,e,t),Ku(e,t)}}var Fa=!0;function aw(e,t,o,a){var u=G.T;G.T=null;var f=D.p;try{D.p=2,Qu(e,t,o,a)}finally{D.p=f,G.T=u}}function cw(e,t,o,a){var u=G.T;G.T=null;var f=D.p;try{D.p=8,Qu(e,t,o,a)}finally{D.p=f,G.T=u}}function Qu(e,t,o,a){if(Fa){var u=Wu(a);if(u===null)Iu(e,t,a,Xa,o),vg(e,a);else if(uw(u,e,t,o,a))a.stopPropagation();else if(vg(e,a),t&4&&-1<lw.indexOf(e)){for(;u!==null;){var f=ki(u);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=Wr(f.pendingLanes);if(v!==0){var x=f;for(x.pendingLanes|=2,x.entangledLanes|=2;v;){var $=1<<31-ze(v);x.entanglements[1]|=$,v&=~$}Jn(f),(st&6)===0&&(ka=qe()+500,cs(0))}}break;case 31:case 13:x=ri(f,2),x!==null&&hn(x,f,2),Oa(),Ku(f,2)}if(f=Wu(a),f===null&&Iu(e,t,a,Xa,o),f===u)break;u=f}u!==null&&a.stopPropagation()}else Iu(e,t,a,null,o)}}function Wu(e){return e=el(e),Zu(e)}var Xa=null;function Zu(e){if(Xa=null,e=Ai(e),e!==null){var t=l(e);if(t===null)e=null;else{var o=t.tag;if(o===13){if(e=d(t),e!==null)return e;e=null}else if(o===31){if(e=h(t),e!==null)return e;e=null}else if(o===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Xa=e,null}function yg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ke()){case N:return 2;case S:return 8;case M:case W:return 32;case B:return 268435456;default:return 32}default:return 32}}var ed=!1,Lr=null,Br=null,Hr=null,ms=new Map,gs=new Map,qr=[],lw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function vg(e,t){switch(e){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":Hr=null;break;case"pointerover":case"pointerout":ms.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gs.delete(t.pointerId)}}function ys(e,t,o,a,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:o,eventSystemFlags:a,nativeEvent:f,targetContainers:[u]},t!==null&&(t=ki(t),t!==null&&mg(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function uw(e,t,o,a,u){switch(t){case"focusin":return Lr=ys(Lr,e,t,o,a,u),!0;case"dragenter":return Br=ys(Br,e,t,o,a,u),!0;case"mouseover":return Hr=ys(Hr,e,t,o,a,u),!0;case"pointerover":var f=u.pointerId;return ms.set(f,ys(ms.get(f)||null,e,t,o,a,u)),!0;case"gotpointercapture":return f=u.pointerId,gs.set(f,ys(gs.get(f)||null,e,t,o,a,u)),!0}return!1}function bg(e){var t=Ai(e.target);if(t!==null){var o=l(t);if(o!==null){if(t=o.tag,t===13){if(t=d(o),t!==null){e.blockedOn=t,Uf(e.priority,function(){gg(o)});return}}else if(t===31){if(t=h(o),t!==null){e.blockedOn=t,Uf(e.priority,function(){gg(o)});return}}else if(t===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ya(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var o=Wu(e.nativeEvent);if(o===null){o=e.nativeEvent;var a=new o.constructor(o.type,o);Zc=a,o.target.dispatchEvent(a),Zc=null}else return t=ki(o),t!==null&&mg(t),e.blockedOn=o,!1;t.shift()}return!0}function Sg(e,t,o){Ya(e)&&o.delete(t)}function dw(){ed=!1,Lr!==null&&Ya(Lr)&&(Lr=null),Br!==null&&Ya(Br)&&(Br=null),Hr!==null&&Ya(Hr)&&(Hr=null),ms.forEach(Sg),gs.forEach(Sg)}function Ja(e,t){e.blockedOn===t&&(e.blockedOn=null,ed||(ed=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,dw)))}var Ka=null;function Tg(e){Ka!==e&&(Ka=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ka===e&&(Ka=null);for(var t=0;t<e.length;t+=3){var o=e[t],a=e[t+1],u=e[t+2];if(typeof a!="function"){if(Zu(a||o)===null)continue;break}var f=ki(o);f!==null&&(e.splice(t,3),t-=3,Wl(f,{pending:!0,data:u,method:o.method,action:a},a,u))}}))}function uo(e){function t($){return Ja($,e)}Lr!==null&&Ja(Lr,e),Br!==null&&Ja(Br,e),Hr!==null&&Ja(Hr,e),ms.forEach(t),gs.forEach(t);for(var o=0;o<qr.length;o++){var a=qr[o];a.blockedOn===e&&(a.blockedOn=null)}for(;0<qr.length&&(o=qr[0],o.blockedOn===null);)bg(o),o.blockedOn===null&&qr.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(a=0;a<o.length;a+=3){var u=o[a],f=o[a+1],v=u[an]||null;if(typeof f=="function")v||Tg(o);else if(v){var x=null;if(f&&f.hasAttribute("formAction")){if(u=f,v=f[an]||null)x=v.formAction;else if(Zu(u)!==null)continue}else x=v.action;typeof x=="function"?o[a+1]=x:(o.splice(a,3),a-=3),Tg(o)}}}function wg(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(v){return u=v})},focusReset:"manual",scroll:"manual"})}function t(){u!==null&&(u(),u=null),a||setTimeout(o,20)}function o(){if(!a&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(o,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),u!==null&&(u(),u=null)}}}function td(e){this._internalRoot=e}Qa.prototype.render=td.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var o=t.current,a=Rn();hg(o,a,e,t,null,null)},Qa.prototype.unmount=td.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;hg(e.current,2,null,e,null,null),Oa(),t[xi]=null}};function Qa(e){this._internalRoot=e}Qa.prototype.unstable_scheduleHydration=function(e){if(e){var t=Mf();e={blockedOn:null,target:e,priority:t};for(var o=0;o<qr.length&&t!==0&&t<qr[o].priority;o++);qr.splice(o,0,e),o===0&&bg(e)}};var Cg=n.version;if(Cg!=="19.2.3")throw Error(s(527,Cg,"19.2.3"));D.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=m(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var fw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wa.isDisabled&&Wa.supportsFiber)try{Ie=Wa.inject(fw),Me=Wa}catch{}}return bs.createRoot=function(e,t){if(!c(e))throw Error(s(299));var o=!1,a="",u=Np,f=Op,v=Mp;return t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(u=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(v=t.onRecoverableError)),t=dg(e,1,!1,null,null,o,a,null,u,f,v,wg),e[xi]=t.current,Pu(e),new td(t)},bs.hydrateRoot=function(e,t,o){if(!c(e))throw Error(s(299));var a=!1,u="",f=Np,v=Op,x=Mp,$=null;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(f=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(x=o.onRecoverableError),o.formState!==void 0&&($=o.formState)),t=dg(e,1,!0,t,o??null,a,u,$,f,v,x,wg),t.context=fg(null),o=t.current,a=Rn(),a=Gc(a),u=xr(a),u.callback=null,Ar(o,u,a),o=a,t.current.lanes=o,Ao(t,o),Jn(t),e[xi]=t.current,Pu(e),new Qa(t)},bs.version="19.2.3",bs}var Dg;function ww(){if(Dg)return id.exports;Dg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),id.exports=Tw(),id.exports}var Cw=ww();var jg="popstate";function Rw(r={}){function n(s,c){let{pathname:l,search:d,hash:h}=s.location;return Ad("",{pathname:l,search:d,hash:h},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function i(s,c){return typeof c=="string"?c:xs(c)}return _w(n,i,null,r)}function St(r,n){if(r===!1||r===null||typeof r>"u")throw new Error(n)}function zn(r,n){if(!r){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Ew(){return Math.random().toString(36).substring(2,10)}function Pg(r,n){return{usr:r.state,key:r.key,idx:n}}function Ad(r,n,i=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof n=="string"?bo(n):n,state:i,key:n&&n.key||s||Ew()}}function xs({pathname:r="/",search:n="",hash:i=""}){return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(r+=i.charAt(0)==="#"?i:"#"+i),r}function bo(r){let n={};if(r){let i=r.indexOf("#");i>=0&&(n.hash=r.substring(i),r=r.substring(0,i));let s=r.indexOf("?");s>=0&&(n.search=r.substring(s),r=r.substring(0,s)),r&&(n.pathname=r)}return n}function _w(r,n,i,s={}){let{window:c=document.defaultView,v5Compat:l=!1}=s,d=c.history,h="POP",p=null,m=y();m==null&&(m=0,d.replaceState({...d.state,idx:m},""));function y(){return(d.state||{idx:null}).idx}function _(){h="POP";let X=y(),ye=X==null?null:X-m;m=X,p&&p({action:h,location:Z.location,delta:ye})}function z(X,ye){h="PUSH";let he=Ad(Z.location,X,ye);m=y()+1;let ue=Pg(he,m),ne=Z.createHref(he);try{d.pushState(ue,"",ne)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;c.location.assign(ne)}l&&p&&p({action:h,location:Z.location,delta:1})}function F(X,ye){h="REPLACE";let he=Ad(Z.location,X,ye);m=y();let ue=Pg(he,m),ne=Z.createHref(he);d.replaceState(ue,"",ne),l&&p&&p({action:h,location:Z.location,delta:0})}function U(X){return xw(X)}let Z={get action(){return h},get location(){return r(c,d)},listen(X){if(p)throw new Error("A history only accepts one active listener");return c.addEventListener(jg,_),p=X,()=>{c.removeEventListener(jg,_),p=null}},createHref(X){return n(c,X)},createURL:U,encodeLocation(X){let ye=U(X);return{pathname:ye.pathname,search:ye.search,hash:ye.hash}},push:z,replace:F,go(X){return d.go(X)}};return Z}function xw(r,n=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),St(i,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:xs(r);return s=s.replace(/ $/,"%20"),!n&&s.startsWith("//")&&(s=i+s),new URL(s,i)}function Vy(r,n,i="/"){return Aw(r,n,i,!1)}function Aw(r,n,i,s){let c=typeof n=="string"?bo(n):n,l=vr(c.pathname||"/",i);if(l==null)return null;let d=Gy(r);kw(d);let h=null;for(let p=0;h==null&&p<d.length;++p){let m=Bw(l);h=zw(d[p],m,s)}return h}function Gy(r,n=[],i=[],s="",c=!1){let l=(d,h,p=c,m)=>{let y={relativePath:m===void 0?d.path||"":m,caseSensitive:d.caseSensitive===!0,childrenIndex:h,route:d};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(s)&&p)return;St(y.relativePath.startsWith(s),`Absolute route path "${y.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(s.length)}let _=yr([s,y.relativePath]),z=i.concat(y);d.children&&d.children.length>0&&(St(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),Gy(d.children,n,z,_,p)),!(d.path==null&&!d.index)&&n.push({path:_,score:Pw(_,d.index),routesMeta:z})};return r.forEach((d,h)=>{if(d.path===""||!d.path?.includes("?"))l(d,h);else for(let p of Fy(d.path))l(d,h,!0,p)}),n}function Fy(r){let n=r.split("/");if(n.length===0)return[];let[i,...s]=n,c=i.endsWith("?"),l=i.replace(/\?$/,"");if(s.length===0)return c?[l,""]:[l];let d=Fy(s.join("/")),h=[];return h.push(...d.map(p=>p===""?l:[l,p].join("/"))),c&&h.push(...d),h.map(p=>r.startsWith("/")&&p===""?"/":p)}function kw(r){r.sort((n,i)=>n.score!==i.score?i.score-n.score:Iw(n.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}var Nw=/^:[\w-]+$/,Ow=3,Mw=2,Uw=1,Dw=10,jw=-2,Ig=r=>r==="*";function Pw(r,n){let i=r.split("/"),s=i.length;return i.some(Ig)&&(s+=jw),n&&(s+=Mw),i.filter(c=>!Ig(c)).reduce((c,l)=>c+(Nw.test(l)?Ow:l===""?Uw:Dw),s)}function Iw(r,n){return r.length===n.length&&r.slice(0,-1).every((s,c)=>s===n[c])?r[r.length-1]-n[n.length-1]:0}function zw(r,n,i=!1){let{routesMeta:s}=r,c={},l="/",d=[];for(let h=0;h<s.length;++h){let p=s[h],m=h===s.length-1,y=l==="/"?n:n.slice(l.length)||"/",_=pc({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},y),z=p.route;if(!_&&m&&i&&!s[s.length-1].route.index&&(_=pc({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!_)return null;Object.assign(c,_.params),d.push({params:c,pathname:yr([l,_.pathname]),pathnameBase:Vw(yr([l,_.pathnameBase])),route:z}),_.pathnameBase!=="/"&&(l=yr([l,_.pathnameBase]))}return d}function pc(r,n){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[i,s]=Lw(r.path,r.caseSensitive,r.end),c=n.match(i);if(!c)return null;let l=c[0],d=l.replace(/(.)\/+$/,"$1"),h=c.slice(1);return{params:s.reduce((m,{paramName:y,isOptional:_},z)=>{if(y==="*"){let U=h[z]||"";d=l.slice(0,l.length-U.length).replace(/(.)\/+$/,"$1")}const F=h[z];return _&&!F?m[y]=void 0:m[y]=(F||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:d,pattern:r}}function Lw(r,n=!1,i=!0){zn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],c="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,h,p)=>(s.push({paramName:h,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(s.push({paramName:"*"}),c+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?c+="\\/*$":r!==""&&r!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,n?void 0:"i"),s]}function Bw(r){try{return r.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return zn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),r}}function vr(r,n){if(n==="/")return r;if(!r.toLowerCase().startsWith(n.toLowerCase()))return null;let i=n.endsWith("/")?n.length-1:n.length,s=r.charAt(i);return s&&s!=="/"?null:r.slice(i)||"/"}var Xy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hw=r=>Xy.test(r);function qw(r,n="/"){let{pathname:i,search:s="",hash:c=""}=typeof r=="string"?bo(r):r,l;if(i)if(Hw(i))l=i;else{if(i.includes("//")){let d=i;i=i.replace(/\/\/+/g,"/"),zn(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${i}`)}i.startsWith("/")?l=zg(i.substring(1),"/"):l=zg(i,n)}else l=n;return{pathname:l,search:Gw(s),hash:Fw(c)}}function zg(r,n){let i=n.replace(/\/+$/,"").split("/");return r.split("/").forEach(c=>{c===".."?i.length>1&&i.pop():c!=="."&&i.push(c)}),i.length>1?i.join("/"):"/"}function cd(r,n,i,s){return`Cannot include a '${r}' character in a manually specified \`to.${n}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function $w(r){return r.filter((n,i)=>i===0||n.route.path&&n.route.path.length>0)}function Vd(r){let n=$w(r);return n.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase)}function Gd(r,n,i,s=!1){let c;typeof r=="string"?c=bo(r):(c={...r},St(!c.pathname||!c.pathname.includes("?"),cd("?","pathname","search",c)),St(!c.pathname||!c.pathname.includes("#"),cd("#","pathname","hash",c)),St(!c.search||!c.search.includes("#"),cd("#","search","hash",c)));let l=r===""||c.pathname==="",d=l?"/":c.pathname,h;if(d==null)h=i;else{let _=n.length-1;if(!s&&d.startsWith("..")){let z=d.split("/");for(;z[0]==="..";)z.shift(),_-=1;c.pathname=z.join("/")}h=_>=0?n[_]:"/"}let p=qw(c,h),m=d&&d!=="/"&&d.endsWith("/"),y=(l||d===".")&&i.endsWith("/");return!p.pathname.endsWith("/")&&(m||y)&&(p.pathname+="/"),p}var yr=r=>r.join("/").replace(/\/\/+/g,"/"),Vw=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),Gw=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,Fw=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,Xw=class{constructor(r,n,i,s=!1){this.status=r,this.statusText=n||"",this.internal=s,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function Yw(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function Jw(r){return r.map(n=>n.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Yy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Jy(r,n){let i=r;if(typeof i!="string"||!Xy.test(i))return{absoluteURL:void 0,isExternal:!1,to:i};let s=i,c=!1;if(Yy)try{let l=new URL(window.location.href),d=i.startsWith("//")?new URL(l.protocol+i):new URL(i),h=vr(d.pathname,n);d.origin===l.origin&&h!=null?i=h+d.search+d.hash:c=!0}catch{zn(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:c,to:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ky=["POST","PUT","PATCH","DELETE"];new Set(Ky);var Kw=["GET",...Ky];new Set(Kw);var So=q.createContext(null);So.displayName="DataRouter";var Rc=q.createContext(null);Rc.displayName="DataRouterState";var Qw=q.createContext(!1),Qy=q.createContext({isTransitioning:!1});Qy.displayName="ViewTransition";var Ww=q.createContext(new Map);Ww.displayName="Fetchers";var Zw=q.createContext(null);Zw.displayName="Await";var _n=q.createContext(null);_n.displayName="Navigation";var Os=q.createContext(null);Os.displayName="Location";var Vn=q.createContext({outlet:null,matches:[],isDataRoute:!1});Vn.displayName="Route";var Fd=q.createContext(null);Fd.displayName="RouteError";var Wy="REACT_ROUTER_ERROR",eC="REDIRECT",tC="ROUTE_ERROR_RESPONSE";function nC(r){if(r.startsWith(`${Wy}:${eC}:{`))try{let n=JSON.parse(r.slice(28));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.location=="string"&&typeof n.reloadDocument=="boolean"&&typeof n.replace=="boolean")return n}catch{}}function rC(r){if(r.startsWith(`${Wy}:${tC}:{`))try{let n=JSON.parse(r.slice(40));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string")return new Xw(n.status,n.statusText,n.data)}catch{}}function iC(r,{relative:n}={}){St(To(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:s}=q.useContext(_n),{hash:c,pathname:l,search:d}=Ms(r,{relative:n}),h=l;return i!=="/"&&(h=l==="/"?i:yr([i,l])),s.createHref({pathname:h,search:d,hash:c})}function To(){return q.useContext(Os)!=null}function Qn(){return St(To(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(Os).location}var Zy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ev(r){q.useContext(_n).static||q.useLayoutEffect(r)}function wo(){let{isDataRoute:r}=q.useContext(Vn);return r?vC():oC()}function oC(){St(To(),"useNavigate() may be used only in the context of a <Router> component.");let r=q.useContext(So),{basename:n,navigator:i}=q.useContext(_n),{matches:s}=q.useContext(Vn),{pathname:c}=Qn(),l=JSON.stringify(Vd(s)),d=q.useRef(!1);return ev(()=>{d.current=!0}),q.useCallback((p,m={})=>{if(zn(d.current,Zy),!d.current)return;if(typeof p=="number"){i.go(p);return}let y=Gd(p,JSON.parse(l),c,m.relative==="path");r==null&&n!=="/"&&(y.pathname=y.pathname==="/"?n:yr([n,y.pathname])),(m.replace?i.replace:i.push)(y,m.state,m)},[n,i,l,c,r])}q.createContext(null);function sC(){let{matches:r}=q.useContext(Vn),n=r[r.length-1];return n?n.params:{}}function Ms(r,{relative:n}={}){let{matches:i}=q.useContext(Vn),{pathname:s}=Qn(),c=JSON.stringify(Vd(i));return q.useMemo(()=>Gd(r,JSON.parse(c),s,n==="path"),[r,c,s,n])}function aC(r,n){return tv(r,n)}function tv(r,n,i,s,c){St(To(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=q.useContext(_n),{matches:d}=q.useContext(Vn),h=d[d.length-1],p=h?h.params:{},m=h?h.pathname:"/",y=h?h.pathnameBase:"/",_=h&&h.route;{let he=_&&_.path||"";rv(m,!_||he.endsWith("*")||he.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${he}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${he}"> to <Route path="${he==="/"?"*":`${he}/*`}">.`)}let z=Qn(),F;if(n){let he=typeof n=="string"?bo(n):n;St(y==="/"||he.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${he.pathname}" was given in the \`location\` prop.`),F=he}else F=z;let U=F.pathname||"/",Z=U;if(y!=="/"){let he=y.replace(/^\//,"").split("/");Z="/"+U.replace(/^\//,"").split("/").slice(he.length).join("/")}let X=Vy(r,{pathname:Z});zn(_||X!=null,`No routes matched location "${F.pathname}${F.search}${F.hash}" `),zn(X==null||X[X.length-1].route.element!==void 0||X[X.length-1].route.Component!==void 0||X[X.length-1].route.lazy!==void 0,`Matched leaf route at location "${F.pathname}${F.search}${F.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ye=fC(X&&X.map(he=>Object.assign({},he,{params:Object.assign({},p,he.params),pathname:yr([y,l.encodeLocation?l.encodeLocation(he.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:he.pathname]),pathnameBase:he.pathnameBase==="/"?y:yr([y,l.encodeLocation?l.encodeLocation(he.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:he.pathnameBase])})),d,i,s,c);return n&&ye?q.createElement(Os.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...F},navigationType:"POP"}},ye):ye}function cC(){let r=yC(),n=Yw(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),i=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",r),d=q.createElement(q.Fragment,null,q.createElement("p",null," Hey developer "),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:l},"ErrorBoundary")," or"," ",q.createElement("code",{style:l},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},n),i?q.createElement("pre",{style:c},i):null,d)}var lC=q.createElement(cC,null),nv=class extends q.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,n){return n.location!==r.location||n.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:n.error,location:n.location,revalidation:r.revalidation||n.revalidation}}componentDidCatch(r,n){this.props.onError?this.props.onError(r,n):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const i=rC(r.digest);i&&(r=i)}let n=r!==void 0?q.createElement(Vn.Provider,{value:this.props.routeContext},q.createElement(Fd.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?q.createElement(uC,{error:r},n):n}};nv.contextType=Qw;var ld=new WeakMap;function uC({children:r,error:n}){let{basename:i}=q.useContext(_n);if(typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){let s=nC(n.digest);if(s){let c=ld.get(n);if(c)throw c;let l=Jy(s.location,i);if(Yy&&!ld.get(n))if(l.isExternal||s.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:s.replace}));throw ld.set(n,d),d}return q.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return r}function dC({routeContext:r,match:n,children:i}){let s=q.useContext(So);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),q.createElement(Vn.Provider,{value:r},i)}function fC(r,n=[],i=null,s=null,c=null){if(r==null){if(!i)return null;if(i.errors)r=i.matches;else if(n.length===0&&!i.initialized&&i.matches.length>0)r=i.matches;else return null}let l=r,d=i?.errors;if(d!=null){let y=l.findIndex(_=>_.route.id&&d?.[_.route.id]!==void 0);St(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let h=!1,p=-1;if(i)for(let y=0;y<l.length;y++){let _=l[y];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(p=y),_.route.id){let{loaderData:z,errors:F}=i,U=_.route.loader&&!z.hasOwnProperty(_.route.id)&&(!F||F[_.route.id]===void 0);if(_.route.lazy||U){h=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let m=i&&s?(y,_)=>{s(y,{location:i.location,params:i.matches?.[0]?.params??{},unstable_pattern:Jw(i.matches),errorInfo:_})}:void 0;return l.reduceRight((y,_,z)=>{let F,U=!1,Z=null,X=null;i&&(F=d&&_.route.id?d[_.route.id]:void 0,Z=_.route.errorElement||lC,h&&(p<0&&z===0?(rv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),U=!0,X=null):p===z&&(U=!0,X=_.route.hydrateFallbackElement||null)));let ye=n.concat(l.slice(0,z+1)),he=()=>{let ue;return F?ue=Z:U?ue=X:_.route.Component?ue=q.createElement(_.route.Component,null):_.route.element?ue=_.route.element:ue=y,q.createElement(dC,{match:_,routeContext:{outlet:y,matches:ye,isDataRoute:i!=null},children:ue})};return i&&(_.route.ErrorBoundary||_.route.errorElement||z===0)?q.createElement(nv,{location:i.location,revalidation:i.revalidation,component:Z,error:F,children:he(),routeContext:{outlet:null,matches:ye,isDataRoute:!0},onError:m}):he()},null)}function Xd(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hC(r){let n=q.useContext(So);return St(n,Xd(r)),n}function pC(r){let n=q.useContext(Rc);return St(n,Xd(r)),n}function mC(r){let n=q.useContext(Vn);return St(n,Xd(r)),n}function Yd(r){let n=mC(r),i=n.matches[n.matches.length-1];return St(i.route.id,`${r} can only be used on routes that contain a unique "id"`),i.route.id}function gC(){return Yd("useRouteId")}function yC(){let r=q.useContext(Fd),n=pC("useRouteError"),i=Yd("useRouteError");return r!==void 0?r:n.errors?.[i]}function vC(){let{router:r}=hC("useNavigate"),n=Yd("useNavigate"),i=q.useRef(!1);return ev(()=>{i.current=!0}),q.useCallback(async(c,l={})=>{zn(i.current,Zy),i.current&&(typeof c=="number"?await r.navigate(c):await r.navigate(c,{fromRouteId:n,...l}))},[r,n])}var Lg={};function rv(r,n,i){!n&&!Lg[r]&&(Lg[r]=!0,zn(!1,i))}q.memo(bC);function bC({routes:r,future:n,state:i,onError:s}){return tv(r,void 0,i,s,n)}function gr({to:r,replace:n,state:i,relative:s}){St(To(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=q.useContext(_n);zn(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=q.useContext(Vn),{pathname:d}=Qn(),h=wo(),p=Gd(r,Vd(l),d,s==="path"),m=JSON.stringify(p);return q.useEffect(()=>{h(JSON.parse(m),{replace:n,state:i,relative:s})},[h,m,s,n,i]),null}function In(r){St(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function SC({basename:r="/",children:n=null,location:i,navigationType:s="POP",navigator:c,static:l=!1,unstable_useTransitions:d}){St(!To(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=r.replace(/^\/*/,"/"),p=q.useMemo(()=>({basename:h,navigator:c,static:l,unstable_useTransitions:d,future:{}}),[h,c,l,d]);typeof i=="string"&&(i=bo(i));let{pathname:m="/",search:y="",hash:_="",state:z=null,key:F="default"}=i,U=q.useMemo(()=>{let Z=vr(m,h);return Z==null?null:{location:{pathname:Z,search:y,hash:_,state:z,key:F},navigationType:s}},[h,m,y,_,z,F,s]);return zn(U!=null,`<Router basename="${h}"> is not able to match the URL "${m}${y}${_}" because it does not start with the basename, so the <Router> won't render anything.`),U==null?null:q.createElement(_n.Provider,{value:p},q.createElement(Os.Provider,{children:n,value:U}))}function TC({children:r,location:n}){return aC(kd(r),n)}function kd(r,n=[]){let i=[];return q.Children.forEach(r,(s,c)=>{if(!q.isValidElement(s))return;let l=[...n,c];if(s.type===q.Fragment){i.push.apply(i,kd(s.props.children,l));return}St(s.type===In,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),St(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=kd(s.props.children,l)),i.push(d)}),i}var cc="get",lc="application/x-www-form-urlencoded";function Ec(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function wC(r){return Ec(r)&&r.tagName.toLowerCase()==="button"}function CC(r){return Ec(r)&&r.tagName.toLowerCase()==="form"}function RC(r){return Ec(r)&&r.tagName.toLowerCase()==="input"}function EC(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function _C(r,n){return r.button===0&&(!n||n==="_self")&&!EC(r)}var Za=null;function xC(){if(Za===null)try{new FormData(document.createElement("form"),0),Za=!1}catch{Za=!0}return Za}var AC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ud(r){return r!=null&&!AC.has(r)?(zn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${lc}"`),null):r}function kC(r,n){let i,s,c,l,d;if(CC(r)){let h=r.getAttribute("action");s=h?vr(h,n):null,i=r.getAttribute("method")||cc,c=ud(r.getAttribute("enctype"))||lc,l=new FormData(r)}else if(wC(r)||RC(r)&&(r.type==="submit"||r.type==="image")){let h=r.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||h.getAttribute("action");if(s=p?vr(p,n):null,i=r.getAttribute("formmethod")||h.getAttribute("method")||cc,c=ud(r.getAttribute("formenctype"))||ud(h.getAttribute("enctype"))||lc,l=new FormData(h,r),!xC()){let{name:m,type:y,value:_}=r;if(y==="image"){let z=m?`${m}.`:"";l.append(`${z}x`,"0"),l.append(`${z}y`,"0")}else m&&l.append(m,_)}}else{if(Ec(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=cc,s=null,c=lc,d=r}return l&&c==="text/plain"&&(d=l,l=void 0),{action:s,method:i.toLowerCase(),encType:c,formData:l,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Jd(r,n){if(r===!1||r===null||typeof r>"u")throw new Error(n)}function NC(r,n,i){let s=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return s.pathname==="/"?s.pathname=`_root.${i}`:n&&vr(s.pathname,n)==="/"?s.pathname=`${n.replace(/\/$/,"")}/_root.${i}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${i}`,s}async function OC(r,n){if(r.id in n)return n[r.id];try{let i=await import(r.module);return n[r.id]=i,i}catch(i){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function MC(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function UC(r,n,i){let s=await Promise.all(r.map(async c=>{let l=n.routes[c.route.id];if(l){let d=await OC(l,i);return d.links?d.links():[]}return[]}));return IC(s.flat(1).filter(MC).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function Bg(r,n,i,s,c,l){let d=(p,m)=>i[m]?p.route.id!==i[m].route.id:!0,h=(p,m)=>i[m].pathname!==p.pathname||i[m].route.path?.endsWith("*")&&i[m].params["*"]!==p.params["*"];return l==="assets"?n.filter((p,m)=>d(p,m)||h(p,m)):l==="data"?n.filter((p,m)=>{let y=s.routes[p.route.id];if(!y||!y.hasLoader)return!1;if(d(p,m)||h(p,m))return!0;if(p.route.shouldRevalidate){let _=p.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function DC(r,n,{includeHydrateFallback:i}={}){return jC(r.map(s=>{let c=n.routes[s.route.id];if(!c)return[];let l=[c.module];return c.clientActionModule&&(l=l.concat(c.clientActionModule)),c.clientLoaderModule&&(l=l.concat(c.clientLoaderModule)),i&&c.hydrateFallbackModule&&(l=l.concat(c.hydrateFallbackModule)),c.imports&&(l=l.concat(c.imports)),l}).flat(1))}function jC(r){return[...new Set(r)]}function PC(r){let n={},i=Object.keys(r).sort();for(let s of i)n[s]=r[s];return n}function IC(r,n){let i=new Set;return new Set(n),r.reduce((s,c)=>{let l=JSON.stringify(PC(c));return i.has(l)||(i.add(l),s.push({key:l,link:c})),s},[])}function iv(){let r=q.useContext(So);return Jd(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function zC(){let r=q.useContext(Rc);return Jd(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Kd=q.createContext(void 0);Kd.displayName="FrameworkContext";function ov(){let r=q.useContext(Kd);return Jd(r,"You must render this element inside a <HydratedRouter> element"),r}function LC(r,n){let i=q.useContext(Kd),[s,c]=q.useState(!1),[l,d]=q.useState(!1),{onFocus:h,onBlur:p,onMouseEnter:m,onMouseLeave:y,onTouchStart:_}=n,z=q.useRef(null);q.useEffect(()=>{if(r==="render"&&d(!0),r==="viewport"){let Z=ye=>{ye.forEach(he=>{d(he.isIntersecting)})},X=new IntersectionObserver(Z,{threshold:.5});return z.current&&X.observe(z.current),()=>{X.disconnect()}}},[r]),q.useEffect(()=>{if(s){let Z=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(Z)}}},[s]);let F=()=>{c(!0)},U=()=>{c(!1),d(!1)};return i?r!=="intent"?[l,z,{}]:[l,z,{onFocus:Ss(h,F),onBlur:Ss(p,U),onMouseEnter:Ss(m,F),onMouseLeave:Ss(y,U),onTouchStart:Ss(_,F)}]:[!1,z,{}]}function Ss(r,n){return i=>{r&&r(i),i.defaultPrevented||n(i)}}function BC({page:r,...n}){let{router:i}=iv(),s=q.useMemo(()=>Vy(i.routes,r,i.basename),[i.routes,r,i.basename]);return s?q.createElement(qC,{page:r,matches:s,...n}):null}function HC(r){let{manifest:n,routeModules:i}=ov(),[s,c]=q.useState([]);return q.useEffect(()=>{let l=!1;return UC(r,n,i).then(d=>{l||c(d)}),()=>{l=!0}},[r,n,i]),s}function qC({page:r,matches:n,...i}){let s=Qn(),{manifest:c,routeModules:l}=ov(),{basename:d}=iv(),{loaderData:h,matches:p}=zC(),m=q.useMemo(()=>Bg(r,n,p,c,s,"data"),[r,n,p,c,s]),y=q.useMemo(()=>Bg(r,n,p,c,s,"assets"),[r,n,p,c,s]),_=q.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let U=new Set,Z=!1;if(n.forEach(ye=>{let he=c.routes[ye.route.id];!he||!he.hasLoader||(!m.some(ue=>ue.route.id===ye.route.id)&&ye.route.id in h&&l[ye.route.id]?.shouldRevalidate||he.hasClientLoader?Z=!0:U.add(ye.route.id))}),U.size===0)return[];let X=NC(r,d,"data");return Z&&U.size>0&&X.searchParams.set("_routes",n.filter(ye=>U.has(ye.route.id)).map(ye=>ye.route.id).join(",")),[X.pathname+X.search]},[d,h,s,c,m,n,r,l]),z=q.useMemo(()=>DC(y,c),[y,c]),F=HC(y);return q.createElement(q.Fragment,null,_.map(U=>q.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...i})),z.map(U=>q.createElement("link",{key:U,rel:"modulepreload",href:U,...i})),F.map(({key:U,link:Z})=>q.createElement("link",{key:U,nonce:i.nonce,...Z})))}function $C(...r){return n=>{r.forEach(i=>{typeof i=="function"?i(n):i!=null&&(i.current=n)})}}var VC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{VC&&(window.__reactRouterVersion="7.11.0")}catch{}function GC({basename:r,children:n,unstable_useTransitions:i,window:s}){let c=q.useRef();c.current==null&&(c.current=Rw({window:s,v5Compat:!0}));let l=c.current,[d,h]=q.useState({action:l.action,location:l.location}),p=q.useCallback(m=>{i===!1?h(m):q.startTransition(()=>h(m))},[i]);return q.useLayoutEffect(()=>l.listen(p),[l,p]),q.createElement(SC,{basename:r,children:n,location:d.location,navigationType:d.action,navigator:l,unstable_useTransitions:i})}var sv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qn=q.forwardRef(function({onClick:n,discover:i="render",prefetch:s="none",relative:c,reloadDocument:l,replace:d,state:h,target:p,to:m,preventScrollReset:y,viewTransition:_,unstable_defaultShouldRevalidate:z,...F},U){let{basename:Z,unstable_useTransitions:X}=q.useContext(_n),ye=typeof m=="string"&&sv.test(m),he=Jy(m,Z);m=he.to;let ue=iC(m,{relative:c}),[ne,ae,ce]=LC(s,F),ie=JC(m,{replace:d,state:h,target:p,preventScrollReset:y,relative:c,viewTransition:_,unstable_defaultShouldRevalidate:z,unstable_useTransitions:X});function Re(Pe){n&&n(Pe),Pe.defaultPrevented||ie(Pe)}let xe=q.createElement("a",{...F,...ce,href:he.absoluteURL||ue,onClick:he.isExternal||l?n:Re,ref:$C(U,ae),target:p,"data-discover":!ye&&i==="render"?"true":void 0});return ne&&!ye?q.createElement(q.Fragment,null,xe,q.createElement(BC,{page:ue})):xe});qn.displayName="Link";var FC=q.forwardRef(function({"aria-current":n="page",caseSensitive:i=!1,className:s="",end:c=!1,style:l,to:d,viewTransition:h,children:p,...m},y){let _=Ms(d,{relative:m.relative}),z=Qn(),F=q.useContext(Rc),{navigator:U,basename:Z}=q.useContext(_n),X=F!=null&&e1(_)&&h===!0,ye=U.encodeLocation?U.encodeLocation(_).pathname:_.pathname,he=z.pathname,ue=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;i||(he=he.toLowerCase(),ue=ue?ue.toLowerCase():null,ye=ye.toLowerCase()),ue&&Z&&(ue=vr(ue,Z)||ue);const ne=ye!=="/"&&ye.endsWith("/")?ye.length-1:ye.length;let ae=he===ye||!c&&he.startsWith(ye)&&he.charAt(ne)==="/",ce=ue!=null&&(ue===ye||!c&&ue.startsWith(ye)&&ue.charAt(ye.length)==="/"),ie={isActive:ae,isPending:ce,isTransitioning:X},Re=ae?n:void 0,xe;typeof s=="function"?xe=s(ie):xe=[s,ae?"active":null,ce?"pending":null,X?"transitioning":null].filter(Boolean).join(" ");let Pe=typeof l=="function"?l(ie):l;return q.createElement(qn,{...m,"aria-current":Re,className:xe,ref:y,style:Pe,to:d,viewTransition:h},typeof p=="function"?p(ie):p)});FC.displayName="NavLink";var XC=q.forwardRef(({discover:r="render",fetcherKey:n,navigate:i,reloadDocument:s,replace:c,state:l,method:d=cc,action:h,onSubmit:p,relative:m,preventScrollReset:y,viewTransition:_,unstable_defaultShouldRevalidate:z,...F},U)=>{let{unstable_useTransitions:Z}=q.useContext(_n),X=WC(),ye=ZC(h,{relative:m}),he=d.toLowerCase()==="get"?"get":"post",ue=typeof h=="string"&&sv.test(h),ne=ae=>{if(p&&p(ae),ae.defaultPrevented)return;ae.preventDefault();let ce=ae.nativeEvent.submitter,ie=ce?.getAttribute("formmethod")||d,Re=()=>X(ce||ae.currentTarget,{fetcherKey:n,method:ie,navigate:i,replace:c,state:l,relative:m,preventScrollReset:y,viewTransition:_,unstable_defaultShouldRevalidate:z});Z&&i!==!1?q.startTransition(()=>Re()):Re()};return q.createElement("form",{ref:U,method:he,action:ye,onSubmit:s?p:ne,...F,"data-discover":!ue&&r==="render"?"true":void 0})});XC.displayName="Form";function YC(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function av(r){let n=q.useContext(So);return St(n,YC(r)),n}function JC(r,{target:n,replace:i,state:s,preventScrollReset:c,relative:l,viewTransition:d,unstable_defaultShouldRevalidate:h,unstable_useTransitions:p}={}){let m=wo(),y=Qn(),_=Ms(r,{relative:l});return q.useCallback(z=>{if(_C(z,n)){z.preventDefault();let F=i!==void 0?i:xs(y)===xs(_),U=()=>m(r,{replace:F,state:s,preventScrollReset:c,relative:l,viewTransition:d,unstable_defaultShouldRevalidate:h});p?q.startTransition(()=>U()):U()}},[y,m,_,i,s,n,r,c,l,d,h,p])}var KC=0,QC=()=>`__${String(++KC)}__`;function WC(){let{router:r}=av("useSubmit"),{basename:n}=q.useContext(_n),i=gC(),s=r.fetch,c=r.navigate;return q.useCallback(async(l,d={})=>{let{action:h,method:p,encType:m,formData:y,body:_}=kC(l,n);if(d.navigate===!1){let z=d.fetcherKey||QC();await s(z,i,d.action||h,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:y,body:_,formMethod:d.method||p,formEncType:d.encType||m,flushSync:d.flushSync})}else await c(d.action||h,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:y,body:_,formMethod:d.method||p,formEncType:d.encType||m,replace:d.replace,state:d.state,fromRouteId:i,flushSync:d.flushSync,viewTransition:d.viewTransition})},[s,c,n,i])}function ZC(r,{relative:n}={}){let{basename:i}=q.useContext(_n),s=q.useContext(Vn);St(s,"useFormAction must be used inside a RouteContext");let[c]=s.matches.slice(-1),l={...Ms(r||".",{relative:n})},d=Qn();if(r==null){l.search=d.search;let h=new URLSearchParams(l.search),p=h.getAll("index");if(p.some(y=>y==="")){h.delete("index"),p.filter(_=>_).forEach(_=>h.append("index",_));let y=h.toString();l.search=y?`?${y}`:""}}return(!r||r===".")&&c.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(l.pathname=l.pathname==="/"?i:yr([i,l.pathname])),xs(l)}function e1(r,{relative:n}={}){let i=q.useContext(Qy);St(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=av("useViewTransitionState"),c=Ms(r,{relative:n});if(!i.isTransitioning)return!1;let l=vr(i.currentLocation.pathname,s)||i.currentLocation.pathname,d=vr(i.nextLocation.pathname,s)||i.nextLocation.pathname;return pc(c.pathname,d)!=null||pc(c.pathname,l)!=null}const t1=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n1=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,i,s)=>s?s.toUpperCase():i.toLowerCase()),Hg=r=>{const n=n1(r);return n.charAt(0).toUpperCase()+n.slice(1)},cv=(...r)=>r.filter((n,i,s)=>!!n&&n.trim()!==""&&s.indexOf(n)===i).join(" ").trim(),r1=r=>{for(const n in r)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};var i1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const o1=q.forwardRef(({color:r="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:c="",children:l,iconNode:d,...h},p)=>q.createElement("svg",{ref:p,...i1,width:n,height:n,stroke:r,strokeWidth:s?Number(i)*24/Number(n):i,className:cv("lucide",c),...!l&&!r1(h)&&{"aria-hidden":"true"},...h},[...d.map(([m,y])=>q.createElement(m,y)),...Array.isArray(l)?l:[l]]));const vt=(r,n)=>{const i=q.forwardRef(({className:s,...c},l)=>q.createElement(o1,{ref:l,iconNode:n,className:cv(`lucide-${t1(Hg(r))}`,`lucide-${r}`,s),...c}));return i.displayName=Hg(r),i};const s1=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],lv=vt("arrow-left",s1);const a1=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],uv=vt("chevron-down",a1);const c1=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],dv=vt("chevron-right",c1);const l1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],u1=vt("circle-alert",l1);const d1=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],f1=vt("circle-check-big",d1);const h1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],mc=vt("circle-question-mark",h1);const p1=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],m1=vt("clock",p1);const g1=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],fv=vt("eye-off",g1);const y1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hv=vt("eye",y1);const v1=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],pv=vt("funnel",v1);const b1=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],S1=vt("house",b1);const T1=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],w1=vt("layout-dashboard",T1);const C1=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],R1=vt("log-out",C1);const E1=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],qg=vt("mail",E1);const _1=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],x1=vt("menu",_1);const A1=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],gc=vt("message-circle",A1);const k1=[["path",{d:"M5 12h14",key:"1ays0h"}]],mv=vt("minus",k1);const N1=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],O1=vt("phone",N1);const M1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],gv=vt("plus",M1);const U1=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Qd=vt("send",U1);const D1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],j1=vt("shield-check",D1);const P1=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],I1=vt("star",P1);const z1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],L1=vt("user",z1);const B1=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Wd=vt("users",B1);const H1=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],yv=vt("x",H1),vv=q.createContext(),q1=()=>{const r=q.useContext(vv);if(!r)throw new Error("useNotifications must be used within NotificationProvider");return r},$1=({children:r})=>{const[n,i]=q.useState(0),s=()=>{i(0)};return g.jsx(vv.Provider,{value:{unreadCount:n,clearUnreadCount:s},children:r})};function bv(r,n){return function(){return r.apply(n,arguments)}}const{toString:V1}=Object.prototype,{getPrototypeOf:Zd}=Object,{iterator:_c,toStringTag:Sv}=Symbol,xc=(r=>n=>{const i=V1.call(n);return r[i]||(r[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Gn=r=>(r=r.toLowerCase(),n=>xc(n)===r),Ac=r=>n=>typeof n===r,{isArray:Co}=Array,ho=Ac("undefined");function Us(r){return r!==null&&!ho(r)&&r.constructor!==null&&!ho(r.constructor)&&gn(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const Tv=Gn("ArrayBuffer");function G1(r){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(r):n=r&&r.buffer&&Tv(r.buffer),n}const F1=Ac("string"),gn=Ac("function"),wv=Ac("number"),Ds=r=>r!==null&&typeof r=="object",X1=r=>r===!0||r===!1,uc=r=>{if(xc(r)!=="object")return!1;const n=Zd(r);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Sv in r)&&!(_c in r)},Y1=r=>{if(!Ds(r)||Us(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},J1=Gn("Date"),K1=Gn("File"),Q1=Gn("Blob"),W1=Gn("FileList"),Z1=r=>Ds(r)&&gn(r.pipe),eR=r=>{let n;return r&&(typeof FormData=="function"&&r instanceof FormData||gn(r.append)&&((n=xc(r))==="formdata"||n==="object"&&gn(r.toString)&&r.toString()==="[object FormData]"))},tR=Gn("URLSearchParams"),[nR,rR,iR,oR]=["ReadableStream","Request","Response","Headers"].map(Gn),sR=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function js(r,n,{allOwnKeys:i=!1}={}){if(r===null||typeof r>"u")return;let s,c;if(typeof r!="object"&&(r=[r]),Co(r))for(s=0,c=r.length;s<c;s++)n.call(null,r[s],s,r);else{if(Us(r))return;const l=i?Object.getOwnPropertyNames(r):Object.keys(r),d=l.length;let h;for(s=0;s<d;s++)h=l[s],n.call(null,r[h],h,r)}}function Cv(r,n){if(Us(r))return null;n=n.toLowerCase();const i=Object.keys(r);let s=i.length,c;for(;s-- >0;)if(c=i[s],n===c.toLowerCase())return c;return null}const gi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Rv=r=>!ho(r)&&r!==gi;function Nd(){const{caseless:r,skipUndefined:n}=Rv(this)&&this||{},i={},s=(c,l)=>{const d=r&&Cv(i,l)||l;uc(i[d])&&uc(c)?i[d]=Nd(i[d],c):uc(c)?i[d]=Nd({},c):Co(c)?i[d]=c.slice():(!n||!ho(c))&&(i[d]=c)};for(let c=0,l=arguments.length;c<l;c++)arguments[c]&&js(arguments[c],s);return i}const aR=(r,n,i,{allOwnKeys:s}={})=>(js(n,(c,l)=>{i&&gn(c)?r[l]=bv(c,i):r[l]=c},{allOwnKeys:s}),r),cR=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),lR=(r,n,i,s)=>{r.prototype=Object.create(n.prototype,s),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:n.prototype}),i&&Object.assign(r.prototype,i)},uR=(r,n,i,s)=>{let c,l,d;const h={};if(n=n||{},r==null)return n;do{for(c=Object.getOwnPropertyNames(r),l=c.length;l-- >0;)d=c[l],(!s||s(d,r,n))&&!h[d]&&(n[d]=r[d],h[d]=!0);r=i!==!1&&Zd(r)}while(r&&(!i||i(r,n))&&r!==Object.prototype);return n},dR=(r,n,i)=>{r=String(r),(i===void 0||i>r.length)&&(i=r.length),i-=n.length;const s=r.indexOf(n,i);return s!==-1&&s===i},fR=r=>{if(!r)return null;if(Co(r))return r;let n=r.length;if(!wv(n))return null;const i=new Array(n);for(;n-- >0;)i[n]=r[n];return i},hR=(r=>n=>r&&n instanceof r)(typeof Uint8Array<"u"&&Zd(Uint8Array)),pR=(r,n)=>{const s=(r&&r[_c]).call(r);let c;for(;(c=s.next())&&!c.done;){const l=c.value;n.call(r,l[0],l[1])}},mR=(r,n)=>{let i;const s=[];for(;(i=r.exec(n))!==null;)s.push(i);return s},gR=Gn("HTMLFormElement"),yR=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,s,c){return s.toUpperCase()+c}),$g=(({hasOwnProperty:r})=>(n,i)=>r.call(n,i))(Object.prototype),vR=Gn("RegExp"),Ev=(r,n)=>{const i=Object.getOwnPropertyDescriptors(r),s={};js(i,(c,l)=>{let d;(d=n(c,l,r))!==!1&&(s[l]=d||c)}),Object.defineProperties(r,s)},bR=r=>{Ev(r,(n,i)=>{if(gn(r)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const s=r[i];if(gn(s)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},SR=(r,n)=>{const i={},s=c=>{c.forEach(l=>{i[l]=!0})};return Co(r)?s(r):s(String(r).split(n)),i},TR=()=>{},wR=(r,n)=>r!=null&&Number.isFinite(r=+r)?r:n;function CR(r){return!!(r&&gn(r.append)&&r[Sv]==="FormData"&&r[_c])}const RR=r=>{const n=new Array(10),i=(s,c)=>{if(Ds(s)){if(n.indexOf(s)>=0)return;if(Us(s))return s;if(!("toJSON"in s)){n[c]=s;const l=Co(s)?[]:{};return js(s,(d,h)=>{const p=i(d,c+1);!ho(p)&&(l[h]=p)}),n[c]=void 0,l}}return s};return i(r,0)},ER=Gn("AsyncFunction"),_R=r=>r&&(Ds(r)||gn(r))&&gn(r.then)&&gn(r.catch),_v=((r,n)=>r?setImmediate:n?((i,s)=>(gi.addEventListener("message",({source:c,data:l})=>{c===gi&&l===i&&s.length&&s.shift()()},!1),c=>{s.push(c),gi.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",gn(gi.postMessage)),xR=typeof queueMicrotask<"u"?queueMicrotask.bind(gi):typeof process<"u"&&process.nextTick||_v,AR=r=>r!=null&&gn(r[_c]),me={isArray:Co,isArrayBuffer:Tv,isBuffer:Us,isFormData:eR,isArrayBufferView:G1,isString:F1,isNumber:wv,isBoolean:X1,isObject:Ds,isPlainObject:uc,isEmptyObject:Y1,isReadableStream:nR,isRequest:rR,isResponse:iR,isHeaders:oR,isUndefined:ho,isDate:J1,isFile:K1,isBlob:Q1,isRegExp:vR,isFunction:gn,isStream:Z1,isURLSearchParams:tR,isTypedArray:hR,isFileList:W1,forEach:js,merge:Nd,extend:aR,trim:sR,stripBOM:cR,inherits:lR,toFlatObject:uR,kindOf:xc,kindOfTest:Gn,endsWith:dR,toArray:fR,forEachEntry:pR,matchAll:mR,isHTMLForm:gR,hasOwnProperty:$g,hasOwnProp:$g,reduceDescriptors:Ev,freezeMethods:bR,toObjectSet:SR,toCamelCase:yR,noop:TR,toFiniteNumber:wR,findKey:Cv,global:gi,isContextDefined:Rv,isSpecCompliantForm:CR,toJSONObject:RR,isAsyncFn:ER,isThenable:_R,setImmediate:_v,asap:xR,isIterable:AR};function Xe(r,n,i,s,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",n&&(this.code=n),i&&(this.config=i),s&&(this.request=s),c&&(this.response=c,this.status=c.status?c.status:null)}me.inherits(Xe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:me.toJSONObject(this.config),code:this.code,status:this.status}}});const xv=Xe.prototype,Av={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{Av[r]={value:r}});Object.defineProperties(Xe,Av);Object.defineProperty(xv,"isAxiosError",{value:!0});Xe.from=(r,n,i,s,c,l)=>{const d=Object.create(xv);me.toFlatObject(r,d,function(y){return y!==Error.prototype},m=>m!=="isAxiosError");const h=r&&r.message?r.message:"Error",p=n==null&&r?r.code:n;return Xe.call(d,h,p,i,s,c),r&&d.cause==null&&Object.defineProperty(d,"cause",{value:r,configurable:!0}),d.name=r&&r.name||"Error",l&&Object.assign(d,l),d};const kR=null;function Od(r){return me.isPlainObject(r)||me.isArray(r)}function kv(r){return me.endsWith(r,"[]")?r.slice(0,-2):r}function Vg(r,n,i){return r?r.concat(n).map(function(c,l){return c=kv(c),!i&&l?"["+c+"]":c}).join(i?".":""):n}function NR(r){return me.isArray(r)&&!r.some(Od)}const OR=me.toFlatObject(me,{},null,function(n){return/^is[A-Z]/.test(n)});function kc(r,n,i){if(!me.isObject(r))throw new TypeError("target must be an object");n=n||new FormData,i=me.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(Z,X){return!me.isUndefined(X[Z])});const s=i.metaTokens,c=i.visitor||y,l=i.dots,d=i.indexes,p=(i.Blob||typeof Blob<"u"&&Blob)&&me.isSpecCompliantForm(n);if(!me.isFunction(c))throw new TypeError("visitor must be a function");function m(U){if(U===null)return"";if(me.isDate(U))return U.toISOString();if(me.isBoolean(U))return U.toString();if(!p&&me.isBlob(U))throw new Xe("Blob is not supported. Use a Buffer instead.");return me.isArrayBuffer(U)||me.isTypedArray(U)?p&&typeof Blob=="function"?new Blob([U]):Buffer.from(U):U}function y(U,Z,X){let ye=U;if(U&&!X&&typeof U=="object"){if(me.endsWith(Z,"{}"))Z=s?Z:Z.slice(0,-2),U=JSON.stringify(U);else if(me.isArray(U)&&NR(U)||(me.isFileList(U)||me.endsWith(Z,"[]"))&&(ye=me.toArray(U)))return Z=kv(Z),ye.forEach(function(ue,ne){!(me.isUndefined(ue)||ue===null)&&n.append(d===!0?Vg([Z],ne,l):d===null?Z:Z+"[]",m(ue))}),!1}return Od(U)?!0:(n.append(Vg(X,Z,l),m(U)),!1)}const _=[],z=Object.assign(OR,{defaultVisitor:y,convertValue:m,isVisitable:Od});function F(U,Z){if(!me.isUndefined(U)){if(_.indexOf(U)!==-1)throw Error("Circular reference detected in "+Z.join("."));_.push(U),me.forEach(U,function(ye,he){(!(me.isUndefined(ye)||ye===null)&&c.call(n,ye,me.isString(he)?he.trim():he,Z,z))===!0&&F(ye,Z?Z.concat(he):[he])}),_.pop()}}if(!me.isObject(r))throw new TypeError("data must be an object");return F(r),n}function Gg(r){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(s){return n[s]})}function ef(r,n){this._pairs=[],r&&kc(r,this,n)}const Nv=ef.prototype;Nv.append=function(n,i){this._pairs.push([n,i])};Nv.toString=function(n){const i=n?function(s){return n.call(this,s,Gg)}:Gg;return this._pairs.map(function(c){return i(c[0])+"="+i(c[1])},"").join("&")};function MR(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ov(r,n,i){if(!n)return r;const s=i&&i.encode||MR;me.isFunction(i)&&(i={serialize:i});const c=i&&i.serialize;let l;if(c?l=c(n,i):l=me.isURLSearchParams(n)?n.toString():new ef(n,i).toString(s),l){const d=r.indexOf("#");d!==-1&&(r=r.slice(0,d)),r+=(r.indexOf("?")===-1?"?":"&")+l}return r}class Fg{constructor(){this.handlers=[]}use(n,i,s){return this.handlers.push({fulfilled:n,rejected:i,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){me.forEach(this.handlers,function(s){s!==null&&n(s)})}}const Mv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},UR=typeof URLSearchParams<"u"?URLSearchParams:ef,DR=typeof FormData<"u"?FormData:null,jR=typeof Blob<"u"?Blob:null,PR={isBrowser:!0,classes:{URLSearchParams:UR,FormData:DR,Blob:jR},protocols:["http","https","file","blob","url","data"]},tf=typeof window<"u"&&typeof document<"u",Md=typeof navigator=="object"&&navigator||void 0,IR=tf&&(!Md||["ReactNative","NativeScript","NS"].indexOf(Md.product)<0),zR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",LR=tf&&window.location.href||"http://localhost",BR=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:tf,hasStandardBrowserEnv:IR,hasStandardBrowserWebWorkerEnv:zR,navigator:Md,origin:LR},Symbol.toStringTag,{value:"Module"})),nn={...BR,...PR};function HR(r,n){return kc(r,new nn.classes.URLSearchParams,{visitor:function(i,s,c,l){return nn.isNode&&me.isBuffer(i)?(this.append(s,i.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...n})}function qR(r){return me.matchAll(/\w+|\[(\w*)]/g,r).map(n=>n[0]==="[]"?"":n[1]||n[0])}function $R(r){const n={},i=Object.keys(r);let s;const c=i.length;let l;for(s=0;s<c;s++)l=i[s],n[l]=r[l];return n}function Uv(r){function n(i,s,c,l){let d=i[l++];if(d==="__proto__")return!0;const h=Number.isFinite(+d),p=l>=i.length;return d=!d&&me.isArray(c)?c.length:d,p?(me.hasOwnProp(c,d)?c[d]=[c[d],s]:c[d]=s,!h):((!c[d]||!me.isObject(c[d]))&&(c[d]=[]),n(i,s,c[d],l)&&me.isArray(c[d])&&(c[d]=$R(c[d])),!h)}if(me.isFormData(r)&&me.isFunction(r.entries)){const i={};return me.forEachEntry(r,(s,c)=>{n(qR(s),c,i,0)}),i}return null}function VR(r,n,i){if(me.isString(r))try{return(n||JSON.parse)(r),me.trim(r)}catch(s){if(s.name!=="SyntaxError")throw s}return(i||JSON.stringify)(r)}const Ps={transitional:Mv,adapter:["xhr","http","fetch"],transformRequest:[function(n,i){const s=i.getContentType()||"",c=s.indexOf("application/json")>-1,l=me.isObject(n);if(l&&me.isHTMLForm(n)&&(n=new FormData(n)),me.isFormData(n))return c?JSON.stringify(Uv(n)):n;if(me.isArrayBuffer(n)||me.isBuffer(n)||me.isStream(n)||me.isFile(n)||me.isBlob(n)||me.isReadableStream(n))return n;if(me.isArrayBufferView(n))return n.buffer;if(me.isURLSearchParams(n))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let h;if(l){if(s.indexOf("application/x-www-form-urlencoded")>-1)return HR(n,this.formSerializer).toString();if((h=me.isFileList(n))||s.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return kc(h?{"files[]":n}:n,p&&new p,this.formSerializer)}}return l||c?(i.setContentType("application/json",!1),VR(n)):n}],transformResponse:[function(n){const i=this.transitional||Ps.transitional,s=i&&i.forcedJSONParsing,c=this.responseType==="json";if(me.isResponse(n)||me.isReadableStream(n))return n;if(n&&me.isString(n)&&(s&&!this.responseType||c)){const d=!(i&&i.silentJSONParsing)&&c;try{return JSON.parse(n,this.parseReviver)}catch(h){if(d)throw h.name==="SyntaxError"?Xe.from(h,Xe.ERR_BAD_RESPONSE,this,null,this.response):h}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:nn.classes.FormData,Blob:nn.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};me.forEach(["delete","get","head","post","put","patch"],r=>{Ps.headers[r]={}});const GR=me.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),FR=r=>{const n={};let i,s,c;return r&&r.split(`
`).forEach(function(d){c=d.indexOf(":"),i=d.substring(0,c).trim().toLowerCase(),s=d.substring(c+1).trim(),!(!i||n[i]&&GR[i])&&(i==="set-cookie"?n[i]?n[i].push(s):n[i]=[s]:n[i]=n[i]?n[i]+", "+s:s)}),n},Xg=Symbol("internals");function Ts(r){return r&&String(r).trim().toLowerCase()}function dc(r){return r===!1||r==null?r:me.isArray(r)?r.map(dc):String(r)}function XR(r){const n=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=i.exec(r);)n[s[1]]=s[2];return n}const YR=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function dd(r,n,i,s,c){if(me.isFunction(s))return s.call(this,n,i);if(c&&(n=i),!!me.isString(n)){if(me.isString(s))return n.indexOf(s)!==-1;if(me.isRegExp(s))return s.test(n)}}function JR(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,i,s)=>i.toUpperCase()+s)}function KR(r,n){const i=me.toCamelCase(" "+n);["get","set","has"].forEach(s=>{Object.defineProperty(r,s+i,{value:function(c,l,d){return this[s].call(this,n,c,l,d)},configurable:!0})})}let yn=class{constructor(n){n&&this.set(n)}set(n,i,s){const c=this;function l(h,p,m){const y=Ts(p);if(!y)throw new Error("header name must be a non-empty string");const _=me.findKey(c,y);(!_||c[_]===void 0||m===!0||m===void 0&&c[_]!==!1)&&(c[_||p]=dc(h))}const d=(h,p)=>me.forEach(h,(m,y)=>l(m,y,p));if(me.isPlainObject(n)||n instanceof this.constructor)d(n,i);else if(me.isString(n)&&(n=n.trim())&&!YR(n))d(FR(n),i);else if(me.isObject(n)&&me.isIterable(n)){let h={},p,m;for(const y of n){if(!me.isArray(y))throw TypeError("Object iterator must return a key-value pair");h[m=y[0]]=(p=h[m])?me.isArray(p)?[...p,y[1]]:[p,y[1]]:y[1]}d(h,i)}else n!=null&&l(i,n,s);return this}get(n,i){if(n=Ts(n),n){const s=me.findKey(this,n);if(s){const c=this[s];if(!i)return c;if(i===!0)return XR(c);if(me.isFunction(i))return i.call(this,c,s);if(me.isRegExp(i))return i.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,i){if(n=Ts(n),n){const s=me.findKey(this,n);return!!(s&&this[s]!==void 0&&(!i||dd(this,this[s],s,i)))}return!1}delete(n,i){const s=this;let c=!1;function l(d){if(d=Ts(d),d){const h=me.findKey(s,d);h&&(!i||dd(s,s[h],h,i))&&(delete s[h],c=!0)}}return me.isArray(n)?n.forEach(l):l(n),c}clear(n){const i=Object.keys(this);let s=i.length,c=!1;for(;s--;){const l=i[s];(!n||dd(this,this[l],l,n,!0))&&(delete this[l],c=!0)}return c}normalize(n){const i=this,s={};return me.forEach(this,(c,l)=>{const d=me.findKey(s,l);if(d){i[d]=dc(c),delete i[l];return}const h=n?JR(l):String(l).trim();h!==l&&delete i[l],i[h]=dc(c),s[h]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const i=Object.create(null);return me.forEach(this,(s,c)=>{s!=null&&s!==!1&&(i[c]=n&&me.isArray(s)?s.join(", "):s)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,i])=>n+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...i){const s=new this(n);return i.forEach(c=>s.set(c)),s}static accessor(n){const s=(this[Xg]=this[Xg]={accessors:{}}).accessors,c=this.prototype;function l(d){const h=Ts(d);s[h]||(KR(c,d),s[h]=!0)}return me.isArray(n)?n.forEach(l):l(n),this}};yn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);me.reduceDescriptors(yn.prototype,({value:r},n)=>{let i=n[0].toUpperCase()+n.slice(1);return{get:()=>r,set(s){this[i]=s}}});me.freezeMethods(yn);function fd(r,n){const i=this||Ps,s=n||i,c=yn.from(s.headers);let l=s.data;return me.forEach(r,function(h){l=h.call(i,l,c.normalize(),n?n.status:void 0)}),c.normalize(),l}function Dv(r){return!!(r&&r.__CANCEL__)}function Ro(r,n,i){Xe.call(this,r??"canceled",Xe.ERR_CANCELED,n,i),this.name="CanceledError"}me.inherits(Ro,Xe,{__CANCEL__:!0});function jv(r,n,i){const s=i.config.validateStatus;!i.status||!s||s(i.status)?r(i):n(new Xe("Request failed with status code "+i.status,[Xe.ERR_BAD_REQUEST,Xe.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function QR(r){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return n&&n[1]||""}function WR(r,n){r=r||10;const i=new Array(r),s=new Array(r);let c=0,l=0,d;return n=n!==void 0?n:1e3,function(p){const m=Date.now(),y=s[l];d||(d=m),i[c]=p,s[c]=m;let _=l,z=0;for(;_!==c;)z+=i[_++],_=_%r;if(c=(c+1)%r,c===l&&(l=(l+1)%r),m-d<n)return;const F=y&&m-y;return F?Math.round(z*1e3/F):void 0}}function ZR(r,n){let i=0,s=1e3/n,c,l;const d=(m,y=Date.now())=>{i=y,c=null,l&&(clearTimeout(l),l=null),r(...m)};return[(...m)=>{const y=Date.now(),_=y-i;_>=s?d(m,y):(c=m,l||(l=setTimeout(()=>{l=null,d(c)},s-_)))},()=>c&&d(c)]}const yc=(r,n,i=3)=>{let s=0;const c=WR(50,250);return ZR(l=>{const d=l.loaded,h=l.lengthComputable?l.total:void 0,p=d-s,m=c(p),y=d<=h;s=d;const _={loaded:d,total:h,progress:h?d/h:void 0,bytes:p,rate:m||void 0,estimated:m&&h&&y?(h-d)/m:void 0,event:l,lengthComputable:h!=null,[n?"download":"upload"]:!0};r(_)},i)},Yg=(r,n)=>{const i=r!=null;return[s=>n[0]({lengthComputable:i,total:r,loaded:s}),n[1]]},Jg=r=>(...n)=>me.asap(()=>r(...n)),eE=nn.hasStandardBrowserEnv?((r,n)=>i=>(i=new URL(i,nn.origin),r.protocol===i.protocol&&r.host===i.host&&(n||r.port===i.port)))(new URL(nn.origin),nn.navigator&&/(msie|trident)/i.test(nn.navigator.userAgent)):()=>!0,tE=nn.hasStandardBrowserEnv?{write(r,n,i,s,c,l,d){if(typeof document>"u")return;const h=[`${r}=${encodeURIComponent(n)}`];me.isNumber(i)&&h.push(`expires=${new Date(i).toUTCString()}`),me.isString(s)&&h.push(`path=${s}`),me.isString(c)&&h.push(`domain=${c}`),l===!0&&h.push("secure"),me.isString(d)&&h.push(`SameSite=${d}`),document.cookie=h.join("; ")},read(r){if(typeof document>"u")return null;const n=document.cookie.match(new RegExp("(?:^|; )"+r+"=([^;]*)"));return n?decodeURIComponent(n[1]):null},remove(r){this.write(r,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function nE(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function rE(r,n){return n?r.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):r}function Pv(r,n,i){let s=!nE(n);return r&&(s||i==!1)?rE(r,n):n}const Kg=r=>r instanceof yn?{...r}:r;function Ti(r,n){n=n||{};const i={};function s(m,y,_,z){return me.isPlainObject(m)&&me.isPlainObject(y)?me.merge.call({caseless:z},m,y):me.isPlainObject(y)?me.merge({},y):me.isArray(y)?y.slice():y}function c(m,y,_,z){if(me.isUndefined(y)){if(!me.isUndefined(m))return s(void 0,m,_,z)}else return s(m,y,_,z)}function l(m,y){if(!me.isUndefined(y))return s(void 0,y)}function d(m,y){if(me.isUndefined(y)){if(!me.isUndefined(m))return s(void 0,m)}else return s(void 0,y)}function h(m,y,_){if(_ in n)return s(m,y);if(_ in r)return s(void 0,m)}const p={url:l,method:l,data:l,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:h,headers:(m,y,_)=>c(Kg(m),Kg(y),_,!0)};return me.forEach(Object.keys({...r,...n}),function(y){const _=p[y]||c,z=_(r[y],n[y],y);me.isUndefined(z)&&_!==h||(i[y]=z)}),i}const Iv=r=>{const n=Ti({},r);let{data:i,withXSRFToken:s,xsrfHeaderName:c,xsrfCookieName:l,headers:d,auth:h}=n;if(n.headers=d=yn.from(d),n.url=Ov(Pv(n.baseURL,n.url,n.allowAbsoluteUrls),r.params,r.paramsSerializer),h&&d.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):""))),me.isFormData(i)){if(nn.hasStandardBrowserEnv||nn.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if(me.isFunction(i.getHeaders)){const p=i.getHeaders(),m=["content-type","content-length"];Object.entries(p).forEach(([y,_])=>{m.includes(y.toLowerCase())&&d.set(y,_)})}}if(nn.hasStandardBrowserEnv&&(s&&me.isFunction(s)&&(s=s(n)),s||s!==!1&&eE(n.url))){const p=c&&l&&tE.read(l);p&&d.set(c,p)}return n},iE=typeof XMLHttpRequest<"u",oE=iE&&function(r){return new Promise(function(i,s){const c=Iv(r);let l=c.data;const d=yn.from(c.headers).normalize();let{responseType:h,onUploadProgress:p,onDownloadProgress:m}=c,y,_,z,F,U;function Z(){F&&F(),U&&U(),c.cancelToken&&c.cancelToken.unsubscribe(y),c.signal&&c.signal.removeEventListener("abort",y)}let X=new XMLHttpRequest;X.open(c.method.toUpperCase(),c.url,!0),X.timeout=c.timeout;function ye(){if(!X)return;const ue=yn.from("getAllResponseHeaders"in X&&X.getAllResponseHeaders()),ae={data:!h||h==="text"||h==="json"?X.responseText:X.response,status:X.status,statusText:X.statusText,headers:ue,config:r,request:X};jv(function(ie){i(ie),Z()},function(ie){s(ie),Z()},ae),X=null}"onloadend"in X?X.onloadend=ye:X.onreadystatechange=function(){!X||X.readyState!==4||X.status===0&&!(X.responseURL&&X.responseURL.indexOf("file:")===0)||setTimeout(ye)},X.onabort=function(){X&&(s(new Xe("Request aborted",Xe.ECONNABORTED,r,X)),X=null)},X.onerror=function(ne){const ae=ne&&ne.message?ne.message:"Network Error",ce=new Xe(ae,Xe.ERR_NETWORK,r,X);ce.event=ne||null,s(ce),X=null},X.ontimeout=function(){let ne=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const ae=c.transitional||Mv;c.timeoutErrorMessage&&(ne=c.timeoutErrorMessage),s(new Xe(ne,ae.clarifyTimeoutError?Xe.ETIMEDOUT:Xe.ECONNABORTED,r,X)),X=null},l===void 0&&d.setContentType(null),"setRequestHeader"in X&&me.forEach(d.toJSON(),function(ne,ae){X.setRequestHeader(ae,ne)}),me.isUndefined(c.withCredentials)||(X.withCredentials=!!c.withCredentials),h&&h!=="json"&&(X.responseType=c.responseType),m&&([z,U]=yc(m,!0),X.addEventListener("progress",z)),p&&X.upload&&([_,F]=yc(p),X.upload.addEventListener("progress",_),X.upload.addEventListener("loadend",F)),(c.cancelToken||c.signal)&&(y=ue=>{X&&(s(!ue||ue.type?new Ro(null,r,X):ue),X.abort(),X=null)},c.cancelToken&&c.cancelToken.subscribe(y),c.signal&&(c.signal.aborted?y():c.signal.addEventListener("abort",y)));const he=QR(c.url);if(he&&nn.protocols.indexOf(he)===-1){s(new Xe("Unsupported protocol "+he+":",Xe.ERR_BAD_REQUEST,r));return}X.send(l||null)})},sE=(r,n)=>{const{length:i}=r=r?r.filter(Boolean):[];if(n||i){let s=new AbortController,c;const l=function(m){if(!c){c=!0,h();const y=m instanceof Error?m:this.reason;s.abort(y instanceof Xe?y:new Ro(y instanceof Error?y.message:y))}};let d=n&&setTimeout(()=>{d=null,l(new Xe(`timeout ${n} of ms exceeded`,Xe.ETIMEDOUT))},n);const h=()=>{r&&(d&&clearTimeout(d),d=null,r.forEach(m=>{m.unsubscribe?m.unsubscribe(l):m.removeEventListener("abort",l)}),r=null)};r.forEach(m=>m.addEventListener("abort",l));const{signal:p}=s;return p.unsubscribe=()=>me.asap(h),p}},aE=function*(r,n){let i=r.byteLength;if(i<n){yield r;return}let s=0,c;for(;s<i;)c=s+n,yield r.slice(s,c),s=c},cE=async function*(r,n){for await(const i of lE(r))yield*aE(i,n)},lE=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const n=r.getReader();try{for(;;){const{done:i,value:s}=await n.read();if(i)break;yield s}}finally{await n.cancel()}},Qg=(r,n,i,s)=>{const c=cE(r,n);let l=0,d,h=p=>{d||(d=!0,s&&s(p))};return new ReadableStream({async pull(p){try{const{done:m,value:y}=await c.next();if(m){h(),p.close();return}let _=y.byteLength;if(i){let z=l+=_;i(z)}p.enqueue(new Uint8Array(y))}catch(m){throw h(m),m}},cancel(p){return h(p),c.return()}},{highWaterMark:2})},Wg=64*1024,{isFunction:ec}=me,uE=(({Request:r,Response:n})=>({Request:r,Response:n}))(me.global),{ReadableStream:Zg,TextEncoder:ey}=me.global,ty=(r,...n)=>{try{return!!r(...n)}catch{return!1}},dE=r=>{r=me.merge.call({skipUndefined:!0},uE,r);const{fetch:n,Request:i,Response:s}=r,c=n?ec(n):typeof fetch=="function",l=ec(i),d=ec(s);if(!c)return!1;const h=c&&ec(Zg),p=c&&(typeof ey=="function"?(U=>Z=>U.encode(Z))(new ey):async U=>new Uint8Array(await new i(U).arrayBuffer())),m=l&&h&&ty(()=>{let U=!1;const Z=new i(nn.origin,{body:new Zg,method:"POST",get duplex(){return U=!0,"half"}}).headers.has("Content-Type");return U&&!Z}),y=d&&h&&ty(()=>me.isReadableStream(new s("").body)),_={stream:y&&(U=>U.body)};c&&["text","arrayBuffer","blob","formData","stream"].forEach(U=>{!_[U]&&(_[U]=(Z,X)=>{let ye=Z&&Z[U];if(ye)return ye.call(Z);throw new Xe(`Response type '${U}' is not supported`,Xe.ERR_NOT_SUPPORT,X)})});const z=async U=>{if(U==null)return 0;if(me.isBlob(U))return U.size;if(me.isSpecCompliantForm(U))return(await new i(nn.origin,{method:"POST",body:U}).arrayBuffer()).byteLength;if(me.isArrayBufferView(U)||me.isArrayBuffer(U))return U.byteLength;if(me.isURLSearchParams(U)&&(U=U+""),me.isString(U))return(await p(U)).byteLength},F=async(U,Z)=>{const X=me.toFiniteNumber(U.getContentLength());return X??z(Z)};return async U=>{let{url:Z,method:X,data:ye,signal:he,cancelToken:ue,timeout:ne,onDownloadProgress:ae,onUploadProgress:ce,responseType:ie,headers:Re,withCredentials:xe="same-origin",fetchOptions:Pe}=Iv(U),Je=n||fetch;ie=ie?(ie+"").toLowerCase():"text";let Ae=sE([he,ue&&ue.toAbortSignal()],ne),Oe=null;const Ce=Ae&&Ae.unsubscribe&&(()=>{Ae.unsubscribe()});let Be;try{if(ce&&m&&X!=="get"&&X!=="head"&&(Be=await F(Re,ye))!==0){let T=new i(Z,{method:"POST",body:ye,duplex:"half"}),j;if(me.isFormData(ye)&&(j=T.headers.get("content-type"))&&Re.setContentType(j),T.body){const[C,R]=Yg(Be,yc(Jg(ce)));ye=Qg(T.body,Wg,C,R)}}me.isString(xe)||(xe=xe?"include":"omit");const G=l&&"credentials"in i.prototype,D={...Pe,signal:Ae,method:X.toUpperCase(),headers:Re.normalize().toJSON(),body:ye,duplex:"half",credentials:G?xe:void 0};Oe=l&&new i(Z,D);let J=await(l?Je(Oe,Pe):Je(Z,D));const P=y&&(ie==="stream"||ie==="response");if(y&&(ae||P&&Ce)){const T={};["status","statusText","headers"].forEach(E=>{T[E]=J[E]});const j=me.toFiniteNumber(J.headers.get("content-length")),[C,R]=ae&&Yg(j,yc(Jg(ae),!0))||[];J=new s(Qg(J.body,Wg,C,()=>{R&&R(),Ce&&Ce()}),T)}ie=ie||"text";let K=await _[me.findKey(_,ie)||"text"](J,U);return!P&&Ce&&Ce(),await new Promise((T,j)=>{jv(T,j,{data:K,headers:yn.from(J.headers),status:J.status,statusText:J.statusText,config:U,request:Oe})})}catch(G){throw Ce&&Ce(),G&&G.name==="TypeError"&&/Load failed|fetch/i.test(G.message)?Object.assign(new Xe("Network Error",Xe.ERR_NETWORK,U,Oe),{cause:G.cause||G}):Xe.from(G,G&&G.code,U,Oe)}}},fE=new Map,zv=r=>{let n=r&&r.env||{};const{fetch:i,Request:s,Response:c}=n,l=[s,c,i];let d=l.length,h=d,p,m,y=fE;for(;h--;)p=l[h],m=y.get(p),m===void 0&&y.set(p,m=h?new Map:dE(n)),y=m;return m};zv();const nf={http:kR,xhr:oE,fetch:{get:zv}};me.forEach(nf,(r,n)=>{if(r){try{Object.defineProperty(r,"name",{value:n})}catch{}Object.defineProperty(r,"adapterName",{value:n})}});const ny=r=>`- ${r}`,hE=r=>me.isFunction(r)||r===null||r===!1;function pE(r,n){r=me.isArray(r)?r:[r];const{length:i}=r;let s,c;const l={};for(let d=0;d<i;d++){s=r[d];let h;if(c=s,!hE(s)&&(c=nf[(h=String(s)).toLowerCase()],c===void 0))throw new Xe(`Unknown adapter '${h}'`);if(c&&(me.isFunction(c)||(c=c.get(n))))break;l[h||"#"+d]=c}if(!c){const d=Object.entries(l).map(([p,m])=>`adapter ${p} `+(m===!1?"is not supported by the environment":"is not available in the build"));let h=i?d.length>1?`since :
`+d.map(ny).join(`
`):" "+ny(d[0]):"as no adapter specified";throw new Xe("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return c}const Lv={getAdapter:pE,adapters:nf};function hd(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Ro(null,r)}function ry(r){return hd(r),r.headers=yn.from(r.headers),r.data=fd.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),Lv.getAdapter(r.adapter||Ps.adapter,r)(r).then(function(s){return hd(r),s.data=fd.call(r,r.transformResponse,s),s.headers=yn.from(s.headers),s},function(s){return Dv(s)||(hd(r),s&&s.response&&(s.response.data=fd.call(r,r.transformResponse,s.response),s.response.headers=yn.from(s.response.headers))),Promise.reject(s)})}const Bv="1.13.2",Nc={};["object","boolean","number","function","string","symbol"].forEach((r,n)=>{Nc[r]=function(s){return typeof s===r||"a"+(n<1?"n ":" ")+r}});const iy={};Nc.transitional=function(n,i,s){function c(l,d){return"[Axios v"+Bv+"] Transitional option '"+l+"'"+d+(s?". "+s:"")}return(l,d,h)=>{if(n===!1)throw new Xe(c(d," has been removed"+(i?" in "+i:"")),Xe.ERR_DEPRECATED);return i&&!iy[d]&&(iy[d]=!0,console.warn(c(d," has been deprecated since v"+i+" and will be removed in the near future"))),n?n(l,d,h):!0}};Nc.spelling=function(n){return(i,s)=>(console.warn(`${s} is likely a misspelling of ${n}`),!0)};function mE(r,n,i){if(typeof r!="object")throw new Xe("options must be an object",Xe.ERR_BAD_OPTION_VALUE);const s=Object.keys(r);let c=s.length;for(;c-- >0;){const l=s[c],d=n[l];if(d){const h=r[l],p=h===void 0||d(h,l,r);if(p!==!0)throw new Xe("option "+l+" must be "+p,Xe.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new Xe("Unknown option "+l,Xe.ERR_BAD_OPTION)}}const fc={assertOptions:mE,validators:Nc},Kn=fc.validators;let yi=class{constructor(n){this.defaults=n||{},this.interceptors={request:new Fg,response:new Fg}}async request(n,i){try{return await this._request(n,i)}catch(s){if(s instanceof Error){let c={};Error.captureStackTrace?Error.captureStackTrace(c):c=new Error;const l=c.stack?c.stack.replace(/^.+\n/,""):"";try{s.stack?l&&!String(s.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+l):s.stack=l}catch{}}throw s}}_request(n,i){typeof n=="string"?(i=i||{},i.url=n):i=n||{},i=Ti(this.defaults,i);const{transitional:s,paramsSerializer:c,headers:l}=i;s!==void 0&&fc.assertOptions(s,{silentJSONParsing:Kn.transitional(Kn.boolean),forcedJSONParsing:Kn.transitional(Kn.boolean),clarifyTimeoutError:Kn.transitional(Kn.boolean)},!1),c!=null&&(me.isFunction(c)?i.paramsSerializer={serialize:c}:fc.assertOptions(c,{encode:Kn.function,serialize:Kn.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),fc.assertOptions(i,{baseUrl:Kn.spelling("baseURL"),withXsrfToken:Kn.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let d=l&&me.merge(l.common,l[i.method]);l&&me.forEach(["delete","get","head","post","put","patch","common"],U=>{delete l[U]}),i.headers=yn.concat(d,l);const h=[];let p=!0;this.interceptors.request.forEach(function(Z){typeof Z.runWhen=="function"&&Z.runWhen(i)===!1||(p=p&&Z.synchronous,h.unshift(Z.fulfilled,Z.rejected))});const m=[];this.interceptors.response.forEach(function(Z){m.push(Z.fulfilled,Z.rejected)});let y,_=0,z;if(!p){const U=[ry.bind(this),void 0];for(U.unshift(...h),U.push(...m),z=U.length,y=Promise.resolve(i);_<z;)y=y.then(U[_++],U[_++]);return y}z=h.length;let F=i;for(;_<z;){const U=h[_++],Z=h[_++];try{F=U(F)}catch(X){Z.call(this,X);break}}try{y=ry.call(this,F)}catch(U){return Promise.reject(U)}for(_=0,z=m.length;_<z;)y=y.then(m[_++],m[_++]);return y}getUri(n){n=Ti(this.defaults,n);const i=Pv(n.baseURL,n.url,n.allowAbsoluteUrls);return Ov(i,n.params,n.paramsSerializer)}};me.forEach(["delete","get","head","options"],function(n){yi.prototype[n]=function(i,s){return this.request(Ti(s||{},{method:n,url:i,data:(s||{}).data}))}});me.forEach(["post","put","patch"],function(n){function i(s){return function(l,d,h){return this.request(Ti(h||{},{method:n,headers:s?{"Content-Type":"multipart/form-data"}:{},url:l,data:d}))}}yi.prototype[n]=i(),yi.prototype[n+"Form"]=i(!0)});let gE=class Hv{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(l){i=l});const s=this;this.promise.then(c=>{if(!s._listeners)return;let l=s._listeners.length;for(;l-- >0;)s._listeners[l](c);s._listeners=null}),this.promise.then=c=>{let l;const d=new Promise(h=>{s.subscribe(h),l=h}).then(c);return d.cancel=function(){s.unsubscribe(l)},d},n(function(l,d,h){s.reason||(s.reason=new Ro(l,d,h),i(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const n=new AbortController,i=s=>{n.abort(s)};return this.subscribe(i),n.signal.unsubscribe=()=>this.unsubscribe(i),n.signal}static source(){let n;return{token:new Hv(function(c){n=c}),cancel:n}}};function yE(r){return function(i){return r.apply(null,i)}}function vE(r){return me.isObject(r)&&r.isAxiosError===!0}const Ud={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Ud).forEach(([r,n])=>{Ud[n]=r});function qv(r){const n=new yi(r),i=bv(yi.prototype.request,n);return me.extend(i,yi.prototype,n,{allOwnKeys:!0}),me.extend(i,n,null,{allOwnKeys:!0}),i.create=function(c){return qv(Ti(r,c))},i}const Rt=qv(Ps);Rt.Axios=yi;Rt.CanceledError=Ro;Rt.CancelToken=gE;Rt.isCancel=Dv;Rt.VERSION=Bv;Rt.toFormData=kc;Rt.AxiosError=Xe;Rt.Cancel=Rt.CanceledError;Rt.all=function(n){return Promise.all(n)};Rt.spread=yE;Rt.isAxiosError=vE;Rt.mergeConfig=Ti;Rt.AxiosHeaders=yn;Rt.formToJSON=r=>Uv(me.isHTMLForm(r)?new FormData(r):r);Rt.getAdapter=Lv.getAdapter;Rt.HttpStatusCode=Ud;Rt.default=Rt;const{Axios:Z2,AxiosError:eM,CanceledError:tM,isCancel:nM,CancelToken:rM,VERSION:iM,all:oM,Cancel:sM,isAxiosError:aM,spread:cM,toFormData:lM,AxiosHeaders:uM,HttpStatusCode:dM,formToJSON:fM,getAdapter:hM,mergeConfig:pM}=Rt,bE=()=>"https://festive-guest-api.azurewebsites.net/api",ht=Rt.create({baseURL:bE(),timeout:1e4});ht.interceptors.request.use(r=>(console.log("API Request:",{method:r.method?.toUpperCase(),url:r.baseURL+"/"+r.url,headers:r.headers}),r),r=>(console.error("Request Error:",r),Promise.reject(r)));ht.interceptors.request.use(r=>{try{const n=localStorage.getItem("user");if(n){const i=JSON.parse(n);i&&i.token&&(r.headers.Authorization=`Bearer ${i.token}`)}}catch{console.warn("Failed to read user from storage")}return r},r=>Promise.reject(r));ht.interceptors.response.use(r=>r,r=>((r.response?.status===401||r.response?.status===403)&&(localStorage.removeItem("user"),localStorage.removeItem("userId"),window.dispatchEvent(new Event("storage")),window.location.pathname!=="/login"&&window.location.pathname!=="/"&&(window.location.href="/login")),Promise.reject(r)));const SE={sasCache:new Map,async getSasUrl(r,n="logos"){const i=`${n}/${r}`,s=this.sasCache.get(i);if(s&&s.expiresAt>Date.now())return s.url;try{const l=(await ht.get("storage/get-sas-url",{params:{fileName:r,container:n}})).data.url;return this.sasCache.set(i,{url:l,expiresAt:Date.now()+3e3*1e3}),l}catch(c){return console.error("Error fetching SAS URL:",c),`https://festivegueststorage.blob.core.windows.net/${n}/${r}`}},clearCache(){this.sasCache.clear()}},TE=({className:r="",style:n={},alt:i="FestiveGuest Logo",isLoginLogo:s=!1})=>{const[c,l]=q.useState(""),[d,h]=q.useState(!0);return q.useEffect(()=>{(async()=>{try{const m=s?"login-logo.png":"logo.png",y=await SE.getSasUrl(m,"logos");l(y)}catch(m){console.error("Error loading logo:",m),l(s?"/assets/login-logo.png":"/assets/logo.png")}finally{h(!1)}})()},[s]),d?g.jsx("div",{className:r,style:{...n,background:"#f0f0f0"}}):g.jsx("img",{src:c,alt:i,className:r,style:n})},wE=()=>g.jsx("div",{className:"loader-container",children:g.jsx("div",{className:"logo-loader",children:g.jsx("img",{src:"/assets/login-logo.png",alt:"FestiveGuest",className:"loader-logo"})})}),CE=({user:r})=>{const n=wo(),i=()=>{const s=r?.role||r?.partitionKey;return s==="Host"?"/host-dashboard":s==="Guest"?"/guest-dashboard":s==="Admin"?"/admin":"/"};return g.jsxs("div",{className:"landing-page",children:[g.jsxs("section",{className:"hero",children:[g.jsxs("div",{className:"hero-content",children:[g.jsx("h1",{className:"hero-title",children:"Celebrate Festivals with Local Friends"}),g.jsx("p",{className:"hero-subtitle",children:"Experience authentic Pongal celebrations in East & West Godavari districts"}),g.jsx("div",{className:"hero-buttons",children:r?g.jsx("button",{className:"btn btn-primary",onClick:()=>n(i()),children:"Go to My Dashboard"}):g.jsxs(g.Fragment,{children:[g.jsx("button",{className:"btn btn-primary",onClick:()=>n("/register?role=Guest"),children:"Join as Guest"}),g.jsx("button",{className:"btn btn-secondary",onClick:()=>n("/register?role=Host"),children:"Become a Host"})]})})]}),g.jsx("div",{className:"hero-image",children:g.jsxs("div",{className:"festival-card",children:[g.jsx("h3",{children:" Festival Season"}),g.jsx("p",{children:"Connect with locals during Pongal, Diwali, and other celebrations"})]})})]}),g.jsx("section",{className:"features",children:g.jsxs("div",{className:"container",children:[g.jsx("h2",{children:"Why Choose Festive Guest?"}),g.jsxs("div",{className:"features-grid",children:[g.jsxs("div",{className:"feature-card",children:[g.jsx("div",{className:"feature-icon",children:""}),g.jsx("h3",{children:"Local Accommodation"}),g.jsx("p",{children:"Stay with friendly hosts who provide comfortable accommodation during festival season"})]}),g.jsxs("div",{className:"feature-card",children:[g.jsx("div",{className:"feature-icon",children:""}),g.jsx("h3",{children:"Guided Tours"}),g.jsx("p",{children:"Explore nearby temples, cultural sites, and hidden gems with local guides"})]}),g.jsxs("div",{className:"feature-card",children:[g.jsx("div",{className:"feature-icon",children:""}),g.jsx("h3",{children:"Make New Friends"}),g.jsx("p",{children:"Connect with locals and fellow travelers, create lasting friendships"})]}),g.jsxs("div",{className:"feature-card",children:[g.jsx("div",{className:"feature-icon",children:""}),g.jsx("h3",{children:"Authentic Experience"}),g.jsx("p",{children:"Participate in traditional celebrations, enjoy homemade festival food"})]})]})]})}),g.jsx("section",{className:"how-it-works",children:g.jsxs("div",{className:"container",children:[g.jsx("h2",{children:"How It Works"}),g.jsxs("div",{className:"steps",children:[g.jsxs("div",{className:"step",children:[g.jsx("div",{className:"step-number",children:"1"}),g.jsx("h3",{children:"Register"}),g.jsx("p",{children:"Sign up as a Guest or Host for free"})]}),g.jsxs("div",{className:"step",children:[g.jsx("div",{className:"step-number",children:"2"}),g.jsx("h3",{children:"Connect"}),g.jsx("p",{children:"Browse profiles and connect with hosts/guests"})]}),g.jsxs("div",{className:"step",children:[g.jsx("div",{className:"step-number",children:"3"}),g.jsx("h3",{children:"Celebrate"}),g.jsx("p",{children:"Enjoy authentic festival experiences together"})]})]})]})}),g.jsx("section",{className:"testimonials",children:g.jsxs("div",{className:"container",children:[g.jsx("h2",{children:"What Our Users Say"}),g.jsxs("div",{className:"testimonials-grid",children:[g.jsxs("div",{className:"testimonial",children:[g.jsx("p",{children:'"Amazing Pongal experience in Rajahmundry! The host family treated me like their own."'}),g.jsx("div",{className:"testimonial-author",children:"- Priya, Hyderabad"})]}),g.jsxs("div",{className:"testimonial",children:[g.jsx("p",{children:'"Met wonderful guests during Diwali. Sharing our traditions was so fulfilling."'}),g.jsx("div",{className:"testimonial-author",children:"- Ravi, Kakinada"})]})]})]})}),g.jsx("section",{className:"cta",children:g.jsxs("div",{className:"container",children:[g.jsx("h2",{children:"Ready to Start Your Festival Journey?"}),g.jsx("p",{children:"Join thousands of travelers and hosts celebrating together"}),g.jsx("div",{className:"cta-buttons",children:r?g.jsx("button",{className:"btn btn-primary",onClick:()=>n(i()),children:"Go to My Dashboard"}):g.jsxs(g.Fragment,{children:[g.jsx("button",{className:"btn btn-primary",onClick:()=>n("/register?role=Guest"),children:"Get Started"}),g.jsx("button",{className:"btn btn-primary",onClick:()=>n("/login"),children:"Already have an account?"})]})})]})}),g.jsx("footer",{className:"footer",children:g.jsx("div",{className:"container",children:g.jsx("p",{children:" 2024 Festive Guest Marketplace. Connecting hearts during festivals."})})})]})},RE=({setUser:r})=>{const[n,i]=q.useState(""),[s,c]=q.useState(""),[l,d]=q.useState(!1),[h,p]=q.useState(!1),[m,y]=q.useState(null),[_,z]=q.useState(""),[F,U]=q.useState(""),Z=wo(),X=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,ye=ne=>ne?X.test(ne)?(z(""),!0):(z("Please enter a valid email address"),!1):(z(""),!0);q.useEffect(()=>{const ne=localStorage.getItem("user"),ae=localStorage.getItem("token");ne&&ae&&Z("/"),U("/assets/login-logo.png")},[Z]);const he=(ne,ae="success")=>{y({message:ne,type:ae}),ae==="success"&&setTimeout(()=>{y(ce=>ce?{...ce,hiding:!0}:null),setTimeout(()=>y(null),300)},5e3)},ue=async ne=>{ne?.preventDefault(),p(!0);try{const ae=await ht.post("auth/login",{email:n,password:s});if(ae?.data?.success&&ae?.data?.token){const{token:ce,user:ie}=ae.data,Re={...ie,token:ce};localStorage.setItem("user",JSON.stringify(Re)),localStorage.setItem("userId",ie.userId),localStorage.setItem("token",ce),r(Re),he("Login successful! Redirecting...","success"),setTimeout(()=>Z("/"),1e3);return}he("Login failed","error")}catch(ae){ae.response?.status===429?he("Too many login attempts. Please wait 15 minutes and try again.","error"):he("Login failed: "+(ae.response?.data?.message||ae.message),"error")}finally{p(!1)}};return g.jsxs("div",{className:"container",children:[m&&g.jsx("div",{className:"toast-container",children:g.jsxs("div",{className:`toast ${m.type} ${m.hiding?"hiding":""}`,children:[g.jsx("span",{className:"toast-icon",children:m.type==="success"?"":m.type==="error"?"":""}),g.jsx("div",{className:"toast-content",children:g.jsx("p",{className:"toast-message",children:m.message})}),m.type!=="success"&&g.jsx("button",{onClick:()=>y(null),style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.5rem"},children:""})]})}),g.jsxs("div",{className:"card",style:{maxWidth:"450px",margin:"50px auto",textAlign:"center"},children:[g.jsxs("div",{style:{marginBottom:"2rem"},children:[g.jsx("img",{src:"/assets/login-logo.png",alt:"Festive Guest Logo",style:{height:"150px",width:"auto",marginBottom:"1.5rem"}}),g.jsx("p",{style:{color:"#64748b",fontSize:"1.1rem"},children:"Connect Guests and Hosts for memorable experiences"})]}),g.jsxs("form",{onSubmit:ue,style:{marginTop:"30px"},children:[g.jsxs("div",{className:"form-group",children:[g.jsx("input",{type:"email",className:"form-control",placeholder:"Enter your email address",value:n,onChange:ne=>{i(ne.target.value),ye(ne.target.value)},onBlur:ne=>ye(ne.target.value),required:!0,style:{fontSize:"1rem",padding:"1rem",borderColor:_?"#dc2626":"#cbd5e1"}}),_&&g.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",_]})]}),g.jsxs("div",{className:"form-group",style:{position:"relative"},children:[g.jsx("input",{type:l?"text":"password",className:"form-control",placeholder:"Enter your password",value:s,onChange:ne=>c(ne.target.value),required:!0,style:{fontSize:"1rem",padding:"1rem",paddingRight:"3rem"}}),g.jsx("button",{type:"button",onClick:()=>d(!l),style:{position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#64748b",display:"flex",alignItems:"center",padding:"0"},children:l?g.jsx(fv,{size:20}):g.jsx(hv,{size:20})})]}),g.jsx("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",padding:"1rem",fontSize:"1.1rem"},disabled:h||_!=="",children:h?"Logging in...":"Login"})]}),g.jsx("div",{style:{marginTop:"2rem",padding:"1.5rem",background:"#f8fafc",borderRadius:"1rem",border:"1px solid #e2e8f0"},children:g.jsxs("p",{style:{margin:"0",color:"#64748b",fontSize:"1.05rem"},children:["New user? ",g.jsx("button",{className:"btn btn-primary",onClick:()=>Z("/register"),style:{marginLeft:"0.5rem",padding:"0.5rem 1.5rem"},children:"Register"})]})})]})]})};class EE{constructor(){this.locations=null,this.loading=!1}async getLocations(){if(this.locations)return this.locations;if(this.loading){for(;this.loading;)await new Promise(n=>setTimeout(n,100));return this.locations}this.loading=!0;try{const n=await Rt.get("https://api.festiveguest.com/api/getlocations");return this.locations=n.data,this.locations}catch(n){throw console.error("DEBUG: Failed to fetch locations from API:",n),new Error("Unable to load location data (API Error). Please try again later.")}finally{this.loading=!1}}async seedLocations(){try{const n=await ht.post("seedlocations");return this.locations=null,n.data}catch(n){throw console.error("Failed to seed locations:",n),n}}clearCache(){this.locations=null}}const _E=new EE,xE=({setUser:r})=>{const n=wo(),i=Qn(),[s,c]=q.useState({}),[l,d]=q.useState({userId:crypto.randomUUID(),name:"",email:"",password:"",phone:"",state:"",city:"",otherCity:"",bio:"",role:"Guest",status:"Active"}),[h,p]=q.useState(!1),[m,y]=q.useState(null),[_,z]=q.useState(""),[F,U]=q.useState(""),[Z,X]=q.useState(null),[ye,he]=q.useState(""),[ue,ne]=q.useState(!1),[ae,ce]=q.useState(!1),[ie,Re]=q.useState(!1),[xe,Pe]=q.useState(!1),[Je,Ae]=q.useState(""),[Oe,Ce]=q.useState(""),[Be,G]=q.useState(""),[D,J]=q.useState(!1),[P,K]=q.useState(!1),[T,j]=q.useState(null),C=[{label:"At least 8 characters",test:L=>L.length>=8},{label:"One uppercase letter",test:L=>/[A-Z]/.test(L)},{label:"One lowercase letter",test:L=>/[a-z]/.test(L)},{label:"One number",test:L=>/\d/.test(L)},{label:"One special character",test:L=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(L)}],R=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,E=/^[6-9]\d{9}$/,O=L=>L?R.test(L)?(Ae(""),!0):(Ae("Please enter a valid email address"),!1):(Ae(""),!0),k=L=>{if(!L)return Ce(""),!0;const re=L.replace(/\D/g,"");return E.test(re)?(Ce(""),!0):(Ce("Please enter a valid 10-digit Indian mobile number (starting with 6-9). This helps other users contact you accurately."),!1)},b=(L,re="success")=>{y({message:L,type:re}),re==="success"&&setTimeout(()=>{y(te=>te?{...te,hiding:!0}:null),setTimeout(()=>y(null),300)},5e3)};q.useEffect(()=>{const re=new URLSearchParams(i.search).get("role");(re==="Guest"||re==="Host")&&d(te=>({...te,role:re}))},[i.search]),q.useEffect(()=>{(async()=>{try{console.log("Loading locations from:",ht.defaults.baseURL+"/location/states-with-cities");const re=await ht.get("location/states-with-cities");console.log("Locations loaded successfully:",re.data),c(re.data)}catch(re){console.error("DEBUG: Failed to load locations:",re),console.error("Error details:",{message:re.message,response:re.response?.data,status:re.response?.status,url:re.config?.url}),b("Registration Error: "+re.message,"error")}})().catch(re=>console.error("CRITICAL: loadLocations failed",re))},[]);const w=L=>{const{name:re,value:te}=L.target;d(Q=>{const le={...Q,[re]:te};return re==="state"&&(le.city=""),le})},A=L=>{L.preventDefault(),ee()},H=L=>{const re=L.target.checked;K(re),j(re?Date.now():null)},ee=async()=>{p(!0),X(null);try{if(!ae){X("Please verify your email before completing registration."),b("Please verify your email before registering","error"),p(!1);return}if(!P||!T){X("Please accept the terms and conditions to continue."),b("You must accept the agreement to register","error"),p(!1);return}if(Date.now()-T>3e5){X("Agreement acceptance expired. Please re-accept the terms."),K(!1),j(null),b("Please re-accept the agreement","error"),p(!1);return}const L=l.city==="Other"?l.otherCity:l.city,re={email:l.email,password:l.password,name:l.name,phone:l.phone,userType:l.role,location:`${L}, ${l.state}`,bio:l.bio};console.log("Sending registration payload:",re),(await ht.post("auth/register",re)).data.success&&(b(" Registration successful! Please login to continue.","success"),setTimeout(()=>n("/login"),2e3))}catch(L){const re=L.response?.data?.message||L.message;if(L.response?.status===429){const te="Too many attempts. Please wait 15 minutes and try again.";X(te),b(te,"error")}else X(re),b("Registration failed: "+re,"error")}finally{p(!1)}},V=async()=>{if(!l.email){b("Please enter an email address first","error");return}Re(!0);try{console.log("Sending OTP request:",{email:l.email,purpose:"registration"});const L=await ht.post("email/send-otp",{email:l.email,purpose:"registration"});console.log("OTP response:",L.data),L.data.success&&(ne(!0),U(l.email),b("OTP sent to your email","success"))}catch(L){console.error("OTP Error Details:",{status:L.response?.status,data:L.response?.data,message:L.message,fullResponse:L.response}),console.error("Full error object:",L);const re=L.response?.data?.message||L.response?.data?.error||L.response?.data||L.message;X(JSON.stringify(L.response?.data)||re),b("Failed to send OTP: "+re,"error")}finally{Re(!1)}},I=async()=>{if(!_||_.length!==6){b("Please enter a valid 6-digit code","error");return}p(!0);try{const L=await ht.post("email/validate-otp",{email:l.email,otpCode:_});L.data.success&&(ce(!0),ne(!1),he(""),b(L.data?.message||"Email verified","success"))}catch(L){const re=L.response?.data?.message||L.message;b("Verification failed: "+re,"error")}finally{p(!1)}};return g.jsxs("div",{className:"container",children:[m&&g.jsx("div",{className:"toast-container",children:g.jsxs("div",{className:`toast ${m.type} ${m.hiding?"hiding":""}`,children:[g.jsx("span",{className:"toast-icon",children:m.type==="success"?"":m.type==="error"?"":""}),g.jsx("div",{className:"toast-content",children:g.jsx("p",{className:"toast-message",children:m.message})}),m.type!=="success"&&g.jsx("button",{onClick:()=>y(null),style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.5rem"},children:""})]})}),Z&&g.jsxs("div",{style:{maxWidth:"1200px",margin:"10px auto",color:"#b91c1c",background:"#fee2e2",padding:"10px",borderRadius:"6px"},children:[g.jsx("strong",{children:"Error:"})," ",Z]}),g.jsxs("div",{className:"registration-layout",children:[g.jsxs("div",{className:"disclaimer-section",children:[g.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[g.jsx("h2",{style:{color:"#1e293b",marginBottom:"0.5rem"},children:"Welcome to FestiveGuest"}),g.jsx("p",{style:{color:"#64748b"},children:"Connect with festival enthusiasts"})]}),g.jsxs("div",{style:{padding:"1.5rem",background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"0.75rem",borderLeft:"4px solid #f59e0b",height:"fit-content",position:"sticky",top:"2rem"},children:[g.jsx("h4",{style:{margin:"0 0 1rem 0",color:"#92400e",fontSize:"1rem",fontWeight:"600"},children:" Important Disclaimer"}),g.jsxs("div",{style:{color:"#92400e",fontSize:"0.9rem",lineHeight:"1.5"},children:[g.jsxs("p",{style:{margin:"0 0 0.75rem 0"},children:[g.jsx("strong",{children:"FestiveGuest"})," is a platform that connects like-minded people for festival celebrations. By registering, you acknowledge and agree that:"]}),g.jsxs("ul",{style:{margin:"0",paddingLeft:"1.25rem"},children:[g.jsxs("li",{style:{marginBottom:"0.5rem"},children:["We are ",g.jsx("strong",{children:"not responsible"})," for any incidents, damages, or issues that may occur during your interactions or meetings."]}),g.jsxs("li",{style:{marginBottom:"0.5rem"},children:["We do ",g.jsx("strong",{children:"not guarantee"})," that you will find suitable hosts or guests, as this depends on availability and mutual compatibility."]}),g.jsxs("li",{style:{marginBottom:"0.5rem"},children:["We act solely as a ",g.jsx("strong",{children:"platform for introductions"})," and do not verify the background, intentions, or authenticity of users."]}),g.jsxs("li",{style:{marginBottom:"0.5rem"},children:["All interactions, arrangements, and meetings are ",g.jsx("strong",{children:"at your own risk and discretion"}),"."]}),g.jsxs("li",{style:{marginBottom:"0.5rem"},children:[g.jsx("strong",{children:"Payment & Financial Caution:"})," Hosts may request payment for services (accommodation, food, etc.). It is entirely your responsibility to decide whether to pay in advance or after services are rendered. Both hosts and guests should exercise caution and verify each other's authenticity before any financial transactions."]}),g.jsxs("li",{children:["We ",g.jsx("strong",{children:"strongly recommend"})," meeting in public places first and taking necessary safety precautions."]})]}),g.jsx("p",{style:{margin:"0.75rem 0 0 0",fontWeight:"600"},children:"By proceeding with registration, you accept full responsibility for your safety and interactions."})]})]})]}),g.jsx("div",{className:"registration-form-section",children:g.jsxs("div",{className:"card",style:{margin:"0",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},children:[g.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[g.jsx("h3",{style:{color:"#1e293b",marginBottom:"0.5rem"},children:"Complete Your Registration"}),g.jsx("p",{style:{color:"#64748b"},children:"Join our community of festival enthusiasts"})]}),g.jsxs("form",{onSubmit:A,children:[g.jsxs("div",{className:"form-group",children:[g.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Choose Your Role"}),g.jsxs("select",{name:"role",value:l.role,onChange:w,required:!0,style:{fontSize:"1rem",padding:"1rem"},children:[g.jsx("option",{value:"Guest",children:" Guest"}),g.jsx("option",{value:"Host",children:" Host"})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Full Name"}),g.jsx("input",{type:"text",name:"name",value:l.name,onChange:w,placeholder:"Enter your full name",required:!0,style:{fontSize:"1rem",padding:"1rem"}})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Email Address"}),g.jsx("input",{type:"email",name:"email",value:l.email,onChange:L=>{w(L),O(L.target.value)},onBlur:L=>O(L.target.value),placeholder:"Enter your email address",required:!0,style:{fontSize:"1rem",padding:"1rem",borderColor:Je?"#dc2626":"#cbd5e1"}}),Je&&g.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",Je]}),g.jsxs("div",{style:{marginTop:"0.75rem",display:"flex",gap:"0.5rem",alignItems:"center"},children:[!ae&&!ue&&g.jsx("button",{type:"button",className:"btn btn-secondary",onClick:V,disabled:ie||Je!=="",children:ie?"Sending OTP...":"Send OTP"}),ue&&g.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[g.jsx("input",{type:"text",value:_,onChange:L=>z(L.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter OTP",maxLength:6,style:{padding:"0.5rem",fontSize:"1rem",width:"160px"}}),g.jsx("button",{type:"button",className:"btn btn-primary",onClick:I,disabled:h||_.length!==6,children:"Verify"})]}),ae&&g.jsx("span",{style:{color:"#16a34a",fontWeight:"600"},children:" Email verified"})]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Password"}),g.jsxs("div",{style:{position:"relative"},children:[g.jsx("input",{type:xe?"text":"password",name:"password",value:l.password,onChange:w,placeholder:"Create a strong password",required:!0,style:{fontSize:"1rem",padding:"1rem",paddingRight:"2.5rem",width:"100%",boxSizing:"border-box"}}),g.jsx("button",{type:"button",onClick:()=>Pe(!xe),style:{position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#64748b",display:"flex",alignItems:"center",padding:"0"},children:xe?g.jsx(fv,{size:20}):g.jsx(hv,{size:20})})]}),g.jsx("div",{style:{marginTop:"0.75rem",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:C.map((L,re)=>{const te=L.test(l.password);return g.jsxs("div",{style:{fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.25rem",color:te?"#16a34a":"#dc2626",transition:"color 0.2s"},children:[g.jsx("span",{style:{fontSize:"0.9rem"},children:te?"":""}),L.label]},re)})})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Phone Number"}),g.jsx("input",{type:"tel",name:"phone",value:l.phone,onChange:L=>{w(L),k(L.target.value)},onBlur:L=>k(L.target.value),placeholder:"Enter your 10-digit mobile number",required:!0,style:{fontSize:"1rem",padding:"1rem",borderColor:Oe?"#dc2626":"#cbd5e1"}}),Oe&&g.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",Oe]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"State"}),g.jsxs("select",{name:"state",value:l.state,onChange:w,required:!0,style:{fontSize:"1rem",padding:"1rem"},children:[g.jsx("option",{value:"",children:"Select State"}),Object.keys(s||{}).map(L=>g.jsx("option",{value:L,children:L},L))]})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"City"}),g.jsxs("select",{name:"city",value:l.city,onChange:w,required:!0,disabled:!l.state,style:{fontSize:"1rem",padding:"1rem"},children:[g.jsx("option",{value:"",children:"Select City"}),l.state&&s[l.state]&&s[l.state].map(L=>g.jsx("option",{value:L,children:L},L))]})]}),l.city==="Other"&&g.jsxs("div",{className:"form-group",children:[g.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Enter Your City"}),g.jsx("input",{type:"text",name:"otherCity",value:l.otherCity,onChange:w,placeholder:"Name of your city",required:!0,style:{fontSize:"1rem",padding:"1rem"}})]}),g.jsxs("div",{className:"form-group",children:[g.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:l.role==="Host"?"Your Offerings":"Your Festival Wishes"}),g.jsx("textarea",{name:"bio",value:l.bio,onChange:w,placeholder:l.role==="Host"?"Tell guests what you offer (e.g., accommodation, traditional food, local tours)...":"Tell hosts what you are looking for (e.g., specific festivals, types of food, culture)...",required:!0,rows:"4",maxLength:250,style:{fontSize:"1rem",padding:"1rem",width:"100%",borderRadius:"0.5rem",border:"1px solid #cbd5e1"}}),g.jsxs("div",{style:{textAlign:"right",fontSize:"0.875rem",color:"#64748b",marginTop:"0.25rem"},children:[l.bio.length,"/250 characters"]})]}),g.jsx("div",{style:{marginTop:"2rem",padding:"1.5rem",background:"#f0f9ff",border:"2px solid #0ea5e9",borderRadius:"0.75rem"},children:g.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"1rem",cursor:"pointer",fontSize:"1rem",lineHeight:"1.5"},children:[g.jsx("input",{type:"checkbox",checked:P,onChange:H,required:!0,style:{width:"20px",height:"20px",marginTop:"2px",cursor:"pointer",accentColor:"#0ea5e9"}}),g.jsxs("span",{style:{color:"#0c4a6e",fontWeight:"500"},children:["I have read, understood, and agree to the ",g.jsx("strong",{children:"Important Disclaimer"})," above. I acknowledge that I am using this platform at my own risk and accept full responsibility for my safety and interactions."]})]})}),g.jsx("button",{type:"submit",className:"btn btn-primary",disabled:h||!P,style:{width:"100%",padding:"1rem",fontSize:"1.1rem",marginTop:"1.5rem",opacity:P?1:.5,cursor:P?"pointer":"not-allowed"},children:h?"Registering...":"Register Now"}),!1]}),g.jsx("div",{style:{marginTop:"2rem",textAlign:"center",padding:"1.5rem",background:"#f8fafc",borderRadius:"1rem",border:"1px solid #e2e8f0"},children:g.jsxs("p",{style:{margin:"0",color:"#64748b",fontSize:"1.05rem"},children:["Already have an account? ",g.jsx("button",{className:"btn btn-primary",onClick:()=>n("/login"),style:{marginLeft:"0.5rem",padding:"0.5rem 1.5rem"},children:"Login"})]})}),!1]})})]})]})};class vi extends Error{constructor(n,i){const s=new.target.prototype;super(`${n}: Status code '${i}'`),this.statusCode=i,this.__proto__=s}}class rf extends Error{constructor(n="A timeout occurred."){const i=new.target.prototype;super(n),this.__proto__=i}}let $n=class extends Error{constructor(n="An abort occurred."){const i=new.target.prototype;super(n),this.__proto__=i}};class AE extends Error{constructor(n,i){const s=new.target.prototype;super(n),this.transport=i,this.errorType="UnsupportedTransportError",this.__proto__=s}}class kE extends Error{constructor(n,i){const s=new.target.prototype;super(n),this.transport=i,this.errorType="DisabledTransportError",this.__proto__=s}}class NE extends Error{constructor(n,i){const s=new.target.prototype;super(n),this.transport=i,this.errorType="FailedToStartTransportError",this.__proto__=s}}class oy extends Error{constructor(n){const i=new.target.prototype;super(n),this.errorType="FailedToNegotiateWithServerError",this.__proto__=i}}class OE extends Error{constructor(n,i){const s=new.target.prototype;super(n),this.innerErrors=i,this.__proto__=s}}class $v{constructor(n,i,s){this.statusCode=n,this.statusText=i,this.content=s}}class Oc{get(n,i){return this.send({...i,method:"GET",url:n})}post(n,i){return this.send({...i,method:"POST",url:n})}delete(n,i){return this.send({...i,method:"DELETE",url:n})}getCookieString(n){return""}}var Te;(function(r){r[r.Trace=0]="Trace",r[r.Debug=1]="Debug",r[r.Information=2]="Information",r[r.Warning=3]="Warning",r[r.Error=4]="Error",r[r.Critical=5]="Critical",r[r.None=6]="None"})(Te||(Te={}));class As{constructor(){}log(n,i){}}As.instance=new As;const ME="10.0.0";class Mt{static isRequired(n,i){if(n==null)throw new Error(`The '${i}' argument is required.`)}static isNotEmpty(n,i){if(!n||n.match(/^\s*$/))throw new Error(`The '${i}' argument should not be empty.`)}static isIn(n,i,s){if(!(n in i))throw new Error(`Unknown ${s} value: ${n}.`)}}class Tt{static get isBrowser(){return!Tt.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!Tt.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!Tt.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function ks(r,n){let i="";return wi(r)?(i=`Binary data of length ${r.byteLength}`,n&&(i+=`. Content: '${UE(r)}'`)):typeof r=="string"&&(i=`String data of length ${r.length}`,n&&(i+=`. Content: '${r}'`)),i}function UE(r){const n=new Uint8Array(r);let i="";return n.forEach(s=>{const c=s<16?"0":"";i+=`0x${c}${s.toString(16)} `}),i.substring(0,i.length-1)}function wi(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}async function Vv(r,n,i,s,c,l){const d={},[h,p]=po();d[h]=p,r.log(Te.Trace,`(${n} transport) sending data. ${ks(c,l.logMessageContent)}.`);const m=wi(c)?"arraybuffer":"text",y=await i.post(s,{content:c,headers:{...d,...l.headers},responseType:m,timeout:l.timeout,withCredentials:l.withCredentials});r.log(Te.Trace,`(${n} transport) request complete. Response status: ${y.statusCode}.`)}function DE(r){return r===void 0?new vc(Te.Information):r===null?As.instance:r.log!==void 0?r:new vc(r)}class jE{constructor(n,i){this._subject=n,this._observer=i}dispose(){const n=this._subject.observers.indexOf(this._observer);n>-1&&this._subject.observers.splice(n,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(i=>{})}}class vc{constructor(n){this._minLevel=n,this.out=console}log(n,i){if(n>=this._minLevel){const s=`[${new Date().toISOString()}] ${Te[n]}: ${i}`;switch(n){case Te.Critical:case Te.Error:this.out.error(s);break;case Te.Warning:this.out.warn(s);break;case Te.Information:this.out.info(s);break;default:this.out.log(s);break}}}}function po(){let r="X-SignalR-User-Agent";return Tt.isNode&&(r="User-Agent"),[r,PE(ME,IE(),LE(),zE())]}function PE(r,n,i,s){let c="Microsoft SignalR/";const l=r.split(".");return c+=`${l[0]}.${l[1]}`,c+=` (${r}; `,n&&n!==""?c+=`${n}; `:c+="Unknown OS; ",c+=`${i}`,s?c+=`; ${s}`:c+="; Unknown Runtime Version",c+=")",c}function IE(){if(Tt.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function zE(){if(Tt.isNode)return process.versions.node}function LE(){return Tt.isNode?"NodeJS":"Browser"}function pd(r){return r.stack?r.stack:r.message?r.message:`${r}`}function BE(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}let HE=class extends Oc{constructor(n){if(super(),this._logger=n,typeof fetch>"u"||Tt.isNode){const i=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(i("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=i("node-fetch"):this._fetchType=fetch,this._fetchType=i("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(BE());if(typeof AbortController>"u"){const i=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=i("abort-controller")}else this._abortControllerType=AbortController}async send(n){if(n.abortSignal&&n.abortSignal.aborted)throw new $n;if(!n.method)throw new Error("No method defined.");if(!n.url)throw new Error("No url defined.");const i=new this._abortControllerType;let s;n.abortSignal&&(n.abortSignal.onabort=()=>{i.abort(),s=new $n});let c=null;if(n.timeout){const p=n.timeout;c=setTimeout(()=>{i.abort(),this._logger.log(Te.Warning,"Timeout from HTTP request."),s=new rf},p)}n.content===""&&(n.content=void 0),n.content&&(n.headers=n.headers||{},wi(n.content)?n.headers["Content-Type"]="application/octet-stream":n.headers["Content-Type"]="text/plain;charset=UTF-8");let l;try{l=await this._fetchType(n.url,{body:n.content,cache:"no-cache",credentials:n.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...n.headers},method:n.method,mode:"cors",redirect:"follow",signal:i.signal})}catch(p){throw s||(this._logger.log(Te.Warning,`Error from HTTP request. ${p}.`),p)}finally{c&&clearTimeout(c),n.abortSignal&&(n.abortSignal.onabort=null)}if(!l.ok){const p=await sy(l,"text");throw new vi(p||l.statusText,l.status)}const h=await sy(l,n.responseType);return new $v(l.status,l.statusText,h)}getCookieString(n){let i="";return Tt.isNode&&this._jar&&this._jar.getCookies(n,(s,c)=>i=c.join("; ")),i}};function sy(r,n){let i;switch(n){case"arraybuffer":i=r.arrayBuffer();break;case"text":i=r.text();break;case"blob":case"document":case"json":throw new Error(`${n} is not supported.`);default:i=r.text();break}return i}class qE extends Oc{constructor(n){super(),this._logger=n}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new $n):n.method?n.url?new Promise((i,s)=>{const c=new XMLHttpRequest;c.open(n.method,n.url,!0),c.withCredentials=n.withCredentials===void 0?!0:n.withCredentials,c.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.content===""&&(n.content=void 0),n.content&&(wi(n.content)?c.setRequestHeader("Content-Type","application/octet-stream"):c.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const l=n.headers;l&&Object.keys(l).forEach(d=>{c.setRequestHeader(d,l[d])}),n.responseType&&(c.responseType=n.responseType),n.abortSignal&&(n.abortSignal.onabort=()=>{c.abort(),s(new $n)}),n.timeout&&(c.timeout=n.timeout),c.onload=()=>{n.abortSignal&&(n.abortSignal.onabort=null),c.status>=200&&c.status<300?i(new $v(c.status,c.statusText,c.response||c.responseText)):s(new vi(c.response||c.responseText||c.statusText,c.status))},c.onerror=()=>{this._logger.log(Te.Warning,`Error from HTTP request. ${c.status}: ${c.statusText}.`),s(new vi(c.statusText,c.status))},c.ontimeout=()=>{this._logger.log(Te.Warning,"Timeout from HTTP request."),s(new rf)},c.send(n.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class $E extends Oc{constructor(n){if(super(),typeof fetch<"u"||Tt.isNode)this._httpClient=new HE(n);else if(typeof XMLHttpRequest<"u")this._httpClient=new qE(n);else throw new Error("No usable HttpClient found.")}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new $n):n.method?n.url?this._httpClient.send(n):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(n){return this._httpClient.getCookieString(n)}}class En{static write(n){return`${n}${En.RecordSeparator}`}static parse(n){if(n[n.length-1]!==En.RecordSeparator)throw new Error("Message is incomplete.");const i=n.split(En.RecordSeparator);return i.pop(),i}}En.RecordSeparatorCode=30;En.RecordSeparator=String.fromCharCode(En.RecordSeparatorCode);class VE{writeHandshakeRequest(n){return En.write(JSON.stringify(n))}parseHandshakeResponse(n){let i,s;if(wi(n)){const h=new Uint8Array(n),p=h.indexOf(En.RecordSeparatorCode);if(p===-1)throw new Error("Message is incomplete.");const m=p+1;i=String.fromCharCode.apply(null,Array.prototype.slice.call(h.slice(0,m))),s=h.byteLength>m?h.slice(m).buffer:null}else{const h=n,p=h.indexOf(En.RecordSeparator);if(p===-1)throw new Error("Message is incomplete.");const m=p+1;i=h.substring(0,m),s=h.length>m?h.substring(m):null}const c=En.parse(i),l=JSON.parse(c[0]);if(l.type)throw new Error("Expected a handshake response from the server.");return[s,l]}}var Ge;(function(r){r[r.Invocation=1]="Invocation",r[r.StreamItem=2]="StreamItem",r[r.Completion=3]="Completion",r[r.StreamInvocation=4]="StreamInvocation",r[r.CancelInvocation=5]="CancelInvocation",r[r.Ping=6]="Ping",r[r.Close=7]="Close",r[r.Ack=8]="Ack",r[r.Sequence=9]="Sequence"})(Ge||(Ge={}));class GE{constructor(){this.observers=[]}next(n){for(const i of this.observers)i.next(n)}error(n){for(const i of this.observers)i.error&&i.error(n)}complete(){for(const n of this.observers)n.complete&&n.complete()}subscribe(n){return this.observers.push(n),new jE(this,n)}}class FE{constructor(n,i,s){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=n,this._connection=i,this._bufferSize=s}async _send(n){const i=this._protocol.writeMessage(n);let s=Promise.resolve();if(this._isInvocationMessage(n)){this._totalMessageCount++;let c=()=>{},l=()=>{};wi(i)?this._bufferedByteCount+=i.byteLength:this._bufferedByteCount+=i.length,this._bufferedByteCount>=this._bufferSize&&(s=new Promise((d,h)=>{c=d,l=h})),this._messages.push(new XE(i,this._totalMessageCount,c,l))}try{this._reconnectInProgress||await this._connection.send(i)}catch{this._disconnected()}await s}_ack(n){let i=-1;for(let s=0;s<this._messages.length;s++){const c=this._messages[s];if(c._id<=n.sequenceId)i=s,wi(c._message)?this._bufferedByteCount-=c._message.byteLength:this._bufferedByteCount-=c._message.length,c._resolver();else if(this._bufferedByteCount<this._bufferSize)c._resolver();else break}i!==-1&&(this._messages=this._messages.slice(i+1))}_shouldProcessMessage(n){if(this._waitForSequenceMessage)return n.type!==Ge.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(n))return!0;const i=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,i<=this._latestReceivedSequenceId?(i===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=i,this._ackTimer(),!0)}_resetSequence(n){if(n.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=n.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const n=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:Ge.Sequence,sequenceId:n}));const i=this._messages;for(const s of i)await this._connection.send(s._message);this._reconnectInProgress=!1}_dispose(n){n??(n=new Error("Unable to reconnect to server."));for(const i of this._messages)i._rejector(n)}_isInvocationMessage(n){switch(n.type){case Ge.Invocation:case Ge.StreamItem:case Ge.Completion:case Ge.StreamInvocation:case Ge.CancelInvocation:return!0;case Ge.Close:case Ge.Sequence:case Ge.Ping:case Ge.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:Ge.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class XE{constructor(n,i,s,c){this._message=n,this._id=i,this._resolver=s,this._rejector=c}}const YE=30*1e3,JE=15*1e3,KE=1e5;var yt;(function(r){r.Disconnected="Disconnected",r.Connecting="Connecting",r.Connected="Connected",r.Disconnecting="Disconnecting",r.Reconnecting="Reconnecting"})(yt||(yt={}));class of{static create(n,i,s,c,l,d,h){return new of(n,i,s,c,l,d,h)}constructor(n,i,s,c,l,d,h){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(Te.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},Mt.isRequired(n,"connection"),Mt.isRequired(i,"logger"),Mt.isRequired(s,"protocol"),this.serverTimeoutInMilliseconds=l??YE,this.keepAliveIntervalInMilliseconds=d??JE,this._statefulReconnectBufferSize=h??KE,this._logger=i,this._protocol=s,this.connection=n,this._reconnectPolicy=c,this._handshakeProtocol=new VE,this.connection.onreceive=p=>this._processIncomingData(p),this.connection.onclose=p=>this._connectionClosed(p),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=yt.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Ge.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(n){if(this._connectionState!==yt.Disconnected&&this._connectionState!==yt.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!n)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=n}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==yt.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=yt.Connecting,this._logger.log(Te.Debug,"Starting HubConnection.");try{await this._startInternal(),Tt.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=yt.Connected,this._connectionStarted=!0,this._logger.log(Te.Debug,"HubConnection connected successfully.")}catch(n){return this._connectionState=yt.Disconnected,this._logger.log(Te.Debug,`HubConnection failed to start successfully because of error '${n}'.`),Promise.reject(n)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const n=new Promise((i,s)=>{this._handshakeResolver=i,this._handshakeRejecter=s});await this.connection.start(this._protocol.transferFormat);try{let i=this._protocol.version;this.connection.features.reconnect||(i=1);const s={protocol:this._protocol.name,version:i};if(this._logger.log(Te.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(s)),this._logger.log(Te.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await n,this._stopDuringStartError)throw this._stopDuringStartError;this.connection.features.reconnect&&(this._messageBuffer=new FE(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(i){throw this._logger.log(Te.Debug,`Hub handshake failed with error '${i}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(i),i}}async stop(){const n=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await n}catch{}}_stopInternal(n){if(this._connectionState===yt.Disconnected)return this._logger.log(Te.Debug,`Call to HubConnection.stop(${n}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===yt.Disconnecting)return this._logger.log(Te.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const i=this._connectionState;return this._connectionState=yt.Disconnecting,this._logger.log(Te.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(Te.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(i===yt.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=n||new $n("The connection was stopped before the hub handshake could complete."),this.connection.stop(n))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(n,...i){const[s,c]=this._replaceStreamingParams(i),l=this._createStreamInvocation(n,i,c);let d;const h=new GE;return h.cancelCallback=()=>{const p=this._createCancelInvocation(l.invocationId);return delete this._callbacks[l.invocationId],d.then(()=>this._sendWithProtocol(p))},this._callbacks[l.invocationId]=(p,m)=>{if(m){h.error(m);return}else p&&(p.type===Ge.Completion?p.error?h.error(new Error(p.error)):h.complete():h.next(p.item))},d=this._sendWithProtocol(l).catch(p=>{h.error(p),delete this._callbacks[l.invocationId]}),this._launchStreams(s,d),h}_sendMessage(n){return this._resetKeepAliveInterval(),this.connection.send(n)}_sendWithProtocol(n){return this._messageBuffer?this._messageBuffer._send(n):this._sendMessage(this._protocol.writeMessage(n))}send(n,...i){const[s,c]=this._replaceStreamingParams(i),l=this._sendWithProtocol(this._createInvocation(n,i,!0,c));return this._launchStreams(s,l),l}invoke(n,...i){const[s,c]=this._replaceStreamingParams(i),l=this._createInvocation(n,i,!1,c);return new Promise((h,p)=>{this._callbacks[l.invocationId]=(y,_)=>{if(_){p(_);return}else y&&(y.type===Ge.Completion?y.error?p(new Error(y.error)):h(y.result):p(new Error(`Unexpected message type: ${y.type}`)))};const m=this._sendWithProtocol(l).catch(y=>{p(y),delete this._callbacks[l.invocationId]});this._launchStreams(s,m)})}on(n,i){!n||!i||(n=n.toLowerCase(),this._methods[n]||(this._methods[n]=[]),this._methods[n].indexOf(i)===-1&&this._methods[n].push(i))}off(n,i){if(!n)return;n=n.toLowerCase();const s=this._methods[n];if(s)if(i){const c=s.indexOf(i);c!==-1&&(s.splice(c,1),s.length===0&&delete this._methods[n])}else delete this._methods[n]}onclose(n){n&&this._closedCallbacks.push(n)}onreconnecting(n){n&&this._reconnectingCallbacks.push(n)}onreconnected(n){n&&this._reconnectedCallbacks.push(n)}_processIncomingData(n){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(n=this._processHandshakeResponse(n),this._receivedHandshakeResponse=!0),n){const i=this._protocol.parseMessages(n,this._logger);for(const s of i)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(s)))switch(s.type){case Ge.Invocation:this._invokeClientMethod(s).catch(c=>{this._logger.log(Te.Error,`Invoke client method threw error: ${pd(c)}`)});break;case Ge.StreamItem:case Ge.Completion:{const c=this._callbacks[s.invocationId];if(c){s.type===Ge.Completion&&delete this._callbacks[s.invocationId];try{c(s)}catch(l){this._logger.log(Te.Error,`Stream callback threw error: ${pd(l)}`)}}break}case Ge.Ping:break;case Ge.Close:{this._logger.log(Te.Information,"Close message received from server.");const c=s.error?new Error("Server returned an error on close: "+s.error):void 0;s.allowReconnect===!0?this.connection.stop(c):this._stopPromise=this._stopInternal(c);break}case Ge.Ack:this._messageBuffer&&this._messageBuffer._ack(s);break;case Ge.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(s);break;default:this._logger.log(Te.Warning,`Invalid message type: ${s.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(n){let i,s;try{[s,i]=this._handshakeProtocol.parseHandshakeResponse(n)}catch(c){const l="Error parsing handshake response: "+c;this._logger.log(Te.Error,l);const d=new Error(l);throw this._handshakeRejecter(d),d}if(i.error){const c="Server returned handshake error: "+i.error;this._logger.log(Te.Error,c);const l=new Error(c);throw this._handshakeRejecter(l),l}else this._logger.log(Te.Debug,"Server handshake complete.");return this._handshakeResolver(),s}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if(!this.connection.features||!this.connection.features.inherentKeepAlive){this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds);let n=this._nextKeepAlive-new Date().getTime();if(n<0){this._connectionState===yt.Connected&&this._trySendPingMessage();return}this._pingServerHandle===void 0&&(n<0&&(n=0),this._pingServerHandle=setTimeout(async()=>{this._connectionState===yt.Connected&&await this._trySendPingMessage()},n))}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(n){const i=n.target.toLowerCase(),s=this._methods[i];if(!s){this._logger.log(Te.Warning,`No client method with the name '${i}' found.`),n.invocationId&&(this._logger.log(Te.Warning,`No result given for '${i}' method and invocation ID '${n.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)));return}const c=s.slice(),l=!!n.invocationId;let d,h,p;for(const m of c)try{const y=d;d=await m.apply(this,n.arguments),l&&d&&y&&(this._logger.log(Te.Error,`Multiple results provided for '${i}'. Sending error to server.`),p=this._createCompletionMessage(n.invocationId,"Client provided multiple results.",null)),h=void 0}catch(y){h=y,this._logger.log(Te.Error,`A callback for the method '${i}' threw error '${y}'.`)}p?await this._sendWithProtocol(p):l?(h?p=this._createCompletionMessage(n.invocationId,`${h}`,null):d!==void 0?p=this._createCompletionMessage(n.invocationId,null,d):(this._logger.log(Te.Warning,`No result given for '${i}' method and invocation ID '${n.invocationId}'.`),p=this._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(p)):d&&this._logger.log(Te.Error,`Result given for '${i}' method but server is not expecting a result.`)}_connectionClosed(n){this._logger.log(Te.Debug,`HubConnection.connectionClosed(${n}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||n||new $n("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(n||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===yt.Disconnecting?this._completeClose(n):this._connectionState===yt.Connected&&this._reconnectPolicy?this._reconnect(n):this._connectionState===yt.Connected&&this._completeClose(n)}_completeClose(n){if(this._connectionStarted){this._connectionState=yt.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(n??new Error("Connection closed.")),this._messageBuffer=void 0),Tt.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(i=>i.apply(this,[n]))}catch(i){this._logger.log(Te.Error,`An onclose callback called with error '${n}' threw error '${i}'.`)}}}async _reconnect(n){const i=Date.now();let s=0,c=n!==void 0?n:new Error("Attempting to reconnect due to a unknown error."),l=this._getNextRetryDelay(s,0,c);if(l===null){this._logger.log(Te.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(n);return}if(this._connectionState=yt.Reconnecting,n?this._logger.log(Te.Information,`Connection reconnecting because of error '${n}'.`):this._logger.log(Te.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(d=>d.apply(this,[n]))}catch(d){this._logger.log(Te.Error,`An onreconnecting callback called with error '${n}' threw error '${d}'.`)}if(this._connectionState!==yt.Reconnecting){this._logger.log(Te.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;l!==null;){if(this._logger.log(Te.Information,`Reconnect attempt number ${s+1} will start in ${l} ms.`),await new Promise(d=>{this._reconnectDelayHandle=setTimeout(d,l)}),this._reconnectDelayHandle=void 0,this._connectionState!==yt.Reconnecting){this._logger.log(Te.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=yt.Connected,this._logger.log(Te.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(d=>d.apply(this,[this.connection.connectionId]))}catch(d){this._logger.log(Te.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${d}'.`)}return}catch(d){if(this._logger.log(Te.Information,`Reconnect attempt failed because of error '${d}'.`),this._connectionState!==yt.Reconnecting){this._logger.log(Te.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===yt.Disconnecting&&this._completeClose();return}s++,c=d instanceof Error?d:new Error(d.toString()),l=this._getNextRetryDelay(s,Date.now()-i,c)}}this._logger.log(Te.Information,`Reconnect retries have been exhausted after ${Date.now()-i} ms and ${s} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(n,i,s){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:i,previousRetryCount:n,retryReason:s})}catch(c){return this._logger.log(Te.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${n}, ${i}) threw error '${c}'.`),null}}_cancelCallbacksWithError(n){const i=this._callbacks;this._callbacks={},Object.keys(i).forEach(s=>{const c=i[s];try{c(null,n)}catch(l){this._logger.log(Te.Error,`Stream 'error' callback called with '${n}' threw error: ${pd(l)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(n,i,s,c){if(s)return c.length!==0?{target:n,arguments:i,streamIds:c,type:Ge.Invocation}:{target:n,arguments:i,type:Ge.Invocation};{const l=this._invocationId;return this._invocationId++,c.length!==0?{target:n,arguments:i,invocationId:l.toString(),streamIds:c,type:Ge.Invocation}:{target:n,arguments:i,invocationId:l.toString(),type:Ge.Invocation}}}_launchStreams(n,i){if(n.length!==0){i||(i=Promise.resolve());for(const s in n)n[s].subscribe({complete:()=>{i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(s)))},error:c=>{let l;c instanceof Error?l=c.message:c&&c.toString?l=c.toString():l="Unknown error",i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(s,l)))},next:c=>{i=i.then(()=>this._sendWithProtocol(this._createStreamItemMessage(s,c)))}})}}_replaceStreamingParams(n){const i=[],s=[];for(let c=0;c<n.length;c++){const l=n[c];if(this._isObservable(l)){const d=this._invocationId;this._invocationId++,i[d]=l,s.push(d.toString()),n.splice(c,1)}}return[i,s]}_isObservable(n){return n&&n.subscribe&&typeof n.subscribe=="function"}_createStreamInvocation(n,i,s){const c=this._invocationId;return this._invocationId++,s.length!==0?{target:n,arguments:i,invocationId:c.toString(),streamIds:s,type:Ge.StreamInvocation}:{target:n,arguments:i,invocationId:c.toString(),type:Ge.StreamInvocation}}_createCancelInvocation(n){return{invocationId:n,type:Ge.CancelInvocation}}_createStreamItemMessage(n,i){return{invocationId:n,item:i,type:Ge.StreamItem}}_createCompletionMessage(n,i,s){return i?{error:i,invocationId:n,type:Ge.Completion}:{invocationId:n,result:s,type:Ge.Completion}}_createCloseMessage(){return{type:Ge.Close}}async _trySendPingMessage(){try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}}const QE=[0,2e3,1e4,3e4,null];class ay{constructor(n){this._retryDelays=n!==void 0?[...n,null]:QE}nextRetryDelayInMilliseconds(n){return this._retryDelays[n.previousRetryCount]}}class bi{}bi.Authorization="Authorization";bi.Cookie="Cookie";class WE extends Oc{constructor(n,i){super(),this._innerClient=n,this._accessTokenFactory=i}async send(n){let i=!0;this._accessTokenFactory&&(!this._accessToken||n.url&&n.url.indexOf("/negotiate?")>0)&&(i=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(n);const s=await this._innerClient.send(n);return i&&s.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(n),await this._innerClient.send(n)):s}_setAuthorizationHeader(n){n.headers||(n.headers={}),this._accessToken?n.headers[bi.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&n.headers[bi.Authorization]&&delete n.headers[bi.Authorization]}getCookieString(n){return this._innerClient.getCookieString(n)}}var Pt;(function(r){r[r.None=0]="None",r[r.WebSockets=1]="WebSockets",r[r.ServerSentEvents=2]="ServerSentEvents",r[r.LongPolling=4]="LongPolling"})(Pt||(Pt={}));var tn;(function(r){r[r.Text=1]="Text",r[r.Binary=2]="Binary"})(tn||(tn={}));let ZE=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class cy{get pollAborted(){return this._pollAbort.aborted}constructor(n,i,s){this._httpClient=n,this._logger=i,this._pollAbort=new ZE,this._options=s,this._running=!1,this.onreceive=null,this.onclose=null}async connect(n,i){if(Mt.isRequired(n,"url"),Mt.isRequired(i,"transferFormat"),Mt.isIn(i,tn,"transferFormat"),this._url=n,this._logger.log(Te.Trace,"(LongPolling transport) Connecting."),i===tn.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[s,c]=po(),l={[s]:c,...this._options.headers},d={abortSignal:this._pollAbort.signal,headers:l,timeout:1e5,withCredentials:this._options.withCredentials};i===tn.Binary&&(d.responseType="arraybuffer");const h=`${n}&_=${Date.now()}`;this._logger.log(Te.Trace,`(LongPolling transport) polling: ${h}.`);const p=await this._httpClient.get(h,d);p.statusCode!==200?(this._logger.log(Te.Error,`(LongPolling transport) Unexpected response code: ${p.statusCode}.`),this._closeError=new vi(p.statusText||"",p.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,d)}async _poll(n,i){try{for(;this._running;)try{const s=`${n}&_=${Date.now()}`;this._logger.log(Te.Trace,`(LongPolling transport) polling: ${s}.`);const c=await this._httpClient.get(s,i);c.statusCode===204?(this._logger.log(Te.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):c.statusCode!==200?(this._logger.log(Te.Error,`(LongPolling transport) Unexpected response code: ${c.statusCode}.`),this._closeError=new vi(c.statusText||"",c.statusCode),this._running=!1):c.content?(this._logger.log(Te.Trace,`(LongPolling transport) data received. ${ks(c.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(c.content)):this._logger.log(Te.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(s){this._running?s instanceof rf?this._logger.log(Te.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=s,this._running=!1):this._logger.log(Te.Trace,`(LongPolling transport) Poll errored after shutdown: ${s.message}`)}}finally{this._logger.log(Te.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(n){return this._running?Vv(this._logger,"LongPolling",this._httpClient,this._url,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(Te.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(Te.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const n={},[i,s]=po();n[i]=s;const c={headers:{...n,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let l;try{await this._httpClient.delete(this._url,c)}catch(d){l=d}l?l instanceof vi&&(l.statusCode===404?this._logger.log(Te.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(Te.Trace,`(LongPolling transport) Error sending a DELETE request: ${l}`)):this._logger.log(Te.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(Te.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let n="(LongPolling transport) Firing onclose event.";this._closeError&&(n+=" Error: "+this._closeError),this._logger.log(Te.Trace,n),this.onclose(this._closeError)}}}class e_{constructor(n,i,s,c){this._httpClient=n,this._accessToken=i,this._logger=s,this._options=c,this.onreceive=null,this.onclose=null}async connect(n,i){return Mt.isRequired(n,"url"),Mt.isRequired(i,"transferFormat"),Mt.isIn(i,tn,"transferFormat"),this._logger.log(Te.Trace,"(SSE transport) Connecting."),this._url=n,this._accessToken&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((s,c)=>{let l=!1;if(i!==tn.Text){c(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let d;if(Tt.isBrowser||Tt.isWebWorker)d=new this._options.EventSource(n,{withCredentials:this._options.withCredentials});else{const h=this._httpClient.getCookieString(n),p={};p.Cookie=h;const[m,y]=po();p[m]=y,d=new this._options.EventSource(n,{withCredentials:this._options.withCredentials,headers:{...p,...this._options.headers}})}try{d.onmessage=h=>{if(this.onreceive)try{this._logger.log(Te.Trace,`(SSE transport) data received. ${ks(h.data,this._options.logMessageContent)}.`),this.onreceive(h.data)}catch(p){this._close(p);return}},d.onerror=h=>{l?this._close():c(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},d.onopen=()=>{this._logger.log(Te.Information,`SSE connected to ${this._url}`),this._eventSource=d,l=!0,s()}}catch(h){c(h);return}})}async send(n){return this._eventSource?Vv(this._logger,"SSE",this._httpClient,this._url,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(n){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(n))}}class t_{constructor(n,i,s,c,l,d){this._logger=s,this._accessTokenFactory=i,this._logMessageContent=c,this._webSocketConstructor=l,this._httpClient=n,this.onreceive=null,this.onclose=null,this._headers=d}async connect(n,i){Mt.isRequired(n,"url"),Mt.isRequired(i,"transferFormat"),Mt.isIn(i,tn,"transferFormat"),this._logger.log(Te.Trace,"(WebSockets transport) Connecting.");let s;return this._accessTokenFactory&&(s=await this._accessTokenFactory()),new Promise((c,l)=>{n=n.replace(/^http/,"ws");let d;const h=this._httpClient.getCookieString(n);let p=!1;if(Tt.isNode||Tt.isReactNative){const m={},[y,_]=po();m[y]=_,s&&(m[bi.Authorization]=`Bearer ${s}`),h&&(m[bi.Cookie]=h),d=new this._webSocketConstructor(n,void 0,{headers:{...m,...this._headers}})}else s&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(s)}`);d||(d=new this._webSocketConstructor(n)),i===tn.Binary&&(d.binaryType="arraybuffer"),d.onopen=m=>{this._logger.log(Te.Information,`WebSocket connected to ${n}.`),this._webSocket=d,p=!0,c()},d.onerror=m=>{let y=null;typeof ErrorEvent<"u"&&m instanceof ErrorEvent?y=m.error:y="There was an error with the transport",this._logger.log(Te.Information,`(WebSockets transport) ${y}.`)},d.onmessage=m=>{if(this._logger.log(Te.Trace,`(WebSockets transport) data received. ${ks(m.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(m.data)}catch(y){this._close(y);return}},d.onclose=m=>{if(p)this._close(m);else{let y=null;typeof ErrorEvent<"u"&&m instanceof ErrorEvent?y=m.error:y="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",l(new Error(y))}}})}send(n){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(Te.Trace,`(WebSockets transport) sending data. ${ks(n,this._logMessageContent)}.`),this._webSocket.send(n),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(n){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(Te.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(n)&&(n.wasClean===!1||n.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${n.code} (${n.reason||"no reason given"}).`)):n instanceof Error?this.onclose(n):this.onclose())}_isCloseEvent(n){return n&&typeof n.wasClean=="boolean"&&typeof n.code=="number"}}const ly=100;class n_{constructor(n,i={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,Mt.isRequired(n,"url"),this._logger=DE(i.logger),this.baseUrl=this._resolveUrl(n),i=i||{},i.logMessageContent=i.logMessageContent===void 0?!1:i.logMessageContent,typeof i.withCredentials=="boolean"||i.withCredentials===void 0)i.withCredentials=i.withCredentials===void 0?!0:i.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");i.timeout=i.timeout===void 0?100*1e3:i.timeout;let s=null,c=null;if(Tt.isNode&&typeof require<"u"){const l=typeof __webpack_require__=="function"?__non_webpack_require__:require;s=l("ws"),c=l("eventsource")}!Tt.isNode&&typeof WebSocket<"u"&&!i.WebSocket?i.WebSocket=WebSocket:Tt.isNode&&!i.WebSocket&&s&&(i.WebSocket=s),!Tt.isNode&&typeof EventSource<"u"&&!i.EventSource?i.EventSource=EventSource:Tt.isNode&&!i.EventSource&&typeof c<"u"&&(i.EventSource=c),this._httpClient=new WE(i.httpClient||new $E(this._logger),i.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=i,this.onreceive=null,this.onclose=null}async start(n){if(n=n||tn.Binary,Mt.isIn(n,tn,"transferFormat"),this._logger.log(Te.Debug,`Starting connection with transfer format '${tn[n]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(n),await this._startInternalPromise,this._connectionState==="Disconnecting"){const i="Failed to start the HttpConnection before stop() was called.";return this._logger.log(Te.Error,i),await this._stopPromise,Promise.reject(new $n(i))}else if(this._connectionState!=="Connected"){const i="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(Te.Error,i),Promise.reject(new $n(i))}this._connectionStarted=!0}send(n){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new sf(this.transport)),this._sendQueue.send(n))}async stop(n){if(this._connectionState==="Disconnected")return this._logger.log(Te.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(Te.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(i=>{this._stopPromiseResolver=i}),await this._stopInternal(n),await this._stopPromise}async _stopInternal(n){this._stopError=n;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(i){this._logger.log(Te.Error,`HttpConnection.transport.stop() threw error '${i}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(Te.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(n){let i=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===Pt.WebSockets)this.transport=this._constructTransport(Pt.WebSockets),await this._startTransport(i,n);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let s=null,c=0;do{if(s=await this._getNegotiationResponse(i),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new $n("The connection was stopped during negotiation.");if(s.error)throw new Error(s.error);if(s.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(s.url&&(i=s.url),s.accessToken){const l=s.accessToken;this._accessTokenFactory=()=>l,this._httpClient._accessToken=l,this._httpClient._accessTokenFactory=void 0}c++}while(s.url&&c<ly);if(c===ly&&s.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(i,this._options.transport,s,n)}this.transport instanceof cy&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(Te.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(s){return this._logger.log(Te.Error,"Failed to start the connection: "+s),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(s)}}async _getNegotiationResponse(n){const i={},[s,c]=po();i[s]=c;const l=this._resolveNegotiateUrl(n);this._logger.log(Te.Debug,`Sending negotiation request: ${l}.`);try{const d=await this._httpClient.post(l,{content:"",headers:{...i,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(d.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${d.statusCode}'`));const h=JSON.parse(d.content);return(!h.negotiateVersion||h.negotiateVersion<1)&&(h.connectionToken=h.connectionId),h.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new oy("Client didn't negotiate Stateful Reconnect but the server did.")):h}catch(d){let h="Failed to complete negotiation with the server: "+d;return d instanceof vi&&d.statusCode===404&&(h=h+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(Te.Error,h),Promise.reject(new oy(h))}}_createConnectUrl(n,i){return i?n+(n.indexOf("?")===-1?"?":"&")+`id=${i}`:n}async _createTransport(n,i,s,c){let l=this._createConnectUrl(n,s.connectionToken);if(this._isITransport(i)){this._logger.log(Te.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=i,await this._startTransport(l,c),this.connectionId=s.connectionId;return}const d=[],h=s.availableTransports||[];let p=s;for(const m of h){const y=this._resolveTransportOrError(m,i,c,p?.useStatefulReconnect===!0);if(y instanceof Error)d.push(`${m.transport} failed:`),d.push(y);else if(this._isITransport(y)){if(this.transport=y,!p){try{p=await this._getNegotiationResponse(n)}catch(_){return Promise.reject(_)}l=this._createConnectUrl(n,p.connectionToken)}try{await this._startTransport(l,c),this.connectionId=p.connectionId;return}catch(_){if(this._logger.log(Te.Error,`Failed to start the transport '${m.transport}': ${_}`),p=void 0,d.push(new NE(`${m.transport} failed: ${_}`,Pt[m.transport])),this._connectionState!=="Connecting"){const z="Failed to select transport before stop() was called.";return this._logger.log(Te.Debug,z),Promise.reject(new $n(z))}}}}return d.length>0?Promise.reject(new OE(`Unable to connect to the server with any of the available transports. ${d.join(" ")}`,d)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(n){switch(n){case Pt.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new t_(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case Pt.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new e_(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case Pt.LongPolling:return new cy(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${n}.`)}}_startTransport(n,i){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async s=>{let c=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(n,i),await this.features.resend()}catch{c=!0}else{this._stopConnection(s);return}c&&this._stopConnection(s)}:this.transport.onclose=s=>this._stopConnection(s),this.transport.connect(n,i)}_resolveTransportOrError(n,i,s,c){const l=Pt[n.transport];if(l==null)return this._logger.log(Te.Debug,`Skipping transport '${n.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${n.transport}' because it is not supported by this client.`);if(r_(i,l))if(n.transferFormats.map(h=>tn[h]).indexOf(s)>=0){if(l===Pt.WebSockets&&!this._options.WebSocket||l===Pt.ServerSentEvents&&!this._options.EventSource)return this._logger.log(Te.Debug,`Skipping transport '${Pt[l]}' because it is not supported in your environment.'`),new AE(`'${Pt[l]}' is not supported in your environment.`,l);this._logger.log(Te.Debug,`Selecting transport '${Pt[l]}'.`);try{return this.features.reconnect=l===Pt.WebSockets?c:void 0,this._constructTransport(l)}catch(h){return h}}else return this._logger.log(Te.Debug,`Skipping transport '${Pt[l]}' because it does not support the requested transfer format '${tn[s]}'.`),new Error(`'${Pt[l]}' does not support ${tn[s]}.`);else return this._logger.log(Te.Debug,`Skipping transport '${Pt[l]}' because it was disabled by the client.`),new kE(`'${Pt[l]}' is disabled by the client.`,l)}_isITransport(n){return n&&typeof n=="object"&&"connect"in n}_stopConnection(n){if(this._logger.log(Te.Debug,`HttpConnection.stopConnection(${n}) called while in state ${this._connectionState}.`),this.transport=void 0,n=this._stopError||n,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(Te.Debug,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(Te.Warning,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${n}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),n?this._logger.log(Te.Error,`Connection disconnected with error '${n}'.`):this._logger.log(Te.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(i=>{this._logger.log(Te.Error,`TransportSendQueue.stop() threw error '${i}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(n)}catch(i){this._logger.log(Te.Error,`HttpConnection.onclose(${n}) threw error '${i}'.`)}}}_resolveUrl(n){if(n.lastIndexOf("https://",0)===0||n.lastIndexOf("http://",0)===0)return n;if(!Tt.isBrowser)throw new Error(`Cannot resolve '${n}'.`);const i=window.document.createElement("a");return i.href=n,this._logger.log(Te.Information,`Normalizing '${n}' to '${i.href}'.`),i.href}_resolveNegotiateUrl(n){const i=new URL(n);i.pathname.endsWith("/")?i.pathname+="negotiate":i.pathname+="/negotiate";const s=new URLSearchParams(i.searchParams);return s.has("negotiateVersion")||s.append("negotiateVersion",this._negotiateVersion.toString()),s.has("useStatefulReconnect")?s.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&s.append("useStatefulReconnect","true"),i.search=s.toString(),i.toString()}}function r_(r,n){return!r||(n&r)!==0}class sf{constructor(n){this._transport=n,this._buffer=[],this._executing=!0,this._sendBufferedData=new tc,this._transportResult=new tc,this._sendLoopPromise=this._sendLoop()}send(n){return this._bufferData(n),this._transportResult||(this._transportResult=new tc),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(n){if(this._buffer.length&&typeof this._buffer[0]!=typeof n)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof n}`);this._buffer.push(n),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new tc;const n=this._transportResult;this._transportResult=void 0;const i=typeof this._buffer[0]=="string"?this._buffer.join(""):sf._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(i),n.resolve()}catch(s){n.reject(s)}}}static _concatBuffers(n){const i=n.map(l=>l.byteLength).reduce((l,d)=>l+d),s=new Uint8Array(i);let c=0;for(const l of n)s.set(new Uint8Array(l),c),c+=l.byteLength;return s.buffer}}class tc{constructor(){this.promise=new Promise((n,i)=>[this._resolver,this._rejecter]=[n,i])}resolve(){this._resolver()}reject(n){this._rejecter(n)}}const i_="json";class o_{constructor(){this.name=i_,this.version=2,this.transferFormat=tn.Text}parseMessages(n,i){if(typeof n!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!n)return[];i===null&&(i=As.instance);const s=En.parse(n),c=[];for(const l of s){const d=JSON.parse(l);if(typeof d.type!="number")throw new Error("Invalid payload.");switch(d.type){case Ge.Invocation:this._isInvocationMessage(d);break;case Ge.StreamItem:this._isStreamItemMessage(d);break;case Ge.Completion:this._isCompletionMessage(d);break;case Ge.Ping:break;case Ge.Close:break;case Ge.Ack:this._isAckMessage(d);break;case Ge.Sequence:this._isSequenceMessage(d);break;default:i.log(Te.Information,"Unknown message type '"+d.type+"' ignored.");continue}c.push(d)}return c}writeMessage(n){return En.write(JSON.stringify(n))}_isInvocationMessage(n){this._assertNotEmptyString(n.target,"Invalid payload for Invocation message."),n.invocationId!==void 0&&this._assertNotEmptyString(n.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(n){if(this._assertNotEmptyString(n.invocationId,"Invalid payload for StreamItem message."),n.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(n){if(n.result&&n.error)throw new Error("Invalid payload for Completion message.");!n.result&&n.error&&this._assertNotEmptyString(n.error,"Invalid payload for Completion message."),this._assertNotEmptyString(n.invocationId,"Invalid payload for Completion message.")}_isAckMessage(n){if(typeof n.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(n){if(typeof n.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(n,i){if(typeof n!="string"||n==="")throw new Error(i)}}const s_={trace:Te.Trace,debug:Te.Debug,info:Te.Information,information:Te.Information,warn:Te.Warning,warning:Te.Warning,error:Te.Error,critical:Te.Critical,none:Te.None};function a_(r){const n=s_[r.toLowerCase()];if(typeof n<"u")return n;throw new Error(`Unknown log level: ${r}`)}class c_{configureLogging(n){if(Mt.isRequired(n,"logging"),l_(n))this.logger=n;else if(typeof n=="string"){const i=a_(n);this.logger=new vc(i)}else this.logger=new vc(n);return this}withUrl(n,i){return Mt.isRequired(n,"url"),Mt.isNotEmpty(n,"url"),this.url=n,typeof i=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...i}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:i},this}withHubProtocol(n){return Mt.isRequired(n,"protocol"),this.protocol=n,this}withAutomaticReconnect(n){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return n?Array.isArray(n)?this.reconnectPolicy=new ay(n):this.reconnectPolicy=n:this.reconnectPolicy=new ay,this}withServerTimeout(n){return Mt.isRequired(n,"milliseconds"),this._serverTimeoutInMilliseconds=n,this}withKeepAliveInterval(n){return Mt.isRequired(n,"milliseconds"),this._keepAliveIntervalInMilliseconds=n,this}withStatefulReconnect(n){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=n?.bufferSize,this}build(){const n=this.httpConnectionOptions||{};if(n.logger===void 0&&(n.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const i=new n_(this.url,n);return of.create(i,this.logger||As.instance,this.protocol||new o_,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function l_(r){return r.log!==void 0}class u_{constructor(){this.connection=null,this.isConnected=!1,this.messageHandlers=new Set}async connect(){if(!this.isConnected){this.connection=new c_().withUrl("http://localhost:7219/chathub",{accessTokenFactory:()=>{const n=localStorage.getItem("user");return n?JSON.parse(n).token:null}}).withAutomaticReconnect().build();try{await this.connection.start(),this.isConnected=!0,console.log("SignalR Connected")}catch(n){console.error("SignalR Connection Error:",n),this.isConnected=!1}}}async joinChat(n){this.isConnected||await this.connect();try{await this.connection.invoke("JoinChat",n)}catch(i){console.error("Error joining chat:",i)}}async sendMessage(n,i){this.isConnected||await this.connect();try{await this.connection.invoke("SendMessage",n,i)}catch(s){throw console.error("Error sending message:",s),s}}onReceiveMessage(n){this.connection&&!this.messageHandlers.has(n)&&(this.messageHandlers.add(n),this.connection.on("ReceiveMessage",n))}offReceiveMessage(n){this.connection&&this.messageHandlers.has(n)&&(this.messageHandlers.delete(n),this.connection.off("ReceiveMessage",n))}onError(n){this.connection&&this.connection.on("Error",n)}onMessageStatusUpdated(n){this.connection&&this.connection.on("MessageStatusUpdated",n)}async markDelivered(n,i){this.isConnected||await this.connect();try{await this.connection.invoke("MarkDelivered",n,i)}catch(s){console.error("Error marking delivered:",s)}}async markRead(n,i){this.isConnected||await this.connect();try{await this.connection.invoke("MarkRead",n,i)}catch(s){console.error("Error marking read:",s)}}async getMessageHistory(n){this.isConnected||await this.connect();try{return await this.connection.invoke("GetMessageHistory",n)}catch(i){return console.error("Error getting message history:",i),[]}}async disconnect(){this.connection&&this.isConnected&&(await this.connection.stop(),this.isConnected=!1)}}const pn=new u_,Gv=({recipientId:r,recipientName:n,onClose:i})=>{const[s,c]=q.useState([]),[l,d]=q.useState(""),[h,p]=q.useState(!1),[m,y]=q.useState(!1),[_,z]=q.useState(!0),F=localStorage.getItem("userId"),U=q.useRef(null),Z=q.useRef(null);q.useEffect(()=>(X(),()=>{Z.current&&pn.offReceiveMessage(Z.current)}),[r]);const X=async()=>{try{z(!0),await pn.connect(),console.log(" Joining chat with:",r),await pn.joinChat(r),console.log(" Joined chat successfully"),Z.current=ue=>{console.log(" Message received:",ue),ue.senderId===r?c(ne=>{if(ne.find(ie=>ie.id===ue.id))return ne;const ae={id:ue.id,sender:"Recipient",text:ue.message,timestamp:new Date(ue.timestamp),status:ue.status?.toLowerCase()||"sent"},ce=`chat_${[F,r].sort().join("_")}`;return console.log(" Calling MarkDelivered:",ue.id,ce),pn.markDelivered(ue.id,ce),setTimeout(async()=>{try{const ie=await ht.get(`chat/messages/${r}`);ie.data&&c(Re=>Re.map(xe=>{const Pe=ie.data.find(Je=>Je.id===xe.id);return Pe&&xe.sender==="Me"?(console.log(`Refreshed status for ${xe.id}: ${Pe.status}`),{...xe,status:Pe.status?.toLowerCase()}):xe}))}catch(ie){console.error("Failed to refresh status:",ie)}},500),[...ne,ae]}):console.log(" Ignoring message from self or other user")},pn.onReceiveMessage(Z.current),pn.onMessageStatusUpdated(ue=>{console.log(" Status updated event received:",ue),c(ne=>ne.map(ce=>ce.id===ue.messageId?(console.log(`Updating message ${ce.id} from ${ce.status} to ${ue.status}`),{...ce,status:ue.status?.toLowerCase()||ce.status}):ce))}),pn.onError(ue=>{console.error("Chat error:",ue)});try{const ue=await ht.get(`chat/messages/${r}`);if(ue.data&&ue.data.length>0){const ne=ue.data.map(ae=>({id:ae.id,sender:ae.senderId===F?"Me":"Recipient",text:ae.message,timestamp:new Date(ae.timestamp),status:ae.status?.toLowerCase()||"sent"}));c(ne)}}catch(ue){console.error("Failed to load message history:",ue)}y(!0)}catch(ue){console.error("Failed to initialize chat:",ue)}finally{z(!1)}};q.useEffect(()=>{ye();const ue=`chat_${[F,r].sort().join("_")}`;s.forEach(ne=>{ne.sender==="Recipient"&&ne.id&&ne.status!=="read"&&(console.log(" Marking as read:",ne.id,ue),pn.markRead(ne.id,ue))})},[s,F,r]);const ye=()=>{U.current?.scrollIntoView({behavior:"smooth"})},he=async ue=>{if(ue.preventDefault(),!(!l.trim()||!m))try{p(!0);const ne=l;d(""),await pn.sendMessage(r,ne),c(ae=>[...ae,{id:Date.now(),sender:"Me",text:ne,timestamp:new Date,status:"sent"}])}catch(ne){console.error("Failed to send message:",ne),alert("Failed to send message. Please try again."),d(messageText)}finally{p(!1)}};return g.jsxs("div",{className:"chat-widget",children:[g.jsxs("div",{className:"chat-header",children:[g.jsxs("div",{className:"chat-user-info",children:[g.jsx("div",{className:"user-avatar",children:""}),g.jsxs("div",{children:[g.jsx("div",{className:"user-name",children:n||"Chat"}),g.jsxs("div",{className:"user-status",children:[" ",m?"Online":"Connecting..."]})]})]}),g.jsx("button",{onClick:i,className:"close-btn",children:g.jsx(yv,{size:16})})]}),g.jsxs("div",{className:"chat-messages",children:[_?g.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:"Loading messages..."}):s.length===0?g.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:["Start a conversation with ",n]}):s.map((ue,ne)=>(console.log("Rendering message:",{id:ue.id,status:ue.status,sender:ue.sender}),g.jsxs("div",{className:`message ${ue.sender==="Me"?"sent":"received"}`,children:[g.jsx("div",{className:"message-content",children:ue.text}),g.jsxs("div",{style:{fontSize:"11px",color:"#65676b",marginTop:"2px",textAlign:"center"},children:[new Date(ue.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),ue.sender==="Me"&&g.jsx("span",{style:{marginLeft:"4px",color:ue.status==="read"?"#4ade80":"#65676b",fontWeight:"500"},children:ue.status==="read"?"Read":ue.status==="delivered"?"Delivered":"Sent"})]})]},ue.id||ne))),g.jsx("div",{ref:U})]}),g.jsxs("form",{onSubmit:he,className:"chat-input",children:[g.jsx("input",{type:"text",value:l,onChange:ue=>d(ue.target.value),placeholder:"Type a message...",className:"message-input"}),g.jsx("button",{type:"submit",className:"send-btn",disabled:h,children:g.jsx(Qd,{size:16})})]})]})},uy=({user:r})=>{const[n,i]=q.useState([]),[s,c]=q.useState(!0),[l,d]=q.useState({}),[h,p]=q.useState([]),[m,y]=q.useState([]),[_,z]=q.useState(null),[F,U]=q.useState(!1),[Z,X]=q.useState({}),[ye,he]=q.useState("Not connected"),ue=async()=>{try{he("Connecting..."),await pn.connect(),he(" Connected"),console.log("SignalR test successful"),pn.onReceiveMessage(Ae=>{console.log(" Test message received:",Ae),alert(`Message received from ${Ae.senderId}: ${Ae.message}`)})}catch(Ae){he(" Failed: "+Ae.message),console.error("SignalR test failed:",Ae)}},ne=async()=>{try{const Ae=prompt("Enter recipient userId to test:");if(!Ae)return;await pn.joinChat(Ae),await pn.sendMessage(Ae,"Test message from "+userId),console.log(" Test message sent to:",Ae),alert("Test message sent! Check console.")}catch(Ae){console.error(" Failed to send test message:",Ae),alert("Failed: "+Ae.message)}};q.useEffect(()=>{r&&r.token&&(Pe(),ae())},[r]);const ae=async()=>{try{const Ae=await ht.get("location/states-with-cities");X(Ae.data)}catch(Ae){console.error("Error fetching locations:",Ae)}};q.useEffect(()=>{ce()},[n,h]);const ce=()=>{if(h.length===0)y(n);else{const Ae=n.filter(Oe=>h.some(Ce=>Oe.location?.toLowerCase().includes(Ce.toLowerCase())));y(Ae)}},ie=Ae=>{d(Oe=>({...Oe,[Ae]:!Oe[Ae]}))},Re=Ae=>{p(Oe=>Oe.includes(Ae)?Oe.filter(Ce=>Ce!==Ae):[...Oe,Ae])},xe=()=>{p([])},Pe=async()=>{try{const Ae=await ht.get("user/browse"),Ce=(Array.isArray(Ae.data)?Ae.data:[Ae.data]).filter(Be=>Be.status==="Active"||Be.status==="Verified");i(Ce)}catch(Ae){console.error("Error fetching hosts:",Ae),Ae.response?.status!==401&&Ae.response?.status!==403&&i([])}finally{c(!1)}},Je=Ae=>{z({id:Ae.userId,name:Ae.name})};return s?g.jsx("div",{className:"container",children:g.jsxs("div",{className:"loading",style:{padding:"4rem",textAlign:"center"},children:[g.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),g.jsx("h3",{children:"Finding amazing hosts for you..."})]})}):g.jsxs("div",{className:"browse-layout",children:[g.jsxs("button",{className:"mobile-filter-toggle",onClick:()=>U(!F),children:[F?g.jsx(mv,{size:16}):g.jsx(gv,{size:16}),"Filters ",h.length>0&&`(${h.length})`]}),g.jsxs("div",{className:`location-sidebar ${F?"mobile-visible":""}`,children:[g.jsxs("div",{className:"filter-header",children:[g.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx(pv,{size:20,style:{color:"var(--primary)"}}),"Filter by Location"]}),h.length>0&&g.jsxs("button",{onClick:xe,className:"clear-filters-btn",children:["Clear (",h.length,")"]})]}),g.jsx("div",{className:"location-filters",children:Object.entries(Z).map(([Ae,Oe])=>g.jsxs("div",{className:"state-group",children:[g.jsxs("button",{className:"state-toggle",onClick:()=>ie(Ae),children:[l[Ae]?g.jsx(uv,{size:16}):g.jsx(dv,{size:16}),g.jsx("span",{children:Ae})]}),l[Ae]&&g.jsx("div",{className:"cities-list",children:Oe.map(Ce=>g.jsxs("label",{className:"city-checkbox",children:[g.jsx("input",{type:"checkbox",checked:h.includes(Ce),onChange:()=>Re(Ce)}),g.jsx("span",{children:Ce})]},Ce))})]},Ae))})]}),g.jsxs("div",{className:"browse-main",children:[g.jsxs("div",{className:"browse-header",children:[g.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx(S1,{size:24,style:{color:"var(--primary)"}}),"Available Hosts"]}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[g.jsxs("button",{onClick:ue,className:"btn btn-outline",style:{fontSize:"0.875rem",padding:"0.5rem 1rem"},children:["Test Chat: ",ye]}),ye.includes("")&&g.jsx("button",{onClick:ne,className:"btn btn-primary",style:{fontSize:"0.875rem",padding:"0.5rem 1rem"},children:"Send Test Message"}),g.jsx("div",{className:"results-count",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:!s&&g.jsxs(g.Fragment,{children:[g.jsx(Wd,{size:16,style:{color:"var(--text-light)"}}),g.jsxs("span",{children:[m.length," host",m.length!==1?"s":""," found"]})]})})]})]}),s?g.jsxs("div",{className:"loading",style:{padding:"4rem",textAlign:"center"},children:[g.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),g.jsx("h3",{children:"Finding amazing hosts for you..."})]}):g.jsx("div",{children:m.length===0?g.jsxs("div",{className:"no-results",children:[g.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),g.jsxs("h3",{style:{color:"#1e293b"},children:["No hosts found",h.length>0?" for selected locations":" in this area yet"]}),g.jsx("p",{style:{color:"#64748b"},children:h.length>0?"Try selecting different locations or clear filters.":"We're growing fast! Check back tomorrow for new Pongal celebrations."}),h.length>0&&g.jsx("button",{onClick:xe,className:"btn btn-outline",children:"Clear filters"})]}):g.jsx("div",{className:"compact-grid",children:m.map(Ae=>g.jsxs("div",{className:"host-card-horizontal",children:[g.jsxs("div",{className:"host-image-section",children:[g.jsx("img",{src:Ae.profileImageUrl||"https://via.placeholder.com/400x300?text=Host",alt:Ae.name,className:"host-card-img"}),Ae.status==="Verified"&&g.jsx("div",{className:"verified-badge",children:" Verified"}),g.jsxs("button",{className:"btn btn-primary chat-btn-overlay",onClick:()=>Je(Ae),children:[g.jsx(gc,{size:16,className:"chat-icon"}),g.jsx("span",{className:"chat-text",children:"Chat"})]})]}),g.jsxs("div",{className:"host-content-section",children:[g.jsx("h3",{className:"host-name",children:Ae.name}),g.jsxs("div",{className:"host-location",children:[" ",Ae.location.split(",")[0]]}),Ae.bio&&g.jsx("p",{className:"host-bio",children:Ae.bio})]})]},Ae.userId))})})]}),_&&g.jsx(Gv,{recipientId:_.id,recipientName:_.name,onClose:()=>z(null)})]})},d_=({user:r})=>{const[n,i]=q.useState([]),[s,c]=q.useState(!0),[l,d]=q.useState({}),[h,p]=q.useState([]),[m,y]=q.useState([]),[_,z]=q.useState(null),[F,U]=q.useState(!1),[Z,X]=q.useState({});q.useEffect(()=>{r.status==="Active"||r.status==="Verified"?(he(),ye()):c(!1)},[r.status]);const ye=async()=>{try{const ie=await ht.get("location/states-with-cities");X(ie.data)}catch(ie){console.error("Error fetching locations:",ie)}};q.useEffect(()=>{ue()},[n,h]);const he=async()=>{try{const ie=await ht.get("user/browse"),Re=Array.isArray(ie.data)?ie.data:[ie.data];i(Re)}catch(ie){console.error("Error fetching guests:",ie),i([])}finally{c(!1)}},ue=()=>{if(h.length===0)y(n);else{const ie=n.filter(Re=>h.some(xe=>Re.location?.toLowerCase().includes(xe.toLowerCase())));y(ie)}},ne=ie=>{d(Re=>({...Re,[ie]:!Re[ie]}))},ae=ie=>{p(Re=>Re.includes(ie)?Re.filter(xe=>xe!==ie):[...Re,ie])},ce=()=>{p([])};return r.status==="Pending"?g.jsx("div",{className:"container",style:{paddingTop:"5rem"},children:g.jsxs("div",{className:"card text-center",style:{maxWidth:"600px",margin:"0 auto",padding:"3rem 2rem",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[g.jsx("div",{style:{fontSize:"4rem",marginBottom:"1.5rem"},children:""}),g.jsx("h2",{style:{color:"#1e293b",fontSize:"2rem",marginBottom:"1rem"},children:"Registration Pending"}),g.jsx("p",{style:{color:"#64748b",fontSize:"1.1rem",lineHeight:"1.6",marginBottom:"2rem"},children:"Thank you for joining as a Host! Your registration is currently being verified by our team. Once approved, you'll be able to see guests and start hosting."}),g.jsxs("div",{style:{padding:"1.5rem",background:"#f8fafc",borderRadius:"0.75rem",border:"1px solid #e2e8f0",color:"#475569",textAlign:"left"},children:[g.jsx("p",{style:{margin:"0 0 0.5rem 0"},children:g.jsx("strong",{children:"Next Steps:"})}),g.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[g.jsx("li",{children:"Admin verifies your payment"}),g.jsx("li",{children:'Your profile becomes "Active"'}),g.jsx("li",{children:"You receive guests' contact requests"})]})]})]})}):s?g.jsx("div",{className:"container",children:g.jsxs("div",{className:"loading",style:{padding:"4rem",textAlign:"center"},children:[g.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),g.jsx("h3",{children:"Loading guests near you..."})]})}):g.jsxs("div",{className:"browse-layout",children:[g.jsxs("button",{className:"mobile-filter-toggle",onClick:()=>U(!F),children:[F?g.jsx(mv,{size:16}):g.jsx(gv,{size:16}),"Filters ",h.length>0&&`(${h.length})`]}),g.jsxs("div",{className:`location-sidebar ${F?"mobile-visible":""}`,children:[g.jsxs("div",{className:"filter-header",children:[g.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx(pv,{size:20,style:{color:"var(--primary)"}}),"Filter by Location"]}),h.length>0&&g.jsxs("button",{onClick:ce,className:"clear-filters-btn",children:["Clear (",h.length,")"]})]}),g.jsx("div",{className:"location-filters",children:Object.entries(Z).map(([ie,Re])=>g.jsxs("div",{className:"state-group",children:[g.jsxs("button",{className:"state-toggle",onClick:()=>ne(ie),children:[l[ie]?g.jsx(uv,{size:16}):g.jsx(dv,{size:16}),g.jsx("span",{children:ie})]}),l[ie]&&g.jsx("div",{className:"cities-list",children:Re.map(xe=>g.jsxs("label",{className:"city-checkbox",children:[g.jsx("input",{type:"checkbox",checked:h.includes(xe),onChange:()=>ae(xe)}),g.jsx("span",{children:xe})]},xe))})]},ie))})]}),g.jsxs("div",{className:"browse-main",children:[g.jsxs("div",{className:"browse-header",children:[g.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx(I1,{size:24,style:{color:"var(--primary)"}}),"Guests Looking for Festivals"]}),g.jsx("div",{className:"results-count",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:!s&&g.jsxs(g.Fragment,{children:[g.jsx(Wd,{size:16,style:{color:"var(--text-light)"}}),g.jsxs("span",{children:[m.length," guest",m.length!==1?"s":""," found"]})]})})]}),m.length===0?g.jsxs("div",{className:"no-results",children:[g.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),g.jsx("h3",{style:{color:"#1e293b"},children:h.length>0?"No guests found for selected locations":"No guests found right now"}),g.jsx("p",{style:{color:"#64748b"},children:h.length>0?"Try adjusting your location filters or check back later.":"Check back soon as more travelers join the festival celebrations!"}),h.length>0&&g.jsx("button",{onClick:ce,className:"btn btn-outline",children:"Clear filters"})]}):g.jsx("div",{className:"compact-grid",children:m.map(ie=>g.jsxs("div",{className:"host-card-horizontal",children:[g.jsxs("div",{className:"host-image-section",children:[g.jsx("img",{src:ie.profileImageUrl||"https://via.placeholder.com/400x300?text=Guest",alt:ie.name,className:"host-card-img"}),g.jsxs("button",{className:"btn btn-primary chat-btn-overlay",onClick:()=>z({id:ie.userId,name:ie.name}),children:[g.jsx(gc,{size:16,className:"chat-icon"}),g.jsx("span",{className:"chat-text",children:"Chat"})]})]}),g.jsxs("div",{className:"host-content-section",children:[g.jsx("h3",{className:"host-name",children:ie.name}),g.jsxs("div",{className:"host-location",children:[" ",ie.location?.split(",")[0]||"Location not specified"]}),ie.bio&&g.jsx("p",{className:"host-bio",children:ie.bio})]})]},ie.userId))})]}),_&&g.jsx(Gv,{recipientId:_.id,recipientName:_.name,onClose:()=>z(null)})]})};function br(r,n){var i={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&n.indexOf(s)<0&&(i[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(r);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(r,s[c])&&(i[s[c]]=r[s[c]]);return i}function dy(r){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&r[n],s=0;if(i)return i.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function ot(r){return this instanceof ot?(this.v=r,this):new ot(r)}function Fr(r,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(r,n||[]),c,l=[];return c=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",d),c[Symbol.asyncIterator]=function(){return this},c;function d(F){return function(U){return Promise.resolve(U).then(F,_)}}function h(F,U){s[F]&&(c[F]=function(Z){return new Promise(function(X,ye){l.push([F,Z,X,ye])>1||p(F,Z)})},U&&(c[F]=U(c[F])))}function p(F,U){try{m(s[F](U))}catch(Z){z(l[0][3],Z)}}function m(F){F.value instanceof ot?Promise.resolve(F.value.v).then(y,_):z(l[0][2],F)}function y(F){p("next",F)}function _(F){p("throw",F)}function z(F,U){F(U),l.shift(),l.length&&p(l[0][0],l[0][1])}}function hc(r){var n,i;return n={},s("next"),s("throw",function(c){throw c}),s("return"),n[Symbol.iterator]=function(){return this},n;function s(c,l){n[c]=r[c]?function(d){return(i=!i)?{value:ot(r[c](d)),done:!1}:l?l(d):d}:l}}function Xr(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r[Symbol.asyncIterator],i;return n?n.call(r):(r=typeof dy=="function"?dy(r):r[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(l){i[l]=r[l]&&function(d){return new Promise(function(h,p){d=r[l](d),c(h,p,d.done,d.value)})}}function c(l,d,h,p){Promise.resolve(p).then(function(m){l({value:m,done:h})},d)}}var md={exports:{}},nc,f_=new Uint8Array(16);function Fv(){if(!nc&&(nc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!nc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return nc(f_)}const h_=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Mc(r){return typeof r=="string"&&h_.test(r)}var Ft=[];for(var gd=0;gd<256;++gd)Ft.push((gd+256).toString(16).substr(1));function Uc(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=(Ft[r[n+0]]+Ft[r[n+1]]+Ft[r[n+2]]+Ft[r[n+3]]+"-"+Ft[r[n+4]]+Ft[r[n+5]]+"-"+Ft[r[n+6]]+Ft[r[n+7]]+"-"+Ft[r[n+8]]+Ft[r[n+9]]+"-"+Ft[r[n+10]]+Ft[r[n+11]]+Ft[r[n+12]]+Ft[r[n+13]]+Ft[r[n+14]]+Ft[r[n+15]]).toLowerCase();if(!Mc(i))throw TypeError("Stringified UUID is invalid");return i}var fy,yd,vd=0,bd=0;function p_(r,n,i){var s=n&&i||0,c=n||new Array(16);r=r||{};var l=r.node||fy,d=r.clockseq!==void 0?r.clockseq:yd;if(l==null||d==null){var h=r.random||(r.rng||Fv)();l==null&&(l=fy=[h[0]|1,h[1],h[2],h[3],h[4],h[5]]),d==null&&(d=yd=(h[6]<<8|h[7])&16383)}var p=r.msecs!==void 0?r.msecs:Date.now(),m=r.nsecs!==void 0?r.nsecs:bd+1,y=p-vd+(m-bd)/1e4;if(y<0&&r.clockseq===void 0&&(d=d+1&16383),(y<0||p>vd)&&r.nsecs===void 0&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");vd=p,bd=m,yd=d,p+=122192928e5;var _=((p&268435455)*1e4+m)%4294967296;c[s++]=_>>>24&255,c[s++]=_>>>16&255,c[s++]=_>>>8&255,c[s++]=_&255;var z=p/4294967296*1e4&268435455;c[s++]=z>>>8&255,c[s++]=z&255,c[s++]=z>>>24&15|16,c[s++]=z>>>16&255,c[s++]=d>>>8|128,c[s++]=d&255;for(var F=0;F<6;++F)c[s+F]=l[F];return n||Uc(c)}function Xv(r){if(!Mc(r))throw TypeError("Invalid UUID");var n,i=new Uint8Array(16);return i[0]=(n=parseInt(r.slice(0,8),16))>>>24,i[1]=n>>>16&255,i[2]=n>>>8&255,i[3]=n&255,i[4]=(n=parseInt(r.slice(9,13),16))>>>8,i[5]=n&255,i[6]=(n=parseInt(r.slice(14,18),16))>>>8,i[7]=n&255,i[8]=(n=parseInt(r.slice(19,23),16))>>>8,i[9]=n&255,i[10]=(n=parseInt(r.slice(24,36),16))/1099511627776&255,i[11]=n/4294967296&255,i[12]=n>>>24&255,i[13]=n>>>16&255,i[14]=n>>>8&255,i[15]=n&255,i}function m_(r){r=unescape(encodeURIComponent(r));for(var n=[],i=0;i<r.length;++i)n.push(r.charCodeAt(i));return n}var g_="6ba7b810-9dad-11d1-80b4-00c04fd430c8",y_="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Yv(r,n,i){function s(c,l,d,h){if(typeof c=="string"&&(c=m_(c)),typeof l=="string"&&(l=Xv(l)),l.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var p=new Uint8Array(16+c.length);if(p.set(l),p.set(c,l.length),p=i(p),p[6]=p[6]&15|n,p[8]=p[8]&63|128,d){h=h||0;for(var m=0;m<16;++m)d[h+m]=p[m];return d}return Uc(p)}try{s.name=r}catch{}return s.DNS=g_,s.URL=y_,s}function v_(r){if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=new Uint8Array(n.length);for(var i=0;i<n.length;++i)r[i]=n.charCodeAt(i)}return b_(S_(T_(r),r.length*8))}function b_(r){for(var n=[],i=r.length*32,s="0123456789abcdef",c=0;c<i;c+=8){var l=r[c>>5]>>>c%32&255,d=parseInt(s.charAt(l>>>4&15)+s.charAt(l&15),16);n.push(d)}return n}function Jv(r){return(r+64>>>9<<4)+14+1}function S_(r,n){r[n>>5]|=128<<n%32,r[Jv(n)-1]=n;for(var i=1732584193,s=-271733879,c=-1732584194,l=271733878,d=0;d<r.length;d+=16){var h=i,p=s,m=c,y=l;i=Kt(i,s,c,l,r[d],7,-680876936),l=Kt(l,i,s,c,r[d+1],12,-389564586),c=Kt(c,l,i,s,r[d+2],17,606105819),s=Kt(s,c,l,i,r[d+3],22,-1044525330),i=Kt(i,s,c,l,r[d+4],7,-176418897),l=Kt(l,i,s,c,r[d+5],12,1200080426),c=Kt(c,l,i,s,r[d+6],17,-1473231341),s=Kt(s,c,l,i,r[d+7],22,-45705983),i=Kt(i,s,c,l,r[d+8],7,1770035416),l=Kt(l,i,s,c,r[d+9],12,-1958414417),c=Kt(c,l,i,s,r[d+10],17,-42063),s=Kt(s,c,l,i,r[d+11],22,-1990404162),i=Kt(i,s,c,l,r[d+12],7,1804603682),l=Kt(l,i,s,c,r[d+13],12,-40341101),c=Kt(c,l,i,s,r[d+14],17,-1502002290),s=Kt(s,c,l,i,r[d+15],22,1236535329),i=Qt(i,s,c,l,r[d+1],5,-165796510),l=Qt(l,i,s,c,r[d+6],9,-1069501632),c=Qt(c,l,i,s,r[d+11],14,643717713),s=Qt(s,c,l,i,r[d],20,-373897302),i=Qt(i,s,c,l,r[d+5],5,-701558691),l=Qt(l,i,s,c,r[d+10],9,38016083),c=Qt(c,l,i,s,r[d+15],14,-660478335),s=Qt(s,c,l,i,r[d+4],20,-405537848),i=Qt(i,s,c,l,r[d+9],5,568446438),l=Qt(l,i,s,c,r[d+14],9,-1019803690),c=Qt(c,l,i,s,r[d+3],14,-187363961),s=Qt(s,c,l,i,r[d+8],20,1163531501),i=Qt(i,s,c,l,r[d+13],5,-1444681467),l=Qt(l,i,s,c,r[d+2],9,-51403784),c=Qt(c,l,i,s,r[d+7],14,1735328473),s=Qt(s,c,l,i,r[d+12],20,-1926607734),i=Wt(i,s,c,l,r[d+5],4,-378558),l=Wt(l,i,s,c,r[d+8],11,-2022574463),c=Wt(c,l,i,s,r[d+11],16,1839030562),s=Wt(s,c,l,i,r[d+14],23,-35309556),i=Wt(i,s,c,l,r[d+1],4,-1530992060),l=Wt(l,i,s,c,r[d+4],11,1272893353),c=Wt(c,l,i,s,r[d+7],16,-155497632),s=Wt(s,c,l,i,r[d+10],23,-1094730640),i=Wt(i,s,c,l,r[d+13],4,681279174),l=Wt(l,i,s,c,r[d],11,-358537222),c=Wt(c,l,i,s,r[d+3],16,-722521979),s=Wt(s,c,l,i,r[d+6],23,76029189),i=Wt(i,s,c,l,r[d+9],4,-640364487),l=Wt(l,i,s,c,r[d+12],11,-421815835),c=Wt(c,l,i,s,r[d+15],16,530742520),s=Wt(s,c,l,i,r[d+2],23,-995338651),i=Zt(i,s,c,l,r[d],6,-198630844),l=Zt(l,i,s,c,r[d+7],10,1126891415),c=Zt(c,l,i,s,r[d+14],15,-1416354905),s=Zt(s,c,l,i,r[d+5],21,-57434055),i=Zt(i,s,c,l,r[d+12],6,1700485571),l=Zt(l,i,s,c,r[d+3],10,-1894986606),c=Zt(c,l,i,s,r[d+10],15,-1051523),s=Zt(s,c,l,i,r[d+1],21,-2054922799),i=Zt(i,s,c,l,r[d+8],6,1873313359),l=Zt(l,i,s,c,r[d+15],10,-30611744),c=Zt(c,l,i,s,r[d+6],15,-1560198380),s=Zt(s,c,l,i,r[d+13],21,1309151649),i=Zt(i,s,c,l,r[d+4],6,-145523070),l=Zt(l,i,s,c,r[d+11],10,-1120210379),c=Zt(c,l,i,s,r[d+2],15,718787259),s=Zt(s,c,l,i,r[d+9],21,-343485551),i=Yr(i,h),s=Yr(s,p),c=Yr(c,m),l=Yr(l,y)}return[i,s,c,l]}function T_(r){if(r.length===0)return[];for(var n=r.length*8,i=new Uint32Array(Jv(n)),s=0;s<n;s+=8)i[s>>5]|=(r[s/8]&255)<<s%32;return i}function Yr(r,n){var i=(r&65535)+(n&65535),s=(r>>16)+(n>>16)+(i>>16);return s<<16|i&65535}function w_(r,n){return r<<n|r>>>32-n}function Dc(r,n,i,s,c,l){return Yr(w_(Yr(Yr(n,r),Yr(s,l)),c),i)}function Kt(r,n,i,s,c,l,d){return Dc(n&i|~n&s,r,n,c,l,d)}function Qt(r,n,i,s,c,l,d){return Dc(n&s|i&~s,r,n,c,l,d)}function Wt(r,n,i,s,c,l,d){return Dc(n^i^s,r,n,c,l,d)}function Zt(r,n,i,s,c,l,d){return Dc(i^(n|~s),r,n,c,l,d)}var C_=Yv("v3",48,v_);function R_(r,n,i){r=r||{};var s=r.random||(r.rng||Fv)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,n){i=i||0;for(var c=0;c<16;++c)n[i+c]=s[c];return n}return Uc(s)}function E_(r,n,i,s){switch(r){case 0:return n&i^~n&s;case 1:return n^i^s;case 2:return n&i^n&s^i&s;case 3:return n^i^s}}function Sd(r,n){return r<<n|r>>>32-n}function __(r){var n=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var s=unescape(encodeURIComponent(r));r=[];for(var c=0;c<s.length;++c)r.push(s.charCodeAt(c))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var l=r.length/4+2,d=Math.ceil(l/16),h=new Array(d),p=0;p<d;++p){for(var m=new Uint32Array(16),y=0;y<16;++y)m[y]=r[p*64+y*4]<<24|r[p*64+y*4+1]<<16|r[p*64+y*4+2]<<8|r[p*64+y*4+3];h[p]=m}h[d-1][14]=(r.length-1)*8/Math.pow(2,32),h[d-1][14]=Math.floor(h[d-1][14]),h[d-1][15]=(r.length-1)*8&4294967295;for(var _=0;_<d;++_){for(var z=new Uint32Array(80),F=0;F<16;++F)z[F]=h[_][F];for(var U=16;U<80;++U)z[U]=Sd(z[U-3]^z[U-8]^z[U-14]^z[U-16],1);for(var Z=i[0],X=i[1],ye=i[2],he=i[3],ue=i[4],ne=0;ne<80;++ne){var ae=Math.floor(ne/20),ce=Sd(Z,5)+E_(ae,X,ye,he)+ue+n[ae]+z[ne]>>>0;ue=he,he=ye,ye=Sd(X,30)>>>0,X=Z,Z=ce}i[0]=i[0]+Z>>>0,i[1]=i[1]+X>>>0,i[2]=i[2]+ye>>>0,i[3]=i[3]+he>>>0,i[4]=i[4]+ue>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,i[0]&255,i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,i[1]&255,i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,i[2]&255,i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,i[3]&255,i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,i[4]&255]}var x_=Yv("v5",80,__);const A_="00000000-0000-0000-0000-000000000000";function k_(r){if(!Mc(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const N_=Object.freeze(Object.defineProperty({__proto__:null,NIL:A_,parse:Xv,stringify:Uc,v1:p_,v3:C_,v4:R_,v5:x_,validate:Mc,version:k_},Symbol.toStringTag,{value:"Module"})),O_=Cc(N_);function Kv(r,n){return r=Math.ceil(r),n=Math.floor(n),Math.floor(Math.random()*(n-r+1))+r}function Qv(r,n){const i=n.retryDelayInMs*Math.pow(2,r),s=Math.min(n.maxRetryDelayInMs,i);return{retryAfterInMs:s/2+Kv(0,s/2)}}function af(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&!(r instanceof RegExp)&&!(r instanceof Date)}function cf(r){if(af(r)){const n=typeof r.name=="string",i=typeof r.message=="string";return n&&i}return!1}function jc(r,n){switch(n){case"utf-8":return U_(r);case"base64":return Wv(r);case"base64url":return M_(r);case"hex":return D_(r)}}function mn(r,n){switch(n){case"utf-8":return j_(r);case"base64":return Zv(r);case"base64url":return P_(r);case"hex":return I_(r)}}function Wv(r){return btoa([...r].map(n=>String.fromCharCode(n)).join(""))}function M_(r){return Wv(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function U_(r){return new TextDecoder().decode(r)}function D_(r){return[...r].map(n=>n.toString(16).padStart(2,"0")).join("")}function j_(r){return new TextEncoder().encode(r)}function Zv(r){return new Uint8Array([...atob(r)].map(n=>n.charCodeAt(0)))}function P_(r){const n=r.replace(/-/g,"+").replace(/_/g,"/");return Zv(n)}const hy=new Set("0123456789abcdefABCDEF");function I_(r){const n=new Uint8Array(r.length/2);for(let i=0;i<r.length/2;++i){const s=r[2*i],c=r[2*i+1];if(!hy.has(s)||!hy.has(c))return n.slice(0,i);n[i]=parseInt(`${s}${c}`,16)}return n}let rc;function e0(){if(rc)return rc;if(!self.crypto||!self.crypto.subtle)throw new Error("Your browser environment does not support cryptography functions.");return rc=self.crypto.subtle,rc}async function z_(r,n,i){const s=e0(),c=mn(r,"base64"),l=mn(n,"utf-8"),d=await s.importKey("raw",c,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),h=await s.sign({name:"HMAC",hash:{name:"SHA-256"}},d,l);return jc(new Uint8Array(h),i)}async function L_(r,n){const i=mn(r,"utf-8"),s=await e0().digest({name:"SHA-256"},i);return jc(new Uint8Array(s),n)}function B_(){let r="";for(let n=0;n<32;n++){const i=Math.floor(Math.random()*16);n===12?r+="4":n===16?r+=i&3|8:r+=i.toString(16),(n===7||n===11||n===15||n===19)&&(r+="-")}return r}const H_=typeof globalThis?.crypto?.randomUUID=="function"?globalThis.crypto.randomUUID.bind(globalThis.crypto):B_;function lf(){return H_()}const q_=typeof window<"u"&&typeof window.document<"u",$_=typeof self=="object"&&typeof self?.importScripts=="function"&&(self.constructor?.name==="DedicatedWorkerGlobalScope"||self.constructor?.name==="ServiceWorkerGlobalScope"||self.constructor?.name==="SharedWorkerGlobalScope"),t0=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u",n0=typeof Bun<"u"&&typeof Bun.version<"u",Kr=typeof globalThis.process<"u"&&!!globalThis.process.version&&!!globalThis.process.versions?.node,V_=Kr&&!n0&&!t0,G_=typeof navigator<"u"&&navigator?.product==="ReactNative",Td="REDACTED",F_=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],X_=["api-version"];class uf{allowedHeaderNames;allowedQueryParameters;constructor({additionalAllowedHeaderNames:n=[],additionalAllowedQueryParameters:i=[]}={}){n=F_.concat(n),i=X_.concat(i),this.allowedHeaderNames=new Set(n.map(s=>s.toLowerCase())),this.allowedQueryParameters=new Set(i.map(s=>s.toLowerCase()))}sanitize(n){const i=new Set;return JSON.stringify(n,(s,c)=>{if(c instanceof Error)return{...c,name:c.name,message:c.message};if(s==="headers")return this.sanitizeHeaders(c);if(s==="url")return this.sanitizeUrl(c);if(s==="query")return this.sanitizeQuery(c);if(s==="body")return;if(s==="response")return;if(s==="operationSpec")return;if(Array.isArray(c)||af(c)){if(i.has(c))return"[Circular]";i.add(c)}return c},2)}sanitizeUrl(n){if(typeof n!="string"||n===null||n==="")return n;const i=new URL(n);if(!i.search)return n;for(const[s]of i.searchParams)this.allowedQueryParameters.has(s.toLowerCase())||i.searchParams.set(s,Td);return i.toString()}sanitizeHeaders(n){const i={};for(const s of Object.keys(n))this.allowedHeaderNames.has(s.toLowerCase())?i[s]=n[s]:i[s]=Td;return i}sanitizeQuery(n){if(typeof n!="object"||n===null)return n;const i={};for(const s of Object.keys(n))this.allowedQueryParameters.has(s.toLowerCase())?i[s]=n[s]:i[s]=Td;return i}}async function Y_(r,n){const i=new AbortController;function s(){i.abort()}n?.abortSignal?.addEventListener("abort",s);try{return await Promise.race(r.map(c=>c({abortSignal:i.signal})))}finally{i.abort(),n?.abortSignal?.removeEventListener("abort",s)}}let J_=class extends Error{constructor(n){super(n),this.name="AbortError"}};function r0(r,n){const{cleanupBeforeAbort:i,abortSignal:s,abortErrorMsg:c}=n??{};return new Promise((l,d)=>{function h(){d(new J_(c??"The operation was aborted."))}function p(){s?.removeEventListener("abort",m)}function m(){i?.(),p(),h()}if(s?.aborted)return h();try{r(y=>{p(),l(y)},y=>{p(),d(y)})}catch(y){d(y)}s?.addEventListener("abort",m)})}const K_="The delay was aborted.";function i0(r,n){let i;const{abortSignal:s,abortErrorMsg:c}=n??{};return r0(l=>{i=setTimeout(l,r)},{cleanupBeforeAbort:()=>clearTimeout(i),abortSignal:s,abortErrorMsg:c??K_})}function Is(r){if(cf(r))return r.message;{let n;try{typeof r=="object"&&r?n=JSON.stringify(r):n=String(r)}catch{n="[unable to stringify input]"}return`Unknown error ${n}`}}function df(r){return typeof r<"u"&&r!==null}function Q_(r,n){if(!df(r)||typeof r!="object")return!1;for(const i of n)if(!o0(r,i))return!1;return!0}function o0(r,n){return df(r)&&typeof r=="object"&&n in r}function W_(r,n){return Qv(r,n)}function Z_(r,n){return L_(r,n)}function ex(r,n,i){return z_(r,n,i)}function tx(r,n){return Kv(r,n)}function s0(r){return cf(r)}function nx(r){return af(r)}function a0(){return lf()}const rx=q_,ix=n0,ox=t0,sx=Kr,bc=Kr,ax=V_,cx=G_,lx=$_;function ux(r,n){return jc(r,n)}function dx(r,n){return mn(r,n)}const fx=Object.freeze(Object.defineProperty({__proto__:null,calculateRetryDelay:W_,cancelablePromiseRace:Y_,computeSha256Hash:Z_,computeSha256Hmac:ex,createAbortablePromise:r0,delay:i0,getErrorMessage:Is,getRandomIntegerInclusive:tx,isBrowser:rx,isBun:ix,isDefined:df,isDeno:ox,isError:s0,isNode:sx,isNodeLike:bc,isNodeRuntime:ax,isObject:nx,isObjectWithProperties:Q_,isReactNative:cx,isWebWorker:lx,objectHasProperty:o0,randomUUID:a0,stringToUint8Array:dx,uint8ArrayToString:ux},Symbol.toStringTag,{value:"Module"})),hx=Cc(fx);function c0(r){let n="";for(let i=0;i<r.length;i++)n+=String.fromCharCode(r[i]);return btoa(n)}function l0(r){const n=atob(r),i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}function px(r){return atob(r)}const Bt="$",mo="_";function mx(r,n){return n!=="Composite"&&n!=="Dictionary"&&(typeof r=="string"||typeof r=="number"||typeof r=="boolean"||n?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||r===void 0||r===null)}const gx=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function yx(r){return gx.test(r)}const vx=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function bx(r){return vx.test(r)}function Sx(r){const n={...r.headers,...r.body};return r.hasNullableType&&Object.getOwnPropertyNames(n).length===0?r.shouldWrapBody?{body:null}:null:r.shouldWrapBody?{...r.headers,body:r.body}:n}function py(r,n){const i=r.parsedHeaders;if(r.request.method==="HEAD")return{...i,body:r.parsedBody};const s=n&&n.bodyMapper,c=!!s?.nullable,l=s?.type.name;if(l==="Stream")return{...i,blobBody:r.blobBody,readableStreamBody:r.readableStreamBody};const d=l==="Composite"&&s.type.modelProperties||{},h=Object.keys(d).some(p=>d[p].serializedName==="");if(l==="Sequence"||h){const p=r.parsedBody??[];for(const m of Object.keys(d))d[m].serializedName&&(p[m]=r.parsedBody?.[m]);if(i)for(const m of Object.keys(i))p[m]=i[m];return c&&!r.parsedBody&&!i&&Object.getOwnPropertyNames(d).length===0?null:p}return Sx({body:r.parsedBody,headers:i,hasNullableType:c,shouldWrapBody:mx(r.parsedBody,l)})}class Tx{modelMappers;isXML;constructor(n={},i=!1){this.modelMappers=n,this.isXML=i}validateConstraints(n,i,s){const c=(l,d)=>{throw new Error(`"${s}" with value "${i}" should satisfy the constraint "${l}": ${d}.`)};if(n.constraints&&i!==void 0&&i!==null){const{ExclusiveMaximum:l,ExclusiveMinimum:d,InclusiveMaximum:h,InclusiveMinimum:p,MaxItems:m,MaxLength:y,MinItems:_,MinLength:z,MultipleOf:F,Pattern:U,UniqueItems:Z}=n.constraints;if(l!==void 0&&i>=l&&c("ExclusiveMaximum",l),d!==void 0&&i<=d&&c("ExclusiveMinimum",d),h!==void 0&&i>h&&c("InclusiveMaximum",h),p!==void 0&&i<p&&c("InclusiveMinimum",p),m!==void 0&&i.length>m&&c("MaxItems",m),y!==void 0&&i.length>y&&c("MaxLength",y),_!==void 0&&i.length<_&&c("MinItems",_),z!==void 0&&i.length<z&&c("MinLength",z),F!==void 0&&i%F!==0&&c("MultipleOf",F),U){const X=typeof U=="string"?new RegExp(U):U;(typeof i!="string"||i.match(X)===null)&&c("Pattern",U)}Z&&i.some((X,ye,he)=>he.indexOf(X)!==ye)&&c("UniqueItems",Z)}}serialize(n,i,s,c={xml:{}}){const l={xml:{rootName:c.xml.rootName??"",includeRoot:c.xml.includeRoot??!1,xmlCharKey:c.xml.xmlCharKey??mo}};let d={};const h=n.type.name;s||(s=n.serializedName),h.match(/^Sequence$/i)!==null&&(d=[]),n.isConstant&&(i=n.defaultValue);const{required:p,nullable:m}=n;if(p&&m&&i===void 0)throw new Error(`${s} cannot be undefined.`);if(p&&!m&&i==null)throw new Error(`${s} cannot be null or undefined.`);if(!p&&m===!1&&i===null)throw new Error(`${s} cannot be null.`);return i==null||h.match(/^any$/i)!==null?d=i:h.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)!==null?d=xx(h,s,i):h.match(/^Enum$/i)!==null?d=Ax(s,n.type.allowedValues,i):h.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)!==null?d=Ox(h,i,s):h.match(/^ByteArray$/i)!==null?d=kx(s,i):h.match(/^Base64Url$/i)!==null?d=Nx(s,i):h.match(/^Sequence$/i)!==null?d=Mx(this,n,i,s,!!this.isXML,l):h.match(/^Dictionary$/i)!==null?d=Ux(this,n,i,s,!!this.isXML,l):h.match(/^Composite$/i)!==null&&(d=jx(this,n,i,s,!!this.isXML,l)),d}deserialize(n,i,s,c={xml:{}}){const l={xml:{rootName:c.xml.rootName??"",includeRoot:c.xml.includeRoot??!1,xmlCharKey:c.xml.xmlCharKey??mo},ignoreUnknownProperties:c.ignoreUnknownProperties??!1};if(i==null)return this.isXML&&n.type.name==="Sequence"&&!n.xmlIsWrapped&&(i=[]),n.defaultValue!==void 0&&(i=n.defaultValue),i;let d;const h=n.type.name;if(s||(s=n.serializedName),h.match(/^Composite$/i)!==null)d=Ix(this,n,i,s,l);else{if(this.isXML){const p=l.xml.xmlCharKey;i[Bt]!==void 0&&i[p]!==void 0&&(i=i[p])}h.match(/^Number$/i)!==null?(d=parseFloat(i),isNaN(d)&&(d=i)):h.match(/^Boolean$/i)!==null?i==="true"?d=!0:i==="false"?d=!1:d=i:h.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)!==null?d=i:h.match(/^(Date|DateTime|DateTimeRfc1123)$/i)!==null?d=new Date(i):h.match(/^UnixTime$/i)!==null?d=_x(i):h.match(/^ByteArray$/i)!==null?d=l0(i):h.match(/^Base64Url$/i)!==null?d=Rx(i):h.match(/^Sequence$/i)!==null?d=Lx(this,n,i,s,l):h.match(/^Dictionary$/i)!==null&&(d=zx(this,n,i,s,l))}return n.isConstant&&(d=n.defaultValue),d}}function ff(r={},n=!1){return new Tx(r,n)}function wx(r,n){let i=r.length;for(;i-1>=0&&r[i-1]===n;)--i;return r.substr(0,i)}function Cx(r){if(!r)return;if(!(r instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");const n=c0(r);return wx(n,"=").replace(/\+/g,"-").replace(/\//g,"_")}function Rx(r){if(r){if(r&&typeof r.valueOf()!="string")throw new Error("Please provide an input of type string for converting to Uint8Array");return r=r.replace(/-/g,"+").replace(/_/g,"/"),l0(r)}}function Dd(r){const n=[];let i="";if(r){const s=r.split(".");for(const c of s)c.charAt(c.length-1)==="\\"?i+=c.substr(0,c.length-1)+".":(i+=c,n.push(i),i="")}return n}function Ex(r){if(r)return typeof r.valueOf()=="string"&&(r=new Date(r)),Math.floor(r.getTime()/1e3)}function _x(r){if(r)return new Date(r*1e3)}function xx(r,n,i){if(i!=null){if(r.match(/^Number$/i)!==null){if(typeof i!="number")throw new Error(`${n} with value ${i} must be of type number.`)}else if(r.match(/^String$/i)!==null){if(typeof i.valueOf()!="string")throw new Error(`${n} with value "${i}" must be of type string.`)}else if(r.match(/^Uuid$/i)!==null){if(!(typeof i.valueOf()=="string"&&bx(i)))throw new Error(`${n} with value "${i}" must be of type string and a valid uuid.`)}else if(r.match(/^Boolean$/i)!==null){if(typeof i!="boolean")throw new Error(`${n} with value ${i} must be of type boolean.`)}else if(r.match(/^Stream$/i)!==null){const s=typeof i;if(s!=="string"&&typeof i.pipe!="function"&&typeof i.tee!="function"&&!(i instanceof ArrayBuffer)&&!ArrayBuffer.isView(i)&&!((typeof Blob=="function"||typeof Blob=="object")&&i instanceof Blob)&&s!=="function")throw new Error(`${n} must be a string, Blob, ArrayBuffer, ArrayBufferView, ReadableStream, or () => ReadableStream.`)}}return i}function Ax(r,n,i){if(!n)throw new Error(`Please provide a set of allowedValues to validate ${r} as an Enum Type.`);if(!n.some(c=>typeof c.valueOf()=="string"?c.toLowerCase()===i.toLowerCase():c===i))throw new Error(`${i} is not a valid value for ${r}. The valid values are: ${JSON.stringify(n)}.`);return i}function kx(r,n){if(n!=null){if(!(n instanceof Uint8Array))throw new Error(`${r} must be of type Uint8Array.`);n=c0(n)}return n}function Nx(r,n){if(n!=null){if(!(n instanceof Uint8Array))throw new Error(`${r} must be of type Uint8Array.`);n=Cx(n)}return n}function Ox(r,n,i){if(n!=null){if(r.match(/^Date$/i)!==null){if(!(n instanceof Date||typeof n.valueOf()=="string"&&!isNaN(Date.parse(n))))throw new Error(`${i} must be an instanceof Date or a string in ISO8601 format.`);n=n instanceof Date?n.toISOString().substring(0,10):new Date(n).toISOString().substring(0,10)}else if(r.match(/^DateTime$/i)!==null){if(!(n instanceof Date||typeof n.valueOf()=="string"&&!isNaN(Date.parse(n))))throw new Error(`${i} must be an instanceof Date or a string in ISO8601 format.`);n=n instanceof Date?n.toISOString():new Date(n).toISOString()}else if(r.match(/^DateTimeRfc1123$/i)!==null){if(!(n instanceof Date||typeof n.valueOf()=="string"&&!isNaN(Date.parse(n))))throw new Error(`${i} must be an instanceof Date or a string in RFC-1123 format.`);n=n instanceof Date?n.toUTCString():new Date(n).toUTCString()}else if(r.match(/^UnixTime$/i)!==null){if(!(n instanceof Date||typeof n.valueOf()=="string"&&!isNaN(Date.parse(n))))throw new Error(`${i} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);n=Ex(n)}else if(r.match(/^TimeSpan$/i)!==null&&!yx(n))throw new Error(`${i} must be a string in ISO 8601 format. Instead was "${n}".`)}return n}function Mx(r,n,i,s,c,l){if(!Array.isArray(i))throw new Error(`${s} must be of type Array.`);let d=n.type.element;if(!d||typeof d!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${s}.`);d.type.name==="Composite"&&d.type.className&&(d=r.modelMappers[d.type.className]??d);const h=[];for(let p=0;p<i.length;p++){const m=r.serialize(d,i[p],s,l);if(c&&d.xmlNamespace){const y=d.xmlNamespacePrefix?`xmlns:${d.xmlNamespacePrefix}`:"xmlns";d.type.name==="Composite"?(h[p]={...m},h[p][Bt]={[y]:d.xmlNamespace}):(h[p]={},h[p][l.xml.xmlCharKey]=m,h[p][Bt]={[y]:d.xmlNamespace})}else h[p]=m}return h}function Ux(r,n,i,s,c,l){if(typeof i!="object")throw new Error(`${s} must be of type object.`);const d=n.type.value;if(!d||typeof d!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${s}.`);const h={};for(const p of Object.keys(i)){const m=r.serialize(d,i[p],s,l);h[p]=f0(d,m,c,l)}if(c&&n.xmlNamespace){const p=n.xmlNamespacePrefix?`xmlns:${n.xmlNamespacePrefix}`:"xmlns",m=h;return m[Bt]={[p]:n.xmlNamespace},m}return h}function Dx(r,n,i){const s=n.type.additionalProperties;return!s&&n.type.className?u0(r,n,i)?.type.additionalProperties:s}function u0(r,n,i){const s=n.type.className;if(!s)throw new Error(`Class name for model "${i}" is not provided in the mapper "${JSON.stringify(n,void 0,2)}".`);return r.modelMappers[s]}function d0(r,n,i){let s=n.type.modelProperties;if(!s){const c=u0(r,n,i);if(!c)throw new Error(`mapper() cannot be null or undefined for model "${n.type.className}".`);if(s=c?.type.modelProperties,!s)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(c)}" of type "${n.type.className}" for object "${i}".`)}return s}function jx(r,n,i,s,c,l){if(Sc(r,n)&&(n=h0(r,n,i,"clientName")),i!=null){const d={},h=d0(r,n,s);for(const m of Object.keys(h)){const y=h[m];if(y.readOnly)continue;let _,z=d;if(r.isXML)y.xmlIsWrapped?_=y.xmlName:_=y.xmlElementName||y.xmlName;else{const F=Dd(y.serializedName);_=F.pop();for(const U of F){const Z=z[U];Z==null&&(i[m]!==void 0&&i[m]!==null||y.defaultValue!==void 0)&&(z[U]={}),z=z[U]}}if(z!=null){if(c&&n.xmlNamespace){const ye=n.xmlNamespacePrefix?`xmlns:${n.xmlNamespacePrefix}`:"xmlns";z[Bt]={...z[Bt],[ye]:n.xmlNamespace}}const F=y.serializedName!==""?s+"."+y.serializedName:s;let U=i[m];const Z=Sc(r,n);Z&&Z.clientName===m&&U==null&&(U=n.serializedName);const X=r.serialize(y,U,F,l);if(X!==void 0&&_!==void 0&&_!==null){const ye=f0(y,X,c,l);c&&y.xmlIsAttribute?(z[Bt]=z[Bt]||{},z[Bt][_]=X):c&&y.xmlIsWrapped?z[_]={[y.xmlElementName]:ye}:z[_]=ye}}}const p=Dx(r,n,s);if(p){const m=Object.keys(h);for(const y in i)m.every(z=>z!==y)&&(d[y]=r.serialize(p,i[y],s+'["'+y+'"]',l))}return d}return i}function f0(r,n,i,s){if(!i||!r.xmlNamespace)return n;const l={[r.xmlNamespacePrefix?`xmlns:${r.xmlNamespacePrefix}`:"xmlns"]:r.xmlNamespace};if(["Composite"].includes(r.type.name)){if(n[Bt])return n;{const h={...n};return h[Bt]=l,h}}const d={};return d[s.xml.xmlCharKey]=n,d[Bt]=l,d}function Px(r,n){return[Bt,n.xml.xmlCharKey].includes(r)}function Ix(r,n,i,s,c){const l=c.xml.xmlCharKey??mo;Sc(r,n)&&(n=h0(r,n,i,"serializedName"));const d=d0(r,n,s);let h={};const p=[];for(const y of Object.keys(d)){const _=d[y],z=Dd(d[y].serializedName);p.push(z[0]);const{serializedName:F,xmlName:U,xmlElementName:Z}=_;let X=s;F!==""&&F!==void 0&&(X=s+"."+F);const ye=_.headerCollectionPrefix;if(ye){const he={};for(const ue of Object.keys(i))ue.startsWith(ye)&&(he[ue.substring(ye.length)]=r.deserialize(_.type.value,i[ue],X,c)),p.push(ue);h[y]=he}else if(r.isXML)if(_.xmlIsAttribute&&i[Bt])h[y]=r.deserialize(_,i[Bt][U],X,c);else if(_.xmlIsMsText)i[l]!==void 0?h[y]=i[l]:typeof i=="string"&&(h[y]=i);else{const he=Z||U||F;if(_.xmlIsWrapped){const ne=i[U]?.[Z]??[];h[y]=r.deserialize(_,ne,X,c),p.push(U)}else{const ue=i[he];h[y]=r.deserialize(_,ue,X,c),p.push(he)}}else{let he,ue=i,ne=0;for(const ie of z){if(!ue)break;ne++,ue=ue[ie]}ue===null&&ne<z.length&&(ue=void 0),he=ue;const ae=n.type.polymorphicDiscriminator;ae&&y===ae.clientName&&he==null&&(he=n.serializedName);let ce;if(Array.isArray(i[y])&&d[y].serializedName===""){he=i[y];const ie=r.deserialize(_,he,X,c);for(const[Re,xe]of Object.entries(h))Object.prototype.hasOwnProperty.call(ie,Re)||(ie[Re]=xe);h=ie}else(he!==void 0||_.defaultValue!==void 0)&&(ce=r.deserialize(_,he,X,c),h[y]=ce)}}const m=n.type.additionalProperties;if(m){const y=_=>{for(const z in d)if(Dd(d[z].serializedName)[0]===_)return!1;return!0};for(const _ in i)y(_)&&(h[_]=r.deserialize(m,i[_],s+'["'+_+'"]',c))}else if(i&&!c.ignoreUnknownProperties)for(const y of Object.keys(i))h[y]===void 0&&!p.includes(y)&&!Px(y,c)&&(h[y]=i[y]);return h}function zx(r,n,i,s,c){const l=n.type.value;if(!l||typeof l!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${s}`);if(i){const d={};for(const h of Object.keys(i))d[h]=r.deserialize(l,i[h],s,c);return d}return i}function Lx(r,n,i,s,c){let l=n.type.element;if(!l||typeof l!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${s}`);if(i){Array.isArray(i)||(i=[i]),l.type.name==="Composite"&&l.type.className&&(l=r.modelMappers[l.type.className]??l);const d=[];for(let h=0;h<i.length;h++)d[h]=r.deserialize(l,i[h],`${s}[${h}]`,c);return d}return i}function Bx(r,n,i){const s=[i];for(;s.length;){const c=s.shift(),l=n===c?n:c+"."+n;if(Object.prototype.hasOwnProperty.call(r,l))return r[l];for(const[d,h]of Object.entries(r))d.startsWith(c+".")&&h.type.uberParent===c&&h.type.className&&s.push(h.type.className)}}function h0(r,n,i,s){const c=Sc(r,n);if(c){let l=c[s];if(l){s==="serializedName"&&(l=l.replace(/\\/gi,""));const d=i[l],h=n.type.uberParent??n.type.className;if(typeof d=="string"&&h){const p=Bx(r.modelMappers.discriminators,d,h);p&&(n=p)}}}return n}function Sc(r,n){return n.type.polymorphicDiscriminator||my(r,n.type.uberParent)||my(r,n.type.className)}function my(r,n){return n&&r.modelMappers[n]&&r.modelMappers[n].type.polymorphicDiscriminator}const Si={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};class hf extends Error{constructor(n){super(n),this.name="AbortError"}}function Hx(...r){if(r.length>0){const n=String(r[0]);n.includes(":error")?console.error(...r):n.includes(":warning")?console.warn(...r):n.includes(":info")?console.info(...r):n.includes(":verbose")?console.debug(...r):console.debug(...r)}}var gy={};const yy=typeof process<"u"&&gy&&gy.DEBUG||void 0;let p0,jd=[],Pd=[];const Tc=[];yy&&pf(yy);const fo=Object.assign(r=>m0(r),{enable:pf,enabled:mf,disable:qx,log:Hx});function pf(r){p0=r,jd=[],Pd=[];const n=r.split(",").map(i=>i.trim());for(const i of n)i.startsWith("-")?Pd.push(i.substring(1)):jd.push(i);for(const i of Tc)i.enabled=mf(i.namespace)}function mf(r){if(r.endsWith("*"))return!0;for(const n of Pd)if(vy(r,n))return!1;for(const n of jd)if(vy(r,n))return!0;return!1}function vy(r,n){if(n.indexOf("*")===-1)return r===n;let i=n;if(n.indexOf("**")!==-1){const z=[];let F="";for(const U of n)U==="*"&&F==="*"||(F=U,z.push(U));i=z.join("")}let s=0,c=0;const l=i.length,d=r.length;let h=-1,p=-1;for(;s<d&&c<l;)if(i[c]==="*"){if(h=c,c++,c===l)return!0;for(;r[s]!==i[c];)if(s++,s===d)return!1;p=s,s++,c++;continue}else if(i[c]===r[s])c++,s++;else if(h>=0){if(c=h+1,s=p+1,s===d)return!1;for(;r[s]!==i[c];)if(s++,s===d)return!1;p=s,s++,c++;continue}else return!1;const m=s===r.length,y=c===i.length,_=c===i.length-1&&i[c]==="*";return m&&(y||_)}function qx(){const r=p0||"";return pf(""),r}function m0(r){const n=Object.assign(i,{enabled:mf(r),destroy:$x,log:fo.log,namespace:r,extend:Vx});function i(...s){n.enabled&&(s.length>0&&(s[0]=`${r} ${s[0]}`),n.log(...s))}return Tc.push(n),n}function $x(){const r=Tc.indexOf(this);return r>=0?(Tc.splice(r,1),!0):!1}function Vx(r){const n=m0(`${this.namespace}:${r}`);return n.log=this.log,n}var by={};const Id=["verbose","info","warning","error"],Sy={verbose:400,info:300,warning:200,error:100};function Ty(r,n){n.log=(...i)=>{r.log(...i)}}function wy(r){return Id.includes(r)}function g0(r){const n=new Set,i=typeof process<"u"&&by&&by[r.logLevelEnvVarName]||void 0;let s;const c=fo(r.namespace);c.log=(...y)=>{fo.log(...y)};function l(y){if(y&&!wy(y))throw new Error(`Unknown log level '${y}'. Acceptable values: ${Id.join(",")}`);s=y;const _=[];for(const z of n)d(z)&&_.push(z.namespace);fo.enable(_.join(","))}i&&(wy(i)?l(i):console.error(`${r.logLevelEnvVarName} set to unknown log level '${i}'; logging is not enabled. Acceptable values: ${Id.join(", ")}.`));function d(y){return!!(s&&Sy[y.level]<=Sy[s])}function h(y,_){const z=Object.assign(y.extend(_),{level:_});if(Ty(y,z),d(z)){const F=fo.disable();fo.enable(F+","+z.namespace)}return n.add(z),z}function p(){return s}function m(y){const _=c.extend(y);return Ty(c,_),{error:h(_,"error"),warning:h(_,"warning"),info:h(_,"info"),verbose:h(_,"verbose")}}return{setLogLevel:l,getLogLevel:p,createClientLogger:m,logger:c}}const Gx=g0({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"});function y0(r){return Gx.createClientLogger(r)}function ic(r){return r.toLowerCase()}function*Fx(r){for(const n of r.values())yield[n.name,n.value]}class Xx{_headersMap;constructor(n){if(this._headersMap=new Map,n)for(const i of Object.keys(n))this.set(i,n[i])}set(n,i){this._headersMap.set(ic(n),{name:n,value:String(i).trim()})}get(n){return this._headersMap.get(ic(n))?.value}has(n){return this._headersMap.has(ic(n))}delete(n){this._headersMap.delete(ic(n))}toJSON(n={}){const i={};if(n.preserveCase)for(const s of this._headersMap.values())i[s.name]=s.value;else for(const[s,c]of this._headersMap)i[s]=c.value;return i}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return Fx(this._headersMap)}}function Ci(r){return new Xx(r)}class Yx{url;method;headers;timeout;withCredentials;body;multipartBody;formData;streamResponseStatusCodes;enableBrowserStreams;proxySettings;disableKeepAlive;abortSignal;requestId;allowInsecureConnection;onUploadProgress;onDownloadProgress;requestOverrides;authSchemes;constructor(n){this.url=n.url,this.body=n.body,this.headers=n.headers??Ci(),this.method=n.method??"GET",this.timeout=n.timeout??0,this.multipartBody=n.multipartBody,this.formData=n.formData,this.disableKeepAlive=n.disableKeepAlive??!1,this.proxySettings=n.proxySettings,this.streamResponseStatusCodes=n.streamResponseStatusCodes,this.withCredentials=n.withCredentials??!1,this.abortSignal=n.abortSignal,this.onUploadProgress=n.onUploadProgress,this.onDownloadProgress=n.onDownloadProgress,this.requestId=n.requestId||lf(),this.allowInsecureConnection=n.allowInsecureConnection??!1,this.enableBrowserStreams=n.enableBrowserStreams??!1,this.requestOverrides=n.requestOverrides,this.authSchemes=n.authSchemes}}function v0(r){return new Yx(r)}const Cy=new Set(["Deserialize","Serialize","Retry","Sign"]);class wc{_policies=[];_orderedPolicies;constructor(n){this._policies=n?.slice(0)??[],this._orderedPolicies=void 0}addPolicy(n,i={}){if(i.phase&&i.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(i.phase&&!Cy.has(i.phase))throw new Error(`Invalid phase name: ${i.phase}`);if(i.afterPhase&&!Cy.has(i.afterPhase))throw new Error(`Invalid afterPhase name: ${i.afterPhase}`);this._policies.push({policy:n,options:i}),this._orderedPolicies=void 0}removePolicy(n){const i=[];return this._policies=this._policies.filter(s=>n.name&&s.policy.name===n.name||n.phase&&s.options.phase===n.phase?(i.push(s.policy),!1):!0),this._orderedPolicies=void 0,i}sendRequest(n,i){return this.getOrderedPolicies().reduceRight((l,d)=>h=>d.sendRequest(h,l),l=>n.sendRequest(l))(i)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new wc(this._policies)}static create(){return new wc}orderPolicies(){const n=[],i=new Map;function s(U){return{name:U,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}const c=s("Serialize"),l=s("None"),d=s("Deserialize"),h=s("Retry"),p=s("Sign"),m=[c,l,d,h,p];function y(U){return U==="Retry"?h:U==="Serialize"?c:U==="Deserialize"?d:U==="Sign"?p:l}for(const U of this._policies){const Z=U.policy,X=U.options,ye=Z.name;if(i.has(ye))throw new Error("Duplicate policy names not allowed in pipeline");const he={policy:Z,dependsOn:new Set,dependants:new Set};X.afterPhase&&(he.afterPhase=y(X.afterPhase),he.afterPhase.hasAfterPolicies=!0),i.set(ye,he),y(X.phase).policies.add(he)}for(const U of this._policies){const{policy:Z,options:X}=U,ye=Z.name,he=i.get(ye);if(!he)throw new Error(`Missing node for policy ${ye}`);if(X.afterPolicies)for(const ue of X.afterPolicies){const ne=i.get(ue);ne&&(he.dependsOn.add(ne),ne.dependants.add(he))}if(X.beforePolicies)for(const ue of X.beforePolicies){const ne=i.get(ue);ne&&(ne.dependsOn.add(he),he.dependants.add(ne))}}function _(U){U.hasRun=!0;for(const Z of U.policies)if(!(Z.afterPhase&&(!Z.afterPhase.hasRun||Z.afterPhase.policies.size))&&Z.dependsOn.size===0){n.push(Z.policy);for(const X of Z.dependants)X.dependsOn.delete(Z);i.delete(Z.policy.name),U.policies.delete(Z)}}function z(){for(const U of m){if(_(U),U.policies.size>0&&U!==l){l.hasRun||_(l);return}U.hasAfterPolicies&&_(l)}}let F=0;for(;i.size>0;){F++;const U=n.length;if(z(),n.length<=U&&F>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return n}}function b0(){return wc.create()}const Jx=Symbol(),Kx=new uf;let Ri=class S0 extends Error{static REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";static PARSE_ERROR="PARSE_ERROR";code;statusCode;request;response;details;constructor(n,i={}){super(n),this.name="RestError",this.code=i.code,this.statusCode=i.statusCode,Object.defineProperty(this,"request",{value:i.request,enumerable:!1}),Object.defineProperty(this,"response",{value:i.response,enumerable:!1});const s=this.request?.agent?{maxFreeSockets:this.request.agent.maxFreeSockets,maxSockets:this.request.agent.maxSockets}:void 0;Object.defineProperty(this,Jx,{value:()=>`RestError: ${this.message} 
 ${Kx.sanitize({...this,request:{...this.request,agent:s},response:this.response})}`,enumerable:!1}),Object.setPrototypeOf(this,S0.prototype)}};function T0(r){return r instanceof Ri?!0:cf(r)&&r.name==="RestError"}function w0(r){return!!(r&&typeof r.pipe=="function")}function Pc(r){return!!(r&&typeof r.getReader=="function"&&typeof r.tee=="function")}function C0(r){return r!==void 0&&(r instanceof Uint8Array||R0(r)||typeof r=="function"||r instanceof Blob)}function R0(r){return w0(r)||Pc(r)}function Qx(r){return typeof r.stream=="function"}function Wx(r){if(r.buffer instanceof ArrayBuffer&&r.byteOffset===0&&r.byteLength===r.buffer.byteLength)return r.buffer;const n=new ArrayBuffer(r.byteLength),i=new Uint8Array(n),s=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);return i.set(s),i.buffer}function Zx(r){return(typeof Blob=="function"||typeof Blob=="object")&&r instanceof Blob}class eA{async sendRequest(n){if(new URL(n.url).protocol!=="https:"&&!n.allowInsecureConnection)throw new Error(`Cannot connect to ${n.url} while allowInsecureConnection is false.`);if(n.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");try{return await tA(n)}catch(c){throw iA(c,n)}}}async function tA(r){const{abortController:n,abortControllerCleanup:i}=rA(r);try{const s=oA(r.headers),{streaming:c,body:l}=aA(r),d={body:l,method:r.method,headers:s,signal:n.signal,..."credentials"in Request.prototype?{credentials:r.withCredentials?"include":"same-origin"}:{},..."cache"in Request.prototype?{cache:"no-store"}:{}};c&&(d.duplex="half");const h=await fetch(r.url,{...d,...r.requestOverrides});return Zx(r.body)&&r.onUploadProgress&&r.onUploadProgress({loadedBytes:r.body.size}),nA(h,r,i)}catch(s){throw i?.(),s}}async function nA(r,n,i){const s=sA(r),c={request:n,headers:s,status:r.status},l=Pc(r.body)?E0(r.body,{onProgress:n.onDownloadProgress,onEnd:i}):r.body;if(n.streamResponseStatusCodes?.has(Number.POSITIVE_INFINITY)||n.streamResponseStatusCodes?.has(c.status))if(n.enableBrowserStreams)c.browserStreamBody=l??void 0;else{const d=new Response(l);c.blobBody=d.blob(),i?.()}else{const d=new Response(l);c.bodyAsText=await d.text(),i?.()}return c}function rA(r){const n=new AbortController;let i,s;if(r.abortSignal){if(r.abortSignal.aborted)throw new hf("The operation was aborted. Request has already been canceled.");s=c=>{c.type==="abort"&&n.abort()},r.abortSignal.addEventListener("abort",s),i=()=>{s&&r.abortSignal?.removeEventListener("abort",s)}}return r.timeout>0&&setTimeout(()=>{n.abort()},r.timeout),{abortController:n,abortControllerCleanup:i}}function iA(r,n){return r&&r?.name==="AbortError"?r:new Ri(`Error sending request: ${r.message}`,{code:r?.code??Ri.REQUEST_SEND_ERROR,request:n})}function oA(r){const n=new Headers;for(const[i,s]of r)n.append(i,s);return n}function sA(r){const n=Ci();for(const[i,s]of r.headers)n.set(i,s);return n}function aA(r){const n=typeof r.body=="function"?r.body():r.body;if(w0(n))throw new Error("Node streams are not supported in browser environment.");return Pc(n)?{streaming:!0,body:E0(n,{onProgress:r.onUploadProgress})}:typeof n=="object"&&n&&"buffer"in n?{streaming:!1,body:Wx(n)}:n===void 0?{streaming:!1}:{streaming:!1,body:n}}function E0(r,n={}){let i=0;const{onProgress:s,onEnd:c}=n;if(lA(r))return r.pipeThrough(new TransformStream({transform(l,d){if(l===null){d.terminate();return}d.enqueue(l),i+=l.length,s&&s({loadedBytes:i})},flush(){c?.()}}));{const l=r.getReader();return new ReadableStream({async pull(d){const{done:h,value:p}=await l.read();if(h||!p){c?.(),d.close(),l.releaseLock();return}i+=p?.length??0,d.enqueue(p),s&&s({loadedBytes:i})},cancel(d){return c?.(),l.cancel(d)}})}}function cA(){return new eA}function lA(r){return r.pipeThrough!==void 0&&self.TransformStream!==void 0}function _0(){return cA()}const x0=y0("ts-http-runtime"),A0="logPolicy";function k0(r={}){const n=r.logger??x0.info,i=new uf({additionalAllowedHeaderNames:r.additionalAllowedHeaderNames,additionalAllowedQueryParameters:r.additionalAllowedQueryParameters});return{name:A0,async sendRequest(s,c){if(!n.enabled)return c(s);n(`Request: ${i.sanitize(s)}`);const l=await c(s);return n(`Response status code: ${l.status}`),n(`Headers: ${i.sanitize(l.headers)}`),l}}}const N0="redirectPolicy",Ry=["GET","HEAD"];function O0(r={}){const{maxRetries:n=20}=r;return{name:N0,async sendRequest(i,s){const c=await s(i);return M0(s,c,n)}}}async function M0(r,n,i,s=0){const{request:c,status:l,headers:d}=n,h=d.get("location");if(h&&(l===300||l===301&&Ry.includes(c.method)||l===302&&Ry.includes(c.method)||l===303&&c.method==="POST"||l===307)&&s<i){const p=new URL(h,c.url);c.url=p.toString(),l===303&&(c.method="GET",c.headers.delete("Content-Length"),delete c.body),c.headers.delete("Authorization");const m=await r(c);return M0(r,m,i,s+1)}return n}function uA(){return"x-ms-useragent"}function dA(r){const n=[{name:"Firefox",regex:/Firefox\/([\d.]+)/},{name:"Safari",regex:/Version\/([\d.]+).*Safari/}];for(const i of n){const s=r.match(i.regex);if(s)return{brand:i.name,version:s[1]}}}function fA(r){const n=["Google Chrome","Microsoft Edge","Opera","Brave","Chromium"];for(const i of n){const s=r.find(c=>c.brand===i);if(s)return s}}async function hA(r){const n=globalThis.navigator;let i="unknown";if(n?.userAgentData){const s=await n.userAgentData.getHighEntropyValues(["architecture","platformVersion"]);i=`${s.platform} ${s.platformVersion}; ${s.architecture}`;const c=fA(n.userAgentData.brands);c&&r.set(c.brand,`${c.version} (${i})`)}else if(n?.platform){i=n.platform;const s=dA(n.userAgent);s&&r.set(s.brand,`${s.version} (${i})`)}else typeof globalThis.EdgeRuntime=="string"&&r.set("EdgeRuntime",`${globalThis.EdgeRuntime} (${i})`)}const pA="0.3.2",go=3;function mA(r){const n=[];for(const[i,s]of r){const c=s?`${i}/${s}`:i;n.push(c)}return n.join(" ")}function gA(){return uA()}async function yA(r){const n=new Map;n.set("ts-http-runtime",pA),await hA(n);const i=mA(n);return r?`${r} ${i}`:i}const Ey=gA(),vA="userAgentPolicy";function bA(r={}){const n=yA(r.userAgentPrefix);return{name:vA,async sendRequest(i,s){return i.headers.has(Ey)||i.headers.set(Ey,await n),s(i)}}}const SA="decompressResponsePolicy";function U0(){throw new Error("decompressResponsePolicy is not supported in browser environment")}const TA="The operation was aborted.";function wA(r,n,i){return new Promise((s,c)=>{let l,d;const h=()=>c(new hf(i?.abortErrorMsg?i?.abortErrorMsg:TA)),p=()=>{i?.abortSignal&&d&&i.abortSignal.removeEventListener("abort",d)};if(d=()=>(l&&clearTimeout(l),p(),h()),i?.abortSignal&&i.abortSignal.aborted)return h();l=setTimeout(()=>{p(),s(n)},r),i?.abortSignal&&i.abortSignal.addEventListener("abort",d)})}function CA(r,n){const i=r.headers.get(n);if(!i)return;const s=Number(i);if(!Number.isNaN(s))return s}const zd="Retry-After",RA=["retry-after-ms","x-ms-retry-after-ms",zd];function D0(r){if(r&&[429,503].includes(r.status))try{for(const c of RA){const l=CA(r,c);if(l===0||l)return l*(c===zd?1e3:1)}const n=r.headers.get(zd);if(!n)return;const s=Date.parse(n)-Date.now();return Number.isFinite(s)?Math.max(0,s):void 0}catch{return}}function EA(r){return Number.isFinite(D0(r))}function j0(){return{name:"throttlingRetryStrategy",retry({response:r}){const n=D0(r);return Number.isFinite(n)?{retryAfterInMs:n}:{skipStrategy:!0}}}}const _A=1e3,xA=1e3*64;function gf(r={}){const n=r.retryDelayInMs??_A,i=r.maxRetryDelayInMs??xA;return{name:"exponentialRetryStrategy",retry({retryCount:s,response:c,responseError:l}){const d=kA(l),h=d&&r.ignoreSystemErrors,p=AA(c),m=p&&r.ignoreHttpStatusCodes;return c&&(EA(c)||!p)||m||h?{skipStrategy:!0}:l&&!d&&!p?{errorToThrow:l}:Qv(s,{retryDelayInMs:n,maxRetryDelayInMs:i})}}}function AA(r){return!!(r&&r.status!==void 0&&(r.status>=500||r.status===408)&&r.status!==501&&r.status!==505)}function kA(r){return r?r.code==="ETIMEDOUT"||r.code==="ESOCKETTIMEDOUT"||r.code==="ECONNREFUSED"||r.code==="ECONNRESET"||r.code==="ENOENT"||r.code==="ENOTFOUND":!1}const NA=y0("ts-http-runtime retryPolicy"),OA="retryPolicy";function zs(r,n={maxRetries:go}){const i=n.logger||NA;return{name:OA,async sendRequest(s,c){let l,d,h=-1;e:for(;;){h+=1,l=void 0,d=void 0;try{i.info(`Retry ${h}: Attempting to send request`,s.requestId),l=await c(s),i.info(`Retry ${h}: Received a response from request`,s.requestId)}catch(p){if(i.error(`Retry ${h}: Received an error from request`,s.requestId),d=p,!p||d.name!=="RestError")throw p;l=d.response}if(s.abortSignal?.aborted)throw i.error(`Retry ${h}: Request aborted.`),new hf;if(h>=(n.maxRetries??go)){if(i.info(`Retry ${h}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),d)throw d;if(l)return l;throw new Error("Maximum retries reached with no response or error to throw")}i.info(`Retry ${h}: Processing ${r.length} retry strategies.`);t:for(const p of r){const m=p.logger||i;m.info(`Retry ${h}: Processing retry strategy ${p.name}.`);const y=p.retry({retryCount:h,response:l,responseError:d});if(y.skipStrategy){m.info(`Retry ${h}: Skipped.`);continue t}const{errorToThrow:_,retryAfterInMs:z,redirectTo:F}=y;if(_)throw m.error(`Retry ${h}: Retry strategy ${p.name} throws error:`,_),_;if(z||z===0){m.info(`Retry ${h}: Retry strategy ${p.name} retries after ${z}`),await wA(z,void 0,{abortSignal:s.abortSignal});continue e}if(F){m.info(`Retry ${h}: Retry strategy ${p.name} redirects to ${F}`),s.url=F;continue e}}if(d)throw i.info("None of the retry strategies could work with the received error. Throwing it."),d;if(l)return i.info("None of the retry strategies could work with the received response. Returning it."),l}}}}const MA="defaultRetryPolicy";function P0(r={}){return{name:MA,sendRequest:zs([j0(),gf(r)],{maxRetries:r.maxRetries??go}).sendRequest}}const I0="formDataPolicy";function UA(r){const n={};for(const[i,s]of r.entries())n[i]??=[],n[i].push(s);return n}function z0(){return{name:I0,async sendRequest(r,n){if(Kr&&typeof FormData<"u"&&r.body instanceof FormData&&(r.formData=UA(r.body),r.body=void 0),r.formData){const i=r.headers.get("Content-Type");i&&i.indexOf("application/x-www-form-urlencoded")!==-1?r.body=DA(r.formData):await jA(r.formData,r),r.formData=void 0}return n(r)}}}function DA(r){const n=new URLSearchParams;for(const[i,s]of Object.entries(r))if(Array.isArray(s))for(const c of s)n.append(i,c.toString());else n.append(i,s.toString());return n.toString()}async function jA(r,n){const i=n.headers.get("Content-Type");if(i&&!i.startsWith("multipart/form-data"))return;n.headers.set("Content-Type",i??"multipart/form-data");const s=[];for(const[c,l]of Object.entries(r))for(const d of Array.isArray(l)?l:[l])if(typeof d=="string")s.push({headers:Ci({"Content-Disposition":`form-data; name="${c}"`}),body:mn(d,"utf-8")});else{if(d==null||typeof d!="object")throw new Error(`Unexpected value for key ${c}: ${d}. Value should be serialized to string first.`);{const h=d.name||"blob",p=Ci();p.set("Content-Disposition",`form-data; name="${c}"; filename="${h}"`),p.set("Content-Type",d.type||"application/octet-stream"),s.push({headers:p,body:d})}}n.multipartBody={parts:s}}const PA="proxyPolicy",L0="proxyPolicy is not supported in browser environment";function IA(){throw new Error(L0)}function B0(){throw new Error(L0)}const H0="agentPolicy";function q0(r){return{name:H0,sendRequest:async(n,i)=>(n.agent||(n.agent=r),i(n))}}const $0="tlsPolicy";function V0(r){return{name:$0,sendRequest:async(n,i)=>(n.tlsSettings||(n.tlsSettings=r),i(n))}}function zA(r){return new Response(r).blob()}async function LA(r){if(r instanceof Blob||r instanceof Uint8Array)return r;if(Pc(r))return zA(r);throw new Error("Unsupported source type. Only Blob, Uint8Array, and ReadableStream are supported in browser.")}function BA(r){return"resize"in r.buffer?r:r.map(n=>n)}async function HA(r){const n=[];for(const i of r){const s=await LA(typeof i=="function"?i():i);s instanceof Blob?n.push(s):n.push(new Blob([BA(s)]))}return new Blob(n)}function qA(){return`----AzSDKFormBoundary${lf()}`}function $A(r){let n="";for(const[i,s]of r)n+=`${i}: ${s}\r
`;return n}function VA(r){return r instanceof Uint8Array?r.byteLength:Qx(r)?r.size===-1?void 0:r.size:void 0}function GA(r){let n=0;for(const i of r){const s=VA(i);if(s===void 0)return;n+=s}return n}async function FA(r,n,i){const s=[mn(`--${i}`,"utf-8"),...n.flatMap(l=>[mn(`\r
`,"utf-8"),mn($A(l.headers),"utf-8"),mn(`\r
`,"utf-8"),l.body,mn(`\r
--${i}`,"utf-8")]),mn(`--\r
\r
`,"utf-8")],c=GA(s);c&&r.headers.set("Content-Length",c),r.body=await HA(s)}const yf="multipartPolicy",XA=70,YA=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function JA(r){if(r.length>XA)throw new Error(`Multipart boundary "${r}" exceeds maximum length of 70 characters`);if(Array.from(r).some(n=>!YA.has(n)))throw new Error(`Multipart boundary "${r}" contains invalid characters`)}function G0(){return{name:yf,async sendRequest(r,n){if(!r.multipartBody)return n(r);if(r.body)throw new Error("multipartBody and regular body cannot be set at the same time");let i=r.multipartBody.boundary;const s=r.headers.get("Content-Type")??"multipart/mixed",c=s.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!c)throw new Error(`Got multipart request body, but content-type header was not multipart: ${s}`);const[,l,d]=c;if(d&&i&&d!==i)throw new Error(`Multipart boundary was specified as ${d} in the header, but got ${i} in the request body`);return i??=d,i?JA(i):i=qA(),r.headers.set("Content-Type",`${l}; boundary=${i}`),await FA(r,r.multipartBody.parts,i),r.multipartBody=void 0,n(r)}}}function KA(r){const n=b0();return Kr&&(r.agent&&n.addPolicy(q0(r.agent)),r.tlsOptions&&n.addPolicy(V0(r.tlsOptions)),n.addPolicy(B0(r.proxyOptions)),n.addPolicy(U0())),n.addPolicy(z0(),{beforePolicies:[yf]}),n.addPolicy(bA(r.userAgentOptions)),n.addPolicy(G0(),{afterPhase:"Deserialize"}),n.addPolicy(P0(r.retryOptions),{phase:"Retry"}),Kr&&n.addPolicy(O0(r.redirectOptions),{afterPhase:"Retry"}),n.addPolicy(k0(r.loggingOptions),{afterPhase:"Sign"}),n}const QA="ApiVersionPolicy";function WA(r){return{name:QA,sendRequest:(n,i)=>{const s=new URL(n.url);return!s.searchParams.get("api-version")&&r.apiVersion&&(n.url=`${n.url}${Array.from(s.searchParams.keys()).length>0?"&":"?"}api-version=${r.apiVersion}`),i(n)}}}function ZA(r){return"getOAuth2Token"in r}function ek(r){return"getBearerToken"in r}function tk(r){return"username"in r&&"password"in r}function nk(r){return"key"in r}let _y=!1;function rk(r,n){if(n.allowInsecureConnection&&r.allowInsecureConnection){const i=new URL(r.url);if(i.hostname==="localhost"||i.hostname==="127.0.0.1")return!0}return!1}function ik(){const r="Sending token over insecure transport. Assume any token issued is compromised.";x0.warning(r),typeof process?.emitWarning=="function"&&!_y&&(_y=!0,process.emitWarning(r))}function Ic(r,n){if(!r.url.toLowerCase().startsWith("https://"))if(rk(r,n))ik();else throw new Error("Authentication is not permitted for non-TLS protected (non-https) URLs when allowInsecureConnection is false.")}const ok="apiKeyAuthenticationPolicy";function sk(r){return{name:ok,async sendRequest(n,i){Ic(n,r);const s=(n.authSchemes??r.authSchemes)?.find(c=>c.kind==="apiKey");if(!s)return i(n);if(s.apiKeyLocation!=="header")throw new Error(`Unsupported API key location: ${s.apiKeyLocation}`);return n.headers.set(s.name,r.credential.key),i(n)}}}const ak="bearerAuthenticationPolicy";function ck(r){return{name:ak,async sendRequest(n,i){if(Ic(n,r),!(n.authSchemes??r.authSchemes)?.find(h=>h.kind==="http"&&h.scheme==="basic"))return i(n);const{username:c,password:l}=r.credential,d=jc(mn(`${c}:${l}`,"utf-8"),"base64");return n.headers.set("Authorization",`Basic ${d}`),i(n)}}}const lk="bearerAuthenticationPolicy";function uk(r){return{name:lk,async sendRequest(n,i){if(Ic(n,r),!(n.authSchemes??r.authSchemes)?.find(l=>l.kind==="http"&&l.scheme==="bearer"))return i(n);const c=await r.credential.getBearerToken({abortSignal:n.abortSignal});return n.headers.set("Authorization",`Bearer ${c}`),i(n)}}}const dk="oauth2AuthenticationPolicy";function fk(r){return{name:dk,async sendRequest(n,i){Ic(n,r);const s=(n.authSchemes??r.authSchemes)?.find(l=>l.kind==="oauth2");if(!s)return i(n);const c=await r.credential.getOAuth2Token(s.flows,{abortSignal:n.abortSignal});return n.headers.set("Authorization",`Bearer ${c}`),i(n)}}}let wd;function hk(r={}){const n=KA(r);n.addPolicy(WA(r));const{credential:i,authSchemes:s,allowInsecureConnection:c}=r;return i&&(nk(i)?n.addPolicy(sk({authSchemes:s,credential:i,allowInsecureConnection:c})):tk(i)?n.addPolicy(ck({authSchemes:s,credential:i,allowInsecureConnection:c})):ek(i)?n.addPolicy(uk({authSchemes:s,credential:i,allowInsecureConnection:c})):ZA(i)&&n.addPolicy(fk({authSchemes:s,credential:i,allowInsecureConnection:c}))),n}function pk(){return wd||(wd=_0()),wd}function F0(r,n){if(r.headers){const i=Object.keys(r.headers).find(s=>s.toLowerCase()===n.toLowerCase());if(i)return r.headers[i]}}function mk(r){const n=F0(r,"content-type");if(n)return n;if(r.contentType===null)return;if(r.contentType)return r.contentType;const{body:i}=r;if(i!=null)return typeof i=="string"||typeof i=="number"||typeof i=="boolean"?"text/plain; charset=UTF-8":i instanceof Blob?i.type||"application/octet-stream":C0(i)?"application/octet-stream":"application/json"}function xy(r){return JSON.stringify(r)}function gk(r){const n=F0(r,"content-disposition");if(n)return n;if(r.dispositionType===void 0&&r.name===void 0&&r.filename===void 0)return;let s=r.dispositionType??"form-data";r.name&&(s+=`; name=${xy(r.name)}`);let c;if(r.filename)c=r.filename;else if(typeof File<"u"&&r.body instanceof File){const l=r.body.name;l!==""&&(c=l)}return c&&(s+=`; filename=${xy(c)}`),s}function yk(r,n){if(r===void 0)return new Uint8Array([]);if(C0(r))return r;if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return mn(String(r),"utf-8");if(n&&/application\/(.+\+)?json(;.+)?/i.test(String(n)))return mn(JSON.stringify(r),"utf-8");throw new Ri(`Unsupported body/content-type combination: ${r}, ${n}`)}function vk(r){const n=mk(r),i=gk(r),s=Ci(r.headers??{});n&&s.set("content-type",n),i&&s.set("content-disposition",i);const c=yk(r.body,n);return{headers:s,body:c}}function bk(r){return{parts:r.map(vk)}}async function Cd(r,n,i,s={},c){const l=c??pk(),d=wk(r,n,s);try{const h=await i.sendRequest(l,d),p=h.headers.toJSON(),m=h.readableStreamBody??h.browserStreamBody,y=s.responseAsStream||m!==void 0?void 0:Rk(h),_=m??y;return s?.onResponse&&s.onResponse({...h,request:d,rawHeaders:p,parsedBody:y}),{request:d,headers:p,status:`${h.status}`,body:_}}catch(h){if(T0(h)&&h.response&&s.onResponse){const{response:p}=h,m=p.headers.toJSON();s?.onResponse({...p,request:d,rawHeaders:m},h)}throw h}}function Sk(r={}){return r.contentType??r.headers?.["content-type"]??Tk(r.body)}function Tk(r){if(ArrayBuffer.isView(r))return"application/octet-stream";if(typeof r=="string")try{return JSON.parse(r),"application/json"}catch{return}return"application/json"}function wk(r,n,i={}){const s=Sk(i),{body:c,multipartBody:l}=Ck(i.body,s),d=c!==void 0||l!==void 0,h=Ci({...i.headers?i.headers:{},accept:i.accept??i.headers?.accept??"application/json",...d&&s&&{"content-type":s}});return v0({url:n,method:r,body:c,multipartBody:l,headers:h,allowInsecureConnection:i.allowInsecureConnection,abortSignal:i.abortSignal,onUploadProgress:i.onUploadProgress,onDownloadProgress:i.onDownloadProgress,timeout:i.timeout,enableBrowserStreams:!0,streamResponseStatusCodes:i.responseAsStream?new Set([Number.POSITIVE_INFINITY]):void 0})}function Ck(r,n=""){if(r===void 0)return{body:void 0};if(typeof FormData<"u"&&r instanceof FormData)return{body:r};if(R0(r))return{body:r};if(ArrayBuffer.isView(r))return{body:r instanceof Uint8Array?r:JSON.stringify(r)};switch(n.split(";")[0]){case"application/json":return{body:JSON.stringify(r)};case"multipart/form-data":return Array.isArray(r)?{multipartBody:bk(r)}:{body:JSON.stringify(r)};case"text/plain":return{body:String(r)};default:return typeof r=="string"?{body:r}:{body:JSON.stringify(r)}}}function Rk(r){const i=(r.headers.get("content-type")??"").split(";")[0],s=r.bodyAsText??"";if(i==="text/plain")return String(s);try{return s?JSON.parse(s):void 0}catch(c){if(i==="application/json")throw Ek(r,c);return String(s)}}function Ek(r,n){const i=`Error "${n}" occurred while parsing the response body - ${r.bodyAsText}.`,s=n.code??Ri.PARSE_ERROR;return new Ri(i,{code:s,statusCode:r.status,request:r.request,response:r})}function _k(r){const n=r.value;return n!==void 0&&n.toString!==void 0&&typeof n.toString=="function"}function xk(r,n,i,s={}){if(n.startsWith("https://")||n.startsWith("http://"))return n;r=kk(r,s),n=Nk(n,i,s);const c=Ak(`${r}/${n}`,s);return new URL(c).toString().replace(/([^:]\/)\/+/g,"$1")}function Rd(r,n,i,s){let c;i==="pipeDelimited"?c="|":i==="spaceDelimited"?c="%20":c=",";let l;Array.isArray(s)?l=s:typeof s=="object"&&s.toString===Object.prototype.toString?l=Object.entries(s).flat():l=[s];const d=l.map(h=>{if(h==null)return"";if(!h.toString||typeof h.toString!="function")throw new Error(`Query parameters must be able to be represented as string, ${r} can't`);const p=h.toISOString!==void 0?h.toISOString():h.toString();return n?p:encodeURIComponent(p)}).join(c);return`${n?r:encodeURIComponent(r)}=${d}`}function Ak(r,n={}){if(!n.queryParameters)return r;const i=new URL(r),s=n.queryParameters,c=[];for(const l of Object.keys(s)){const d=s[l];if(d==null)continue;const h=_k(d),p=h?d.value:d,m=h?d.explode??!1:!1,y=h&&d.style?d.style:"form";if(m)if(Array.isArray(p))for(const _ of p)c.push(Rd(l,n.skipUrlEncoding??!1,y,_));else if(typeof p=="object")for(const[_,z]of Object.entries(p))c.push(Rd(_,n.skipUrlEncoding??!1,y,z));else throw new Error("explode can only be set to true for objects and arrays");else c.push(Rd(l,n.skipUrlEncoding??!1,y,p))}return i.search!==""&&(i.search+="&"),i.search+=c.join("&"),i.toString()}function kk(r,n){if(!n.pathParameters)return r;const i=n.pathParameters;for(const[s,c]of Object.entries(i)){if(c==null)throw new Error(`Path parameters ${s} must not be undefined or null`);if(!c.toString||typeof c.toString!="function")throw new Error(`Path parameters must be able to be represented as string, ${s} can't`);let l=c.toISOString!==void 0?c.toISOString():String(c);n.skipUrlEncoding||(l=encodeURIComponent(c)),r=Ok(r,`{${s}}`,l)??""}return r}function Nk(r,n,i={}){for(const s of n){const c=typeof s=="object"&&(s.allowReserved??!1);let l=typeof s=="object"?s.value:s;!i.skipUrlEncoding&&!c&&(l=encodeURIComponent(l)),r=r.replace(/\{[\w-]+\}/,String(l))}return r}function Ok(r,n,i){return!r||!n?r:r.split(n).join(i||"")}function Mk(r,n={}){const i=n.pipeline??hk(n);if(n.additionalPolicies?.length)for(const{policy:h,position:p}of n.additionalPolicies){const m=p==="perRetry"?"Sign":void 0;i.addPolicy(h,{afterPhase:m})}const{allowInsecureConnection:s,httpClient:c}=n,l=n.endpoint??r,d=(h,...p)=>{const m=y=>xk(l,h,p,{...y});return{get:(y={})=>Vr("GET",m(y),i,y,s,c),post:(y={})=>Vr("POST",m(y),i,y,s,c),put:(y={})=>Vr("PUT",m(y),i,y,s,c),patch:(y={})=>Vr("PATCH",m(y),i,y,s,c),delete:(y={})=>Vr("DELETE",m(y),i,y,s,c),head:(y={})=>Vr("HEAD",m(y),i,y,s,c),options:(y={})=>Vr("OPTIONS",m(y),i,y,s,c),trace:(y={})=>Vr("TRACE",m(y),i,y,s,c)}};return{path:d,pathUnchecked:d,pipeline:i}}function Vr(r,n,i,s,c,l){return c=s.allowInsecureConnection??c,{then:function(d,h){return Cd(r,n,i,{...s,allowInsecureConnection:c},l).then(d,h)},async asBrowserStream(){if(Kr)throw new Error("`asBrowserStream` is supported only in the browser environment. Use `asNodeStream` instead to obtain the response body stream. If you require a Web stream of the response in Node, consider using `Readable.toWeb` on the result of `asNodeStream`.");return Cd(r,n,i,{...s,allowInsecureConnection:c,responseAsStream:!0},l)},async asNodeStream(){if(Kr)return Cd(r,n,i,{...s,allowInsecureConnection:c,responseAsStream:!0},l);throw new Error("`isNodeStream` is not supported in the browser environment. Use `asBrowserStream` to obtain the response body stream.")}}}function X0(){return b0()}const Uk=g0({logLevelEnvVarName:"AZURE_LOG_LEVEL",namespace:"azure"});function zc(r){return Uk.createClientLogger(r)}const Ei=zc("core-rest-pipeline"),Dk="exponentialRetryPolicy";function jk(r={}){return zs([gf({...r,ignoreSystemErrors:!0})],{maxRetries:r.maxRetries??go})}const Y0="systemErrorRetryPolicy";function Pk(r={}){return{name:Y0,sendRequest:zs([gf({...r,ignoreHttpStatusCodes:!0})],{maxRetries:r.maxRetries??go}).sendRequest}}const J0="throttlingRetryPolicy";function Ik(r={}){return{name:J0,sendRequest:zs([j0()],{maxRetries:r.maxRetries??go}).sendRequest}}const zk=A0;function K0(r={}){return k0({logger:Ei.info,...r})}const Lk=N0;function Q0(r={}){return O0(r)}function Bk(){return"x-ms-useragent"}function Hk(r){const n=[{name:"Firefox",regex:/Firefox\/([\d.]+)/},{name:"Safari",regex:/Version\/([\d.]+).*Safari/}];for(const i of n){const s=r.match(i.regex);if(s)return{brand:i.name,version:s[1]}}}function qk(r){const n=["Google Chrome","Microsoft Edge","Opera","Brave","Chromium"];for(const i of n){const s=r.find(c=>c.brand===i);if(s)return s}}async function $k(r){const n=globalThis.navigator;let i="unknown";if(n?.userAgentData){const s=await n.userAgentData.getHighEntropyValues(["architecture","platformVersion"]);i=`${s.platform} ${s.platformVersion}; ${s.architecture}`;const c=qk(n.userAgentData.brands);c&&r.set(c.brand,`${c.version} (${i})`)}else if(n?.platform){i=n.platform;const s=Hk(n.userAgent);s&&r.set(s.brand,`${s.version} (${i})`)}else typeof globalThis.EdgeRuntime=="string"&&r.set("EdgeRuntime",`${globalThis.EdgeRuntime} (${i})`)}const W0="1.22.2",Vk=3;function Gk(r){const n=[];for(const[i,s]of r){const c=s?`${i}/${s}`:i;n.push(c)}return n.join(" ")}function Fk(){return Bk()}async function Z0(r){const n=new Map;n.set("core-rest-pipeline",W0),await $k(n);const i=Gk(n);return r?`${r} ${i}`:i}const Ay=Fk(),eb="userAgentPolicy";function tb(r={}){const n=Z0(r.userAgentPrefix);return{name:eb,async sendRequest(i,s){return i.headers.has(Ay)||i.headers.set(Ay,await n),s(i)}}}function Xk(r){return!!(r&&typeof r.pipe=="function")}const nb={arrayBuffer:()=>{throw new Error("Not implemented")},bytes:()=>{throw new Error("Not implemented")},slice:()=>{throw new Error("Not implemented")},text:()=>{throw new Error("Not implemented")}},Lc=Symbol("rawContent");function rb(r){return typeof r[Lc]=="function"}function Yk(r){return rb(r)?r[Lc]():r}function Jk(r,n,i={}){return{...nb,type:i.type??"",lastModified:i.lastModified??new Date().getTime(),webkitRelativePath:i.webkitRelativePath??"",size:i.size??-1,name:n,stream:()=>{const s=r();if(Xk(s))throw new Error("Not supported: a Node stream was provided as input to createFileFromStream.");return s},[Lc]:r}}function Kk(r,n,i={}){return bc?{...nb,type:i.type??"",lastModified:i.lastModified??new Date().getTime(),webkitRelativePath:i.webkitRelativePath??"",size:r.byteLength,name:n,arrayBuffer:async()=>r.buffer,stream:()=>new Blob([ky(r)]).stream(),[Lc]:()=>r}:new File([ky(r)],n,i)}function ky(r){return"resize"in r.buffer?r:r.map(n=>n)}const vf=yf;function ib(){const r=G0();return{name:vf,sendRequest:async(n,i)=>{if(n.multipartBody)for(const s of n.multipartBody.parts)rb(s.body)&&(s.body=Yk(s.body));return r.sendRequest(n,i)}}}const Qk=SA;function ob(){return U0()}function sb(r={}){return P0(r)}const Wk=I0;function ab(){return z0()}const Zk=PA;function eN(r){return IA()}function cb(r,n){return B0()}const lb="setClientRequestIdPolicy";function ub(r="x-ms-client-request-id"){return{name:lb,async sendRequest(n,i){return n.headers.has(r)||n.headers.set(r,n.requestId),i(n)}}}const tN=H0;function db(r){return q0(r)}const nN=$0;function fb(r){return V0(r)}const Rs={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function rN(r={}){let n=new Es(r.parentContext);return r.span&&(n=n.setValue(Rs.span,r.span)),r.namespace&&(n=n.setValue(Rs.namespace,r.namespace)),n}class Es{_contextMap;constructor(n){this._contextMap=n instanceof Es?new Map(n._contextMap):new Map}setValue(n,i){const s=new Es(this);return s._contextMap.set(n,i),s}getValue(n){return this._contextMap.get(n)}deleteValue(n){const i=new Es(this);return i._contextMap.delete(n),i}}const Ed={instrumenterImplementation:void 0};function iN(){return{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{},addEvent:()=>{}}}function oN(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(r,n)=>({span:iN(),tracingContext:rN({parentContext:n.tracingContext})}),withContext(r,n,...i){return n(...i)}}}function oc(){return Ed.instrumenterImplementation||(Ed.instrumenterImplementation=oN()),Ed.instrumenterImplementation}function hb(r){const{namespace:n,packageName:i,packageVersion:s}=r;function c(m,y,_){const z=oc().startSpan(m,{..._,packageName:i,packageVersion:s,tracingContext:y?.tracingOptions?.tracingContext});let F=z.tracingContext;const U=z.span;F.getValue(Rs.namespace)||(F=F.setValue(Rs.namespace,n)),U.setAttribute("az.namespace",F.getValue(Rs.namespace));const Z=Object.assign({},y,{tracingOptions:{...y?.tracingOptions,tracingContext:F}});return{span:U,updatedOptions:Z}}async function l(m,y,_,z){const{span:F,updatedOptions:U}=c(m,y,z);try{const Z=await d(U.tracingOptions.tracingContext,()=>Promise.resolve(_(U,F)));return F.setStatus({status:"success"}),Z}catch(Z){throw F.setStatus({status:"error",error:Z}),Z}finally{F.end()}}function d(m,y,..._){return oc().withContext(m,y,..._)}function h(m){return oc().parseTraceparentHeader(m)}function p(m){return oc().createRequestHeaders(m)}return{startSpan:c,withSpan:l,withContext:d,parseTraceparentHeader:h,createRequestHeaders:p}}const Ns=Ri;function bf(r){return T0(r)}const pb="tracingPolicy";function mb(r={}){const n=Z0(r.userAgentPrefix),i=new uf({additionalAllowedQueryParameters:r.additionalAllowedQueryParameters}),s=sN();return{name:pb,async sendRequest(c,l){if(!s)return l(c);const d=await n,h={"http.url":i.sanitizeUrl(c.url),"http.method":c.method,"http.user_agent":d,requestId:c.requestId};d&&(h["http.user_agent"]=d);const{span:p,tracingContext:m}=aN(s,c,h)??{};if(!p||!m)return l(c);try{const y=await s.withContext(m,l,c);return lN(p,y),y}catch(y){throw cN(p,y),y}}}}function sN(){try{return hb({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:W0})}catch(r){Ei.warning(`Error when creating the TracingClient: ${Is(r)}`);return}}function aN(r,n,i){try{const{span:s,updatedOptions:c}=r.startSpan(`HTTP ${n.method}`,{tracingOptions:n.tracingOptions},{spanKind:"client",spanAttributes:i});if(!s.isRecording()){s.end();return}const l=r.createRequestHeaders(c.tracingOptions.tracingContext);for(const[d,h]of Object.entries(l))n.headers.set(d,h);return{span:s,tracingContext:c.tracingOptions.tracingContext}}catch(s){Ei.warning(`Skipping creating a tracing span due to an error: ${Is(s)}`);return}}function cN(r,n){try{r.setStatus({status:"error",error:s0(n)?n:void 0}),bf(n)&&n.statusCode&&r.setAttribute("http.status_code",n.statusCode),r.end()}catch(i){Ei.warning(`Skipping tracing span processing due to an error: ${Is(i)}`)}}function lN(r,n){try{r.setAttribute("http.status_code",n.status);const i=n.headers.get("x-ms-request-id");i&&r.setAttribute("serviceRequestId",i),n.status>=400&&r.setStatus({status:"error"}),r.end()}catch(i){Ei.warning(`Skipping tracing span processing due to an error: ${Is(i)}`)}}function gb(r){if(r instanceof AbortSignal)return{abortSignal:r};if(r.aborted)return{abortSignal:AbortSignal.abort(r.reason)};const n=new AbortController;let i=!0;function s(){i&&(r.removeEventListener("abort",c),i=!1)}function c(){n.abort(r.reason),s()}return r.addEventListener("abort",c),{abortSignal:n.signal,cleanup:s}}const uN="wrapAbortSignalLikePolicy";function dN(){return{name:uN,sendRequest:async(r,n)=>{if(!r.abortSignal)return n(r);const{abortSignal:i,cleanup:s}=gb(r.abortSignal);r.abortSignal=i;try{return await n(r)}finally{s?.()}}}}function Sf(r){const n=X0();return bc&&(r.agent&&n.addPolicy(db(r.agent)),r.tlsOptions&&n.addPolicy(fb(r.tlsOptions)),n.addPolicy(cb(r.proxyOptions)),n.addPolicy(ob())),n.addPolicy(dN()),n.addPolicy(ab(),{beforePolicies:[vf]}),n.addPolicy(tb(r.userAgentOptions)),n.addPolicy(ub(r.telemetryOptions?.clientRequestIdHeaderName)),n.addPolicy(ib(),{afterPhase:"Deserialize"}),n.addPolicy(sb(r.retryOptions),{phase:"Retry"}),n.addPolicy(mb({...r.userAgentOptions,...r.loggingOptions}),{afterPhase:"Retry"}),bc&&n.addPolicy(Q0(r.redirectOptions),{afterPhase:"Retry"}),n.addPolicy(K0(r.loggingOptions),{afterPhase:"Sign"}),n}function Tf(){const r=_0();return{async sendRequest(n){const{abortSignal:i,cleanup:s}=n.abortSignal?gb(n.abortSignal):{};try{return n.abortSignal=i,await r.sendRequest(n)}finally{s?.()}}}}function yb(r){return Ci(r)}function wf(r){return v0(r)}const fN=Dk;function hN(r={}){return jk(r)}const pN=Y0;function mN(r={}){return Pk(r)}const gN=J0;function yN(r={}){return Ik(r)}const vN=zc("core-rest-pipeline retryPolicy");function bN(r,n={maxRetries:Vk}){return zs(r,{logger:vN,...n})}const SN={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function TN(r,n,i){async function s(){if(Date.now()<i)try{return await r()}catch{return null}else{const l=await r();if(l===null)throw new Error("Failed to refresh access token.");return l}}let c=await s();for(;c===null;)await i0(n),c=await s();return c}function vb(r,n){let i=null,s=null,c;const l={...SN,...n},d={get isRefreshing(){return i!==null},get shouldRefresh(){return d.isRefreshing?!1:s?.refreshAfterTimestamp&&s.refreshAfterTimestamp<Date.now()?!0:(s?.expiresOnTimestamp??0)-l.refreshWindowInMs<Date.now()},get mustRefresh(){return s===null||s.expiresOnTimestamp-l.forcedRefreshWindowInMs<Date.now()}};function h(p,m){return d.isRefreshing||(i=TN(()=>r.getToken(p,m),l.retryIntervalInMs,s?.expiresOnTimestamp??Date.now()).then(_=>(i=null,s=_,c=m.tenantId,s)).catch(_=>{throw i=null,s=null,c=void 0,_})),i}return async(p,m)=>{const y=!!m.claims,_=c!==m.tenantId;return y&&(s=null),_||y||d.mustRefresh?h(p,m):(d.shouldRefresh&&h(p,m),s)}}const bb="bearerTokenAuthenticationPolicy";async function sc(r,n){try{return[await n(r),void 0]}catch(i){if(bf(i)&&i.response)return[i.response,i];throw i}}async function wN(r){const{scopes:n,getAccessToken:i,request:s}=r,c={abortSignal:s.abortSignal,tracingOptions:s.tracingOptions,enableCae:!0},l=await i(n,c);l&&r.request.headers.set("Authorization",`Bearer ${l.token}`)}function Ny(r){return r.status===401&&r.headers.has("WWW-Authenticate")}async function Oy(r,n){const{scopes:i}=r,s=await r.getAccessToken(i,{enableCae:!0,claims:n});return s?(r.request.headers.set("Authorization",`${s.tokenType??"Bearer"} ${s.token}`),!0):!1}function Bc(r){const{credential:n,scopes:i,challengeCallbacks:s}=r,c=r.logger||Ei,l={authorizeRequest:s?.authorizeRequest?.bind(s)??wN,authorizeRequestOnChallenge:s?.authorizeRequestOnChallenge?.bind(s)},d=n?vb(n):()=>Promise.resolve(null);return{name:bb,async sendRequest(h,p){if(!h.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await l.authorizeRequest({scopes:Array.isArray(i)?i:[i],request:h,getAccessToken:d,logger:c});let m,y,_;if([m,y]=await sc(h,p),Ny(m)){let z=My(m.headers.get("WWW-Authenticate"));if(z){let F;try{F=atob(z)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${z}`),m}_=await Oy({scopes:Array.isArray(i)?i:[i],response:m,request:h,getAccessToken:d,logger:c},F),_&&([m,y]=await sc(h,p))}else if(l.authorizeRequestOnChallenge&&(_=await l.authorizeRequestOnChallenge({scopes:Array.isArray(i)?i:[i],request:h,response:m,getAccessToken:d,logger:c}),_&&([m,y]=await sc(h,p)),Ny(m)&&(z=My(m.headers.get("WWW-Authenticate")),z))){let F;try{F=atob(z)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${z}`),m}_=await Oy({scopes:Array.isArray(i)?i:[i],response:m,request:h,getAccessToken:d,logger:c},F),_&&([m,y]=await sc(h,p))}}if(y)throw y;return m}}}function CN(r){const n=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,i=/(\w+)="([^"]*)"/g,s=[];let c;for(;(c=n.exec(r))!==null;){const l=c[1],d=c[2],h={};let p;for(;(p=i.exec(d))!==null;)h[p[1]]=p[2];s.push({scheme:l,params:h})}return s}function My(r){return r?CN(r).find(i=>i.scheme==="Bearer"&&i.params.claims&&i.params.error==="insufficient_claims")?.params.claims:void 0}const Sb="ndJsonPolicy";function RN(){return{name:Sb,async sendRequest(r,n){if(typeof r.body=="string"&&r.body.startsWith("[")){const i=JSON.parse(r.body);Array.isArray(i)&&(r.body=i.map(s=>JSON.stringify(s)+`
`).join(""))}return n(r)}}}const Ld="auxiliaryAuthenticationHeaderPolicy",Uy="x-ms-authorization-auxiliary";async function EN(r){const{scopes:n,getAccessToken:i,request:s}=r,c={abortSignal:s.abortSignal,tracingOptions:s.tracingOptions};return(await i(n,c))?.token??""}function _N(r){const{credentials:n,scopes:i}=r,s=r.logger||Ei,c=new WeakMap;return{name:Ld,async sendRequest(l,d){if(!l.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication for auxiliary header is not permitted for non-TLS protected (non-https) URLs.");if(!n||n.length===0)return s.info(`${Ld} header will not be set due to empty credentials.`),d(l);const h=[];for(const m of n){let y=c.get(m);y||(y=vb(m),c.set(m,y)),h.push(EN({scopes:Array.isArray(i)?i:[i],request:l,getAccessToken:y}))}const p=(await Promise.all(h)).filter(m=>!!m);return p.length===0?(s.warning(`None of the auxiliary tokens are valid. ${Uy} header will not be set.`),d(l)):(l.headers.set(Uy,p.map(m=>`Bearer ${m}`).join(", ")),d(l))}}}const xN=Object.freeze(Object.defineProperty({__proto__:null,RestError:Ns,agentPolicy:db,agentPolicyName:tN,auxiliaryAuthenticationHeaderPolicy:_N,auxiliaryAuthenticationHeaderPolicyName:Ld,bearerTokenAuthenticationPolicy:Bc,bearerTokenAuthenticationPolicyName:bb,createDefaultHttpClient:Tf,createEmptyPipeline:X0,createFile:Kk,createFileFromStream:Jk,createHttpHeaders:yb,createPipelineFromOptions:Sf,createPipelineRequest:wf,decompressResponsePolicy:ob,decompressResponsePolicyName:Qk,defaultRetryPolicy:sb,exponentialRetryPolicy:hN,exponentialRetryPolicyName:fN,formDataPolicy:ab,formDataPolicyName:Wk,getDefaultProxySettings:eN,isRestError:bf,logPolicy:K0,logPolicyName:zk,multipartPolicy:ib,multipartPolicyName:vf,ndJsonPolicy:RN,ndJsonPolicyName:Sb,proxyPolicy:cb,proxyPolicyName:Zk,redirectPolicy:Q0,redirectPolicyName:Lk,retryPolicy:bN,setClientRequestIdPolicy:ub,setClientRequestIdPolicyName:lb,systemErrorRetryPolicy:mN,systemErrorRetryPolicyName:pN,throttlingRetryPolicy:yN,throttlingRetryPolicyName:gN,tlsPolicy:fb,tlsPolicyName:nN,tracingPolicy:mb,tracingPolicyName:pb,userAgentPolicy:tb,userAgentPolicyName:eb},Symbol.toStringTag,{value:"Module"})),Dy={operationRequestMap:new WeakMap};function yo(r,n,i){let s=n.parameterPath;const c=n.mapper;let l;if(typeof s=="string"&&(s=[s]),Array.isArray(s)){if(s.length>0)if(c.isConstant)l=c.defaultValue;else{let d=jy(r,s);!d.propertyFound&&i&&(d=jy(i,s));let h=!1;d.propertyFound||(h=c.required||s[0]==="options"&&s.length===2),l=h?c.defaultValue:d.propertyValue}}else{c.required&&(l={});for(const d in s){const h=c.type.modelProperties[d],p=s[d],m=yo(r,{parameterPath:p,mapper:h},i);m!==void 0&&(l||(l={}),l[d]=m)}}return l}function jy(r,n){const i={propertyFound:!1};let s=0;for(;s<n.length;++s){const c=n[s];if(r&&c in r)r=r[c];else break}return s===n.length&&(i.propertyValue=r,i.propertyFound=!0),i}const Tb=Symbol.for("@azure/core-client original request");function AN(r){return Tb in r}function Eo(r){if(AN(r))return Eo(r[Tb]);let n=Dy.operationRequestMap.get(r);return n||(n={},Dy.operationRequestMap.set(r,n)),n}const kN=["application/json","text/json"],NN=["application/xml","application/atom+xml"],wb="deserializationPolicy";function Cb(r={}){const n=r.expectedContentTypes?.json??kN,i=r.expectedContentTypes?.xml??NN,s=r.parseXML,c=r.serializerOptions,l={xml:{rootName:c?.xml.rootName??"",includeRoot:c?.xml.includeRoot??!1,xmlCharKey:c?.xml.xmlCharKey??mo}};return{name:wb,async sendRequest(d,h){const p=await h(d);return UN(n,i,p,l,s)}}}function ON(r){let n;const i=r.request,s=Eo(i),c=s?.operationSpec;return c&&(s?.operationResponseGetter?n=s?.operationResponseGetter(c,r):n=c.responses[r.status]),n}function MN(r){const n=r.request,s=Eo(n)?.shouldDeserialize;let c;return s===void 0?c=!0:typeof s=="boolean"?c=s:c=s(r),c}async function UN(r,n,i,s,c){const l=await PN(r,n,i,s,c);if(!MN(l))return l;const h=Eo(l.request)?.operationSpec;if(!h||!h.responses)return l;const p=ON(l),{error:m,shouldReturnResponse:y}=jN(l,h,p,s);if(m)throw m;if(y)return l;if(p){if(p.bodyMapper){let _=l.parsedBody;h.isXML&&p.bodyMapper.type.name===Si.Sequence&&(_=typeof _=="object"?_[p.bodyMapper.xmlElementName]:[]);try{l.parsedBody=h.serializer.deserialize(p.bodyMapper,_,"operationRes.parsedBody",s)}catch(z){throw new Ns(`Error ${z} occurred in deserializing the responseBody - ${l.bodyAsText}`,{statusCode:l.status,request:l.request,response:l})}}else h.httpMethod==="HEAD"&&(l.parsedBody=i.status>=200&&i.status<300);p.headersMapper&&(l.parsedHeaders=h.serializer.deserialize(p.headersMapper,l.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return l}function DN(r){const n=Object.keys(r.responses);return n.length===0||n.length===1&&n[0]==="default"}function jN(r,n,i,s){const c=200<=r.status&&r.status<300;if(DN(n)?c:!!i)if(i){if(!i.isError)return{error:null,shouldReturnResponse:!1}}else return{error:null,shouldReturnResponse:!1};const d=i??n.responses.default,h=r.request.streamResponseStatusCodes?.has(r.status)?`Unexpected status code: ${r.status}`:r.bodyAsText,p=new Ns(h,{statusCode:r.status,request:r.request,response:r});if(!d&&!(r.parsedBody?.error?.code&&r.parsedBody?.error?.message))throw p;const m=d?.bodyMapper,y=d?.headersMapper;try{if(r.parsedBody){const _=r.parsedBody;let z;if(m){let U=_;if(n.isXML&&m.type.name===Si.Sequence){U=[];const Z=m.xmlElementName;typeof _=="object"&&Z&&(U=_[Z])}z=n.serializer.deserialize(m,U,"error.response.parsedBody",s)}const F=_.error||z||_;p.code=F.code,F.message&&(p.message=F.message),m&&(p.response.parsedBody=z)}r.headers&&y&&(p.response.parsedHeaders=n.serializer.deserialize(y,r.headers.toJSON(),"operationRes.parsedHeaders"))}catch(_){p.message=`Error "${_.message}" occurred in deserializing the responseBody - "${r.bodyAsText}" for the default response.`}return{error:p,shouldReturnResponse:!1}}async function PN(r,n,i,s,c){if(!i.request.streamResponseStatusCodes?.has(i.status)&&i.bodyAsText){const l=i.bodyAsText,d=i.headers.get("Content-Type")||"",h=d?d.split(";").map(p=>p.toLowerCase()):[];try{if(h.length===0||h.some(p=>r.indexOf(p)!==-1))return i.parsedBody=JSON.parse(l),i;if(h.some(p=>n.indexOf(p)!==-1)){if(!c)throw new Error("Parsing XML not supported.");const p=await c(l,s.xml);return i.parsedBody=p,i}}catch(p){const m=`Error "${p}" occurred while parsing the response body - ${i.bodyAsText}.`,y=p.code||Ns.PARSE_ERROR;throw new Ns(m,{code:y,statusCode:i.status,request:i.request,response:i})}}return i}function IN(r){const n=new Set;for(const i in r.responses){const s=r.responses[i];s.bodyMapper&&s.bodyMapper.type.name===Si.Stream&&n.add(Number(i))}return n}function Jr(r){const{parameterPath:n,mapper:i}=r;let s;return typeof n=="string"?s=n:Array.isArray(n)?s=n.join("."):s=i.serializedName,s}const Rb="serializationPolicy";function Eb(r={}){const n=r.stringifyXML;return{name:Rb,async sendRequest(i,s){const c=Eo(i),l=c?.operationSpec,d=c?.operationArguments;return l&&d&&(zN(i,d,l),LN(i,d,l,n)),s(i)}}}function zN(r,n,i){if(i.headerParameters)for(const c of i.headerParameters){let l=yo(n,c);if(l!=null||c.mapper.required){l=i.serializer.serialize(c.mapper,l,Jr(c));const d=c.mapper.headerCollectionPrefix;if(d)for(const h of Object.keys(l))r.headers.set(d+h,l[h]);else r.headers.set(c.mapper.serializedName||Jr(c),l)}}const s=n.options?.requestOptions?.customHeaders;if(s)for(const c of Object.keys(s))r.headers.set(c,s[c])}function LN(r,n,i,s=function(){throw new Error("XML serialization unsupported!")}){const c=n.options?.serializerOptions,l={xml:{rootName:c?.xml.rootName??"",includeRoot:c?.xml.includeRoot??!1,xmlCharKey:c?.xml.xmlCharKey??mo}},d=l.xml.xmlCharKey;if(i.requestBody&&i.requestBody.mapper){r.body=yo(n,i.requestBody);const h=i.requestBody.mapper,{required:p,serializedName:m,xmlName:y,xmlElementName:_,xmlNamespace:z,xmlNamespacePrefix:F,nullable:U}=h,Z=h.type.name;try{if(r.body!==void 0&&r.body!==null||U&&r.body===null||p){const X=Jr(i.requestBody);r.body=i.serializer.serialize(h,r.body,X,l);const ye=Z===Si.Stream;if(i.isXML){const he=F?`xmlns:${F}`:"xmlns",ue=BN(z,he,Z,r.body,l);Z===Si.Sequence?r.body=s(HN(ue,_||y||m,he,z),{rootName:y||m,xmlCharKey:d}):ye||(r.body=s(ue,{rootName:y||m,xmlCharKey:d}))}else{if(Z===Si.String&&(i.contentType?.match("text/plain")||i.mediaType==="text"))return;ye||(r.body=JSON.stringify(r.body))}}}catch(X){throw new Error(`Error "${X.message}" occurred in serializing the payload - ${JSON.stringify(m,void 0,"  ")}.`)}}else if(i.formDataParameters&&i.formDataParameters.length>0){r.formData={};for(const h of i.formDataParameters){const p=yo(n,h);if(p!=null){const m=h.mapper.serializedName||Jr(h);r.formData[m]=i.serializer.serialize(h.mapper,p,Jr(h),l)}}}}function BN(r,n,i,s,c){if(r&&!["Composite","Sequence","Dictionary"].includes(i)){const l={};return l[c.xml.xmlCharKey]=s,l[Bt]={[n]:r},l}return s}function HN(r,n,i,s){if(Array.isArray(r)||(r=[r]),!i||!s)return{[n]:r};const c={[n]:r};return c[Bt]={[i]:s},c}function _b(r={}){const n=Sf(r??{});return r.credentialOptions&&n.addPolicy(Bc({credential:r.credentialOptions.credential,scopes:r.credentialOptions.credentialScopes})),n.addPolicy(Eb(r.serializationOptions),{phase:"Serialize"}),n.addPolicy(Cb(r.deserializationOptions),{phase:"Deserialize"}),n}let _d;function qN(){return _d||(_d=Tf()),_d}const $N={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function VN(r,n,i,s){const c=GN(n,i,s);let l=!1,d=Py(r,c);if(n.path){let m=Py(n.path,c);n.path==="/{nextLink}"&&m.startsWith("/")&&(m=m.substring(1)),FN(m)?(d=m,l=!0):d=XN(d,m)}const{queryParams:h,sequenceParams:p}=YN(n,i,s);return d=KN(d,h,p,l),d}function Py(r,n){let i=r;for(const[s,c]of n)i=i.split(s).join(c);return i}function GN(r,n,i){const s=new Map;if(r.urlParameters?.length)for(const c of r.urlParameters){let l=yo(n,c,i);const d=Jr(c);l=r.serializer.serialize(c.mapper,l,d),c.skipEncoding||(l=encodeURIComponent(l)),s.set(`{${c.mapper.serializedName||d}}`,l)}return s}function FN(r){return r.includes("://")}function XN(r,n){if(!n)return r;const i=new URL(r);let s=i.pathname;s.endsWith("/")||(s=`${s}/`),n.startsWith("/")&&(n=n.substring(1));const c=n.indexOf("?");if(c!==-1){const l=n.substring(0,c),d=n.substring(c+1);s=s+l,d&&(i.search=i.search?`${i.search}&${d}`:d)}else s=s+n;return i.pathname=s,i.toString()}function YN(r,n,i){const s=new Map,c=new Set;if(r.queryParameters?.length)for(const l of r.queryParameters){l.mapper.type.name==="Sequence"&&l.mapper.serializedName&&c.add(l.mapper.serializedName);let d=yo(n,l,i);if(d!=null||l.mapper.required){d=r.serializer.serialize(l.mapper,d,Jr(l));const h=l.collectionFormat?$N[l.collectionFormat]:"";if(Array.isArray(d)&&(d=d.map(p=>p??"")),l.collectionFormat==="Multi"&&d.length===0)continue;Array.isArray(d)&&(l.collectionFormat==="SSV"||l.collectionFormat==="TSV")&&(d=d.join(h)),l.skipEncoding||(Array.isArray(d)?d=d.map(p=>encodeURIComponent(p)):d=encodeURIComponent(d)),Array.isArray(d)&&(l.collectionFormat==="CSV"||l.collectionFormat==="Pipes")&&(d=d.join(h)),s.set(l.mapper.serializedName||Jr(l),d)}}return{queryParams:s,sequenceParams:c}}function JN(r){const n=new Map;if(!r||r[0]!=="?")return n;r=r.slice(1);const i=r.split("&");for(const s of i){const[c,l]=s.split("=",2),d=n.get(c);d?Array.isArray(d)?d.push(l):n.set(c,[d,l]):n.set(c,l)}return n}function KN(r,n,i,s=!1){if(n.size===0)return r;const c=new URL(r),l=JN(c.search);for(const[h,p]of n){const m=l.get(h);if(Array.isArray(m))if(Array.isArray(p)){m.push(...p);const y=new Set(m);l.set(h,Array.from(y))}else m.push(p);else m?(Array.isArray(p)?p.unshift(m):i.has(h)&&l.set(h,[m,p]),s||l.set(h,p)):l.set(h,p)}const d=[];for(const[h,p]of l)if(typeof p=="string")d.push(`${h}=${p}`);else if(Array.isArray(p))for(const m of p)d.push(`${h}=${m}`);else d.push(`${h}=${p}`);return c.search=d.length?`?${d.join("&")}`:"",c.toString()}const xb=zc("core-client");class Ab{_endpoint;_requestContentType;_allowInsecureConnection;_httpClient;pipeline;constructor(n={}){if(this._requestContentType=n.requestContentType,this._endpoint=n.endpoint??n.baseUri,n.baseUri&&xb.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=n.allowInsecureConnection,this._httpClient=n.httpClient||qN(),this.pipeline=n.pipeline||QN(n),n.additionalPolicies?.length)for(const{policy:i,position:s}of n.additionalPolicies){const c=s==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(i,{afterPhase:c})}}async sendRequest(n){return this.pipeline.sendRequest(this._httpClient,n)}async sendOperationRequest(n,i){const s=i.baseUrl||this._endpoint;if(!s)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");const c=VN(s,i,n,this),l=wf({url:c});l.method=i.httpMethod;const d=Eo(l);d.operationSpec=i,d.operationArguments=n;const h=i.contentType||this._requestContentType;h&&i.requestBody&&l.headers.set("Content-Type",h);const p=n.options;if(p){const m=p.requestOptions;m&&(m.timeout&&(l.timeout=m.timeout),m.onUploadProgress&&(l.onUploadProgress=m.onUploadProgress),m.onDownloadProgress&&(l.onDownloadProgress=m.onDownloadProgress),m.shouldDeserialize!==void 0&&(d.shouldDeserialize=m.shouldDeserialize),m.allowInsecureConnection&&(l.allowInsecureConnection=!0)),p.abortSignal&&(l.abortSignal=p.abortSignal),p.tracingOptions&&(l.tracingOptions=p.tracingOptions)}this._allowInsecureConnection&&(l.allowInsecureConnection=!0),l.streamResponseStatusCodes===void 0&&(l.streamResponseStatusCodes=IN(i));try{const m=await this.sendRequest(l),y=py(m,i.responses[m.status]);return p?.onResponse&&p.onResponse(m,y),y}catch(m){if(typeof m=="object"&&m?.response){const y=m.response,_=py(y,i.responses[m.statusCode]||i.responses.default);m.details=_,p?.onResponse&&p.onResponse(y,_,m)}throw m}}}function QN(r){const n=WN(r),i=r.credential&&n?{credentialScopes:n,credential:r.credential}:void 0;return _b({...r,credentialOptions:i})}function WN(r){if(r.credentialScopes)return r.credentialScopes;if(r.endpoint)return`${r.endpoint}/.default`;if(r.baseUri)return`${r.baseUri}/.default`;if(r.credential&&!r.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}function ZN(r){return`, ${r.trim()}`.split(", Bearer ").filter(i=>i).map(i=>`${i.trim()}, `.split('", ').filter(l=>l).map(l=>(([d,h])=>({[d]:h}))(l.trim().split('="'))).reduce((l,d)=>({...l,...d}),{}))}async function eO(r){const{scopes:n,response:i}=r,s=r.logger||xb,c=i.headers.get("WWW-Authenticate");if(!c)return s.info("The WWW-Authenticate header was missing. Failed to perform the Continuous Access Evaluation authentication flow."),!1;const d=(ZN(c)||[]).find(p=>p.claims);if(!d)return s.info('The WWW-Authenticate header was missing the necessary "claims" to perform the Continuous Access Evaluation authentication flow.'),!1;const h=await r.getAccessToken(d.scope?[d.scope]:n,{claims:px(d.claims)});return h?(r.request.headers.set("Authorization",`${h.tokenType??"Bearer"} ${h.token}`),!0):!1}const kb={DefaultScope:"/.default",HeaderConstants:{AUTHORIZATION:"authorization"}};function tO(r){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(r)}const nO=async r=>{const n=aO(r.request),i=oO(r.response);if(i){const s=sO(i),c=iO(r,s),l=rO(s);if(!l)return!1;const d=await r.getAccessToken(c,{...n,tenantId:l});return d?(r.request.headers.set(kb.HeaderConstants.AUTHORIZATION,`${d.tokenType??"Bearer"} ${d.token}`),!0):!1}return!1};function rO(r){const s=new URL(r.authorization_uri).pathname.split("/")[1];if(s&&tO(s))return s}function iO(r,n){if(!n.resource_id)return r.scopes;const i=new URL(n.resource_id);i.pathname=kb.DefaultScope;let s=i.toString();return s==="https://disk.azure.com/.default"&&(s="https://disk.azure.com//.default"),[s]}function oO(r){const n=r.headers.get("WWW-Authenticate");if(r.status===401&&n)return n}function sO(r){return`${r.slice(7).trim()} `.split(" ").filter(c=>c).map(c=>(([l,d])=>({[l]:d}))(c.trim().split("="))).reduce((c,l)=>({...c,...l}),{})}function aO(r){return{abortSignal:r.abortSignal,requestOptions:{timeout:r.timeout},tracingOptions:r.tracingOptions}}const cO=Object.freeze(Object.defineProperty({__proto__:null,MapperTypeNames:Si,ServiceClient:Ab,XML_ATTRKEY:Bt,XML_CHARKEY:mo,authorizeRequestOnClaimChallenge:eO,authorizeRequestOnTenantChallenge:nO,createClientPipeline:_b,createSerializer:ff,deserializationPolicy:Cb,deserializationPolicyName:wb,serializationPolicy:Eb,serializationPolicyName:Rb},Symbol.toStringTag,{value:"Module"})),lO=Cc(cO),uO=Cc(xN);var Iy;function dO(){return Iy||(Iy=1,(function(r){var n=O_,i=hx,s=lO,c=uO;function l(Oe){return Oe&&typeof Oe=="object"&&"default"in Oe?Oe:{default:Oe}}var d=l(n),h=l(i),p=l(s),m=l(c),y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Rg<"u"?Rg:typeof self<"u"?self:{};function _(Oe){return Oe&&Oe.__esModule&&Object.prototype.hasOwnProperty.call(Oe,"default")?Oe.default:Oe}function z(Oe,Ce){return Ce={exports:{}},Oe(Ce,Ce.exports),Ce.exports}var F=z(function(Oe,Ce){(function(Be,G){Oe.exports=G()})(y,function(){return(function(Be){function G(J){if(D[J])return D[J].exports;var P=D[J]={i:J,l:!1,exports:{}};return Be[J].call(P.exports,P,P.exports,G),P.l=!0,P.exports}var D={};return G.m=Be,G.c=D,G.i=function(J){return J},G.d=function(J,P,K){G.o(J,P)||Object.defineProperty(J,P,{configurable:!1,enumerable:!0,get:K})},G.n=function(J){var P=J&&J.__esModule?function(){return J.default}:function(){return J};return G.d(P,"a",P),P},G.o=function(J,P){return Object.prototype.hasOwnProperty.call(J,P)},G.p="",G(G.s=1)})([function(Be,G,D){function J(T,j){var C,R=new Promise(function(O,k){fetch(T).then(function(b){C!==void 0&&clearTimeout(C),O(b)}).catch(function(b){C!==void 0&&clearTimeout(C),k(b)})});if(j!==0){var E=new Promise(function(O,k){C=setTimeout(k,j,new Error("Fetch for '".concat(T.url,"' timed out")))});return Promise.race([R,E])}return R}function P(T){try{return JSON.stringify(T)}catch{return"Unable to serialize object of type ".concat(typeof T)}}Object.defineProperty(G,"__esModule",{value:!0}),G.Timespan=G.toJson=G.fetchWithTimeout=void 0,G.fetchWithTimeout=J,G.toJson=P;var K=(function(){function T(){this.start=Date.now()}return Object.defineProperty(T.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(T.prototype,"startTime",{get:function(){return this.start},enumerable:!1,configurable:!0}),T.prototype.reset=function(){this.start=Date.now()},T})();G.Timespan=K},function(Be,G,D){function J(b,w,A){return new k(b,w,A)}var P=this&&this.__extends||(function(){var b=function(w,A){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,ee){H.__proto__=ee}||function(H,ee){for(var V in ee)Object.prototype.hasOwnProperty.call(ee,V)&&(H[V]=ee[V])})(w,A)};return function(w,A){function H(){this.constructor=w}if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");b(w,A),w.prototype=A===null?Object.create(A):(H.prototype=A.prototype,new H)}})(),K=this&&this.__assign||function(){return K=Object.assign||function(b){for(var w,A=1,H=arguments.length;A<H;A++){w=arguments[A];for(var ee in w)Object.prototype.hasOwnProperty.call(w,ee)&&(b[ee]=w[ee])}return b},K.apply(this,arguments)},T=this&&this.__awaiter||function(b,w,A,H){function ee(V){return V instanceof A?V:new A(function(I){I(V)})}return new(A||(A=Promise))(function(V,I){function L(Q){try{te(H.next(Q))}catch(le){I(le)}}function re(Q){try{te(H.throw(Q))}catch(le){I(le)}}function te(Q){Q.done?V(Q.value):ee(Q.value).then(L,re)}te((H=H.apply(b,w||[])).next())})},j=this&&this.__generator||function(b,w){function A(te){return function(Q){return H([te,Q])}}function H(te){if(ee)throw new TypeError("Generator is already executing.");for(;L&&(L=0,te[0]&&(re=0)),re;)try{if(ee=1,V&&(I=2&te[0]?V.return:te[0]?V.throw||((I=V.return)&&I.call(V),0):V.next)&&!(I=I.call(V,te[1])).done)return I;switch(V=0,I&&(te=[2&te[0],I.value]),te[0]){case 0:case 1:I=te;break;case 4:return re.label++,{value:te[1],done:!1};case 5:re.label++,V=te[1],te=[0];continue;case 7:te=re.ops.pop(),re.trys.pop();continue;default:if(I=re.trys,!(I=I.length>0&&I[I.length-1])&&(te[0]===6||te[0]===2)){re=0;continue}if(te[0]===3&&(!I||te[1]>I[0]&&te[1]<I[3])){re.label=te[1];break}if(te[0]===6&&re.label<I[1]){re.label=I[1],I=te;break}if(I&&re.label<I[2]){re.label=I[2],re.ops.push(te);break}I[2]&&re.ops.pop(),re.trys.pop();continue}te=w.call(b,re)}catch(Q){te=[6,Q],V=0}finally{ee=I=0}if(5&te[0])throw te[1];return{value:te[0]?te[1]:void 0,done:!0}}var ee,V,I,L,re={label:0,sent:function(){if(1&I[0])throw I[1];return I[1]},trys:[],ops:[]};return L={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(L[Symbol.iterator]=function(){return this}),L};Object.defineProperty(G,"__esModule",{value:!0}),G.createRegistrarClient=G.RegistrarClient=void 0;var C=D(0),R=["skype","aad","cae"],E=(function(b){function w(A){var H=b.call(this,A)||this;return H.name="CancelationError",H}return P(w,b),w})(Error),O=(function(){function b(w,A,H){this.logger=w,this.maxBackoffInMs=A,this.initialDelay=H,this.backoffCount=0,this.id=++b.idCounter}return b.prototype.delay=function(w){var A=this;if(this.timerHandle!==void 0)throw new Error("Retry sequence logical failure");if(this.backoffCount===-1)return new Promise(function(ee,V){V(new E("Cancelled"))});var H=this.calculateNextBackoffMs();return this.backoffCount++,this.logger.info("[RegistrarClient] Backing off ".concat(w," for ").concat(H," milliseconds with ID ").concat(this.id)),new Promise(function(ee,V){A.cancelFunc=V,A.timerHandle=setTimeout(function(){A.logger.info("[RegistrarClient] Back off for ".concat(w," with ID ").concat(A.id," complete")),A.timerHandle=void 0,ee()},H)})},b.prototype.cancel=function(){this.timerHandle!==void 0&&(this.logger.debug("Resetting back off"),clearTimeout(this.timerHandle),this.cancelFunc!==void 0&&this.cancelFunc(new E("Cancelled"))),this.backoffCount=-1},b.prototype.calculateNextBackoffMs=function(){var w=1+.4*(Math.random()-.5),A=this.initialDelay*Math.pow(2,this.backoffCount)*w;return A=Math.round(A),Math.min(this.maxBackoffInMs,A)},b.idCounter=0,b})(),k=(function(){function b(w,A,H){var ee;this.logger=w,this.tokenProvider=A,this.options=H,this.DEFAULT_MAX_RETRIES_FOR_GET_TOKEN=15,this.DEFAULT_MAX_BACKOFF_TIME_IN_MS=3e5,this.backoffs={},this.maxBackOffTime=this.options.maxRetryDelayMs>0?this.options.maxRetryDelayMs:this.DEFAULT_MAX_BACKOFF_TIME_IN_MS,this.maxRetriesForGetToken=H.maxRetriesForGetToken===void 0||H.maxRetriesForGetToken===null?this.DEFAULT_MAX_RETRIES_FOR_GET_TOKEN:H.maxRetriesForGetToken,this.proxyUrlRewrite=(ee=H.proxyUrlRewrite)!==null&&ee!==void 0?ee:function(V){return V}}return b.prototype.setTelemetryLogger=function(w){this.eventLogger=w},b.prototype.register=function(w,A){return T(this,void 0,void 0,function(){return j(this,function(H){switch(H.label){case 0:return[4,this.performRegistration(w,A,"pr_set_registration")];case 1:return H.sent(),this.cachedRegistrationParams=[w,A],[2]}})})},b.prototype.unregister=function(){return T(this,void 0,void 0,function(){var w;return j(this,function(A){switch(A.label){case 0:return this.logger.info("[RegistrarClient] sending unregister request"),w=new Request(this.proxyUrlRewrite("".concat(this.options.registrarUrl,"/").concat(this.options.registrationId)),{method:"DELETE",mode:"cors",headers:new Headers(K(K({},this.options.extraRegistrationHeaders),{accept:"application/json, text/javascript"}))}),[4,this.callRegistrar(w,"pr_delete_registration")];case 1:return A.sent(),[2]}})})},b.prototype.cancelPendingRequests=function(){var w=this;Object.keys(this.backoffs).forEach(function(A){w.backoffs[A].cancel()}),this.backoffs={}},b.prototype.resendRegistration=function(){return T(this,void 0,void 0,function(){return j(this,function(w){switch(w.label){case 0:if(!this.cachedRegistrationParams)throw new Error("Re-registration failed because there is no registration parameters cached");return[4,this.performRegistration(this.cachedRegistrationParams[0],this.cachedRegistrationParams[1],"pr_resend_registration")];case 1:return w.sent(),[2]}})})},b.prototype.performRegistration=function(w,A,H){return T(this,void 0,void 0,function(){var ee,V;return j(this,function(I){switch(I.label){case 0:return this.logger.info("[RegistrarClient] Sending register request"),ee={clientDescription:w,registrationId:this.options.registrationId,nodeId:"",transports:A},V=new Request(this.proxyUrlRewrite(this.options.registrarUrl),{method:"POST",mode:"cors",headers:new Headers(K(K({},this.options.extraRegistrationHeaders),{"content-type":"application/json",accept:"application/json, text/javascript"})),body:(0,C.toJson)(ee)}),[4,this.callRegistrar(V,H)];case 1:return I.sent(),[2]}})})},b.prototype.startBackoff=function(){var w=new O(this.logger,this.maxBackOffTime,this.options.initialRetryDelayMs);return this.backoffs[w.id]=w,w},b.prototype.stopBackoff=function(w){w.cancel(),delete this.backoffs[w.id]},b.prototype.getToken=function(w){return T(this,void 0,void 0,function(){var A,H,ee,V,I,L,re;return j(this,function(te){switch(te.label){case 0:A=this.startBackoff(),H=0,te.label=1;case 1:return te.trys.push([1,3,,8]),this.logger.info("[RegistrarClient] Asking for a new token"),[4,this.tokenProvider({needFresh:!0,supportedTokenTypes:R,wwwAuthenticateHeader:w,purpose:"registrar"})];case 2:return ee=te.sent(),this.stopBackoff(A),[2,ee];case 3:V=te.sent(),te.label=4;case 4:return te.trys.push([4,6,,7]),H++,I=JSON.stringify(V),H>this.maxRetriesForGetToken?(L="[RegistrarClient] getToken retry limit hit. Will not retry now. Error: ".concat(I),this.logger.error(L),this.stopBackoff(A),[2,Promise.reject(L)]):(this.logger.warn("[RegistrarClient] Retrying for a new token. Retry Count: ".concat(H," Error: ").concat(I)),[4,A.delay("Fetching a new token")]);case 5:return te.sent(),[3,8];case 6:throw re=te.sent(),this.stopBackoff(A),re;case 7:return[3,8];case 8:return[3,1];case 9:return[2]}})})},b.prototype.callRegistrar=function(w,A){var H,ee,V;return T(this,void 0,void 0,function(){var I,L,re,te,Q,le,_e,ke,Ee,Ne,qe,Ke,N,S,M,W;return j(this,function(B){switch(B.label){case 0:return I=this.startBackoff(),[4,this.tokenProvider({needFresh:!1,supportedTokenTypes:R,wwwAuthenticateHeader:void 0,purpose:"registrar"})];case 1:L=B.sent(),this.setTokenHeader(w,L),re=new C.Timespan,te=0,B.label=2;case 2:Q=void 0,B.label=3;case 3:return B.trys.push([3,10,15,16]),le=w.clone(),[4,(0,C.fetchWithTimeout)(le,this.options.requestTimeoutMs)];case 4:return Q=B.sent(),Q.status!==401?[3,8]:++te>this.maxRetriesForGetToken?(_e="[RegistrarClient] getSkypeToken retry limit hit. Will not retry now. Request '".concat(w.url,"' failed with ").concat(Q.status," ").concat(Q.statusText),this.logger.error(_e),this.stopBackoff(I),[2,Promise.reject(_e)]):(this.logger.warn("[RegistrarClient] Retry Count ".concat(te,". Request '").concat(w.url,"' failed with ").concat(Q.status," ").concat(Q.statusText)),ke=(ee=(H=Q.headers)===null||H===void 0?void 0:H.get("www-authenticate"))!==null&&ee!==void 0?ee:void 0,Ee=this.setTokenHeader,Ne=[w],[4,this.getToken(ke)]);case 5:return Ee.apply(this,Ne.concat([B.sent()])),te>1?[4,I.delay("Registrar call retry after 401")]:[3,7];case 6:B.sent(),B.label=7;case 7:return[3,22];case 8:if(Q.status>=500&&Q.status<600)throw new Error("Fetch for '".concat(w.url,"' failed with ").concat(Q.status," ").concat(Q.statusText));B.label=9;case 9:return[3,16];case 10:qe=B.sent(),this.logger.error("[RegistrarClient] Request failed with ".concat(qe)),B.label=11;case 11:return B.trys.push([11,13,,14]),[4,I.delay("Registrar call retry")];case 12:return B.sent(),[3,22];case 13:throw Ke=B.sent(),this.logger.error("[RegistrarClient] Request cancelled"),this.stopBackoff(I),Ke;case 14:return[3,16];case 15:return this.sendTelemetryEvent(A,w,Q,re),[7];case 16:return this.stopBackoff(I),Q.ok?[2,Q]:[3,17];case 17:N=void 0,B.label=18;case 18:return B.trys.push([18,20,,21]),M=(S=JSON).stringify,[4,Q.json()];case 19:return N=M.apply(S,[B.sent()]),[3,21];case 20:return B.sent(),N="no details",[3,21];case 21:throw W="Fetch for '".concat(w.url,"' failed with ").concat(Q.status," ").concat(Q.statusText," (").concat(N,", MS-CV: ").concat((V=Q.headers)===null||V===void 0?void 0:V.get("MS-CV"),")"),this.logger.error("[RegistrarClient] ".concat(W)),new Error(W);case 22:return[3,2];case 23:return[2]}})})},b.prototype.setTokenHeader=function(w,A){switch(w.headers.delete("X-Skypetoken"),w.headers.delete("Authorization"),w.headers.delete("X-MS-Migration"),A.tokenType.toLowerCase()){case"skype":w.headers.set("X-Skypetoken",A.token);break;case"aad":case"cae":w.headers.set("Authorization","Bearer ".concat(A.token));break;default:throw new Error("unsupported token type: ".concat(A.tokenType))}this.options.usingLegacyTokenApi===!1&&w.headers.set("X-MS-Migration","True")},b.prototype.sendTelemetryEvent=function(w,A,H,ee){if(this.eventLogger!==void 0){var V={name:w,properties:{url:{value:A.url},result_code:{value:H!==void 0?H.status:0},begin_timestamp:{value:ee.startTime},elapsed:{value:ee.duration}}};this.eventLogger.logEvent(V)}},b})();G.RegistrarClient=k,G.createRegistrarClient=J}])})});_(F);var U=z(function(Oe,Ce){(function(Be,G){Oe.exports=G(F)})(y,function(Be){return(function(G){function D(P){if(J[P])return J[P].exports;var K=J[P]={i:P,l:!1,exports:{}};return G[P].call(K.exports,K,K.exports,D),K.l=!0,K.exports}var J={};return D.m=G,D.c=J,D.i=function(P){return P},D.d=function(P,K,T){D.o(P,K)||Object.defineProperty(P,K,{configurable:!1,enumerable:!0,get:T})},D.n=function(P){var K=P&&P.__esModule?function(){return P.default}:function(){return P};return D.d(K,"a",K),K},D.o=function(P,K){return Object.prototype.hasOwnProperty.call(P,K)},D.p="",D(D.s=20)})([function(G,D,J){Object.defineProperty(D,"__esModule",{value:!0}),D.Logger=void 0;var P=(function(){function K(T,j){this.name=T,this.logger=j}return K.prototype.debug=function(T){this.logger.debug("[".concat(this.name,"] ").concat(T))},K.prototype.info=function(T){this.logger.info("[".concat(this.name,"] ").concat(T))},K.prototype.warn=function(T){this.logger.warn("[".concat(this.name,"] ").concat(T))},K.prototype.error=function(T){this.logger.error("[".concat(this.name,"] ").concat(T))},K})();D.Logger=P},function(G,D,J){Object.defineProperty(D,"__esModule",{value:!0}),D.USER_AUTHENTICATE_EVENT_NAME=D.SUPPORTED_TOKEN_TYPES=D.FAILED_MESSAGE_ACK=D.UNHANDLED_MESSAGE_ACK=D.HANDLED_MESSAGE_ACK=D.CLIENT_VERSION=D.constants=void 0,D.constants={TROUTER_INIT:"trouterinit",TROUTER_READY_EVENT:"trouterReadyEvent",TROUTER_READY_TIMEOUT:"trouterReadyTimeout",TROUTER_TOKEN_REQUEST:"trouterTokenRequest",TROUTER_TOKEN_GET_SUCCEEDED:"trouterTokenGetSucceeded",TROUTER_TOKEN_GET_FAILED:"trouterTokenGetFailed",TROUTER_RECONNECTING:"trouterReconnecting",RENEWAL:"renewal",NEW_CONNECTION:"newConnection",ENDPOINT_REGISTRATION_FAILED:"endpointRegistrationFailed"},D.CLIENT_VERSION="2024.14.01.55",D.HANDLED_MESSAGE_ACK=200,D.UNHANDLED_MESSAGE_ACK=404,D.FAILED_MESSAGE_ACK=500,D.SUPPORTED_TOKEN_TYPES=["skype","aad","cae"],D.USER_AUTHENTICATE_EVENT_NAME="user.authenticate"},function(G,D,J){Object.defineProperty(D,"__esModule",{value:!0}),D.TrouterState=D.UserActivityState=void 0;var P;(function(T){T[T.Unknown=0]="Unknown",T[T.Active=1]="Active",T[T.Inactive=2]="Inactive"})(P||(D.UserActivityState=P={}));var K;(function(T){T[T.Unknown=0]="Unknown",T[T.Connected=2]="Connected",T[T.Disconnected=3]="Disconnected",T[T.Switching=9]="Switching"})(K||(D.TrouterState=K={}))},function(G,D,J){function P(k){try{return JSON.stringify(k)}catch{return"Unable to serialize object of type ".concat(typeof k)}}function K(k){var b=Math.round(new Date().getTime()/1e3);return k!==void 0&&k>b?k-b:0}function T(k){return Math.round(new Date().getTime()/1e3)+k}function j(k,b){return C(this,void 0,void 0,function(){var w,A,H;return R(this,function(ee){return A=new Promise(function(V,I){fetch(k).then(function(L){clearTimeout(w),V(L)}).catch(function(L){clearTimeout(w),I(L)})}),b!==0?(H=new Promise(function(V,I){var L=new URL(k.url),re=new Error("".concat(k.method," ").concat(L.origin).concat(L.pathname," timed out"));w=setTimeout(I,b,re)}),[2,Promise.race([A,H])]):[2,A]})})}var C=this&&this.__awaiter||function(k,b,w,A){function H(ee){return ee instanceof w?ee:new w(function(V){V(ee)})}return new(w||(w=Promise))(function(ee,V){function I(te){try{re(A.next(te))}catch(Q){V(Q)}}function L(te){try{re(A.throw(te))}catch(Q){V(Q)}}function re(te){te.done?ee(te.value):H(te.value).then(I,L)}re((A=A.apply(k,b||[])).next())})},R=this&&this.__generator||function(k,b){function w(re){return function(te){return A([re,te])}}function A(re){if(H)throw new TypeError("Generator is already executing.");for(;I&&(I=0,re[0]&&(L=0)),L;)try{if(H=1,ee&&(V=2&re[0]?ee.return:re[0]?ee.throw||((V=ee.return)&&V.call(ee),0):ee.next)&&!(V=V.call(ee,re[1])).done)return V;switch(ee=0,V&&(re=[2&re[0],V.value]),re[0]){case 0:case 1:V=re;break;case 4:return L.label++,{value:re[1],done:!1};case 5:L.label++,ee=re[1],re=[0];continue;case 7:re=L.ops.pop(),L.trys.pop();continue;default:if(V=L.trys,!(V=V.length>0&&V[V.length-1])&&(re[0]===6||re[0]===2)){L=0;continue}if(re[0]===3&&(!V||re[1]>V[0]&&re[1]<V[3])){L.label=re[1];break}if(re[0]===6&&L.label<V[1]){L.label=V[1],V=re;break}if(V&&L.label<V[2]){L.label=V[2],L.ops.push(re);break}V[2]&&L.ops.pop(),L.trys.pop();continue}re=b.call(k,L)}catch(te){re=[6,te],ee=0}finally{H=V=0}if(5&re[0])throw re[1];return{value:re[0]?re[1]:void 0,done:!0}}var H,ee,V,I,L={label:0,sent:function(){if(1&V[0])throw V[1];return V[1]},trys:[],ops:[]};return I={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I};Object.defineProperty(D,"__esModule",{value:!0}),D.Timespan=D.CorrelationVector=D.fetchWithTimeout=D.calculateExpireTsInSec=D.calculateTtlInSec=D.toJson=void 0,D.toJson=P,D.calculateTtlInSec=K,D.calculateExpireTsInSec=T,D.fetchWithTimeout=j;var E=(function(){function k(b){this.base=b!==void 0?b:this.createCorrelationVectorBase(),this.extension=0}return k.extend=function(b){return new k(b)},k.prototype.increase=function(){this.extension++},k.prototype.value=function(){return"".concat(this.base,".").concat(this.extension)},k.prototype.createCorrelationVectorBase=function(){for(var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0987654321/+",w="AQgw",A="",H=0;H<21;H++)A+=b.charAt(Math.floor(Math.random()*b.length));return A+=w.charAt(Math.floor(Math.random()*w.length))},k})();D.CorrelationVector=E;var O=(function(){function k(){this.start=Date.now()}return Object.defineProperty(k.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"startTime",{get:function(){return this.start},enumerable:!1,configurable:!0}),k.prototype.reset=function(){this.start=Date.now()},k})();D.Timespan=O},function(G,D,J){Object.defineProperty(D,"__esModule",{value:!0}),D.TrouterManagerState=D.UserActivityEventReason=D.ServerState=void 0;var P=J(3),K=(function(){function C(R,E,O,k,b,w,A){this.connectionId=R,this.connectedClientId=E,this.domId=O,this.unsecureUrl=k,this.url=b,this.c2cUrlBase=w,this.expirationTsSec=A}return C.prototype.getRemainingTtlInSec=function(){return(0,P.calculateTtlInSec)(this.expirationTsSec)},C})();D.ServerState=K;var T;(function(C){C[C.Unknown=0]="Unknown",C[C.Modified=1]="Modified",C[C.Snapshot=2]="Snapshot",C[C.Connected=3]="Connected"})(T||(D.UserActivityEventReason=T={}));var j;(function(C){C[C.Unknown=0]="Unknown",C[C.Connected=2]="Connected",C[C.Disconnected=3]="Disconnected",C[C.Switching=9]="Switching",C[C.TerminalError=10]="TerminalError"})(j||(D.TrouterManagerState=j={}))},function(G,D,J){function P(b,w){return b==="skype"&&K(w?.scae)!=="1"?"v4a":"v4c"}function K(b){return typeof b=="string"?b:typeof b=="number"?b.toString():void 0}function T(b,w){return w?.kind==="v4c-websocket-failure"?"v4a":b}function j(b){return Object.prototype.hasOwnProperty.call(b,"connectparams")}function C(b,w){return w==="v4a"?b.replace(/\/v4\/c\b/,"/v4/a").replace("wss://","https://").replace("ws://","http://"):b.replace(/\/v4\/a\b/,"/v4/c").replace("https://","wss://").replace("http://","ws://")}function R(b){if(b!==void 0)return k(k({},b),{reconnectUrl:void 0,serviceUrl:void 0})}function E(b){return typeof b=="string"?parseInt(b,10):b}function O(b){if(b?.kind==="redirect"&&b.host!==void 0){var w=b.host;return w.endsWith("/")&&(w=w.substring(0,w.length-1)),w.endsWith("/v4/c")||w.endsWith("/v4/a")||(w+="/v4/c"),w}}var k=this&&this.__assign||function(){return k=Object.assign||function(b){for(var w,A=1,H=arguments.length;A<H;A++){w=arguments[A];for(var ee in w)Object.prototype.hasOwnProperty.call(w,ee)&&(b[ee]=w[ee])}return b},k.apply(this,arguments)};Object.defineProperty(D,"__esModule",{value:!0}),D.redirectUrlIfPresent=D.ensureNumber=D.reconnectParamsWithoutUrls=D.adaptUrl=D.isV4ConnectEvent=D.usedProtocolAfterFallback=D.usedProtocol=void 0,D.usedProtocol=P,D.usedProtocolAfterFallback=T,D.isV4ConnectEvent=j,D.adaptUrl=C,D.reconnectParamsWithoutUrls=R,D.ensureNumber=E,D.redirectUrlIfPresent=O},function(G,D,J){Object.defineProperty(D,"__esModule",{value:!0}),D.TrouterFsm=D.State=void 0;var P,K=J(4),T=J(0),j=J(5);(function(E){E[E.Initial=0]="Initial",E[E.RetrievingToken=1]="RetrievingToken",E[E.Allocating=2]="Allocating",E[E.Handshaking=3]="Handshaking",E[E.Connecting=4]="Connecting",E[E.AnonymousConnecting=5]="AnonymousConnecting",E[E.WebsocketAuthenticating=6]="WebsocketAuthenticating",E[E.Connected=7]="Connected",E[E.Unregistering=8]="Unregistering",E[E.TerminalError=9]="TerminalError"})(P||(D.State=P={}));var C;(function(E){E[E.Initial=0]="Initial",E[E.Registering=1]="Registering",E[E.RegisteringButResendPending=2]="RegisteringButResendPending",E[E.Retrying=3]="Retrying",E[E.Registered=4]="Registered",E[E.RegistrationDisabled=5]="RegistrationDisabled"})(C||(C={}));var R=(function(){function E(O,k,b,w){this.worker=k,this.incallModeEnabled=b,this.protocolSelector=w,this.state=P.Initial,this.autoReconnect=!0,this.logger=new T.Logger("ConnectionFsm",O),this.registrationState=C.Initial}return E.prototype.getState=function(){return this.state},E.prototype.isActive=function(){return this.state===P.Allocating||this.state===P.Connected||this.state===P.Handshaking||this.state===P.Connecting||this.state===P.RetrievingToken||this.state===P.AnonymousConnecting||this.state===P.WebsocketAuthenticating},E.prototype.isConnecting=function(){return this.state===P.Allocating||this.state===P.Handshaking||this.state===P.Connecting||this.state===P.AnonymousConnecting},E.prototype.start=function(){return this.state===P.Initial?(this.setState(P.RetrievingToken),this.worker.getToken(!0,!1,void 0),!0):(this.showIgnored("start"),!1)},E.prototype.stop=function(O,k){O&&(this.registrationState=C.Initial),this.worker.isIncallMode()&&this.worker.exitIncallMode(),this.worker.resetTokenBackoff(),this.worker.cancelPendingRegistrationRequests(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearSentEventTimers(),this.worker.stopRegistrationTimer(),this.worker.stopSocketIo(),this.state===P.Connected&&this.worker.sendDisconnectTelemetryEvent("connection stopped"),this.registrationState!==C.Registered&&this.registrationState!==C.Registering&&this.registrationState!==C.RegisteringButResendPending||this.state===P.Unregistering?k?(this.setState(P.TerminalError),this.worker.dispatchTerminalError()):(this.setState(P.Initial),this.worker.dispatchDisconnected()):(this.registrationState=C.Initial,this.setState(P.Unregistering),this.worker.sendUnregisterRequest())},E.prototype.onTokenReceived=function(O,k,b){this.state===P.RetrievingToken?(0,j.usedProtocolAfterFallback)(this.protocolSelector(O.tokenType,b),k)==="v4c"?(this.setState(P.AnonymousConnecting),this.worker.startConnectionTimer(),this.worker.connectV4c(O,k)):(this.setState(P.Allocating),this.worker.startConnectionTimer(),this.worker.sendAllocateRequest(O)):this.showIgnored("onTokenReceived")},E.prototype.checkConnection=function(O){O&&this.onPingInterval()},E.prototype.onAllocationSucceed=function(O){return this.state===P.Allocating&&this.registrationState===C.Registered&&this.worker.dispatchUnregistered(),this.state===P.Allocating?(this.setState(P.Handshaking),this.registrationState=C.Initial,this.worker.startSocketIo(O),!0):(this.showIgnored("onAllocationSucceed"),!1)},E.prototype.onAllocationFailed=function(O,k){this.state===P.Allocating?this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!O,claimsChallenge:k}):this.showIgnored("onAllocationFailed")},E.prototype.onV4cException=function(){this.state!==P.AnonymousConnecting&&this.state!==P.WebsocketAuthenticating||(this.logger.error("v4c exception, falling back to longpoll"),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"v4c-websocket-failure"}}))},E.prototype.onConnectingTimeout=function(){this.state===P.Allocating||this.state===P.Connecting||this.state===P.Handshaking||this.state===P.AnonymousConnecting||this.state===P.WebsocketAuthenticating?this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0}):this.showIgnored("onConnectingTimeout")},E.prototype.onConnecting=function(){this.state===P.Handshaking?this.setState(P.Connecting):this.showIgnored("onConnecting")},E.prototype.onSocketConnect=function(O){this.state===P.AnonymousConnecting?(this.setState(P.WebsocketAuthenticating),this.worker.sendV4cAuthenticationEvent(O)):this.showIgnored("onSocketConnect")},E.prototype.onConnectingFailed=function(){this.state===P.Connecting?this.onConnectingTimeout():this.state===P.Handshaking?(this.logger.error("Unexpected error in Socket.io - no valid transports"),this.onConnectingTimeout()):this.state===P.AnonymousConnecting||this.state===P.WebsocketAuthenticating?(this.logger.info("/v4/c falling back to longpoll"),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"v4c-websocket-failure"}})):this.showIgnored("onConnectingFailed")},E.prototype.onSocketDisconnect=function(O){this.state===P.Handshaking||this.state===P.Connected||this.state===P.WebsocketAuthenticating?(this.state===P.Connected&&this.worker.sendDisconnectTelemetryEvent(O?.toTelemetryString()),this.state===P.WebsocketAuthenticating&&this.worker.countDisconnectBeforeConnectionEstablishment(),O?.reason==="skypetoken-deprecated"?(this.logger.error("Skypetoken deprecated response, not retrying any further"),this.onTerminalError()):this.cleanUpAndInitiateReconnect({backoff:this.state!==P.Connected&&O?.reason!=="dup",allowCachedToken:O?.reason!=="unauthorized",claimsChallenge:O?.claims})):this.showIgnored("onSocketDisconnect")},E.prototype.onTrouterConnected=function(){this.state===P.Connecting||this.state===P.WebsocketAuthenticating?(this.setState(P.Connected),this.worker.resetTokenBackoff(),this.worker.stopConnectionTimer(),this.worker.sendUserActivityState(K.UserActivityEventReason.Connected,!0),this.worker.startPingTimer(),this.worker.dispatchConnected(),this.worker.shouldSkipRegistration()?(this.registrationState=C.RegistrationDisabled,this.worker.dispatchRegistered()):(this.registrationState=C.Registering,this.worker.sendRegisterRequest())):this.showIgnored("onTrouterConnected")},E.prototype.onReconnectRequired=function(O,k,b){this.state===P.AnonymousConnecting||this.state===P.WebsocketAuthenticating?b===void 0||b.target!=="host"||b.url===void 0||b.url===""?(this.logger.error("unexpected reconnect arguments: ".concat(b?.target," ").concat(b?.url,", reconnecting without cache")),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"redirect-no-host"}})):this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"redirect",host:b.url}}):this.worker.dispatchReconnectIsRequired(O,k)},E.prototype.disableAutoReconnect=function(){this.autoReconnect=!1},E.prototype.onDownstreamRequest=function(O){this.state===P.Connected?(this.switchToIncallModeIfEnabled(),this.worker.dispatchDownstreamRequest(O)):this.showIgnored("onDownstreamRequest")},E.prototype.onTrouterMessageLost=function(O){this.state===P.Connected?this.worker.dispatchTrouterMessageLost(O):this.showIgnored("onTrouterMessageLost")},E.prototype.onPingInterval=function(){this.state===P.Connected?this.worker.sendPingRequest():this.showIgnored("onPingInterval")},E.prototype.onPingResponseTimeout=function(){this.onMissedResponse("onPingResponseTimeout")},E.prototype.onPingResponse=function(){this.state===P.Connected||this.showIgnored("onPingResponse")},E.prototype.onRegistrationFailed=function(){this.state===P.Connected&&this.registrationState===C.Registering?(this.worker.dispatchUnregistered(),this.registrationState=C.Retrying,this.worker.startRegistrationRetryTimer()):this.state===P.Connected&&this.registrationState===C.RegisteringButResendPending?(this.registrationState=C.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationFailed")},E.prototype.onRetryRegistration=function(){this.state===P.Connected&&this.registrationState===C.Retrying?(this.registrationState=C.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRetryRegistration")},E.prototype.onRegistrationSucceeded=function(){this.state===P.Connected&&this.registrationState===C.Registering?(this.registrationState=C.Registered,this.worker.dispatchRegistered(),this.worker.startRegistrationTimer()):this.state===P.Connected&&this.registrationState===C.RegisteringButResendPending?(this.registrationState=C.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationSucceeded")},E.prototype.onRegistrationNearExpiry=function(){this.state===P.Connected&&this.registrationState===C.Registered?(this.registrationState=C.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationNearExpiry")},E.prototype.onUnregistrationDone=function(){this.state===P.Unregistering?(this.setState(P.Initial),this.worker.dispatchUnregistered(),this.worker.dispatchDisconnected()):this.showIgnored("onUnregistrationDone")},E.prototype.onResendRegistration=function(){this.worker.dispatchUnregistered(),this.state===P.Connected&&this.registrationState===C.Registered?(this.registrationState=C.Registering,this.worker.stopRegistrationTimer(),this.worker.sendRegisterRequest()):this.state===P.Connected&&this.registrationState===C.Registering&&(this.registrationState=C.RegisteringButResendPending)},E.prototype.onIncallModeTimer=function(){this.worker.exitIncallMode(),this.state===P.Connected?(this.worker.stopPingTimer(),this.worker.startPingTimer()):this.showIgnored("onIncallModeTimer")},E.prototype.onSetNewUserActivityState=function(){this.worker.sendUserActivityState(K.UserActivityEventReason.Modified,this.state===P.Connected)},E.prototype.onActivityStateResponseTimeout=function(){this.onMissedResponse("onActivityStateResponseTimeout")},E.prototype.forceReconnect=function(O){this.state===P.Connected&&this.worker.sendDisconnectTelemetryEvent(O),this.worker.resetTokenBackoff(),this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0})},E.prototype.onTerminalError=function(){this.logger.error("Cannot proceed, reached terminal state. Switching from state '".concat(P[this.state],"' to ").concat(P[P.TerminalError])),this.stop(!0,!0),this.setState(P.TerminalError)},E.prototype.onMissedResponse=function(O){this.state===P.Connected?(this.worker.sendDisconnectTelemetryEvent(O),this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0})):this.showIgnored(O)},E.prototype.showIgnored=function(O){this.logger.debug("Ignoring event '".concat(O,"' in state '").concat(P[this.state],"'"))},E.prototype.setState=function(O){if(this.logger.info("Switching from state '".concat(P[this.state],"' to state '").concat(P[O],"'")),this.state===O)return void this.logger.error("Attempt to switch to the current state '".concat(P[O],"'"));this.state=O},E.prototype.switchToIncallModeIfEnabled=function(){this.incallModeEnabled&&(this.worker.isIncallMode()||(this.worker.enterIncallMode(),this.worker.stopPingTimer(),this.worker.startPingTimer()),this.worker.restartIncallModeTimer())},E.prototype.cleanUpAndInitiateReconnect=function(O){if(!this.autoReconnect)return this.logger.info("Automatic reconnect is disabled, stopping this connection"),void this.stop(!0);this.worker.cancelPendingRegistrationRequests(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearSentEventTimers(),this.worker.stopRegistrationTimer(),this.worker.stopSocketIo(),this.setState(P.RetrievingToken),this.worker.dispatchReconnecting(),this.worker.getToken(O.allowCachedToken,O.backoff,O.claimsChallenge,O.fallbackReason)},E})();D.TrouterFsm=R},function(G,D,J){function P(N,S){var M=S?void 0:{"X-MS-Migration":"True"};switch(N.tokenType.toLowerCase()){case"skype":return C({"X-Skypetoken":N.token},M);case"aad":case"cae":return C({Authorization:"Bearer ".concat(N.token)},M);default:throw new Error("unsupported token type: ".concat(N.tokenType))}}function K(N){return N!=null&&typeof N.toString=="function"?N.toString():"[".concat(typeof N,"]")}function T(N){return typeof N=="object"&&N!==null&&N.stack!==void 0?(0,b.toJson)(N.stack):'"(no error.stack)"'}function j(N){return typeof N=="object"&&N!==null&&typeof N.message=="string"?N.message:"(no error.message)"}var C=this&&this.__assign||function(){return C=Object.assign||function(N){for(var S,M=1,W=arguments.length;M<W;M++){S=arguments[M];for(var B in S)Object.prototype.hasOwnProperty.call(S,B)&&(N[B]=S[B])}return N},C.apply(this,arguments)},R=this&&this.__awaiter||function(N,S,M,W){function B(oe){return oe instanceof M?oe:new M(function(ve){ve(oe)})}return new(M||(M=Promise))(function(oe,ve){function Ie(ze){try{De(W.next(ze))}catch(at){ve(at)}}function Me(ze){try{De(W.throw(ze))}catch(at){ve(at)}}function De(ze){ze.done?oe(ze.value):B(ze.value).then(Ie,Me)}De((W=W.apply(N,S||[])).next())})},E=this&&this.__generator||function(N,S){function M(De){return function(ze){return W([De,ze])}}function W(De){if(B)throw new TypeError("Generator is already executing.");for(;Ie&&(Ie=0,De[0]&&(Me=0)),Me;)try{if(B=1,oe&&(ve=2&De[0]?oe.return:De[0]?oe.throw||((ve=oe.return)&&ve.call(oe),0):oe.next)&&!(ve=ve.call(oe,De[1])).done)return ve;switch(oe=0,ve&&(De=[2&De[0],ve.value]),De[0]){case 0:case 1:ve=De;break;case 4:return Me.label++,{value:De[1],done:!1};case 5:Me.label++,oe=De[1],De=[0];continue;case 7:De=Me.ops.pop(),Me.trys.pop();continue;default:if(ve=Me.trys,!(ve=ve.length>0&&ve[ve.length-1])&&(De[0]===6||De[0]===2)){Me=0;continue}if(De[0]===3&&(!ve||De[1]>ve[0]&&De[1]<ve[3])){Me.label=De[1];break}if(De[0]===6&&Me.label<ve[1]){Me.label=ve[1],ve=De;break}if(ve&&Me.label<ve[2]){Me.label=ve[2],Me.ops.push(De);break}ve[2]&&Me.ops.pop(),Me.trys.pop();continue}De=S.call(N,Me)}catch(ze){De=[6,ze],oe=0}finally{B=ve=0}if(5&De[0])throw De[1];return{value:De[0]?De[1]:void 0,done:!0}}var B,oe,ve,Ie,Me={label:0,sent:function(){if(1&ve[0])throw ve[1];return ve[1]},trys:[],ops:[]};return Ie={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(Ie[Symbol.iterator]=function(){return this}),Ie};Object.defineProperty(D,"__esModule",{value:!0}),D.TrouterConnection=D.ReconnectReason=void 0;var O,k=J(21),b=J(3),w=J(15),A=J(1),H=J(16),ee=J(17),V=J(2),I=J(4),L=J(0),re=J(5),te=J(6),Q=J(12),le=(function(){function N(){this.cv=A.CLIENT_VERSION,this.ua="",this.hr="",this.v=""}return N})(),_e=(function(){function N(){this["force new connection"]=!0,this.reconnect=!1,this.query="",this.ackTimeoutMs=5e3}return N.prototype.rewriteUrlForProxy=function(S){return S},N})(),ke="MS-CV",Ee=(function(){function N(S,M){this.logger=M,this.cvCounter=0;var W=JSON.parse(S);this.startTS=this.safeJsonNumber(W,"startTS",0),this.url=this.safeJsonString(W,"url",""),this.shortUrl=this.safeJsonString(W,"shortUrl",""),this.body=this.safeJsonString(W,"body",""),this.headers=this.safeJsonRecord(W,"headers",{}),this.id=this.safeJsonNumber(W,"id",-1),this.method=this.safeJsonString(W,"method",""),this.replied=!1,this.timedout=!1,this.receivedCv=this.headers[ke],this.updateCvHeader()}return Object.defineProperty(N.prototype,"correlationVector",{get:function(){return this.receivedCv?"".concat(this.receivedCv,".").concat(this.cvCounter):""},enumerable:!1,configurable:!0}),N.prototype.on=function(S,M){S==="data"?this.dataCallback=M:S==="end"&&(typeof this.dataCallback=="function"&&this.dataCallback(this.body),M())},N.prototype.incrementCorrelationVector=function(){++this.cvCounter,this.updateCvHeader()},N.prototype.updateCvHeader=function(){var S=this.correlationVector;S&&(this.headers[ke]=S)},N.prototype.safeJsonNumber=function(S,M,W){var B;if(S!=null&&Object.prototype.hasOwnProperty.call(S,M)){var oe=S;if(typeof oe[M]=="number")return oe[M];if(typeof oe[M]=="string")return parseFloat(oe[M]);(B=this.logger)===null||B===void 0||B.warn("unexpected type of '".concat(M,"': ").concat(typeof oe[M]))}return W},N.prototype.safeJsonString=function(S,M,W){var B;if(S!=null&&Object.prototype.hasOwnProperty.call(S,M)){var oe=S;if(typeof oe[M]=="string")return oe[M];(B=this.logger)===null||B===void 0||B.warn("unexpected type of '".concat(M,"': ").concat(typeof oe[M]))}return W},N.prototype.safeJsonRecord=function(S,M,W){var B;if(S!=null&&Object.prototype.hasOwnProperty.call(S,M)){var oe=S;if(typeof oe[M]=="object")return oe[M];(B=this.logger)===null||B===void 0||B.warn("unexpected type of '".concat(M,"': ").concat(typeof oe[M]))}return W},N})(),Ne=(function(){function N(S,M,W){this.request=S,this.responseData=M,this.sendResponse=W}return N.prototype.writeHead=function(S,M){this.responseData.status=S,this.responseData.headers=M},N.prototype.write=function(S){this.responseData.body+=S},N.prototype.end=function(S){return S&&(this.responseData.body+=S),this.sendResponse(this.request,this.responseData)},N})(),qe=(function(){function N(S){this.name=S,this.args={},this.timeoutTimerId=0}return N})();(function(N){N[N.Configuration=0]="Configuration",N[N.ServerInitiated=1]="ServerInitiated"})(O||(D.ReconnectReason=O={}));var Ke=(function(){function N(S,M,W,B,oe,ve,Ie,Me){var De,ze=this;this.options=M,this.manager=W,this.tokenProvider=B,this.usingLegacyTokenApi=oe,this.protocolSelector=Ie,this.audienceSubscriptionState=Me,this.WEBSOCKET_TRANSPORT_NAME="websocket",this.XHR_POLLING_TRANSPORT_NAME="xhr-polling",this.AUDIENCE_SUBSCRIPTION_RESULT_ERROR="Error",this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED="Unsubscribed",this.AUDIENCE_SUBSCRIPTION_RESULT_TIMEOUT="Timeout",this.AUDIENCE_SUBSCRIPTION_RESULT_BAD_REQUEST="BadRequest",this.AUDIENCE_SUBSCRIPTION_STATE_QUERY_PARAM_REGEX=/&audienceSubscriptionState=[^&]*|^audienceSubscriptionState=[^&]*&?/,this.connectionId="",this.inIncallMode=!1,this.connectionAttempt=0,this.connectedClientId="",this.isNavigatorOnline=!0,this.onNavigatorOnlineStatusUpdateBound=this.onNavigatorOnlineStatusUpdate.bind(this),this.c2cUrlBase="",this.connectingErrorsInRow=0,this.unauthorizedErrorCount=0,this.pendingSentEventTimers={},this.lastDisconnectReason="",this.UNKNOWN_TRANSPORT="unknown_transport",this.connectingErrorsThreshold=3,this.pendingAudienceSubscription=void 0,this.logger=new L.Logger("Connection",S),this.timeoutOptions=this.options.timeoutOptions,this.tokenBackoff=new ee.ExponentialBackoff(this.logger,this.timeoutOptions.maxBackoffMs),this.clientID=Date.now(),typeof window<"u"&&window.location&&(this.domId=window.location.hostname);var at=new le;at.cv=A.CLIENT_VERSION,at.ua="",!((De=this.options)===null||De===void 0)&&De.clientInfo&&(at.ua=this.safeString(this.options.clientInfo.ua),at.v=this.safeString(this.options.clientInfo.v)),this.clientInfo=at,this.connectionTracker=new w.ConnectionTracker(S,this.clientID,this.clientInfo,function(){return ze.getServerState()},this.options.endpointId,this.options.clientCorrelationID,this.options.environment),this.applyConnectionTrackerOptions(M);var Et=this.options.incallModeTimeoutMs>0;if(this.fsm=new te.TrouterFsm(S,this,Et,this.protocolSelector),M.registration){var It={registrarUrl:M.registration.registrarUrl,proxyUrlRewrite:M.rewriteUrlForProxy,registrationId:M.registration.registrationId,requestTimeoutMs:M.timeoutOptions.fetchTimeoutMs,initialRetryDelayMs:1e3,maxRetryDelayMs:M.timeoutOptions.maxBackoffMs,usingLegacyTokenApi:this.usingLegacyTokenApi,maxRetriesForGetToken:M.retryLimitOnTokenFetch,extraRegistrationHeaders:M.extraConnectionHeaders};this.registrarClient=(0,k.createRegistrarClient)(S,this.tokenProvider,It)}this.userActivityState=ve}return N.prototype.start=function(S){this.logger.info("Starting"),this.reconnectParams=S,typeof window<"u"&&window.navigator&&window.addEventListener?(this.isNavigatorOnline=window.navigator.onLine,window.addEventListener("online",this.onNavigatorOnlineStatusUpdateBound),window.addEventListener("offline",this.onNavigatorOnlineStatusUpdateBound),this.logger.debug("Registered for browser online notifications - current state: ".concat(this.isNavigatorOnline))):this.isNavigatorOnline=!0,this.fsm.start()},N.prototype.stop=function(S){this.logger.info("Stopping"),typeof window<"u"&&window.navigator&&(window.removeEventListener("online",this.onNavigatorOnlineStatusUpdateBound),window.removeEventListener("offline",this.onNavigatorOnlineStatusUpdateBound)),this.fsm.stop(S),this.connectionTracker.close()},N.prototype.configure=function(S){var M=this.options.trouterUrl!==S.trouterUrl;this.options=S,this.applyConnectionTrackerOptions(S),M&&(this.logger.info("Configuration changed. Reconnection required."),this.fsm.onReconnectRequired(!1,O.Configuration))},N.prototype.checkConnection=function(S){this.logger.info("checkConnection called with ".concat(S)),this.fsm.checkConnection(S),S&&this.connectionTracker.sendTelemetry(w.ClientEventName.CheckConnection,{disconnectDetected:S},[])},N.prototype.disableRegistrationsAndAutoReconnect=function(){this.stopRegistrationTimer(),this.cancelPendingRegistrationRequests(),this.fsm.disableAutoReconnect()},N.prototype.getServerState=function(){return new I.ServerState(this.connectionId,this.connectedClientId,this.domId?this.domId:"",this.allocateResult?this.allocateResult.url:"",this.allocateResult?this.allocateResult.surl:"",this.c2cUrlBase,this.connectionExpireTimestampInSecs)},N.prototype.getState=function(){return this.fsm.getState()},N.prototype.getToken=function(S,M,W,B,oe){var ve=this;oe===void 0&&(oe=0),this.logger.info("Getting token ".concat(M?"with backoff":"without backoff"));var Ie=function(){ve.connectionTracker.trackStart("token");var Me={needFresh:!S,wwwAuthenticateHeader:W,supportedTokenTypes:A.SUPPORTED_TOKEN_TYPES,purpose:"trouter"};ve.logger.info("Requesting token: needFresh=".concat(Me.needFresh," ")+"types=[".concat(A.SUPPORTED_TOKEN_TYPES,"], ")+"wwwAuthenticateHeader is ".concat(Me.wwwAuthenticateHeader?"non empty":"empty")),ve.tokenProvider(Me).then(function(De){ve.logger.debug("".concat(De.tokenType," token is received")),ve.connectionTracker.trackEnd("token"),ve.fsm.onTokenReceived(De,B,ve.reconnectParams)}).catch(function(De){var ze=(0,b.toJson)(De.stack);if(ve.logger.error("Getting token failed, will retry after timeout. Error: ".concat(ze)),ve.connectionTracker.trackError("token",ze),!ve.canRetryTokenFetchRequest(oe+ve.unauthorizedErrorCount))return ve.connectionTracker.trackError("token","getToken retry limit hit, reached terminal error state"),ve.resetTokenBackoff(),void ve.fsm.onTerminalError();ve.getToken(S,!0,W,B,oe+1)})};M?this.tokenBackoff.backoff("getting token",Ie):(this.resetTokenBackoff(),Ie())},N.prototype.startConnectionTimer=function(){var S=this;this.stopConnectionTimer(),this.logger.debug("Starting connection timeout for ".concat(this.timeoutOptions.connectionTimeoutMs," ms")),this.connectionTimeoutId=setTimeout(function(){S.logger.info("Connection timeout is fired"),S.fsm.onConnectingTimeout()},this.timeoutOptions.connectionTimeoutMs)},N.prototype.stopConnectionTimer=function(){this.connectionTimeoutId&&(this.logger.debug("Stopping connection timeout"),clearTimeout(this.connectionTimeoutId),this.connectionTimeoutId=void 0)},N.prototype.startPingTimer=function(){var S=this;this.transportTypeName==="websocket"?(this.logger.debug("Starting ping timeout for ".concat(this.timeoutOptions.pingTimeoutMs," ms")),this.pingTimerId=setInterval(function(){S.logger.info("Ping interval fired"),S.fsm.onPingInterval()},this.timeoutOptions.pingTimeoutMs)):this.logger.debug("Not starting ping for transport ".concat(this.transportTypeName))},N.prototype.stopPingTimer=function(){this.pingTimerId&&(this.logger.debug("Stopping ping timeout"),this.clearPingResponseTimer(),clearInterval(this.pingTimerId),this.pingTimerId=void 0)},N.prototype.shouldSkipRegistration=function(){return this.options.registration===void 0},N.prototype.hasCustomRegistrationTtl=function(){var S,M;return((S=this.options.registration)===null||S===void 0?void 0:S.registrarTtlSec)!==void 0&&((M=this.options.registration)===null||M===void 0?void 0:M.registrarTtlSec)!==0},N.prototype.startRegistrationTimer=function(){var S=this;this.stopRegistrationTimer();var M=this.getRegistrationTtl(),W=M[0],B=M[1];if(W<=30||!B)return this.logger.debug("Starting registration expiration timer (TTL ".concat(W," sec)")),void(this.registrationTimerId=setTimeout(function(){S.registrationTimerId=void 0,S.logger.warn("Registration expired but the connection is still alive. Should never happen"),S.dispatchUnregistered()},1e3*W));var oe=W-30;this.logger.debug("Starting registration extension timer for ".concat(oe," sec")),this.registrationTimerId=setTimeout(function(){S.logger.info("Registration extension timer fired"),S.registrationTimerId=setTimeout(function(){S.registrationTimerId=void 0,S.logger.debug("Registration extension did not happen in time"),S.dispatchUnregistered()},3e4),S.fsm.onRegistrationNearExpiry()},1e3*oe)},N.prototype.startRegistrationRetryTimer=function(){var S=this;this.stopRegistrationTimer(),this.registrationTimerId=setTimeout(function(){S.registrationTimerId=void 0,S.fsm.onRetryRegistration()},123e3)},N.prototype.stopRegistrationTimer=function(){this.registrationTimerId&&(this.logger.debug("Stopping registration timeout"),clearTimeout(this.registrationTimerId),this.registrationTimerId=void 0)},N.prototype.resendRegistration=function(){if(!this.registrarClient)throw new Error("Trouter Client not configured to handle registrations");return this.fsm.onResendRegistration(),Promise.resolve()},N.prototype.buildSocketIoUrlParams=function(S,M){if(!this.allocateResult)throw new Error("Allocate result is undefined in buildSocketIoUrlParams()");for(var W={},B=this.allocateResult.connectparams,oe=0,ve=Object.keys(B);oe<ve.length;oe++){var Ie=ve[oe];if(B[Ie]!==void 0){var Me=B[Ie];typeof Me=="string"||typeof Me=="number"?W[Ie]=Me:this.logger.error("signatureData[".concat(Ie,"] has unsupported type ").concat(typeof Me))}}return W.v="v4",W.tc=encodeURI((0,b.toJson)(this.clientInfo)),W.timeout=this.timeoutOptions.pingTimeoutMs/1e3,W.auth="true",this.options.endpointId&&(W.epid=this.options.endpointId),S&&(W.userActivity=encodeURI((0,b.toJson)(S))),M&&(W.audienceSubscriptionState=encodeURIComponent((0,b.toJson)(M))),this.appendConnectedClientIds(this.buildQuery(W),!0)},N.prototype.startSocketIo=function(S){var M,W;if(this.logger.debug("Starting socket io"),this.connectionTracker.trackStart("connectSocket"),!this.allocateResult)throw new Error("Allocate result is undefined in startSocketIo()");var B=this.options.ioOptions?C({},this.options.ioOptions):new _e,oe=this.userActivityState.state!==V.UserActivityState.Unknown?this.userActivityState.increaseCvAndGetEventObject():void 0,ve=(M=this.audienceSubscriptionState)===null||M===void 0?void 0:M.increaseCvAndGetEventObject();if(B["force new connection"]=!0,B.reconnect=!1,B.rewriteUrlForProxy=this.options.rewriteUrlForProxy,B.requestHeaders=C(C({},this.options.extraConnectionHeaders),P(S,this.usingLegacyTokenApi)),B.query=this.buildSocketIoUrlParams(oe,ve),this.logger.info("connecting to ".concat(this.allocateResult.socketio,"?").concat(B.query)),this.stopSocketIo(),this.socket=((W=this.options.io)!==null&&W!==void 0?W:Q).connect(this.allocateResult.socketio,B),this.socket===void 0)throw new Error("Can't create Socket.io object");this.attachSocketIoHandlers(this.socket,S,oe,ve)},N.prototype.stopSocketIo=function(){if(this.socket){this.logger.debug("clearing socket.io");try{for(var S=0,M=["connecting","connect","connect_failed","close_during_connecting","disconnect","reconnect","reconnect_failed","reconnecting","error","message","trouter.connected","trouter.reconnect","trouter.message_loss"];S<M.length;S++){var W=M[S];this.socket.removeAllListeners(W)}this.socket.disconnect(),this.logger.debug("cleared socket"),this.socket=void 0}catch(B){this.logger.error("exception in disconnecting previous socket. Error: ".concat(T(B)))}}},N.prototype.dispatchConnected=function(){this.logger.info("dispatching connected"),this.manager.onConnected(this)},N.prototype.dispatchRegistered=function(){this.logger.info("dispatching registered"),this.manager.onRegistered(this)},N.prototype.dispatchUnregistered=function(){this.logger.info("dispatching unregistered"),this.manager.onUnregistered(this)},N.prototype.dispatchDownstreamRequest=function(S){var M=this;this.logger.debug("dispatching downstream request");try{var W=new Ne(S,new w.ResponseData(S.id),function(B,oe){return M.logger.debug("sending response to downstream"),M.sendResponse(B,oe)});this.manager.onDownstreamRequest(this,S,W)}catch(B){this.logger.error("exception in socket.on message. Error : ".concat(T(B)))}},N.prototype.dispatchReconnecting=function(){this.logger.info("dispatching reconnecting"),this.manager.onReconnecting(this)},N.prototype.dispatchReconnectIsRequired=function(S,M){this.logger.info("dispatching reconnect is required by server"),this.manager.onReconnectIsRequired(this,S,M)},N.prototype.dispatchDisconnected=function(){this.logger.info("dispatching disconnected"),this.manager.onDisconnected(this)},N.prototype.dispatchTerminalError=function(){this.logger.info("dispatching terminal error"),this.manager.onTerminalError(this)},N.prototype.dispatchTrouterMessageLost=function(S){this.logger.info("dispatching trouter message lost"),this.manager.onTrouterMessageLost(S)},N.prototype.countDisconnectBeforeConnectionEstablishment=function(){this.logger.warn("counting disconnect before connection was fully established as a connection failure"),++this.connectingErrorsInRow>=this.connectingErrorsThreshold&&this.resetReconnectParamsOnErrorThreshold()},N.prototype.sendProcessedDroppedIndicators=function(S){var M=this;try{this.logger.debug("emitting processed flow tags to the server");var W=new qe("trouter.processed_message_loss");W.args={droppedIndicators:S},this.sendDownstreamEvent(W,function(){M.logger.info("emitted processed flow tags to the server")})}catch(oe){var B=T(oe);this.logger.error("unable to send processed message loss event. Error: ".concat(B)),this.connectionTracker.trackError("trouter.processed_message_loss",B,!1)}},N.prototype.sendAllocateRequest=function(S){var M=this;this.connectionAttempt++,this.connectionTracker.trackNewConnection();var W,B=this.options.trouterUrl,oe=this.reconnectParams,ve=typeof oe?.se=="string"?parseInt(oe.se,10):typeof oe?.se=="number"?oe.se:void 0;ve&&ve<=Date.now()+36e5&&(this.logger.warn("Dropping expired cached connection parameters: ".concat(new Date(ve))),this.reconnectParams=oe=void 0),oe&&oe.serviceUrl!==B&&(this.logger.warn("Dropping cached connection parameters for a different environment (".concat(oe.serviceUrl,", now ").concat(B,")")),this.reconnectParams=oe=void 0),oe?.reconnectUrl&&(B=oe.reconnectUrl),W=oe?C(C({},oe),{serviceUrl:void 0,reconnectUrl:void 0}):null,B=(0,re.adaptUrl)(B,"v4a"),B=this.appendCorrelationIds(B,!1),B=this.appendEndpointId(B,!1),W&&(B+="&".concat(this.buildQuery(W)),W.v||(B+="&v=".concat("v4"))),B=this.options.rewriteUrlForProxy(B);var Ie=new Request(B,{method:"POST",mode:"cors",headers:new Headers(C(C({"Content-Type":"text/plain"},this.options.extraConnectionHeaders),P(S,this.usingLegacyTokenApi)))});this.logger.info("sendAllocateRequest: POST ".concat(B)),this.connectionTracker.trackStart("allocation");var Me,De=Date.now(),ze=-1,at=!1;(0,b.fetchWithTimeout)(Ie,this.timeoutOptions.fetchTimeoutMs).then(function(Et){var It;if(ze=Et.status,!Et.ok)throw Me=(It=Et.headers.get("www-authenticate"))!==null&&It!==void 0?It:void 0,at=Et.headers.get("x-trouter-skypetoken-deprecated")==="1",M.logger.warn("Allocation request got response status ".concat(Et.status,", www-authenticate header was ").concat(Me?"not empty":"empty")),new Error(Et.statusText);var Yt=Et.headers.get("content-type");if(!Yt||Yt!=="application/json"&&!Yt.startsWith("application/json;"))throw new Error("Content-type '".concat(Yt,"' is unexpected"));return M.connectionTracker.trackEnd("allocation"),Et.json()}).then(function(Et){M.unauthorizedErrorCount=0,M.onAllocationResponse(Et,S)}).catch(function(Et){M.connectingErrorsInRow++;var It="".concat(Et).concat(ze>=0?", status code ".concat(ze):"");if(M.logger.error("".concat(M.connectingErrorsInRow," failed connecting attempt(s) in a row. ").concat(It)),M.connectionTracker.trackError("allocation",It),at){var Yt="Skypetoken deprecated response, not retrying any further";return M.logger.error(Yt),M.connectionTracker.trackError("allocation",Yt),void M.fsm.onTerminalError()}if(ze===401&&M.unauthorizedErrorCount++,!M.canRetryTokenFetchRequest(M.unauthorizedErrorCount)){var Yt="getToken retry limit hit, reached terminal error state";return M.connectionTracker.trackError("allocation",Yt),void M.fsm.onTerminalError()}if(ze!==-1||M.isNavigatorOnline){if(M.reconnectParams&&M.connectingErrorsInRow>=M.connectingErrorsThreshold){if(ze>=400&&ze<=599)M.resetReconnectParamsOnErrorThreshold();else if(M.reconnectParams.reconnectUrl&&M.connectingErrorsInRow%3==0){M.logger.warn("".concat(M.connectingErrorsInRow," connection attempts, testing nominal service URL"));var _i=Math.min(M.timeoutOptions.connectionTimeoutMs-(Date.now()-De)-500,M.timeoutOptions.fetchTimeoutMs);return void M.testNominalUrlConnectivity(_i).then(function(Qr){M.connectionTracker.trackProgress("nomcheck",Qr?"ok":"failed"),Qr?(M.logger.warn("Nominal service URL is reachable, erasing cached reconnect URL"),M.reconnectParams&&delete M.reconnectParams.reconnectUrl):M.logger.warn("Nominal service URL is not reachable either, keeping cached reconnect URL"),M.fsm.onAllocationFailed(!1,void 0)},function(){M.fsm.onAllocationFailed(!1,void 0)})}}}else M.logger.info("Expected failure, the browser says it is not online at the moment");M.fsm.onAllocationFailed(ze===401,Me)})},N.prototype.testNominalUrlConnectivity=function(S){var M=this;if(S<1e3)return this.logger.warn("There is no time left to reasonably perform the nominal service URL connectivity check (".concat(S," ms), falling back to assuming that the connectivity is fine")),Promise.resolve(!0);var W;try{var B=new URL(this.options.trouterUrl);B.pathname="/",B.search="?"+this.buildQuery({check:Date.now(),cor_id:encodeURIComponent(this.options.clientCorrelationID),epid:encodeURIComponent(this.options.endpointId?this.options.endpointId:""),tc:encodeURIComponent((0,b.toJson)(this.clientInfo))}),W=new Request(this.options.rewriteUrlForProxy(B.toString()),{method:"GET",headers:{Accept:"text/plain"}})}catch(oe){return this.logger.warn("Nominal service URL connectivity test request could not be created (".concat(oe,"), falling back to assuming that the connectivity is fine")),Promise.resolve(!0)}return(0,b.fetchWithTimeout)(W,S).then(function(oe){if(oe.status!==200)throw new Error("Not 200 OK: ".concat(oe.status," ").concat(oe.statusText));return oe.text()}).then(function(oe){if(oe!=="Trouter")throw new Error('Not "Trouter": '.concat(oe.substring(0,16)).concat(oe.length>16?"...":""));return!0}).catch(function(oe){return M.logger.error("Nominal service URL connectivity test failed: ".concat(oe)),!1})},N.prototype.sendPingRequest=function(){var S=this;if(this.socket&&this.pingResponseTimerId===void 0)try{this.logger.debug("emitting ping event");var M=!1;this.socket.emit("ping",function(){M!==!0&&S.onPingResponse()}),this.pingResponseTimerId=setTimeout(function(){S.logger.error("Ping response timeout is fired"),M=!0,S.clearPingResponseTimer(),S.fsm.onPingResponseTimeout()},this.timeoutOptions.pongTimeoutMs)}catch(B){var W=T(B);this.logger.error("unable to send ping. Error: ".concat(W)),this.connectionTracker.trackError("ping",W,!1)}},N.prototype.connectV4c=function(S,M){var W,B,oe,ve,Ie,Me,De=this.options.ioOptions?C({},this.options.ioOptions):new _e;De["force new connection"]=!0,De.reconnect=!1,!((W=this.reconnectParams)===null||W===void 0)&&W.serviceUrl&&(0,re.adaptUrl)(this.reconnectParams.serviceUrl,"v4c")!==(0,re.adaptUrl)(this.options.trouterUrl,"v4c")&&(this.logger.warn("Dropping cached connection parameters for a different environment (".concat(this.reconnectParams.serviceUrl,", now ").concat(this.options.trouterUrl,")")),this.reconnectParams=void 0);var ze=(ve=(B=(0,re.redirectUrlIfPresent)(M))!==null&&B!==void 0?B:M?.kind!=="redirect-no-host"?(oe=this.reconnectParams)===null||oe===void 0?void 0:oe.reconnectUrl:void 0)!==null&&ve!==void 0?ve:this.options.trouterUrl,at=(0,re.adaptUrl)(ze,"v4c");De["skipped handshake data"]={timeout:70,websocketUrl:at},De.query=this.buildV4cUrlParams(),De.rewriteUrlForProxy=this.options.rewriteUrlForProxy;try{if(this.stopSocketIo(),this.transportTypeName="websocket",this.socket=((Ie=this.options.io)!==null&&Ie!==void 0?Ie:Q).connect(this.options.trouterUrl,De),this.socket===void 0)throw new Error("failed to create Socket.io object");var Et=(Me=this.audienceSubscriptionState)===null||Me===void 0?void 0:Me.increaseCvAndGetEventObject();this.attachSocketIoHandlers(this.socket,S,void 0,Et)}catch(It){this.logger.error("".concat(It)),this.connectionTracker.trackError("v4c","".concat(It)),this.fsm.onV4cException()}},N.prototype.sendV4cAuthenticationEvent=function(S){var M,W={headers:C(C({},this.options.extraConnectionHeaders),P(S,this.usingLegacyTokenApi)),connectparams:(0,re.reconnectParamsWithoutUrls)(this.reconnectParams)};(M=this.socket)===null||M===void 0||M.emit(A.USER_AUTHENTICATE_EVENT_NAME,W)},N.prototype.setUserActivityState=function(S){var M=S.state!==this.userActivityState.state;this.userActivityState=S,M?(this.logger.info("Changing user activity state to '".concat(S.toEventJSON(),"'")),this.fsm.onSetNewUserActivityState()):(this.logger.debug("Not changing the same user activity state '".concat(S.toEventJSON(),"'")),this.manager.onUserActivityStateAccepted(S.correlationVector.value()))},N.prototype.sendUserActivityState=function(S,M){this.userActivityState.state!==V.UserActivityState.Unknown&&(this.transportTypeName==="websocket"&&M?S===I.UserActivityEventReason.Connected?this.sendUserActivityStateMultiple(2):this.sendUserActivityStateMultiple(1):this.transportTypeName==="xhr-polling"&&S===I.UserActivityEventReason.Modified&&this.fsm.forceReconnect("user activity/force reconnect"))},N.prototype.setAudienceSubscriptionsAsync=function(S,M){var W=this.audienceSubscriptionState;if(this.audienceSubscriptionState=S,this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME)return this.setAudienceSubscriptionsInternalAsync(S.increaseCvAndGetEventObject(),M);if(this.transportTypeName===this.XHR_POLLING_TRANSPORT_NAME){var B=this.setAudienceSubscriptionsLongpollInternalAsync(S.increaseCvAndGetEventObject(),M,W);return this.fsm.forceReconnect("set audience subscription force reconnect"),B}throw new Error("set audience subscription executed on an unknown transport")},N.prototype.setAudienceSubscriptionsUnsafeAsync=function(S){if(S)return this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME?this.setAudienceSubscriptionsInternalAsync(S,15e3):void 0},N.prototype.setAudienceSubscriptionsInternalAsync=function(S,M){return R(this,void 0,void 0,function(){var W,B,oe=this;return E(this,function(ve){switch(ve.label){case 0:return this.logger.info("[WebSocket] Audience subscription set requested."),W=new qe("audience.subscribe"),W.args=S,[4,new Promise(function(Ie){var Me=!1,De=setTimeout(function(){return Me=!0,Ie(oe.buildAudienceSubscriptionsTimeoutResponse(S))},M);oe.sendDownstreamEvent(W,function(ze,at){Me||(clearTimeout(De),oe.logger.debug("[Websocket] Audience subscription response: ".concat(at)),oe.pendingAudienceSubscription&&oe.onAudienceSubscriptionResult(at),Ie(at))})})];case 1:return B=ve.sent(),this.manager.onAudiencesSetResolved(B,S.cv),[2,B]}})})},N.prototype.setAudienceSubscriptionsLongpollInternalAsync=function(S,M,W){var B;return R(this,void 0,void 0,function(){var oe,ve,Ie,Me,De,ze,at=this;return E(this,function(Et){switch(Et.label){case 0:return this.logger.info("[XHR Polling] Audience subscription set requested."),this.pendingAudienceSubscription&&(this.logger.error("Racing audience subscriptions occured. This situation resolves into undefined scenario and/or nasal demons."),clearTimeout(this.pendingAudienceSubscription.timeoutId)),S.audiences.length===0?[2,this.handleAudienceUnsubscribeLongpoll(S.cv,W)]:[4,new Promise(function(It){var Yt=setTimeout(function(){return at.pendingAudienceSubscription=void 0,It(at.buildAudienceSubscriptionsTimeoutResponse(S))},M);at.pendingAudienceSubscription={audienceSetResolve:It,timeoutId:Yt}})];case 1:return oe=Et.sent(),this.manager.getState()===V.TrouterState.Unknown||this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME?[2,oe]:(ve=oe.responses[0],ve?.result.audienceSubscriptionState===this.AUDIENCE_SUBSCRIPTION_RESULT_BAD_REQUEST?(this.clearAudienceSubscriptionStateQueryParam(),this.manager.onAudiencesSetResolved(oe,S.cv),[2,oe]):(Ie=oe.responses.find(function(It){return It.audienceId===S.audiences[0].id}),Ie?.result.audienceSubscriptionState===this.AUDIENCE_SUBSCRIPTION_RESULT_ERROR?(this.clearAudienceSubscriptionStateQueryParam(),this.manager.onAudiencesSetResolved(oe,S.cv),[2,oe]):(Me=((B=W?.audienceSubscriptionModel.audienceSubscriptions[0])===null||B===void 0?void 0:B.id)!==ve?.audienceId,W&&Me&&(De=this.mapToSyntheticAudienceSubscriptionResponses(W.audienceSubscriptionModel.audienceSubscriptions,this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED,200),(ze=oe.responses).push.apply(ze,De)),this.manager.onAudiencesSetResolved(oe,S.cv),[2,oe])))}})})},N.prototype.clearAudienceSubscriptionStateQueryParam=function(){var S,M,W;!((W=(M=(S=this.socket)===null||S===void 0?void 0:S.socket)===null||M===void 0?void 0:M.options)===null||W===void 0)&&W.query&&(this.socket.socket.options.query=this.socket.socket.options.query.replace(this.AUDIENCE_SUBSCRIPTION_STATE_QUERY_PARAM_REGEX,""))},N.prototype.handleAudienceUnsubscribeLongpoll=function(S,M){var W;this.audienceSubscriptionState=void 0;var B={responses:[]};if(M){var oe=this.mapToSyntheticAudienceSubscriptionResponses(M.audienceSubscriptionModel.audienceSubscriptions,this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED,200);(W=B.responses).push.apply(W,oe)}return this.manager.onAudiencesSetResolved(B,S),B},N.prototype.buildAudienceSubscriptionsTimeoutResponse=function(S){return this.logger.error("Audience subscription attempt has timed out."),{responses:this.mapToSyntheticAudienceSubscriptionResponses(S.audiences,this.AUDIENCE_SUBSCRIPTION_RESULT_TIMEOUT)}},N.prototype.mapToSyntheticAudienceSubscriptionResponses=function(S,M,W){return S.map(function(B){return{audienceId:B.id,result:{audienceSubscriptionState:M,responseStatus:W}}})},N.prototype.expediteBackoff=function(){this.tokenBackoff.expediteIfPending()},N.prototype.sendRegisterRequest=function(){var S=this;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");if(!this.allocateResult)throw new Error("Allocate result is undefined in sendRegisterRequest()");this.logger.info("sending register request");var M=new b.Timespan;this.connectionTracker.trackStart("registration");var W=this.getRegistrationTtl()[0];this.registrarClient.register({appId:this.options.registration.pnhAppId,aesKey:"",languageId:"en-US",platform:this.options.registration.platform,templateKey:this.options.registration.pnhTemplateKey,platformUIVersion:this.options.registration.platformUIVersion,productContext:this.options.registration.productContext},{TROUTER:[{context:this.options.registration.context,path:this.allocateResult.surl,ttl:W}]}).then(function(){S.logger.info("Register request successful"),S.connectionTracker.trackEnd("registration"),S.fsm.onRegistrationSucceeded(),S.connectionTracker.sendTelemetry(w.ClientEventName.Registration,{duration:M.duration},[])}).catch(function(B){S.logger.error("Register request failed. Error: ".concat(B)),S.connectionTracker.trackError("registration",j(B)),S.fsm.onRegistrationFailed(),S.connectionTracker.sendTelemetry(w.ClientEventName.Registration,{duration:M.duration},[])})},N.prototype.sendUnregisterRequest=function(){var S=this;this.logger.info("sending unregister request");var M=new b.Timespan;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");this.connectionTracker.trackStart("unregistration"),this.registrarClient.unregister().then(function(){S.logger.info("Unregister request successful"),S.connectionTracker.trackEnd("unregistration"),S.fsm.onUnregistrationDone(),S.connectionTracker.sendTelemetry(w.ClientEventName.Unregistration,{duration:M.duration},[])}).catch(function(W){S.logger.error("Unregister request failed. Error: ".concat(W)),S.connectionTracker.trackError("unregistration",j(W)),S.fsm.onUnregistrationDone(),S.connectionTracker.sendTelemetry(w.ClientEventName.Unregistration,{duration:M.duration},[])})},N.prototype.resetTokenBackoff=function(){this.tokenBackoff.reset()},N.prototype.cancelPendingRegistrationRequests=function(){this.registrarClient&&this.registrarClient.cancelPendingRequests()},N.prototype.clearSentEventTimers=function(){var S=Object.keys(this.pendingSentEventTimers);if(S.length>0){this.logger.debug("Clearing all pending downstream events related timers");for(var M=0,W=S;M<W.length;M++){var B=W[M];this.clearSentEventTimer(Number(B))}}},N.prototype.restartIncallModeTimer=function(){var S=this;this.clearIncallModeTimerId(),this.logger.debug("Restarting incall mode timer"),this.incallModeTimerId=setTimeout(function(){S.logger.info("Call mode timer fired"),S.fsm.onIncallModeTimer()},this.options.incallModeTimeoutMs)},N.prototype.enterIncallMode=function(){this.logger.info("Entering incall mode"),this.timeoutOptions=this.options.incallTimeoutOptions,this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!0},N.prototype.exitIncallMode=function(){this.logger.info("Exiting incall mode"),this.clearIncallModeTimerId(),this.timeoutOptions=this.options.timeoutOptions,this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!1},N.prototype.isIncallMode=function(){return this.inIncallMode},N.prototype.sendDisconnectTelemetryEvent=function(S){var M={reason:S,serverClosed:!this.fsm.isActive()};this.connectionTracker.trackDisconnected(M),this.connectionTracker.clearConnectedInfo()},N.prototype.forceReconnectDueToNoRegistration=function(){this.fsm.forceReconnect("force reconnect due to no registration")},N.prototype.resetReconnectParamsOnErrorThreshold=function(){this.logger.warn("".concat(this.connectingErrorsInRow," connection attempts, server-side failure: erasing cached connection parameters")),this.reconnectParams=void 0},N.prototype.onSocketConnecting=function(S){this.logger.info("onSocketConnecting(".concat(S,")")),this.transportTypeName=S,this.connectionTracker.trackProgress("connecting",this.transportTypeName),this.fsm.onConnecting()},N.prototype.onSocketConnect=function(S){this.logger.info("onSocketConnect"),this.fsm.onSocketConnect(S)},N.prototype.onSocketConnectFailed=function(S){this.logger.error("onSocketConnectFailed"),this.connectionTracker.trackError("connect_failed",S,!0,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),this.fsm.onConnectingFailed()},N.prototype.onSocketDisconnect=function(S){var M=this.connectionTracker.getSessionLength()||0,W=H.DisconnectReason.fromRawReason(S);this.logger.error("onSocketDisconnect, reason: ".concat(W.reason)),W.reason==="dup"&&this.lastDisconnectReason==="dup"&&M<this.options.duplicateDisconnectThresholdMs&&(this.logger.warn("Socket was closed by server as Duplicate for the second time in a row "+"after ".concat(M," ms which is below the threshold of ")+"".concat(this.options.duplicateDisconnectThresholdMs," ms. Resetting cached ")+"connection parameters and making a new allocation."),this.reconnectParams=void 0),this.lastDisconnectReason=W.reason,this.fsm.onSocketDisconnect(W),this.connectionExpireTimestampInSecs=void 0},N.prototype.onSocketReconnect=function(){this.logger.error("onSocketReconnect"),this.fsm.onTrouterConnected()},N.prototype.onSocketReconnectFailed=function(S){this.logger.error("onSocketReconnectFailed with '".concat(S,"'")),this.fsm.onSocketDisconnect(H.DisconnectReason.fromSocketIoEventData("reconnecterror",S))},N.prototype.onSocketReconnecting=function(){this.logger.error("onSocketReconnecting")},N.prototype.onSocketError=function(S){this.logger.error("onSocketError with '".concat((0,b.toJson)(S),"'")),this.fsm.isConnecting()&&++this.connectingErrorsInRow>=this.connectingErrorsThreshold&&this.resetReconnectParamsOnErrorThreshold(),this.connectionTracker.trackError("connectSocket",K(S)),this.fsm.onSocketDisconnect(H.DisconnectReason.fromSocketIoEventData("socketerror",S))},N.prototype.onSocketMessage=function(S){var M,W=this;this.logger.debug("onSocketMessage");var B;try{B=new Ee(S,this.logger);var oe=(M=B.headers)===null||M===void 0?void 0:M["X-Microsoft-Skype-Chain-ID"],ve=oe?" Chain-Id ".concat(oe):"";this.logger.info("Received request N ".concat(B.id).concat(ve," CV ").concat(B.correlationVector," to '").concat(B.url,"'")),B.startTS=Date.now(),B.url&&this.urlPath&&B.url.startsWith(this.urlPath)&&(B.shortUrl=B.url.substring(this.urlPath.length))}catch(Me){var Ie=T(Me);return this.logger.error("unable to parse request. Error: ".concat(Ie)),this.connectionTracker.trackRequest(void 0,Ie),void this.connectionTracker.sendResponseError("unable to parse request, error: ".concat(Me))}B.timeoutTimerId=setTimeout(function(){if(!B.replied){W.logger.error("Request ".concat(B.id," timed out"));var Me=new w.ResponseData(B.id);Me.status=504,Me.headers={"Trouter-Responder":"ClientLib"},W.sendResponse(B,Me),B.timedout=!0}},this.timeoutOptions.requestTimeoutMs);try{this.connectionTracker.trackRequest(B),this.fsm.onDownstreamRequest(B)}catch(Me){this.logger.error("exception in socket.on message. Error: ".concat(T(Me))),this.connectionTracker.sendResponseError(j(Me),B,void 0)}},N.prototype.onTrouterConnected=function(S,M,W){var B,oe,ve,Ie,Me=this;if((0,re.isV4ConnectEvent)(S)){var De=S;this.allocateResult=C(C({},De),{ttl:S.ttl.toString()}),this.populateAndCacheReconnectParams(De,De.reconnectUrl),this.populateConnectionStateFields(De)}else if(!this.allocateResult)return void this.logger.error("Invalid internal state - received onTrouterConnected while allocateResult is not set");this.connectingErrorsInRow=0,this.logger.info("onTrouterConnected: ".concat(this.allocateResult.url)),this.transportTypeName==="xhr-polling"&&M&&this.manager.onUserActivityStateAccepted(M.cv),!((ve=(oe=(B=this.socket)===null||B===void 0?void 0:B.socket)===null||oe===void 0?void 0:oe.options)===null||ve===void 0)&&ve.query&&(this.socket.socket.options.query+="&connected=true"),this.urlPath=this.allocateResult.url.replace(/https?:\/\/([A-z0-9\:\$\-\_\.\+\!\*\"\(\)\,]*)\//,"/");var ze=this.connectedUrl!==this.allocateResult.url;this.connectedUrl=this.allocateResult.url,this.connectionExpireTimestampInSecs=(0,b.calculateExpireTsInSec)((0,re.ensureNumber)(S.ttl)),this.connectionTracker.trackEnd("connectSocket"),this.connectionTracker.trackConnected(ze,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),(Ie=this.setAudienceSubscriptionsUnsafeAsync(W))===null||Ie===void 0||Ie.catch(function(at){return Me.logger.error("Re-subscribe to audiences has failed with ".concat(at))}),this.fsm.onTrouterConnected()},N.prototype.onTrouterReconnect=function(S){var M=S.target;this.logger.info("onTrouterReconnect target: ".concat(M)),M==="self"?this.fsm.onReconnectRequired(!0,O.ServerInitiated):this.fsm.onReconnectRequired(!1,O.ServerInitiated,S)},N.prototype.onTrouterMessageLoss=function(S){this.logger.debug("onTrouterMessageLoss"),this.fsm.onTrouterMessageLost(S.droppedIndicators)},N.prototype.onAudienceSubscriptionResult=function(S){this.logger.info("onAudienceSubscriptionResult"),this.pendingAudienceSubscription&&(clearTimeout(this.pendingAudienceSubscription.timeoutId),this.pendingAudienceSubscription.audienceSetResolve(S),this.pendingAudienceSubscription=void 0)},N.prototype.buildV4cUrlParams=function(){var S={};return S.tc=encodeURI((0,b.toJson)(this.clientInfo)),S.timeout=Math.floor(this.timeoutOptions.pingTimeoutMs/1e3),this.options.endpointId&&(S.epid=this.options.endpointId),this.appendConnectedClientIds(this.buildQuery(S),!0)},N.prototype.attachSocketIoHandlers=function(S,M,W,B){var oe=this;S.on("connecting",function(ve){oe.onSocketConnecting(ve)}),S.on("connect",function(){oe.onSocketConnect(M)}),S.on("connect_failed",function(ve){oe.onSocketConnectFailed(ve)}),S.on("close_during_connecting",function(ve){oe.onSocketConnectFailed(ve)}),S.on("disconnect",function(ve){oe.onSocketDisconnect(ve)}),S.on("reconnect",function(){oe.onSocketReconnect()}),S.on("reconnect_failed",function(ve){oe.onSocketReconnectFailed(ve)}),S.on("reconnecting",function(){oe.onSocketReconnecting()}),S.on("error",function(ve){oe.onSocketError(ve)}),S.on("message",function(ve){oe.onSocketMessage(ve)}),S.on("trouter.connected",function(ve){oe.onTrouterConnected(ve,W,B)}),S.on("trouter.reconnect",function(ve){oe.onTrouterReconnect(ve)}),S.on("trouter.message_loss",function(ve){oe.onTrouterMessageLoss(ve)}),S.on("audience.subscriptionresult",function(ve,Ie){oe.onAudienceSubscriptionResult(Ie)})},N.prototype.onNavigatorOnlineStatusUpdate=function(){var S=window.navigator.onLine;this.logger.debug("Browser online status update - new state: ".concat(S,", previously: ").concat(this.isNavigatorOnline)),S&&!this.isNavigatorOnline?(this.isNavigatorOnline=!0,this.tokenBackoff.expediteIfPending(),this.connectionTracker.trackProgress("browserNet","online")):!S&&this.isNavigatorOnline&&(this.isNavigatorOnline=!1,this.connectionTracker.trackProgress("browserNet","offline"))},N.prototype.onAllocationResponse=function(S,M){this.logger.info("Received allocation response ".concat(JSON.stringify(S))),this.allocateResult=S,this.populateAndCacheReconnectParams(this.allocateResult,"".concat(this.allocateResult.socketio,"v4/a")),this.populateConnectionStateFields(this.allocateResult),this.fsm.onAllocationSucceed(M)},N.prototype.populateAndCacheReconnectParams=function(S,M){this.reconnectParams=C({serviceUrl:this.options.trouterUrl,reconnectUrl:M},S.connectparams),this.manager.onConnectionParametersUpdated(this.reconnectParams)},N.prototype.populateConnectionStateFields=function(S){var M,W,B=typeof S.ttl=="string"?parseInt(S.ttl,10):S.ttl;if(this.connectionExpireTimestampInSecs=(0,b.calculateExpireTsInSec)(B),this.connectionId=(M=S.id)!==null&&M!==void 0?M:"",this.connectedClientId=S.ccid,this.logger.debug("connected client id set {connectedClientId:".concat(this.connectedClientId,"}")),this.c2cUrlBase=(W=S.curlb)!==null&&W!==void 0?W:"",this.c2cUrlBase===""){var oe=S.surl.indexOf("://");oe>=0&&(oe=S.surl.indexOf("/",oe+3))>=5&&S.surl.substr(oe-5,5)===":3443"&&(this.c2cUrlBase=S.surl.substr(0,oe-5))}},N.prototype.onPingResponse=function(){this.logger.debug("onPingResponse"),this.connectionTracker.increasePingResponseCount(),this.clearPingResponseTimer(),this.fsm.onPingResponse()},N.prototype.clearPingResponseTimer=function(){this.pingResponseTimerId!==void 0&&(clearTimeout(this.pingResponseTimerId),this.pingResponseTimerId=void 0)},N.prototype.buildQuery=function(S){for(var M=[],W=0,B=Object.keys(S);W<B.length;W++){var oe=B[W];S[oe]!==void 0&&M.push("".concat(oe,"=").concat(S[oe]))}return M.join("&")},N.prototype.appendConnectedClientIds=function(S,M){var W="";S.includes("ccid=")||(W="ccid=".concat(this.connectedClientId,"&")),this.domId&&(W+="dom=".concat(this.domId,"&")),W.length>0&&(W=W.slice(0,-1));var B=M||S.includes("?")?"&":"?";return this.appendCorrelationIds(S+B+W,M)},N.prototype.appendEndpointId=function(S,M){var W=M||S.includes("?")?"&":"?";return!S.includes("epid")&&this.options.endpointId?"".concat(S).concat(W,"epid=").concat(this.options.endpointId):S},N.prototype.appendCorrelationIds=function(S,M){var W=M||S.includes("?")?"&":"?";return S.includes("cor_id")?S:"".concat(S).concat(W,"cor_id=").concat(this.options.clientCorrelationID)+"&con_num=".concat(this.clientID,"_").concat(this.connectionAttempt)},N.prototype.safeString=function(S){return typeof S=="string"?S:""},N.prototype.sendResponse=function(S,M){var W,B,oe;if(S.timedout)return this.logger.error("Request ".concat(S.id," already timed out")),1;if(S.replied)return this.logger.error("Response for request ".concat(S.id," already sent")),2;clearTimeout(S.timeoutTimerId),S.timeoutTimerId=void 0,S.replied=!0,M.headers=(W=M.headers)!==null&&W!==void 0?W:{};var ve=S.correlationVector;this.logger.info("Sending response N ".concat(S.id," CV ").concat(ve," with status ").concat(M.status)),ve&&(M.headers[ke]=ve),!((B=S.headers)===null||B===void 0)&&B["trouter-request"]&&(M.headers["trouter-request"]=S.headers["trouter-request"]);var Ie=Date.now()-S.startTS;if(M.headers["trouter-client"]=(0,b.toJson)({cd:Ie}),!((oe=S.headers)===null||oe===void 0)&&oe["trouter-is-broadcast"]&&(M.headers["trouter-is-broadcast"]=S.headers["trouter-is-broadcast"]),this.logger.debug("response: ".concat((0,b.toJson)(M))),!this.socket)return this.connectionTracker.sendResponseError("no socket",S,M),4;try{return this.socket.send((0,b.toJson)(M)),M.sentTS=Date.now(),S.incrementCorrelationVector(),this.connectionTracker.trackResponse(S,Ie,M),this.transportTypeName==="websocket"&&this.sendPingRequest(),0}catch(De){var Me="unable to send data on response.end. Error: ".concat(T(De));return this.logger.error(Me),this.connectionTracker.sendResponseError(Me,S,M),4}},N.prototype.sendUserActivityStateMultiple=function(S){var M=this,W=new qe("user.activity"),B=this.userActivityState.increaseCvAndGetEventObject();W.args=B,this.logger.debug("Sending user activity '".concat(this.userActivityState.toEventJSON(),"', remaining ").concat(S-1));var oe=!1;this.sendDownstreamEvent(W,function(){if(oe!==!0&&(M.logger.info("User activity state: ".concat(B.state,", cv: ").concat(B.cv," accepted")),M.manager.onUserActivityStateAccepted(B.cv),M.clearSentEventTimer(W.timeoutTimerId),S>1)){var ve=setTimeout(function(){M.clearSentEventTimer(ve),M.sendUserActivityStateMultiple(S-1)},M.options.userActivitySecondResendDelayMs);M.registerSentEventTimer(ve,"user.activity/resend")}}),W.timeoutTimerId=setTimeout(function(){M.logger.error("Activity state response timeout is fired"),oe=!0,M.fsm.onActivityStateResponseTimeout(),M.clearSentEventTimer(W.timeoutTimerId)},this.timeoutOptions.userActivityResponseTimeoutMs),this.registerSentEventTimer(W.timeoutTimerId,"user.activity/response")},N.prototype.sendDownstreamEvent=function(S,M){this.logger.debug("Sending downstream event ".concat(S.name)),this.socket&&this.socket.emit(S.name,S.args,M)},N.prototype.registerSentEventTimer=function(S,M){this.logger.debug("registering timer ".concat(S," -> ").concat(M)),this.pendingSentEventTimers[S]=M},N.prototype.clearSentEventTimer=function(S){var M=this.pendingSentEventTimers[S];this.logger.debug("clearing timer ".concat(S," -> ").concat(M)),delete this.pendingSentEventTimers[S],clearTimeout(S)},N.prototype.getRegistrationTtl=function(){var S,M,W=(0,b.calculateTtlInSec)(this.connectionExpireTimestampInSecs);if(this.logger.debug("Current connectionID will expire in ".concat(W," seconds")),((S=this.options.registration)===null||S===void 0?void 0:S.registrarTtlSec)&&W>0){var B=this.options.registration.registrarTtlSec<W;return[Math.min(this.options.registration.registrarTtlSec,W),B]}return!((M=this.options.registration)===null||M===void 0)&&M.registrarTtlSec?[this.options.registration.registrarTtlSec,!1]:W>0?[W,!1]:[3600,!1]},N.prototype.clearIncallModeTimerId=function(){this.incallModeTimerId!==void 0&&(this.logger.debug("Clearing in-call mode timer"),clearTimeout(this.incallModeTimerId),this.incallModeTimerId=void 0)},N.prototype.applyConnectionTrackerOptions=function(S){try{S.eventLogger&&typeof S.eventLogger.logEvent=="function"?(this.connectionTracker.mergeSettings(S.telemetrySettings),this.connectionTracker.enable(S.eventLogger)):this.logger.warn("Trouter client event logging disabled due to invalid configuration.")}catch(M){this.logger.warn("Trouter client event logging disabled. Error: ".concat(T(M))),this.connectionTracker.disable()}},N.prototype.canRetryTokenFetchRequest=function(S){var M=this.options.retryLimitOnTokenFetch;return M==null||S<M||(this.logger.warn("Reached limit on maximum number of token fetch request. Current count: ".concat(S,", retry limit: ").concat(M)),!1)},N})();D.TrouterConnection=Ke},function(G,D,J){Object.defineProperty(D,"__esModule",{value:!0}),D.MessageHandlerRegistry=void 0;var P=J(1),K=J(0),T=(function(){function j(C){this.messageHandlers=[],this.logger=new K.Logger("MessageHandlers",C)}return j.prototype.register=function(C){if(this.messageHandlers.some(function(R){return R===C}))throw new Error("Registering the same handler twice is not allowed");this.messageHandlers.push(C)},j.prototype.clear=function(){this.logger.debug("Clearing message handlers"),this.messageHandlers=[]},j.prototype.active=function(){return this.messageHandlers.length>0},j.prototype.handleMessage=function(C){for(var R={resultCode:P.UNHANDLED_MESSAGE_ACK,isHandled:!1},E=0,O=this.messageHandlers;E<O.length;E++){var k=O[E],b=this.safeExecuteHandle(k,C);if(b!==void 0&&(b.isHandled===void 0||b.isHandled))return b.resultCode===void 0&&(b.resultCode=P.HANDLED_MESSAGE_ACK),b}return R},j.prototype.safeExecuteHandle=function(C,R){try{return C.handleMessage(R)}catch(E){return void this.logger.warn("Trouter message handler threw an exception: ".concat(E))}},j})();D.MessageHandlerRegistry=T},function(G,D,J){function P(j){var C,R=this;return function(E){return K(R,void 0,void 0,function(){return T(this,function(O){return E&&(C=void 0),[2,new Promise(function(k,b){j(E).then(function(w){C=w,k(w)}).catch(function(w){C!==void 0&&C.length>0&&k(C),b(w)})})]})})}}var K=this&&this.__awaiter||function(j,C,R,E){function O(k){return k instanceof R?k:new R(function(b){b(k)})}return new(R||(R=Promise))(function(k,b){function w(ee){try{H(E.next(ee))}catch(V){b(V)}}function A(ee){try{H(E.throw(ee))}catch(V){b(V)}}function H(ee){ee.done?k(ee.value):O(ee.value).then(w,A)}H((E=E.apply(j,C||[])).next())})},T=this&&this.__generator||function(j,C){function R(H){return function(ee){return E([H,ee])}}function E(H){if(O)throw new TypeError("Generator is already executing.");for(;w&&(w=0,H[0]&&(A=0)),A;)try{if(O=1,k&&(b=2&H[0]?k.return:H[0]?k.throw||((b=k.return)&&b.call(k),0):k.next)&&!(b=b.call(k,H[1])).done)return b;switch(k=0,b&&(H=[2&H[0],b.value]),H[0]){case 0:case 1:b=H;break;case 4:return A.label++,{value:H[1],done:!1};case 5:A.label++,k=H[1],H=[0];continue;case 7:H=A.ops.pop(),A.trys.pop();continue;default:if(b=A.trys,!(b=b.length>0&&b[b.length-1])&&(H[0]===6||H[0]===2)){A=0;continue}if(H[0]===3&&(!b||H[1]>b[0]&&H[1]<b[3])){A.label=H[1];break}if(H[0]===6&&A.label<b[1]){A.label=b[1],b=H;break}if(b&&A.label<b[2]){A.label=b[2],A.ops.push(H);break}b[2]&&A.ops.pop(),A.trys.pop();continue}H=C.call(j,A)}catch(ee){H=[6,ee],k=0}finally{O=b=0}if(5&H[0])throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}var O,k,b,w,A={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return w={next:R(0),throw:R(1),return:R(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w};Object.defineProperty(D,"__esModule",{value:!0}),D.addCacheAsBackupTo=void 0,D.addCacheAsBackupTo=P},function(G,D,J){var P=this&&this.__awaiter||function(V,I,L,re){function te(Q){return Q instanceof L?Q:new L(function(le){le(Q)})}return new(L||(L=Promise))(function(Q,le){function _e(Ne){try{Ee(re.next(Ne))}catch(qe){le(qe)}}function ke(Ne){try{Ee(re.throw(Ne))}catch(qe){le(qe)}}function Ee(Ne){Ne.done?Q(Ne.value):te(Ne.value).then(_e,ke)}Ee((re=re.apply(V,I||[])).next())})},K=this&&this.__generator||function(V,I){function L(Ee){return function(Ne){return re([Ee,Ne])}}function re(Ee){if(te)throw new TypeError("Generator is already executing.");for(;_e&&(_e=0,Ee[0]&&(ke=0)),ke;)try{if(te=1,Q&&(le=2&Ee[0]?Q.return:Ee[0]?Q.throw||((le=Q.return)&&le.call(Q),0):Q.next)&&!(le=le.call(Q,Ee[1])).done)return le;switch(Q=0,le&&(Ee=[2&Ee[0],le.value]),Ee[0]){case 0:case 1:le=Ee;break;case 4:return ke.label++,{value:Ee[1],done:!1};case 5:ke.label++,Q=Ee[1],Ee=[0];continue;case 7:Ee=ke.ops.pop(),ke.trys.pop();continue;default:if(le=ke.trys,!(le=le.length>0&&le[le.length-1])&&(Ee[0]===6||Ee[0]===2)){ke=0;continue}if(Ee[0]===3&&(!le||Ee[1]>le[0]&&Ee[1]<le[3])){ke.label=Ee[1];break}if(Ee[0]===6&&ke.label<le[1]){ke.label=le[1],le=Ee;break}if(le&&ke.label<le[2]){ke.label=le[2],ke.ops.push(Ee);break}le[2]&&ke.ops.pop(),ke.trys.pop();continue}Ee=I.call(V,ke)}catch(Ne){Ee=[6,Ne],Q=0}finally{te=le=0}if(5&Ee[0])throw Ee[1];return{value:Ee[0]?Ee[1]:void 0,done:!0}}var te,Q,le,_e,ke={label:0,sent:function(){if(1&le[0])throw le[1];return le[1]},trys:[],ops:[]};return _e={next:L(0),throw:L(1),return:L(2)},typeof Symbol=="function"&&(_e[Symbol.iterator]=function(){return this}),_e};Object.defineProperty(D,"__esModule",{value:!0}),D.TrouterManager=D.AudienceSubscriptionState=D.UserActivityObject=void 0;var T=J(3),j=J(2),C=J(4),R=J(0),E=J(5),O=J(18),k=J(7),b=J(6),w=J(19),A=(function(){function V(I,L){this.state=I,this.correlationVector=L!==void 0?L:T.CorrelationVector.extend()}return V.prototype.getStateString=function(){switch(this.state){case j.UserActivityState.Active:return"active";case j.UserActivityState.Inactive:return"inactive";case j.UserActivityState.Unknown:return"unknown";default:return"undefined"}},V.prototype.increaseCvAndGetEventObject=function(){return this.correlationVector.increase(),this.toEventObject()},V.prototype.toEventObject=function(){return{state:this.getStateString(),cv:this.correlationVector.value()}},V.prototype.toEventJSON=function(){return(0,T.toJson)(this.toEventObject())},V})();D.UserActivityObject=A;var H=(function(){function V(I,L){L===void 0&&(L=T.CorrelationVector.extend()),this.audienceSubscriptionModel=I,this.correlationVector=L}return V.prototype.increaseCvAndGetEventObject=function(){return this.correlationVector.increase(),this.toEventObject()},V.prototype.toEventObject=function(){return{audiences:this.audienceSubscriptionModel.audienceSubscriptions,cv:this.correlationVector.value()}},V.prototype.toEventJSON=function(){return(0,T.toJson)(this.toEventObject())},V})();D.AudienceSubscriptionState=H;var ee=(function(){function V(I,L,re,te,Q,le){var _e=this;this.logFunc=I,this.options=L,this.tokenProvider=re,this.usingLegacyTokenApi=te,this.listener=Q,this.tokenTypeProtocolSelector=function(ke,Ee){return _e.options.forceV4aProtocol?"v4a":(0,E.usedProtocol)(ke,Ee)},this.logger=new R.Logger("Manager",I),this.logger.info("Created TrouterManager with options ".concat((0,T.toJson)(this.options))),this.fsm=new w.TrouterManagerFsm(I,this),this.baseEndpointUrl="",this.processedMessageLoss={},this.userActivityObject=new A(j.UserActivityState.Unknown),this.protocolSelector=le??this.tokenTypeProtocolSelector.bind(this)}return V.prototype.start=function(){this.fsm.start()},V.prototype.stop=function(I){this.fsm.stop(I)},V.prototype.configure=function(I){this.options=I,this.firstConnection!==void 0&&this.firstConnection.configure(I),this.secondConnection!==void 0&&this.secondConnection.configure(I),this.logger.info("Reconfigured TrouterManager with options ".concat((0,T.toJson)(this.options)))},V.prototype.checkConnection=function(I){this.firstConnection!==void 0&&this.firstConnection.checkConnection(I),this.secondConnection!==void 0&&this.secondConnection.checkConnection(I)},V.prototype.resendRegistration=function(){return P(this,void 0,void 0,function(){return K(this,function(I){return this.secondConnection!==void 0?(this.logger.info("Resending registration on the second/new connection"),[2,this.secondConnection.resendRegistration()]):this.firstConnection!==void 0?(this.logger.info("Resending registration on the first/current connection"),[2,this.firstConnection.resendRegistration()]):(this.logger.info("No connection to resend registration on, will be done upon (re)connect"),[2])})})},V.prototype.getServerState=function(){if(this.firstConnection!==void 0)return this.firstConnection.getServerState()},V.prototype.getState=function(){return this.fsm.getState()},V.prototype.isInTerminalState=function(){return this.fsm.getInternalState()===C.TrouterManagerState.TerminalError},V.prototype.reportStateInfo=function(){var I=this.firstConnection?b.State[this.firstConnection.getState()]:"Unknown",L=C.TrouterManagerState[this.fsm.getInternalState()];if(this.secondConnection){var re=b.State[this.secondConnection.getState()];return"Manager ".concat(L,"; 1st ").concat(I,"; 2nd ").concat(re)}return"Manager ".concat(L,"; Connection ").concat(I)},V.prototype.startFirstConnection=function(){var I=new k.TrouterConnection(this.logFunc,this.options,this.configuredTrouterManager(),this.tokenProvider,this.usingLegacyTokenApi,this.userActivityObject,this.protocolSelector,this.audienceSubscriptionState);this.firstConnection=I,this.getConnectionCache().then(function(L){I.start(L)}).catch(function(){})},V.prototype.startSecondConnection=function(I){var L=new k.TrouterConnection(this.logFunc,this.options,this.configuredTrouterManager(),this.tokenProvider,this.usingLegacyTokenApi,this.userActivityObject,this.protocolSelector,this.audienceSubscriptionState);this.secondConnection=L,this.firstConnection!==void 0&&this.firstConnection.disableRegistrationsAndAutoReconnect(),I?this.getConnectionCache().then(function(re){L.start(re)}).catch(function(){}):L.start()},V.prototype.stopFirstConnection=function(I){this.firstConnection!==void 0&&(this.storedFirstConnection=this.firstConnection,this.firstConnection.stop(I),this.firstConnection=void 0)},V.prototype.stopSecondConnection=function(I){this.secondConnection!==void 0&&(this.secondConnection.stop(I),this.secondConnection=void 0)},V.prototype.stopSecondConnectionDelayed=function(){if(this.secondConnection!==void 0){var I=this.secondConnection;this.secondConnection=void 0,this.logger.info("Closing an inactive connection in ".concat(Math.round(this.options.lingeringConnectionDelayMs/1e3),"s")),setTimeout(function(){I.stop(!0)},this.options.lingeringConnectionDelayMs)}},V.prototype.forceStopLingeringConnection=function(){this.storedFirstConnection&&(this.storedFirstConnection.stop(!1),this.storedFirstConnection=void 0)},V.prototype.switchConnections=function(){var I=this.firstConnection;this.firstConnection=this.secondConnection,this.secondConnection=I},V.prototype.doesSecondConnectionExist=function(){return this.secondConnection!==void 0},V.prototype.dispatchConnected=function(){if(this.firstConnection!==void 0){var I=this.firstConnection.getServerState(),L=I.url.endsWith("/")?I.url.slice(0,-1):I.url,re={baseEndpointUrl:L,newEndpointUrl:L!==this.baseEndpointUrl,c2cUrlBase:I.c2cUrlBase,clientId:I.connectedClientId,connectionId:I.connectionId,connectionTtlSec:I.getRemainingTtlInSec()};this.baseEndpointUrl=L,this.listener.onTrouterConnected(I.url,re)}},V.prototype.dispatchDisconnected=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},V.prototype.dispatchTerminalError=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},V.prototype.dispatchRegistrationState=function(I){this.options.registrationStateCallback&&this.options.registrationStateCallback(I)},V.prototype.expediteBackoffOnConnections=function(){var I;if(this.lastExpediteBackoffCallAt!==void 0&&Date.now()-this.lastExpediteBackoffCallAt<((I=this.options.expediteBackoffOnStartMinimumDelayMs)!==null&&I!==void 0?I:1e4))return void this.logger.info("Expedite backoff due to start() too frequent, skipping");this.lastExpediteBackoffCallAt=Date.now(),this.firstConnection!==void 0&&this.firstConnection.expediteBackoff(),this.secondConnection!==void 0&&this.secondConnection.expediteBackoff()},V.prototype.onDownstreamRequest=function(I,L,re){var te={id:L.id,method:L.method,path:"/".concat(L.shortUrl),body:L.body,headers:L.headers},Q={id:L.id,status:0,headers:{},body:"",send:function(){return Q.status<=100||Q.status>=999?3:(re.writeHead(Q.status,Q.headers),re.end(Q.body))}};this.listener.onTrouterRequest(te,Q)},V.prototype.onConnected=function(I){this.fsm.onConnected(I===this.firstConnection)},V.prototype.onRegistered=function(I){this.fsm.onRegistered(I===this.firstConnection)},V.prototype.onUnregistered=function(I){this.fsm.onUnregistered(I===this.firstConnection||I===this.storedFirstConnection)},V.prototype.onReconnecting=function(I){this.fsm.onReconnecting(I===this.firstConnection)},V.prototype.onReconnectIsRequired=function(I,L,re){this.fsm.onReconnectionRequired(I===this.firstConnection,L,re)},V.prototype.onDisconnected=function(I){this.fsm.onDisconnected(I===this.firstConnection||I==this.storedFirstConnection),this.storedFirstConnection=void 0},V.prototype.onTerminalError=function(){this.fsm.onTerminalError(),this.storedFirstConnection=void 0},V.prototype.onUserActivityStateAccepted=function(I){this.listener.onTrouterUserActivityStateAccepted&&this.listener.onTrouterUserActivityStateAccepted(I)},V.prototype.onAudiencesSetResolved=function(I,L){var re,te;(te=(re=this.listener).onAudiencesSetResolved)===null||te===void 0||te.call(re,I,L)},V.prototype.onConnectionParametersUpdated=function(I){this.setConnectionCache(I)},V.prototype.setUserActivityState=function(I,L){return this.userActivityObject=new A(I,T.CorrelationVector.extend(L)),this.secondConnection!==void 0?(this.logger.info("Setting user activity ".concat(this.userActivityObject.toEventJSON()," on the second/new connection")),void this.secondConnection.setUserActivityState(this.userActivityObject)):this.firstConnection!==void 0?(this.logger.info("Setting user activity ".concat(this.userActivityObject.toEventJSON()," on the first/current connection")),void this.firstConnection.setUserActivityState(this.userActivityObject)):void 0},V.prototype.setAudienceSubscriptionsAsync=function(I,L,re){if(this.audienceSubscriptionState=new H(I,T.CorrelationVector.extend(re)),this.secondConnection)return this.logger.info("Setting audience subscriptions ".concat(this.audienceSubscriptionState.toEventJSON()," on second/new connection")),this.secondConnection.setAudienceSubscriptionsAsync(this.audienceSubscriptionState,L);if(this.firstConnection)return this.logger.info("Setting audience subscriptions ".concat(this.audienceSubscriptionState.toEventJSON()," on first/current connection")),this.firstConnection.setAudienceSubscriptionsAsync(this.audienceSubscriptionState,L);throw new Error("No connection found")},V.prototype.onTrouterMessageLost=function(I){var L=this;if(this.listener.onTrouterMessageLoss)if(I?.length){var re=I.filter(function(Q){return L.processedMessageLoss["".concat(Q.tag,"-").concat(Q.etag)]!==void 0});if(re.length&&(this.logger.info("onTrouterMessageLoss - immediately acknowledging ".concat(re.length," seen dropped indicators")),this.sendProcessedDroppedIndicators(re),I=I.filter(function(Q){return L.processedMessageLoss["".concat(Q.tag,"-").concat(Q.etag)]===void 0}),!I.length))return void this.logger.info("onTrouterMessageLoss - all declared dropped indicators have been seen before");var te=this.listener.onTrouterMessageLoss(I.map(function(Q){return Q.tag}));if(!te)return void this.logger.warn("onTrouterMessageLoss - some flow tag(s) have not been processed by listeners");I.forEach(function(Q){L.processedMessageLoss["".concat(Q.tag,"-").concat(Q.etag)]=""}),this.sendProcessedDroppedIndicators(I)}else this.logger.warn("onTrouterMessageLoss - no flow tags have been provided")},V.prototype.getConnectionCache=function(){var I=this;return this.options.connectionCache?(this.logger.debug("Querying host's connection cache"),this.options.connectionCache.onGetTrouterConnectionCache().then(function(L){var re=L?JSON.parse(L):void 0;return typeof re=="object"?re:void 0}).catch(function(L){return I.logger.warn("Invalid connection cache content provided: ".concat(L)),I.connectionCache})):Promise.resolve(this.connectionCache)},V.prototype.setConnectionCache=function(I){if(this.connectionCache=I,this.options.connectionCache)try{this.options.connectionCache.onSetTrouterConnectionCache(JSON.stringify(I))}catch(L){this.logger.warn("Error setting external connection cache: ".concat(L))}},V.prototype.sendProcessedDroppedIndicators=function(I){return this.firstConnection!==void 0?void this.firstConnection.sendProcessedDroppedIndicators(I):this.secondConnection!==void 0?void this.secondConnection.sendProcessedDroppedIndicators(I):void 0},V.prototype.configuredTrouterManager=function(){return new O.RegistrationEnforcer(this,this.options.connectionDependsOnRegistration,this.options.delayEventsUntilRegistered)},V})();D.TrouterManager=ee},function(G,D,J){Object.defineProperty(D,"__esModule",{value:!0}),D.TrouterUrlPromise=void 0;var P=J(0),K=(function(){function T(j){this.logger=new P.Logger("UrlPromise",j)}return T.prototype.getPromise=function(){var j=this;return this.url!==void 0?(this.logger.debug("returning previously resolved url: ".concat(this.url)),Promise.resolve(this.url)):(this.pendingPromise===void 0?(this.logger.debug("creating and returning promise"),this.pendingPromise=new Promise(function(C,R){j.pendingPromiseResolveRef=C,j.pendingPromiseRejectRef=R})):this.logger.debug("returning existing promise"),this.pendingPromise)},T.prototype.resolveUrl=function(j){this.url=j,this.logger.debug("got url: ".concat(this.url));var C=this.pendingPromiseResolveRef;this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,C!==void 0&&(this.logger.debug("resolving promise"),C(j))},T.prototype.rejectUrl=function(j){this.logger.debug("aborting");var C=this.pendingPromiseRejectRef;this.url=void 0,this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,C!==void 0&&(this.logger.debug("rejecting promise"),C(j))},T.prototype.resetUrl=function(){this.logger.debug("resetting url"),this.url=void 0},T})();D.TrouterUrlPromise=K},function(G,D,J){(function(P,K){(function(j,C){var R=j;R.version="0.9.6",R.protocol=1,R.transports=[],R.j=[],R.sockets={},R.connect=function(E,O){var k,b,w=R.util.parseUri(E);C&&C.location&&(w.protocol=w.protocol||C.location.protocol.slice(0,-1),w.host=w.host||(C.document?C.document.domain:C.location.hostname),w.port=w.port||C.location.port),k=R.util.uniqueUri(w);var A={host:w.host,secure:w.protocol=="https",port:w.port||(w.protocol=="https"?443:80),query:w.query||""};return R.util.merge(A,O),!A["force new connection"]&&R.sockets[k]||(b=new R.Socket(A)),!A["force new connection"]&&b&&(R.sockets[k]=b),b=b||R.sockets[k],A["skipped handshake data"]?b.of(""):b.of(w.path.length>1?w.path:"")}})(K.exports,P===void 0?window:P);var T=K.exports;(function(j,C){var R=j.util={},E=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,O=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];R.parseUri=function(b){for(var w=E.exec(b||""),A={},H=14;H--;)A[O[H]]=w[H]||"";return A},R.uniqueUri=function(b){var w=b.protocol,A=b.host,H=b.port;return"document"in C?(A=A||document.domain,H=H||(w=="https"&&document.location.protocol!=="https:"?443:document.location.port)):(A=A||"localhost",H||w!="https"||(H=443)),(w||"http")+"://"+A+":"+(H||80)},R.query=function(b,w){var A=R.chunkQuery(b||""),H=[];R.merge(A,R.chunkQuery(w||""));for(var ee in A)A.hasOwnProperty(ee)&&H.push(ee+"="+A[ee]);return H.length?"?"+H.join("&"):""},R.chunkQuery=function(b){for(var w,A={},H=b.split("&"),ee=0,V=H.length;ee<V;++ee)w=H[ee].split("="),w[0]&&(A[w[0]]=w[1]);return A};var k=!1;R.load=function(b){if("document"in C&&document.readyState==="complete"||k)return b();R.on(C,"load",b,!1)},R.on=function(b,w,A,H){b.attachEvent?b.attachEvent("on"+w,A):b.addEventListener&&b.addEventListener(w,A,H)},R.request=function(b){if(b&&typeof XDomainRequest<"u")return new XDomainRequest;if(typeof XMLHttpRequest<"u"&&(!b||R.ua.hasCORS))return new XMLHttpRequest;if(!b)try{return new window[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}return null},typeof window<"u"&&R.load(function(){k=!0}),R.defer=function(b){if(!R.ua.webkit||typeof importScripts<"u")return b();R.load(function(){setTimeout(b,100)})},R.merge=function(b,w,A,H){var ee,V=H||[],I=A===void 0?2:A;for(ee in w)w.hasOwnProperty(ee)&&R.indexOf(V,ee)<0&&(typeof b[ee]=="object"&&I?R.merge(b[ee],w[ee],I-1,V):(b[ee]=w[ee],V.push(w[ee])));return b},R.mixin=function(b,w){R.merge(b.prototype,w.prototype)},R.inherit=function(b,w){function A(){}A.prototype=w.prototype,b.prototype=new A},R.isArray=Array.isArray||function(b){return Object.prototype.toString.call(b)==="[object Array]"},R.intersect=function(b,w){for(var A=[],H=b.length>w.length?b:w,ee=b.length>w.length?w:b,V=0,I=ee.length;V<I;V++)~R.indexOf(H,ee[V])&&A.push(ee[V]);return A},R.indexOf=function(b,w,A){for(var H=b.length,A=A<0?A+H<0?0:A+H:A||0;A<H&&b[A]!==w;A++);return H<=A?-1:A},R.toArray=function(b){for(var w=[],A=0,H=b.length;A<H;A++)w.push(b[A]);return w},R.ua={},R.ua.hasCORS=typeof XMLHttpRequest<"u"&&(function(){try{var b=new XMLHttpRequest}catch{return!1}return b.withCredentials!=null})(),R.ua.webkit=typeof navigator<"u"&&/webkit/i.test(navigator.userAgent)})(T!==void 0?T:K.exports,P===void 0?window:P),(function(j,C){function R(){}j.EventEmitter=R,R.prototype.on=function(E,O){return this.$events||(this.$events={}),this.$events[E]?C.util.isArray(this.$events[E])?this.$events[E].push(O):this.$events[E]=[this.$events[E],O]:this.$events[E]=O,this},R.prototype.addListener=R.prototype.on,R.prototype.once=function(E,O){function k(){b.removeListener(E,k),O.apply(this,arguments)}var b=this;return k.listener=O,this.on(E,k),this},R.prototype.removeListener=function(E,O){if(this.$events&&this.$events[E]){var k=this.$events[E];if(C.util.isArray(k)){for(var b=-1,w=0,A=k.length;w<A;w++)if(k[w]===O||k[w].listener&&k[w].listener===O){b=w;break}if(b<0)return this;k.splice(b,1),k.length||delete this.$events[E]}else(k===O||k.listener&&k.listener===O)&&delete this.$events[E]}return this},R.prototype.removeAllListeners=function(E){return this.$events&&this.$events[E]&&(this.$events[E]=null),this},R.prototype.listeners=function(E){return this.$events||(this.$events={}),this.$events[E]||(this.$events[E]=[]),C.util.isArray(this.$events[E])||(this.$events[E]=[this.$events[E]]),this.$events[E]},R.prototype.emit=function(E){if(!this.$events)return!1;var O=this.$events[E];if(!O)return!1;var k=Array.prototype.slice.call(arguments,1);if(typeof O=="function")O.apply(this,k);else{if(!C.util.isArray(O))return!1;for(var b=O.slice(),w=0,A=b.length;w<A;w++)b[w].apply(this,k)}return!0}})(T!==void 0?T:K.exports,T!==void 0?T:K.parent.exports),(function(j,C){if(C&&C.parse)return j.JSON={parse:C.parse,stringify:C.stringify};throw new Error("JSON not available")})(T!==void 0?T:K.exports,typeof JSON<"u"?JSON:void 0),(function(j,C){var R=j.parser={},E=R.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],O=R.reasons=["transport not supported","client not handshaken","unauthorized"],k=R.advice=["reconnect"],b=C.JSON,w=C.util.indexOf;R.encodePacket=function(H){var ee=w(E,H.type),V=H.id||"",I=H.endpoint||"",L=H.ack,re=null;switch(H.type){case"error":var te=H.reason?w(O,H.reason):"",Q=H.advice?w(k,H.advice):"";te===""&&Q===""||(re=te+(Q!==""?"+"+Q:""));break;case"message":H.data!==""&&(re=H.data);break;case"event":var le={name:H.name};H.args&&H.args.length&&(le.args=H.args),re=b.stringify(le);break;case"json":re=b.stringify(H.data);break;case"connect":H.qs&&(re=H.qs);break;case"ack":re=H.ackId+(H.args&&H.args.length?"+"+b.stringify(H.args):"")}var _e=[ee,V+(L=="data"?"+":""),I];return re!=null&&_e.push(re),_e.join(":")},R.encodePayload=function(H){var ee="";if(H.length==1)return H[0];for(var V=0,I=H.length;V<I;V++)ee+=""+H[V].length+""+H[V];return ee};var A=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;R.decodePacket=function(I){var ee=I.match(A);if(!ee)return{};var V=ee[2]||"",I=ee[5]||"",L={type:E[ee[1]],endpoint:ee[4]||""};switch(V&&(L.id=V,ee[3]?L.ack="data":L.ack=!0),L.type){case"error":var ee=I.split("+");L.reason=O[ee[0]]||"",L.advice=k[ee[1]]||"";break;case"message":L.data=I||"";break;case"event":try{var re=b.parse(I);L.name=re.name,L.args=re.args}catch{}L.args=L.args||[];break;case"json":try{L.data=b.parse(I)}catch{}break;case"connect":L.qs=I||"";break;case"ack":var ee=I.match(/^([0-9]+)(\+)?(.*)/);if(ee&&(L.ackId=ee[1],L.args=[],ee[3]))try{L.args=ee[3]?b.parse(ee[3]):[]}catch{}break;case"disconnect":L.reason=I}return L},R.decodePayload=function(H){if(H.charAt(0)==""){for(var ee=[],V=1,I="";V<H.length;V++)H.charAt(V)==""?(ee.push(R.decodePacket(H.substr(V+1).substr(0,I))),V+=Number(I)+1,I=""):I+=H.charAt(V);return ee}return[R.decodePacket(H)]}})(T!==void 0?T:K.exports,T!==void 0?T:K.parent.exports),(function(j,C){function R(E,O){this.socket=E,this.sessid=O,this.connectErrorCallback=void 0,this.isOpened=!1}j.Transport=R,C.util.mixin(R,C.EventEmitter),R.prototype.onData=function(E){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),E!==""){var O=C.parser.decodePayload(E);if(O&&O.length)for(var k=0,b=O.length;k<b;k++)this.onPacket(O[k])}return this},R.prototype.onPacket=function(E){return this.socket.setHeartbeatTimeout(),E.type=="heartbeat"?this.onHeartbeat():(E.type=="connect"&&E.endpoint==""&&this.onConnect(),E.type=="error"&&E.advice=="reconnect"&&(this.isOpened=!1),this.socket.onPacket(E),this)},R.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var E=this;this.closeTimeout=setTimeout(function(){E.onDisconnect()},this.socket.closeTimeout)}},R.prototype.onDisconnect=function(){return this.close&&this.isOpened&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},R.prototype.onConnect=function(){return this.socket.onConnect(),this.connectErrorCallback=void 0,this},R.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},R.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},R.prototype.packet=function(E){this.send(C.parser.encodePacket(E))},R.prototype.onHeartbeat=function(E){this.packet({type:"heartbeat"})},R.prototype.onOpen=function(){this.isOpened=!0,this.clearCloseTimeout(),this.socket.onOpen()},R.prototype.onClose=function(){this.isOpened=!1,this.socket.onClose(),this.onDisconnect()},R.prototype.prepareUrl=function(E){var O=this.socket.options;if(O["skipped handshake data"])return O.rewriteUrlForProxy(O["skipped handshake data"].websocketUrl+(E||""));var k=this.scheme()+"://"+O.host+":"+O.port+"/"+O.resource+"/"+C.protocol+"/"+this.name+"/"+this.sessid+(E||"");return O.rewriteUrlForProxy(k)},R.prototype.ready=function(E,O){O.call(this)},R.prototype.clearEventHandlers=function(){return this}})(T!==void 0?T:K.exports,T!==void 0?T:K.parent.exports),(function(j,C,R){function E(k){if(this.options={port:80,secure:!1,document:"document"in R&&document,resource:"socket.io",transports:C.transports.slice(),"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843},C.util.merge(this.options,k),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.disconnected=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||C.util.ua.hasCORS)){var b=this;C.util.on(R,"unload",function(){b.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function O(){}j.Socket=E,C.util.mixin(E,C.EventEmitter),E.prototype.of=function(k){return this.namespaces[k]||(this.namespaces[k]=new C.SocketNamespace(this,k),k!==""&&this.namespaces[k].packet({type:"connect"})),this.namespaces[k]},E.prototype.publish=function(){this.emit.apply(this,arguments);var k;for(var b in this.namespaces)this.namespaces.hasOwnProperty(b)&&(k=this.of(b),k.$emit.apply(k,arguments))},E.prototype.handshake=function(k){function b(re){re instanceof Error?w.onError(re.message):k.apply(null,re.split(":"))}var w=this,A=this.options;if(!w.disconnected){var H=A.rewriteUrlForProxy(["http"+(A.secure?"s":"")+":/",A.host+":"+A.port,A.resource,C.protocol,C.util.query(this.options.query,"t="+ +new Date)].join("/"));if(this.isXDomain()&&!C.util.ua.hasCORS){var ee=document.getElementsByTagName("script")[0],V=document.createElement("script");V.src=H+"&jsonp="+C.j.length,ee.parentNode.insertBefore(V,ee),C.j.push(function(re){b(re),V.parentNode.removeChild(V)})}else{var I=C.util.request();I.open("GET",H,!0);var L=this.options.requestHeaders;L!==void 0&&Object.keys(L).forEach(function(re){I.setRequestHeader(re,L[re])}),I.onreadystatechange=function(){I.readyState==4&&(I.onreadystatechange=O,I.status==200?b(I.responseText):!w.reconnecting&&w.onError(I.responseText))},I.send(null)}}},E.prototype.getTransport=function(k){for(var b,w=k||this.transports,A=0;b=w[A];A++)if(C.Transport[b]&&C.Transport[b].check(this)&&(!this.isXDomain()||C.Transport[b].xdomainCheck()))return new C.Transport[b](this,this.sessionid);return null},E.prototype.connect=function(k){if(this.connecting||this.disconnected)return this;var b=this,w=function(H,ee,V,I){function L(){if(!b.connected&&!b.disconnected)if(b.connecting=!1,clearTimeout(b.connectTimeoutTimer),b.options["try multiple transports"]){for(;b.remainingTransports.length>0&&b.remainingTransports.splice(0,1)[0]!=b.transport.name;);b.remainingTransports.length?re(b.remainingTransports):b.publish("connect_failed")}else b.publish("connect_failed")}function re(te){if(b.transport&&(b.transport.clearTimeouts(),b.transport.clearEventHandlers()),b.transport=b.getTransport(te),!b.transport||b.disconnected)return b.publish("connect_failed");b.transport.ready(b,function(){b.connecting=!0,b.publish("connecting",b.transport.name),b.transport.open(L),b.options["connect timeout"]&&(b.connectTimeoutTimer=setTimeout(function(){L()},b.options["connect timeout"]))})}b.sessionid=H,b.closeTimeout=1e3*V+2e3,b.heartbeatTimeout=1e3*ee+2e3,b.transports=I?C.util.intersect(I.split(","),b.options.transports):b.options.transports,b.setHeartbeatTimeout(),b.remainingTransports=b.transports.slice(0),re(b.transports),b.once("connect",function(){clearTimeout(b.connectTimeoutTimer),k&&typeof k=="function"&&k()})};if(this.options["skipped handshake data"]){var A=this.options["skipped handshake data"];w("v4c-"+new Date().getTime(),A.timeout,A.timeout,"websocket")}else this.handshake(w);return this},E.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);var k=this;this.heartbeatTimeoutTimer=setTimeout(function(){k.transport.onClose()},this.heartbeatTimeout)},E.prototype.packet=function(k){return this.connected&&!this.doBuffer?this.transport.packet(k):this.buffer.push(k),this},E.prototype.setBuffer=function(k){this.doBuffer=k,!k&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])},E.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this.disconnected=!0,this},E.prototype.disconnectSync=function(){var k=C.util.request(),b=this.resource+"/"+C.protocol+"/"+this.sessionid;k.open("GET",b,!0),this.onDisconnect("booted")},E.prototype.isXDomain=function(){var k=R.location.port||(R.location.protocol=="https:"?443:80);return this.options.host!==R.location.hostname||this.options.port!=k},E.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},E.prototype.onOpen=function(){this.open=!0},E.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},E.prototype.onPacket=function(k){this.of(k.endpoint).onPacket(k)},E.prototype.onError=function(k){k&&k.advice&&k.advice==="reconnect"&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",k&&k.reason?k.reason:k)},E.prototype.onDisconnect=function(k){var b=this.connected,w=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(b||w)&&(this.transport.close(),this.transport.clearTimeouts(),b?(this.publish("disconnect",k),k!="booted"&&this.options.reconnect&&!this.reconnecting&&this.reconnect()):this.publish("close_during_connecting",k))},E.prototype.reconnect=function(){function k(){if(w.connected){for(var V in w.namespaces)w.namespaces.hasOwnProperty(V)&&V!==""&&w.namespaces[V].packet({type:"connect"});w.publish("reconnect",w.transport.name,w.reconnectionAttempts)}clearTimeout(w.reconnectionTimer),w.removeListener("connect_failed",b),w.removeListener("connect",b),w.reconnecting=!1,delete w.reconnectionAttempts,delete w.reconnectionDelay,delete w.reconnectionTimer,delete w.redoTransports,w.options["try multiple transports"]=H}function b(){if(w.reconnecting)return w.connected?k():w.connecting&&w.reconnecting?w.reconnectionTimer=setTimeout(b,1e3):void(w.reconnectionAttempts++>=A?w.redoTransports?(w.publish("reconnect_failed"),k()):(w.on("connect_failed",b),w.options["try multiple transports"]=!0,w.transport=w.getTransport(),w.redoTransports=!0,w.connect()):(w.reconnectionDelay<ee&&(w.reconnectionDelay*=2),w.connect(),w.publish("reconnecting",w.reconnectionDelay,w.reconnectionAttempts),w.reconnectionTimer=setTimeout(b,w.reconnectionDelay)))}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var w=this,A=this.options["max reconnection attempts"],H=this.options["try multiple transports"],ee=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(b,this.reconnectionDelay),this.on("connect",b)}})(T!==void 0?T:K.exports,T!==void 0?T:K.parent.exports,P===void 0?window:P),(function(j,C){function R(O,k){this.socket=O,this.name=k||"",this.flags={},this.json=new E(this,"json"),this.ackPackets=0,this.acks={}}function E(O,k){this.namespace=O,this.name=k}j.SocketNamespace=R,C.util.mixin(R,C.EventEmitter),R.prototype.$emit=C.EventEmitter.prototype.emit,R.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},R.prototype.packet=function(O){return O.endpoint=this.name,this.socket.packet(O),this.flags={},this},R.prototype.send=function(O,k){var b={type:this.flags.json?"json":"message",data:O};return typeof k=="function"&&(b.id=++this.ackPackets,b.ack=!0,this.acks[b.id]=k),this.packet(b)},R.prototype.emit=function(O){var k=Array.prototype.slice.call(arguments,1),b=k[k.length-1],w={type:"event",name:O};return typeof b=="function"&&(w.id=++this.ackPackets,w.ack="data",this.acks[w.id]=b,k=k.slice(0,k.length-1)),w.args=k,this.packet(w)},R.prototype.disconnect=function(){return this.name===""?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},R.prototype.onPacket=function(O){function k(){b.packet({type:"ack",args:C.util.toArray(arguments),ackId:O.id})}var b=this;switch(O.type){case"connect":this.$emit("connect");break;case"disconnect":this.name===""?this.socket.onDisconnect(O.reason||"booted"):this.$emit("disconnect",O.reason||"");break;case"message":case"json":var w=["message",O.data];O.ack=="data"?w.push(k):O.ack&&this.packet({type:"ack",ackId:O.id}),this.$emit.apply(this,w);break;case"event":var w=[O.name].concat(O.args);O.ack=="data"&&w.push(k),this.$emit.apply(this,w);break;case"ack":this.acks[O.ackId]&&(this.acks[O.ackId].apply(this,O.args),delete this.acks[O.ackId]);break;case"error":O.advice?this.socket.onError(O):O.reason=="unauthorized"?this.$emit("connect_failed",O.reason):this.$emit("error",O.reason)}},E.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},E.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}})(T!==void 0?T:K.exports,T!==void 0?T:K.parent.exports),(function(j,C,R){function E(k){C.Transport.apply(this,arguments)}function O(){}j.websocket=E,C.util.inherit(E,C.Transport),E.prototype.name="websocket",E.prototype.open=function(k){var b,w=C.util.query(this.socket.options.query),A=this;return this.connectErrorCallback=k,b||(b=R.MozWebSocket||R.WebSocket),this.websocket=new b(this.prepareUrl(w)),this.websocket.onopen=function(){A.onOpen(),A.socket.setBuffer(!1)},this.websocket.onmessage=function(H){A.onData(H.data)},this.websocket.onclose=function(){A.onClose(),A.socket.setBuffer(!0)},this.websocket.onerror=function(H){A.onError(H)},this},E.prototype.send=function(k){return this.websocket.send(k),this},E.prototype.payload=function(k){for(var b=0,w=k.length;b<w;b++)this.packet(k[b]);return this},E.prototype.close=function(){return this.websocket.close(),this},E.prototype.onError=function(k){this.connectErrorCallback!==void 0&&(this.connectErrorCallback(),this.connectErrorCallback=void 0),this.socket.onError(k)},E.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},E.check=function(){return"WebSocket"in R&&!("__addTask"in WebSocket)||"MozWebSocket"in R},E.xdomainCheck=function(){return!0},E.prototype.clearEventHandlers=function(){return this.websocket&&(this.websocket.onopen=this.websocket.onmessage=this.websocket.onclose=this.websocket.onerror=O),this},C.transports.push("websocket")})(T!==void 0?T.Transport:K.exports,T!==void 0?T:K.parent.exports,P===void 0?window:P),(function(j,C,R){function E(k){k&&C.Transport.apply(this,arguments)}function O(){}j.XHR=E,C.util.inherit(E,C.Transport),E.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},E.prototype.payload=function(k){for(var b=[],w=0,A=k.length;w<A;w++)b.push(C.parser.encodePacket(k[w]));this.send(C.parser.encodePayload(b))},E.prototype.send=function(k){return this.post(k),this},E.prototype.post=function(k){function b(){this.readyState==4&&(this.onreadystatechange=O,this.status==200?(clearTimeout(this.ackTimeoutTimer),A.socket.setBuffer(!1)):A.onClose())}function w(){this.onload=O,A.socket.setBuffer(!1)}var A=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),R.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=w:this.sendXHR.onreadystatechange=b,this.sendXHR.send(k),A.sendXHR.ackTimeoutTimer=setTimeout(function(){A.onClose()},A.socket.options.ackTimeoutMs)},E.prototype.close=function(){return this.onClose(),this},E.prototype.request=function(k){var b=C.util.request(this.socket.isXDomain()),w=C.util.query(this.socket.options.query,"t="+ +new Date);b.open(k||"GET",this.prepareUrl(w),!0);var A=this.socket.options.requestHeaders;if(A!==void 0&&Object.keys(A).forEach(function(H){b.setRequestHeader(H,A[H])}),k=="POST")try{b.setRequestHeader?b.setRequestHeader("Content-type","text/plain;charset=UTF-8"):b.contentType="text/plain"}catch{}return b},E.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},E.check=function(k,b){try{var w=C.util.request(b),A=R.XDomainRequest&&w instanceof XDomainRequest,H=k&&k.options&&k.options.secure?"https:":"http:",ee=H!=R.location.protocol;if(w&&(!A||!ee))return!0}catch{}return!1},E.xdomainCheck=function(){return E.check(null,!0)},E.prototype.clearEventHandlers=function(){return this.sendXHR&&(this.sendXHR.onreadystatechange=this.sendXHR.onload=O),this}})(T!==void 0?T.Transport:K.exports,T!==void 0?T:K.parent.exports,P===void 0?window:P),(function(j,C,R){function E(){C.Transport.XHR.apply(this,arguments)}function O(){}j["xhr-polling"]=E,C.util.inherit(E,C.Transport.XHR),C.util.merge(E,C.Transport.XHR),E.prototype.name="xhr-polling",E.prototype.open=function(k){var b=this;return b.connectErrorCallback=k,C.Transport.XHR.prototype.open.call(b),!1},E.prototype.get=function(){function k(){this.readyState==4&&(this.onreadystatechange=O,this.status==200?(A.connectErrorCallback=void 0,A.onData(this.responseText),A.get()):(A.onClose(),A.connectErrorCallback!==void 0&&(A.connectErrorCallback(),A.connectErrorCallback=void 0)))}function b(){A.connectErrorCallback=void 0,this.onload=O,this.onerror=O,A.onData(this.responseText),A.get()}function w(){A.onClose(),A.connectErrorCallback!==void 0&&(A.connectErrorCallback(),A.connectErrorCallback=void 0)}if(this.isOpened){var A=this;this.xhr=this.request(),R.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=b,this.xhr.onerror=w):this.xhr.onreadystatechange=k,this.xhr.send(null)}},E.prototype.onClose=function(){if(C.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=O;try{this.xhr.abort()}catch{}this.xhr=null}},E.prototype.ready=function(k,b){var w=this;C.util.defer(function(){b.call(w)})},E.prototype.clearEventHandlers=function(){return C.Transport.XHR.prototype.clearEventHandlers.call(this),this.xhr&&(this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=O),this},C.transports.push("xhr-polling")})(T!==void 0?T.Transport:K.exports,T!==void 0?T:K.parent.exports,P===void 0?window:P),D.io=T}).call(D,J(13),J(14)(G))},function(G,D){var J;J=(function(){return this})();try{J=J||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(J=window)}G.exports=J},function(G,D){G.exports=function(J){return J.webpackPolyfill||(J.deprecate=function(){},J.paths=[],J.children||(J.children=[]),Object.defineProperty(J,"loaded",{enumerable:!0,get:function(){return J.l}}),Object.defineProperty(J,"id",{enumerable:!0,get:function(){return J.i}}),J.webpackPolyfill=1),J}},function(G,D,J){Object.defineProperty(D,"__esModule",{value:!0}),D.ConnectionTracker=D.Properties=D.TrackerStep=D.ClientEventName=D.ResponseData=void 0;var P=J(3),K=J(1),T=J(0),j=(function(){function w(A){this.id=A,this.status=200,this.headers={},this.body=""}return w})();D.ResponseData=j;var C;(function(w){w.Connected="trouter_js_client_connected",w.Disconnected="trouter_js_client_disconnected",w.Error="trouter_js_client_error",w.Progress="trouter_js_client_progress",w.Response="trouter_js_client_response",w.Request="trouter_js_client_request",w.CheckConnection="trouter_js_client_check_connection",w.Registration="trouter_js_client_registration",w.Unregistration="trouter_js_client_unregistration"})(C||(D.ClientEventName=C={}));var R=(function(){function w(A,H,ee,V,I){this.stepName=A,this.operation=H,this.delta=ee,this.ts=V,this.error=I}return w})();D.TrackerStep=R;var E=(function(){function w(){}return w})();D.Properties=E;var O=(function(){function w(){this.numberOfPingReplies=0,this.connectedTimestamp=0,this.isNewUrl=!1,this.transportType="",this.connectionNumber=0}return w})(),k=(function(){function w(){this.enabled=!1,this.numberOfStepsToMaintain=40,this.logHealthCheckError=!1,this.sendProgressTimeoutSecs=55,this.logSendPingError=!1,this.maxBackoffInMs=12e4,this.trouter_js_client_connected=!1,this.trouter_js_client_disconnected=!1,this.trouter_js_client_error=!1,this.trouter_js_client_progress=!1,this.trouter_js_client_response=!1,this.trouter_js_client_request=!1,this.trouter_js_client_registration=!1,this.trouter_js_client_unregistration=!1,this.trouter_js_client_check_connection=!0}return w})(),b=(function(){function w(A,H,ee,V,I,L,re){this.clientId=H,this.clientInfo=ee,this.getServerState=V,this.endpointId=I,this.clientCorrelationID=L,this.environment=re,this.logger=new T.Logger("ConnectionTracker",A),this.clientCorrelationID=L!==void 0?L:"",this.steps=[],this.connectionAttempt=0,this.totalStepCount=0,this.beginTimestamp=new P.Timespan,this.eventLogSettings=new k,this.connectedInfo=new O}return w.prototype.enable=function(A){this.eventLogSettings.enabled=!0,this.eventLogger=A},w.prototype.disable=function(){this.eventLogSettings.enabled=!1},w.prototype.sendProgress=function(A){this.steps.length>0&&this.sendTelemetry(C.Progress,A,this.steps)},w.prototype.cancelProgressTimer=function(){this.progressTimeout!==void 0&&(clearTimeout(this.progressTimeout),this.progressTimeout=void 0)},w.prototype.resetProgressSendTimer=function(){var A=this;this.cancelProgressTimer(),this.eventLogSettings.sendProgressTimeoutSecs!==void 0&&this.eventLogSettings.sendProgressTimeoutSecs>0&&(this.progressTimeout=setTimeout(function(){A.sendProgress({reason:"timeout",timeoutSecs:A.eventLogSettings.sendProgressTimeoutSecs})},1e3*this.eventLogSettings.sendProgressTimeoutSecs))},w.prototype.setConnectedInfo=function(A,H){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=Date.now(),this.connectedInfo.isNewUrl=A,this.connectedInfo.transportType=H,++this.connectedInfo.connectionNumber},w.prototype.clearConnectedInfo=function(){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=0,this.connectedInfo.isNewUrl=!0,this.connectedInfo.transportType=""},w.prototype.copyProperties=function(A,H){for(var ee=0,V=Object.keys(H);ee<V.length;ee++){var I=V[ee];H[I]!==void 0&&(A[I.replace(/-/g,"_")]={value:H[I]})}},w.prototype.increasePingResponseCount=function(){++this.connectedInfo.numberOfPingReplies},w.prototype.sendTelemetry=function(A,H,ee){try{if(this.eventLogSettings.enabled===!0&&this.eventLogSettings[A]===!0&&this.eventLogger!==void 0){var V=this.getServerState(),I={name:A,properties:{connectionAttempt:{value:this.connectionAttempt},epid:{value:this.endpointId},clientCorrelationID:{value:this.clientCorrelationID},steps:{value:(0,P.toJson)(ee)},clientID:{value:this.clientId},eventVersion:{value:3},environment:{value:this.environment},cv:{value:K.CLIENT_VERSION},ua:{value:this.clientInfo.ua},connectionId:{value:V.connectionId},connectedClientId:{value:V.connectedClientId},domId:{value:V.domId},url:{value:V.unsecureUrl},surl:{value:V.url},ttlInSecs:{value:V.getRemainingTtlInSec()},numberOfPingReplies:{value:this.connectedInfo.numberOfPingReplies},connectedTimestamp:{value:this.connectedInfo.connectedTimestamp},isNewUrl:{value:this.connectedInfo.isNewUrl},transportType:{value:this.connectedInfo.transportType},connectionNumber:{value:this.connectedInfo.connectionNumber}}};this.copyProperties(I.properties,H),this.eventLogger.logEvent(I)}}catch(L){this.logger.warn("error in sending event ".concat(A,": ").concat((0,P.toJson)(L)))}},w.prototype.createStep=function(A,H,ee){return new R(A,H,this.beginTimestamp.duration,Date.now(),ee)},w.prototype.addStep=function(A,H,ee){if(this.eventLogSettings.enabled!==!1&&(this.steps.length===0&&this.beginTimestamp.reset(),this.steps.push(this.createStep(A,H,ee)),++this.totalStepCount,this.eventLogSettings.numberOfStepsToMaintain!==void 0&&this.steps.length>this.eventLogSettings.numberOfStepsToMaintain)){var V=this.steps.slice(0);this.steps.length=0,this.sendTelemetry(C.Progress,{reason:"flush"},V)}},w.prototype.trackStart=function(A){this.addStep(A,"start")},w.prototype.trackEnd=function(A){this.addStep(A,"end")},w.prototype.trackError=function(A,H,ee,V){ee===void 0&&(ee=!0),A==="health"&&this.eventLogSettings.logHealthCheckError!==!0||A==="ping"&&this.eventLogSettings.logSendPingError===!1||(V===void 0&&(V="error"),ee===!0&&this.addStep(A,V,H),this.sendTelemetry(C.Error,{},[this.createStep(A,V,H)]))},w.prototype.trackProgress=function(A,H){this.addStep(A,H)},w.prototype.trackConnected=function(A,H){this.setConnectedInfo(A,H);var ee=this.steps.slice(0),V=this.totalStepCount,I=this.beginTimestamp.duration;this.steps.length=0,this.totalStepCount=0,this.sendTelemetry(C.Connected,{stepCount:ee.length,totalStepCount:V,connectionEstablishmentMs_Total:I},ee),this.cancelProgressTimer()},w.prototype.getSessionLength=function(){return Date.now()-this.connectedInfo.connectedTimestamp},w.prototype.trackDisconnected=function(A){A.sessionLengthMS=this.getSessionLength(),this.sendTelemetry(C.Disconnected,A,[]),this.resetProgressSendTimer()},w.prototype.trackNewConnection=function(){++this.connectionAttempt},w.prototype.trackRequest=function(A,H){var ee={};H!==void 0&&(ee.hasError=!0,ee.error=H);try{if(A){ee.requestID=A.id,ee.httpMethod=A.method,ee.url=A.url,ee.bodyLength=A.body.length,ee.shortUrl=A.shortUrl,ee.requestTimeStamp=A.startTS,ee.correlationVector=A.correlationVector;for(var V=A.headers,I=0,L=Object.keys(V);I<L.length;I++){var re=L[I];ee[re]=V[re]}}}catch(te){ee.hasError=!0,ee.error="".concat(ee.error," error creating request context ").concat((0,P.toJson)(te))}this.sendTelemetry(C.Request,ee,[])},w.prototype.trackResponse=function(A,H,ee,V){var I={};V!==void 0&&(I.hasError=!0,I.error=V);try{if(I.responseTimestamp=ee!==void 0?ee.sentTS:Date.now(),A){I.requestID=A.id,I.httpMethod=A.method,I.shortUrl=A.shortUrl,I.correlationVector=A.correlationVector;for(var L=A.headers,re=0,te=Object.keys(L);re<te.length;re++){var Q=te[re];I[Q]=L[Q]}}ee&&(I.latencyMS=H,I.responseCode=ee.status,I.responseLength=ee.body.length)}catch(le){I.hasError=!0,I.error="".concat(I.error," error creating response context ").concat((0,P.toJson)(le))}this.sendTelemetry(C.Response,I,[])},w.prototype.sendResponseError=function(A,H,ee){this.trackResponse(H,void 0,ee,A)},w.prototype.close=function(){this.sendProgress({reason:"closed"}),this.steps.length=0,this.cancelProgressTimer()},w.prototype.mergeSettings=function(A){if(A){this.eventLogSettings.numberOfStepsToMaintain=Math.min(40,Math.max(10,A.numberOfStepsToMaintain!==void 0?A.numberOfStepsToMaintain:0));var H=Math.min(3600,Math.max(55,A.sendProgressTimeoutSecs!==void 0?A.sendProgressTimeoutSecs:0));this.eventLogSettings.logHealthCheckError=A.logHealthCheckError,this.eventLogSettings.logSendPingError=A.logSendPingError;for(var ee=0,V=Object.keys(C).map(function(L){return C[L]});ee<V.length;ee++){var I=V[ee];A[I]!==void 0&&(this.eventLogSettings[I]=A[I])}this.eventLogSettings.sendProgressTimeoutSecs!==H&&(this.eventLogSettings.sendProgressTimeoutSecs=H,this.resetProgressSendTimer())}},w})();D.ConnectionTracker=b},function(G,D,J){Object.defineProperty(D,"__esModule",{value:!0}),D.DisconnectReason=void 0;var P=(function(){function K(T,j,C){this.reason=T,this.claims=j,this.details=C}return K.fromRawReason=function(T,j){if(T===""||T==="dup")return new K(T);try{var C=JSON.parse(T);return typeof C!="object"||C.reason===void 0?(j?.error("invalid disconnect reason format"),new K("unknown",void 0,T)):new K(C.reason,C.claims,C.details)}catch{return new K("disconnect",void 0,T)}},K.fromSocketIoEventData=function(T,j){return typeof j=="string"?new K(T,void 0,j):void 0},K.prototype.toTelemetryString=function(){return this.reason==="socketerror"||this.reason==="reconnecterror"||this.reason==="disconnect"?this.details:this.reason},K})();D.DisconnectReason=P},function(G,D,J){function P(T,j,C){if(T===void 0||j===void 0)return!1;var R=Date.now()-T;return R>j*C.tolerance&&R>C.minimumWaitMs}Object.defineProperty(D,"__esModule",{value:!0}),D.ExponentialBackoff=void 0;var K=(function(){function T(j,C,R){R===void 0&&(R={tolerance:2,minimumWaitMs:1e4}),this.logger=j,this.maxBackoffInMs=C,this.gapDetectionSettings=R,this.backoffId=0,this.backoffCount=0}return T.calculateNextBackoffMs=function(j,C){var R=1+.4*(Math.random()-.5),E=1e3*Math.pow(2,j)*R;return E=Math.round(E),Math.min(C,E)},T.prototype.setMaxBackoffMs=function(j){this.maxBackoffInMs=j},T.prototype.backoff=function(j,C){var R=this;if(this.timerHandle!==void 0&&(this.logger.debug("Clearing current back off"),clearTimeout(this.timerHandle),this.timerHandle=void 0),this.previousCompleteTime!==void 0){var E=Date.now()-this.previousCompleteTime;E>this.maxBackoffInMs*this.gapDetectionSettings.tolerance&&E>this.gapDetectionSettings.minimumWaitMs&&(this.logger.info("Back off for ".concat(j," with ID ").concat(this.backoffId," will be reset due to a lot of time having passed since the previous backoff (").concat(E," ms)")),this.backoffCount=0,this.previousCompleteTime=void 0)}var O=T.calculateNextBackoffMs(this.backoffCount,this.maxBackoffInMs);this.backoffId++,this.backoffCount++,this.logger.info("Backing off ".concat(j," for ").concat(O," milliseconds with ID ").concat(this.backoffId)),this.callback=function(b,w){P(b,w,R.gapDetectionSettings)&&(R.logger.info("Back off for ".concat(j," with ID ").concat(R.backoffId," will be reset due to the wait (").concat(Date.now()-(b??0)," ms) being longer than expected (").concat(w," ms)")),R.backoffCount=0),R.logger.info("Back off for ".concat(j," with ID ").concat(R.backoffId," complete, invoking handler")),R.timerHandle=void 0,R.callback=void 0,R.previousCompleteTime=Date.now(),C()};var k=Date.now();this.timerHandle=setTimeout(function(){var b;return(b=R.callback)===null||b===void 0?void 0:b.call(R,k,O)},O)},T.prototype.reset=function(){this.timerHandle!==void 0&&(this.logger.debug("Resetting back off with ID ".concat(this.backoffId)),clearTimeout(this.timerHandle),this.timerHandle=void 0,this.callback=void 0),this.backoffCount=0},T.prototype.expediteIfPending=function(){if(this.backoffCount=0,this.timerHandle!==void 0){this.logger.debug("Expediting back off with ID ".concat(this.backoffId)),clearTimeout(this.timerHandle),this.timerHandle=void 0;var j=this.callback;this.callback=void 0,j&&j()}},T})();D.ExponentialBackoff=K},function(G,D,J){var P=this&&this.__spreadArray||function(C,R,E){if(E||arguments.length===2)for(var O,k=0,b=R.length;k<b;k++)!O&&k in R||(O||(O=Array.prototype.slice.call(R,0,k)),O[k]=R[k]);return C.concat(O||Array.prototype.slice.call(R))};Object.defineProperty(D,"__esModule",{value:!0}),D.LoggingManagerConsumer=D.RegistrationEnforcer=void 0;var K=J(6),T=(function(){function C(R,E,O){this.wrapped=R,this.shouldConnectionDependOnRegistration=E,this.shouldHoldBackEvents=O,this.isRegistered=!1,this.heldBackEvents=[]}return C.prototype.onDownstreamRequest=function(R,E,O){this.passIfRegisteredOrNotNeeded("onDownstreamRequest",R,E,O)},C.prototype.onConnected=function(R){this.passIfRegisteredOrNotNeeded("onConnected",R)},C.prototype.onRegistered=function(R){this.isRegistered=!0,this.wrapped.onRegistered(R),this.fireHeldBackEvents()},C.prototype.onUnregistered=function(R){this.isRegistered=!1,this.wrapped.onUnregistered(R),R.getState()===K.State.Connected&&this.shouldConnectionDependOnRegistration()&&R.forceReconnectDueToNoRegistration()},C.prototype.onReconnecting=function(R){this.wrapped.onReconnecting(R)},C.prototype.onReconnectIsRequired=function(R,E,O){this.wrapped.onReconnectIsRequired(R,E,O)},C.prototype.onDisconnected=function(R){this.isRegistered=!1,this.dropHeldBackEvents(),this.wrapped.onDisconnected(R)},C.prototype.onTerminalError=function(R){this.wrapped.onTerminalError(R)},C.prototype.onConnectionParametersUpdated=function(R){this.wrapped.onConnectionParametersUpdated(R)},C.prototype.onTrouterMessageLost=function(R){this.passIfRegisteredOrNotNeeded("onTrouterMessageLost",R)},C.prototype.onUserActivityStateAccepted=function(R){this.passIfRegisteredOrNotNeeded("onUserActivityStateAccepted",R)},C.prototype.onAudiencesSetResolved=function(R,E){this.passIfRegisteredOrNotNeeded("onAudiencesSetResolved",R,E)},C.prototype.getState=function(){return this.wrapped.getState()},C.prototype.holdBackEvent=function(R){for(var E=[],O=1;O<arguments.length;O++)E[O-1]=arguments[O];this.heldBackEvents.push({kind:R,args:E})},C.prototype.passIfRegisteredOrNotNeeded=function(R){for(var E,O=[],k=1;k<arguments.length;k++)O[k-1]=arguments[k];var b=this.shouldConnectionDependOnRegistration(),w=this.shouldHoldBackEvents();b&&w||this.fireHeldBackEvents(b?function(A){return A.kind!=="onConnected"}:void 0),this.isRegistered||!b||w===!1&&R!=="onConnected"?(E=this.wrapped)[R].apply(E,O):this.holdBackEvent.apply(this,P([R],O,!1))},C.prototype.fireHeldBackEvents=function(R){for(var E,O=0,k=this.heldBackEvents;O<k.length;O++){var b=k[O];(R===void 0||R(b))&&(E=this.wrapped)[b.kind].apply(E,b.args)}this.heldBackEvents=R===void 0?[]:this.heldBackEvents.filter(function(w){return!R(w)})},C.prototype.dropHeldBackEvents=function(){this.heldBackEvents=[]},C})();D.RegistrationEnforcer=T;var j=(function(){function C(R,E,O,k){this.wrapped=R,this.prefix=E,this.logger=O,this.onEventAction=k}return C.prototype.onEvent=function(R,E){var O;this.onEventAction!==void 0?this.onEventAction(R,E):((O=this.logger)!==null&&O!==void 0?O:console).log("".concat(this.prefix," TracingEnforcer: ").concat(R,"(").concat(E,")"))},C.prototype.onDownstreamRequest=function(R,E,O){this.onEvent("onDownstreamRequest",JSON.stringify({request:E,response:O})),this.wrapped.onDownstreamRequest(R,E,O)},C.prototype.onConnected=function(R){this.onEvent("onConnected",R.getState().toString()),this.wrapped.onConnected(R)},C.prototype.onRegistered=function(R){this.onEvent("onRegistered",R.getState().toString()),this.wrapped.onRegistered(R)},C.prototype.onUnregistered=function(R){this.onEvent("onUnregistered",R.getState().toString()),this.wrapped.onUnregistered(R)},C.prototype.onReconnecting=function(R){this.onEvent("onReconnecting",R.getState().toString()),this.wrapped.onReconnecting(R)},C.prototype.onReconnectIsRequired=function(R,E,O){this.onEvent("onReconnectIsRequired",JSON.stringify({connection:R.getState().toString(),useConnectParamsFromCache:E,reason:O})),this.wrapped.onReconnectIsRequired(R,E,O)},C.prototype.onDisconnected=function(R){this.onEvent("onDisconnected",R.getState().toString()),this.wrapped.onDisconnected(R)},C.prototype.onTerminalError=function(R){this.onEvent("onTerminalError",JSON.stringify({connection:R})),this.wrapped.onTerminalError(R)},C.prototype.onConnectionParametersUpdated=function(R){this.onEvent("onConnectionParametersUpdated",JSON.stringify({connectParams:R})),this.wrapped.onConnectionParametersUpdated(R)},C.prototype.onTrouterMessageLost=function(R){this.onEvent("onTrouterMessageLost",JSON.stringify({flowTags:R})),this.wrapped.onTrouterMessageLost(R)},C.prototype.onUserActivityStateAccepted=function(R){this.onEvent("onUserActivityStateAccepted",JSON.stringify({cv:R})),this.wrapped.onUserActivityStateAccepted(R)},C.prototype.onAudiencesSetResolved=function(R,E){this.onEvent("onAudiencesSetResolved",JSON.stringify({audienceSubscriptionsResponse:R,cv:E})),this.wrapped.onAudiencesSetResolved(R,E)},C.prototype.getState=function(){return this.wrapped.getState()},C})();D.LoggingManagerConsumer=j},function(G,D,J){Object.defineProperty(D,"__esModule",{value:!0}),D.TrouterManagerFsm=void 0;var P=J(2),K=J(4),T=J(0),j=J(7),C=(function(){function R(E,O){this.worker=O,this.state=K.TrouterManagerState.Unknown,this.logger=new T.Logger("ManagerFsm",E)}return R.prototype.start=function(){this.state===K.TrouterManagerState.Unknown?(this.setState(K.TrouterManagerState.Disconnected),this.worker.forceStopLingeringConnection(),this.worker.startFirstConnection()):(this.logger.info("start called in state '".concat(K.TrouterManagerState[this.state],"', expediting pending backoffs, if any")),this.worker.expediteBackoffOnConnections())},R.prototype.stop=function(E){this.state!==K.TrouterManagerState.Unknown?(this.setState(K.TrouterManagerState.Unknown),this.worker.stopFirstConnection(E===!0),this.worker.stopSecondConnection(E===!0)):this.showIgnored("stop")},R.prototype.getState=function(){switch(this.state){case K.TrouterManagerState.Unknown:case K.TrouterManagerState.Connected:case K.TrouterManagerState.Disconnected:case K.TrouterManagerState.Switching:return this.state;case K.TrouterManagerState.TerminalError:return P.TrouterState.Disconnected}},R.prototype.getInternalState=function(){return this.state},R.prototype.onConnected=function(E){this.state===K.TrouterManagerState.Disconnected&&E?this.worker.doesSecondConnectionExist()?this.setState(K.TrouterManagerState.Switching):(this.setState(K.TrouterManagerState.Connected),this.worker.dispatchConnected()):this.showIgnored("onConnected(".concat(E,")"))},R.prototype.onRegistered=function(E){this.state!==K.TrouterManagerState.Disconnected||E?this.state!==K.TrouterManagerState.Switching||E?this.state===K.TrouterManagerState.Disconnected&&E&&(this.setState(K.TrouterManagerState.Connected),this.worker.dispatchConnected()):(this.setState(K.TrouterManagerState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnectionDelayed(),this.worker.dispatchConnected()):(this.setState(K.TrouterManagerState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnection(!0),this.worker.dispatchConnected()),this.worker.dispatchRegistrationState(!0)},R.prototype.onUnregistered=function(E){E&&this.worker.dispatchRegistrationState(!1)},R.prototype.onReconnecting=function(E){this.state!==K.TrouterManagerState.Connected&&this.state!==K.TrouterManagerState.Switching||!E?this.showIgnored("onReconnecting(".concat(E,")")):(this.setState(K.TrouterManagerState.Disconnected),this.worker.dispatchDisconnected())},R.prototype.onReconnectionRequired=function(E,O,k){this.state===K.TrouterManagerState.Connected&&E?(this.setState(K.TrouterManagerState.Switching),this.worker.startSecondConnection(O)):this.state===K.TrouterManagerState.Disconnected&&E?this.worker.startSecondConnection(O):this.state===K.TrouterManagerState.Switching&&E&&k===j.ReconnectReason.Configuration?(this.logger.debug("onReconnectionRequired: switch requested while already in Switching state"),this.worker.stopSecondConnection(!0),this.worker.startSecondConnection(O)):this.showIgnored("onReconnectionRequired(".concat(E,")"))},R.prototype.onDisconnected=function(E){this.state==K.TrouterManagerState.Unknown&&E?this.worker.dispatchDisconnected():this.state==K.TrouterManagerState.Switching&&E?(this.worker.switchConnections(),this.worker.stopSecondConnection(!1),this.setState(K.TrouterManagerState.Disconnected),this.worker.dispatchDisconnected()):this.showIgnored("onDisconnected(".concat(E,")"))},R.prototype.onTerminalError=function(){this.setState(K.TrouterManagerState.TerminalError),this.worker.dispatchTerminalError()},R.prototype.showIgnored=function(E){this.logger.info("Ignoring event '".concat(E,"' in state '").concat(K.TrouterManagerState[this.state],"'"))},R.prototype.setState=function(E){if(this.logger.info("Switching from state '".concat(K.TrouterManagerState[this.state],"' to state '").concat(K.TrouterManagerState[E],"'")),this.state===E)return void this.logger.error("Attempt to switch to the current state '".concat(K.TrouterManagerState[E],"'"));this.state=E},R})();D.TrouterManagerFsm=C},function(G,D,J){function P(te,Q){if(!Q)return te;var le=O(O({},te),{enabled:Q.TelemetryEnabled});return Q.ClientTelemetryEventEnabled!==void 0&&(le=O(O({},le),Q.ClientTelemetryEventEnabled)),le}function K(te,Q,le){var _e,ke,Ee,Ne,qe,Ke,N,S,M,W,B=function(oe){return te.proxyUrlRewrite?(Q.info("Using rewritten URL for proxy"),te.proxyUrlRewrite(oe)):oe};return{clientInfo:{ua:te.trouterSettings.productName,v:te.trouterSettings.version},ioOptions:{ackTimeoutMs:5e3,rewriteUrlForProxy:B},clientCorrelationID:te.trouterSettings.sessionId,environment:te.trouterSettings.environment,telemetrySettings:P(te.telemetryConfig.settings,le),eventLogger:te.telemetryConfig.eventLogger,endpointId:te.trouterSettings.registrationId,trouterUrl:le?.TrouterConnectionUrl||te.trouterSettings.trouterServiceUrl,registration:te.trouterSettings.registrarServiceUrl?{registrarUrl:te.trouterSettings.registrarServiceUrl,registrationId:(_e=te.trouterSettings.registrationId)!==null&&_e!==void 0?_e:"",pnhAppId:(ke=te.trouterSettings.pnhAppId)!==null&&ke!==void 0?ke:"",platform:(Ee=te.trouterSettings.platform)!==null&&Ee!==void 0?Ee:"",pnhTemplateKey:(Ne=te.trouterSettings.pnhTemplate)!==null&&Ne!==void 0?Ne:"",platformUIVersion:(qe=te.trouterSettings.platformUIVersion)!==null&&qe!==void 0?qe:"",productContext:te.trouterSettings.pnhProductContext||void 0,context:(Ke=te.trouterSettings.pnhContext)!==null&&Ke!==void 0?Ke:"",registrarTtlSec:((N=te.trouterSettings.maxRegistrationTimeInMs)!==null&&N!==void 0?N:0)/1e3}:void 0,connectionDependsOnRegistration:te.trouterSettings.registrarServiceUrl===void 0?function(){return!1}:(S=te.trouterSettings.connectionDependsOnRegistration)!==null&&S!==void 0?S:function(){return!1},delayEventsUntilRegistered:(M=te.trouterSettings.delayEventsUntilRegistered)!==null&&M!==void 0?M:function(){return!1},timeoutOptions:O({connectionTimeoutMs:te.trouterSettings.trouterConnectTimeoutInMs||3e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:te.trouterSettings.productName==="TeamsCDL"?3e5:3e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},te.trouterSettings.timeoutOptions),incallTimeoutOptions:O({connectionTimeoutMs:1e4,fetchTimeoutMs:5e3,pingTimeoutMs:5e3,pongTimeoutMs:2e3,maxBackoffMs:te.trouterSettings.productName==="TeamsCDL"?3e5:1e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},te.trouterSettings.incallTimeoutOptions),incallModeTimeoutMs:(W=te.trouterSettings.incallModeTimeoutMs)!==null&&W!==void 0?W:0,lingeringConnectionDelayMs:6e4,userActivitySecondResendDelayMs:te.trouterSettings.userActivitySecondResendDelayMs||1e4,duplicateDisconnectThresholdMs:1e4,connectionCache:te.connectionCache,registrationStateCallback:te.registrationStateCallbackForAcsDoNotUse,rewriteUrlForProxy:B,retryLimitOnTokenFetch:te.trouterSettings.retryLimitOnTokenFetch,extraConnectionHeaders:te.trouterSettings.extraConnectionHeaders,expediteBackoffOnStartMinimumDelayMs:1e4,toJSON:function(){return O(O({},this),{connectionCache:this.connectionCache?{}:this.connectionCache})}}}function T(te){return new re(te)}function j(){return w.CLIENT_VERSION}function C(te,Q){var le=te.indexOf("://");if(le>=0){var _e=te.indexOf("/",le+3);if(_e>=0)return Q+te.substr(_e)}return""}function R(te){var Q=this;return function(le){return k(Q,void 0,void 0,function(){var _e;return b(this,function(ke){switch(ke.label){case 0:return _e={},[4,te(le.needFresh)];case 1:return[2,(_e.token=ke.sent(),_e.tokenType="skype",_e)]}})})}}function E(te,Q){var le,_e=this;return function(ke){return k(_e,void 0,void 0,function(){var Ee,Ne,qe;return b(this,function(Ke){switch(Ke.label){case 0:Ee=new Date,Ne=setInterval(function(){var N=Math.round((Date.now()-Ee.getTime())/6e4);te.warn("Note: Trouter auth token request promise from ".concat(Ee.toISOString()," has not been resolved for ").concat(N," minutes. The client is blocked from operating properly"))},3e5),Ke.label=1;case 1:return Ke.trys.push([1,,3,4]),[4,Q(ke)];case 2:return qe=Ke.sent(),ke.needFresh&&qe.token===le&&te.error("API violation: Trouter auth token provider got a request with needRefresh=true, but returned the same token as last time anyway. Please fix the host app"),le=qe.token,[2,qe];case 3:return clearInterval(Ne),[7];case 4:return[2]}})})}}var O=this&&this.__assign||function(){return O=Object.assign||function(te){for(var Q,le=1,_e=arguments.length;le<_e;le++){Q=arguments[le];for(var ke in Q)Object.prototype.hasOwnProperty.call(Q,ke)&&(te[ke]=Q[ke])}return te},O.apply(this,arguments)},k=this&&this.__awaiter||function(te,Q,le,_e){function ke(Ee){return Ee instanceof le?Ee:new le(function(Ne){Ne(Ee)})}return new(le||(le=Promise))(function(Ee,Ne){function qe(S){try{N(_e.next(S))}catch(M){Ne(M)}}function Ke(S){try{N(_e.throw(S))}catch(M){Ne(M)}}function N(S){S.done?Ee(S.value):ke(S.value).then(qe,Ke)}N((_e=_e.apply(te,Q||[])).next())})},b=this&&this.__generator||function(te,Q){function le(N){return function(S){return _e([N,S])}}function _e(N){if(ke)throw new TypeError("Generator is already executing.");for(;qe&&(qe=0,N[0]&&(Ke=0)),Ke;)try{if(ke=1,Ee&&(Ne=2&N[0]?Ee.return:N[0]?Ee.throw||((Ne=Ee.return)&&Ne.call(Ee),0):Ee.next)&&!(Ne=Ne.call(Ee,N[1])).done)return Ne;switch(Ee=0,Ne&&(N=[2&N[0],Ne.value]),N[0]){case 0:case 1:Ne=N;break;case 4:return Ke.label++,{value:N[1],done:!1};case 5:Ke.label++,Ee=N[1],N=[0];continue;case 7:N=Ke.ops.pop(),Ke.trys.pop();continue;default:if(Ne=Ke.trys,!(Ne=Ne.length>0&&Ne[Ne.length-1])&&(N[0]===6||N[0]===2)){Ke=0;continue}if(N[0]===3&&(!Ne||N[1]>Ne[0]&&N[1]<Ne[3])){Ke.label=N[1];break}if(N[0]===6&&Ke.label<Ne[1]){Ke.label=Ne[1],Ne=N;break}if(Ne&&Ke.label<Ne[2]){Ke.label=Ne[2],Ke.ops.push(N);break}Ne[2]&&Ke.ops.pop(),Ke.trys.pop();continue}N=Q.call(te,Ke)}catch(S){N=[6,S],Ee=0}finally{ke=Ne=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}var ke,Ee,Ne,qe,Ke={label:0,sent:function(){if(1&Ne[0])throw Ne[1];return Ne[1]},trys:[],ops:[]};return qe={next:le(0),throw:le(1),return:le(2)},typeof Symbol=="function"&&(qe[Symbol.iterator]=function(){return this}),qe};Object.defineProperty(D,"__esModule",{value:!0}),D.replaceTrouterUrlBase=D.getTrouterServiceVersion=D.createTrouterService=D.TrouterService=D.UserActivityState=D.TrouterState=void 0;var w=J(1),A=J(2);Object.defineProperty(D,"TrouterState",{enumerable:!0,get:function(){return A.TrouterState}}),Object.defineProperty(D,"UserActivityState",{enumerable:!0,get:function(){return A.UserActivityState}});var H=J(0),ee=J(8),V=J(9),I=J(10),L=J(11),re=(function(){function te(Q){this.logProvider=Q,this.stateChangedListeners=[],this.logger=new H.Logger("Trouter",Q),this.trouterUrlPromise=new L.TrouterUrlPromise(Q),this.messageHandlers=new ee.MessageHandlerRegistry(Q),this.listeners={},this.connectionInfo=null,this.logger.info("Created TrouterService version ".concat(w.CLIENT_VERSION))}return te.prototype.start=function(Q){var le;if(this.logger.info("Start"),!Q.skypeTokenProvider&&!Q.authTokenProvider)throw new Error("no token provider has been configured, either skypeTokenProvider or authTokenProvider must be populated");Q.skypeTokenProvider&&!Q.trouterSettings.disableInternalSkypeTokenCache&&(Q.skypeTokenProvider=(0,V.addCacheAsBackupTo)(Q.skypeTokenProvider)),this.trouterCfg=Q;var _e=K(Q,this.logger,this.ecsCfg);Q.internalEnableV4cProtocol===!1&&(_e.forceV4aProtocol=!0);var ke=E(this.logger,(le=Q.authTokenProvider)!==null&&le!==void 0?le:R(Q.skypeTokenProvider));this.trouterServer===void 0&&(this.trouterServer=new I.TrouterManager(this.logProvider,_e,ke,Q.authTokenProvider===void 0,this)),this.pendingActivityState!==void 0&&(this.trouterServer.setUserActivityState(this.pendingActivityState[0],this.pendingActivityState[1]),this.pendingActivityState=void 0),this.trouterServer.start()},te.prototype.stop=function(Q){this.logger.info("close connection"),this.trouterUrlPromise.rejectUrl(new Error("TrouterService is stopped")),this.trouterServer!==void 0&&this.trouterServer.stop(Q)},te.prototype.setEcsConfig=function(Q){return k(this,void 0,void 0,function(){var le=this;return b(this,function(_e){return[2,new Promise(function(ke){if(le.ecsCfg=Q.TrouterJScriptClient,le.logger.info("Setting ECS configuration to ".concat(JSON.stringify(le.ecsCfg))),le.trouterServer!==void 0&&le.trouterCfg!==void 0){var Ee=K(le.trouterCfg,le.logger,le.ecsCfg);le.trouterServer.configure(Ee)}ke()})]})})},te.prototype.checkConnection=function(Q){this.trouterServer!==void 0&&this.trouterServer.checkConnection(Q!=null&&Q)},te.prototype.resendRegistration=function(){return k(this,void 0,void 0,function(){return b(this,function(Q){if(!this.trouterServer)throw new Error("resendRegistration called too early");return[2,this.trouterServer.resendRegistration()]})})},te.prototype.registerListener=function(Q,le){return le===""||!le.startsWith("/")||le.includes("?")||le.includes("#")?(this.logger.error("Listener path '".concat(le,"' is not valid")),!1):this.listeners[le]?(this.logger.error("Another listener is already registered for path '".concat(le,"'")),!1):(this.listeners[le]=Q,this.logger.debug("Listener for path '".concat(le,"' registered")),this.connectionInfo&&Q.onTrouterConnected(this.connectionInfo.baseEndpointUrl+le,this.connectionInfo),!0)},te.prototype.unregisterListener=function(Q){for(var le=[],_e=0,ke=Object.keys(this.listeners);_e<ke.length;_e++){var Ee=ke[_e];this.listeners[Ee]===Q&&le.push(Ee)}if(le.length===0)return!1;for(var Ne=0,qe=le;Ne<qe.length;Ne++){var Ee=qe[Ne];delete this.listeners[Ee]}return this.logger.debug("Listener for path(s) '".concat(le.join("', '"),"' unregistered")),!0},te.prototype.onTrouterConnected=function(Q,le){this.logger.debug("Trouter is now connected");for(var _e=0,ke=Object.keys(this.listeners);_e<ke.length;_e++){var Ee=ke[_e];try{this.listeners[Ee].onTrouterConnected(le.baseEndpointUrl+Ee,le)}catch(Ne){this.logger.error("Listener '".concat(Ee,"' threw an exception from onTrouterConnected(): ").concat(Ne))}}this.connectionInfo=le,this.trouterUrlPromise.resolveUrl(Q),this.notifyStateChanged(A.TrouterState.Connected,{url:Q,getRemainingTtlInSec:function(){return le.connectionTtlSec}})},te.prototype.onTrouterDisconnected=function(){this.logger.debug("Trouter is now disconnected"),this.connectionInfo=null;for(var Q=0,le=Object.keys(this.listeners);Q<le.length;Q++){var _e=le[Q],ke=this.listeners[_e];if(ke.onTrouterDisconnected)try{ke.onTrouterDisconnected()}catch(Ee){this.logger.error("Listener '".concat(_e,"' threw an exception from onTrouterDisconnected(): ").concat(Ee))}}this.notifyStateChanged(A.TrouterState.Disconnected)},te.prototype.onTrouterRequest=function(Q,le){for(var _e="",ke=0,Ee=Object.keys(this.listeners);ke<Ee.length;ke++){var Ne=Ee[ke];Q.path.startsWith(Ne)&&Ne.length>_e.length&&(_e=Ne)}if(_e==="")this.tryMessageHandlers(Q,le)||(le.status=404,le.headers={"Trouter-Responder":"ClientLib"},le.send());else try{this.listeners[_e].onTrouterRequest(Q,le)}catch(qe){this.logger.error("Listener '".concat(_e,"' threw an exception from onTrouterRequest(): ").concat(qe)),le.status=500,le.headers={"Trouter-Responder":"ClientLib"},le.send()}},te.prototype.onTrouterMessageLoss=function(Q){this.logger.info("onTrouterMessageLoss called with tags [".concat(Q,"]"));for(var le=!0,_e=0,ke=Object.keys(this.listeners);_e<ke.length;_e++){var Ee=ke[_e],Ne=this.listeners[Ee];if(Ne.onTrouterMessageLoss)try{le=Ne.onTrouterMessageLoss(Q)&&le,le===void 0&&(this.logger.error("Listener '".concat(Ee,"' did not return a boolean value from onTrouterMessageLoss()")),le=!1)}catch(qe){this.logger.error("Listener '".concat(Ee,"' threw an exception from onTrouterMessageLoss(): ").concat(qe)),le=!1}}return le},te.prototype.onTrouterUserActivityStateAccepted=function(Q){this.logger.debug("onTrouterUserActivityStateAccepted cv: ".concat(Q));for(var le=0,_e=Object.keys(this.listeners);le<_e.length;le++){var ke=_e[le],Ee=this.listeners[ke];if(Ee.onTrouterUserActivityStateAccepted)try{Ee.onTrouterUserActivityStateAccepted(Q)}catch(Ne){this.logger.error("Listener '".concat(ke,"' threw an exception from onTrouterUserActivityStateAccepted(): ").concat(Ne))}}},te.prototype.onAudiencesSetResolved=function(Q,le){this.logger.debug("onAudiencesSetResolved cv: ".concat(le));for(var _e=0,ke=Object.keys(this.listeners);_e<ke.length;_e++){var Ee=ke[_e],Ne=this.listeners[Ee];if(Ne.onAudiencesSetResolved)try{Ne.onAudiencesSetResolved(Q,le)}catch(qe){this.logger.error("Listener '".concat(Ee,"' threw an exception from onAudienceSubscribed(): ").concat(qe))}}},te.prototype.setUserActivityState=function(Q,le){if(Q!==A.UserActivityState.Active&&Q!==A.UserActivityState.Inactive)throw new Error("setUserActivityState called with unsupported value ".concat(Q));this.logger.info("setUserActivityState called with value ".concat(A.UserActivityState[Q])),this.trouterServer&&this.state()!==A.TrouterState.Unknown?this.trouterServer.setUserActivityState(Q,le):(this.pendingActivityState=[Q,le],this.logger.warn("setUserActivityState called before start() or after stop()"))},te.prototype.setAudienceSubscriptions=function(Q,le){if(Q.audienceSubscriptions.length>1)throw new Error("Only singular audience subscription is supported");if(this.trouterServer&&this.state()!==A.TrouterState.Unknown)return this.trouterServer.setAudienceSubscriptionsAsync(Q,15e3,le);throw new Error("audience subscribe called before start() or after stop()")},te.prototype.state=function(){return this.trouterServer!==void 0?this.trouterServer.getState():A.TrouterState.Unknown},te.prototype.isInTerminalState=function(){return this.trouterServer!==void 0&&this.trouterServer.isInTerminalState()},te.prototype.reportStateInfo=function(){return this.trouterServer===void 0?"":this.trouterServer.reportStateInfo()},te.prototype.getServerState=function(){if(this.trouterServer!==void 0)return this.trouterServer.getServerState()},te.prototype.getTrouterUrlAsync=function(){return this.trouterServer!==void 0?this.trouterUrlPromise.getPromise():Promise.reject(new Error("TrouterService has not been started"))},te.prototype.onStateChanged=function(Q){if(this.logger.info("onStateChanged called"),Q===void 0)this.stateChangedListeners=this.stateChangedListeners.filter(function(_e){return _e.wrappedCallback===void 0});else{this.offStateChanged(Q);var le=function(_e,ke){Q(_e,ke?ke.url:"")};le.wrappedCallback=Q,this.stateChangedListeners.push(le)}},te.prototype.offStateChanged=function(Q){this.logger.info("offStateChanged called");var le=this.stateChangedListeners.length;return this.stateChangedListeners=this.stateChangedListeners.filter(function(_e){return _e.wrappedCallback!==Q}),le>this.stateChangedListeners.length},te.prototype.addCallback=function(Q){this.logger.info("addListener called"),this.stateChangedListeners.indexOf(Q,0)===-1&&Q!==void 0&&this.stateChangedListeners.push(Q)},te.prototype.removeCallback=function(Q){this.logger.info("removeListener called");var le=this.stateChangedListeners.indexOf(Q,0);return le>-1&&(this.stateChangedListeners.splice(le,1),!0)},te.prototype.registerMessageHandler=function(Q){this.logger.info("registerMessageHandler is called"),this.messageHandlers.register(Q)},te.prototype.clearMessageHandlers=function(){this.logger.info("clearMessageHandlers is called"),this.messageHandlers.clear()},te.prototype.notifyStateChanged=function(Q,le){var _e=this;this.logger.info("notifyStateChanged called, will forward to ".concat(this.stateChangedListeners.length," listeners")),this.stateChangedListeners.forEach(function(ke){try{ke(Q,le)}catch(Ee){_e.logger.error("Error in callback ".concat(Ee))}})},te.prototype.tryMessageHandlers=function(Q,le){if(!this.messageHandlers.active())return!1;var _e,ke=null;try{_e=JSON.parse(Q.body),ke=_e&&(_e.evt||_e.eventId)||null}catch{}var Ee={eventId:ke,url:(this.connectionInfo?this.connectionInfo.baseEndpointUrl:"")+Q.path,body:_e,rawBody:Q.body,headers:Q.headers},Ne=this.messageHandlers.handleMessage(Ee);return!!Ne.isHandled&&(le.status=Ne.resultCode,Ne.responseHeaders&&(le.headers=Ne.responseHeaders),Ne.responseBody&&(le.body=Ne.responseBody),le.send(),!0)},te})();D.TrouterService=re,D.createTrouterService=T,D.getTrouterServiceVersion=j,D.replaceTrouterUrlBase=C},function(G,D){G.exports=Be}])})});_(U);var Z=z(function(Oe,Ce){Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.DeleteReason=void 0;var Be;(function(G){G.DeletedByPolicy="deletedByPolicy",G.DeletedByUser="deletedByUser"})(Be||(Ce.DeleteReason=Be={}))});_(Z),Z.DeleteReason;var X=z(function(Oe,Ce){Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.PACKAGE_VERSION=Ce.CONFIG_API_VERSION=Ce.EudbCountries=Ce.CloudPrefix=Ce.CloudType=Ce.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES=void 0,Ce.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES=3;var Be;(function(D){D.Public="Public",D.GccHigh="GCC High",D.Dod="DoD"})(Be||(Ce.CloudType=Be={}));var G;(function(D){D.OrgId="orgid",D.Acs="acs",D.Spool="spool",D.GccHigh="gcch",D.GccHighAcs="gcch-acs",D.Dod="dod",D.DodAcs="dod-acs"})(G||(Ce.CloudPrefix=G={})),Ce.EudbCountries=["europe","france","germany","norway","switzerland","sweden"],Ce.CONFIG_API_VERSION="2024-09-01",Ce.PACKAGE_VERSION="1.0.0-beta.34"});_(X),X.PACKAGE_VERSION,X.CONFIG_API_VERSION,X.EudbCountries,X.CloudPrefix,X.CloudType,X.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES;var ye=Z,he=X,ue=z(function(Oe,Ce){var Be=y&&y.__awaiter||function(N,S,M,W){function B(oe){return oe instanceof M?oe:new M(function(ve){ve(oe)})}return new(M||(M=Promise))(function(oe,ve){function Ie(ze){try{De(W.next(ze))}catch(at){ve(at)}}function Me(ze){try{De(W.throw(ze))}catch(at){ve(at)}}function De(ze){ze.done?oe(ze.value):B(ze.value).then(Ie,Me)}De((W=W.apply(N,S||[])).next())})};Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.isEudbLocation=Ce.parseTokenCredential=Ce.base64decode=Ce.toTelemetrySender=Ce.toLogProvider=Ce.toMessageHandler=void 0,Ce.generateUuid=Ne;const G=new Map([["chatMessageReceived",200],["typingIndicatorReceived",245],["readReceiptReceived",246],["chatMessageEdited",247],["chatMessageDeleted",248],["chatThreadCreated",257],["chatThreadPropertiesUpdated",258],["chatThreadDeleted",259],["participantsAdded",260],["participantsRemoved",261]]),D="8:orgid:",J="8:dod:",P="8:gcch:",K="8:teamsvisitor:",T="4:",j="8:acs:",C="8:gcch-acs:",R="8:dod-acs:",E="8:spool:",O=(N,S,M,W)=>{const B=G.get(N);return{handleMessage(oe){let ve=null;if(oe?.rawBody&&(ve=JSON.parse(oe.rawBody)),ve===null||ve.eventId!==B)return;const Ie=w(N,ve,M,W);if(Ie!==null)return S(Ie),{isHandled:!0,resultCode:200}}}};Ce.toMessageHandler=O;function k(N,S,M){return{threadId:N.groupId,sender:L(N.senderId),senderDisplayName:N.senderDisplayName,recipient:L(N.recipientMri),id:N.messageId,createdOn:new Date(N.originalArrivalTime),version:N.version,type:N.messageType,message:N.messageBody,metadata:re(N.acsChatMessageMetadata)||{},attachments:le(re(N.attachments)||[],S,M)}}function b(N,S,M){return Object.assign(Object.assign({},k(N,S,M)),{editedOn:new Date(N.edittime)})}const w=(N,S,M,W)=>{if(N==="chatMessageReceived")return k(S,M,W);if(N==="chatMessageEdited")return b(S,M,W);if(N==="chatMessageDeleted"){const B=S;return{threadId:B.groupId,sender:L(B.senderId),senderDisplayName:B.senderDisplayName,recipient:L(B.recipientMri),id:B.messageId,createdOn:new Date(B.originalArrivalTime),version:B.version,deletedOn:new Date(B.deletetime),type:B.messageType}}if(N==="typingIndicatorReceived"){const B=S;return{threadId:B.groupId,sender:L(B.senderId),senderDisplayName:B.senderDisplayName,recipient:L(B.recipientMri),version:B.version,receivedOn:new Date(B.originalArrivalTime)}}if(N==="readReceiptReceived"){const B=S,ve=JSON.parse(B.messageBody).consumptionhorizon.split(";");return{threadId:B.groupId,sender:L(B.senderId),senderDisplayName:"",recipient:L(B.recipientMri),chatMessageId:B.messageId,readOn:new Date(+ve[1])}}if(N==="chatThreadCreated"){const B=S,oe=JSON.parse(unescape(B.createdBy)),ve=JSON.parse(unescape(B.members)),Ie=A(oe),Me=ve.map(ze=>A(ze));return{threadId:B.threadId,createdOn:new Date(B.createTime),createdBy:Ie,version:B.version,participants:Me,properties:H(JSON.parse(unescape(B.properties))),retentionPolicy:ee(JSON.parse(unescape(B.properties)))}}if(N==="chatThreadPropertiesUpdated"){const B=S,oe=JSON.parse(unescape(B.editedBy)),ve=A(oe);return{threadId:B.threadId,updatedOn:new Date(B.editTime),updatedBy:ve,version:B.version,properties:H(JSON.parse(unescape(B.properties))),retentionPolicy:ee(JSON.parse(unescape(B.properties)))}}if(N==="chatThreadDeleted"){const B=S,oe=S.reason==ye.DeleteReason.DeletedByPolicy?null:A(JSON.parse(unescape(B.deletedBy)));return{threadId:B.threadId,deletedOn:new Date(B.deleteTime),deletedBy:oe,version:B.version,reason:B.reason}}if(N==="participantsAdded"){const B=S,oe=JSON.parse(unescape(B.addedBy)),ve=JSON.parse(unescape(B.participantsAdded)),Ie=A(oe),Me=ve.map(ze=>A(ze));return{threadId:B.threadId,addedOn:new Date(B.time),addedBy:Ie,version:B.version,participantsAdded:Me}}if(N==="participantsRemoved"){const B=S,oe=JSON.parse(unescape(B.removedBy)),ve=JSON.parse(unescape(B.participantsRemoved)),Ie=A(oe),Me=ve.map(ze=>A(ze));return{threadId:B.threadId,removedOn:new Date(B.time),removedBy:Ie,version:B.version,participantsRemoved:Me}}return null},A=N=>{var S;const M={id:L(N.participantId),displayName:N.displayName,metadata:re((S=N.memberMetaData)!==null&&S!==void 0?S:"")||{}};return N.shareHistoryTime&&(M.shareHistoryTime=new Date(N.shareHistoryTime)),M},H=N=>{var S;return{topic:N.topic,metadata:re((S=N.acsChatThreadMetadata)!==null&&S!==void 0?S:"")||{}}},ee=N=>{const S=N.retentionPolicy;if(!S)return{kind:"none"};let M;try{M=JSON.parse(S)}catch{return{kind:"none"}}if(M.retentionPolicyType==="DeleteAfterCreationTime"&&typeof M.executeAfter=="string"){const W=M.executeAfter.trim().replace(/^[+-]/,""),B=W.includes(".")?W.split(".")[0]:"0",oe=parseInt(B,10);return{kind:"threadCreationDate",deleteThreadAfterDays:isNaN(oe)?0:oe}}return{kind:"none"}},V=N=>({log:(...S)=>N.info(S),warn:(...S)=>N.warning(S),error:(...S)=>N.error(S),debug:(...S)=>N.verbose(S),info:(...S)=>N.verbose(S)});Ce.toLogProvider=V;const I=N=>({logEvent:S=>N.info(S)});Ce.toTelemetrySender=I;const L=N=>N.startsWith(D)?{kind:"microsoftTeamsUser",rawId:N,microsoftTeamsUserId:N.substring(D.length),isAnonymous:!1,cloud:"public"}:N.startsWith(J)?{kind:"microsoftTeamsUser",rawId:N,microsoftTeamsUserId:N.substring(J.length),isAnonymous:!1,cloud:"dod"}:N.startsWith(P)?{kind:"microsoftTeamsUser",rawId:N,microsoftTeamsUserId:N.substring(P.length),isAnonymous:!1,cloud:"gcch"}:N.startsWith(K)?{kind:"microsoftTeamsUser",rawId:N,microsoftTeamsUserId:N.substring(K.length),isAnonymous:!0}:N.startsWith(T)?{kind:"phoneNumber",rawId:N,phoneNumber:N.substring(T.length)}:N.startsWith(j)||N.startsWith(C)||N.startsWith(R)||N.startsWith(E)?{kind:"communicationUser",communicationUserId:N}:{kind:"unknown",id:N},re=N=>{if(!(N==null||N===""||N==="null"||N==="{}"||N==="[]"))return JSON.parse(N)},te=(N,S,M)=>{let W;try{W=new URL(N),(W.protocol==="http:"||W.protocol==="https:")&&(W=new URL(W.pathname,S))}catch{try{W=new URL(N,S)}catch{return N}}return W.searchParams.set("api-version",M),W.toString()},Q=N=>{let S;try{S=new URL(N)}catch{return!1}return S.protocol==="http:"||S.protocol==="https:"},le=(N,S,M)=>(S==null||S===""||!Q(S)||N.filter(W=>W.attachmentType.toLowerCase()==="image".toLowerCase()).map(W=>{W.previewUrl&&(W.previewUrl=te(W.previewUrl,S,M)),W.url&&(W.url=te(W.url,S,M))}),N),_e=N=>h.default.isNodeLike?Buffer.from(N,"base64").toString():atob(N);Ce.base64decode=_e;const ke=N=>{let[,S]=N?.split(".");if(S===void 0)throw new Error("Invalid token");return S=S.replace(/-/g,"+").replace(/_/g,"/"),JSON.parse(decodeURIComponent(escape((0,Ce.base64decode)(S))))},Ee=N=>Be(void 0,void 0,void 0,function*(){const S=yield N.getToken(),M=S?.token,W=ke(M),B=W.skypeid,oe=W.resourceId,ve=Ke(B),Ie=W.resourceLocation||"";return{jwtToken:M,acsResourceId:oe,identityMri:B,cloudType:ve,resourceLocation:Ie}});Ce.parseTokenCredential=Ee;function Ne(){return(0,d.default.v4)()}const qe=N=>!!N&&!!he.EudbCountries.find(S=>S===N);Ce.isEudbLocation=qe;function Ke(N){switch(N.substring(0,N.indexOf(":"))){case he.CloudPrefix.OrgId:case he.CloudPrefix.Acs:case he.CloudPrefix.Spool:return he.CloudType.Public;case he.CloudPrefix.GccHigh:case he.CloudPrefix.GccHighAcs:return he.CloudType.GccHigh;case he.CloudPrefix.Dod:case he.CloudPrefix.DodAcs:return he.CloudType.Dod;default:return he.CloudType.Public}}});_(ue),ue.isEudbLocation,ue.parseTokenCredential,ue.base64decode,ue.toTelemetrySender,ue.toLogProvider,ue.toMessageHandler,ue.generateUuid;var ne=z(function(Oe,Ce){var Be=y&&y.__createBinding||(Object.create?(function(j,C,R,E){E===void 0&&(E=R);var O=Object.getOwnPropertyDescriptor(C,R);(!O||("get"in O?!C.__esModule:O.writable||O.configurable))&&(O={enumerable:!0,get:function(){return C[R]}}),Object.defineProperty(j,E,O)}):(function(j,C,R,E){E===void 0&&(E=R),j[E]=C[R]})),G=y&&y.__setModuleDefault||(Object.create?(function(j,C){Object.defineProperty(j,"default",{enumerable:!0,value:C})}):function(j,C){j.default=C}),D=y&&y.__importStar||function(j){if(j&&j.__esModule)return j;var C={};if(j!=null)for(var R in j)R!=="default"&&Object.prototype.hasOwnProperty.call(j,R)&&Be(C,j,R);return G(C,j),C},J=y&&y.__awaiter||function(j,C,R,E){function O(k){return k instanceof R?k:new R(function(b){b(k)})}return new(R||(R=Promise))(function(k,b){function w(ee){try{H(E.next(ee))}catch(V){b(V)}}function A(ee){try{H(E.throw(ee))}catch(V){b(V)}}function H(ee){ee.done?k(ee.value):O(ee.value).then(w,A)}H((E=E.apply(j,C||[])).next())})};Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.RealTimeNotificationConfiguration=Ce.TrouterConfigClient=void 0;const P=D(p.default);class K extends P.ServiceClient{constructor(C,R){R||(R={});const E=`azsdk-js-communication-signaling/${he.PACKAGE_VERSION}`,O=R.userAgentOptions&&R.userAgentOptions.userAgentPrefix?`${R.userAgentOptions.userAgentPrefix} ${E}`:`${E}`,k=Object.assign(Object.assign({},R),{userAgentOptions:{userAgentPrefix:O},additionalPolicies:R.additionalPolicies});super(k),this.apiVersion=he.CONFIG_API_VERSION,this.endpoint=C,this.httpClient=(0,m.default.createDefaultHttpClient)()}fetchServiceUrls(C){return J(this,void 0,void 0,function*(){try{const R=(yield C.getToken()).token,E=(0,m.default.createPipelineRequest)({url:`${this.endpoint}/chat/config/realTimeNotifications?api-version=${this.apiVersion}`,method:"GET",headers:(0,m.default.createHttpHeaders)({Authorization:`Bearer ${R}`})}),O=yield this.pipeline.sendRequest(this.httpClient,E);if(O.status!==200||!O.bodyAsText)throw new Error(`Failed to fetch service URLs. Status: ${O.status}, Body: ${O.bodyAsText||"No response body"}`);const k=JSON.parse(O.bodyAsText);if(!k.trouterServiceUrl||!k.registrarServiceUrl||!k.cloudType)throw new Error("One or more required fields are missing in the response data");return new T(k.trouterServiceUrl,k.registrarServiceUrl,k.cloudType)}catch(R){throw new Error(`Error fetching real-time notification configuration from Chat Gateway: ${R.message}`)}})}}Ce.TrouterConfigClient=K;class T{constructor(C,R,E){this.trouterServiceUrl=C,this.registrarServiceUrl=R,this.cloudType=E}}Ce.RealTimeNotificationConfiguration=T});_(ne),ne.RealTimeNotificationConfiguration,ne.TrouterConfigClient;var ae=ue,ce=ne,ie=z(function(Oe,Ce){var Be=y&&y.__awaiter||function(J,P,K,T){function j(C){return C instanceof K?C:new K(function(R){R(C)})}return new(K||(K=Promise))(function(C,R){function E(b){try{k(T.next(b))}catch(w){R(w)}}function O(b){try{k(T.throw(b))}catch(w){R(w)}}function k(b){b.done?C(b.value):j(b.value).then(E,O)}k((T=T.apply(J,P||[])).next())})};Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.defaultTelemetrySettings=Ce.createSettings=void 0;const G={version:"1.0.0",registrationId:"",sessionId:"",pnhAppId:"AcsWeb",pnhTemplate:"AcsWeb_Chat_2.1",platform:"SPOOL",platformUIVersion:"0.0.0",environment:"",productName:"acs-chat-web",trouterServiceUrl:"",registrarServiceUrl:"",registrarRefreshTimeoutInMs:35e4,timeoutOptions:{connectionTimeoutMs:2e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:5e4,requestTimeoutMs:5e3},maxRegistrationTimeInMs:72e5},D=(J,P)=>Be(void 0,void 0,void 0,function*(){var K;const T=P?.resourceEndpoint;if(T===void 0)throw new Error("'endpoint' cannot be null");const j=Object.assign({},G);j.registrationId=(0,ae.generateUuid)(),j.sessionId=(0,ae.generateUuid)();const R=yield new ce.TrouterConfigClient(T,P).fetchServiceUrls(J);return j.trouterServiceUrl=`${R.trouterServiceUrl}/v4/a`,j.registrarServiceUrl=`${R.registrarServiceUrl}/v3/registrations`,R.cloudType==="int"&&(j.pnhAppId="cns-e2e-test",j.pnhTemplate="cns-e2e-test:1.8"),j.maxRegistrationTimeInMs=(K=P?.registrationTimeInMs)!==null&&K!==void 0?K:G.maxRegistrationTimeInMs,j});Ce.createSettings=D,Ce.defaultTelemetrySettings={enabled:!1}});_(ie),ie.defaultTelemetrySettings,ie.createSettings;var Re=ie,xe=z(function(Oe,Ce){var Be=y&&y.__awaiter||function(J,P,K,T){function j(C){return C instanceof K?C:new K(function(R){R(C)})}return new(K||(K=Promise))(function(C,R){function E(b){try{k(T.next(b))}catch(w){R(w)}}function O(b){try{k(T.throw(b))}catch(w){R(w)}}function k(b){b.done?C(b.value):j(b.value).then(E,O)}k((T=T.apply(J,P||[])).next())})};Object.defineProperty(Ce,"__esModule",{value:!0}),Ce.CommunicationSignalingClient=Ce.ConnectionState=void 0;var G;(function(J){J[J.Unknown=0]="Unknown",J[J.Connected=2]="Connected",J[J.Disconnected=3]="Disconnected",J[J.Switching=9]="Switching"})(G||(Ce.ConnectionState=G={}));class D{constructor(P,K,T){this.credential=P,this.logger=K,this.options=T,this.stateChangedListener=null,this.tokenFetchRetries=0,this.trouter=(0,U.createTrouterService)((0,ae.toLogProvider)(K))}start(){return Be(this,void 0,void 0,function*(){var P,K;if(this.resourceEndpoint=(P=this.options)===null||P===void 0?void 0:P.resourceEndpoint,this.resourceEndpoint===void 0)throw new Error("'endpoint' cannot be null");this.gatewayApiVersion=((K=this.options)===null||K===void 0?void 0:K.gatewayApiVersion)||"2024-03-07",this.config===void 0&&(this.config={trouterSettings:yield(0,Re.createSettings)(this.credential,this.options),skypeTokenProvider:T=>Be(this,void 0,void 0,function*(){if(T){if(this.tokenFetchRetries+=1,this.tokenFetchRetries>he.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES)throw yield this.stop(!0),new Error(`Access token is expired and failed to fetch a valid one after ${he.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES} retries`)}else this.tokenFetchRetries=0;return Promise.resolve((yield this.credential.getToken()).token)}),telemetryConfig:{eventLogger:(0,ae.toTelemetrySender)(this.logger),settings:Re.defaultTelemetrySettings}}),this.trouter.start(this.config),this.trouter.setUserActivityState(U.UserActivityState.Active)})}stop(P){return Be(this,void 0,void 0,function*(){this.trouter.offStateChanged(this.stateChangedListener),this.trouter.clearMessageHandlers(),this.trouter.stop(P??this.tokenFetchRetries>he.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES)})}on(P,K){if(P==="connectionChanged"){this.trouter.offStateChanged(this.stateChangedListener),this.stateChangedListener=(T,j)=>K(T),this.trouter.onStateChanged(this.stateChangedListener);return}this.trouter.registerMessageHandler((0,ae.toMessageHandler)(P,K,this.resourceEndpoint,this.gatewayApiVersion))}}Ce.CommunicationSignalingClient=D});_(xe),xe.CommunicationSignalingClient,xe.ConnectionState;var Pe=xe,Je=z(function(Oe,Ce){var Be=y&&y.__createBinding||(Object.create?(function(D,J,P,K){K===void 0&&(K=P);var T=Object.getOwnPropertyDescriptor(J,P);(!T||("get"in T?!J.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return J[P]}}),Object.defineProperty(D,K,T)}):(function(D,J,P,K){K===void 0&&(K=P),D[K]=J[P]})),G=y&&y.__exportStar||function(D,J){for(var P in D)P!=="default"&&!Object.prototype.hasOwnProperty.call(J,P)&&Be(J,D,P)};Object.defineProperty(Ce,"__esModule",{value:!0}),G(Pe,Ce)}),Ae=_(Je);r.exports=Ae})(md)),md.exports}var Bd=dO();class Cs extends Error{}Cs.prototype.name="InvalidTokenError";function fO(r){return decodeURIComponent(atob(r).replace(/(.)/g,(n,i)=>{let s=i.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}function hO(r){let n=r.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return fO(n)}catch{return atob(n)}}function pO(r,n){if(typeof r!="string")throw new Cs("Invalid token specified: must be a string");n||(n={});const i=n.header===!0?0:1,s=r.split(".")[i];if(typeof s!="string")throw new Cs(`Invalid token specified: missing part #${i+1}`);let c;try{c=hO(s)}catch(l){throw new Cs(`Invalid token specified: invalid base64 for part #${i+1} (${l.message})`)}try{return JSON.parse(c)}catch(l){throw new Cs(`Invalid token specified: invalid json for part #${i+1} (${l.message})`)}}const Hd=r=>{const{exp:n}=pO(r);return{token:r,expiresOnTimestamp:n*1e3}},zy={token:"",expiresOnTimestamp:-10},mO=r=>r*1e3*60,gO=mO(10),yO=.5;class vO{constructor(n){this.expiringSoonIntervalInMs=gO,this.refreshAfterLifetimePercentage=yO,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.disposed=!1;const{tokenRefresher:i,token:s,refreshProactively:c}=n;this.refresh=i,this.currentToken=s?Hd(s):zy,this.refreshProactively=c??!1,this.refreshProactively&&this.scheduleRefresh()}async getToken(n){return this.isTokenExpiringSoon(this.currentToken)?(this.isTokenValid(this.currentToken)||await this.updateTokenAndReschedule(n?.abortSignal),this.currentToken):this.currentToken}dispose(){this.disposed=!0,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.currentToken=zy,this.activeTimeout&&clearTimeout(this.activeTimeout)}async updateTokenAndReschedule(n){if(this.activeTokenUpdating)return this.activeTokenUpdating;this.activeTokenUpdating=this.refreshTokenAndReschedule(n);try{await this.activeTokenUpdating}finally{this.activeTokenUpdating=null}}async refreshTokenAndReschedule(n){const i=await this.refreshToken(n);if(!this.isTokenValid(i))throw new Error("The token returned from the tokenRefresher is expired.");this.currentToken=i,this.refreshProactively&&this.scheduleRefresh()}async refreshToken(n){try{return this.activeTokenFetching||(this.activeTokenFetching=this.refresh(n)),Hd(await this.activeTokenFetching)}finally{this.activeTokenFetching=null}}scheduleRefresh(){if(this.disposed)return;this.activeTimeout&&clearTimeout(this.activeTimeout);const n=this.currentToken.expiresOnTimestamp-Date.now();let i=null;this.isTokenExpiringSoon(this.currentToken)?i=n*this.refreshAfterLifetimePercentage:i=n-this.expiringSoonIntervalInMs,this.activeTimeout=setTimeout(()=>this.updateTokenAndReschedule(),i)}isTokenValid(n){return n&&Date.now()<n.expiresOnTimestamp}isTokenExpiringSoon(n){return!n||Date.now()>=n.expiresOnTimestamp-this.expiringSoonIntervalInMs}}class bO{constructor(n){this.token=n}async getToken(){return this.token}dispose(){}}function SO(r){const n=r;return n&&typeof n.getToken=="function"&&(n.signRequest===void 0||n.getToken.length>0)}const TO="ApiVersionPolicy";function wO(r){return{name:TO,sendRequest:(n,i)=>{const s=new URL(n.url);return!s.searchParams.get("api-version")&&r.apiVersion&&(n.url=`${n.url}${Array.from(s.searchParams.keys()).length>0?"&":"?"}api-version=${r.apiVersion}`),i(n)}}}const CO="keyCredentialAuthenticationPolicy";function RO(r,n){return{name:CO,async sendRequest(i,s){return i.headers.set(n,r.key),s(i)}}}function EO(r,n,i={}){const{credential:s,clientOptions:c}=i;if(s){if(SO(s)){const l=Bc({credential:s,scopes:c?.credentials?.scopes??`${n}/.default`});r.addPolicy(l)}else if(xO(s)){if(!c?.credentials?.apiKeyHeaderName)throw new Error("Missing API Key Header Name");const l=RO(s,c?.credentials?.apiKeyHeaderName);r.addPolicy(l)}}}function _O(r,n,i={}){const s=Sf(i);return s.addPolicy(wO(i)),EO(s,r,{credential:n,clientOptions:i}),s}function xO(r){return r.key!==void 0}function Gr(r){return r.onResponse?{...r,onResponse(n,i){r.onResponse?.(n,i,i)}}:r}function AO(r,n,i={}){const c=_O(r,void 0,i),l=Mk(r,{...i,pipeline:c}),d=(h,...p)=>({get:(m={})=>l.path(h,...p).get(Gr(m)),post:(m={})=>l.path(h,...p).post(Gr(m)),put:(m={})=>l.path(h,...p).put(Gr(m)),patch:(m={})=>l.path(h,...p).patch(Gr(m)),delete:(m={})=>l.path(h,...p).delete(Gr(m)),head:(m={})=>l.path(h,...p).head(Gr(m)),options:(m={})=>l.path(h,...p).options(Gr(m)),trace:(m={})=>l.path(h,...p).trace(Gr(m))});return{path:d,pathUnchecked:d,pipeline:l.pipeline}}const kO="https://auth.msft.communication.azure.com/",NO="https://communication.azure.com/clients/",OO="/access/teamsExtension/:exchangeAccessToken",MO="2025-06-30",UO="/access/entra/:exchangeAccessToken",DO="2025-03-02-preview";class jO{constructor(n){this.options=n,this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}},this.client=AO(n.resourceEndpoint),this.httpClient=Tf(),this.options=n,this.options.scopes=this.options.scopes||["https://communication.azure.com/clients/.default"],this.isPending=this.getToken()}async getToken(n){var i;if(!((i=n?.abortSignal)===null||i===void 0)&&i.aborted)return{token:"",expiresOnTimestamp:0};this.isPending||(this.isPending=this.getTokenInternal(n));try{await this.isPending}finally{this.isPending=null}return this.result.acsToken}async getTokenInternal(n){const i=n?.abortSignal?{abortSignal:n.abortSignal}:void 0,s=await this.options.tokenCredential.getToken(this.options.scopes?this.options.scopes:["https://communication.azure.com/clients/.default"],i),c=new Date,l=new Date(this.result.acsToken.expiresOnTimestamp);if(s===null)this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}};else if(this.result.acsToken.token===""||s.token!==this.result.entraToken||l<c){const d=await this.exchangeEntraToken(this.options.resourceEndpoint,s.token,i);this.result={entraToken:s.token,acsToken:d}}return this.result.acsToken}dispose(){this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}}}async exchangeEntraToken(n,i,s){const c=wf({url:this.createRequestUri(n),method:"POST",headers:yb({Authorization:`Bearer ${i}`,"Content-Type":"application/json",Accept:"application/json"}),abortSignal:s?.abortSignal,body:JSON.stringify({})}),l=await this.client.pipeline.sendRequest(this.httpClient,c);if(l.status!==200||!l.bodyAsText)throw new Error(`Service request failed. Status: ${l.status}, Body: ${l.bodyAsText}`);const d=JSON.parse(l.bodyAsText);return{token:d.accessToken.token,expiresOnTimestamp:Date.parse(d.accessToken.expiresOn)}}createRequestUri(n){const[i,s]=this.determineEndpointAndApiVersion();return`${n}${i}?api-version=${s}`}determineEndpointAndApiVersion(){if(!this.options.scopes||this.options.scopes.length===0)throw new Error("Scopes validation failed. Ensure all scopes start with either {TeamsExtensionScopePrefix} or {CommunicationClientsScopePrefix}.");if(this.options.scopes.every(n=>n.startsWith(kO)))return[OO,MO];if(this.options.scopes.every(n=>n.startsWith(NO)))return[UO,DO];throw new Error("Scopes validation failed. Ensure all scopes start with either {TeamsExtensionScopePrefix} or {CommunicationClientsScopePrefix}.")}}class PO{constructor(n){this.disposed=!1,typeof n=="string"?this.tokenCredential=new bO(Hd(n)):"tokenRefresher"in n?this.tokenCredential=new vO(n):this.tokenCredential=new jO(n)}async getToken(n){this.throwIfDisposed();const i=await this.tokenCredential.getToken(n);return this.throwIfDisposed(),i}dispose(){this.disposed=!0,this.tokenCredential.dispose()}throwIfDisposed(){if(this.disposed)throw new Error("User credential is disposed")}}const IO=r=>typeof r.communicationUserId=="string",zO=r=>typeof r.phoneNumber=="string",LO=r=>typeof r.microsoftTeamsUserId=="string",BO=r=>typeof r.teamsAppId=="string",HO=r=>{const n=typeof r.userId=="string",i=typeof r.tenantId=="string",s=typeof r.resourceId=="string";return n&&i&&s},Nb=r=>IO(r)?Object.assign(Object.assign({},r),{kind:"communicationUser"}):zO(r)?Object.assign(Object.assign({},r),{kind:"phoneNumber"}):LO(r)?Object.assign(Object.assign({},r),{kind:"microsoftTeamsUser"}):BO(r)?Object.assign(Object.assign({},r),{kind:"microsoftTeamsApp"}):HO(r)?Object.assign(Object.assign({},r),{kind:"teamsExtensionUser"}):Object.assign(Object.assign({},r),{kind:"unknown"}),ws=r=>{const n=Nb(r);switch(n.kind){case"communicationUser":return n.communicationUserId;case"microsoftTeamsUser":{const{microsoftTeamsUserId:i,rawId:s,cloud:c,isAnonymous:l}=n;if(s)return s;if(l)return`8:teamsvisitor:${i}`;switch(c){case"dod":return`8:dod:${i}`;case"gcch":return`8:gcch:${i}`;case"public":return`8:orgid:${i}`}return`8:orgid:${i}`}case"microsoftTeamsApp":{const{teamsAppId:i,rawId:s,cloud:c}=n;if(s)return s;switch(c){case"dod":return`28:dod:${i}`;case"gcch":return`28:gcch:${i}`}return`28:orgid:${i}`}case"phoneNumber":{const{phoneNumber:i,rawId:s}=n;return s||`4:${i}`}case"teamsExtensionUser":{const{userId:i,tenantId:s,resourceId:c,rawId:l,cloud:d}=n;if(l)return l;switch(d){case"dod":return`8:dod-acs:${c}_${s}_${i}`;case"gcch":return`8:gcch-acs:${c}_${s}_${i}`}return`8:acs:${c}_${s}_${i}`}case"unknown":return n.id}},en=(r,n)=>{const i=Object.keys(r)[0],s=r[i];if(n in s)return s[n];throw new Error(`Property ${n} is required for identifier of type ${i}.`)},qO=r=>{const n=[];if(r.communicationUser!==void 0&&n.push("communicationUser"),r.microsoftTeamsUser!==void 0&&n.push("microsoftTeamsUser"),r.microsoftTeamsApp!==void 0&&n.push("microsoftTeamsApp"),r.phoneNumber!==void 0&&n.push("phoneNumber"),r.teamsExtensionUser!==void 0&&n.push("teamsExtensionUser"),n.length>1)throw new Error(`Only one of the properties in ${JSON.stringify(n)} should be present.`)},Ob=r=>{var n,i,s,c,l,d,h,p,m;const y=Nb(r);switch(y.kind){case"communicationUser":return{rawId:ws(y),communicationUser:{id:y.communicationUserId}};case"phoneNumber":return{rawId:(n=y.rawId)!==null&&n!==void 0?n:ws(y),phoneNumber:{value:y.phoneNumber,isAnonymous:(i=y.isAnonymous)!==null&&i!==void 0?i:!1,assertedId:y.assertedId}};case"microsoftTeamsUser":return{rawId:(s=y.rawId)!==null&&s!==void 0?s:ws(y),microsoftTeamsUser:{userId:y.microsoftTeamsUserId,isAnonymous:(c=y.isAnonymous)!==null&&c!==void 0?c:!1,cloud:(l=y.cloud)!==null&&l!==void 0?l:"public"}};case"microsoftTeamsApp":return{rawId:(d=y.rawId)!==null&&d!==void 0?d:ws(y),microsoftTeamsApp:{appId:y.teamsAppId,cloud:(h=y.cloud)!==null&&h!==void 0?h:"public"}};case"teamsExtensionUser":return{rawId:(p=y.rawId)!==null&&p!==void 0?p:ws(y),teamsExtensionUser:{userId:y.userId,tenantId:y.tenantId,resourceId:y.resourceId,cloud:(m=y.cloud)!==null&&m!==void 0?m:"public"}};case"unknown":return{rawId:y.id};default:throw new Error(`Can't serialize an identifier with kind ${y.kind}`)}},$O=r=>r.communicationUser?"communicationUser":r.phoneNumber?"phoneNumber":r.microsoftTeamsUser?"microsoftTeamsUser":r.microsoftTeamsApp?"microsoftTeamsApp":r.teamsExtensionUser?"teamsExtensionUser":"unknown",Ls=r=>{var n,i;qO(r);const s=r.communicationUser,c=r.microsoftTeamsUser,l=r.microsoftTeamsApp,d=r.phoneNumber,h=r.teamsExtensionUser,p=(n=r.kind)!==null&&n!==void 0?n:$O(r);return p==="communicationUser"&&s?{kind:"communicationUser",communicationUserId:en({communicationUser:s},"id")}:p==="phoneNumber"&&d?{kind:"phoneNumber",phoneNumber:en({phoneNumber:d},"value"),rawId:en({phoneNumber:r},"rawId"),isAnonymous:(i=d.isAnonymous)!==null&&i!==void 0?i:!1,assertedId:d.assertedId}:p==="microsoftTeamsUser"&&c?{kind:"microsoftTeamsUser",microsoftTeamsUserId:en({microsoftTeamsUser:c},"userId"),isAnonymous:en({microsoftTeamsUser:c},"isAnonymous"),cloud:en({microsoftTeamsUser:c},"cloud"),rawId:en({microsoftTeamsUser:r},"rawId")}:p==="microsoftTeamsApp"&&l?{kind:"microsoftTeamsApp",teamsAppId:en({microsoftTeamsApp:l},"appId"),cloud:en({microsoftTeamsApp:l},"cloud"),rawId:en({microsoftTeamsApp:r},"rawId")}:p==="teamsExtensionUser"&&h?{kind:"teamsExtensionUser",userId:en({teamsExtensionUser:h},"userId"),tenantId:en({teamsExtensionUser:h},"tenantId"),resourceId:en({teamsExtensionUser:h},"resourceId"),cloud:en({teamsExtensionUser:h},"cloud"),rawId:en({teamsExtensionUser:r},"rawId")}:{kind:"unknown",id:en({unknown:r},"rawId")}},VO=r=>{const{participants:n,idempotencyToken:i}=r,s=br(r,["participants","idempotencyToken"]);return Object.assign({repeatabilityRequestId:i},s)},Mb=r=>{const{id:n}=r,i=br(r,["id"]);return Object.assign(Object.assign({},i),{communicationIdentifier:Ob(n)})},GO=r=>{var n;return{participants:(n=r.participants)===null||n===void 0?void 0:n.map(i=>Mb(i))}},qd=r=>{const{communicationIdentifier:n}=r,i=br(r,["communicationIdentifier"]);return Object.assign(Object.assign({},i),{id:Ls(n)})},FO=r=>{const{participants:n,initiatorCommunicationIdentifier:i}=r,s=br(r,["participants","initiatorCommunicationIdentifier"]);let c=Object.assign({},s);if(i){const l=Ls(i);c=Object.assign(Object.assign({},c),{initiator:l})}return n&&(c=Object.assign(Object.assign({},c),{participants:n?.map(l=>qd(l))})),c},xd=r=>{const{content:n,senderCommunicationIdentifier:i}=r,s=br(r,["content","senderCommunicationIdentifier"]);let c=Object.assign({},s);if(n&&(c=Object.assign(Object.assign({},c),{content:FO(n)})),i){const l=Ls(i);c=Object.assign(Object.assign({},c),{sender:l})}return c},XO=r=>{if(r.kind==="threadCreationDate"||r.kind==="none")return r;throw new Error(`Retention Policy ${r.kind} is not supported`)},Ub=r=>{const{createdByCommunicationIdentifier:n,retentionPolicy:i}=r,s=br(r,["createdByCommunicationIdentifier","retentionPolicy"]);let c=Object.assign({},s);return n&&(c=Object.assign(Object.assign({},c),{createdBy:Ls(n)})),i&&(c=Object.assign(Object.assign({},c),{retentionPolicy:XO(i)})),c},YO=r=>{const{chatThread:n}=r,i=br(r,["chatThread"]);return n?Object.assign(Object.assign({},i),{chatThread:Ub(n)}):Object.assign({},i)},Ly=r=>{const{senderCommunicationIdentifier:n}=r,i=br(r,["senderCommunicationIdentifier"]);return Object.assign(Object.assign({},i),{sender:Ls(n)})};var By;(function(r){r.Unknown="unknown",r.CommunicationUser="communicationUser",r.PhoneNumber="phoneNumber",r.MicrosoftTeamsUser="microsoftTeamsUser",r.MicrosoftTeamsApp="microsoftTeamsApp"})(By||(By={}));var Hy;(function(r){r.Public="public",r.Dod="dod",r.Gcch="gcch"})(Hy||(Hy={}));var qy;(function(r){r.ThreadCreationDate="threadCreationDate",r.None="none"})(qy||(qy={}));const Ze=hb({namespace:"Azure.Communication",packageName:"@azure/communication-chat",packageVersion:"1.6.0"}),Cf={type:{name:"Composite",className:"ChatMessageReadReceiptsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessageReadReceipt"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},JO={type:{name:"Composite",className:"ChatMessageReadReceipt",modelProperties:{senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}},readOn:{serializedName:"readOn",required:!0,type:{name:"DateTime"}}}}},Db={type:{name:"Composite",className:"CommunicationIdentifierModel",modelProperties:{kind:{serializedName:"kind",type:{name:"String"}},rawId:{serializedName:"rawId",type:{name:"String"}},communicationUser:{serializedName:"communicationUser",type:{name:"Composite",className:"CommunicationUserIdentifierModel"}},phoneNumber:{serializedName:"phoneNumber",type:{name:"Composite",className:"PhoneNumberIdentifierModel"}},microsoftTeamsUser:{serializedName:"microsoftTeamsUser",type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel"}},microsoftTeamsApp:{serializedName:"microsoftTeamsApp",type:{name:"Composite",className:"MicrosoftTeamsAppIdentifierModel"}}}}},KO={type:{name:"Composite",className:"CommunicationUserIdentifierModel",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},QO={type:{name:"Composite",className:"PhoneNumberIdentifierModel",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"String"}}}}},WO={type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel",modelProperties:{userId:{serializedName:"userId",required:!0,type:{name:"String"}},isAnonymous:{serializedName:"isAnonymous",type:{name:"Boolean"}},cloud:{serializedName:"cloud",type:{name:"String"}}}}},ZO={type:{name:"Composite",className:"MicrosoftTeamsAppIdentifierModel",modelProperties:{appId:{serializedName:"appId",required:!0,type:{name:"String"}},cloud:{serializedName:"cloud",type:{name:"String"}}}}},Ue={type:{name:"Composite",className:"CommunicationErrorResponse",modelProperties:{error:{serializedName:"error",type:{name:"Composite",className:"ChatError"}}}}},e2={type:{name:"Composite",className:"ChatError",modelProperties:{code:{serializedName:"code",required:!0,type:{name:"String"}},message:{serializedName:"message",required:!0,type:{name:"String"}},target:{serializedName:"target",readOnly:!0,type:{name:"String"}},details:{serializedName:"details",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}},innerError:{serializedName:"innererror",type:{name:"Composite",className:"ChatError"}}}}},jb={type:{name:"Composite",className:"SendReadReceiptRequest",modelProperties:{chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}}}},Pb={type:{name:"Composite",className:"SendChatMessageRequest",modelProperties:{content:{serializedName:"content",required:!0,type:{name:"String"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},type:{serializedName:"type",type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},Ib={type:{name:"Composite",className:"SendChatMessageResult",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},Rf={type:{name:"Composite",className:"ChatMessagesCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessage"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},zb={type:{name:"Composite",className:"ChatMessage",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},type:{serializedName:"type",required:!0,type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},sequenceId:{serializedName:"sequenceId",required:!0,type:{name:"String"}},version:{serializedName:"version",required:!0,type:{name:"String"}},content:{serializedName:"content",type:{name:"Composite",className:"ChatMessageContent"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},editedOn:{serializedName:"editedOn",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},t2={type:{name:"Composite",className:"ChatMessageContent",modelProperties:{message:{serializedName:"message",type:{name:"String"}},topic:{serializedName:"topic",type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},attachments:{serializedName:"attachments",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatAttachment"}}}},initiatorCommunicationIdentifier:{serializedName:"initiatorCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}}}}},n2={type:{name:"Composite",className:"ChatParticipant",modelProperties:{communicationIdentifier:{serializedName:"communicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},displayName:{serializedName:"displayName",type:{name:"String"}},shareHistoryTime:{serializedName:"shareHistoryTime",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},r2={type:{name:"Composite",className:"ChatAttachment",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},attachmentType:{serializedName:"attachmentType",required:!0,type:{name:"Enum",allowedValues:["image","file"]}},name:{serializedName:"name",type:{name:"String"}},url:{serializedName:"url",type:{name:"String"}},previewUrl:{serializedName:"previewUrl",type:{name:"String"}}}}},Lb={type:{name:"Composite",className:"UpdateChatMessageRequest",modelProperties:{content:{serializedName:"content",type:{name:"String"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},Ef={type:{name:"Composite",className:"ChatParticipantsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Bb={type:{name:"Composite",className:"AddChatParticipantsRequest",modelProperties:{participants:{serializedName:"participants",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}}}}},Hb={type:{name:"Composite",className:"AddChatParticipantsResult",modelProperties:{invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},qb={type:{name:"Composite",className:"CreateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",required:!0,type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},vo={type:{name:"Composite",className:"ChatRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:{serializedName:"kind",clientName:"kind"},modelProperties:{kind:{serializedName:"kind",required:!0,type:{name:"String"}}}}},$b={type:{name:"Composite",className:"CreateChatThreadResult",modelProperties:{chatThread:{serializedName:"chatThread",type:{name:"Composite",className:"ChatThreadProperties"}},invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},Vb={type:{name:"Composite",className:"ChatThreadProperties",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},createdByCommunicationIdentifier:{serializedName:"createdByCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},_f={type:{name:"Composite",className:"ChatThreadsItemCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatThreadItem"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},i2={type:{name:"Composite",className:"ChatThreadItem",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},lastMessageReceivedOn:{serializedName:"lastMessageReceivedOn",readOnly:!0,type:{name:"DateTime"}}}}},Gb={type:{name:"Composite",className:"UpdateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",type:{name:"String"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},Fb={type:{name:"Composite",className:"SendTypingNotificationRequest",modelProperties:{senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}}}}},Xb={serializedName:"threadCreationDate",type:{name:"Composite",className:"ThreadCreationDateRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:vo.type.polymorphicDiscriminator,modelProperties:Object.assign(Object.assign({},vo.type.modelProperties),{deleteThreadAfterDays:{serializedName:"deleteThreadAfterDays",required:!0,type:{name:"Number"}}})}},Yb={serializedName:"none",type:{name:"Composite",className:"NoneRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:vo.type.polymorphicDiscriminator,modelProperties:Object.assign({},vo.type.modelProperties)}};let o2={ChatRetentionPolicy:vo,"ChatRetentionPolicy.threadCreationDate":Xb,"ChatRetentionPolicy.none":Yb};const Jb=Object.freeze(Object.defineProperty({__proto__:null,AddChatParticipantsRequest:Bb,AddChatParticipantsResult:Hb,ChatAttachment:r2,ChatError:e2,ChatMessage:zb,ChatMessageContent:t2,ChatMessageReadReceipt:JO,ChatMessageReadReceiptsCollection:Cf,ChatMessagesCollection:Rf,ChatParticipant:n2,ChatParticipantsCollection:Ef,ChatRetentionPolicy:vo,ChatThreadItem:i2,ChatThreadProperties:Vb,ChatThreadsItemCollection:_f,CommunicationErrorResponse:Ue,CommunicationIdentifierModel:Db,CommunicationUserIdentifierModel:KO,CreateChatThreadRequest:qb,CreateChatThreadResult:$b,MicrosoftTeamsAppIdentifierModel:ZO,MicrosoftTeamsUserIdentifierModel:WO,NoneRetentionPolicy:Yb,PhoneNumberIdentifierModel:QO,SendChatMessageRequest:Pb,SendChatMessageResult:Ib,SendReadReceiptRequest:jb,SendTypingNotificationRequest:Fb,ThreadCreationDateRetentionPolicy:Xb,UpdateChatMessageRequest:Lb,UpdateChatThreadRequest:Gb,discriminators:o2},Symbol.toStringTag,{value:"Module"})),Ut={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},Dt={parameterPath:"endpoint",mapper:{serializedName:"endpoint",required:!0,type:{name:"String"}},skipEncoding:!0},Xt={parameterPath:"chatThreadId",mapper:{serializedName:"chatThreadId",required:!0,type:{name:"String"}}},Hc={parameterPath:["options","maxPageSize"],mapper:{serializedName:"maxPageSize",type:{name:"Number"}}},Kb={parameterPath:["options","skip"],mapper:{serializedName:"skip",type:{name:"Number"}}},rn={parameterPath:"apiVersion",mapper:{defaultValue:"2025-03-15",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},_o={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},s2={parameterPath:"sendReadReceiptRequest",mapper:jb},a2={parameterPath:"sendChatMessageRequest",mapper:Pb},Qb={parameterPath:["options","startTime"],mapper:{serializedName:"startTime",type:{name:"DateTime"}}},xf={parameterPath:"chatMessageId",mapper:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}},Wb={parameterPath:["options","contentType"],mapper:{defaultValue:"application/merge-patch+json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},c2={parameterPath:"updateChatMessageRequest",mapper:Lb},l2={parameterPath:"participantCommunicationIdentifier",mapper:Db},u2={parameterPath:"addChatParticipantsRequest",mapper:Bb},d2={parameterPath:"updateChatThreadRequest",mapper:Gb},f2={parameterPath:["options","sendTypingNotificationRequest"],mapper:Fb},qc={parameterPath:"nextLink",mapper:{serializedName:"nextLink",required:!0,type:{name:"String"}},skipEncoding:!0},h2={parameterPath:"createChatThreadRequest",mapper:qb},p2={parameterPath:["options","repeatabilityRequestId"],mapper:{serializedName:"repeatability-request-id",type:{name:"String"}}};class m2{constructor(n){this.client=n}async listChatReadReceipts(n,i){return Ze.withSpan("ChatApiClient.listChatReadReceipts",i??{},async s=>this.client.sendOperationRequest({chatThreadId:n,options:s},g2))}async sendChatReadReceipt(n,i,s){return Ze.withSpan("ChatApiClient.sendChatReadReceipt",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,sendReadReceiptRequest:i,options:c},y2))}async sendChatMessage(n,i,s){return Ze.withSpan("ChatApiClient.sendChatMessage",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,sendChatMessageRequest:i,options:c},v2))}async listChatMessages(n,i){return Ze.withSpan("ChatApiClient.listChatMessages",i??{},async s=>this.client.sendOperationRequest({chatThreadId:n,options:s},b2))}async getChatMessage(n,i,s){return Ze.withSpan("ChatApiClient.getChatMessage",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,chatMessageId:i,options:c},S2))}async updateChatMessage(n,i,s,c){return Ze.withSpan("ChatApiClient.updateChatMessage",c??{},async l=>this.client.sendOperationRequest({chatThreadId:n,chatMessageId:i,updateChatMessageRequest:s,options:l},T2))}async deleteChatMessage(n,i,s){return Ze.withSpan("ChatApiClient.deleteChatMessage",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,chatMessageId:i,options:c},w2))}async listChatParticipants(n,i){return Ze.withSpan("ChatApiClient.listChatParticipants",i??{},async s=>this.client.sendOperationRequest({chatThreadId:n,options:s},C2))}async removeChatParticipant(n,i,s){return Ze.withSpan("ChatApiClient.removeChatParticipant",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,participantCommunicationIdentifier:i,options:c},R2))}async addChatParticipants(n,i,s){return Ze.withSpan("ChatApiClient.addChatParticipants",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,addChatParticipantsRequest:i,options:c},E2))}async updateChatThreadProperties(n,i,s){return Ze.withSpan("ChatApiClient.updateChatThreadProperties",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,updateChatThreadRequest:i,options:c},_2))}async getChatThreadProperties(n,i){return Ze.withSpan("ChatApiClient.getChatThreadProperties",i??{},async s=>this.client.sendOperationRequest({chatThreadId:n,options:s},x2))}async sendTypingNotification(n,i){return Ze.withSpan("ChatApiClient.sendTypingNotification",i??{},async s=>this.client.sendOperationRequest({chatThreadId:n,options:s},A2))}async listChatReadReceiptsNext(n,i,s){return Ze.withSpan("ChatApiClient.listChatReadReceiptsNext",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,nextLink:i,options:c},k2))}async listChatMessagesNext(n,i,s){return Ze.withSpan("ChatApiClient.listChatMessagesNext",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,nextLink:i,options:c},N2))}async listChatParticipantsNext(n,i,s){return Ze.withSpan("ChatApiClient.listChatParticipantsNext",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,nextLink:i,options:c},O2))}}const on=ff(Jb,!1),g2={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"GET",responses:{200:{bodyMapper:Cf},401:{bodyMapper:Ue,isError:!0},403:{bodyMapper:Ue,isError:!0},429:{bodyMapper:Ue,isError:!0},503:{bodyMapper:Ue,isError:!0}},queryParameters:[Hc,Kb,rn],urlParameters:[Dt,Xt],headerParameters:[Ut],serializer:on},y2={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"POST",responses:{200:{},401:{bodyMapper:Ue,isError:!0},403:{bodyMapper:Ue,isError:!0},429:{bodyMapper:Ue,isError:!0},503:{bodyMapper:Ue,isError:!0}},requestBody:s2,queryParameters:[rn],urlParameters:[Dt,Xt],headerParameters:[Ut,_o],mediaType:"json",serializer:on},v2={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"POST",responses:{201:{bodyMapper:Ib},401:{bodyMapper:Ue,isError:!0},403:{bodyMapper:Ue,isError:!0},429:{bodyMapper:Ue,isError:!0},503:{bodyMapper:Ue,isError:!0}},requestBody:a2,queryParameters:[rn],urlParameters:[Dt,Xt],headerParameters:[Ut,_o],mediaType:"json",serializer:on},b2={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"GET",responses:{200:{bodyMapper:Rf},401:{bodyMapper:Ue,isError:!0},403:{bodyMapper:Ue,isError:!0},429:{bodyMapper:Ue,isError:!0},503:{bodyMapper:Ue,isError:!0}},queryParameters:[Hc,rn,Qb],urlParameters:[Dt,Xt],headerParameters:[Ut],serializer:on},S2={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"GET",responses:{200:{bodyMapper:zb},401:{bodyMapper:Ue,isError:!0},403:{bodyMapper:Ue,isError:!0},429:{bodyMapper:Ue,isError:!0},503:{bodyMapper:Ue,isError:!0}},queryParameters:[rn],urlParameters:[Dt,Xt,xf],headerParameters:[Ut],serializer:on},T2={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:Ue,isError:!0},403:{bodyMapper:Ue,isError:!0},429:{bodyMapper:Ue,isError:!0},503:{bodyMapper:Ue,isError:!0}},requestBody:c2,queryParameters:[rn],urlParameters:[Dt,Xt,xf],headerParameters:[Ut,Wb],mediaType:"json",serializer:on},w2={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:Ue,isError:!0},403:{bodyMapper:Ue,isError:!0},429:{bodyMapper:Ue,isError:!0},503:{bodyMapper:Ue,isError:!0}},queryParameters:[rn],urlParameters:[Dt,Xt,xf],headerParameters:[Ut],serializer:on},C2={path:"/chat/threads/{chatThreadId}/participants",httpMethod:"GET",responses:{200:{bodyMapper:Ef},401:{bodyMapper:Ue,isError:!0},403:{bodyMapper:Ue,isError:!0},429:{bodyMapper:Ue,isError:!0},503:{bodyMapper:Ue,isError:!0}},queryParameters:[Hc,Kb,rn],urlParameters:[Dt,Xt],headerParameters:[Ut],serializer:on},R2={path:"/chat/threads/{chatThreadId}/participants/:remove",httpMethod:"POST",responses:{204:{},401:{bodyMapper:Ue,isError:!0},403:{bodyMapper:Ue,isError:!0},429:{bodyMapper:Ue,isError:!0},503:{bodyMapper:Ue,isError:!0}},requestBody:l2,queryParameters:[rn],urlParameters:[Dt,Xt],headerParameters:[Ut,_o],mediaType:"json",serializer:on},E2={path:"/chat/threads/{chatThreadId}/participants/:add",httpMethod:"POST",responses:{201:{bodyMapper:Hb},401:{bodyMapper:Ue,isError:!0},403:{bodyMapper:Ue,isError:!0},429:{bodyMapper:Ue,isError:!0},503:{bodyMapper:Ue,isError:!0}},requestBody:u2,queryParameters:[rn],urlParameters:[Dt,Xt],headerParameters:[Ut,_o],mediaType:"json",serializer:on},_2={path:"/chat/threads/{chatThreadId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:Ue,isError:!0},403:{bodyMapper:Ue,isError:!0},429:{bodyMapper:Ue,isError:!0},503:{bodyMapper:Ue,isError:!0}},requestBody:d2,queryParameters:[rn],urlParameters:[Dt,Xt],headerParameters:[Ut,Wb],mediaType:"json",serializer:on},x2={path:"/chat/threads/{chatThreadId}",httpMethod:"GET",responses:{200:{bodyMapper:Vb},401:{bodyMapper:Ue,isError:!0},403:{bodyMapper:Ue,isError:!0},429:{bodyMapper:Ue,isError:!0},503:{bodyMapper:Ue,isError:!0}},queryParameters:[rn],urlParameters:[Dt,Xt],headerParameters:[Ut],serializer:on},A2={path:"/chat/threads/{chatThreadId}/typing",httpMethod:"POST",responses:{200:{},401:{bodyMapper:Ue,isError:!0},403:{bodyMapper:Ue,isError:!0},429:{bodyMapper:Ue,isError:!0},503:{bodyMapper:Ue,isError:!0}},requestBody:f2,queryParameters:[rn],urlParameters:[Dt,Xt],headerParameters:[Ut,_o],mediaType:"json",serializer:on},k2={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Cf},401:{bodyMapper:Ue,isError:!0},403:{bodyMapper:Ue,isError:!0},429:{bodyMapper:Ue,isError:!0},503:{bodyMapper:Ue,isError:!0}},urlParameters:[Dt,Xt,qc],headerParameters:[Ut],serializer:on},N2={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Rf},401:{bodyMapper:Ue,isError:!0},403:{bodyMapper:Ue,isError:!0},429:{bodyMapper:Ue,isError:!0},503:{bodyMapper:Ue,isError:!0}},urlParameters:[Dt,Xt,qc],headerParameters:[Ut],serializer:on},O2={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Ef},401:{bodyMapper:Ue,isError:!0},403:{bodyMapper:Ue,isError:!0},429:{bodyMapper:Ue,isError:!0},503:{bodyMapper:Ue,isError:!0}},urlParameters:[Dt,Xt,qc],headerParameters:[Ut],serializer:on};class M2{constructor(n){this.client=n}async createChatThread(n,i){return Ze.withSpan("ChatApiClient.createChatThread",i??{},async s=>this.client.sendOperationRequest({createChatThreadRequest:n,options:s},U2))}async listChatThreads(n){return Ze.withSpan("ChatApiClient.listChatThreads",n??{},async i=>this.client.sendOperationRequest({options:i},D2))}async deleteChatThread(n,i){return Ze.withSpan("ChatApiClient.deleteChatThread",i??{},async s=>this.client.sendOperationRequest({chatThreadId:n,options:s},j2))}async listChatThreadsNext(n,i){return Ze.withSpan("ChatApiClient.listChatThreadsNext",i??{},async s=>this.client.sendOperationRequest({nextLink:n,options:s},P2))}}const $c=ff(Jb,!1),U2={path:"/chat/threads",httpMethod:"POST",responses:{201:{bodyMapper:$b},401:{bodyMapper:Ue,isError:!0},403:{bodyMapper:Ue,isError:!0},429:{bodyMapper:Ue,isError:!0},503:{bodyMapper:Ue,isError:!0}},requestBody:h2,queryParameters:[rn],urlParameters:[Dt],headerParameters:[Ut,_o,p2],mediaType:"json",serializer:$c},D2={path:"/chat/threads",httpMethod:"GET",responses:{200:{bodyMapper:_f},401:{bodyMapper:Ue,isError:!0},403:{bodyMapper:Ue,isError:!0},429:{bodyMapper:Ue,isError:!0},503:{bodyMapper:Ue,isError:!0}},queryParameters:[Hc,rn,Qb],urlParameters:[Dt],headerParameters:[Ut],serializer:$c},j2={path:"/chat/threads/{chatThreadId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:Ue,isError:!0},403:{bodyMapper:Ue,isError:!0},429:{bodyMapper:Ue,isError:!0},503:{bodyMapper:Ue,isError:!0}},queryParameters:[rn],urlParameters:[Dt,Xt],headerParameters:[Ut],serializer:$c},P2={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:_f},401:{bodyMapper:Ue,isError:!0},403:{bodyMapper:Ue,isError:!0},429:{bodyMapper:Ue,isError:!0},503:{bodyMapper:Ue,isError:!0}},urlParameters:[Dt,qc],headerParameters:[Ut],serializer:$c};class Zb extends Ab{constructor(n,i){var s,c;if(n===void 0)throw new Error("'endpoint' cannot be null");i||(i={});const l={requestContentType:"application/json; charset=utf-8"},d="azsdk-js-communication-chat/1.6.0",h=i.userAgentOptions&&i.userAgentOptions.userAgentPrefix?`${i.userAgentOptions.userAgentPrefix} ${d}`:`${d}`,p=Object.assign(Object.assign(Object.assign({},l),i),{userAgentOptions:{userAgentPrefix:h},endpoint:(c=(s=i.endpoint)!==null&&s!==void 0?s:i.baseUri)!==null&&c!==void 0?c:"{endpoint}"});super(p),this.endpoint=n,this.apiVersion=i.apiVersion||"2025-03-15",this.chatThread=new m2(this),this.chat=new M2(this),this.addCustomApiVersionPolicy(i.apiVersion)}addCustomApiVersionPolicy(n){if(!n)return;const i={name:"CustomApiVersionPolicy",async sendRequest(s,c){const l=s.url.split("?");if(l.length>1){const d=l[1].split("&").map(h=>h.indexOf("api-version")>-1?"api-version="+n:h);s.url=l[0]+"?"+d.join("&")}return c(s)}};this.pipeline.addPolicy(i)}}const _s=zc("communication-chat"),eS=r=>Bc({credential:{getToken:(i,s)=>r.getToken({abortSignal:s?.abortSignal})},scopes:[]}),I2=8e3;class z2{constructor(n,i,s,c={}){this.endpoint=n,this.timeOfLastTypingRequest=void 0,this.threadId=i,this.tokenCredential=s;const l=Object.assign(Object.assign({},c),{loggingOptions:{logger:_s.info}});this.client=new Zb(this.endpoint,Object.assign({endpoint:this.endpoint},l));const d=eS(this.tokenCredential);this.client.pipeline.addPolicy(d)}getProperties(n={}){return Ze.withSpan("ChatClient-GetProperties",n,async i=>{const s=await this.client.chatThread.getChatThreadProperties(this.threadId,i);return Ub(s)})}updateTopic(n,i={}){return Ze.withSpan("ChatThreadClient-UpdateTopic",i,async s=>{await this.client.chatThread.updateChatThreadProperties(this.threadId,{topic:n},s)})}updateProperties(n={}){return Ze.withSpan("ChatThreadClient-UpdateProperties",n,async i=>{await this.client.chatThread.updateChatThreadProperties(this.threadId,n,i)})}sendMessage(n,i={}){return Ze.withSpan("ChatThreadClient-SendMessage",i,async s=>(this.timeOfLastTypingRequest=void 0,await this.client.chatThread.sendChatMessage(this.threadId,Object.assign(Object.assign({},n),i),s)))}getMessage(n,i={}){return Ze.withSpan("ChatThreadClient-GetMessage",i,async s=>{const c=await this.client.chatThread.getChatMessage(this.threadId,n,s);return xd(c)})}listMessagesPage(n){return Fr(this,arguments,function*(s,c={}){if(!s.continuationToken){const l=yield ot(this.client.chatThread.listChatMessages(this.threadId,c));s.continuationToken=l.nextLink,l.value&&(yield yield ot(l.value.map(xd,this)))}for(;s.continuationToken;){const l=yield ot(this.client.chatThread.listChatMessagesNext(this.threadId,s.continuationToken,c));if(s.continuationToken=l.nextLink,l.value)yield yield ot(l.value.map(xd,this));else break}})}listMessagesAll(n){return Fr(this,arguments,function*(){var s,c,l,d;try{for(var h=!0,p=Xr(this.listMessagesPage({},n)),m;m=yield ot(p.next()),s=m.done,!s;h=!0)d=m.value,h=!1,yield ot(yield*hc(Xr(d)))}catch(y){c={error:y}}finally{try{!h&&!s&&(l=p.return)&&(yield ot(l.call(p)))}finally{if(c)throw c.error}}})}listMessages(n={}){const{span:i,updatedOptions:s}=Ze.startSpan("ChatThreadClient-ListMessages",n);try{const c=this.listMessagesAll(s);return{next(){return c.next()},[Symbol.asyncIterator](){return this},byPage:(l={})=>this.listMessagesPage(l,s)}}catch(c){throw i.setStatus({status:"error",error:c}),c}finally{i.end()}}deleteMessage(n,i={}){return Ze.withSpan("ChatThreadClient-DeleteMessage",i,async s=>{await this.client.chatThread.deleteChatMessage(this.threadId,n,s)})}async updateMessage(n,i={}){return Ze.withSpan("ChatThreadClient-UpdateMessage",i,async s=>{await this.client.chatThread.updateChatMessage(this.threadId,n,i,s)})}async addParticipants(n,i={}){return Ze.withSpan("ChatThreadClient-AddParticipants",i,async s=>await this.client.chatThread.addChatParticipants(this.threadId,GO(n),s))}listParticipantsPage(n){return Fr(this,arguments,function*(s,c={}){if(!s.continuationToken){const l=yield ot(this.client.chatThread.listChatParticipants(this.threadId,c));s.continuationToken=l.nextLink,l.value&&(yield yield ot(l.value.map(qd,this)))}for(;s.continuationToken;){const l=yield ot(this.client.chatThread.listChatParticipantsNext(this.threadId,s.continuationToken,c));if(s.continuationToken=l.nextLink,l.value)yield yield ot(l.value.map(qd,this));else break}})}listParticipantsAll(n){return Fr(this,arguments,function*(){var s,c,l,d;try{for(var h=!0,p=Xr(this.listParticipantsPage({},n)),m;m=yield ot(p.next()),s=m.done,!s;h=!0)d=m.value,h=!1,yield ot(yield*hc(Xr(d)))}catch(y){c={error:y}}finally{try{!h&&!s&&(l=p.return)&&(yield ot(l.call(p)))}finally{if(c)throw c.error}}})}listParticipants(n={}){const{span:i,updatedOptions:s}=Ze.startSpan("ChatThreadClient-ListParticipants",n);try{const c=this.listParticipantsAll(s);return{next(){return c.next()},[Symbol.asyncIterator](){return this},byPage:(l={})=>this.listParticipantsPage(l,s)}}catch(c){throw i.setStatus({status:"error",error:c}),c}finally{i.end()}}async removeParticipant(n,i={}){return Ze.withSpan("ChatThreadClient-RemoveParticipant",i,async s=>{await this.client.chatThread.removeChatParticipant(this.threadId,Ob(n),s)})}async sendTypingNotification(n={}){return Ze.withSpan("ChatThreadClient-SendTypingNotification",n,async i=>{const s=new Date,{senderDisplayName:c}=i,l=br(i,["senderDisplayName"]);return this.canPostTypingNotification(s)?(this.timeOfLastTypingRequest=s,await this.client.chatThread.sendTypingNotification(this.threadId,Object.assign({sendTypingNotificationRequest:{senderDisplayName:c}},l)),!0):(_s.info(`Typing Notification NOT Send. [thread_id=${this.threadId}]`),!1)})}async sendReadReceipt(n,i={}){return Ze.withSpan("ChatThreadClient-SendReadReceipt",i,async s=>{await this.client.chatThread.sendChatReadReceipt(this.threadId,n,s)})}listReadReceiptsPage(n){return Fr(this,arguments,function*(s,c={}){if(!s.continuationToken){const l=yield ot(this.client.chatThread.listChatReadReceipts(this.threadId,c));s.continuationToken=l.nextLink,l.value&&(yield yield ot(l.value.map(Ly,this)))}for(;s.continuationToken;){const l=yield ot(this.client.chatThread.listChatReadReceiptsNext(this.threadId,s.continuationToken,c));if(s.continuationToken=l.nextLink,l.value)yield yield ot(l.value.map(Ly,this));else break}})}listReadReceiptsAll(n){return Fr(this,arguments,function*(){var s,c,l,d;try{for(var h=!0,p=Xr(this.listReadReceiptsPage({},n)),m;m=yield ot(p.next()),s=m.done,!s;h=!0)d=m.value,h=!1,yield ot(yield*hc(Xr(d)))}catch(y){c={error:y}}finally{try{!h&&!s&&(l=p.return)&&(yield ot(l.call(p)))}finally{if(c)throw c.error}}})}listReadReceipts(n={}){const{span:i,updatedOptions:s}=Ze.startSpan("ChatThreadClient-ListChatReadReceipts",n);try{const c=this.listReadReceiptsAll(s);return{next(){return c.next()},[Symbol.asyncIterator](){return this},byPage:(l={})=>this.listReadReceiptsPage(l,s)}}catch(c){throw i.setStatus({status:"error",error:c}),c}finally{i.end()}}canPostTypingNotification(n){return this.timeOfLastTypingRequest&&n.getTime()-this.timeOfLastTypingRequest.getTime()<I2?(_s.info(`Typing interval check failed. [last_request=${this.timeOfLastTypingRequest}]`),!1):!0}}var ac={exports:{}},$y;function L2(){if($y)return ac.exports;$y=1;var r=typeof Reflect=="object"?Reflect:null,n=r&&typeof r.apply=="function"?r.apply:function(ae,ce,ie){return Function.prototype.apply.call(ae,ce,ie)},i;r&&typeof r.ownKeys=="function"?i=r.ownKeys:Object.getOwnPropertySymbols?i=function(ae){return Object.getOwnPropertyNames(ae).concat(Object.getOwnPropertySymbols(ae))}:i=function(ae){return Object.getOwnPropertyNames(ae)};function s(ne){console&&console.warn&&console.warn(ne)}var c=Number.isNaN||function(ae){return ae!==ae};function l(){l.init.call(this)}ac.exports=l,ac.exports.once=ye,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var d=10;function h(ne){if(typeof ne!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ne)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return d},set:function(ne){if(typeof ne!="number"||ne<0||c(ne))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ne+".");d=ne}}),l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(ae){if(typeof ae!="number"||ae<0||c(ae))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+ae+".");return this._maxListeners=ae,this};function p(ne){return ne._maxListeners===void 0?l.defaultMaxListeners:ne._maxListeners}l.prototype.getMaxListeners=function(){return p(this)},l.prototype.emit=function(ae){for(var ce=[],ie=1;ie<arguments.length;ie++)ce.push(arguments[ie]);var Re=ae==="error",xe=this._events;if(xe!==void 0)Re=Re&&xe.error===void 0;else if(!Re)return!1;if(Re){var Pe;if(ce.length>0&&(Pe=ce[0]),Pe instanceof Error)throw Pe;var Je=new Error("Unhandled error."+(Pe?" ("+Pe.message+")":""));throw Je.context=Pe,Je}var Ae=xe[ae];if(Ae===void 0)return!1;if(typeof Ae=="function")n(Ae,this,ce);else for(var Oe=Ae.length,Ce=U(Ae,Oe),ie=0;ie<Oe;++ie)n(Ce[ie],this,ce);return!0};function m(ne,ae,ce,ie){var Re,xe,Pe;if(h(ce),xe=ne._events,xe===void 0?(xe=ne._events=Object.create(null),ne._eventsCount=0):(xe.newListener!==void 0&&(ne.emit("newListener",ae,ce.listener?ce.listener:ce),xe=ne._events),Pe=xe[ae]),Pe===void 0)Pe=xe[ae]=ce,++ne._eventsCount;else if(typeof Pe=="function"?Pe=xe[ae]=ie?[ce,Pe]:[Pe,ce]:ie?Pe.unshift(ce):Pe.push(ce),Re=p(ne),Re>0&&Pe.length>Re&&!Pe.warned){Pe.warned=!0;var Je=new Error("Possible EventEmitter memory leak detected. "+Pe.length+" "+String(ae)+" listeners added. Use emitter.setMaxListeners() to increase limit");Je.name="MaxListenersExceededWarning",Je.emitter=ne,Je.type=ae,Je.count=Pe.length,s(Je)}return ne}l.prototype.addListener=function(ae,ce){return m(this,ae,ce,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(ae,ce){return m(this,ae,ce,!0)};function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(ne,ae,ce){var ie={fired:!1,wrapFn:void 0,target:ne,type:ae,listener:ce},Re=y.bind(ie);return Re.listener=ce,ie.wrapFn=Re,Re}l.prototype.once=function(ae,ce){return h(ce),this.on(ae,_(this,ae,ce)),this},l.prototype.prependOnceListener=function(ae,ce){return h(ce),this.prependListener(ae,_(this,ae,ce)),this},l.prototype.removeListener=function(ae,ce){var ie,Re,xe,Pe,Je;if(h(ce),Re=this._events,Re===void 0)return this;if(ie=Re[ae],ie===void 0)return this;if(ie===ce||ie.listener===ce)--this._eventsCount===0?this._events=Object.create(null):(delete Re[ae],Re.removeListener&&this.emit("removeListener",ae,ie.listener||ce));else if(typeof ie!="function"){for(xe=-1,Pe=ie.length-1;Pe>=0;Pe--)if(ie[Pe]===ce||ie[Pe].listener===ce){Je=ie[Pe].listener,xe=Pe;break}if(xe<0)return this;xe===0?ie.shift():Z(ie,xe),ie.length===1&&(Re[ae]=ie[0]),Re.removeListener!==void 0&&this.emit("removeListener",ae,Je||ce)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(ae){var ce,ie,Re;if(ie=this._events,ie===void 0)return this;if(ie.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):ie[ae]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete ie[ae]),this;if(arguments.length===0){var xe=Object.keys(ie),Pe;for(Re=0;Re<xe.length;++Re)Pe=xe[Re],Pe!=="removeListener"&&this.removeAllListeners(Pe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(ce=ie[ae],typeof ce=="function")this.removeListener(ae,ce);else if(ce!==void 0)for(Re=ce.length-1;Re>=0;Re--)this.removeListener(ae,ce[Re]);return this};function z(ne,ae,ce){var ie=ne._events;if(ie===void 0)return[];var Re=ie[ae];return Re===void 0?[]:typeof Re=="function"?ce?[Re.listener||Re]:[Re]:ce?X(Re):U(Re,Re.length)}l.prototype.listeners=function(ae){return z(this,ae,!0)},l.prototype.rawListeners=function(ae){return z(this,ae,!1)},l.listenerCount=function(ne,ae){return typeof ne.listenerCount=="function"?ne.listenerCount(ae):F.call(ne,ae)},l.prototype.listenerCount=F;function F(ne){var ae=this._events;if(ae!==void 0){var ce=ae[ne];if(typeof ce=="function")return 1;if(ce!==void 0)return ce.length}return 0}l.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function U(ne,ae){for(var ce=new Array(ae),ie=0;ie<ae;++ie)ce[ie]=ne[ie];return ce}function Z(ne,ae){for(;ae+1<ne.length;ae++)ne[ae]=ne[ae+1];ne.pop()}function X(ne){for(var ae=new Array(ne.length),ce=0;ce<ae.length;++ce)ae[ce]=ne[ce].listener||ne[ce];return ae}function ye(ne,ae){return new Promise(function(ce,ie){function Re(Pe){ne.removeListener(ae,xe),ie(Pe)}function xe(){typeof ne.removeListener=="function"&&ne.removeListener("error",Re),ce([].slice.call(arguments))}ue(ne,ae,xe,{once:!0}),ae!=="error"&&he(ne,Re,{once:!0})})}function he(ne,ae,ce){typeof ne.on=="function"&&ue(ne,"error",ae,ce)}function ue(ne,ae,ce,ie){if(typeof ne.on=="function")ie.once?ne.once(ae,ce):ne.on(ae,ce);else if(typeof ne.addEventListener=="function")ne.addEventListener(ae,function Re(xe){ie.once&&ne.removeEventListener(ae,Re),ce(xe)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ne)}return ac.exports}var B2=L2();function H2(){return a0()}const q2=(r,n,i)=>{var s,c,l,d;return new Bd.CommunicationSignalingClient(r,n,{resourceEndpoint:(s=i?.resourceEndpoint)!==null&&s!==void 0?s:void 0,gatewayApiVersion:(c=i?.gatewayApiVersion)!==null&&c!==void 0?c:void 0,additionalPolicies:(l=i?.additionalPolicies)!==null&&l!==void 0?l:void 0,userAgentOptions:(d=i?.userAgentOptions)!==null&&d!==void 0?d:void 0})};class $2{constructor(n,i,s={}){this.endpoint=n,this.signalingClient=void 0,this.emitter=new B2.EventEmitter,this.isRealtimeNotificationsStarted=!1,this.tokenCredential=i;const c=Object.assign(Object.assign({},s),{loggingOptions:{logger:_s.info}});this.client=new Zb(this.endpoint,Object.assign({endpoint:this.endpoint},c));const l=eS(this.tokenCredential);this.client.pipeline.addPolicy(l),this.clientOptions=Object.assign({},s),this.clientOptions.signalingClientOptions=Object.assign(Object.assign({},this.clientOptions.signalingClientOptions),{resourceEndpoint:this.endpoint,gatewayApiVersion:this.client.apiVersion}),this.signalingClient=q2(i,_s,this.clientOptions.signalingClientOptions)}getChatThreadClient(n){return new z2(this.endpoint,n,this.tokenCredential,this.clientOptions)}async createChatThread(n,i={}){return Ze.withSpan("ChatClient-CreateChatThread",i,async s=>{var c,l;s.idempotencyToken=(c=s.idempotencyToken)!==null&&c!==void 0?c:H2();const d=VO(s),h=await this.client.chat.createChatThread({topic:n.topic,participants:(l=i.participants)===null||l===void 0?void 0:l.map(p=>Mb(p)),metadata:i.metadata,retentionPolicy:i.retentionPolicy},d);return YO(h)})}listChatThreadsPage(n){return Fr(this,arguments,function*(s,c={}){if(!s.continuationToken){const l=yield ot(this.client.chat.listChatThreads(c));s.continuationToken=l.nextLink,l.value&&(yield yield ot(l.value))}for(;s.continuationToken;){const l=yield ot(this.client.chat.listChatThreadsNext(s.continuationToken,c));if(s.continuationToken=l.nextLink,l.value)yield yield ot(l.value);else break}})}listChatThreadsAll(n){return Fr(this,arguments,function*(){var s,c,l,d;try{for(var h=!0,p=Xr(this.listChatThreadsPage({},n)),m;m=yield ot(p.next()),s=m.done,!s;h=!0)d=m.value,h=!1,yield ot(yield*hc(Xr(d)))}catch(y){c={error:y}}finally{try{!h&&!s&&(l=p.return)&&(yield ot(l.call(p)))}finally{if(c)throw c.error}}})}listChatThreads(n={}){const{span:i,updatedOptions:s}=Ze.startSpan("ChatClient-ListChatThreads",n);try{const c=this.listChatThreadsAll(s);return{next(){return c.next()},[Symbol.asyncIterator](){return this},byPage:(l={})=>this.listChatThreadsPage(l,s)}}catch(c){throw i.setStatus({error:c,status:"error"}),c}finally{i.end()}}async deleteChatThread(n,i={}){return Ze.withSpan("ChatClient-DeleteChatThread",i,async s=>{await this.client.chat.deleteChatThread(n,s)})}async startRealtimeNotifications(){if(this.signalingClient===void 0)throw new Error("Realtime notifications are not supported in node js.");this.isRealtimeNotificationsStarted||(this.isRealtimeNotificationsStarted=!0,await this.signalingClient.start(),this.subscribeToSignalingEvents())}async stopRealtimeNotifications(){if(this.signalingClient===void 0)throw new Error("Realtime notifications are not supported in node js.");this.isRealtimeNotificationsStarted=!1,await this.signalingClient.stop(),this.emitter.removeAllListeners()}on(n,i){if(this.signalingClient===void 0)throw new Error("Realtime notifications are only supported in the browser.");if(!this.isRealtimeNotificationsStarted&&n!=="realTimeNotificationConnected"&&n!=="realTimeNotificationDisconnected")throw new Error("You must call startRealtimeNotifications before you can subscribe to events.");this.emitter.on(n,i)}off(n,i){if(this.signalingClient===void 0)throw new Error("Realtime notifications are only supported in the browser.");this.emitter.removeListener(n,i)}subscribeToSignalingEvents(){if(this.signalingClient===void 0)throw new Error("Realtime notifications are only supported in the browser.");this.signalingClient.on("connectionChanged",n=>{n===Bd.ConnectionState.Connected?this.emitter.emit("realTimeNotificationConnected"):n===Bd.ConnectionState.Disconnected&&this.emitter.emit("realTimeNotificationDisconnected")}),this.signalingClient.on("chatMessageReceived",n=>{this.emitter.emit("chatMessageReceived",n)}),this.signalingClient.on("chatMessageEdited",n=>{this.emitter.emit("chatMessageEdited",n)}),this.signalingClient.on("chatMessageDeleted",n=>{this.emitter.emit("chatMessageDeleted",n)}),this.signalingClient.on("typingIndicatorReceived",n=>{this.emitter.emit("typingIndicatorReceived",n)}),this.signalingClient.on("readReceiptReceived",n=>{this.emitter.emit("readReceiptReceived",n)}),this.signalingClient.on("chatThreadCreated",n=>{this.emitter.emit("chatThreadCreated",n)}),this.signalingClient.on("chatThreadDeleted",n=>{this.emitter.emit("chatThreadDeleted",n)}),this.signalingClient.on("chatThreadPropertiesUpdated",n=>{this.emitter.emit("chatThreadPropertiesUpdated",n)}),this.signalingClient.on("participantsAdded",n=>{this.emitter.emit("participantsAdded",n)}),this.signalingClient.on("participantsRemoved",n=>{this.emitter.emit("participantsRemoved",n)})}}function V2(){const{recipientId:r}=sC(),n=wo(),[i,s]=q.useState(null),[c,l]=q.useState(null),[d,h]=q.useState(null),[p,m]=q.useState([]),[y,_]=q.useState(""),[z,F]=q.useState(!0),[U,Z]=q.useState(!1),[X,ye]=q.useState(null),he=localStorage.getItem("userId"),ue=q.useRef(null),ne=q.useRef(!1),ae=q.useRef(null),ce=q.useRef(null),ie=q.useRef(null),Re=(Oe,Ce="success")=>{ye({message:Oe,type:Ce}),Ce==="success"&&setTimeout(()=>{ye(Be=>Be?{...Be,hiding:!0}:null),setTimeout(()=>ye(null),300)},3e3)},xe=Oe=>{console.log("Real-time message event received:",Oe),Oe.threadId===ce.current&&Oe.sender.communicationUserId!==ie.current&&m(Ce=>Ce.find(Be=>Be.id===Oe.id)?Ce:[...Ce,{id:Oe.id,sender:"Recipient",text:Oe.message,timestamp:new Date}])};q.useEffect(()=>(he&&r&&!ne.current&&(ne.current=!0,Je()),()=>{ae.current&&(console.log("Cleaning up chat real-time notifications..."),ae.current.off("chatMessageReceived",xe),ae.current.stopRealtimeNotifications().catch(console.error),ae.current=null)}),[he,r]),q.useEffect(()=>{Pe()},[p]);const Pe=()=>{ue.current?.scrollIntoView({behavior:"smooth"})},Je=async()=>{try{F(!0),console.log("Initializing chat for user:",he,"with recipient:",r),console.log("Fetching chat token...");const Oe=await ht.get("issuechattoken",{params:{userId:he}}),{token:Ce,user:Be}=Oe.data;s(Ce),ie.current=Be.communicationUserId,console.log("Token received for ACS ID:",Be.communicationUserId);const G=new PO(Ce),D=new $2("https://acs-festive-guest.india.communication.azure.com/",G);ae.current=D,l(D),console.log("Getting or creating chat thread...");const P=(await ht.post("getorcreatechatthread",{userId:he,recipientId:r})).data.threadId;console.log("Thread ID received:",P),ce.current=P,h(P),console.log("Loading message history...");const T=D.getChatThreadClient(P).listMessages(),j=[];for await(const C of T)C.type==="text"&&j.push({id:C.id,sender:C.sender.communicationUserId===Be.communicationUserId?"Me":"Recipient",text:C.content.message,timestamp:C.createdOn});m(j.reverse()),console.log("Starting real-time notifications..."),await D.startRealtimeNotifications(),D.on("chatMessageReceived",xe),console.log("Chat initialization complete.")}catch(Oe){console.error("Failed to init chat:",Oe),Re("Failed to initialize chat: "+(Oe.response?.data?.error||Oe.message),"error")}finally{F(!1)}},Ae=async Oe=>{if(Oe.preventDefault(),!!y.trim()){if(!ae.current||!ce.current){Re("Chat not fully initialized. Please wait...","error");return}try{Z(!0);const Ce=ae.current.getChatThreadClient(ce.current),Be=y;console.log("Attempting to send message to ACS...");const G=await Ce.sendMessage({content:Be});console.log("Message sent successfully. ID:",G.id),_(""),m(D=>D.find(J=>J.id===G.id)?D:[...D,{id:G.id,sender:"Me",text:Be,timestamp:new Date}])}catch(Ce){console.error("Failed to send message:",Ce),Re("Failed to send message: "+Ce.message,"error")}finally{Z(!1)}}};return z?g.jsxs("div",{className:"container",style:{textAlign:"center",padding:"5rem"},children:[g.jsx("div",{className:"spinner"}),g.jsx("p",{children:"Initializing secure chat..."})]}):g.jsxs("div",{className:"modern-chat-page",children:[X&&g.jsx("div",{className:"toast-container",children:g.jsxs("div",{className:`toast ${X.type} ${X.hiding?"hiding":""}`,children:[g.jsx("span",{className:"toast-icon",children:X.type==="success"?"":X.type==="error"?"":""}),g.jsx("div",{className:"toast-content",children:g.jsx("p",{className:"toast-message",children:X.message})}),X.type!=="success"&&g.jsx("button",{onClick:()=>ye(null),style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.5rem"},children:""})]})}),g.jsxs("div",{className:"chat-window-full",children:[g.jsx("div",{className:"chat-header-full",children:g.jsxs("div",{className:"chat-user-info-full",children:[g.jsx("button",{onClick:()=>n(-1),className:"back-btn-modern",title:"Go Back",children:g.jsx(lv,{size:20})}),g.jsx("div",{className:"user-avatar",children:""}),g.jsxs("div",{className:"user-details",children:[g.jsx("h3",{children:"Secure Chat"}),g.jsx("span",{className:"user-status",children:" Online"})]})]})}),g.jsxs("div",{className:"chat-messages",children:[p.map((Oe,Ce)=>g.jsxs("div",{className:`message-bubble ${Oe.sender==="Me"?"sent":"received"}`,children:[g.jsx("div",{className:"message-content",children:Oe.text}),g.jsx("div",{className:"message-time",children:new Date(Oe.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},Oe.id||Ce)),g.jsx("div",{ref:ue})]}),g.jsxs("form",{onSubmit:Ae,className:"chat-input",children:[g.jsx("input",{type:"text",value:y,onChange:Oe=>_(Oe.target.value),placeholder:"Type a message...",className:"message-input"}),g.jsx("button",{type:"submit",className:"send-btn",disabled:U,children:U?g.jsx("span",{className:"spinner-small"}):g.jsx(Qd,{size:20})})]})]})]})}const G2=()=>{const[r,n]=q.useState([]),[i,s]=q.useState(null),[c,l]=q.useState([]),[d,h]=q.useState(""),[p,m]=q.useState(!1),[y,_]=q.useState(!1),[z,F]=q.useState(!1),U=localStorage.getItem("userId"),Z=q.useRef(null);q.useEffect(()=>{X()},[]),q.useEffect(()=>{Z.current?.scrollIntoView({behavior:"auto"})},[c]);const X=async()=>{try{m(!0);const ce=await ht.get("chat/conversations");n(ce.data||[])}catch(ce){console.error("Failed to fetch conversations:",ce)}finally{m(!1)}},ye=async ce=>{s(ce),l([]),await he(ce.otherUserId),F(!0)},he=async ce=>{try{const Re=(await ht.get(`chat/messages/${ce}`)).data.map(xe=>({id:xe.id,sender:xe.senderId===U?"Me":"Recipient",text:xe.message,timestamp:new Date(xe.timestamp),status:xe.status}));l(Re)}catch(ie){console.error("Failed to load messages:",ie)}},ue=()=>{F(!1),s(null)},ne=async ce=>{if(ce.preventDefault(),!(!d.trim()||!i))try{_(!0);const ie=d;h(""),l(Re=>[...Re,{id:Date.now(),sender:"Me",text:ie,timestamp:new Date,status:"Sent"}]),await pn.sendMessage(i.otherUserId,ie)}catch(ie){console.error("Failed to send message:",ie)}finally{_(!1)}},ae=ce=>{const ie=new Date(ce),xe=new Date-ie;return Math.floor(xe/(1e3*60*60))<24?ie.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):ie.toLocaleDateString([],{month:"short",day:"numeric"})};return g.jsxs("div",{className:"chats-container",children:[g.jsxs("div",{className:`conversations-sidebar ${z?"mobile-hidden":""}`,children:[g.jsx("div",{className:"sidebar-header",children:g.jsx("h3",{children:" Messages"})}),g.jsx("div",{className:"conversations-list",children:p?g.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:"Loading..."}):r.length===0?g.jsx("div",{className:"no-conversations",children:g.jsx("p",{children:"No conversations yet"})}):r.map(ce=>g.jsxs("div",{className:`conversation-item ${i?.otherUserId===ce.otherUserId?"active":""}`,onClick:()=>ye(ce),children:[g.jsx("div",{className:"conversation-avatar",children:ce.profileImageUrl?g.jsx("img",{src:ce.profileImageUrl,alt:ce.otherUserName,style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}):g.jsx("span",{children:""})}),g.jsxs("div",{className:"conversation-content",children:[g.jsxs("div",{className:"conversation-header",children:[g.jsx("div",{className:"conversation-name",children:ce.otherUserName}),g.jsx("div",{className:"conversation-time",children:ae(ce.timestamp)})]}),g.jsxs("div",{className:"conversation-preview",children:[ce.lastSenderId===U?"You: ":"",ce.lastMessage||"Start chatting"]})]}),ce.unreadCount>0&&g.jsx("div",{style:{minWidth:"20px",height:"20px",borderRadius:"10px",background:"#6366f1",color:"white",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 6px"},children:ce.unreadCount})]},ce.chatRoom))})]}),g.jsx("div",{className:`chat-window ${z?"mobile-visible":""}`,children:i?g.jsxs(g.Fragment,{children:[g.jsxs("div",{className:"chat-header",children:[g.jsx("button",{className:"mobile-back-btn",onClick:ue,children:g.jsx(lv,{size:20})}),g.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[g.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#e2e8f0",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:i.profileImageUrl?g.jsx("img",{src:i.profileImageUrl,alt:i.otherUserName,style:{width:"100%",height:"100%",objectFit:"cover"}}):g.jsx("span",{children:""})}),g.jsx("h4",{style:{margin:0},children:i.otherUserName})]})]}),g.jsxs("div",{className:"chat-messages",children:[c.map((ce,ie)=>g.jsxs("div",{className:`message ${ce.sender==="Me"?"sent":"received"}`,children:[g.jsx("div",{className:"message-content",children:ce.text}),g.jsxs("div",{className:"message-time",children:[new Date(ce.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),ce.sender==="Me"&&ce.status&&g.jsxs("span",{style:{marginLeft:"4px",fontSize:"10px"},children:[" ",ce.status]})]})]},ce.id||ie)),g.jsx("div",{ref:Z})]}),g.jsxs("form",{onSubmit:ne,className:"chat-input",children:[g.jsx("input",{type:"text",value:d,onChange:ce=>h(ce.target.value),placeholder:"Type a message...",className:"message-input"}),g.jsx("button",{type:"submit",className:"send-btn",disabled:y,children:g.jsx(Qd,{size:16})})]})]}):g.jsxs("div",{className:"no-chat-selected",children:[g.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),g.jsx("h3",{children:"Select a conversation"}),g.jsx("p",{children:"Choose a conversation from the list to start chatting"})]})})]})};function F2(){const[r,n]=q.useState([]),[i,s]=q.useState(!0),[c,l]=q.useState(!1),[d,h]=q.useState(""),[p,m]=q.useState(!1);q.useEffect(()=>{y()},[]);const y=async()=>{try{const U=await ht.get("listpayments");n(U.data)}catch{console.error("Failed to fetch payments")}finally{s(!1)}},_=async()=>{m(!0);try{const U=await ht.post("seedlocations"),Z=await ht.get("getlocations");h(` APIs working! Seeded: ${U.data.count} locations. Retrieved: ${Object.keys(Z.data).length} states.`)}catch(U){h(` API Error: ${U.message}`)}finally{m(!1)}},z=async()=>{l(!0);try{const U=await _E.seedLocations();alert(`Locations seeded successfully! ${U.count} locations added.`)}catch(U){alert("Failed to seed locations: "+U.message)}finally{l(!1)}},F=async(U,Z)=>{try{await ht.post("verifypayment",{paymentId:U,userId:Z}),alert("Payment verified and user updated!"),y()}catch(X){alert("Verification failed: "+X.message)}};return g.jsxs("div",{className:"admin-container",children:[g.jsx("h2",{children:"Admin Dashboard"}),g.jsxs("div",{className:"admin-section",style:{marginBottom:"2rem",padding:"1rem",border:"1px solid #e2e8f0",borderRadius:"0.5rem"},children:[g.jsx("h3",{children:"Location Management"}),g.jsx("p",{children:"Test and seed the locations table with initial data."}),g.jsxs("div",{style:{marginBottom:"1rem"},children:[g.jsx("button",{className:"btn btn-secondary",onClick:_,disabled:p,style:{marginRight:"1rem"},children:p?"Testing APIs...":"Test Location APIs"}),g.jsx("button",{className:"btn btn-primary",onClick:z,disabled:c,children:c?"Seeding Locations...":"Seed Locations Table"})]}),d&&g.jsx("div",{style:{padding:"0.5rem",background:d.includes("")?"#d1fae5":"#fee2e2",borderRadius:"0.25rem",fontSize:"0.9rem"},children:d})]}),g.jsxs("div",{className:"admin-section",children:[g.jsx("h3",{children:"Verify Payments"}),i?g.jsx("p",{children:"Loading..."}):g.jsx("div",{className:"payment-list",children:g.jsxs("table",{className:"admin-table",children:[g.jsx("thead",{children:g.jsxs("tr",{children:[g.jsx("th",{children:"User ID"}),g.jsx("th",{children:"Type"}),g.jsx("th",{children:"UPI Ref"}),g.jsx("th",{children:"Amount"}),g.jsx("th",{children:"Action"})]})}),g.jsx("tbody",{children:r.length>0?r.map(U=>g.jsxs("tr",{children:[g.jsx("td",{children:U.partitionKey}),g.jsx("td",{children:U.type}),g.jsx("td",{children:U.upiRef}),g.jsxs("td",{children:["",U.amount]}),g.jsx("td",{children:g.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>F(U.rowKey,U.partitionKey),children:"Verify"})})]},U.rowKey)):g.jsx("tr",{children:g.jsx("td",{colSpan:"5",style:{textAlign:"center"},children:"No pending payments"})})})]})})]})]})}function X2(){const[r,n]=q.useState(null),[i,s]=q.useState(null),[c,l]=q.useState(""),d=localStorage.getItem("userId");q.useEffect(()=>{d&&h()},[d]);const h=async()=>{try{let z=(await ht.get("user/profile")).data;const F=JSON.parse(localStorage.getItem("user")),U={...z,token:F?.token,role:z.userType||F?.role};n(U),localStorage.setItem("user",JSON.stringify(U)),window.dispatchEvent(new Event("storage"))}catch{console.error("User not found")}},p=_=>{const z=_.target.files[0];z&&(s(z),l(URL.createObjectURL(z)))},m=async()=>{if(!i||!r){alert("Please select a file and ensure your profile is loaded before uploading.");return}try{console.log("Step 1: Compressing image...");const _=await y(i);console.log("Step 2: Getting SAS token from API...");const z=await ht.get("user/upload-sas-token");console.log("SAS token response:",z.data);const{sasUrl:F}=z.data;console.log("Step 3: Uploading to blob storage...",F);const U=await fetch(F,{method:"PUT",headers:{"x-ms-blob-type":"BlockBlob","Content-Type":"image/jpeg"},body:_});if(console.log("Upload response status:",U.status),!U.ok)throw new Error(`Upload failed: ${U.status} ${U.statusText}`);console.log("Step 4: Confirming upload with API...");const Z=F.split("?")[0];await ht.post("user/confirm-upload",{imageUrl:Z}),alert("Profile image uploaded successfully!"),s(null),l(""),await h()}catch(_){console.error("Upload failed:",_),console.error("Error details:",_.response?.data),alert("Image upload failed: "+(_.response?.data?.error||_.message))}},y=_=>new Promise(z=>{const F=document.createElement("canvas"),U=F.getContext("2d"),Z=new Image;Z.onload=()=>{let{width:X,height:ye}=Z;const he=800;X>ye?X>he&&(ye=ye*he/X,X=he):ye>he&&(X=X*he/ye,ye=he),F.width=X,F.height=ye,U.drawImage(Z,0,0,X,ye),F.toBlob(ue=>{z(ue)},"image/jpeg",.8)},Z.src=URL.createObjectURL(_)});return r?g.jsxs("div",{className:"profile-container",children:[g.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[g.jsx("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:" My Profile"}),g.jsx("p",{style:{color:"#64748b",margin:"0"},children:"View your profile information"})]}),g.jsxs("div",{className:"profile-card",children:[g.jsxs("div",{className:"profile-image-section",children:[g.jsx("img",{src:c||r.profileImageUrl||"https://via.placeholder.com/150",alt:"Profile",className:"profile-img-preview"}),g.jsxs("div",{style:{marginTop:"0.75rem",display:"flex",gap:"0.5rem",justifyContent:"center"},children:[g.jsx("input",{type:"file",accept:"image/*",onChange:p}),g.jsx("button",{className:"btn btn-primary",onClick:m,disabled:!i,children:"Upload"})]}),g.jsx("p",{style:{color:"#64748b",fontSize:"0.875rem",textAlign:"center"},children:"Upload a profile photo"})]}),g.jsx("div",{className:"profile-details",children:g.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[g.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #3b82f6"},children:g.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx("strong",{children:" Email:"})," ",r.email]})}),g.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #ef4444"},children:g.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx("strong",{children:" Phone:"})," ",r.phone]})}),g.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #6366f1"},children:g.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx("strong",{children:" Name:"})," ",r.name]})}),g.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #10b981"},children:g.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx("strong",{children:" Role:"})," ",r.userType==="Host"?" Host":" Guest"]})}),g.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #f59e0b"},children:g.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx("strong",{children:" Location:"})," ",r.location]})}),g.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #ec4899"},children:g.jsxs("p",{style:{margin:"0",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[g.jsx("strong",{children:r.userType==="Host"?" My Offerings:":" My Festival Wishes:"}),g.jsx("span",{style:{color:"#475569",fontSize:"0.95rem",lineHeight:"1.5"},children:r.bio||"Not specified"})]})}),g.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #f59e0b"},children:g.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx("strong",{children:" Status:"}),g.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.875rem",background:r.status==="Active"?"#dcfce7":"#fef3c7",color:r.status==="Active"?"#166534":"#92400e"},children:r.status})]})}),g.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #8b5cf6"},children:g.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx("strong",{children:" Contact Enabled:"}),g.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.875rem",background:r.isVerified?"#dcfce7":"#fee2e2",color:r.isVerified?"#166534":"#dc2626"},children:r.isVerified?" Yes":" No"})]})})]})})]})]}):g.jsxs("div",{className:"profile-container text-center",style:{padding:"3rem"},children:[g.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),g.jsx("h3",{children:"Profile Not Found"}),g.jsx("p",{style:{color:"#64748b"},children:"Please register or login first to view your profile."})]})}const Y2=()=>{const r=()=>{window.open("https://wa.me/919966888484","_blank","noopener,noreferrer")};return g.jsx("div",{className:"help-page",children:g.jsxs("div",{className:"help-container",children:[g.jsxs("div",{className:"help-header",children:[g.jsx(mc,{size:48,className:"help-icon",style:{color:"var(--primary)"}}),g.jsxs("h1",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem"},children:[g.jsx(Wd,{size:32,style:{color:"var(--primary)"}}),"Help & Support"]}),g.jsx("p",{children:"We're here to help you with any questions or issues you may have."})]}),g.jsxs("div",{className:"help-content",children:[g.jsxs("div",{className:"help-card",children:[g.jsx(qg,{size:32,className:"card-icon",style:{color:"var(--primary)"}}),g.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx(m1,{size:20}),"Email Support"]}),g.jsx("p",{children:"Send us an email and we'll get back to you as soon as possible."}),g.jsxs("a",{href:"mailto:support@festiveguest.com",className:"btn btn-outline",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx(qg,{size:16}),"Customer Support"]})]}),g.jsxs("div",{className:"help-card",children:[g.jsx(gc,{size:32,className:"card-icon",style:{color:"#25D366"}}),g.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx(O1,{size:20}),"WhatsApp Support"]}),g.jsx("p",{children:"Chat with our support team directly for quick assistance."}),g.jsxs("button",{onClick:r,className:"btn btn-primary whatsapp-btn",style:{cursor:"pointer",border:"none",display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx(gc,{size:16}),"Chat on WhatsApp"]})]})]}),g.jsxs("div",{className:"faq-section",children:[g.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[g.jsx(mc,{size:28,style:{color:"var(--primary)"}}),"Frequently Asked Questions"]}),g.jsxs("div",{className:"faq-item",children:[g.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx(f1,{size:20,style:{color:"var(--success)"}}),"How do I become a host?"]}),g.jsx("p",{children:'Go to the registration page, select "Become a Host", and fill out your profile details.'})]}),g.jsxs("div",{className:"faq-item",children:[g.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx(u1,{size:20,style:{color:"var(--warning)"}}),"Is it free to use?"]}),g.jsx("p",{children:"Registration is free for both guests and hosts. Specific festival experiences may have their own terms."})]})]})]})})},J2=()=>{const[r,n]=q.useState(!0),[i,s]=q.useState(!1),[c,l]=q.useState(()=>{try{const F=localStorage.getItem("user");if(F){const U=JSON.parse(F);if(U&&U.token&&U.email&&(U.role||U.userType))return U}}catch{console.warn("Invalid user data in localStorage"),localStorage.removeItem("user")}return null}),{unreadCount:d,clearUnreadCount:h}=q1(),p=Qn();q.useEffect(()=>{const F=setTimeout(()=>{n(!1)},3e3),U=()=>{try{const Z=localStorage.getItem("user");if(Z){const X=JSON.parse(Z);X&&X.token&&X.email&&(X.role||X.userType)?l(X):l(null)}else l(null)}catch{console.warn("Invalid user data in localStorage"),localStorage.removeItem("user"),l(null)}};return window.addEventListener("storage",U),()=>{clearTimeout(F),window.removeEventListener("storage",U)}},[]);const m=F=>{const U=F?.role||F?.userType||F?.partitionKey;return U==="Host"?"/host-dashboard":U==="Guest"?"/guest-dashboard":U==="Admin"?"/admin":"/login"},y=()=>{localStorage.clear(),l(null),s(!1),window.location.href="/"},_=()=>{h(),s(!1)},z=F=>F==="/dashboard"?p.pathname===m(c)||p.pathname==="/browse":p.pathname===F;return r?g.jsx(wE,{}):g.jsxs("div",{className:"app-container",children:[g.jsxs("nav",{className:"navbar",children:[g.jsx(qn,{to:"/",className:"nav-logo",onClick:()=>s(!1),children:g.jsx(TE,{className:"nav-logo-img",style:{height:"50px"}})}),g.jsx("button",{className:"menu-toggle",onClick:()=>s(!i),"aria-label":"Toggle menu",children:i?g.jsx(yv,{size:28}):g.jsx(x1,{size:28})}),g.jsx("div",{className:`nav-links ${i?"mobile-open":""}`,children:c?g.jsxs(g.Fragment,{children:[g.jsx("div",{className:"user-badge",children:g.jsxs("span",{className:"user-badge-text",children:[g.jsx("strong",{children:c.name})," ",g.jsxs("span",{className:"user-badge-role",children:["(",c.role||c.userType||c.partitionKey,")"]})]})}),g.jsxs(qn,{to:m(c),className:`nav-item ${z("/dashboard")?"active":""}`,onClick:()=>s(!1),children:[g.jsx(w1,{size:20})," Dashboard"]}),g.jsxs(qn,{to:"/chats",className:`nav-item chat-nav-item ${z("/chats")?"active":""}`,onClick:_,children:[" Chats",d>0&&g.jsx("span",{className:`unread-badge ${d>9?"large-count":""}`,children:d>99?"99+":d})]}),g.jsxs(qn,{to:"/profile",className:`nav-item ${z("/profile")?"active":""}`,onClick:()=>s(!1),children:[g.jsx(L1,{size:20})," Profile"]}),g.jsxs(qn,{to:"/help",className:`nav-item ${z("/help")?"active":""}`,onClick:()=>s(!1),children:[g.jsx(mc,{size:20})," Help"]}),(c.role==="Admin"||c.userType==="Admin")&&g.jsxs(qn,{to:"/admin",className:`nav-item ${z("/admin")?"active":""}`,onClick:()=>s(!1),children:[g.jsx(j1,{size:20})," Admin"]}),g.jsxs("button",{onClick:y,className:"nav-item logout-btn",style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[g.jsx(R1,{size:20})," Logout"]})]}):g.jsxs(g.Fragment,{children:[g.jsxs(qn,{to:"/help",className:"nav-item",onClick:()=>s(!1),children:[g.jsx(mc,{size:20})," Help"]}),g.jsx(qn,{to:"/login",className:"nav-item",onClick:()=>s(!1),children:"Login"}),g.jsx(qn,{to:"/register",className:"nav-item btn btn-primary",style:{color:"white",padding:"0.5rem 1rem"},onClick:()=>s(!1),children:"Register"})]})})]}),g.jsx("main",{className:"content full-width",children:g.jsxs(TC,{children:[g.jsx(In,{path:"/",element:g.jsx(CE,{user:c})}),g.jsx(In,{path:"/login",element:c?g.jsx(gr,{to:"/"}):g.jsx(RE,{setUser:l})}),g.jsx(In,{path:"/register",element:c?g.jsx(gr,{to:"/"}):g.jsx(xE,{setUser:l})}),g.jsx(In,{path:"/browse",element:c?.role==="Guest"||c?.userType==="Guest"?g.jsx(uy,{user:c}):g.jsx(gr,{to:"/login"})}),g.jsx(In,{path:"/guest-dashboard",element:c?.role==="Guest"||c?.userType==="Guest"?g.jsx(uy,{user:c}):g.jsx(gr,{to:"/login"})}),g.jsx(In,{path:"/host-dashboard",element:c?.role==="Host"||c?.userType==="Host"?g.jsx(d_,{user:c}):g.jsx(gr,{to:"/login"})}),g.jsx(In,{path:"/chats",element:c?g.jsx(G2,{}):g.jsx(gr,{to:"/login"})}),g.jsx(In,{path:"/profile",element:c?g.jsx(X2,{}):g.jsx(gr,{to:"/login"})}),g.jsx(In,{path:"/admin",element:c?.role==="Admin"||c?.userType==="Admin"?g.jsx(F2,{}):g.jsx(gr,{to:"/login"})}),g.jsx(In,{path:"/chat/:recipientId",element:c?g.jsx(V2,{user:c}):g.jsx(gr,{to:"/login"})}),g.jsx(In,{path:"/help",element:g.jsx(Y2,{})})]})})]})};function K2(){return g.jsx(GC,{children:g.jsx($1,{children:g.jsx(J2,{})})})}Cw.createRoot(document.getElementById("root")).render(g.jsx(q.StrictMode,{children:g.jsx(K2,{})}));
