(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function i(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(l){if(l.ep)return;l.ep=!0;const c=i(l);fetch(l.href,c)}})();var Ug=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Al(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var n=r.default;if(typeof n=="function"){var i=function o(){var l=!1;try{l=this instanceof o}catch{}return l?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};i.prototype=n.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(r).forEach(function(o){var l=Object.getOwnPropertyDescriptor(r,o);Object.defineProperty(i,o,l.get?l:{enumerable:!0,get:function(){return r[o]}})}),i}var ld={exports:{}},wo={};var Dg;function ST(){if(Dg)return wo;Dg=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(o,l,c){var f=null;if(c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),"key"in l){c={};for(var p in l)p!=="key"&&(c[p]=l[p])}else c=l;return l=c.ref,{$$typeof:r,type:o,key:f,ref:l!==void 0?l:null,props:c}}return wo.Fragment=n,wo.jsx=i,wo.jsxs=i,wo}var Pg;function wT(){return Pg||(Pg=1,ld.exports=ST()),ld.exports}var u=wT(),cd={exports:{}},Ye={};var Ig;function TT(){if(Ig)return Ye;Ig=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),L=Symbol.iterator;function G(x){return x===null||typeof x!="object"?null:(x=L&&x[L]||x["@@iterator"],typeof x=="function"?x:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ee=Object.assign,Y={};function le(x,P,T){this.props=x,this.context=P,this.refs=Y,this.updater=T||O}le.prototype.isReactComponent={},le.prototype.setState=function(x,P){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,P,"setState")},le.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function fe(){}fe.prototype=le.prototype;function me(x,P,T){this.props=x,this.context=P,this.refs=Y,this.updater=T||O}var Q=me.prototype=new fe;Q.constructor=me,ee(Q,le.prototype),Q.isPureReactComponent=!0;var re=Array.isArray;function ve(){}var ue={H:null,A:null,T:null,S:null},ke=Object.prototype.hasOwnProperty;function Ce(x,P,T){var b=T.ref;return{$$typeof:r,type:x,key:P,ref:b!==void 0?b:null,props:T}}function Ne(x,P){return Ce(x.type,P,x.props)}function Be(x){return typeof x=="object"&&x!==null&&x.$$typeof===r}function qe(x){var P={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(T){return P[T]})}var je=/\/+/g;function xe(x,P){return typeof x=="object"&&x!==null&&x.key!=null?qe(""+x.key):P.toString(36)}function De(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(ve,ve):(x.status="pending",x.then(function(P){x.status==="pending"&&(x.status="fulfilled",x.value=P)},function(P){x.status==="pending"&&(x.status="rejected",x.reason=P)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function H(x,P,T,b,S){var _=typeof x;(_==="undefined"||_==="boolean")&&(x=null);var N=!1;if(x===null)N=!0;else switch(_){case"bigint":case"string":case"number":N=!0;break;case"object":switch(x.$$typeof){case r:case n:N=!0;break;case y:return N=x._init,H(N(x._payload),P,T,b,S)}}if(N)return S=S(x),N=b===""?"."+xe(x,0):b,re(S)?(T="",N!=null&&(T=N.replace(je,"$&/")+"/"),H(S,P,T,"",function(A){return A})):S!=null&&(Be(S)&&(S=Ne(S,T+(S.key==null||x&&x.key===S.key?"":(""+S.key).replace(je,"$&/")+"/")+N)),P.push(S)),1;N=0;var w=b===""?".":b+":";if(re(x))for(var R=0;R<x.length;R++)b=x[R],_=w+xe(b,R),N+=H(b,P,T,_,S);else if(R=G(x),typeof R=="function")for(x=R.call(x),R=0;!(b=x.next()).done;)b=b.value,_=w+xe(b,R++),N+=H(b,P,T,_,S);else if(_==="object"){if(typeof x.then=="function")return H(De(x),P,T,b,S);throw P=String(x),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return N}function M(x,P,T){if(x==null)return x;var b=[],S=0;return H(x,b,"","",function(_){return P.call(T,_,S++)}),b}function X(x){if(x._status===-1){var P=x._result;P=P(),P.then(function(T){(x._status===0||x._status===-1)&&(x._status=1,x._result=T)},function(T){(x._status===0||x._status===-1)&&(x._status=2,x._result=T)}),x._status===-1&&(x._status=0,x._result=P)}if(x._status===1)return x._result.default;throw x._result}var z=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)},K={map:M,forEach:function(x,P,T){M(x,function(){P.apply(this,arguments)},T)},count:function(x){var P=0;return M(x,function(){P++}),P},toArray:function(x){return M(x,function(P){return P})||[]},only:function(x){if(!Be(x))throw Error("React.Children.only expected to receive a single React element child.");return x}};return Ye.Activity=E,Ye.Children=K,Ye.Component=le,Ye.Fragment=i,Ye.Profiler=l,Ye.PureComponent=me,Ye.StrictMode=o,Ye.Suspense=m,Ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ue,Ye.__COMPILER_RUNTIME={__proto__:null,c:function(x){return ue.H.useMemoCache(x)}},Ye.cache=function(x){return function(){return x.apply(null,arguments)}},Ye.cacheSignal=function(){return null},Ye.cloneElement=function(x,P,T){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var b=ee({},x.props),S=x.key;if(P!=null)for(_ in P.key!==void 0&&(S=""+P.key),P)!ke.call(P,_)||_==="key"||_==="__self"||_==="__source"||_==="ref"&&P.ref===void 0||(b[_]=P[_]);var _=arguments.length-2;if(_===1)b.children=T;else if(1<_){for(var N=Array(_),w=0;w<_;w++)N[w]=arguments[w+2];b.children=N}return Ce(x.type,S,b)},Ye.createContext=function(x){return x={$$typeof:f,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:c,_context:x},x},Ye.createElement=function(x,P,T){var b,S={},_=null;if(P!=null)for(b in P.key!==void 0&&(_=""+P.key),P)ke.call(P,b)&&b!=="key"&&b!=="__self"&&b!=="__source"&&(S[b]=P[b]);var N=arguments.length-2;if(N===1)S.children=T;else if(1<N){for(var w=Array(N),R=0;R<N;R++)w[R]=arguments[R+2];S.children=w}if(x&&x.defaultProps)for(b in N=x.defaultProps,N)S[b]===void 0&&(S[b]=N[b]);return Ce(x,_,S)},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(x){return{$$typeof:p,render:x}},Ye.isValidElement=Be,Ye.lazy=function(x){return{$$typeof:y,_payload:{_status:-1,_result:x},_init:X}},Ye.memo=function(x,P){return{$$typeof:g,type:x,compare:P===void 0?null:P}},Ye.startTransition=function(x){var P=ue.T,T={};ue.T=T;try{var b=x(),S=ue.S;S!==null&&S(T,b),typeof b=="object"&&b!==null&&typeof b.then=="function"&&b.then(ve,z)}catch(_){z(_)}finally{P!==null&&T.types!==null&&(P.types=T.types),ue.T=P}},Ye.unstable_useCacheRefresh=function(){return ue.H.useCacheRefresh()},Ye.use=function(x){return ue.H.use(x)},Ye.useActionState=function(x,P,T){return ue.H.useActionState(x,P,T)},Ye.useCallback=function(x,P){return ue.H.useCallback(x,P)},Ye.useContext=function(x){return ue.H.useContext(x)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(x,P){return ue.H.useDeferredValue(x,P)},Ye.useEffect=function(x,P){return ue.H.useEffect(x,P)},Ye.useEffectEvent=function(x){return ue.H.useEffectEvent(x)},Ye.useId=function(){return ue.H.useId()},Ye.useImperativeHandle=function(x,P,T){return ue.H.useImperativeHandle(x,P,T)},Ye.useInsertionEffect=function(x,P){return ue.H.useInsertionEffect(x,P)},Ye.useLayoutEffect=function(x,P){return ue.H.useLayoutEffect(x,P)},Ye.useMemo=function(x,P){return ue.H.useMemo(x,P)},Ye.useOptimistic=function(x,P){return ue.H.useOptimistic(x,P)},Ye.useReducer=function(x,P,T){return ue.H.useReducer(x,P,T)},Ye.useRef=function(x){return ue.H.useRef(x)},Ye.useState=function(x){return ue.H.useState(x)},Ye.useSyncExternalStore=function(x,P,T){return ue.H.useSyncExternalStore(x,P,T)},Ye.useTransition=function(){return ue.H.useTransition()},Ye.version="19.2.3",Ye}var zg;function Qd(){return zg||(zg=1,cd.exports=TT()),cd.exports}var U=Qd(),ud={exports:{}},To={},dd={exports:{}},fd={};var Lg;function CT(){return Lg||(Lg=1,(function(r){function n(H,M){var X=H.length;H.push(M);e:for(;0<X;){var z=X-1>>>1,K=H[z];if(0<l(K,M))H[z]=M,H[X]=K,X=z;else break e}}function i(H){return H.length===0?null:H[0]}function o(H){if(H.length===0)return null;var M=H[0],X=H.pop();if(X!==M){H[0]=X;e:for(var z=0,K=H.length,x=K>>>1;z<x;){var P=2*(z+1)-1,T=H[P],b=P+1,S=H[b];if(0>l(T,X))b<K&&0>l(S,T)?(H[z]=S,H[b]=X,z=b):(H[z]=T,H[P]=X,z=P);else if(b<K&&0>l(S,X))H[z]=S,H[b]=X,z=b;else break e}}return M}function l(H,M){var X=H.sortIndex-M.sortIndex;return X!==0?X:H.id-M.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();r.unstable_now=function(){return f.now()-p}}var m=[],g=[],y=1,E=null,L=3,G=!1,O=!1,ee=!1,Y=!1,le=typeof setTimeout=="function"?setTimeout:null,fe=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;function Q(H){for(var M=i(g);M!==null;){if(M.callback===null)o(g);else if(M.startTime<=H)o(g),M.sortIndex=M.expirationTime,n(m,M);else break;M=i(g)}}function re(H){if(ee=!1,Q(H),!O)if(i(m)!==null)O=!0,ve||(ve=!0,qe());else{var M=i(g);M!==null&&De(re,M.startTime-H)}}var ve=!1,ue=-1,ke=5,Ce=-1;function Ne(){return Y?!0:!(r.unstable_now()-Ce<ke)}function Be(){if(Y=!1,ve){var H=r.unstable_now();Ce=H;var M=!0;try{e:{O=!1,ee&&(ee=!1,fe(ue),ue=-1),G=!0;var X=L;try{t:{for(Q(H),E=i(m);E!==null&&!(E.expirationTime>H&&Ne());){var z=E.callback;if(typeof z=="function"){E.callback=null,L=E.priorityLevel;var K=z(E.expirationTime<=H);if(H=r.unstable_now(),typeof K=="function"){E.callback=K,Q(H),M=!0;break t}E===i(m)&&o(m),Q(H)}else o(m);E=i(m)}if(E!==null)M=!0;else{var x=i(g);x!==null&&De(re,x.startTime-H),M=!1}}break e}finally{E=null,L=X,G=!1}M=void 0}}finally{M?qe():ve=!1}}}var qe;if(typeof me=="function")qe=function(){me(Be)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,xe=je.port2;je.port1.onmessage=Be,qe=function(){xe.postMessage(null)}}else qe=function(){le(Be,0)};function De(H,M){ue=le(function(){H(r.unstable_now())},M)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(H){H.callback=null},r.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ke=0<H?Math.floor(1e3/H):5},r.unstable_getCurrentPriorityLevel=function(){return L},r.unstable_next=function(H){switch(L){case 1:case 2:case 3:var M=3;break;default:M=L}var X=L;L=M;try{return H()}finally{L=X}},r.unstable_requestPaint=function(){Y=!0},r.unstable_runWithPriority=function(H,M){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var X=L;L=H;try{return M()}finally{L=X}},r.unstable_scheduleCallback=function(H,M,X){var z=r.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?z+X:z):X=z,H){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=X+K,H={id:y++,callback:M,priorityLevel:H,startTime:X,expirationTime:K,sortIndex:-1},X>z?(H.sortIndex=X,n(g,H),i(m)===null&&H===i(g)&&(ee?(fe(ue),ue=-1):ee=!0,De(re,X-z))):(H.sortIndex=K,n(m,H),O||G||(O=!0,ve||(ve=!0,qe()))),H},r.unstable_shouldYield=Ne,r.unstable_wrapCallback=function(H){var M=L;return function(){var X=L;L=M;try{return H.apply(this,arguments)}finally{L=X}}}})(fd)),fd}var Bg;function xT(){return Bg||(Bg=1,dd.exports=CT()),dd.exports}var hd={exports:{}},Jt={};var Hg;function RT(){if(Hg)return Jt;Hg=1;var r=Qd();function n(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(n(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(m,g,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:E==null?null:""+E,children:m,containerInfo:g,implementation:y}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Jt.createPortal=function(m,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(n(299));return c(m,g,null,y)},Jt.flushSync=function(m){var g=f.T,y=o.p;try{if(f.T=null,o.p=2,m)return m()}finally{f.T=g,o.p=y,o.d.f()}},Jt.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,o.d.C(m,g))},Jt.prefetchDNS=function(m){typeof m=="string"&&o.d.D(m)},Jt.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var y=g.as,E=p(y,g.crossOrigin),L=typeof g.integrity=="string"?g.integrity:void 0,G=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?o.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:L,fetchPriority:G}):y==="script"&&o.d.X(m,{crossOrigin:E,integrity:L,fetchPriority:G,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Jt.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=p(g.as,g.crossOrigin);o.d.M(m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&o.d.M(m)},Jt.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,E=p(y,g.crossOrigin);o.d.L(m,y,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Jt.preloadModule=function(m,g){if(typeof m=="string")if(g){var y=p(g.as,g.crossOrigin);o.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else o.d.m(m)},Jt.requestFormReset=function(m){o.d.r(m)},Jt.unstable_batchedUpdates=function(m,g){return m(g)},Jt.useFormState=function(m,g,y){return f.H.useFormState(m,g,y)},Jt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Jt.version="19.2.3",Jt}var qg;function ET(){if(qg)return hd.exports;qg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),hd.exports=RT(),hd.exports}var $g;function _T(){if($g)return To;$g=1;var r=xT(),n=Qd(),i=ET();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(c(e)!==e)throw Error(o(188))}function g(e){var t=e.alternate;if(!t){if(t=c(e),t===null)throw Error(o(188));return t!==e?null:e}for(var s=e,a=t;;){var d=s.return;if(d===null)break;var h=d.alternate;if(h===null){if(a=d.return,a!==null){s=a;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===s)return m(d),e;if(h===a)return m(d),t;h=h.sibling}throw Error(o(188))}if(s.return!==a.return)s=d,a=h;else{for(var v=!1,k=d.child;k;){if(k===s){v=!0,s=d,a=h;break}if(k===a){v=!0,a=d,s=h;break}k=k.sibling}if(!v){for(k=h.child;k;){if(k===s){v=!0,s=h,a=d;break}if(k===a){v=!0,a=h,s=d;break}k=k.sibling}if(!v)throw Error(o(189))}}if(s.alternate!==a)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var E=Object.assign,L=Symbol.for("react.element"),G=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),ee=Symbol.for("react.fragment"),Y=Symbol.for("react.strict_mode"),le=Symbol.for("react.profiler"),fe=Symbol.for("react.consumer"),me=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),re=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),ke=Symbol.for("react.lazy"),Ce=Symbol.for("react.activity"),Ne=Symbol.for("react.memo_cache_sentinel"),Be=Symbol.iterator;function qe(e){return e===null||typeof e!="object"?null:(e=Be&&e[Be]||e["@@iterator"],typeof e=="function"?e:null)}var je=Symbol.for("react.client.reference");function xe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===je?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ee:return"Fragment";case le:return"Profiler";case Y:return"StrictMode";case re:return"Suspense";case ve:return"SuspenseList";case Ce:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case O:return"Portal";case me:return e.displayName||"Context";case fe:return(e._context.displayName||"Context")+".Consumer";case Q:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ue:return t=e.displayName||null,t!==null?t:xe(e.type)||"Memo";case ke:t=e._payload,e=e._init;try{return xe(e(t))}catch{}}return null}var De=Array.isArray,H=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},z=[],K=-1;function x(e){return{current:e}}function P(e){0>K||(e.current=z[K],z[K]=null,K--)}function T(e,t){K++,z[K]=e.current,e.current=t}var b=x(null),S=x(null),_=x(null),N=x(null);function w(e,t){switch(T(_,t),T(S,e),T(b,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?rg(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=rg(t),e=ig(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}P(b),T(b,e)}function R(){P(b),P(S),P(_)}function A(e){e.memoizedState!==null&&T(N,e);var t=b.current,s=ig(t,e.type);t!==s&&(T(S,e),T(b,s))}function q(e){S.current===e&&(P(b),P(S)),N.current===e&&(P(N),yo._currentValue=X)}var J,V;function B(e){if(J===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);J=t&&t[1]||"",V=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+J+e+V}var ae=!1;function he(e,t){if(!e||ae)return"";ae=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var _e=function(){throw Error()};if(Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(be){var pe=be}Reflect.construct(e,[],_e)}else{try{_e.call()}catch(be){pe=be}e.call(_e.prototype)}}else{try{throw Error()}catch(be){pe=be}(_e=e())&&typeof _e.catch=="function"&&_e.catch(function(){})}}catch(be){if(be&&pe&&typeof be.stack=="string")return[be.stack,pe.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=a.DetermineComponentFrameRoot(),v=h[0],k=h[1];if(v&&k){var F=v.split(`
`),de=k.split(`
`);for(d=a=0;a<F.length&&!F[a].includes("DetermineComponentFrameRoot");)a++;for(;d<de.length&&!de[d].includes("DetermineComponentFrameRoot");)d++;if(a===F.length||d===de.length)for(a=F.length-1,d=de.length-1;1<=a&&0<=d&&F[a]!==de[d];)d--;for(;1<=a&&0<=d;a--,d--)if(F[a]!==de[d]){if(a!==1||d!==1)do if(a--,d--,0>d||F[a]!==de[d]){var Te=`
`+F[a].replace(" at new "," at ");return e.displayName&&Te.includes("<anonymous>")&&(Te=Te.replace("<anonymous>",e.displayName)),Te}while(1<=a&&0<=d);break}}}finally{ae=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?B(s):""}function ie(e,t){switch(e.tag){case 26:case 27:case 5:return B(e.type);case 16:return B("Lazy");case 13:return e.child!==t&&t!==null?B("Suspense Fallback"):B("Suspense");case 19:return B("SuspenseList");case 0:case 15:return he(e.type,!1);case 11:return he(e.type.render,!1);case 1:return he(e.type,!0);case 31:return B("Activity");default:return""}}function I(e){try{var t="",s=null;do t+=ie(e,s),s=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var W=Object.prototype.hasOwnProperty,te=r.unstable_scheduleCallback,ge=r.unstable_cancelCallback,we=r.unstable_shouldYield,Ae=r.unstable_requestPaint,He=r.unstable_now,Ge=r.unstable_getCurrentPriorityLevel,j=r.unstable_ImmediatePriority,C=r.unstable_UserBlockingPriority,D=r.unstable_NormalPriority,ne=r.unstable_LowPriority,$=r.unstable_IdlePriority,se=r.log,Se=r.unstable_setDisableYieldValue,Ie=null,Oe=null;function Ue(e){if(typeof se=="function"&&Se(e),Oe&&typeof Oe.setStrictMode=="function")try{Oe.setStrictMode(Ie,e)}catch{}}var ze=Math.clz32?Math.clz32:It,ct=Math.log,xt=Math.LN2;function It(e){return e>>>=0,e===0?32:31-(ct(e)/xt|0)|0}var Xt=256,ki=262144,Zr=4194304;function ei(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Vo(e,t,s){var a=e.pendingLanes;if(a===0)return 0;var d=0,h=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var k=a&134217727;return k!==0?(a=k&~h,a!==0?d=ei(a):(v&=k,v!==0?d=ei(v):s||(s=k&~e,s!==0&&(d=ei(s))))):(k=a&~h,k!==0?d=ei(k):v!==0?d=ei(v):s||(s=a&~e,s!==0&&(d=ei(s)))),d===0?0:t!==0&&t!==d&&(t&h)===0&&(h=d&-d,s=t&-t,h>=s||h===32&&(s&4194048)!==0)?t:d}function As(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function aS(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zf(){var e=Zr;return Zr<<=1,(Zr&62914560)===0&&(Zr=4194304),e}function Kl(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Ns(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function lS(e,t,s,a,d,h){var v=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var k=e.entanglements,F=e.expirationTimes,de=e.hiddenUpdates;for(s=v&~s;0<s;){var Te=31-ze(s),_e=1<<Te;k[Te]=0,F[Te]=-1;var pe=de[Te];if(pe!==null)for(de[Te]=null,Te=0;Te<pe.length;Te++){var be=pe[Te];be!==null&&(be.lane&=-536870913)}s&=~_e}a!==0&&Lf(e,a,0),h!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=h&~(v&~t))}function Lf(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-ze(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|s&261930}function Bf(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var a=31-ze(s),d=1<<a;d&t|e[a]&t&&(e[a]|=t),s&=~d}}function Hf(e,t){var s=t&-t;return s=(s&42)!==0?1:Ql(s),(s&(e.suspendedLanes|t))!==0?0:s}function Ql(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Wl(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function qf(){var e=M.p;return e!==0?e:(e=window.event,e===void 0?32:_g(e.type))}function $f(e,t){var s=M.p;try{return M.p=e,t()}finally{M.p=s}}var wr=Math.random().toString(36).slice(2),Ht="__reactFiber$"+wr,ln="__reactProps$"+wr,Ai="__reactContainer$"+wr,Zl="__reactEvents$"+wr,cS="__reactListeners$"+wr,uS="__reactHandles$"+wr,Vf="__reactResources$"+wr,js="__reactMarker$"+wr;function ec(e){delete e[Ht],delete e[ln],delete e[Zl],delete e[cS],delete e[uS]}function Ni(e){var t=e[Ht];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Ai]||s[Ht]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=dg(e);e!==null;){if(s=e[Ht])return s;e=dg(e)}return t}e=s,s=e.parentNode}return null}function ji(e){if(e=e[Ht]||e[Ai]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Os(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function Oi(e){var t=e[Vf];return t||(t=e[Vf]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function zt(e){e[js]=!0}var Gf=new Set,Ff={};function ti(e,t){Mi(e,t),Mi(e+"Capture",t)}function Mi(e,t){for(Ff[e]=t,e=0;e<t.length;e++)Gf.add(t[e])}var dS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yf={},Xf={};function fS(e){return W.call(Xf,e)?!0:W.call(Yf,e)?!1:dS.test(e)?Xf[e]=!0:(Yf[e]=!0,!1)}function Go(e,t,s){if(fS(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function Fo(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function er(e,t,s,a){if(a===null)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+a)}}function _n(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Jf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function hS(e,t,s){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,h=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(v){s=""+v,h.call(this,v)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return s},setValue:function(v){s=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function tc(e){if(!e._valueTracker){var t=Jf(e)?"checked":"value";e._valueTracker=hS(e,t,""+e[t])}}function Kf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),a="";return e&&(a=Jf(e)?e.checked?"true":"false":e.value),e=a,e!==s?(t.setValue(e),!0):!1}function Yo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var pS=/[\n"\\]/g;function kn(e){return e.replace(pS,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function nc(e,t,s,a,d,h,v,k){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),t!=null?v==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+_n(t)):e.value!==""+_n(t)&&(e.value=""+_n(t)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),t!=null?rc(e,v,_n(t)):s!=null?rc(e,v,_n(s)):a!=null&&e.removeAttribute("value"),d==null&&h!=null&&(e.defaultChecked=!!h),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?e.name=""+_n(k):e.removeAttribute("name")}function Qf(e,t,s,a,d,h,v,k){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||s!=null){if(!(h!=="submit"&&h!=="reset"||t!=null)){tc(e);return}s=s!=null?""+_n(s):"",t=t!=null?""+_n(t):s,k||t===e.value||(e.value=t),e.defaultValue=t}a=a??d,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=k?e.checked:!!a,e.defaultChecked=!!a,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),tc(e)}function rc(e,t,s){t==="number"&&Yo(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Ui(e,t,s,a){if(e=e.options,t){t={};for(var d=0;d<s.length;d++)t["$"+s[d]]=!0;for(s=0;s<e.length;s++)d=t.hasOwnProperty("$"+e[s].value),e[s].selected!==d&&(e[s].selected=d),d&&a&&(e[s].defaultSelected=!0)}else{for(s=""+_n(s),t=null,d=0;d<e.length;d++){if(e[d].value===s){e[d].selected=!0,a&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function Wf(e,t,s){if(t!=null&&(t=""+_n(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+_n(s):""}function Zf(e,t,s,a){if(t==null){if(a!=null){if(s!=null)throw Error(o(92));if(De(a)){if(1<a.length)throw Error(o(93));a=a[0]}s=a}s==null&&(s=""),t=s}s=_n(t),e.defaultValue=s,a=e.textContent,a===s&&a!==""&&a!==null&&(e.value=a),tc(e)}function Di(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var mS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function eh(e,t,s){var a=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,s):typeof s!="number"||s===0||mS.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function th(e,t,s){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,s!=null){for(var a in s)!s.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var d in t)a=t[d],t.hasOwnProperty(d)&&s[d]!==a&&eh(e,d,a)}else for(var h in t)t.hasOwnProperty(h)&&eh(e,h,t[h])}function ic(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xo(e){return yS.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function tr(){}var sc=null;function oc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Pi=null,Ii=null;function nh(e){var t=ji(e);if(t&&(e=t.stateNode)){var s=e[ln]||null;e:switch(e=t.stateNode,t.type){case"input":if(nc(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+kn(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var a=s[t];if(a!==e&&a.form===e.form){var d=a[ln]||null;if(!d)throw Error(o(90));nc(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(t=0;t<s.length;t++)a=s[t],a.form===e.form&&Kf(a)}break e;case"textarea":Wf(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&Ui(e,!!s.multiple,t,!1)}}}var ac=!1;function rh(e,t,s){if(ac)return e(t,s);ac=!0;try{var a=e(t);return a}finally{if(ac=!1,(Pi!==null||Ii!==null)&&(Da(),Pi&&(t=Pi,e=Ii,Ii=Pi=null,nh(t),e)))for(t=0;t<e.length;t++)nh(e[t])}}function Ms(e,t){var s=e.stateNode;if(s===null)return null;var a=s[ln]||null;if(a===null)return null;s=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(o(231,t,typeof s));return s}var nr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lc=!1;if(nr)try{var Us={};Object.defineProperty(Us,"passive",{get:function(){lc=!0}}),window.addEventListener("test",Us,Us),window.removeEventListener("test",Us,Us)}catch{lc=!1}var Tr=null,cc=null,Jo=null;function ih(){if(Jo)return Jo;var e,t=cc,s=t.length,a,d="value"in Tr?Tr.value:Tr.textContent,h=d.length;for(e=0;e<s&&t[e]===d[e];e++);var v=s-e;for(a=1;a<=v&&t[s-a]===d[h-a];a++);return Jo=d.slice(e,1<a?1-a:void 0)}function Ko(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Qo(){return!0}function sh(){return!1}function cn(e){function t(s,a,d,h,v){this._reactName=s,this._targetInst=d,this.type=a,this.nativeEvent=h,this.target=v,this.currentTarget=null;for(var k in e)e.hasOwnProperty(k)&&(s=e[k],this[k]=s?s(h):h[k]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Qo:sh,this.isPropagationStopped=sh,this}return E(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Qo)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Qo)},persist:function(){},isPersistent:Qo}),t}var ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wo=cn(ni),Ds=E({},ni,{view:0,detail:0}),vS=cn(Ds),uc,dc,Ps,Zo=E({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ps&&(Ps&&e.type==="mousemove"?(uc=e.screenX-Ps.screenX,dc=e.screenY-Ps.screenY):dc=uc=0,Ps=e),uc)},movementY:function(e){return"movementY"in e?e.movementY:dc}}),oh=cn(Zo),bS=E({},Zo,{dataTransfer:0}),SS=cn(bS),wS=E({},Ds,{relatedTarget:0}),fc=cn(wS),TS=E({},ni,{animationName:0,elapsedTime:0,pseudoElement:0}),CS=cn(TS),xS=E({},ni,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),RS=cn(xS),ES=E({},ni,{data:0}),ah=cn(ES),_S={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=AS[e])?!!t[e]:!1}function hc(){return NS}var jS=E({},Ds,{key:function(e){if(e.key){var t=_S[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ko(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hc,charCode:function(e){return e.type==="keypress"?Ko(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ko(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),OS=cn(jS),MS=E({},Zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lh=cn(MS),US=E({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hc}),DS=cn(US),PS=E({},ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),IS=cn(PS),zS=E({},Zo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),LS=cn(zS),BS=E({},ni,{newState:0,oldState:0}),HS=cn(BS),qS=[9,13,27,32],pc=nr&&"CompositionEvent"in window,Is=null;nr&&"documentMode"in document&&(Is=document.documentMode);var $S=nr&&"TextEvent"in window&&!Is,ch=nr&&(!pc||Is&&8<Is&&11>=Is),uh=" ",dh=!1;function fh(e,t){switch(e){case"keyup":return qS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zi=!1;function VS(e,t){switch(e){case"compositionend":return hh(t);case"keypress":return t.which!==32?null:(dh=!0,uh);case"textInput":return e=t.data,e===uh&&dh?null:e;default:return null}}function GS(e,t){if(zi)return e==="compositionend"||!pc&&fh(e,t)?(e=ih(),Jo=cc=Tr=null,zi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ch&&t.locale!=="ko"?null:t.data;default:return null}}var FS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ph(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!FS[e.type]:t==="textarea"}function mh(e,t,s,a){Pi?Ii?Ii.push(a):Ii=[a]:Pi=a,t=qa(t,"onChange"),0<t.length&&(s=new Wo("onChange","change",null,s,a),e.push({event:s,listeners:t}))}var zs=null,Ls=null;function YS(e){Qm(e,0)}function ea(e){var t=Os(e);if(Kf(t))return e}function gh(e,t){if(e==="change")return t}var yh=!1;if(nr){var mc;if(nr){var gc="oninput"in document;if(!gc){var vh=document.createElement("div");vh.setAttribute("oninput","return;"),gc=typeof vh.oninput=="function"}mc=gc}else mc=!1;yh=mc&&(!document.documentMode||9<document.documentMode)}function bh(){zs&&(zs.detachEvent("onpropertychange",Sh),Ls=zs=null)}function Sh(e){if(e.propertyName==="value"&&ea(Ls)){var t=[];mh(t,Ls,e,oc(e)),rh(YS,t)}}function XS(e,t,s){e==="focusin"?(bh(),zs=t,Ls=s,zs.attachEvent("onpropertychange",Sh)):e==="focusout"&&bh()}function JS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ea(Ls)}function KS(e,t){if(e==="click")return ea(t)}function QS(e,t){if(e==="input"||e==="change")return ea(t)}function WS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vn=typeof Object.is=="function"?Object.is:WS;function Bs(e,t){if(vn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var d=s[a];if(!W.call(t,d)||!vn(e[d],t[d]))return!1}return!0}function wh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Th(e,t){var s=wh(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=t&&a>=t)return{node:s,offset:t-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=wh(s)}}function Ch(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ch(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function xh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Yo(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Yo(e.document)}return t}function yc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var ZS=nr&&"documentMode"in document&&11>=document.documentMode,Li=null,vc=null,Hs=null,bc=!1;function Rh(e,t,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;bc||Li==null||Li!==Yo(a)||(a=Li,"selectionStart"in a&&yc(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Hs&&Bs(Hs,a)||(Hs=a,a=qa(vc,"onSelect"),0<a.length&&(t=new Wo("onSelect","select",null,t,s),e.push({event:t,listeners:a}),t.target=Li)))}function ri(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Bi={animationend:ri("Animation","AnimationEnd"),animationiteration:ri("Animation","AnimationIteration"),animationstart:ri("Animation","AnimationStart"),transitionrun:ri("Transition","TransitionRun"),transitionstart:ri("Transition","TransitionStart"),transitioncancel:ri("Transition","TransitionCancel"),transitionend:ri("Transition","TransitionEnd")},Sc={},Eh={};nr&&(Eh=document.createElement("div").style,"AnimationEvent"in window||(delete Bi.animationend.animation,delete Bi.animationiteration.animation,delete Bi.animationstart.animation),"TransitionEvent"in window||delete Bi.transitionend.transition);function ii(e){if(Sc[e])return Sc[e];if(!Bi[e])return e;var t=Bi[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Eh)return Sc[e]=t[s];return e}var _h=ii("animationend"),kh=ii("animationiteration"),Ah=ii("animationstart"),ew=ii("transitionrun"),tw=ii("transitionstart"),nw=ii("transitioncancel"),Nh=ii("transitionend"),jh=new Map,wc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");wc.push("scrollEnd");function Ln(e,t){jh.set(e,t),ti(t,[e])}var ta=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},An=[],Hi=0,Tc=0;function na(){for(var e=Hi,t=Tc=Hi=0;t<e;){var s=An[t];An[t++]=null;var a=An[t];An[t++]=null;var d=An[t];An[t++]=null;var h=An[t];if(An[t++]=null,a!==null&&d!==null){var v=a.pending;v===null?d.next=d:(d.next=v.next,v.next=d),a.pending=d}h!==0&&Oh(s,d,h)}}function ra(e,t,s,a){An[Hi++]=e,An[Hi++]=t,An[Hi++]=s,An[Hi++]=a,Tc|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function Cc(e,t,s,a){return ra(e,t,s,a),ia(e)}function si(e,t){return ra(e,null,null,t),ia(e)}function Oh(e,t,s){e.lanes|=s;var a=e.alternate;a!==null&&(a.lanes|=s);for(var d=!1,h=e.return;h!==null;)h.childLanes|=s,a=h.alternate,a!==null&&(a.childLanes|=s),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(d=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,d&&t!==null&&(d=31-ze(s),e=h.hiddenUpdates,a=e[d],a===null?e[d]=[t]:a.push(t),t.lane=s|536870912),h):null}function ia(e){if(50<co)throw co=0,Ou=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var qi={};function rw(e,t,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(e,t,s,a){return new rw(e,t,s,a)}function xc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function rr(e,t){var s=e.alternate;return s===null?(s=bn(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Mh(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function sa(e,t,s,a,d,h){var v=0;if(a=e,typeof e=="function")xc(e)&&(v=1);else if(typeof e=="string")v=lT(e,s,b.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Ce:return e=bn(31,s,t,d),e.elementType=Ce,e.lanes=h,e;case ee:return oi(s.children,d,h,t);case Y:v=8,d|=24;break;case le:return e=bn(12,s,t,d|2),e.elementType=le,e.lanes=h,e;case re:return e=bn(13,s,t,d),e.elementType=re,e.lanes=h,e;case ve:return e=bn(19,s,t,d),e.elementType=ve,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case me:v=10;break e;case fe:v=9;break e;case Q:v=11;break e;case ue:v=14;break e;case ke:v=16,a=null;break e}v=29,s=Error(o(130,e===null?"null":typeof e,"")),a=null}return t=bn(v,s,t,d),t.elementType=e,t.type=a,t.lanes=h,t}function oi(e,t,s,a){return e=bn(7,e,a,t),e.lanes=s,e}function Rc(e,t,s){return e=bn(6,e,null,t),e.lanes=s,e}function Uh(e){var t=bn(18,null,null,0);return t.stateNode=e,t}function Ec(e,t,s){return t=bn(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Dh=new WeakMap;function Nn(e,t){if(typeof e=="object"&&e!==null){var s=Dh.get(e);return s!==void 0?s:(t={value:e,source:t,stack:I(t)},Dh.set(e,t),t)}return{value:e,source:t,stack:I(t)}}var $i=[],Vi=0,oa=null,qs=0,jn=[],On=0,Cr=null,Fn=1,Yn="";function ir(e,t){$i[Vi++]=qs,$i[Vi++]=oa,oa=e,qs=t}function Ph(e,t,s){jn[On++]=Fn,jn[On++]=Yn,jn[On++]=Cr,Cr=e;var a=Fn;e=Yn;var d=32-ze(a)-1;a&=~(1<<d),s+=1;var h=32-ze(t)+d;if(30<h){var v=d-d%5;h=(a&(1<<v)-1).toString(32),a>>=v,d-=v,Fn=1<<32-ze(t)+d|s<<d|a,Yn=h+e}else Fn=1<<h|s<<d|a,Yn=e}function _c(e){e.return!==null&&(ir(e,1),Ph(e,1,0))}function kc(e){for(;e===oa;)oa=$i[--Vi],$i[Vi]=null,qs=$i[--Vi],$i[Vi]=null;for(;e===Cr;)Cr=jn[--On],jn[On]=null,Yn=jn[--On],jn[On]=null,Fn=jn[--On],jn[On]=null}function Ih(e,t){jn[On++]=Fn,jn[On++]=Yn,jn[On++]=Cr,Fn=t.id,Yn=t.overflow,Cr=e}var qt=null,yt=null,rt=!1,xr=null,Mn=!1,Ac=Error(o(519));function Rr(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $s(Nn(t,e)),Ac}function zh(e){var t=e.stateNode,s=e.type,a=e.memoizedProps;switch(t[Ht]=e,t[ln]=a,s){case"dialog":Ze("cancel",t),Ze("close",t);break;case"iframe":case"object":case"embed":Ze("load",t);break;case"video":case"audio":for(s=0;s<fo.length;s++)Ze(fo[s],t);break;case"source":Ze("error",t);break;case"img":case"image":case"link":Ze("error",t),Ze("load",t);break;case"details":Ze("toggle",t);break;case"input":Ze("invalid",t),Qf(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":Ze("invalid",t);break;case"textarea":Ze("invalid",t),Zf(t,a.value,a.defaultValue,a.children)}s=a.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||a.suppressHydrationWarning===!0||tg(t.textContent,s)?(a.popover!=null&&(Ze("beforetoggle",t),Ze("toggle",t)),a.onScroll!=null&&Ze("scroll",t),a.onScrollEnd!=null&&Ze("scrollend",t),a.onClick!=null&&(t.onclick=tr),t=!0):t=!1,t||Rr(e,!0)}function Lh(e){for(qt=e.return;qt;)switch(qt.tag){case 5:case 31:case 13:Mn=!1;return;case 27:case 3:Mn=!0;return;default:qt=qt.return}}function Gi(e){if(e!==qt)return!1;if(!rt)return Lh(e),rt=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Yu(e.type,e.memoizedProps)),s=!s),s&&yt&&Rr(e),Lh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));yt=ug(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));yt=ug(e)}else t===27?(t=yt,Lr(e.type)?(e=Wu,Wu=null,yt=e):yt=t):yt=qt?Dn(e.stateNode.nextSibling):null;return!0}function ai(){yt=qt=null,rt=!1}function Nc(){var e=xr;return e!==null&&(hn===null?hn=e:hn.push.apply(hn,e),xr=null),e}function $s(e){xr===null?xr=[e]:xr.push(e)}var jc=x(null),li=null,sr=null;function Er(e,t,s){T(jc,t._currentValue),t._currentValue=s}function or(e){e._currentValue=jc.current,P(jc)}function Oc(e,t,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===s)break;e=e.return}}function Mc(e,t,s,a){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var h=d.dependencies;if(h!==null){var v=d.child;h=h.firstContext;e:for(;h!==null;){var k=h;h=d;for(var F=0;F<t.length;F++)if(k.context===t[F]){h.lanes|=s,k=h.alternate,k!==null&&(k.lanes|=s),Oc(h.return,s,e),a||(v=null);break e}h=k.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(o(341));v.lanes|=s,h=v.alternate,h!==null&&(h.lanes|=s),Oc(v,s,e),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===e){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function Fi(e,t,s,a){e=null;for(var d=t,h=!1;d!==null;){if(!h){if((d.flags&524288)!==0)h=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(o(387));if(v=v.memoizedProps,v!==null){var k=d.type;vn(d.pendingProps.value,v.value)||(e!==null?e.push(k):e=[k])}}else if(d===N.current){if(v=d.alternate,v===null)throw Error(o(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(yo):e=[yo])}d=d.return}e!==null&&Mc(t,e,s,a),t.flags|=262144}function aa(e){for(e=e.firstContext;e!==null;){if(!vn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ci(e){li=e,sr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function $t(e){return Bh(li,e)}function la(e,t){return li===null&&ci(e),Bh(e,t)}function Bh(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},sr===null){if(e===null)throw Error(o(308));sr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else sr=sr.next=t;return s}var iw=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},sw=r.unstable_scheduleCallback,ow=r.unstable_NormalPriority,kt={$$typeof:me,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Uc(){return{controller:new iw,data:new Map,refCount:0}}function Vs(e){e.refCount--,e.refCount===0&&sw(ow,function(){e.controller.abort()})}var Gs=null,Dc=0,Yi=0,Xi=null;function aw(e,t){if(Gs===null){var s=Gs=[];Dc=0,Yi=zu(),Xi={status:"pending",value:void 0,then:function(a){s.push(a)}}}return Dc++,t.then(Hh,Hh),t}function Hh(){if(--Dc===0&&Gs!==null){Xi!==null&&(Xi.status="fulfilled");var e=Gs;Gs=null,Yi=0,Xi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function lw(e,t){var s=[],a={status:"pending",value:null,reason:null,then:function(d){s.push(d)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var d=0;d<s.length;d++)(0,s[d])(t)},function(d){for(a.status="rejected",a.reason=d,d=0;d<s.length;d++)(0,s[d])(void 0)}),a}var qh=H.S;H.S=function(e,t){Rm=He(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&aw(e,t),qh!==null&&qh(e,t)};var ui=x(null);function Pc(){var e=ui.current;return e!==null?e:mt.pooledCache}function ca(e,t){t===null?T(ui,ui.current):T(ui,t.pool)}function $h(){var e=Pc();return e===null?null:{parent:kt._currentValue,pool:e}}var Ji=Error(o(460)),Ic=Error(o(474)),ua=Error(o(542)),da={then:function(){}};function Vh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Gh(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(tr,tr),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Yh(e),e;default:if(typeof t.status=="string")t.then(tr,tr);else{if(e=mt,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=a}},function(a){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Yh(e),e}throw fi=t,Ji}}function di(e){try{var t=e._init;return t(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(fi=s,Ji):s}}var fi=null;function Fh(){if(fi===null)throw Error(o(459));var e=fi;return fi=null,e}function Yh(e){if(e===Ji||e===ua)throw Error(o(483))}var Ki=null,Fs=0;function fa(e){var t=Fs;return Fs+=1,Ki===null&&(Ki=[]),Gh(Ki,e,t)}function Ys(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ha(e,t){throw t.$$typeof===L?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Xh(e){function t(oe,Z){if(e){var ce=oe.deletions;ce===null?(oe.deletions=[Z],oe.flags|=16):ce.push(Z)}}function s(oe,Z){if(!e)return null;for(;Z!==null;)t(oe,Z),Z=Z.sibling;return null}function a(oe){for(var Z=new Map;oe!==null;)oe.key!==null?Z.set(oe.key,oe):Z.set(oe.index,oe),oe=oe.sibling;return Z}function d(oe,Z){return oe=rr(oe,Z),oe.index=0,oe.sibling=null,oe}function h(oe,Z,ce){return oe.index=ce,e?(ce=oe.alternate,ce!==null?(ce=ce.index,ce<Z?(oe.flags|=67108866,Z):ce):(oe.flags|=67108866,Z)):(oe.flags|=1048576,Z)}function v(oe){return e&&oe.alternate===null&&(oe.flags|=67108866),oe}function k(oe,Z,ce,Re){return Z===null||Z.tag!==6?(Z=Rc(ce,oe.mode,Re),Z.return=oe,Z):(Z=d(Z,ce),Z.return=oe,Z)}function F(oe,Z,ce,Re){var $e=ce.type;return $e===ee?Te(oe,Z,ce.props.children,Re,ce.key):Z!==null&&(Z.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===ke&&di($e)===Z.type)?(Z=d(Z,ce.props),Ys(Z,ce),Z.return=oe,Z):(Z=sa(ce.type,ce.key,ce.props,null,oe.mode,Re),Ys(Z,ce),Z.return=oe,Z)}function de(oe,Z,ce,Re){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ce.containerInfo||Z.stateNode.implementation!==ce.implementation?(Z=Ec(ce,oe.mode,Re),Z.return=oe,Z):(Z=d(Z,ce.children||[]),Z.return=oe,Z)}function Te(oe,Z,ce,Re,$e){return Z===null||Z.tag!==7?(Z=oi(ce,oe.mode,Re,$e),Z.return=oe,Z):(Z=d(Z,ce),Z.return=oe,Z)}function _e(oe,Z,ce){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=Rc(""+Z,oe.mode,ce),Z.return=oe,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case G:return ce=sa(Z.type,Z.key,Z.props,null,oe.mode,ce),Ys(ce,Z),ce.return=oe,ce;case O:return Z=Ec(Z,oe.mode,ce),Z.return=oe,Z;case ke:return Z=di(Z),_e(oe,Z,ce)}if(De(Z)||qe(Z))return Z=oi(Z,oe.mode,ce,null),Z.return=oe,Z;if(typeof Z.then=="function")return _e(oe,fa(Z),ce);if(Z.$$typeof===me)return _e(oe,la(oe,Z),ce);ha(oe,Z)}return null}function pe(oe,Z,ce,Re){var $e=Z!==null?Z.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return $e!==null?null:k(oe,Z,""+ce,Re);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case G:return ce.key===$e?F(oe,Z,ce,Re):null;case O:return ce.key===$e?de(oe,Z,ce,Re):null;case ke:return ce=di(ce),pe(oe,Z,ce,Re)}if(De(ce)||qe(ce))return $e!==null?null:Te(oe,Z,ce,Re,null);if(typeof ce.then=="function")return pe(oe,Z,fa(ce),Re);if(ce.$$typeof===me)return pe(oe,Z,la(oe,ce),Re);ha(oe,ce)}return null}function be(oe,Z,ce,Re,$e){if(typeof Re=="string"&&Re!==""||typeof Re=="number"||typeof Re=="bigint")return oe=oe.get(ce)||null,k(Z,oe,""+Re,$e);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case G:return oe=oe.get(Re.key===null?ce:Re.key)||null,F(Z,oe,Re,$e);case O:return oe=oe.get(Re.key===null?ce:Re.key)||null,de(Z,oe,Re,$e);case ke:return Re=di(Re),be(oe,Z,ce,Re,$e)}if(De(Re)||qe(Re))return oe=oe.get(ce)||null,Te(Z,oe,Re,$e,null);if(typeof Re.then=="function")return be(oe,Z,ce,fa(Re),$e);if(Re.$$typeof===me)return be(oe,Z,ce,la(Z,Re),$e);ha(Z,Re)}return null}function Pe(oe,Z,ce,Re){for(var $e=null,st=null,Le=Z,Qe=Z=0,nt=null;Le!==null&&Qe<ce.length;Qe++){Le.index>Qe?(nt=Le,Le=null):nt=Le.sibling;var ot=pe(oe,Le,ce[Qe],Re);if(ot===null){Le===null&&(Le=nt);break}e&&Le&&ot.alternate===null&&t(oe,Le),Z=h(ot,Z,Qe),st===null?$e=ot:st.sibling=ot,st=ot,Le=nt}if(Qe===ce.length)return s(oe,Le),rt&&ir(oe,Qe),$e;if(Le===null){for(;Qe<ce.length;Qe++)Le=_e(oe,ce[Qe],Re),Le!==null&&(Z=h(Le,Z,Qe),st===null?$e=Le:st.sibling=Le,st=Le);return rt&&ir(oe,Qe),$e}for(Le=a(Le);Qe<ce.length;Qe++)nt=be(Le,oe,Qe,ce[Qe],Re),nt!==null&&(e&&nt.alternate!==null&&Le.delete(nt.key===null?Qe:nt.key),Z=h(nt,Z,Qe),st===null?$e=nt:st.sibling=nt,st=nt);return e&&Le.forEach(function(Vr){return t(oe,Vr)}),rt&&ir(oe,Qe),$e}function Ve(oe,Z,ce,Re){if(ce==null)throw Error(o(151));for(var $e=null,st=null,Le=Z,Qe=Z=0,nt=null,ot=ce.next();Le!==null&&!ot.done;Qe++,ot=ce.next()){Le.index>Qe?(nt=Le,Le=null):nt=Le.sibling;var Vr=pe(oe,Le,ot.value,Re);if(Vr===null){Le===null&&(Le=nt);break}e&&Le&&Vr.alternate===null&&t(oe,Le),Z=h(Vr,Z,Qe),st===null?$e=Vr:st.sibling=Vr,st=Vr,Le=nt}if(ot.done)return s(oe,Le),rt&&ir(oe,Qe),$e;if(Le===null){for(;!ot.done;Qe++,ot=ce.next())ot=_e(oe,ot.value,Re),ot!==null&&(Z=h(ot,Z,Qe),st===null?$e=ot:st.sibling=ot,st=ot);return rt&&ir(oe,Qe),$e}for(Le=a(Le);!ot.done;Qe++,ot=ce.next())ot=be(Le,oe,Qe,ot.value,Re),ot!==null&&(e&&ot.alternate!==null&&Le.delete(ot.key===null?Qe:ot.key),Z=h(ot,Z,Qe),st===null?$e=ot:st.sibling=ot,st=ot);return e&&Le.forEach(function(bT){return t(oe,bT)}),rt&&ir(oe,Qe),$e}function pt(oe,Z,ce,Re){if(typeof ce=="object"&&ce!==null&&ce.type===ee&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case G:e:{for(var $e=ce.key;Z!==null;){if(Z.key===$e){if($e=ce.type,$e===ee){if(Z.tag===7){s(oe,Z.sibling),Re=d(Z,ce.props.children),Re.return=oe,oe=Re;break e}}else if(Z.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===ke&&di($e)===Z.type){s(oe,Z.sibling),Re=d(Z,ce.props),Ys(Re,ce),Re.return=oe,oe=Re;break e}s(oe,Z);break}else t(oe,Z);Z=Z.sibling}ce.type===ee?(Re=oi(ce.props.children,oe.mode,Re,ce.key),Re.return=oe,oe=Re):(Re=sa(ce.type,ce.key,ce.props,null,oe.mode,Re),Ys(Re,ce),Re.return=oe,oe=Re)}return v(oe);case O:e:{for($e=ce.key;Z!==null;){if(Z.key===$e)if(Z.tag===4&&Z.stateNode.containerInfo===ce.containerInfo&&Z.stateNode.implementation===ce.implementation){s(oe,Z.sibling),Re=d(Z,ce.children||[]),Re.return=oe,oe=Re;break e}else{s(oe,Z);break}else t(oe,Z);Z=Z.sibling}Re=Ec(ce,oe.mode,Re),Re.return=oe,oe=Re}return v(oe);case ke:return ce=di(ce),pt(oe,Z,ce,Re)}if(De(ce))return Pe(oe,Z,ce,Re);if(qe(ce)){if($e=qe(ce),typeof $e!="function")throw Error(o(150));return ce=$e.call(ce),Ve(oe,Z,ce,Re)}if(typeof ce.then=="function")return pt(oe,Z,fa(ce),Re);if(ce.$$typeof===me)return pt(oe,Z,la(oe,ce),Re);ha(oe,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,Z!==null&&Z.tag===6?(s(oe,Z.sibling),Re=d(Z,ce),Re.return=oe,oe=Re):(s(oe,Z),Re=Rc(ce,oe.mode,Re),Re.return=oe,oe=Re),v(oe)):s(oe,Z)}return function(oe,Z,ce,Re){try{Fs=0;var $e=pt(oe,Z,ce,Re);return Ki=null,$e}catch(Le){if(Le===Ji||Le===ua)throw Le;var st=bn(29,Le,null,oe.mode);return st.lanes=Re,st.return=oe,st}}}var hi=Xh(!0),Jh=Xh(!1),_r=!1;function zc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Lc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function kr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ar(e,t,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(lt&2)!==0){var d=a.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),a.pending=t,t=ia(e),Oh(e,null,s),t}return ra(e,a,t,s),ia(e)}function Xs(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,s|=a,t.lanes=s,Bf(e,s)}}function Bc(e,t){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var d=null,h=null;if(s=s.firstBaseUpdate,s!==null){do{var v={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};h===null?d=h=v:h=h.next=v,s=s.next}while(s!==null);h===null?d=h=t:h=h.next=t}else d=h=t;s={baseState:a.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:a.shared,callbacks:a.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var Hc=!1;function Js(){if(Hc){var e=Xi;if(e!==null)throw e}}function Ks(e,t,s,a){Hc=!1;var d=e.updateQueue;_r=!1;var h=d.firstBaseUpdate,v=d.lastBaseUpdate,k=d.shared.pending;if(k!==null){d.shared.pending=null;var F=k,de=F.next;F.next=null,v===null?h=de:v.next=de,v=F;var Te=e.alternate;Te!==null&&(Te=Te.updateQueue,k=Te.lastBaseUpdate,k!==v&&(k===null?Te.firstBaseUpdate=de:k.next=de,Te.lastBaseUpdate=F))}if(h!==null){var _e=d.baseState;v=0,Te=de=F=null,k=h;do{var pe=k.lane&-536870913,be=pe!==k.lane;if(be?(tt&pe)===pe:(a&pe)===pe){pe!==0&&pe===Yi&&(Hc=!0),Te!==null&&(Te=Te.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Pe=e,Ve=k;pe=t;var pt=s;switch(Ve.tag){case 1:if(Pe=Ve.payload,typeof Pe=="function"){_e=Pe.call(pt,_e,pe);break e}_e=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Ve.payload,pe=typeof Pe=="function"?Pe.call(pt,_e,pe):Pe,pe==null)break e;_e=E({},_e,pe);break e;case 2:_r=!0}}pe=k.callback,pe!==null&&(e.flags|=64,be&&(e.flags|=8192),be=d.callbacks,be===null?d.callbacks=[pe]:be.push(pe))}else be={lane:pe,tag:k.tag,payload:k.payload,callback:k.callback,next:null},Te===null?(de=Te=be,F=_e):Te=Te.next=be,v|=pe;if(k=k.next,k===null){if(k=d.shared.pending,k===null)break;be=k,k=be.next,be.next=null,d.lastBaseUpdate=be,d.shared.pending=null}}while(!0);Te===null&&(F=_e),d.baseState=F,d.firstBaseUpdate=de,d.lastBaseUpdate=Te,h===null&&(d.shared.lanes=0),Ur|=v,e.lanes=v,e.memoizedState=_e}}function Kh(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function Qh(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Kh(s[e],t)}var Qi=x(null),pa=x(0);function Wh(e,t){e=mr,T(pa,e),T(Qi,t),mr=e|t.baseLanes}function qc(){T(pa,mr),T(Qi,Qi.current)}function $c(){mr=pa.current,P(Qi),P(pa)}var Sn=x(null),Un=null;function Nr(e){var t=e.alternate;T(Rt,Rt.current&1),T(Sn,e),Un===null&&(t===null||Qi.current!==null||t.memoizedState!==null)&&(Un=e)}function Vc(e){T(Rt,Rt.current),T(Sn,e),Un===null&&(Un=e)}function Zh(e){e.tag===22?(T(Rt,Rt.current),T(Sn,e),Un===null&&(Un=e)):jr()}function jr(){T(Rt,Rt.current),T(Sn,Sn.current)}function wn(e){P(Sn),Un===e&&(Un=null),P(Rt)}var Rt=x(0);function ma(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||Ku(s)||Qu(s)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ar=0,Je=null,ft=null,At=null,ga=!1,Wi=!1,pi=!1,ya=0,Qs=0,Zi=null,cw=0;function Tt(){throw Error(o(321))}function Gc(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!vn(e[s],t[s]))return!1;return!0}function Fc(e,t,s,a,d,h){return ar=h,Je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,H.H=e===null||e.memoizedState===null?Pp:au,pi=!1,h=s(a,d),pi=!1,Wi&&(h=tp(t,s,a,d)),ep(e),h}function ep(e){H.H=eo;var t=ft!==null&&ft.next!==null;if(ar=0,At=ft=Je=null,ga=!1,Qs=0,Zi=null,t)throw Error(o(300));e===null||Nt||(e=e.dependencies,e!==null&&aa(e)&&(Nt=!0))}function tp(e,t,s,a){Je=e;var d=0;do{if(Wi&&(Zi=null),Qs=0,Wi=!1,25<=d)throw Error(o(301));if(d+=1,At=ft=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}H.H=Ip,h=t(s,a)}while(Wi);return h}function uw(){var e=H.H,t=e.useState()[0];return t=typeof t.then=="function"?Ws(t):t,e=e.useState()[0],(ft!==null?ft.memoizedState:null)!==e&&(Je.flags|=1024),t}function Yc(){var e=ya!==0;return ya=0,e}function Xc(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function Jc(e){if(ga){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ga=!1}ar=0,At=ft=Je=null,Wi=!1,Qs=ya=0,Zi=null}function on(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?Je.memoizedState=At=e:At=At.next=e,At}function Et(){if(ft===null){var e=Je.alternate;e=e!==null?e.memoizedState:null}else e=ft.next;var t=At===null?Je.memoizedState:At.next;if(t!==null)At=t,ft=e;else{if(e===null)throw Je.alternate===null?Error(o(467)):Error(o(310));ft=e,e={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},At===null?Je.memoizedState=At=e:At=At.next=e}return At}function va(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ws(e){var t=Qs;return Qs+=1,Zi===null&&(Zi=[]),e=Gh(Zi,e,t),t=Je,(At===null?t.memoizedState:At.next)===null&&(t=t.alternate,H.H=t===null||t.memoizedState===null?Pp:au),e}function ba(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ws(e);if(e.$$typeof===me)return $t(e)}throw Error(o(438,String(e)))}function Kc(e){var t=null,s=Je.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var a=Je.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=va(),Je.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),a=0;a<e;a++)s[a]=Ne;return t.index++,s}function lr(e,t){return typeof t=="function"?t(e):t}function Sa(e){var t=Et();return Qc(t,ft,e)}function Qc(e,t,s){var a=e.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=s;var d=e.baseQueue,h=a.pending;if(h!==null){if(d!==null){var v=d.next;d.next=h.next,h.next=v}t.baseQueue=d=h,a.pending=null}if(h=e.baseState,d===null)e.memoizedState=h;else{t=d.next;var k=v=null,F=null,de=t,Te=!1;do{var _e=de.lane&-536870913;if(_e!==de.lane?(tt&_e)===_e:(ar&_e)===_e){var pe=de.revertLane;if(pe===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null}),_e===Yi&&(Te=!0);else if((ar&pe)===pe){de=de.next,pe===Yi&&(Te=!0);continue}else _e={lane:0,revertLane:de.revertLane,gesture:null,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},F===null?(k=F=_e,v=h):F=F.next=_e,Je.lanes|=pe,Ur|=pe;_e=de.action,pi&&s(h,_e),h=de.hasEagerState?de.eagerState:s(h,_e)}else pe={lane:_e,revertLane:de.revertLane,gesture:de.gesture,action:de.action,hasEagerState:de.hasEagerState,eagerState:de.eagerState,next:null},F===null?(k=F=pe,v=h):F=F.next=pe,Je.lanes|=_e,Ur|=_e;de=de.next}while(de!==null&&de!==t);if(F===null?v=h:F.next=k,!vn(h,e.memoizedState)&&(Nt=!0,Te&&(s=Xi,s!==null)))throw s;e.memoizedState=h,e.baseState=v,e.baseQueue=F,a.lastRenderedState=h}return d===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Wc(e){var t=Et(),s=t.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var a=s.dispatch,d=s.pending,h=t.memoizedState;if(d!==null){s.pending=null;var v=d=d.next;do h=e(h,v.action),v=v.next;while(v!==d);vn(h,t.memoizedState)||(Nt=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),s.lastRenderedState=h}return[h,a]}function np(e,t,s){var a=Je,d=Et(),h=rt;if(h){if(s===void 0)throw Error(o(407));s=s()}else s=t();var v=!vn((ft||d).memoizedState,s);if(v&&(d.memoizedState=s,Nt=!0),d=d.queue,tu(sp.bind(null,a,d,e),[e]),d.getSnapshot!==t||v||At!==null&&At.memoizedState.tag&1){if(a.flags|=2048,es(9,{destroy:void 0},ip.bind(null,a,d,s,t),null),mt===null)throw Error(o(349));h||(ar&127)!==0||rp(a,t,s)}return s}function rp(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Je.updateQueue,t===null?(t=va(),Je.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function ip(e,t,s,a){t.value=s,t.getSnapshot=a,op(t)&&ap(e)}function sp(e,t,s){return s(function(){op(t)&&ap(e)})}function op(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!vn(e,s)}catch{return!0}}function ap(e){var t=si(e,2);t!==null&&pn(t,e,2)}function Zc(e){var t=on();if(typeof e=="function"){var s=e;if(e=s(),pi){Ue(!0);try{s()}finally{Ue(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:e},t}function lp(e,t,s,a){return e.baseState=s,Qc(e,ft,typeof a=="function"?a:lr)}function dw(e,t,s,a,d){if(Ca(e))throw Error(o(485));if(e=t.action,e!==null){var h={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){h.listeners.push(v)}};H.T!==null?s(!0):h.isTransition=!1,a(h),s=t.pending,s===null?(h.next=t.pending=h,cp(t,h)):(h.next=s.next,t.pending=s.next=h)}}function cp(e,t){var s=t.action,a=t.payload,d=e.state;if(t.isTransition){var h=H.T,v={};H.T=v;try{var k=s(d,a),F=H.S;F!==null&&F(v,k),up(e,t,k)}catch(de){eu(e,t,de)}finally{h!==null&&v.types!==null&&(h.types=v.types),H.T=h}}else try{h=s(d,a),up(e,t,h)}catch(de){eu(e,t,de)}}function up(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(a){dp(e,t,a)},function(a){return eu(e,t,a)}):dp(e,t,s)}function dp(e,t,s){t.status="fulfilled",t.value=s,fp(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,cp(e,s)))}function eu(e,t,s){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=s,fp(t),t=t.next;while(t!==a)}e.action=null}function fp(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function hp(e,t){return t}function pp(e,t){if(rt){var s=mt.formState;if(s!==null){e:{var a=Je;if(rt){if(yt){t:{for(var d=yt,h=Mn;d.nodeType!==8;){if(!h){d=null;break t}if(d=Dn(d.nextSibling),d===null){d=null;break t}}h=d.data,d=h==="F!"||h==="F"?d:null}if(d){yt=Dn(d.nextSibling),a=d.data==="F!";break e}}Rr(a)}a=!1}a&&(t=s[0])}}return s=on(),s.memoizedState=s.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hp,lastRenderedState:t},s.queue=a,s=Mp.bind(null,Je,a),a.dispatch=s,a=Zc(!1),h=ou.bind(null,Je,!1,a.queue),a=on(),d={state:t,dispatch:null,action:e,pending:null},a.queue=d,s=dw.bind(null,Je,d,h,s),d.dispatch=s,a.memoizedState=e,[t,s,!1]}function mp(e){var t=Et();return gp(t,ft,e)}function gp(e,t,s){if(t=Qc(e,t,hp)[0],e=Sa(lr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=Ws(t)}catch(v){throw v===Ji?ua:v}else a=t;t=Et();var d=t.queue,h=d.dispatch;return s!==t.memoizedState&&(Je.flags|=2048,es(9,{destroy:void 0},fw.bind(null,d,s),null)),[a,h,e]}function fw(e,t){e.action=t}function yp(e){var t=Et(),s=ft;if(s!==null)return gp(t,s,e);Et(),t=t.memoizedState,s=Et();var a=s.queue.dispatch;return s.memoizedState=e,[t,a,!1]}function es(e,t,s,a){return e={tag:e,create:s,deps:a,inst:t,next:null},t=Je.updateQueue,t===null&&(t=va(),Je.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,t.lastEffect=e),e}function vp(){return Et().memoizedState}function wa(e,t,s,a){var d=on();Je.flags|=e,d.memoizedState=es(1|t,{destroy:void 0},s,a===void 0?null:a)}function Ta(e,t,s,a){var d=Et();a=a===void 0?null:a;var h=d.memoizedState.inst;ft!==null&&a!==null&&Gc(a,ft.memoizedState.deps)?d.memoizedState=es(t,h,s,a):(Je.flags|=e,d.memoizedState=es(1|t,h,s,a))}function bp(e,t){wa(8390656,8,e,t)}function tu(e,t){Ta(2048,8,e,t)}function hw(e){Je.flags|=4;var t=Je.updateQueue;if(t===null)t=va(),Je.updateQueue=t,t.events=[e];else{var s=t.events;s===null?t.events=[e]:s.push(e)}}function Sp(e){var t=Et().memoizedState;return hw({ref:t,nextImpl:e}),function(){if((lt&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function wp(e,t){return Ta(4,2,e,t)}function Tp(e,t){return Ta(4,4,e,t)}function Cp(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function xp(e,t,s){s=s!=null?s.concat([e]):null,Ta(4,4,Cp.bind(null,t,e),s)}function nu(){}function Rp(e,t){var s=Et();t=t===void 0?null:t;var a=s.memoizedState;return t!==null&&Gc(t,a[1])?a[0]:(s.memoizedState=[e,t],e)}function Ep(e,t){var s=Et();t=t===void 0?null:t;var a=s.memoizedState;if(t!==null&&Gc(t,a[1]))return a[0];if(a=e(),pi){Ue(!0);try{e()}finally{Ue(!1)}}return s.memoizedState=[a,t],a}function ru(e,t,s){return s===void 0||(ar&1073741824)!==0&&(tt&261930)===0?e.memoizedState=t:(e.memoizedState=s,e=_m(),Je.lanes|=e,Ur|=e,s)}function _p(e,t,s,a){return vn(s,t)?s:Qi.current!==null?(e=ru(e,s,a),vn(e,t)||(Nt=!0),e):(ar&42)===0||(ar&1073741824)!==0&&(tt&261930)===0?(Nt=!0,e.memoizedState=s):(e=_m(),Je.lanes|=e,Ur|=e,t)}function kp(e,t,s,a,d){var h=M.p;M.p=h!==0&&8>h?h:8;var v=H.T,k={};H.T=k,ou(e,!1,t,s);try{var F=d(),de=H.S;if(de!==null&&de(k,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var Te=lw(F,a);Zs(e,t,Te,xn(e))}else Zs(e,t,a,xn(e))}catch(_e){Zs(e,t,{then:function(){},status:"rejected",reason:_e},xn())}finally{M.p=h,v!==null&&k.types!==null&&(v.types=k.types),H.T=v}}function pw(){}function iu(e,t,s,a){if(e.tag!==5)throw Error(o(476));var d=Ap(e).queue;kp(e,d,t,X,s===null?pw:function(){return Np(e),s(a)})}function Ap(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:X},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Np(e){var t=Ap(e);t.next===null&&(t=e.alternate.memoizedState),Zs(e,t.next.queue,{},xn())}function su(){return $t(yo)}function jp(){return Et().memoizedState}function Op(){return Et().memoizedState}function mw(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=xn();e=kr(s);var a=Ar(t,e,s);a!==null&&(pn(a,t,s),Xs(a,t,s)),t={cache:Uc()},e.payload=t;return}t=t.return}}function gw(e,t,s){var a=xn();s={lane:a,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Ca(e)?Up(t,s):(s=Cc(e,t,s,a),s!==null&&(pn(s,e,a),Dp(s,t,a)))}function Mp(e,t,s){var a=xn();Zs(e,t,s,a)}function Zs(e,t,s,a){var d={lane:a,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Ca(e))Up(t,d);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var v=t.lastRenderedState,k=h(v,s);if(d.hasEagerState=!0,d.eagerState=k,vn(k,v))return ra(e,t,d,0),mt===null&&na(),!1}catch{}if(s=Cc(e,t,d,a),s!==null)return pn(s,e,a),Dp(s,t,a),!0}return!1}function ou(e,t,s,a){if(a={lane:2,revertLane:zu(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ca(e)){if(t)throw Error(o(479))}else t=Cc(e,s,a,2),t!==null&&pn(t,e,2)}function Ca(e){var t=e.alternate;return e===Je||t!==null&&t===Je}function Up(e,t){Wi=ga=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Dp(e,t,s){if((s&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,s|=a,t.lanes=s,Bf(e,s)}}var eo={readContext:$t,use:ba,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt};eo.useEffectEvent=Tt;var Pp={readContext:$t,use:ba,useCallback:function(e,t){return on().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:bp,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,wa(4194308,4,Cp.bind(null,t,e),s)},useLayoutEffect:function(e,t){return wa(4194308,4,e,t)},useInsertionEffect:function(e,t){wa(4,2,e,t)},useMemo:function(e,t){var s=on();t=t===void 0?null:t;var a=e();if(pi){Ue(!0);try{e()}finally{Ue(!1)}}return s.memoizedState=[a,t],a},useReducer:function(e,t,s){var a=on();if(s!==void 0){var d=s(t);if(pi){Ue(!0);try{s(t)}finally{Ue(!1)}}}else d=t;return a.memoizedState=a.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},a.queue=e,e=e.dispatch=gw.bind(null,Je,e),[a.memoizedState,e]},useRef:function(e){var t=on();return e={current:e},t.memoizedState=e},useState:function(e){e=Zc(e);var t=e.queue,s=Mp.bind(null,Je,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:nu,useDeferredValue:function(e,t){var s=on();return ru(s,e,t)},useTransition:function(){var e=Zc(!1);return e=kp.bind(null,Je,e.queue,!0,!1),on().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var a=Je,d=on();if(rt){if(s===void 0)throw Error(o(407));s=s()}else{if(s=t(),mt===null)throw Error(o(349));(tt&127)!==0||rp(a,t,s)}d.memoizedState=s;var h={value:s,getSnapshot:t};return d.queue=h,bp(sp.bind(null,a,h,e),[e]),a.flags|=2048,es(9,{destroy:void 0},ip.bind(null,a,h,s,t),null),s},useId:function(){var e=on(),t=mt.identifierPrefix;if(rt){var s=Yn,a=Fn;s=(a&~(1<<32-ze(a)-1)).toString(32)+s,t="_"+t+"R_"+s,s=ya++,0<s&&(t+="H"+s.toString(32)),t+="_"}else s=cw++,t="_"+t+"r_"+s.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:su,useFormState:pp,useActionState:pp,useOptimistic:function(e){var t=on();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=ou.bind(null,Je,!0,s),s.dispatch=t,[e,t]},useMemoCache:Kc,useCacheRefresh:function(){return on().memoizedState=mw.bind(null,Je)},useEffectEvent:function(e){var t=on(),s={impl:e};return t.memoizedState=s,function(){if((lt&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}},au={readContext:$t,use:ba,useCallback:Rp,useContext:$t,useEffect:tu,useImperativeHandle:xp,useInsertionEffect:wp,useLayoutEffect:Tp,useMemo:Ep,useReducer:Sa,useRef:vp,useState:function(){return Sa(lr)},useDebugValue:nu,useDeferredValue:function(e,t){var s=Et();return _p(s,ft.memoizedState,e,t)},useTransition:function(){var e=Sa(lr)[0],t=Et().memoizedState;return[typeof e=="boolean"?e:Ws(e),t]},useSyncExternalStore:np,useId:jp,useHostTransitionStatus:su,useFormState:mp,useActionState:mp,useOptimistic:function(e,t){var s=Et();return lp(s,ft,e,t)},useMemoCache:Kc,useCacheRefresh:Op};au.useEffectEvent=Sp;var Ip={readContext:$t,use:ba,useCallback:Rp,useContext:$t,useEffect:tu,useImperativeHandle:xp,useInsertionEffect:wp,useLayoutEffect:Tp,useMemo:Ep,useReducer:Wc,useRef:vp,useState:function(){return Wc(lr)},useDebugValue:nu,useDeferredValue:function(e,t){var s=Et();return ft===null?ru(s,e,t):_p(s,ft.memoizedState,e,t)},useTransition:function(){var e=Wc(lr)[0],t=Et().memoizedState;return[typeof e=="boolean"?e:Ws(e),t]},useSyncExternalStore:np,useId:jp,useHostTransitionStatus:su,useFormState:yp,useActionState:yp,useOptimistic:function(e,t){var s=Et();return ft!==null?lp(s,ft,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:Kc,useCacheRefresh:Op};Ip.useEffectEvent=Sp;function lu(e,t,s,a){t=e.memoizedState,s=s(a,t),s=s==null?t:E({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var cu={enqueueSetState:function(e,t,s){e=e._reactInternals;var a=xn(),d=kr(a);d.payload=t,s!=null&&(d.callback=s),t=Ar(e,d,a),t!==null&&(pn(t,e,a),Xs(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var a=xn(),d=kr(a);d.tag=1,d.payload=t,s!=null&&(d.callback=s),t=Ar(e,d,a),t!==null&&(pn(t,e,a),Xs(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=xn(),a=kr(s);a.tag=2,t!=null&&(a.callback=t),t=Ar(e,a,s),t!==null&&(pn(t,e,s),Xs(t,e,s))}};function zp(e,t,s,a,d,h,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,h,v):t.prototype&&t.prototype.isPureReactComponent?!Bs(s,a)||!Bs(d,h):!0}function Lp(e,t,s,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,a),t.state!==e&&cu.enqueueReplaceState(t,t.state,null)}function mi(e,t){var s=t;if("ref"in t){s={};for(var a in t)a!=="ref"&&(s[a]=t[a])}if(e=e.defaultProps){s===t&&(s=E({},s));for(var d in e)s[d]===void 0&&(s[d]=e[d])}return s}function Bp(e){ta(e)}function Hp(e){console.error(e)}function qp(e){ta(e)}function xa(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function $p(e,t,s){try{var a=e.onCaughtError;a(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function uu(e,t,s){return s=kr(s),s.tag=3,s.payload={element:null},s.callback=function(){xa(e,t)},s}function Vp(e){return e=kr(e),e.tag=3,e}function Gp(e,t,s,a){var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var h=a.value;e.payload=function(){return d(h)},e.callback=function(){$p(t,s,a)}}var v=s.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){$p(t,s,a),typeof d!="function"&&(Dr===null?Dr=new Set([this]):Dr.add(this));var k=a.stack;this.componentDidCatch(a.value,{componentStack:k!==null?k:""})})}function yw(e,t,s,a,d){if(s.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=s.alternate,t!==null&&Fi(t,s,d,!0),s=Sn.current,s!==null){switch(s.tag){case 31:case 13:return Un===null?Pa():s.alternate===null&&Ct===0&&(Ct=3),s.flags&=-257,s.flags|=65536,s.lanes=d,a===da?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([a]):t.add(a),Du(e,a,d)),!1;case 22:return s.flags|=65536,a===da?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([a]):s.add(a)),Du(e,a,d)),!1}throw Error(o(435,s.tag))}return Du(e,a,d),Pa(),!1}if(rt)return t=Sn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,a!==Ac&&(e=Error(o(422),{cause:a}),$s(Nn(e,s)))):(a!==Ac&&(t=Error(o(423),{cause:a}),$s(Nn(t,s))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,a=Nn(a,s),d=uu(e.stateNode,a,d),Bc(e,d),Ct!==4&&(Ct=2)),!1;var h=Error(o(520),{cause:a});if(h=Nn(h,s),lo===null?lo=[h]:lo.push(h),Ct!==4&&(Ct=2),t===null)return!0;a=Nn(a,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=d&-d,s.lanes|=e,e=uu(s.stateNode,a,e),Bc(s,e),!1;case 1:if(t=s.type,h=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Dr===null||!Dr.has(h))))return s.flags|=65536,d&=-d,s.lanes|=d,d=Vp(d),Gp(d,e,s,a),Bc(s,d),!1}s=s.return}while(s!==null);return!1}var du=Error(o(461)),Nt=!1;function Vt(e,t,s,a){t.child=e===null?Jh(t,null,s,a):hi(t,e.child,s,a)}function Fp(e,t,s,a,d){s=s.render;var h=t.ref;if("ref"in a){var v={};for(var k in a)k!=="ref"&&(v[k]=a[k])}else v=a;return ci(t),a=Fc(e,t,s,v,h,d),k=Yc(),e!==null&&!Nt?(Xc(e,t,d),cr(e,t,d)):(rt&&k&&_c(t),t.flags|=1,Vt(e,t,a,d),t.child)}function Yp(e,t,s,a,d){if(e===null){var h=s.type;return typeof h=="function"&&!xc(h)&&h.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=h,Xp(e,t,h,a,d)):(e=sa(s.type,null,a,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!bu(e,d)){var v=h.memoizedProps;if(s=s.compare,s=s!==null?s:Bs,s(v,a)&&e.ref===t.ref)return cr(e,t,d)}return t.flags|=1,e=rr(h,a),e.ref=t.ref,e.return=t,t.child=e}function Xp(e,t,s,a,d){if(e!==null){var h=e.memoizedProps;if(Bs(h,a)&&e.ref===t.ref)if(Nt=!1,t.pendingProps=a=h,bu(e,d))(e.flags&131072)!==0&&(Nt=!0);else return t.lanes=e.lanes,cr(e,t,d)}return fu(e,t,s,a,d)}function Jp(e,t,s,a){var d=a.children,h=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((t.flags&128)!==0){if(h=h!==null?h.baseLanes|s:s,e!==null){for(a=t.child=e.child,d=0;a!==null;)d=d|a.lanes|a.childLanes,a=a.sibling;a=d&~h}else a=0,t.child=null;return Kp(e,t,h,s,a)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&ca(t,h!==null?h.cachePool:null),h!==null?Wh(t,h):qc(),Zh(t);else return a=t.lanes=536870912,Kp(e,t,h!==null?h.baseLanes|s:s,s,a)}else h!==null?(ca(t,h.cachePool),Wh(t,h),jr(),t.memoizedState=null):(e!==null&&ca(t,null),qc(),jr());return Vt(e,t,d,s),t.child}function to(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Kp(e,t,s,a,d){var h=Pc();return h=h===null?null:{parent:kt._currentValue,pool:h},t.memoizedState={baseLanes:s,cachePool:h},e!==null&&ca(t,null),qc(),Zh(t),e!==null&&Fi(e,t,a,!0),t.childLanes=d,null}function Ra(e,t){return t=_a({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Qp(e,t,s){return hi(t,e.child,null,s),e=Ra(t,t.pendingProps),e.flags|=2,wn(t),t.memoizedState=null,e}function vw(e,t,s){var a=t.pendingProps,d=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(rt){if(a.mode==="hidden")return e=Ra(t,a),t.lanes=536870912,to(null,e);if(Vc(t),(e=yt)?(e=cg(e,Mn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Cr!==null?{id:Fn,overflow:Yn}:null,retryLane:536870912,hydrationErrors:null},s=Uh(e),s.return=t,t.child=s,qt=t,yt=null)):e=null,e===null)throw Rr(t);return t.lanes=536870912,null}return Ra(t,a)}var h=e.memoizedState;if(h!==null){var v=h.dehydrated;if(Vc(t),d)if(t.flags&256)t.flags&=-257,t=Qp(e,t,s);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(Nt||Fi(e,t,s,!1),d=(s&e.childLanes)!==0,Nt||d){if(a=mt,a!==null&&(v=Hf(a,s),v!==0&&v!==h.retryLane))throw h.retryLane=v,si(e,v),pn(a,e,v),du;Pa(),t=Qp(e,t,s)}else e=h.treeContext,yt=Dn(v.nextSibling),qt=t,rt=!0,xr=null,Mn=!1,e!==null&&Ih(t,e),t=Ra(t,a),t.flags|=4096;return t}return e=rr(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ea(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(o(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function fu(e,t,s,a,d){return ci(t),s=Fc(e,t,s,a,void 0,d),a=Yc(),e!==null&&!Nt?(Xc(e,t,d),cr(e,t,d)):(rt&&a&&_c(t),t.flags|=1,Vt(e,t,s,d),t.child)}function Wp(e,t,s,a,d,h){return ci(t),t.updateQueue=null,s=tp(t,a,s,d),ep(e),a=Yc(),e!==null&&!Nt?(Xc(e,t,h),cr(e,t,h)):(rt&&a&&_c(t),t.flags|=1,Vt(e,t,s,h),t.child)}function Zp(e,t,s,a,d){if(ci(t),t.stateNode===null){var h=qi,v=s.contextType;typeof v=="object"&&v!==null&&(h=$t(v)),h=new s(a,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=cu,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=a,h.state=t.memoizedState,h.refs={},zc(t),v=s.contextType,h.context=typeof v=="object"&&v!==null?$t(v):qi,h.state=t.memoizedState,v=s.getDerivedStateFromProps,typeof v=="function"&&(lu(t,s,v,a),h.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(v=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),v!==h.state&&cu.enqueueReplaceState(h,h.state,null),Ks(t,a,h,d),Js(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){h=t.stateNode;var k=t.memoizedProps,F=mi(s,k);h.props=F;var de=h.context,Te=s.contextType;v=qi,typeof Te=="object"&&Te!==null&&(v=$t(Te));var _e=s.getDerivedStateFromProps;Te=typeof _e=="function"||typeof h.getSnapshotBeforeUpdate=="function",k=t.pendingProps!==k,Te||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(k||de!==v)&&Lp(t,h,a,v),_r=!1;var pe=t.memoizedState;h.state=pe,Ks(t,a,h,d),Js(),de=t.memoizedState,k||pe!==de||_r?(typeof _e=="function"&&(lu(t,s,_e,a),de=t.memoizedState),(F=_r||zp(t,s,F,a,pe,de,v))?(Te||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=de),h.props=a,h.state=de,h.context=v,a=F):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{h=t.stateNode,Lc(e,t),v=t.memoizedProps,Te=mi(s,v),h.props=Te,_e=t.pendingProps,pe=h.context,de=s.contextType,F=qi,typeof de=="object"&&de!==null&&(F=$t(de)),k=s.getDerivedStateFromProps,(de=typeof k=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(v!==_e||pe!==F)&&Lp(t,h,a,F),_r=!1,pe=t.memoizedState,h.state=pe,Ks(t,a,h,d),Js();var be=t.memoizedState;v!==_e||pe!==be||_r||e!==null&&e.dependencies!==null&&aa(e.dependencies)?(typeof k=="function"&&(lu(t,s,k,a),be=t.memoizedState),(Te=_r||zp(t,s,Te,a,pe,be,F)||e!==null&&e.dependencies!==null&&aa(e.dependencies))?(de||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(a,be,F),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(a,be,F)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||v===e.memoizedProps&&pe===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&pe===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=be),h.props=a,h.state=be,h.context=F,a=Te):(typeof h.componentDidUpdate!="function"||v===e.memoizedProps&&pe===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&pe===e.memoizedState||(t.flags|=1024),a=!1)}return h=a,Ea(e,t),a=(t.flags&128)!==0,h||a?(h=t.stateNode,s=a&&typeof s.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&a?(t.child=hi(t,e.child,null,d),t.child=hi(t,null,s,d)):Vt(e,t,s,d),t.memoizedState=h.state,e=t.child):e=cr(e,t,d),e}function em(e,t,s,a){return ai(),t.flags|=256,Vt(e,t,s,a),t.child}var hu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pu(e){return{baseLanes:e,cachePool:$h()}}function mu(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=Cn),e}function tm(e,t,s){var a=t.pendingProps,d=!1,h=(t.flags&128)!==0,v;if((v=h)||(v=e!==null&&e.memoizedState===null?!1:(Rt.current&2)!==0),v&&(d=!0,t.flags&=-129),v=(t.flags&32)!==0,t.flags&=-33,e===null){if(rt){if(d?Nr(t):jr(),(e=yt)?(e=cg(e,Mn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Cr!==null?{id:Fn,overflow:Yn}:null,retryLane:536870912,hydrationErrors:null},s=Uh(e),s.return=t,t.child=s,qt=t,yt=null)):e=null,e===null)throw Rr(t);return Qu(e)?t.lanes=32:t.lanes=536870912,null}var k=a.children;return a=a.fallback,d?(jr(),d=t.mode,k=_a({mode:"hidden",children:k},d),a=oi(a,d,s,null),k.return=t,a.return=t,k.sibling=a,t.child=k,a=t.child,a.memoizedState=pu(s),a.childLanes=mu(e,v,s),t.memoizedState=hu,to(null,a)):(Nr(t),gu(t,k))}var F=e.memoizedState;if(F!==null&&(k=F.dehydrated,k!==null)){if(h)t.flags&256?(Nr(t),t.flags&=-257,t=yu(e,t,s)):t.memoizedState!==null?(jr(),t.child=e.child,t.flags|=128,t=null):(jr(),k=a.fallback,d=t.mode,a=_a({mode:"visible",children:a.children},d),k=oi(k,d,s,null),k.flags|=2,a.return=t,k.return=t,a.sibling=k,t.child=a,hi(t,e.child,null,s),a=t.child,a.memoizedState=pu(s),a.childLanes=mu(e,v,s),t.memoizedState=hu,t=to(null,a));else if(Nr(t),Qu(k)){if(v=k.nextSibling&&k.nextSibling.dataset,v)var de=v.dgst;v=de,a=Error(o(419)),a.stack="",a.digest=v,$s({value:a,source:null,stack:null}),t=yu(e,t,s)}else if(Nt||Fi(e,t,s,!1),v=(s&e.childLanes)!==0,Nt||v){if(v=mt,v!==null&&(a=Hf(v,s),a!==0&&a!==F.retryLane))throw F.retryLane=a,si(e,a),pn(v,e,a),du;Ku(k)||Pa(),t=yu(e,t,s)}else Ku(k)?(t.flags|=192,t.child=e.child,t=null):(e=F.treeContext,yt=Dn(k.nextSibling),qt=t,rt=!0,xr=null,Mn=!1,e!==null&&Ih(t,e),t=gu(t,a.children),t.flags|=4096);return t}return d?(jr(),k=a.fallback,d=t.mode,F=e.child,de=F.sibling,a=rr(F,{mode:"hidden",children:a.children}),a.subtreeFlags=F.subtreeFlags&65011712,de!==null?k=rr(de,k):(k=oi(k,d,s,null),k.flags|=2),k.return=t,a.return=t,a.sibling=k,t.child=a,to(null,a),a=t.child,k=e.child.memoizedState,k===null?k=pu(s):(d=k.cachePool,d!==null?(F=kt._currentValue,d=d.parent!==F?{parent:F,pool:F}:d):d=$h(),k={baseLanes:k.baseLanes|s,cachePool:d}),a.memoizedState=k,a.childLanes=mu(e,v,s),t.memoizedState=hu,to(e.child,a)):(Nr(t),s=e.child,e=s.sibling,s=rr(s,{mode:"visible",children:a.children}),s.return=t,s.sibling=null,e!==null&&(v=t.deletions,v===null?(t.deletions=[e],t.flags|=16):v.push(e)),t.child=s,t.memoizedState=null,s)}function gu(e,t){return t=_a({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function _a(e,t){return e=bn(22,e,null,t),e.lanes=0,e}function yu(e,t,s){return hi(t,e.child,null,s),e=gu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function nm(e,t,s){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Oc(e.return,t,s)}function vu(e,t,s,a,d,h){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:d,treeForkCount:h}:(v.isBackwards=t,v.rendering=null,v.renderingStartTime=0,v.last=a,v.tail=s,v.tailMode=d,v.treeForkCount=h)}function rm(e,t,s){var a=t.pendingProps,d=a.revealOrder,h=a.tail;a=a.children;var v=Rt.current,k=(v&2)!==0;if(k?(v=v&1|2,t.flags|=128):v&=1,T(Rt,v),Vt(e,t,a,s),a=rt?qs:0,!k&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&nm(e,s,t);else if(e.tag===19)nm(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(s=t.child,d=null;s!==null;)e=s.alternate,e!==null&&ma(e)===null&&(d=s),s=s.sibling;s=d,s===null?(d=t.child,t.child=null):(d=s.sibling,s.sibling=null),vu(t,!1,d,s,h,a);break;case"backwards":case"unstable_legacy-backwards":for(s=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&ma(e)===null){t.child=d;break}e=d.sibling,d.sibling=s,s=d,d=e}vu(t,!0,s,null,h,a);break;case"together":vu(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function cr(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Ur|=t.lanes,(s&t.childLanes)===0)if(e!==null){if(Fi(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,s=rr(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=rr(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function bu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&aa(e)))}function bw(e,t,s){switch(t.tag){case 3:w(t,t.stateNode.containerInfo),Er(t,kt,e.memoizedState.cache),ai();break;case 27:case 5:A(t);break;case 4:w(t,t.stateNode.containerInfo);break;case 10:Er(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Vc(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(Nr(t),t.flags|=128,null):(s&t.child.childLanes)!==0?tm(e,t,s):(Nr(t),e=cr(e,t,s),e!==null?e.sibling:null);Nr(t);break;case 19:var d=(e.flags&128)!==0;if(a=(s&t.childLanes)!==0,a||(Fi(e,t,s,!1),a=(s&t.childLanes)!==0),d){if(a)return rm(e,t,s);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),T(Rt,Rt.current),a)break;return null;case 22:return t.lanes=0,Jp(e,t,s,t.pendingProps);case 24:Er(t,kt,e.memoizedState.cache)}return cr(e,t,s)}function im(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)Nt=!0;else{if(!bu(e,s)&&(t.flags&128)===0)return Nt=!1,bw(e,t,s);Nt=(e.flags&131072)!==0}else Nt=!1,rt&&(t.flags&1048576)!==0&&Ph(t,qs,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=di(t.elementType),t.type=e,typeof e=="function")xc(e)?(a=mi(e,a),t.tag=1,t=Zp(null,t,e,a,s)):(t.tag=0,t=fu(null,t,e,a,s));else{if(e!=null){var d=e.$$typeof;if(d===Q){t.tag=11,t=Fp(null,t,e,a,s);break e}else if(d===ue){t.tag=14,t=Yp(null,t,e,a,s);break e}}throw t=xe(e)||e,Error(o(306,t,""))}}return t;case 0:return fu(e,t,t.type,t.pendingProps,s);case 1:return a=t.type,d=mi(a,t.pendingProps),Zp(e,t,a,d,s);case 3:e:{if(w(t,t.stateNode.containerInfo),e===null)throw Error(o(387));a=t.pendingProps;var h=t.memoizedState;d=h.element,Lc(e,t),Ks(t,a,null,s);var v=t.memoizedState;if(a=v.cache,Er(t,kt,a),a!==h.cache&&Mc(t,[kt],s,!0),Js(),a=v.element,h.isDehydrated)if(h={element:a,isDehydrated:!1,cache:v.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=em(e,t,a,s);break e}else if(a!==d){d=Nn(Error(o(424)),t),$s(d),t=em(e,t,a,s);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,yt=Dn(e.firstChild),qt=t,rt=!0,xr=null,Mn=!0,s=Jh(t,null,a,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(ai(),a===d){t=cr(e,t,s);break e}Vt(e,t,a,s)}t=t.child}return t;case 26:return Ea(e,t),e===null?(s=mg(t.type,null,t.pendingProps,null))?t.memoizedState=s:rt||(s=t.type,e=t.pendingProps,a=$a(_.current).createElement(s),a[Ht]=t,a[ln]=e,Gt(a,s,e),zt(a),t.stateNode=a):t.memoizedState=mg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return A(t),e===null&&rt&&(a=t.stateNode=fg(t.type,t.pendingProps,_.current),qt=t,Mn=!0,d=yt,Lr(t.type)?(Wu=d,yt=Dn(a.firstChild)):yt=d),Vt(e,t,t.pendingProps.children,s),Ea(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&rt&&((d=a=yt)&&(a=Jw(a,t.type,t.pendingProps,Mn),a!==null?(t.stateNode=a,qt=t,yt=Dn(a.firstChild),Mn=!1,d=!0):d=!1),d||Rr(t)),A(t),d=t.type,h=t.pendingProps,v=e!==null?e.memoizedProps:null,a=h.children,Yu(d,h)?a=null:v!==null&&Yu(d,v)&&(t.flags|=32),t.memoizedState!==null&&(d=Fc(e,t,uw,null,null,s),yo._currentValue=d),Ea(e,t),Vt(e,t,a,s),t.child;case 6:return e===null&&rt&&((e=s=yt)&&(s=Kw(s,t.pendingProps,Mn),s!==null?(t.stateNode=s,qt=t,yt=null,e=!0):e=!1),e||Rr(t)),null;case 13:return tm(e,t,s);case 4:return w(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=hi(t,null,a,s):Vt(e,t,a,s),t.child;case 11:return Fp(e,t,t.type,t.pendingProps,s);case 7:return Vt(e,t,t.pendingProps,s),t.child;case 8:return Vt(e,t,t.pendingProps.children,s),t.child;case 12:return Vt(e,t,t.pendingProps.children,s),t.child;case 10:return a=t.pendingProps,Er(t,t.type,a.value),Vt(e,t,a.children,s),t.child;case 9:return d=t.type._context,a=t.pendingProps.children,ci(t),d=$t(d),a=a(d),t.flags|=1,Vt(e,t,a,s),t.child;case 14:return Yp(e,t,t.type,t.pendingProps,s);case 15:return Xp(e,t,t.type,t.pendingProps,s);case 19:return rm(e,t,s);case 31:return vw(e,t,s);case 22:return Jp(e,t,s,t.pendingProps);case 24:return ci(t),a=$t(kt),e===null?(d=Pc(),d===null&&(d=mt,h=Uc(),d.pooledCache=h,h.refCount++,h!==null&&(d.pooledCacheLanes|=s),d=h),t.memoizedState={parent:a,cache:d},zc(t),Er(t,kt,d)):((e.lanes&s)!==0&&(Lc(e,t),Ks(t,null,null,s),Js()),d=e.memoizedState,h=t.memoizedState,d.parent!==a?(d={parent:a,cache:a},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),Er(t,kt,a)):(a=h.cache,Er(t,kt,a),a!==d.cache&&Mc(t,[kt],s,!0))),Vt(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function ur(e){e.flags|=4}function Su(e,t,s,a,d){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(jm())e.flags|=8192;else throw fi=da,Ic}else e.flags&=-16777217}function sm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Sg(t))if(jm())e.flags|=8192;else throw fi=da,Ic}function ka(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?zf():536870912,e.lanes|=t,is|=t)}function no(e,t){if(!rt)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(t)for(var d=e.child;d!==null;)s|=d.lanes|d.childLanes,a|=d.subtreeFlags&65011712,a|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)s|=d.lanes|d.childLanes,a|=d.subtreeFlags,a|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=a,e.childLanes=s,t}function Sw(e,t,s){var a=t.pendingProps;switch(kc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(t),null;case 1:return vt(t),null;case 3:return s=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),or(kt),R(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Gi(t)?ur(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Nc())),vt(t),null;case 26:var d=t.type,h=t.memoizedState;return e===null?(ur(t),h!==null?(vt(t),sm(t,h)):(vt(t),Su(t,d,null,a,s))):h?h!==e.memoizedState?(ur(t),vt(t),sm(t,h)):(vt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&ur(t),vt(t),Su(t,d,e,a,s)),null;case 27:if(q(t),s=_.current,d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&ur(t);else{if(!a){if(t.stateNode===null)throw Error(o(166));return vt(t),null}e=b.current,Gi(t)?zh(t):(e=fg(d,a,s),t.stateNode=e,ur(t))}return vt(t),null;case 5:if(q(t),d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&ur(t);else{if(!a){if(t.stateNode===null)throw Error(o(166));return vt(t),null}if(h=b.current,Gi(t))zh(t);else{var v=$a(_.current);switch(h){case 1:h=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:h=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":h=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":h=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":h=v.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof a.is=="string"?v.createElement("select",{is:a.is}):v.createElement("select"),a.multiple?h.multiple=!0:a.size&&(h.size=a.size);break;default:h=typeof a.is=="string"?v.createElement(d,{is:a.is}):v.createElement(d)}}h[Ht]=t,h[ln]=a;e:for(v=t.child;v!==null;){if(v.tag===5||v.tag===6)h.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}t.stateNode=h;e:switch(Gt(h,d,a),d){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&ur(t)}}return vt(t),Su(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,s),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&ur(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(o(166));if(e=_.current,Gi(t)){if(e=t.stateNode,s=t.memoizedProps,a=null,d=qt,d!==null)switch(d.tag){case 27:case 5:a=d.memoizedProps}e[Ht]=t,e=!!(e.nodeValue===s||a!==null&&a.suppressHydrationWarning===!0||tg(e.nodeValue,s)),e||Rr(t,!0)}else e=$a(e).createTextNode(a),e[Ht]=t,t.stateNode=e}return vt(t),null;case 31:if(s=t.memoizedState,e===null||e.memoizedState!==null){if(a=Gi(t),s!==null){if(e===null){if(!a)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[Ht]=t}else ai(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;vt(t),e=!1}else s=Nc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return t.flags&256?(wn(t),t):(wn(t),null);if((t.flags&128)!==0)throw Error(o(558))}return vt(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Gi(t),a!==null&&a.dehydrated!==null){if(e===null){if(!d)throw Error(o(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));d[Ht]=t}else ai(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;vt(t),d=!1}else d=Nc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return t.flags&256?(wn(t),t):(wn(t),null)}return wn(t),(t.flags&128)!==0?(t.lanes=s,t):(s=a!==null,e=e!==null&&e.memoizedState!==null,s&&(a=t.child,d=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(d=a.alternate.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==d&&(a.flags|=2048)),s!==e&&s&&(t.child.flags|=8192),ka(t,t.updateQueue),vt(t),null);case 4:return R(),e===null&&qu(t.stateNode.containerInfo),vt(t),null;case 10:return or(t.type),vt(t),null;case 19:if(P(Rt),a=t.memoizedState,a===null)return vt(t),null;if(d=(t.flags&128)!==0,h=a.rendering,h===null)if(d)no(a,!1);else{if(Ct!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=ma(e),h!==null){for(t.flags|=128,no(a,!1),e=h.updateQueue,t.updateQueue=e,ka(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)Mh(s,e),s=s.sibling;return T(Rt,Rt.current&1|2),rt&&ir(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&He()>Ma&&(t.flags|=128,d=!0,no(a,!1),t.lanes=4194304)}else{if(!d)if(e=ma(h),e!==null){if(t.flags|=128,d=!0,e=e.updateQueue,t.updateQueue=e,ka(t,e),no(a,!0),a.tail===null&&a.tailMode==="hidden"&&!h.alternate&&!rt)return vt(t),null}else 2*He()-a.renderingStartTime>Ma&&s!==536870912&&(t.flags|=128,d=!0,no(a,!1),t.lanes=4194304);a.isBackwards?(h.sibling=t.child,t.child=h):(e=a.last,e!==null?e.sibling=h:t.child=h,a.last=h)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=He(),e.sibling=null,s=Rt.current,T(Rt,d?s&1|2:s&1),rt&&ir(t,a.treeForkCount),e):(vt(t),null);case 22:case 23:return wn(t),$c(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(s&536870912)!==0&&(t.flags&128)===0&&(vt(t),t.subtreeFlags&6&&(t.flags|=8192)):vt(t),s=t.updateQueue,s!==null&&ka(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==s&&(t.flags|=2048),e!==null&&P(ui),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),or(kt),vt(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function ww(e,t){switch(kc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return or(kt),R(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return q(t),null;case 31:if(t.memoizedState!==null){if(wn(t),t.alternate===null)throw Error(o(340));ai()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(wn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));ai()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return P(Rt),null;case 4:return R(),null;case 10:return or(t.type),null;case 22:case 23:return wn(t),$c(),e!==null&&P(ui),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return or(kt),null;case 25:return null;default:return null}}function om(e,t){switch(kc(t),t.tag){case 3:or(kt),R();break;case 26:case 27:case 5:q(t);break;case 4:R();break;case 31:t.memoizedState!==null&&wn(t);break;case 13:wn(t);break;case 19:P(Rt);break;case 10:or(t.type);break;case 22:case 23:wn(t),$c(),e!==null&&P(ui);break;case 24:or(kt)}}function ro(e,t){try{var s=t.updateQueue,a=s!==null?s.lastEffect:null;if(a!==null){var d=a.next;s=d;do{if((s.tag&e)===e){a=void 0;var h=s.create,v=s.inst;a=h(),v.destroy=a}s=s.next}while(s!==d)}}catch(k){dt(t,t.return,k)}}function Or(e,t,s){try{var a=t.updateQueue,d=a!==null?a.lastEffect:null;if(d!==null){var h=d.next;a=h;do{if((a.tag&e)===e){var v=a.inst,k=v.destroy;if(k!==void 0){v.destroy=void 0,d=t;var F=s,de=k;try{de()}catch(Te){dt(d,F,Te)}}}a=a.next}while(a!==h)}}catch(Te){dt(t,t.return,Te)}}function am(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{Qh(t,s)}catch(a){dt(e,e.return,a)}}}function lm(e,t,s){s.props=mi(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(a){dt(e,t,a)}}function io(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof s=="function"?e.refCleanup=s(a):s.current=a}}catch(d){dt(e,t,d)}}function Xn(e,t){var s=e.ref,a=e.refCleanup;if(s!==null)if(typeof a=="function")try{a()}catch(d){dt(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(d){dt(e,t,d)}else s.current=null}function cm(e){var t=e.type,s=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&a.focus();break e;case"img":s.src?a.src=s.src:s.srcSet&&(a.srcset=s.srcSet)}}catch(d){dt(e,e.return,d)}}function wu(e,t,s){try{var a=e.stateNode;$w(a,e.type,s,t),a[ln]=t}catch(d){dt(e,e.return,d)}}function um(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Lr(e.type)||e.tag===4}function Tu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||um(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Lr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Cu(e,t,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=tr));else if(a!==4&&(a===27&&Lr(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(Cu(e,t,s),e=e.sibling;e!==null;)Cu(e,t,s),e=e.sibling}function Aa(e,t,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(a!==4&&(a===27&&Lr(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Aa(e,t,s),e=e.sibling;e!==null;)Aa(e,t,s),e=e.sibling}function dm(e){var t=e.stateNode,s=e.memoizedProps;try{for(var a=e.type,d=t.attributes;d.length;)t.removeAttributeNode(d[0]);Gt(t,a,s),t[Ht]=e,t[ln]=s}catch(h){dt(e,e.return,h)}}var dr=!1,jt=!1,xu=!1,fm=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function Tw(e,t){if(e=e.containerInfo,Gu=Ka,e=xh(e),yc(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var d=a.anchorOffset,h=a.focusNode;a=a.focusOffset;try{s.nodeType,h.nodeType}catch{s=null;break e}var v=0,k=-1,F=-1,de=0,Te=0,_e=e,pe=null;t:for(;;){for(var be;_e!==s||d!==0&&_e.nodeType!==3||(k=v+d),_e!==h||a!==0&&_e.nodeType!==3||(F=v+a),_e.nodeType===3&&(v+=_e.nodeValue.length),(be=_e.firstChild)!==null;)pe=_e,_e=be;for(;;){if(_e===e)break t;if(pe===s&&++de===d&&(k=v),pe===h&&++Te===a&&(F=v),(be=_e.nextSibling)!==null)break;_e=pe,pe=_e.parentNode}_e=be}s=k===-1||F===-1?null:{start:k,end:F}}else s=null}s=s||{start:0,end:0}}else s=null;for(Fu={focusedElem:e,selectionRange:s},Ka=!1,Lt=t;Lt!==null;)if(t=Lt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Lt=e;else for(;Lt!==null;){switch(t=Lt,h=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)d=e[s],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,s=t,d=h.memoizedProps,h=h.memoizedState,a=s.stateNode;try{var Pe=mi(s.type,d);e=a.getSnapshotBeforeUpdate(Pe,h),a.__reactInternalSnapshotBeforeUpdate=e}catch(Ve){dt(s,s.return,Ve)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)Ju(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ju(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,Lt=e;break}Lt=t.return}}function hm(e,t,s){var a=s.flags;switch(s.tag){case 0:case 11:case 15:hr(e,s),a&4&&ro(5,s);break;case 1:if(hr(e,s),a&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(v){dt(s,s.return,v)}else{var d=mi(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(v){dt(s,s.return,v)}}a&64&&am(s),a&512&&io(s,s.return);break;case 3:if(hr(e,s),a&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{Qh(e,t)}catch(v){dt(s,s.return,v)}}break;case 27:t===null&&a&4&&dm(s);case 26:case 5:hr(e,s),t===null&&a&4&&cm(s),a&512&&io(s,s.return);break;case 12:hr(e,s);break;case 31:hr(e,s),a&4&&gm(e,s);break;case 13:hr(e,s),a&4&&ym(e,s),a&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=jw.bind(null,s),Qw(e,s))));break;case 22:if(a=s.memoizedState!==null||dr,!a){t=t!==null&&t.memoizedState!==null||jt,d=dr;var h=jt;dr=a,(jt=t)&&!h?pr(e,s,(s.subtreeFlags&8772)!==0):hr(e,s),dr=d,jt=h}break;case 30:break;default:hr(e,s)}}function pm(e){var t=e.alternate;t!==null&&(e.alternate=null,pm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&ec(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var bt=null,un=!1;function fr(e,t,s){for(s=s.child;s!==null;)mm(e,t,s),s=s.sibling}function mm(e,t,s){if(Oe&&typeof Oe.onCommitFiberUnmount=="function")try{Oe.onCommitFiberUnmount(Ie,s)}catch{}switch(s.tag){case 26:jt||Xn(s,t),fr(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:jt||Xn(s,t);var a=bt,d=un;Lr(s.type)&&(bt=s.stateNode,un=!1),fr(e,t,s),po(s.stateNode),bt=a,un=d;break;case 5:jt||Xn(s,t);case 6:if(a=bt,d=un,bt=null,fr(e,t,s),bt=a,un=d,bt!==null)if(un)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(s.stateNode)}catch(h){dt(s,t,h)}else try{bt.removeChild(s.stateNode)}catch(h){dt(s,t,h)}break;case 18:bt!==null&&(un?(e=bt,ag(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),fs(e)):ag(bt,s.stateNode));break;case 4:a=bt,d=un,bt=s.stateNode.containerInfo,un=!0,fr(e,t,s),bt=a,un=d;break;case 0:case 11:case 14:case 15:Or(2,s,t),jt||Or(4,s,t),fr(e,t,s);break;case 1:jt||(Xn(s,t),a=s.stateNode,typeof a.componentWillUnmount=="function"&&lm(s,t,a)),fr(e,t,s);break;case 21:fr(e,t,s);break;case 22:jt=(a=jt)||s.memoizedState!==null,fr(e,t,s),jt=a;break;default:fr(e,t,s)}}function gm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{fs(e)}catch(s){dt(t,t.return,s)}}}function ym(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{fs(e)}catch(s){dt(t,t.return,s)}}function Cw(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new fm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new fm),t;default:throw Error(o(435,e.tag))}}function Na(e,t){var s=Cw(e);t.forEach(function(a){if(!s.has(a)){s.add(a);var d=Ow.bind(null,e,a);a.then(d,d)}})}function dn(e,t){var s=t.deletions;if(s!==null)for(var a=0;a<s.length;a++){var d=s[a],h=e,v=t,k=v;e:for(;k!==null;){switch(k.tag){case 27:if(Lr(k.type)){bt=k.stateNode,un=!1;break e}break;case 5:bt=k.stateNode,un=!1;break e;case 3:case 4:bt=k.stateNode.containerInfo,un=!0;break e}k=k.return}if(bt===null)throw Error(o(160));mm(h,v,d),bt=null,un=!1,h=d.alternate,h!==null&&(h.return=null),d.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)vm(t,e),t=t.sibling}var Bn=null;function vm(e,t){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:dn(t,e),fn(e),a&4&&(Or(3,e,e.return),ro(3,e),Or(5,e,e.return));break;case 1:dn(t,e),fn(e),a&512&&(jt||s===null||Xn(s,s.return)),a&64&&dr&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?a:s.concat(a))));break;case 26:var d=Bn;if(dn(t,e),fn(e),a&512&&(jt||s===null||Xn(s,s.return)),a&4){var h=s!==null?s.memoizedState:null;if(a=e.memoizedState,s===null)if(a===null)if(e.stateNode===null){e:{a=e.type,s=e.memoizedProps,d=d.ownerDocument||d;t:switch(a){case"title":h=d.getElementsByTagName("title")[0],(!h||h[js]||h[Ht]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=d.createElement(a),d.head.insertBefore(h,d.querySelector("head > title"))),Gt(h,a,s),h[Ht]=e,zt(h),a=h;break e;case"link":var v=vg("link","href",d).get(a+(s.href||""));if(v){for(var k=0;k<v.length;k++)if(h=v[k],h.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&h.getAttribute("rel")===(s.rel==null?null:s.rel)&&h.getAttribute("title")===(s.title==null?null:s.title)&&h.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){v.splice(k,1);break t}}h=d.createElement(a),Gt(h,a,s),d.head.appendChild(h);break;case"meta":if(v=vg("meta","content",d).get(a+(s.content||""))){for(k=0;k<v.length;k++)if(h=v[k],h.getAttribute("content")===(s.content==null?null:""+s.content)&&h.getAttribute("name")===(s.name==null?null:s.name)&&h.getAttribute("property")===(s.property==null?null:s.property)&&h.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&h.getAttribute("charset")===(s.charSet==null?null:s.charSet)){v.splice(k,1);break t}}h=d.createElement(a),Gt(h,a,s),d.head.appendChild(h);break;default:throw Error(o(468,a))}h[Ht]=e,zt(h),a=h}e.stateNode=a}else bg(d,e.type,e.stateNode);else e.stateNode=yg(d,a,e.memoizedProps);else h!==a?(h===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):h.count--,a===null?bg(d,e.type,e.stateNode):yg(d,a,e.memoizedProps)):a===null&&e.stateNode!==null&&wu(e,e.memoizedProps,s.memoizedProps)}break;case 27:dn(t,e),fn(e),a&512&&(jt||s===null||Xn(s,s.return)),s!==null&&a&4&&wu(e,e.memoizedProps,s.memoizedProps);break;case 5:if(dn(t,e),fn(e),a&512&&(jt||s===null||Xn(s,s.return)),e.flags&32){d=e.stateNode;try{Di(d,"")}catch(Pe){dt(e,e.return,Pe)}}a&4&&e.stateNode!=null&&(d=e.memoizedProps,wu(e,d,s!==null?s.memoizedProps:d)),a&1024&&(xu=!0);break;case 6:if(dn(t,e),fn(e),a&4){if(e.stateNode===null)throw Error(o(162));a=e.memoizedProps,s=e.stateNode;try{s.nodeValue=a}catch(Pe){dt(e,e.return,Pe)}}break;case 3:if(Fa=null,d=Bn,Bn=Va(t.containerInfo),dn(t,e),Bn=d,fn(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{fs(t.containerInfo)}catch(Pe){dt(e,e.return,Pe)}xu&&(xu=!1,bm(e));break;case 4:a=Bn,Bn=Va(e.stateNode.containerInfo),dn(t,e),fn(e),Bn=a;break;case 12:dn(t,e),fn(e);break;case 31:dn(t,e),fn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Na(e,a)));break;case 13:dn(t,e),fn(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Oa=He()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Na(e,a)));break;case 22:d=e.memoizedState!==null;var F=s!==null&&s.memoizedState!==null,de=dr,Te=jt;if(dr=de||d,jt=Te||F,dn(t,e),jt=Te,dr=de,fn(e),a&8192)e:for(t=e.stateNode,t._visibility=d?t._visibility&-2:t._visibility|1,d&&(s===null||F||dr||jt||gi(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){F=s=t;try{if(h=F.stateNode,d)v=h.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{k=F.stateNode;var _e=F.memoizedProps.style,pe=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;k.style.display=pe==null||typeof pe=="boolean"?"":(""+pe).trim()}}catch(Pe){dt(F,F.return,Pe)}}}else if(t.tag===6){if(s===null){F=t;try{F.stateNode.nodeValue=d?"":F.memoizedProps}catch(Pe){dt(F,F.return,Pe)}}}else if(t.tag===18){if(s===null){F=t;try{var be=F.stateNode;d?lg(be,!0):lg(F.stateNode,!1)}catch(Pe){dt(F,F.return,Pe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(s=a.retryQueue,s!==null&&(a.retryQueue=null,Na(e,s))));break;case 19:dn(t,e),fn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Na(e,a)));break;case 30:break;case 21:break;default:dn(t,e),fn(e)}}function fn(e){var t=e.flags;if(t&2){try{for(var s,a=e.return;a!==null;){if(um(a)){s=a;break}a=a.return}if(s==null)throw Error(o(160));switch(s.tag){case 27:var d=s.stateNode,h=Tu(e);Aa(e,h,d);break;case 5:var v=s.stateNode;s.flags&32&&(Di(v,""),s.flags&=-33);var k=Tu(e);Aa(e,k,v);break;case 3:case 4:var F=s.stateNode.containerInfo,de=Tu(e);Cu(e,de,F);break;default:throw Error(o(161))}}catch(Te){dt(e,e.return,Te)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function bm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;bm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function hr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)hm(e,t.alternate,t),t=t.sibling}function gi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Or(4,t,t.return),gi(t);break;case 1:Xn(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&lm(t,t.return,s),gi(t);break;case 27:po(t.stateNode);case 26:case 5:Xn(t,t.return),gi(t);break;case 22:t.memoizedState===null&&gi(t);break;case 30:gi(t);break;default:gi(t)}e=e.sibling}}function pr(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,d=e,h=t,v=h.flags;switch(h.tag){case 0:case 11:case 15:pr(d,h,s),ro(4,h);break;case 1:if(pr(d,h,s),a=h,d=a.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(de){dt(a,a.return,de)}if(a=h,d=a.updateQueue,d!==null){var k=a.stateNode;try{var F=d.shared.hiddenCallbacks;if(F!==null)for(d.shared.hiddenCallbacks=null,d=0;d<F.length;d++)Kh(F[d],k)}catch(de){dt(a,a.return,de)}}s&&v&64&&am(h),io(h,h.return);break;case 27:dm(h);case 26:case 5:pr(d,h,s),s&&a===null&&v&4&&cm(h),io(h,h.return);break;case 12:pr(d,h,s);break;case 31:pr(d,h,s),s&&v&4&&gm(d,h);break;case 13:pr(d,h,s),s&&v&4&&ym(d,h);break;case 22:h.memoizedState===null&&pr(d,h,s),io(h,h.return);break;case 30:break;default:pr(d,h,s)}t=t.sibling}}function Ru(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Vs(s))}function Eu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Vs(e))}function Hn(e,t,s,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Sm(e,t,s,a),t=t.sibling}function Sm(e,t,s,a){var d=t.flags;switch(t.tag){case 0:case 11:case 15:Hn(e,t,s,a),d&2048&&ro(9,t);break;case 1:Hn(e,t,s,a);break;case 3:Hn(e,t,s,a),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Vs(e)));break;case 12:if(d&2048){Hn(e,t,s,a),e=t.stateNode;try{var h=t.memoizedProps,v=h.id,k=h.onPostCommit;typeof k=="function"&&k(v,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(F){dt(t,t.return,F)}}else Hn(e,t,s,a);break;case 31:Hn(e,t,s,a);break;case 13:Hn(e,t,s,a);break;case 23:break;case 22:h=t.stateNode,v=t.alternate,t.memoizedState!==null?h._visibility&2?Hn(e,t,s,a):so(e,t):h._visibility&2?Hn(e,t,s,a):(h._visibility|=2,ts(e,t,s,a,(t.subtreeFlags&10256)!==0||!1)),d&2048&&Ru(v,t);break;case 24:Hn(e,t,s,a),d&2048&&Eu(t.alternate,t);break;default:Hn(e,t,s,a)}}function ts(e,t,s,a,d){for(d=d&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var h=e,v=t,k=s,F=a,de=v.flags;switch(v.tag){case 0:case 11:case 15:ts(h,v,k,F,d),ro(8,v);break;case 23:break;case 22:var Te=v.stateNode;v.memoizedState!==null?Te._visibility&2?ts(h,v,k,F,d):so(h,v):(Te._visibility|=2,ts(h,v,k,F,d)),d&&de&2048&&Ru(v.alternate,v);break;case 24:ts(h,v,k,F,d),d&&de&2048&&Eu(v.alternate,v);break;default:ts(h,v,k,F,d)}t=t.sibling}}function so(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,a=t,d=a.flags;switch(a.tag){case 22:so(s,a),d&2048&&Ru(a.alternate,a);break;case 24:so(s,a),d&2048&&Eu(a.alternate,a);break;default:so(s,a)}t=t.sibling}}var oo=8192;function ns(e,t,s){if(e.subtreeFlags&oo)for(e=e.child;e!==null;)wm(e,t,s),e=e.sibling}function wm(e,t,s){switch(e.tag){case 26:ns(e,t,s),e.flags&oo&&e.memoizedState!==null&&cT(s,Bn,e.memoizedState,e.memoizedProps);break;case 5:ns(e,t,s);break;case 3:case 4:var a=Bn;Bn=Va(e.stateNode.containerInfo),ns(e,t,s),Bn=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=oo,oo=16777216,ns(e,t,s),oo=a):ns(e,t,s));break;default:ns(e,t,s)}}function Tm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ao(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var a=t[s];Lt=a,xm(a,e)}Tm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Cm(e),e=e.sibling}function Cm(e){switch(e.tag){case 0:case 11:case 15:ao(e),e.flags&2048&&Or(9,e,e.return);break;case 3:ao(e);break;case 12:ao(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,ja(e)):ao(e);break;default:ao(e)}}function ja(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var a=t[s];Lt=a,xm(a,e)}Tm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Or(8,t,t.return),ja(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,ja(t));break;default:ja(t)}e=e.sibling}}function xm(e,t){for(;Lt!==null;){var s=Lt;switch(s.tag){case 0:case 11:case 15:Or(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var a=s.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Vs(s.memoizedState.cache)}if(a=s.child,a!==null)a.return=s,Lt=a;else e:for(s=e;Lt!==null;){a=Lt;var d=a.sibling,h=a.return;if(pm(a),a===s){Lt=null;break e}if(d!==null){d.return=h,Lt=d;break e}Lt=h}}}var xw={getCacheForType:function(e){var t=$t(kt),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s},cacheSignal:function(){return $t(kt).controller.signal}},Rw=typeof WeakMap=="function"?WeakMap:Map,lt=0,mt=null,We=null,tt=0,ut=0,Tn=null,Mr=!1,rs=!1,_u=!1,mr=0,Ct=0,Ur=0,yi=0,ku=0,Cn=0,is=0,lo=null,hn=null,Au=!1,Oa=0,Rm=0,Ma=1/0,Ua=null,Dr=null,Dt=0,Pr=null,ss=null,gr=0,Nu=0,ju=null,Em=null,co=0,Ou=null;function xn(){return(lt&2)!==0&&tt!==0?tt&-tt:H.T!==null?zu():qf()}function _m(){if(Cn===0)if((tt&536870912)===0||rt){var e=ki;ki<<=1,(ki&3932160)===0&&(ki=262144),Cn=e}else Cn=536870912;return e=Sn.current,e!==null&&(e.flags|=32),Cn}function pn(e,t,s){(e===mt&&(ut===2||ut===9)||e.cancelPendingCommit!==null)&&(os(e,0),Ir(e,tt,Cn,!1)),Ns(e,s),((lt&2)===0||e!==mt)&&(e===mt&&((lt&2)===0&&(yi|=s),Ct===4&&Ir(e,tt,Cn,!1)),Jn(e))}function km(e,t,s){if((lt&6)!==0)throw Error(o(327));var a=!s&&(t&127)===0&&(t&e.expiredLanes)===0||As(e,t),d=a?kw(e,t):Uu(e,t,!0),h=a;do{if(d===0){rs&&!a&&Ir(e,t,0,!1);break}else{if(s=e.current.alternate,h&&!Ew(s)){d=Uu(e,t,!1),h=!1;continue}if(d===2){if(h=t,e.errorRecoveryDisabledLanes&h)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){t=v;e:{var k=e;d=lo;var F=k.current.memoizedState.isDehydrated;if(F&&(os(k,v).flags|=256),v=Uu(k,v,!1),v!==2){if(_u&&!F){k.errorRecoveryDisabledLanes|=h,yi|=h,d=4;break e}h=hn,hn=d,h!==null&&(hn===null?hn=h:hn.push.apply(hn,h))}d=v}if(h=!1,d!==2)continue}}if(d===1){os(e,0),Ir(e,t,0,!0);break}e:{switch(a=e,h=d,h){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:Ir(a,t,Cn,!Mr);break e;case 2:hn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(d=Oa+300-He(),10<d)){if(Ir(a,t,Cn,!Mr),Vo(a,0,!0)!==0)break e;gr=t,a.timeoutHandle=sg(Am.bind(null,a,s,hn,Ua,Au,t,Cn,yi,is,Mr,h,"Throttled",-0,0),d);break e}Am(a,s,hn,Ua,Au,t,Cn,yi,is,Mr,h,null,-0,0)}}break}while(!0);Jn(e)}function Am(e,t,s,a,d,h,v,k,F,de,Te,_e,pe,be){if(e.timeoutHandle=-1,_e=t.subtreeFlags,_e&8192||(_e&16785408)===16785408){_e={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:tr},wm(t,h,_e);var Pe=(h&62914560)===h?Oa-He():(h&4194048)===h?Rm-He():0;if(Pe=uT(_e,Pe),Pe!==null){gr=h,e.cancelPendingCommit=Pe(Im.bind(null,e,t,h,s,a,d,v,k,F,Te,_e,null,pe,be)),Ir(e,h,v,!de);return}}Im(e,t,h,s,a,d,v,k,F)}function Ew(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var a=0;a<s.length;a++){var d=s[a],h=d.getSnapshot;d=d.value;try{if(!vn(h(),d))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ir(e,t,s,a){t&=~ku,t&=~yi,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var d=t;0<d;){var h=31-ze(d),v=1<<h;a[h]=-1,d&=~v}s!==0&&Lf(e,s,t)}function Da(){return(lt&6)===0?(uo(0),!1):!0}function Mu(){if(We!==null){if(ut===0)var e=We.return;else e=We,sr=li=null,Jc(e),Ki=null,Fs=0,e=We;for(;e!==null;)om(e.alternate,e),e=e.return;We=null}}function os(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,Fw(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),gr=0,Mu(),mt=e,We=s=rr(e.current,null),tt=t,ut=0,Tn=null,Mr=!1,rs=As(e,t),_u=!1,is=Cn=ku=yi=Ur=Ct=0,hn=lo=null,Au=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var d=31-ze(a),h=1<<d;t|=e[d],a&=~h}return mr=t,na(),s}function Nm(e,t){Je=null,H.H=eo,t===Ji||t===ua?(t=Fh(),ut=3):t===Ic?(t=Fh(),ut=4):ut=t===du?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Tn=t,We===null&&(Ct=1,xa(e,Nn(t,e.current)))}function jm(){var e=Sn.current;return e===null?!0:(tt&4194048)===tt?Un===null:(tt&62914560)===tt||(tt&536870912)!==0?e===Un:!1}function Om(){var e=H.H;return H.H=eo,e===null?eo:e}function Mm(){var e=H.A;return H.A=xw,e}function Pa(){Ct=4,Mr||(tt&4194048)!==tt&&Sn.current!==null||(rs=!0),(Ur&134217727)===0&&(yi&134217727)===0||mt===null||Ir(mt,tt,Cn,!1)}function Uu(e,t,s){var a=lt;lt|=2;var d=Om(),h=Mm();(mt!==e||tt!==t)&&(Ua=null,os(e,t)),t=!1;var v=Ct;e:do try{if(ut!==0&&We!==null){var k=We,F=Tn;switch(ut){case 8:Mu(),v=6;break e;case 3:case 2:case 9:case 6:Sn.current===null&&(t=!0);var de=ut;if(ut=0,Tn=null,as(e,k,F,de),s&&rs){v=0;break e}break;default:de=ut,ut=0,Tn=null,as(e,k,F,de)}}_w(),v=Ct;break}catch(Te){Nm(e,Te)}while(!0);return t&&e.shellSuspendCounter++,sr=li=null,lt=a,H.H=d,H.A=h,We===null&&(mt=null,tt=0,na()),v}function _w(){for(;We!==null;)Um(We)}function kw(e,t){var s=lt;lt|=2;var a=Om(),d=Mm();mt!==e||tt!==t?(Ua=null,Ma=He()+500,os(e,t)):rs=As(e,t);e:do try{if(ut!==0&&We!==null){t=We;var h=Tn;t:switch(ut){case 1:ut=0,Tn=null,as(e,t,h,1);break;case 2:case 9:if(Vh(h)){ut=0,Tn=null,Dm(t);break}t=function(){ut!==2&&ut!==9||mt!==e||(ut=7),Jn(e)},h.then(t,t);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:Vh(h)?(ut=0,Tn=null,Dm(t)):(ut=0,Tn=null,as(e,t,h,7));break;case 5:var v=null;switch(We.tag){case 26:v=We.memoizedState;case 5:case 27:var k=We;if(v?Sg(v):k.stateNode.complete){ut=0,Tn=null;var F=k.sibling;if(F!==null)We=F;else{var de=k.return;de!==null?(We=de,Ia(de)):We=null}break t}}ut=0,Tn=null,as(e,t,h,5);break;case 6:ut=0,Tn=null,as(e,t,h,6);break;case 8:Mu(),Ct=6;break e;default:throw Error(o(462))}}Aw();break}catch(Te){Nm(e,Te)}while(!0);return sr=li=null,H.H=a,H.A=d,lt=s,We!==null?0:(mt=null,tt=0,na(),Ct)}function Aw(){for(;We!==null&&!we();)Um(We)}function Um(e){var t=im(e.alternate,e,mr);e.memoizedProps=e.pendingProps,t===null?Ia(e):We=t}function Dm(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=Wp(s,t,t.pendingProps,t.type,void 0,tt);break;case 11:t=Wp(s,t,t.pendingProps,t.type.render,t.ref,tt);break;case 5:Jc(t);default:om(s,t),t=We=Mh(t,mr),t=im(s,t,mr)}e.memoizedProps=e.pendingProps,t===null?Ia(e):We=t}function as(e,t,s,a){sr=li=null,Jc(t),Ki=null,Fs=0;var d=t.return;try{if(yw(e,d,t,s,tt)){Ct=1,xa(e,Nn(s,e.current)),We=null;return}}catch(h){if(d!==null)throw We=d,h;Ct=1,xa(e,Nn(s,e.current)),We=null;return}t.flags&32768?(rt||a===1?e=!0:rs||(tt&536870912)!==0?e=!1:(Mr=e=!0,(a===2||a===9||a===3||a===6)&&(a=Sn.current,a!==null&&a.tag===13&&(a.flags|=16384))),Pm(t,e)):Ia(t)}function Ia(e){var t=e;do{if((t.flags&32768)!==0){Pm(t,Mr);return}e=t.return;var s=Sw(t.alternate,t,mr);if(s!==null){We=s;return}if(t=t.sibling,t!==null){We=t;return}We=t=e}while(t!==null);Ct===0&&(Ct=5)}function Pm(e,t){do{var s=ww(e.alternate,e);if(s!==null){s.flags&=32767,We=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){We=e;return}We=e=s}while(e!==null);Ct=6,We=null}function Im(e,t,s,a,d,h,v,k,F){e.cancelPendingCommit=null;do za();while(Dt!==0);if((lt&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(h=t.lanes|t.childLanes,h|=Tc,lS(e,s,h,v,k,F),e===mt&&(We=mt=null,tt=0),ss=t,Pr=e,gr=s,Nu=h,ju=d,Em=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Mw(D,function(){return qm(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=H.T,H.T=null,d=M.p,M.p=2,v=lt,lt|=4;try{Tw(e,t,s)}finally{lt=v,M.p=d,H.T=a}}Dt=1,zm(),Lm(),Bm()}}function zm(){if(Dt===1){Dt=0;var e=Pr,t=ss,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=H.T,H.T=null;var a=M.p;M.p=2;var d=lt;lt|=4;try{vm(t,e);var h=Fu,v=xh(e.containerInfo),k=h.focusedElem,F=h.selectionRange;if(v!==k&&k&&k.ownerDocument&&Ch(k.ownerDocument.documentElement,k)){if(F!==null&&yc(k)){var de=F.start,Te=F.end;if(Te===void 0&&(Te=de),"selectionStart"in k)k.selectionStart=de,k.selectionEnd=Math.min(Te,k.value.length);else{var _e=k.ownerDocument||document,pe=_e&&_e.defaultView||window;if(pe.getSelection){var be=pe.getSelection(),Pe=k.textContent.length,Ve=Math.min(F.start,Pe),pt=F.end===void 0?Ve:Math.min(F.end,Pe);!be.extend&&Ve>pt&&(v=pt,pt=Ve,Ve=v);var oe=Th(k,Ve),Z=Th(k,pt);if(oe&&Z&&(be.rangeCount!==1||be.anchorNode!==oe.node||be.anchorOffset!==oe.offset||be.focusNode!==Z.node||be.focusOffset!==Z.offset)){var ce=_e.createRange();ce.setStart(oe.node,oe.offset),be.removeAllRanges(),Ve>pt?(be.addRange(ce),be.extend(Z.node,Z.offset)):(ce.setEnd(Z.node,Z.offset),be.addRange(ce))}}}}for(_e=[],be=k;be=be.parentNode;)be.nodeType===1&&_e.push({element:be,left:be.scrollLeft,top:be.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<_e.length;k++){var Re=_e[k];Re.element.scrollLeft=Re.left,Re.element.scrollTop=Re.top}}Ka=!!Gu,Fu=Gu=null}finally{lt=d,M.p=a,H.T=s}}e.current=t,Dt=2}}function Lm(){if(Dt===2){Dt=0;var e=Pr,t=ss,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=H.T,H.T=null;var a=M.p;M.p=2;var d=lt;lt|=4;try{hm(e,t.alternate,t)}finally{lt=d,M.p=a,H.T=s}}Dt=3}}function Bm(){if(Dt===4||Dt===3){Dt=0,Ae();var e=Pr,t=ss,s=gr,a=Em;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Dt=5:(Dt=0,ss=Pr=null,Hm(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(Dr=null),Wl(s),t=t.stateNode,Oe&&typeof Oe.onCommitFiberRoot=="function")try{Oe.onCommitFiberRoot(Ie,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=H.T,d=M.p,M.p=2,H.T=null;try{for(var h=e.onRecoverableError,v=0;v<a.length;v++){var k=a[v];h(k.value,{componentStack:k.stack})}}finally{H.T=t,M.p=d}}(gr&3)!==0&&za(),Jn(e),d=e.pendingLanes,(s&261930)!==0&&(d&42)!==0?e===Ou?co++:(co=0,Ou=e):co=0,uo(0)}}function Hm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Vs(t)))}function za(){return zm(),Lm(),Bm(),qm()}function qm(){if(Dt!==5)return!1;var e=Pr,t=Nu;Nu=0;var s=Wl(gr),a=H.T,d=M.p;try{M.p=32>s?32:s,H.T=null,s=ju,ju=null;var h=Pr,v=gr;if(Dt=0,ss=Pr=null,gr=0,(lt&6)!==0)throw Error(o(331));var k=lt;if(lt|=4,Cm(h.current),Sm(h,h.current,v,s),lt=k,uo(0,!1),Oe&&typeof Oe.onPostCommitFiberRoot=="function")try{Oe.onPostCommitFiberRoot(Ie,h)}catch{}return!0}finally{M.p=d,H.T=a,Hm(e,t)}}function $m(e,t,s){t=Nn(s,t),t=uu(e.stateNode,t,2),e=Ar(e,t,2),e!==null&&(Ns(e,2),Jn(e))}function dt(e,t,s){if(e.tag===3)$m(e,e,s);else for(;t!==null;){if(t.tag===3){$m(t,e,s);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Dr===null||!Dr.has(a))){e=Nn(s,e),s=Vp(2),a=Ar(t,s,2),a!==null&&(Gp(s,a,t,e),Ns(a,2),Jn(a));break}}t=t.return}}function Du(e,t,s){var a=e.pingCache;if(a===null){a=e.pingCache=new Rw;var d=new Set;a.set(t,d)}else d=a.get(t),d===void 0&&(d=new Set,a.set(t,d));d.has(s)||(_u=!0,d.add(s),e=Nw.bind(null,e,t,s),t.then(e,e))}function Nw(e,t,s){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,mt===e&&(tt&s)===s&&(Ct===4||Ct===3&&(tt&62914560)===tt&&300>He()-Oa?(lt&2)===0&&os(e,0):ku|=s,is===tt&&(is=0)),Jn(e)}function Vm(e,t){t===0&&(t=zf()),e=si(e,t),e!==null&&(Ns(e,t),Jn(e))}function jw(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Vm(e,s)}function Ow(e,t){var s=0;switch(e.tag){case 31:case 13:var a=e.stateNode,d=e.memoizedState;d!==null&&(s=d.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(o(314))}a!==null&&a.delete(t),Vm(e,s)}function Mw(e,t){return te(e,t)}var La=null,ls=null,Pu=!1,Ba=!1,Iu=!1,zr=0;function Jn(e){e!==ls&&e.next===null&&(ls===null?La=ls=e:ls=ls.next=e),Ba=!0,Pu||(Pu=!0,Dw())}function uo(e,t){if(!Iu&&Ba){Iu=!0;do for(var s=!1,a=La;a!==null;){if(e!==0){var d=a.pendingLanes;if(d===0)var h=0;else{var v=a.suspendedLanes,k=a.pingedLanes;h=(1<<31-ze(42|e)+1)-1,h&=d&~(v&~k),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(s=!0,Xm(a,h))}else h=tt,h=Vo(a,a===mt?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(h&3)===0||As(a,h)||(s=!0,Xm(a,h));a=a.next}while(s);Iu=!1}}function Uw(){Gm()}function Gm(){Ba=Pu=!1;var e=0;zr!==0&&Gw()&&(e=zr);for(var t=He(),s=null,a=La;a!==null;){var d=a.next,h=Fm(a,t);h===0?(a.next=null,s===null?La=d:s.next=d,d===null&&(ls=s)):(s=a,(e!==0||(h&3)!==0)&&(Ba=!0)),a=d}Dt!==0&&Dt!==5||uo(e),zr!==0&&(zr=0)}function Fm(e,t){for(var s=e.suspendedLanes,a=e.pingedLanes,d=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var v=31-ze(h),k=1<<v,F=d[v];F===-1?((k&s)===0||(k&a)!==0)&&(d[v]=aS(k,t)):F<=t&&(e.expiredLanes|=k),h&=~k}if(t=mt,s=tt,s=Vo(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,s===0||e===t&&(ut===2||ut===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&ge(a),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||As(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(a!==null&&ge(a),Wl(s)){case 2:case 8:s=C;break;case 32:s=D;break;case 268435456:s=$;break;default:s=D}return a=Ym.bind(null,e),s=te(s,a),e.callbackPriority=t,e.callbackNode=s,t}return a!==null&&a!==null&&ge(a),e.callbackPriority=2,e.callbackNode=null,2}function Ym(e,t){if(Dt!==0&&Dt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(za()&&e.callbackNode!==s)return null;var a=tt;return a=Vo(e,e===mt?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(km(e,a,t),Fm(e,He()),e.callbackNode!=null&&e.callbackNode===s?Ym.bind(null,e):null)}function Xm(e,t){if(za())return null;km(e,t,!0)}function Dw(){Yw(function(){(lt&6)!==0?te(j,Uw):Gm()})}function zu(){if(zr===0){var e=Yi;e===0&&(e=Xt,Xt<<=1,(Xt&261888)===0&&(Xt=256)),zr=e}return zr}function Jm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Xo(""+e)}function Km(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function Pw(e,t,s,a,d){if(t==="submit"&&s&&s.stateNode===d){var h=Jm((d[ln]||null).action),v=a.submitter;v&&(t=(t=v[ln]||null)?Jm(t.formAction):v.getAttribute("formAction"),t!==null&&(h=t,v=null));var k=new Wo("action","action",null,a,d);e.push({event:k,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(zr!==0){var F=v?Km(d,v):new FormData(d);iu(s,{pending:!0,data:F,method:d.method,action:h},null,F)}}else typeof h=="function"&&(k.preventDefault(),F=v?Km(d,v):new FormData(d),iu(s,{pending:!0,data:F,method:d.method,action:h},h,F))},currentTarget:d}]})}}for(var Lu=0;Lu<wc.length;Lu++){var Bu=wc[Lu],Iw=Bu.toLowerCase(),zw=Bu[0].toUpperCase()+Bu.slice(1);Ln(Iw,"on"+zw)}Ln(_h,"onAnimationEnd"),Ln(kh,"onAnimationIteration"),Ln(Ah,"onAnimationStart"),Ln("dblclick","onDoubleClick"),Ln("focusin","onFocus"),Ln("focusout","onBlur"),Ln(ew,"onTransitionRun"),Ln(tw,"onTransitionStart"),Ln(nw,"onTransitionCancel"),Ln(Nh,"onTransitionEnd"),Mi("onMouseEnter",["mouseout","mouseover"]),Mi("onMouseLeave",["mouseout","mouseover"]),Mi("onPointerEnter",["pointerout","pointerover"]),Mi("onPointerLeave",["pointerout","pointerover"]),ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ti("onBeforeInput",["compositionend","keypress","textInput","paste"]),ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fo));function Qm(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],d=a.event;a=a.listeners;e:{var h=void 0;if(t)for(var v=a.length-1;0<=v;v--){var k=a[v],F=k.instance,de=k.currentTarget;if(k=k.listener,F!==h&&d.isPropagationStopped())break e;h=k,d.currentTarget=de;try{h(d)}catch(Te){ta(Te)}d.currentTarget=null,h=F}else for(v=0;v<a.length;v++){if(k=a[v],F=k.instance,de=k.currentTarget,k=k.listener,F!==h&&d.isPropagationStopped())break e;h=k,d.currentTarget=de;try{h(d)}catch(Te){ta(Te)}d.currentTarget=null,h=F}}}}function Ze(e,t){var s=t[Zl];s===void 0&&(s=t[Zl]=new Set);var a=e+"__bubble";s.has(a)||(Wm(t,e,2,!1),s.add(a))}function Hu(e,t,s){var a=0;t&&(a|=4),Wm(s,e,a,t)}var Ha="_reactListening"+Math.random().toString(36).slice(2);function qu(e){if(!e[Ha]){e[Ha]=!0,Gf.forEach(function(s){s!=="selectionchange"&&(Lw.has(s)||Hu(s,!1,e),Hu(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ha]||(t[Ha]=!0,Hu("selectionchange",!1,t))}}function Wm(e,t,s,a){switch(_g(t)){case 2:var d=hT;break;case 8:d=pT;break;default:d=rd}s=d.bind(null,t,s,e),d=void 0,!lc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),a?d!==void 0?e.addEventListener(t,s,{capture:!0,passive:d}):e.addEventListener(t,s,!0):d!==void 0?e.addEventListener(t,s,{passive:d}):e.addEventListener(t,s,!1)}function $u(e,t,s,a,d){var h=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var v=a.tag;if(v===3||v===4){var k=a.stateNode.containerInfo;if(k===d)break;if(v===4)for(v=a.return;v!==null;){var F=v.tag;if((F===3||F===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;k!==null;){if(v=Ni(k),v===null)return;if(F=v.tag,F===5||F===6||F===26||F===27){a=h=v;continue e}k=k.parentNode}}a=a.return}rh(function(){var de=h,Te=oc(s),_e=[];e:{var pe=jh.get(e);if(pe!==void 0){var be=Wo,Pe=e;switch(e){case"keypress":if(Ko(s)===0)break e;case"keydown":case"keyup":be=OS;break;case"focusin":Pe="focus",be=fc;break;case"focusout":Pe="blur",be=fc;break;case"beforeblur":case"afterblur":be=fc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=oh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=SS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=DS;break;case _h:case kh:case Ah:be=CS;break;case Nh:be=IS;break;case"scroll":case"scrollend":be=vS;break;case"wheel":be=LS;break;case"copy":case"cut":case"paste":be=RS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=lh;break;case"toggle":case"beforetoggle":be=HS}var Ve=(t&4)!==0,pt=!Ve&&(e==="scroll"||e==="scrollend"),oe=Ve?pe!==null?pe+"Capture":null:pe;Ve=[];for(var Z=de,ce;Z!==null;){var Re=Z;if(ce=Re.stateNode,Re=Re.tag,Re!==5&&Re!==26&&Re!==27||ce===null||oe===null||(Re=Ms(Z,oe),Re!=null&&Ve.push(ho(Z,Re,ce))),pt)break;Z=Z.return}0<Ve.length&&(pe=new be(pe,Pe,null,s,Te),_e.push({event:pe,listeners:Ve}))}}if((t&7)===0){e:{if(pe=e==="mouseover"||e==="pointerover",be=e==="mouseout"||e==="pointerout",pe&&s!==sc&&(Pe=s.relatedTarget||s.fromElement)&&(Ni(Pe)||Pe[Ai]))break e;if((be||pe)&&(pe=Te.window===Te?Te:(pe=Te.ownerDocument)?pe.defaultView||pe.parentWindow:window,be?(Pe=s.relatedTarget||s.toElement,be=de,Pe=Pe?Ni(Pe):null,Pe!==null&&(pt=c(Pe),Ve=Pe.tag,Pe!==pt||Ve!==5&&Ve!==27&&Ve!==6)&&(Pe=null)):(be=null,Pe=de),be!==Pe)){if(Ve=oh,Re="onMouseLeave",oe="onMouseEnter",Z="mouse",(e==="pointerout"||e==="pointerover")&&(Ve=lh,Re="onPointerLeave",oe="onPointerEnter",Z="pointer"),pt=be==null?pe:Os(be),ce=Pe==null?pe:Os(Pe),pe=new Ve(Re,Z+"leave",be,s,Te),pe.target=pt,pe.relatedTarget=ce,Re=null,Ni(Te)===de&&(Ve=new Ve(oe,Z+"enter",Pe,s,Te),Ve.target=ce,Ve.relatedTarget=pt,Re=Ve),pt=Re,be&&Pe)t:{for(Ve=Bw,oe=be,Z=Pe,ce=0,Re=oe;Re;Re=Ve(Re))ce++;Re=0;for(var $e=Z;$e;$e=Ve($e))Re++;for(;0<ce-Re;)oe=Ve(oe),ce--;for(;0<Re-ce;)Z=Ve(Z),Re--;for(;ce--;){if(oe===Z||Z!==null&&oe===Z.alternate){Ve=oe;break t}oe=Ve(oe),Z=Ve(Z)}Ve=null}else Ve=null;be!==null&&Zm(_e,pe,be,Ve,!1),Pe!==null&&pt!==null&&Zm(_e,pt,Pe,Ve,!0)}}e:{if(pe=de?Os(de):window,be=pe.nodeName&&pe.nodeName.toLowerCase(),be==="select"||be==="input"&&pe.type==="file")var st=gh;else if(ph(pe))if(yh)st=QS;else{st=JS;var Le=XS}else be=pe.nodeName,!be||be.toLowerCase()!=="input"||pe.type!=="checkbox"&&pe.type!=="radio"?de&&ic(de.elementType)&&(st=gh):st=KS;if(st&&(st=st(e,de))){mh(_e,st,s,Te);break e}Le&&Le(e,pe,de),e==="focusout"&&de&&pe.type==="number"&&de.memoizedProps.value!=null&&rc(pe,"number",pe.value)}switch(Le=de?Os(de):window,e){case"focusin":(ph(Le)||Le.contentEditable==="true")&&(Li=Le,vc=de,Hs=null);break;case"focusout":Hs=vc=Li=null;break;case"mousedown":bc=!0;break;case"contextmenu":case"mouseup":case"dragend":bc=!1,Rh(_e,s,Te);break;case"selectionchange":if(ZS)break;case"keydown":case"keyup":Rh(_e,s,Te)}var Qe;if(pc)e:{switch(e){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else zi?fh(e,s)&&(nt="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(nt="onCompositionStart");nt&&(ch&&s.locale!=="ko"&&(zi||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&zi&&(Qe=ih()):(Tr=Te,cc="value"in Tr?Tr.value:Tr.textContent,zi=!0)),Le=qa(de,nt),0<Le.length&&(nt=new ah(nt,e,null,s,Te),_e.push({event:nt,listeners:Le}),Qe?nt.data=Qe:(Qe=hh(s),Qe!==null&&(nt.data=Qe)))),(Qe=$S?VS(e,s):GS(e,s))&&(nt=qa(de,"onBeforeInput"),0<nt.length&&(Le=new ah("onBeforeInput","beforeinput",null,s,Te),_e.push({event:Le,listeners:nt}),Le.data=Qe)),Pw(_e,e,de,s,Te)}Qm(_e,t)})}function ho(e,t,s){return{instance:e,listener:t,currentTarget:s}}function qa(e,t){for(var s=t+"Capture",a=[];e!==null;){var d=e,h=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||h===null||(d=Ms(e,s),d!=null&&a.unshift(ho(e,d,h)),d=Ms(e,t),d!=null&&a.push(ho(e,d,h))),e.tag===3)return a;e=e.return}return[]}function Bw(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Zm(e,t,s,a,d){for(var h=t._reactName,v=[];s!==null&&s!==a;){var k=s,F=k.alternate,de=k.stateNode;if(k=k.tag,F!==null&&F===a)break;k!==5&&k!==26&&k!==27||de===null||(F=de,d?(de=Ms(s,h),de!=null&&v.unshift(ho(s,de,F))):d||(de=Ms(s,h),de!=null&&v.push(ho(s,de,F)))),s=s.return}v.length!==0&&e.push({event:t,listeners:v})}var Hw=/\r\n?/g,qw=/\u0000|\uFFFD/g;function eg(e){return(typeof e=="string"?e:""+e).replace(Hw,`
`).replace(qw,"")}function tg(e,t){return t=eg(t),eg(e)===t}function ht(e,t,s,a,d,h){switch(s){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||Di(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&Di(e,""+a);break;case"className":Fo(e,"class",a);break;case"tabIndex":Fo(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Fo(e,s,a);break;case"style":th(e,a,h);break;case"data":if(t!=="object"){Fo(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(s);break}a=Xo(""+a),e.setAttribute(s,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(s==="formAction"?(t!=="input"&&ht(e,t,"name",d.name,d,null),ht(e,t,"formEncType",d.formEncType,d,null),ht(e,t,"formMethod",d.formMethod,d,null),ht(e,t,"formTarget",d.formTarget,d,null)):(ht(e,t,"encType",d.encType,d,null),ht(e,t,"method",d.method,d,null),ht(e,t,"target",d.target,d,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(s);break}a=Xo(""+a),e.setAttribute(s,a);break;case"onClick":a!=null&&(e.onclick=tr);break;case"onScroll":a!=null&&Ze("scroll",e);break;case"onScrollEnd":a!=null&&Ze("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(o(61));if(s=a.__html,s!=null){if(d.children!=null)throw Error(o(60));e.innerHTML=s}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}s=Xo(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(s,""+a):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":a===!0?e.setAttribute(s,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(s,a):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(s,a):e.removeAttribute(s);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(s):e.setAttribute(s,a);break;case"popover":Ze("beforetoggle",e),Ze("toggle",e),Go(e,"popover",a);break;case"xlinkActuate":er(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":er(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":er(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":er(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":er(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":er(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":er(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":er(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":er(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Go(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=gS.get(s)||s,Go(e,s,a))}}function Vu(e,t,s,a,d,h){switch(s){case"style":th(e,a,h);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(o(61));if(s=a.__html,s!=null){if(d.children!=null)throw Error(o(60));e.innerHTML=s}}break;case"children":typeof a=="string"?Di(e,a):(typeof a=="number"||typeof a=="bigint")&&Di(e,""+a);break;case"onScroll":a!=null&&Ze("scroll",e);break;case"onScrollEnd":a!=null&&Ze("scrollend",e);break;case"onClick":a!=null&&(e.onclick=tr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ff.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(d=s.endsWith("Capture"),t=s.slice(2,d?s.length-7:void 0),h=e[ln]||null,h=h!=null?h[s]:null,typeof h=="function"&&e.removeEventListener(t,h,d),typeof a=="function")){typeof h!="function"&&h!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,a,d);break e}s in e?e[s]=a:a===!0?e.setAttribute(s,""):Go(e,s,a)}}}function Gt(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",e),Ze("load",e);var a=!1,d=!1,h;for(h in s)if(s.hasOwnProperty(h)){var v=s[h];if(v!=null)switch(h){case"src":a=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:ht(e,t,h,v,s,null)}}d&&ht(e,t,"srcSet",s.srcSet,s,null),a&&ht(e,t,"src",s.src,s,null);return;case"input":Ze("invalid",e);var k=h=v=d=null,F=null,de=null;for(a in s)if(s.hasOwnProperty(a)){var Te=s[a];if(Te!=null)switch(a){case"name":d=Te;break;case"type":v=Te;break;case"checked":F=Te;break;case"defaultChecked":de=Te;break;case"value":h=Te;break;case"defaultValue":k=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(o(137,t));break;default:ht(e,t,a,Te,s,null)}}Qf(e,h,k,F,de,v,d,!1);return;case"select":Ze("invalid",e),a=v=h=null;for(d in s)if(s.hasOwnProperty(d)&&(k=s[d],k!=null))switch(d){case"value":h=k;break;case"defaultValue":v=k;break;case"multiple":a=k;default:ht(e,t,d,k,s,null)}t=h,s=v,e.multiple=!!a,t!=null?Ui(e,!!a,t,!1):s!=null&&Ui(e,!!a,s,!0);return;case"textarea":Ze("invalid",e),h=d=a=null;for(v in s)if(s.hasOwnProperty(v)&&(k=s[v],k!=null))switch(v){case"value":a=k;break;case"defaultValue":d=k;break;case"children":h=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(o(91));break;default:ht(e,t,v,k,s,null)}Zf(e,a,d,h);return;case"option":for(F in s)s.hasOwnProperty(F)&&(a=s[F],a!=null)&&(F==="selected"?e.selected=a&&typeof a!="function"&&typeof a!="symbol":ht(e,t,F,a,s,null));return;case"dialog":Ze("beforetoggle",e),Ze("toggle",e),Ze("cancel",e),Ze("close",e);break;case"iframe":case"object":Ze("load",e);break;case"video":case"audio":for(a=0;a<fo.length;a++)Ze(fo[a],e);break;case"image":Ze("error",e),Ze("load",e);break;case"details":Ze("toggle",e);break;case"embed":case"source":case"link":Ze("error",e),Ze("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(de in s)if(s.hasOwnProperty(de)&&(a=s[de],a!=null))switch(de){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:ht(e,t,de,a,s,null)}return;default:if(ic(t)){for(Te in s)s.hasOwnProperty(Te)&&(a=s[Te],a!==void 0&&Vu(e,t,Te,a,s,void 0));return}}for(k in s)s.hasOwnProperty(k)&&(a=s[k],a!=null&&ht(e,t,k,a,s,null))}function $w(e,t,s,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,h=null,v=null,k=null,F=null,de=null,Te=null;for(be in s){var _e=s[be];if(s.hasOwnProperty(be)&&_e!=null)switch(be){case"checked":break;case"value":break;case"defaultValue":F=_e;default:a.hasOwnProperty(be)||ht(e,t,be,null,a,_e)}}for(var pe in a){var be=a[pe];if(_e=s[pe],a.hasOwnProperty(pe)&&(be!=null||_e!=null))switch(pe){case"type":h=be;break;case"name":d=be;break;case"checked":de=be;break;case"defaultChecked":Te=be;break;case"value":v=be;break;case"defaultValue":k=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(o(137,t));break;default:be!==_e&&ht(e,t,pe,be,a,_e)}}nc(e,v,k,F,de,Te,h,d);return;case"select":be=v=k=pe=null;for(h in s)if(F=s[h],s.hasOwnProperty(h)&&F!=null)switch(h){case"value":break;case"multiple":be=F;default:a.hasOwnProperty(h)||ht(e,t,h,null,a,F)}for(d in a)if(h=a[d],F=s[d],a.hasOwnProperty(d)&&(h!=null||F!=null))switch(d){case"value":pe=h;break;case"defaultValue":k=h;break;case"multiple":v=h;default:h!==F&&ht(e,t,d,h,a,F)}t=k,s=v,a=be,pe!=null?Ui(e,!!s,pe,!1):!!a!=!!s&&(t!=null?Ui(e,!!s,t,!0):Ui(e,!!s,s?[]:"",!1));return;case"textarea":be=pe=null;for(k in s)if(d=s[k],s.hasOwnProperty(k)&&d!=null&&!a.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:ht(e,t,k,null,a,d)}for(v in a)if(d=a[v],h=s[v],a.hasOwnProperty(v)&&(d!=null||h!=null))switch(v){case"value":pe=d;break;case"defaultValue":be=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(o(91));break;default:d!==h&&ht(e,t,v,d,a,h)}Wf(e,pe,be);return;case"option":for(var Pe in s)pe=s[Pe],s.hasOwnProperty(Pe)&&pe!=null&&!a.hasOwnProperty(Pe)&&(Pe==="selected"?e.selected=!1:ht(e,t,Pe,null,a,pe));for(F in a)pe=a[F],be=s[F],a.hasOwnProperty(F)&&pe!==be&&(pe!=null||be!=null)&&(F==="selected"?e.selected=pe&&typeof pe!="function"&&typeof pe!="symbol":ht(e,t,F,pe,a,be));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in s)pe=s[Ve],s.hasOwnProperty(Ve)&&pe!=null&&!a.hasOwnProperty(Ve)&&ht(e,t,Ve,null,a,pe);for(de in a)if(pe=a[de],be=s[de],a.hasOwnProperty(de)&&pe!==be&&(pe!=null||be!=null))switch(de){case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(o(137,t));break;default:ht(e,t,de,pe,a,be)}return;default:if(ic(t)){for(var pt in s)pe=s[pt],s.hasOwnProperty(pt)&&pe!==void 0&&!a.hasOwnProperty(pt)&&Vu(e,t,pt,void 0,a,pe);for(Te in a)pe=a[Te],be=s[Te],!a.hasOwnProperty(Te)||pe===be||pe===void 0&&be===void 0||Vu(e,t,Te,pe,a,be);return}}for(var oe in s)pe=s[oe],s.hasOwnProperty(oe)&&pe!=null&&!a.hasOwnProperty(oe)&&ht(e,t,oe,null,a,pe);for(_e in a)pe=a[_e],be=s[_e],!a.hasOwnProperty(_e)||pe===be||pe==null&&be==null||ht(e,t,_e,pe,a,be)}function ng(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Vw(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,s=performance.getEntriesByType("resource"),a=0;a<s.length;a++){var d=s[a],h=d.transferSize,v=d.initiatorType,k=d.duration;if(h&&k&&ng(v)){for(v=0,k=d.responseEnd,a+=1;a<s.length;a++){var F=s[a],de=F.startTime;if(de>k)break;var Te=F.transferSize,_e=F.initiatorType;Te&&ng(_e)&&(F=F.responseEnd,v+=Te*(F<k?1:(k-de)/(F-de)))}if(--a,t+=8*(h+v)/(d.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Gu=null,Fu=null;function $a(e){return e.nodeType===9?e:e.ownerDocument}function rg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ig(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Yu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xu=null;function Gw(){var e=window.event;return e&&e.type==="popstate"?e===Xu?!1:(Xu=e,!0):(Xu=null,!1)}var sg=typeof setTimeout=="function"?setTimeout:void 0,Fw=typeof clearTimeout=="function"?clearTimeout:void 0,og=typeof Promise=="function"?Promise:void 0,Yw=typeof queueMicrotask=="function"?queueMicrotask:typeof og<"u"?function(e){return og.resolve(null).then(e).catch(Xw)}:sg;function Xw(e){setTimeout(function(){throw e})}function Lr(e){return e==="head"}function ag(e,t){var s=t,a=0;do{var d=s.nextSibling;if(e.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"||s==="/&"){if(a===0){e.removeChild(d),fs(t);return}a--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")a++;else if(s==="html")po(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,po(s);for(var h=s.firstChild;h;){var v=h.nextSibling,k=h.nodeName;h[js]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&h.rel.toLowerCase()==="stylesheet"||s.removeChild(h),h=v}}else s==="body"&&po(e.ownerDocument.body);s=d}while(s);fs(t)}function lg(e,t){var s=e;e=0;do{var a=s.nextSibling;if(s.nodeType===1?t?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(t?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=a}while(s)}function Ju(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Ju(s),ec(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function Jw(e,t,s,a){for(;e.nodeType===1;){var d=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[js])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=Dn(e.nextSibling),e===null)break}return null}function Kw(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Dn(e.nextSibling),e===null))return null;return e}function cg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Dn(e.nextSibling),e===null))return null;return e}function Ku(e){return e.data==="$?"||e.data==="$~"}function Qu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Qw(e,t){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||s.readyState!=="loading")t();else{var a=function(){t(),s.removeEventListener("DOMContentLoaded",a)};s.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function Dn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Wu=null;function ug(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(t===0)return Dn(e.nextSibling);t--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||t++}e=e.nextSibling}return null}function dg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(t===0)return e;t--}else s!=="/$"&&s!=="/&"||t++}e=e.previousSibling}return null}function fg(e,t,s){switch(t=$a(s),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function po(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);ec(e)}var Pn=new Map,hg=new Set;function Va(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var yr=M.d;M.d={f:Ww,r:Zw,D:eT,C:tT,L:nT,m:rT,X:sT,S:iT,M:oT};function Ww(){var e=yr.f(),t=Da();return e||t}function Zw(e){var t=ji(e);t!==null&&t.tag===5&&t.type==="form"?Np(t):yr.r(e)}var cs=typeof document>"u"?null:document;function pg(e,t,s){var a=cs;if(a&&typeof t=="string"&&t){var d=kn(t);d='link[rel="'+e+'"][href="'+d+'"]',typeof s=="string"&&(d+='[crossorigin="'+s+'"]'),hg.has(d)||(hg.add(d),e={rel:e,crossOrigin:s,href:t},a.querySelector(d)===null&&(t=a.createElement("link"),Gt(t,"link",e),zt(t),a.head.appendChild(t)))}}function eT(e){yr.D(e),pg("dns-prefetch",e,null)}function tT(e,t){yr.C(e,t),pg("preconnect",e,t)}function nT(e,t,s){yr.L(e,t,s);var a=cs;if(a&&e&&t){var d='link[rel="preload"][as="'+kn(t)+'"]';t==="image"&&s&&s.imageSrcSet?(d+='[imagesrcset="'+kn(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(d+='[imagesizes="'+kn(s.imageSizes)+'"]')):d+='[href="'+kn(e)+'"]';var h=d;switch(t){case"style":h=us(e);break;case"script":h=ds(e)}Pn.has(h)||(e=E({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),Pn.set(h,e),a.querySelector(d)!==null||t==="style"&&a.querySelector(mo(h))||t==="script"&&a.querySelector(go(h))||(t=a.createElement("link"),Gt(t,"link",e),zt(t),a.head.appendChild(t)))}}function rT(e,t){yr.m(e,t);var s=cs;if(s&&e){var a=t&&typeof t.as=="string"?t.as:"script",d='link[rel="modulepreload"][as="'+kn(a)+'"][href="'+kn(e)+'"]',h=d;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=ds(e)}if(!Pn.has(h)&&(e=E({rel:"modulepreload",href:e},t),Pn.set(h,e),s.querySelector(d)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(go(h)))return}a=s.createElement("link"),Gt(a,"link",e),zt(a),s.head.appendChild(a)}}}function iT(e,t,s){yr.S(e,t,s);var a=cs;if(a&&e){var d=Oi(a).hoistableStyles,h=us(e);t=t||"default";var v=d.get(h);if(!v){var k={loading:0,preload:null};if(v=a.querySelector(mo(h)))k.loading=5;else{e=E({rel:"stylesheet",href:e,"data-precedence":t},s),(s=Pn.get(h))&&Zu(e,s);var F=v=a.createElement("link");zt(F),Gt(F,"link",e),F._p=new Promise(function(de,Te){F.onload=de,F.onerror=Te}),F.addEventListener("load",function(){k.loading|=1}),F.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Ga(v,t,a)}v={type:"stylesheet",instance:v,count:1,state:k},d.set(h,v)}}}function sT(e,t){yr.X(e,t);var s=cs;if(s&&e){var a=Oi(s).hoistableScripts,d=ds(e),h=a.get(d);h||(h=s.querySelector(go(d)),h||(e=E({src:e,async:!0},t),(t=Pn.get(d))&&ed(e,t),h=s.createElement("script"),zt(h),Gt(h,"link",e),s.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},a.set(d,h))}}function oT(e,t){yr.M(e,t);var s=cs;if(s&&e){var a=Oi(s).hoistableScripts,d=ds(e),h=a.get(d);h||(h=s.querySelector(go(d)),h||(e=E({src:e,async:!0,type:"module"},t),(t=Pn.get(d))&&ed(e,t),h=s.createElement("script"),zt(h),Gt(h,"link",e),s.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},a.set(d,h))}}function mg(e,t,s,a){var d=(d=_.current)?Va(d):null;if(!d)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=us(s.href),s=Oi(d).hoistableStyles,a=s.get(t),a||(a={type:"style",instance:null,count:0,state:null},s.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=us(s.href);var h=Oi(d).hoistableStyles,v=h.get(e);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,v),(h=d.querySelector(mo(e)))&&!h._p&&(v.instance=h,v.state.loading=5),Pn.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Pn.set(e,s),h||aT(d,e,s,v.state))),t&&a===null)throw Error(o(528,""));return v}if(t&&a!==null)throw Error(o(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ds(s),s=Oi(d).hoistableScripts,a=s.get(t),a||(a={type:"script",instance:null,count:0,state:null},s.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function us(e){return'href="'+kn(e)+'"'}function mo(e){return'link[rel="stylesheet"]['+e+"]"}function gg(e){return E({},e,{"data-precedence":e.precedence,precedence:null})}function aT(e,t,s,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),Gt(t,"link",s),zt(t),e.head.appendChild(t))}function ds(e){return'[src="'+kn(e)+'"]'}function go(e){return"script[async]"+e}function yg(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+kn(s.href)+'"]');if(a)return t.instance=a,zt(a),a;var d=E({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),zt(a),Gt(a,"style",d),Ga(a,s.precedence,e),t.instance=a;case"stylesheet":d=us(s.href);var h=e.querySelector(mo(d));if(h)return t.state.loading|=4,t.instance=h,zt(h),h;a=gg(s),(d=Pn.get(d))&&Zu(a,d),h=(e.ownerDocument||e).createElement("link"),zt(h);var v=h;return v._p=new Promise(function(k,F){v.onload=k,v.onerror=F}),Gt(h,"link",a),t.state.loading|=4,Ga(h,s.precedence,e),t.instance=h;case"script":return h=ds(s.src),(d=e.querySelector(go(h)))?(t.instance=d,zt(d),d):(a=s,(d=Pn.get(h))&&(a=E({},s),ed(a,d)),e=e.ownerDocument||e,d=e.createElement("script"),zt(d),Gt(d,"link",a),e.head.appendChild(d),t.instance=d);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,Ga(a,s.precedence,e));return t.instance}function Ga(e,t,s){for(var a=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=a.length?a[a.length-1]:null,h=d,v=0;v<a.length;v++){var k=a[v];if(k.dataset.precedence===t)h=k;else if(h!==d)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function Zu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function ed(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Fa=null;function vg(e,t,s){if(Fa===null){var a=new Map,d=Fa=new Map;d.set(s,a)}else d=Fa,a=d.get(s),a||(a=new Map,d.set(s,a));if(a.has(e))return a;for(a.set(e,null),s=s.getElementsByTagName(e),d=0;d<s.length;d++){var h=s[d];if(!(h[js]||h[Ht]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var v=h.getAttribute(t)||"";v=e+v;var k=a.get(v);k?k.push(h):a.set(v,[h])}}return a}function bg(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function lT(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Sg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function cT(e,t,s,a){if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=us(a.href),h=t.querySelector(mo(d));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ya.bind(e),t.then(e,e)),s.state.loading|=4,s.instance=h,zt(h);return}h=t.ownerDocument||t,a=gg(a),(d=Pn.get(d))&&Zu(a,d),h=h.createElement("link"),zt(h);var v=h;v._p=new Promise(function(k,F){v.onload=k,v.onerror=F}),Gt(h,"link",a),s.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=Ya.bind(e),t.addEventListener("load",s),t.addEventListener("error",s))}}var td=0;function uT(e,t){return e.stylesheets&&e.count===0&&Ja(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var a=setTimeout(function(){if(e.stylesheets&&Ja(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+t);0<e.imgBytes&&td===0&&(td=62500*Vw());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ja(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>td?50:800)+t);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(d)}}:null}function Ya(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ja(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Xa=null;function Ja(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Xa=new Map,t.forEach(dT,e),Xa=null,Ya.call(e))}function dT(e,t){if(!(t.state.loading&4)){var s=Xa.get(e);if(s)var a=s.get(null);else{s=new Map,Xa.set(e,s);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<d.length;h++){var v=d[h];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(s.set(v.dataset.precedence,v),a=v)}a&&s.set(null,a)}d=t.instance,v=d.getAttribute("data-precedence"),h=s.get(v)||a,h===a&&s.set(null,d),s.set(v,d),this.count++,a=Ya.bind(this),d.addEventListener("load",a),d.addEventListener("error",a),h?h.parentNode.insertBefore(d,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),t.state.loading|=4}}var yo={$$typeof:me,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function fT(e,t,s,a,d,h,v,k,F){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kl(0),this.hiddenUpdates=Kl(null),this.identifierPrefix=a,this.onUncaughtError=d,this.onCaughtError=h,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function wg(e,t,s,a,d,h,v,k,F,de,Te,_e){return e=new fT(e,t,s,v,F,de,Te,_e,k),t=1,h===!0&&(t|=24),h=bn(3,null,null,t),e.current=h,h.stateNode=e,t=Uc(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:a,isDehydrated:s,cache:t},zc(h),e}function Tg(e){return e?(e=qi,e):qi}function Cg(e,t,s,a,d,h){d=Tg(d),a.context===null?a.context=d:a.pendingContext=d,a=kr(t),a.payload={element:s},h=h===void 0?null:h,h!==null&&(a.callback=h),s=Ar(e,a,t),s!==null&&(pn(s,e,t),Xs(s,e,t))}function xg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function nd(e,t){xg(e,t),(e=e.alternate)&&xg(e,t)}function Rg(e){if(e.tag===13||e.tag===31){var t=si(e,67108864);t!==null&&pn(t,e,67108864),nd(e,67108864)}}function Eg(e){if(e.tag===13||e.tag===31){var t=xn();t=Ql(t);var s=si(e,t);s!==null&&pn(s,e,t),nd(e,t)}}var Ka=!0;function hT(e,t,s,a){var d=H.T;H.T=null;var h=M.p;try{M.p=2,rd(e,t,s,a)}finally{M.p=h,H.T=d}}function pT(e,t,s,a){var d=H.T;H.T=null;var h=M.p;try{M.p=8,rd(e,t,s,a)}finally{M.p=h,H.T=d}}function rd(e,t,s,a){if(Ka){var d=id(a);if(d===null)$u(e,t,a,Qa,s),kg(e,a);else if(gT(d,e,t,s,a))a.stopPropagation();else if(kg(e,a),t&4&&-1<mT.indexOf(e)){for(;d!==null;){var h=ji(d);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var v=ei(h.pendingLanes);if(v!==0){var k=h;for(k.pendingLanes|=2,k.entangledLanes|=2;v;){var F=1<<31-ze(v);k.entanglements[1]|=F,v&=~F}Jn(h),(lt&6)===0&&(Ma=He()+500,uo(0))}}break;case 31:case 13:k=si(h,2),k!==null&&pn(k,h,2),Da(),nd(h,2)}if(h=id(a),h===null&&$u(e,t,a,Qa,s),h===d)break;d=h}d!==null&&a.stopPropagation()}else $u(e,t,a,null,s)}}function id(e){return e=oc(e),sd(e)}var Qa=null;function sd(e){if(Qa=null,e=Ni(e),e!==null){var t=c(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=f(t),e!==null)return e;e=null}else if(s===31){if(e=p(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Qa=e,null}function _g(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ge()){case j:return 2;case C:return 8;case D:case ne:return 32;case $:return 268435456;default:return 32}default:return 32}}var od=!1,Br=null,Hr=null,qr=null,vo=new Map,bo=new Map,$r=[],mT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kg(e,t){switch(e){case"focusin":case"focusout":Br=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":qr=null;break;case"pointerover":case"pointerout":vo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bo.delete(t.pointerId)}}function So(e,t,s,a,d,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:s,eventSystemFlags:a,nativeEvent:h,targetContainers:[d]},t!==null&&(t=ji(t),t!==null&&Rg(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function gT(e,t,s,a,d){switch(t){case"focusin":return Br=So(Br,e,t,s,a,d),!0;case"dragenter":return Hr=So(Hr,e,t,s,a,d),!0;case"mouseover":return qr=So(qr,e,t,s,a,d),!0;case"pointerover":var h=d.pointerId;return vo.set(h,So(vo.get(h)||null,e,t,s,a,d)),!0;case"gotpointercapture":return h=d.pointerId,bo.set(h,So(bo.get(h)||null,e,t,s,a,d)),!0}return!1}function Ag(e){var t=Ni(e.target);if(t!==null){var s=c(t);if(s!==null){if(t=s.tag,t===13){if(t=f(s),t!==null){e.blockedOn=t,$f(e.priority,function(){Eg(s)});return}}else if(t===31){if(t=p(s),t!==null){e.blockedOn=t,$f(e.priority,function(){Eg(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Wa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=id(e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);sc=a,s.target.dispatchEvent(a),sc=null}else return t=ji(s),t!==null&&Rg(t),e.blockedOn=s,!1;t.shift()}return!0}function Ng(e,t,s){Wa(e)&&s.delete(t)}function yT(){od=!1,Br!==null&&Wa(Br)&&(Br=null),Hr!==null&&Wa(Hr)&&(Hr=null),qr!==null&&Wa(qr)&&(qr=null),vo.forEach(Ng),bo.forEach(Ng)}function Za(e,t){e.blockedOn===t&&(e.blockedOn=null,od||(od=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,yT)))}var el=null;function jg(e){el!==e&&(el=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){el===e&&(el=null);for(var t=0;t<e.length;t+=3){var s=e[t],a=e[t+1],d=e[t+2];if(typeof a!="function"){if(sd(a||s)===null)continue;break}var h=ji(s);h!==null&&(e.splice(t,3),t-=3,iu(h,{pending:!0,data:d,method:s.method,action:a},a,d))}}))}function fs(e){function t(F){return Za(F,e)}Br!==null&&Za(Br,e),Hr!==null&&Za(Hr,e),qr!==null&&Za(qr,e),vo.forEach(t),bo.forEach(t);for(var s=0;s<$r.length;s++){var a=$r[s];a.blockedOn===e&&(a.blockedOn=null)}for(;0<$r.length&&(s=$r[0],s.blockedOn===null);)Ag(s),s.blockedOn===null&&$r.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(a=0;a<s.length;a+=3){var d=s[a],h=s[a+1],v=d[ln]||null;if(typeof h=="function")v||jg(s);else if(v){var k=null;if(h&&h.hasAttribute("formAction")){if(d=h,v=h[ln]||null)k=v.formAction;else if(sd(d)!==null)continue}else k=v.action;typeof k=="function"?s[a+1]=k:(s.splice(a,3),a-=3),jg(s)}}}function Og(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function t(){d!==null&&(d(),d=null),a||setTimeout(s,20)}function s(){if(!a&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(s,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),d!==null&&(d(),d=null)}}}function ad(e){this._internalRoot=e}tl.prototype.render=ad.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var s=t.current,a=xn();Cg(s,a,e,t,null,null)},tl.prototype.unmount=ad.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Cg(e.current,2,null,e,null,null),Da(),t[Ai]=null}};function tl(e){this._internalRoot=e}tl.prototype.unstable_scheduleHydration=function(e){if(e){var t=qf();e={blockedOn:null,target:e,priority:t};for(var s=0;s<$r.length&&t!==0&&t<$r[s].priority;s++);$r.splice(s,0,e),s===0&&Ag(e)}};var Mg=n.version;if(Mg!=="19.2.3")throw Error(o(527,Mg,"19.2.3"));M.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=g(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var vT={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nl.isDisabled&&nl.supportsFiber)try{Ie=nl.inject(vT),Oe=nl}catch{}}return To.createRoot=function(e,t){if(!l(e))throw Error(o(299));var s=!1,a="",d=Bp,h=Hp,v=qp;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(d=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(v=t.onRecoverableError)),t=wg(e,1,!1,null,null,s,a,null,d,h,v,Og),e[Ai]=t.current,qu(e),new ad(t)},To.hydrateRoot=function(e,t,s){if(!l(e))throw Error(o(299));var a=!1,d="",h=Bp,v=Hp,k=qp,F=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(k=s.onRecoverableError),s.formState!==void 0&&(F=s.formState)),t=wg(e,1,!0,t,s??null,a,d,F,h,v,k,Og),t.context=Tg(null),s=t.current,a=xn(),a=Ql(a),d=kr(a),d.callback=null,Ar(s,d,a),s=a,t.current.lanes=s,Ns(t,s),Jn(t),e[Ai]=t.current,qu(e),new tl(t)},To.version="19.2.3",To}var Vg;function kT(){if(Vg)return ud.exports;Vg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),ud.exports=_T(),ud.exports}var AT=kT();var Gg="popstate";function NT(r={}){function n(o,l){let{pathname:c,search:f,hash:p}=o.location;return Dd("",{pathname:c,search:f,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function i(o,l){return typeof l=="string"?l:No(l)}return OT(n,i,null,r)}function St(r,n){if(r===!1||r===null||typeof r>"u")throw new Error(n)}function zn(r,n){if(!r){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function jT(){return Math.random().toString(36).substring(2,10)}function Fg(r,n){return{usr:r.state,key:r.key,idx:n}}function Dd(r,n,i=null,o){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof n=="string"?Ts(n):n,state:i,key:n&&n.key||o||jT()}}function No({pathname:r="/",search:n="",hash:i=""}){return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(r+=i.charAt(0)==="#"?i:"#"+i),r}function Ts(r){let n={};if(r){let i=r.indexOf("#");i>=0&&(n.hash=r.substring(i),r=r.substring(0,i));let o=r.indexOf("?");o>=0&&(n.search=r.substring(o),r=r.substring(0,o)),r&&(n.pathname=r)}return n}function OT(r,n,i,o={}){let{window:l=document.defaultView,v5Compat:c=!1}=o,f=l.history,p="POP",m=null,g=y();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function y(){return(f.state||{idx:null}).idx}function E(){p="POP";let Y=y(),le=Y==null?null:Y-g;g=Y,m&&m({action:p,location:ee.location,delta:le})}function L(Y,le){p="PUSH";let fe=Dd(ee.location,Y,le);g=y()+1;let me=Fg(fe,g),Q=ee.createHref(fe);try{f.pushState(me,"",Q)}catch(re){if(re instanceof DOMException&&re.name==="DataCloneError")throw re;l.location.assign(Q)}c&&m&&m({action:p,location:ee.location,delta:1})}function G(Y,le){p="REPLACE";let fe=Dd(ee.location,Y,le);g=y();let me=Fg(fe,g),Q=ee.createHref(fe);f.replaceState(me,"",Q),c&&m&&m({action:p,location:ee.location,delta:0})}function O(Y){return MT(Y)}let ee={get action(){return p},get location(){return r(l,f)},listen(Y){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(Gg,E),m=Y,()=>{l.removeEventListener(Gg,E),m=null}},createHref(Y){return n(l,Y)},createURL:O,encodeLocation(Y){let le=O(Y);return{pathname:le.pathname,search:le.search,hash:le.hash}},push:L,replace:G,go(Y){return f.go(Y)}};return ee}function MT(r,n=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),St(i,"No window.location.(origin|href) available to create URL");let o=typeof r=="string"?r:No(r);return o=o.replace(/ $/,"%20"),!n&&o.startsWith("//")&&(o=i+o),new URL(o,i)}function ev(r,n,i="/"){return UT(r,n,i,!1)}function UT(r,n,i,o){let l=typeof n=="string"?Ts(n):n,c=br(l.pathname||"/",i);if(c==null)return null;let f=tv(r);DT(f);let p=null;for(let m=0;p==null&&m<f.length;++m){let g=FT(c);p=VT(f[m],g,o)}return p}function tv(r,n=[],i=[],o="",l=!1){let c=(f,p,m=l,g)=>{let y={relativePath:g===void 0?f.path||"":g,caseSensitive:f.caseSensitive===!0,childrenIndex:p,route:f};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(o)&&m)return;St(y.relativePath.startsWith(o),`Absolute route path "${y.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(o.length)}let E=vr([o,y.relativePath]),L=i.concat(y);f.children&&f.children.length>0&&(St(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),tv(f.children,n,L,E,m)),!(f.path==null&&!f.index)&&n.push({path:E,score:qT(E,f.index),routesMeta:L})};return r.forEach((f,p)=>{if(f.path===""||!f.path?.includes("?"))c(f,p);else for(let m of nv(f.path))c(f,p,!0,m)}),n}function nv(r){let n=r.split("/");if(n.length===0)return[];let[i,...o]=n,l=i.endsWith("?"),c=i.replace(/\?$/,"");if(o.length===0)return l?[c,""]:[c];let f=nv(o.join("/")),p=[];return p.push(...f.map(m=>m===""?c:[c,m].join("/"))),l&&p.push(...f),p.map(m=>r.startsWith("/")&&m===""?"/":m)}function DT(r){r.sort((n,i)=>n.score!==i.score?i.score-n.score:$T(n.routesMeta.map(o=>o.childrenIndex),i.routesMeta.map(o=>o.childrenIndex)))}var PT=/^:[\w-]+$/,IT=3,zT=2,LT=1,BT=10,HT=-2,Yg=r=>r==="*";function qT(r,n){let i=r.split("/"),o=i.length;return i.some(Yg)&&(o+=HT),n&&(o+=zT),i.filter(l=>!Yg(l)).reduce((l,c)=>l+(PT.test(c)?IT:c===""?LT:BT),o)}function $T(r,n){return r.length===n.length&&r.slice(0,-1).every((o,l)=>o===n[l])?r[r.length-1]-n[n.length-1]:0}function VT(r,n,i=!1){let{routesMeta:o}=r,l={},c="/",f=[];for(let p=0;p<o.length;++p){let m=o[p],g=p===o.length-1,y=c==="/"?n:n.slice(c.length)||"/",E=bl({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},y),L=m.route;if(!E&&g&&i&&!o[o.length-1].route.index&&(E=bl({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!E)return null;Object.assign(l,E.params),f.push({params:l,pathname:vr([c,E.pathname]),pathnameBase:KT(vr([c,E.pathnameBase])),route:L}),E.pathnameBase!=="/"&&(c=vr([c,E.pathnameBase]))}return f}function bl(r,n){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[i,o]=GT(r.path,r.caseSensitive,r.end),l=n.match(i);if(!l)return null;let c=l[0],f=c.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:o.reduce((g,{paramName:y,isOptional:E},L)=>{if(y==="*"){let O=p[L]||"";f=c.slice(0,c.length-O.length).replace(/(.)\/+$/,"$1")}const G=p[L];return E&&!G?g[y]=void 0:g[y]=(G||"").replace(/%2F/g,"/"),g},{}),pathname:c,pathnameBase:f,pattern:r}}function GT(r,n=!1,i=!0){zn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let o=[],l="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,p,m)=>(o.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(o.push({paramName:"*"}),l+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?l+="\\/*$":r!==""&&r!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,n?void 0:"i"),o]}function FT(r){try{return r.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return zn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),r}}function br(r,n){if(n==="/")return r;if(!r.toLowerCase().startsWith(n.toLowerCase()))return null;let i=n.endsWith("/")?n.length-1:n.length,o=r.charAt(i);return o&&o!=="/"?null:r.slice(i)||"/"}var rv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,YT=r=>rv.test(r);function XT(r,n="/"){let{pathname:i,search:o="",hash:l=""}=typeof r=="string"?Ts(r):r,c;if(i)if(YT(i))c=i;else{if(i.includes("//")){let f=i;i=i.replace(/\/\/+/g,"/"),zn(!1,`Pathnames cannot have embedded double slashes - normalizing ${f} -> ${i}`)}i.startsWith("/")?c=Xg(i.substring(1),"/"):c=Xg(i,n)}else c=n;return{pathname:c,search:QT(o),hash:WT(l)}}function Xg(r,n){let i=n.replace(/\/+$/,"").split("/");return r.split("/").forEach(l=>{l===".."?i.length>1&&i.pop():l!=="."&&i.push(l)}),i.length>1?i.join("/"):"/"}function pd(r,n,i,o){return`Cannot include a '${r}' character in a manually specified \`to.${n}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function JT(r){return r.filter((n,i)=>i===0||n.route.path&&n.route.path.length>0)}function Wd(r){let n=JT(r);return n.map((i,o)=>o===n.length-1?i.pathname:i.pathnameBase)}function Zd(r,n,i,o=!1){let l;typeof r=="string"?l=Ts(r):(l={...r},St(!l.pathname||!l.pathname.includes("?"),pd("?","pathname","search",l)),St(!l.pathname||!l.pathname.includes("#"),pd("#","pathname","hash",l)),St(!l.search||!l.search.includes("#"),pd("#","search","hash",l)));let c=r===""||l.pathname==="",f=c?"/":l.pathname,p;if(f==null)p=i;else{let E=n.length-1;if(!o&&f.startsWith("..")){let L=f.split("/");for(;L[0]==="..";)L.shift(),E-=1;l.pathname=L.join("/")}p=E>=0?n[E]:"/"}let m=XT(l,p),g=f&&f!=="/"&&f.endsWith("/"),y=(c||f===".")&&i.endsWith("/");return!m.pathname.endsWith("/")&&(g||y)&&(m.pathname+="/"),m}var vr=r=>r.join("/").replace(/\/\/+/g,"/"),KT=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),QT=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,WT=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,ZT=class{constructor(r,n,i,o=!1){this.status=r,this.statusText=n||"",this.internal=o,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function eC(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function tC(r){return r.map(n=>n.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var iv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function sv(r,n){let i=r;if(typeof i!="string"||!rv.test(i))return{absoluteURL:void 0,isExternal:!1,to:i};let o=i,l=!1;if(iv)try{let c=new URL(window.location.href),f=i.startsWith("//")?new URL(c.protocol+i):new URL(i),p=br(f.pathname,n);f.origin===c.origin&&p!=null?i=p+f.search+f.hash:l=!0}catch{zn(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:l,to:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var ov=["POST","PUT","PATCH","DELETE"];new Set(ov);var nC=["GET",...ov];new Set(nC);var Cs=U.createContext(null);Cs.displayName="DataRouter";var Nl=U.createContext(null);Nl.displayName="DataRouterState";var rC=U.createContext(!1),av=U.createContext({isTransitioning:!1});av.displayName="ViewTransition";var iC=U.createContext(new Map);iC.displayName="Fetchers";var sC=U.createContext(null);sC.displayName="Await";var En=U.createContext(null);En.displayName="Navigation";var Do=U.createContext(null);Do.displayName="Location";var Vn=U.createContext({outlet:null,matches:[],isDataRoute:!1});Vn.displayName="Route";var ef=U.createContext(null);ef.displayName="RouteError";var lv="REACT_ROUTER_ERROR",oC="REDIRECT",aC="ROUTE_ERROR_RESPONSE";function lC(r){if(r.startsWith(`${lv}:${oC}:{`))try{let n=JSON.parse(r.slice(28));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.location=="string"&&typeof n.reloadDocument=="boolean"&&typeof n.replace=="boolean")return n}catch{}}function cC(r){if(r.startsWith(`${lv}:${aC}:{`))try{let n=JSON.parse(r.slice(40));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string")return new ZT(n.status,n.statusText,n.data)}catch{}}function uC(r,{relative:n}={}){St(xs(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:o}=U.useContext(En),{hash:l,pathname:c,search:f}=Po(r,{relative:n}),p=c;return i!=="/"&&(p=c==="/"?i:vr([i,c])),o.createHref({pathname:p,search:f,hash:l})}function xs(){return U.useContext(Do)!=null}function Zn(){return St(xs(),"useLocation() may be used only in the context of a <Router> component."),U.useContext(Do).location}var cv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uv(r){U.useContext(En).static||U.useLayoutEffect(r)}function Wr(){let{isDataRoute:r}=U.useContext(Vn);return r?CC():dC()}function dC(){St(xs(),"useNavigate() may be used only in the context of a <Router> component.");let r=U.useContext(Cs),{basename:n,navigator:i}=U.useContext(En),{matches:o}=U.useContext(Vn),{pathname:l}=Zn(),c=JSON.stringify(Wd(o)),f=U.useRef(!1);return uv(()=>{f.current=!0}),U.useCallback((m,g={})=>{if(zn(f.current,cv),!f.current)return;if(typeof m=="number"){i.go(m);return}let y=Zd(m,JSON.parse(c),l,g.relative==="path");r==null&&n!=="/"&&(y.pathname=y.pathname==="/"?n:vr([n,y.pathname])),(g.replace?i.replace:i.push)(y,g.state,g)},[n,i,c,l,r])}U.createContext(null);function dv(){let{matches:r}=U.useContext(Vn),n=r[r.length-1];return n?n.params:{}}function Po(r,{relative:n}={}){let{matches:i}=U.useContext(Vn),{pathname:o}=Zn(),l=JSON.stringify(Wd(i));return U.useMemo(()=>Zd(r,JSON.parse(l),o,n==="path"),[r,l,o,n])}function fC(r,n){return fv(r,n)}function fv(r,n,i,o,l){St(xs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:c}=U.useContext(En),{matches:f}=U.useContext(Vn),p=f[f.length-1],m=p?p.params:{},g=p?p.pathname:"/",y=p?p.pathnameBase:"/",E=p&&p.route;{let fe=E&&E.path||"";pv(g,!E||fe.endsWith("*")||fe.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${fe}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${fe}"> to <Route path="${fe==="/"?"*":`${fe}/*`}">.`)}let L=Zn(),G;if(n){let fe=typeof n=="string"?Ts(n):n;St(y==="/"||fe.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${fe.pathname}" was given in the \`location\` prop.`),G=fe}else G=L;let O=G.pathname||"/",ee=O;if(y!=="/"){let fe=y.replace(/^\//,"").split("/");ee="/"+O.replace(/^\//,"").split("/").slice(fe.length).join("/")}let Y=ev(r,{pathname:ee});zn(E||Y!=null,`No routes matched location "${G.pathname}${G.search}${G.hash}" `),zn(Y==null||Y[Y.length-1].route.element!==void 0||Y[Y.length-1].route.Component!==void 0||Y[Y.length-1].route.lazy!==void 0,`Matched leaf route at location "${G.pathname}${G.search}${G.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let le=yC(Y&&Y.map(fe=>Object.assign({},fe,{params:Object.assign({},m,fe.params),pathname:vr([y,c.encodeLocation?c.encodeLocation(fe.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:fe.pathname]),pathnameBase:fe.pathnameBase==="/"?y:vr([y,c.encodeLocation?c.encodeLocation(fe.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:fe.pathnameBase])})),f,i,o,l);return n&&le?U.createElement(Do.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...G},navigationType:"POP"}},le):le}function hC(){let r=TC(),n=eC(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),i=r instanceof Error?r.stack:null,o="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:o},c={padding:"2px 4px",backgroundColor:o},f=null;return console.error("Error handled by React Router default ErrorBoundary:",r),f=U.createElement(U.Fragment,null,U.createElement("p",null," Hey developer "),U.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",U.createElement("code",{style:c},"ErrorBoundary")," or"," ",U.createElement("code",{style:c},"errorElement")," prop on your route.")),U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},n),i?U.createElement("pre",{style:l},i):null,f)}var pC=U.createElement(hC,null),hv=class extends U.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,n){return n.location!==r.location||n.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:n.error,location:n.location,revalidation:r.revalidation||n.revalidation}}componentDidCatch(r,n){this.props.onError?this.props.onError(r,n):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const i=cC(r.digest);i&&(r=i)}let n=r!==void 0?U.createElement(Vn.Provider,{value:this.props.routeContext},U.createElement(ef.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?U.createElement(mC,{error:r},n):n}};hv.contextType=rC;var md=new WeakMap;function mC({children:r,error:n}){let{basename:i}=U.useContext(En);if(typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){let o=lC(n.digest);if(o){let l=md.get(n);if(l)throw l;let c=sv(o.location,i);if(iv&&!md.get(n))if(c.isExternal||o.reloadDocument)window.location.href=c.absoluteURL||c.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(c.to,{replace:o.replace}));throw md.set(n,f),f}return U.createElement("meta",{httpEquiv:"refresh",content:`0;url=${c.absoluteURL||c.to}`})}}return r}function gC({routeContext:r,match:n,children:i}){let o=U.useContext(Cs);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),U.createElement(Vn.Provider,{value:r},i)}function yC(r,n=[],i=null,o=null,l=null){if(r==null){if(!i)return null;if(i.errors)r=i.matches;else if(n.length===0&&!i.initialized&&i.matches.length>0)r=i.matches;else return null}let c=r,f=i?.errors;if(f!=null){let y=c.findIndex(E=>E.route.id&&f?.[E.route.id]!==void 0);St(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),c=c.slice(0,Math.min(c.length,y+1))}let p=!1,m=-1;if(i)for(let y=0;y<c.length;y++){let E=c[y];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(m=y),E.route.id){let{loaderData:L,errors:G}=i,O=E.route.loader&&!L.hasOwnProperty(E.route.id)&&(!G||G[E.route.id]===void 0);if(E.route.lazy||O){p=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}let g=i&&o?(y,E)=>{o(y,{location:i.location,params:i.matches?.[0]?.params??{},unstable_pattern:tC(i.matches),errorInfo:E})}:void 0;return c.reduceRight((y,E,L)=>{let G,O=!1,ee=null,Y=null;i&&(G=f&&E.route.id?f[E.route.id]:void 0,ee=E.route.errorElement||pC,p&&(m<0&&L===0?(pv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),O=!0,Y=null):m===L&&(O=!0,Y=E.route.hydrateFallbackElement||null)));let le=n.concat(c.slice(0,L+1)),fe=()=>{let me;return G?me=ee:O?me=Y:E.route.Component?me=U.createElement(E.route.Component,null):E.route.element?me=E.route.element:me=y,U.createElement(gC,{match:E,routeContext:{outlet:y,matches:le,isDataRoute:i!=null},children:me})};return i&&(E.route.ErrorBoundary||E.route.errorElement||L===0)?U.createElement(hv,{location:i.location,revalidation:i.revalidation,component:ee,error:G,children:fe(),routeContext:{outlet:null,matches:le,isDataRoute:!0},onError:g}):fe()},null)}function tf(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vC(r){let n=U.useContext(Cs);return St(n,tf(r)),n}function bC(r){let n=U.useContext(Nl);return St(n,tf(r)),n}function SC(r){let n=U.useContext(Vn);return St(n,tf(r)),n}function nf(r){let n=SC(r),i=n.matches[n.matches.length-1];return St(i.route.id,`${r} can only be used on routes that contain a unique "id"`),i.route.id}function wC(){return nf("useRouteId")}function TC(){let r=U.useContext(ef),n=bC("useRouteError"),i=nf("useRouteError");return r!==void 0?r:n.errors?.[i]}function CC(){let{router:r}=vC("useNavigate"),n=nf("useNavigate"),i=U.useRef(!1);return uv(()=>{i.current=!0}),U.useCallback(async(l,c={})=>{zn(i.current,cv),i.current&&(typeof l=="number"?await r.navigate(l):await r.navigate(l,{fromRouteId:n,...c}))},[r,n])}var Jg={};function pv(r,n,i){!n&&!Jg[r]&&(Jg[r]=!0,zn(!1,i))}U.memo(xC);function xC({routes:r,future:n,state:i,onError:o}){return fv(r,void 0,i,o,n)}function Kn({to:r,replace:n,state:i,relative:o}){St(xs(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=U.useContext(En);zn(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:c}=U.useContext(Vn),{pathname:f}=Zn(),p=Wr(),m=Zd(r,Wd(c),f,o==="path"),g=JSON.stringify(m);return U.useEffect(()=>{p(JSON.parse(g),{replace:n,state:i,relative:o})},[p,g,o,n,i]),null}function an(r){St(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function RC({basename:r="/",children:n=null,location:i,navigationType:o="POP",navigator:l,static:c=!1,unstable_useTransitions:f}){St(!xs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=r.replace(/^\/*/,"/"),m=U.useMemo(()=>({basename:p,navigator:l,static:c,unstable_useTransitions:f,future:{}}),[p,l,c,f]);typeof i=="string"&&(i=Ts(i));let{pathname:g="/",search:y="",hash:E="",state:L=null,key:G="default"}=i,O=U.useMemo(()=>{let ee=br(g,p);return ee==null?null:{location:{pathname:ee,search:y,hash:E,state:L,key:G},navigationType:o}},[p,g,y,E,L,G,o]);return zn(O!=null,`<Router basename="${p}"> is not able to match the URL "${g}${y}${E}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:U.createElement(En.Provider,{value:m},U.createElement(Do.Provider,{children:n,value:O}))}function EC({children:r,location:n}){return fC(Pd(r),n)}function Pd(r,n=[]){let i=[];return U.Children.forEach(r,(o,l)=>{if(!U.isValidElement(o))return;let c=[...n,l];if(o.type===U.Fragment){i.push.apply(i,Pd(o.props.children,c));return}St(o.type===an,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),St(!o.props.index||!o.props.children,"An index route cannot have child routes.");let f={id:o.props.id||c.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(f.children=Pd(o.props.children,c)),i.push(f)}),i}var fl="get",hl="application/x-www-form-urlencoded";function jl(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function _C(r){return jl(r)&&r.tagName.toLowerCase()==="button"}function kC(r){return jl(r)&&r.tagName.toLowerCase()==="form"}function AC(r){return jl(r)&&r.tagName.toLowerCase()==="input"}function NC(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function jC(r,n){return r.button===0&&(!n||n==="_self")&&!NC(r)}var rl=null;function OC(){if(rl===null)try{new FormData(document.createElement("form"),0),rl=!1}catch{rl=!0}return rl}var MC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function gd(r){return r!=null&&!MC.has(r)?(zn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${hl}"`),null):r}function UC(r,n){let i,o,l,c,f;if(kC(r)){let p=r.getAttribute("action");o=p?br(p,n):null,i=r.getAttribute("method")||fl,l=gd(r.getAttribute("enctype"))||hl,c=new FormData(r)}else if(_C(r)||AC(r)&&(r.type==="submit"||r.type==="image")){let p=r.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=r.getAttribute("formaction")||p.getAttribute("action");if(o=m?br(m,n):null,i=r.getAttribute("formmethod")||p.getAttribute("method")||fl,l=gd(r.getAttribute("formenctype"))||gd(p.getAttribute("enctype"))||hl,c=new FormData(p,r),!OC()){let{name:g,type:y,value:E}=r;if(y==="image"){let L=g?`${g}.`:"";c.append(`${L}x`,"0"),c.append(`${L}y`,"0")}else g&&c.append(g,E)}}else{if(jl(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=fl,o=null,l=hl,f=r}return c&&l==="text/plain"&&(f=c,c=void 0),{action:o,method:i.toLowerCase(),encType:l,formData:c,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function rf(r,n){if(r===!1||r===null||typeof r>"u")throw new Error(n)}function DC(r,n,i){let o=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return o.pathname==="/"?o.pathname=`_root.${i}`:n&&br(o.pathname,n)==="/"?o.pathname=`${n.replace(/\/$/,"")}/_root.${i}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${i}`,o}async function PC(r,n){if(r.id in n)return n[r.id];try{let i=await import(r.module);return n[r.id]=i,i}catch(i){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function IC(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function zC(r,n,i){let o=await Promise.all(r.map(async l=>{let c=n.routes[l.route.id];if(c){let f=await PC(c,i);return f.links?f.links():[]}return[]}));return qC(o.flat(1).filter(IC).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Kg(r,n,i,o,l,c){let f=(m,g)=>i[g]?m.route.id!==i[g].route.id:!0,p=(m,g)=>i[g].pathname!==m.pathname||i[g].route.path?.endsWith("*")&&i[g].params["*"]!==m.params["*"];return c==="assets"?n.filter((m,g)=>f(m,g)||p(m,g)):c==="data"?n.filter((m,g)=>{let y=o.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(f(m,g)||p(m,g))return!0;if(m.route.shouldRevalidate){let E=m.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function LC(r,n,{includeHydrateFallback:i}={}){return BC(r.map(o=>{let l=n.routes[o.route.id];if(!l)return[];let c=[l.module];return l.clientActionModule&&(c=c.concat(l.clientActionModule)),l.clientLoaderModule&&(c=c.concat(l.clientLoaderModule)),i&&l.hydrateFallbackModule&&(c=c.concat(l.hydrateFallbackModule)),l.imports&&(c=c.concat(l.imports)),c}).flat(1))}function BC(r){return[...new Set(r)]}function HC(r){let n={},i=Object.keys(r).sort();for(let o of i)n[o]=r[o];return n}function qC(r,n){let i=new Set;return new Set(n),r.reduce((o,l)=>{let c=JSON.stringify(HC(l));return i.has(c)||(i.add(c),o.push({key:c,link:l})),o},[])}function mv(){let r=U.useContext(Cs);return rf(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function $C(){let r=U.useContext(Nl);return rf(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var sf=U.createContext(void 0);sf.displayName="FrameworkContext";function gv(){let r=U.useContext(sf);return rf(r,"You must render this element inside a <HydratedRouter> element"),r}function VC(r,n){let i=U.useContext(sf),[o,l]=U.useState(!1),[c,f]=U.useState(!1),{onFocus:p,onBlur:m,onMouseEnter:g,onMouseLeave:y,onTouchStart:E}=n,L=U.useRef(null);U.useEffect(()=>{if(r==="render"&&f(!0),r==="viewport"){let ee=le=>{le.forEach(fe=>{f(fe.isIntersecting)})},Y=new IntersectionObserver(ee,{threshold:.5});return L.current&&Y.observe(L.current),()=>{Y.disconnect()}}},[r]),U.useEffect(()=>{if(o){let ee=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(ee)}}},[o]);let G=()=>{l(!0)},O=()=>{l(!1),f(!1)};return i?r!=="intent"?[c,L,{}]:[c,L,{onFocus:Co(p,G),onBlur:Co(m,O),onMouseEnter:Co(g,G),onMouseLeave:Co(y,O),onTouchStart:Co(E,G)}]:[!1,L,{}]}function Co(r,n){return i=>{r&&r(i),i.defaultPrevented||n(i)}}function GC({page:r,...n}){let{router:i}=mv(),o=U.useMemo(()=>ev(i.routes,r,i.basename),[i.routes,r,i.basename]);return o?U.createElement(YC,{page:r,matches:o,...n}):null}function FC(r){let{manifest:n,routeModules:i}=gv(),[o,l]=U.useState([]);return U.useEffect(()=>{let c=!1;return zC(r,n,i).then(f=>{c||l(f)}),()=>{c=!0}},[r,n,i]),o}function YC({page:r,matches:n,...i}){let o=Zn(),{manifest:l,routeModules:c}=gv(),{basename:f}=mv(),{loaderData:p,matches:m}=$C(),g=U.useMemo(()=>Kg(r,n,m,l,o,"data"),[r,n,m,l,o]),y=U.useMemo(()=>Kg(r,n,m,l,o,"assets"),[r,n,m,l,o]),E=U.useMemo(()=>{if(r===o.pathname+o.search+o.hash)return[];let O=new Set,ee=!1;if(n.forEach(le=>{let fe=l.routes[le.route.id];!fe||!fe.hasLoader||(!g.some(me=>me.route.id===le.route.id)&&le.route.id in p&&c[le.route.id]?.shouldRevalidate||fe.hasClientLoader?ee=!0:O.add(le.route.id))}),O.size===0)return[];let Y=DC(r,f,"data");return ee&&O.size>0&&Y.searchParams.set("_routes",n.filter(le=>O.has(le.route.id)).map(le=>le.route.id).join(",")),[Y.pathname+Y.search]},[f,p,o,l,g,n,r,c]),L=U.useMemo(()=>LC(y,l),[y,l]),G=FC(y);return U.createElement(U.Fragment,null,E.map(O=>U.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...i})),L.map(O=>U.createElement("link",{key:O,rel:"modulepreload",href:O,...i})),G.map(({key:O,link:ee})=>U.createElement("link",{key:O,nonce:i.nonce,...ee})))}function XC(...r){return n=>{r.forEach(i=>{typeof i=="function"?i(n):i!=null&&(i.current=n)})}}var JC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{JC&&(window.__reactRouterVersion="7.11.0")}catch{}function KC({basename:r,children:n,unstable_useTransitions:i,window:o}){let l=U.useRef();l.current==null&&(l.current=NT({window:o,v5Compat:!0}));let c=l.current,[f,p]=U.useState({action:c.action,location:c.location}),m=U.useCallback(g=>{i===!1?p(g):U.startTransition(()=>p(g))},[i]);return U.useLayoutEffect(()=>c.listen(m),[c,m]),U.createElement(RC,{basename:r,children:n,location:f.location,navigationType:f.action,navigator:c,unstable_useTransitions:i})}var yv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,In=U.forwardRef(function({onClick:n,discover:i="render",prefetch:o="none",relative:l,reloadDocument:c,replace:f,state:p,target:m,to:g,preventScrollReset:y,viewTransition:E,unstable_defaultShouldRevalidate:L,...G},O){let{basename:ee,unstable_useTransitions:Y}=U.useContext(En),le=typeof g=="string"&&yv.test(g),fe=sv(g,ee);g=fe.to;let me=uC(g,{relative:l}),[Q,re,ve]=VC(o,G),ue=e1(g,{replace:f,state:p,target:m,preventScrollReset:y,relative:l,viewTransition:E,unstable_defaultShouldRevalidate:L,unstable_useTransitions:Y});function ke(Ne){n&&n(Ne),Ne.defaultPrevented||ue(Ne)}let Ce=U.createElement("a",{...G,...ve,href:fe.absoluteURL||me,onClick:fe.isExternal||c?n:ke,ref:XC(O,re),target:m,"data-discover":!le&&i==="render"?"true":void 0});return Q&&!le?U.createElement(U.Fragment,null,Ce,U.createElement(GC,{page:me})):Ce});In.displayName="Link";var QC=U.forwardRef(function({"aria-current":n="page",caseSensitive:i=!1,className:o="",end:l=!1,style:c,to:f,viewTransition:p,children:m,...g},y){let E=Po(f,{relative:g.relative}),L=Zn(),G=U.useContext(Nl),{navigator:O,basename:ee}=U.useContext(En),Y=G!=null&&s1(E)&&p===!0,le=O.encodeLocation?O.encodeLocation(E).pathname:E.pathname,fe=L.pathname,me=G&&G.navigation&&G.navigation.location?G.navigation.location.pathname:null;i||(fe=fe.toLowerCase(),me=me?me.toLowerCase():null,le=le.toLowerCase()),me&&ee&&(me=br(me,ee)||me);const Q=le!=="/"&&le.endsWith("/")?le.length-1:le.length;let re=fe===le||!l&&fe.startsWith(le)&&fe.charAt(Q)==="/",ve=me!=null&&(me===le||!l&&me.startsWith(le)&&me.charAt(le.length)==="/"),ue={isActive:re,isPending:ve,isTransitioning:Y},ke=re?n:void 0,Ce;typeof o=="function"?Ce=o(ue):Ce=[o,re?"active":null,ve?"pending":null,Y?"transitioning":null].filter(Boolean).join(" ");let Ne=typeof c=="function"?c(ue):c;return U.createElement(In,{...g,"aria-current":ke,className:Ce,ref:y,style:Ne,to:f,viewTransition:p},typeof m=="function"?m(ue):m)});QC.displayName="NavLink";var WC=U.forwardRef(({discover:r="render",fetcherKey:n,navigate:i,reloadDocument:o,replace:l,state:c,method:f=fl,action:p,onSubmit:m,relative:g,preventScrollReset:y,viewTransition:E,unstable_defaultShouldRevalidate:L,...G},O)=>{let{unstable_useTransitions:ee}=U.useContext(En),Y=r1(),le=i1(p,{relative:g}),fe=f.toLowerCase()==="get"?"get":"post",me=typeof p=="string"&&yv.test(p),Q=re=>{if(m&&m(re),re.defaultPrevented)return;re.preventDefault();let ve=re.nativeEvent.submitter,ue=ve?.getAttribute("formmethod")||f,ke=()=>Y(ve||re.currentTarget,{fetcherKey:n,method:ue,navigate:i,replace:l,state:c,relative:g,preventScrollReset:y,viewTransition:E,unstable_defaultShouldRevalidate:L});ee&&i!==!1?U.startTransition(()=>ke()):ke()};return U.createElement("form",{ref:O,method:fe,action:le,onSubmit:o?m:Q,...G,"data-discover":!me&&r==="render"?"true":void 0})});WC.displayName="Form";function ZC(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vv(r){let n=U.useContext(Cs);return St(n,ZC(r)),n}function e1(r,{target:n,replace:i,state:o,preventScrollReset:l,relative:c,viewTransition:f,unstable_defaultShouldRevalidate:p,unstable_useTransitions:m}={}){let g=Wr(),y=Zn(),E=Po(r,{relative:c});return U.useCallback(L=>{if(jC(L,n)){L.preventDefault();let G=i!==void 0?i:No(y)===No(E),O=()=>g(r,{replace:G,state:o,preventScrollReset:l,relative:c,viewTransition:f,unstable_defaultShouldRevalidate:p});m?U.startTransition(()=>O()):O()}},[y,g,E,i,o,n,r,l,c,f,p,m])}var t1=0,n1=()=>`__${String(++t1)}__`;function r1(){let{router:r}=vv("useSubmit"),{basename:n}=U.useContext(En),i=wC(),o=r.fetch,l=r.navigate;return U.useCallback(async(c,f={})=>{let{action:p,method:m,encType:g,formData:y,body:E}=UC(c,n);if(f.navigate===!1){let L=f.fetcherKey||n1();await o(L,i,f.action||p,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:y,body:E,formMethod:f.method||m,formEncType:f.encType||g,flushSync:f.flushSync})}else await l(f.action||p,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:y,body:E,formMethod:f.method||m,formEncType:f.encType||g,replace:f.replace,state:f.state,fromRouteId:i,flushSync:f.flushSync,viewTransition:f.viewTransition})},[o,l,n,i])}function i1(r,{relative:n}={}){let{basename:i}=U.useContext(En),o=U.useContext(Vn);St(o,"useFormAction must be used inside a RouteContext");let[l]=o.matches.slice(-1),c={...Po(r||".",{relative:n})},f=Zn();if(r==null){c.search=f.search;let p=new URLSearchParams(c.search),m=p.getAll("index");if(m.some(y=>y==="")){p.delete("index"),m.filter(E=>E).forEach(E=>p.append("index",E));let y=p.toString();c.search=y?`?${y}`:""}}return(!r||r===".")&&l.route.index&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(c.pathname=c.pathname==="/"?i:vr([i,c.pathname])),No(c)}function s1(r,{relative:n}={}){let i=U.useContext(av);St(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=vv("useViewTransitionState"),l=Po(r,{relative:n});if(!i.isTransitioning)return!1;let c=br(i.currentLocation.pathname,o)||i.currentLocation.pathname,f=br(i.nextLocation.pathname,o)||i.nextLocation.pathname;return bl(l.pathname,f)!=null||bl(l.pathname,c)!=null}const o1=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a1=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,i,o)=>o?o.toUpperCase():i.toLowerCase()),Qg=r=>{const n=a1(r);return n.charAt(0).toUpperCase()+n.slice(1)},bv=(...r)=>r.filter((n,i,o)=>!!n&&n.trim()!==""&&o.indexOf(n)===i).join(" ").trim(),l1=r=>{for(const n in r)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};var c1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const u1=U.forwardRef(({color:r="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,iconNode:f,...p},m)=>U.createElement("svg",{ref:m,...c1,width:n,height:n,stroke:r,strokeWidth:o?Number(i)*24/Number(n):i,className:bv("lucide",l),...!c&&!l1(p)&&{"aria-hidden":"true"},...p},[...f.map(([g,y])=>U.createElement(g,y)),...Array.isArray(c)?c:[c]]));const it=(r,n)=>{const i=U.forwardRef(({className:o,...l},c)=>U.createElement(u1,{ref:c,iconNode:n,className:bv(`lucide-${o1(Qg(r))}`,`lucide-${r}`,o),...l}));return i.displayName=Qg(r),i};const d1=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],of=it("arrow-left",d1);const f1=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],h1=it("calendar",f1);const p1=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],m1=it("car",p1);const g1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],y1=it("circle-alert",g1);const v1=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],yd=it("circle-check-big",v1);const b1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Sl=it("circle-question-mark",b1);const S1=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],w1=it("clock",S1);const T1=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],C1=it("copy",T1);const x1=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],wl=it("eye-off",x1);const R1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Tl=it("eye",R1);const E1=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Sv=it("funnel",E1);const _1=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],k1=it("house",_1);const A1=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],pl=it("key",A1);const N1=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],j1=it("layout-dashboard",N1);const O1=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],M1=it("log-out",O1);const U1=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Wg=it("mail",U1);const D1=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],wv=it("map-pin",D1);const P1=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],I1=it("menu",P1);const z1=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],ps=it("message-circle",z1);const L1=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],B1=it("message-square",L1);const H1=[["path",{d:"M5 12h14",key:"1ays0h"}]],Tv=it("minus",H1);const q1=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],$1=it("phone",q1);const V1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],af=it("plus",V1);const G1=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],jo=it("send",G1);const F1=[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]],Y1=it("share",F1);const X1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],J1=it("shield-check",X1);const K1=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Q1=it("square-pen",K1);const W1=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Id=it("star",W1);const Z1=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],ex=it("upload",Z1);const tx=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],nx=it("user",tx);const rx=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ms=it("users",rx);const ix=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],sx=it("utensils",ix);const ox=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],ax=it("wifi",ox);const lx=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],lf=it("x",lx),Cv=U.createContext(),cx=()=>{const r=U.useContext(Cv);if(!r)throw new Error("useNotifications must be used within NotificationProvider");return r},ux=({children:r})=>{const[n,i]=U.useState(0),o=()=>{i(0)};return u.jsx(Cv.Provider,{value:{unreadCount:n,clearUnreadCount:o},children:r})};function xv(r,n){return function(){return r.apply(n,arguments)}}const{toString:dx}=Object.prototype,{getPrototypeOf:cf}=Object,{iterator:Ol,toStringTag:Rv}=Symbol,Ml=(r=>n=>{const i=dx.call(n);return r[i]||(r[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Gn=r=>(r=r.toLowerCase(),n=>Ml(n)===r),Ul=r=>n=>typeof n===r,{isArray:Rs}=Array,gs=Ul("undefined");function Io(r){return r!==null&&!gs(r)&&r.constructor!==null&&!gs(r.constructor)&&gn(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const Ev=Gn("ArrayBuffer");function fx(r){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(r):n=r&&r.buffer&&Ev(r.buffer),n}const hx=Ul("string"),gn=Ul("function"),_v=Ul("number"),zo=r=>r!==null&&typeof r=="object",px=r=>r===!0||r===!1,ml=r=>{if(Ml(r)!=="object")return!1;const n=cf(r);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Rv in r)&&!(Ol in r)},mx=r=>{if(!zo(r)||Io(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},gx=Gn("Date"),yx=Gn("File"),vx=Gn("Blob"),bx=Gn("FileList"),Sx=r=>zo(r)&&gn(r.pipe),wx=r=>{let n;return r&&(typeof FormData=="function"&&r instanceof FormData||gn(r.append)&&((n=Ml(r))==="formdata"||n==="object"&&gn(r.toString)&&r.toString()==="[object FormData]"))},Tx=Gn("URLSearchParams"),[Cx,xx,Rx,Ex]=["ReadableStream","Request","Response","Headers"].map(Gn),_x=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Lo(r,n,{allOwnKeys:i=!1}={}){if(r===null||typeof r>"u")return;let o,l;if(typeof r!="object"&&(r=[r]),Rs(r))for(o=0,l=r.length;o<l;o++)n.call(null,r[o],o,r);else{if(Io(r))return;const c=i?Object.getOwnPropertyNames(r):Object.keys(r),f=c.length;let p;for(o=0;o<f;o++)p=c[o],n.call(null,r[p],p,r)}}function kv(r,n){if(Io(r))return null;n=n.toLowerCase();const i=Object.keys(r);let o=i.length,l;for(;o-- >0;)if(l=i[o],n===l.toLowerCase())return l;return null}const vi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Av=r=>!gs(r)&&r!==vi;function zd(){const{caseless:r,skipUndefined:n}=Av(this)&&this||{},i={},o=(l,c)=>{const f=r&&kv(i,c)||c;ml(i[f])&&ml(l)?i[f]=zd(i[f],l):ml(l)?i[f]=zd({},l):Rs(l)?i[f]=l.slice():(!n||!gs(l))&&(i[f]=l)};for(let l=0,c=arguments.length;l<c;l++)arguments[l]&&Lo(arguments[l],o);return i}const kx=(r,n,i,{allOwnKeys:o}={})=>(Lo(n,(l,c)=>{i&&gn(l)?r[c]=xv(l,i):r[c]=l},{allOwnKeys:o}),r),Ax=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),Nx=(r,n,i,o)=>{r.prototype=Object.create(n.prototype,o),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:n.prototype}),i&&Object.assign(r.prototype,i)},jx=(r,n,i,o)=>{let l,c,f;const p={};if(n=n||{},r==null)return n;do{for(l=Object.getOwnPropertyNames(r),c=l.length;c-- >0;)f=l[c],(!o||o(f,r,n))&&!p[f]&&(n[f]=r[f],p[f]=!0);r=i!==!1&&cf(r)}while(r&&(!i||i(r,n))&&r!==Object.prototype);return n},Ox=(r,n,i)=>{r=String(r),(i===void 0||i>r.length)&&(i=r.length),i-=n.length;const o=r.indexOf(n,i);return o!==-1&&o===i},Mx=r=>{if(!r)return null;if(Rs(r))return r;let n=r.length;if(!_v(n))return null;const i=new Array(n);for(;n-- >0;)i[n]=r[n];return i},Ux=(r=>n=>r&&n instanceof r)(typeof Uint8Array<"u"&&cf(Uint8Array)),Dx=(r,n)=>{const o=(r&&r[Ol]).call(r);let l;for(;(l=o.next())&&!l.done;){const c=l.value;n.call(r,c[0],c[1])}},Px=(r,n)=>{let i;const o=[];for(;(i=r.exec(n))!==null;)o.push(i);return o},Ix=Gn("HTMLFormElement"),zx=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,o,l){return o.toUpperCase()+l}),Zg=(({hasOwnProperty:r})=>(n,i)=>r.call(n,i))(Object.prototype),Lx=Gn("RegExp"),Nv=(r,n)=>{const i=Object.getOwnPropertyDescriptors(r),o={};Lo(i,(l,c)=>{let f;(f=n(l,c,r))!==!1&&(o[c]=f||l)}),Object.defineProperties(r,o)},Bx=r=>{Nv(r,(n,i)=>{if(gn(r)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const o=r[i];if(gn(o)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},Hx=(r,n)=>{const i={},o=l=>{l.forEach(c=>{i[c]=!0})};return Rs(r)?o(r):o(String(r).split(n)),i},qx=()=>{},$x=(r,n)=>r!=null&&Number.isFinite(r=+r)?r:n;function Vx(r){return!!(r&&gn(r.append)&&r[Rv]==="FormData"&&r[Ol])}const Gx=r=>{const n=new Array(10),i=(o,l)=>{if(zo(o)){if(n.indexOf(o)>=0)return;if(Io(o))return o;if(!("toJSON"in o)){n[l]=o;const c=Rs(o)?[]:{};return Lo(o,(f,p)=>{const m=i(f,l+1);!gs(m)&&(c[p]=m)}),n[l]=void 0,c}}return o};return i(r,0)},Fx=Gn("AsyncFunction"),Yx=r=>r&&(zo(r)||gn(r))&&gn(r.then)&&gn(r.catch),jv=((r,n)=>r?setImmediate:n?((i,o)=>(vi.addEventListener("message",({source:l,data:c})=>{l===vi&&c===i&&o.length&&o.shift()()},!1),l=>{o.push(l),vi.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",gn(vi.postMessage)),Xx=typeof queueMicrotask<"u"?queueMicrotask.bind(vi):typeof process<"u"&&process.nextTick||jv,Jx=r=>r!=null&&gn(r[Ol]),ye={isArray:Rs,isArrayBuffer:Ev,isBuffer:Io,isFormData:wx,isArrayBufferView:fx,isString:hx,isNumber:_v,isBoolean:px,isObject:zo,isPlainObject:ml,isEmptyObject:mx,isReadableStream:Cx,isRequest:xx,isResponse:Rx,isHeaders:Ex,isUndefined:gs,isDate:gx,isFile:yx,isBlob:vx,isRegExp:Lx,isFunction:gn,isStream:Sx,isURLSearchParams:Tx,isTypedArray:Ux,isFileList:bx,forEach:Lo,merge:zd,extend:kx,trim:_x,stripBOM:Ax,inherits:Nx,toFlatObject:jx,kindOf:Ml,kindOfTest:Gn,endsWith:Ox,toArray:Mx,forEachEntry:Dx,matchAll:Px,isHTMLForm:Ix,hasOwnProperty:Zg,hasOwnProp:Zg,reduceDescriptors:Nv,freezeMethods:Bx,toObjectSet:Hx,toCamelCase:zx,noop:qx,toFiniteNumber:$x,findKey:kv,global:vi,isContextDefined:Av,isSpecCompliantForm:Vx,toJSONObject:Gx,isAsyncFn:Fx,isThenable:Yx,setImmediate:jv,asap:Xx,isIterable:Jx};function Ke(r,n,i,o,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",n&&(this.code=n),i&&(this.config=i),o&&(this.request=o),l&&(this.response=l,this.status=l.status?l.status:null)}ye.inherits(Ke,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ye.toJSONObject(this.config),code:this.code,status:this.status}}});const Ov=Ke.prototype,Mv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{Mv[r]={value:r}});Object.defineProperties(Ke,Mv);Object.defineProperty(Ov,"isAxiosError",{value:!0});Ke.from=(r,n,i,o,l,c)=>{const f=Object.create(Ov);ye.toFlatObject(r,f,function(y){return y!==Error.prototype},g=>g!=="isAxiosError");const p=r&&r.message?r.message:"Error",m=n==null&&r?r.code:n;return Ke.call(f,p,m,i,o,l),r&&f.cause==null&&Object.defineProperty(f,"cause",{value:r,configurable:!0}),f.name=r&&r.name||"Error",c&&Object.assign(f,c),f};const Kx=null;function Ld(r){return ye.isPlainObject(r)||ye.isArray(r)}function Uv(r){return ye.endsWith(r,"[]")?r.slice(0,-2):r}function ey(r,n,i){return r?r.concat(n).map(function(l,c){return l=Uv(l),!i&&c?"["+l+"]":l}).join(i?".":""):n}function Qx(r){return ye.isArray(r)&&!r.some(Ld)}const Wx=ye.toFlatObject(ye,{},null,function(n){return/^is[A-Z]/.test(n)});function Dl(r,n,i){if(!ye.isObject(r))throw new TypeError("target must be an object");n=n||new FormData,i=ye.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ee,Y){return!ye.isUndefined(Y[ee])});const o=i.metaTokens,l=i.visitor||y,c=i.dots,f=i.indexes,m=(i.Blob||typeof Blob<"u"&&Blob)&&ye.isSpecCompliantForm(n);if(!ye.isFunction(l))throw new TypeError("visitor must be a function");function g(O){if(O===null)return"";if(ye.isDate(O))return O.toISOString();if(ye.isBoolean(O))return O.toString();if(!m&&ye.isBlob(O))throw new Ke("Blob is not supported. Use a Buffer instead.");return ye.isArrayBuffer(O)||ye.isTypedArray(O)?m&&typeof Blob=="function"?new Blob([O]):Buffer.from(O):O}function y(O,ee,Y){let le=O;if(O&&!Y&&typeof O=="object"){if(ye.endsWith(ee,"{}"))ee=o?ee:ee.slice(0,-2),O=JSON.stringify(O);else if(ye.isArray(O)&&Qx(O)||(ye.isFileList(O)||ye.endsWith(ee,"[]"))&&(le=ye.toArray(O)))return ee=Uv(ee),le.forEach(function(me,Q){!(ye.isUndefined(me)||me===null)&&n.append(f===!0?ey([ee],Q,c):f===null?ee:ee+"[]",g(me))}),!1}return Ld(O)?!0:(n.append(ey(Y,ee,c),g(O)),!1)}const E=[],L=Object.assign(Wx,{defaultVisitor:y,convertValue:g,isVisitable:Ld});function G(O,ee){if(!ye.isUndefined(O)){if(E.indexOf(O)!==-1)throw Error("Circular reference detected in "+ee.join("."));E.push(O),ye.forEach(O,function(le,fe){(!(ye.isUndefined(le)||le===null)&&l.call(n,le,ye.isString(fe)?fe.trim():fe,ee,L))===!0&&G(le,ee?ee.concat(fe):[fe])}),E.pop()}}if(!ye.isObject(r))throw new TypeError("data must be an object");return G(r),n}function ty(r){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(o){return n[o]})}function uf(r,n){this._pairs=[],r&&Dl(r,this,n)}const Dv=uf.prototype;Dv.append=function(n,i){this._pairs.push([n,i])};Dv.toString=function(n){const i=n?function(o){return n.call(this,o,ty)}:ty;return this._pairs.map(function(l){return i(l[0])+"="+i(l[1])},"").join("&")};function Zx(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Pv(r,n,i){if(!n)return r;const o=i&&i.encode||Zx;ye.isFunction(i)&&(i={serialize:i});const l=i&&i.serialize;let c;if(l?c=l(n,i):c=ye.isURLSearchParams(n)?n.toString():new uf(n,i).toString(o),c){const f=r.indexOf("#");f!==-1&&(r=r.slice(0,f)),r+=(r.indexOf("?")===-1?"?":"&")+c}return r}class ny{constructor(){this.handlers=[]}use(n,i,o){return this.handlers.push({fulfilled:n,rejected:i,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){ye.forEach(this.handlers,function(o){o!==null&&n(o)})}}const Iv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},eR=typeof URLSearchParams<"u"?URLSearchParams:uf,tR=typeof FormData<"u"?FormData:null,nR=typeof Blob<"u"?Blob:null,rR={isBrowser:!0,classes:{URLSearchParams:eR,FormData:tR,Blob:nR},protocols:["http","https","file","blob","url","data"]},df=typeof window<"u"&&typeof document<"u",Bd=typeof navigator=="object"&&navigator||void 0,iR=df&&(!Bd||["ReactNative","NativeScript","NS"].indexOf(Bd.product)<0),sR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",oR=df&&window.location.href||"http://localhost",aR=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:df,hasStandardBrowserEnv:iR,hasStandardBrowserWebWorkerEnv:sR,navigator:Bd,origin:oR},Symbol.toStringTag,{value:"Module"})),nn={...aR,...rR};function lR(r,n){return Dl(r,new nn.classes.URLSearchParams,{visitor:function(i,o,l,c){return nn.isNode&&ye.isBuffer(i)?(this.append(o,i.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)},...n})}function cR(r){return ye.matchAll(/\w+|\[(\w*)]/g,r).map(n=>n[0]==="[]"?"":n[1]||n[0])}function uR(r){const n={},i=Object.keys(r);let o;const l=i.length;let c;for(o=0;o<l;o++)c=i[o],n[c]=r[c];return n}function zv(r){function n(i,o,l,c){let f=i[c++];if(f==="__proto__")return!0;const p=Number.isFinite(+f),m=c>=i.length;return f=!f&&ye.isArray(l)?l.length:f,m?(ye.hasOwnProp(l,f)?l[f]=[l[f],o]:l[f]=o,!p):((!l[f]||!ye.isObject(l[f]))&&(l[f]=[]),n(i,o,l[f],c)&&ye.isArray(l[f])&&(l[f]=uR(l[f])),!p)}if(ye.isFormData(r)&&ye.isFunction(r.entries)){const i={};return ye.forEachEntry(r,(o,l)=>{n(cR(o),l,i,0)}),i}return null}function dR(r,n,i){if(ye.isString(r))try{return(n||JSON.parse)(r),ye.trim(r)}catch(o){if(o.name!=="SyntaxError")throw o}return(i||JSON.stringify)(r)}const Bo={transitional:Iv,adapter:["xhr","http","fetch"],transformRequest:[function(n,i){const o=i.getContentType()||"",l=o.indexOf("application/json")>-1,c=ye.isObject(n);if(c&&ye.isHTMLForm(n)&&(n=new FormData(n)),ye.isFormData(n))return l?JSON.stringify(zv(n)):n;if(ye.isArrayBuffer(n)||ye.isBuffer(n)||ye.isStream(n)||ye.isFile(n)||ye.isBlob(n)||ye.isReadableStream(n))return n;if(ye.isArrayBufferView(n))return n.buffer;if(ye.isURLSearchParams(n))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let p;if(c){if(o.indexOf("application/x-www-form-urlencoded")>-1)return lR(n,this.formSerializer).toString();if((p=ye.isFileList(n))||o.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Dl(p?{"files[]":n}:n,m&&new m,this.formSerializer)}}return c||l?(i.setContentType("application/json",!1),dR(n)):n}],transformResponse:[function(n){const i=this.transitional||Bo.transitional,o=i&&i.forcedJSONParsing,l=this.responseType==="json";if(ye.isResponse(n)||ye.isReadableStream(n))return n;if(n&&ye.isString(n)&&(o&&!this.responseType||l)){const f=!(i&&i.silentJSONParsing)&&l;try{return JSON.parse(n,this.parseReviver)}catch(p){if(f)throw p.name==="SyntaxError"?Ke.from(p,Ke.ERR_BAD_RESPONSE,this,null,this.response):p}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:nn.classes.FormData,Blob:nn.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ye.forEach(["delete","get","head","post","put","patch"],r=>{Bo.headers[r]={}});const fR=ye.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),hR=r=>{const n={};let i,o,l;return r&&r.split(`
`).forEach(function(f){l=f.indexOf(":"),i=f.substring(0,l).trim().toLowerCase(),o=f.substring(l+1).trim(),!(!i||n[i]&&fR[i])&&(i==="set-cookie"?n[i]?n[i].push(o):n[i]=[o]:n[i]=n[i]?n[i]+", "+o:o)}),n},ry=Symbol("internals");function xo(r){return r&&String(r).trim().toLowerCase()}function gl(r){return r===!1||r==null?r:ye.isArray(r)?r.map(gl):String(r)}function pR(r){const n=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=i.exec(r);)n[o[1]]=o[2];return n}const mR=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function vd(r,n,i,o,l){if(ye.isFunction(o))return o.call(this,n,i);if(l&&(n=i),!!ye.isString(n)){if(ye.isString(o))return n.indexOf(o)!==-1;if(ye.isRegExp(o))return o.test(n)}}function gR(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,i,o)=>i.toUpperCase()+o)}function yR(r,n){const i=ye.toCamelCase(" "+n);["get","set","has"].forEach(o=>{Object.defineProperty(r,o+i,{value:function(l,c,f){return this[o].call(this,n,l,c,f)},configurable:!0})})}let yn=class{constructor(n){n&&this.set(n)}set(n,i,o){const l=this;function c(p,m,g){const y=xo(m);if(!y)throw new Error("header name must be a non-empty string");const E=ye.findKey(l,y);(!E||l[E]===void 0||g===!0||g===void 0&&l[E]!==!1)&&(l[E||m]=gl(p))}const f=(p,m)=>ye.forEach(p,(g,y)=>c(g,y,m));if(ye.isPlainObject(n)||n instanceof this.constructor)f(n,i);else if(ye.isString(n)&&(n=n.trim())&&!mR(n))f(hR(n),i);else if(ye.isObject(n)&&ye.isIterable(n)){let p={},m,g;for(const y of n){if(!ye.isArray(y))throw TypeError("Object iterator must return a key-value pair");p[g=y[0]]=(m=p[g])?ye.isArray(m)?[...m,y[1]]:[m,y[1]]:y[1]}f(p,i)}else n!=null&&c(i,n,o);return this}get(n,i){if(n=xo(n),n){const o=ye.findKey(this,n);if(o){const l=this[o];if(!i)return l;if(i===!0)return pR(l);if(ye.isFunction(i))return i.call(this,l,o);if(ye.isRegExp(i))return i.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,i){if(n=xo(n),n){const o=ye.findKey(this,n);return!!(o&&this[o]!==void 0&&(!i||vd(this,this[o],o,i)))}return!1}delete(n,i){const o=this;let l=!1;function c(f){if(f=xo(f),f){const p=ye.findKey(o,f);p&&(!i||vd(o,o[p],p,i))&&(delete o[p],l=!0)}}return ye.isArray(n)?n.forEach(c):c(n),l}clear(n){const i=Object.keys(this);let o=i.length,l=!1;for(;o--;){const c=i[o];(!n||vd(this,this[c],c,n,!0))&&(delete this[c],l=!0)}return l}normalize(n){const i=this,o={};return ye.forEach(this,(l,c)=>{const f=ye.findKey(o,c);if(f){i[f]=gl(l),delete i[c];return}const p=n?gR(c):String(c).trim();p!==c&&delete i[c],i[p]=gl(l),o[p]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const i=Object.create(null);return ye.forEach(this,(o,l)=>{o!=null&&o!==!1&&(i[l]=n&&ye.isArray(o)?o.join(", "):o)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,i])=>n+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...i){const o=new this(n);return i.forEach(l=>o.set(l)),o}static accessor(n){const o=(this[ry]=this[ry]={accessors:{}}).accessors,l=this.prototype;function c(f){const p=xo(f);o[p]||(yR(l,f),o[p]=!0)}return ye.isArray(n)?n.forEach(c):c(n),this}};yn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ye.reduceDescriptors(yn.prototype,({value:r},n)=>{let i=n[0].toUpperCase()+n.slice(1);return{get:()=>r,set(o){this[i]=o}}});ye.freezeMethods(yn);function bd(r,n){const i=this||Bo,o=n||i,l=yn.from(o.headers);let c=o.data;return ye.forEach(r,function(p){c=p.call(i,c,l.normalize(),n?n.status:void 0)}),l.normalize(),c}function Lv(r){return!!(r&&r.__CANCEL__)}function Es(r,n,i){Ke.call(this,r??"canceled",Ke.ERR_CANCELED,n,i),this.name="CanceledError"}ye.inherits(Es,Ke,{__CANCEL__:!0});function Bv(r,n,i){const o=i.config.validateStatus;!i.status||!o||o(i.status)?r(i):n(new Ke("Request failed with status code "+i.status,[Ke.ERR_BAD_REQUEST,Ke.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function vR(r){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return n&&n[1]||""}function bR(r,n){r=r||10;const i=new Array(r),o=new Array(r);let l=0,c=0,f;return n=n!==void 0?n:1e3,function(m){const g=Date.now(),y=o[c];f||(f=g),i[l]=m,o[l]=g;let E=c,L=0;for(;E!==l;)L+=i[E++],E=E%r;if(l=(l+1)%r,l===c&&(c=(c+1)%r),g-f<n)return;const G=y&&g-y;return G?Math.round(L*1e3/G):void 0}}function SR(r,n){let i=0,o=1e3/n,l,c;const f=(g,y=Date.now())=>{i=y,l=null,c&&(clearTimeout(c),c=null),r(...g)};return[(...g)=>{const y=Date.now(),E=y-i;E>=o?f(g,y):(l=g,c||(c=setTimeout(()=>{c=null,f(l)},o-E)))},()=>l&&f(l)]}const Cl=(r,n,i=3)=>{let o=0;const l=bR(50,250);return SR(c=>{const f=c.loaded,p=c.lengthComputable?c.total:void 0,m=f-o,g=l(m),y=f<=p;o=f;const E={loaded:f,total:p,progress:p?f/p:void 0,bytes:m,rate:g||void 0,estimated:g&&p&&y?(p-f)/g:void 0,event:c,lengthComputable:p!=null,[n?"download":"upload"]:!0};r(E)},i)},iy=(r,n)=>{const i=r!=null;return[o=>n[0]({lengthComputable:i,total:r,loaded:o}),n[1]]},sy=r=>(...n)=>ye.asap(()=>r(...n)),wR=nn.hasStandardBrowserEnv?((r,n)=>i=>(i=new URL(i,nn.origin),r.protocol===i.protocol&&r.host===i.host&&(n||r.port===i.port)))(new URL(nn.origin),nn.navigator&&/(msie|trident)/i.test(nn.navigator.userAgent)):()=>!0,TR=nn.hasStandardBrowserEnv?{write(r,n,i,o,l,c,f){if(typeof document>"u")return;const p=[`${r}=${encodeURIComponent(n)}`];ye.isNumber(i)&&p.push(`expires=${new Date(i).toUTCString()}`),ye.isString(o)&&p.push(`path=${o}`),ye.isString(l)&&p.push(`domain=${l}`),c===!0&&p.push("secure"),ye.isString(f)&&p.push(`SameSite=${f}`),document.cookie=p.join("; ")},read(r){if(typeof document>"u")return null;const n=document.cookie.match(new RegExp("(?:^|; )"+r+"=([^;]*)"));return n?decodeURIComponent(n[1]):null},remove(r){this.write(r,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function CR(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function xR(r,n){return n?r.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):r}function Hv(r,n,i){let o=!CR(n);return r&&(o||i==!1)?xR(r,n):n}const oy=r=>r instanceof yn?{...r}:r;function Ci(r,n){n=n||{};const i={};function o(g,y,E,L){return ye.isPlainObject(g)&&ye.isPlainObject(y)?ye.merge.call({caseless:L},g,y):ye.isPlainObject(y)?ye.merge({},y):ye.isArray(y)?y.slice():y}function l(g,y,E,L){if(ye.isUndefined(y)){if(!ye.isUndefined(g))return o(void 0,g,E,L)}else return o(g,y,E,L)}function c(g,y){if(!ye.isUndefined(y))return o(void 0,y)}function f(g,y){if(ye.isUndefined(y)){if(!ye.isUndefined(g))return o(void 0,g)}else return o(void 0,y)}function p(g,y,E){if(E in n)return o(g,y);if(E in r)return o(void 0,g)}const m={url:c,method:c,data:c,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:p,headers:(g,y,E)=>l(oy(g),oy(y),E,!0)};return ye.forEach(Object.keys({...r,...n}),function(y){const E=m[y]||l,L=E(r[y],n[y],y);ye.isUndefined(L)&&E!==p||(i[y]=L)}),i}const qv=r=>{const n=Ci({},r);let{data:i,withXSRFToken:o,xsrfHeaderName:l,xsrfCookieName:c,headers:f,auth:p}=n;if(n.headers=f=yn.from(f),n.url=Pv(Hv(n.baseURL,n.url,n.allowAbsoluteUrls),r.params,r.paramsSerializer),p&&f.set("Authorization","Basic "+btoa((p.username||"")+":"+(p.password?unescape(encodeURIComponent(p.password)):""))),ye.isFormData(i)){if(nn.hasStandardBrowserEnv||nn.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(ye.isFunction(i.getHeaders)){const m=i.getHeaders(),g=["content-type","content-length"];Object.entries(m).forEach(([y,E])=>{g.includes(y.toLowerCase())&&f.set(y,E)})}}if(nn.hasStandardBrowserEnv&&(o&&ye.isFunction(o)&&(o=o(n)),o||o!==!1&&wR(n.url))){const m=l&&c&&TR.read(c);m&&f.set(l,m)}return n},RR=typeof XMLHttpRequest<"u",ER=RR&&function(r){return new Promise(function(i,o){const l=qv(r);let c=l.data;const f=yn.from(l.headers).normalize();let{responseType:p,onUploadProgress:m,onDownloadProgress:g}=l,y,E,L,G,O;function ee(){G&&G(),O&&O(),l.cancelToken&&l.cancelToken.unsubscribe(y),l.signal&&l.signal.removeEventListener("abort",y)}let Y=new XMLHttpRequest;Y.open(l.method.toUpperCase(),l.url,!0),Y.timeout=l.timeout;function le(){if(!Y)return;const me=yn.from("getAllResponseHeaders"in Y&&Y.getAllResponseHeaders()),re={data:!p||p==="text"||p==="json"?Y.responseText:Y.response,status:Y.status,statusText:Y.statusText,headers:me,config:r,request:Y};Bv(function(ue){i(ue),ee()},function(ue){o(ue),ee()},re),Y=null}"onloadend"in Y?Y.onloadend=le:Y.onreadystatechange=function(){!Y||Y.readyState!==4||Y.status===0&&!(Y.responseURL&&Y.responseURL.indexOf("file:")===0)||setTimeout(le)},Y.onabort=function(){Y&&(o(new Ke("Request aborted",Ke.ECONNABORTED,r,Y)),Y=null)},Y.onerror=function(Q){const re=Q&&Q.message?Q.message:"Network Error",ve=new Ke(re,Ke.ERR_NETWORK,r,Y);ve.event=Q||null,o(ve),Y=null},Y.ontimeout=function(){let Q=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const re=l.transitional||Iv;l.timeoutErrorMessage&&(Q=l.timeoutErrorMessage),o(new Ke(Q,re.clarifyTimeoutError?Ke.ETIMEDOUT:Ke.ECONNABORTED,r,Y)),Y=null},c===void 0&&f.setContentType(null),"setRequestHeader"in Y&&ye.forEach(f.toJSON(),function(Q,re){Y.setRequestHeader(re,Q)}),ye.isUndefined(l.withCredentials)||(Y.withCredentials=!!l.withCredentials),p&&p!=="json"&&(Y.responseType=l.responseType),g&&([L,O]=Cl(g,!0),Y.addEventListener("progress",L)),m&&Y.upload&&([E,G]=Cl(m),Y.upload.addEventListener("progress",E),Y.upload.addEventListener("loadend",G)),(l.cancelToken||l.signal)&&(y=me=>{Y&&(o(!me||me.type?new Es(null,r,Y):me),Y.abort(),Y=null)},l.cancelToken&&l.cancelToken.subscribe(y),l.signal&&(l.signal.aborted?y():l.signal.addEventListener("abort",y)));const fe=vR(l.url);if(fe&&nn.protocols.indexOf(fe)===-1){o(new Ke("Unsupported protocol "+fe+":",Ke.ERR_BAD_REQUEST,r));return}Y.send(c||null)})},_R=(r,n)=>{const{length:i}=r=r?r.filter(Boolean):[];if(n||i){let o=new AbortController,l;const c=function(g){if(!l){l=!0,p();const y=g instanceof Error?g:this.reason;o.abort(y instanceof Ke?y:new Es(y instanceof Error?y.message:y))}};let f=n&&setTimeout(()=>{f=null,c(new Ke(`timeout ${n} of ms exceeded`,Ke.ETIMEDOUT))},n);const p=()=>{r&&(f&&clearTimeout(f),f=null,r.forEach(g=>{g.unsubscribe?g.unsubscribe(c):g.removeEventListener("abort",c)}),r=null)};r.forEach(g=>g.addEventListener("abort",c));const{signal:m}=o;return m.unsubscribe=()=>ye.asap(p),m}},kR=function*(r,n){let i=r.byteLength;if(i<n){yield r;return}let o=0,l;for(;o<i;)l=o+n,yield r.slice(o,l),o=l},AR=async function*(r,n){for await(const i of NR(r))yield*kR(i,n)},NR=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const n=r.getReader();try{for(;;){const{done:i,value:o}=await n.read();if(i)break;yield o}}finally{await n.cancel()}},ay=(r,n,i,o)=>{const l=AR(r,n);let c=0,f,p=m=>{f||(f=!0,o&&o(m))};return new ReadableStream({async pull(m){try{const{done:g,value:y}=await l.next();if(g){p(),m.close();return}let E=y.byteLength;if(i){let L=c+=E;i(L)}m.enqueue(new Uint8Array(y))}catch(g){throw p(g),g}},cancel(m){return p(m),l.return()}},{highWaterMark:2})},ly=64*1024,{isFunction:il}=ye,jR=(({Request:r,Response:n})=>({Request:r,Response:n}))(ye.global),{ReadableStream:cy,TextEncoder:uy}=ye.global,dy=(r,...n)=>{try{return!!r(...n)}catch{return!1}},OR=r=>{r=ye.merge.call({skipUndefined:!0},jR,r);const{fetch:n,Request:i,Response:o}=r,l=n?il(n):typeof fetch=="function",c=il(i),f=il(o);if(!l)return!1;const p=l&&il(cy),m=l&&(typeof uy=="function"?(O=>ee=>O.encode(ee))(new uy):async O=>new Uint8Array(await new i(O).arrayBuffer())),g=c&&p&&dy(()=>{let O=!1;const ee=new i(nn.origin,{body:new cy,method:"POST",get duplex(){return O=!0,"half"}}).headers.has("Content-Type");return O&&!ee}),y=f&&p&&dy(()=>ye.isReadableStream(new o("").body)),E={stream:y&&(O=>O.body)};l&&["text","arrayBuffer","blob","formData","stream"].forEach(O=>{!E[O]&&(E[O]=(ee,Y)=>{let le=ee&&ee[O];if(le)return le.call(ee);throw new Ke(`Response type '${O}' is not supported`,Ke.ERR_NOT_SUPPORT,Y)})});const L=async O=>{if(O==null)return 0;if(ye.isBlob(O))return O.size;if(ye.isSpecCompliantForm(O))return(await new i(nn.origin,{method:"POST",body:O}).arrayBuffer()).byteLength;if(ye.isArrayBufferView(O)||ye.isArrayBuffer(O))return O.byteLength;if(ye.isURLSearchParams(O)&&(O=O+""),ye.isString(O))return(await m(O)).byteLength},G=async(O,ee)=>{const Y=ye.toFiniteNumber(O.getContentLength());return Y??L(ee)};return async O=>{let{url:ee,method:Y,data:le,signal:fe,cancelToken:me,timeout:Q,onDownloadProgress:re,onUploadProgress:ve,responseType:ue,headers:ke,withCredentials:Ce="same-origin",fetchOptions:Ne}=qv(O),Be=n||fetch;ue=ue?(ue+"").toLowerCase():"text";let qe=_R([fe,me&&me.toAbortSignal()],Q),je=null;const xe=qe&&qe.unsubscribe&&(()=>{qe.unsubscribe()});let De;try{if(ve&&g&&Y!=="get"&&Y!=="head"&&(De=await G(ke,le))!==0){let x=new i(ee,{method:"POST",body:le,duplex:"half"}),P;if(ye.isFormData(le)&&(P=x.headers.get("content-type"))&&ke.setContentType(P),x.body){const[T,b]=iy(De,Cl(sy(ve)));le=ay(x.body,ly,T,b)}}ye.isString(Ce)||(Ce=Ce?"include":"omit");const H=c&&"credentials"in i.prototype,M={...Ne,signal:qe,method:Y.toUpperCase(),headers:ke.normalize().toJSON(),body:le,duplex:"half",credentials:H?Ce:void 0};je=c&&new i(ee,M);let X=await(c?Be(je,Ne):Be(ee,M));const z=y&&(ue==="stream"||ue==="response");if(y&&(re||z&&xe)){const x={};["status","statusText","headers"].forEach(S=>{x[S]=X[S]});const P=ye.toFiniteNumber(X.headers.get("content-length")),[T,b]=re&&iy(P,Cl(sy(re),!0))||[];X=new o(ay(X.body,ly,T,()=>{b&&b(),xe&&xe()}),x)}ue=ue||"text";let K=await E[ye.findKey(E,ue)||"text"](X,O);return!z&&xe&&xe(),await new Promise((x,P)=>{Bv(x,P,{data:K,headers:yn.from(X.headers),status:X.status,statusText:X.statusText,config:O,request:je})})}catch(H){throw xe&&xe(),H&&H.name==="TypeError"&&/Load failed|fetch/i.test(H.message)?Object.assign(new Ke("Network Error",Ke.ERR_NETWORK,O,je),{cause:H.cause||H}):Ke.from(H,H&&H.code,O,je)}}},MR=new Map,$v=r=>{let n=r&&r.env||{};const{fetch:i,Request:o,Response:l}=n,c=[o,l,i];let f=c.length,p=f,m,g,y=MR;for(;p--;)m=c[p],g=y.get(m),g===void 0&&y.set(m,g=p?new Map:OR(n)),y=g;return g};$v();const ff={http:Kx,xhr:ER,fetch:{get:$v}};ye.forEach(ff,(r,n)=>{if(r){try{Object.defineProperty(r,"name",{value:n})}catch{}Object.defineProperty(r,"adapterName",{value:n})}});const fy=r=>`- ${r}`,UR=r=>ye.isFunction(r)||r===null||r===!1;function DR(r,n){r=ye.isArray(r)?r:[r];const{length:i}=r;let o,l;const c={};for(let f=0;f<i;f++){o=r[f];let p;if(l=o,!UR(o)&&(l=ff[(p=String(o)).toLowerCase()],l===void 0))throw new Ke(`Unknown adapter '${p}'`);if(l&&(ye.isFunction(l)||(l=l.get(n))))break;c[p||"#"+f]=l}if(!l){const f=Object.entries(c).map(([m,g])=>`adapter ${m} `+(g===!1?"is not supported by the environment":"is not available in the build"));let p=i?f.length>1?`since :
`+f.map(fy).join(`
`):" "+fy(f[0]):"as no adapter specified";throw new Ke("There is no suitable adapter to dispatch the request "+p,"ERR_NOT_SUPPORT")}return l}const Vv={getAdapter:DR,adapters:ff};function Sd(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Es(null,r)}function hy(r){return Sd(r),r.headers=yn.from(r.headers),r.data=bd.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),Vv.getAdapter(r.adapter||Bo.adapter,r)(r).then(function(o){return Sd(r),o.data=bd.call(r,r.transformResponse,o),o.headers=yn.from(o.headers),o},function(o){return Lv(o)||(Sd(r),o&&o.response&&(o.response.data=bd.call(r,r.transformResponse,o.response),o.response.headers=yn.from(o.response.headers))),Promise.reject(o)})}const Gv="1.13.2",Pl={};["object","boolean","number","function","string","symbol"].forEach((r,n)=>{Pl[r]=function(o){return typeof o===r||"a"+(n<1?"n ":" ")+r}});const py={};Pl.transitional=function(n,i,o){function l(c,f){return"[Axios v"+Gv+"] Transitional option '"+c+"'"+f+(o?". "+o:"")}return(c,f,p)=>{if(n===!1)throw new Ke(l(f," has been removed"+(i?" in "+i:"")),Ke.ERR_DEPRECATED);return i&&!py[f]&&(py[f]=!0,console.warn(l(f," has been deprecated since v"+i+" and will be removed in the near future"))),n?n(c,f,p):!0}};Pl.spelling=function(n){return(i,o)=>(console.warn(`${o} is likely a misspelling of ${n}`),!0)};function PR(r,n,i){if(typeof r!="object")throw new Ke("options must be an object",Ke.ERR_BAD_OPTION_VALUE);const o=Object.keys(r);let l=o.length;for(;l-- >0;){const c=o[l],f=n[c];if(f){const p=r[c],m=p===void 0||f(p,c,r);if(m!==!0)throw new Ke("option "+c+" must be "+m,Ke.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new Ke("Unknown option "+c,Ke.ERR_BAD_OPTION)}}const yl={assertOptions:PR,validators:Pl},Qn=yl.validators;let bi=class{constructor(n){this.defaults=n||{},this.interceptors={request:new ny,response:new ny}}async request(n,i){try{return await this._request(n,i)}catch(o){if(o instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const c=l.stack?l.stack.replace(/^.+\n/,""):"";try{o.stack?c&&!String(o.stack).endsWith(c.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+c):o.stack=c}catch{}}throw o}}_request(n,i){typeof n=="string"?(i=i||{},i.url=n):i=n||{},i=Ci(this.defaults,i);const{transitional:o,paramsSerializer:l,headers:c}=i;o!==void 0&&yl.assertOptions(o,{silentJSONParsing:Qn.transitional(Qn.boolean),forcedJSONParsing:Qn.transitional(Qn.boolean),clarifyTimeoutError:Qn.transitional(Qn.boolean)},!1),l!=null&&(ye.isFunction(l)?i.paramsSerializer={serialize:l}:yl.assertOptions(l,{encode:Qn.function,serialize:Qn.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),yl.assertOptions(i,{baseUrl:Qn.spelling("baseURL"),withXsrfToken:Qn.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let f=c&&ye.merge(c.common,c[i.method]);c&&ye.forEach(["delete","get","head","post","put","patch","common"],O=>{delete c[O]}),i.headers=yn.concat(f,c);const p=[];let m=!0;this.interceptors.request.forEach(function(ee){typeof ee.runWhen=="function"&&ee.runWhen(i)===!1||(m=m&&ee.synchronous,p.unshift(ee.fulfilled,ee.rejected))});const g=[];this.interceptors.response.forEach(function(ee){g.push(ee.fulfilled,ee.rejected)});let y,E=0,L;if(!m){const O=[hy.bind(this),void 0];for(O.unshift(...p),O.push(...g),L=O.length,y=Promise.resolve(i);E<L;)y=y.then(O[E++],O[E++]);return y}L=p.length;let G=i;for(;E<L;){const O=p[E++],ee=p[E++];try{G=O(G)}catch(Y){ee.call(this,Y);break}}try{y=hy.call(this,G)}catch(O){return Promise.reject(O)}for(E=0,L=g.length;E<L;)y=y.then(g[E++],g[E++]);return y}getUri(n){n=Ci(this.defaults,n);const i=Hv(n.baseURL,n.url,n.allowAbsoluteUrls);return Pv(i,n.params,n.paramsSerializer)}};ye.forEach(["delete","get","head","options"],function(n){bi.prototype[n]=function(i,o){return this.request(Ci(o||{},{method:n,url:i,data:(o||{}).data}))}});ye.forEach(["post","put","patch"],function(n){function i(o){return function(c,f,p){return this.request(Ci(p||{},{method:n,headers:o?{"Content-Type":"multipart/form-data"}:{},url:c,data:f}))}}bi.prototype[n]=i(),bi.prototype[n+"Form"]=i(!0)});let IR=class Fv{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(c){i=c});const o=this;this.promise.then(l=>{if(!o._listeners)return;let c=o._listeners.length;for(;c-- >0;)o._listeners[c](l);o._listeners=null}),this.promise.then=l=>{let c;const f=new Promise(p=>{o.subscribe(p),c=p}).then(l);return f.cancel=function(){o.unsubscribe(c)},f},n(function(c,f,p){o.reason||(o.reason=new Es(c,f,p),i(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const n=new AbortController,i=o=>{n.abort(o)};return this.subscribe(i),n.signal.unsubscribe=()=>this.unsubscribe(i),n.signal}static source(){let n;return{token:new Fv(function(l){n=l}),cancel:n}}};function zR(r){return function(i){return r.apply(null,i)}}function LR(r){return ye.isObject(r)&&r.isAxiosError===!0}const Hd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Hd).forEach(([r,n])=>{Hd[n]=r});function Yv(r){const n=new bi(r),i=xv(bi.prototype.request,n);return ye.extend(i,bi.prototype,n,{allOwnKeys:!0}),ye.extend(i,n,null,{allOwnKeys:!0}),i.create=function(l){return Yv(Ci(r,l))},i}const _t=Yv(Bo);_t.Axios=bi;_t.CanceledError=Es;_t.CancelToken=IR;_t.isCancel=Lv;_t.VERSION=Gv;_t.toFormData=Dl;_t.AxiosError=Ke;_t.Cancel=_t.CanceledError;_t.all=function(n){return Promise.all(n)};_t.spread=zR;_t.isAxiosError=LR;_t.mergeConfig=Ci;_t.AxiosHeaders=yn;_t.formToJSON=r=>zv(ye.isHTMLForm(r)?new FormData(r):r);_t.getAdapter=Vv.getAdapter;_t.HttpStatusCode=Hd;_t.default=_t;const{Axios:TO,AxiosError:CO,CanceledError:xO,isCancel:RO,CancelToken:EO,VERSION:_O,all:kO,Cancel:AO,isAxiosError:NO,spread:jO,toFormData:OO,AxiosHeaders:MO,HttpStatusCode:UO,formToJSON:DO,getAdapter:PO,mergeConfig:IO}=_t,BR=()=>"https://festive-guest-api.azurewebsites.net/api",Fe=_t.create({baseURL:BR(),timeout:1e4});Fe.interceptors.request.use(r=>(console.log("API Request:",{method:r.method?.toUpperCase(),url:r.baseURL+"/"+r.url,headers:{...r.headers,Authorization:r.headers.Authorization?"[HIDDEN]":void 0}}),r),r=>(console.error("Request Error:",r),Promise.reject(r)));Fe.interceptors.request.use(r=>{try{const n=localStorage.getItem("user");if(n){const i=JSON.parse(n);i&&i.token&&(r.headers.Authorization=`Bearer ${i.token}`)}}catch{console.warn("Failed to read user from storage")}return r},r=>Promise.reject(r));Fe.interceptors.response.use(r=>r,r=>(console.error("API Error Details:",{status:r.response?.status,statusText:r.response?.statusText,url:r.config?.url,method:r.config?.method,baseURL:r.config?.baseURL,data:r.response?.data,message:r.message}),(r.response?.status===401||r.response?.status===403)&&(localStorage.removeItem("user"),localStorage.removeItem("userId"),window.dispatchEvent(new Event("storage")),window.location.pathname!=="/login"&&window.location.pathname!=="/"&&(window.location.href="/login")),Promise.reject(r)));const Xv={sasCache:new Map,async getSasUrl(r,n="logos"){const i=`${n}/${r}`,o=this.sasCache.get(i);if(o&&o.expiresAt>Date.now())return o.url;try{const c=(await Fe.get("storage/get-sas-url",{params:{fileName:r,container:n}})).data.url;return this.sasCache.set(i,{url:c,expiresAt:Date.now()+3e3*1e3}),c}catch(l){return console.error("Error fetching SAS URL:",l),null}},clearCache(){this.sasCache.clear()},needsSasToken(r){return r&&r.includes("blob.core.windows.net")&&!r.includes("?")}},HR=({className:r="",style:n={},alt:i="FestiveGuest Logo",isLoginLogo:o=!1})=>{const[l,c]=U.useState(""),[f,p]=U.useState(!0);return U.useEffect(()=>{(async()=>{try{const g=o?"login-logo.png":"logo.png",y=await Xv.getSasUrl(g,"logos");c(y)}catch(g){console.error("Error loading logo:",g),c(o?"/assets/login-logo.png":"/assets/logo.png")}finally{p(!1)}})()},[o]),f?u.jsx("div",{className:r,style:{...n,background:"#f0f0f0"}}):u.jsx("img",{src:l,alt:i,className:r,style:n})},qR=()=>u.jsx("div",{className:"loader-container",children:u.jsx("div",{className:"logo-loader",children:u.jsx("img",{src:"/assets/login-logo.png",alt:"FestiveGuest",className:"loader-logo"})})});class $R{constructor(){this.locations=null,this.loading=!1}async getLocations(){if(this.locations)return this.locations;if(this.loading){for(;this.loading;)await new Promise(n=>setTimeout(n,100));return this.locations}this.loading=!0;try{const n=await Fe.get("location/states-with-cities");return this.locations=n.data,this.locations}catch(n){throw console.error("DEBUG: Failed to fetch locations from API:",n),new Error("Unable to load location data (API Error). Please try again later.")}finally{this.loading=!1}}async seedLocations(){try{const n=await Fe.post("location/seed");return this.locations=null,n.data}catch(n){throw console.error("Failed to seed locations:",n),n}}clearCache(){this.locations=null}}const hf=new $R,VR=()=>{const[r,n]=U.useState([]),[i,o]=U.useState(!1),l=(p,m="info")=>{n(g=>[...g,{message:p,type:m,timestamp:new Date().toLocaleTimeString()}])},c=async()=>{o(!0),n([]);try{l(" Testing API connectivity...","info");try{l(` API Base URL: ${Fe.defaults.baseURL}`,"info");const p=await Fe.get("health");l(" API Health Check: SUCCESS","success")}catch(p){l(` API Health Check: ${p.message}`,"error")}try{l(" Testing location service...","info");const p=await hf.getLocations(),m=Object.keys(p||{}).length;l(` Locations loaded: ${m} states found`,"success")}catch(p){l(` Location service: ${p.message}`,"error")}try{l(" Testing direct location API...","info");const p=await Fe.get("location/states-with-cities"),m=Object.keys(p.data||{}).length;l(` Direct API call: ${m} states found`,"success")}catch(p){l(` Direct API call: ${p.message}`,"error")}}catch(p){l(` Test suite failed: ${p.message}`,"error")}finally{o(!1)}},f=()=>{n([])};return u.jsxs("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto",fontFamily:"monospace"},children:[u.jsx("h2",{children:" API Connectivity Test"}),u.jsx("p",{children:"Use this tool to test your API connectivity and location loading."}),u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("button",{onClick:c,disabled:i,style:{padding:"0.75rem 1.5rem",backgroundColor:i?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"0.5rem",cursor:i?"not-allowed":"pointer",marginRight:"1rem"},children:i?" Testing...":" Run Tests"}),u.jsx("button",{onClick:f,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer"},children:" Clear Results"})]}),u.jsx("div",{style:{backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"0.5rem",padding:"1rem",minHeight:"200px",maxHeight:"400px",overflowY:"auto"},children:r.length===0?u.jsx("p",{style:{color:"#6c757d",fontStyle:"italic"},children:'Click "Run Tests" to start testing your API connectivity...'}):r.map((p,m)=>u.jsxs("div",{style:{marginBottom:"0.5rem",padding:"0.5rem",borderRadius:"0.25rem",backgroundColor:p.type==="success"?"#d4edda":p.type==="error"?"#f8d7da":"#d1ecf1",color:p.type==="success"?"#155724":p.type==="error"?"#721c24":"#0c5460"},children:[u.jsxs("span",{style:{fontSize:"0.8rem",opacity:.7},children:["[",p.timestamp,"]"]})," ",p.message]},m))}),u.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.9rem",color:"#6c757d"},children:[u.jsxs("p",{children:[u.jsx("strong",{children:"Environment:"})," ","production"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Current API Base:"})," ",Fe.defaults.baseURL]})]})]})},GR=({user:r})=>{const n=Wr(),i=()=>{const o=r?.role||r?.userType||r?.partitionKey;return o==="Host"?"/host-dashboard":o==="Guest"?"/guest-dashboard":o==="Admin"?"/admin":"/"};return u.jsxs("div",{className:"landing-page",children:[u.jsxs("section",{className:"hero",children:[u.jsxs("div",{className:"hero-content",children:[u.jsx("h1",{className:"hero-title",children:"Celebrate Festivals with Local Friends"}),u.jsx("p",{className:"hero-subtitle",children:"Experience authentic Pongal celebrations in East & West Godavari districts"}),u.jsx("div",{className:"hero-buttons",children:r?u.jsx("button",{className:"btn btn-primary",onClick:()=>n(i()),children:"Go to My Dashboard"}):u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn btn-primary",onClick:()=>n("/register?role=Guest"),children:"Join as Guest"}),u.jsx("button",{className:"btn btn-secondary",onClick:()=>n("/register?role=Host"),children:"Become a Host"})]})})]}),u.jsx("div",{className:"hero-image",children:u.jsxs("div",{className:"festival-card",children:[u.jsx("h3",{children:" Festival Season"}),u.jsx("p",{children:"Connect with locals during Pongal, Diwali, and other celebrations"})]})})]}),u.jsx("section",{className:"features",children:u.jsxs("div",{className:"container",children:[u.jsx("h2",{children:"Why Choose Festive Guest?"}),u.jsxs("div",{className:"features-grid",children:[u.jsxs("div",{className:"feature-card",children:[u.jsx("div",{className:"feature-icon",children:""}),u.jsx("h3",{children:"Local Accommodation"}),u.jsx("p",{children:"Stay with friendly hosts who provide comfortable accommodation during festival season"})]}),u.jsxs("div",{className:"feature-card",children:[u.jsx("div",{className:"feature-icon",children:""}),u.jsx("h3",{children:"Guided Tours"}),u.jsx("p",{children:"Explore nearby temples, cultural sites, and hidden gems with local guides"})]}),u.jsxs("div",{className:"feature-card",children:[u.jsx("div",{className:"feature-icon",children:""}),u.jsx("h3",{children:"Make New Friends"}),u.jsx("p",{children:"Connect with locals and fellow travelers, create lasting friendships"})]}),u.jsxs("div",{className:"feature-card",children:[u.jsx("div",{className:"feature-icon",children:""}),u.jsx("h3",{children:"Authentic Experience"}),u.jsx("p",{children:"Participate in traditional celebrations, enjoy homemade festival food"})]})]})]})}),u.jsx("section",{className:"how-it-works",children:u.jsxs("div",{className:"container",children:[u.jsx("h2",{children:"How It Works"}),u.jsxs("div",{className:"steps",children:[u.jsxs("div",{className:"step",children:[u.jsx("div",{className:"step-number",children:"1"}),u.jsx("h3",{children:"Register"}),u.jsx("p",{children:"Sign up as a Guest or Host for free"})]}),u.jsxs("div",{className:"step",children:[u.jsx("div",{className:"step-number",children:"2"}),u.jsx("h3",{children:"Connect"}),u.jsx("p",{children:"Browse profiles and connect with hosts/guests"})]}),u.jsxs("div",{className:"step",children:[u.jsx("div",{className:"step-number",children:"3"}),u.jsx("h3",{children:"Celebrate"}),u.jsx("p",{children:"Enjoy authentic festival experiences together"})]})]})]})}),u.jsx("section",{className:"testimonials",children:u.jsxs("div",{className:"container",children:[u.jsx("h2",{children:"What Our Users Say"}),u.jsxs("div",{className:"testimonials-grid",children:[u.jsxs("div",{className:"testimonial",children:[u.jsx("p",{children:'"Amazing Pongal experience in Rajahmundry! The host family treated me like their own."'}),u.jsx("div",{className:"testimonial-author",children:"- Priya, Hyderabad"})]}),u.jsxs("div",{className:"testimonial",children:[u.jsx("p",{children:'"Met wonderful guests during Diwali. Sharing our traditions was so fulfilling."'}),u.jsx("div",{className:"testimonial-author",children:"- Ravi, Kakinada"})]})]})]})}),u.jsx("section",{className:"cta",children:u.jsxs("div",{className:"container",children:[u.jsx("h2",{children:"Ready to Start Your Festival Journey?"}),u.jsx("p",{children:"Join thousands of travelers and hosts celebrating together"}),u.jsx("div",{className:"cta-buttons",children:r?u.jsx("button",{className:"btn btn-primary",onClick:()=>n(i()),children:"Go to My Dashboard"}):u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn btn-primary",onClick:()=>n("/register?role=Guest"),children:"Get Started"}),u.jsx("button",{className:"btn btn-primary",onClick:()=>n("/login"),children:"Already have an account?"})]})})]})}),u.jsx("footer",{className:"footer",children:u.jsx("div",{className:"container",children:u.jsx("p",{children:" 2024 Festive Guest Marketplace. Connecting hearts during festivals."})})})]})},FR=({setUser:r})=>{const[n,i]=U.useState(""),[o,l]=U.useState(""),[c,f]=U.useState(!1),[p,m]=U.useState(!1),[g,y]=U.useState(null),[E,L]=U.useState(""),[G,O]=U.useState(""),[ee,Y]=U.useState(!1),[le,fe]=U.useState(""),[me,Q]=U.useState(!1),[re,ve]=U.useState(""),[ue,ke]=U.useState(""),[Ce,Ne]=U.useState(""),[Be,qe]=U.useState(!1),[je,xe]=U.useState(!1),[De,H]=U.useState(""),M=Wr(),X=[{label:"At least 8 characters",test:S=>S.length>=8},{label:"One uppercase letter",test:S=>/[A-Z]/.test(S)},{label:"One lowercase letter",test:S=>/[a-z]/.test(S)},{label:"One number",test:S=>/\d/.test(S)},{label:"One special character",test:S=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(S)}],z=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,K=S=>S?z.test(S)?(L(""),!0):(L("Please enter a valid email address"),!1):(L(""),!0);U.useEffect(()=>{const S=localStorage.getItem("user"),_=localStorage.getItem("token");S&&_&&M("/"),O("/assets/login-logo.png")},[M]);const x=(S,_="success")=>{y({message:S,type:_}),_==="success"&&setTimeout(()=>{y(N=>N?{...N,hiding:!0}:null),setTimeout(()=>y(null),300)},5e3)},P=async S=>{S?.preventDefault(),m(!0);try{const _=await Fe.post("auth/login",{email:n,password:o});if(_?.data?.success&&_?.data?.token){const{token:N,user:w}=_.data,R={...w,token:N};localStorage.setItem("user",JSON.stringify(R)),localStorage.setItem("userId",w.userId),localStorage.setItem("token",N),r(R),x("Login successful! Redirecting...","success"),setTimeout(()=>M("/"),1e3);return}x("Login failed","error")}catch(_){_.response?.status===429?x("Too many login attempts. Please wait 15 minutes and try again.","error"):x("Login failed: "+(_.response?.data?.message||_.message),"error")}finally{m(!1)}},T=async()=>{if(H(""),!le||le.trim()===""){H("Please enter your email address");return}if(!z.test(le)){H("Please enter a valid email address");return}qe(!0);try{(await Fe.post("email/send-otp",{email:le,purpose:"password-reset"})).data.success&&(Q(!0),H(""))}catch(S){const _=S.response?.data?.message||S.message;H("Failed to send OTP: "+_)}finally{qe(!1)}},b=async()=>{if(H(""),!re||re.trim()===""){H("Please enter the OTP");return}if(re.length!==6){H("OTP must be exactly 6 digits");return}if(!ue||ue.trim()===""){H("Please enter a new password");return}if(!Ce||Ce.trim()===""){H("Please confirm your new password");return}if(!X.every(_=>_.test(ue))){H("Password must meet all requirements shown below");return}if(ue!==Ce){H("New password and confirm password do not match");return}xe(!0);try{(await Fe.post("auth/reset-password",{email:le,otpCode:re,newPassword:ue})).data.success&&(x("Password reset successful! Please login with your new password.","success"),Y(!1),Q(!1),ve(""),ke(""),Ne(""),fe(""),H(""))}catch(_){const N=_.response?.data?.message||_.message;H("Password reset failed: "+N)}finally{xe(!1)}};return u.jsxs("div",{className:"container",children:[g&&u.jsx("div",{className:"toast-container",children:u.jsxs("div",{className:`toast ${g.type} ${g.hiding?"hiding":""}`,children:[u.jsx("span",{className:"toast-icon",children:g.type==="success"?"":g.type==="error"?"":""}),u.jsx("div",{className:"toast-content",children:u.jsx("p",{className:"toast-message",children:g.message})}),g.type!=="success"&&u.jsx("button",{onClick:()=>y(null),style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.5rem"},children:""})]})}),u.jsxs("div",{className:"card",style:{maxWidth:"450px",margin:"50px auto",textAlign:"center"},children:[u.jsxs("div",{style:{marginBottom:"2rem"},children:[u.jsx("img",{src:"/assets/login-logo.png",alt:"Festive Guest Logo",style:{height:"150px",width:"auto",marginBottom:"1.5rem"}}),u.jsx("p",{style:{color:"#64748b",fontSize:"1.1rem"},children:"Connect Guests and Hosts for memorable experiences"})]}),!ee&&u.jsxs("form",{onSubmit:P,style:{marginTop:"30px"},children:[u.jsxs("div",{className:"form-group",children:[u.jsx("input",{type:"email",className:"form-control",placeholder:"Enter your email address",value:n,onChange:S=>{i(S.target.value),K(S.target.value)},onBlur:S=>K(S.target.value),required:!0,style:{fontSize:"1rem",padding:"1rem",borderColor:E?"#dc2626":"#cbd5e1"}}),E&&u.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",E]})]}),u.jsxs("div",{className:"form-group",style:{position:"relative"},children:[u.jsx("input",{type:c?"text":"password",className:"form-control",placeholder:"Enter your password",value:o,onChange:S=>l(S.target.value),required:!0,style:{fontSize:"1rem",padding:"1rem",paddingRight:"3rem"}}),u.jsx("button",{type:"button",onClick:()=>f(!c),style:{position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#64748b",display:"flex",alignItems:"center",padding:"0"},children:c?u.jsx(wl,{size:20}):u.jsx(Tl,{size:20})})]}),u.jsx("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",padding:"1rem",fontSize:"1.1rem"},disabled:p||E!=="",children:p?"Logging in...":"Login"})]}),u.jsx("div",{style:{marginTop:"1.5rem",textAlign:"center"},children:u.jsx("button",{type:"button",onClick:()=>Y(!0),style:{background:"none",border:"none",color:"var(--primary)",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem"},children:"Forgot Password?"})}),u.jsx("div",{style:{marginTop:"2rem",padding:"1.5rem",background:"#f8fafc",borderRadius:"1rem",border:"1px solid #e2e8f0"},children:u.jsxs("p",{style:{margin:"0",color:"#64748b",fontSize:"1.05rem"},children:["New user? ",u.jsx("button",{className:"btn btn-primary",onClick:()=>M("/register"),style:{marginLeft:"0.5rem",padding:"0.5rem 1.5rem"},children:"Register"})]})})]}),ee&&u.jsx("div",{className:"modal-overlay",onClick:()=>Y(!1),children:u.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),style:{maxWidth:"400px"},children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("h3",{children:[u.jsx(pl,{size:20})," Reset Password"]}),u.jsx("button",{onClick:()=>Y(!1),className:"modal-close",children:""})]}),u.jsxs("div",{className:"modal-body",children:[De&&u.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"0.75rem",borderRadius:"0.5rem",marginBottom:"1rem",fontSize:"0.875rem"},children:[" ",De]}),me?u.jsxs("div",{children:[u.jsxs("p",{style:{marginBottom:"1rem",color:"#64748b"},children:["Enter the OTP sent to ",le," and your new password"]}),u.jsx("div",{className:"form-group",children:u.jsx("input",{type:"text",value:re,onChange:S=>ve(S.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter 6-digit OTP",maxLength:6,style:{fontSize:"1rem",padding:"0.75rem",width:"100%"}})}),u.jsxs("div",{className:"form-group",children:[u.jsx("input",{type:"password",value:ue,onChange:S=>ke(S.target.value),placeholder:"Enter new password",style:{fontSize:"1rem",padding:"0.75rem",width:"100%"}}),u.jsx("div",{style:{marginTop:"0.75rem",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:X.map((S,_)=>{const N=S.test(ue);return u.jsxs("div",{style:{fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.25rem",color:N?"#16a34a":"#dc2626",transition:"color 0.2s"},children:[u.jsx("span",{style:{fontSize:"0.9rem"},children:N?"":""}),S.label]},_)})})]}),u.jsx("div",{className:"form-group",children:u.jsx("input",{type:"password",value:Ce,onChange:S=>Ne(S.target.value),placeholder:"Confirm new password",style:{fontSize:"1rem",padding:"0.75rem",width:"100%"}})}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[u.jsx("button",{onClick:()=>{Q(!1),ve(""),ke(""),Ne(""),H("")},className:"btn btn-secondary",style:{flex:1,padding:"0.75rem"},children:"Back"}),u.jsx("button",{onClick:b,disabled:je,className:"btn btn-primary",style:{flex:1,padding:"0.75rem"},children:je?"Resetting...":"Reset Password"})]})]}):u.jsxs("div",{children:[u.jsx("p",{style:{marginBottom:"1rem",color:"#64748b"},children:"Enter your email to receive a password reset OTP"}),u.jsx("div",{className:"form-group",children:u.jsx("input",{type:"email",value:le,onChange:S=>fe(S.target.value),placeholder:"Enter your email address",style:{fontSize:"1rem",padding:"0.75rem",width:"100%"}})}),u.jsx("button",{onClick:T,disabled:Be||!le,className:"btn btn-primary",style:{width:"100%",padding:"0.75rem"},children:Be?"Sending OTP...":"Send OTP"})]})]})]})})]})},YR=({setUser:r})=>{const n=Wr(),i=Zn(),[o,l]=U.useState({}),[c,f]=U.useState({userId:crypto.randomUUID(),name:"",email:"",password:"",phone:"",state:"",city:"",otherCity:"",bio:"",role:"Guest",status:"Active"}),[p,m]=U.useState(!1),[g,y]=U.useState(null),[E,L]=U.useState(""),[G,O]=U.useState(""),[ee,Y]=U.useState(null),[le,fe]=U.useState(""),[me,Q]=U.useState(!1),[re,ve]=U.useState(""),[ue,ke]=U.useState(!1),[Ce,Ne]=U.useState(!1),[Be,qe]=U.useState(!1),[je,xe]=U.useState(""),[De,H]=U.useState(""),[M,X]=U.useState(""),[z,K]=U.useState(""),[x,P]=U.useState(!1),[T,b]=U.useState(!1),[S,_]=U.useState(null),N=[{label:"At least 8 characters",test:te=>te.length>=8},{label:"One uppercase letter",test:te=>/[A-Z]/.test(te)},{label:"One lowercase letter",test:te=>/[a-z]/.test(te)},{label:"One number",test:te=>/\d/.test(te)},{label:"One special character",test:te=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(te)}],w=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,R=/^[6-9]\d{9}$/,A=te=>te?w.test(te)?(xe(""),!0):(xe("Please enter a valid email address"),!1):(xe(""),!0),q=te=>{if(!te)return H(""),!0;const ge=te.replace(/\D/g,"");return R.test(ge)?(H(""),!0):(H("Please enter a valid 10-digit Indian mobile number (starting with 6-9). This helps other users contact you accurately."),!1)},J=(te,ge="success")=>{y({message:te,type:ge}),ge==="success"&&setTimeout(()=>{y(we=>we?{...we,hiding:!0}:null),setTimeout(()=>y(null),300)},5e3)};U.useEffect(()=>{const te=new URLSearchParams(i.search),ge=te.get("role"),we=te.get("referralCode");(ge==="Guest"||ge==="Host")&&f(Ae=>({...Ae,role:ge})),we&&f(Ae=>({...Ae,ReferredBy:we}))},[i.search]),U.useEffect(()=>{(async()=>{try{console.log("Loading locations using locationService...");const ge=await hf.getLocations();console.log("Locations loaded successfully:",ge),l(ge)}catch(ge){console.error("DEBUG: Failed to load locations:",ge),console.error("Error details:",{message:ge.message,response:ge.response?.data,status:ge.response?.status,url:ge.config?.url}),J("Registration Error: "+ge.message,"error")}})().catch(ge=>console.error("CRITICAL: loadLocations failed",ge))},[]);const V=te=>{const ge=te.target.value;B(te),A(ge),ge!==re&&(ke(!1),Q(!1),L(""))},B=te=>{const{name:ge,value:we}=te.target;f(Ae=>{const He={...Ae,[ge]:we};return ge==="state"&&(He.city=""),He})},ae=te=>{te.preventDefault(),ie()},he=te=>{const ge=te.target.checked;b(ge),_(ge?Date.now():null)},ie=async()=>{m(!0),Y(null);try{if(!ue){Y("Please verify your email before completing registration."),J("Please verify your email before registering","error"),m(!1);return}if(!T||!S){Y("Please accept the terms and conditions to continue."),J("You must accept the agreement to register","error"),m(!1);return}if(Date.now()-S>3e5){Y("Agreement acceptance expired. Please re-accept the terms."),b(!1),_(null),J("Please re-accept the agreement","error"),m(!1);return}const te=c.city==="Other"?c.otherCity:c.city,ge={email:re,password:c.password,name:c.name,phone:c.phone,userType:c.role,location:`${te}, ${c.state}`,bio:c.bio};console.log("Sending registration payload:",ge);let Ae=(await Fe.post("auth/register",ge)).data;if(console.log("Registration response:",Ae),Ae.success||Ae.message==="User registered successfully")J(" Registration successful! Please login to continue.","success"),setTimeout(()=>n("/login"),2e3);else throw new Error(Ae.message||"Registration failed")}catch(te){console.error("Registration error:",te),console.error("Error response:",te.response?.data);const ge=te.response?.data?.message||te.response?.data?.error||te.message;if(te.response?.status===429){const we="Too many attempts. Please wait 15 minutes and try again.";Y(we),J(we,"error")}else if(te.response?.status===500){const we="Server error occurred. Please try again later or contact support if the issue persists.";Y(`Server Error: ${ge||"Internal server error"}`),J(we,"error")}else Y(ge),J("Registration failed: "+ge,"error")}finally{m(!1)}},I=async()=>{if(!c.email){J("Please enter an email address first","error");return}Ne(!0);try{console.log("Sending OTP request:",{email:c.email,purpose:"registration"});const te=await Fe.post("email/send-otp",{email:c.email,purpose:"registration"});console.log("OTP response:",te.data),te.data.success&&(Q(!0),O(c.email),J("OTP sent to your email","success"))}catch(te){console.error("OTP Error Details:",{status:te.response?.status,data:te.response?.data,message:te.message,fullResponse:te.response}),console.error("Full error object:",te);const ge=te.response?.data?.message||te.response?.data?.error||te.response?.data||te.message;Y(JSON.stringify(te.response?.data)||ge),J("Failed to send OTP: "+ge,"error")}finally{Ne(!1)}},W=async()=>{if(!E||E.length!==6){X("Please enter a valid 6-digit OTP code");return}m(!0),X("");try{const te=await Fe.post("email/validate-otp",{email:c.email,otpCode:E});te.data.success&&(ve(c.email),ke(!0),Q(!1),fe(""),X(""),J(te.data?.message||"Email verified","success"))}catch(te){const ge=te.response?.data?.message||te.message;X("Verification failed: "+ge)}finally{m(!1)}};return u.jsxs("div",{className:"container",children:[g&&u.jsx("div",{className:"toast-container",children:u.jsxs("div",{className:`toast ${g.type} ${g.hiding?"hiding":""}`,children:[u.jsx("span",{className:"toast-icon",children:g.type==="success"?"":g.type==="error"?"":""}),u.jsx("div",{className:"toast-content",children:u.jsx("p",{className:"toast-message",children:g.message})}),g.type!=="success"&&u.jsx("button",{onClick:()=>y(null),style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.5rem"},children:""})]})}),ee&&u.jsxs("div",{style:{maxWidth:"1200px",margin:"10px auto",color:"#b91c1c",background:"#fee2e2",padding:"10px",borderRadius:"6px"},children:[u.jsx("strong",{children:"Error:"})," ",ee]}),u.jsxs("div",{className:"registration-layout",children:[u.jsxs("div",{className:"disclaimer-section",children:[u.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[u.jsx("h2",{style:{color:"#1e293b",marginBottom:"0.5rem"},children:"Welcome to FestiveGuest"}),u.jsx("p",{style:{color:"#64748b"},children:"Connect with festival enthusiasts"})]}),u.jsxs("div",{style:{padding:"1.5rem",background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"0.75rem",borderLeft:"4px solid #f59e0b",height:"fit-content",position:"sticky",top:"2rem"},children:[u.jsx("h4",{style:{margin:"0 0 1rem 0",color:"#92400e",fontSize:"1rem",fontWeight:"600"},children:" Important Disclaimer"}),u.jsxs("div",{style:{color:"#92400e",fontSize:"0.9rem",lineHeight:"1.5"},children:[u.jsxs("p",{style:{margin:"0 0 0.75rem 0"},children:[u.jsx("strong",{children:"FestiveGuest"})," is a platform that connects like-minded people for festival celebrations. By registering, you acknowledge and agree that:"]}),u.jsxs("ul",{style:{margin:"0",paddingLeft:"1.25rem"},children:[u.jsxs("li",{style:{marginBottom:"0.5rem"},children:["We are ",u.jsx("strong",{children:"not responsible"})," for any incidents, damages, or issues that may occur during your interactions or meetings."]}),u.jsxs("li",{style:{marginBottom:"0.5rem"},children:["We do ",u.jsx("strong",{children:"not guarantee"})," that you will find suitable hosts or guests, as this depends on availability and mutual compatibility."]}),u.jsxs("li",{style:{marginBottom:"0.5rem"},children:["We act solely as a ",u.jsx("strong",{children:"platform for introductions"})," and do not verify the background, intentions, or authenticity of users."]}),u.jsxs("li",{style:{marginBottom:"0.5rem"},children:["All interactions, arrangements, and meetings are ",u.jsx("strong",{children:"at your own risk and discretion"}),"."]}),u.jsxs("li",{style:{marginBottom:"0.5rem"},children:[u.jsx("strong",{children:"Payment & Financial Caution:"})," Hosts may request payment for services (accommodation, food, etc.). It is entirely your responsibility to decide whether to pay in advance or after services are rendered. Both hosts and guests should exercise caution and verify each other's authenticity before any financial transactions."]}),u.jsxs("li",{children:["We ",u.jsx("strong",{children:"strongly recommend"})," meeting in public places first and taking necessary safety precautions."]})]}),u.jsx("p",{style:{margin:"0.75rem 0 0 0",fontWeight:"600"},children:"By proceeding with registration, you accept full responsibility for your safety and interactions."})]})]})]}),u.jsx("div",{className:"registration-form-section",children:u.jsxs("div",{className:"card",style:{margin:"0",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},children:[u.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[u.jsx("h3",{style:{color:"#1e293b",marginBottom:"0.5rem"},children:"Complete Your Registration"}),u.jsx("p",{style:{color:"#64748b"},children:"Join our community of festival enthusiasts"})]}),u.jsxs("form",{onSubmit:ae,children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Choose Your Role"}),u.jsxs("select",{name:"role",value:c.role,onChange:B,required:!0,style:{fontSize:"1rem",padding:"1rem"},children:[u.jsx("option",{value:"Guest",children:" Guest"}),u.jsx("option",{value:"Host",children:" Host"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Full Name"}),u.jsx("input",{type:"text",name:"name",value:c.name,onChange:B,placeholder:"Enter your full name",required:!0,style:{fontSize:"1rem",padding:"1rem"}})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Email Address"}),u.jsx("input",{type:"email",name:"email",value:c.email,onChange:V,onBlur:te=>A(te.target.value),placeholder:"Enter your email address",required:!0,disabled:ue,style:{fontSize:"1rem",padding:"1rem",borderColor:je?"#dc2626":"#cbd5e1",backgroundColor:ue?"#f3f4f6":"white",cursor:ue?"not-allowed":"text"}}),je&&u.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",je]}),u.jsxs("div",{style:{marginTop:"0.75rem",display:"flex",gap:"0.5rem",alignItems:"center"},children:[!ue&&!me&&u.jsx("button",{type:"button",className:"btn btn-secondary",onClick:I,disabled:Ce||je!=="",children:Ce?"Sending OTP...":"Send OTP"}),me&&u.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[u.jsx("input",{type:"text",value:E,onChange:te=>{L(te.target.value.replace(/\D/g,"").slice(0,6)),X("")},placeholder:"Enter OTP",maxLength:6,style:{padding:"0.5rem",fontSize:"1rem",width:"160px",borderColor:M?"#dc2626":"#cbd5e1"}}),M&&u.jsxs("p",{style:{margin:"0",color:"#dc2626",fontSize:"0.75rem"},children:[" ",M]})]}),u.jsx("button",{type:"button",className:"btn btn-primary",onClick:W,disabled:p||E.length!==6,style:{opacity:E.length!==6?.5:1,cursor:E.length!==6?"not-allowed":"pointer"},children:"Verify"})]}),ue&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("span",{style:{color:"#16a34a",fontWeight:"600"},children:" Email verified"}),u.jsx("button",{type:"button",onClick:()=>{ke(!1),ve(""),Q(!1),L("")},className:"btn btn-outline",style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},children:"Change Email"})]})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Password"}),u.jsxs("div",{style:{position:"relative"},children:[u.jsx("input",{type:Be?"text":"password",name:"password",value:c.password,onChange:B,placeholder:"Create a strong password",required:!0,style:{fontSize:"1rem",padding:"1rem",paddingRight:"2.5rem",width:"100%",boxSizing:"border-box"}}),u.jsx("button",{type:"button",onClick:()=>qe(!Be),style:{position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#64748b",display:"flex",alignItems:"center",padding:"0"},children:Be?u.jsx(wl,{size:20}):u.jsx(Tl,{size:20})})]}),u.jsx("div",{style:{marginTop:"0.75rem",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:N.map((te,ge)=>{const we=te.test(c.password);return u.jsxs("div",{style:{fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.25rem",color:we?"#16a34a":"#dc2626",transition:"color 0.2s"},children:[u.jsx("span",{style:{fontSize:"0.9rem"},children:we?"":""}),te.label]},ge)})})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Phone Number"}),u.jsx("input",{type:"tel",name:"phone",value:c.phone,onChange:te=>{const ge=te.target.value.replace(/\D/g,"").slice(0,10);B({target:{name:"phone",value:ge}}),q(ge)},onBlur:te=>q(te.target.value),placeholder:"Enter your 10-digit mobile number",required:!0,maxLength:10,style:{fontSize:"1rem",padding:"1rem",borderColor:De?"#dc2626":"#cbd5e1"}}),De&&u.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",De]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"State"}),u.jsxs("select",{name:"state",value:c.state,onChange:B,required:!0,style:{fontSize:"1rem",padding:"1rem"},children:[u.jsx("option",{value:"",children:"Select State"}),Object.keys(o||{}).map(te=>u.jsx("option",{value:te,children:te},te))]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"City"}),u.jsxs("select",{name:"city",value:c.city,onChange:B,required:!0,disabled:!c.state,style:{fontSize:"1rem",padding:"1rem"},children:[u.jsx("option",{value:"",children:"Select City"}),c.state&&o[c.state]&&o[c.state].map(te=>u.jsx("option",{value:te,children:te},te))]})]}),c.city==="Other"&&u.jsxs("div",{className:"form-group",children:[u.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Enter Your City"}),u.jsx("input",{type:"text",name:"otherCity",value:c.otherCity,onChange:B,placeholder:"Name of your city",required:!0,style:{fontSize:"1rem",padding:"1rem"}})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:c.role==="Host"?"Your Offerings":"Your Festival Wishes"}),u.jsx("textarea",{name:"bio",value:c.bio,onChange:B,placeholder:c.role==="Host"?"Tell guests what you offer (e.g., accommodation, traditional food, local tours)...":"Tell hosts what you are looking for (e.g., specific festivals, types of food, culture)...",required:!0,rows:"4",maxLength:250,style:{fontSize:"1rem",padding:"1rem",width:"100%",borderRadius:"0.5rem",border:"1px solid #cbd5e1"}}),u.jsxs("div",{style:{textAlign:"right",fontSize:"0.875rem",color:"#64748b",marginTop:"0.25rem"},children:[c.bio.length,"/250 characters"]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Referral Code (Optional)"}),u.jsx("input",{type:"text",name:"ReferredBy",value:c.ReferredBy||"",onChange:B,placeholder:"Enter referral code if you have one",style:{fontSize:"1rem",padding:"1rem"}}),c.ReferredBy&&u.jsx("p",{style:{margin:"0.5rem 0 0 0",color:"#16a34a",fontSize:"0.875rem"},children:" Referral code applied"})]}),u.jsx("div",{style:{marginTop:"2rem",padding:"1.5rem",background:"#f0f9ff",border:"2px solid #0ea5e9",borderRadius:"0.75rem"},children:u.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"1rem",cursor:"pointer",fontSize:"1rem",lineHeight:"1.5"},children:[u.jsx("input",{type:"checkbox",checked:T,onChange:he,required:!0,style:{width:"20px",height:"20px",marginTop:"2px",cursor:"pointer",accentColor:"#0ea5e9"}}),u.jsxs("span",{style:{color:"#0c4a6e",fontWeight:"500"},children:["I have read, understood, and agree to the ",u.jsx("strong",{children:"Important Disclaimer"})," above. I acknowledge that I am using this platform at my own risk and accept full responsibility for my safety and interactions."]})]})}),u.jsx("button",{type:"submit",className:"btn btn-primary",disabled:p||!T,style:{width:"100%",padding:"1rem",fontSize:"1.1rem",marginTop:"1.5rem",opacity:T?1:.5,cursor:T?"pointer":"not-allowed"},children:p?"Registering...":"Register Now"}),!1]}),u.jsx("div",{style:{marginTop:"2rem",textAlign:"center",padding:"1.5rem",background:"#f8fafc",borderRadius:"1rem",border:"1px solid #e2e8f0"},children:u.jsxs("p",{style:{margin:"0",color:"#64748b",fontSize:"1.05rem"},children:["Already have an account? ",u.jsx("button",{className:"btn btn-primary",onClick:()=>n("/login"),style:{marginLeft:"0.5rem",padding:"0.5rem 1.5rem"},children:"Login"})]})}),!1]})})]})]})};class Si extends Error{constructor(n,i){const o=new.target.prototype;super(`${n}: Status code '${i}'`),this.statusCode=i,this.__proto__=o}}class pf extends Error{constructor(n="A timeout occurred."){const i=new.target.prototype;super(n),this.__proto__=i}}let $n=class extends Error{constructor(n="An abort occurred."){const i=new.target.prototype;super(n),this.__proto__=i}};class XR extends Error{constructor(n,i){const o=new.target.prototype;super(n),this.transport=i,this.errorType="UnsupportedTransportError",this.__proto__=o}}class JR extends Error{constructor(n,i){const o=new.target.prototype;super(n),this.transport=i,this.errorType="DisabledTransportError",this.__proto__=o}}class KR extends Error{constructor(n,i){const o=new.target.prototype;super(n),this.transport=i,this.errorType="FailedToStartTransportError",this.__proto__=o}}class my extends Error{constructor(n){const i=new.target.prototype;super(n),this.errorType="FailedToNegotiateWithServerError",this.__proto__=i}}class QR extends Error{constructor(n,i){const o=new.target.prototype;super(n),this.innerErrors=i,this.__proto__=o}}class Jv{constructor(n,i,o){this.statusCode=n,this.statusText=i,this.content=o}}class Il{get(n,i){return this.send({...i,method:"GET",url:n})}post(n,i){return this.send({...i,method:"POST",url:n})}delete(n,i){return this.send({...i,method:"DELETE",url:n})}getCookieString(n){return""}}var Ee;(function(r){r[r.Trace=0]="Trace",r[r.Debug=1]="Debug",r[r.Information=2]="Information",r[r.Warning=3]="Warning",r[r.Error=4]="Error",r[r.Critical=5]="Critical",r[r.None=6]="None"})(Ee||(Ee={}));class Oo{constructor(){}log(n,i){}}Oo.instance=new Oo;const WR="10.0.0";class Ot{static isRequired(n,i){if(n==null)throw new Error(`The '${i}' argument is required.`)}static isNotEmpty(n,i){if(!n||n.match(/^\s*$/))throw new Error(`The '${i}' argument should not be empty.`)}static isIn(n,i,o){if(!(n in i))throw new Error(`Unknown ${o} value: ${n}.`)}}class wt{static get isBrowser(){return!wt.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!wt.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!wt.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function Mo(r,n){let i="";return xi(r)?(i=`Binary data of length ${r.byteLength}`,n&&(i+=`. Content: '${ZR(r)}'`)):typeof r=="string"&&(i=`String data of length ${r.length}`,n&&(i+=`. Content: '${r}'`)),i}function ZR(r){const n=new Uint8Array(r);let i="";return n.forEach(o=>{const l=o<16?"0":"";i+=`0x${l}${o.toString(16)} `}),i.substring(0,i.length-1)}function xi(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}async function Kv(r,n,i,o,l,c){const f={},[p,m]=ys();f[p]=m,r.log(Ee.Trace,`(${n} transport) sending data. ${Mo(l,c.logMessageContent)}.`);const g=xi(l)?"arraybuffer":"text",y=await i.post(o,{content:l,headers:{...f,...c.headers},responseType:g,timeout:c.timeout,withCredentials:c.withCredentials});r.log(Ee.Trace,`(${n} transport) request complete. Response status: ${y.statusCode}.`)}function eE(r){return r===void 0?new xl(Ee.Information):r===null?Oo.instance:r.log!==void 0?r:new xl(r)}class tE{constructor(n,i){this._subject=n,this._observer=i}dispose(){const n=this._subject.observers.indexOf(this._observer);n>-1&&this._subject.observers.splice(n,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(i=>{})}}class xl{constructor(n){this._minLevel=n,this.out=console}log(n,i){if(n>=this._minLevel){const o=`[${new Date().toISOString()}] ${Ee[n]}: ${i}`;switch(n){case Ee.Critical:case Ee.Error:this.out.error(o);break;case Ee.Warning:this.out.warn(o);break;case Ee.Information:this.out.info(o);break;default:this.out.log(o);break}}}}function ys(){let r="X-SignalR-User-Agent";return wt.isNode&&(r="User-Agent"),[r,nE(WR,rE(),sE(),iE())]}function nE(r,n,i,o){let l="Microsoft SignalR/";const c=r.split(".");return l+=`${c[0]}.${c[1]}`,l+=` (${r}; `,n&&n!==""?l+=`${n}; `:l+="Unknown OS; ",l+=`${i}`,o?l+=`; ${o}`:l+="; Unknown Runtime Version",l+=")",l}function rE(){if(wt.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function iE(){if(wt.isNode)return process.versions.node}function sE(){return wt.isNode?"NodeJS":"Browser"}function wd(r){return r.stack?r.stack:r.message?r.message:`${r}`}function oE(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}let aE=class extends Il{constructor(n){if(super(),this._logger=n,typeof fetch>"u"||wt.isNode){const i=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(i("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=i("node-fetch"):this._fetchType=fetch,this._fetchType=i("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(oE());if(typeof AbortController>"u"){const i=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=i("abort-controller")}else this._abortControllerType=AbortController}async send(n){if(n.abortSignal&&n.abortSignal.aborted)throw new $n;if(!n.method)throw new Error("No method defined.");if(!n.url)throw new Error("No url defined.");const i=new this._abortControllerType;let o;n.abortSignal&&(n.abortSignal.onabort=()=>{i.abort(),o=new $n});let l=null;if(n.timeout){const m=n.timeout;l=setTimeout(()=>{i.abort(),this._logger.log(Ee.Warning,"Timeout from HTTP request."),o=new pf},m)}n.content===""&&(n.content=void 0),n.content&&(n.headers=n.headers||{},xi(n.content)?n.headers["Content-Type"]="application/octet-stream":n.headers["Content-Type"]="text/plain;charset=UTF-8");let c;try{c=await this._fetchType(n.url,{body:n.content,cache:"no-cache",credentials:n.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...n.headers},method:n.method,mode:"cors",redirect:"follow",signal:i.signal})}catch(m){throw o||(this._logger.log(Ee.Warning,`Error from HTTP request. ${m}.`),m)}finally{l&&clearTimeout(l),n.abortSignal&&(n.abortSignal.onabort=null)}if(!c.ok){const m=await gy(c,"text");throw new Si(m||c.statusText,c.status)}const p=await gy(c,n.responseType);return new Jv(c.status,c.statusText,p)}getCookieString(n){let i="";return wt.isNode&&this._jar&&this._jar.getCookies(n,(o,l)=>i=l.join("; ")),i}};function gy(r,n){let i;switch(n){case"arraybuffer":i=r.arrayBuffer();break;case"text":i=r.text();break;case"blob":case"document":case"json":throw new Error(`${n} is not supported.`);default:i=r.text();break}return i}class lE extends Il{constructor(n){super(),this._logger=n}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new $n):n.method?n.url?new Promise((i,o)=>{const l=new XMLHttpRequest;l.open(n.method,n.url,!0),l.withCredentials=n.withCredentials===void 0?!0:n.withCredentials,l.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.content===""&&(n.content=void 0),n.content&&(xi(n.content)?l.setRequestHeader("Content-Type","application/octet-stream"):l.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const c=n.headers;c&&Object.keys(c).forEach(f=>{l.setRequestHeader(f,c[f])}),n.responseType&&(l.responseType=n.responseType),n.abortSignal&&(n.abortSignal.onabort=()=>{l.abort(),o(new $n)}),n.timeout&&(l.timeout=n.timeout),l.onload=()=>{n.abortSignal&&(n.abortSignal.onabort=null),l.status>=200&&l.status<300?i(new Jv(l.status,l.statusText,l.response||l.responseText)):o(new Si(l.response||l.responseText||l.statusText,l.status))},l.onerror=()=>{this._logger.log(Ee.Warning,`Error from HTTP request. ${l.status}: ${l.statusText}.`),o(new Si(l.statusText,l.status))},l.ontimeout=()=>{this._logger.log(Ee.Warning,"Timeout from HTTP request."),o(new pf)},l.send(n.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class cE extends Il{constructor(n){if(super(),typeof fetch<"u"||wt.isNode)this._httpClient=new aE(n);else if(typeof XMLHttpRequest<"u")this._httpClient=new lE(n);else throw new Error("No usable HttpClient found.")}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new $n):n.method?n.url?this._httpClient.send(n):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(n){return this._httpClient.getCookieString(n)}}class Rn{static write(n){return`${n}${Rn.RecordSeparator}`}static parse(n){if(n[n.length-1]!==Rn.RecordSeparator)throw new Error("Message is incomplete.");const i=n.split(Rn.RecordSeparator);return i.pop(),i}}Rn.RecordSeparatorCode=30;Rn.RecordSeparator=String.fromCharCode(Rn.RecordSeparatorCode);class uE{writeHandshakeRequest(n){return Rn.write(JSON.stringify(n))}parseHandshakeResponse(n){let i,o;if(xi(n)){const p=new Uint8Array(n),m=p.indexOf(Rn.RecordSeparatorCode);if(m===-1)throw new Error("Message is incomplete.");const g=m+1;i=String.fromCharCode.apply(null,Array.prototype.slice.call(p.slice(0,g))),o=p.byteLength>g?p.slice(g).buffer:null}else{const p=n,m=p.indexOf(Rn.RecordSeparator);if(m===-1)throw new Error("Message is incomplete.");const g=m+1;i=p.substring(0,g),o=p.length>g?p.substring(g):null}const l=Rn.parse(i),c=JSON.parse(l[0]);if(c.type)throw new Error("Expected a handshake response from the server.");return[o,c]}}var Xe;(function(r){r[r.Invocation=1]="Invocation",r[r.StreamItem=2]="StreamItem",r[r.Completion=3]="Completion",r[r.StreamInvocation=4]="StreamInvocation",r[r.CancelInvocation=5]="CancelInvocation",r[r.Ping=6]="Ping",r[r.Close=7]="Close",r[r.Ack=8]="Ack",r[r.Sequence=9]="Sequence"})(Xe||(Xe={}));class dE{constructor(){this.observers=[]}next(n){for(const i of this.observers)i.next(n)}error(n){for(const i of this.observers)i.error&&i.error(n)}complete(){for(const n of this.observers)n.complete&&n.complete()}subscribe(n){return this.observers.push(n),new tE(this,n)}}class fE{constructor(n,i,o){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=n,this._connection=i,this._bufferSize=o}async _send(n){const i=this._protocol.writeMessage(n);let o=Promise.resolve();if(this._isInvocationMessage(n)){this._totalMessageCount++;let l=()=>{},c=()=>{};xi(i)?this._bufferedByteCount+=i.byteLength:this._bufferedByteCount+=i.length,this._bufferedByteCount>=this._bufferSize&&(o=new Promise((f,p)=>{l=f,c=p})),this._messages.push(new hE(i,this._totalMessageCount,l,c))}try{this._reconnectInProgress||await this._connection.send(i)}catch{this._disconnected()}await o}_ack(n){let i=-1;for(let o=0;o<this._messages.length;o++){const l=this._messages[o];if(l._id<=n.sequenceId)i=o,xi(l._message)?this._bufferedByteCount-=l._message.byteLength:this._bufferedByteCount-=l._message.length,l._resolver();else if(this._bufferedByteCount<this._bufferSize)l._resolver();else break}i!==-1&&(this._messages=this._messages.slice(i+1))}_shouldProcessMessage(n){if(this._waitForSequenceMessage)return n.type!==Xe.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(n))return!0;const i=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,i<=this._latestReceivedSequenceId?(i===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=i,this._ackTimer(),!0)}_resetSequence(n){if(n.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=n.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const n=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:Xe.Sequence,sequenceId:n}));const i=this._messages;for(const o of i)await this._connection.send(o._message);this._reconnectInProgress=!1}_dispose(n){n??(n=new Error("Unable to reconnect to server."));for(const i of this._messages)i._rejector(n)}_isInvocationMessage(n){switch(n.type){case Xe.Invocation:case Xe.StreamItem:case Xe.Completion:case Xe.StreamInvocation:case Xe.CancelInvocation:return!0;case Xe.Close:case Xe.Sequence:case Xe.Ping:case Xe.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:Xe.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class hE{constructor(n,i,o,l){this._message=n,this._id=i,this._resolver=o,this._rejector=l}}const pE=30*1e3,mE=15*1e3,gE=1e5;var gt;(function(r){r.Disconnected="Disconnected",r.Connecting="Connecting",r.Connected="Connected",r.Disconnecting="Disconnecting",r.Reconnecting="Reconnecting"})(gt||(gt={}));class mf{static create(n,i,o,l,c,f,p){return new mf(n,i,o,l,c,f,p)}constructor(n,i,o,l,c,f,p){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(Ee.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},Ot.isRequired(n,"connection"),Ot.isRequired(i,"logger"),Ot.isRequired(o,"protocol"),this.serverTimeoutInMilliseconds=c??pE,this.keepAliveIntervalInMilliseconds=f??mE,this._statefulReconnectBufferSize=p??gE,this._logger=i,this._protocol=o,this.connection=n,this._reconnectPolicy=l,this._handshakeProtocol=new uE,this.connection.onreceive=m=>this._processIncomingData(m),this.connection.onclose=m=>this._connectionClosed(m),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=gt.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Xe.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(n){if(this._connectionState!==gt.Disconnected&&this._connectionState!==gt.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!n)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=n}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==gt.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=gt.Connecting,this._logger.log(Ee.Debug,"Starting HubConnection.");try{await this._startInternal(),wt.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=gt.Connected,this._connectionStarted=!0,this._logger.log(Ee.Debug,"HubConnection connected successfully.")}catch(n){return this._connectionState=gt.Disconnected,this._logger.log(Ee.Debug,`HubConnection failed to start successfully because of error '${n}'.`),Promise.reject(n)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const n=new Promise((i,o)=>{this._handshakeResolver=i,this._handshakeRejecter=o});await this.connection.start(this._protocol.transferFormat);try{let i=this._protocol.version;this.connection.features.reconnect||(i=1);const o={protocol:this._protocol.name,version:i};if(this._logger.log(Ee.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(o)),this._logger.log(Ee.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await n,this._stopDuringStartError)throw this._stopDuringStartError;this.connection.features.reconnect&&(this._messageBuffer=new fE(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(i){throw this._logger.log(Ee.Debug,`Hub handshake failed with error '${i}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(i),i}}async stop(){const n=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await n}catch{}}_stopInternal(n){if(this._connectionState===gt.Disconnected)return this._logger.log(Ee.Debug,`Call to HubConnection.stop(${n}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===gt.Disconnecting)return this._logger.log(Ee.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const i=this._connectionState;return this._connectionState=gt.Disconnecting,this._logger.log(Ee.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(Ee.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(i===gt.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=n||new $n("The connection was stopped before the hub handshake could complete."),this.connection.stop(n))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(n,...i){const[o,l]=this._replaceStreamingParams(i),c=this._createStreamInvocation(n,i,l);let f;const p=new dE;return p.cancelCallback=()=>{const m=this._createCancelInvocation(c.invocationId);return delete this._callbacks[c.invocationId],f.then(()=>this._sendWithProtocol(m))},this._callbacks[c.invocationId]=(m,g)=>{if(g){p.error(g);return}else m&&(m.type===Xe.Completion?m.error?p.error(new Error(m.error)):p.complete():p.next(m.item))},f=this._sendWithProtocol(c).catch(m=>{p.error(m),delete this._callbacks[c.invocationId]}),this._launchStreams(o,f),p}_sendMessage(n){return this._resetKeepAliveInterval(),this.connection.send(n)}_sendWithProtocol(n){return this._messageBuffer?this._messageBuffer._send(n):this._sendMessage(this._protocol.writeMessage(n))}send(n,...i){const[o,l]=this._replaceStreamingParams(i),c=this._sendWithProtocol(this._createInvocation(n,i,!0,l));return this._launchStreams(o,c),c}invoke(n,...i){const[o,l]=this._replaceStreamingParams(i),c=this._createInvocation(n,i,!1,l);return new Promise((p,m)=>{this._callbacks[c.invocationId]=(y,E)=>{if(E){m(E);return}else y&&(y.type===Xe.Completion?y.error?m(new Error(y.error)):p(y.result):m(new Error(`Unexpected message type: ${y.type}`)))};const g=this._sendWithProtocol(c).catch(y=>{m(y),delete this._callbacks[c.invocationId]});this._launchStreams(o,g)})}on(n,i){!n||!i||(n=n.toLowerCase(),this._methods[n]||(this._methods[n]=[]),this._methods[n].indexOf(i)===-1&&this._methods[n].push(i))}off(n,i){if(!n)return;n=n.toLowerCase();const o=this._methods[n];if(o)if(i){const l=o.indexOf(i);l!==-1&&(o.splice(l,1),o.length===0&&delete this._methods[n])}else delete this._methods[n]}onclose(n){n&&this._closedCallbacks.push(n)}onreconnecting(n){n&&this._reconnectingCallbacks.push(n)}onreconnected(n){n&&this._reconnectedCallbacks.push(n)}_processIncomingData(n){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(n=this._processHandshakeResponse(n),this._receivedHandshakeResponse=!0),n){const i=this._protocol.parseMessages(n,this._logger);for(const o of i)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(o)))switch(o.type){case Xe.Invocation:this._invokeClientMethod(o).catch(l=>{this._logger.log(Ee.Error,`Invoke client method threw error: ${wd(l)}`)});break;case Xe.StreamItem:case Xe.Completion:{const l=this._callbacks[o.invocationId];if(l){o.type===Xe.Completion&&delete this._callbacks[o.invocationId];try{l(o)}catch(c){this._logger.log(Ee.Error,`Stream callback threw error: ${wd(c)}`)}}break}case Xe.Ping:break;case Xe.Close:{this._logger.log(Ee.Information,"Close message received from server.");const l=o.error?new Error("Server returned an error on close: "+o.error):void 0;o.allowReconnect===!0?this.connection.stop(l):this._stopPromise=this._stopInternal(l);break}case Xe.Ack:this._messageBuffer&&this._messageBuffer._ack(o);break;case Xe.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(o);break;default:this._logger.log(Ee.Warning,`Invalid message type: ${o.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(n){let i,o;try{[o,i]=this._handshakeProtocol.parseHandshakeResponse(n)}catch(l){const c="Error parsing handshake response: "+l;this._logger.log(Ee.Error,c);const f=new Error(c);throw this._handshakeRejecter(f),f}if(i.error){const l="Server returned handshake error: "+i.error;this._logger.log(Ee.Error,l);const c=new Error(l);throw this._handshakeRejecter(c),c}else this._logger.log(Ee.Debug,"Server handshake complete.");return this._handshakeResolver(),o}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if(!this.connection.features||!this.connection.features.inherentKeepAlive){this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds);let n=this._nextKeepAlive-new Date().getTime();if(n<0){this._connectionState===gt.Connected&&this._trySendPingMessage();return}this._pingServerHandle===void 0&&(n<0&&(n=0),this._pingServerHandle=setTimeout(async()=>{this._connectionState===gt.Connected&&await this._trySendPingMessage()},n))}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(n){const i=n.target.toLowerCase(),o=this._methods[i];if(!o){this._logger.log(Ee.Warning,`No client method with the name '${i}' found.`),n.invocationId&&(this._logger.log(Ee.Warning,`No result given for '${i}' method and invocation ID '${n.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)));return}const l=o.slice(),c=!!n.invocationId;let f,p,m;for(const g of l)try{const y=f;f=await g.apply(this,n.arguments),c&&f&&y&&(this._logger.log(Ee.Error,`Multiple results provided for '${i}'. Sending error to server.`),m=this._createCompletionMessage(n.invocationId,"Client provided multiple results.",null)),p=void 0}catch(y){p=y,this._logger.log(Ee.Error,`A callback for the method '${i}' threw error '${y}'.`)}m?await this._sendWithProtocol(m):c?(p?m=this._createCompletionMessage(n.invocationId,`${p}`,null):f!==void 0?m=this._createCompletionMessage(n.invocationId,null,f):(this._logger.log(Ee.Warning,`No result given for '${i}' method and invocation ID '${n.invocationId}'.`),m=this._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(m)):f&&this._logger.log(Ee.Error,`Result given for '${i}' method but server is not expecting a result.`)}_connectionClosed(n){this._logger.log(Ee.Debug,`HubConnection.connectionClosed(${n}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||n||new $n("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(n||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===gt.Disconnecting?this._completeClose(n):this._connectionState===gt.Connected&&this._reconnectPolicy?this._reconnect(n):this._connectionState===gt.Connected&&this._completeClose(n)}_completeClose(n){if(this._connectionStarted){this._connectionState=gt.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(n??new Error("Connection closed.")),this._messageBuffer=void 0),wt.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(i=>i.apply(this,[n]))}catch(i){this._logger.log(Ee.Error,`An onclose callback called with error '${n}' threw error '${i}'.`)}}}async _reconnect(n){const i=Date.now();let o=0,l=n!==void 0?n:new Error("Attempting to reconnect due to a unknown error."),c=this._getNextRetryDelay(o,0,l);if(c===null){this._logger.log(Ee.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(n);return}if(this._connectionState=gt.Reconnecting,n?this._logger.log(Ee.Information,`Connection reconnecting because of error '${n}'.`):this._logger.log(Ee.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(f=>f.apply(this,[n]))}catch(f){this._logger.log(Ee.Error,`An onreconnecting callback called with error '${n}' threw error '${f}'.`)}if(this._connectionState!==gt.Reconnecting){this._logger.log(Ee.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;c!==null;){if(this._logger.log(Ee.Information,`Reconnect attempt number ${o+1} will start in ${c} ms.`),await new Promise(f=>{this._reconnectDelayHandle=setTimeout(f,c)}),this._reconnectDelayHandle=void 0,this._connectionState!==gt.Reconnecting){this._logger.log(Ee.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=gt.Connected,this._logger.log(Ee.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(f=>f.apply(this,[this.connection.connectionId]))}catch(f){this._logger.log(Ee.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${f}'.`)}return}catch(f){if(this._logger.log(Ee.Information,`Reconnect attempt failed because of error '${f}'.`),this._connectionState!==gt.Reconnecting){this._logger.log(Ee.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===gt.Disconnecting&&this._completeClose();return}o++,l=f instanceof Error?f:new Error(f.toString()),c=this._getNextRetryDelay(o,Date.now()-i,l)}}this._logger.log(Ee.Information,`Reconnect retries have been exhausted after ${Date.now()-i} ms and ${o} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(n,i,o){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:i,previousRetryCount:n,retryReason:o})}catch(l){return this._logger.log(Ee.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${n}, ${i}) threw error '${l}'.`),null}}_cancelCallbacksWithError(n){const i=this._callbacks;this._callbacks={},Object.keys(i).forEach(o=>{const l=i[o];try{l(null,n)}catch(c){this._logger.log(Ee.Error,`Stream 'error' callback called with '${n}' threw error: ${wd(c)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(n,i,o,l){if(o)return l.length!==0?{target:n,arguments:i,streamIds:l,type:Xe.Invocation}:{target:n,arguments:i,type:Xe.Invocation};{const c=this._invocationId;return this._invocationId++,l.length!==0?{target:n,arguments:i,invocationId:c.toString(),streamIds:l,type:Xe.Invocation}:{target:n,arguments:i,invocationId:c.toString(),type:Xe.Invocation}}}_launchStreams(n,i){if(n.length!==0){i||(i=Promise.resolve());for(const o in n)n[o].subscribe({complete:()=>{i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(o)))},error:l=>{let c;l instanceof Error?c=l.message:l&&l.toString?c=l.toString():c="Unknown error",i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(o,c)))},next:l=>{i=i.then(()=>this._sendWithProtocol(this._createStreamItemMessage(o,l)))}})}}_replaceStreamingParams(n){const i=[],o=[];for(let l=0;l<n.length;l++){const c=n[l];if(this._isObservable(c)){const f=this._invocationId;this._invocationId++,i[f]=c,o.push(f.toString()),n.splice(l,1)}}return[i,o]}_isObservable(n){return n&&n.subscribe&&typeof n.subscribe=="function"}_createStreamInvocation(n,i,o){const l=this._invocationId;return this._invocationId++,o.length!==0?{target:n,arguments:i,invocationId:l.toString(),streamIds:o,type:Xe.StreamInvocation}:{target:n,arguments:i,invocationId:l.toString(),type:Xe.StreamInvocation}}_createCancelInvocation(n){return{invocationId:n,type:Xe.CancelInvocation}}_createStreamItemMessage(n,i){return{invocationId:n,item:i,type:Xe.StreamItem}}_createCompletionMessage(n,i,o){return i?{error:i,invocationId:n,type:Xe.Completion}:{invocationId:n,result:o,type:Xe.Completion}}_createCloseMessage(){return{type:Xe.Close}}async _trySendPingMessage(){try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}}const yE=[0,2e3,1e4,3e4,null];class yy{constructor(n){this._retryDelays=n!==void 0?[...n,null]:yE}nextRetryDelayInMilliseconds(n){return this._retryDelays[n.previousRetryCount]}}class wi{}wi.Authorization="Authorization";wi.Cookie="Cookie";class vE extends Il{constructor(n,i){super(),this._innerClient=n,this._accessTokenFactory=i}async send(n){let i=!0;this._accessTokenFactory&&(!this._accessToken||n.url&&n.url.indexOf("/negotiate?")>0)&&(i=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(n);const o=await this._innerClient.send(n);return i&&o.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(n),await this._innerClient.send(n)):o}_setAuthorizationHeader(n){n.headers||(n.headers={}),this._accessToken?n.headers[wi.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&n.headers[wi.Authorization]&&delete n.headers[wi.Authorization]}getCookieString(n){return this._innerClient.getCookieString(n)}}var Pt;(function(r){r[r.None=0]="None",r[r.WebSockets=1]="WebSockets",r[r.ServerSentEvents=2]="ServerSentEvents",r[r.LongPolling=4]="LongPolling"})(Pt||(Pt={}));var tn;(function(r){r[r.Text=1]="Text",r[r.Binary=2]="Binary"})(tn||(tn={}));let bE=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class vy{get pollAborted(){return this._pollAbort.aborted}constructor(n,i,o){this._httpClient=n,this._logger=i,this._pollAbort=new bE,this._options=o,this._running=!1,this.onreceive=null,this.onclose=null}async connect(n,i){if(Ot.isRequired(n,"url"),Ot.isRequired(i,"transferFormat"),Ot.isIn(i,tn,"transferFormat"),this._url=n,this._logger.log(Ee.Trace,"(LongPolling transport) Connecting."),i===tn.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[o,l]=ys(),c={[o]:l,...this._options.headers},f={abortSignal:this._pollAbort.signal,headers:c,timeout:1e5,withCredentials:this._options.withCredentials};i===tn.Binary&&(f.responseType="arraybuffer");const p=`${n}&_=${Date.now()}`;this._logger.log(Ee.Trace,`(LongPolling transport) polling: ${p}.`);const m=await this._httpClient.get(p,f);m.statusCode!==200?(this._logger.log(Ee.Error,`(LongPolling transport) Unexpected response code: ${m.statusCode}.`),this._closeError=new Si(m.statusText||"",m.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,f)}async _poll(n,i){try{for(;this._running;)try{const o=`${n}&_=${Date.now()}`;this._logger.log(Ee.Trace,`(LongPolling transport) polling: ${o}.`);const l=await this._httpClient.get(o,i);l.statusCode===204?(this._logger.log(Ee.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):l.statusCode!==200?(this._logger.log(Ee.Error,`(LongPolling transport) Unexpected response code: ${l.statusCode}.`),this._closeError=new Si(l.statusText||"",l.statusCode),this._running=!1):l.content?(this._logger.log(Ee.Trace,`(LongPolling transport) data received. ${Mo(l.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(l.content)):this._logger.log(Ee.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(o){this._running?o instanceof pf?this._logger.log(Ee.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=o,this._running=!1):this._logger.log(Ee.Trace,`(LongPolling transport) Poll errored after shutdown: ${o.message}`)}}finally{this._logger.log(Ee.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(n){return this._running?Kv(this._logger,"LongPolling",this._httpClient,this._url,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(Ee.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(Ee.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const n={},[i,o]=ys();n[i]=o;const l={headers:{...n,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let c;try{await this._httpClient.delete(this._url,l)}catch(f){c=f}c?c instanceof Si&&(c.statusCode===404?this._logger.log(Ee.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(Ee.Trace,`(LongPolling transport) Error sending a DELETE request: ${c}`)):this._logger.log(Ee.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(Ee.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let n="(LongPolling transport) Firing onclose event.";this._closeError&&(n+=" Error: "+this._closeError),this._logger.log(Ee.Trace,n),this.onclose(this._closeError)}}}class SE{constructor(n,i,o,l){this._httpClient=n,this._accessToken=i,this._logger=o,this._options=l,this.onreceive=null,this.onclose=null}async connect(n,i){return Ot.isRequired(n,"url"),Ot.isRequired(i,"transferFormat"),Ot.isIn(i,tn,"transferFormat"),this._logger.log(Ee.Trace,"(SSE transport) Connecting."),this._url=n,this._accessToken&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((o,l)=>{let c=!1;if(i!==tn.Text){l(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let f;if(wt.isBrowser||wt.isWebWorker)f=new this._options.EventSource(n,{withCredentials:this._options.withCredentials});else{const p=this._httpClient.getCookieString(n),m={};m.Cookie=p;const[g,y]=ys();m[g]=y,f=new this._options.EventSource(n,{withCredentials:this._options.withCredentials,headers:{...m,...this._options.headers}})}try{f.onmessage=p=>{if(this.onreceive)try{this._logger.log(Ee.Trace,`(SSE transport) data received. ${Mo(p.data,this._options.logMessageContent)}.`),this.onreceive(p.data)}catch(m){this._close(m);return}},f.onerror=p=>{c?this._close():l(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},f.onopen=()=>{this._logger.log(Ee.Information,`SSE connected to ${this._url}`),this._eventSource=f,c=!0,o()}}catch(p){l(p);return}})}async send(n){return this._eventSource?Kv(this._logger,"SSE",this._httpClient,this._url,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(n){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(n))}}class wE{constructor(n,i,o,l,c,f){this._logger=o,this._accessTokenFactory=i,this._logMessageContent=l,this._webSocketConstructor=c,this._httpClient=n,this.onreceive=null,this.onclose=null,this._headers=f}async connect(n,i){Ot.isRequired(n,"url"),Ot.isRequired(i,"transferFormat"),Ot.isIn(i,tn,"transferFormat"),this._logger.log(Ee.Trace,"(WebSockets transport) Connecting.");let o;return this._accessTokenFactory&&(o=await this._accessTokenFactory()),new Promise((l,c)=>{n=n.replace(/^http/,"ws");let f;const p=this._httpClient.getCookieString(n);let m=!1;if(wt.isNode||wt.isReactNative){const g={},[y,E]=ys();g[y]=E,o&&(g[wi.Authorization]=`Bearer ${o}`),p&&(g[wi.Cookie]=p),f=new this._webSocketConstructor(n,void 0,{headers:{...g,...this._headers}})}else o&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(o)}`);f||(f=new this._webSocketConstructor(n)),i===tn.Binary&&(f.binaryType="arraybuffer"),f.onopen=g=>{this._logger.log(Ee.Information,`WebSocket connected to ${n}.`),this._webSocket=f,m=!0,l()},f.onerror=g=>{let y=null;typeof ErrorEvent<"u"&&g instanceof ErrorEvent?y=g.error:y="There was an error with the transport",this._logger.log(Ee.Information,`(WebSockets transport) ${y}.`)},f.onmessage=g=>{if(this._logger.log(Ee.Trace,`(WebSockets transport) data received. ${Mo(g.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(g.data)}catch(y){this._close(y);return}},f.onclose=g=>{if(m)this._close(g);else{let y=null;typeof ErrorEvent<"u"&&g instanceof ErrorEvent?y=g.error:y="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",c(new Error(y))}}})}send(n){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(Ee.Trace,`(WebSockets transport) sending data. ${Mo(n,this._logMessageContent)}.`),this._webSocket.send(n),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(n){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(Ee.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(n)&&(n.wasClean===!1||n.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${n.code} (${n.reason||"no reason given"}).`)):n instanceof Error?this.onclose(n):this.onclose())}_isCloseEvent(n){return n&&typeof n.wasClean=="boolean"&&typeof n.code=="number"}}const by=100;class TE{constructor(n,i={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,Ot.isRequired(n,"url"),this._logger=eE(i.logger),this.baseUrl=this._resolveUrl(n),i=i||{},i.logMessageContent=i.logMessageContent===void 0?!1:i.logMessageContent,typeof i.withCredentials=="boolean"||i.withCredentials===void 0)i.withCredentials=i.withCredentials===void 0?!0:i.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");i.timeout=i.timeout===void 0?100*1e3:i.timeout;let o=null,l=null;if(wt.isNode&&typeof require<"u"){const c=typeof __webpack_require__=="function"?__non_webpack_require__:require;o=c("ws"),l=c("eventsource")}!wt.isNode&&typeof WebSocket<"u"&&!i.WebSocket?i.WebSocket=WebSocket:wt.isNode&&!i.WebSocket&&o&&(i.WebSocket=o),!wt.isNode&&typeof EventSource<"u"&&!i.EventSource?i.EventSource=EventSource:wt.isNode&&!i.EventSource&&typeof l<"u"&&(i.EventSource=l),this._httpClient=new vE(i.httpClient||new cE(this._logger),i.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=i,this.onreceive=null,this.onclose=null}async start(n){if(n=n||tn.Binary,Ot.isIn(n,tn,"transferFormat"),this._logger.log(Ee.Debug,`Starting connection with transfer format '${tn[n]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(n),await this._startInternalPromise,this._connectionState==="Disconnecting"){const i="Failed to start the HttpConnection before stop() was called.";return this._logger.log(Ee.Error,i),await this._stopPromise,Promise.reject(new $n(i))}else if(this._connectionState!=="Connected"){const i="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(Ee.Error,i),Promise.reject(new $n(i))}this._connectionStarted=!0}send(n){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new gf(this.transport)),this._sendQueue.send(n))}async stop(n){if(this._connectionState==="Disconnected")return this._logger.log(Ee.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(Ee.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(i=>{this._stopPromiseResolver=i}),await this._stopInternal(n),await this._stopPromise}async _stopInternal(n){this._stopError=n;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(i){this._logger.log(Ee.Error,`HttpConnection.transport.stop() threw error '${i}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(Ee.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(n){let i=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===Pt.WebSockets)this.transport=this._constructTransport(Pt.WebSockets),await this._startTransport(i,n);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let o=null,l=0;do{if(o=await this._getNegotiationResponse(i),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new $n("The connection was stopped during negotiation.");if(o.error)throw new Error(o.error);if(o.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(o.url&&(i=o.url),o.accessToken){const c=o.accessToken;this._accessTokenFactory=()=>c,this._httpClient._accessToken=c,this._httpClient._accessTokenFactory=void 0}l++}while(o.url&&l<by);if(l===by&&o.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(i,this._options.transport,o,n)}this.transport instanceof vy&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(Ee.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(o){return this._logger.log(Ee.Error,"Failed to start the connection: "+o),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(o)}}async _getNegotiationResponse(n){const i={},[o,l]=ys();i[o]=l;const c=this._resolveNegotiateUrl(n);this._logger.log(Ee.Debug,`Sending negotiation request: ${c}.`);try{const f=await this._httpClient.post(c,{content:"",headers:{...i,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(f.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${f.statusCode}'`));const p=JSON.parse(f.content);return(!p.negotiateVersion||p.negotiateVersion<1)&&(p.connectionToken=p.connectionId),p.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new my("Client didn't negotiate Stateful Reconnect but the server did.")):p}catch(f){let p="Failed to complete negotiation with the server: "+f;return f instanceof Si&&f.statusCode===404&&(p=p+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(Ee.Error,p),Promise.reject(new my(p))}}_createConnectUrl(n,i){return i?n+(n.indexOf("?")===-1?"?":"&")+`id=${i}`:n}async _createTransport(n,i,o,l){let c=this._createConnectUrl(n,o.connectionToken);if(this._isITransport(i)){this._logger.log(Ee.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=i,await this._startTransport(c,l),this.connectionId=o.connectionId;return}const f=[],p=o.availableTransports||[];let m=o;for(const g of p){const y=this._resolveTransportOrError(g,i,l,m?.useStatefulReconnect===!0);if(y instanceof Error)f.push(`${g.transport} failed:`),f.push(y);else if(this._isITransport(y)){if(this.transport=y,!m){try{m=await this._getNegotiationResponse(n)}catch(E){return Promise.reject(E)}c=this._createConnectUrl(n,m.connectionToken)}try{await this._startTransport(c,l),this.connectionId=m.connectionId;return}catch(E){if(this._logger.log(Ee.Error,`Failed to start the transport '${g.transport}': ${E}`),m=void 0,f.push(new KR(`${g.transport} failed: ${E}`,Pt[g.transport])),this._connectionState!=="Connecting"){const L="Failed to select transport before stop() was called.";return this._logger.log(Ee.Debug,L),Promise.reject(new $n(L))}}}}return f.length>0?Promise.reject(new QR(`Unable to connect to the server with any of the available transports. ${f.join(" ")}`,f)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(n){switch(n){case Pt.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new wE(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case Pt.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new SE(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case Pt.LongPolling:return new vy(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${n}.`)}}_startTransport(n,i){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async o=>{let l=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(n,i),await this.features.resend()}catch{l=!0}else{this._stopConnection(o);return}l&&this._stopConnection(o)}:this.transport.onclose=o=>this._stopConnection(o),this.transport.connect(n,i)}_resolveTransportOrError(n,i,o,l){const c=Pt[n.transport];if(c==null)return this._logger.log(Ee.Debug,`Skipping transport '${n.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${n.transport}' because it is not supported by this client.`);if(CE(i,c))if(n.transferFormats.map(p=>tn[p]).indexOf(o)>=0){if(c===Pt.WebSockets&&!this._options.WebSocket||c===Pt.ServerSentEvents&&!this._options.EventSource)return this._logger.log(Ee.Debug,`Skipping transport '${Pt[c]}' because it is not supported in your environment.'`),new XR(`'${Pt[c]}' is not supported in your environment.`,c);this._logger.log(Ee.Debug,`Selecting transport '${Pt[c]}'.`);try{return this.features.reconnect=c===Pt.WebSockets?l:void 0,this._constructTransport(c)}catch(p){return p}}else return this._logger.log(Ee.Debug,`Skipping transport '${Pt[c]}' because it does not support the requested transfer format '${tn[o]}'.`),new Error(`'${Pt[c]}' does not support ${tn[o]}.`);else return this._logger.log(Ee.Debug,`Skipping transport '${Pt[c]}' because it was disabled by the client.`),new JR(`'${Pt[c]}' is disabled by the client.`,c)}_isITransport(n){return n&&typeof n=="object"&&"connect"in n}_stopConnection(n){if(this._logger.log(Ee.Debug,`HttpConnection.stopConnection(${n}) called while in state ${this._connectionState}.`),this.transport=void 0,n=this._stopError||n,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(Ee.Debug,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(Ee.Warning,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${n}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),n?this._logger.log(Ee.Error,`Connection disconnected with error '${n}'.`):this._logger.log(Ee.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(i=>{this._logger.log(Ee.Error,`TransportSendQueue.stop() threw error '${i}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(n)}catch(i){this._logger.log(Ee.Error,`HttpConnection.onclose(${n}) threw error '${i}'.`)}}}_resolveUrl(n){if(n.lastIndexOf("https://",0)===0||n.lastIndexOf("http://",0)===0)return n;if(!wt.isBrowser)throw new Error(`Cannot resolve '${n}'.`);const i=window.document.createElement("a");return i.href=n,this._logger.log(Ee.Information,`Normalizing '${n}' to '${i.href}'.`),i.href}_resolveNegotiateUrl(n){const i=new URL(n);i.pathname.endsWith("/")?i.pathname+="negotiate":i.pathname+="/negotiate";const o=new URLSearchParams(i.searchParams);return o.has("negotiateVersion")||o.append("negotiateVersion",this._negotiateVersion.toString()),o.has("useStatefulReconnect")?o.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&o.append("useStatefulReconnect","true"),i.search=o.toString(),i.toString()}}function CE(r,n){return!r||(n&r)!==0}class gf{constructor(n){this._transport=n,this._buffer=[],this._executing=!0,this._sendBufferedData=new sl,this._transportResult=new sl,this._sendLoopPromise=this._sendLoop()}send(n){return this._bufferData(n),this._transportResult||(this._transportResult=new sl),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(n){if(this._buffer.length&&typeof this._buffer[0]!=typeof n)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof n}`);this._buffer.push(n),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new sl;const n=this._transportResult;this._transportResult=void 0;const i=typeof this._buffer[0]=="string"?this._buffer.join(""):gf._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(i),n.resolve()}catch(o){n.reject(o)}}}static _concatBuffers(n){const i=n.map(c=>c.byteLength).reduce((c,f)=>c+f),o=new Uint8Array(i);let l=0;for(const c of n)o.set(new Uint8Array(c),l),l+=c.byteLength;return o.buffer}}class sl{constructor(){this.promise=new Promise((n,i)=>[this._resolver,this._rejecter]=[n,i])}resolve(){this._resolver()}reject(n){this._rejecter(n)}}const xE="json";class RE{constructor(){this.name=xE,this.version=2,this.transferFormat=tn.Text}parseMessages(n,i){if(typeof n!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!n)return[];i===null&&(i=Oo.instance);const o=Rn.parse(n),l=[];for(const c of o){const f=JSON.parse(c);if(typeof f.type!="number")throw new Error("Invalid payload.");switch(f.type){case Xe.Invocation:this._isInvocationMessage(f);break;case Xe.StreamItem:this._isStreamItemMessage(f);break;case Xe.Completion:this._isCompletionMessage(f);break;case Xe.Ping:break;case Xe.Close:break;case Xe.Ack:this._isAckMessage(f);break;case Xe.Sequence:this._isSequenceMessage(f);break;default:i.log(Ee.Information,"Unknown message type '"+f.type+"' ignored.");continue}l.push(f)}return l}writeMessage(n){return Rn.write(JSON.stringify(n))}_isInvocationMessage(n){this._assertNotEmptyString(n.target,"Invalid payload for Invocation message."),n.invocationId!==void 0&&this._assertNotEmptyString(n.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(n){if(this._assertNotEmptyString(n.invocationId,"Invalid payload for StreamItem message."),n.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(n){if(n.result&&n.error)throw new Error("Invalid payload for Completion message.");!n.result&&n.error&&this._assertNotEmptyString(n.error,"Invalid payload for Completion message."),this._assertNotEmptyString(n.invocationId,"Invalid payload for Completion message.")}_isAckMessage(n){if(typeof n.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(n){if(typeof n.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(n,i){if(typeof n!="string"||n==="")throw new Error(i)}}const EE={trace:Ee.Trace,debug:Ee.Debug,info:Ee.Information,information:Ee.Information,warn:Ee.Warning,warning:Ee.Warning,error:Ee.Error,critical:Ee.Critical,none:Ee.None};function _E(r){const n=EE[r.toLowerCase()];if(typeof n<"u")return n;throw new Error(`Unknown log level: ${r}`)}class kE{configureLogging(n){if(Ot.isRequired(n,"logging"),AE(n))this.logger=n;else if(typeof n=="string"){const i=_E(n);this.logger=new xl(i)}else this.logger=new xl(n);return this}withUrl(n,i){return Ot.isRequired(n,"url"),Ot.isNotEmpty(n,"url"),this.url=n,typeof i=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...i}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:i},this}withHubProtocol(n){return Ot.isRequired(n,"protocol"),this.protocol=n,this}withAutomaticReconnect(n){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return n?Array.isArray(n)?this.reconnectPolicy=new yy(n):this.reconnectPolicy=n:this.reconnectPolicy=new yy,this}withServerTimeout(n){return Ot.isRequired(n,"milliseconds"),this._serverTimeoutInMilliseconds=n,this}withKeepAliveInterval(n){return Ot.isRequired(n,"milliseconds"),this._keepAliveIntervalInMilliseconds=n,this}withStatefulReconnect(n){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=n?.bufferSize,this}build(){const n=this.httpConnectionOptions||{};if(n.logger===void 0&&(n.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const i=new TE(this.url,n);return mf.create(i,this.logger||Oo.instance,this.protocol||new RE,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function AE(r){return r.log!==void 0}class NE{constructor(){this.connection=null,this.isConnected=!1,this.messageHandlers=new Set}async connect(){if(!(this.isConnected&&this.connection?.state===gt.Connected)){if(this.connection)try{await this.connection.stop()}catch(n){console.log("Error stopping existing connection:",n)}this.connection=new kE().withUrl("http://localhost:7219/chathub",{accessTokenFactory:()=>{const n=localStorage.getItem("user");return n?JSON.parse(n).token:null}}).withAutomaticReconnect().build(),this.connection.onreconnected(()=>{console.log("SignalR Reconnected"),this.isConnected=!0}),this.connection.onreconnecting(()=>{console.log("SignalR Reconnecting..."),this.isConnected=!1}),this.connection.onclose(()=>{console.log("SignalR Connection Closed"),this.isConnected=!1});try{await this.connection.start(),this.isConnected=!0,console.log("SignalR Connected")}catch(n){throw console.error("SignalR Connection Error:",n),this.isConnected=!1,n}}}async joinChat(n){this.isConnected||await this.connect();try{await this.connection.invoke("JoinChat",n)}catch(i){console.error("Error joining chat:",i)}}async sendMessage(n,i){(!this.isConnected||this.connection?.state!==gt.Connected)&&(console.log("Connection not ready, attempting to connect..."),await this.connect());try{await this.connection.invoke("SendMessage",n,i)}catch(o){if(console.error("Error sending message:",o),o.message?.includes("not in the 'Connected' State"))console.log("Attempting to reconnect and resend..."),await this.connect(),await this.connection.invoke("SendMessage",n,i);else throw o}}onReceiveMessage(n){this.connection&&!this.messageHandlers.has(n)&&(this.messageHandlers.add(n),this.connection.on("ReceiveMessage",n))}offReceiveMessage(n){this.connection&&this.messageHandlers.has(n)&&(this.messageHandlers.delete(n),this.connection.off("ReceiveMessage",n))}onError(n){this.connection&&this.connection.on("Error",n)}onMessageStatusUpdated(n){this.connection&&this.connection.on("MessageStatusUpdated",n)}async markDelivered(n,i){this.isConnected||await this.connect();try{await this.connection.invoke("MarkDelivered",n,i)}catch(o){console.error("Error marking delivered:",o)}}async markRead(n,i){this.isConnected||await this.connect();try{await this.connection.invoke("MarkRead",n,i)}catch(o){console.error("Error marking read:",o)}}async getMessageHistory(n){this.isConnected||await this.connect();try{return await this.connection.invoke("GetMessageHistory",n)}catch(i){return console.error("Error getting message history:",i),[]}}async disconnect(){this.connection&&this.isConnected&&(await this.connection.stop(),this.isConnected=!1)}}const qn=new NE,Wn=({src:r,alt:n,className:i,style:o,fallbackText:l="No Image",userId:c=null})=>{const[f,p]=U.useState(null),[m,g]=U.useState(!0),[y,E]=U.useState(!1),L=`data:image/svg+xml;base64,${btoa(`
    <svg width="150" height="150" viewBox="0 0 150 150" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="150" height="150" rx="8" fill="#f1f5f9"/>
      <text x="75" y="80" text-anchor="middle" fill="#64748b" font-family="Arial" font-size="14">${l.replace(/[^\x00-\x7F]/g,"User")}</text>
    </svg>
  `)}`;U.useEffect(()=>{(async()=>{if(!r||y){p(L),g(!1);return}try{if(g(!0),r.includes("blob.core.windows.net")&&!r.includes("?")){const ee=r.split("/"),Y=ee[ee.length-1],le=ee[ee.length-2]||"logos",fe=await Xv.getSasUrl(Y,le);p(fe||L)}else p(r)}catch(ee){console.error("Error loading image with SAS:",ee),p(L),E(!0)}finally{g(!1)}})()},[r,y,L]);const G=()=>{y||(E(!0),p(L),g(!1))};return m?u.jsx("div",{className:i,style:{...o,display:"flex",alignItems:"center",justifyContent:"center",background:"#f1f5f9",color:"#64748b",fontSize:"12px"},children:"Loading..."}):u.jsx("img",{src:f,alt:n,className:i,style:o,onError:G})},Qv=({recipientId:r,recipientName:n,recipientImageUrl:i,onClose:o})=>{const[l,c]=U.useState([]),[f,p]=U.useState(""),[m,g]=U.useState(!1),[y,E]=U.useState(!1),[L,G]=U.useState(!0),O=localStorage.getItem("userId"),ee=U.useRef(null),Y=U.useRef(null);U.useEffect(()=>(le(),()=>{Y.current&&qn.offReceiveMessage(Y.current)}),[r]);const le=async()=>{try{G(!0),await qn.connect(),console.log(" Joining chat with:",r),await qn.joinChat(r),console.log(" Joined chat successfully"),Y.current=Q=>{console.log(" Message received:",Q),Q.senderId===r?c(re=>{if(re.find(ke=>ke.id===Q.id))return re;const ve={id:Q.id,sender:"Recipient",text:Q.message,timestamp:new Date(Q.timestamp),status:Q.status?.toLowerCase()||"sent"},ue=`chat_${[O,r].sort().join("_")}`;return console.log(" Calling MarkDelivered:",Q.id,ue),qn.markDelivered(Q.id,ue),setTimeout(async()=>{try{const ke=await Fe.get(`chat/messages/${r}`);ke.data&&c(Ce=>Ce.map(Ne=>{const Be=ke.data.find(qe=>qe.id===Ne.id);return Be&&Ne.sender==="Me"?(console.log(`Refreshed status for ${Ne.id}: ${Be.status}`),{...Ne,status:Be.status?.toLowerCase()}):Ne}))}catch(ke){console.error("Failed to refresh status:",ke)}},500),[...re,ve]}):console.log(" Ignoring message from self or other user")},qn.onReceiveMessage(Y.current),qn.onMessageStatusUpdated(Q=>{console.log(" Status updated event received:",Q),c(re=>re.map(ue=>ue.id===Q.messageId?(console.log(`Updating message ${ue.id} from ${ue.status} to ${Q.status}`),{...ue,status:Q.status?.toLowerCase()||ue.status}):ue))}),qn.onError(Q=>{console.error("Chat error:",Q)});try{const Q=await Fe.get(`chat/messages/${r}`);if(Q.data&&Q.data.length>0){const re=Q.data.map(ve=>({id:ve.id,sender:ve.senderId===O?"Me":"Recipient",text:ve.message,timestamp:new Date(ve.timestamp),status:ve.status?.toLowerCase()||"sent"}));c(re)}}catch(Q){console.error("Failed to load message history:",Q)}E(!0)}catch(Q){console.error("Failed to initialize chat:",Q)}finally{G(!1)}};U.useEffect(()=>{fe();const Q=`chat_${[O,r].sort().join("_")}`;l.forEach(re=>{re.sender==="Recipient"&&re.id&&re.status!=="read"&&(console.log(" Marking as read:",re.id,Q),qn.markRead(re.id,Q))})},[l,O,r]);const fe=()=>{ee.current?.scrollIntoView({behavior:"smooth"})},me=async Q=>{if(Q.preventDefault(),!!f.trim())try{g(!0);const re=f;p(""),y||(console.log(" Reconnecting before sending message..."),await qn.connect(),E(!0)),await qn.sendMessage(r,re),c(ve=>[...ve,{id:Date.now(),sender:"Me",text:re,timestamp:new Date,status:"sent"}])}catch(re){console.error("Failed to send message:",re),alert("Failed to send message. Please try again."),p(messageText)}finally{g(!1)}};return u.jsxs("div",{className:"chat-widget",children:[u.jsxs("div",{className:"chat-header",children:[u.jsxs("div",{className:"chat-user-info",children:[u.jsx(Wn,{src:i,alt:n,className:"user-avatar",fallbackText:"User"}),u.jsxs("div",{children:[u.jsx("div",{className:"user-name",children:n||"Chat"}),u.jsxs("div",{className:"user-status",children:[" ",y?"Online":"Connecting..."]})]})]}),u.jsx("button",{onClick:o,className:"close-btn",children:u.jsx(lf,{size:16})})]}),u.jsxs("div",{className:"chat-messages",children:[L?u.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:"Loading messages..."}):l.length===0?u.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:["Start a conversation with ",n]}):l.map((Q,re)=>(console.log("Rendering message:",{id:Q.id,status:Q.status,sender:Q.sender}),u.jsxs("div",{className:`message ${Q.sender==="Me"?"sent":"received"}`,children:[u.jsx("div",{className:"message-content",children:Q.text}),u.jsxs("div",{style:{fontSize:"11px",color:"#65676b",marginTop:"2px",textAlign:"center"},children:[new Date(Q.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Q.sender==="Me"&&u.jsx("span",{style:{marginLeft:"4px",color:Q.status==="read"?"#4ade80":"#65676b",fontWeight:"500"},children:Q.status==="read"?"Read":Q.status==="delivered"?"Delivered":"Sent"})]})]},Q.id||re))),u.jsx("div",{ref:ee})]}),u.jsxs("form",{onSubmit:me,className:"chat-input",children:[u.jsx("input",{type:"text",value:f,onChange:Q=>p(Q.target.value),placeholder:"Type a message...",className:"message-input"}),u.jsx("button",{type:"submit",className:"send-btn",disabled:m,children:u.jsx(jo,{size:16})})]})]})},Sy=({user:r})=>{Wr();const[n,i]=U.useState([]),[o,l]=U.useState(!0),[c,f]=U.useState({}),[p,m]=U.useState([]),[g,y]=U.useState([]),[E,L]=U.useState(null),[G,O]=U.useState(!1),[ee,Y]=U.useState({}),[le,fe]=U.useState("Not connected"),[me,Q]=U.useState(null),[re,ve]=U.useState(null),[ue,ke]=U.useState(!1),[Ce,Ne]=U.useState(!1),[Be,qe]=U.useState({rating:0,comment:""}),[je,xe]=U.useState(!1),[De,H]=U.useState(""),[M,X]=U.useState(!1),[z,K]=U.useState({name:"",email:"",userType:"Guest",message:""}),[x,P]=U.useState(!1),[T,b]=U.useState(""),[S,_]=U.useState(!1);U.useEffect(()=>{r&&r.token&&(V(),N())},[r]);const N=async()=>{try{const I=await Fe.get("location/states-with-cities");Y(I.data)}catch(I){console.error("Error fetching locations:",I),Y({"Tamil Nadu":["Chennai","Coimbatore","Madurai","Other"],Karnataka:["Bangalore","Mysore","Mangalore","Other"],Kerala:["Kochi","Thiruvananthapuram","Kozhikode","Other"],"Andhra Pradesh":["Hyderabad","Visakhapatnam","Vijayawada","Other"],Maharashtra:["Mumbai","Pune","Nagpur","Other"],Delhi:["New Delhi","Other"]})}};U.useEffect(()=>{w()},[n,p]);const w=()=>{if(p.length===0)y(n);else{const I=n.filter(W=>p.some(te=>W.location?.toLowerCase().includes(te.toLowerCase())));y(I)}},R=I=>{f(W=>({...W,[I]:!W[I]}))},A=I=>{m(W=>W.includes(I)?W.filter(te=>te!==I):[...W,I])},q=()=>{m([])},J=()=>{Q(null),ve(null),document.body.style.overflow="unset"};U.useEffect(()=>(me?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[me]);const V=async()=>{try{const I=await Fe.get("user/browse"),te=(Array.isArray(I.data)?I.data:[I.data]).filter(ge=>ge.status==="Active"||ge.status==="Verified");i(te)}catch(I){console.error("Error fetching hosts:",I),I.response?.status===500?(console.error("Server error - API may be down or misconfigured"),i([])):I.response?.status!==401&&I.response?.status!==403&&i([])}finally{l(!1)}},B=async I=>{ve(I.userId),ke(!0);try{const W=await Fe.post("user/public-profile",{userId:I.userId}),te=r?.userId,ge=W.data.reviews||[],we=ge.find(j=>j.reviewerId===te),Ae=ge.filter(j=>j.reviewerId!==te).sort((j,C)=>new Date(C.createdAt)-new Date(j.createdAt)),He=we?[we,...Ae]:Ae,Ge=!!we;Q({...W.data,reviews:He,hasUserReview:Ge}),Ne(!1),qe({rating:0,comment:""})}catch(W){console.error("Failed to fetch profile:",W)}finally{ke(!1)}},ae=I=>{L({id:I.userId,name:I.name})},he=async()=>{if(console.log("Submit clicked, reviewError before:",De),console.log("Rating:",Be.rating,"Comment:",Be.comment),H(""),!Be.comment.trim()||Be.rating===0){console.log("Setting error message"),H("Please provide both rating and comment"),console.log("reviewError after setting:","Please provide both rating and comment");return}xe(!0);try{await Fe.post("review",{userId:me.userId,rating:Be.rating,comment:Be.comment.trim()});const I=await Fe.post("user/public-profile",{userId:me.userId}),W=r?.userId,te=I.data.reviews||[],ge=te.find(Ge=>Ge.reviewerId===W),we=te.filter(Ge=>Ge.reviewerId!==W).sort((Ge,j)=>new Date(j.createdAt)-new Date(Ge.createdAt)),Ae=ge?[ge,...we]:we,He=!!ge;Q({...I.data,reviews:Ae,hasUserReview:He}),Ne(!1),qe({rating:0,comment:""}),H("")}catch(I){console.error("Failed to submit review:",I),I.response?.data?.message?H(I.response.data.message):H("Failed to submit review. Please try again.")}finally{xe(!1)}},ie=async()=>{if(b(""),!z.name.trim()||!z.email.trim()||!z.message.trim()){b("Please fill in all required fields");return}P(!0);try{await Fe.post("feedback",{name:z.name.trim(),email:z.email.trim(),userType:z.userType,message:z.message.trim()}),_(!0),K({name:"",email:"",userType:"Guest",message:""}),setTimeout(()=>{X(!1),_(!1)},2e3)}catch(I){console.error("Failed to submit feedback:",I),I.response?.data?.message?b(I.response.data.message):b("Failed to submit feedback. Please try again.")}finally{P(!1)}};return o?u.jsx("div",{className:"container",children:u.jsxs("div",{className:"loading",style:{padding:"4rem",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),u.jsx("h3",{children:"Finding amazing hosts for you..."})]})}):u.jsxs("div",{className:"browse-layout",onClick:()=>G&&O(!1),children:[u.jsxs("button",{className:"mobile-filter-toggle",onClick:()=>O(!G),children:[u.jsxs("span",{children:["Filters ",p.length>0&&`(${p.length})`]}),G?u.jsx(Tv,{size:16}):u.jsx(af,{size:16})]}),u.jsxs("div",{className:`location-sidebar ${G?"mobile-visible":""}`,onClick:I=>I.stopPropagation(),children:[u.jsxs("div",{className:"filter-header",children:[u.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Sv,{size:20,style:{color:"var(--primary)"}}),"Filter by Location"]}),p.length>0&&u.jsxs("button",{onClick:q,className:"clear-filters-btn",children:["Clear (",p.length,")"]})]}),u.jsx("div",{className:"location-filters",children:Object.entries(ee).map(([I,W])=>u.jsxs("div",{className:"state-group",children:[u.jsxs("button",{className:"state-toggle",onClick:()=>R(I),children:[u.jsx("span",{children:I}),u.jsx("span",{className:"expand-icon",children:c[I]?"-":"+"})]}),c[I]&&u.jsx("div",{className:"cities-list",children:W.map(te=>u.jsx("button",{className:`city-btn ${p.includes(te)?"selected":""}`,onClick:()=>A(te),children:te},te))})]},I))})]}),u.jsxs("div",{className:"browse-main",children:[u.jsxs("div",{className:"browse-header",children:[u.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(k1,{size:24,style:{color:"var(--primary)"}}),"Available Hosts"]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u.jsxs("button",{className:"btn btn-outline",onClick:()=>X(!0),style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(B1,{size:14})," Feedback"]}),u.jsx("div",{className:"results-count",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:!o&&u.jsxs(u.Fragment,{children:[u.jsx(ms,{size:16,style:{color:"var(--text-light)"}}),u.jsxs("span",{children:[g.length," host",g.length!==1?"s":""," found"]})]})})]})]}),o?u.jsxs("div",{className:"loading",style:{padding:"4rem",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),u.jsx("h3",{children:"Finding amazing hosts for you..."})]}):u.jsx("div",{children:g.length===0?u.jsxs("div",{className:"no-results",children:[u.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),u.jsxs("h3",{style:{color:"#1e293b"},children:["No hosts found",p.length>0?" for selected locations":" in this area yet"]}),u.jsx("p",{style:{color:"#64748b"},children:p.length>0?"Try selecting different locations or clear filters.":"We're growing fast! Check back tomorrow for new Pongal celebrations."}),p.length>0&&u.jsx("button",{onClick:q,className:"btn btn-outline",children:"Clear filters"})]}):u.jsx("div",{className:"compact-grid",children:g.map(I=>u.jsxs("div",{className:`host-card-horizontal ${re===I.userId?"selected":""}`,onClick:()=>B(I),children:[u.jsxs("div",{className:"host-image-section",children:[u.jsx(Wn,{src:I.profileImageUrl,alt:I.name,className:"host-card-img",userId:I.userId,fallbackText:"Host"}),u.jsx("button",{className:"chat-btn",onClick:W=>{W.stopPropagation(),ae(I)},children:u.jsx(ps,{size:16})}),I.status==="Verified"&&u.jsx("div",{className:"verified-badge",children:" Verified"})]}),u.jsxs("div",{className:"host-content-section",children:[u.jsx("h3",{className:"host-name",children:I.name}),u.jsx("div",{className:"host-location",children:I.location.split(",")[0]})]})]},I.userId))})})]}),me&&u.jsx("div",{className:"modal-overlay",onClick:J,children:u.jsxs("div",{className:"modal-content",onClick:I=>I.stopPropagation(),style:{maxHeight:"90vh",overflowY:"auto"},children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h3",{children:me.name}),u.jsx("button",{onClick:J,className:"modal-close",children:""})]}),u.jsxs("div",{className:"modal-body",children:[u.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",alignItems:"flex-start"},children:[u.jsx(Wn,{src:me.profileImageUrl,alt:me.name,className:"modal-profile-image",fallbackText:"Profile",style:{flexShrink:0,width:"100px",height:"100px"}}),u.jsxs("div",{style:{flex:1},children:[u.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1.25rem"},children:me.name}),u.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:u.jsxs("span",{style:{color:"#64748b"},children:[" ",me.location]})}),u.jsxs("p",{style:{color:"#64748b",fontSize:"0.9rem",margin:"0"},children:[me.userType,"  Joined ",new Date(me.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"})]})]})]}),u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsx("h4",{style:{marginBottom:"0.75rem",color:"var(--text)"},children:me.userType==="Host"?" About My Hosting":" About Me"}),u.jsx("p",{style:{color:"#475569",lineHeight:"1.5",background:"#f8fafc",padding:"1rem",borderRadius:"0.5rem",margin:"0"},children:me.bio||"No description provided."})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[u.jsxs("h4",{style:{margin:"0",color:"var(--text)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[" Reviews (",me.totalReviews||me.reviews?.length||0,")",me.averageRating>0&&u.jsxs("span",{style:{fontSize:"0.9rem",color:"#64748b"},children:["(",me.averageRating.toFixed(1)," avg)"]})]}),!me.hasUserReview&&u.jsx("button",{className:"btn btn-outline",onClick:()=>Ne(!Ce),style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:Ce?"Cancel":"Write Review"})]}),Ce&&u.jsxs("div",{className:"review-form",children:[De&&u.jsx("div",{className:"review-error",children:De}),u.jsxs("div",{style:{marginBottom:"0.75rem"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Rating:"}),u.jsx("div",{className:"rating-input",children:Array.from({length:5},(I,W)=>u.jsx("button",{type:"button",className:"rating-star",onClick:()=>{qe(te=>({...te,rating:W+1})),H("")},style:{color:W<Be.rating?"#fbbf24":"#d1d5db"},children:""},W))})]}),u.jsxs("div",{style:{marginBottom:"0.75rem"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Comment:"}),u.jsx("textarea",{value:Be.comment,onChange:I=>{qe(W=>({...W,comment:I.target.value})),H("")},placeholder:"Share your experience...",rows:3,style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",resize:"vertical",fontFamily:"inherit"}})]}),u.jsx("button",{className:"btn btn-primary",onClick:he,disabled:je,style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:je?"Submitting...":"Submit Review"})]}),me.reviews&&me.reviews.length>0&&u.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:me.reviews.map((I,W)=>{const te=I.reviewerId===r?.userId;return u.jsxs("div",{className:`review-item ${te?"user-review":""}`,children:[te&&u.jsx("div",{className:"user-review-badge",children:"Your Review"}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.25rem",paddingRight:te?"5rem":"0"},children:[u.jsx("strong",{style:{fontSize:"0.9rem"},children:I.reviewerName}),u.jsx("div",{className:"review-stars",children:Array.from({length:5},(ge,we)=>u.jsx("span",{style:{color:we<I.rating?"#fbbf24":"#d1d5db"},children:""},we))})]}),u.jsx("p",{style:{margin:"0",fontSize:"0.85rem",color:"#475569",lineHeight:"1.4"},children:I.comment}),u.jsx("div",{className:"review-meta",children:new Date(I.createdAt).toLocaleDateString()})]},W)})}),(!me.reviews||me.reviews.length===0)&&!Ce&&u.jsx("p",{style:{color:"#64748b",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:"No reviews yet. Be the first to share your experience!"})]})]})]})}),ue&&u.jsx("div",{className:"modal-overlay",children:u.jsx("div",{className:"loading",style:{color:"white"},children:"Loading profile..."})}),M&&u.jsx("div",{className:"modal-overlay",onClick:()=>X(!1),children:u.jsxs("div",{className:"modal-content",onClick:I=>I.stopPropagation(),style:{maxWidth:"500px"},children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h3",{children:"Share Your Feedback"}),u.jsx("button",{onClick:()=>X(!1),className:"modal-close",children:""})]}),u.jsx("div",{className:"modal-body",children:S?u.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[u.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),u.jsx("h4",{style:{color:"var(--success)",marginBottom:"0.5rem"},children:"Thank you!"}),u.jsx("p",{style:{color:"#64748b"},children:"Your feedback has been submitted successfully."})]}):u.jsxs(u.Fragment,{children:[T&&u.jsx("div",{style:{background:"#fee2e2",color:"#dc2626",padding:"0.75rem",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.9rem"},children:T}),u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Name *"}),u.jsx("input",{type:"text",value:z.name,onChange:I=>{K(W=>({...W,name:I.target.value})),b("")},placeholder:"Your name",style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",fontFamily:"inherit"}})]}),u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Email *"}),u.jsx("input",{type:"email",value:z.email,onChange:I=>{K(W=>({...W,email:I.target.value})),b("")},placeholder:"your.email@example.com",style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",fontFamily:"inherit"}})]}),u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"User Type"}),u.jsxs("select",{value:z.userType,onChange:I=>K(W=>({...W,userType:I.target.value})),style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",fontFamily:"inherit"},children:[u.jsx("option",{value:"Guest",children:"Guest"}),u.jsx("option",{value:"Host",children:"Host"})]})]}),u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Message *"}),u.jsx("textarea",{value:z.message,onChange:I=>{K(W=>({...W,message:I.target.value})),b("")},placeholder:"Share your thoughts, suggestions, or report any issues...",rows:4,style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",resize:"vertical",fontFamily:"inherit"}})]}),u.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[u.jsx("button",{className:"btn btn-outline",onClick:()=>X(!1),disabled:x,children:"Cancel"}),u.jsx("button",{className:"btn btn-primary",onClick:ie,disabled:x,children:x?"Submitting...":"Submit Feedback"})]})]})})]})}),E&&u.jsx(Qv,{recipientId:E.id,recipientName:E.name,recipientImageUrl:n.find(I=>I.userId===E.id)?.profileImageUrl,onClose:()=>L(null)})]})},jE=({user:r})=>{const[n,i]=U.useState([]),[o,l]=U.useState(!0),[c,f]=U.useState({}),[p,m]=U.useState([]),[g,y]=U.useState([]),[E,L]=U.useState(null),[G,O]=U.useState(!1),[ee,Y]=U.useState({}),[le,fe]=U.useState(null),[me,Q]=U.useState(null),[re,ve]=U.useState(!1),[ue,ke]=U.useState(!1),[Ce,Ne]=U.useState({rating:0,comment:""}),[Be,qe]=U.useState(!1),[je,xe]=U.useState("");U.useEffect(()=>{r.status==="Active"||r.status==="Verified"?(H(),De()):l(!1)},[r.status]);const De=async()=>{try{const b=await Fe.get("location/states-with-cities");Y(b.data)}catch(b){console.error("Error fetching locations:",b)}};U.useEffect(()=>{M()},[n,p]);const H=async()=>{try{const b=await Fe.get("user/browse"),S=Array.isArray(b.data)?b.data:[b.data];i(S)}catch(b){console.error("Error fetching guests:",b),i([])}finally{l(!1)}},M=()=>{if(p.length===0)y(n);else{const b=n.filter(S=>p.some(_=>S.location?.toLowerCase().includes(_.toLowerCase())));y(b)}},X=b=>{f(S=>({...S,[b]:!S[b]}))},z=b=>{m(S=>S.includes(b)?S.filter(_=>_!==b):[...S,b])},K=()=>{m([])},x=()=>{fe(null),Q(null),document.body.style.overflow="unset"};U.useEffect(()=>(le?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[le]);const P=async b=>{Q(b.userId),ve(!0);try{const S=await Fe.post("user/public-profile",{userId:b.userId}),_=r?.userId,N=S.data.reviews||[],w=N.find(J=>J.reviewerId===_),R=N.filter(J=>J.reviewerId!==_).sort((J,V)=>new Date(V.createdAt)-new Date(J.createdAt)),A=w?[w,...R]:R,q=!!w;fe({...S.data,reviews:A,hasUserReview:q}),ke(!1),Ne({rating:0,comment:""})}catch(S){console.error("Failed to fetch profile:",S)}finally{ve(!1)}},T=async()=>{if(xe(""),!Ce.comment.trim()||Ce.rating===0){xe("Please provide both rating and comment");return}qe(!0);try{await Fe.post("review",{userId:le.userId,rating:Ce.rating,comment:Ce.comment.trim()});const b=await Fe.post("user/public-profile",{userId:le.userId}),S=r?.userId,_=b.data.reviews||[],N=_.find(q=>q.reviewerId===S),w=_.filter(q=>q.reviewerId!==S).sort((q,J)=>new Date(J.createdAt)-new Date(q.createdAt)),R=N?[N,...w]:w,A=!!N;fe({...b.data,reviews:R,hasUserReview:A}),ke(!1),Ne({rating:0,comment:""}),xe("")}catch(b){console.error("Failed to submit review:",b),b.response?.data?.message?xe(b.response.data.message):xe("Failed to submit review. Please try again.")}finally{qe(!1)}};return r.status==="Pending"?u.jsx("div",{className:"container",style:{paddingTop:"5rem"},children:u.jsxs("div",{className:"card text-center",style:{maxWidth:"600px",margin:"0 auto",padding:"3rem 2rem",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[u.jsx("div",{style:{fontSize:"4rem",marginBottom:"1.5rem"},children:""}),u.jsx("h2",{style:{color:"#1e293b",fontSize:"2rem",marginBottom:"1rem"},children:"Registration Pending"}),u.jsx("p",{style:{color:"#64748b",fontSize:"1.1rem",lineHeight:"1.6",marginBottom:"2rem"},children:"Thank you for joining as a Host! Your registration is currently being verified by our team. Once approved, you'll be able to see guests and start hosting."}),u.jsxs("div",{style:{padding:"1.5rem",background:"#f8fafc",borderRadius:"0.75rem",border:"1px solid #e2e8f0",color:"#475569",textAlign:"left"},children:[u.jsx("p",{style:{margin:"0 0 0.5rem 0"},children:u.jsx("strong",{children:"Next Steps:"})}),u.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[u.jsx("li",{children:"Admin verifies your payment"}),u.jsx("li",{children:'Your profile becomes "Active"'}),u.jsx("li",{children:"You receive guests' contact requests"})]})]})]})}):o?u.jsx("div",{className:"container",children:u.jsxs("div",{className:"loading",style:{padding:"4rem",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),u.jsx("h3",{children:"Loading guests near you..."})]})}):u.jsxs("div",{className:"browse-layout",onClick:()=>G&&O(!1),children:[u.jsxs("button",{className:"mobile-filter-toggle",onClick:()=>O(!G),children:[u.jsxs("span",{children:["Filters ",p.length>0&&`(${p.length})`]}),G?u.jsx(Tv,{size:16}):u.jsx(af,{size:16})]}),u.jsxs("div",{className:`location-sidebar ${G?"mobile-visible":""}`,onClick:b=>b.stopPropagation(),children:[u.jsxs("div",{className:"filter-header",children:[u.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Sv,{size:20,style:{color:"var(--primary)"}}),"Filter by Location"]}),p.length>0&&u.jsxs("button",{onClick:K,className:"clear-filters-btn",children:["Clear (",p.length,")"]})]}),u.jsx("div",{className:"location-filters",children:Object.entries(ee).map(([b,S])=>u.jsxs("div",{className:"state-group",children:[u.jsxs("button",{className:"state-toggle",onClick:()=>X(b),children:[u.jsx("span",{children:b}),u.jsx("span",{className:"expand-icon",children:c[b]?"-":"+"})]}),c[b]&&u.jsx("div",{className:"cities-list",children:S.map(_=>u.jsx("button",{className:`city-btn ${p.includes(_)?"selected":""}`,onClick:()=>z(_),children:_},_))})]},b))})]}),u.jsxs("div",{className:"browse-main",children:[u.jsxs("div",{className:"browse-header",children:[u.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Id,{size:24,style:{color:"var(--primary)"}}),"Guests Looking for Festivals"]}),u.jsx("div",{className:"results-count",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:!o&&u.jsxs(u.Fragment,{children:[u.jsx(ms,{size:16,style:{color:"var(--text-light)"}}),u.jsxs("span",{children:[g.length," guest",g.length!==1?"s":""," found"]})]})})]}),g.length===0?u.jsxs("div",{className:"no-results",children:[u.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),u.jsx("h3",{style:{color:"#1e293b"},children:p.length>0?"No guests found for selected locations":"No guests found right now"}),u.jsx("p",{style:{color:"#64748b"},children:p.length>0?"Try adjusting your location filters or check back later.":"Check back soon as more travelers join the festival celebrations!"}),p.length>0&&u.jsx("button",{onClick:K,className:"btn btn-outline",children:"Clear filters"})]}):u.jsx("div",{className:"compact-grid",children:g.map(b=>u.jsxs("div",{className:`host-card-horizontal ${me===b.userId?"selected":""}`,onClick:()=>P(b),children:[u.jsxs("div",{className:"host-image-section",children:[u.jsx(Wn,{src:b.profileImageUrl,alt:b.name,className:"host-card-img",fallbackText:"Guest"}),u.jsx("button",{className:"chat-btn",onClick:S=>{S.stopPropagation(),L({id:b.userId,name:b.name})},children:u.jsx(ps,{size:16})})]}),u.jsxs("div",{className:"host-content-section",children:[u.jsx("h3",{className:"host-name",children:b.name}),u.jsx("div",{className:"host-location",children:b.location?.split(",")[0]||"Location not specified"})]})]},b.userId))})]}),le&&u.jsx("div",{className:"modal-overlay",onClick:x,children:u.jsxs("div",{className:"modal-content",onClick:b=>b.stopPropagation(),style:{maxHeight:"90vh",overflowY:"auto"},children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h3",{children:le.name}),u.jsx("button",{onClick:x,className:"modal-close",children:""})]}),u.jsxs("div",{className:"modal-body",children:[u.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",alignItems:"flex-start"},children:[u.jsx(Wn,{src:le.profileImageUrl,alt:le.name,className:"modal-profile-image",fallbackText:"Guest",style:{flexShrink:0,width:"100px",height:"100px"}}),u.jsxs("div",{style:{flex:1},children:[u.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1.25rem"},children:le.name}),u.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:u.jsxs("span",{style:{color:"#64748b"},children:[" ",le.location]})}),u.jsxs("p",{style:{color:"#64748b",fontSize:"0.9rem",margin:"0"},children:[le.userType,"  Joined ",new Date(le.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"})]})]})]}),u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsx("h4",{style:{marginBottom:"0.75rem",color:"var(--text)"},children:le.userType==="Host"?" About My Hosting":" About Me"}),u.jsx("p",{style:{color:"#475569",lineHeight:"1.5",background:"#f8fafc",padding:"1rem",borderRadius:"0.5rem",margin:"0"},children:le.bio||"No description provided."})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[u.jsxs("h4",{style:{margin:"0",color:"var(--text)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[" Reviews (",le.totalReviews||le.reviews?.length||0,")",le.averageRating>0&&u.jsxs("span",{style:{fontSize:"0.9rem",color:"#64748b"},children:["(",le.averageRating.toFixed(1)," avg)"]})]}),!le.hasUserReview&&u.jsx("button",{className:"btn btn-outline",onClick:()=>ke(!ue),style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:ue?"Cancel":"Write Review"})]}),ue&&u.jsxs("div",{className:"review-form",children:[je&&u.jsx("div",{className:"review-error",children:je}),u.jsxs("div",{style:{marginBottom:"0.75rem"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Rating:"}),u.jsx("div",{className:"rating-input",children:Array.from({length:5},(b,S)=>u.jsx("button",{type:"button",className:"rating-star",onClick:()=>{Ne(_=>({..._,rating:S+1})),xe("")},style:{color:S<Ce.rating?"#fbbf24":"#d1d5db"},children:""},S))})]}),u.jsxs("div",{style:{marginBottom:"0.75rem"},children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Comment:"}),u.jsx("textarea",{value:Ce.comment,onChange:b=>{Ne(S=>({...S,comment:b.target.value})),xe("")},placeholder:"Share your experience...",rows:3,style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",resize:"vertical",fontFamily:"inherit"}})]}),u.jsx("button",{className:"btn btn-primary",onClick:T,disabled:Be,style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:Be?"Submitting...":"Submit Review"})]}),le.reviews&&le.reviews.length>0&&u.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:le.reviews.map((b,S)=>{const _=b.reviewerId===r?.userId;return u.jsxs("div",{className:`review-item ${_?"user-review":""}`,children:[_&&u.jsx("div",{className:"user-review-badge",children:"Your Review"}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.25rem",paddingRight:_?"5rem":"0"},children:[u.jsx("strong",{style:{fontSize:"0.9rem"},children:b.reviewerName}),u.jsx("div",{className:"review-stars",children:Array.from({length:5},(N,w)=>u.jsx("span",{style:{color:w<b.rating?"#fbbf24":"#d1d5db"},children:""},w))})]}),u.jsx("p",{style:{margin:"0",fontSize:"0.85rem",color:"#475569",lineHeight:"1.4"},children:b.comment}),u.jsx("div",{className:"review-meta",children:new Date(b.createdAt).toLocaleDateString()})]},S)})}),(!le.reviews||le.reviews.length===0)&&!ue&&u.jsx("p",{style:{color:"#64748b",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:"No reviews yet. Be the first to share your experience!"})]})]})]})}),re&&u.jsx("div",{className:"modal-overlay",children:u.jsx("div",{className:"loading",style:{color:"white"},children:"Loading profile..."})}),E&&u.jsx(Qv,{recipientId:E.id,recipientName:E.name,recipientImageUrl:n.find(b=>b.userId===E.id)?.profileImageUrl,onClose:()=>L(null)})]})};function Sr(r,n){var i={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&n.indexOf(o)<0&&(i[o]=r[o]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(r);l<o.length;l++)n.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(r,o[l])&&(i[o[l]]=r[o[l]]);return i}function wy(r){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&r[n],o=0;if(i)return i.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function at(r){return this instanceof at?(this.v=r,this):new at(r)}function Yr(r,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(r,n||[]),l,c=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",f),l[Symbol.asyncIterator]=function(){return this},l;function f(G){return function(O){return Promise.resolve(O).then(G,E)}}function p(G,O){o[G]&&(l[G]=function(ee){return new Promise(function(Y,le){c.push([G,ee,Y,le])>1||m(G,ee)})},O&&(l[G]=O(l[G])))}function m(G,O){try{g(o[G](O))}catch(ee){L(c[0][3],ee)}}function g(G){G.value instanceof at?Promise.resolve(G.value.v).then(y,E):L(c[0][2],G)}function y(G){m("next",G)}function E(G){m("throw",G)}function L(G,O){G(O),c.shift(),c.length&&m(c[0][0],c[0][1])}}function vl(r){var n,i;return n={},o("next"),o("throw",function(l){throw l}),o("return"),n[Symbol.iterator]=function(){return this},n;function o(l,c){n[l]=r[l]?function(f){return(i=!i)?{value:at(r[l](f)),done:!1}:c?c(f):f}:c}}function Xr(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r[Symbol.asyncIterator],i;return n?n.call(r):(r=typeof wy=="function"?wy(r):r[Symbol.iterator](),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(c){i[c]=r[c]&&function(f){return new Promise(function(p,m){f=r[c](f),l(p,m,f.done,f.value)})}}function l(c,f,p,m){Promise.resolve(m).then(function(g){c({value:g,done:p})},f)}}var Td={exports:{}},ol,OE=new Uint8Array(16);function Wv(){if(!ol&&(ol=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ol))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ol(OE)}const ME=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function zl(r){return typeof r=="string"&&ME.test(r)}var Ft=[];for(var Cd=0;Cd<256;++Cd)Ft.push((Cd+256).toString(16).substr(1));function Ll(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=(Ft[r[n+0]]+Ft[r[n+1]]+Ft[r[n+2]]+Ft[r[n+3]]+"-"+Ft[r[n+4]]+Ft[r[n+5]]+"-"+Ft[r[n+6]]+Ft[r[n+7]]+"-"+Ft[r[n+8]]+Ft[r[n+9]]+"-"+Ft[r[n+10]]+Ft[r[n+11]]+Ft[r[n+12]]+Ft[r[n+13]]+Ft[r[n+14]]+Ft[r[n+15]]).toLowerCase();if(!zl(i))throw TypeError("Stringified UUID is invalid");return i}var Ty,xd,Rd=0,Ed=0;function UE(r,n,i){var o=n&&i||0,l=n||new Array(16);r=r||{};var c=r.node||Ty,f=r.clockseq!==void 0?r.clockseq:xd;if(c==null||f==null){var p=r.random||(r.rng||Wv)();c==null&&(c=Ty=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),f==null&&(f=xd=(p[6]<<8|p[7])&16383)}var m=r.msecs!==void 0?r.msecs:Date.now(),g=r.nsecs!==void 0?r.nsecs:Ed+1,y=m-Rd+(g-Ed)/1e4;if(y<0&&r.clockseq===void 0&&(f=f+1&16383),(y<0||m>Rd)&&r.nsecs===void 0&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Rd=m,Ed=g,xd=f,m+=122192928e5;var E=((m&268435455)*1e4+g)%4294967296;l[o++]=E>>>24&255,l[o++]=E>>>16&255,l[o++]=E>>>8&255,l[o++]=E&255;var L=m/4294967296*1e4&268435455;l[o++]=L>>>8&255,l[o++]=L&255,l[o++]=L>>>24&15|16,l[o++]=L>>>16&255,l[o++]=f>>>8|128,l[o++]=f&255;for(var G=0;G<6;++G)l[o+G]=c[G];return n||Ll(l)}function Zv(r){if(!zl(r))throw TypeError("Invalid UUID");var n,i=new Uint8Array(16);return i[0]=(n=parseInt(r.slice(0,8),16))>>>24,i[1]=n>>>16&255,i[2]=n>>>8&255,i[3]=n&255,i[4]=(n=parseInt(r.slice(9,13),16))>>>8,i[5]=n&255,i[6]=(n=parseInt(r.slice(14,18),16))>>>8,i[7]=n&255,i[8]=(n=parseInt(r.slice(19,23),16))>>>8,i[9]=n&255,i[10]=(n=parseInt(r.slice(24,36),16))/1099511627776&255,i[11]=n/4294967296&255,i[12]=n>>>24&255,i[13]=n>>>16&255,i[14]=n>>>8&255,i[15]=n&255,i}function DE(r){r=unescape(encodeURIComponent(r));for(var n=[],i=0;i<r.length;++i)n.push(r.charCodeAt(i));return n}var PE="6ba7b810-9dad-11d1-80b4-00c04fd430c8",IE="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function e0(r,n,i){function o(l,c,f,p){if(typeof l=="string"&&(l=DE(l)),typeof c=="string"&&(c=Zv(c)),c.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var m=new Uint8Array(16+l.length);if(m.set(c),m.set(l,c.length),m=i(m),m[6]=m[6]&15|n,m[8]=m[8]&63|128,f){p=p||0;for(var g=0;g<16;++g)f[p+g]=m[g];return f}return Ll(m)}try{o.name=r}catch{}return o.DNS=PE,o.URL=IE,o}function zE(r){if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=new Uint8Array(n.length);for(var i=0;i<n.length;++i)r[i]=n.charCodeAt(i)}return LE(BE(HE(r),r.length*8))}function LE(r){for(var n=[],i=r.length*32,o="0123456789abcdef",l=0;l<i;l+=8){var c=r[l>>5]>>>l%32&255,f=parseInt(o.charAt(c>>>4&15)+o.charAt(c&15),16);n.push(f)}return n}function t0(r){return(r+64>>>9<<4)+14+1}function BE(r,n){r[n>>5]|=128<<n%32,r[t0(n)-1]=n;for(var i=1732584193,o=-271733879,l=-1732584194,c=271733878,f=0;f<r.length;f+=16){var p=i,m=o,g=l,y=c;i=Kt(i,o,l,c,r[f],7,-680876936),c=Kt(c,i,o,l,r[f+1],12,-389564586),l=Kt(l,c,i,o,r[f+2],17,606105819),o=Kt(o,l,c,i,r[f+3],22,-1044525330),i=Kt(i,o,l,c,r[f+4],7,-176418897),c=Kt(c,i,o,l,r[f+5],12,1200080426),l=Kt(l,c,i,o,r[f+6],17,-1473231341),o=Kt(o,l,c,i,r[f+7],22,-45705983),i=Kt(i,o,l,c,r[f+8],7,1770035416),c=Kt(c,i,o,l,r[f+9],12,-1958414417),l=Kt(l,c,i,o,r[f+10],17,-42063),o=Kt(o,l,c,i,r[f+11],22,-1990404162),i=Kt(i,o,l,c,r[f+12],7,1804603682),c=Kt(c,i,o,l,r[f+13],12,-40341101),l=Kt(l,c,i,o,r[f+14],17,-1502002290),o=Kt(o,l,c,i,r[f+15],22,1236535329),i=Qt(i,o,l,c,r[f+1],5,-165796510),c=Qt(c,i,o,l,r[f+6],9,-1069501632),l=Qt(l,c,i,o,r[f+11],14,643717713),o=Qt(o,l,c,i,r[f],20,-373897302),i=Qt(i,o,l,c,r[f+5],5,-701558691),c=Qt(c,i,o,l,r[f+10],9,38016083),l=Qt(l,c,i,o,r[f+15],14,-660478335),o=Qt(o,l,c,i,r[f+4],20,-405537848),i=Qt(i,o,l,c,r[f+9],5,568446438),c=Qt(c,i,o,l,r[f+14],9,-1019803690),l=Qt(l,c,i,o,r[f+3],14,-187363961),o=Qt(o,l,c,i,r[f+8],20,1163531501),i=Qt(i,o,l,c,r[f+13],5,-1444681467),c=Qt(c,i,o,l,r[f+2],9,-51403784),l=Qt(l,c,i,o,r[f+7],14,1735328473),o=Qt(o,l,c,i,r[f+12],20,-1926607734),i=Wt(i,o,l,c,r[f+5],4,-378558),c=Wt(c,i,o,l,r[f+8],11,-2022574463),l=Wt(l,c,i,o,r[f+11],16,1839030562),o=Wt(o,l,c,i,r[f+14],23,-35309556),i=Wt(i,o,l,c,r[f+1],4,-1530992060),c=Wt(c,i,o,l,r[f+4],11,1272893353),l=Wt(l,c,i,o,r[f+7],16,-155497632),o=Wt(o,l,c,i,r[f+10],23,-1094730640),i=Wt(i,o,l,c,r[f+13],4,681279174),c=Wt(c,i,o,l,r[f],11,-358537222),l=Wt(l,c,i,o,r[f+3],16,-722521979),o=Wt(o,l,c,i,r[f+6],23,76029189),i=Wt(i,o,l,c,r[f+9],4,-640364487),c=Wt(c,i,o,l,r[f+12],11,-421815835),l=Wt(l,c,i,o,r[f+15],16,530742520),o=Wt(o,l,c,i,r[f+2],23,-995338651),i=Zt(i,o,l,c,r[f],6,-198630844),c=Zt(c,i,o,l,r[f+7],10,1126891415),l=Zt(l,c,i,o,r[f+14],15,-1416354905),o=Zt(o,l,c,i,r[f+5],21,-57434055),i=Zt(i,o,l,c,r[f+12],6,1700485571),c=Zt(c,i,o,l,r[f+3],10,-1894986606),l=Zt(l,c,i,o,r[f+10],15,-1051523),o=Zt(o,l,c,i,r[f+1],21,-2054922799),i=Zt(i,o,l,c,r[f+8],6,1873313359),c=Zt(c,i,o,l,r[f+15],10,-30611744),l=Zt(l,c,i,o,r[f+6],15,-1560198380),o=Zt(o,l,c,i,r[f+13],21,1309151649),i=Zt(i,o,l,c,r[f+4],6,-145523070),c=Zt(c,i,o,l,r[f+11],10,-1120210379),l=Zt(l,c,i,o,r[f+2],15,718787259),o=Zt(o,l,c,i,r[f+9],21,-343485551),i=Jr(i,p),o=Jr(o,m),l=Jr(l,g),c=Jr(c,y)}return[i,o,l,c]}function HE(r){if(r.length===0)return[];for(var n=r.length*8,i=new Uint32Array(t0(n)),o=0;o<n;o+=8)i[o>>5]|=(r[o/8]&255)<<o%32;return i}function Jr(r,n){var i=(r&65535)+(n&65535),o=(r>>16)+(n>>16)+(i>>16);return o<<16|i&65535}function qE(r,n){return r<<n|r>>>32-n}function Bl(r,n,i,o,l,c){return Jr(qE(Jr(Jr(n,r),Jr(o,c)),l),i)}function Kt(r,n,i,o,l,c,f){return Bl(n&i|~n&o,r,n,l,c,f)}function Qt(r,n,i,o,l,c,f){return Bl(n&o|i&~o,r,n,l,c,f)}function Wt(r,n,i,o,l,c,f){return Bl(n^i^o,r,n,l,c,f)}function Zt(r,n,i,o,l,c,f){return Bl(i^(n|~o),r,n,l,c,f)}var $E=e0("v3",48,zE);function VE(r,n,i){r=r||{};var o=r.random||(r.rng||Wv)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,n){i=i||0;for(var l=0;l<16;++l)n[i+l]=o[l];return n}return Ll(o)}function GE(r,n,i,o){switch(r){case 0:return n&i^~n&o;case 1:return n^i^o;case 2:return n&i^n&o^i&o;case 3:return n^i^o}}function _d(r,n){return r<<n|r>>>32-n}function FE(r){var n=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var o=unescape(encodeURIComponent(r));r=[];for(var l=0;l<o.length;++l)r.push(o.charCodeAt(l))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var c=r.length/4+2,f=Math.ceil(c/16),p=new Array(f),m=0;m<f;++m){for(var g=new Uint32Array(16),y=0;y<16;++y)g[y]=r[m*64+y*4]<<24|r[m*64+y*4+1]<<16|r[m*64+y*4+2]<<8|r[m*64+y*4+3];p[m]=g}p[f-1][14]=(r.length-1)*8/Math.pow(2,32),p[f-1][14]=Math.floor(p[f-1][14]),p[f-1][15]=(r.length-1)*8&4294967295;for(var E=0;E<f;++E){for(var L=new Uint32Array(80),G=0;G<16;++G)L[G]=p[E][G];for(var O=16;O<80;++O)L[O]=_d(L[O-3]^L[O-8]^L[O-14]^L[O-16],1);for(var ee=i[0],Y=i[1],le=i[2],fe=i[3],me=i[4],Q=0;Q<80;++Q){var re=Math.floor(Q/20),ve=_d(ee,5)+GE(re,Y,le,fe)+me+n[re]+L[Q]>>>0;me=fe,fe=le,le=_d(Y,30)>>>0,Y=ee,ee=ve}i[0]=i[0]+ee>>>0,i[1]=i[1]+Y>>>0,i[2]=i[2]+le>>>0,i[3]=i[3]+fe>>>0,i[4]=i[4]+me>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,i[0]&255,i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,i[1]&255,i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,i[2]&255,i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,i[3]&255,i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,i[4]&255]}var YE=e0("v5",80,FE);const XE="00000000-0000-0000-0000-000000000000";function JE(r){if(!zl(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const KE=Object.freeze(Object.defineProperty({__proto__:null,NIL:XE,parse:Zv,stringify:Ll,v1:UE,v3:$E,v4:VE,v5:YE,validate:zl,version:JE},Symbol.toStringTag,{value:"Module"})),QE=Al(KE);function n0(r,n){return r=Math.ceil(r),n=Math.floor(n),Math.floor(Math.random()*(n-r+1))+r}function r0(r,n){const i=n.retryDelayInMs*Math.pow(2,r),o=Math.min(n.maxRetryDelayInMs,i);return{retryAfterInMs:o/2+n0(0,o/2)}}function yf(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&!(r instanceof RegExp)&&!(r instanceof Date)}function vf(r){if(yf(r)){const n=typeof r.name=="string",i=typeof r.message=="string";return n&&i}return!1}function Hl(r,n){switch(n){case"utf-8":return ZE(r);case"base64":return i0(r);case"base64url":return WE(r);case"hex":return e_(r)}}function mn(r,n){switch(n){case"utf-8":return t_(r);case"base64":return s0(r);case"base64url":return n_(r);case"hex":return r_(r)}}function i0(r){return btoa([...r].map(n=>String.fromCharCode(n)).join(""))}function WE(r){return i0(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function ZE(r){return new TextDecoder().decode(r)}function e_(r){return[...r].map(n=>n.toString(16).padStart(2,"0")).join("")}function t_(r){return new TextEncoder().encode(r)}function s0(r){return new Uint8Array([...atob(r)].map(n=>n.charCodeAt(0)))}function n_(r){const n=r.replace(/-/g,"+").replace(/_/g,"/");return s0(n)}const Cy=new Set("0123456789abcdefABCDEF");function r_(r){const n=new Uint8Array(r.length/2);for(let i=0;i<r.length/2;++i){const o=r[2*i],l=r[2*i+1];if(!Cy.has(o)||!Cy.has(l))return n.slice(0,i);n[i]=parseInt(`${o}${l}`,16)}return n}let al;function o0(){if(al)return al;if(!self.crypto||!self.crypto.subtle)throw new Error("Your browser environment does not support cryptography functions.");return al=self.crypto.subtle,al}async function i_(r,n,i){const o=o0(),l=mn(r,"base64"),c=mn(n,"utf-8"),f=await o.importKey("raw",l,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),p=await o.sign({name:"HMAC",hash:{name:"SHA-256"}},f,c);return Hl(new Uint8Array(p),i)}async function s_(r,n){const i=mn(r,"utf-8"),o=await o0().digest({name:"SHA-256"},i);return Hl(new Uint8Array(o),n)}function o_(){let r="";for(let n=0;n<32;n++){const i=Math.floor(Math.random()*16);n===12?r+="4":n===16?r+=i&3|8:r+=i.toString(16),(n===7||n===11||n===15||n===19)&&(r+="-")}return r}const a_=typeof globalThis?.crypto?.randomUUID=="function"?globalThis.crypto.randomUUID.bind(globalThis.crypto):o_;function bf(){return a_()}const l_=typeof window<"u"&&typeof window.document<"u",c_=typeof self=="object"&&typeof self?.importScripts=="function"&&(self.constructor?.name==="DedicatedWorkerGlobalScope"||self.constructor?.name==="ServiceWorkerGlobalScope"||self.constructor?.name==="SharedWorkerGlobalScope"),a0=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u",l0=typeof Bun<"u"&&typeof Bun.version<"u",Qr=typeof globalThis.process<"u"&&!!globalThis.process.version&&!!globalThis.process.versions?.node,u_=Qr&&!l0&&!a0,d_=typeof navigator<"u"&&navigator?.product==="ReactNative",kd="REDACTED",f_=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],h_=["api-version"];class Sf{allowedHeaderNames;allowedQueryParameters;constructor({additionalAllowedHeaderNames:n=[],additionalAllowedQueryParameters:i=[]}={}){n=f_.concat(n),i=h_.concat(i),this.allowedHeaderNames=new Set(n.map(o=>o.toLowerCase())),this.allowedQueryParameters=new Set(i.map(o=>o.toLowerCase()))}sanitize(n){const i=new Set;return JSON.stringify(n,(o,l)=>{if(l instanceof Error)return{...l,name:l.name,message:l.message};if(o==="headers")return this.sanitizeHeaders(l);if(o==="url")return this.sanitizeUrl(l);if(o==="query")return this.sanitizeQuery(l);if(o==="body")return;if(o==="response")return;if(o==="operationSpec")return;if(Array.isArray(l)||yf(l)){if(i.has(l))return"[Circular]";i.add(l)}return l},2)}sanitizeUrl(n){if(typeof n!="string"||n===null||n==="")return n;const i=new URL(n);if(!i.search)return n;for(const[o]of i.searchParams)this.allowedQueryParameters.has(o.toLowerCase())||i.searchParams.set(o,kd);return i.toString()}sanitizeHeaders(n){const i={};for(const o of Object.keys(n))this.allowedHeaderNames.has(o.toLowerCase())?i[o]=n[o]:i[o]=kd;return i}sanitizeQuery(n){if(typeof n!="object"||n===null)return n;const i={};for(const o of Object.keys(n))this.allowedQueryParameters.has(o.toLowerCase())?i[o]=n[o]:i[o]=kd;return i}}async function p_(r,n){const i=new AbortController;function o(){i.abort()}n?.abortSignal?.addEventListener("abort",o);try{return await Promise.race(r.map(l=>l({abortSignal:i.signal})))}finally{i.abort(),n?.abortSignal?.removeEventListener("abort",o)}}let m_=class extends Error{constructor(n){super(n),this.name="AbortError"}};function c0(r,n){const{cleanupBeforeAbort:i,abortSignal:o,abortErrorMsg:l}=n??{};return new Promise((c,f)=>{function p(){f(new m_(l??"The operation was aborted."))}function m(){o?.removeEventListener("abort",g)}function g(){i?.(),m(),p()}if(o?.aborted)return p();try{r(y=>{m(),c(y)},y=>{m(),f(y)})}catch(y){f(y)}o?.addEventListener("abort",g)})}const g_="The delay was aborted.";function u0(r,n){let i;const{abortSignal:o,abortErrorMsg:l}=n??{};return c0(c=>{i=setTimeout(c,r)},{cleanupBeforeAbort:()=>clearTimeout(i),abortSignal:o,abortErrorMsg:l??g_})}function Ho(r){if(vf(r))return r.message;{let n;try{typeof r=="object"&&r?n=JSON.stringify(r):n=String(r)}catch{n="[unable to stringify input]"}return`Unknown error ${n}`}}function wf(r){return typeof r<"u"&&r!==null}function y_(r,n){if(!wf(r)||typeof r!="object")return!1;for(const i of n)if(!d0(r,i))return!1;return!0}function d0(r,n){return wf(r)&&typeof r=="object"&&n in r}function v_(r,n){return r0(r,n)}function b_(r,n){return s_(r,n)}function S_(r,n,i){return i_(r,n,i)}function w_(r,n){return n0(r,n)}function f0(r){return vf(r)}function T_(r){return yf(r)}function h0(){return bf()}const C_=l_,x_=l0,R_=a0,E_=Qr,Rl=Qr,__=u_,k_=d_,A_=c_;function N_(r,n){return Hl(r,n)}function j_(r,n){return mn(r,n)}const O_=Object.freeze(Object.defineProperty({__proto__:null,calculateRetryDelay:v_,cancelablePromiseRace:p_,computeSha256Hash:b_,computeSha256Hmac:S_,createAbortablePromise:c0,delay:u0,getErrorMessage:Ho,getRandomIntegerInclusive:w_,isBrowser:C_,isBun:x_,isDefined:wf,isDeno:R_,isError:f0,isNode:E_,isNodeLike:Rl,isNodeRuntime:__,isObject:T_,isObjectWithProperties:y_,isReactNative:k_,isWebWorker:A_,objectHasProperty:d0,randomUUID:h0,stringToUint8Array:j_,uint8ArrayToString:N_},Symbol.toStringTag,{value:"Module"})),M_=Al(O_);function p0(r){let n="";for(let i=0;i<r.length;i++)n+=String.fromCharCode(r[i]);return btoa(n)}function m0(r){const n=atob(r),i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}function U_(r){return atob(r)}const Bt="$",vs="_";function D_(r,n){return n!=="Composite"&&n!=="Dictionary"&&(typeof r=="string"||typeof r=="number"||typeof r=="boolean"||n?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||r===void 0||r===null)}const P_=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function I_(r){return P_.test(r)}const z_=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function L_(r){return z_.test(r)}function B_(r){const n={...r.headers,...r.body};return r.hasNullableType&&Object.getOwnPropertyNames(n).length===0?r.shouldWrapBody?{body:null}:null:r.shouldWrapBody?{...r.headers,body:r.body}:n}function xy(r,n){const i=r.parsedHeaders;if(r.request.method==="HEAD")return{...i,body:r.parsedBody};const o=n&&n.bodyMapper,l=!!o?.nullable,c=o?.type.name;if(c==="Stream")return{...i,blobBody:r.blobBody,readableStreamBody:r.readableStreamBody};const f=c==="Composite"&&o.type.modelProperties||{},p=Object.keys(f).some(m=>f[m].serializedName==="");if(c==="Sequence"||p){const m=r.parsedBody??[];for(const g of Object.keys(f))f[g].serializedName&&(m[g]=r.parsedBody?.[g]);if(i)for(const g of Object.keys(i))m[g]=i[g];return l&&!r.parsedBody&&!i&&Object.getOwnPropertyNames(f).length===0?null:m}return B_({body:r.parsedBody,headers:i,hasNullableType:l,shouldWrapBody:D_(r.parsedBody,c)})}class H_{modelMappers;isXML;constructor(n={},i=!1){this.modelMappers=n,this.isXML=i}validateConstraints(n,i,o){const l=(c,f)=>{throw new Error(`"${o}" with value "${i}" should satisfy the constraint "${c}": ${f}.`)};if(n.constraints&&i!==void 0&&i!==null){const{ExclusiveMaximum:c,ExclusiveMinimum:f,InclusiveMaximum:p,InclusiveMinimum:m,MaxItems:g,MaxLength:y,MinItems:E,MinLength:L,MultipleOf:G,Pattern:O,UniqueItems:ee}=n.constraints;if(c!==void 0&&i>=c&&l("ExclusiveMaximum",c),f!==void 0&&i<=f&&l("ExclusiveMinimum",f),p!==void 0&&i>p&&l("InclusiveMaximum",p),m!==void 0&&i<m&&l("InclusiveMinimum",m),g!==void 0&&i.length>g&&l("MaxItems",g),y!==void 0&&i.length>y&&l("MaxLength",y),E!==void 0&&i.length<E&&l("MinItems",E),L!==void 0&&i.length<L&&l("MinLength",L),G!==void 0&&i%G!==0&&l("MultipleOf",G),O){const Y=typeof O=="string"?new RegExp(O):O;(typeof i!="string"||i.match(Y)===null)&&l("Pattern",O)}ee&&i.some((Y,le,fe)=>fe.indexOf(Y)!==le)&&l("UniqueItems",ee)}}serialize(n,i,o,l={xml:{}}){const c={xml:{rootName:l.xml.rootName??"",includeRoot:l.xml.includeRoot??!1,xmlCharKey:l.xml.xmlCharKey??vs}};let f={};const p=n.type.name;o||(o=n.serializedName),p.match(/^Sequence$/i)!==null&&(f=[]),n.isConstant&&(i=n.defaultValue);const{required:m,nullable:g}=n;if(m&&g&&i===void 0)throw new Error(`${o} cannot be undefined.`);if(m&&!g&&i==null)throw new Error(`${o} cannot be null or undefined.`);if(!m&&g===!1&&i===null)throw new Error(`${o} cannot be null.`);return i==null||p.match(/^any$/i)!==null?f=i:p.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)!==null?f=Y_(p,o,i):p.match(/^Enum$/i)!==null?f=X_(o,n.type.allowedValues,i):p.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)!==null?f=Q_(p,i,o):p.match(/^ByteArray$/i)!==null?f=J_(o,i):p.match(/^Base64Url$/i)!==null?f=K_(o,i):p.match(/^Sequence$/i)!==null?f=W_(this,n,i,o,!!this.isXML,c):p.match(/^Dictionary$/i)!==null?f=Z_(this,n,i,o,!!this.isXML,c):p.match(/^Composite$/i)!==null&&(f=tk(this,n,i,o,!!this.isXML,c)),f}deserialize(n,i,o,l={xml:{}}){const c={xml:{rootName:l.xml.rootName??"",includeRoot:l.xml.includeRoot??!1,xmlCharKey:l.xml.xmlCharKey??vs},ignoreUnknownProperties:l.ignoreUnknownProperties??!1};if(i==null)return this.isXML&&n.type.name==="Sequence"&&!n.xmlIsWrapped&&(i=[]),n.defaultValue!==void 0&&(i=n.defaultValue),i;let f;const p=n.type.name;if(o||(o=n.serializedName),p.match(/^Composite$/i)!==null)f=rk(this,n,i,o,c);else{if(this.isXML){const m=c.xml.xmlCharKey;i[Bt]!==void 0&&i[m]!==void 0&&(i=i[m])}p.match(/^Number$/i)!==null?(f=parseFloat(i),isNaN(f)&&(f=i)):p.match(/^Boolean$/i)!==null?i==="true"?f=!0:i==="false"?f=!1:f=i:p.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)!==null?f=i:p.match(/^(Date|DateTime|DateTimeRfc1123)$/i)!==null?f=new Date(i):p.match(/^UnixTime$/i)!==null?f=F_(i):p.match(/^ByteArray$/i)!==null?f=m0(i):p.match(/^Base64Url$/i)!==null?f=V_(i):p.match(/^Sequence$/i)!==null?f=sk(this,n,i,o,c):p.match(/^Dictionary$/i)!==null&&(f=ik(this,n,i,o,c))}return n.isConstant&&(f=n.defaultValue),f}}function Tf(r={},n=!1){return new H_(r,n)}function q_(r,n){let i=r.length;for(;i-1>=0&&r[i-1]===n;)--i;return r.substr(0,i)}function $_(r){if(!r)return;if(!(r instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");const n=p0(r);return q_(n,"=").replace(/\+/g,"-").replace(/\//g,"_")}function V_(r){if(r){if(r&&typeof r.valueOf()!="string")throw new Error("Please provide an input of type string for converting to Uint8Array");return r=r.replace(/-/g,"+").replace(/_/g,"/"),m0(r)}}function qd(r){const n=[];let i="";if(r){const o=r.split(".");for(const l of o)l.charAt(l.length-1)==="\\"?i+=l.substr(0,l.length-1)+".":(i+=l,n.push(i),i="")}return n}function G_(r){if(r)return typeof r.valueOf()=="string"&&(r=new Date(r)),Math.floor(r.getTime()/1e3)}function F_(r){if(r)return new Date(r*1e3)}function Y_(r,n,i){if(i!=null){if(r.match(/^Number$/i)!==null){if(typeof i!="number")throw new Error(`${n} with value ${i} must be of type number.`)}else if(r.match(/^String$/i)!==null){if(typeof i.valueOf()!="string")throw new Error(`${n} with value "${i}" must be of type string.`)}else if(r.match(/^Uuid$/i)!==null){if(!(typeof i.valueOf()=="string"&&L_(i)))throw new Error(`${n} with value "${i}" must be of type string and a valid uuid.`)}else if(r.match(/^Boolean$/i)!==null){if(typeof i!="boolean")throw new Error(`${n} with value ${i} must be of type boolean.`)}else if(r.match(/^Stream$/i)!==null){const o=typeof i;if(o!=="string"&&typeof i.pipe!="function"&&typeof i.tee!="function"&&!(i instanceof ArrayBuffer)&&!ArrayBuffer.isView(i)&&!((typeof Blob=="function"||typeof Blob=="object")&&i instanceof Blob)&&o!=="function")throw new Error(`${n} must be a string, Blob, ArrayBuffer, ArrayBufferView, ReadableStream, or () => ReadableStream.`)}}return i}function X_(r,n,i){if(!n)throw new Error(`Please provide a set of allowedValues to validate ${r} as an Enum Type.`);if(!n.some(l=>typeof l.valueOf()=="string"?l.toLowerCase()===i.toLowerCase():l===i))throw new Error(`${i} is not a valid value for ${r}. The valid values are: ${JSON.stringify(n)}.`);return i}function J_(r,n){if(n!=null){if(!(n instanceof Uint8Array))throw new Error(`${r} must be of type Uint8Array.`);n=p0(n)}return n}function K_(r,n){if(n!=null){if(!(n instanceof Uint8Array))throw new Error(`${r} must be of type Uint8Array.`);n=$_(n)}return n}function Q_(r,n,i){if(n!=null){if(r.match(/^Date$/i)!==null){if(!(n instanceof Date||typeof n.valueOf()=="string"&&!isNaN(Date.parse(n))))throw new Error(`${i} must be an instanceof Date or a string in ISO8601 format.`);n=n instanceof Date?n.toISOString().substring(0,10):new Date(n).toISOString().substring(0,10)}else if(r.match(/^DateTime$/i)!==null){if(!(n instanceof Date||typeof n.valueOf()=="string"&&!isNaN(Date.parse(n))))throw new Error(`${i} must be an instanceof Date or a string in ISO8601 format.`);n=n instanceof Date?n.toISOString():new Date(n).toISOString()}else if(r.match(/^DateTimeRfc1123$/i)!==null){if(!(n instanceof Date||typeof n.valueOf()=="string"&&!isNaN(Date.parse(n))))throw new Error(`${i} must be an instanceof Date or a string in RFC-1123 format.`);n=n instanceof Date?n.toUTCString():new Date(n).toUTCString()}else if(r.match(/^UnixTime$/i)!==null){if(!(n instanceof Date||typeof n.valueOf()=="string"&&!isNaN(Date.parse(n))))throw new Error(`${i} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);n=G_(n)}else if(r.match(/^TimeSpan$/i)!==null&&!I_(n))throw new Error(`${i} must be a string in ISO 8601 format. Instead was "${n}".`)}return n}function W_(r,n,i,o,l,c){if(!Array.isArray(i))throw new Error(`${o} must be of type Array.`);let f=n.type.element;if(!f||typeof f!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${o}.`);f.type.name==="Composite"&&f.type.className&&(f=r.modelMappers[f.type.className]??f);const p=[];for(let m=0;m<i.length;m++){const g=r.serialize(f,i[m],o,c);if(l&&f.xmlNamespace){const y=f.xmlNamespacePrefix?`xmlns:${f.xmlNamespacePrefix}`:"xmlns";f.type.name==="Composite"?(p[m]={...g},p[m][Bt]={[y]:f.xmlNamespace}):(p[m]={},p[m][c.xml.xmlCharKey]=g,p[m][Bt]={[y]:f.xmlNamespace})}else p[m]=g}return p}function Z_(r,n,i,o,l,c){if(typeof i!="object")throw new Error(`${o} must be of type object.`);const f=n.type.value;if(!f||typeof f!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${o}.`);const p={};for(const m of Object.keys(i)){const g=r.serialize(f,i[m],o,c);p[m]=v0(f,g,l,c)}if(l&&n.xmlNamespace){const m=n.xmlNamespacePrefix?`xmlns:${n.xmlNamespacePrefix}`:"xmlns",g=p;return g[Bt]={[m]:n.xmlNamespace},g}return p}function ek(r,n,i){const o=n.type.additionalProperties;return!o&&n.type.className?g0(r,n,i)?.type.additionalProperties:o}function g0(r,n,i){const o=n.type.className;if(!o)throw new Error(`Class name for model "${i}" is not provided in the mapper "${JSON.stringify(n,void 0,2)}".`);return r.modelMappers[o]}function y0(r,n,i){let o=n.type.modelProperties;if(!o){const l=g0(r,n,i);if(!l)throw new Error(`mapper() cannot be null or undefined for model "${n.type.className}".`);if(o=l?.type.modelProperties,!o)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(l)}" of type "${n.type.className}" for object "${i}".`)}return o}function tk(r,n,i,o,l,c){if(El(r,n)&&(n=b0(r,n,i,"clientName")),i!=null){const f={},p=y0(r,n,o);for(const g of Object.keys(p)){const y=p[g];if(y.readOnly)continue;let E,L=f;if(r.isXML)y.xmlIsWrapped?E=y.xmlName:E=y.xmlElementName||y.xmlName;else{const G=qd(y.serializedName);E=G.pop();for(const O of G){const ee=L[O];ee==null&&(i[g]!==void 0&&i[g]!==null||y.defaultValue!==void 0)&&(L[O]={}),L=L[O]}}if(L!=null){if(l&&n.xmlNamespace){const le=n.xmlNamespacePrefix?`xmlns:${n.xmlNamespacePrefix}`:"xmlns";L[Bt]={...L[Bt],[le]:n.xmlNamespace}}const G=y.serializedName!==""?o+"."+y.serializedName:o;let O=i[g];const ee=El(r,n);ee&&ee.clientName===g&&O==null&&(O=n.serializedName);const Y=r.serialize(y,O,G,c);if(Y!==void 0&&E!==void 0&&E!==null){const le=v0(y,Y,l,c);l&&y.xmlIsAttribute?(L[Bt]=L[Bt]||{},L[Bt][E]=Y):l&&y.xmlIsWrapped?L[E]={[y.xmlElementName]:le}:L[E]=le}}}const m=ek(r,n,o);if(m){const g=Object.keys(p);for(const y in i)g.every(L=>L!==y)&&(f[y]=r.serialize(m,i[y],o+'["'+y+'"]',c))}return f}return i}function v0(r,n,i,o){if(!i||!r.xmlNamespace)return n;const c={[r.xmlNamespacePrefix?`xmlns:${r.xmlNamespacePrefix}`:"xmlns"]:r.xmlNamespace};if(["Composite"].includes(r.type.name)){if(n[Bt])return n;{const p={...n};return p[Bt]=c,p}}const f={};return f[o.xml.xmlCharKey]=n,f[Bt]=c,f}function nk(r,n){return[Bt,n.xml.xmlCharKey].includes(r)}function rk(r,n,i,o,l){const c=l.xml.xmlCharKey??vs;El(r,n)&&(n=b0(r,n,i,"serializedName"));const f=y0(r,n,o);let p={};const m=[];for(const y of Object.keys(f)){const E=f[y],L=qd(f[y].serializedName);m.push(L[0]);const{serializedName:G,xmlName:O,xmlElementName:ee}=E;let Y=o;G!==""&&G!==void 0&&(Y=o+"."+G);const le=E.headerCollectionPrefix;if(le){const fe={};for(const me of Object.keys(i))me.startsWith(le)&&(fe[me.substring(le.length)]=r.deserialize(E.type.value,i[me],Y,l)),m.push(me);p[y]=fe}else if(r.isXML)if(E.xmlIsAttribute&&i[Bt])p[y]=r.deserialize(E,i[Bt][O],Y,l);else if(E.xmlIsMsText)i[c]!==void 0?p[y]=i[c]:typeof i=="string"&&(p[y]=i);else{const fe=ee||O||G;if(E.xmlIsWrapped){const Q=i[O]?.[ee]??[];p[y]=r.deserialize(E,Q,Y,l),m.push(O)}else{const me=i[fe];p[y]=r.deserialize(E,me,Y,l),m.push(fe)}}else{let fe,me=i,Q=0;for(const ue of L){if(!me)break;Q++,me=me[ue]}me===null&&Q<L.length&&(me=void 0),fe=me;const re=n.type.polymorphicDiscriminator;re&&y===re.clientName&&fe==null&&(fe=n.serializedName);let ve;if(Array.isArray(i[y])&&f[y].serializedName===""){fe=i[y];const ue=r.deserialize(E,fe,Y,l);for(const[ke,Ce]of Object.entries(p))Object.prototype.hasOwnProperty.call(ue,ke)||(ue[ke]=Ce);p=ue}else(fe!==void 0||E.defaultValue!==void 0)&&(ve=r.deserialize(E,fe,Y,l),p[y]=ve)}}const g=n.type.additionalProperties;if(g){const y=E=>{for(const L in f)if(qd(f[L].serializedName)[0]===E)return!1;return!0};for(const E in i)y(E)&&(p[E]=r.deserialize(g,i[E],o+'["'+E+'"]',l))}else if(i&&!l.ignoreUnknownProperties)for(const y of Object.keys(i))p[y]===void 0&&!m.includes(y)&&!nk(y,l)&&(p[y]=i[y]);return p}function ik(r,n,i,o,l){const c=n.type.value;if(!c||typeof c!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${o}`);if(i){const f={};for(const p of Object.keys(i))f[p]=r.deserialize(c,i[p],o,l);return f}return i}function sk(r,n,i,o,l){let c=n.type.element;if(!c||typeof c!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${o}`);if(i){Array.isArray(i)||(i=[i]),c.type.name==="Composite"&&c.type.className&&(c=r.modelMappers[c.type.className]??c);const f=[];for(let p=0;p<i.length;p++)f[p]=r.deserialize(c,i[p],`${o}[${p}]`,l);return f}return i}function ok(r,n,i){const o=[i];for(;o.length;){const l=o.shift(),c=n===l?n:l+"."+n;if(Object.prototype.hasOwnProperty.call(r,c))return r[c];for(const[f,p]of Object.entries(r))f.startsWith(l+".")&&p.type.uberParent===l&&p.type.className&&o.push(p.type.className)}}function b0(r,n,i,o){const l=El(r,n);if(l){let c=l[o];if(c){o==="serializedName"&&(c=c.replace(/\\/gi,""));const f=i[c],p=n.type.uberParent??n.type.className;if(typeof f=="string"&&p){const m=ok(r.modelMappers.discriminators,f,p);m&&(n=m)}}}return n}function El(r,n){return n.type.polymorphicDiscriminator||Ry(r,n.type.uberParent)||Ry(r,n.type.className)}function Ry(r,n){return n&&r.modelMappers[n]&&r.modelMappers[n].type.polymorphicDiscriminator}const Ti={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};class Cf extends Error{constructor(n){super(n),this.name="AbortError"}}function ak(...r){if(r.length>0){const n=String(r[0]);n.includes(":error")?console.error(...r):n.includes(":warning")?console.warn(...r):n.includes(":info")?console.info(...r):n.includes(":verbose")?console.debug(...r):console.debug(...r)}}var Ey={};const _y=typeof process<"u"&&Ey&&Ey.DEBUG||void 0;let S0,$d=[],Vd=[];const _l=[];_y&&xf(_y);const hs=Object.assign(r=>w0(r),{enable:xf,enabled:Rf,disable:lk,log:ak});function xf(r){S0=r,$d=[],Vd=[];const n=r.split(",").map(i=>i.trim());for(const i of n)i.startsWith("-")?Vd.push(i.substring(1)):$d.push(i);for(const i of _l)i.enabled=Rf(i.namespace)}function Rf(r){if(r.endsWith("*"))return!0;for(const n of Vd)if(ky(r,n))return!1;for(const n of $d)if(ky(r,n))return!0;return!1}function ky(r,n){if(n.indexOf("*")===-1)return r===n;let i=n;if(n.indexOf("**")!==-1){const L=[];let G="";for(const O of n)O==="*"&&G==="*"||(G=O,L.push(O));i=L.join("")}let o=0,l=0;const c=i.length,f=r.length;let p=-1,m=-1;for(;o<f&&l<c;)if(i[l]==="*"){if(p=l,l++,l===c)return!0;for(;r[o]!==i[l];)if(o++,o===f)return!1;m=o,o++,l++;continue}else if(i[l]===r[o])l++,o++;else if(p>=0){if(l=p+1,o=m+1,o===f)return!1;for(;r[o]!==i[l];)if(o++,o===f)return!1;m=o,o++,l++;continue}else return!1;const g=o===r.length,y=l===i.length,E=l===i.length-1&&i[l]==="*";return g&&(y||E)}function lk(){const r=S0||"";return xf(""),r}function w0(r){const n=Object.assign(i,{enabled:Rf(r),destroy:ck,log:hs.log,namespace:r,extend:uk});function i(...o){n.enabled&&(o.length>0&&(o[0]=`${r} ${o[0]}`),n.log(...o))}return _l.push(n),n}function ck(){const r=_l.indexOf(this);return r>=0?(_l.splice(r,1),!0):!1}function uk(r){const n=w0(`${this.namespace}:${r}`);return n.log=this.log,n}var Ay={};const Gd=["verbose","info","warning","error"],Ny={verbose:400,info:300,warning:200,error:100};function jy(r,n){n.log=(...i)=>{r.log(...i)}}function Oy(r){return Gd.includes(r)}function T0(r){const n=new Set,i=typeof process<"u"&&Ay&&Ay[r.logLevelEnvVarName]||void 0;let o;const l=hs(r.namespace);l.log=(...y)=>{hs.log(...y)};function c(y){if(y&&!Oy(y))throw new Error(`Unknown log level '${y}'. Acceptable values: ${Gd.join(",")}`);o=y;const E=[];for(const L of n)f(L)&&E.push(L.namespace);hs.enable(E.join(","))}i&&(Oy(i)?c(i):console.error(`${r.logLevelEnvVarName} set to unknown log level '${i}'; logging is not enabled. Acceptable values: ${Gd.join(", ")}.`));function f(y){return!!(o&&Ny[y.level]<=Ny[o])}function p(y,E){const L=Object.assign(y.extend(E),{level:E});if(jy(y,L),f(L)){const G=hs.disable();hs.enable(G+","+L.namespace)}return n.add(L),L}function m(){return o}function g(y){const E=l.extend(y);return jy(l,E),{error:p(E,"error"),warning:p(E,"warning"),info:p(E,"info"),verbose:p(E,"verbose")}}return{setLogLevel:c,getLogLevel:m,createClientLogger:g,logger:l}}const dk=T0({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"});function C0(r){return dk.createClientLogger(r)}function ll(r){return r.toLowerCase()}function*fk(r){for(const n of r.values())yield[n.name,n.value]}class hk{_headersMap;constructor(n){if(this._headersMap=new Map,n)for(const i of Object.keys(n))this.set(i,n[i])}set(n,i){this._headersMap.set(ll(n),{name:n,value:String(i).trim()})}get(n){return this._headersMap.get(ll(n))?.value}has(n){return this._headersMap.has(ll(n))}delete(n){this._headersMap.delete(ll(n))}toJSON(n={}){const i={};if(n.preserveCase)for(const o of this._headersMap.values())i[o.name]=o.value;else for(const[o,l]of this._headersMap)i[o]=l.value;return i}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return fk(this._headersMap)}}function Ri(r){return new hk(r)}class pk{url;method;headers;timeout;withCredentials;body;multipartBody;formData;streamResponseStatusCodes;enableBrowserStreams;proxySettings;disableKeepAlive;abortSignal;requestId;allowInsecureConnection;onUploadProgress;onDownloadProgress;requestOverrides;authSchemes;constructor(n){this.url=n.url,this.body=n.body,this.headers=n.headers??Ri(),this.method=n.method??"GET",this.timeout=n.timeout??0,this.multipartBody=n.multipartBody,this.formData=n.formData,this.disableKeepAlive=n.disableKeepAlive??!1,this.proxySettings=n.proxySettings,this.streamResponseStatusCodes=n.streamResponseStatusCodes,this.withCredentials=n.withCredentials??!1,this.abortSignal=n.abortSignal,this.onUploadProgress=n.onUploadProgress,this.onDownloadProgress=n.onDownloadProgress,this.requestId=n.requestId||bf(),this.allowInsecureConnection=n.allowInsecureConnection??!1,this.enableBrowserStreams=n.enableBrowserStreams??!1,this.requestOverrides=n.requestOverrides,this.authSchemes=n.authSchemes}}function x0(r){return new pk(r)}const My=new Set(["Deserialize","Serialize","Retry","Sign"]);class kl{_policies=[];_orderedPolicies;constructor(n){this._policies=n?.slice(0)??[],this._orderedPolicies=void 0}addPolicy(n,i={}){if(i.phase&&i.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(i.phase&&!My.has(i.phase))throw new Error(`Invalid phase name: ${i.phase}`);if(i.afterPhase&&!My.has(i.afterPhase))throw new Error(`Invalid afterPhase name: ${i.afterPhase}`);this._policies.push({policy:n,options:i}),this._orderedPolicies=void 0}removePolicy(n){const i=[];return this._policies=this._policies.filter(o=>n.name&&o.policy.name===n.name||n.phase&&o.options.phase===n.phase?(i.push(o.policy),!1):!0),this._orderedPolicies=void 0,i}sendRequest(n,i){return this.getOrderedPolicies().reduceRight((c,f)=>p=>f.sendRequest(p,c),c=>n.sendRequest(c))(i)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new kl(this._policies)}static create(){return new kl}orderPolicies(){const n=[],i=new Map;function o(O){return{name:O,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}const l=o("Serialize"),c=o("None"),f=o("Deserialize"),p=o("Retry"),m=o("Sign"),g=[l,c,f,p,m];function y(O){return O==="Retry"?p:O==="Serialize"?l:O==="Deserialize"?f:O==="Sign"?m:c}for(const O of this._policies){const ee=O.policy,Y=O.options,le=ee.name;if(i.has(le))throw new Error("Duplicate policy names not allowed in pipeline");const fe={policy:ee,dependsOn:new Set,dependants:new Set};Y.afterPhase&&(fe.afterPhase=y(Y.afterPhase),fe.afterPhase.hasAfterPolicies=!0),i.set(le,fe),y(Y.phase).policies.add(fe)}for(const O of this._policies){const{policy:ee,options:Y}=O,le=ee.name,fe=i.get(le);if(!fe)throw new Error(`Missing node for policy ${le}`);if(Y.afterPolicies)for(const me of Y.afterPolicies){const Q=i.get(me);Q&&(fe.dependsOn.add(Q),Q.dependants.add(fe))}if(Y.beforePolicies)for(const me of Y.beforePolicies){const Q=i.get(me);Q&&(Q.dependsOn.add(fe),fe.dependants.add(Q))}}function E(O){O.hasRun=!0;for(const ee of O.policies)if(!(ee.afterPhase&&(!ee.afterPhase.hasRun||ee.afterPhase.policies.size))&&ee.dependsOn.size===0){n.push(ee.policy);for(const Y of ee.dependants)Y.dependsOn.delete(ee);i.delete(ee.policy.name),O.policies.delete(ee)}}function L(){for(const O of g){if(E(O),O.policies.size>0&&O!==c){c.hasRun||E(c);return}O.hasAfterPolicies&&E(c)}}let G=0;for(;i.size>0;){G++;const O=n.length;if(L(),n.length<=O&&G>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return n}}function R0(){return kl.create()}const mk=Symbol(),gk=new Sf;let Ei=class E0 extends Error{static REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";static PARSE_ERROR="PARSE_ERROR";code;statusCode;request;response;details;constructor(n,i={}){super(n),this.name="RestError",this.code=i.code,this.statusCode=i.statusCode,Object.defineProperty(this,"request",{value:i.request,enumerable:!1}),Object.defineProperty(this,"response",{value:i.response,enumerable:!1});const o=this.request?.agent?{maxFreeSockets:this.request.agent.maxFreeSockets,maxSockets:this.request.agent.maxSockets}:void 0;Object.defineProperty(this,mk,{value:()=>`RestError: ${this.message} 
 ${gk.sanitize({...this,request:{...this.request,agent:o},response:this.response})}`,enumerable:!1}),Object.setPrototypeOf(this,E0.prototype)}};function _0(r){return r instanceof Ei?!0:vf(r)&&r.name==="RestError"}function k0(r){return!!(r&&typeof r.pipe=="function")}function ql(r){return!!(r&&typeof r.getReader=="function"&&typeof r.tee=="function")}function A0(r){return r!==void 0&&(r instanceof Uint8Array||N0(r)||typeof r=="function"||r instanceof Blob)}function N0(r){return k0(r)||ql(r)}function yk(r){return typeof r.stream=="function"}function vk(r){if(r.buffer instanceof ArrayBuffer&&r.byteOffset===0&&r.byteLength===r.buffer.byteLength)return r.buffer;const n=new ArrayBuffer(r.byteLength),i=new Uint8Array(n),o=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);return i.set(o),i.buffer}function bk(r){return(typeof Blob=="function"||typeof Blob=="object")&&r instanceof Blob}class Sk{async sendRequest(n){if(new URL(n.url).protocol!=="https:"&&!n.allowInsecureConnection)throw new Error(`Cannot connect to ${n.url} while allowInsecureConnection is false.`);if(n.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");try{return await wk(n)}catch(l){throw xk(l,n)}}}async function wk(r){const{abortController:n,abortControllerCleanup:i}=Ck(r);try{const o=Rk(r.headers),{streaming:l,body:c}=_k(r),f={body:c,method:r.method,headers:o,signal:n.signal,..."credentials"in Request.prototype?{credentials:r.withCredentials?"include":"same-origin"}:{},..."cache"in Request.prototype?{cache:"no-store"}:{}};l&&(f.duplex="half");const p=await fetch(r.url,{...f,...r.requestOverrides});return bk(r.body)&&r.onUploadProgress&&r.onUploadProgress({loadedBytes:r.body.size}),Tk(p,r,i)}catch(o){throw i?.(),o}}async function Tk(r,n,i){const o=Ek(r),l={request:n,headers:o,status:r.status},c=ql(r.body)?j0(r.body,{onProgress:n.onDownloadProgress,onEnd:i}):r.body;if(n.streamResponseStatusCodes?.has(Number.POSITIVE_INFINITY)||n.streamResponseStatusCodes?.has(l.status))if(n.enableBrowserStreams)l.browserStreamBody=c??void 0;else{const f=new Response(c);l.blobBody=f.blob(),i?.()}else{const f=new Response(c);l.bodyAsText=await f.text(),i?.()}return l}function Ck(r){const n=new AbortController;let i,o;if(r.abortSignal){if(r.abortSignal.aborted)throw new Cf("The operation was aborted. Request has already been canceled.");o=l=>{l.type==="abort"&&n.abort()},r.abortSignal.addEventListener("abort",o),i=()=>{o&&r.abortSignal?.removeEventListener("abort",o)}}return r.timeout>0&&setTimeout(()=>{n.abort()},r.timeout),{abortController:n,abortControllerCleanup:i}}function xk(r,n){return r&&r?.name==="AbortError"?r:new Ei(`Error sending request: ${r.message}`,{code:r?.code??Ei.REQUEST_SEND_ERROR,request:n})}function Rk(r){const n=new Headers;for(const[i,o]of r)n.append(i,o);return n}function Ek(r){const n=Ri();for(const[i,o]of r.headers)n.set(i,o);return n}function _k(r){const n=typeof r.body=="function"?r.body():r.body;if(k0(n))throw new Error("Node streams are not supported in browser environment.");return ql(n)?{streaming:!0,body:j0(n,{onProgress:r.onUploadProgress})}:typeof n=="object"&&n&&"buffer"in n?{streaming:!1,body:vk(n)}:n===void 0?{streaming:!1}:{streaming:!1,body:n}}function j0(r,n={}){let i=0;const{onProgress:o,onEnd:l}=n;if(Ak(r))return r.pipeThrough(new TransformStream({transform(c,f){if(c===null){f.terminate();return}f.enqueue(c),i+=c.length,o&&o({loadedBytes:i})},flush(){l?.()}}));{const c=r.getReader();return new ReadableStream({async pull(f){const{done:p,value:m}=await c.read();if(p||!m){l?.(),f.close(),c.releaseLock();return}i+=m?.length??0,f.enqueue(m),o&&o({loadedBytes:i})},cancel(f){return l?.(),c.cancel(f)}})}}function kk(){return new Sk}function Ak(r){return r.pipeThrough!==void 0&&self.TransformStream!==void 0}function O0(){return kk()}const M0=C0("ts-http-runtime"),U0="logPolicy";function D0(r={}){const n=r.logger??M0.info,i=new Sf({additionalAllowedHeaderNames:r.additionalAllowedHeaderNames,additionalAllowedQueryParameters:r.additionalAllowedQueryParameters});return{name:U0,async sendRequest(o,l){if(!n.enabled)return l(o);n(`Request: ${i.sanitize(o)}`);const c=await l(o);return n(`Response status code: ${c.status}`),n(`Headers: ${i.sanitize(c.headers)}`),c}}}const P0="redirectPolicy",Uy=["GET","HEAD"];function I0(r={}){const{maxRetries:n=20}=r;return{name:P0,async sendRequest(i,o){const l=await o(i);return z0(o,l,n)}}}async function z0(r,n,i,o=0){const{request:l,status:c,headers:f}=n,p=f.get("location");if(p&&(c===300||c===301&&Uy.includes(l.method)||c===302&&Uy.includes(l.method)||c===303&&l.method==="POST"||c===307)&&o<i){const m=new URL(p,l.url);l.url=m.toString(),c===303&&(l.method="GET",l.headers.delete("Content-Length"),delete l.body),l.headers.delete("Authorization");const g=await r(l);return z0(r,g,i,o+1)}return n}function Nk(){return"x-ms-useragent"}function jk(r){const n=[{name:"Firefox",regex:/Firefox\/([\d.]+)/},{name:"Safari",regex:/Version\/([\d.]+).*Safari/}];for(const i of n){const o=r.match(i.regex);if(o)return{brand:i.name,version:o[1]}}}function Ok(r){const n=["Google Chrome","Microsoft Edge","Opera","Brave","Chromium"];for(const i of n){const o=r.find(l=>l.brand===i);if(o)return o}}async function Mk(r){const n=globalThis.navigator;let i="unknown";if(n?.userAgentData){const o=await n.userAgentData.getHighEntropyValues(["architecture","platformVersion"]);i=`${o.platform} ${o.platformVersion}; ${o.architecture}`;const l=Ok(n.userAgentData.brands);l&&r.set(l.brand,`${l.version} (${i})`)}else if(n?.platform){i=n.platform;const o=jk(n.userAgent);o&&r.set(o.brand,`${o.version} (${i})`)}else typeof globalThis.EdgeRuntime=="string"&&r.set("EdgeRuntime",`${globalThis.EdgeRuntime} (${i})`)}const Uk="0.3.2",bs=3;function Dk(r){const n=[];for(const[i,o]of r){const l=o?`${i}/${o}`:i;n.push(l)}return n.join(" ")}function Pk(){return Nk()}async function Ik(r){const n=new Map;n.set("ts-http-runtime",Uk),await Mk(n);const i=Dk(n);return r?`${r} ${i}`:i}const Dy=Pk(),zk="userAgentPolicy";function Lk(r={}){const n=Ik(r.userAgentPrefix);return{name:zk,async sendRequest(i,o){return i.headers.has(Dy)||i.headers.set(Dy,await n),o(i)}}}const Bk="decompressResponsePolicy";function L0(){throw new Error("decompressResponsePolicy is not supported in browser environment")}const Hk="The operation was aborted.";function qk(r,n,i){return new Promise((o,l)=>{let c,f;const p=()=>l(new Cf(i?.abortErrorMsg?i?.abortErrorMsg:Hk)),m=()=>{i?.abortSignal&&f&&i.abortSignal.removeEventListener("abort",f)};if(f=()=>(c&&clearTimeout(c),m(),p()),i?.abortSignal&&i.abortSignal.aborted)return p();c=setTimeout(()=>{m(),o(n)},r),i?.abortSignal&&i.abortSignal.addEventListener("abort",f)})}function $k(r,n){const i=r.headers.get(n);if(!i)return;const o=Number(i);if(!Number.isNaN(o))return o}const Fd="Retry-After",Vk=["retry-after-ms","x-ms-retry-after-ms",Fd];function B0(r){if(r&&[429,503].includes(r.status))try{for(const l of Vk){const c=$k(r,l);if(c===0||c)return c*(l===Fd?1e3:1)}const n=r.headers.get(Fd);if(!n)return;const o=Date.parse(n)-Date.now();return Number.isFinite(o)?Math.max(0,o):void 0}catch{return}}function Gk(r){return Number.isFinite(B0(r))}function H0(){return{name:"throttlingRetryStrategy",retry({response:r}){const n=B0(r);return Number.isFinite(n)?{retryAfterInMs:n}:{skipStrategy:!0}}}}const Fk=1e3,Yk=1e3*64;function Ef(r={}){const n=r.retryDelayInMs??Fk,i=r.maxRetryDelayInMs??Yk;return{name:"exponentialRetryStrategy",retry({retryCount:o,response:l,responseError:c}){const f=Jk(c),p=f&&r.ignoreSystemErrors,m=Xk(l),g=m&&r.ignoreHttpStatusCodes;return l&&(Gk(l)||!m)||g||p?{skipStrategy:!0}:c&&!f&&!m?{errorToThrow:c}:r0(o,{retryDelayInMs:n,maxRetryDelayInMs:i})}}}function Xk(r){return!!(r&&r.status!==void 0&&(r.status>=500||r.status===408)&&r.status!==501&&r.status!==505)}function Jk(r){return r?r.code==="ETIMEDOUT"||r.code==="ESOCKETTIMEDOUT"||r.code==="ECONNREFUSED"||r.code==="ECONNRESET"||r.code==="ENOENT"||r.code==="ENOTFOUND":!1}const Kk=C0("ts-http-runtime retryPolicy"),Qk="retryPolicy";function qo(r,n={maxRetries:bs}){const i=n.logger||Kk;return{name:Qk,async sendRequest(o,l){let c,f,p=-1;e:for(;;){p+=1,c=void 0,f=void 0;try{i.info(`Retry ${p}: Attempting to send request`,o.requestId),c=await l(o),i.info(`Retry ${p}: Received a response from request`,o.requestId)}catch(m){if(i.error(`Retry ${p}: Received an error from request`,o.requestId),f=m,!m||f.name!=="RestError")throw m;c=f.response}if(o.abortSignal?.aborted)throw i.error(`Retry ${p}: Request aborted.`),new Cf;if(p>=(n.maxRetries??bs)){if(i.info(`Retry ${p}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),f)throw f;if(c)return c;throw new Error("Maximum retries reached with no response or error to throw")}i.info(`Retry ${p}: Processing ${r.length} retry strategies.`);t:for(const m of r){const g=m.logger||i;g.info(`Retry ${p}: Processing retry strategy ${m.name}.`);const y=m.retry({retryCount:p,response:c,responseError:f});if(y.skipStrategy){g.info(`Retry ${p}: Skipped.`);continue t}const{errorToThrow:E,retryAfterInMs:L,redirectTo:G}=y;if(E)throw g.error(`Retry ${p}: Retry strategy ${m.name} throws error:`,E),E;if(L||L===0){g.info(`Retry ${p}: Retry strategy ${m.name} retries after ${L}`),await qk(L,void 0,{abortSignal:o.abortSignal});continue e}if(G){g.info(`Retry ${p}: Retry strategy ${m.name} redirects to ${G}`),o.url=G;continue e}}if(f)throw i.info("None of the retry strategies could work with the received error. Throwing it."),f;if(c)return i.info("None of the retry strategies could work with the received response. Returning it."),c}}}}const Wk="defaultRetryPolicy";function q0(r={}){return{name:Wk,sendRequest:qo([H0(),Ef(r)],{maxRetries:r.maxRetries??bs}).sendRequest}}const $0="formDataPolicy";function Zk(r){const n={};for(const[i,o]of r.entries())n[i]??=[],n[i].push(o);return n}function V0(){return{name:$0,async sendRequest(r,n){if(Qr&&typeof FormData<"u"&&r.body instanceof FormData&&(r.formData=Zk(r.body),r.body=void 0),r.formData){const i=r.headers.get("Content-Type");i&&i.indexOf("application/x-www-form-urlencoded")!==-1?r.body=eA(r.formData):await tA(r.formData,r),r.formData=void 0}return n(r)}}}function eA(r){const n=new URLSearchParams;for(const[i,o]of Object.entries(r))if(Array.isArray(o))for(const l of o)n.append(i,l.toString());else n.append(i,o.toString());return n.toString()}async function tA(r,n){const i=n.headers.get("Content-Type");if(i&&!i.startsWith("multipart/form-data"))return;n.headers.set("Content-Type",i??"multipart/form-data");const o=[];for(const[l,c]of Object.entries(r))for(const f of Array.isArray(c)?c:[c])if(typeof f=="string")o.push({headers:Ri({"Content-Disposition":`form-data; name="${l}"`}),body:mn(f,"utf-8")});else{if(f==null||typeof f!="object")throw new Error(`Unexpected value for key ${l}: ${f}. Value should be serialized to string first.`);{const p=f.name||"blob",m=Ri();m.set("Content-Disposition",`form-data; name="${l}"; filename="${p}"`),m.set("Content-Type",f.type||"application/octet-stream"),o.push({headers:m,body:f})}}n.multipartBody={parts:o}}const nA="proxyPolicy",G0="proxyPolicy is not supported in browser environment";function rA(){throw new Error(G0)}function F0(){throw new Error(G0)}const Y0="agentPolicy";function X0(r){return{name:Y0,sendRequest:async(n,i)=>(n.agent||(n.agent=r),i(n))}}const J0="tlsPolicy";function K0(r){return{name:J0,sendRequest:async(n,i)=>(n.tlsSettings||(n.tlsSettings=r),i(n))}}function iA(r){return new Response(r).blob()}async function sA(r){if(r instanceof Blob||r instanceof Uint8Array)return r;if(ql(r))return iA(r);throw new Error("Unsupported source type. Only Blob, Uint8Array, and ReadableStream are supported in browser.")}function oA(r){return"resize"in r.buffer?r:r.map(n=>n)}async function aA(r){const n=[];for(const i of r){const o=await sA(typeof i=="function"?i():i);o instanceof Blob?n.push(o):n.push(new Blob([oA(o)]))}return new Blob(n)}function lA(){return`----AzSDKFormBoundary${bf()}`}function cA(r){let n="";for(const[i,o]of r)n+=`${i}: ${o}\r
`;return n}function uA(r){return r instanceof Uint8Array?r.byteLength:yk(r)?r.size===-1?void 0:r.size:void 0}function dA(r){let n=0;for(const i of r){const o=uA(i);if(o===void 0)return;n+=o}return n}async function fA(r,n,i){const o=[mn(`--${i}`,"utf-8"),...n.flatMap(c=>[mn(`\r
`,"utf-8"),mn(cA(c.headers),"utf-8"),mn(`\r
`,"utf-8"),c.body,mn(`\r
--${i}`,"utf-8")]),mn(`--\r
\r
`,"utf-8")],l=dA(o);l&&r.headers.set("Content-Length",l),r.body=await aA(o)}const _f="multipartPolicy",hA=70,pA=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function mA(r){if(r.length>hA)throw new Error(`Multipart boundary "${r}" exceeds maximum length of 70 characters`);if(Array.from(r).some(n=>!pA.has(n)))throw new Error(`Multipart boundary "${r}" contains invalid characters`)}function Q0(){return{name:_f,async sendRequest(r,n){if(!r.multipartBody)return n(r);if(r.body)throw new Error("multipartBody and regular body cannot be set at the same time");let i=r.multipartBody.boundary;const o=r.headers.get("Content-Type")??"multipart/mixed",l=o.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!l)throw new Error(`Got multipart request body, but content-type header was not multipart: ${o}`);const[,c,f]=l;if(f&&i&&f!==i)throw new Error(`Multipart boundary was specified as ${f} in the header, but got ${i} in the request body`);return i??=f,i?mA(i):i=lA(),r.headers.set("Content-Type",`${c}; boundary=${i}`),await fA(r,r.multipartBody.parts,i),r.multipartBody=void 0,n(r)}}}function gA(r){const n=R0();return Qr&&(r.agent&&n.addPolicy(X0(r.agent)),r.tlsOptions&&n.addPolicy(K0(r.tlsOptions)),n.addPolicy(F0(r.proxyOptions)),n.addPolicy(L0())),n.addPolicy(V0(),{beforePolicies:[_f]}),n.addPolicy(Lk(r.userAgentOptions)),n.addPolicy(Q0(),{afterPhase:"Deserialize"}),n.addPolicy(q0(r.retryOptions),{phase:"Retry"}),Qr&&n.addPolicy(I0(r.redirectOptions),{afterPhase:"Retry"}),n.addPolicy(D0(r.loggingOptions),{afterPhase:"Sign"}),n}const yA="ApiVersionPolicy";function vA(r){return{name:yA,sendRequest:(n,i)=>{const o=new URL(n.url);return!o.searchParams.get("api-version")&&r.apiVersion&&(n.url=`${n.url}${Array.from(o.searchParams.keys()).length>0?"&":"?"}api-version=${r.apiVersion}`),i(n)}}}function bA(r){return"getOAuth2Token"in r}function SA(r){return"getBearerToken"in r}function wA(r){return"username"in r&&"password"in r}function TA(r){return"key"in r}let Py=!1;function CA(r,n){if(n.allowInsecureConnection&&r.allowInsecureConnection){const i=new URL(r.url);if(i.hostname==="localhost"||i.hostname==="127.0.0.1")return!0}return!1}function xA(){const r="Sending token over insecure transport. Assume any token issued is compromised.";M0.warning(r),typeof process?.emitWarning=="function"&&!Py&&(Py=!0,process.emitWarning(r))}function $l(r,n){if(!r.url.toLowerCase().startsWith("https://"))if(CA(r,n))xA();else throw new Error("Authentication is not permitted for non-TLS protected (non-https) URLs when allowInsecureConnection is false.")}const RA="apiKeyAuthenticationPolicy";function EA(r){return{name:RA,async sendRequest(n,i){$l(n,r);const o=(n.authSchemes??r.authSchemes)?.find(l=>l.kind==="apiKey");if(!o)return i(n);if(o.apiKeyLocation!=="header")throw new Error(`Unsupported API key location: ${o.apiKeyLocation}`);return n.headers.set(o.name,r.credential.key),i(n)}}}const _A="bearerAuthenticationPolicy";function kA(r){return{name:_A,async sendRequest(n,i){if($l(n,r),!(n.authSchemes??r.authSchemes)?.find(p=>p.kind==="http"&&p.scheme==="basic"))return i(n);const{username:l,password:c}=r.credential,f=Hl(mn(`${l}:${c}`,"utf-8"),"base64");return n.headers.set("Authorization",`Basic ${f}`),i(n)}}}const AA="bearerAuthenticationPolicy";function NA(r){return{name:AA,async sendRequest(n,i){if($l(n,r),!(n.authSchemes??r.authSchemes)?.find(c=>c.kind==="http"&&c.scheme==="bearer"))return i(n);const l=await r.credential.getBearerToken({abortSignal:n.abortSignal});return n.headers.set("Authorization",`Bearer ${l}`),i(n)}}}const jA="oauth2AuthenticationPolicy";function OA(r){return{name:jA,async sendRequest(n,i){$l(n,r);const o=(n.authSchemes??r.authSchemes)?.find(c=>c.kind==="oauth2");if(!o)return i(n);const l=await r.credential.getOAuth2Token(o.flows,{abortSignal:n.abortSignal});return n.headers.set("Authorization",`Bearer ${l}`),i(n)}}}let Ad;function MA(r={}){const n=gA(r);n.addPolicy(vA(r));const{credential:i,authSchemes:o,allowInsecureConnection:l}=r;return i&&(TA(i)?n.addPolicy(EA({authSchemes:o,credential:i,allowInsecureConnection:l})):wA(i)?n.addPolicy(kA({authSchemes:o,credential:i,allowInsecureConnection:l})):SA(i)?n.addPolicy(NA({authSchemes:o,credential:i,allowInsecureConnection:l})):bA(i)&&n.addPolicy(OA({authSchemes:o,credential:i,allowInsecureConnection:l}))),n}function UA(){return Ad||(Ad=O0()),Ad}function W0(r,n){if(r.headers){const i=Object.keys(r.headers).find(o=>o.toLowerCase()===n.toLowerCase());if(i)return r.headers[i]}}function DA(r){const n=W0(r,"content-type");if(n)return n;if(r.contentType===null)return;if(r.contentType)return r.contentType;const{body:i}=r;if(i!=null)return typeof i=="string"||typeof i=="number"||typeof i=="boolean"?"text/plain; charset=UTF-8":i instanceof Blob?i.type||"application/octet-stream":A0(i)?"application/octet-stream":"application/json"}function Iy(r){return JSON.stringify(r)}function PA(r){const n=W0(r,"content-disposition");if(n)return n;if(r.dispositionType===void 0&&r.name===void 0&&r.filename===void 0)return;let o=r.dispositionType??"form-data";r.name&&(o+=`; name=${Iy(r.name)}`);let l;if(r.filename)l=r.filename;else if(typeof File<"u"&&r.body instanceof File){const c=r.body.name;c!==""&&(l=c)}return l&&(o+=`; filename=${Iy(l)}`),o}function IA(r,n){if(r===void 0)return new Uint8Array([]);if(A0(r))return r;if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return mn(String(r),"utf-8");if(n&&/application\/(.+\+)?json(;.+)?/i.test(String(n)))return mn(JSON.stringify(r),"utf-8");throw new Ei(`Unsupported body/content-type combination: ${r}, ${n}`)}function zA(r){const n=DA(r),i=PA(r),o=Ri(r.headers??{});n&&o.set("content-type",n),i&&o.set("content-disposition",i);const l=IA(r.body,n);return{headers:o,body:l}}function LA(r){return{parts:r.map(zA)}}async function Nd(r,n,i,o={},l){const c=l??UA(),f=qA(r,n,o);try{const p=await i.sendRequest(c,f),m=p.headers.toJSON(),g=p.readableStreamBody??p.browserStreamBody,y=o.responseAsStream||g!==void 0?void 0:VA(p),E=g??y;return o?.onResponse&&o.onResponse({...p,request:f,rawHeaders:m,parsedBody:y}),{request:f,headers:m,status:`${p.status}`,body:E}}catch(p){if(_0(p)&&p.response&&o.onResponse){const{response:m}=p,g=m.headers.toJSON();o?.onResponse({...m,request:f,rawHeaders:g},p)}throw p}}function BA(r={}){return r.contentType??r.headers?.["content-type"]??HA(r.body)}function HA(r){if(ArrayBuffer.isView(r))return"application/octet-stream";if(typeof r=="string")try{return JSON.parse(r),"application/json"}catch{return}return"application/json"}function qA(r,n,i={}){const o=BA(i),{body:l,multipartBody:c}=$A(i.body,o),f=l!==void 0||c!==void 0,p=Ri({...i.headers?i.headers:{},accept:i.accept??i.headers?.accept??"application/json",...f&&o&&{"content-type":o}});return x0({url:n,method:r,body:l,multipartBody:c,headers:p,allowInsecureConnection:i.allowInsecureConnection,abortSignal:i.abortSignal,onUploadProgress:i.onUploadProgress,onDownloadProgress:i.onDownloadProgress,timeout:i.timeout,enableBrowserStreams:!0,streamResponseStatusCodes:i.responseAsStream?new Set([Number.POSITIVE_INFINITY]):void 0})}function $A(r,n=""){if(r===void 0)return{body:void 0};if(typeof FormData<"u"&&r instanceof FormData)return{body:r};if(N0(r))return{body:r};if(ArrayBuffer.isView(r))return{body:r instanceof Uint8Array?r:JSON.stringify(r)};switch(n.split(";")[0]){case"application/json":return{body:JSON.stringify(r)};case"multipart/form-data":return Array.isArray(r)?{multipartBody:LA(r)}:{body:JSON.stringify(r)};case"text/plain":return{body:String(r)};default:return typeof r=="string"?{body:r}:{body:JSON.stringify(r)}}}function VA(r){const i=(r.headers.get("content-type")??"").split(";")[0],o=r.bodyAsText??"";if(i==="text/plain")return String(o);try{return o?JSON.parse(o):void 0}catch(l){if(i==="application/json")throw GA(r,l);return String(o)}}function GA(r,n){const i=`Error "${n}" occurred while parsing the response body - ${r.bodyAsText}.`,o=n.code??Ei.PARSE_ERROR;return new Ei(i,{code:o,statusCode:r.status,request:r.request,response:r})}function FA(r){const n=r.value;return n!==void 0&&n.toString!==void 0&&typeof n.toString=="function"}function YA(r,n,i,o={}){if(n.startsWith("https://")||n.startsWith("http://"))return n;r=JA(r,o),n=KA(n,i,o);const l=XA(`${r}/${n}`,o);return new URL(l).toString().replace(/([^:]\/)\/+/g,"$1")}function jd(r,n,i,o){let l;i==="pipeDelimited"?l="|":i==="spaceDelimited"?l="%20":l=",";let c;Array.isArray(o)?c=o:typeof o=="object"&&o.toString===Object.prototype.toString?c=Object.entries(o).flat():c=[o];const f=c.map(p=>{if(p==null)return"";if(!p.toString||typeof p.toString!="function")throw new Error(`Query parameters must be able to be represented as string, ${r} can't`);const m=p.toISOString!==void 0?p.toISOString():p.toString();return n?m:encodeURIComponent(m)}).join(l);return`${n?r:encodeURIComponent(r)}=${f}`}function XA(r,n={}){if(!n.queryParameters)return r;const i=new URL(r),o=n.queryParameters,l=[];for(const c of Object.keys(o)){const f=o[c];if(f==null)continue;const p=FA(f),m=p?f.value:f,g=p?f.explode??!1:!1,y=p&&f.style?f.style:"form";if(g)if(Array.isArray(m))for(const E of m)l.push(jd(c,n.skipUrlEncoding??!1,y,E));else if(typeof m=="object")for(const[E,L]of Object.entries(m))l.push(jd(E,n.skipUrlEncoding??!1,y,L));else throw new Error("explode can only be set to true for objects and arrays");else l.push(jd(c,n.skipUrlEncoding??!1,y,m))}return i.search!==""&&(i.search+="&"),i.search+=l.join("&"),i.toString()}function JA(r,n){if(!n.pathParameters)return r;const i=n.pathParameters;for(const[o,l]of Object.entries(i)){if(l==null)throw new Error(`Path parameters ${o} must not be undefined or null`);if(!l.toString||typeof l.toString!="function")throw new Error(`Path parameters must be able to be represented as string, ${o} can't`);let c=l.toISOString!==void 0?l.toISOString():String(l);n.skipUrlEncoding||(c=encodeURIComponent(l)),r=QA(r,`{${o}}`,c)??""}return r}function KA(r,n,i={}){for(const o of n){const l=typeof o=="object"&&(o.allowReserved??!1);let c=typeof o=="object"?o.value:o;!i.skipUrlEncoding&&!l&&(c=encodeURIComponent(c)),r=r.replace(/\{[\w-]+\}/,String(c))}return r}function QA(r,n,i){return!r||!n?r:r.split(n).join(i||"")}function WA(r,n={}){const i=n.pipeline??MA(n);if(n.additionalPolicies?.length)for(const{policy:p,position:m}of n.additionalPolicies){const g=m==="perRetry"?"Sign":void 0;i.addPolicy(p,{afterPhase:g})}const{allowInsecureConnection:o,httpClient:l}=n,c=n.endpoint??r,f=(p,...m)=>{const g=y=>YA(c,p,m,{...y});return{get:(y={})=>Gr("GET",g(y),i,y,o,l),post:(y={})=>Gr("POST",g(y),i,y,o,l),put:(y={})=>Gr("PUT",g(y),i,y,o,l),patch:(y={})=>Gr("PATCH",g(y),i,y,o,l),delete:(y={})=>Gr("DELETE",g(y),i,y,o,l),head:(y={})=>Gr("HEAD",g(y),i,y,o,l),options:(y={})=>Gr("OPTIONS",g(y),i,y,o,l),trace:(y={})=>Gr("TRACE",g(y),i,y,o,l)}};return{path:f,pathUnchecked:f,pipeline:i}}function Gr(r,n,i,o,l,c){return l=o.allowInsecureConnection??l,{then:function(f,p){return Nd(r,n,i,{...o,allowInsecureConnection:l},c).then(f,p)},async asBrowserStream(){if(Qr)throw new Error("`asBrowserStream` is supported only in the browser environment. Use `asNodeStream` instead to obtain the response body stream. If you require a Web stream of the response in Node, consider using `Readable.toWeb` on the result of `asNodeStream`.");return Nd(r,n,i,{...o,allowInsecureConnection:l,responseAsStream:!0},c)},async asNodeStream(){if(Qr)return Nd(r,n,i,{...o,allowInsecureConnection:l,responseAsStream:!0},c);throw new Error("`isNodeStream` is not supported in the browser environment. Use `asBrowserStream` to obtain the response body stream.")}}}function Z0(){return R0()}const ZA=T0({logLevelEnvVarName:"AZURE_LOG_LEVEL",namespace:"azure"});function Vl(r){return ZA.createClientLogger(r)}const _i=Vl("core-rest-pipeline"),eN="exponentialRetryPolicy";function tN(r={}){return qo([Ef({...r,ignoreSystemErrors:!0})],{maxRetries:r.maxRetries??bs})}const eb="systemErrorRetryPolicy";function nN(r={}){return{name:eb,sendRequest:qo([Ef({...r,ignoreHttpStatusCodes:!0})],{maxRetries:r.maxRetries??bs}).sendRequest}}const tb="throttlingRetryPolicy";function rN(r={}){return{name:tb,sendRequest:qo([H0()],{maxRetries:r.maxRetries??bs}).sendRequest}}const iN=U0;function nb(r={}){return D0({logger:_i.info,...r})}const sN=P0;function rb(r={}){return I0(r)}function oN(){return"x-ms-useragent"}function aN(r){const n=[{name:"Firefox",regex:/Firefox\/([\d.]+)/},{name:"Safari",regex:/Version\/([\d.]+).*Safari/}];for(const i of n){const o=r.match(i.regex);if(o)return{brand:i.name,version:o[1]}}}function lN(r){const n=["Google Chrome","Microsoft Edge","Opera","Brave","Chromium"];for(const i of n){const o=r.find(l=>l.brand===i);if(o)return o}}async function cN(r){const n=globalThis.navigator;let i="unknown";if(n?.userAgentData){const o=await n.userAgentData.getHighEntropyValues(["architecture","platformVersion"]);i=`${o.platform} ${o.platformVersion}; ${o.architecture}`;const l=lN(n.userAgentData.brands);l&&r.set(l.brand,`${l.version} (${i})`)}else if(n?.platform){i=n.platform;const o=aN(n.userAgent);o&&r.set(o.brand,`${o.version} (${i})`)}else typeof globalThis.EdgeRuntime=="string"&&r.set("EdgeRuntime",`${globalThis.EdgeRuntime} (${i})`)}const ib="1.22.2",uN=3;function dN(r){const n=[];for(const[i,o]of r){const l=o?`${i}/${o}`:i;n.push(l)}return n.join(" ")}function fN(){return oN()}async function sb(r){const n=new Map;n.set("core-rest-pipeline",ib),await cN(n);const i=dN(n);return r?`${r} ${i}`:i}const zy=fN(),ob="userAgentPolicy";function ab(r={}){const n=sb(r.userAgentPrefix);return{name:ob,async sendRequest(i,o){return i.headers.has(zy)||i.headers.set(zy,await n),o(i)}}}function hN(r){return!!(r&&typeof r.pipe=="function")}const lb={arrayBuffer:()=>{throw new Error("Not implemented")},bytes:()=>{throw new Error("Not implemented")},slice:()=>{throw new Error("Not implemented")},text:()=>{throw new Error("Not implemented")}},Gl=Symbol("rawContent");function cb(r){return typeof r[Gl]=="function"}function pN(r){return cb(r)?r[Gl]():r}function mN(r,n,i={}){return{...lb,type:i.type??"",lastModified:i.lastModified??new Date().getTime(),webkitRelativePath:i.webkitRelativePath??"",size:i.size??-1,name:n,stream:()=>{const o=r();if(hN(o))throw new Error("Not supported: a Node stream was provided as input to createFileFromStream.");return o},[Gl]:r}}function gN(r,n,i={}){return Rl?{...lb,type:i.type??"",lastModified:i.lastModified??new Date().getTime(),webkitRelativePath:i.webkitRelativePath??"",size:r.byteLength,name:n,arrayBuffer:async()=>r.buffer,stream:()=>new Blob([Ly(r)]).stream(),[Gl]:()=>r}:new File([Ly(r)],n,i)}function Ly(r){return"resize"in r.buffer?r:r.map(n=>n)}const kf=_f;function ub(){const r=Q0();return{name:kf,sendRequest:async(n,i)=>{if(n.multipartBody)for(const o of n.multipartBody.parts)cb(o.body)&&(o.body=pN(o.body));return r.sendRequest(n,i)}}}const yN=Bk;function db(){return L0()}function fb(r={}){return q0(r)}const vN=$0;function hb(){return V0()}const bN=nA;function SN(r){return rA()}function pb(r,n){return F0()}const mb="setClientRequestIdPolicy";function gb(r="x-ms-client-request-id"){return{name:mb,async sendRequest(n,i){return n.headers.has(r)||n.headers.set(r,n.requestId),i(n)}}}const wN=Y0;function yb(r){return X0(r)}const TN=J0;function vb(r){return K0(r)}const _o={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function CN(r={}){let n=new ko(r.parentContext);return r.span&&(n=n.setValue(_o.span,r.span)),r.namespace&&(n=n.setValue(_o.namespace,r.namespace)),n}class ko{_contextMap;constructor(n){this._contextMap=n instanceof ko?new Map(n._contextMap):new Map}setValue(n,i){const o=new ko(this);return o._contextMap.set(n,i),o}getValue(n){return this._contextMap.get(n)}deleteValue(n){const i=new ko(this);return i._contextMap.delete(n),i}}const Od={instrumenterImplementation:void 0};function xN(){return{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{},addEvent:()=>{}}}function RN(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(r,n)=>({span:xN(),tracingContext:CN({parentContext:n.tracingContext})}),withContext(r,n,...i){return n(...i)}}}function cl(){return Od.instrumenterImplementation||(Od.instrumenterImplementation=RN()),Od.instrumenterImplementation}function bb(r){const{namespace:n,packageName:i,packageVersion:o}=r;function l(g,y,E){const L=cl().startSpan(g,{...E,packageName:i,packageVersion:o,tracingContext:y?.tracingOptions?.tracingContext});let G=L.tracingContext;const O=L.span;G.getValue(_o.namespace)||(G=G.setValue(_o.namespace,n)),O.setAttribute("az.namespace",G.getValue(_o.namespace));const ee=Object.assign({},y,{tracingOptions:{...y?.tracingOptions,tracingContext:G}});return{span:O,updatedOptions:ee}}async function c(g,y,E,L){const{span:G,updatedOptions:O}=l(g,y,L);try{const ee=await f(O.tracingOptions.tracingContext,()=>Promise.resolve(E(O,G)));return G.setStatus({status:"success"}),ee}catch(ee){throw G.setStatus({status:"error",error:ee}),ee}finally{G.end()}}function f(g,y,...E){return cl().withContext(g,y,...E)}function p(g){return cl().parseTraceparentHeader(g)}function m(g){return cl().createRequestHeaders(g)}return{startSpan:l,withSpan:c,withContext:f,parseTraceparentHeader:p,createRequestHeaders:m}}const Uo=Ei;function Af(r){return _0(r)}const Sb="tracingPolicy";function wb(r={}){const n=sb(r.userAgentPrefix),i=new Sf({additionalAllowedQueryParameters:r.additionalAllowedQueryParameters}),o=EN();return{name:Sb,async sendRequest(l,c){if(!o)return c(l);const f=await n,p={"http.url":i.sanitizeUrl(l.url),"http.method":l.method,"http.user_agent":f,requestId:l.requestId};f&&(p["http.user_agent"]=f);const{span:m,tracingContext:g}=_N(o,l,p)??{};if(!m||!g)return c(l);try{const y=await o.withContext(g,c,l);return AN(m,y),y}catch(y){throw kN(m,y),y}}}}function EN(){try{return bb({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:ib})}catch(r){_i.warning(`Error when creating the TracingClient: ${Ho(r)}`);return}}function _N(r,n,i){try{const{span:o,updatedOptions:l}=r.startSpan(`HTTP ${n.method}`,{tracingOptions:n.tracingOptions},{spanKind:"client",spanAttributes:i});if(!o.isRecording()){o.end();return}const c=r.createRequestHeaders(l.tracingOptions.tracingContext);for(const[f,p]of Object.entries(c))n.headers.set(f,p);return{span:o,tracingContext:l.tracingOptions.tracingContext}}catch(o){_i.warning(`Skipping creating a tracing span due to an error: ${Ho(o)}`);return}}function kN(r,n){try{r.setStatus({status:"error",error:f0(n)?n:void 0}),Af(n)&&n.statusCode&&r.setAttribute("http.status_code",n.statusCode),r.end()}catch(i){_i.warning(`Skipping tracing span processing due to an error: ${Ho(i)}`)}}function AN(r,n){try{r.setAttribute("http.status_code",n.status);const i=n.headers.get("x-ms-request-id");i&&r.setAttribute("serviceRequestId",i),n.status>=400&&r.setStatus({status:"error"}),r.end()}catch(i){_i.warning(`Skipping tracing span processing due to an error: ${Ho(i)}`)}}function Tb(r){if(r instanceof AbortSignal)return{abortSignal:r};if(r.aborted)return{abortSignal:AbortSignal.abort(r.reason)};const n=new AbortController;let i=!0;function o(){i&&(r.removeEventListener("abort",l),i=!1)}function l(){n.abort(r.reason),o()}return r.addEventListener("abort",l),{abortSignal:n.signal,cleanup:o}}const NN="wrapAbortSignalLikePolicy";function jN(){return{name:NN,sendRequest:async(r,n)=>{if(!r.abortSignal)return n(r);const{abortSignal:i,cleanup:o}=Tb(r.abortSignal);r.abortSignal=i;try{return await n(r)}finally{o?.()}}}}function Nf(r){const n=Z0();return Rl&&(r.agent&&n.addPolicy(yb(r.agent)),r.tlsOptions&&n.addPolicy(vb(r.tlsOptions)),n.addPolicy(pb(r.proxyOptions)),n.addPolicy(db())),n.addPolicy(jN()),n.addPolicy(hb(),{beforePolicies:[kf]}),n.addPolicy(ab(r.userAgentOptions)),n.addPolicy(gb(r.telemetryOptions?.clientRequestIdHeaderName)),n.addPolicy(ub(),{afterPhase:"Deserialize"}),n.addPolicy(fb(r.retryOptions),{phase:"Retry"}),n.addPolicy(wb({...r.userAgentOptions,...r.loggingOptions}),{afterPhase:"Retry"}),Rl&&n.addPolicy(rb(r.redirectOptions),{afterPhase:"Retry"}),n.addPolicy(nb(r.loggingOptions),{afterPhase:"Sign"}),n}function jf(){const r=O0();return{async sendRequest(n){const{abortSignal:i,cleanup:o}=n.abortSignal?Tb(n.abortSignal):{};try{return n.abortSignal=i,await r.sendRequest(n)}finally{o?.()}}}}function Cb(r){return Ri(r)}function Of(r){return x0(r)}const ON=eN;function MN(r={}){return tN(r)}const UN=eb;function DN(r={}){return nN(r)}const PN=tb;function IN(r={}){return rN(r)}const zN=Vl("core-rest-pipeline retryPolicy");function LN(r,n={maxRetries:uN}){return qo(r,{logger:zN,...n})}const BN={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function HN(r,n,i){async function o(){if(Date.now()<i)try{return await r()}catch{return null}else{const c=await r();if(c===null)throw new Error("Failed to refresh access token.");return c}}let l=await o();for(;l===null;)await u0(n),l=await o();return l}function xb(r,n){let i=null,o=null,l;const c={...BN,...n},f={get isRefreshing(){return i!==null},get shouldRefresh(){return f.isRefreshing?!1:o?.refreshAfterTimestamp&&o.refreshAfterTimestamp<Date.now()?!0:(o?.expiresOnTimestamp??0)-c.refreshWindowInMs<Date.now()},get mustRefresh(){return o===null||o.expiresOnTimestamp-c.forcedRefreshWindowInMs<Date.now()}};function p(m,g){return f.isRefreshing||(i=HN(()=>r.getToken(m,g),c.retryIntervalInMs,o?.expiresOnTimestamp??Date.now()).then(E=>(i=null,o=E,l=g.tenantId,o)).catch(E=>{throw i=null,o=null,l=void 0,E})),i}return async(m,g)=>{const y=!!g.claims,E=l!==g.tenantId;return y&&(o=null),E||y||f.mustRefresh?p(m,g):(f.shouldRefresh&&p(m,g),o)}}const Rb="bearerTokenAuthenticationPolicy";async function ul(r,n){try{return[await n(r),void 0]}catch(i){if(Af(i)&&i.response)return[i.response,i];throw i}}async function qN(r){const{scopes:n,getAccessToken:i,request:o}=r,l={abortSignal:o.abortSignal,tracingOptions:o.tracingOptions,enableCae:!0},c=await i(n,l);c&&r.request.headers.set("Authorization",`Bearer ${c.token}`)}function By(r){return r.status===401&&r.headers.has("WWW-Authenticate")}async function Hy(r,n){const{scopes:i}=r,o=await r.getAccessToken(i,{enableCae:!0,claims:n});return o?(r.request.headers.set("Authorization",`${o.tokenType??"Bearer"} ${o.token}`),!0):!1}function Fl(r){const{credential:n,scopes:i,challengeCallbacks:o}=r,l=r.logger||_i,c={authorizeRequest:o?.authorizeRequest?.bind(o)??qN,authorizeRequestOnChallenge:o?.authorizeRequestOnChallenge?.bind(o)},f=n?xb(n):()=>Promise.resolve(null);return{name:Rb,async sendRequest(p,m){if(!p.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await c.authorizeRequest({scopes:Array.isArray(i)?i:[i],request:p,getAccessToken:f,logger:l});let g,y,E;if([g,y]=await ul(p,m),By(g)){let L=qy(g.headers.get("WWW-Authenticate"));if(L){let G;try{G=atob(L)}catch{return l.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${L}`),g}E=await Hy({scopes:Array.isArray(i)?i:[i],response:g,request:p,getAccessToken:f,logger:l},G),E&&([g,y]=await ul(p,m))}else if(c.authorizeRequestOnChallenge&&(E=await c.authorizeRequestOnChallenge({scopes:Array.isArray(i)?i:[i],request:p,response:g,getAccessToken:f,logger:l}),E&&([g,y]=await ul(p,m)),By(g)&&(L=qy(g.headers.get("WWW-Authenticate")),L))){let G;try{G=atob(L)}catch{return l.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${L}`),g}E=await Hy({scopes:Array.isArray(i)?i:[i],response:g,request:p,getAccessToken:f,logger:l},G),E&&([g,y]=await ul(p,m))}}if(y)throw y;return g}}}function $N(r){const n=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,i=/(\w+)="([^"]*)"/g,o=[];let l;for(;(l=n.exec(r))!==null;){const c=l[1],f=l[2],p={};let m;for(;(m=i.exec(f))!==null;)p[m[1]]=m[2];o.push({scheme:c,params:p})}return o}function qy(r){return r?$N(r).find(i=>i.scheme==="Bearer"&&i.params.claims&&i.params.error==="insufficient_claims")?.params.claims:void 0}const Eb="ndJsonPolicy";function VN(){return{name:Eb,async sendRequest(r,n){if(typeof r.body=="string"&&r.body.startsWith("[")){const i=JSON.parse(r.body);Array.isArray(i)&&(r.body=i.map(o=>JSON.stringify(o)+`
`).join(""))}return n(r)}}}const Yd="auxiliaryAuthenticationHeaderPolicy",$y="x-ms-authorization-auxiliary";async function GN(r){const{scopes:n,getAccessToken:i,request:o}=r,l={abortSignal:o.abortSignal,tracingOptions:o.tracingOptions};return(await i(n,l))?.token??""}function FN(r){const{credentials:n,scopes:i}=r,o=r.logger||_i,l=new WeakMap;return{name:Yd,async sendRequest(c,f){if(!c.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication for auxiliary header is not permitted for non-TLS protected (non-https) URLs.");if(!n||n.length===0)return o.info(`${Yd} header will not be set due to empty credentials.`),f(c);const p=[];for(const g of n){let y=l.get(g);y||(y=xb(g),l.set(g,y)),p.push(GN({scopes:Array.isArray(i)?i:[i],request:c,getAccessToken:y}))}const m=(await Promise.all(p)).filter(g=>!!g);return m.length===0?(o.warning(`None of the auxiliary tokens are valid. ${$y} header will not be set.`),f(c)):(c.headers.set($y,m.map(g=>`Bearer ${g}`).join(", ")),f(c))}}}const YN=Object.freeze(Object.defineProperty({__proto__:null,RestError:Uo,agentPolicy:yb,agentPolicyName:wN,auxiliaryAuthenticationHeaderPolicy:FN,auxiliaryAuthenticationHeaderPolicyName:Yd,bearerTokenAuthenticationPolicy:Fl,bearerTokenAuthenticationPolicyName:Rb,createDefaultHttpClient:jf,createEmptyPipeline:Z0,createFile:gN,createFileFromStream:mN,createHttpHeaders:Cb,createPipelineFromOptions:Nf,createPipelineRequest:Of,decompressResponsePolicy:db,decompressResponsePolicyName:yN,defaultRetryPolicy:fb,exponentialRetryPolicy:MN,exponentialRetryPolicyName:ON,formDataPolicy:hb,formDataPolicyName:vN,getDefaultProxySettings:SN,isRestError:Af,logPolicy:nb,logPolicyName:iN,multipartPolicy:ub,multipartPolicyName:kf,ndJsonPolicy:VN,ndJsonPolicyName:Eb,proxyPolicy:pb,proxyPolicyName:bN,redirectPolicy:rb,redirectPolicyName:sN,retryPolicy:LN,setClientRequestIdPolicy:gb,setClientRequestIdPolicyName:mb,systemErrorRetryPolicy:DN,systemErrorRetryPolicyName:UN,throttlingRetryPolicy:IN,throttlingRetryPolicyName:PN,tlsPolicy:vb,tlsPolicyName:TN,tracingPolicy:wb,tracingPolicyName:Sb,userAgentPolicy:ab,userAgentPolicyName:ob},Symbol.toStringTag,{value:"Module"})),Vy={operationRequestMap:new WeakMap};function Ss(r,n,i){let o=n.parameterPath;const l=n.mapper;let c;if(typeof o=="string"&&(o=[o]),Array.isArray(o)){if(o.length>0)if(l.isConstant)c=l.defaultValue;else{let f=Gy(r,o);!f.propertyFound&&i&&(f=Gy(i,o));let p=!1;f.propertyFound||(p=l.required||o[0]==="options"&&o.length===2),c=p?l.defaultValue:f.propertyValue}}else{l.required&&(c={});for(const f in o){const p=l.type.modelProperties[f],m=o[f],g=Ss(r,{parameterPath:m,mapper:p},i);g!==void 0&&(c||(c={}),c[f]=g)}}return c}function Gy(r,n){const i={propertyFound:!1};let o=0;for(;o<n.length;++o){const l=n[o];if(r&&l in r)r=r[l];else break}return o===n.length&&(i.propertyValue=r,i.propertyFound=!0),i}const _b=Symbol.for("@azure/core-client original request");function XN(r){return _b in r}function _s(r){if(XN(r))return _s(r[_b]);let n=Vy.operationRequestMap.get(r);return n||(n={},Vy.operationRequestMap.set(r,n)),n}const JN=["application/json","text/json"],KN=["application/xml","application/atom+xml"],kb="deserializationPolicy";function Ab(r={}){const n=r.expectedContentTypes?.json??JN,i=r.expectedContentTypes?.xml??KN,o=r.parseXML,l=r.serializerOptions,c={xml:{rootName:l?.xml.rootName??"",includeRoot:l?.xml.includeRoot??!1,xmlCharKey:l?.xml.xmlCharKey??vs}};return{name:kb,async sendRequest(f,p){const m=await p(f);return ZN(n,i,m,c,o)}}}function QN(r){let n;const i=r.request,o=_s(i),l=o?.operationSpec;return l&&(o?.operationResponseGetter?n=o?.operationResponseGetter(l,r):n=l.responses[r.status]),n}function WN(r){const n=r.request,o=_s(n)?.shouldDeserialize;let l;return o===void 0?l=!0:typeof o=="boolean"?l=o:l=o(r),l}async function ZN(r,n,i,o,l){const c=await n2(r,n,i,o,l);if(!WN(c))return c;const p=_s(c.request)?.operationSpec;if(!p||!p.responses)return c;const m=QN(c),{error:g,shouldReturnResponse:y}=t2(c,p,m,o);if(g)throw g;if(y)return c;if(m){if(m.bodyMapper){let E=c.parsedBody;p.isXML&&m.bodyMapper.type.name===Ti.Sequence&&(E=typeof E=="object"?E[m.bodyMapper.xmlElementName]:[]);try{c.parsedBody=p.serializer.deserialize(m.bodyMapper,E,"operationRes.parsedBody",o)}catch(L){throw new Uo(`Error ${L} occurred in deserializing the responseBody - ${c.bodyAsText}`,{statusCode:c.status,request:c.request,response:c})}}else p.httpMethod==="HEAD"&&(c.parsedBody=i.status>=200&&i.status<300);m.headersMapper&&(c.parsedHeaders=p.serializer.deserialize(m.headersMapper,c.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return c}function e2(r){const n=Object.keys(r.responses);return n.length===0||n.length===1&&n[0]==="default"}function t2(r,n,i,o){const l=200<=r.status&&r.status<300;if(e2(n)?l:!!i)if(i){if(!i.isError)return{error:null,shouldReturnResponse:!1}}else return{error:null,shouldReturnResponse:!1};const f=i??n.responses.default,p=r.request.streamResponseStatusCodes?.has(r.status)?`Unexpected status code: ${r.status}`:r.bodyAsText,m=new Uo(p,{statusCode:r.status,request:r.request,response:r});if(!f&&!(r.parsedBody?.error?.code&&r.parsedBody?.error?.message))throw m;const g=f?.bodyMapper,y=f?.headersMapper;try{if(r.parsedBody){const E=r.parsedBody;let L;if(g){let O=E;if(n.isXML&&g.type.name===Ti.Sequence){O=[];const ee=g.xmlElementName;typeof E=="object"&&ee&&(O=E[ee])}L=n.serializer.deserialize(g,O,"error.response.parsedBody",o)}const G=E.error||L||E;m.code=G.code,G.message&&(m.message=G.message),g&&(m.response.parsedBody=L)}r.headers&&y&&(m.response.parsedHeaders=n.serializer.deserialize(y,r.headers.toJSON(),"operationRes.parsedHeaders"))}catch(E){m.message=`Error "${E.message}" occurred in deserializing the responseBody - "${r.bodyAsText}" for the default response.`}return{error:m,shouldReturnResponse:!1}}async function n2(r,n,i,o,l){if(!i.request.streamResponseStatusCodes?.has(i.status)&&i.bodyAsText){const c=i.bodyAsText,f=i.headers.get("Content-Type")||"",p=f?f.split(";").map(m=>m.toLowerCase()):[];try{if(p.length===0||p.some(m=>r.indexOf(m)!==-1))return i.parsedBody=JSON.parse(c),i;if(p.some(m=>n.indexOf(m)!==-1)){if(!l)throw new Error("Parsing XML not supported.");const m=await l(c,o.xml);return i.parsedBody=m,i}}catch(m){const g=`Error "${m}" occurred while parsing the response body - ${i.bodyAsText}.`,y=m.code||Uo.PARSE_ERROR;throw new Uo(g,{code:y,statusCode:i.status,request:i.request,response:i})}}return i}function r2(r){const n=new Set;for(const i in r.responses){const o=r.responses[i];o.bodyMapper&&o.bodyMapper.type.name===Ti.Stream&&n.add(Number(i))}return n}function Kr(r){const{parameterPath:n,mapper:i}=r;let o;return typeof n=="string"?o=n:Array.isArray(n)?o=n.join("."):o=i.serializedName,o}const Nb="serializationPolicy";function jb(r={}){const n=r.stringifyXML;return{name:Nb,async sendRequest(i,o){const l=_s(i),c=l?.operationSpec,f=l?.operationArguments;return c&&f&&(i2(i,f,c),s2(i,f,c,n)),o(i)}}}function i2(r,n,i){if(i.headerParameters)for(const l of i.headerParameters){let c=Ss(n,l);if(c!=null||l.mapper.required){c=i.serializer.serialize(l.mapper,c,Kr(l));const f=l.mapper.headerCollectionPrefix;if(f)for(const p of Object.keys(c))r.headers.set(f+p,c[p]);else r.headers.set(l.mapper.serializedName||Kr(l),c)}}const o=n.options?.requestOptions?.customHeaders;if(o)for(const l of Object.keys(o))r.headers.set(l,o[l])}function s2(r,n,i,o=function(){throw new Error("XML serialization unsupported!")}){const l=n.options?.serializerOptions,c={xml:{rootName:l?.xml.rootName??"",includeRoot:l?.xml.includeRoot??!1,xmlCharKey:l?.xml.xmlCharKey??vs}},f=c.xml.xmlCharKey;if(i.requestBody&&i.requestBody.mapper){r.body=Ss(n,i.requestBody);const p=i.requestBody.mapper,{required:m,serializedName:g,xmlName:y,xmlElementName:E,xmlNamespace:L,xmlNamespacePrefix:G,nullable:O}=p,ee=p.type.name;try{if(r.body!==void 0&&r.body!==null||O&&r.body===null||m){const Y=Kr(i.requestBody);r.body=i.serializer.serialize(p,r.body,Y,c);const le=ee===Ti.Stream;if(i.isXML){const fe=G?`xmlns:${G}`:"xmlns",me=o2(L,fe,ee,r.body,c);ee===Ti.Sequence?r.body=o(a2(me,E||y||g,fe,L),{rootName:y||g,xmlCharKey:f}):le||(r.body=o(me,{rootName:y||g,xmlCharKey:f}))}else{if(ee===Ti.String&&(i.contentType?.match("text/plain")||i.mediaType==="text"))return;le||(r.body=JSON.stringify(r.body))}}}catch(Y){throw new Error(`Error "${Y.message}" occurred in serializing the payload - ${JSON.stringify(g,void 0,"  ")}.`)}}else if(i.formDataParameters&&i.formDataParameters.length>0){r.formData={};for(const p of i.formDataParameters){const m=Ss(n,p);if(m!=null){const g=p.mapper.serializedName||Kr(p);r.formData[g]=i.serializer.serialize(p.mapper,m,Kr(p),c)}}}}function o2(r,n,i,o,l){if(r&&!["Composite","Sequence","Dictionary"].includes(i)){const c={};return c[l.xml.xmlCharKey]=o,c[Bt]={[n]:r},c}return o}function a2(r,n,i,o){if(Array.isArray(r)||(r=[r]),!i||!o)return{[n]:r};const l={[n]:r};return l[Bt]={[i]:o},l}function Ob(r={}){const n=Nf(r??{});return r.credentialOptions&&n.addPolicy(Fl({credential:r.credentialOptions.credential,scopes:r.credentialOptions.credentialScopes})),n.addPolicy(jb(r.serializationOptions),{phase:"Serialize"}),n.addPolicy(Ab(r.deserializationOptions),{phase:"Deserialize"}),n}let Md;function l2(){return Md||(Md=jf()),Md}const c2={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function u2(r,n,i,o){const l=d2(n,i,o);let c=!1,f=Fy(r,l);if(n.path){let g=Fy(n.path,l);n.path==="/{nextLink}"&&g.startsWith("/")&&(g=g.substring(1)),f2(g)?(f=g,c=!0):f=h2(f,g)}const{queryParams:p,sequenceParams:m}=p2(n,i,o);return f=g2(f,p,m,c),f}function Fy(r,n){let i=r;for(const[o,l]of n)i=i.split(o).join(l);return i}function d2(r,n,i){const o=new Map;if(r.urlParameters?.length)for(const l of r.urlParameters){let c=Ss(n,l,i);const f=Kr(l);c=r.serializer.serialize(l.mapper,c,f),l.skipEncoding||(c=encodeURIComponent(c)),o.set(`{${l.mapper.serializedName||f}}`,c)}return o}function f2(r){return r.includes("://")}function h2(r,n){if(!n)return r;const i=new URL(r);let o=i.pathname;o.endsWith("/")||(o=`${o}/`),n.startsWith("/")&&(n=n.substring(1));const l=n.indexOf("?");if(l!==-1){const c=n.substring(0,l),f=n.substring(l+1);o=o+c,f&&(i.search=i.search?`${i.search}&${f}`:f)}else o=o+n;return i.pathname=o,i.toString()}function p2(r,n,i){const o=new Map,l=new Set;if(r.queryParameters?.length)for(const c of r.queryParameters){c.mapper.type.name==="Sequence"&&c.mapper.serializedName&&l.add(c.mapper.serializedName);let f=Ss(n,c,i);if(f!=null||c.mapper.required){f=r.serializer.serialize(c.mapper,f,Kr(c));const p=c.collectionFormat?c2[c.collectionFormat]:"";if(Array.isArray(f)&&(f=f.map(m=>m??"")),c.collectionFormat==="Multi"&&f.length===0)continue;Array.isArray(f)&&(c.collectionFormat==="SSV"||c.collectionFormat==="TSV")&&(f=f.join(p)),c.skipEncoding||(Array.isArray(f)?f=f.map(m=>encodeURIComponent(m)):f=encodeURIComponent(f)),Array.isArray(f)&&(c.collectionFormat==="CSV"||c.collectionFormat==="Pipes")&&(f=f.join(p)),o.set(c.mapper.serializedName||Kr(c),f)}}return{queryParams:o,sequenceParams:l}}function m2(r){const n=new Map;if(!r||r[0]!=="?")return n;r=r.slice(1);const i=r.split("&");for(const o of i){const[l,c]=o.split("=",2),f=n.get(l);f?Array.isArray(f)?f.push(c):n.set(l,[f,c]):n.set(l,c)}return n}function g2(r,n,i,o=!1){if(n.size===0)return r;const l=new URL(r),c=m2(l.search);for(const[p,m]of n){const g=c.get(p);if(Array.isArray(g))if(Array.isArray(m)){g.push(...m);const y=new Set(g);c.set(p,Array.from(y))}else g.push(m);else g?(Array.isArray(m)?m.unshift(g):i.has(p)&&c.set(p,[g,m]),o||c.set(p,m)):c.set(p,m)}const f=[];for(const[p,m]of c)if(typeof m=="string")f.push(`${p}=${m}`);else if(Array.isArray(m))for(const g of m)f.push(`${p}=${g}`);else f.push(`${p}=${m}`);return l.search=f.length?`?${f.join("&")}`:"",l.toString()}const Mb=Vl("core-client");class Ub{_endpoint;_requestContentType;_allowInsecureConnection;_httpClient;pipeline;constructor(n={}){if(this._requestContentType=n.requestContentType,this._endpoint=n.endpoint??n.baseUri,n.baseUri&&Mb.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=n.allowInsecureConnection,this._httpClient=n.httpClient||l2(),this.pipeline=n.pipeline||y2(n),n.additionalPolicies?.length)for(const{policy:i,position:o}of n.additionalPolicies){const l=o==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(i,{afterPhase:l})}}async sendRequest(n){return this.pipeline.sendRequest(this._httpClient,n)}async sendOperationRequest(n,i){const o=i.baseUrl||this._endpoint;if(!o)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");const l=u2(o,i,n,this),c=Of({url:l});c.method=i.httpMethod;const f=_s(c);f.operationSpec=i,f.operationArguments=n;const p=i.contentType||this._requestContentType;p&&i.requestBody&&c.headers.set("Content-Type",p);const m=n.options;if(m){const g=m.requestOptions;g&&(g.timeout&&(c.timeout=g.timeout),g.onUploadProgress&&(c.onUploadProgress=g.onUploadProgress),g.onDownloadProgress&&(c.onDownloadProgress=g.onDownloadProgress),g.shouldDeserialize!==void 0&&(f.shouldDeserialize=g.shouldDeserialize),g.allowInsecureConnection&&(c.allowInsecureConnection=!0)),m.abortSignal&&(c.abortSignal=m.abortSignal),m.tracingOptions&&(c.tracingOptions=m.tracingOptions)}this._allowInsecureConnection&&(c.allowInsecureConnection=!0),c.streamResponseStatusCodes===void 0&&(c.streamResponseStatusCodes=r2(i));try{const g=await this.sendRequest(c),y=xy(g,i.responses[g.status]);return m?.onResponse&&m.onResponse(g,y),y}catch(g){if(typeof g=="object"&&g?.response){const y=g.response,E=xy(y,i.responses[g.statusCode]||i.responses.default);g.details=E,m?.onResponse&&m.onResponse(y,E,g)}throw g}}}function y2(r){const n=v2(r),i=r.credential&&n?{credentialScopes:n,credential:r.credential}:void 0;return Ob({...r,credentialOptions:i})}function v2(r){if(r.credentialScopes)return r.credentialScopes;if(r.endpoint)return`${r.endpoint}/.default`;if(r.baseUri)return`${r.baseUri}/.default`;if(r.credential&&!r.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}function b2(r){return`, ${r.trim()}`.split(", Bearer ").filter(i=>i).map(i=>`${i.trim()}, `.split('", ').filter(c=>c).map(c=>(([f,p])=>({[f]:p}))(c.trim().split('="'))).reduce((c,f)=>({...c,...f}),{}))}async function S2(r){const{scopes:n,response:i}=r,o=r.logger||Mb,l=i.headers.get("WWW-Authenticate");if(!l)return o.info("The WWW-Authenticate header was missing. Failed to perform the Continuous Access Evaluation authentication flow."),!1;const f=(b2(l)||[]).find(m=>m.claims);if(!f)return o.info('The WWW-Authenticate header was missing the necessary "claims" to perform the Continuous Access Evaluation authentication flow.'),!1;const p=await r.getAccessToken(f.scope?[f.scope]:n,{claims:U_(f.claims)});return p?(r.request.headers.set("Authorization",`${p.tokenType??"Bearer"} ${p.token}`),!0):!1}const Db={DefaultScope:"/.default",HeaderConstants:{AUTHORIZATION:"authorization"}};function w2(r){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(r)}const T2=async r=>{const n=_2(r.request),i=R2(r.response);if(i){const o=E2(i),l=x2(r,o),c=C2(o);if(!c)return!1;const f=await r.getAccessToken(l,{...n,tenantId:c});return f?(r.request.headers.set(Db.HeaderConstants.AUTHORIZATION,`${f.tokenType??"Bearer"} ${f.token}`),!0):!1}return!1};function C2(r){const o=new URL(r.authorization_uri).pathname.split("/")[1];if(o&&w2(o))return o}function x2(r,n){if(!n.resource_id)return r.scopes;const i=new URL(n.resource_id);i.pathname=Db.DefaultScope;let o=i.toString();return o==="https://disk.azure.com/.default"&&(o="https://disk.azure.com//.default"),[o]}function R2(r){const n=r.headers.get("WWW-Authenticate");if(r.status===401&&n)return n}function E2(r){return`${r.slice(7).trim()} `.split(" ").filter(l=>l).map(l=>(([c,f])=>({[c]:f}))(l.trim().split("="))).reduce((l,c)=>({...l,...c}),{})}function _2(r){return{abortSignal:r.abortSignal,requestOptions:{timeout:r.timeout},tracingOptions:r.tracingOptions}}const k2=Object.freeze(Object.defineProperty({__proto__:null,MapperTypeNames:Ti,ServiceClient:Ub,XML_ATTRKEY:Bt,XML_CHARKEY:vs,authorizeRequestOnClaimChallenge:S2,authorizeRequestOnTenantChallenge:T2,createClientPipeline:Ob,createSerializer:Tf,deserializationPolicy:Ab,deserializationPolicyName:kb,serializationPolicy:jb,serializationPolicyName:Nb},Symbol.toStringTag,{value:"Module"})),A2=Al(k2),N2=Al(YN);var Yy;function j2(){return Yy||(Yy=1,(function(r){var n=QE,i=M_,o=A2,l=N2;function c(je){return je&&typeof je=="object"&&"default"in je?je:{default:je}}var f=c(n),p=c(i),m=c(o),g=c(l),y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Ug<"u"?Ug:typeof self<"u"?self:{};function E(je){return je&&je.__esModule&&Object.prototype.hasOwnProperty.call(je,"default")?je.default:je}function L(je,xe){return xe={exports:{}},je(xe,xe.exports),xe.exports}var G=L(function(je,xe){(function(De,H){je.exports=H()})(y,function(){return(function(De){function H(X){if(M[X])return M[X].exports;var z=M[X]={i:X,l:!1,exports:{}};return De[X].call(z.exports,z,z.exports,H),z.l=!0,z.exports}var M={};return H.m=De,H.c=M,H.i=function(X){return X},H.d=function(X,z,K){H.o(X,z)||Object.defineProperty(X,z,{configurable:!1,enumerable:!0,get:K})},H.n=function(X){var z=X&&X.__esModule?function(){return X.default}:function(){return X};return H.d(z,"a",z),z},H.o=function(X,z){return Object.prototype.hasOwnProperty.call(X,z)},H.p="",H(H.s=1)})([function(De,H,M){function X(x,P){var T,b=new Promise(function(_,N){fetch(x).then(function(w){T!==void 0&&clearTimeout(T),_(w)}).catch(function(w){T!==void 0&&clearTimeout(T),N(w)})});if(P!==0){var S=new Promise(function(_,N){T=setTimeout(N,P,new Error("Fetch for '".concat(x.url,"' timed out")))});return Promise.race([b,S])}return b}function z(x){try{return JSON.stringify(x)}catch{return"Unable to serialize object of type ".concat(typeof x)}}Object.defineProperty(H,"__esModule",{value:!0}),H.Timespan=H.toJson=H.fetchWithTimeout=void 0,H.fetchWithTimeout=X,H.toJson=z;var K=(function(){function x(){this.start=Date.now()}return Object.defineProperty(x.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"startTime",{get:function(){return this.start},enumerable:!1,configurable:!0}),x.prototype.reset=function(){this.start=Date.now()},x})();H.Timespan=K},function(De,H,M){function X(w,R,A){return new N(w,R,A)}var z=this&&this.__extends||(function(){var w=function(R,A){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,J){q.__proto__=J}||function(q,J){for(var V in J)Object.prototype.hasOwnProperty.call(J,V)&&(q[V]=J[V])})(R,A)};return function(R,A){function q(){this.constructor=R}if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");w(R,A),R.prototype=A===null?Object.create(A):(q.prototype=A.prototype,new q)}})(),K=this&&this.__assign||function(){return K=Object.assign||function(w){for(var R,A=1,q=arguments.length;A<q;A++){R=arguments[A];for(var J in R)Object.prototype.hasOwnProperty.call(R,J)&&(w[J]=R[J])}return w},K.apply(this,arguments)},x=this&&this.__awaiter||function(w,R,A,q){function J(V){return V instanceof A?V:new A(function(B){B(V)})}return new(A||(A=Promise))(function(V,B){function ae(I){try{ie(q.next(I))}catch(W){B(W)}}function he(I){try{ie(q.throw(I))}catch(W){B(W)}}function ie(I){I.done?V(I.value):J(I.value).then(ae,he)}ie((q=q.apply(w,R||[])).next())})},P=this&&this.__generator||function(w,R){function A(ie){return function(I){return q([ie,I])}}function q(ie){if(J)throw new TypeError("Generator is already executing.");for(;ae&&(ae=0,ie[0]&&(he=0)),he;)try{if(J=1,V&&(B=2&ie[0]?V.return:ie[0]?V.throw||((B=V.return)&&B.call(V),0):V.next)&&!(B=B.call(V,ie[1])).done)return B;switch(V=0,B&&(ie=[2&ie[0],B.value]),ie[0]){case 0:case 1:B=ie;break;case 4:return he.label++,{value:ie[1],done:!1};case 5:he.label++,V=ie[1],ie=[0];continue;case 7:ie=he.ops.pop(),he.trys.pop();continue;default:if(B=he.trys,!(B=B.length>0&&B[B.length-1])&&(ie[0]===6||ie[0]===2)){he=0;continue}if(ie[0]===3&&(!B||ie[1]>B[0]&&ie[1]<B[3])){he.label=ie[1];break}if(ie[0]===6&&he.label<B[1]){he.label=B[1],B=ie;break}if(B&&he.label<B[2]){he.label=B[2],he.ops.push(ie);break}B[2]&&he.ops.pop(),he.trys.pop();continue}ie=R.call(w,he)}catch(I){ie=[6,I],V=0}finally{J=B=0}if(5&ie[0])throw ie[1];return{value:ie[0]?ie[1]:void 0,done:!0}}var J,V,B,ae,he={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]};return ae={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(ae[Symbol.iterator]=function(){return this}),ae};Object.defineProperty(H,"__esModule",{value:!0}),H.createRegistrarClient=H.RegistrarClient=void 0;var T=M(0),b=["skype","aad","cae"],S=(function(w){function R(A){var q=w.call(this,A)||this;return q.name="CancelationError",q}return z(R,w),R})(Error),_=(function(){function w(R,A,q){this.logger=R,this.maxBackoffInMs=A,this.initialDelay=q,this.backoffCount=0,this.id=++w.idCounter}return w.prototype.delay=function(R){var A=this;if(this.timerHandle!==void 0)throw new Error("Retry sequence logical failure");if(this.backoffCount===-1)return new Promise(function(J,V){V(new S("Cancelled"))});var q=this.calculateNextBackoffMs();return this.backoffCount++,this.logger.info("[RegistrarClient] Backing off ".concat(R," for ").concat(q," milliseconds with ID ").concat(this.id)),new Promise(function(J,V){A.cancelFunc=V,A.timerHandle=setTimeout(function(){A.logger.info("[RegistrarClient] Back off for ".concat(R," with ID ").concat(A.id," complete")),A.timerHandle=void 0,J()},q)})},w.prototype.cancel=function(){this.timerHandle!==void 0&&(this.logger.debug("Resetting back off"),clearTimeout(this.timerHandle),this.cancelFunc!==void 0&&this.cancelFunc(new S("Cancelled"))),this.backoffCount=-1},w.prototype.calculateNextBackoffMs=function(){var R=1+.4*(Math.random()-.5),A=this.initialDelay*Math.pow(2,this.backoffCount)*R;return A=Math.round(A),Math.min(this.maxBackoffInMs,A)},w.idCounter=0,w})(),N=(function(){function w(R,A,q){var J;this.logger=R,this.tokenProvider=A,this.options=q,this.DEFAULT_MAX_RETRIES_FOR_GET_TOKEN=15,this.DEFAULT_MAX_BACKOFF_TIME_IN_MS=3e5,this.backoffs={},this.maxBackOffTime=this.options.maxRetryDelayMs>0?this.options.maxRetryDelayMs:this.DEFAULT_MAX_BACKOFF_TIME_IN_MS,this.maxRetriesForGetToken=q.maxRetriesForGetToken===void 0||q.maxRetriesForGetToken===null?this.DEFAULT_MAX_RETRIES_FOR_GET_TOKEN:q.maxRetriesForGetToken,this.proxyUrlRewrite=(J=q.proxyUrlRewrite)!==null&&J!==void 0?J:function(V){return V}}return w.prototype.setTelemetryLogger=function(R){this.eventLogger=R},w.prototype.register=function(R,A){return x(this,void 0,void 0,function(){return P(this,function(q){switch(q.label){case 0:return[4,this.performRegistration(R,A,"pr_set_registration")];case 1:return q.sent(),this.cachedRegistrationParams=[R,A],[2]}})})},w.prototype.unregister=function(){return x(this,void 0,void 0,function(){var R;return P(this,function(A){switch(A.label){case 0:return this.logger.info("[RegistrarClient] sending unregister request"),R=new Request(this.proxyUrlRewrite("".concat(this.options.registrarUrl,"/").concat(this.options.registrationId)),{method:"DELETE",mode:"cors",headers:new Headers(K(K({},this.options.extraRegistrationHeaders),{accept:"application/json, text/javascript"}))}),[4,this.callRegistrar(R,"pr_delete_registration")];case 1:return A.sent(),[2]}})})},w.prototype.cancelPendingRequests=function(){var R=this;Object.keys(this.backoffs).forEach(function(A){R.backoffs[A].cancel()}),this.backoffs={}},w.prototype.resendRegistration=function(){return x(this,void 0,void 0,function(){return P(this,function(R){switch(R.label){case 0:if(!this.cachedRegistrationParams)throw new Error("Re-registration failed because there is no registration parameters cached");return[4,this.performRegistration(this.cachedRegistrationParams[0],this.cachedRegistrationParams[1],"pr_resend_registration")];case 1:return R.sent(),[2]}})})},w.prototype.performRegistration=function(R,A,q){return x(this,void 0,void 0,function(){var J,V;return P(this,function(B){switch(B.label){case 0:return this.logger.info("[RegistrarClient] Sending register request"),J={clientDescription:R,registrationId:this.options.registrationId,nodeId:"",transports:A},V=new Request(this.proxyUrlRewrite(this.options.registrarUrl),{method:"POST",mode:"cors",headers:new Headers(K(K({},this.options.extraRegistrationHeaders),{"content-type":"application/json",accept:"application/json, text/javascript"})),body:(0,T.toJson)(J)}),[4,this.callRegistrar(V,q)];case 1:return B.sent(),[2]}})})},w.prototype.startBackoff=function(){var R=new _(this.logger,this.maxBackOffTime,this.options.initialRetryDelayMs);return this.backoffs[R.id]=R,R},w.prototype.stopBackoff=function(R){R.cancel(),delete this.backoffs[R.id]},w.prototype.getToken=function(R){return x(this,void 0,void 0,function(){var A,q,J,V,B,ae,he;return P(this,function(ie){switch(ie.label){case 0:A=this.startBackoff(),q=0,ie.label=1;case 1:return ie.trys.push([1,3,,8]),this.logger.info("[RegistrarClient] Asking for a new token"),[4,this.tokenProvider({needFresh:!0,supportedTokenTypes:b,wwwAuthenticateHeader:R,purpose:"registrar"})];case 2:return J=ie.sent(),this.stopBackoff(A),[2,J];case 3:V=ie.sent(),ie.label=4;case 4:return ie.trys.push([4,6,,7]),q++,B=JSON.stringify(V),q>this.maxRetriesForGetToken?(ae="[RegistrarClient] getToken retry limit hit. Will not retry now. Error: ".concat(B),this.logger.error(ae),this.stopBackoff(A),[2,Promise.reject(ae)]):(this.logger.warn("[RegistrarClient] Retrying for a new token. Retry Count: ".concat(q," Error: ").concat(B)),[4,A.delay("Fetching a new token")]);case 5:return ie.sent(),[3,8];case 6:throw he=ie.sent(),this.stopBackoff(A),he;case 7:return[3,8];case 8:return[3,1];case 9:return[2]}})})},w.prototype.callRegistrar=function(R,A){var q,J,V;return x(this,void 0,void 0,function(){var B,ae,he,ie,I,W,te,ge,we,Ae,He,Ge,j,C,D,ne;return P(this,function($){switch($.label){case 0:return B=this.startBackoff(),[4,this.tokenProvider({needFresh:!1,supportedTokenTypes:b,wwwAuthenticateHeader:void 0,purpose:"registrar"})];case 1:ae=$.sent(),this.setTokenHeader(R,ae),he=new T.Timespan,ie=0,$.label=2;case 2:I=void 0,$.label=3;case 3:return $.trys.push([3,10,15,16]),W=R.clone(),[4,(0,T.fetchWithTimeout)(W,this.options.requestTimeoutMs)];case 4:return I=$.sent(),I.status!==401?[3,8]:++ie>this.maxRetriesForGetToken?(te="[RegistrarClient] getSkypeToken retry limit hit. Will not retry now. Request '".concat(R.url,"' failed with ").concat(I.status," ").concat(I.statusText),this.logger.error(te),this.stopBackoff(B),[2,Promise.reject(te)]):(this.logger.warn("[RegistrarClient] Retry Count ".concat(ie,". Request '").concat(R.url,"' failed with ").concat(I.status," ").concat(I.statusText)),ge=(J=(q=I.headers)===null||q===void 0?void 0:q.get("www-authenticate"))!==null&&J!==void 0?J:void 0,we=this.setTokenHeader,Ae=[R],[4,this.getToken(ge)]);case 5:return we.apply(this,Ae.concat([$.sent()])),ie>1?[4,B.delay("Registrar call retry after 401")]:[3,7];case 6:$.sent(),$.label=7;case 7:return[3,22];case 8:if(I.status>=500&&I.status<600)throw new Error("Fetch for '".concat(R.url,"' failed with ").concat(I.status," ").concat(I.statusText));$.label=9;case 9:return[3,16];case 10:He=$.sent(),this.logger.error("[RegistrarClient] Request failed with ".concat(He)),$.label=11;case 11:return $.trys.push([11,13,,14]),[4,B.delay("Registrar call retry")];case 12:return $.sent(),[3,22];case 13:throw Ge=$.sent(),this.logger.error("[RegistrarClient] Request cancelled"),this.stopBackoff(B),Ge;case 14:return[3,16];case 15:return this.sendTelemetryEvent(A,R,I,he),[7];case 16:return this.stopBackoff(B),I.ok?[2,I]:[3,17];case 17:j=void 0,$.label=18;case 18:return $.trys.push([18,20,,21]),D=(C=JSON).stringify,[4,I.json()];case 19:return j=D.apply(C,[$.sent()]),[3,21];case 20:return $.sent(),j="no details",[3,21];case 21:throw ne="Fetch for '".concat(R.url,"' failed with ").concat(I.status," ").concat(I.statusText," (").concat(j,", MS-CV: ").concat((V=I.headers)===null||V===void 0?void 0:V.get("MS-CV"),")"),this.logger.error("[RegistrarClient] ".concat(ne)),new Error(ne);case 22:return[3,2];case 23:return[2]}})})},w.prototype.setTokenHeader=function(R,A){switch(R.headers.delete("X-Skypetoken"),R.headers.delete("Authorization"),R.headers.delete("X-MS-Migration"),A.tokenType.toLowerCase()){case"skype":R.headers.set("X-Skypetoken",A.token);break;case"aad":case"cae":R.headers.set("Authorization","Bearer ".concat(A.token));break;default:throw new Error("unsupported token type: ".concat(A.tokenType))}this.options.usingLegacyTokenApi===!1&&R.headers.set("X-MS-Migration","True")},w.prototype.sendTelemetryEvent=function(R,A,q,J){if(this.eventLogger!==void 0){var V={name:R,properties:{url:{value:A.url},result_code:{value:q!==void 0?q.status:0},begin_timestamp:{value:J.startTime},elapsed:{value:J.duration}}};this.eventLogger.logEvent(V)}},w})();H.RegistrarClient=N,H.createRegistrarClient=X}])})});E(G);var O=L(function(je,xe){(function(De,H){je.exports=H(G)})(y,function(De){return(function(H){function M(z){if(X[z])return X[z].exports;var K=X[z]={i:z,l:!1,exports:{}};return H[z].call(K.exports,K,K.exports,M),K.l=!0,K.exports}var X={};return M.m=H,M.c=X,M.i=function(z){return z},M.d=function(z,K,x){M.o(z,K)||Object.defineProperty(z,K,{configurable:!1,enumerable:!0,get:x})},M.n=function(z){var K=z&&z.__esModule?function(){return z.default}:function(){return z};return M.d(K,"a",K),K},M.o=function(z,K){return Object.prototype.hasOwnProperty.call(z,K)},M.p="",M(M.s=20)})([function(H,M,X){Object.defineProperty(M,"__esModule",{value:!0}),M.Logger=void 0;var z=(function(){function K(x,P){this.name=x,this.logger=P}return K.prototype.debug=function(x){this.logger.debug("[".concat(this.name,"] ").concat(x))},K.prototype.info=function(x){this.logger.info("[".concat(this.name,"] ").concat(x))},K.prototype.warn=function(x){this.logger.warn("[".concat(this.name,"] ").concat(x))},K.prototype.error=function(x){this.logger.error("[".concat(this.name,"] ").concat(x))},K})();M.Logger=z},function(H,M,X){Object.defineProperty(M,"__esModule",{value:!0}),M.USER_AUTHENTICATE_EVENT_NAME=M.SUPPORTED_TOKEN_TYPES=M.FAILED_MESSAGE_ACK=M.UNHANDLED_MESSAGE_ACK=M.HANDLED_MESSAGE_ACK=M.CLIENT_VERSION=M.constants=void 0,M.constants={TROUTER_INIT:"trouterinit",TROUTER_READY_EVENT:"trouterReadyEvent",TROUTER_READY_TIMEOUT:"trouterReadyTimeout",TROUTER_TOKEN_REQUEST:"trouterTokenRequest",TROUTER_TOKEN_GET_SUCCEEDED:"trouterTokenGetSucceeded",TROUTER_TOKEN_GET_FAILED:"trouterTokenGetFailed",TROUTER_RECONNECTING:"trouterReconnecting",RENEWAL:"renewal",NEW_CONNECTION:"newConnection",ENDPOINT_REGISTRATION_FAILED:"endpointRegistrationFailed"},M.CLIENT_VERSION="2024.14.01.55",M.HANDLED_MESSAGE_ACK=200,M.UNHANDLED_MESSAGE_ACK=404,M.FAILED_MESSAGE_ACK=500,M.SUPPORTED_TOKEN_TYPES=["skype","aad","cae"],M.USER_AUTHENTICATE_EVENT_NAME="user.authenticate"},function(H,M,X){Object.defineProperty(M,"__esModule",{value:!0}),M.TrouterState=M.UserActivityState=void 0;var z;(function(x){x[x.Unknown=0]="Unknown",x[x.Active=1]="Active",x[x.Inactive=2]="Inactive"})(z||(M.UserActivityState=z={}));var K;(function(x){x[x.Unknown=0]="Unknown",x[x.Connected=2]="Connected",x[x.Disconnected=3]="Disconnected",x[x.Switching=9]="Switching"})(K||(M.TrouterState=K={}))},function(H,M,X){function z(N){try{return JSON.stringify(N)}catch{return"Unable to serialize object of type ".concat(typeof N)}}function K(N){var w=Math.round(new Date().getTime()/1e3);return N!==void 0&&N>w?N-w:0}function x(N){return Math.round(new Date().getTime()/1e3)+N}function P(N,w){return T(this,void 0,void 0,function(){var R,A,q;return b(this,function(J){return A=new Promise(function(V,B){fetch(N).then(function(ae){clearTimeout(R),V(ae)}).catch(function(ae){clearTimeout(R),B(ae)})}),w!==0?(q=new Promise(function(V,B){var ae=new URL(N.url),he=new Error("".concat(N.method," ").concat(ae.origin).concat(ae.pathname," timed out"));R=setTimeout(B,w,he)}),[2,Promise.race([A,q])]):[2,A]})})}var T=this&&this.__awaiter||function(N,w,R,A){function q(J){return J instanceof R?J:new R(function(V){V(J)})}return new(R||(R=Promise))(function(J,V){function B(ie){try{he(A.next(ie))}catch(I){V(I)}}function ae(ie){try{he(A.throw(ie))}catch(I){V(I)}}function he(ie){ie.done?J(ie.value):q(ie.value).then(B,ae)}he((A=A.apply(N,w||[])).next())})},b=this&&this.__generator||function(N,w){function R(he){return function(ie){return A([he,ie])}}function A(he){if(q)throw new TypeError("Generator is already executing.");for(;B&&(B=0,he[0]&&(ae=0)),ae;)try{if(q=1,J&&(V=2&he[0]?J.return:he[0]?J.throw||((V=J.return)&&V.call(J),0):J.next)&&!(V=V.call(J,he[1])).done)return V;switch(J=0,V&&(he=[2&he[0],V.value]),he[0]){case 0:case 1:V=he;break;case 4:return ae.label++,{value:he[1],done:!1};case 5:ae.label++,J=he[1],he=[0];continue;case 7:he=ae.ops.pop(),ae.trys.pop();continue;default:if(V=ae.trys,!(V=V.length>0&&V[V.length-1])&&(he[0]===6||he[0]===2)){ae=0;continue}if(he[0]===3&&(!V||he[1]>V[0]&&he[1]<V[3])){ae.label=he[1];break}if(he[0]===6&&ae.label<V[1]){ae.label=V[1],V=he;break}if(V&&ae.label<V[2]){ae.label=V[2],ae.ops.push(he);break}V[2]&&ae.ops.pop(),ae.trys.pop();continue}he=w.call(N,ae)}catch(ie){he=[6,ie],J=0}finally{q=V=0}if(5&he[0])throw he[1];return{value:he[0]?he[1]:void 0,done:!0}}var q,J,V,B,ae={label:0,sent:function(){if(1&V[0])throw V[1];return V[1]},trys:[],ops:[]};return B={next:R(0),throw:R(1),return:R(2)},typeof Symbol=="function"&&(B[Symbol.iterator]=function(){return this}),B};Object.defineProperty(M,"__esModule",{value:!0}),M.Timespan=M.CorrelationVector=M.fetchWithTimeout=M.calculateExpireTsInSec=M.calculateTtlInSec=M.toJson=void 0,M.toJson=z,M.calculateTtlInSec=K,M.calculateExpireTsInSec=x,M.fetchWithTimeout=P;var S=(function(){function N(w){this.base=w!==void 0?w:this.createCorrelationVectorBase(),this.extension=0}return N.extend=function(w){return new N(w)},N.prototype.increase=function(){this.extension++},N.prototype.value=function(){return"".concat(this.base,".").concat(this.extension)},N.prototype.createCorrelationVectorBase=function(){for(var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0987654321/+",R="AQgw",A="",q=0;q<21;q++)A+=w.charAt(Math.floor(Math.random()*w.length));return A+=R.charAt(Math.floor(Math.random()*R.length))},N})();M.CorrelationVector=S;var _=(function(){function N(){this.start=Date.now()}return Object.defineProperty(N.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"startTime",{get:function(){return this.start},enumerable:!1,configurable:!0}),N.prototype.reset=function(){this.start=Date.now()},N})();M.Timespan=_},function(H,M,X){Object.defineProperty(M,"__esModule",{value:!0}),M.TrouterManagerState=M.UserActivityEventReason=M.ServerState=void 0;var z=X(3),K=(function(){function T(b,S,_,N,w,R,A){this.connectionId=b,this.connectedClientId=S,this.domId=_,this.unsecureUrl=N,this.url=w,this.c2cUrlBase=R,this.expirationTsSec=A}return T.prototype.getRemainingTtlInSec=function(){return(0,z.calculateTtlInSec)(this.expirationTsSec)},T})();M.ServerState=K;var x;(function(T){T[T.Unknown=0]="Unknown",T[T.Modified=1]="Modified",T[T.Snapshot=2]="Snapshot",T[T.Connected=3]="Connected"})(x||(M.UserActivityEventReason=x={}));var P;(function(T){T[T.Unknown=0]="Unknown",T[T.Connected=2]="Connected",T[T.Disconnected=3]="Disconnected",T[T.Switching=9]="Switching",T[T.TerminalError=10]="TerminalError"})(P||(M.TrouterManagerState=P={}))},function(H,M,X){function z(w,R){return w==="skype"&&K(R?.scae)!=="1"?"v4a":"v4c"}function K(w){return typeof w=="string"?w:typeof w=="number"?w.toString():void 0}function x(w,R){return R?.kind==="v4c-websocket-failure"?"v4a":w}function P(w){return Object.prototype.hasOwnProperty.call(w,"connectparams")}function T(w,R){return R==="v4a"?w.replace(/\/v4\/c\b/,"/v4/a").replace("wss://","https://").replace("ws://","http://"):w.replace(/\/v4\/a\b/,"/v4/c").replace("https://","wss://").replace("http://","ws://")}function b(w){if(w!==void 0)return N(N({},w),{reconnectUrl:void 0,serviceUrl:void 0})}function S(w){return typeof w=="string"?parseInt(w,10):w}function _(w){if(w?.kind==="redirect"&&w.host!==void 0){var R=w.host;return R.endsWith("/")&&(R=R.substring(0,R.length-1)),R.endsWith("/v4/c")||R.endsWith("/v4/a")||(R+="/v4/c"),R}}var N=this&&this.__assign||function(){return N=Object.assign||function(w){for(var R,A=1,q=arguments.length;A<q;A++){R=arguments[A];for(var J in R)Object.prototype.hasOwnProperty.call(R,J)&&(w[J]=R[J])}return w},N.apply(this,arguments)};Object.defineProperty(M,"__esModule",{value:!0}),M.redirectUrlIfPresent=M.ensureNumber=M.reconnectParamsWithoutUrls=M.adaptUrl=M.isV4ConnectEvent=M.usedProtocolAfterFallback=M.usedProtocol=void 0,M.usedProtocol=z,M.usedProtocolAfterFallback=x,M.isV4ConnectEvent=P,M.adaptUrl=T,M.reconnectParamsWithoutUrls=b,M.ensureNumber=S,M.redirectUrlIfPresent=_},function(H,M,X){Object.defineProperty(M,"__esModule",{value:!0}),M.TrouterFsm=M.State=void 0;var z,K=X(4),x=X(0),P=X(5);(function(S){S[S.Initial=0]="Initial",S[S.RetrievingToken=1]="RetrievingToken",S[S.Allocating=2]="Allocating",S[S.Handshaking=3]="Handshaking",S[S.Connecting=4]="Connecting",S[S.AnonymousConnecting=5]="AnonymousConnecting",S[S.WebsocketAuthenticating=6]="WebsocketAuthenticating",S[S.Connected=7]="Connected",S[S.Unregistering=8]="Unregistering",S[S.TerminalError=9]="TerminalError"})(z||(M.State=z={}));var T;(function(S){S[S.Initial=0]="Initial",S[S.Registering=1]="Registering",S[S.RegisteringButResendPending=2]="RegisteringButResendPending",S[S.Retrying=3]="Retrying",S[S.Registered=4]="Registered",S[S.RegistrationDisabled=5]="RegistrationDisabled"})(T||(T={}));var b=(function(){function S(_,N,w,R){this.worker=N,this.incallModeEnabled=w,this.protocolSelector=R,this.state=z.Initial,this.autoReconnect=!0,this.logger=new x.Logger("ConnectionFsm",_),this.registrationState=T.Initial}return S.prototype.getState=function(){return this.state},S.prototype.isActive=function(){return this.state===z.Allocating||this.state===z.Connected||this.state===z.Handshaking||this.state===z.Connecting||this.state===z.RetrievingToken||this.state===z.AnonymousConnecting||this.state===z.WebsocketAuthenticating},S.prototype.isConnecting=function(){return this.state===z.Allocating||this.state===z.Handshaking||this.state===z.Connecting||this.state===z.AnonymousConnecting},S.prototype.start=function(){return this.state===z.Initial?(this.setState(z.RetrievingToken),this.worker.getToken(!0,!1,void 0),!0):(this.showIgnored("start"),!1)},S.prototype.stop=function(_,N){_&&(this.registrationState=T.Initial),this.worker.isIncallMode()&&this.worker.exitIncallMode(),this.worker.resetTokenBackoff(),this.worker.cancelPendingRegistrationRequests(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearSentEventTimers(),this.worker.stopRegistrationTimer(),this.worker.stopSocketIo(),this.state===z.Connected&&this.worker.sendDisconnectTelemetryEvent("connection stopped"),this.registrationState!==T.Registered&&this.registrationState!==T.Registering&&this.registrationState!==T.RegisteringButResendPending||this.state===z.Unregistering?N?(this.setState(z.TerminalError),this.worker.dispatchTerminalError()):(this.setState(z.Initial),this.worker.dispatchDisconnected()):(this.registrationState=T.Initial,this.setState(z.Unregistering),this.worker.sendUnregisterRequest())},S.prototype.onTokenReceived=function(_,N,w){this.state===z.RetrievingToken?(0,P.usedProtocolAfterFallback)(this.protocolSelector(_.tokenType,w),N)==="v4c"?(this.setState(z.AnonymousConnecting),this.worker.startConnectionTimer(),this.worker.connectV4c(_,N)):(this.setState(z.Allocating),this.worker.startConnectionTimer(),this.worker.sendAllocateRequest(_)):this.showIgnored("onTokenReceived")},S.prototype.checkConnection=function(_){_&&this.onPingInterval()},S.prototype.onAllocationSucceed=function(_){return this.state===z.Allocating&&this.registrationState===T.Registered&&this.worker.dispatchUnregistered(),this.state===z.Allocating?(this.setState(z.Handshaking),this.registrationState=T.Initial,this.worker.startSocketIo(_),!0):(this.showIgnored("onAllocationSucceed"),!1)},S.prototype.onAllocationFailed=function(_,N){this.state===z.Allocating?this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!_,claimsChallenge:N}):this.showIgnored("onAllocationFailed")},S.prototype.onV4cException=function(){this.state!==z.AnonymousConnecting&&this.state!==z.WebsocketAuthenticating||(this.logger.error("v4c exception, falling back to longpoll"),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"v4c-websocket-failure"}}))},S.prototype.onConnectingTimeout=function(){this.state===z.Allocating||this.state===z.Connecting||this.state===z.Handshaking||this.state===z.AnonymousConnecting||this.state===z.WebsocketAuthenticating?this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0}):this.showIgnored("onConnectingTimeout")},S.prototype.onConnecting=function(){this.state===z.Handshaking?this.setState(z.Connecting):this.showIgnored("onConnecting")},S.prototype.onSocketConnect=function(_){this.state===z.AnonymousConnecting?(this.setState(z.WebsocketAuthenticating),this.worker.sendV4cAuthenticationEvent(_)):this.showIgnored("onSocketConnect")},S.prototype.onConnectingFailed=function(){this.state===z.Connecting?this.onConnectingTimeout():this.state===z.Handshaking?(this.logger.error("Unexpected error in Socket.io - no valid transports"),this.onConnectingTimeout()):this.state===z.AnonymousConnecting||this.state===z.WebsocketAuthenticating?(this.logger.info("/v4/c falling back to longpoll"),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"v4c-websocket-failure"}})):this.showIgnored("onConnectingFailed")},S.prototype.onSocketDisconnect=function(_){this.state===z.Handshaking||this.state===z.Connected||this.state===z.WebsocketAuthenticating?(this.state===z.Connected&&this.worker.sendDisconnectTelemetryEvent(_?.toTelemetryString()),this.state===z.WebsocketAuthenticating&&this.worker.countDisconnectBeforeConnectionEstablishment(),_?.reason==="skypetoken-deprecated"?(this.logger.error("Skypetoken deprecated response, not retrying any further"),this.onTerminalError()):this.cleanUpAndInitiateReconnect({backoff:this.state!==z.Connected&&_?.reason!=="dup",allowCachedToken:_?.reason!=="unauthorized",claimsChallenge:_?.claims})):this.showIgnored("onSocketDisconnect")},S.prototype.onTrouterConnected=function(){this.state===z.Connecting||this.state===z.WebsocketAuthenticating?(this.setState(z.Connected),this.worker.resetTokenBackoff(),this.worker.stopConnectionTimer(),this.worker.sendUserActivityState(K.UserActivityEventReason.Connected,!0),this.worker.startPingTimer(),this.worker.dispatchConnected(),this.worker.shouldSkipRegistration()?(this.registrationState=T.RegistrationDisabled,this.worker.dispatchRegistered()):(this.registrationState=T.Registering,this.worker.sendRegisterRequest())):this.showIgnored("onTrouterConnected")},S.prototype.onReconnectRequired=function(_,N,w){this.state===z.AnonymousConnecting||this.state===z.WebsocketAuthenticating?w===void 0||w.target!=="host"||w.url===void 0||w.url===""?(this.logger.error("unexpected reconnect arguments: ".concat(w?.target," ").concat(w?.url,", reconnecting without cache")),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"redirect-no-host"}})):this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"redirect",host:w.url}}):this.worker.dispatchReconnectIsRequired(_,N)},S.prototype.disableAutoReconnect=function(){this.autoReconnect=!1},S.prototype.onDownstreamRequest=function(_){this.state===z.Connected?(this.switchToIncallModeIfEnabled(),this.worker.dispatchDownstreamRequest(_)):this.showIgnored("onDownstreamRequest")},S.prototype.onTrouterMessageLost=function(_){this.state===z.Connected?this.worker.dispatchTrouterMessageLost(_):this.showIgnored("onTrouterMessageLost")},S.prototype.onPingInterval=function(){this.state===z.Connected?this.worker.sendPingRequest():this.showIgnored("onPingInterval")},S.prototype.onPingResponseTimeout=function(){this.onMissedResponse("onPingResponseTimeout")},S.prototype.onPingResponse=function(){this.state===z.Connected||this.showIgnored("onPingResponse")},S.prototype.onRegistrationFailed=function(){this.state===z.Connected&&this.registrationState===T.Registering?(this.worker.dispatchUnregistered(),this.registrationState=T.Retrying,this.worker.startRegistrationRetryTimer()):this.state===z.Connected&&this.registrationState===T.RegisteringButResendPending?(this.registrationState=T.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationFailed")},S.prototype.onRetryRegistration=function(){this.state===z.Connected&&this.registrationState===T.Retrying?(this.registrationState=T.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRetryRegistration")},S.prototype.onRegistrationSucceeded=function(){this.state===z.Connected&&this.registrationState===T.Registering?(this.registrationState=T.Registered,this.worker.dispatchRegistered(),this.worker.startRegistrationTimer()):this.state===z.Connected&&this.registrationState===T.RegisteringButResendPending?(this.registrationState=T.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationSucceeded")},S.prototype.onRegistrationNearExpiry=function(){this.state===z.Connected&&this.registrationState===T.Registered?(this.registrationState=T.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationNearExpiry")},S.prototype.onUnregistrationDone=function(){this.state===z.Unregistering?(this.setState(z.Initial),this.worker.dispatchUnregistered(),this.worker.dispatchDisconnected()):this.showIgnored("onUnregistrationDone")},S.prototype.onResendRegistration=function(){this.worker.dispatchUnregistered(),this.state===z.Connected&&this.registrationState===T.Registered?(this.registrationState=T.Registering,this.worker.stopRegistrationTimer(),this.worker.sendRegisterRequest()):this.state===z.Connected&&this.registrationState===T.Registering&&(this.registrationState=T.RegisteringButResendPending)},S.prototype.onIncallModeTimer=function(){this.worker.exitIncallMode(),this.state===z.Connected?(this.worker.stopPingTimer(),this.worker.startPingTimer()):this.showIgnored("onIncallModeTimer")},S.prototype.onSetNewUserActivityState=function(){this.worker.sendUserActivityState(K.UserActivityEventReason.Modified,this.state===z.Connected)},S.prototype.onActivityStateResponseTimeout=function(){this.onMissedResponse("onActivityStateResponseTimeout")},S.prototype.forceReconnect=function(_){this.state===z.Connected&&this.worker.sendDisconnectTelemetryEvent(_),this.worker.resetTokenBackoff(),this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0})},S.prototype.onTerminalError=function(){this.logger.error("Cannot proceed, reached terminal state. Switching from state '".concat(z[this.state],"' to ").concat(z[z.TerminalError])),this.stop(!0,!0),this.setState(z.TerminalError)},S.prototype.onMissedResponse=function(_){this.state===z.Connected?(this.worker.sendDisconnectTelemetryEvent(_),this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0})):this.showIgnored(_)},S.prototype.showIgnored=function(_){this.logger.debug("Ignoring event '".concat(_,"' in state '").concat(z[this.state],"'"))},S.prototype.setState=function(_){if(this.logger.info("Switching from state '".concat(z[this.state],"' to state '").concat(z[_],"'")),this.state===_)return void this.logger.error("Attempt to switch to the current state '".concat(z[_],"'"));this.state=_},S.prototype.switchToIncallModeIfEnabled=function(){this.incallModeEnabled&&(this.worker.isIncallMode()||(this.worker.enterIncallMode(),this.worker.stopPingTimer(),this.worker.startPingTimer()),this.worker.restartIncallModeTimer())},S.prototype.cleanUpAndInitiateReconnect=function(_){if(!this.autoReconnect)return this.logger.info("Automatic reconnect is disabled, stopping this connection"),void this.stop(!0);this.worker.cancelPendingRegistrationRequests(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearSentEventTimers(),this.worker.stopRegistrationTimer(),this.worker.stopSocketIo(),this.setState(z.RetrievingToken),this.worker.dispatchReconnecting(),this.worker.getToken(_.allowCachedToken,_.backoff,_.claimsChallenge,_.fallbackReason)},S})();M.TrouterFsm=b},function(H,M,X){function z(j,C){var D=C?void 0:{"X-MS-Migration":"True"};switch(j.tokenType.toLowerCase()){case"skype":return T({"X-Skypetoken":j.token},D);case"aad":case"cae":return T({Authorization:"Bearer ".concat(j.token)},D);default:throw new Error("unsupported token type: ".concat(j.tokenType))}}function K(j){return j!=null&&typeof j.toString=="function"?j.toString():"[".concat(typeof j,"]")}function x(j){return typeof j=="object"&&j!==null&&j.stack!==void 0?(0,w.toJson)(j.stack):'"(no error.stack)"'}function P(j){return typeof j=="object"&&j!==null&&typeof j.message=="string"?j.message:"(no error.message)"}var T=this&&this.__assign||function(){return T=Object.assign||function(j){for(var C,D=1,ne=arguments.length;D<ne;D++){C=arguments[D];for(var $ in C)Object.prototype.hasOwnProperty.call(C,$)&&(j[$]=C[$])}return j},T.apply(this,arguments)},b=this&&this.__awaiter||function(j,C,D,ne){function $(se){return se instanceof D?se:new D(function(Se){Se(se)})}return new(D||(D=Promise))(function(se,Se){function Ie(ze){try{Ue(ne.next(ze))}catch(ct){Se(ct)}}function Oe(ze){try{Ue(ne.throw(ze))}catch(ct){Se(ct)}}function Ue(ze){ze.done?se(ze.value):$(ze.value).then(Ie,Oe)}Ue((ne=ne.apply(j,C||[])).next())})},S=this&&this.__generator||function(j,C){function D(Ue){return function(ze){return ne([Ue,ze])}}function ne(Ue){if($)throw new TypeError("Generator is already executing.");for(;Ie&&(Ie=0,Ue[0]&&(Oe=0)),Oe;)try{if($=1,se&&(Se=2&Ue[0]?se.return:Ue[0]?se.throw||((Se=se.return)&&Se.call(se),0):se.next)&&!(Se=Se.call(se,Ue[1])).done)return Se;switch(se=0,Se&&(Ue=[2&Ue[0],Se.value]),Ue[0]){case 0:case 1:Se=Ue;break;case 4:return Oe.label++,{value:Ue[1],done:!1};case 5:Oe.label++,se=Ue[1],Ue=[0];continue;case 7:Ue=Oe.ops.pop(),Oe.trys.pop();continue;default:if(Se=Oe.trys,!(Se=Se.length>0&&Se[Se.length-1])&&(Ue[0]===6||Ue[0]===2)){Oe=0;continue}if(Ue[0]===3&&(!Se||Ue[1]>Se[0]&&Ue[1]<Se[3])){Oe.label=Ue[1];break}if(Ue[0]===6&&Oe.label<Se[1]){Oe.label=Se[1],Se=Ue;break}if(Se&&Oe.label<Se[2]){Oe.label=Se[2],Oe.ops.push(Ue);break}Se[2]&&Oe.ops.pop(),Oe.trys.pop();continue}Ue=C.call(j,Oe)}catch(ze){Ue=[6,ze],se=0}finally{$=Se=0}if(5&Ue[0])throw Ue[1];return{value:Ue[0]?Ue[1]:void 0,done:!0}}var $,se,Se,Ie,Oe={label:0,sent:function(){if(1&Se[0])throw Se[1];return Se[1]},trys:[],ops:[]};return Ie={next:D(0),throw:D(1),return:D(2)},typeof Symbol=="function"&&(Ie[Symbol.iterator]=function(){return this}),Ie};Object.defineProperty(M,"__esModule",{value:!0}),M.TrouterConnection=M.ReconnectReason=void 0;var _,N=X(21),w=X(3),R=X(15),A=X(1),q=X(16),J=X(17),V=X(2),B=X(4),ae=X(0),he=X(5),ie=X(6),I=X(12),W=(function(){function j(){this.cv=A.CLIENT_VERSION,this.ua="",this.hr="",this.v=""}return j})(),te=(function(){function j(){this["force new connection"]=!0,this.reconnect=!1,this.query="",this.ackTimeoutMs=5e3}return j.prototype.rewriteUrlForProxy=function(C){return C},j})(),ge="MS-CV",we=(function(){function j(C,D){this.logger=D,this.cvCounter=0;var ne=JSON.parse(C);this.startTS=this.safeJsonNumber(ne,"startTS",0),this.url=this.safeJsonString(ne,"url",""),this.shortUrl=this.safeJsonString(ne,"shortUrl",""),this.body=this.safeJsonString(ne,"body",""),this.headers=this.safeJsonRecord(ne,"headers",{}),this.id=this.safeJsonNumber(ne,"id",-1),this.method=this.safeJsonString(ne,"method",""),this.replied=!1,this.timedout=!1,this.receivedCv=this.headers[ge],this.updateCvHeader()}return Object.defineProperty(j.prototype,"correlationVector",{get:function(){return this.receivedCv?"".concat(this.receivedCv,".").concat(this.cvCounter):""},enumerable:!1,configurable:!0}),j.prototype.on=function(C,D){C==="data"?this.dataCallback=D:C==="end"&&(typeof this.dataCallback=="function"&&this.dataCallback(this.body),D())},j.prototype.incrementCorrelationVector=function(){++this.cvCounter,this.updateCvHeader()},j.prototype.updateCvHeader=function(){var C=this.correlationVector;C&&(this.headers[ge]=C)},j.prototype.safeJsonNumber=function(C,D,ne){var $;if(C!=null&&Object.prototype.hasOwnProperty.call(C,D)){var se=C;if(typeof se[D]=="number")return se[D];if(typeof se[D]=="string")return parseFloat(se[D]);($=this.logger)===null||$===void 0||$.warn("unexpected type of '".concat(D,"': ").concat(typeof se[D]))}return ne},j.prototype.safeJsonString=function(C,D,ne){var $;if(C!=null&&Object.prototype.hasOwnProperty.call(C,D)){var se=C;if(typeof se[D]=="string")return se[D];($=this.logger)===null||$===void 0||$.warn("unexpected type of '".concat(D,"': ").concat(typeof se[D]))}return ne},j.prototype.safeJsonRecord=function(C,D,ne){var $;if(C!=null&&Object.prototype.hasOwnProperty.call(C,D)){var se=C;if(typeof se[D]=="object")return se[D];($=this.logger)===null||$===void 0||$.warn("unexpected type of '".concat(D,"': ").concat(typeof se[D]))}return ne},j})(),Ae=(function(){function j(C,D,ne){this.request=C,this.responseData=D,this.sendResponse=ne}return j.prototype.writeHead=function(C,D){this.responseData.status=C,this.responseData.headers=D},j.prototype.write=function(C){this.responseData.body+=C},j.prototype.end=function(C){return C&&(this.responseData.body+=C),this.sendResponse(this.request,this.responseData)},j})(),He=(function(){function j(C){this.name=C,this.args={},this.timeoutTimerId=0}return j})();(function(j){j[j.Configuration=0]="Configuration",j[j.ServerInitiated=1]="ServerInitiated"})(_||(M.ReconnectReason=_={}));var Ge=(function(){function j(C,D,ne,$,se,Se,Ie,Oe){var Ue,ze=this;this.options=D,this.manager=ne,this.tokenProvider=$,this.usingLegacyTokenApi=se,this.protocolSelector=Ie,this.audienceSubscriptionState=Oe,this.WEBSOCKET_TRANSPORT_NAME="websocket",this.XHR_POLLING_TRANSPORT_NAME="xhr-polling",this.AUDIENCE_SUBSCRIPTION_RESULT_ERROR="Error",this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED="Unsubscribed",this.AUDIENCE_SUBSCRIPTION_RESULT_TIMEOUT="Timeout",this.AUDIENCE_SUBSCRIPTION_RESULT_BAD_REQUEST="BadRequest",this.AUDIENCE_SUBSCRIPTION_STATE_QUERY_PARAM_REGEX=/&audienceSubscriptionState=[^&]*|^audienceSubscriptionState=[^&]*&?/,this.connectionId="",this.inIncallMode=!1,this.connectionAttempt=0,this.connectedClientId="",this.isNavigatorOnline=!0,this.onNavigatorOnlineStatusUpdateBound=this.onNavigatorOnlineStatusUpdate.bind(this),this.c2cUrlBase="",this.connectingErrorsInRow=0,this.unauthorizedErrorCount=0,this.pendingSentEventTimers={},this.lastDisconnectReason="",this.UNKNOWN_TRANSPORT="unknown_transport",this.connectingErrorsThreshold=3,this.pendingAudienceSubscription=void 0,this.logger=new ae.Logger("Connection",C),this.timeoutOptions=this.options.timeoutOptions,this.tokenBackoff=new J.ExponentialBackoff(this.logger,this.timeoutOptions.maxBackoffMs),this.clientID=Date.now(),typeof window<"u"&&window.location&&(this.domId=window.location.hostname);var ct=new W;ct.cv=A.CLIENT_VERSION,ct.ua="",!((Ue=this.options)===null||Ue===void 0)&&Ue.clientInfo&&(ct.ua=this.safeString(this.options.clientInfo.ua),ct.v=this.safeString(this.options.clientInfo.v)),this.clientInfo=ct,this.connectionTracker=new R.ConnectionTracker(C,this.clientID,this.clientInfo,function(){return ze.getServerState()},this.options.endpointId,this.options.clientCorrelationID,this.options.environment),this.applyConnectionTrackerOptions(D);var xt=this.options.incallModeTimeoutMs>0;if(this.fsm=new ie.TrouterFsm(C,this,xt,this.protocolSelector),D.registration){var It={registrarUrl:D.registration.registrarUrl,proxyUrlRewrite:D.rewriteUrlForProxy,registrationId:D.registration.registrationId,requestTimeoutMs:D.timeoutOptions.fetchTimeoutMs,initialRetryDelayMs:1e3,maxRetryDelayMs:D.timeoutOptions.maxBackoffMs,usingLegacyTokenApi:this.usingLegacyTokenApi,maxRetriesForGetToken:D.retryLimitOnTokenFetch,extraRegistrationHeaders:D.extraConnectionHeaders};this.registrarClient=(0,N.createRegistrarClient)(C,this.tokenProvider,It)}this.userActivityState=Se}return j.prototype.start=function(C){this.logger.info("Starting"),this.reconnectParams=C,typeof window<"u"&&window.navigator&&window.addEventListener?(this.isNavigatorOnline=window.navigator.onLine,window.addEventListener("online",this.onNavigatorOnlineStatusUpdateBound),window.addEventListener("offline",this.onNavigatorOnlineStatusUpdateBound),this.logger.debug("Registered for browser online notifications - current state: ".concat(this.isNavigatorOnline))):this.isNavigatorOnline=!0,this.fsm.start()},j.prototype.stop=function(C){this.logger.info("Stopping"),typeof window<"u"&&window.navigator&&(window.removeEventListener("online",this.onNavigatorOnlineStatusUpdateBound),window.removeEventListener("offline",this.onNavigatorOnlineStatusUpdateBound)),this.fsm.stop(C),this.connectionTracker.close()},j.prototype.configure=function(C){var D=this.options.trouterUrl!==C.trouterUrl;this.options=C,this.applyConnectionTrackerOptions(C),D&&(this.logger.info("Configuration changed. Reconnection required."),this.fsm.onReconnectRequired(!1,_.Configuration))},j.prototype.checkConnection=function(C){this.logger.info("checkConnection called with ".concat(C)),this.fsm.checkConnection(C),C&&this.connectionTracker.sendTelemetry(R.ClientEventName.CheckConnection,{disconnectDetected:C},[])},j.prototype.disableRegistrationsAndAutoReconnect=function(){this.stopRegistrationTimer(),this.cancelPendingRegistrationRequests(),this.fsm.disableAutoReconnect()},j.prototype.getServerState=function(){return new B.ServerState(this.connectionId,this.connectedClientId,this.domId?this.domId:"",this.allocateResult?this.allocateResult.url:"",this.allocateResult?this.allocateResult.surl:"",this.c2cUrlBase,this.connectionExpireTimestampInSecs)},j.prototype.getState=function(){return this.fsm.getState()},j.prototype.getToken=function(C,D,ne,$,se){var Se=this;se===void 0&&(se=0),this.logger.info("Getting token ".concat(D?"with backoff":"without backoff"));var Ie=function(){Se.connectionTracker.trackStart("token");var Oe={needFresh:!C,wwwAuthenticateHeader:ne,supportedTokenTypes:A.SUPPORTED_TOKEN_TYPES,purpose:"trouter"};Se.logger.info("Requesting token: needFresh=".concat(Oe.needFresh," ")+"types=[".concat(A.SUPPORTED_TOKEN_TYPES,"], ")+"wwwAuthenticateHeader is ".concat(Oe.wwwAuthenticateHeader?"non empty":"empty")),Se.tokenProvider(Oe).then(function(Ue){Se.logger.debug("".concat(Ue.tokenType," token is received")),Se.connectionTracker.trackEnd("token"),Se.fsm.onTokenReceived(Ue,$,Se.reconnectParams)}).catch(function(Ue){var ze=(0,w.toJson)(Ue.stack);if(Se.logger.error("Getting token failed, will retry after timeout. Error: ".concat(ze)),Se.connectionTracker.trackError("token",ze),!Se.canRetryTokenFetchRequest(se+Se.unauthorizedErrorCount))return Se.connectionTracker.trackError("token","getToken retry limit hit, reached terminal error state"),Se.resetTokenBackoff(),void Se.fsm.onTerminalError();Se.getToken(C,!0,ne,$,se+1)})};D?this.tokenBackoff.backoff("getting token",Ie):(this.resetTokenBackoff(),Ie())},j.prototype.startConnectionTimer=function(){var C=this;this.stopConnectionTimer(),this.logger.debug("Starting connection timeout for ".concat(this.timeoutOptions.connectionTimeoutMs," ms")),this.connectionTimeoutId=setTimeout(function(){C.logger.info("Connection timeout is fired"),C.fsm.onConnectingTimeout()},this.timeoutOptions.connectionTimeoutMs)},j.prototype.stopConnectionTimer=function(){this.connectionTimeoutId&&(this.logger.debug("Stopping connection timeout"),clearTimeout(this.connectionTimeoutId),this.connectionTimeoutId=void 0)},j.prototype.startPingTimer=function(){var C=this;this.transportTypeName==="websocket"?(this.logger.debug("Starting ping timeout for ".concat(this.timeoutOptions.pingTimeoutMs," ms")),this.pingTimerId=setInterval(function(){C.logger.info("Ping interval fired"),C.fsm.onPingInterval()},this.timeoutOptions.pingTimeoutMs)):this.logger.debug("Not starting ping for transport ".concat(this.transportTypeName))},j.prototype.stopPingTimer=function(){this.pingTimerId&&(this.logger.debug("Stopping ping timeout"),this.clearPingResponseTimer(),clearInterval(this.pingTimerId),this.pingTimerId=void 0)},j.prototype.shouldSkipRegistration=function(){return this.options.registration===void 0},j.prototype.hasCustomRegistrationTtl=function(){var C,D;return((C=this.options.registration)===null||C===void 0?void 0:C.registrarTtlSec)!==void 0&&((D=this.options.registration)===null||D===void 0?void 0:D.registrarTtlSec)!==0},j.prototype.startRegistrationTimer=function(){var C=this;this.stopRegistrationTimer();var D=this.getRegistrationTtl(),ne=D[0],$=D[1];if(ne<=30||!$)return this.logger.debug("Starting registration expiration timer (TTL ".concat(ne," sec)")),void(this.registrationTimerId=setTimeout(function(){C.registrationTimerId=void 0,C.logger.warn("Registration expired but the connection is still alive. Should never happen"),C.dispatchUnregistered()},1e3*ne));var se=ne-30;this.logger.debug("Starting registration extension timer for ".concat(se," sec")),this.registrationTimerId=setTimeout(function(){C.logger.info("Registration extension timer fired"),C.registrationTimerId=setTimeout(function(){C.registrationTimerId=void 0,C.logger.debug("Registration extension did not happen in time"),C.dispatchUnregistered()},3e4),C.fsm.onRegistrationNearExpiry()},1e3*se)},j.prototype.startRegistrationRetryTimer=function(){var C=this;this.stopRegistrationTimer(),this.registrationTimerId=setTimeout(function(){C.registrationTimerId=void 0,C.fsm.onRetryRegistration()},123e3)},j.prototype.stopRegistrationTimer=function(){this.registrationTimerId&&(this.logger.debug("Stopping registration timeout"),clearTimeout(this.registrationTimerId),this.registrationTimerId=void 0)},j.prototype.resendRegistration=function(){if(!this.registrarClient)throw new Error("Trouter Client not configured to handle registrations");return this.fsm.onResendRegistration(),Promise.resolve()},j.prototype.buildSocketIoUrlParams=function(C,D){if(!this.allocateResult)throw new Error("Allocate result is undefined in buildSocketIoUrlParams()");for(var ne={},$=this.allocateResult.connectparams,se=0,Se=Object.keys($);se<Se.length;se++){var Ie=Se[se];if($[Ie]!==void 0){var Oe=$[Ie];typeof Oe=="string"||typeof Oe=="number"?ne[Ie]=Oe:this.logger.error("signatureData[".concat(Ie,"] has unsupported type ").concat(typeof Oe))}}return ne.v="v4",ne.tc=encodeURI((0,w.toJson)(this.clientInfo)),ne.timeout=this.timeoutOptions.pingTimeoutMs/1e3,ne.auth="true",this.options.endpointId&&(ne.epid=this.options.endpointId),C&&(ne.userActivity=encodeURI((0,w.toJson)(C))),D&&(ne.audienceSubscriptionState=encodeURIComponent((0,w.toJson)(D))),this.appendConnectedClientIds(this.buildQuery(ne),!0)},j.prototype.startSocketIo=function(C){var D,ne;if(this.logger.debug("Starting socket io"),this.connectionTracker.trackStart("connectSocket"),!this.allocateResult)throw new Error("Allocate result is undefined in startSocketIo()");var $=this.options.ioOptions?T({},this.options.ioOptions):new te,se=this.userActivityState.state!==V.UserActivityState.Unknown?this.userActivityState.increaseCvAndGetEventObject():void 0,Se=(D=this.audienceSubscriptionState)===null||D===void 0?void 0:D.increaseCvAndGetEventObject();if($["force new connection"]=!0,$.reconnect=!1,$.rewriteUrlForProxy=this.options.rewriteUrlForProxy,$.requestHeaders=T(T({},this.options.extraConnectionHeaders),z(C,this.usingLegacyTokenApi)),$.query=this.buildSocketIoUrlParams(se,Se),this.logger.info("connecting to ".concat(this.allocateResult.socketio,"?").concat($.query)),this.stopSocketIo(),this.socket=((ne=this.options.io)!==null&&ne!==void 0?ne:I).connect(this.allocateResult.socketio,$),this.socket===void 0)throw new Error("Can't create Socket.io object");this.attachSocketIoHandlers(this.socket,C,se,Se)},j.prototype.stopSocketIo=function(){if(this.socket){this.logger.debug("clearing socket.io");try{for(var C=0,D=["connecting","connect","connect_failed","close_during_connecting","disconnect","reconnect","reconnect_failed","reconnecting","error","message","trouter.connected","trouter.reconnect","trouter.message_loss"];C<D.length;C++){var ne=D[C];this.socket.removeAllListeners(ne)}this.socket.disconnect(),this.logger.debug("cleared socket"),this.socket=void 0}catch($){this.logger.error("exception in disconnecting previous socket. Error: ".concat(x($)))}}},j.prototype.dispatchConnected=function(){this.logger.info("dispatching connected"),this.manager.onConnected(this)},j.prototype.dispatchRegistered=function(){this.logger.info("dispatching registered"),this.manager.onRegistered(this)},j.prototype.dispatchUnregistered=function(){this.logger.info("dispatching unregistered"),this.manager.onUnregistered(this)},j.prototype.dispatchDownstreamRequest=function(C){var D=this;this.logger.debug("dispatching downstream request");try{var ne=new Ae(C,new R.ResponseData(C.id),function($,se){return D.logger.debug("sending response to downstream"),D.sendResponse($,se)});this.manager.onDownstreamRequest(this,C,ne)}catch($){this.logger.error("exception in socket.on message. Error : ".concat(x($)))}},j.prototype.dispatchReconnecting=function(){this.logger.info("dispatching reconnecting"),this.manager.onReconnecting(this)},j.prototype.dispatchReconnectIsRequired=function(C,D){this.logger.info("dispatching reconnect is required by server"),this.manager.onReconnectIsRequired(this,C,D)},j.prototype.dispatchDisconnected=function(){this.logger.info("dispatching disconnected"),this.manager.onDisconnected(this)},j.prototype.dispatchTerminalError=function(){this.logger.info("dispatching terminal error"),this.manager.onTerminalError(this)},j.prototype.dispatchTrouterMessageLost=function(C){this.logger.info("dispatching trouter message lost"),this.manager.onTrouterMessageLost(C)},j.prototype.countDisconnectBeforeConnectionEstablishment=function(){this.logger.warn("counting disconnect before connection was fully established as a connection failure"),++this.connectingErrorsInRow>=this.connectingErrorsThreshold&&this.resetReconnectParamsOnErrorThreshold()},j.prototype.sendProcessedDroppedIndicators=function(C){var D=this;try{this.logger.debug("emitting processed flow tags to the server");var ne=new He("trouter.processed_message_loss");ne.args={droppedIndicators:C},this.sendDownstreamEvent(ne,function(){D.logger.info("emitted processed flow tags to the server")})}catch(se){var $=x(se);this.logger.error("unable to send processed message loss event. Error: ".concat($)),this.connectionTracker.trackError("trouter.processed_message_loss",$,!1)}},j.prototype.sendAllocateRequest=function(C){var D=this;this.connectionAttempt++,this.connectionTracker.trackNewConnection();var ne,$=this.options.trouterUrl,se=this.reconnectParams,Se=typeof se?.se=="string"?parseInt(se.se,10):typeof se?.se=="number"?se.se:void 0;Se&&Se<=Date.now()+36e5&&(this.logger.warn("Dropping expired cached connection parameters: ".concat(new Date(Se))),this.reconnectParams=se=void 0),se&&se.serviceUrl!==$&&(this.logger.warn("Dropping cached connection parameters for a different environment (".concat(se.serviceUrl,", now ").concat($,")")),this.reconnectParams=se=void 0),se?.reconnectUrl&&($=se.reconnectUrl),ne=se?T(T({},se),{serviceUrl:void 0,reconnectUrl:void 0}):null,$=(0,he.adaptUrl)($,"v4a"),$=this.appendCorrelationIds($,!1),$=this.appendEndpointId($,!1),ne&&($+="&".concat(this.buildQuery(ne)),ne.v||($+="&v=".concat("v4"))),$=this.options.rewriteUrlForProxy($);var Ie=new Request($,{method:"POST",mode:"cors",headers:new Headers(T(T({"Content-Type":"text/plain"},this.options.extraConnectionHeaders),z(C,this.usingLegacyTokenApi)))});this.logger.info("sendAllocateRequest: POST ".concat($)),this.connectionTracker.trackStart("allocation");var Oe,Ue=Date.now(),ze=-1,ct=!1;(0,w.fetchWithTimeout)(Ie,this.timeoutOptions.fetchTimeoutMs).then(function(xt){var It;if(ze=xt.status,!xt.ok)throw Oe=(It=xt.headers.get("www-authenticate"))!==null&&It!==void 0?It:void 0,ct=xt.headers.get("x-trouter-skypetoken-deprecated")==="1",D.logger.warn("Allocation request got response status ".concat(xt.status,", www-authenticate header was ").concat(Oe?"not empty":"empty")),new Error(xt.statusText);var Xt=xt.headers.get("content-type");if(!Xt||Xt!=="application/json"&&!Xt.startsWith("application/json;"))throw new Error("Content-type '".concat(Xt,"' is unexpected"));return D.connectionTracker.trackEnd("allocation"),xt.json()}).then(function(xt){D.unauthorizedErrorCount=0,D.onAllocationResponse(xt,C)}).catch(function(xt){D.connectingErrorsInRow++;var It="".concat(xt).concat(ze>=0?", status code ".concat(ze):"");if(D.logger.error("".concat(D.connectingErrorsInRow," failed connecting attempt(s) in a row. ").concat(It)),D.connectionTracker.trackError("allocation",It),ct){var Xt="Skypetoken deprecated response, not retrying any further";return D.logger.error(Xt),D.connectionTracker.trackError("allocation",Xt),void D.fsm.onTerminalError()}if(ze===401&&D.unauthorizedErrorCount++,!D.canRetryTokenFetchRequest(D.unauthorizedErrorCount)){var Xt="getToken retry limit hit, reached terminal error state";return D.connectionTracker.trackError("allocation",Xt),void D.fsm.onTerminalError()}if(ze!==-1||D.isNavigatorOnline){if(D.reconnectParams&&D.connectingErrorsInRow>=D.connectingErrorsThreshold){if(ze>=400&&ze<=599)D.resetReconnectParamsOnErrorThreshold();else if(D.reconnectParams.reconnectUrl&&D.connectingErrorsInRow%3==0){D.logger.warn("".concat(D.connectingErrorsInRow," connection attempts, testing nominal service URL"));var ki=Math.min(D.timeoutOptions.connectionTimeoutMs-(Date.now()-Ue)-500,D.timeoutOptions.fetchTimeoutMs);return void D.testNominalUrlConnectivity(ki).then(function(Zr){D.connectionTracker.trackProgress("nomcheck",Zr?"ok":"failed"),Zr?(D.logger.warn("Nominal service URL is reachable, erasing cached reconnect URL"),D.reconnectParams&&delete D.reconnectParams.reconnectUrl):D.logger.warn("Nominal service URL is not reachable either, keeping cached reconnect URL"),D.fsm.onAllocationFailed(!1,void 0)},function(){D.fsm.onAllocationFailed(!1,void 0)})}}}else D.logger.info("Expected failure, the browser says it is not online at the moment");D.fsm.onAllocationFailed(ze===401,Oe)})},j.prototype.testNominalUrlConnectivity=function(C){var D=this;if(C<1e3)return this.logger.warn("There is no time left to reasonably perform the nominal service URL connectivity check (".concat(C," ms), falling back to assuming that the connectivity is fine")),Promise.resolve(!0);var ne;try{var $=new URL(this.options.trouterUrl);$.pathname="/",$.search="?"+this.buildQuery({check:Date.now(),cor_id:encodeURIComponent(this.options.clientCorrelationID),epid:encodeURIComponent(this.options.endpointId?this.options.endpointId:""),tc:encodeURIComponent((0,w.toJson)(this.clientInfo))}),ne=new Request(this.options.rewriteUrlForProxy($.toString()),{method:"GET",headers:{Accept:"text/plain"}})}catch(se){return this.logger.warn("Nominal service URL connectivity test request could not be created (".concat(se,"), falling back to assuming that the connectivity is fine")),Promise.resolve(!0)}return(0,w.fetchWithTimeout)(ne,C).then(function(se){if(se.status!==200)throw new Error("Not 200 OK: ".concat(se.status," ").concat(se.statusText));return se.text()}).then(function(se){if(se!=="Trouter")throw new Error('Not "Trouter": '.concat(se.substring(0,16)).concat(se.length>16?"...":""));return!0}).catch(function(se){return D.logger.error("Nominal service URL connectivity test failed: ".concat(se)),!1})},j.prototype.sendPingRequest=function(){var C=this;if(this.socket&&this.pingResponseTimerId===void 0)try{this.logger.debug("emitting ping event");var D=!1;this.socket.emit("ping",function(){D!==!0&&C.onPingResponse()}),this.pingResponseTimerId=setTimeout(function(){C.logger.error("Ping response timeout is fired"),D=!0,C.clearPingResponseTimer(),C.fsm.onPingResponseTimeout()},this.timeoutOptions.pongTimeoutMs)}catch($){var ne=x($);this.logger.error("unable to send ping. Error: ".concat(ne)),this.connectionTracker.trackError("ping",ne,!1)}},j.prototype.connectV4c=function(C,D){var ne,$,se,Se,Ie,Oe,Ue=this.options.ioOptions?T({},this.options.ioOptions):new te;Ue["force new connection"]=!0,Ue.reconnect=!1,!((ne=this.reconnectParams)===null||ne===void 0)&&ne.serviceUrl&&(0,he.adaptUrl)(this.reconnectParams.serviceUrl,"v4c")!==(0,he.adaptUrl)(this.options.trouterUrl,"v4c")&&(this.logger.warn("Dropping cached connection parameters for a different environment (".concat(this.reconnectParams.serviceUrl,", now ").concat(this.options.trouterUrl,")")),this.reconnectParams=void 0);var ze=(Se=($=(0,he.redirectUrlIfPresent)(D))!==null&&$!==void 0?$:D?.kind!=="redirect-no-host"?(se=this.reconnectParams)===null||se===void 0?void 0:se.reconnectUrl:void 0)!==null&&Se!==void 0?Se:this.options.trouterUrl,ct=(0,he.adaptUrl)(ze,"v4c");Ue["skipped handshake data"]={timeout:70,websocketUrl:ct},Ue.query=this.buildV4cUrlParams(),Ue.rewriteUrlForProxy=this.options.rewriteUrlForProxy;try{if(this.stopSocketIo(),this.transportTypeName="websocket",this.socket=((Ie=this.options.io)!==null&&Ie!==void 0?Ie:I).connect(this.options.trouterUrl,Ue),this.socket===void 0)throw new Error("failed to create Socket.io object");var xt=(Oe=this.audienceSubscriptionState)===null||Oe===void 0?void 0:Oe.increaseCvAndGetEventObject();this.attachSocketIoHandlers(this.socket,C,void 0,xt)}catch(It){this.logger.error("".concat(It)),this.connectionTracker.trackError("v4c","".concat(It)),this.fsm.onV4cException()}},j.prototype.sendV4cAuthenticationEvent=function(C){var D,ne={headers:T(T({},this.options.extraConnectionHeaders),z(C,this.usingLegacyTokenApi)),connectparams:(0,he.reconnectParamsWithoutUrls)(this.reconnectParams)};(D=this.socket)===null||D===void 0||D.emit(A.USER_AUTHENTICATE_EVENT_NAME,ne)},j.prototype.setUserActivityState=function(C){var D=C.state!==this.userActivityState.state;this.userActivityState=C,D?(this.logger.info("Changing user activity state to '".concat(C.toEventJSON(),"'")),this.fsm.onSetNewUserActivityState()):(this.logger.debug("Not changing the same user activity state '".concat(C.toEventJSON(),"'")),this.manager.onUserActivityStateAccepted(C.correlationVector.value()))},j.prototype.sendUserActivityState=function(C,D){this.userActivityState.state!==V.UserActivityState.Unknown&&(this.transportTypeName==="websocket"&&D?C===B.UserActivityEventReason.Connected?this.sendUserActivityStateMultiple(2):this.sendUserActivityStateMultiple(1):this.transportTypeName==="xhr-polling"&&C===B.UserActivityEventReason.Modified&&this.fsm.forceReconnect("user activity/force reconnect"))},j.prototype.setAudienceSubscriptionsAsync=function(C,D){var ne=this.audienceSubscriptionState;if(this.audienceSubscriptionState=C,this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME)return this.setAudienceSubscriptionsInternalAsync(C.increaseCvAndGetEventObject(),D);if(this.transportTypeName===this.XHR_POLLING_TRANSPORT_NAME){var $=this.setAudienceSubscriptionsLongpollInternalAsync(C.increaseCvAndGetEventObject(),D,ne);return this.fsm.forceReconnect("set audience subscription force reconnect"),$}throw new Error("set audience subscription executed on an unknown transport")},j.prototype.setAudienceSubscriptionsUnsafeAsync=function(C){if(C)return this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME?this.setAudienceSubscriptionsInternalAsync(C,15e3):void 0},j.prototype.setAudienceSubscriptionsInternalAsync=function(C,D){return b(this,void 0,void 0,function(){var ne,$,se=this;return S(this,function(Se){switch(Se.label){case 0:return this.logger.info("[WebSocket] Audience subscription set requested."),ne=new He("audience.subscribe"),ne.args=C,[4,new Promise(function(Ie){var Oe=!1,Ue=setTimeout(function(){return Oe=!0,Ie(se.buildAudienceSubscriptionsTimeoutResponse(C))},D);se.sendDownstreamEvent(ne,function(ze,ct){Oe||(clearTimeout(Ue),se.logger.debug("[Websocket] Audience subscription response: ".concat(ct)),se.pendingAudienceSubscription&&se.onAudienceSubscriptionResult(ct),Ie(ct))})})];case 1:return $=Se.sent(),this.manager.onAudiencesSetResolved($,C.cv),[2,$]}})})},j.prototype.setAudienceSubscriptionsLongpollInternalAsync=function(C,D,ne){var $;return b(this,void 0,void 0,function(){var se,Se,Ie,Oe,Ue,ze,ct=this;return S(this,function(xt){switch(xt.label){case 0:return this.logger.info("[XHR Polling] Audience subscription set requested."),this.pendingAudienceSubscription&&(this.logger.error("Racing audience subscriptions occured. This situation resolves into undefined scenario and/or nasal demons."),clearTimeout(this.pendingAudienceSubscription.timeoutId)),C.audiences.length===0?[2,this.handleAudienceUnsubscribeLongpoll(C.cv,ne)]:[4,new Promise(function(It){var Xt=setTimeout(function(){return ct.pendingAudienceSubscription=void 0,It(ct.buildAudienceSubscriptionsTimeoutResponse(C))},D);ct.pendingAudienceSubscription={audienceSetResolve:It,timeoutId:Xt}})];case 1:return se=xt.sent(),this.manager.getState()===V.TrouterState.Unknown||this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME?[2,se]:(Se=se.responses[0],Se?.result.audienceSubscriptionState===this.AUDIENCE_SUBSCRIPTION_RESULT_BAD_REQUEST?(this.clearAudienceSubscriptionStateQueryParam(),this.manager.onAudiencesSetResolved(se,C.cv),[2,se]):(Ie=se.responses.find(function(It){return It.audienceId===C.audiences[0].id}),Ie?.result.audienceSubscriptionState===this.AUDIENCE_SUBSCRIPTION_RESULT_ERROR?(this.clearAudienceSubscriptionStateQueryParam(),this.manager.onAudiencesSetResolved(se,C.cv),[2,se]):(Oe=(($=ne?.audienceSubscriptionModel.audienceSubscriptions[0])===null||$===void 0?void 0:$.id)!==Se?.audienceId,ne&&Oe&&(Ue=this.mapToSyntheticAudienceSubscriptionResponses(ne.audienceSubscriptionModel.audienceSubscriptions,this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED,200),(ze=se.responses).push.apply(ze,Ue)),this.manager.onAudiencesSetResolved(se,C.cv),[2,se])))}})})},j.prototype.clearAudienceSubscriptionStateQueryParam=function(){var C,D,ne;!((ne=(D=(C=this.socket)===null||C===void 0?void 0:C.socket)===null||D===void 0?void 0:D.options)===null||ne===void 0)&&ne.query&&(this.socket.socket.options.query=this.socket.socket.options.query.replace(this.AUDIENCE_SUBSCRIPTION_STATE_QUERY_PARAM_REGEX,""))},j.prototype.handleAudienceUnsubscribeLongpoll=function(C,D){var ne;this.audienceSubscriptionState=void 0;var $={responses:[]};if(D){var se=this.mapToSyntheticAudienceSubscriptionResponses(D.audienceSubscriptionModel.audienceSubscriptions,this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED,200);(ne=$.responses).push.apply(ne,se)}return this.manager.onAudiencesSetResolved($,C),$},j.prototype.buildAudienceSubscriptionsTimeoutResponse=function(C){return this.logger.error("Audience subscription attempt has timed out."),{responses:this.mapToSyntheticAudienceSubscriptionResponses(C.audiences,this.AUDIENCE_SUBSCRIPTION_RESULT_TIMEOUT)}},j.prototype.mapToSyntheticAudienceSubscriptionResponses=function(C,D,ne){return C.map(function($){return{audienceId:$.id,result:{audienceSubscriptionState:D,responseStatus:ne}}})},j.prototype.expediteBackoff=function(){this.tokenBackoff.expediteIfPending()},j.prototype.sendRegisterRequest=function(){var C=this;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");if(!this.allocateResult)throw new Error("Allocate result is undefined in sendRegisterRequest()");this.logger.info("sending register request");var D=new w.Timespan;this.connectionTracker.trackStart("registration");var ne=this.getRegistrationTtl()[0];this.registrarClient.register({appId:this.options.registration.pnhAppId,aesKey:"",languageId:"en-US",platform:this.options.registration.platform,templateKey:this.options.registration.pnhTemplateKey,platformUIVersion:this.options.registration.platformUIVersion,productContext:this.options.registration.productContext},{TROUTER:[{context:this.options.registration.context,path:this.allocateResult.surl,ttl:ne}]}).then(function(){C.logger.info("Register request successful"),C.connectionTracker.trackEnd("registration"),C.fsm.onRegistrationSucceeded(),C.connectionTracker.sendTelemetry(R.ClientEventName.Registration,{duration:D.duration},[])}).catch(function($){C.logger.error("Register request failed. Error: ".concat($)),C.connectionTracker.trackError("registration",P($)),C.fsm.onRegistrationFailed(),C.connectionTracker.sendTelemetry(R.ClientEventName.Registration,{duration:D.duration},[])})},j.prototype.sendUnregisterRequest=function(){var C=this;this.logger.info("sending unregister request");var D=new w.Timespan;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");this.connectionTracker.trackStart("unregistration"),this.registrarClient.unregister().then(function(){C.logger.info("Unregister request successful"),C.connectionTracker.trackEnd("unregistration"),C.fsm.onUnregistrationDone(),C.connectionTracker.sendTelemetry(R.ClientEventName.Unregistration,{duration:D.duration},[])}).catch(function(ne){C.logger.error("Unregister request failed. Error: ".concat(ne)),C.connectionTracker.trackError("unregistration",P(ne)),C.fsm.onUnregistrationDone(),C.connectionTracker.sendTelemetry(R.ClientEventName.Unregistration,{duration:D.duration},[])})},j.prototype.resetTokenBackoff=function(){this.tokenBackoff.reset()},j.prototype.cancelPendingRegistrationRequests=function(){this.registrarClient&&this.registrarClient.cancelPendingRequests()},j.prototype.clearSentEventTimers=function(){var C=Object.keys(this.pendingSentEventTimers);if(C.length>0){this.logger.debug("Clearing all pending downstream events related timers");for(var D=0,ne=C;D<ne.length;D++){var $=ne[D];this.clearSentEventTimer(Number($))}}},j.prototype.restartIncallModeTimer=function(){var C=this;this.clearIncallModeTimerId(),this.logger.debug("Restarting incall mode timer"),this.incallModeTimerId=setTimeout(function(){C.logger.info("Call mode timer fired"),C.fsm.onIncallModeTimer()},this.options.incallModeTimeoutMs)},j.prototype.enterIncallMode=function(){this.logger.info("Entering incall mode"),this.timeoutOptions=this.options.incallTimeoutOptions,this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!0},j.prototype.exitIncallMode=function(){this.logger.info("Exiting incall mode"),this.clearIncallModeTimerId(),this.timeoutOptions=this.options.timeoutOptions,this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!1},j.prototype.isIncallMode=function(){return this.inIncallMode},j.prototype.sendDisconnectTelemetryEvent=function(C){var D={reason:C,serverClosed:!this.fsm.isActive()};this.connectionTracker.trackDisconnected(D),this.connectionTracker.clearConnectedInfo()},j.prototype.forceReconnectDueToNoRegistration=function(){this.fsm.forceReconnect("force reconnect due to no registration")},j.prototype.resetReconnectParamsOnErrorThreshold=function(){this.logger.warn("".concat(this.connectingErrorsInRow," connection attempts, server-side failure: erasing cached connection parameters")),this.reconnectParams=void 0},j.prototype.onSocketConnecting=function(C){this.logger.info("onSocketConnecting(".concat(C,")")),this.transportTypeName=C,this.connectionTracker.trackProgress("connecting",this.transportTypeName),this.fsm.onConnecting()},j.prototype.onSocketConnect=function(C){this.logger.info("onSocketConnect"),this.fsm.onSocketConnect(C)},j.prototype.onSocketConnectFailed=function(C){this.logger.error("onSocketConnectFailed"),this.connectionTracker.trackError("connect_failed",C,!0,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),this.fsm.onConnectingFailed()},j.prototype.onSocketDisconnect=function(C){var D=this.connectionTracker.getSessionLength()||0,ne=q.DisconnectReason.fromRawReason(C);this.logger.error("onSocketDisconnect, reason: ".concat(ne.reason)),ne.reason==="dup"&&this.lastDisconnectReason==="dup"&&D<this.options.duplicateDisconnectThresholdMs&&(this.logger.warn("Socket was closed by server as Duplicate for the second time in a row "+"after ".concat(D," ms which is below the threshold of ")+"".concat(this.options.duplicateDisconnectThresholdMs," ms. Resetting cached ")+"connection parameters and making a new allocation."),this.reconnectParams=void 0),this.lastDisconnectReason=ne.reason,this.fsm.onSocketDisconnect(ne),this.connectionExpireTimestampInSecs=void 0},j.prototype.onSocketReconnect=function(){this.logger.error("onSocketReconnect"),this.fsm.onTrouterConnected()},j.prototype.onSocketReconnectFailed=function(C){this.logger.error("onSocketReconnectFailed with '".concat(C,"'")),this.fsm.onSocketDisconnect(q.DisconnectReason.fromSocketIoEventData("reconnecterror",C))},j.prototype.onSocketReconnecting=function(){this.logger.error("onSocketReconnecting")},j.prototype.onSocketError=function(C){this.logger.error("onSocketError with '".concat((0,w.toJson)(C),"'")),this.fsm.isConnecting()&&++this.connectingErrorsInRow>=this.connectingErrorsThreshold&&this.resetReconnectParamsOnErrorThreshold(),this.connectionTracker.trackError("connectSocket",K(C)),this.fsm.onSocketDisconnect(q.DisconnectReason.fromSocketIoEventData("socketerror",C))},j.prototype.onSocketMessage=function(C){var D,ne=this;this.logger.debug("onSocketMessage");var $;try{$=new we(C,this.logger);var se=(D=$.headers)===null||D===void 0?void 0:D["X-Microsoft-Skype-Chain-ID"],Se=se?" Chain-Id ".concat(se):"";this.logger.info("Received request N ".concat($.id).concat(Se," CV ").concat($.correlationVector," to '").concat($.url,"'")),$.startTS=Date.now(),$.url&&this.urlPath&&$.url.startsWith(this.urlPath)&&($.shortUrl=$.url.substring(this.urlPath.length))}catch(Oe){var Ie=x(Oe);return this.logger.error("unable to parse request. Error: ".concat(Ie)),this.connectionTracker.trackRequest(void 0,Ie),void this.connectionTracker.sendResponseError("unable to parse request, error: ".concat(Oe))}$.timeoutTimerId=setTimeout(function(){if(!$.replied){ne.logger.error("Request ".concat($.id," timed out"));var Oe=new R.ResponseData($.id);Oe.status=504,Oe.headers={"Trouter-Responder":"ClientLib"},ne.sendResponse($,Oe),$.timedout=!0}},this.timeoutOptions.requestTimeoutMs);try{this.connectionTracker.trackRequest($),this.fsm.onDownstreamRequest($)}catch(Oe){this.logger.error("exception in socket.on message. Error: ".concat(x(Oe))),this.connectionTracker.sendResponseError(P(Oe),$,void 0)}},j.prototype.onTrouterConnected=function(C,D,ne){var $,se,Se,Ie,Oe=this;if((0,he.isV4ConnectEvent)(C)){var Ue=C;this.allocateResult=T(T({},Ue),{ttl:C.ttl.toString()}),this.populateAndCacheReconnectParams(Ue,Ue.reconnectUrl),this.populateConnectionStateFields(Ue)}else if(!this.allocateResult)return void this.logger.error("Invalid internal state - received onTrouterConnected while allocateResult is not set");this.connectingErrorsInRow=0,this.logger.info("onTrouterConnected: ".concat(this.allocateResult.url)),this.transportTypeName==="xhr-polling"&&D&&this.manager.onUserActivityStateAccepted(D.cv),!((Se=(se=($=this.socket)===null||$===void 0?void 0:$.socket)===null||se===void 0?void 0:se.options)===null||Se===void 0)&&Se.query&&(this.socket.socket.options.query+="&connected=true"),this.urlPath=this.allocateResult.url.replace(/https?:\/\/([A-z0-9\:\$\-\_\.\+\!\*\"\(\)\,]*)\//,"/");var ze=this.connectedUrl!==this.allocateResult.url;this.connectedUrl=this.allocateResult.url,this.connectionExpireTimestampInSecs=(0,w.calculateExpireTsInSec)((0,he.ensureNumber)(C.ttl)),this.connectionTracker.trackEnd("connectSocket"),this.connectionTracker.trackConnected(ze,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),(Ie=this.setAudienceSubscriptionsUnsafeAsync(ne))===null||Ie===void 0||Ie.catch(function(ct){return Oe.logger.error("Re-subscribe to audiences has failed with ".concat(ct))}),this.fsm.onTrouterConnected()},j.prototype.onTrouterReconnect=function(C){var D=C.target;this.logger.info("onTrouterReconnect target: ".concat(D)),D==="self"?this.fsm.onReconnectRequired(!0,_.ServerInitiated):this.fsm.onReconnectRequired(!1,_.ServerInitiated,C)},j.prototype.onTrouterMessageLoss=function(C){this.logger.debug("onTrouterMessageLoss"),this.fsm.onTrouterMessageLost(C.droppedIndicators)},j.prototype.onAudienceSubscriptionResult=function(C){this.logger.info("onAudienceSubscriptionResult"),this.pendingAudienceSubscription&&(clearTimeout(this.pendingAudienceSubscription.timeoutId),this.pendingAudienceSubscription.audienceSetResolve(C),this.pendingAudienceSubscription=void 0)},j.prototype.buildV4cUrlParams=function(){var C={};return C.tc=encodeURI((0,w.toJson)(this.clientInfo)),C.timeout=Math.floor(this.timeoutOptions.pingTimeoutMs/1e3),this.options.endpointId&&(C.epid=this.options.endpointId),this.appendConnectedClientIds(this.buildQuery(C),!0)},j.prototype.attachSocketIoHandlers=function(C,D,ne,$){var se=this;C.on("connecting",function(Se){se.onSocketConnecting(Se)}),C.on("connect",function(){se.onSocketConnect(D)}),C.on("connect_failed",function(Se){se.onSocketConnectFailed(Se)}),C.on("close_during_connecting",function(Se){se.onSocketConnectFailed(Se)}),C.on("disconnect",function(Se){se.onSocketDisconnect(Se)}),C.on("reconnect",function(){se.onSocketReconnect()}),C.on("reconnect_failed",function(Se){se.onSocketReconnectFailed(Se)}),C.on("reconnecting",function(){se.onSocketReconnecting()}),C.on("error",function(Se){se.onSocketError(Se)}),C.on("message",function(Se){se.onSocketMessage(Se)}),C.on("trouter.connected",function(Se){se.onTrouterConnected(Se,ne,$)}),C.on("trouter.reconnect",function(Se){se.onTrouterReconnect(Se)}),C.on("trouter.message_loss",function(Se){se.onTrouterMessageLoss(Se)}),C.on("audience.subscriptionresult",function(Se,Ie){se.onAudienceSubscriptionResult(Ie)})},j.prototype.onNavigatorOnlineStatusUpdate=function(){var C=window.navigator.onLine;this.logger.debug("Browser online status update - new state: ".concat(C,", previously: ").concat(this.isNavigatorOnline)),C&&!this.isNavigatorOnline?(this.isNavigatorOnline=!0,this.tokenBackoff.expediteIfPending(),this.connectionTracker.trackProgress("browserNet","online")):!C&&this.isNavigatorOnline&&(this.isNavigatorOnline=!1,this.connectionTracker.trackProgress("browserNet","offline"))},j.prototype.onAllocationResponse=function(C,D){this.logger.info("Received allocation response ".concat(JSON.stringify(C))),this.allocateResult=C,this.populateAndCacheReconnectParams(this.allocateResult,"".concat(this.allocateResult.socketio,"v4/a")),this.populateConnectionStateFields(this.allocateResult),this.fsm.onAllocationSucceed(D)},j.prototype.populateAndCacheReconnectParams=function(C,D){this.reconnectParams=T({serviceUrl:this.options.trouterUrl,reconnectUrl:D},C.connectparams),this.manager.onConnectionParametersUpdated(this.reconnectParams)},j.prototype.populateConnectionStateFields=function(C){var D,ne,$=typeof C.ttl=="string"?parseInt(C.ttl,10):C.ttl;if(this.connectionExpireTimestampInSecs=(0,w.calculateExpireTsInSec)($),this.connectionId=(D=C.id)!==null&&D!==void 0?D:"",this.connectedClientId=C.ccid,this.logger.debug("connected client id set {connectedClientId:".concat(this.connectedClientId,"}")),this.c2cUrlBase=(ne=C.curlb)!==null&&ne!==void 0?ne:"",this.c2cUrlBase===""){var se=C.surl.indexOf("://");se>=0&&(se=C.surl.indexOf("/",se+3))>=5&&C.surl.substr(se-5,5)===":3443"&&(this.c2cUrlBase=C.surl.substr(0,se-5))}},j.prototype.onPingResponse=function(){this.logger.debug("onPingResponse"),this.connectionTracker.increasePingResponseCount(),this.clearPingResponseTimer(),this.fsm.onPingResponse()},j.prototype.clearPingResponseTimer=function(){this.pingResponseTimerId!==void 0&&(clearTimeout(this.pingResponseTimerId),this.pingResponseTimerId=void 0)},j.prototype.buildQuery=function(C){for(var D=[],ne=0,$=Object.keys(C);ne<$.length;ne++){var se=$[ne];C[se]!==void 0&&D.push("".concat(se,"=").concat(C[se]))}return D.join("&")},j.prototype.appendConnectedClientIds=function(C,D){var ne="";C.includes("ccid=")||(ne="ccid=".concat(this.connectedClientId,"&")),this.domId&&(ne+="dom=".concat(this.domId,"&")),ne.length>0&&(ne=ne.slice(0,-1));var $=D||C.includes("?")?"&":"?";return this.appendCorrelationIds(C+$+ne,D)},j.prototype.appendEndpointId=function(C,D){var ne=D||C.includes("?")?"&":"?";return!C.includes("epid")&&this.options.endpointId?"".concat(C).concat(ne,"epid=").concat(this.options.endpointId):C},j.prototype.appendCorrelationIds=function(C,D){var ne=D||C.includes("?")?"&":"?";return C.includes("cor_id")?C:"".concat(C).concat(ne,"cor_id=").concat(this.options.clientCorrelationID)+"&con_num=".concat(this.clientID,"_").concat(this.connectionAttempt)},j.prototype.safeString=function(C){return typeof C=="string"?C:""},j.prototype.sendResponse=function(C,D){var ne,$,se;if(C.timedout)return this.logger.error("Request ".concat(C.id," already timed out")),1;if(C.replied)return this.logger.error("Response for request ".concat(C.id," already sent")),2;clearTimeout(C.timeoutTimerId),C.timeoutTimerId=void 0,C.replied=!0,D.headers=(ne=D.headers)!==null&&ne!==void 0?ne:{};var Se=C.correlationVector;this.logger.info("Sending response N ".concat(C.id," CV ").concat(Se," with status ").concat(D.status)),Se&&(D.headers[ge]=Se),!(($=C.headers)===null||$===void 0)&&$["trouter-request"]&&(D.headers["trouter-request"]=C.headers["trouter-request"]);var Ie=Date.now()-C.startTS;if(D.headers["trouter-client"]=(0,w.toJson)({cd:Ie}),!((se=C.headers)===null||se===void 0)&&se["trouter-is-broadcast"]&&(D.headers["trouter-is-broadcast"]=C.headers["trouter-is-broadcast"]),this.logger.debug("response: ".concat((0,w.toJson)(D))),!this.socket)return this.connectionTracker.sendResponseError("no socket",C,D),4;try{return this.socket.send((0,w.toJson)(D)),D.sentTS=Date.now(),C.incrementCorrelationVector(),this.connectionTracker.trackResponse(C,Ie,D),this.transportTypeName==="websocket"&&this.sendPingRequest(),0}catch(Ue){var Oe="unable to send data on response.end. Error: ".concat(x(Ue));return this.logger.error(Oe),this.connectionTracker.sendResponseError(Oe,C,D),4}},j.prototype.sendUserActivityStateMultiple=function(C){var D=this,ne=new He("user.activity"),$=this.userActivityState.increaseCvAndGetEventObject();ne.args=$,this.logger.debug("Sending user activity '".concat(this.userActivityState.toEventJSON(),"', remaining ").concat(C-1));var se=!1;this.sendDownstreamEvent(ne,function(){if(se!==!0&&(D.logger.info("User activity state: ".concat($.state,", cv: ").concat($.cv," accepted")),D.manager.onUserActivityStateAccepted($.cv),D.clearSentEventTimer(ne.timeoutTimerId),C>1)){var Se=setTimeout(function(){D.clearSentEventTimer(Se),D.sendUserActivityStateMultiple(C-1)},D.options.userActivitySecondResendDelayMs);D.registerSentEventTimer(Se,"user.activity/resend")}}),ne.timeoutTimerId=setTimeout(function(){D.logger.error("Activity state response timeout is fired"),se=!0,D.fsm.onActivityStateResponseTimeout(),D.clearSentEventTimer(ne.timeoutTimerId)},this.timeoutOptions.userActivityResponseTimeoutMs),this.registerSentEventTimer(ne.timeoutTimerId,"user.activity/response")},j.prototype.sendDownstreamEvent=function(C,D){this.logger.debug("Sending downstream event ".concat(C.name)),this.socket&&this.socket.emit(C.name,C.args,D)},j.prototype.registerSentEventTimer=function(C,D){this.logger.debug("registering timer ".concat(C," -> ").concat(D)),this.pendingSentEventTimers[C]=D},j.prototype.clearSentEventTimer=function(C){var D=this.pendingSentEventTimers[C];this.logger.debug("clearing timer ".concat(C," -> ").concat(D)),delete this.pendingSentEventTimers[C],clearTimeout(C)},j.prototype.getRegistrationTtl=function(){var C,D,ne=(0,w.calculateTtlInSec)(this.connectionExpireTimestampInSecs);if(this.logger.debug("Current connectionID will expire in ".concat(ne," seconds")),((C=this.options.registration)===null||C===void 0?void 0:C.registrarTtlSec)&&ne>0){var $=this.options.registration.registrarTtlSec<ne;return[Math.min(this.options.registration.registrarTtlSec,ne),$]}return!((D=this.options.registration)===null||D===void 0)&&D.registrarTtlSec?[this.options.registration.registrarTtlSec,!1]:ne>0?[ne,!1]:[3600,!1]},j.prototype.clearIncallModeTimerId=function(){this.incallModeTimerId!==void 0&&(this.logger.debug("Clearing in-call mode timer"),clearTimeout(this.incallModeTimerId),this.incallModeTimerId=void 0)},j.prototype.applyConnectionTrackerOptions=function(C){try{C.eventLogger&&typeof C.eventLogger.logEvent=="function"?(this.connectionTracker.mergeSettings(C.telemetrySettings),this.connectionTracker.enable(C.eventLogger)):this.logger.warn("Trouter client event logging disabled due to invalid configuration.")}catch(D){this.logger.warn("Trouter client event logging disabled. Error: ".concat(x(D))),this.connectionTracker.disable()}},j.prototype.canRetryTokenFetchRequest=function(C){var D=this.options.retryLimitOnTokenFetch;return D==null||C<D||(this.logger.warn("Reached limit on maximum number of token fetch request. Current count: ".concat(C,", retry limit: ").concat(D)),!1)},j})();M.TrouterConnection=Ge},function(H,M,X){Object.defineProperty(M,"__esModule",{value:!0}),M.MessageHandlerRegistry=void 0;var z=X(1),K=X(0),x=(function(){function P(T){this.messageHandlers=[],this.logger=new K.Logger("MessageHandlers",T)}return P.prototype.register=function(T){if(this.messageHandlers.some(function(b){return b===T}))throw new Error("Registering the same handler twice is not allowed");this.messageHandlers.push(T)},P.prototype.clear=function(){this.logger.debug("Clearing message handlers"),this.messageHandlers=[]},P.prototype.active=function(){return this.messageHandlers.length>0},P.prototype.handleMessage=function(T){for(var b={resultCode:z.UNHANDLED_MESSAGE_ACK,isHandled:!1},S=0,_=this.messageHandlers;S<_.length;S++){var N=_[S],w=this.safeExecuteHandle(N,T);if(w!==void 0&&(w.isHandled===void 0||w.isHandled))return w.resultCode===void 0&&(w.resultCode=z.HANDLED_MESSAGE_ACK),w}return b},P.prototype.safeExecuteHandle=function(T,b){try{return T.handleMessage(b)}catch(S){return void this.logger.warn("Trouter message handler threw an exception: ".concat(S))}},P})();M.MessageHandlerRegistry=x},function(H,M,X){function z(P){var T,b=this;return function(S){return K(b,void 0,void 0,function(){return x(this,function(_){return S&&(T=void 0),[2,new Promise(function(N,w){P(S).then(function(R){T=R,N(R)}).catch(function(R){T!==void 0&&T.length>0&&N(T),w(R)})})]})})}}var K=this&&this.__awaiter||function(P,T,b,S){function _(N){return N instanceof b?N:new b(function(w){w(N)})}return new(b||(b=Promise))(function(N,w){function R(J){try{q(S.next(J))}catch(V){w(V)}}function A(J){try{q(S.throw(J))}catch(V){w(V)}}function q(J){J.done?N(J.value):_(J.value).then(R,A)}q((S=S.apply(P,T||[])).next())})},x=this&&this.__generator||function(P,T){function b(q){return function(J){return S([q,J])}}function S(q){if(_)throw new TypeError("Generator is already executing.");for(;R&&(R=0,q[0]&&(A=0)),A;)try{if(_=1,N&&(w=2&q[0]?N.return:q[0]?N.throw||((w=N.return)&&w.call(N),0):N.next)&&!(w=w.call(N,q[1])).done)return w;switch(N=0,w&&(q=[2&q[0],w.value]),q[0]){case 0:case 1:w=q;break;case 4:return A.label++,{value:q[1],done:!1};case 5:A.label++,N=q[1],q=[0];continue;case 7:q=A.ops.pop(),A.trys.pop();continue;default:if(w=A.trys,!(w=w.length>0&&w[w.length-1])&&(q[0]===6||q[0]===2)){A=0;continue}if(q[0]===3&&(!w||q[1]>w[0]&&q[1]<w[3])){A.label=q[1];break}if(q[0]===6&&A.label<w[1]){A.label=w[1],w=q;break}if(w&&A.label<w[2]){A.label=w[2],A.ops.push(q);break}w[2]&&A.ops.pop(),A.trys.pop();continue}q=T.call(P,A)}catch(J){q=[6,J],N=0}finally{_=w=0}if(5&q[0])throw q[1];return{value:q[0]?q[1]:void 0,done:!0}}var _,N,w,R,A={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return R={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R};Object.defineProperty(M,"__esModule",{value:!0}),M.addCacheAsBackupTo=void 0,M.addCacheAsBackupTo=z},function(H,M,X){var z=this&&this.__awaiter||function(V,B,ae,he){function ie(I){return I instanceof ae?I:new ae(function(W){W(I)})}return new(ae||(ae=Promise))(function(I,W){function te(Ae){try{we(he.next(Ae))}catch(He){W(He)}}function ge(Ae){try{we(he.throw(Ae))}catch(He){W(He)}}function we(Ae){Ae.done?I(Ae.value):ie(Ae.value).then(te,ge)}we((he=he.apply(V,B||[])).next())})},K=this&&this.__generator||function(V,B){function ae(we){return function(Ae){return he([we,Ae])}}function he(we){if(ie)throw new TypeError("Generator is already executing.");for(;te&&(te=0,we[0]&&(ge=0)),ge;)try{if(ie=1,I&&(W=2&we[0]?I.return:we[0]?I.throw||((W=I.return)&&W.call(I),0):I.next)&&!(W=W.call(I,we[1])).done)return W;switch(I=0,W&&(we=[2&we[0],W.value]),we[0]){case 0:case 1:W=we;break;case 4:return ge.label++,{value:we[1],done:!1};case 5:ge.label++,I=we[1],we=[0];continue;case 7:we=ge.ops.pop(),ge.trys.pop();continue;default:if(W=ge.trys,!(W=W.length>0&&W[W.length-1])&&(we[0]===6||we[0]===2)){ge=0;continue}if(we[0]===3&&(!W||we[1]>W[0]&&we[1]<W[3])){ge.label=we[1];break}if(we[0]===6&&ge.label<W[1]){ge.label=W[1],W=we;break}if(W&&ge.label<W[2]){ge.label=W[2],ge.ops.push(we);break}W[2]&&ge.ops.pop(),ge.trys.pop();continue}we=B.call(V,ge)}catch(Ae){we=[6,Ae],I=0}finally{ie=W=0}if(5&we[0])throw we[1];return{value:we[0]?we[1]:void 0,done:!0}}var ie,I,W,te,ge={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return te={next:ae(0),throw:ae(1),return:ae(2)},typeof Symbol=="function"&&(te[Symbol.iterator]=function(){return this}),te};Object.defineProperty(M,"__esModule",{value:!0}),M.TrouterManager=M.AudienceSubscriptionState=M.UserActivityObject=void 0;var x=X(3),P=X(2),T=X(4),b=X(0),S=X(5),_=X(18),N=X(7),w=X(6),R=X(19),A=(function(){function V(B,ae){this.state=B,this.correlationVector=ae!==void 0?ae:x.CorrelationVector.extend()}return V.prototype.getStateString=function(){switch(this.state){case P.UserActivityState.Active:return"active";case P.UserActivityState.Inactive:return"inactive";case P.UserActivityState.Unknown:return"unknown";default:return"undefined"}},V.prototype.increaseCvAndGetEventObject=function(){return this.correlationVector.increase(),this.toEventObject()},V.prototype.toEventObject=function(){return{state:this.getStateString(),cv:this.correlationVector.value()}},V.prototype.toEventJSON=function(){return(0,x.toJson)(this.toEventObject())},V})();M.UserActivityObject=A;var q=(function(){function V(B,ae){ae===void 0&&(ae=x.CorrelationVector.extend()),this.audienceSubscriptionModel=B,this.correlationVector=ae}return V.prototype.increaseCvAndGetEventObject=function(){return this.correlationVector.increase(),this.toEventObject()},V.prototype.toEventObject=function(){return{audiences:this.audienceSubscriptionModel.audienceSubscriptions,cv:this.correlationVector.value()}},V.prototype.toEventJSON=function(){return(0,x.toJson)(this.toEventObject())},V})();M.AudienceSubscriptionState=q;var J=(function(){function V(B,ae,he,ie,I,W){var te=this;this.logFunc=B,this.options=ae,this.tokenProvider=he,this.usingLegacyTokenApi=ie,this.listener=I,this.tokenTypeProtocolSelector=function(ge,we){return te.options.forceV4aProtocol?"v4a":(0,S.usedProtocol)(ge,we)},this.logger=new b.Logger("Manager",B),this.logger.info("Created TrouterManager with options ".concat((0,x.toJson)(this.options))),this.fsm=new R.TrouterManagerFsm(B,this),this.baseEndpointUrl="",this.processedMessageLoss={},this.userActivityObject=new A(P.UserActivityState.Unknown),this.protocolSelector=W??this.tokenTypeProtocolSelector.bind(this)}return V.prototype.start=function(){this.fsm.start()},V.prototype.stop=function(B){this.fsm.stop(B)},V.prototype.configure=function(B){this.options=B,this.firstConnection!==void 0&&this.firstConnection.configure(B),this.secondConnection!==void 0&&this.secondConnection.configure(B),this.logger.info("Reconfigured TrouterManager with options ".concat((0,x.toJson)(this.options)))},V.prototype.checkConnection=function(B){this.firstConnection!==void 0&&this.firstConnection.checkConnection(B),this.secondConnection!==void 0&&this.secondConnection.checkConnection(B)},V.prototype.resendRegistration=function(){return z(this,void 0,void 0,function(){return K(this,function(B){return this.secondConnection!==void 0?(this.logger.info("Resending registration on the second/new connection"),[2,this.secondConnection.resendRegistration()]):this.firstConnection!==void 0?(this.logger.info("Resending registration on the first/current connection"),[2,this.firstConnection.resendRegistration()]):(this.logger.info("No connection to resend registration on, will be done upon (re)connect"),[2])})})},V.prototype.getServerState=function(){if(this.firstConnection!==void 0)return this.firstConnection.getServerState()},V.prototype.getState=function(){return this.fsm.getState()},V.prototype.isInTerminalState=function(){return this.fsm.getInternalState()===T.TrouterManagerState.TerminalError},V.prototype.reportStateInfo=function(){var B=this.firstConnection?w.State[this.firstConnection.getState()]:"Unknown",ae=T.TrouterManagerState[this.fsm.getInternalState()];if(this.secondConnection){var he=w.State[this.secondConnection.getState()];return"Manager ".concat(ae,"; 1st ").concat(B,"; 2nd ").concat(he)}return"Manager ".concat(ae,"; Connection ").concat(B)},V.prototype.startFirstConnection=function(){var B=new N.TrouterConnection(this.logFunc,this.options,this.configuredTrouterManager(),this.tokenProvider,this.usingLegacyTokenApi,this.userActivityObject,this.protocolSelector,this.audienceSubscriptionState);this.firstConnection=B,this.getConnectionCache().then(function(ae){B.start(ae)}).catch(function(){})},V.prototype.startSecondConnection=function(B){var ae=new N.TrouterConnection(this.logFunc,this.options,this.configuredTrouterManager(),this.tokenProvider,this.usingLegacyTokenApi,this.userActivityObject,this.protocolSelector,this.audienceSubscriptionState);this.secondConnection=ae,this.firstConnection!==void 0&&this.firstConnection.disableRegistrationsAndAutoReconnect(),B?this.getConnectionCache().then(function(he){ae.start(he)}).catch(function(){}):ae.start()},V.prototype.stopFirstConnection=function(B){this.firstConnection!==void 0&&(this.storedFirstConnection=this.firstConnection,this.firstConnection.stop(B),this.firstConnection=void 0)},V.prototype.stopSecondConnection=function(B){this.secondConnection!==void 0&&(this.secondConnection.stop(B),this.secondConnection=void 0)},V.prototype.stopSecondConnectionDelayed=function(){if(this.secondConnection!==void 0){var B=this.secondConnection;this.secondConnection=void 0,this.logger.info("Closing an inactive connection in ".concat(Math.round(this.options.lingeringConnectionDelayMs/1e3),"s")),setTimeout(function(){B.stop(!0)},this.options.lingeringConnectionDelayMs)}},V.prototype.forceStopLingeringConnection=function(){this.storedFirstConnection&&(this.storedFirstConnection.stop(!1),this.storedFirstConnection=void 0)},V.prototype.switchConnections=function(){var B=this.firstConnection;this.firstConnection=this.secondConnection,this.secondConnection=B},V.prototype.doesSecondConnectionExist=function(){return this.secondConnection!==void 0},V.prototype.dispatchConnected=function(){if(this.firstConnection!==void 0){var B=this.firstConnection.getServerState(),ae=B.url.endsWith("/")?B.url.slice(0,-1):B.url,he={baseEndpointUrl:ae,newEndpointUrl:ae!==this.baseEndpointUrl,c2cUrlBase:B.c2cUrlBase,clientId:B.connectedClientId,connectionId:B.connectionId,connectionTtlSec:B.getRemainingTtlInSec()};this.baseEndpointUrl=ae,this.listener.onTrouterConnected(B.url,he)}},V.prototype.dispatchDisconnected=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},V.prototype.dispatchTerminalError=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},V.prototype.dispatchRegistrationState=function(B){this.options.registrationStateCallback&&this.options.registrationStateCallback(B)},V.prototype.expediteBackoffOnConnections=function(){var B;if(this.lastExpediteBackoffCallAt!==void 0&&Date.now()-this.lastExpediteBackoffCallAt<((B=this.options.expediteBackoffOnStartMinimumDelayMs)!==null&&B!==void 0?B:1e4))return void this.logger.info("Expedite backoff due to start() too frequent, skipping");this.lastExpediteBackoffCallAt=Date.now(),this.firstConnection!==void 0&&this.firstConnection.expediteBackoff(),this.secondConnection!==void 0&&this.secondConnection.expediteBackoff()},V.prototype.onDownstreamRequest=function(B,ae,he){var ie={id:ae.id,method:ae.method,path:"/".concat(ae.shortUrl),body:ae.body,headers:ae.headers},I={id:ae.id,status:0,headers:{},body:"",send:function(){return I.status<=100||I.status>=999?3:(he.writeHead(I.status,I.headers),he.end(I.body))}};this.listener.onTrouterRequest(ie,I)},V.prototype.onConnected=function(B){this.fsm.onConnected(B===this.firstConnection)},V.prototype.onRegistered=function(B){this.fsm.onRegistered(B===this.firstConnection)},V.prototype.onUnregistered=function(B){this.fsm.onUnregistered(B===this.firstConnection||B===this.storedFirstConnection)},V.prototype.onReconnecting=function(B){this.fsm.onReconnecting(B===this.firstConnection)},V.prototype.onReconnectIsRequired=function(B,ae,he){this.fsm.onReconnectionRequired(B===this.firstConnection,ae,he)},V.prototype.onDisconnected=function(B){this.fsm.onDisconnected(B===this.firstConnection||B==this.storedFirstConnection),this.storedFirstConnection=void 0},V.prototype.onTerminalError=function(){this.fsm.onTerminalError(),this.storedFirstConnection=void 0},V.prototype.onUserActivityStateAccepted=function(B){this.listener.onTrouterUserActivityStateAccepted&&this.listener.onTrouterUserActivityStateAccepted(B)},V.prototype.onAudiencesSetResolved=function(B,ae){var he,ie;(ie=(he=this.listener).onAudiencesSetResolved)===null||ie===void 0||ie.call(he,B,ae)},V.prototype.onConnectionParametersUpdated=function(B){this.setConnectionCache(B)},V.prototype.setUserActivityState=function(B,ae){return this.userActivityObject=new A(B,x.CorrelationVector.extend(ae)),this.secondConnection!==void 0?(this.logger.info("Setting user activity ".concat(this.userActivityObject.toEventJSON()," on the second/new connection")),void this.secondConnection.setUserActivityState(this.userActivityObject)):this.firstConnection!==void 0?(this.logger.info("Setting user activity ".concat(this.userActivityObject.toEventJSON()," on the first/current connection")),void this.firstConnection.setUserActivityState(this.userActivityObject)):void 0},V.prototype.setAudienceSubscriptionsAsync=function(B,ae,he){if(this.audienceSubscriptionState=new q(B,x.CorrelationVector.extend(he)),this.secondConnection)return this.logger.info("Setting audience subscriptions ".concat(this.audienceSubscriptionState.toEventJSON()," on second/new connection")),this.secondConnection.setAudienceSubscriptionsAsync(this.audienceSubscriptionState,ae);if(this.firstConnection)return this.logger.info("Setting audience subscriptions ".concat(this.audienceSubscriptionState.toEventJSON()," on first/current connection")),this.firstConnection.setAudienceSubscriptionsAsync(this.audienceSubscriptionState,ae);throw new Error("No connection found")},V.prototype.onTrouterMessageLost=function(B){var ae=this;if(this.listener.onTrouterMessageLoss)if(B?.length){var he=B.filter(function(I){return ae.processedMessageLoss["".concat(I.tag,"-").concat(I.etag)]!==void 0});if(he.length&&(this.logger.info("onTrouterMessageLoss - immediately acknowledging ".concat(he.length," seen dropped indicators")),this.sendProcessedDroppedIndicators(he),B=B.filter(function(I){return ae.processedMessageLoss["".concat(I.tag,"-").concat(I.etag)]===void 0}),!B.length))return void this.logger.info("onTrouterMessageLoss - all declared dropped indicators have been seen before");var ie=this.listener.onTrouterMessageLoss(B.map(function(I){return I.tag}));if(!ie)return void this.logger.warn("onTrouterMessageLoss - some flow tag(s) have not been processed by listeners");B.forEach(function(I){ae.processedMessageLoss["".concat(I.tag,"-").concat(I.etag)]=""}),this.sendProcessedDroppedIndicators(B)}else this.logger.warn("onTrouterMessageLoss - no flow tags have been provided")},V.prototype.getConnectionCache=function(){var B=this;return this.options.connectionCache?(this.logger.debug("Querying host's connection cache"),this.options.connectionCache.onGetTrouterConnectionCache().then(function(ae){var he=ae?JSON.parse(ae):void 0;return typeof he=="object"?he:void 0}).catch(function(ae){return B.logger.warn("Invalid connection cache content provided: ".concat(ae)),B.connectionCache})):Promise.resolve(this.connectionCache)},V.prototype.setConnectionCache=function(B){if(this.connectionCache=B,this.options.connectionCache)try{this.options.connectionCache.onSetTrouterConnectionCache(JSON.stringify(B))}catch(ae){this.logger.warn("Error setting external connection cache: ".concat(ae))}},V.prototype.sendProcessedDroppedIndicators=function(B){return this.firstConnection!==void 0?void this.firstConnection.sendProcessedDroppedIndicators(B):this.secondConnection!==void 0?void this.secondConnection.sendProcessedDroppedIndicators(B):void 0},V.prototype.configuredTrouterManager=function(){return new _.RegistrationEnforcer(this,this.options.connectionDependsOnRegistration,this.options.delayEventsUntilRegistered)},V})();M.TrouterManager=J},function(H,M,X){Object.defineProperty(M,"__esModule",{value:!0}),M.TrouterUrlPromise=void 0;var z=X(0),K=(function(){function x(P){this.logger=new z.Logger("UrlPromise",P)}return x.prototype.getPromise=function(){var P=this;return this.url!==void 0?(this.logger.debug("returning previously resolved url: ".concat(this.url)),Promise.resolve(this.url)):(this.pendingPromise===void 0?(this.logger.debug("creating and returning promise"),this.pendingPromise=new Promise(function(T,b){P.pendingPromiseResolveRef=T,P.pendingPromiseRejectRef=b})):this.logger.debug("returning existing promise"),this.pendingPromise)},x.prototype.resolveUrl=function(P){this.url=P,this.logger.debug("got url: ".concat(this.url));var T=this.pendingPromiseResolveRef;this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,T!==void 0&&(this.logger.debug("resolving promise"),T(P))},x.prototype.rejectUrl=function(P){this.logger.debug("aborting");var T=this.pendingPromiseRejectRef;this.url=void 0,this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,T!==void 0&&(this.logger.debug("rejecting promise"),T(P))},x.prototype.resetUrl=function(){this.logger.debug("resetting url"),this.url=void 0},x})();M.TrouterUrlPromise=K},function(H,M,X){(function(z,K){(function(P,T){var b=P;b.version="0.9.6",b.protocol=1,b.transports=[],b.j=[],b.sockets={},b.connect=function(S,_){var N,w,R=b.util.parseUri(S);T&&T.location&&(R.protocol=R.protocol||T.location.protocol.slice(0,-1),R.host=R.host||(T.document?T.document.domain:T.location.hostname),R.port=R.port||T.location.port),N=b.util.uniqueUri(R);var A={host:R.host,secure:R.protocol=="https",port:R.port||(R.protocol=="https"?443:80),query:R.query||""};return b.util.merge(A,_),!A["force new connection"]&&b.sockets[N]||(w=new b.Socket(A)),!A["force new connection"]&&w&&(b.sockets[N]=w),w=w||b.sockets[N],A["skipped handshake data"]?w.of(""):w.of(R.path.length>1?R.path:"")}})(K.exports,z===void 0?window:z);var x=K.exports;(function(P,T){var b=P.util={},S=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,_=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];b.parseUri=function(w){for(var R=S.exec(w||""),A={},q=14;q--;)A[_[q]]=R[q]||"";return A},b.uniqueUri=function(w){var R=w.protocol,A=w.host,q=w.port;return"document"in T?(A=A||document.domain,q=q||(R=="https"&&document.location.protocol!=="https:"?443:document.location.port)):(A=A||"localhost",q||R!="https"||(q=443)),(R||"http")+"://"+A+":"+(q||80)},b.query=function(w,R){var A=b.chunkQuery(w||""),q=[];b.merge(A,b.chunkQuery(R||""));for(var J in A)A.hasOwnProperty(J)&&q.push(J+"="+A[J]);return q.length?"?"+q.join("&"):""},b.chunkQuery=function(w){for(var R,A={},q=w.split("&"),J=0,V=q.length;J<V;++J)R=q[J].split("="),R[0]&&(A[R[0]]=R[1]);return A};var N=!1;b.load=function(w){if("document"in T&&document.readyState==="complete"||N)return w();b.on(T,"load",w,!1)},b.on=function(w,R,A,q){w.attachEvent?w.attachEvent("on"+R,A):w.addEventListener&&w.addEventListener(R,A,q)},b.request=function(w){if(w&&typeof XDomainRequest<"u")return new XDomainRequest;if(typeof XMLHttpRequest<"u"&&(!w||b.ua.hasCORS))return new XMLHttpRequest;if(!w)try{return new window[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}return null},typeof window<"u"&&b.load(function(){N=!0}),b.defer=function(w){if(!b.ua.webkit||typeof importScripts<"u")return w();b.load(function(){setTimeout(w,100)})},b.merge=function(w,R,A,q){var J,V=q||[],B=A===void 0?2:A;for(J in R)R.hasOwnProperty(J)&&b.indexOf(V,J)<0&&(typeof w[J]=="object"&&B?b.merge(w[J],R[J],B-1,V):(w[J]=R[J],V.push(R[J])));return w},b.mixin=function(w,R){b.merge(w.prototype,R.prototype)},b.inherit=function(w,R){function A(){}A.prototype=R.prototype,w.prototype=new A},b.isArray=Array.isArray||function(w){return Object.prototype.toString.call(w)==="[object Array]"},b.intersect=function(w,R){for(var A=[],q=w.length>R.length?w:R,J=w.length>R.length?R:w,V=0,B=J.length;V<B;V++)~b.indexOf(q,J[V])&&A.push(J[V]);return A},b.indexOf=function(w,R,A){for(var q=w.length,A=A<0?A+q<0?0:A+q:A||0;A<q&&w[A]!==R;A++);return q<=A?-1:A},b.toArray=function(w){for(var R=[],A=0,q=w.length;A<q;A++)R.push(w[A]);return R},b.ua={},b.ua.hasCORS=typeof XMLHttpRequest<"u"&&(function(){try{var w=new XMLHttpRequest}catch{return!1}return w.withCredentials!=null})(),b.ua.webkit=typeof navigator<"u"&&/webkit/i.test(navigator.userAgent)})(x!==void 0?x:K.exports,z===void 0?window:z),(function(P,T){function b(){}P.EventEmitter=b,b.prototype.on=function(S,_){return this.$events||(this.$events={}),this.$events[S]?T.util.isArray(this.$events[S])?this.$events[S].push(_):this.$events[S]=[this.$events[S],_]:this.$events[S]=_,this},b.prototype.addListener=b.prototype.on,b.prototype.once=function(S,_){function N(){w.removeListener(S,N),_.apply(this,arguments)}var w=this;return N.listener=_,this.on(S,N),this},b.prototype.removeListener=function(S,_){if(this.$events&&this.$events[S]){var N=this.$events[S];if(T.util.isArray(N)){for(var w=-1,R=0,A=N.length;R<A;R++)if(N[R]===_||N[R].listener&&N[R].listener===_){w=R;break}if(w<0)return this;N.splice(w,1),N.length||delete this.$events[S]}else(N===_||N.listener&&N.listener===_)&&delete this.$events[S]}return this},b.prototype.removeAllListeners=function(S){return this.$events&&this.$events[S]&&(this.$events[S]=null),this},b.prototype.listeners=function(S){return this.$events||(this.$events={}),this.$events[S]||(this.$events[S]=[]),T.util.isArray(this.$events[S])||(this.$events[S]=[this.$events[S]]),this.$events[S]},b.prototype.emit=function(S){if(!this.$events)return!1;var _=this.$events[S];if(!_)return!1;var N=Array.prototype.slice.call(arguments,1);if(typeof _=="function")_.apply(this,N);else{if(!T.util.isArray(_))return!1;for(var w=_.slice(),R=0,A=w.length;R<A;R++)w[R].apply(this,N)}return!0}})(x!==void 0?x:K.exports,x!==void 0?x:K.parent.exports),(function(P,T){if(T&&T.parse)return P.JSON={parse:T.parse,stringify:T.stringify};throw new Error("JSON not available")})(x!==void 0?x:K.exports,typeof JSON<"u"?JSON:void 0),(function(P,T){var b=P.parser={},S=b.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],_=b.reasons=["transport not supported","client not handshaken","unauthorized"],N=b.advice=["reconnect"],w=T.JSON,R=T.util.indexOf;b.encodePacket=function(q){var J=R(S,q.type),V=q.id||"",B=q.endpoint||"",ae=q.ack,he=null;switch(q.type){case"error":var ie=q.reason?R(_,q.reason):"",I=q.advice?R(N,q.advice):"";ie===""&&I===""||(he=ie+(I!==""?"+"+I:""));break;case"message":q.data!==""&&(he=q.data);break;case"event":var W={name:q.name};q.args&&q.args.length&&(W.args=q.args),he=w.stringify(W);break;case"json":he=w.stringify(q.data);break;case"connect":q.qs&&(he=q.qs);break;case"ack":he=q.ackId+(q.args&&q.args.length?"+"+w.stringify(q.args):"")}var te=[J,V+(ae=="data"?"+":""),B];return he!=null&&te.push(he),te.join(":")},b.encodePayload=function(q){var J="";if(q.length==1)return q[0];for(var V=0,B=q.length;V<B;V++)J+=""+q[V].length+""+q[V];return J};var A=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;b.decodePacket=function(B){var J=B.match(A);if(!J)return{};var V=J[2]||"",B=J[5]||"",ae={type:S[J[1]],endpoint:J[4]||""};switch(V&&(ae.id=V,J[3]?ae.ack="data":ae.ack=!0),ae.type){case"error":var J=B.split("+");ae.reason=_[J[0]]||"",ae.advice=N[J[1]]||"";break;case"message":ae.data=B||"";break;case"event":try{var he=w.parse(B);ae.name=he.name,ae.args=he.args}catch{}ae.args=ae.args||[];break;case"json":try{ae.data=w.parse(B)}catch{}break;case"connect":ae.qs=B||"";break;case"ack":var J=B.match(/^([0-9]+)(\+)?(.*)/);if(J&&(ae.ackId=J[1],ae.args=[],J[3]))try{ae.args=J[3]?w.parse(J[3]):[]}catch{}break;case"disconnect":ae.reason=B}return ae},b.decodePayload=function(q){if(q.charAt(0)==""){for(var J=[],V=1,B="";V<q.length;V++)q.charAt(V)==""?(J.push(b.decodePacket(q.substr(V+1).substr(0,B))),V+=Number(B)+1,B=""):B+=q.charAt(V);return J}return[b.decodePacket(q)]}})(x!==void 0?x:K.exports,x!==void 0?x:K.parent.exports),(function(P,T){function b(S,_){this.socket=S,this.sessid=_,this.connectErrorCallback=void 0,this.isOpened=!1}P.Transport=b,T.util.mixin(b,T.EventEmitter),b.prototype.onData=function(S){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),S!==""){var _=T.parser.decodePayload(S);if(_&&_.length)for(var N=0,w=_.length;N<w;N++)this.onPacket(_[N])}return this},b.prototype.onPacket=function(S){return this.socket.setHeartbeatTimeout(),S.type=="heartbeat"?this.onHeartbeat():(S.type=="connect"&&S.endpoint==""&&this.onConnect(),S.type=="error"&&S.advice=="reconnect"&&(this.isOpened=!1),this.socket.onPacket(S),this)},b.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var S=this;this.closeTimeout=setTimeout(function(){S.onDisconnect()},this.socket.closeTimeout)}},b.prototype.onDisconnect=function(){return this.close&&this.isOpened&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},b.prototype.onConnect=function(){return this.socket.onConnect(),this.connectErrorCallback=void 0,this},b.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},b.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},b.prototype.packet=function(S){this.send(T.parser.encodePacket(S))},b.prototype.onHeartbeat=function(S){this.packet({type:"heartbeat"})},b.prototype.onOpen=function(){this.isOpened=!0,this.clearCloseTimeout(),this.socket.onOpen()},b.prototype.onClose=function(){this.isOpened=!1,this.socket.onClose(),this.onDisconnect()},b.prototype.prepareUrl=function(S){var _=this.socket.options;if(_["skipped handshake data"])return _.rewriteUrlForProxy(_["skipped handshake data"].websocketUrl+(S||""));var N=this.scheme()+"://"+_.host+":"+_.port+"/"+_.resource+"/"+T.protocol+"/"+this.name+"/"+this.sessid+(S||"");return _.rewriteUrlForProxy(N)},b.prototype.ready=function(S,_){_.call(this)},b.prototype.clearEventHandlers=function(){return this}})(x!==void 0?x:K.exports,x!==void 0?x:K.parent.exports),(function(P,T,b){function S(N){if(this.options={port:80,secure:!1,document:"document"in b&&document,resource:"socket.io",transports:T.transports.slice(),"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843},T.util.merge(this.options,N),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.disconnected=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||T.util.ua.hasCORS)){var w=this;T.util.on(b,"unload",function(){w.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function _(){}P.Socket=S,T.util.mixin(S,T.EventEmitter),S.prototype.of=function(N){return this.namespaces[N]||(this.namespaces[N]=new T.SocketNamespace(this,N),N!==""&&this.namespaces[N].packet({type:"connect"})),this.namespaces[N]},S.prototype.publish=function(){this.emit.apply(this,arguments);var N;for(var w in this.namespaces)this.namespaces.hasOwnProperty(w)&&(N=this.of(w),N.$emit.apply(N,arguments))},S.prototype.handshake=function(N){function w(he){he instanceof Error?R.onError(he.message):N.apply(null,he.split(":"))}var R=this,A=this.options;if(!R.disconnected){var q=A.rewriteUrlForProxy(["http"+(A.secure?"s":"")+":/",A.host+":"+A.port,A.resource,T.protocol,T.util.query(this.options.query,"t="+ +new Date)].join("/"));if(this.isXDomain()&&!T.util.ua.hasCORS){var J=document.getElementsByTagName("script")[0],V=document.createElement("script");V.src=q+"&jsonp="+T.j.length,J.parentNode.insertBefore(V,J),T.j.push(function(he){w(he),V.parentNode.removeChild(V)})}else{var B=T.util.request();B.open("GET",q,!0);var ae=this.options.requestHeaders;ae!==void 0&&Object.keys(ae).forEach(function(he){B.setRequestHeader(he,ae[he])}),B.onreadystatechange=function(){B.readyState==4&&(B.onreadystatechange=_,B.status==200?w(B.responseText):!R.reconnecting&&R.onError(B.responseText))},B.send(null)}}},S.prototype.getTransport=function(N){for(var w,R=N||this.transports,A=0;w=R[A];A++)if(T.Transport[w]&&T.Transport[w].check(this)&&(!this.isXDomain()||T.Transport[w].xdomainCheck()))return new T.Transport[w](this,this.sessionid);return null},S.prototype.connect=function(N){if(this.connecting||this.disconnected)return this;var w=this,R=function(q,J,V,B){function ae(){if(!w.connected&&!w.disconnected)if(w.connecting=!1,clearTimeout(w.connectTimeoutTimer),w.options["try multiple transports"]){for(;w.remainingTransports.length>0&&w.remainingTransports.splice(0,1)[0]!=w.transport.name;);w.remainingTransports.length?he(w.remainingTransports):w.publish("connect_failed")}else w.publish("connect_failed")}function he(ie){if(w.transport&&(w.transport.clearTimeouts(),w.transport.clearEventHandlers()),w.transport=w.getTransport(ie),!w.transport||w.disconnected)return w.publish("connect_failed");w.transport.ready(w,function(){w.connecting=!0,w.publish("connecting",w.transport.name),w.transport.open(ae),w.options["connect timeout"]&&(w.connectTimeoutTimer=setTimeout(function(){ae()},w.options["connect timeout"]))})}w.sessionid=q,w.closeTimeout=1e3*V+2e3,w.heartbeatTimeout=1e3*J+2e3,w.transports=B?T.util.intersect(B.split(","),w.options.transports):w.options.transports,w.setHeartbeatTimeout(),w.remainingTransports=w.transports.slice(0),he(w.transports),w.once("connect",function(){clearTimeout(w.connectTimeoutTimer),N&&typeof N=="function"&&N()})};if(this.options["skipped handshake data"]){var A=this.options["skipped handshake data"];R("v4c-"+new Date().getTime(),A.timeout,A.timeout,"websocket")}else this.handshake(R);return this},S.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);var N=this;this.heartbeatTimeoutTimer=setTimeout(function(){N.transport.onClose()},this.heartbeatTimeout)},S.prototype.packet=function(N){return this.connected&&!this.doBuffer?this.transport.packet(N):this.buffer.push(N),this},S.prototype.setBuffer=function(N){this.doBuffer=N,!N&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])},S.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this.disconnected=!0,this},S.prototype.disconnectSync=function(){var N=T.util.request(),w=this.resource+"/"+T.protocol+"/"+this.sessionid;N.open("GET",w,!0),this.onDisconnect("booted")},S.prototype.isXDomain=function(){var N=b.location.port||(b.location.protocol=="https:"?443:80);return this.options.host!==b.location.hostname||this.options.port!=N},S.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},S.prototype.onOpen=function(){this.open=!0},S.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},S.prototype.onPacket=function(N){this.of(N.endpoint).onPacket(N)},S.prototype.onError=function(N){N&&N.advice&&N.advice==="reconnect"&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",N&&N.reason?N.reason:N)},S.prototype.onDisconnect=function(N){var w=this.connected,R=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(w||R)&&(this.transport.close(),this.transport.clearTimeouts(),w?(this.publish("disconnect",N),N!="booted"&&this.options.reconnect&&!this.reconnecting&&this.reconnect()):this.publish("close_during_connecting",N))},S.prototype.reconnect=function(){function N(){if(R.connected){for(var V in R.namespaces)R.namespaces.hasOwnProperty(V)&&V!==""&&R.namespaces[V].packet({type:"connect"});R.publish("reconnect",R.transport.name,R.reconnectionAttempts)}clearTimeout(R.reconnectionTimer),R.removeListener("connect_failed",w),R.removeListener("connect",w),R.reconnecting=!1,delete R.reconnectionAttempts,delete R.reconnectionDelay,delete R.reconnectionTimer,delete R.redoTransports,R.options["try multiple transports"]=q}function w(){if(R.reconnecting)return R.connected?N():R.connecting&&R.reconnecting?R.reconnectionTimer=setTimeout(w,1e3):void(R.reconnectionAttempts++>=A?R.redoTransports?(R.publish("reconnect_failed"),N()):(R.on("connect_failed",w),R.options["try multiple transports"]=!0,R.transport=R.getTransport(),R.redoTransports=!0,R.connect()):(R.reconnectionDelay<J&&(R.reconnectionDelay*=2),R.connect(),R.publish("reconnecting",R.reconnectionDelay,R.reconnectionAttempts),R.reconnectionTimer=setTimeout(w,R.reconnectionDelay)))}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var R=this,A=this.options["max reconnection attempts"],q=this.options["try multiple transports"],J=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(w,this.reconnectionDelay),this.on("connect",w)}})(x!==void 0?x:K.exports,x!==void 0?x:K.parent.exports,z===void 0?window:z),(function(P,T){function b(_,N){this.socket=_,this.name=N||"",this.flags={},this.json=new S(this,"json"),this.ackPackets=0,this.acks={}}function S(_,N){this.namespace=_,this.name=N}P.SocketNamespace=b,T.util.mixin(b,T.EventEmitter),b.prototype.$emit=T.EventEmitter.prototype.emit,b.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},b.prototype.packet=function(_){return _.endpoint=this.name,this.socket.packet(_),this.flags={},this},b.prototype.send=function(_,N){var w={type:this.flags.json?"json":"message",data:_};return typeof N=="function"&&(w.id=++this.ackPackets,w.ack=!0,this.acks[w.id]=N),this.packet(w)},b.prototype.emit=function(_){var N=Array.prototype.slice.call(arguments,1),w=N[N.length-1],R={type:"event",name:_};return typeof w=="function"&&(R.id=++this.ackPackets,R.ack="data",this.acks[R.id]=w,N=N.slice(0,N.length-1)),R.args=N,this.packet(R)},b.prototype.disconnect=function(){return this.name===""?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},b.prototype.onPacket=function(_){function N(){w.packet({type:"ack",args:T.util.toArray(arguments),ackId:_.id})}var w=this;switch(_.type){case"connect":this.$emit("connect");break;case"disconnect":this.name===""?this.socket.onDisconnect(_.reason||"booted"):this.$emit("disconnect",_.reason||"");break;case"message":case"json":var R=["message",_.data];_.ack=="data"?R.push(N):_.ack&&this.packet({type:"ack",ackId:_.id}),this.$emit.apply(this,R);break;case"event":var R=[_.name].concat(_.args);_.ack=="data"&&R.push(N),this.$emit.apply(this,R);break;case"ack":this.acks[_.ackId]&&(this.acks[_.ackId].apply(this,_.args),delete this.acks[_.ackId]);break;case"error":_.advice?this.socket.onError(_):_.reason=="unauthorized"?this.$emit("connect_failed",_.reason):this.$emit("error",_.reason)}},S.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},S.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}})(x!==void 0?x:K.exports,x!==void 0?x:K.parent.exports),(function(P,T,b){function S(N){T.Transport.apply(this,arguments)}function _(){}P.websocket=S,T.util.inherit(S,T.Transport),S.prototype.name="websocket",S.prototype.open=function(N){var w,R=T.util.query(this.socket.options.query),A=this;return this.connectErrorCallback=N,w||(w=b.MozWebSocket||b.WebSocket),this.websocket=new w(this.prepareUrl(R)),this.websocket.onopen=function(){A.onOpen(),A.socket.setBuffer(!1)},this.websocket.onmessage=function(q){A.onData(q.data)},this.websocket.onclose=function(){A.onClose(),A.socket.setBuffer(!0)},this.websocket.onerror=function(q){A.onError(q)},this},S.prototype.send=function(N){return this.websocket.send(N),this},S.prototype.payload=function(N){for(var w=0,R=N.length;w<R;w++)this.packet(N[w]);return this},S.prototype.close=function(){return this.websocket.close(),this},S.prototype.onError=function(N){this.connectErrorCallback!==void 0&&(this.connectErrorCallback(),this.connectErrorCallback=void 0),this.socket.onError(N)},S.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},S.check=function(){return"WebSocket"in b&&!("__addTask"in WebSocket)||"MozWebSocket"in b},S.xdomainCheck=function(){return!0},S.prototype.clearEventHandlers=function(){return this.websocket&&(this.websocket.onopen=this.websocket.onmessage=this.websocket.onclose=this.websocket.onerror=_),this},T.transports.push("websocket")})(x!==void 0?x.Transport:K.exports,x!==void 0?x:K.parent.exports,z===void 0?window:z),(function(P,T,b){function S(N){N&&T.Transport.apply(this,arguments)}function _(){}P.XHR=S,T.util.inherit(S,T.Transport),S.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},S.prototype.payload=function(N){for(var w=[],R=0,A=N.length;R<A;R++)w.push(T.parser.encodePacket(N[R]));this.send(T.parser.encodePayload(w))},S.prototype.send=function(N){return this.post(N),this},S.prototype.post=function(N){function w(){this.readyState==4&&(this.onreadystatechange=_,this.status==200?(clearTimeout(this.ackTimeoutTimer),A.socket.setBuffer(!1)):A.onClose())}function R(){this.onload=_,A.socket.setBuffer(!1)}var A=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),b.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=R:this.sendXHR.onreadystatechange=w,this.sendXHR.send(N),A.sendXHR.ackTimeoutTimer=setTimeout(function(){A.onClose()},A.socket.options.ackTimeoutMs)},S.prototype.close=function(){return this.onClose(),this},S.prototype.request=function(N){var w=T.util.request(this.socket.isXDomain()),R=T.util.query(this.socket.options.query,"t="+ +new Date);w.open(N||"GET",this.prepareUrl(R),!0);var A=this.socket.options.requestHeaders;if(A!==void 0&&Object.keys(A).forEach(function(q){w.setRequestHeader(q,A[q])}),N=="POST")try{w.setRequestHeader?w.setRequestHeader("Content-type","text/plain;charset=UTF-8"):w.contentType="text/plain"}catch{}return w},S.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},S.check=function(N,w){try{var R=T.util.request(w),A=b.XDomainRequest&&R instanceof XDomainRequest,q=N&&N.options&&N.options.secure?"https:":"http:",J=q!=b.location.protocol;if(R&&(!A||!J))return!0}catch{}return!1},S.xdomainCheck=function(){return S.check(null,!0)},S.prototype.clearEventHandlers=function(){return this.sendXHR&&(this.sendXHR.onreadystatechange=this.sendXHR.onload=_),this}})(x!==void 0?x.Transport:K.exports,x!==void 0?x:K.parent.exports,z===void 0?window:z),(function(P,T,b){function S(){T.Transport.XHR.apply(this,arguments)}function _(){}P["xhr-polling"]=S,T.util.inherit(S,T.Transport.XHR),T.util.merge(S,T.Transport.XHR),S.prototype.name="xhr-polling",S.prototype.open=function(N){var w=this;return w.connectErrorCallback=N,T.Transport.XHR.prototype.open.call(w),!1},S.prototype.get=function(){function N(){this.readyState==4&&(this.onreadystatechange=_,this.status==200?(A.connectErrorCallback=void 0,A.onData(this.responseText),A.get()):(A.onClose(),A.connectErrorCallback!==void 0&&(A.connectErrorCallback(),A.connectErrorCallback=void 0)))}function w(){A.connectErrorCallback=void 0,this.onload=_,this.onerror=_,A.onData(this.responseText),A.get()}function R(){A.onClose(),A.connectErrorCallback!==void 0&&(A.connectErrorCallback(),A.connectErrorCallback=void 0)}if(this.isOpened){var A=this;this.xhr=this.request(),b.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=w,this.xhr.onerror=R):this.xhr.onreadystatechange=N,this.xhr.send(null)}},S.prototype.onClose=function(){if(T.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=_;try{this.xhr.abort()}catch{}this.xhr=null}},S.prototype.ready=function(N,w){var R=this;T.util.defer(function(){w.call(R)})},S.prototype.clearEventHandlers=function(){return T.Transport.XHR.prototype.clearEventHandlers.call(this),this.xhr&&(this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=_),this},T.transports.push("xhr-polling")})(x!==void 0?x.Transport:K.exports,x!==void 0?x:K.parent.exports,z===void 0?window:z),M.io=x}).call(M,X(13),X(14)(H))},function(H,M){var X;X=(function(){return this})();try{X=X||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(X=window)}H.exports=X},function(H,M){H.exports=function(X){return X.webpackPolyfill||(X.deprecate=function(){},X.paths=[],X.children||(X.children=[]),Object.defineProperty(X,"loaded",{enumerable:!0,get:function(){return X.l}}),Object.defineProperty(X,"id",{enumerable:!0,get:function(){return X.i}}),X.webpackPolyfill=1),X}},function(H,M,X){Object.defineProperty(M,"__esModule",{value:!0}),M.ConnectionTracker=M.Properties=M.TrackerStep=M.ClientEventName=M.ResponseData=void 0;var z=X(3),K=X(1),x=X(0),P=(function(){function R(A){this.id=A,this.status=200,this.headers={},this.body=""}return R})();M.ResponseData=P;var T;(function(R){R.Connected="trouter_js_client_connected",R.Disconnected="trouter_js_client_disconnected",R.Error="trouter_js_client_error",R.Progress="trouter_js_client_progress",R.Response="trouter_js_client_response",R.Request="trouter_js_client_request",R.CheckConnection="trouter_js_client_check_connection",R.Registration="trouter_js_client_registration",R.Unregistration="trouter_js_client_unregistration"})(T||(M.ClientEventName=T={}));var b=(function(){function R(A,q,J,V,B){this.stepName=A,this.operation=q,this.delta=J,this.ts=V,this.error=B}return R})();M.TrackerStep=b;var S=(function(){function R(){}return R})();M.Properties=S;var _=(function(){function R(){this.numberOfPingReplies=0,this.connectedTimestamp=0,this.isNewUrl=!1,this.transportType="",this.connectionNumber=0}return R})(),N=(function(){function R(){this.enabled=!1,this.numberOfStepsToMaintain=40,this.logHealthCheckError=!1,this.sendProgressTimeoutSecs=55,this.logSendPingError=!1,this.maxBackoffInMs=12e4,this.trouter_js_client_connected=!1,this.trouter_js_client_disconnected=!1,this.trouter_js_client_error=!1,this.trouter_js_client_progress=!1,this.trouter_js_client_response=!1,this.trouter_js_client_request=!1,this.trouter_js_client_registration=!1,this.trouter_js_client_unregistration=!1,this.trouter_js_client_check_connection=!0}return R})(),w=(function(){function R(A,q,J,V,B,ae,he){this.clientId=q,this.clientInfo=J,this.getServerState=V,this.endpointId=B,this.clientCorrelationID=ae,this.environment=he,this.logger=new x.Logger("ConnectionTracker",A),this.clientCorrelationID=ae!==void 0?ae:"",this.steps=[],this.connectionAttempt=0,this.totalStepCount=0,this.beginTimestamp=new z.Timespan,this.eventLogSettings=new N,this.connectedInfo=new _}return R.prototype.enable=function(A){this.eventLogSettings.enabled=!0,this.eventLogger=A},R.prototype.disable=function(){this.eventLogSettings.enabled=!1},R.prototype.sendProgress=function(A){this.steps.length>0&&this.sendTelemetry(T.Progress,A,this.steps)},R.prototype.cancelProgressTimer=function(){this.progressTimeout!==void 0&&(clearTimeout(this.progressTimeout),this.progressTimeout=void 0)},R.prototype.resetProgressSendTimer=function(){var A=this;this.cancelProgressTimer(),this.eventLogSettings.sendProgressTimeoutSecs!==void 0&&this.eventLogSettings.sendProgressTimeoutSecs>0&&(this.progressTimeout=setTimeout(function(){A.sendProgress({reason:"timeout",timeoutSecs:A.eventLogSettings.sendProgressTimeoutSecs})},1e3*this.eventLogSettings.sendProgressTimeoutSecs))},R.prototype.setConnectedInfo=function(A,q){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=Date.now(),this.connectedInfo.isNewUrl=A,this.connectedInfo.transportType=q,++this.connectedInfo.connectionNumber},R.prototype.clearConnectedInfo=function(){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=0,this.connectedInfo.isNewUrl=!0,this.connectedInfo.transportType=""},R.prototype.copyProperties=function(A,q){for(var J=0,V=Object.keys(q);J<V.length;J++){var B=V[J];q[B]!==void 0&&(A[B.replace(/-/g,"_")]={value:q[B]})}},R.prototype.increasePingResponseCount=function(){++this.connectedInfo.numberOfPingReplies},R.prototype.sendTelemetry=function(A,q,J){try{if(this.eventLogSettings.enabled===!0&&this.eventLogSettings[A]===!0&&this.eventLogger!==void 0){var V=this.getServerState(),B={name:A,properties:{connectionAttempt:{value:this.connectionAttempt},epid:{value:this.endpointId},clientCorrelationID:{value:this.clientCorrelationID},steps:{value:(0,z.toJson)(J)},clientID:{value:this.clientId},eventVersion:{value:3},environment:{value:this.environment},cv:{value:K.CLIENT_VERSION},ua:{value:this.clientInfo.ua},connectionId:{value:V.connectionId},connectedClientId:{value:V.connectedClientId},domId:{value:V.domId},url:{value:V.unsecureUrl},surl:{value:V.url},ttlInSecs:{value:V.getRemainingTtlInSec()},numberOfPingReplies:{value:this.connectedInfo.numberOfPingReplies},connectedTimestamp:{value:this.connectedInfo.connectedTimestamp},isNewUrl:{value:this.connectedInfo.isNewUrl},transportType:{value:this.connectedInfo.transportType},connectionNumber:{value:this.connectedInfo.connectionNumber}}};this.copyProperties(B.properties,q),this.eventLogger.logEvent(B)}}catch(ae){this.logger.warn("error in sending event ".concat(A,": ").concat((0,z.toJson)(ae)))}},R.prototype.createStep=function(A,q,J){return new b(A,q,this.beginTimestamp.duration,Date.now(),J)},R.prototype.addStep=function(A,q,J){if(this.eventLogSettings.enabled!==!1&&(this.steps.length===0&&this.beginTimestamp.reset(),this.steps.push(this.createStep(A,q,J)),++this.totalStepCount,this.eventLogSettings.numberOfStepsToMaintain!==void 0&&this.steps.length>this.eventLogSettings.numberOfStepsToMaintain)){var V=this.steps.slice(0);this.steps.length=0,this.sendTelemetry(T.Progress,{reason:"flush"},V)}},R.prototype.trackStart=function(A){this.addStep(A,"start")},R.prototype.trackEnd=function(A){this.addStep(A,"end")},R.prototype.trackError=function(A,q,J,V){J===void 0&&(J=!0),A==="health"&&this.eventLogSettings.logHealthCheckError!==!0||A==="ping"&&this.eventLogSettings.logSendPingError===!1||(V===void 0&&(V="error"),J===!0&&this.addStep(A,V,q),this.sendTelemetry(T.Error,{},[this.createStep(A,V,q)]))},R.prototype.trackProgress=function(A,q){this.addStep(A,q)},R.prototype.trackConnected=function(A,q){this.setConnectedInfo(A,q);var J=this.steps.slice(0),V=this.totalStepCount,B=this.beginTimestamp.duration;this.steps.length=0,this.totalStepCount=0,this.sendTelemetry(T.Connected,{stepCount:J.length,totalStepCount:V,connectionEstablishmentMs_Total:B},J),this.cancelProgressTimer()},R.prototype.getSessionLength=function(){return Date.now()-this.connectedInfo.connectedTimestamp},R.prototype.trackDisconnected=function(A){A.sessionLengthMS=this.getSessionLength(),this.sendTelemetry(T.Disconnected,A,[]),this.resetProgressSendTimer()},R.prototype.trackNewConnection=function(){++this.connectionAttempt},R.prototype.trackRequest=function(A,q){var J={};q!==void 0&&(J.hasError=!0,J.error=q);try{if(A){J.requestID=A.id,J.httpMethod=A.method,J.url=A.url,J.bodyLength=A.body.length,J.shortUrl=A.shortUrl,J.requestTimeStamp=A.startTS,J.correlationVector=A.correlationVector;for(var V=A.headers,B=0,ae=Object.keys(V);B<ae.length;B++){var he=ae[B];J[he]=V[he]}}}catch(ie){J.hasError=!0,J.error="".concat(J.error," error creating request context ").concat((0,z.toJson)(ie))}this.sendTelemetry(T.Request,J,[])},R.prototype.trackResponse=function(A,q,J,V){var B={};V!==void 0&&(B.hasError=!0,B.error=V);try{if(B.responseTimestamp=J!==void 0?J.sentTS:Date.now(),A){B.requestID=A.id,B.httpMethod=A.method,B.shortUrl=A.shortUrl,B.correlationVector=A.correlationVector;for(var ae=A.headers,he=0,ie=Object.keys(ae);he<ie.length;he++){var I=ie[he];B[I]=ae[I]}}J&&(B.latencyMS=q,B.responseCode=J.status,B.responseLength=J.body.length)}catch(W){B.hasError=!0,B.error="".concat(B.error," error creating response context ").concat((0,z.toJson)(W))}this.sendTelemetry(T.Response,B,[])},R.prototype.sendResponseError=function(A,q,J){this.trackResponse(q,void 0,J,A)},R.prototype.close=function(){this.sendProgress({reason:"closed"}),this.steps.length=0,this.cancelProgressTimer()},R.prototype.mergeSettings=function(A){if(A){this.eventLogSettings.numberOfStepsToMaintain=Math.min(40,Math.max(10,A.numberOfStepsToMaintain!==void 0?A.numberOfStepsToMaintain:0));var q=Math.min(3600,Math.max(55,A.sendProgressTimeoutSecs!==void 0?A.sendProgressTimeoutSecs:0));this.eventLogSettings.logHealthCheckError=A.logHealthCheckError,this.eventLogSettings.logSendPingError=A.logSendPingError;for(var J=0,V=Object.keys(T).map(function(ae){return T[ae]});J<V.length;J++){var B=V[J];A[B]!==void 0&&(this.eventLogSettings[B]=A[B])}this.eventLogSettings.sendProgressTimeoutSecs!==q&&(this.eventLogSettings.sendProgressTimeoutSecs=q,this.resetProgressSendTimer())}},R})();M.ConnectionTracker=w},function(H,M,X){Object.defineProperty(M,"__esModule",{value:!0}),M.DisconnectReason=void 0;var z=(function(){function K(x,P,T){this.reason=x,this.claims=P,this.details=T}return K.fromRawReason=function(x,P){if(x===""||x==="dup")return new K(x);try{var T=JSON.parse(x);return typeof T!="object"||T.reason===void 0?(P?.error("invalid disconnect reason format"),new K("unknown",void 0,x)):new K(T.reason,T.claims,T.details)}catch{return new K("disconnect",void 0,x)}},K.fromSocketIoEventData=function(x,P){return typeof P=="string"?new K(x,void 0,P):void 0},K.prototype.toTelemetryString=function(){return this.reason==="socketerror"||this.reason==="reconnecterror"||this.reason==="disconnect"?this.details:this.reason},K})();M.DisconnectReason=z},function(H,M,X){function z(x,P,T){if(x===void 0||P===void 0)return!1;var b=Date.now()-x;return b>P*T.tolerance&&b>T.minimumWaitMs}Object.defineProperty(M,"__esModule",{value:!0}),M.ExponentialBackoff=void 0;var K=(function(){function x(P,T,b){b===void 0&&(b={tolerance:2,minimumWaitMs:1e4}),this.logger=P,this.maxBackoffInMs=T,this.gapDetectionSettings=b,this.backoffId=0,this.backoffCount=0}return x.calculateNextBackoffMs=function(P,T){var b=1+.4*(Math.random()-.5),S=1e3*Math.pow(2,P)*b;return S=Math.round(S),Math.min(T,S)},x.prototype.setMaxBackoffMs=function(P){this.maxBackoffInMs=P},x.prototype.backoff=function(P,T){var b=this;if(this.timerHandle!==void 0&&(this.logger.debug("Clearing current back off"),clearTimeout(this.timerHandle),this.timerHandle=void 0),this.previousCompleteTime!==void 0){var S=Date.now()-this.previousCompleteTime;S>this.maxBackoffInMs*this.gapDetectionSettings.tolerance&&S>this.gapDetectionSettings.minimumWaitMs&&(this.logger.info("Back off for ".concat(P," with ID ").concat(this.backoffId," will be reset due to a lot of time having passed since the previous backoff (").concat(S," ms)")),this.backoffCount=0,this.previousCompleteTime=void 0)}var _=x.calculateNextBackoffMs(this.backoffCount,this.maxBackoffInMs);this.backoffId++,this.backoffCount++,this.logger.info("Backing off ".concat(P," for ").concat(_," milliseconds with ID ").concat(this.backoffId)),this.callback=function(w,R){z(w,R,b.gapDetectionSettings)&&(b.logger.info("Back off for ".concat(P," with ID ").concat(b.backoffId," will be reset due to the wait (").concat(Date.now()-(w??0)," ms) being longer than expected (").concat(R," ms)")),b.backoffCount=0),b.logger.info("Back off for ".concat(P," with ID ").concat(b.backoffId," complete, invoking handler")),b.timerHandle=void 0,b.callback=void 0,b.previousCompleteTime=Date.now(),T()};var N=Date.now();this.timerHandle=setTimeout(function(){var w;return(w=b.callback)===null||w===void 0?void 0:w.call(b,N,_)},_)},x.prototype.reset=function(){this.timerHandle!==void 0&&(this.logger.debug("Resetting back off with ID ".concat(this.backoffId)),clearTimeout(this.timerHandle),this.timerHandle=void 0,this.callback=void 0),this.backoffCount=0},x.prototype.expediteIfPending=function(){if(this.backoffCount=0,this.timerHandle!==void 0){this.logger.debug("Expediting back off with ID ".concat(this.backoffId)),clearTimeout(this.timerHandle),this.timerHandle=void 0;var P=this.callback;this.callback=void 0,P&&P()}},x})();M.ExponentialBackoff=K},function(H,M,X){var z=this&&this.__spreadArray||function(T,b,S){if(S||arguments.length===2)for(var _,N=0,w=b.length;N<w;N++)!_&&N in b||(_||(_=Array.prototype.slice.call(b,0,N)),_[N]=b[N]);return T.concat(_||Array.prototype.slice.call(b))};Object.defineProperty(M,"__esModule",{value:!0}),M.LoggingManagerConsumer=M.RegistrationEnforcer=void 0;var K=X(6),x=(function(){function T(b,S,_){this.wrapped=b,this.shouldConnectionDependOnRegistration=S,this.shouldHoldBackEvents=_,this.isRegistered=!1,this.heldBackEvents=[]}return T.prototype.onDownstreamRequest=function(b,S,_){this.passIfRegisteredOrNotNeeded("onDownstreamRequest",b,S,_)},T.prototype.onConnected=function(b){this.passIfRegisteredOrNotNeeded("onConnected",b)},T.prototype.onRegistered=function(b){this.isRegistered=!0,this.wrapped.onRegistered(b),this.fireHeldBackEvents()},T.prototype.onUnregistered=function(b){this.isRegistered=!1,this.wrapped.onUnregistered(b),b.getState()===K.State.Connected&&this.shouldConnectionDependOnRegistration()&&b.forceReconnectDueToNoRegistration()},T.prototype.onReconnecting=function(b){this.wrapped.onReconnecting(b)},T.prototype.onReconnectIsRequired=function(b,S,_){this.wrapped.onReconnectIsRequired(b,S,_)},T.prototype.onDisconnected=function(b){this.isRegistered=!1,this.dropHeldBackEvents(),this.wrapped.onDisconnected(b)},T.prototype.onTerminalError=function(b){this.wrapped.onTerminalError(b)},T.prototype.onConnectionParametersUpdated=function(b){this.wrapped.onConnectionParametersUpdated(b)},T.prototype.onTrouterMessageLost=function(b){this.passIfRegisteredOrNotNeeded("onTrouterMessageLost",b)},T.prototype.onUserActivityStateAccepted=function(b){this.passIfRegisteredOrNotNeeded("onUserActivityStateAccepted",b)},T.prototype.onAudiencesSetResolved=function(b,S){this.passIfRegisteredOrNotNeeded("onAudiencesSetResolved",b,S)},T.prototype.getState=function(){return this.wrapped.getState()},T.prototype.holdBackEvent=function(b){for(var S=[],_=1;_<arguments.length;_++)S[_-1]=arguments[_];this.heldBackEvents.push({kind:b,args:S})},T.prototype.passIfRegisteredOrNotNeeded=function(b){for(var S,_=[],N=1;N<arguments.length;N++)_[N-1]=arguments[N];var w=this.shouldConnectionDependOnRegistration(),R=this.shouldHoldBackEvents();w&&R||this.fireHeldBackEvents(w?function(A){return A.kind!=="onConnected"}:void 0),this.isRegistered||!w||R===!1&&b!=="onConnected"?(S=this.wrapped)[b].apply(S,_):this.holdBackEvent.apply(this,z([b],_,!1))},T.prototype.fireHeldBackEvents=function(b){for(var S,_=0,N=this.heldBackEvents;_<N.length;_++){var w=N[_];(b===void 0||b(w))&&(S=this.wrapped)[w.kind].apply(S,w.args)}this.heldBackEvents=b===void 0?[]:this.heldBackEvents.filter(function(R){return!b(R)})},T.prototype.dropHeldBackEvents=function(){this.heldBackEvents=[]},T})();M.RegistrationEnforcer=x;var P=(function(){function T(b,S,_,N){this.wrapped=b,this.prefix=S,this.logger=_,this.onEventAction=N}return T.prototype.onEvent=function(b,S){var _;this.onEventAction!==void 0?this.onEventAction(b,S):((_=this.logger)!==null&&_!==void 0?_:console).log("".concat(this.prefix," TracingEnforcer: ").concat(b,"(").concat(S,")"))},T.prototype.onDownstreamRequest=function(b,S,_){this.onEvent("onDownstreamRequest",JSON.stringify({request:S,response:_})),this.wrapped.onDownstreamRequest(b,S,_)},T.prototype.onConnected=function(b){this.onEvent("onConnected",b.getState().toString()),this.wrapped.onConnected(b)},T.prototype.onRegistered=function(b){this.onEvent("onRegistered",b.getState().toString()),this.wrapped.onRegistered(b)},T.prototype.onUnregistered=function(b){this.onEvent("onUnregistered",b.getState().toString()),this.wrapped.onUnregistered(b)},T.prototype.onReconnecting=function(b){this.onEvent("onReconnecting",b.getState().toString()),this.wrapped.onReconnecting(b)},T.prototype.onReconnectIsRequired=function(b,S,_){this.onEvent("onReconnectIsRequired",JSON.stringify({connection:b.getState().toString(),useConnectParamsFromCache:S,reason:_})),this.wrapped.onReconnectIsRequired(b,S,_)},T.prototype.onDisconnected=function(b){this.onEvent("onDisconnected",b.getState().toString()),this.wrapped.onDisconnected(b)},T.prototype.onTerminalError=function(b){this.onEvent("onTerminalError",JSON.stringify({connection:b})),this.wrapped.onTerminalError(b)},T.prototype.onConnectionParametersUpdated=function(b){this.onEvent("onConnectionParametersUpdated",JSON.stringify({connectParams:b})),this.wrapped.onConnectionParametersUpdated(b)},T.prototype.onTrouterMessageLost=function(b){this.onEvent("onTrouterMessageLost",JSON.stringify({flowTags:b})),this.wrapped.onTrouterMessageLost(b)},T.prototype.onUserActivityStateAccepted=function(b){this.onEvent("onUserActivityStateAccepted",JSON.stringify({cv:b})),this.wrapped.onUserActivityStateAccepted(b)},T.prototype.onAudiencesSetResolved=function(b,S){this.onEvent("onAudiencesSetResolved",JSON.stringify({audienceSubscriptionsResponse:b,cv:S})),this.wrapped.onAudiencesSetResolved(b,S)},T.prototype.getState=function(){return this.wrapped.getState()},T})();M.LoggingManagerConsumer=P},function(H,M,X){Object.defineProperty(M,"__esModule",{value:!0}),M.TrouterManagerFsm=void 0;var z=X(2),K=X(4),x=X(0),P=X(7),T=(function(){function b(S,_){this.worker=_,this.state=K.TrouterManagerState.Unknown,this.logger=new x.Logger("ManagerFsm",S)}return b.prototype.start=function(){this.state===K.TrouterManagerState.Unknown?(this.setState(K.TrouterManagerState.Disconnected),this.worker.forceStopLingeringConnection(),this.worker.startFirstConnection()):(this.logger.info("start called in state '".concat(K.TrouterManagerState[this.state],"', expediting pending backoffs, if any")),this.worker.expediteBackoffOnConnections())},b.prototype.stop=function(S){this.state!==K.TrouterManagerState.Unknown?(this.setState(K.TrouterManagerState.Unknown),this.worker.stopFirstConnection(S===!0),this.worker.stopSecondConnection(S===!0)):this.showIgnored("stop")},b.prototype.getState=function(){switch(this.state){case K.TrouterManagerState.Unknown:case K.TrouterManagerState.Connected:case K.TrouterManagerState.Disconnected:case K.TrouterManagerState.Switching:return this.state;case K.TrouterManagerState.TerminalError:return z.TrouterState.Disconnected}},b.prototype.getInternalState=function(){return this.state},b.prototype.onConnected=function(S){this.state===K.TrouterManagerState.Disconnected&&S?this.worker.doesSecondConnectionExist()?this.setState(K.TrouterManagerState.Switching):(this.setState(K.TrouterManagerState.Connected),this.worker.dispatchConnected()):this.showIgnored("onConnected(".concat(S,")"))},b.prototype.onRegistered=function(S){this.state!==K.TrouterManagerState.Disconnected||S?this.state!==K.TrouterManagerState.Switching||S?this.state===K.TrouterManagerState.Disconnected&&S&&(this.setState(K.TrouterManagerState.Connected),this.worker.dispatchConnected()):(this.setState(K.TrouterManagerState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnectionDelayed(),this.worker.dispatchConnected()):(this.setState(K.TrouterManagerState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnection(!0),this.worker.dispatchConnected()),this.worker.dispatchRegistrationState(!0)},b.prototype.onUnregistered=function(S){S&&this.worker.dispatchRegistrationState(!1)},b.prototype.onReconnecting=function(S){this.state!==K.TrouterManagerState.Connected&&this.state!==K.TrouterManagerState.Switching||!S?this.showIgnored("onReconnecting(".concat(S,")")):(this.setState(K.TrouterManagerState.Disconnected),this.worker.dispatchDisconnected())},b.prototype.onReconnectionRequired=function(S,_,N){this.state===K.TrouterManagerState.Connected&&S?(this.setState(K.TrouterManagerState.Switching),this.worker.startSecondConnection(_)):this.state===K.TrouterManagerState.Disconnected&&S?this.worker.startSecondConnection(_):this.state===K.TrouterManagerState.Switching&&S&&N===P.ReconnectReason.Configuration?(this.logger.debug("onReconnectionRequired: switch requested while already in Switching state"),this.worker.stopSecondConnection(!0),this.worker.startSecondConnection(_)):this.showIgnored("onReconnectionRequired(".concat(S,")"))},b.prototype.onDisconnected=function(S){this.state==K.TrouterManagerState.Unknown&&S?this.worker.dispatchDisconnected():this.state==K.TrouterManagerState.Switching&&S?(this.worker.switchConnections(),this.worker.stopSecondConnection(!1),this.setState(K.TrouterManagerState.Disconnected),this.worker.dispatchDisconnected()):this.showIgnored("onDisconnected(".concat(S,")"))},b.prototype.onTerminalError=function(){this.setState(K.TrouterManagerState.TerminalError),this.worker.dispatchTerminalError()},b.prototype.showIgnored=function(S){this.logger.info("Ignoring event '".concat(S,"' in state '").concat(K.TrouterManagerState[this.state],"'"))},b.prototype.setState=function(S){if(this.logger.info("Switching from state '".concat(K.TrouterManagerState[this.state],"' to state '").concat(K.TrouterManagerState[S],"'")),this.state===S)return void this.logger.error("Attempt to switch to the current state '".concat(K.TrouterManagerState[S],"'"));this.state=S},b})();M.TrouterManagerFsm=T},function(H,M,X){function z(ie,I){if(!I)return ie;var W=_(_({},ie),{enabled:I.TelemetryEnabled});return I.ClientTelemetryEventEnabled!==void 0&&(W=_(_({},W),I.ClientTelemetryEventEnabled)),W}function K(ie,I,W){var te,ge,we,Ae,He,Ge,j,C,D,ne,$=function(se){return ie.proxyUrlRewrite?(I.info("Using rewritten URL for proxy"),ie.proxyUrlRewrite(se)):se};return{clientInfo:{ua:ie.trouterSettings.productName,v:ie.trouterSettings.version},ioOptions:{ackTimeoutMs:5e3,rewriteUrlForProxy:$},clientCorrelationID:ie.trouterSettings.sessionId,environment:ie.trouterSettings.environment,telemetrySettings:z(ie.telemetryConfig.settings,W),eventLogger:ie.telemetryConfig.eventLogger,endpointId:ie.trouterSettings.registrationId,trouterUrl:W?.TrouterConnectionUrl||ie.trouterSettings.trouterServiceUrl,registration:ie.trouterSettings.registrarServiceUrl?{registrarUrl:ie.trouterSettings.registrarServiceUrl,registrationId:(te=ie.trouterSettings.registrationId)!==null&&te!==void 0?te:"",pnhAppId:(ge=ie.trouterSettings.pnhAppId)!==null&&ge!==void 0?ge:"",platform:(we=ie.trouterSettings.platform)!==null&&we!==void 0?we:"",pnhTemplateKey:(Ae=ie.trouterSettings.pnhTemplate)!==null&&Ae!==void 0?Ae:"",platformUIVersion:(He=ie.trouterSettings.platformUIVersion)!==null&&He!==void 0?He:"",productContext:ie.trouterSettings.pnhProductContext||void 0,context:(Ge=ie.trouterSettings.pnhContext)!==null&&Ge!==void 0?Ge:"",registrarTtlSec:((j=ie.trouterSettings.maxRegistrationTimeInMs)!==null&&j!==void 0?j:0)/1e3}:void 0,connectionDependsOnRegistration:ie.trouterSettings.registrarServiceUrl===void 0?function(){return!1}:(C=ie.trouterSettings.connectionDependsOnRegistration)!==null&&C!==void 0?C:function(){return!1},delayEventsUntilRegistered:(D=ie.trouterSettings.delayEventsUntilRegistered)!==null&&D!==void 0?D:function(){return!1},timeoutOptions:_({connectionTimeoutMs:ie.trouterSettings.trouterConnectTimeoutInMs||3e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:ie.trouterSettings.productName==="TeamsCDL"?3e5:3e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},ie.trouterSettings.timeoutOptions),incallTimeoutOptions:_({connectionTimeoutMs:1e4,fetchTimeoutMs:5e3,pingTimeoutMs:5e3,pongTimeoutMs:2e3,maxBackoffMs:ie.trouterSettings.productName==="TeamsCDL"?3e5:1e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},ie.trouterSettings.incallTimeoutOptions),incallModeTimeoutMs:(ne=ie.trouterSettings.incallModeTimeoutMs)!==null&&ne!==void 0?ne:0,lingeringConnectionDelayMs:6e4,userActivitySecondResendDelayMs:ie.trouterSettings.userActivitySecondResendDelayMs||1e4,duplicateDisconnectThresholdMs:1e4,connectionCache:ie.connectionCache,registrationStateCallback:ie.registrationStateCallbackForAcsDoNotUse,rewriteUrlForProxy:$,retryLimitOnTokenFetch:ie.trouterSettings.retryLimitOnTokenFetch,extraConnectionHeaders:ie.trouterSettings.extraConnectionHeaders,expediteBackoffOnStartMinimumDelayMs:1e4,toJSON:function(){return _(_({},this),{connectionCache:this.connectionCache?{}:this.connectionCache})}}}function x(ie){return new he(ie)}function P(){return R.CLIENT_VERSION}function T(ie,I){var W=ie.indexOf("://");if(W>=0){var te=ie.indexOf("/",W+3);if(te>=0)return I+ie.substr(te)}return""}function b(ie){var I=this;return function(W){return N(I,void 0,void 0,function(){var te;return w(this,function(ge){switch(ge.label){case 0:return te={},[4,ie(W.needFresh)];case 1:return[2,(te.token=ge.sent(),te.tokenType="skype",te)]}})})}}function S(ie,I){var W,te=this;return function(ge){return N(te,void 0,void 0,function(){var we,Ae,He;return w(this,function(Ge){switch(Ge.label){case 0:we=new Date,Ae=setInterval(function(){var j=Math.round((Date.now()-we.getTime())/6e4);ie.warn("Note: Trouter auth token request promise from ".concat(we.toISOString()," has not been resolved for ").concat(j," minutes. The client is blocked from operating properly"))},3e5),Ge.label=1;case 1:return Ge.trys.push([1,,3,4]),[4,I(ge)];case 2:return He=Ge.sent(),ge.needFresh&&He.token===W&&ie.error("API violation: Trouter auth token provider got a request with needRefresh=true, but returned the same token as last time anyway. Please fix the host app"),W=He.token,[2,He];case 3:return clearInterval(Ae),[7];case 4:return[2]}})})}}var _=this&&this.__assign||function(){return _=Object.assign||function(ie){for(var I,W=1,te=arguments.length;W<te;W++){I=arguments[W];for(var ge in I)Object.prototype.hasOwnProperty.call(I,ge)&&(ie[ge]=I[ge])}return ie},_.apply(this,arguments)},N=this&&this.__awaiter||function(ie,I,W,te){function ge(we){return we instanceof W?we:new W(function(Ae){Ae(we)})}return new(W||(W=Promise))(function(we,Ae){function He(C){try{j(te.next(C))}catch(D){Ae(D)}}function Ge(C){try{j(te.throw(C))}catch(D){Ae(D)}}function j(C){C.done?we(C.value):ge(C.value).then(He,Ge)}j((te=te.apply(ie,I||[])).next())})},w=this&&this.__generator||function(ie,I){function W(j){return function(C){return te([j,C])}}function te(j){if(ge)throw new TypeError("Generator is already executing.");for(;He&&(He=0,j[0]&&(Ge=0)),Ge;)try{if(ge=1,we&&(Ae=2&j[0]?we.return:j[0]?we.throw||((Ae=we.return)&&Ae.call(we),0):we.next)&&!(Ae=Ae.call(we,j[1])).done)return Ae;switch(we=0,Ae&&(j=[2&j[0],Ae.value]),j[0]){case 0:case 1:Ae=j;break;case 4:return Ge.label++,{value:j[1],done:!1};case 5:Ge.label++,we=j[1],j=[0];continue;case 7:j=Ge.ops.pop(),Ge.trys.pop();continue;default:if(Ae=Ge.trys,!(Ae=Ae.length>0&&Ae[Ae.length-1])&&(j[0]===6||j[0]===2)){Ge=0;continue}if(j[0]===3&&(!Ae||j[1]>Ae[0]&&j[1]<Ae[3])){Ge.label=j[1];break}if(j[0]===6&&Ge.label<Ae[1]){Ge.label=Ae[1],Ae=j;break}if(Ae&&Ge.label<Ae[2]){Ge.label=Ae[2],Ge.ops.push(j);break}Ae[2]&&Ge.ops.pop(),Ge.trys.pop();continue}j=I.call(ie,Ge)}catch(C){j=[6,C],we=0}finally{ge=Ae=0}if(5&j[0])throw j[1];return{value:j[0]?j[1]:void 0,done:!0}}var ge,we,Ae,He,Ge={label:0,sent:function(){if(1&Ae[0])throw Ae[1];return Ae[1]},trys:[],ops:[]};return He={next:W(0),throw:W(1),return:W(2)},typeof Symbol=="function"&&(He[Symbol.iterator]=function(){return this}),He};Object.defineProperty(M,"__esModule",{value:!0}),M.replaceTrouterUrlBase=M.getTrouterServiceVersion=M.createTrouterService=M.TrouterService=M.UserActivityState=M.TrouterState=void 0;var R=X(1),A=X(2);Object.defineProperty(M,"TrouterState",{enumerable:!0,get:function(){return A.TrouterState}}),Object.defineProperty(M,"UserActivityState",{enumerable:!0,get:function(){return A.UserActivityState}});var q=X(0),J=X(8),V=X(9),B=X(10),ae=X(11),he=(function(){function ie(I){this.logProvider=I,this.stateChangedListeners=[],this.logger=new q.Logger("Trouter",I),this.trouterUrlPromise=new ae.TrouterUrlPromise(I),this.messageHandlers=new J.MessageHandlerRegistry(I),this.listeners={},this.connectionInfo=null,this.logger.info("Created TrouterService version ".concat(R.CLIENT_VERSION))}return ie.prototype.start=function(I){var W;if(this.logger.info("Start"),!I.skypeTokenProvider&&!I.authTokenProvider)throw new Error("no token provider has been configured, either skypeTokenProvider or authTokenProvider must be populated");I.skypeTokenProvider&&!I.trouterSettings.disableInternalSkypeTokenCache&&(I.skypeTokenProvider=(0,V.addCacheAsBackupTo)(I.skypeTokenProvider)),this.trouterCfg=I;var te=K(I,this.logger,this.ecsCfg);I.internalEnableV4cProtocol===!1&&(te.forceV4aProtocol=!0);var ge=S(this.logger,(W=I.authTokenProvider)!==null&&W!==void 0?W:b(I.skypeTokenProvider));this.trouterServer===void 0&&(this.trouterServer=new B.TrouterManager(this.logProvider,te,ge,I.authTokenProvider===void 0,this)),this.pendingActivityState!==void 0&&(this.trouterServer.setUserActivityState(this.pendingActivityState[0],this.pendingActivityState[1]),this.pendingActivityState=void 0),this.trouterServer.start()},ie.prototype.stop=function(I){this.logger.info("close connection"),this.trouterUrlPromise.rejectUrl(new Error("TrouterService is stopped")),this.trouterServer!==void 0&&this.trouterServer.stop(I)},ie.prototype.setEcsConfig=function(I){return N(this,void 0,void 0,function(){var W=this;return w(this,function(te){return[2,new Promise(function(ge){if(W.ecsCfg=I.TrouterJScriptClient,W.logger.info("Setting ECS configuration to ".concat(JSON.stringify(W.ecsCfg))),W.trouterServer!==void 0&&W.trouterCfg!==void 0){var we=K(W.trouterCfg,W.logger,W.ecsCfg);W.trouterServer.configure(we)}ge()})]})})},ie.prototype.checkConnection=function(I){this.trouterServer!==void 0&&this.trouterServer.checkConnection(I!=null&&I)},ie.prototype.resendRegistration=function(){return N(this,void 0,void 0,function(){return w(this,function(I){if(!this.trouterServer)throw new Error("resendRegistration called too early");return[2,this.trouterServer.resendRegistration()]})})},ie.prototype.registerListener=function(I,W){return W===""||!W.startsWith("/")||W.includes("?")||W.includes("#")?(this.logger.error("Listener path '".concat(W,"' is not valid")),!1):this.listeners[W]?(this.logger.error("Another listener is already registered for path '".concat(W,"'")),!1):(this.listeners[W]=I,this.logger.debug("Listener for path '".concat(W,"' registered")),this.connectionInfo&&I.onTrouterConnected(this.connectionInfo.baseEndpointUrl+W,this.connectionInfo),!0)},ie.prototype.unregisterListener=function(I){for(var W=[],te=0,ge=Object.keys(this.listeners);te<ge.length;te++){var we=ge[te];this.listeners[we]===I&&W.push(we)}if(W.length===0)return!1;for(var Ae=0,He=W;Ae<He.length;Ae++){var we=He[Ae];delete this.listeners[we]}return this.logger.debug("Listener for path(s) '".concat(W.join("', '"),"' unregistered")),!0},ie.prototype.onTrouterConnected=function(I,W){this.logger.debug("Trouter is now connected");for(var te=0,ge=Object.keys(this.listeners);te<ge.length;te++){var we=ge[te];try{this.listeners[we].onTrouterConnected(W.baseEndpointUrl+we,W)}catch(Ae){this.logger.error("Listener '".concat(we,"' threw an exception from onTrouterConnected(): ").concat(Ae))}}this.connectionInfo=W,this.trouterUrlPromise.resolveUrl(I),this.notifyStateChanged(A.TrouterState.Connected,{url:I,getRemainingTtlInSec:function(){return W.connectionTtlSec}})},ie.prototype.onTrouterDisconnected=function(){this.logger.debug("Trouter is now disconnected"),this.connectionInfo=null;for(var I=0,W=Object.keys(this.listeners);I<W.length;I++){var te=W[I],ge=this.listeners[te];if(ge.onTrouterDisconnected)try{ge.onTrouterDisconnected()}catch(we){this.logger.error("Listener '".concat(te,"' threw an exception from onTrouterDisconnected(): ").concat(we))}}this.notifyStateChanged(A.TrouterState.Disconnected)},ie.prototype.onTrouterRequest=function(I,W){for(var te="",ge=0,we=Object.keys(this.listeners);ge<we.length;ge++){var Ae=we[ge];I.path.startsWith(Ae)&&Ae.length>te.length&&(te=Ae)}if(te==="")this.tryMessageHandlers(I,W)||(W.status=404,W.headers={"Trouter-Responder":"ClientLib"},W.send());else try{this.listeners[te].onTrouterRequest(I,W)}catch(He){this.logger.error("Listener '".concat(te,"' threw an exception from onTrouterRequest(): ").concat(He)),W.status=500,W.headers={"Trouter-Responder":"ClientLib"},W.send()}},ie.prototype.onTrouterMessageLoss=function(I){this.logger.info("onTrouterMessageLoss called with tags [".concat(I,"]"));for(var W=!0,te=0,ge=Object.keys(this.listeners);te<ge.length;te++){var we=ge[te],Ae=this.listeners[we];if(Ae.onTrouterMessageLoss)try{W=Ae.onTrouterMessageLoss(I)&&W,W===void 0&&(this.logger.error("Listener '".concat(we,"' did not return a boolean value from onTrouterMessageLoss()")),W=!1)}catch(He){this.logger.error("Listener '".concat(we,"' threw an exception from onTrouterMessageLoss(): ").concat(He)),W=!1}}return W},ie.prototype.onTrouterUserActivityStateAccepted=function(I){this.logger.debug("onTrouterUserActivityStateAccepted cv: ".concat(I));for(var W=0,te=Object.keys(this.listeners);W<te.length;W++){var ge=te[W],we=this.listeners[ge];if(we.onTrouterUserActivityStateAccepted)try{we.onTrouterUserActivityStateAccepted(I)}catch(Ae){this.logger.error("Listener '".concat(ge,"' threw an exception from onTrouterUserActivityStateAccepted(): ").concat(Ae))}}},ie.prototype.onAudiencesSetResolved=function(I,W){this.logger.debug("onAudiencesSetResolved cv: ".concat(W));for(var te=0,ge=Object.keys(this.listeners);te<ge.length;te++){var we=ge[te],Ae=this.listeners[we];if(Ae.onAudiencesSetResolved)try{Ae.onAudiencesSetResolved(I,W)}catch(He){this.logger.error("Listener '".concat(we,"' threw an exception from onAudienceSubscribed(): ").concat(He))}}},ie.prototype.setUserActivityState=function(I,W){if(I!==A.UserActivityState.Active&&I!==A.UserActivityState.Inactive)throw new Error("setUserActivityState called with unsupported value ".concat(I));this.logger.info("setUserActivityState called with value ".concat(A.UserActivityState[I])),this.trouterServer&&this.state()!==A.TrouterState.Unknown?this.trouterServer.setUserActivityState(I,W):(this.pendingActivityState=[I,W],this.logger.warn("setUserActivityState called before start() or after stop()"))},ie.prototype.setAudienceSubscriptions=function(I,W){if(I.audienceSubscriptions.length>1)throw new Error("Only singular audience subscription is supported");if(this.trouterServer&&this.state()!==A.TrouterState.Unknown)return this.trouterServer.setAudienceSubscriptionsAsync(I,15e3,W);throw new Error("audience subscribe called before start() or after stop()")},ie.prototype.state=function(){return this.trouterServer!==void 0?this.trouterServer.getState():A.TrouterState.Unknown},ie.prototype.isInTerminalState=function(){return this.trouterServer!==void 0&&this.trouterServer.isInTerminalState()},ie.prototype.reportStateInfo=function(){return this.trouterServer===void 0?"":this.trouterServer.reportStateInfo()},ie.prototype.getServerState=function(){if(this.trouterServer!==void 0)return this.trouterServer.getServerState()},ie.prototype.getTrouterUrlAsync=function(){return this.trouterServer!==void 0?this.trouterUrlPromise.getPromise():Promise.reject(new Error("TrouterService has not been started"))},ie.prototype.onStateChanged=function(I){if(this.logger.info("onStateChanged called"),I===void 0)this.stateChangedListeners=this.stateChangedListeners.filter(function(te){return te.wrappedCallback===void 0});else{this.offStateChanged(I);var W=function(te,ge){I(te,ge?ge.url:"")};W.wrappedCallback=I,this.stateChangedListeners.push(W)}},ie.prototype.offStateChanged=function(I){this.logger.info("offStateChanged called");var W=this.stateChangedListeners.length;return this.stateChangedListeners=this.stateChangedListeners.filter(function(te){return te.wrappedCallback!==I}),W>this.stateChangedListeners.length},ie.prototype.addCallback=function(I){this.logger.info("addListener called"),this.stateChangedListeners.indexOf(I,0)===-1&&I!==void 0&&this.stateChangedListeners.push(I)},ie.prototype.removeCallback=function(I){this.logger.info("removeListener called");var W=this.stateChangedListeners.indexOf(I,0);return W>-1&&(this.stateChangedListeners.splice(W,1),!0)},ie.prototype.registerMessageHandler=function(I){this.logger.info("registerMessageHandler is called"),this.messageHandlers.register(I)},ie.prototype.clearMessageHandlers=function(){this.logger.info("clearMessageHandlers is called"),this.messageHandlers.clear()},ie.prototype.notifyStateChanged=function(I,W){var te=this;this.logger.info("notifyStateChanged called, will forward to ".concat(this.stateChangedListeners.length," listeners")),this.stateChangedListeners.forEach(function(ge){try{ge(I,W)}catch(we){te.logger.error("Error in callback ".concat(we))}})},ie.prototype.tryMessageHandlers=function(I,W){if(!this.messageHandlers.active())return!1;var te,ge=null;try{te=JSON.parse(I.body),ge=te&&(te.evt||te.eventId)||null}catch{}var we={eventId:ge,url:(this.connectionInfo?this.connectionInfo.baseEndpointUrl:"")+I.path,body:te,rawBody:I.body,headers:I.headers},Ae=this.messageHandlers.handleMessage(we);return!!Ae.isHandled&&(W.status=Ae.resultCode,Ae.responseHeaders&&(W.headers=Ae.responseHeaders),Ae.responseBody&&(W.body=Ae.responseBody),W.send(),!0)},ie})();M.TrouterService=he,M.createTrouterService=x,M.getTrouterServiceVersion=P,M.replaceTrouterUrlBase=T},function(H,M){H.exports=De}])})});E(O);var ee=L(function(je,xe){Object.defineProperty(xe,"__esModule",{value:!0}),xe.DeleteReason=void 0;var De;(function(H){H.DeletedByPolicy="deletedByPolicy",H.DeletedByUser="deletedByUser"})(De||(xe.DeleteReason=De={}))});E(ee),ee.DeleteReason;var Y=L(function(je,xe){Object.defineProperty(xe,"__esModule",{value:!0}),xe.PACKAGE_VERSION=xe.CONFIG_API_VERSION=xe.EudbCountries=xe.CloudPrefix=xe.CloudType=xe.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES=void 0,xe.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES=3;var De;(function(M){M.Public="Public",M.GccHigh="GCC High",M.Dod="DoD"})(De||(xe.CloudType=De={}));var H;(function(M){M.OrgId="orgid",M.Acs="acs",M.Spool="spool",M.GccHigh="gcch",M.GccHighAcs="gcch-acs",M.Dod="dod",M.DodAcs="dod-acs"})(H||(xe.CloudPrefix=H={})),xe.EudbCountries=["europe","france","germany","norway","switzerland","sweden"],xe.CONFIG_API_VERSION="2024-09-01",xe.PACKAGE_VERSION="1.0.0-beta.34"});E(Y),Y.PACKAGE_VERSION,Y.CONFIG_API_VERSION,Y.EudbCountries,Y.CloudPrefix,Y.CloudType,Y.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES;var le=ee,fe=Y,me=L(function(je,xe){var De=y&&y.__awaiter||function(j,C,D,ne){function $(se){return se instanceof D?se:new D(function(Se){Se(se)})}return new(D||(D=Promise))(function(se,Se){function Ie(ze){try{Ue(ne.next(ze))}catch(ct){Se(ct)}}function Oe(ze){try{Ue(ne.throw(ze))}catch(ct){Se(ct)}}function Ue(ze){ze.done?se(ze.value):$(ze.value).then(Ie,Oe)}Ue((ne=ne.apply(j,C||[])).next())})};Object.defineProperty(xe,"__esModule",{value:!0}),xe.isEudbLocation=xe.parseTokenCredential=xe.base64decode=xe.toTelemetrySender=xe.toLogProvider=xe.toMessageHandler=void 0,xe.generateUuid=Ae;const H=new Map([["chatMessageReceived",200],["typingIndicatorReceived",245],["readReceiptReceived",246],["chatMessageEdited",247],["chatMessageDeleted",248],["chatThreadCreated",257],["chatThreadPropertiesUpdated",258],["chatThreadDeleted",259],["participantsAdded",260],["participantsRemoved",261]]),M="8:orgid:",X="8:dod:",z="8:gcch:",K="8:teamsvisitor:",x="4:",P="8:acs:",T="8:gcch-acs:",b="8:dod-acs:",S="8:spool:",_=(j,C,D,ne)=>{const $=H.get(j);return{handleMessage(se){let Se=null;if(se?.rawBody&&(Se=JSON.parse(se.rawBody)),Se===null||Se.eventId!==$)return;const Ie=R(j,Se,D,ne);if(Ie!==null)return C(Ie),{isHandled:!0,resultCode:200}}}};xe.toMessageHandler=_;function N(j,C,D){return{threadId:j.groupId,sender:ae(j.senderId),senderDisplayName:j.senderDisplayName,recipient:ae(j.recipientMri),id:j.messageId,createdOn:new Date(j.originalArrivalTime),version:j.version,type:j.messageType,message:j.messageBody,metadata:he(j.acsChatMessageMetadata)||{},attachments:W(he(j.attachments)||[],C,D)}}function w(j,C,D){return Object.assign(Object.assign({},N(j,C,D)),{editedOn:new Date(j.edittime)})}const R=(j,C,D,ne)=>{if(j==="chatMessageReceived")return N(C,D,ne);if(j==="chatMessageEdited")return w(C,D,ne);if(j==="chatMessageDeleted"){const $=C;return{threadId:$.groupId,sender:ae($.senderId),senderDisplayName:$.senderDisplayName,recipient:ae($.recipientMri),id:$.messageId,createdOn:new Date($.originalArrivalTime),version:$.version,deletedOn:new Date($.deletetime),type:$.messageType}}if(j==="typingIndicatorReceived"){const $=C;return{threadId:$.groupId,sender:ae($.senderId),senderDisplayName:$.senderDisplayName,recipient:ae($.recipientMri),version:$.version,receivedOn:new Date($.originalArrivalTime)}}if(j==="readReceiptReceived"){const $=C,Se=JSON.parse($.messageBody).consumptionhorizon.split(";");return{threadId:$.groupId,sender:ae($.senderId),senderDisplayName:"",recipient:ae($.recipientMri),chatMessageId:$.messageId,readOn:new Date(+Se[1])}}if(j==="chatThreadCreated"){const $=C,se=JSON.parse(unescape($.createdBy)),Se=JSON.parse(unescape($.members)),Ie=A(se),Oe=Se.map(ze=>A(ze));return{threadId:$.threadId,createdOn:new Date($.createTime),createdBy:Ie,version:$.version,participants:Oe,properties:q(JSON.parse(unescape($.properties))),retentionPolicy:J(JSON.parse(unescape($.properties)))}}if(j==="chatThreadPropertiesUpdated"){const $=C,se=JSON.parse(unescape($.editedBy)),Se=A(se);return{threadId:$.threadId,updatedOn:new Date($.editTime),updatedBy:Se,version:$.version,properties:q(JSON.parse(unescape($.properties))),retentionPolicy:J(JSON.parse(unescape($.properties)))}}if(j==="chatThreadDeleted"){const $=C,se=C.reason==le.DeleteReason.DeletedByPolicy?null:A(JSON.parse(unescape($.deletedBy)));return{threadId:$.threadId,deletedOn:new Date($.deleteTime),deletedBy:se,version:$.version,reason:$.reason}}if(j==="participantsAdded"){const $=C,se=JSON.parse(unescape($.addedBy)),Se=JSON.parse(unescape($.participantsAdded)),Ie=A(se),Oe=Se.map(ze=>A(ze));return{threadId:$.threadId,addedOn:new Date($.time),addedBy:Ie,version:$.version,participantsAdded:Oe}}if(j==="participantsRemoved"){const $=C,se=JSON.parse(unescape($.removedBy)),Se=JSON.parse(unescape($.participantsRemoved)),Ie=A(se),Oe=Se.map(ze=>A(ze));return{threadId:$.threadId,removedOn:new Date($.time),removedBy:Ie,version:$.version,participantsRemoved:Oe}}return null},A=j=>{var C;const D={id:ae(j.participantId),displayName:j.displayName,metadata:he((C=j.memberMetaData)!==null&&C!==void 0?C:"")||{}};return j.shareHistoryTime&&(D.shareHistoryTime=new Date(j.shareHistoryTime)),D},q=j=>{var C;return{topic:j.topic,metadata:he((C=j.acsChatThreadMetadata)!==null&&C!==void 0?C:"")||{}}},J=j=>{const C=j.retentionPolicy;if(!C)return{kind:"none"};let D;try{D=JSON.parse(C)}catch{return{kind:"none"}}if(D.retentionPolicyType==="DeleteAfterCreationTime"&&typeof D.executeAfter=="string"){const ne=D.executeAfter.trim().replace(/^[+-]/,""),$=ne.includes(".")?ne.split(".")[0]:"0",se=parseInt($,10);return{kind:"threadCreationDate",deleteThreadAfterDays:isNaN(se)?0:se}}return{kind:"none"}},V=j=>({log:(...C)=>j.info(C),warn:(...C)=>j.warning(C),error:(...C)=>j.error(C),debug:(...C)=>j.verbose(C),info:(...C)=>j.verbose(C)});xe.toLogProvider=V;const B=j=>({logEvent:C=>j.info(C)});xe.toTelemetrySender=B;const ae=j=>j.startsWith(M)?{kind:"microsoftTeamsUser",rawId:j,microsoftTeamsUserId:j.substring(M.length),isAnonymous:!1,cloud:"public"}:j.startsWith(X)?{kind:"microsoftTeamsUser",rawId:j,microsoftTeamsUserId:j.substring(X.length),isAnonymous:!1,cloud:"dod"}:j.startsWith(z)?{kind:"microsoftTeamsUser",rawId:j,microsoftTeamsUserId:j.substring(z.length),isAnonymous:!1,cloud:"gcch"}:j.startsWith(K)?{kind:"microsoftTeamsUser",rawId:j,microsoftTeamsUserId:j.substring(K.length),isAnonymous:!0}:j.startsWith(x)?{kind:"phoneNumber",rawId:j,phoneNumber:j.substring(x.length)}:j.startsWith(P)||j.startsWith(T)||j.startsWith(b)||j.startsWith(S)?{kind:"communicationUser",communicationUserId:j}:{kind:"unknown",id:j},he=j=>{if(!(j==null||j===""||j==="null"||j==="{}"||j==="[]"))return JSON.parse(j)},ie=(j,C,D)=>{let ne;try{ne=new URL(j),(ne.protocol==="http:"||ne.protocol==="https:")&&(ne=new URL(ne.pathname,C))}catch{try{ne=new URL(j,C)}catch{return j}}return ne.searchParams.set("api-version",D),ne.toString()},I=j=>{let C;try{C=new URL(j)}catch{return!1}return C.protocol==="http:"||C.protocol==="https:"},W=(j,C,D)=>(C==null||C===""||!I(C)||j.filter(ne=>ne.attachmentType.toLowerCase()==="image".toLowerCase()).map(ne=>{ne.previewUrl&&(ne.previewUrl=ie(ne.previewUrl,C,D)),ne.url&&(ne.url=ie(ne.url,C,D))}),j),te=j=>p.default.isNodeLike?Buffer.from(j,"base64").toString():atob(j);xe.base64decode=te;const ge=j=>{let[,C]=j?.split(".");if(C===void 0)throw new Error("Invalid token");return C=C.replace(/-/g,"+").replace(/_/g,"/"),JSON.parse(decodeURIComponent(escape((0,xe.base64decode)(C))))},we=j=>De(void 0,void 0,void 0,function*(){const C=yield j.getToken(),D=C?.token,ne=ge(D),$=ne.skypeid,se=ne.resourceId,Se=Ge($),Ie=ne.resourceLocation||"";return{jwtToken:D,acsResourceId:se,identityMri:$,cloudType:Se,resourceLocation:Ie}});xe.parseTokenCredential=we;function Ae(){return(0,f.default.v4)()}const He=j=>!!j&&!!fe.EudbCountries.find(C=>C===j);xe.isEudbLocation=He;function Ge(j){switch(j.substring(0,j.indexOf(":"))){case fe.CloudPrefix.OrgId:case fe.CloudPrefix.Acs:case fe.CloudPrefix.Spool:return fe.CloudType.Public;case fe.CloudPrefix.GccHigh:case fe.CloudPrefix.GccHighAcs:return fe.CloudType.GccHigh;case fe.CloudPrefix.Dod:case fe.CloudPrefix.DodAcs:return fe.CloudType.Dod;default:return fe.CloudType.Public}}});E(me),me.isEudbLocation,me.parseTokenCredential,me.base64decode,me.toTelemetrySender,me.toLogProvider,me.toMessageHandler,me.generateUuid;var Q=L(function(je,xe){var De=y&&y.__createBinding||(Object.create?(function(P,T,b,S){S===void 0&&(S=b);var _=Object.getOwnPropertyDescriptor(T,b);(!_||("get"in _?!T.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return T[b]}}),Object.defineProperty(P,S,_)}):(function(P,T,b,S){S===void 0&&(S=b),P[S]=T[b]})),H=y&&y.__setModuleDefault||(Object.create?(function(P,T){Object.defineProperty(P,"default",{enumerable:!0,value:T})}):function(P,T){P.default=T}),M=y&&y.__importStar||function(P){if(P&&P.__esModule)return P;var T={};if(P!=null)for(var b in P)b!=="default"&&Object.prototype.hasOwnProperty.call(P,b)&&De(T,P,b);return H(T,P),T},X=y&&y.__awaiter||function(P,T,b,S){function _(N){return N instanceof b?N:new b(function(w){w(N)})}return new(b||(b=Promise))(function(N,w){function R(J){try{q(S.next(J))}catch(V){w(V)}}function A(J){try{q(S.throw(J))}catch(V){w(V)}}function q(J){J.done?N(J.value):_(J.value).then(R,A)}q((S=S.apply(P,T||[])).next())})};Object.defineProperty(xe,"__esModule",{value:!0}),xe.RealTimeNotificationConfiguration=xe.TrouterConfigClient=void 0;const z=M(m.default);class K extends z.ServiceClient{constructor(T,b){b||(b={});const S=`azsdk-js-communication-signaling/${fe.PACKAGE_VERSION}`,_=b.userAgentOptions&&b.userAgentOptions.userAgentPrefix?`${b.userAgentOptions.userAgentPrefix} ${S}`:`${S}`,N=Object.assign(Object.assign({},b),{userAgentOptions:{userAgentPrefix:_},additionalPolicies:b.additionalPolicies});super(N),this.apiVersion=fe.CONFIG_API_VERSION,this.endpoint=T,this.httpClient=(0,g.default.createDefaultHttpClient)()}fetchServiceUrls(T){return X(this,void 0,void 0,function*(){try{const b=(yield T.getToken()).token,S=(0,g.default.createPipelineRequest)({url:`${this.endpoint}/chat/config/realTimeNotifications?api-version=${this.apiVersion}`,method:"GET",headers:(0,g.default.createHttpHeaders)({Authorization:`Bearer ${b}`})}),_=yield this.pipeline.sendRequest(this.httpClient,S);if(_.status!==200||!_.bodyAsText)throw new Error(`Failed to fetch service URLs. Status: ${_.status}, Body: ${_.bodyAsText||"No response body"}`);const N=JSON.parse(_.bodyAsText);if(!N.trouterServiceUrl||!N.registrarServiceUrl||!N.cloudType)throw new Error("One or more required fields are missing in the response data");return new x(N.trouterServiceUrl,N.registrarServiceUrl,N.cloudType)}catch(b){throw new Error(`Error fetching real-time notification configuration from Chat Gateway: ${b.message}`)}})}}xe.TrouterConfigClient=K;class x{constructor(T,b,S){this.trouterServiceUrl=T,this.registrarServiceUrl=b,this.cloudType=S}}xe.RealTimeNotificationConfiguration=x});E(Q),Q.RealTimeNotificationConfiguration,Q.TrouterConfigClient;var re=me,ve=Q,ue=L(function(je,xe){var De=y&&y.__awaiter||function(X,z,K,x){function P(T){return T instanceof K?T:new K(function(b){b(T)})}return new(K||(K=Promise))(function(T,b){function S(w){try{N(x.next(w))}catch(R){b(R)}}function _(w){try{N(x.throw(w))}catch(R){b(R)}}function N(w){w.done?T(w.value):P(w.value).then(S,_)}N((x=x.apply(X,z||[])).next())})};Object.defineProperty(xe,"__esModule",{value:!0}),xe.defaultTelemetrySettings=xe.createSettings=void 0;const H={version:"1.0.0",registrationId:"",sessionId:"",pnhAppId:"AcsWeb",pnhTemplate:"AcsWeb_Chat_2.1",platform:"SPOOL",platformUIVersion:"0.0.0",environment:"",productName:"acs-chat-web",trouterServiceUrl:"",registrarServiceUrl:"",registrarRefreshTimeoutInMs:35e4,timeoutOptions:{connectionTimeoutMs:2e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:5e4,requestTimeoutMs:5e3},maxRegistrationTimeInMs:72e5},M=(X,z)=>De(void 0,void 0,void 0,function*(){var K;const x=z?.resourceEndpoint;if(x===void 0)throw new Error("'endpoint' cannot be null");const P=Object.assign({},H);P.registrationId=(0,re.generateUuid)(),P.sessionId=(0,re.generateUuid)();const b=yield new ve.TrouterConfigClient(x,z).fetchServiceUrls(X);return P.trouterServiceUrl=`${b.trouterServiceUrl}/v4/a`,P.registrarServiceUrl=`${b.registrarServiceUrl}/v3/registrations`,b.cloudType==="int"&&(P.pnhAppId="cns-e2e-test",P.pnhTemplate="cns-e2e-test:1.8"),P.maxRegistrationTimeInMs=(K=z?.registrationTimeInMs)!==null&&K!==void 0?K:H.maxRegistrationTimeInMs,P});xe.createSettings=M,xe.defaultTelemetrySettings={enabled:!1}});E(ue),ue.defaultTelemetrySettings,ue.createSettings;var ke=ue,Ce=L(function(je,xe){var De=y&&y.__awaiter||function(X,z,K,x){function P(T){return T instanceof K?T:new K(function(b){b(T)})}return new(K||(K=Promise))(function(T,b){function S(w){try{N(x.next(w))}catch(R){b(R)}}function _(w){try{N(x.throw(w))}catch(R){b(R)}}function N(w){w.done?T(w.value):P(w.value).then(S,_)}N((x=x.apply(X,z||[])).next())})};Object.defineProperty(xe,"__esModule",{value:!0}),xe.CommunicationSignalingClient=xe.ConnectionState=void 0;var H;(function(X){X[X.Unknown=0]="Unknown",X[X.Connected=2]="Connected",X[X.Disconnected=3]="Disconnected",X[X.Switching=9]="Switching"})(H||(xe.ConnectionState=H={}));class M{constructor(z,K,x){this.credential=z,this.logger=K,this.options=x,this.stateChangedListener=null,this.tokenFetchRetries=0,this.trouter=(0,O.createTrouterService)((0,re.toLogProvider)(K))}start(){return De(this,void 0,void 0,function*(){var z,K;if(this.resourceEndpoint=(z=this.options)===null||z===void 0?void 0:z.resourceEndpoint,this.resourceEndpoint===void 0)throw new Error("'endpoint' cannot be null");this.gatewayApiVersion=((K=this.options)===null||K===void 0?void 0:K.gatewayApiVersion)||"2024-03-07",this.config===void 0&&(this.config={trouterSettings:yield(0,ke.createSettings)(this.credential,this.options),skypeTokenProvider:x=>De(this,void 0,void 0,function*(){if(x){if(this.tokenFetchRetries+=1,this.tokenFetchRetries>fe.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES)throw yield this.stop(!0),new Error(`Access token is expired and failed to fetch a valid one after ${fe.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES} retries`)}else this.tokenFetchRetries=0;return Promise.resolve((yield this.credential.getToken()).token)}),telemetryConfig:{eventLogger:(0,re.toTelemetrySender)(this.logger),settings:ke.defaultTelemetrySettings}}),this.trouter.start(this.config),this.trouter.setUserActivityState(O.UserActivityState.Active)})}stop(z){return De(this,void 0,void 0,function*(){this.trouter.offStateChanged(this.stateChangedListener),this.trouter.clearMessageHandlers(),this.trouter.stop(z??this.tokenFetchRetries>fe.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES)})}on(z,K){if(z==="connectionChanged"){this.trouter.offStateChanged(this.stateChangedListener),this.stateChangedListener=(x,P)=>K(x),this.trouter.onStateChanged(this.stateChangedListener);return}this.trouter.registerMessageHandler((0,re.toMessageHandler)(z,K,this.resourceEndpoint,this.gatewayApiVersion))}}xe.CommunicationSignalingClient=M});E(Ce),Ce.CommunicationSignalingClient,Ce.ConnectionState;var Ne=Ce,Be=L(function(je,xe){var De=y&&y.__createBinding||(Object.create?(function(M,X,z,K){K===void 0&&(K=z);var x=Object.getOwnPropertyDescriptor(X,z);(!x||("get"in x?!X.__esModule:x.writable||x.configurable))&&(x={enumerable:!0,get:function(){return X[z]}}),Object.defineProperty(M,K,x)}):(function(M,X,z,K){K===void 0&&(K=z),M[K]=X[z]})),H=y&&y.__exportStar||function(M,X){for(var z in M)z!=="default"&&!Object.prototype.hasOwnProperty.call(X,z)&&De(X,M,z)};Object.defineProperty(xe,"__esModule",{value:!0}),H(Ne,xe)}),qe=E(Be);r.exports=qe})(Td)),Td.exports}var Xd=j2();class Eo extends Error{}Eo.prototype.name="InvalidTokenError";function O2(r){return decodeURIComponent(atob(r).replace(/(.)/g,(n,i)=>{let o=i.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}function M2(r){let n=r.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return O2(n)}catch{return atob(n)}}function U2(r,n){if(typeof r!="string")throw new Eo("Invalid token specified: must be a string");n||(n={});const i=n.header===!0?0:1,o=r.split(".")[i];if(typeof o!="string")throw new Eo(`Invalid token specified: missing part #${i+1}`);let l;try{l=M2(o)}catch(c){throw new Eo(`Invalid token specified: invalid base64 for part #${i+1} (${c.message})`)}try{return JSON.parse(l)}catch(c){throw new Eo(`Invalid token specified: invalid json for part #${i+1} (${c.message})`)}}const Jd=r=>{const{exp:n}=U2(r);return{token:r,expiresOnTimestamp:n*1e3}},Xy={token:"",expiresOnTimestamp:-10},D2=r=>r*1e3*60,P2=D2(10),I2=.5;class z2{constructor(n){this.expiringSoonIntervalInMs=P2,this.refreshAfterLifetimePercentage=I2,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.disposed=!1;const{tokenRefresher:i,token:o,refreshProactively:l}=n;this.refresh=i,this.currentToken=o?Jd(o):Xy,this.refreshProactively=l??!1,this.refreshProactively&&this.scheduleRefresh()}async getToken(n){return this.isTokenExpiringSoon(this.currentToken)?(this.isTokenValid(this.currentToken)||await this.updateTokenAndReschedule(n?.abortSignal),this.currentToken):this.currentToken}dispose(){this.disposed=!0,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.currentToken=Xy,this.activeTimeout&&clearTimeout(this.activeTimeout)}async updateTokenAndReschedule(n){if(this.activeTokenUpdating)return this.activeTokenUpdating;this.activeTokenUpdating=this.refreshTokenAndReschedule(n);try{await this.activeTokenUpdating}finally{this.activeTokenUpdating=null}}async refreshTokenAndReschedule(n){const i=await this.refreshToken(n);if(!this.isTokenValid(i))throw new Error("The token returned from the tokenRefresher is expired.");this.currentToken=i,this.refreshProactively&&this.scheduleRefresh()}async refreshToken(n){try{return this.activeTokenFetching||(this.activeTokenFetching=this.refresh(n)),Jd(await this.activeTokenFetching)}finally{this.activeTokenFetching=null}}scheduleRefresh(){if(this.disposed)return;this.activeTimeout&&clearTimeout(this.activeTimeout);const n=this.currentToken.expiresOnTimestamp-Date.now();let i=null;this.isTokenExpiringSoon(this.currentToken)?i=n*this.refreshAfterLifetimePercentage:i=n-this.expiringSoonIntervalInMs,this.activeTimeout=setTimeout(()=>this.updateTokenAndReschedule(),i)}isTokenValid(n){return n&&Date.now()<n.expiresOnTimestamp}isTokenExpiringSoon(n){return!n||Date.now()>=n.expiresOnTimestamp-this.expiringSoonIntervalInMs}}class L2{constructor(n){this.token=n}async getToken(){return this.token}dispose(){}}function B2(r){const n=r;return n&&typeof n.getToken=="function"&&(n.signRequest===void 0||n.getToken.length>0)}const H2="ApiVersionPolicy";function q2(r){return{name:H2,sendRequest:(n,i)=>{const o=new URL(n.url);return!o.searchParams.get("api-version")&&r.apiVersion&&(n.url=`${n.url}${Array.from(o.searchParams.keys()).length>0?"&":"?"}api-version=${r.apiVersion}`),i(n)}}}const $2="keyCredentialAuthenticationPolicy";function V2(r,n){return{name:$2,async sendRequest(i,o){return i.headers.set(n,r.key),o(i)}}}function G2(r,n,i={}){const{credential:o,clientOptions:l}=i;if(o){if(B2(o)){const c=Fl({credential:o,scopes:l?.credentials?.scopes??`${n}/.default`});r.addPolicy(c)}else if(Y2(o)){if(!l?.credentials?.apiKeyHeaderName)throw new Error("Missing API Key Header Name");const c=V2(o,l?.credentials?.apiKeyHeaderName);r.addPolicy(c)}}}function F2(r,n,i={}){const o=Nf(i);return o.addPolicy(q2(i)),G2(o,r,{credential:n,clientOptions:i}),o}function Y2(r){return r.key!==void 0}function Fr(r){return r.onResponse?{...r,onResponse(n,i){r.onResponse?.(n,i,i)}}:r}function X2(r,n,i={}){const l=F2(r,void 0,i),c=WA(r,{...i,pipeline:l}),f=(p,...m)=>({get:(g={})=>c.path(p,...m).get(Fr(g)),post:(g={})=>c.path(p,...m).post(Fr(g)),put:(g={})=>c.path(p,...m).put(Fr(g)),patch:(g={})=>c.path(p,...m).patch(Fr(g)),delete:(g={})=>c.path(p,...m).delete(Fr(g)),head:(g={})=>c.path(p,...m).head(Fr(g)),options:(g={})=>c.path(p,...m).options(Fr(g)),trace:(g={})=>c.path(p,...m).trace(Fr(g))});return{path:f,pathUnchecked:f,pipeline:c.pipeline}}const J2="https://auth.msft.communication.azure.com/",K2="https://communication.azure.com/clients/",Q2="/access/teamsExtension/:exchangeAccessToken",W2="2025-06-30",Z2="/access/entra/:exchangeAccessToken",ej="2025-03-02-preview";class tj{constructor(n){this.options=n,this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}},this.client=X2(n.resourceEndpoint),this.httpClient=jf(),this.options=n,this.options.scopes=this.options.scopes||["https://communication.azure.com/clients/.default"],this.isPending=this.getToken()}async getToken(n){var i;if(!((i=n?.abortSignal)===null||i===void 0)&&i.aborted)return{token:"",expiresOnTimestamp:0};this.isPending||(this.isPending=this.getTokenInternal(n));try{await this.isPending}finally{this.isPending=null}return this.result.acsToken}async getTokenInternal(n){const i=n?.abortSignal?{abortSignal:n.abortSignal}:void 0,o=await this.options.tokenCredential.getToken(this.options.scopes?this.options.scopes:["https://communication.azure.com/clients/.default"],i),l=new Date,c=new Date(this.result.acsToken.expiresOnTimestamp);if(o===null)this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}};else if(this.result.acsToken.token===""||o.token!==this.result.entraToken||c<l){const f=await this.exchangeEntraToken(this.options.resourceEndpoint,o.token,i);this.result={entraToken:o.token,acsToken:f}}return this.result.acsToken}dispose(){this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}}}async exchangeEntraToken(n,i,o){const l=Of({url:this.createRequestUri(n),method:"POST",headers:Cb({Authorization:`Bearer ${i}`,"Content-Type":"application/json",Accept:"application/json"}),abortSignal:o?.abortSignal,body:JSON.stringify({})}),c=await this.client.pipeline.sendRequest(this.httpClient,l);if(c.status!==200||!c.bodyAsText)throw new Error(`Service request failed. Status: ${c.status}, Body: ${c.bodyAsText}`);const f=JSON.parse(c.bodyAsText);return{token:f.accessToken.token,expiresOnTimestamp:Date.parse(f.accessToken.expiresOn)}}createRequestUri(n){const[i,o]=this.determineEndpointAndApiVersion();return`${n}${i}?api-version=${o}`}determineEndpointAndApiVersion(){if(!this.options.scopes||this.options.scopes.length===0)throw new Error("Scopes validation failed. Ensure all scopes start with either {TeamsExtensionScopePrefix} or {CommunicationClientsScopePrefix}.");if(this.options.scopes.every(n=>n.startsWith(J2)))return[Q2,W2];if(this.options.scopes.every(n=>n.startsWith(K2)))return[Z2,ej];throw new Error("Scopes validation failed. Ensure all scopes start with either {TeamsExtensionScopePrefix} or {CommunicationClientsScopePrefix}.")}}class nj{constructor(n){this.disposed=!1,typeof n=="string"?this.tokenCredential=new L2(Jd(n)):"tokenRefresher"in n?this.tokenCredential=new z2(n):this.tokenCredential=new tj(n)}async getToken(n){this.throwIfDisposed();const i=await this.tokenCredential.getToken(n);return this.throwIfDisposed(),i}dispose(){this.disposed=!0,this.tokenCredential.dispose()}throwIfDisposed(){if(this.disposed)throw new Error("User credential is disposed")}}const rj=r=>typeof r.communicationUserId=="string",ij=r=>typeof r.phoneNumber=="string",sj=r=>typeof r.microsoftTeamsUserId=="string",oj=r=>typeof r.teamsAppId=="string",aj=r=>{const n=typeof r.userId=="string",i=typeof r.tenantId=="string",o=typeof r.resourceId=="string";return n&&i&&o},Pb=r=>rj(r)?Object.assign(Object.assign({},r),{kind:"communicationUser"}):ij(r)?Object.assign(Object.assign({},r),{kind:"phoneNumber"}):sj(r)?Object.assign(Object.assign({},r),{kind:"microsoftTeamsUser"}):oj(r)?Object.assign(Object.assign({},r),{kind:"microsoftTeamsApp"}):aj(r)?Object.assign(Object.assign({},r),{kind:"teamsExtensionUser"}):Object.assign(Object.assign({},r),{kind:"unknown"}),Ro=r=>{const n=Pb(r);switch(n.kind){case"communicationUser":return n.communicationUserId;case"microsoftTeamsUser":{const{microsoftTeamsUserId:i,rawId:o,cloud:l,isAnonymous:c}=n;if(o)return o;if(c)return`8:teamsvisitor:${i}`;switch(l){case"dod":return`8:dod:${i}`;case"gcch":return`8:gcch:${i}`;case"public":return`8:orgid:${i}`}return`8:orgid:${i}`}case"microsoftTeamsApp":{const{teamsAppId:i,rawId:o,cloud:l}=n;if(o)return o;switch(l){case"dod":return`28:dod:${i}`;case"gcch":return`28:gcch:${i}`}return`28:orgid:${i}`}case"phoneNumber":{const{phoneNumber:i,rawId:o}=n;return o||`4:${i}`}case"teamsExtensionUser":{const{userId:i,tenantId:o,resourceId:l,rawId:c,cloud:f}=n;if(c)return c;switch(f){case"dod":return`8:dod-acs:${l}_${o}_${i}`;case"gcch":return`8:gcch-acs:${l}_${o}_${i}`}return`8:acs:${l}_${o}_${i}`}case"unknown":return n.id}},en=(r,n)=>{const i=Object.keys(r)[0],o=r[i];if(n in o)return o[n];throw new Error(`Property ${n} is required for identifier of type ${i}.`)},lj=r=>{const n=[];if(r.communicationUser!==void 0&&n.push("communicationUser"),r.microsoftTeamsUser!==void 0&&n.push("microsoftTeamsUser"),r.microsoftTeamsApp!==void 0&&n.push("microsoftTeamsApp"),r.phoneNumber!==void 0&&n.push("phoneNumber"),r.teamsExtensionUser!==void 0&&n.push("teamsExtensionUser"),n.length>1)throw new Error(`Only one of the properties in ${JSON.stringify(n)} should be present.`)},Ib=r=>{var n,i,o,l,c,f,p,m,g;const y=Pb(r);switch(y.kind){case"communicationUser":return{rawId:Ro(y),communicationUser:{id:y.communicationUserId}};case"phoneNumber":return{rawId:(n=y.rawId)!==null&&n!==void 0?n:Ro(y),phoneNumber:{value:y.phoneNumber,isAnonymous:(i=y.isAnonymous)!==null&&i!==void 0?i:!1,assertedId:y.assertedId}};case"microsoftTeamsUser":return{rawId:(o=y.rawId)!==null&&o!==void 0?o:Ro(y),microsoftTeamsUser:{userId:y.microsoftTeamsUserId,isAnonymous:(l=y.isAnonymous)!==null&&l!==void 0?l:!1,cloud:(c=y.cloud)!==null&&c!==void 0?c:"public"}};case"microsoftTeamsApp":return{rawId:(f=y.rawId)!==null&&f!==void 0?f:Ro(y),microsoftTeamsApp:{appId:y.teamsAppId,cloud:(p=y.cloud)!==null&&p!==void 0?p:"public"}};case"teamsExtensionUser":return{rawId:(m=y.rawId)!==null&&m!==void 0?m:Ro(y),teamsExtensionUser:{userId:y.userId,tenantId:y.tenantId,resourceId:y.resourceId,cloud:(g=y.cloud)!==null&&g!==void 0?g:"public"}};case"unknown":return{rawId:y.id};default:throw new Error(`Can't serialize an identifier with kind ${y.kind}`)}},cj=r=>r.communicationUser?"communicationUser":r.phoneNumber?"phoneNumber":r.microsoftTeamsUser?"microsoftTeamsUser":r.microsoftTeamsApp?"microsoftTeamsApp":r.teamsExtensionUser?"teamsExtensionUser":"unknown",$o=r=>{var n,i;lj(r);const o=r.communicationUser,l=r.microsoftTeamsUser,c=r.microsoftTeamsApp,f=r.phoneNumber,p=r.teamsExtensionUser,m=(n=r.kind)!==null&&n!==void 0?n:cj(r);return m==="communicationUser"&&o?{kind:"communicationUser",communicationUserId:en({communicationUser:o},"id")}:m==="phoneNumber"&&f?{kind:"phoneNumber",phoneNumber:en({phoneNumber:f},"value"),rawId:en({phoneNumber:r},"rawId"),isAnonymous:(i=f.isAnonymous)!==null&&i!==void 0?i:!1,assertedId:f.assertedId}:m==="microsoftTeamsUser"&&l?{kind:"microsoftTeamsUser",microsoftTeamsUserId:en({microsoftTeamsUser:l},"userId"),isAnonymous:en({microsoftTeamsUser:l},"isAnonymous"),cloud:en({microsoftTeamsUser:l},"cloud"),rawId:en({microsoftTeamsUser:r},"rawId")}:m==="microsoftTeamsApp"&&c?{kind:"microsoftTeamsApp",teamsAppId:en({microsoftTeamsApp:c},"appId"),cloud:en({microsoftTeamsApp:c},"cloud"),rawId:en({microsoftTeamsApp:r},"rawId")}:m==="teamsExtensionUser"&&p?{kind:"teamsExtensionUser",userId:en({teamsExtensionUser:p},"userId"),tenantId:en({teamsExtensionUser:p},"tenantId"),resourceId:en({teamsExtensionUser:p},"resourceId"),cloud:en({teamsExtensionUser:p},"cloud"),rawId:en({teamsExtensionUser:r},"rawId")}:{kind:"unknown",id:en({unknown:r},"rawId")}},uj=r=>{const{participants:n,idempotencyToken:i}=r,o=Sr(r,["participants","idempotencyToken"]);return Object.assign({repeatabilityRequestId:i},o)},zb=r=>{const{id:n}=r,i=Sr(r,["id"]);return Object.assign(Object.assign({},i),{communicationIdentifier:Ib(n)})},dj=r=>{var n;return{participants:(n=r.participants)===null||n===void 0?void 0:n.map(i=>zb(i))}},Kd=r=>{const{communicationIdentifier:n}=r,i=Sr(r,["communicationIdentifier"]);return Object.assign(Object.assign({},i),{id:$o(n)})},fj=r=>{const{participants:n,initiatorCommunicationIdentifier:i}=r,o=Sr(r,["participants","initiatorCommunicationIdentifier"]);let l=Object.assign({},o);if(i){const c=$o(i);l=Object.assign(Object.assign({},l),{initiator:c})}return n&&(l=Object.assign(Object.assign({},l),{participants:n?.map(c=>Kd(c))})),l},Ud=r=>{const{content:n,senderCommunicationIdentifier:i}=r,o=Sr(r,["content","senderCommunicationIdentifier"]);let l=Object.assign({},o);if(n&&(l=Object.assign(Object.assign({},l),{content:fj(n)})),i){const c=$o(i);l=Object.assign(Object.assign({},l),{sender:c})}return l},hj=r=>{if(r.kind==="threadCreationDate"||r.kind==="none")return r;throw new Error(`Retention Policy ${r.kind} is not supported`)},Lb=r=>{const{createdByCommunicationIdentifier:n,retentionPolicy:i}=r,o=Sr(r,["createdByCommunicationIdentifier","retentionPolicy"]);let l=Object.assign({},o);return n&&(l=Object.assign(Object.assign({},l),{createdBy:$o(n)})),i&&(l=Object.assign(Object.assign({},l),{retentionPolicy:hj(i)})),l},pj=r=>{const{chatThread:n}=r,i=Sr(r,["chatThread"]);return n?Object.assign(Object.assign({},i),{chatThread:Lb(n)}):Object.assign({},i)},Jy=r=>{const{senderCommunicationIdentifier:n}=r,i=Sr(r,["senderCommunicationIdentifier"]);return Object.assign(Object.assign({},i),{sender:$o(n)})};var Ky;(function(r){r.Unknown="unknown",r.CommunicationUser="communicationUser",r.PhoneNumber="phoneNumber",r.MicrosoftTeamsUser="microsoftTeamsUser",r.MicrosoftTeamsApp="microsoftTeamsApp"})(Ky||(Ky={}));var Qy;(function(r){r.Public="public",r.Dod="dod",r.Gcch="gcch"})(Qy||(Qy={}));var Wy;(function(r){r.ThreadCreationDate="threadCreationDate",r.None="none"})(Wy||(Wy={}));const et=bb({namespace:"Azure.Communication",packageName:"@azure/communication-chat",packageVersion:"1.6.0"}),Mf={type:{name:"Composite",className:"ChatMessageReadReceiptsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessageReadReceipt"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},mj={type:{name:"Composite",className:"ChatMessageReadReceipt",modelProperties:{senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}},readOn:{serializedName:"readOn",required:!0,type:{name:"DateTime"}}}}},Bb={type:{name:"Composite",className:"CommunicationIdentifierModel",modelProperties:{kind:{serializedName:"kind",type:{name:"String"}},rawId:{serializedName:"rawId",type:{name:"String"}},communicationUser:{serializedName:"communicationUser",type:{name:"Composite",className:"CommunicationUserIdentifierModel"}},phoneNumber:{serializedName:"phoneNumber",type:{name:"Composite",className:"PhoneNumberIdentifierModel"}},microsoftTeamsUser:{serializedName:"microsoftTeamsUser",type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel"}},microsoftTeamsApp:{serializedName:"microsoftTeamsApp",type:{name:"Composite",className:"MicrosoftTeamsAppIdentifierModel"}}}}},gj={type:{name:"Composite",className:"CommunicationUserIdentifierModel",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},yj={type:{name:"Composite",className:"PhoneNumberIdentifierModel",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"String"}}}}},vj={type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel",modelProperties:{userId:{serializedName:"userId",required:!0,type:{name:"String"}},isAnonymous:{serializedName:"isAnonymous",type:{name:"Boolean"}},cloud:{serializedName:"cloud",type:{name:"String"}}}}},bj={type:{name:"Composite",className:"MicrosoftTeamsAppIdentifierModel",modelProperties:{appId:{serializedName:"appId",required:!0,type:{name:"String"}},cloud:{serializedName:"cloud",type:{name:"String"}}}}},Me={type:{name:"Composite",className:"CommunicationErrorResponse",modelProperties:{error:{serializedName:"error",type:{name:"Composite",className:"ChatError"}}}}},Sj={type:{name:"Composite",className:"ChatError",modelProperties:{code:{serializedName:"code",required:!0,type:{name:"String"}},message:{serializedName:"message",required:!0,type:{name:"String"}},target:{serializedName:"target",readOnly:!0,type:{name:"String"}},details:{serializedName:"details",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}},innerError:{serializedName:"innererror",type:{name:"Composite",className:"ChatError"}}}}},Hb={type:{name:"Composite",className:"SendReadReceiptRequest",modelProperties:{chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}}}},qb={type:{name:"Composite",className:"SendChatMessageRequest",modelProperties:{content:{serializedName:"content",required:!0,type:{name:"String"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},type:{serializedName:"type",type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},$b={type:{name:"Composite",className:"SendChatMessageResult",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},Uf={type:{name:"Composite",className:"ChatMessagesCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessage"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Vb={type:{name:"Composite",className:"ChatMessage",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},type:{serializedName:"type",required:!0,type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},sequenceId:{serializedName:"sequenceId",required:!0,type:{name:"String"}},version:{serializedName:"version",required:!0,type:{name:"String"}},content:{serializedName:"content",type:{name:"Composite",className:"ChatMessageContent"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},editedOn:{serializedName:"editedOn",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},wj={type:{name:"Composite",className:"ChatMessageContent",modelProperties:{message:{serializedName:"message",type:{name:"String"}},topic:{serializedName:"topic",type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},attachments:{serializedName:"attachments",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatAttachment"}}}},initiatorCommunicationIdentifier:{serializedName:"initiatorCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}}}}},Tj={type:{name:"Composite",className:"ChatParticipant",modelProperties:{communicationIdentifier:{serializedName:"communicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},displayName:{serializedName:"displayName",type:{name:"String"}},shareHistoryTime:{serializedName:"shareHistoryTime",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},Cj={type:{name:"Composite",className:"ChatAttachment",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},attachmentType:{serializedName:"attachmentType",required:!0,type:{name:"Enum",allowedValues:["image","file"]}},name:{serializedName:"name",type:{name:"String"}},url:{serializedName:"url",type:{name:"String"}},previewUrl:{serializedName:"previewUrl",type:{name:"String"}}}}},Gb={type:{name:"Composite",className:"UpdateChatMessageRequest",modelProperties:{content:{serializedName:"content",type:{name:"String"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},Df={type:{name:"Composite",className:"ChatParticipantsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Fb={type:{name:"Composite",className:"AddChatParticipantsRequest",modelProperties:{participants:{serializedName:"participants",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}}}}},Yb={type:{name:"Composite",className:"AddChatParticipantsResult",modelProperties:{invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},Xb={type:{name:"Composite",className:"CreateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",required:!0,type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},ws={type:{name:"Composite",className:"ChatRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:{serializedName:"kind",clientName:"kind"},modelProperties:{kind:{serializedName:"kind",required:!0,type:{name:"String"}}}}},Jb={type:{name:"Composite",className:"CreateChatThreadResult",modelProperties:{chatThread:{serializedName:"chatThread",type:{name:"Composite",className:"ChatThreadProperties"}},invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},Kb={type:{name:"Composite",className:"ChatThreadProperties",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},createdByCommunicationIdentifier:{serializedName:"createdByCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},Pf={type:{name:"Composite",className:"ChatThreadsItemCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatThreadItem"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},xj={type:{name:"Composite",className:"ChatThreadItem",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},lastMessageReceivedOn:{serializedName:"lastMessageReceivedOn",readOnly:!0,type:{name:"DateTime"}}}}},Qb={type:{name:"Composite",className:"UpdateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",type:{name:"String"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},Wb={type:{name:"Composite",className:"SendTypingNotificationRequest",modelProperties:{senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}}}}},Zb={serializedName:"threadCreationDate",type:{name:"Composite",className:"ThreadCreationDateRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:ws.type.polymorphicDiscriminator,modelProperties:Object.assign(Object.assign({},ws.type.modelProperties),{deleteThreadAfterDays:{serializedName:"deleteThreadAfterDays",required:!0,type:{name:"Number"}}})}},eS={serializedName:"none",type:{name:"Composite",className:"NoneRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:ws.type.polymorphicDiscriminator,modelProperties:Object.assign({},ws.type.modelProperties)}};let Rj={ChatRetentionPolicy:ws,"ChatRetentionPolicy.threadCreationDate":Zb,"ChatRetentionPolicy.none":eS};const tS=Object.freeze(Object.defineProperty({__proto__:null,AddChatParticipantsRequest:Fb,AddChatParticipantsResult:Yb,ChatAttachment:Cj,ChatError:Sj,ChatMessage:Vb,ChatMessageContent:wj,ChatMessageReadReceipt:mj,ChatMessageReadReceiptsCollection:Mf,ChatMessagesCollection:Uf,ChatParticipant:Tj,ChatParticipantsCollection:Df,ChatRetentionPolicy:ws,ChatThreadItem:xj,ChatThreadProperties:Kb,ChatThreadsItemCollection:Pf,CommunicationErrorResponse:Me,CommunicationIdentifierModel:Bb,CommunicationUserIdentifierModel:gj,CreateChatThreadRequest:Xb,CreateChatThreadResult:Jb,MicrosoftTeamsAppIdentifierModel:bj,MicrosoftTeamsUserIdentifierModel:vj,NoneRetentionPolicy:eS,PhoneNumberIdentifierModel:yj,SendChatMessageRequest:qb,SendChatMessageResult:$b,SendReadReceiptRequest:Hb,SendTypingNotificationRequest:Wb,ThreadCreationDateRetentionPolicy:Zb,UpdateChatMessageRequest:Gb,UpdateChatThreadRequest:Qb,discriminators:Rj},Symbol.toStringTag,{value:"Module"})),Mt={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},Ut={parameterPath:"endpoint",mapper:{serializedName:"endpoint",required:!0,type:{name:"String"}},skipEncoding:!0},Yt={parameterPath:"chatThreadId",mapper:{serializedName:"chatThreadId",required:!0,type:{name:"String"}}},Yl={parameterPath:["options","maxPageSize"],mapper:{serializedName:"maxPageSize",type:{name:"Number"}}},nS={parameterPath:["options","skip"],mapper:{serializedName:"skip",type:{name:"Number"}}},rn={parameterPath:"apiVersion",mapper:{defaultValue:"2025-03-15",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},ks={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},Ej={parameterPath:"sendReadReceiptRequest",mapper:Hb},_j={parameterPath:"sendChatMessageRequest",mapper:qb},rS={parameterPath:["options","startTime"],mapper:{serializedName:"startTime",type:{name:"DateTime"}}},If={parameterPath:"chatMessageId",mapper:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}},iS={parameterPath:["options","contentType"],mapper:{defaultValue:"application/merge-patch+json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},kj={parameterPath:"updateChatMessageRequest",mapper:Gb},Aj={parameterPath:"participantCommunicationIdentifier",mapper:Bb},Nj={parameterPath:"addChatParticipantsRequest",mapper:Fb},jj={parameterPath:"updateChatThreadRequest",mapper:Qb},Oj={parameterPath:["options","sendTypingNotificationRequest"],mapper:Wb},Xl={parameterPath:"nextLink",mapper:{serializedName:"nextLink",required:!0,type:{name:"String"}},skipEncoding:!0},Mj={parameterPath:"createChatThreadRequest",mapper:Xb},Uj={parameterPath:["options","repeatabilityRequestId"],mapper:{serializedName:"repeatability-request-id",type:{name:"String"}}};class Dj{constructor(n){this.client=n}async listChatReadReceipts(n,i){return et.withSpan("ChatApiClient.listChatReadReceipts",i??{},async o=>this.client.sendOperationRequest({chatThreadId:n,options:o},Pj))}async sendChatReadReceipt(n,i,o){return et.withSpan("ChatApiClient.sendChatReadReceipt",o??{},async l=>this.client.sendOperationRequest({chatThreadId:n,sendReadReceiptRequest:i,options:l},Ij))}async sendChatMessage(n,i,o){return et.withSpan("ChatApiClient.sendChatMessage",o??{},async l=>this.client.sendOperationRequest({chatThreadId:n,sendChatMessageRequest:i,options:l},zj))}async listChatMessages(n,i){return et.withSpan("ChatApiClient.listChatMessages",i??{},async o=>this.client.sendOperationRequest({chatThreadId:n,options:o},Lj))}async getChatMessage(n,i,o){return et.withSpan("ChatApiClient.getChatMessage",o??{},async l=>this.client.sendOperationRequest({chatThreadId:n,chatMessageId:i,options:l},Bj))}async updateChatMessage(n,i,o,l){return et.withSpan("ChatApiClient.updateChatMessage",l??{},async c=>this.client.sendOperationRequest({chatThreadId:n,chatMessageId:i,updateChatMessageRequest:o,options:c},Hj))}async deleteChatMessage(n,i,o){return et.withSpan("ChatApiClient.deleteChatMessage",o??{},async l=>this.client.sendOperationRequest({chatThreadId:n,chatMessageId:i,options:l},qj))}async listChatParticipants(n,i){return et.withSpan("ChatApiClient.listChatParticipants",i??{},async o=>this.client.sendOperationRequest({chatThreadId:n,options:o},$j))}async removeChatParticipant(n,i,o){return et.withSpan("ChatApiClient.removeChatParticipant",o??{},async l=>this.client.sendOperationRequest({chatThreadId:n,participantCommunicationIdentifier:i,options:l},Vj))}async addChatParticipants(n,i,o){return et.withSpan("ChatApiClient.addChatParticipants",o??{},async l=>this.client.sendOperationRequest({chatThreadId:n,addChatParticipantsRequest:i,options:l},Gj))}async updateChatThreadProperties(n,i,o){return et.withSpan("ChatApiClient.updateChatThreadProperties",o??{},async l=>this.client.sendOperationRequest({chatThreadId:n,updateChatThreadRequest:i,options:l},Fj))}async getChatThreadProperties(n,i){return et.withSpan("ChatApiClient.getChatThreadProperties",i??{},async o=>this.client.sendOperationRequest({chatThreadId:n,options:o},Yj))}async sendTypingNotification(n,i){return et.withSpan("ChatApiClient.sendTypingNotification",i??{},async o=>this.client.sendOperationRequest({chatThreadId:n,options:o},Xj))}async listChatReadReceiptsNext(n,i,o){return et.withSpan("ChatApiClient.listChatReadReceiptsNext",o??{},async l=>this.client.sendOperationRequest({chatThreadId:n,nextLink:i,options:l},Jj))}async listChatMessagesNext(n,i,o){return et.withSpan("ChatApiClient.listChatMessagesNext",o??{},async l=>this.client.sendOperationRequest({chatThreadId:n,nextLink:i,options:l},Kj))}async listChatParticipantsNext(n,i,o){return et.withSpan("ChatApiClient.listChatParticipantsNext",o??{},async l=>this.client.sendOperationRequest({chatThreadId:n,nextLink:i,options:l},Qj))}}const sn=Tf(tS,!1),Pj={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"GET",responses:{200:{bodyMapper:Mf},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},queryParameters:[Yl,nS,rn],urlParameters:[Ut,Yt],headerParameters:[Mt],serializer:sn},Ij={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"POST",responses:{200:{},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},requestBody:Ej,queryParameters:[rn],urlParameters:[Ut,Yt],headerParameters:[Mt,ks],mediaType:"json",serializer:sn},zj={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"POST",responses:{201:{bodyMapper:$b},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},requestBody:_j,queryParameters:[rn],urlParameters:[Ut,Yt],headerParameters:[Mt,ks],mediaType:"json",serializer:sn},Lj={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"GET",responses:{200:{bodyMapper:Uf},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},queryParameters:[Yl,rn,rS],urlParameters:[Ut,Yt],headerParameters:[Mt],serializer:sn},Bj={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"GET",responses:{200:{bodyMapper:Vb},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},queryParameters:[rn],urlParameters:[Ut,Yt,If],headerParameters:[Mt],serializer:sn},Hj={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},requestBody:kj,queryParameters:[rn],urlParameters:[Ut,Yt,If],headerParameters:[Mt,iS],mediaType:"json",serializer:sn},qj={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},queryParameters:[rn],urlParameters:[Ut,Yt,If],headerParameters:[Mt],serializer:sn},$j={path:"/chat/threads/{chatThreadId}/participants",httpMethod:"GET",responses:{200:{bodyMapper:Df},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},queryParameters:[Yl,nS,rn],urlParameters:[Ut,Yt],headerParameters:[Mt],serializer:sn},Vj={path:"/chat/threads/{chatThreadId}/participants/:remove",httpMethod:"POST",responses:{204:{},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},requestBody:Aj,queryParameters:[rn],urlParameters:[Ut,Yt],headerParameters:[Mt,ks],mediaType:"json",serializer:sn},Gj={path:"/chat/threads/{chatThreadId}/participants/:add",httpMethod:"POST",responses:{201:{bodyMapper:Yb},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},requestBody:Nj,queryParameters:[rn],urlParameters:[Ut,Yt],headerParameters:[Mt,ks],mediaType:"json",serializer:sn},Fj={path:"/chat/threads/{chatThreadId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},requestBody:jj,queryParameters:[rn],urlParameters:[Ut,Yt],headerParameters:[Mt,iS],mediaType:"json",serializer:sn},Yj={path:"/chat/threads/{chatThreadId}",httpMethod:"GET",responses:{200:{bodyMapper:Kb},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},queryParameters:[rn],urlParameters:[Ut,Yt],headerParameters:[Mt],serializer:sn},Xj={path:"/chat/threads/{chatThreadId}/typing",httpMethod:"POST",responses:{200:{},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},requestBody:Oj,queryParameters:[rn],urlParameters:[Ut,Yt],headerParameters:[Mt,ks],mediaType:"json",serializer:sn},Jj={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Mf},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},urlParameters:[Ut,Yt,Xl],headerParameters:[Mt],serializer:sn},Kj={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Uf},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},urlParameters:[Ut,Yt,Xl],headerParameters:[Mt],serializer:sn},Qj={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Df},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},urlParameters:[Ut,Yt,Xl],headerParameters:[Mt],serializer:sn};class Wj{constructor(n){this.client=n}async createChatThread(n,i){return et.withSpan("ChatApiClient.createChatThread",i??{},async o=>this.client.sendOperationRequest({createChatThreadRequest:n,options:o},Zj))}async listChatThreads(n){return et.withSpan("ChatApiClient.listChatThreads",n??{},async i=>this.client.sendOperationRequest({options:i},eO))}async deleteChatThread(n,i){return et.withSpan("ChatApiClient.deleteChatThread",i??{},async o=>this.client.sendOperationRequest({chatThreadId:n,options:o},tO))}async listChatThreadsNext(n,i){return et.withSpan("ChatApiClient.listChatThreadsNext",i??{},async o=>this.client.sendOperationRequest({nextLink:n,options:o},nO))}}const Jl=Tf(tS,!1),Zj={path:"/chat/threads",httpMethod:"POST",responses:{201:{bodyMapper:Jb},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},requestBody:Mj,queryParameters:[rn],urlParameters:[Ut],headerParameters:[Mt,ks,Uj],mediaType:"json",serializer:Jl},eO={path:"/chat/threads",httpMethod:"GET",responses:{200:{bodyMapper:Pf},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},queryParameters:[Yl,rn,rS],urlParameters:[Ut],headerParameters:[Mt],serializer:Jl},tO={path:"/chat/threads/{chatThreadId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},queryParameters:[rn],urlParameters:[Ut,Yt],headerParameters:[Mt],serializer:Jl},nO={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Pf},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},urlParameters:[Ut,Xl],headerParameters:[Mt],serializer:Jl};class sS extends Ub{constructor(n,i){var o,l;if(n===void 0)throw new Error("'endpoint' cannot be null");i||(i={});const c={requestContentType:"application/json; charset=utf-8"},f="azsdk-js-communication-chat/1.6.0",p=i.userAgentOptions&&i.userAgentOptions.userAgentPrefix?`${i.userAgentOptions.userAgentPrefix} ${f}`:`${f}`,m=Object.assign(Object.assign(Object.assign({},c),i),{userAgentOptions:{userAgentPrefix:p},endpoint:(l=(o=i.endpoint)!==null&&o!==void 0?o:i.baseUri)!==null&&l!==void 0?l:"{endpoint}"});super(m),this.endpoint=n,this.apiVersion=i.apiVersion||"2025-03-15",this.chatThread=new Dj(this),this.chat=new Wj(this),this.addCustomApiVersionPolicy(i.apiVersion)}addCustomApiVersionPolicy(n){if(!n)return;const i={name:"CustomApiVersionPolicy",async sendRequest(o,l){const c=o.url.split("?");if(c.length>1){const f=c[1].split("&").map(p=>p.indexOf("api-version")>-1?"api-version="+n:p);o.url=c[0]+"?"+f.join("&")}return l(o)}};this.pipeline.addPolicy(i)}}const Ao=Vl("communication-chat"),oS=r=>Fl({credential:{getToken:(i,o)=>r.getToken({abortSignal:o?.abortSignal})},scopes:[]}),rO=8e3;class iO{constructor(n,i,o,l={}){this.endpoint=n,this.timeOfLastTypingRequest=void 0,this.threadId=i,this.tokenCredential=o;const c=Object.assign(Object.assign({},l),{loggingOptions:{logger:Ao.info}});this.client=new sS(this.endpoint,Object.assign({endpoint:this.endpoint},c));const f=oS(this.tokenCredential);this.client.pipeline.addPolicy(f)}getProperties(n={}){return et.withSpan("ChatClient-GetProperties",n,async i=>{const o=await this.client.chatThread.getChatThreadProperties(this.threadId,i);return Lb(o)})}updateTopic(n,i={}){return et.withSpan("ChatThreadClient-UpdateTopic",i,async o=>{await this.client.chatThread.updateChatThreadProperties(this.threadId,{topic:n},o)})}updateProperties(n={}){return et.withSpan("ChatThreadClient-UpdateProperties",n,async i=>{await this.client.chatThread.updateChatThreadProperties(this.threadId,n,i)})}sendMessage(n,i={}){return et.withSpan("ChatThreadClient-SendMessage",i,async o=>(this.timeOfLastTypingRequest=void 0,await this.client.chatThread.sendChatMessage(this.threadId,Object.assign(Object.assign({},n),i),o)))}getMessage(n,i={}){return et.withSpan("ChatThreadClient-GetMessage",i,async o=>{const l=await this.client.chatThread.getChatMessage(this.threadId,n,o);return Ud(l)})}listMessagesPage(n){return Yr(this,arguments,function*(o,l={}){if(!o.continuationToken){const c=yield at(this.client.chatThread.listChatMessages(this.threadId,l));o.continuationToken=c.nextLink,c.value&&(yield yield at(c.value.map(Ud,this)))}for(;o.continuationToken;){const c=yield at(this.client.chatThread.listChatMessagesNext(this.threadId,o.continuationToken,l));if(o.continuationToken=c.nextLink,c.value)yield yield at(c.value.map(Ud,this));else break}})}listMessagesAll(n){return Yr(this,arguments,function*(){var o,l,c,f;try{for(var p=!0,m=Xr(this.listMessagesPage({},n)),g;g=yield at(m.next()),o=g.done,!o;p=!0)f=g.value,p=!1,yield at(yield*vl(Xr(f)))}catch(y){l={error:y}}finally{try{!p&&!o&&(c=m.return)&&(yield at(c.call(m)))}finally{if(l)throw l.error}}})}listMessages(n={}){const{span:i,updatedOptions:o}=et.startSpan("ChatThreadClient-ListMessages",n);try{const l=this.listMessagesAll(o);return{next(){return l.next()},[Symbol.asyncIterator](){return this},byPage:(c={})=>this.listMessagesPage(c,o)}}catch(l){throw i.setStatus({status:"error",error:l}),l}finally{i.end()}}deleteMessage(n,i={}){return et.withSpan("ChatThreadClient-DeleteMessage",i,async o=>{await this.client.chatThread.deleteChatMessage(this.threadId,n,o)})}async updateMessage(n,i={}){return et.withSpan("ChatThreadClient-UpdateMessage",i,async o=>{await this.client.chatThread.updateChatMessage(this.threadId,n,i,o)})}async addParticipants(n,i={}){return et.withSpan("ChatThreadClient-AddParticipants",i,async o=>await this.client.chatThread.addChatParticipants(this.threadId,dj(n),o))}listParticipantsPage(n){return Yr(this,arguments,function*(o,l={}){if(!o.continuationToken){const c=yield at(this.client.chatThread.listChatParticipants(this.threadId,l));o.continuationToken=c.nextLink,c.value&&(yield yield at(c.value.map(Kd,this)))}for(;o.continuationToken;){const c=yield at(this.client.chatThread.listChatParticipantsNext(this.threadId,o.continuationToken,l));if(o.continuationToken=c.nextLink,c.value)yield yield at(c.value.map(Kd,this));else break}})}listParticipantsAll(n){return Yr(this,arguments,function*(){var o,l,c,f;try{for(var p=!0,m=Xr(this.listParticipantsPage({},n)),g;g=yield at(m.next()),o=g.done,!o;p=!0)f=g.value,p=!1,yield at(yield*vl(Xr(f)))}catch(y){l={error:y}}finally{try{!p&&!o&&(c=m.return)&&(yield at(c.call(m)))}finally{if(l)throw l.error}}})}listParticipants(n={}){const{span:i,updatedOptions:o}=et.startSpan("ChatThreadClient-ListParticipants",n);try{const l=this.listParticipantsAll(o);return{next(){return l.next()},[Symbol.asyncIterator](){return this},byPage:(c={})=>this.listParticipantsPage(c,o)}}catch(l){throw i.setStatus({status:"error",error:l}),l}finally{i.end()}}async removeParticipant(n,i={}){return et.withSpan("ChatThreadClient-RemoveParticipant",i,async o=>{await this.client.chatThread.removeChatParticipant(this.threadId,Ib(n),o)})}async sendTypingNotification(n={}){return et.withSpan("ChatThreadClient-SendTypingNotification",n,async i=>{const o=new Date,{senderDisplayName:l}=i,c=Sr(i,["senderDisplayName"]);return this.canPostTypingNotification(o)?(this.timeOfLastTypingRequest=o,await this.client.chatThread.sendTypingNotification(this.threadId,Object.assign({sendTypingNotificationRequest:{senderDisplayName:l}},c)),!0):(Ao.info(`Typing Notification NOT Send. [thread_id=${this.threadId}]`),!1)})}async sendReadReceipt(n,i={}){return et.withSpan("ChatThreadClient-SendReadReceipt",i,async o=>{await this.client.chatThread.sendChatReadReceipt(this.threadId,n,o)})}listReadReceiptsPage(n){return Yr(this,arguments,function*(o,l={}){if(!o.continuationToken){const c=yield at(this.client.chatThread.listChatReadReceipts(this.threadId,l));o.continuationToken=c.nextLink,c.value&&(yield yield at(c.value.map(Jy,this)))}for(;o.continuationToken;){const c=yield at(this.client.chatThread.listChatReadReceiptsNext(this.threadId,o.continuationToken,l));if(o.continuationToken=c.nextLink,c.value)yield yield at(c.value.map(Jy,this));else break}})}listReadReceiptsAll(n){return Yr(this,arguments,function*(){var o,l,c,f;try{for(var p=!0,m=Xr(this.listReadReceiptsPage({},n)),g;g=yield at(m.next()),o=g.done,!o;p=!0)f=g.value,p=!1,yield at(yield*vl(Xr(f)))}catch(y){l={error:y}}finally{try{!p&&!o&&(c=m.return)&&(yield at(c.call(m)))}finally{if(l)throw l.error}}})}listReadReceipts(n={}){const{span:i,updatedOptions:o}=et.startSpan("ChatThreadClient-ListChatReadReceipts",n);try{const l=this.listReadReceiptsAll(o);return{next(){return l.next()},[Symbol.asyncIterator](){return this},byPage:(c={})=>this.listReadReceiptsPage(c,o)}}catch(l){throw i.setStatus({status:"error",error:l}),l}finally{i.end()}}canPostTypingNotification(n){return this.timeOfLastTypingRequest&&n.getTime()-this.timeOfLastTypingRequest.getTime()<rO?(Ao.info(`Typing interval check failed. [last_request=${this.timeOfLastTypingRequest}]`),!1):!0}}var dl={exports:{}},Zy;function sO(){if(Zy)return dl.exports;Zy=1;var r=typeof Reflect=="object"?Reflect:null,n=r&&typeof r.apply=="function"?r.apply:function(re,ve,ue){return Function.prototype.apply.call(re,ve,ue)},i;r&&typeof r.ownKeys=="function"?i=r.ownKeys:Object.getOwnPropertySymbols?i=function(re){return Object.getOwnPropertyNames(re).concat(Object.getOwnPropertySymbols(re))}:i=function(re){return Object.getOwnPropertyNames(re)};function o(Q){console&&console.warn&&console.warn(Q)}var l=Number.isNaN||function(re){return re!==re};function c(){c.init.call(this)}dl.exports=c,dl.exports.once=le,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var f=10;function p(Q){if(typeof Q!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Q)}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(Q){if(typeof Q!="number"||Q<0||l(Q))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Q+".");f=Q}}),c.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(re){if(typeof re!="number"||re<0||l(re))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+re+".");return this._maxListeners=re,this};function m(Q){return Q._maxListeners===void 0?c.defaultMaxListeners:Q._maxListeners}c.prototype.getMaxListeners=function(){return m(this)},c.prototype.emit=function(re){for(var ve=[],ue=1;ue<arguments.length;ue++)ve.push(arguments[ue]);var ke=re==="error",Ce=this._events;if(Ce!==void 0)ke=ke&&Ce.error===void 0;else if(!ke)return!1;if(ke){var Ne;if(ve.length>0&&(Ne=ve[0]),Ne instanceof Error)throw Ne;var Be=new Error("Unhandled error."+(Ne?" ("+Ne.message+")":""));throw Be.context=Ne,Be}var qe=Ce[re];if(qe===void 0)return!1;if(typeof qe=="function")n(qe,this,ve);else for(var je=qe.length,xe=O(qe,je),ue=0;ue<je;++ue)n(xe[ue],this,ve);return!0};function g(Q,re,ve,ue){var ke,Ce,Ne;if(p(ve),Ce=Q._events,Ce===void 0?(Ce=Q._events=Object.create(null),Q._eventsCount=0):(Ce.newListener!==void 0&&(Q.emit("newListener",re,ve.listener?ve.listener:ve),Ce=Q._events),Ne=Ce[re]),Ne===void 0)Ne=Ce[re]=ve,++Q._eventsCount;else if(typeof Ne=="function"?Ne=Ce[re]=ue?[ve,Ne]:[Ne,ve]:ue?Ne.unshift(ve):Ne.push(ve),ke=m(Q),ke>0&&Ne.length>ke&&!Ne.warned){Ne.warned=!0;var Be=new Error("Possible EventEmitter memory leak detected. "+Ne.length+" "+String(re)+" listeners added. Use emitter.setMaxListeners() to increase limit");Be.name="MaxListenersExceededWarning",Be.emitter=Q,Be.type=re,Be.count=Ne.length,o(Be)}return Q}c.prototype.addListener=function(re,ve){return g(this,re,ve,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(re,ve){return g(this,re,ve,!0)};function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function E(Q,re,ve){var ue={fired:!1,wrapFn:void 0,target:Q,type:re,listener:ve},ke=y.bind(ue);return ke.listener=ve,ue.wrapFn=ke,ke}c.prototype.once=function(re,ve){return p(ve),this.on(re,E(this,re,ve)),this},c.prototype.prependOnceListener=function(re,ve){return p(ve),this.prependListener(re,E(this,re,ve)),this},c.prototype.removeListener=function(re,ve){var ue,ke,Ce,Ne,Be;if(p(ve),ke=this._events,ke===void 0)return this;if(ue=ke[re],ue===void 0)return this;if(ue===ve||ue.listener===ve)--this._eventsCount===0?this._events=Object.create(null):(delete ke[re],ke.removeListener&&this.emit("removeListener",re,ue.listener||ve));else if(typeof ue!="function"){for(Ce=-1,Ne=ue.length-1;Ne>=0;Ne--)if(ue[Ne]===ve||ue[Ne].listener===ve){Be=ue[Ne].listener,Ce=Ne;break}if(Ce<0)return this;Ce===0?ue.shift():ee(ue,Ce),ue.length===1&&(ke[re]=ue[0]),ke.removeListener!==void 0&&this.emit("removeListener",re,Be||ve)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(re){var ve,ue,ke;if(ue=this._events,ue===void 0)return this;if(ue.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):ue[re]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete ue[re]),this;if(arguments.length===0){var Ce=Object.keys(ue),Ne;for(ke=0;ke<Ce.length;++ke)Ne=Ce[ke],Ne!=="removeListener"&&this.removeAllListeners(Ne);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(ve=ue[re],typeof ve=="function")this.removeListener(re,ve);else if(ve!==void 0)for(ke=ve.length-1;ke>=0;ke--)this.removeListener(re,ve[ke]);return this};function L(Q,re,ve){var ue=Q._events;if(ue===void 0)return[];var ke=ue[re];return ke===void 0?[]:typeof ke=="function"?ve?[ke.listener||ke]:[ke]:ve?Y(ke):O(ke,ke.length)}c.prototype.listeners=function(re){return L(this,re,!0)},c.prototype.rawListeners=function(re){return L(this,re,!1)},c.listenerCount=function(Q,re){return typeof Q.listenerCount=="function"?Q.listenerCount(re):G.call(Q,re)},c.prototype.listenerCount=G;function G(Q){var re=this._events;if(re!==void 0){var ve=re[Q];if(typeof ve=="function")return 1;if(ve!==void 0)return ve.length}return 0}c.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function O(Q,re){for(var ve=new Array(re),ue=0;ue<re;++ue)ve[ue]=Q[ue];return ve}function ee(Q,re){for(;re+1<Q.length;re++)Q[re]=Q[re+1];Q.pop()}function Y(Q){for(var re=new Array(Q.length),ve=0;ve<re.length;++ve)re[ve]=Q[ve].listener||Q[ve];return re}function le(Q,re){return new Promise(function(ve,ue){function ke(Ne){Q.removeListener(re,Ce),ue(Ne)}function Ce(){typeof Q.removeListener=="function"&&Q.removeListener("error",ke),ve([].slice.call(arguments))}me(Q,re,Ce,{once:!0}),re!=="error"&&fe(Q,ke,{once:!0})})}function fe(Q,re,ve){typeof Q.on=="function"&&me(Q,"error",re,ve)}function me(Q,re,ve,ue){if(typeof Q.on=="function")ue.once?Q.once(re,ve):Q.on(re,ve);else if(typeof Q.addEventListener=="function")Q.addEventListener(re,function ke(Ce){ue.once&&Q.removeEventListener(re,ke),ve(Ce)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Q)}return dl.exports}var oO=sO();function aO(){return h0()}const lO=(r,n,i)=>{var o,l,c,f;return new Xd.CommunicationSignalingClient(r,n,{resourceEndpoint:(o=i?.resourceEndpoint)!==null&&o!==void 0?o:void 0,gatewayApiVersion:(l=i?.gatewayApiVersion)!==null&&l!==void 0?l:void 0,additionalPolicies:(c=i?.additionalPolicies)!==null&&c!==void 0?c:void 0,userAgentOptions:(f=i?.userAgentOptions)!==null&&f!==void 0?f:void 0})};class cO{constructor(n,i,o={}){this.endpoint=n,this.signalingClient=void 0,this.emitter=new oO.EventEmitter,this.isRealtimeNotificationsStarted=!1,this.tokenCredential=i;const l=Object.assign(Object.assign({},o),{loggingOptions:{logger:Ao.info}});this.client=new sS(this.endpoint,Object.assign({endpoint:this.endpoint},l));const c=oS(this.tokenCredential);this.client.pipeline.addPolicy(c),this.clientOptions=Object.assign({},o),this.clientOptions.signalingClientOptions=Object.assign(Object.assign({},this.clientOptions.signalingClientOptions),{resourceEndpoint:this.endpoint,gatewayApiVersion:this.client.apiVersion}),this.signalingClient=lO(i,Ao,this.clientOptions.signalingClientOptions)}getChatThreadClient(n){return new iO(this.endpoint,n,this.tokenCredential,this.clientOptions)}async createChatThread(n,i={}){return et.withSpan("ChatClient-CreateChatThread",i,async o=>{var l,c;o.idempotencyToken=(l=o.idempotencyToken)!==null&&l!==void 0?l:aO();const f=uj(o),p=await this.client.chat.createChatThread({topic:n.topic,participants:(c=i.participants)===null||c===void 0?void 0:c.map(m=>zb(m)),metadata:i.metadata,retentionPolicy:i.retentionPolicy},f);return pj(p)})}listChatThreadsPage(n){return Yr(this,arguments,function*(o,l={}){if(!o.continuationToken){const c=yield at(this.client.chat.listChatThreads(l));o.continuationToken=c.nextLink,c.value&&(yield yield at(c.value))}for(;o.continuationToken;){const c=yield at(this.client.chat.listChatThreadsNext(o.continuationToken,l));if(o.continuationToken=c.nextLink,c.value)yield yield at(c.value);else break}})}listChatThreadsAll(n){return Yr(this,arguments,function*(){var o,l,c,f;try{for(var p=!0,m=Xr(this.listChatThreadsPage({},n)),g;g=yield at(m.next()),o=g.done,!o;p=!0)f=g.value,p=!1,yield at(yield*vl(Xr(f)))}catch(y){l={error:y}}finally{try{!p&&!o&&(c=m.return)&&(yield at(c.call(m)))}finally{if(l)throw l.error}}})}listChatThreads(n={}){const{span:i,updatedOptions:o}=et.startSpan("ChatClient-ListChatThreads",n);try{const l=this.listChatThreadsAll(o);return{next(){return l.next()},[Symbol.asyncIterator](){return this},byPage:(c={})=>this.listChatThreadsPage(c,o)}}catch(l){throw i.setStatus({error:l,status:"error"}),l}finally{i.end()}}async deleteChatThread(n,i={}){return et.withSpan("ChatClient-DeleteChatThread",i,async o=>{await this.client.chat.deleteChatThread(n,o)})}async startRealtimeNotifications(){if(this.signalingClient===void 0)throw new Error("Realtime notifications are not supported in node js.");this.isRealtimeNotificationsStarted||(this.isRealtimeNotificationsStarted=!0,await this.signalingClient.start(),this.subscribeToSignalingEvents())}async stopRealtimeNotifications(){if(this.signalingClient===void 0)throw new Error("Realtime notifications are not supported in node js.");this.isRealtimeNotificationsStarted=!1,await this.signalingClient.stop(),this.emitter.removeAllListeners()}on(n,i){if(this.signalingClient===void 0)throw new Error("Realtime notifications are only supported in the browser.");if(!this.isRealtimeNotificationsStarted&&n!=="realTimeNotificationConnected"&&n!=="realTimeNotificationDisconnected")throw new Error("You must call startRealtimeNotifications before you can subscribe to events.");this.emitter.on(n,i)}off(n,i){if(this.signalingClient===void 0)throw new Error("Realtime notifications are only supported in the browser.");this.emitter.removeListener(n,i)}subscribeToSignalingEvents(){if(this.signalingClient===void 0)throw new Error("Realtime notifications are only supported in the browser.");this.signalingClient.on("connectionChanged",n=>{n===Xd.ConnectionState.Connected?this.emitter.emit("realTimeNotificationConnected"):n===Xd.ConnectionState.Disconnected&&this.emitter.emit("realTimeNotificationDisconnected")}),this.signalingClient.on("chatMessageReceived",n=>{this.emitter.emit("chatMessageReceived",n)}),this.signalingClient.on("chatMessageEdited",n=>{this.emitter.emit("chatMessageEdited",n)}),this.signalingClient.on("chatMessageDeleted",n=>{this.emitter.emit("chatMessageDeleted",n)}),this.signalingClient.on("typingIndicatorReceived",n=>{this.emitter.emit("typingIndicatorReceived",n)}),this.signalingClient.on("readReceiptReceived",n=>{this.emitter.emit("readReceiptReceived",n)}),this.signalingClient.on("chatThreadCreated",n=>{this.emitter.emit("chatThreadCreated",n)}),this.signalingClient.on("chatThreadDeleted",n=>{this.emitter.emit("chatThreadDeleted",n)}),this.signalingClient.on("chatThreadPropertiesUpdated",n=>{this.emitter.emit("chatThreadPropertiesUpdated",n)}),this.signalingClient.on("participantsAdded",n=>{this.emitter.emit("participantsAdded",n)}),this.signalingClient.on("participantsRemoved",n=>{this.emitter.emit("participantsRemoved",n)})}}function uO(){const{recipientId:r}=dv(),n=Wr(),[i,o]=U.useState(null),[l,c]=U.useState(null),[f,p]=U.useState(null),[m,g]=U.useState([]),[y,E]=U.useState(""),[L,G]=U.useState(!0),[O,ee]=U.useState(!1),[Y,le]=U.useState(null),fe=localStorage.getItem("userId"),me=U.useRef(null),Q=U.useRef(!1),re=U.useRef(null),ve=U.useRef(null),ue=U.useRef(null),ke=(je,xe="success")=>{le({message:je,type:xe}),xe==="success"&&setTimeout(()=>{le(De=>De?{...De,hiding:!0}:null),setTimeout(()=>le(null),300)},3e3)},Ce=je=>{console.log("Real-time message event received:",je),je.threadId===ve.current&&je.sender.communicationUserId!==ue.current&&g(xe=>xe.find(De=>De.id===je.id)?xe:[...xe,{id:je.id,sender:"Recipient",text:je.message,timestamp:new Date}])};U.useEffect(()=>(fe&&r&&!Q.current&&(Q.current=!0,Be()),()=>{re.current&&(console.log("Cleaning up chat real-time notifications..."),re.current.off("chatMessageReceived",Ce),re.current.stopRealtimeNotifications().catch(console.error),re.current=null)}),[fe,r]),U.useEffect(()=>{Ne()},[m]);const Ne=()=>{me.current?.scrollIntoView({behavior:"smooth"})},Be=async()=>{try{G(!0),console.log("Initializing chat for user:",fe,"with recipient:",r),console.log("Fetching chat token...");const je=await Fe.get("issuechattoken",{params:{userId:fe}}),{token:xe,user:De}=je.data;o(xe),ue.current=De.communicationUserId,console.log("Token received for ACS ID:",De.communicationUserId);const H=new nj(xe),M=new cO("https://acs-festive-guest.india.communication.azure.com/",H);re.current=M,c(M),console.log("Getting or creating chat thread...");const z=(await Fe.post("getorcreatechatthread",{userId:fe,recipientId:r})).data.threadId;console.log("Thread ID received:",z),ve.current=z,p(z),console.log("Loading message history...");const x=M.getChatThreadClient(z).listMessages(),P=[];for await(const T of x)T.type==="text"&&P.push({id:T.id,sender:T.sender.communicationUserId===De.communicationUserId?"Me":"Recipient",text:T.content.message,timestamp:T.createdOn});g(P.reverse()),console.log("Starting real-time notifications..."),await M.startRealtimeNotifications(),M.on("chatMessageReceived",Ce),console.log("Chat initialization complete.")}catch(je){console.error("Failed to init chat:",je),ke("Failed to initialize chat: "+(je.response?.data?.error||je.message),"error")}finally{G(!1)}},qe=async je=>{if(je.preventDefault(),!!y.trim()){if(!re.current||!ve.current){ke("Chat not fully initialized. Please wait...","error");return}try{ee(!0);const xe=re.current.getChatThreadClient(ve.current),De=y;console.log("Attempting to send message to ACS...");const H=await xe.sendMessage({content:De});console.log("Message sent successfully. ID:",H.id),E(""),g(M=>M.find(X=>X.id===H.id)?M:[...M,{id:H.id,sender:"Me",text:De,timestamp:new Date}])}catch(xe){console.error("Failed to send message:",xe),ke("Failed to send message: "+xe.message,"error")}finally{ee(!1)}}};return L?u.jsxs("div",{className:"container",style:{textAlign:"center",padding:"5rem"},children:[u.jsx("div",{className:"spinner"}),u.jsx("p",{children:"Initializing secure chat..."})]}):u.jsxs("div",{className:"modern-chat-page",children:[Y&&u.jsx("div",{className:"toast-container",children:u.jsxs("div",{className:`toast ${Y.type} ${Y.hiding?"hiding":""}`,children:[u.jsx("span",{className:"toast-icon",children:Y.type==="success"?"":Y.type==="error"?"":""}),u.jsx("div",{className:"toast-content",children:u.jsx("p",{className:"toast-message",children:Y.message})}),Y.type!=="success"&&u.jsx("button",{onClick:()=>le(null),style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.5rem"},children:""})]})}),u.jsxs("div",{className:"chat-window-full",children:[u.jsx("div",{className:"chat-header-full",children:u.jsxs("div",{className:"chat-user-info-full",children:[u.jsx("button",{onClick:()=>n(-1),className:"back-btn-modern",title:"Go Back",children:u.jsx(of,{size:20})}),u.jsx("div",{className:"user-avatar",children:""}),u.jsxs("div",{className:"user-details",children:[u.jsx("h3",{children:"Secure Chat"}),u.jsx("span",{className:"user-status",children:" Online"})]})]})}),u.jsxs("div",{className:"chat-messages",children:[m.map((je,xe)=>u.jsxs("div",{className:`message-bubble ${je.sender==="Me"?"sent":"received"}`,children:[u.jsx("div",{className:"message-content",children:je.text}),u.jsx("div",{className:"message-time",children:new Date(je.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},je.id||xe)),u.jsx("div",{ref:me})]}),u.jsxs("form",{onSubmit:qe,className:"chat-input",children:[u.jsx("input",{type:"text",value:y,onChange:je=>E(je.target.value),placeholder:"Type a message...",className:"message-input"}),u.jsx("button",{type:"submit",className:"send-btn",disabled:O,children:O?u.jsx("span",{className:"spinner-small"}):u.jsx(jo,{size:20})})]})]})]})}const dO=()=>{const[r,n]=U.useState([]),[i,o]=U.useState(null),[l,c]=U.useState([]),[f,p]=U.useState(""),[m,g]=U.useState(!1),[y,E]=U.useState(!1),[L,G]=U.useState(!1),[O,ee]=U.useState(null),Y=localStorage.getItem("userId"),le=U.useRef(null);U.useEffect(()=>{me()},[]),U.useEffect(()=>{le.current?.scrollIntoView({behavior:"auto"})},[l]);const fe=async Ce=>{try{const Ne=await Fe.post("user/public-profile",{userId:Ce});ee(Ne.data)}catch(Ne){console.error("Failed to fetch profile:",Ne)}},me=async()=>{try{g(!0);const Ce=await Fe.get("chat/conversations");n(Ce.data||[])}catch(Ce){console.error("Failed to fetch conversations:",Ce)}finally{g(!1)}},Q=async Ce=>{o(Ce),c([]),await re(Ce.otherUserId),G(!0)},re=async Ce=>{try{const Be=(await Fe.get(`chat/messages/${Ce}`)).data.map(qe=>({id:qe.id,sender:qe.senderId===Y?"Me":"Recipient",text:qe.message,timestamp:new Date(qe.timestamp),status:qe.status}));c(Be)}catch(Ne){console.error("Failed to load messages:",Ne)}},ve=()=>{G(!1),o(null)},ue=async Ce=>{if(Ce.preventDefault(),!(!f.trim()||!i))try{E(!0);const Ne=f;p(""),c(Be=>[...Be,{id:Date.now(),sender:"Me",text:Ne,timestamp:new Date,status:"Sent"}]),await qn.sendMessage(i.otherUserId,Ne)}catch(Ne){console.error("Failed to send message:",Ne)}finally{E(!1)}},ke=Ce=>{const Ne=new Date(Ce),qe=new Date-Ne;return Math.floor(qe/(1e3*60*60))<24?Ne.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):Ne.toLocaleDateString([],{month:"short",day:"numeric"})};return u.jsxs("div",{className:"chats-container",children:[u.jsxs("div",{className:`conversations-sidebar ${L?"mobile-hidden":""}`,children:[u.jsx("div",{className:"sidebar-header",children:u.jsx("h3",{children:" Messages"})}),u.jsx("div",{className:"conversations-list",children:m?u.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:"Loading..."}):r.length===0?u.jsx("div",{className:"no-conversations",children:u.jsx("p",{children:"No conversations yet"})}):r.map(Ce=>u.jsxs("div",{className:`conversation-item ${i?.otherUserId===Ce.otherUserId?"active":""}`,onClick:()=>Q(Ce),children:[u.jsx("div",{className:"conversation-avatar",children:u.jsx(Wn,{src:Ce.profileImageUrl,alt:Ce.otherUserName,style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"},fallbackText:"User"})}),u.jsxs("div",{className:"conversation-content",children:[u.jsxs("div",{className:"conversation-header",children:[u.jsx("div",{className:"conversation-name",children:Ce.otherUserName}),u.jsx("div",{className:"conversation-time",children:ke(Ce.timestamp)})]}),u.jsxs("div",{className:"conversation-preview",children:[Ce.lastSenderId===Y?"You: ":"",Ce.lastMessage||"Start chatting"]})]}),Ce.unreadCount>0&&u.jsx("div",{style:{minWidth:"20px",height:"20px",borderRadius:"10px",background:"#6366f1",color:"white",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 6px"},children:Ce.unreadCount})]},Ce.chatRoom))})]}),u.jsx("div",{className:`chat-window ${L?"mobile-visible":""}`,children:i?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"chat-header",children:[u.jsx("button",{className:"mobile-back-btn",onClick:ve,children:u.jsx(of,{size:20})}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[u.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#e2e8f0",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",cursor:"pointer"},onClick:()=>fe(i.otherUserId),children:u.jsx(Wn,{src:i.profileImageUrl,alt:i.otherUserName,style:{width:"100%",height:"100%",objectFit:"cover"},fallbackText:"User"})}),u.jsx("h4",{style:{margin:0,cursor:"pointer"},onClick:()=>fe(i.otherUserId),children:i.otherUserName})]})]}),u.jsxs("div",{className:"chat-messages",children:[l.map((Ce,Ne)=>u.jsxs("div",{className:`message ${Ce.sender==="Me"?"sent":"received"}`,children:[u.jsx("div",{className:"message-content",children:Ce.text}),u.jsxs("div",{className:"message-time",children:[new Date(Ce.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Ce.sender==="Me"&&Ce.status&&u.jsxs("span",{style:{marginLeft:"4px",fontSize:"10px"},children:[" ",Ce.status]})]})]},Ce.id||Ne)),u.jsx("div",{ref:le})]}),u.jsxs("form",{onSubmit:ue,className:"chat-input",children:[u.jsx("input",{type:"text",value:f,onChange:Ce=>p(Ce.target.value),placeholder:"Type a message...",className:"message-input"}),u.jsx("button",{type:"submit",className:"send-btn",disabled:y,children:u.jsx(jo,{size:16})})]})]}):u.jsxs("div",{className:"no-chat-selected",children:[u.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),u.jsx("h3",{children:"Select a conversation"}),u.jsx("p",{children:"Choose a conversation from the list to start chatting"})]})}),O&&u.jsx("div",{className:"modal-overlay",onClick:()=>ee(null),children:u.jsxs("div",{className:"modal-content",onClick:Ce=>Ce.stopPropagation(),style:{maxHeight:"90vh",overflowY:"auto"},children:[u.jsxs("div",{className:"modal-header",children:[u.jsx("h3",{children:O.name}),u.jsx("button",{onClick:()=>ee(null),className:"modal-close",children:""})]}),u.jsxs("div",{className:"modal-body",children:[u.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",alignItems:"flex-start"},children:[u.jsx(Wn,{src:O.profileImageUrl,alt:O.name,className:"modal-profile-image",fallbackText:"Profile",style:{flexShrink:0,width:"100px",height:"100px"}}),u.jsxs("div",{style:{flex:1},children:[u.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1.25rem"},children:O.name}),u.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:u.jsxs("span",{style:{color:"#64748b"},children:[" ",O.location]})}),u.jsxs("p",{style:{color:"#64748b",fontSize:"0.9rem",margin:"0"},children:[O.userType,"  Joined ",new Date(O.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"})]})]})]}),u.jsxs("div",{style:{marginBottom:"1.5rem"},children:[u.jsx("h4",{style:{marginBottom:"0.75rem",color:"var(--text)"},children:O.userType==="Host"?" About My Hosting":" About Me"}),u.jsx("p",{style:{color:"#475569",lineHeight:"1.5",background:"#f8fafc",padding:"1rem",borderRadius:"0.5rem",margin:"0"},children:O.bio||"No description provided."})]})]})]})})]})};function fO(){const[r,n]=U.useState([]),[i,o]=U.useState(!0),[l,c]=U.useState(!1),[f,p]=U.useState(""),[m,g]=U.useState(!1);U.useEffect(()=>{y()},[]);const y=async()=>{try{const O=await Fe.get("listpayments");n(O.data)}catch{console.error("Failed to fetch payments")}finally{o(!1)}},E=async()=>{g(!0);try{const O=await Fe.post("seedlocations"),ee=await Fe.get("getlocations");p(` APIs working! Seeded: ${O.data.count} locations. Retrieved: ${Object.keys(ee.data).length} states.`)}catch(O){p(` API Error: ${O.message}`)}finally{g(!1)}},L=async()=>{c(!0);try{const O=await hf.seedLocations();alert(`Locations seeded successfully! ${O.count} locations added.`)}catch(O){alert("Failed to seed locations: "+O.message)}finally{c(!1)}},G=async(O,ee)=>{try{await Fe.post("verifypayment",{paymentId:O,userId:ee}),alert("Payment verified and user updated!"),y()}catch(Y){alert("Verification failed: "+Y.message)}};return u.jsxs("div",{className:"admin-container",children:[u.jsx("h2",{children:"Admin Dashboard"}),u.jsxs("div",{className:"admin-section",style:{marginBottom:"2rem",padding:"1rem",border:"1px solid #e2e8f0",borderRadius:"0.5rem"},children:[u.jsx("h3",{children:"Location Management"}),u.jsx("p",{children:"Test and seed the locations table with initial data."}),u.jsxs("div",{style:{marginBottom:"1rem"},children:[u.jsx("button",{className:"btn btn-secondary",onClick:E,disabled:m,style:{marginRight:"1rem"},children:m?"Testing APIs...":"Test Location APIs"}),u.jsx("button",{className:"btn btn-primary",onClick:L,disabled:l,children:l?"Seeding Locations...":"Seed Locations Table"})]}),f&&u.jsx("div",{style:{padding:"0.5rem",background:f.includes("")?"#d1fae5":"#fee2e2",borderRadius:"0.25rem",fontSize:"0.9rem"},children:f})]}),u.jsxs("div",{className:"admin-section",children:[u.jsx("h3",{children:"Verify Payments"}),i?u.jsx("p",{children:"Loading..."}):u.jsx("div",{className:"payment-list",children:u.jsxs("table",{className:"admin-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"User ID"}),u.jsx("th",{children:"Type"}),u.jsx("th",{children:"UPI Ref"}),u.jsx("th",{children:"Amount"}),u.jsx("th",{children:"Action"})]})}),u.jsx("tbody",{children:r.length>0?r.map(O=>u.jsxs("tr",{children:[u.jsx("td",{children:O.partitionKey}),u.jsx("td",{children:O.type}),u.jsx("td",{children:O.upiRef}),u.jsxs("td",{children:["",O.amount]}),u.jsx("td",{children:u.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>G(O.rowKey,O.partitionKey),children:"Verify"})})]},O.rowKey)):u.jsx("tr",{children:u.jsx("td",{colSpan:"5",style:{textAlign:"center"},children:"No pending payments"})})})]})})]})]})}function hO(){const[r,n]=U.useState(null),[i,o]=U.useState(null),[l,c]=U.useState(""),[f,p]=U.useState(!1),[m,g]=U.useState(""),[y,E]=U.useState(!1),[L,G]=U.useState(!1),[O,ee]=U.useState(!1),[Y,le]=U.useState(""),[fe,me]=U.useState(""),[Q,re]=U.useState(""),[ve,ue]=U.useState(!1),[ke,Ce]=U.useState(!1),[Ne,Be]=U.useState(!1),[qe,je]=U.useState(""),xe=[{label:"At least 8 characters",test:T=>T.length>=8},{label:"One uppercase letter",test:T=>/[A-Z]/.test(T)},{label:"One lowercase letter",test:T=>/[a-z]/.test(T)},{label:"One number",test:T=>/\d/.test(T)},{label:"One special character",test:T=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(T)}],De=localStorage.getItem("userId");U.useEffect(()=>{De&&H()},[De]);const H=async()=>{try{let b=(await Fe.get("user/profile")).data;const S=JSON.parse(localStorage.getItem("user")),_={...b,token:S?.token,role:b.userType||S?.role};n(_),localStorage.setItem("user",JSON.stringify(_)),g(_.referralCode||"Loading..."),window.dispatchEvent(new Event("storage"))}catch{console.error("User not found")}},M=T=>{const b=T.target.files[0];b&&(o(b),c(URL.createObjectURL(b)))},X=async()=>{if(!i||!r){alert("Please select a file and ensure your profile is loaded before uploading.");return}try{console.log("Step 1: Compressing image...");const T=await z(i);console.log("Step 2: Getting SAS token from API...");const b=await Fe.get("user/upload-sas-token");console.log("SAS token response:",b.data);const{sasUrl:S}=b.data;console.log("Step 3: Uploading to blob storage...",S);const _=await fetch(S,{method:"PUT",headers:{"x-ms-blob-type":"BlockBlob","Content-Type":"image/jpeg"},body:T});if(console.log("Upload response status:",_.status),!_.ok)throw new Error(`Upload failed: ${_.status} ${_.statusText}`);console.log("Step 4: Confirming upload with API...");const N=S.split("?")[0];await Fe.post("user/confirm-upload",{imageUrl:N}),alert("Profile image uploaded successfully!"),o(null),c(""),p(!1),await H()}catch(T){console.error("Upload failed:",T),console.error("Error details:",T.response?.data),alert("Image upload failed: "+(T.response?.data?.error||T.message))}},z=T=>new Promise(b=>{const S=document.createElement("canvas"),_=S.getContext("2d"),N=new Image;N.onload=()=>{let{width:w,height:R}=N;const A=800;w>R?w>A&&(R=R*A/w,w=A):R>A&&(w=w*A/R,R=A),S.width=w,S.height=R,_.drawImage(N,0,0,w,R),S.toBlob(q=>{b(q)},"image/jpeg",.8)},N.src=URL.createObjectURL(T)}),K=()=>{navigator.clipboard.writeText(m),E(!0),setTimeout(()=>E(!1),2e3)},x=()=>{const T=` Join FestiveGuest and celebrate festivals with locals! Use my referral code: ${m} when registering to get special benefits!`;navigator.share?navigator.share({text:T}):(navigator.clipboard.writeText(T),E(!0),setTimeout(()=>E(!1),2e3))},P=async()=>{if(!Y||!fe||!Q){je("Please fill all password fields");return}if(!xe.every(b=>b.test(fe))){je("New password must meet all requirements");return}if(fe!==Q){je("New passwords do not match");return}Be(!0),je("");try{(await Fe.post("auth/change-password",{currentPassword:Y,newPassword:fe})).data.success&&(je(" Password changed successfully! Closing in 5 seconds..."),setTimeout(()=>{ee(!1),le(""),me(""),re(""),je("")},5e3))}catch(b){const S=b.response?.data?.message||b.message;je(S)}finally{Be(!1)}};return r?u.jsxs("div",{className:"profile-container",children:[u.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[u.jsx("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:" My Profile"}),u.jsx("p",{style:{color:"#64748b",margin:"0"},children:"View your profile information"})]}),u.jsxs("div",{className:"profile-card",children:[u.jsxs("div",{className:"profile-image-section",children:[u.jsx(Wn,{src:l||r.profileImageUrl,alt:"Profile",className:"profile-img-preview",fallbackText:"Profile"}),u.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexDirection:"column",gap:"0.4rem",alignItems:"center"},children:f?u.jsxs(u.Fragment,{children:[u.jsx("label",{htmlFor:"file-input",className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.3rem",cursor:"pointer",padding:"0.4rem 0.8rem",fontSize:"0.875rem"},children:" Choose File"}),u.jsx("input",{id:"file-input",type:"file",accept:"image/*",onChange:M,style:{display:"none"}}),u.jsxs("button",{className:"btn btn-primary",onClick:X,disabled:!i,style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.4rem 0.8rem",fontSize:"0.875rem"},children:[u.jsx(ex,{size:14})," Upload"]}),u.jsxs("button",{className:"btn btn-secondary",onClick:()=>{p(!1),o(null),c("")},style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.4rem 0.8rem",fontSize:"0.875rem"},children:[u.jsx(lf,{size:14})," Cancel"]})]}):u.jsxs("button",{className:"btn btn-secondary",onClick:()=>p(!0),style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.4rem 0.8rem",fontSize:"0.875rem"},children:[u.jsx(Q1,{size:14})," Edit Photo"]})}),u.jsx("p",{style:{color:"#64748b",fontSize:"0.875rem",textAlign:"center"},children:"Upload a profile photo"})]}),u.jsx("div",{className:"profile-details",children:u.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[u.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #3b82f6"},children:u.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("strong",{children:" Email:"})," ",r.email]})}),u.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #ef4444"},children:u.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("strong",{children:" Phone:"})," ",r.phone]})}),u.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #6366f1"},children:u.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("strong",{children:" Name:"})," ",r.name]})}),u.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #10b981"},children:u.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("strong",{children:" Role:"})," ",r.userType==="Host"?" Host":" Guest"]})}),u.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #f59e0b"},children:u.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("strong",{children:" Location:"})," ",r.location]})}),u.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #ec4899"},children:u.jsxs("p",{style:{margin:"0",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[u.jsx("strong",{children:r.userType==="Host"?" My Offerings:":" My Festival Wishes:"}),u.jsx("span",{style:{color:"#475569",fontSize:"0.95rem",lineHeight:"1.5"},children:r.bio||"Not specified"})]})}),u.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #f59e0b"},children:u.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("strong",{children:" Status:"}),u.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.875rem",background:r.status==="Active"?"#dcfce7":"#fef3c7",color:r.status==="Active"?"#166534":"#92400e"},children:r.status})]})}),u.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #8b5cf6"},children:u.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("strong",{children:" Contact Enabled:"}),u.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.875rem",background:r.isVerified?"#dcfce7":"#fee2e2",color:r.isVerified?"#166534":"#dc2626"},children:r.isVerified?" Yes":" No"})]})})]})})]}),u.jsxs("div",{className:"profile-card",style:{marginTop:"2rem"},children:[u.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[u.jsxs("h3",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[u.jsx(ms,{size:24,style:{color:"var(--primary)"}}),"Refer a Friend"]}),u.jsx("p",{style:{color:"#64748b",margin:"0"},children:"Share FestiveGuest with friends and earn rewards!"})]}),u.jsxs("div",{style:{background:"#f8fafc",padding:"1.5rem",borderRadius:"0.75rem",border:"2px dashed var(--primary)"},children:[u.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem"},children:[u.jsx("p",{style:{margin:"0 0 0.5rem 0",fontWeight:"600"},children:"Your Referral Code:"}),u.jsx("div",{style:{background:"white",padding:"0.75rem 1rem",borderRadius:"0.5rem",border:"1px solid var(--border)",fontSize:"1.25rem",fontWeight:"bold",color:"var(--primary)",letterSpacing:"2px"},children:m})]}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",flexWrap:"wrap",marginBottom:"1.5rem"},children:[u.jsxs("button",{onClick:K,className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem"},children:[u.jsx(C1,{size:16}),y?"Copied!":"Copy Code"]}),u.jsxs("button",{onClick:x,className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem"},children:[u.jsx(Y1,{size:16}),"Share Message"]})]}),u.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1rem"},children:[u.jsx("h4",{style:{margin:"0 0 0.5rem 0",fontSize:"1rem",textAlign:"center"},children:" Referral Rewards"}),u.jsxs("div",{style:{fontSize:"0.875rem",lineHeight:"1.4"},children:[u.jsxs("p",{style:{margin:"0 0 0.5rem 0"},children:[" ",u.jsx("strong",{children:"Invite 3 friends"}),"  Get 1 month Premium features FREE!"]}),u.jsxs("p",{style:{margin:"0 0 0.5rem 0"},children:[" ",u.jsx("strong",{children:"Each successful referral"}),"  Both you and your friend get special benefits"]}),u.jsxs("p",{style:{margin:"0"},children:[" ",u.jsx("strong",{children:"Premium features:"})," Priority support, advanced filters, verified badge"]})]})]}),u.jsxs("div",{style:{background:"#fff7ed",border:"1px solid #fed7aa",padding:"1rem",borderRadius:"0.5rem"},children:[u.jsx("h4",{style:{margin:"0 0 0.75rem 0",color:"#9a3412",fontSize:"0.95rem"},children:" How to Share Your Referral Code:"}),u.jsxs("ol",{style:{margin:"0",paddingLeft:"1.25rem",fontSize:"0.875rem",color:"#9a3412",lineHeight:"1.5"},children:[u.jsxs("li",{style:{marginBottom:"0.5rem"},children:[u.jsx("strong",{children:"Copy your code"})," using the button above"]}),u.jsxs("li",{style:{marginBottom:"0.5rem"},children:[u.jsx("strong",{children:"Share with friends"})," via WhatsApp, SMS, or social media"]}),u.jsxs("li",{style:{marginBottom:"0.5rem"},children:[u.jsx("strong",{children:"Ask them to visit"})," festiveguest.com and register"]}),u.jsxs("li",{style:{marginBottom:"0.5rem"},children:[u.jsx("strong",{children:"They enter your code"}),' in the "Referral Code" field during registration']}),u.jsxs("li",{children:[u.jsx("strong",{children:"Both get rewards"})," once they complete their first booking!"]})]})]}),u.jsx("div",{style:{marginTop:"1rem",textAlign:"center"},children:u.jsx("p",{style:{margin:"0",fontSize:"0.875rem",color:"#64748b"},children:"Help us grow our festival community and earn amazing rewards together! "})})]})]}),u.jsxs("div",{className:"profile-card",style:{marginTop:"2rem"},children:[u.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[u.jsxs("h3",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[u.jsx(pl,{size:24,style:{color:"var(--primary)"}}),"Security"]}),u.jsx("p",{style:{color:"#64748b",margin:"0"},children:"Manage your account security"})]}),u.jsx("div",{style:{textAlign:"center"},children:u.jsxs("button",{onClick:()=>ee(!0),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 auto"},children:[u.jsx(pl,{size:16}),"Change Password"]})})]}),O&&u.jsx("div",{className:"modal-overlay",onClick:()=>ee(!1),children:u.jsxs("div",{className:"modal-content",onClick:T=>T.stopPropagation(),style:{maxWidth:"400px"},children:[u.jsxs("div",{className:"modal-header",children:[u.jsxs("h3",{children:[u.jsx(pl,{size:20})," Change Password"]}),u.jsx("button",{onClick:()=>ee(!1),className:"modal-close",children:""})]}),u.jsxs("div",{className:"modal-body",children:[qe&&u.jsx("div",{style:{color:qe.includes("")?"#16a34a":"#dc2626",background:qe.includes("")?"#dcfce7":"#fee2e2",padding:"0.75rem",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:qe.includes("")?qe:` ${qe}`}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Current Password"}),u.jsxs("div",{style:{position:"relative"},children:[u.jsx("input",{type:ve?"text":"password",value:Y,onChange:T=>{le(T.target.value),je("")},placeholder:"Enter current password",style:{fontSize:"1rem",padding:"0.75rem",width:"100%",paddingRight:"2.5rem"}}),u.jsx("button",{type:"button",onClick:()=>ue(!ve),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#64748b"},children:ve?u.jsx(wl,{size:16}):u.jsx(Tl,{size:16})})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"New Password"}),u.jsxs("div",{style:{position:"relative"},children:[u.jsx("input",{type:ke?"text":"password",value:fe,onChange:T=>{me(T.target.value),je("")},placeholder:"Enter new password (min 8 characters)",style:{fontSize:"1rem",padding:"0.75rem",width:"100%",paddingRight:"2.5rem"}}),u.jsx("button",{type:"button",onClick:()=>Ce(!ke),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#64748b"},children:ke?u.jsx(wl,{size:16}):u.jsx(Tl,{size:16})})]}),u.jsx("div",{style:{marginTop:"0.75rem",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:xe.map((T,b)=>{const S=T.test(fe);return u.jsxs("div",{style:{fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.25rem",color:S?"#16a34a":"#dc2626",transition:"color 0.2s"},children:[u.jsx("span",{style:{fontSize:"0.9rem"},children:S?"":""}),T.label]},b)})})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Confirm New Password"}),u.jsx("input",{type:"password",value:Q,onChange:T=>{re(T.target.value),je("")},placeholder:"Confirm new password",style:{fontSize:"1rem",padding:"0.75rem",width:"100%"}})]}),u.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[u.jsx("button",{onClick:()=>{ee(!1),le(""),me(""),re(""),je("")},className:"btn btn-secondary",style:{flex:1,padding:"0.75rem"},children:"Cancel"}),u.jsx("button",{onClick:P,disabled:Ne||!Y||!fe||!Q,className:"btn btn-primary",style:{flex:1,padding:"0.75rem"},children:Ne?"Changing...":"Change Password"})]})]})]})})]}):u.jsx("div",{className:"profile-container text-center",style:{padding:"3rem"},children:u.jsx("div",{className:"loading",children:"Loading profile..."})})}function pO(){const{userName:r}=dv(),n=Wr(),[i,o]=U.useState(null),[l,c]=U.useState([]),[f,p]=U.useState(!0);U.useEffect(()=>{m()},[r]);const m=async()=>{try{console.log("Fetching profile for userName:",r);const[L,G]=await Promise.all([Fe.get(`user/public-profile-by-name/${encodeURIComponent(r)}`),Fe.get(`user/reviews-by-name/${encodeURIComponent(r)}`)]);o(L.data),c(G.data||[])}catch(L){console.error("Failed to fetch profile:",L),console.error("Error details:",L.response?.data),console.error("Requested userName:",r)}finally{p(!1)}},g=L=>Array.from({length:5},(G,O)=>u.jsx(Id,{size:16,fill:O<L?"#fbbf24":"none",color:O<L?"#fbbf24":"#d1d5db"},O)),y=L=>new Date(L).toLocaleDateString("en-US",{year:"numeric",month:"long"});if(f)return u.jsx("div",{className:"profile-container text-center",style:{padding:"3rem"},children:u.jsx("div",{className:"loading",children:"Loading profile..."})});if(!i)return u.jsxs("div",{className:"profile-container text-center",style:{padding:"3rem"},children:[u.jsx("h3",{children:"Profile not found"}),u.jsx("button",{onClick:()=>n(-1),className:"btn btn-primary",children:"Go Back"})]});const E=l.length>0?l.reduce((L,G)=>L+G.rating,0)/l.length:0;return u.jsxs("div",{className:"profile-container",children:[u.jsxs("div",{style:{marginBottom:"2rem"},children:[u.jsxs("button",{onClick:()=>n(-1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[u.jsx(of,{size:16})," Back"]}),u.jsxs("div",{style:{textAlign:"center"},children:[u.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[i.userType==="Host"?"":""," ",i.name]}),u.jsxs("p",{style:{color:"#64748b",margin:"0"},children:[i.userType,"  Joined ",y(i.createdAt)]})]})]}),u.jsxs("div",{className:"profile-card",children:[u.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[u.jsx(Wn,{src:i.profileImageUrl,alt:i.name,style:{width:"150px",height:"150px",borderRadius:"50%",objectFit:"cover",border:"4px solid var(--border)",marginBottom:"1rem"},fallbackText:"Profile"}),u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[u.jsx(wv,{size:16,color:"#64748b"}),u.jsx("span",{style:{color:"#64748b"},children:i.location})]}),l.length>0&&u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[u.jsx("div",{style:{display:"flex",gap:"2px"},children:g(Math.round(E))}),u.jsx("span",{style:{fontWeight:"600"},children:E.toFixed(1)}),u.jsxs("span",{style:{color:"#64748b"},children:["(",l.length," reviews)"]})]})]}),u.jsxs("div",{style:{marginBottom:"2rem"},children:[u.jsx("h4",{style:{marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:i.userType==="Host"?" About My Hosting":" About Me"}),u.jsx("p",{style:{color:"#475569",lineHeight:"1.6",background:"#f8fafc",padding:"1rem",borderRadius:"0.75rem",borderLeft:"4px solid var(--primary)"},children:i.bio||"No description provided."})]})]}),l.length>0&&u.jsxs("div",{className:"profile-card",style:{marginTop:"2rem"},children:[u.jsxs("h3",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Id,{size:20,color:"#fbbf24"}),"Reviews (",l.length,")"]}),u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:l.map((L,G)=>u.jsxs("div",{style:{background:"#f8fafc",padding:"1rem",borderRadius:"0.75rem",border:"1px solid var(--border)"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx("strong",{children:L.reviewerName}),u.jsx("div",{style:{display:"flex",gap:"2px"},children:g(L.rating)})]}),u.jsx("span",{style:{color:"#64748b",fontSize:"0.875rem"},children:y(L.createdAt)})]}),u.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.5"},children:L.comment})]},G))})]})]})}const mO=()=>{const[r,n]=U.useState({name:"",email:"",message:""}),[i,o]=U.useState(!1),[l,c]=U.useState(!1),[f,p]=U.useState(""),[m,g]=U.useState(null);U.useEffect(()=>{const L=localStorage.getItem("user");if(L){const G=JSON.parse(L);g(G),n(O=>({...O,name:G.name||"",email:G.email||""}))}},[]);const y=async L=>{if(L.preventDefault(),!r.name||!r.email||!r.message){p("Please fill all fields");return}o(!0),p("");try{const G={name:r.name,email:r.email,message:r.message,userType:m?.userType||m?.role||"Guest"};console.log("Sending feedback:",G);const O=await Fe.post("feedback",G);console.log("Feedback response:",O),c(!0),n({...r,message:""}),setTimeout(()=>c(!1),5e3)}catch(G){console.error("Feedback error details:",{message:G.message,response:G.response?.data,status:G.response?.status,statusText:G.response?.statusText});let O="Failed to send feedback. Please try again.";G.response?.status===404?O="Feedback service not found. Please contact support.":G.response?.status===500?O="Server error occurred. Please try again later.":G.response?.data?.message&&(O=G.response.data.message),p(O)}finally{o(!1)}},E=()=>{window.open("https://wa.me/919966888484","_blank","noopener,noreferrer")};return u.jsx("div",{className:"help-page",children:u.jsxs("div",{className:"help-container",children:[u.jsxs("div",{className:"help-header",children:[u.jsx(Sl,{size:48,className:"help-icon",style:{color:"var(--primary)"}}),u.jsxs("h1",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem"},children:[u.jsx(ms,{size:32,style:{color:"var(--primary)"}}),"Help & Support"]}),u.jsx("p",{children:"We're here to help you with any questions or issues you may have."})]}),u.jsxs("div",{className:"help-content",children:[u.jsxs("div",{className:"help-card",children:[u.jsx(Wg,{size:32,className:"card-icon",style:{color:"var(--primary)"}}),u.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(w1,{size:20}),"Email Support"]}),u.jsx("p",{children:"Send us an email and we'll get back to you as soon as possible."}),u.jsxs("a",{href:"mailto:customer-support@festiveguest.com",className:"btn btn-outline",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(Wg,{size:16}),"Customer Support"]})]}),u.jsxs("div",{className:"help-card",children:[u.jsx(ps,{size:32,className:"card-icon",style:{color:"#25D366"}}),u.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx($1,{size:20}),"WhatsApp Support"]}),u.jsx("p",{children:"Chat with our support team directly for quick assistance."}),u.jsxs("button",{onClick:E,className:"btn btn-primary whatsapp-btn",style:{cursor:"pointer",border:"none",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(ps,{size:16}),"Chat on WhatsApp"]})]})]}),u.jsxs("div",{className:"feedback-section",style:{marginTop:"3rem"},children:[u.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[u.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[u.jsx(jo,{size:28,style:{color:"var(--primary)"}}),"Send Feedback"]}),u.jsx("p",{style:{color:"#64748b",margin:"0"},children:"Share your thoughts, suggestions, or report issues directly with us"})]}),u.jsx("div",{style:{display:"flex",justifyContent:"center"},children:u.jsxs("div",{style:{width:"100%",maxWidth:"500px",background:"#f8fafc",padding:"2rem",borderRadius:"var(--radius)",boxShadow:"var(--shadow)",border:"1px solid var(--border)"},children:[f&&u.jsxs("div",{style:{color:"#dc2626",background:"#fee2e2",padding:"0.75rem",borderRadius:"0.5rem",marginBottom:"1rem",fontSize:"0.875rem",border:"1px solid #fecaca"},children:[" ",f]}),l?u.jsxs("div",{style:{color:"var(--success)",textAlign:"center",padding:"1rem"},children:[u.jsx(yd,{size:48,style:{marginBottom:"1rem",color:"#16a34a"}}),u.jsx("h3",{style:{color:"#16a34a",margin:"0 0 0.5rem 0"},children:"Feedback Sent Successfully!"}),u.jsx("p",{style:{margin:"0",color:"#64748b"},children:"Thank you for your feedback. We'll review it and get back to you if needed."})]}):u.jsx("form",{onSubmit:y,children:u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[u.jsx("input",{type:"text",placeholder:"Your Name",value:r.name,onChange:L=>n({...r,name:L.target.value}),disabled:!!m,style:{padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"0.5rem",width:"100%",boxSizing:"border-box",fontSize:"1rem",backgroundColor:m?"#f3f4f6":"white",cursor:m?"not-allowed":"text"}}),u.jsx("input",{type:"email",placeholder:"Your Email",value:r.email,onChange:L=>n({...r,email:L.target.value}),disabled:!!m,style:{padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"0.5rem",width:"100%",boxSizing:"border-box",fontSize:"1rem",backgroundColor:m?"#f3f4f6":"white",cursor:m?"not-allowed":"text"}}),u.jsx("textarea",{placeholder:"Your feedback, suggestions, or issues...",value:r.message,onChange:L=>{n({...r,message:L.target.value}),p("")},rows:5,style:{padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"0.5rem",resize:"vertical",width:"100%",boxSizing:"border-box",fontSize:"1rem"}}),u.jsxs("button",{type:"submit",disabled:i,className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"center",padding:"0.75rem 1.5rem",fontSize:"1rem"},children:[u.jsx(jo,{size:16}),i?"Sending...":"Send Feedback"]})]})})]})})]}),u.jsxs("div",{className:"faq-section",style:{marginTop:"3rem"},children:[u.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[u.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[u.jsx(Sl,{size:28,style:{color:"var(--primary)"}}),"Frequently Asked Questions"]}),u.jsx("p",{style:{color:"#64748b",margin:"0"},children:"Find answers to common questions about FestiveGuest"})]}),u.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[u.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[u.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[u.jsx(yd,{size:20,style:{color:"var(--success)"}}),"How do I become a host?"]}),u.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:'Go to the registration page, select "Become a Host", and fill out your profile details including your location, offerings, and bio. Once registered, you can start connecting with guests looking for festival experiences.'})]}),u.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[u.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[u.jsx(y1,{size:20,style:{color:"var(--warning)"}}),"Is it free to use?"]}),u.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:"Registration is completely free for both guests and hosts. You can browse profiles, chat with other users, and arrange festival experiences at no cost. Individual arrangements between hosts and guests may have their own terms."})]}),u.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[u.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[u.jsx(ms,{size:20,style:{color:"var(--primary)"}}),"How do I find hosts or guests?"]}),u.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:"After logging in, go to your dashboard where you can browse profiles, filter by location, and view detailed information about other users. Use the chat feature to connect and arrange festival experiences."})]}),u.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[u.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[u.jsx(ps,{size:20,style:{color:"var(--primary)"}}),"How does the referral system work?"]}),u.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:"Share your referral code with friends. When they register using your code, both of you get special benefits. Invite 3 friends to unlock Premium features for 1 month including priority support and advanced filters!"})]}),u.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[u.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[u.jsx(yd,{size:20,style:{color:"var(--success)"}}),"Is my information safe?"]}),u.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:"Yes, we take privacy seriously. Your personal information is protected and only shared with users you choose to connect with. We recommend meeting in public places first and taking necessary safety precautions."})]})]})]})]})})},gO=()=>{const[r,n]=U.useState([]),[i,o]=U.useState(!1),[l,c]=U.useState(null),f=[{id:1,title:"Looking for accommodation during Diwali",content:"Need a place to stay for 3 days during Diwali celebration. Prefer vegetarian household.",location:"Mumbai, Maharashtra",visitors:2,days:3,facilities:["WiFi","Parking","Meals"],userName:"Priya Sharma",userType:"Guest",createdAt:new Date("2024-01-15"),status:"Active"},{id:2,title:"Family accommodation needed for Navratri",content:"Looking for a comfortable stay for my family of 4 during Navratri festival. We are vegetarian and prefer a quiet neighborhood.",location:"Ahmedabad, Gujarat",visitors:4,days:5,facilities:["WiFi","Meals","AC"],userName:"Rajesh Patel",userType:"Guest",createdAt:new Date("2024-01-12"),status:"Active"},{id:3,title:"Seeking homestay for Ganesh Chaturthi",content:"Young couple looking for homestay during Ganesh Chaturthi. We love participating in local celebrations!",location:"Pune, Maharashtra",visitors:2,days:4,facilities:["WiFi","Parking"],userName:"Amit & Sneha",userType:"Guest",createdAt:new Date("2024-01-10"),status:"Active"}];U.useEffect(()=>{const g=localStorage.getItem("user");g&&c(JSON.parse(g)),n(f)},[]);const p={WiFi:u.jsx(ax,{size:16}),Parking:u.jsx(m1,{size:16}),Meals:u.jsx(sx,{size:16})},m=g=>{const y={id:Date.now(),...g,userName:l?.name||"Anonymous",userType:l?.userType||"Guest",createdAt:new Date,status:"Active"};n([y,...r]),o(!1)};return u.jsxs("div",{className:"container",style:{padding:"2rem 1rem",maxWidth:"1200px",margin:"0 auto"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[u.jsxs("div",{children:[u.jsx("h1",{style:{margin:"0 0 0.5rem 0",color:"var(--text)"},children:l?.userType==="Host"?"Guest Posts":"My Posts & Requests"}),u.jsx("p",{style:{margin:0,color:"var(--text-light)"},children:l?.userType==="Host"?"Browse accommodation requests from guests":"Create and manage your accommodation requests"})]}),l?.userType==="Guest"&&u.jsxs("button",{onClick:()=>o(!0),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(af,{size:20}),"Create Post"]})]}),u.jsx("div",{className:"posts-grid",style:{display:"grid",gap:"1.5rem"},children:r.map(g=>u.jsxs("div",{className:"post-card",style:{background:"white",borderRadius:"var(--radius)",border:"1px solid var(--border)",padding:"1.5rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[u.jsxs("div",{children:[u.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"var(--text)",fontSize:"1.25rem"},children:g.title}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",color:"var(--text-light)",fontSize:"0.875rem"},children:[u.jsx("span",{children:g.userName}),u.jsx("span",{children:""}),u.jsx("span",{children:g.createdAt.toLocaleDateString()})]})]}),u.jsx("span",{style:{background:g.status==="Active"?"#dcfce7":"#f3f4f6",color:g.status==="Active"?"#16a34a":"#6b7280",padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.75rem",fontWeight:"500"},children:g.status})]}),u.jsx("p",{style:{margin:"0 0 1rem 0",color:"var(--text)",lineHeight:"1.6"},children:g.content}),u.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",marginBottom:"1rem",fontSize:"0.875rem",color:"var(--text-light)"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[u.jsx(wv,{size:16}),g.location]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[u.jsx(ms,{size:16}),g.visitors," visitors"]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[u.jsx(h1,{size:16}),g.days," days"]})]}),g.facilities&&g.facilities.length>0&&u.jsx("div",{style:{marginBottom:"1rem"},children:u.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:g.facilities.map(y=>u.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",background:"#f1f5f9",color:"var(--primary)",padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.75rem",fontWeight:"500"},children:[p[y],y]},y))})}),l?.userType==="Host"&&u.jsx("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:u.jsxs("button",{className:"btn btn-primary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[u.jsx(ps,{size:16}),"Contact Guest"]})})]},g.id))}),i&&u.jsx(yO,{onClose:()=>o(!1),onSubmit:m})]})},yO=({onClose:r,onSubmit:n})=>{const[i,o]=U.useState({title:"",planningDate:"",location:"",facilities:[],visitors:1,days:1,content:""}),l=[{name:"WiFi",icon:""},{name:"Parking",icon:""},{name:"Meals",icon:""},{name:"AC",icon:""},{name:"Kitchen",icon:""},{name:"Laundry",icon:""}],c=p=>{if(p.preventDefault(),!i.title.trim()||!i.location.trim()){alert("Please fill in all required fields");return}n(i)},f=p=>{o(m=>({...m,facilities:m.facilities.includes(p)?m.facilities.filter(g=>g!==p):[...m.facilities,p]}))};return u.jsx("div",{className:"modal-overlay",onClick:r,children:u.jsxs("div",{className:"create-post-modal",onClick:p=>p.stopPropagation(),children:[u.jsxs("div",{className:"modal-header-modern",children:[u.jsxs("div",{className:"modal-title-section",children:[u.jsx("div",{className:"modal-icon",children:""}),u.jsxs("div",{children:[u.jsx("h2",{children:"Create New Post"}),u.jsx("p",{children:"Share your accommodation needs with hosts"})]})]}),u.jsx("button",{onClick:r,className:"modal-close-modern",children:""})]}),u.jsx("div",{className:"modal-body-modern",children:u.jsxs("form",{onSubmit:c,className:"modern-form",children:[u.jsxs("div",{className:"form-group-modern",children:[u.jsxs("label",{className:"modern-label",children:[u.jsx("span",{className:"label-text",children:"Title"}),u.jsx("span",{className:"required-star",children:"*"})]}),u.jsx("input",{type:"text",className:"modern-input",value:i.title,onChange:p=>o(m=>({...m,title:p.target.value})),placeholder:"e.g., Looking for cozy stay during Diwali",required:!0})]}),u.jsxs("div",{className:"form-group-modern",children:[u.jsx("label",{className:"modern-label",children:u.jsx("span",{className:"label-text",children:"Planning Date"})}),u.jsx("input",{type:"date",className:"modern-input",value:i.planningDate,onChange:p=>o(m=>({...m,planningDate:p.target.value}))})]}),u.jsxs("div",{className:"form-group-modern",children:[u.jsxs("label",{className:"modern-label",children:[u.jsx("span",{className:"label-text",children:"Location"}),u.jsx("span",{className:"required-star",children:"*"})]}),u.jsx("input",{type:"text",className:"modern-input",value:i.location,onChange:p=>o(m=>({...m,location:p.target.value})),placeholder:"e.g., Mumbai, Maharashtra",required:!0})]}),u.jsxs("div",{className:"form-group-modern",children:[u.jsx("label",{className:"modern-label",children:u.jsx("span",{className:"label-text",children:"Preferred Facilities"})}),u.jsx("div",{className:"facilities-compact",children:l.map(p=>u.jsxs("button",{type:"button",onClick:()=>f(p.name),className:`facility-btn-compact ${i.facilities.includes(p.name)?"selected":""}`,children:[u.jsx("span",{className:"facility-icon-small",children:p.icon}),u.jsx("span",{children:p.name})]},p.name))})]}),u.jsxs("div",{className:"form-row",children:[u.jsxs("div",{className:"form-group-modern",children:[u.jsx("label",{className:"modern-label",children:u.jsx("span",{className:"label-text",children:"Visitors"})}),u.jsxs("div",{className:"number-input-wrapper",children:[u.jsx("button",{type:"button",className:"number-btn",onClick:()=>o(p=>({...p,visitors:Math.max(1,p.visitors-1)})),children:""}),u.jsx("input",{type:"number",className:"number-input",min:"1",max:"10",value:i.visitors,onChange:p=>o(m=>({...m,visitors:parseInt(p.target.value)||1}))}),u.jsx("button",{type:"button",className:"number-btn",onClick:()=>o(p=>({...p,visitors:Math.min(10,p.visitors+1)})),children:"+"})]})]}),u.jsxs("div",{className:"form-group-modern",children:[u.jsx("label",{className:"modern-label",children:u.jsx("span",{className:"label-text",children:"Days"})}),u.jsxs("div",{className:"number-input-wrapper",children:[u.jsx("button",{type:"button",className:"number-btn",onClick:()=>o(p=>({...p,days:Math.max(1,p.days-1)})),children:""}),u.jsx("input",{type:"number",className:"number-input",min:"1",max:"30",value:i.days,onChange:p=>o(m=>({...m,days:parseInt(p.target.value)||1}))}),u.jsx("button",{type:"button",className:"number-btn",onClick:()=>o(p=>({...p,days:Math.min(30,p.days+1)})),children:"+"})]})]})]}),u.jsxs("div",{className:"form-group-modern",children:[u.jsx("label",{className:"modern-label",children:u.jsx("span",{className:"label-text",children:"Additional Details"})}),u.jsx("textarea",{className:"modern-textarea",value:i.content,onChange:p=>o(m=>({...m,content:p.target.value})),placeholder:"Describe your accommodation needs, preferences, and any special requirements...",rows:4})]}),u.jsxs("div",{className:"form-actions",children:[u.jsx("button",{type:"button",onClick:r,className:"btn-secondary-modern",children:"Cancel"}),u.jsxs("button",{type:"submit",className:"btn-primary-modern",children:[u.jsx("span",{children:"Create Post"}),u.jsx("span",{className:"btn-icon",children:""})]})]})]})})]})})},vO=()=>{const[r,n]=U.useState(!1),[i,o]=U.useState(null),[l,c]=U.useState(!0);U.useEffect(()=>{try{const G=localStorage.getItem("user");if(G){const O=JSON.parse(G);O&&O.token&&O.email&&(O.role||O.userType)&&o(O)}}catch{console.warn("Invalid user data in localStorage"),localStorage.removeItem("user")}},[]);const{unreadCount:f,clearUnreadCount:p}=cx(),m=Zn();U.useEffect(()=>{const G=setTimeout(()=>{c(!1)},3e3),O=()=>{try{const ee=localStorage.getItem("user");if(ee){const Y=JSON.parse(ee);Y&&Y.token&&Y.email&&(Y.role||Y.userType)?o(Y):o(null)}else o(null)}catch{console.warn("Invalid user data in localStorage"),localStorage.removeItem("user"),o(null)}};return window.addEventListener("storage",O),()=>{clearTimeout(G),window.removeEventListener("storage",O)}},[]);const g=G=>{const O=G?.role||G?.userType||G?.partitionKey;return O==="Host"?"/host-dashboard":O==="Guest"?"/guest-dashboard":O==="Admin"?"/admin":"/login"},y=()=>{window.confirm("Are you sure you want to logout?")&&(localStorage.clear(),o(null),n(!1),window.location.href="/")},E=()=>{p(),n(!1)},L=G=>G==="/dashboard"?m.pathname===g(i)||m.pathname==="/browse":m.pathname===G;return l?u.jsx(qR,{}):u.jsxs("div",{className:"app-container",style:{animation:"fadeIn 0.8s ease-out"},children:[u.jsxs("nav",{className:"navbar",children:[u.jsx(In,{to:"/",className:"nav-logo",onClick:()=>n(!1),children:u.jsx(HR,{className:"nav-logo-img",style:{height:"50px"}})}),u.jsx("button",{className:"menu-toggle",onClick:()=>n(!r),"aria-label":"Toggle menu",children:r?u.jsx(lf,{size:28}):u.jsx(I1,{size:28})}),u.jsx("div",{className:`nav-links ${r?"mobile-open":""}`,children:i?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"user-badge",children:u.jsxs("span",{className:"user-badge-text",children:[u.jsx("strong",{children:i.name})," ",u.jsxs("span",{className:"user-badge-role",children:["(",i.role||i.userType||i.partitionKey,")"]})]})}),u.jsxs(In,{to:g(i),className:`nav-item ${L("/dashboard")?"active":""}`,onClick:()=>n(!1),children:[u.jsx(j1,{size:20})," Dashboard"]}),u.jsxs(In,{to:"/chats",className:`nav-item chat-nav-item ${L("/chats")?"active":""}`,onClick:E,children:[" Chats",f>0&&u.jsx("span",{className:`unread-badge ${f>9?"large-count":""}`,children:f>99?"99+":f})]}),u.jsx(In,{to:"/posts",className:`nav-item ${L("/posts")?"active":""}`,onClick:()=>n(!1),children:" Posts"}),u.jsxs(In,{to:"/profile",className:`nav-item ${L("/profile")?"active":""}`,onClick:()=>n(!1),children:[u.jsx(nx,{size:20})," Profile"]}),u.jsxs(In,{to:"/help",className:`nav-item ${L("/help")?"active":""}`,onClick:()=>n(!1),children:[u.jsx(Sl,{size:20})," Help"]}),(i.role==="Admin"||i.userType==="Admin")&&u.jsxs(In,{to:"/admin",className:`nav-item ${L("/admin")?"active":""}`,onClick:()=>n(!1),children:[u.jsx(J1,{size:20})," Admin"]}),u.jsxs("button",{onClick:y,className:"nav-item logout-btn",style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[u.jsx(M1,{size:20})," Logout"]})]}):u.jsxs(u.Fragment,{children:[u.jsxs(In,{to:"/help",className:"nav-item",onClick:()=>n(!1),children:[u.jsx(Sl,{size:20})," Help"]}),u.jsx(In,{to:"/login",className:"nav-item",onClick:()=>n(!1),children:"Login"}),u.jsx(In,{to:"/register",className:"nav-item btn btn-primary",style:{color:"white",padding:"0.5rem 1rem"},onClick:()=>n(!1),children:"Register"})]})})]}),u.jsx("main",{className:"content full-width",children:u.jsxs(EC,{children:[u.jsx(an,{path:"/",element:u.jsx(GR,{user:i})}),u.jsx(an,{path:"/login",element:i?u.jsx(Kn,{to:"/"}):u.jsx(FR,{setUser:o})}),u.jsx(an,{path:"/register",element:i?u.jsx(Kn,{to:"/"}):u.jsx(YR,{setUser:o})}),u.jsx(an,{path:"/browse",element:i?.role==="Guest"||i?.userType==="Guest"?u.jsx(Sy,{user:i}):u.jsx(Kn,{to:"/login"})}),u.jsx(an,{path:"/guest-dashboard",element:i?.role==="Guest"||i?.userType==="Guest"?u.jsx(Sy,{user:i}):u.jsx(Kn,{to:"/login"})}),u.jsx(an,{path:"/host-dashboard",element:i?.role==="Host"||i?.userType==="Host"?u.jsx(jE,{user:i}):u.jsx(Kn,{to:"/login"})}),u.jsx(an,{path:"/chats",element:i?u.jsx(dO,{}):u.jsx(Kn,{to:"/login"})}),u.jsx(an,{path:"/posts",element:i?u.jsx(gO,{}):u.jsx(Kn,{to:"/login"})}),u.jsx(an,{path:"/profile",element:i?u.jsx(hO,{}):u.jsx(Kn,{to:"/login"})}),u.jsx(an,{path:"/profile/:userName",element:u.jsx(pO,{})}),u.jsx(an,{path:"/admin",element:i?.role==="Admin"||i?.userType==="Admin"?u.jsx(fO,{}):u.jsx(Kn,{to:"/login"})}),u.jsx(an,{path:"/chat/:recipientId",element:i?u.jsx(uO,{user:i}):u.jsx(Kn,{to:"/login"})}),u.jsx(an,{path:"/help",element:u.jsx(mO,{})}),u.jsx(an,{path:"/api-test",element:u.jsx(VR,{})})]})})]})};function bO(){return u.jsx(KC,{children:u.jsx(ux,{children:u.jsx(vO,{})})})}AT.createRoot(document.getElementById("root")).render(u.jsx(U.StrictMode,{children:u.jsx(bO,{})}));
