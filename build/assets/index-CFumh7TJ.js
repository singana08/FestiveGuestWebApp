(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function i(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(l){if(l.ep)return;l.ep=!0;const u=i(l);fetch(l.href,u)}})();var Ig=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ol(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var n=r.default;if(typeof n=="function"){var i=function o(){var l=!1;try{l=this instanceof o}catch{}return l?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};i.prototype=n.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(r).forEach(function(o){var l=Object.getOwnPropertyDescriptor(r,o);Object.defineProperty(i,o,l.get?l:{enumerable:!0,get:function(){return r[o]}})}),i}var hd={exports:{}},wo={};var zg;function Ex(){if(zg)return wo;zg=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(o,l,u){var f=null;if(u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),"key"in l){u={};for(var p in l)p!=="key"&&(u[p]=l[p])}else u=l;return l=u.ref,{$$typeof:r,type:o,key:f,ref:l!==void 0?l:null,props:u}}return wo.Fragment=n,wo.jsx=i,wo.jsxs=i,wo}var Lg;function _x(){return Lg||(Lg=1,hd.exports=Ex()),hd.exports}var c=_x(),pd={exports:{}},Fe={};var Bg;function kx(){if(Bg)return Fe;Bg=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),I=Symbol.iterator;function F(C){return C===null||typeof C!="object"?null:(C=I&&C[I]||C["@@iterator"],typeof C=="function"?C:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,B={};function se(C,z,x){this.props=C,this.context=z,this.refs=B,this.updater=x||A}se.prototype.isReactComponent={},se.prototype.setState=function(C,z){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,z,"setState")},se.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function le(){}le.prototype=se.prototype;function me(C,z,x){this.props=C,this.context=z,this.refs=B,this.updater=x||A}var ce=me.prototype=new le;ce.constructor=me,H(ce,se.prototype),ce.isPureReactComponent=!0;var ie=Array.isArray;function fe(){}var ue={H:null,A:null,T:null,S:null},Re=Object.prototype.hasOwnProperty;function Ne(C,z,x){var b=x.ref;return{$$typeof:r,type:C,key:z,ref:b!==void 0?b:null,props:x}}function xe(C,z){return Ne(C.type,z,C.props)}function Se(C){return typeof C=="object"&&C!==null&&C.$$typeof===r}function Pe(C){var z={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(x){return z[x]})}var ke=/\/+/g;function ye(C,z){return typeof C=="object"&&C!==null&&C.key!=null?Pe(""+C.key):z.toString(36)}function ze(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(fe,fe):(C.status="pending",C.then(function(z){C.status==="pending"&&(C.status="fulfilled",C.value=z)},function(z){C.status==="pending"&&(C.status="rejected",C.reason=z)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function q(C,z,x,b,S){var _=typeof C;(_==="undefined"||_==="boolean")&&(C=null);var N=!1;if(C===null)N=!0;else switch(_){case"bigint":case"string":case"number":N=!0;break;case"object":switch(C.$$typeof){case r:case n:N=!0;break;case y:return N=C._init,q(N(C._payload),z,x,b,S)}}if(N)return S=S(C),N=b===""?"."+ye(C,0):b,ie(S)?(x="",N!=null&&(x=N.replace(ke,"$&/")+"/"),q(S,z,x,"",function(j){return j})):S!=null&&(Se(S)&&(S=xe(S,x+(S.key==null||C&&C.key===S.key?"":(""+S.key).replace(ke,"$&/")+"/")+N)),z.push(S)),1;N=0;var w=b===""?".":b+":";if(ie(C))for(var R=0;R<C.length;R++)b=C[R],_=w+ye(b,R),N+=q(b,z,x,_,S);else if(R=F(C),typeof R=="function")for(C=R.call(C),R=0;!(b=C.next()).done;)b=b.value,_=w+ye(b,R++),N+=q(b,z,x,_,S);else if(_==="object"){if(typeof C.then=="function")return q(ze(C),z,x,b,S);throw z=String(C),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return N}function D(C,z,x){if(C==null)return C;var b=[],S=0;return q(C,b,"","",function(_){return z.call(x,_,S++)}),b}function K(C){if(C._status===-1){var z=C._result;z=z(),z.then(function(x){(C._status===0||C._status===-1)&&(C._status=1,C._result=x)},function(x){(C._status===0||C._status===-1)&&(C._status=2,C._result=x)}),C._status===-1&&(C._status=0,C._result=z)}if(C._status===1)return C._result.default;throw C._result}var L=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},W={map:D,forEach:function(C,z,x){D(C,function(){z.apply(this,arguments)},x)},count:function(C){var z=0;return D(C,function(){z++}),z},toArray:function(C){return D(C,function(z){return z})||[]},only:function(C){if(!Se(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return Fe.Activity=E,Fe.Children=W,Fe.Component=se,Fe.Fragment=i,Fe.Profiler=l,Fe.PureComponent=me,Fe.StrictMode=o,Fe.Suspense=m,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ue,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(C){return ue.H.useMemoCache(C)}},Fe.cache=function(C){return function(){return C.apply(null,arguments)}},Fe.cacheSignal=function(){return null},Fe.cloneElement=function(C,z,x){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var b=H({},C.props),S=C.key;if(z!=null)for(_ in z.key!==void 0&&(S=""+z.key),z)!Re.call(z,_)||_==="key"||_==="__self"||_==="__source"||_==="ref"&&z.ref===void 0||(b[_]=z[_]);var _=arguments.length-2;if(_===1)b.children=x;else if(1<_){for(var N=Array(_),w=0;w<_;w++)N[w]=arguments[w+2];b.children=N}return Ne(C.type,S,b)},Fe.createContext=function(C){return C={$$typeof:f,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:u,_context:C},C},Fe.createElement=function(C,z,x){var b,S={},_=null;if(z!=null)for(b in z.key!==void 0&&(_=""+z.key),z)Re.call(z,b)&&b!=="key"&&b!=="__self"&&b!=="__source"&&(S[b]=z[b]);var N=arguments.length-2;if(N===1)S.children=x;else if(1<N){for(var w=Array(N),R=0;R<N;R++)w[R]=arguments[R+2];S.children=w}if(C&&C.defaultProps)for(b in N=C.defaultProps,N)S[b]===void 0&&(S[b]=N[b]);return Ne(C,_,S)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(C){return{$$typeof:p,render:C}},Fe.isValidElement=Se,Fe.lazy=function(C){return{$$typeof:y,_payload:{_status:-1,_result:C},_init:K}},Fe.memo=function(C,z){return{$$typeof:g,type:C,compare:z===void 0?null:z}},Fe.startTransition=function(C){var z=ue.T,x={};ue.T=x;try{var b=C(),S=ue.S;S!==null&&S(x,b),typeof b=="object"&&b!==null&&typeof b.then=="function"&&b.then(fe,L)}catch(_){L(_)}finally{z!==null&&x.types!==null&&(z.types=x.types),ue.T=z}},Fe.unstable_useCacheRefresh=function(){return ue.H.useCacheRefresh()},Fe.use=function(C){return ue.H.use(C)},Fe.useActionState=function(C,z,x){return ue.H.useActionState(C,z,x)},Fe.useCallback=function(C,z){return ue.H.useCallback(C,z)},Fe.useContext=function(C){return ue.H.useContext(C)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(C,z){return ue.H.useDeferredValue(C,z)},Fe.useEffect=function(C,z){return ue.H.useEffect(C,z)},Fe.useEffectEvent=function(C){return ue.H.useEffectEvent(C)},Fe.useId=function(){return ue.H.useId()},Fe.useImperativeHandle=function(C,z,x){return ue.H.useImperativeHandle(C,z,x)},Fe.useInsertionEffect=function(C,z){return ue.H.useInsertionEffect(C,z)},Fe.useLayoutEffect=function(C,z){return ue.H.useLayoutEffect(C,z)},Fe.useMemo=function(C,z){return ue.H.useMemo(C,z)},Fe.useOptimistic=function(C,z){return ue.H.useOptimistic(C,z)},Fe.useReducer=function(C,z,x){return ue.H.useReducer(C,z,x)},Fe.useRef=function(C){return ue.H.useRef(C)},Fe.useState=function(C){return ue.H.useState(C)},Fe.useSyncExternalStore=function(C,z,x){return ue.H.useSyncExternalStore(C,z,x)},Fe.useTransition=function(){return ue.H.useTransition()},Fe.version="19.2.3",Fe}var Hg;function tf(){return Hg||(Hg=1,pd.exports=kx()),pd.exports}var O=tf(),md={exports:{}},xo={},gd={exports:{}},yd={};var qg;function jx(){return qg||(qg=1,(function(r){function n(q,D){var K=q.length;q.push(D);e:for(;0<K;){var L=K-1>>>1,W=q[L];if(0<l(W,D))q[L]=D,q[K]=W,K=L;else break e}}function i(q){return q.length===0?null:q[0]}function o(q){if(q.length===0)return null;var D=q[0],K=q.pop();if(K!==D){q[0]=K;e:for(var L=0,W=q.length,C=W>>>1;L<C;){var z=2*(L+1)-1,x=q[z],b=z+1,S=q[b];if(0>l(x,K))b<W&&0>l(S,x)?(q[L]=S,q[b]=K,L=b):(q[L]=x,q[z]=K,L=z);else if(b<W&&0>l(S,K))q[L]=S,q[b]=K,L=b;else break e}}return D}function l(q,D){var K=q.sortIndex-D.sortIndex;return K!==0?K:q.id-D.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();r.unstable_now=function(){return f.now()-p}}var m=[],g=[],y=1,E=null,I=3,F=!1,A=!1,H=!1,B=!1,se=typeof setTimeout=="function"?setTimeout:null,le=typeof clearTimeout=="function"?clearTimeout:null,me=typeof setImmediate<"u"?setImmediate:null;function ce(q){for(var D=i(g);D!==null;){if(D.callback===null)o(g);else if(D.startTime<=q)o(g),D.sortIndex=D.expirationTime,n(m,D);else break;D=i(g)}}function ie(q){if(H=!1,ce(q),!A)if(i(m)!==null)A=!0,fe||(fe=!0,Pe());else{var D=i(g);D!==null&&ze(ie,D.startTime-q)}}var fe=!1,ue=-1,Re=5,Ne=-1;function xe(){return B?!0:!(r.unstable_now()-Ne<Re)}function Se(){if(B=!1,fe){var q=r.unstable_now();Ne=q;var D=!0;try{e:{A=!1,H&&(H=!1,le(ue),ue=-1),F=!0;var K=I;try{t:{for(ce(q),E=i(m);E!==null&&!(E.expirationTime>q&&xe());){var L=E.callback;if(typeof L=="function"){E.callback=null,I=E.priorityLevel;var W=L(E.expirationTime<=q);if(q=r.unstable_now(),typeof W=="function"){E.callback=W,ce(q),D=!0;break t}E===i(m)&&o(m),ce(q)}else o(m);E=i(m)}if(E!==null)D=!0;else{var C=i(g);C!==null&&ze(ie,C.startTime-q),D=!1}}break e}finally{E=null,I=K,F=!1}D=void 0}}finally{D?Pe():fe=!1}}}var Pe;if(typeof me=="function")Pe=function(){me(Se)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,ye=ke.port2;ke.port1.onmessage=Se,Pe=function(){ye.postMessage(null)}}else Pe=function(){se(Se,0)};function ze(q,D){ue=se(function(){q(r.unstable_now())},D)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(q){q.callback=null},r.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Re=0<q?Math.floor(1e3/q):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_next=function(q){switch(I){case 1:case 2:case 3:var D=3;break;default:D=I}var K=I;I=D;try{return q()}finally{I=K}},r.unstable_requestPaint=function(){B=!0},r.unstable_runWithPriority=function(q,D){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var K=I;I=q;try{return D()}finally{I=K}},r.unstable_scheduleCallback=function(q,D,K){var L=r.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?L+K:L):K=L,q){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=K+W,q={id:y++,callback:D,priorityLevel:q,startTime:K,expirationTime:W,sortIndex:-1},K>L?(q.sortIndex=K,n(g,q),i(m)===null&&q===i(g)&&(H?(le(ue),ue=-1):H=!0,ze(ie,K-L))):(q.sortIndex=W,n(m,q),A||F||(A=!0,fe||(fe=!0,Pe()))),q},r.unstable_shouldYield=xe,r.unstable_wrapCallback=function(q){var D=I;return function(){var K=I;I=D;try{return q.apply(this,arguments)}finally{I=K}}}})(yd)),yd}var $g;function Nx(){return $g||($g=1,gd.exports=jx()),gd.exports}var vd={exports:{}},Jt={};var Vg;function Ax(){if(Vg)return Jt;Vg=1;var r=tf();function n(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(n(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function u(m,g,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:E==null?null:""+E,children:m,containerInfo:g,implementation:y}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Jt.createPortal=function(m,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(n(299));return u(m,g,null,y)},Jt.flushSync=function(m){var g=f.T,y=o.p;try{if(f.T=null,o.p=2,m)return m()}finally{f.T=g,o.p=y,o.d.f()}},Jt.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,o.d.C(m,g))},Jt.prefetchDNS=function(m){typeof m=="string"&&o.d.D(m)},Jt.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var y=g.as,E=p(y,g.crossOrigin),I=typeof g.integrity=="string"?g.integrity:void 0,F=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?o.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:I,fetchPriority:F}):y==="script"&&o.d.X(m,{crossOrigin:E,integrity:I,fetchPriority:F,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Jt.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=p(g.as,g.crossOrigin);o.d.M(m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&o.d.M(m)},Jt.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,E=p(y,g.crossOrigin);o.d.L(m,y,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Jt.preloadModule=function(m,g){if(typeof m=="string")if(g){var y=p(g.as,g.crossOrigin);o.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else o.d.m(m)},Jt.requestFormReset=function(m){o.d.r(m)},Jt.unstable_batchedUpdates=function(m,g){return m(g)},Jt.useFormState=function(m,g,y){return f.H.useFormState(m,g,y)},Jt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Jt.version="19.2.3",Jt}var Gg;function Ox(){if(Gg)return vd.exports;Gg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),vd.exports=Ax(),vd.exports}var Fg;function Mx(){if(Fg)return xo;Fg=1;var r=Nx(),n=tf(),i=Ox();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(u(e)!==e)throw Error(o(188))}function g(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(o(188));return t!==e?null:e}for(var s=e,a=t;;){var d=s.return;if(d===null)break;var h=d.alternate;if(h===null){if(a=d.return,a!==null){s=a;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===s)return m(d),e;if(h===a)return m(d),t;h=h.sibling}throw Error(o(188))}if(s.return!==a.return)s=d,a=h;else{for(var v=!1,k=d.child;k;){if(k===s){v=!0,s=d,a=h;break}if(k===a){v=!0,a=d,s=h;break}k=k.sibling}if(!v){for(k=h.child;k;){if(k===s){v=!0,s=h,a=d;break}if(k===a){v=!0,a=h,s=d;break}k=k.sibling}if(!v)throw Error(o(189))}}if(s.alternate!==a)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var E=Object.assign,I=Symbol.for("react.element"),F=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),B=Symbol.for("react.strict_mode"),se=Symbol.for("react.profiler"),le=Symbol.for("react.consumer"),me=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),Ne=Symbol.for("react.activity"),xe=Symbol.for("react.memo_cache_sentinel"),Se=Symbol.iterator;function Pe(e){return e===null||typeof e!="object"?null:(e=Se&&e[Se]||e["@@iterator"],typeof e=="function"?e:null)}var ke=Symbol.for("react.client.reference");function ye(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ke?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case H:return"Fragment";case se:return"Profiler";case B:return"StrictMode";case ie:return"Suspense";case fe:return"SuspenseList";case Ne:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case A:return"Portal";case me:return e.displayName||"Context";case le:return(e._context.displayName||"Context")+".Consumer";case ce:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ue:return t=e.displayName||null,t!==null?t:ye(e.type)||"Memo";case Re:t=e._payload,e=e._init;try{return ye(e(t))}catch{}}return null}var ze=Array.isArray,q=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},L=[],W=-1;function C(e){return{current:e}}function z(e){0>W||(e.current=L[W],L[W]=null,W--)}function x(e,t){W++,L[W]=e.current,e.current=t}var b=C(null),S=C(null),_=C(null),N=C(null);function w(e,t){switch(x(_,t),x(S,e),x(b,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?og(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=og(t),e=ag(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(b),x(b,e)}function R(){z(b),z(S),z(_)}function j(e){e.memoizedState!==null&&x(N,e);var t=b.current,s=ag(t,e.type);t!==s&&(x(S,e),x(b,s))}function G(e){S.current===e&&(z(b),z(S)),N.current===e&&(z(N),yo._currentValue=K)}var Q,Y;function $(e){if(Q===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Q=t&&t[1]||"",Y=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Q+e+Y}var V=!1;function re(e,t){if(!e||V)return"";V=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var Ee=function(){throw Error()};if(Object.defineProperty(Ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ee,[])}catch(be){var ge=be}Reflect.construct(e,[],Ee)}else{try{Ee.call()}catch(be){ge=be}e.call(Ee.prototype)}}else{try{throw Error()}catch(be){ge=be}(Ee=e())&&typeof Ee.catch=="function"&&Ee.catch(function(){})}}catch(be){if(be&&ge&&typeof be.stack=="string")return[be.stack,ge.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=a.DetermineComponentFrameRoot(),v=h[0],k=h[1];if(v&&k){var X=v.split(`
`),pe=k.split(`
`);for(d=a=0;a<X.length&&!X[a].includes("DetermineComponentFrameRoot");)a++;for(;d<pe.length&&!pe[d].includes("DetermineComponentFrameRoot");)d++;if(a===X.length||d===pe.length)for(a=X.length-1,d=pe.length-1;1<=a&&0<=d&&X[a]!==pe[d];)d--;for(;1<=a&&0<=d;a--,d--)if(X[a]!==pe[d]){if(a!==1||d!==1)do if(a--,d--,0>d||X[a]!==pe[d]){var we=`
`+X[a].replace(" at new "," at ");return e.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",e.displayName)),we}while(1<=a&&0<=d);break}}}finally{V=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?$(s):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return $(e.type);case 16:return $("Lazy");case 13:return e.child!==t&&t!==null?$("Suspense Fallback"):$("Suspense");case 19:return $("SuspenseList");case 0:case 15:return re(e.type,!1);case 11:return re(e.type.render,!1);case 1:return re(e.type,!0);case 31:return $("Activity");default:return""}}function Z(e){try{var t="",s=null;do t+=te(e,s),s=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var oe=Object.prototype.hasOwnProperty,_e=r.unstable_scheduleCallback,Ae=r.unstable_cancelCallback,je=r.unstable_shouldYield,Me=r.unstable_requestPaint,qe=r.unstable_now,We=r.unstable_getCurrentPriorityLevel,U=r.unstable_ImmediatePriority,T=r.unstable_UserBlockingPriority,P=r.unstable_NormalPriority,ne=r.unstable_LowPriority,M=r.unstable_IdlePriority,J=r.log,he=r.unstable_setDisableYieldValue,Ie=null,Oe=null;function Ue(e){if(typeof J=="function"&&he(e),Oe&&typeof Oe.setStrictMode=="function")try{Oe.setStrictMode(Ie,e)}catch{}}var Le=Math.clz32?Math.clz32:kt,Qe=Math.log,ut=Math.LN2;function kt(e){return e>>>=0,e===0?32:31-(Qe(e)/ut|0)|0}var Xt=256,ji=262144,ei=4194304;function ti(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Fo(e,t,s){var a=e.pendingLanes;if(a===0)return 0;var d=0,h=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var k=a&134217727;return k!==0?(a=k&~h,a!==0?d=ti(a):(v&=k,v!==0?d=ti(v):s||(s=k&~e,s!==0&&(d=ti(s))))):(k=a&~h,k!==0?d=ti(k):v!==0?d=ti(v):s||(s=a&~e,s!==0&&(d=ti(s)))),d===0?0:t!==0&&t!==d&&(t&h)===0&&(h=d&-d,s=t&-t,h>=s||h===32&&(s&4194048)!==0)?t:d}function js(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function hS(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hf(){var e=ei;return ei<<=1,(ei&62914560)===0&&(ei=4194304),e}function tc(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Ns(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function pS(e,t,s,a,d,h){var v=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var k=e.entanglements,X=e.expirationTimes,pe=e.hiddenUpdates;for(s=v&~s;0<s;){var we=31-Le(s),Ee=1<<we;k[we]=0,X[we]=-1;var ge=pe[we];if(ge!==null)for(pe[we]=null,we=0;we<ge.length;we++){var be=ge[we];be!==null&&(be.lane&=-536870913)}s&=~Ee}a!==0&&qf(e,a,0),h!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=h&~(v&~t))}function qf(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-Le(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|s&261930}function $f(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var a=31-Le(s),d=1<<a;d&t|e[a]&t&&(e[a]|=t),s&=~d}}function Vf(e,t){var s=t&-t;return s=(s&42)!==0?1:nc(s),(s&(e.suspendedLanes|t))!==0?0:s}function nc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function rc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Gf(){var e=D.p;return e!==0?e:(e=window.event,e===void 0?32:Ng(e.type))}function Ff(e,t){var s=D.p;try{return D.p=e,t()}finally{D.p=s}}var wr=Math.random().toString(36).slice(2),Ht="__reactFiber$"+wr,ln="__reactProps$"+wr,Ni="__reactContainer$"+wr,ic="__reactEvents$"+wr,mS="__reactListeners$"+wr,gS="__reactHandles$"+wr,Yf="__reactResources$"+wr,As="__reactMarker$"+wr;function sc(e){delete e[Ht],delete e[ln],delete e[ic],delete e[mS],delete e[gS]}function Ai(e){var t=e[Ht];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Ni]||s[Ht]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=pg(e);e!==null;){if(s=e[Ht])return s;e=pg(e)}return t}e=s,s=e.parentNode}return null}function Oi(e){if(e=e[Ht]||e[Ni]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Os(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function Mi(e){var t=e[Yf];return t||(t=e[Yf]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function zt(e){e[As]=!0}var Xf=new Set,Jf={};function ni(e,t){Ui(e,t),Ui(e+"Capture",t)}function Ui(e,t){for(Jf[e]=t,e=0;e<t.length;e++)Xf.add(t[e])}var yS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Kf={},Wf={};function vS(e){return oe.call(Wf,e)?!0:oe.call(Kf,e)?!1:yS.test(e)?Wf[e]=!0:(Kf[e]=!0,!1)}function Yo(e,t,s){if(vS(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function Xo(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function Zn(e,t,s,a){if(a===null)e.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+a)}}function _n(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Qf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function bS(e,t,s){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,h=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(v){s=""+v,h.call(this,v)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return s},setValue:function(v){s=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function oc(e){if(!e._valueTracker){var t=Qf(e)?"checked":"value";e._valueTracker=bS(e,t,""+e[t])}}function Zf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),a="";return e&&(a=Qf(e)?e.checked?"true":"false":e.value),e=a,e!==s?(t.setValue(e),!0):!1}function Jo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var SS=/[\n"\\]/g;function kn(e){return e.replace(SS,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function ac(e,t,s,a,d,h,v,k){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),t!=null?v==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+_n(t)):e.value!==""+_n(t)&&(e.value=""+_n(t)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),t!=null?lc(e,v,_n(t)):s!=null?lc(e,v,_n(s)):a!=null&&e.removeAttribute("value"),d==null&&h!=null&&(e.defaultChecked=!!h),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?e.name=""+_n(k):e.removeAttribute("name")}function eh(e,t,s,a,d,h,v,k){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||s!=null){if(!(h!=="submit"&&h!=="reset"||t!=null)){oc(e);return}s=s!=null?""+_n(s):"",t=t!=null?""+_n(t):s,k||t===e.value||(e.value=t),e.defaultValue=t}a=a??d,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=k?e.checked:!!a,e.defaultChecked=!!a,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),oc(e)}function lc(e,t,s){t==="number"&&Jo(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Di(e,t,s,a){if(e=e.options,t){t={};for(var d=0;d<s.length;d++)t["$"+s[d]]=!0;for(s=0;s<e.length;s++)d=t.hasOwnProperty("$"+e[s].value),e[s].selected!==d&&(e[s].selected=d),d&&a&&(e[s].defaultSelected=!0)}else{for(s=""+_n(s),t=null,d=0;d<e.length;d++){if(e[d].value===s){e[d].selected=!0,a&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function th(e,t,s){if(t!=null&&(t=""+_n(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+_n(s):""}function nh(e,t,s,a){if(t==null){if(a!=null){if(s!=null)throw Error(o(92));if(ze(a)){if(1<a.length)throw Error(o(93));a=a[0]}s=a}s==null&&(s=""),t=s}s=_n(t),e.defaultValue=s,a=e.textContent,a===s&&a!==""&&a!==null&&(e.value=a),oc(e)}function Pi(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var wS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function rh(e,t,s){var a=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,s):typeof s!="number"||s===0||wS.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function ih(e,t,s){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,s!=null){for(var a in s)!s.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var d in t)a=t[d],t.hasOwnProperty(d)&&s[d]!==a&&rh(e,d,a)}else for(var h in t)t.hasOwnProperty(h)&&rh(e,h,t[h])}function cc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),TS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ko(e){return TS.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function er(){}var uc=null;function dc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ii=null,zi=null;function sh(e){var t=Oi(e);if(t&&(e=t.stateNode)){var s=e[ln]||null;e:switch(e=t.stateNode,t.type){case"input":if(ac(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+kn(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var a=s[t];if(a!==e&&a.form===e.form){var d=a[ln]||null;if(!d)throw Error(o(90));ac(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(t=0;t<s.length;t++)a=s[t],a.form===e.form&&Zf(a)}break e;case"textarea":th(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&Di(e,!!s.multiple,t,!1)}}}var fc=!1;function oh(e,t,s){if(fc)return e(t,s);fc=!0;try{var a=e(t);return a}finally{if(fc=!1,(Ii!==null||zi!==null)&&(Ia(),Ii&&(t=Ii,e=zi,zi=Ii=null,sh(t),e)))for(t=0;t<e.length;t++)sh(e[t])}}function Ms(e,t){var s=e.stateNode;if(s===null)return null;var a=s[ln]||null;if(a===null)return null;s=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(o(231,t,typeof s));return s}var tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hc=!1;if(tr)try{var Us={};Object.defineProperty(Us,"passive",{get:function(){hc=!0}}),window.addEventListener("test",Us,Us),window.removeEventListener("test",Us,Us)}catch{hc=!1}var xr=null,pc=null,Wo=null;function ah(){if(Wo)return Wo;var e,t=pc,s=t.length,a,d="value"in xr?xr.value:xr.textContent,h=d.length;for(e=0;e<s&&t[e]===d[e];e++);var v=s-e;for(a=1;a<=v&&t[s-a]===d[h-a];a++);return Wo=d.slice(e,1<a?1-a:void 0)}function Qo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zo(){return!0}function lh(){return!1}function cn(e){function t(s,a,d,h,v){this._reactName=s,this._targetInst=d,this.type=a,this.nativeEvent=h,this.target=v,this.currentTarget=null;for(var k in e)e.hasOwnProperty(k)&&(s=e[k],this[k]=s?s(h):h[k]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Zo:lh,this.isPropagationStopped=lh,this}return E(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Zo)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Zo)},persist:function(){},isPersistent:Zo}),t}var ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ea=cn(ri),Ds=E({},ri,{view:0,detail:0}),CS=cn(Ds),mc,gc,Ps,ta=E({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ps&&(Ps&&e.type==="mousemove"?(mc=e.screenX-Ps.screenX,gc=e.screenY-Ps.screenY):gc=mc=0,Ps=e),mc)},movementY:function(e){return"movementY"in e?e.movementY:gc}}),ch=cn(ta),RS=E({},ta,{dataTransfer:0}),ES=cn(RS),_S=E({},Ds,{relatedTarget:0}),yc=cn(_S),kS=E({},ri,{animationName:0,elapsedTime:0,pseudoElement:0}),jS=cn(kS),NS=E({},ri,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),AS=cn(NS),OS=E({},ri,{data:0}),uh=cn(OS),MS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},US={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=DS[e])?!!t[e]:!1}function vc(){return PS}var IS=E({},Ds,{key:function(e){if(e.key){var t=MS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Qo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?US[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vc,charCode:function(e){return e.type==="keypress"?Qo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zS=cn(IS),LS=E({},ta,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dh=cn(LS),BS=E({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vc}),HS=cn(BS),qS=E({},ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),$S=cn(qS),VS=E({},ta,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),GS=cn(VS),FS=E({},ri,{newState:0,oldState:0}),YS=cn(FS),XS=[9,13,27,32],bc=tr&&"CompositionEvent"in window,Is=null;tr&&"documentMode"in document&&(Is=document.documentMode);var JS=tr&&"TextEvent"in window&&!Is,fh=tr&&(!bc||Is&&8<Is&&11>=Is),hh=" ",ph=!1;function mh(e,t){switch(e){case"keyup":return XS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Li=!1;function KS(e,t){switch(e){case"compositionend":return gh(t);case"keypress":return t.which!==32?null:(ph=!0,hh);case"textInput":return e=t.data,e===hh&&ph?null:e;default:return null}}function WS(e,t){if(Li)return e==="compositionend"||!bc&&mh(e,t)?(e=ah(),Wo=pc=xr=null,Li=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return fh&&t.locale!=="ko"?null:t.data;default:return null}}var QS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!QS[e.type]:t==="textarea"}function vh(e,t,s,a){Ii?zi?zi.push(a):zi=[a]:Ii=a,t=Va(t,"onChange"),0<t.length&&(s=new ea("onChange","change",null,s,a),e.push({event:s,listeners:t}))}var zs=null,Ls=null;function ZS(e){eg(e,0)}function na(e){var t=Os(e);if(Zf(t))return e}function bh(e,t){if(e==="change")return t}var Sh=!1;if(tr){var Sc;if(tr){var wc="oninput"in document;if(!wc){var wh=document.createElement("div");wh.setAttribute("oninput","return;"),wc=typeof wh.oninput=="function"}Sc=wc}else Sc=!1;Sh=Sc&&(!document.documentMode||9<document.documentMode)}function xh(){zs&&(zs.detachEvent("onpropertychange",Th),Ls=zs=null)}function Th(e){if(e.propertyName==="value"&&na(Ls)){var t=[];vh(t,Ls,e,dc(e)),oh(ZS,t)}}function ew(e,t,s){e==="focusin"?(xh(),zs=t,Ls=s,zs.attachEvent("onpropertychange",Th)):e==="focusout"&&xh()}function tw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return na(Ls)}function nw(e,t){if(e==="click")return na(t)}function rw(e,t){if(e==="input"||e==="change")return na(t)}function iw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vn=typeof Object.is=="function"?Object.is:iw;function Bs(e,t){if(vn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var d=s[a];if(!oe.call(t,d)||!vn(e[d],t[d]))return!1}return!0}function Ch(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Rh(e,t){var s=Ch(e);e=0;for(var a;s;){if(s.nodeType===3){if(a=e+s.textContent.length,e<=t&&a>=t)return{node:s,offset:t-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Ch(s)}}function Eh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Eh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _h(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Jo(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Jo(e.document)}return t}function xc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var sw=tr&&"documentMode"in document&&11>=document.documentMode,Bi=null,Tc=null,Hs=null,Cc=!1;function kh(e,t,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Cc||Bi==null||Bi!==Jo(a)||(a=Bi,"selectionStart"in a&&xc(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Hs&&Bs(Hs,a)||(Hs=a,a=Va(Tc,"onSelect"),0<a.length&&(t=new ea("onSelect","select",null,t,s),e.push({event:t,listeners:a}),t.target=Bi)))}function ii(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Hi={animationend:ii("Animation","AnimationEnd"),animationiteration:ii("Animation","AnimationIteration"),animationstart:ii("Animation","AnimationStart"),transitionrun:ii("Transition","TransitionRun"),transitionstart:ii("Transition","TransitionStart"),transitioncancel:ii("Transition","TransitionCancel"),transitionend:ii("Transition","TransitionEnd")},Rc={},jh={};tr&&(jh=document.createElement("div").style,"AnimationEvent"in window||(delete Hi.animationend.animation,delete Hi.animationiteration.animation,delete Hi.animationstart.animation),"TransitionEvent"in window||delete Hi.transitionend.transition);function si(e){if(Rc[e])return Rc[e];if(!Hi[e])return e;var t=Hi[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in jh)return Rc[e]=t[s];return e}var Nh=si("animationend"),Ah=si("animationiteration"),Oh=si("animationstart"),ow=si("transitionrun"),aw=si("transitionstart"),lw=si("transitioncancel"),Mh=si("transitionend"),Uh=new Map,Ec="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ec.push("scrollEnd");function Ln(e,t){Uh.set(e,t),ni(t,[e])}var ra=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},jn=[],qi=0,_c=0;function ia(){for(var e=qi,t=_c=qi=0;t<e;){var s=jn[t];jn[t++]=null;var a=jn[t];jn[t++]=null;var d=jn[t];jn[t++]=null;var h=jn[t];if(jn[t++]=null,a!==null&&d!==null){var v=a.pending;v===null?d.next=d:(d.next=v.next,v.next=d),a.pending=d}h!==0&&Dh(s,d,h)}}function sa(e,t,s,a){jn[qi++]=e,jn[qi++]=t,jn[qi++]=s,jn[qi++]=a,_c|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function kc(e,t,s,a){return sa(e,t,s,a),oa(e)}function oi(e,t){return sa(e,null,null,t),oa(e)}function Dh(e,t,s){e.lanes|=s;var a=e.alternate;a!==null&&(a.lanes|=s);for(var d=!1,h=e.return;h!==null;)h.childLanes|=s,a=h.alternate,a!==null&&(a.childLanes|=s),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(d=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,d&&t!==null&&(d=31-Le(s),e=h.hiddenUpdates,a=e[d],a===null?e[d]=[t]:a.push(t),t.lane=s|536870912),h):null}function oa(e){if(50<co)throw co=0,Iu=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var $i={};function cw(e,t,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(e,t,s,a){return new cw(e,t,s,a)}function jc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function nr(e,t){var s=e.alternate;return s===null?(s=bn(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Ph(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function aa(e,t,s,a,d,h){var v=0;if(a=e,typeof e=="function")jc(e)&&(v=1);else if(typeof e=="string")v=px(e,s,b.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Ne:return e=bn(31,s,t,d),e.elementType=Ne,e.lanes=h,e;case H:return ai(s.children,d,h,t);case B:v=8,d|=24;break;case se:return e=bn(12,s,t,d|2),e.elementType=se,e.lanes=h,e;case ie:return e=bn(13,s,t,d),e.elementType=ie,e.lanes=h,e;case fe:return e=bn(19,s,t,d),e.elementType=fe,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case me:v=10;break e;case le:v=9;break e;case ce:v=11;break e;case ue:v=14;break e;case Re:v=16,a=null;break e}v=29,s=Error(o(130,e===null?"null":typeof e,"")),a=null}return t=bn(v,s,t,d),t.elementType=e,t.type=a,t.lanes=h,t}function ai(e,t,s,a){return e=bn(7,e,a,t),e.lanes=s,e}function Nc(e,t,s){return e=bn(6,e,null,t),e.lanes=s,e}function Ih(e){var t=bn(18,null,null,0);return t.stateNode=e,t}function Ac(e,t,s){return t=bn(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var zh=new WeakMap;function Nn(e,t){if(typeof e=="object"&&e!==null){var s=zh.get(e);return s!==void 0?s:(t={value:e,source:t,stack:Z(t)},zh.set(e,t),t)}return{value:e,source:t,stack:Z(t)}}var Vi=[],Gi=0,la=null,qs=0,An=[],On=0,Tr=null,Gn=1,Fn="";function rr(e,t){Vi[Gi++]=qs,Vi[Gi++]=la,la=e,qs=t}function Lh(e,t,s){An[On++]=Gn,An[On++]=Fn,An[On++]=Tr,Tr=e;var a=Gn;e=Fn;var d=32-Le(a)-1;a&=~(1<<d),s+=1;var h=32-Le(t)+d;if(30<h){var v=d-d%5;h=(a&(1<<v)-1).toString(32),a>>=v,d-=v,Gn=1<<32-Le(t)+d|s<<d|a,Fn=h+e}else Gn=1<<h|s<<d|a,Fn=e}function Oc(e){e.return!==null&&(rr(e,1),Lh(e,1,0))}function Mc(e){for(;e===la;)la=Vi[--Gi],Vi[Gi]=null,qs=Vi[--Gi],Vi[Gi]=null;for(;e===Tr;)Tr=An[--On],An[On]=null,Fn=An[--On],An[On]=null,Gn=An[--On],An[On]=null}function Bh(e,t){An[On++]=Gn,An[On++]=Fn,An[On++]=Tr,Gn=t.id,Fn=t.overflow,Tr=e}var qt=null,vt=null,st=!1,Cr=null,Mn=!1,Uc=Error(o(519));function Rr(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $s(Nn(t,e)),Uc}function Hh(e){var t=e.stateNode,s=e.type,a=e.memoizedProps;switch(t[Ht]=e,t[ln]=a,s){case"dialog":et("cancel",t),et("close",t);break;case"iframe":case"object":case"embed":et("load",t);break;case"video":case"audio":for(s=0;s<fo.length;s++)et(fo[s],t);break;case"source":et("error",t);break;case"img":case"image":case"link":et("error",t),et("load",t);break;case"details":et("toggle",t);break;case"input":et("invalid",t),eh(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":et("invalid",t);break;case"textarea":et("invalid",t),nh(t,a.value,a.defaultValue,a.children)}s=a.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||a.suppressHydrationWarning===!0||ig(t.textContent,s)?(a.popover!=null&&(et("beforetoggle",t),et("toggle",t)),a.onScroll!=null&&et("scroll",t),a.onScrollEnd!=null&&et("scrollend",t),a.onClick!=null&&(t.onclick=er),t=!0):t=!1,t||Rr(e,!0)}function qh(e){for(qt=e.return;qt;)switch(qt.tag){case 5:case 31:case 13:Mn=!1;return;case 27:case 3:Mn=!0;return;default:qt=qt.return}}function Fi(e){if(e!==qt)return!1;if(!st)return qh(e),st=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Qu(e.type,e.memoizedProps)),s=!s),s&&vt&&Rr(e),qh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));vt=hg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));vt=hg(e)}else t===27?(t=vt,Lr(e.type)?(e=rd,rd=null,vt=e):vt=t):vt=qt?Dn(e.stateNode.nextSibling):null;return!0}function li(){vt=qt=null,st=!1}function Dc(){var e=Cr;return e!==null&&(hn===null?hn=e:hn.push.apply(hn,e),Cr=null),e}function $s(e){Cr===null?Cr=[e]:Cr.push(e)}var Pc=C(null),ci=null,ir=null;function Er(e,t,s){x(Pc,t._currentValue),t._currentValue=s}function sr(e){e._currentValue=Pc.current,z(Pc)}function Ic(e,t,s){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===s)break;e=e.return}}function zc(e,t,s,a){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var h=d.dependencies;if(h!==null){var v=d.child;h=h.firstContext;e:for(;h!==null;){var k=h;h=d;for(var X=0;X<t.length;X++)if(k.context===t[X]){h.lanes|=s,k=h.alternate,k!==null&&(k.lanes|=s),Ic(h.return,s,e),a||(v=null);break e}h=k.next}}else if(d.tag===18){if(v=d.return,v===null)throw Error(o(341));v.lanes|=s,h=v.alternate,h!==null&&(h.lanes|=s),Ic(v,s,e),v=null}else v=d.child;if(v!==null)v.return=d;else for(v=d;v!==null;){if(v===e){v=null;break}if(d=v.sibling,d!==null){d.return=v.return,v=d;break}v=v.return}d=v}}function Yi(e,t,s,a){e=null;for(var d=t,h=!1;d!==null;){if(!h){if((d.flags&524288)!==0)h=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var v=d.alternate;if(v===null)throw Error(o(387));if(v=v.memoizedProps,v!==null){var k=d.type;vn(d.pendingProps.value,v.value)||(e!==null?e.push(k):e=[k])}}else if(d===N.current){if(v=d.alternate,v===null)throw Error(o(387));v.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(yo):e=[yo])}d=d.return}e!==null&&zc(t,e,s,a),t.flags|=262144}function ca(e){for(e=e.firstContext;e!==null;){if(!vn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ui(e){ci=e,ir=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function $t(e){return $h(ci,e)}function ua(e,t){return ci===null&&ui(e),$h(e,t)}function $h(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},ir===null){if(e===null)throw Error(o(308));ir=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ir=ir.next=t;return s}var uw=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},dw=r.unstable_scheduleCallback,fw=r.unstable_NormalPriority,jt={$$typeof:me,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Lc(){return{controller:new uw,data:new Map,refCount:0}}function Vs(e){e.refCount--,e.refCount===0&&dw(fw,function(){e.controller.abort()})}var Gs=null,Bc=0,Xi=0,Ji=null;function hw(e,t){if(Gs===null){var s=Gs=[];Bc=0,Xi=$u(),Ji={status:"pending",value:void 0,then:function(a){s.push(a)}}}return Bc++,t.then(Vh,Vh),t}function Vh(){if(--Bc===0&&Gs!==null){Ji!==null&&(Ji.status="fulfilled");var e=Gs;Gs=null,Xi=0,Ji=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function pw(e,t){var s=[],a={status:"pending",value:null,reason:null,then:function(d){s.push(d)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var d=0;d<s.length;d++)(0,s[d])(t)},function(d){for(a.status="rejected",a.reason=d,d=0;d<s.length;d++)(0,s[d])(void 0)}),a}var Gh=q.S;q.S=function(e,t){km=qe(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&hw(e,t),Gh!==null&&Gh(e,t)};var di=C(null);function Hc(){var e=di.current;return e!==null?e:gt.pooledCache}function da(e,t){t===null?x(di,di.current):x(di,t.pool)}function Fh(){var e=Hc();return e===null?null:{parent:jt._currentValue,pool:e}}var Ki=Error(o(460)),qc=Error(o(474)),fa=Error(o(542)),ha={then:function(){}};function Yh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Xh(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(er,er),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Kh(e),e;default:if(typeof t.status=="string")t.then(er,er);else{if(e=gt,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=a}},function(a){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Kh(e),e}throw hi=t,Ki}}function fi(e){try{var t=e._init;return t(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(hi=s,Ki):s}}var hi=null;function Jh(){if(hi===null)throw Error(o(459));var e=hi;return hi=null,e}function Kh(e){if(e===Ki||e===fa)throw Error(o(483))}var Wi=null,Fs=0;function pa(e){var t=Fs;return Fs+=1,Wi===null&&(Wi=[]),Xh(Wi,e,t)}function Ys(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ma(e,t){throw t.$$typeof===I?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Wh(e){function t(ae,ee){if(e){var de=ae.deletions;de===null?(ae.deletions=[ee],ae.flags|=16):de.push(ee)}}function s(ae,ee){if(!e)return null;for(;ee!==null;)t(ae,ee),ee=ee.sibling;return null}function a(ae){for(var ee=new Map;ae!==null;)ae.key!==null?ee.set(ae.key,ae):ee.set(ae.index,ae),ae=ae.sibling;return ee}function d(ae,ee){return ae=nr(ae,ee),ae.index=0,ae.sibling=null,ae}function h(ae,ee,de){return ae.index=de,e?(de=ae.alternate,de!==null?(de=de.index,de<ee?(ae.flags|=67108866,ee):de):(ae.flags|=67108866,ee)):(ae.flags|=1048576,ee)}function v(ae){return e&&ae.alternate===null&&(ae.flags|=67108866),ae}function k(ae,ee,de,Te){return ee===null||ee.tag!==6?(ee=Nc(de,ae.mode,Te),ee.return=ae,ee):(ee=d(ee,de),ee.return=ae,ee)}function X(ae,ee,de,Te){var $e=de.type;return $e===H?we(ae,ee,de.props.children,Te,de.key):ee!==null&&(ee.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===Re&&fi($e)===ee.type)?(ee=d(ee,de.props),Ys(ee,de),ee.return=ae,ee):(ee=aa(de.type,de.key,de.props,null,ae.mode,Te),Ys(ee,de),ee.return=ae,ee)}function pe(ae,ee,de,Te){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==de.containerInfo||ee.stateNode.implementation!==de.implementation?(ee=Ac(de,ae.mode,Te),ee.return=ae,ee):(ee=d(ee,de.children||[]),ee.return=ae,ee)}function we(ae,ee,de,Te,$e){return ee===null||ee.tag!==7?(ee=ai(de,ae.mode,Te,$e),ee.return=ae,ee):(ee=d(ee,de),ee.return=ae,ee)}function Ee(ae,ee,de){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=Nc(""+ee,ae.mode,de),ee.return=ae,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case F:return de=aa(ee.type,ee.key,ee.props,null,ae.mode,de),Ys(de,ee),de.return=ae,de;case A:return ee=Ac(ee,ae.mode,de),ee.return=ae,ee;case Re:return ee=fi(ee),Ee(ae,ee,de)}if(ze(ee)||Pe(ee))return ee=ai(ee,ae.mode,de,null),ee.return=ae,ee;if(typeof ee.then=="function")return Ee(ae,pa(ee),de);if(ee.$$typeof===me)return Ee(ae,ua(ae,ee),de);ma(ae,ee)}return null}function ge(ae,ee,de,Te){var $e=ee!==null?ee.key:null;if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return $e!==null?null:k(ae,ee,""+de,Te);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case F:return de.key===$e?X(ae,ee,de,Te):null;case A:return de.key===$e?pe(ae,ee,de,Te):null;case Re:return de=fi(de),ge(ae,ee,de,Te)}if(ze(de)||Pe(de))return $e!==null?null:we(ae,ee,de,Te,null);if(typeof de.then=="function")return ge(ae,ee,pa(de),Te);if(de.$$typeof===me)return ge(ae,ee,ua(ae,de),Te);ma(ae,de)}return null}function be(ae,ee,de,Te,$e){if(typeof Te=="string"&&Te!==""||typeof Te=="number"||typeof Te=="bigint")return ae=ae.get(de)||null,k(ee,ae,""+Te,$e);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case F:return ae=ae.get(Te.key===null?de:Te.key)||null,X(ee,ae,Te,$e);case A:return ae=ae.get(Te.key===null?de:Te.key)||null,pe(ee,ae,Te,$e);case Re:return Te=fi(Te),be(ae,ee,de,Te,$e)}if(ze(Te)||Pe(Te))return ae=ae.get(de)||null,we(ee,ae,Te,$e,null);if(typeof Te.then=="function")return be(ae,ee,de,pa(Te),$e);if(Te.$$typeof===me)return be(ae,ee,de,ua(ee,Te),$e);ma(ee,Te)}return null}function Be(ae,ee,de,Te){for(var $e=null,ot=null,He=ee,Ke=ee=0,rt=null;He!==null&&Ke<de.length;Ke++){He.index>Ke?(rt=He,He=null):rt=He.sibling;var at=ge(ae,He,de[Ke],Te);if(at===null){He===null&&(He=rt);break}e&&He&&at.alternate===null&&t(ae,He),ee=h(at,ee,Ke),ot===null?$e=at:ot.sibling=at,ot=at,He=rt}if(Ke===de.length)return s(ae,He),st&&rr(ae,Ke),$e;if(He===null){for(;Ke<de.length;Ke++)He=Ee(ae,de[Ke],Te),He!==null&&(ee=h(He,ee,Ke),ot===null?$e=He:ot.sibling=He,ot=He);return st&&rr(ae,Ke),$e}for(He=a(He);Ke<de.length;Ke++)rt=be(He,ae,Ke,de[Ke],Te),rt!==null&&(e&&rt.alternate!==null&&He.delete(rt.key===null?Ke:rt.key),ee=h(rt,ee,Ke),ot===null?$e=rt:ot.sibling=rt,ot=rt);return e&&He.forEach(function(Vr){return t(ae,Vr)}),st&&rr(ae,Ke),$e}function Ge(ae,ee,de,Te){if(de==null)throw Error(o(151));for(var $e=null,ot=null,He=ee,Ke=ee=0,rt=null,at=de.next();He!==null&&!at.done;Ke++,at=de.next()){He.index>Ke?(rt=He,He=null):rt=He.sibling;var Vr=ge(ae,He,at.value,Te);if(Vr===null){He===null&&(He=rt);break}e&&He&&Vr.alternate===null&&t(ae,He),ee=h(Vr,ee,Ke),ot===null?$e=Vr:ot.sibling=Vr,ot=Vr,He=rt}if(at.done)return s(ae,He),st&&rr(ae,Ke),$e;if(He===null){for(;!at.done;Ke++,at=de.next())at=Ee(ae,at.value,Te),at!==null&&(ee=h(at,ee,Ke),ot===null?$e=at:ot.sibling=at,ot=at);return st&&rr(ae,Ke),$e}for(He=a(He);!at.done;Ke++,at=de.next())at=be(He,ae,Ke,at.value,Te),at!==null&&(e&&at.alternate!==null&&He.delete(at.key===null?Ke:at.key),ee=h(at,ee,Ke),ot===null?$e=at:ot.sibling=at,ot=at);return e&&He.forEach(function(Rx){return t(ae,Rx)}),st&&rr(ae,Ke),$e}function mt(ae,ee,de,Te){if(typeof de=="object"&&de!==null&&de.type===H&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case F:e:{for(var $e=de.key;ee!==null;){if(ee.key===$e){if($e=de.type,$e===H){if(ee.tag===7){s(ae,ee.sibling),Te=d(ee,de.props.children),Te.return=ae,ae=Te;break e}}else if(ee.elementType===$e||typeof $e=="object"&&$e!==null&&$e.$$typeof===Re&&fi($e)===ee.type){s(ae,ee.sibling),Te=d(ee,de.props),Ys(Te,de),Te.return=ae,ae=Te;break e}s(ae,ee);break}else t(ae,ee);ee=ee.sibling}de.type===H?(Te=ai(de.props.children,ae.mode,Te,de.key),Te.return=ae,ae=Te):(Te=aa(de.type,de.key,de.props,null,ae.mode,Te),Ys(Te,de),Te.return=ae,ae=Te)}return v(ae);case A:e:{for($e=de.key;ee!==null;){if(ee.key===$e)if(ee.tag===4&&ee.stateNode.containerInfo===de.containerInfo&&ee.stateNode.implementation===de.implementation){s(ae,ee.sibling),Te=d(ee,de.children||[]),Te.return=ae,ae=Te;break e}else{s(ae,ee);break}else t(ae,ee);ee=ee.sibling}Te=Ac(de,ae.mode,Te),Te.return=ae,ae=Te}return v(ae);case Re:return de=fi(de),mt(ae,ee,de,Te)}if(ze(de))return Be(ae,ee,de,Te);if(Pe(de)){if($e=Pe(de),typeof $e!="function")throw Error(o(150));return de=$e.call(de),Ge(ae,ee,de,Te)}if(typeof de.then=="function")return mt(ae,ee,pa(de),Te);if(de.$$typeof===me)return mt(ae,ee,ua(ae,de),Te);ma(ae,de)}return typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint"?(de=""+de,ee!==null&&ee.tag===6?(s(ae,ee.sibling),Te=d(ee,de),Te.return=ae,ae=Te):(s(ae,ee),Te=Nc(de,ae.mode,Te),Te.return=ae,ae=Te),v(ae)):s(ae,ee)}return function(ae,ee,de,Te){try{Fs=0;var $e=mt(ae,ee,de,Te);return Wi=null,$e}catch(He){if(He===Ki||He===fa)throw He;var ot=bn(29,He,null,ae.mode);return ot.lanes=Te,ot.return=ae,ot}}}var pi=Wh(!0),Qh=Wh(!1),_r=!1;function $c(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Vc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function kr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function jr(e,t,s){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(ct&2)!==0){var d=a.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),a.pending=t,t=oa(e),Dh(e,null,s),t}return sa(e,a,t,s),oa(e)}function Xs(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,s|=a,t.lanes=s,$f(e,s)}}function Gc(e,t){var s=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var d=null,h=null;if(s=s.firstBaseUpdate,s!==null){do{var v={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};h===null?d=h=v:h=h.next=v,s=s.next}while(s!==null);h===null?d=h=t:h=h.next=t}else d=h=t;s={baseState:a.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:a.shared,callbacks:a.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var Fc=!1;function Js(){if(Fc){var e=Ji;if(e!==null)throw e}}function Ks(e,t,s,a){Fc=!1;var d=e.updateQueue;_r=!1;var h=d.firstBaseUpdate,v=d.lastBaseUpdate,k=d.shared.pending;if(k!==null){d.shared.pending=null;var X=k,pe=X.next;X.next=null,v===null?h=pe:v.next=pe,v=X;var we=e.alternate;we!==null&&(we=we.updateQueue,k=we.lastBaseUpdate,k!==v&&(k===null?we.firstBaseUpdate=pe:k.next=pe,we.lastBaseUpdate=X))}if(h!==null){var Ee=d.baseState;v=0,we=pe=X=null,k=h;do{var ge=k.lane&-536870913,be=ge!==k.lane;if(be?(nt&ge)===ge:(a&ge)===ge){ge!==0&&ge===Xi&&(Fc=!0),we!==null&&(we=we.next={lane:0,tag:k.tag,payload:k.payload,callback:null,next:null});e:{var Be=e,Ge=k;ge=t;var mt=s;switch(Ge.tag){case 1:if(Be=Ge.payload,typeof Be=="function"){Ee=Be.call(mt,Ee,ge);break e}Ee=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=Ge.payload,ge=typeof Be=="function"?Be.call(mt,Ee,ge):Be,ge==null)break e;Ee=E({},Ee,ge);break e;case 2:_r=!0}}ge=k.callback,ge!==null&&(e.flags|=64,be&&(e.flags|=8192),be=d.callbacks,be===null?d.callbacks=[ge]:be.push(ge))}else be={lane:ge,tag:k.tag,payload:k.payload,callback:k.callback,next:null},we===null?(pe=we=be,X=Ee):we=we.next=be,v|=ge;if(k=k.next,k===null){if(k=d.shared.pending,k===null)break;be=k,k=be.next,be.next=null,d.lastBaseUpdate=be,d.shared.pending=null}}while(!0);we===null&&(X=Ee),d.baseState=X,d.firstBaseUpdate=pe,d.lastBaseUpdate=we,h===null&&(d.shared.lanes=0),Ur|=v,e.lanes=v,e.memoizedState=Ee}}function Zh(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function ep(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Zh(s[e],t)}var Qi=C(null),ga=C(0);function tp(e,t){e=pr,x(ga,e),x(Qi,t),pr=e|t.baseLanes}function Yc(){x(ga,pr),x(Qi,Qi.current)}function Xc(){pr=ga.current,z(Qi),z(ga)}var Sn=C(null),Un=null;function Nr(e){var t=e.alternate;x(Rt,Rt.current&1),x(Sn,e),Un===null&&(t===null||Qi.current!==null||t.memoizedState!==null)&&(Un=e)}function Jc(e){x(Rt,Rt.current),x(Sn,e),Un===null&&(Un=e)}function np(e){e.tag===22?(x(Rt,Rt.current),x(Sn,e),Un===null&&(Un=e)):Ar()}function Ar(){x(Rt,Rt.current),x(Sn,Sn.current)}function wn(e){z(Sn),Un===e&&(Un=null),z(Rt)}var Rt=C(0);function ya(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||td(s)||nd(s)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var or=0,Xe=null,ht=null,Nt=null,va=!1,Zi=!1,mi=!1,ba=0,Ws=0,es=null,mw=0;function Tt(){throw Error(o(321))}function Kc(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!vn(e[s],t[s]))return!1;return!0}function Wc(e,t,s,a,d,h){return or=h,Xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,q.H=e===null||e.memoizedState===null?Lp:fu,mi=!1,h=s(a,d),mi=!1,Zi&&(h=ip(t,s,a,d)),rp(e),h}function rp(e){q.H=eo;var t=ht!==null&&ht.next!==null;if(or=0,Nt=ht=Xe=null,va=!1,Ws=0,es=null,t)throw Error(o(300));e===null||At||(e=e.dependencies,e!==null&&ca(e)&&(At=!0))}function ip(e,t,s,a){Xe=e;var d=0;do{if(Zi&&(es=null),Ws=0,Zi=!1,25<=d)throw Error(o(301));if(d+=1,Nt=ht=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}q.H=Bp,h=t(s,a)}while(Zi);return h}function gw(){var e=q.H,t=e.useState()[0];return t=typeof t.then=="function"?Qs(t):t,e=e.useState()[0],(ht!==null?ht.memoizedState:null)!==e&&(Xe.flags|=1024),t}function Qc(){var e=ba!==0;return ba=0,e}function Zc(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function eu(e){if(va){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}va=!1}or=0,Nt=ht=Xe=null,Zi=!1,Ws=ba=0,es=null}function an(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Xe.memoizedState=Nt=e:Nt=Nt.next=e,Nt}function Et(){if(ht===null){var e=Xe.alternate;e=e!==null?e.memoizedState:null}else e=ht.next;var t=Nt===null?Xe.memoizedState:Nt.next;if(t!==null)Nt=t,ht=e;else{if(e===null)throw Xe.alternate===null?Error(o(467)):Error(o(310));ht=e,e={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},Nt===null?Xe.memoizedState=Nt=e:Nt=Nt.next=e}return Nt}function Sa(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qs(e){var t=Ws;return Ws+=1,es===null&&(es=[]),e=Xh(es,e,t),t=Xe,(Nt===null?t.memoizedState:Nt.next)===null&&(t=t.alternate,q.H=t===null||t.memoizedState===null?Lp:fu),e}function wa(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Qs(e);if(e.$$typeof===me)return $t(e)}throw Error(o(438,String(e)))}function tu(e){var t=null,s=Xe.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var a=Xe.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=Sa(),Xe.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),a=0;a<e;a++)s[a]=xe;return t.index++,s}function ar(e,t){return typeof t=="function"?t(e):t}function xa(e){var t=Et();return nu(t,ht,e)}function nu(e,t,s){var a=e.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=s;var d=e.baseQueue,h=a.pending;if(h!==null){if(d!==null){var v=d.next;d.next=h.next,h.next=v}t.baseQueue=d=h,a.pending=null}if(h=e.baseState,d===null)e.memoizedState=h;else{t=d.next;var k=v=null,X=null,pe=t,we=!1;do{var Ee=pe.lane&-536870913;if(Ee!==pe.lane?(nt&Ee)===Ee:(or&Ee)===Ee){var ge=pe.revertLane;if(ge===0)X!==null&&(X=X.next={lane:0,revertLane:0,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),Ee===Xi&&(we=!0);else if((or&ge)===ge){pe=pe.next,ge===Xi&&(we=!0);continue}else Ee={lane:0,revertLane:pe.revertLane,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},X===null?(k=X=Ee,v=h):X=X.next=Ee,Xe.lanes|=ge,Ur|=ge;Ee=pe.action,mi&&s(h,Ee),h=pe.hasEagerState?pe.eagerState:s(h,Ee)}else ge={lane:Ee,revertLane:pe.revertLane,gesture:pe.gesture,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},X===null?(k=X=ge,v=h):X=X.next=ge,Xe.lanes|=Ee,Ur|=Ee;pe=pe.next}while(pe!==null&&pe!==t);if(X===null?v=h:X.next=k,!vn(h,e.memoizedState)&&(At=!0,we&&(s=Ji,s!==null)))throw s;e.memoizedState=h,e.baseState=v,e.baseQueue=X,a.lastRenderedState=h}return d===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function ru(e){var t=Et(),s=t.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var a=s.dispatch,d=s.pending,h=t.memoizedState;if(d!==null){s.pending=null;var v=d=d.next;do h=e(h,v.action),v=v.next;while(v!==d);vn(h,t.memoizedState)||(At=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),s.lastRenderedState=h}return[h,a]}function sp(e,t,s){var a=Xe,d=Et(),h=st;if(h){if(s===void 0)throw Error(o(407));s=s()}else s=t();var v=!vn((ht||d).memoizedState,s);if(v&&(d.memoizedState=s,At=!0),d=d.queue,ou(lp.bind(null,a,d,e),[e]),d.getSnapshot!==t||v||Nt!==null&&Nt.memoizedState.tag&1){if(a.flags|=2048,ts(9,{destroy:void 0},ap.bind(null,a,d,s,t),null),gt===null)throw Error(o(349));h||(or&127)!==0||op(a,t,s)}return s}function op(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Xe.updateQueue,t===null?(t=Sa(),Xe.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function ap(e,t,s,a){t.value=s,t.getSnapshot=a,cp(t)&&up(e)}function lp(e,t,s){return s(function(){cp(t)&&up(e)})}function cp(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!vn(e,s)}catch{return!0}}function up(e){var t=oi(e,2);t!==null&&pn(t,e,2)}function iu(e){var t=an();if(typeof e=="function"){var s=e;if(e=s(),mi){Ue(!0);try{s()}finally{Ue(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:e},t}function dp(e,t,s,a){return e.baseState=s,nu(e,ht,typeof a=="function"?a:ar)}function yw(e,t,s,a,d){if(Ra(e))throw Error(o(485));if(e=t.action,e!==null){var h={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){h.listeners.push(v)}};q.T!==null?s(!0):h.isTransition=!1,a(h),s=t.pending,s===null?(h.next=t.pending=h,fp(t,h)):(h.next=s.next,t.pending=s.next=h)}}function fp(e,t){var s=t.action,a=t.payload,d=e.state;if(t.isTransition){var h=q.T,v={};q.T=v;try{var k=s(d,a),X=q.S;X!==null&&X(v,k),hp(e,t,k)}catch(pe){su(e,t,pe)}finally{h!==null&&v.types!==null&&(h.types=v.types),q.T=h}}else try{h=s(d,a),hp(e,t,h)}catch(pe){su(e,t,pe)}}function hp(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(a){pp(e,t,a)},function(a){return su(e,t,a)}):pp(e,t,s)}function pp(e,t,s){t.status="fulfilled",t.value=s,mp(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,fp(e,s)))}function su(e,t,s){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=s,mp(t),t=t.next;while(t!==a)}e.action=null}function mp(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function gp(e,t){return t}function yp(e,t){if(st){var s=gt.formState;if(s!==null){e:{var a=Xe;if(st){if(vt){t:{for(var d=vt,h=Mn;d.nodeType!==8;){if(!h){d=null;break t}if(d=Dn(d.nextSibling),d===null){d=null;break t}}h=d.data,d=h==="F!"||h==="F"?d:null}if(d){vt=Dn(d.nextSibling),a=d.data==="F!";break e}}Rr(a)}a=!1}a&&(t=s[0])}}return s=an(),s.memoizedState=s.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gp,lastRenderedState:t},s.queue=a,s=Pp.bind(null,Xe,a),a.dispatch=s,a=iu(!1),h=du.bind(null,Xe,!1,a.queue),a=an(),d={state:t,dispatch:null,action:e,pending:null},a.queue=d,s=yw.bind(null,Xe,d,h,s),d.dispatch=s,a.memoizedState=e,[t,s,!1]}function vp(e){var t=Et();return bp(t,ht,e)}function bp(e,t,s){if(t=nu(e,t,gp)[0],e=xa(ar)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=Qs(t)}catch(v){throw v===Ki?fa:v}else a=t;t=Et();var d=t.queue,h=d.dispatch;return s!==t.memoizedState&&(Xe.flags|=2048,ts(9,{destroy:void 0},vw.bind(null,d,s),null)),[a,h,e]}function vw(e,t){e.action=t}function Sp(e){var t=Et(),s=ht;if(s!==null)return bp(t,s,e);Et(),t=t.memoizedState,s=Et();var a=s.queue.dispatch;return s.memoizedState=e,[t,a,!1]}function ts(e,t,s,a){return e={tag:e,create:s,deps:a,inst:t,next:null},t=Xe.updateQueue,t===null&&(t=Sa(),Xe.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,t.lastEffect=e),e}function wp(){return Et().memoizedState}function Ta(e,t,s,a){var d=an();Xe.flags|=e,d.memoizedState=ts(1|t,{destroy:void 0},s,a===void 0?null:a)}function Ca(e,t,s,a){var d=Et();a=a===void 0?null:a;var h=d.memoizedState.inst;ht!==null&&a!==null&&Kc(a,ht.memoizedState.deps)?d.memoizedState=ts(t,h,s,a):(Xe.flags|=e,d.memoizedState=ts(1|t,h,s,a))}function xp(e,t){Ta(8390656,8,e,t)}function ou(e,t){Ca(2048,8,e,t)}function bw(e){Xe.flags|=4;var t=Xe.updateQueue;if(t===null)t=Sa(),Xe.updateQueue=t,t.events=[e];else{var s=t.events;s===null?t.events=[e]:s.push(e)}}function Tp(e){var t=Et().memoizedState;return bw({ref:t,nextImpl:e}),function(){if((ct&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Cp(e,t){return Ca(4,2,e,t)}function Rp(e,t){return Ca(4,4,e,t)}function Ep(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _p(e,t,s){s=s!=null?s.concat([e]):null,Ca(4,4,Ep.bind(null,t,e),s)}function au(){}function kp(e,t){var s=Et();t=t===void 0?null:t;var a=s.memoizedState;return t!==null&&Kc(t,a[1])?a[0]:(s.memoizedState=[e,t],e)}function jp(e,t){var s=Et();t=t===void 0?null:t;var a=s.memoizedState;if(t!==null&&Kc(t,a[1]))return a[0];if(a=e(),mi){Ue(!0);try{e()}finally{Ue(!1)}}return s.memoizedState=[a,t],a}function lu(e,t,s){return s===void 0||(or&1073741824)!==0&&(nt&261930)===0?e.memoizedState=t:(e.memoizedState=s,e=Nm(),Xe.lanes|=e,Ur|=e,s)}function Np(e,t,s,a){return vn(s,t)?s:Qi.current!==null?(e=lu(e,s,a),vn(e,t)||(At=!0),e):(or&42)===0||(or&1073741824)!==0&&(nt&261930)===0?(At=!0,e.memoizedState=s):(e=Nm(),Xe.lanes|=e,Ur|=e,t)}function Ap(e,t,s,a,d){var h=D.p;D.p=h!==0&&8>h?h:8;var v=q.T,k={};q.T=k,du(e,!1,t,s);try{var X=d(),pe=q.S;if(pe!==null&&pe(k,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var we=pw(X,a);Zs(e,t,we,Cn(e))}else Zs(e,t,a,Cn(e))}catch(Ee){Zs(e,t,{then:function(){},status:"rejected",reason:Ee},Cn())}finally{D.p=h,v!==null&&k.types!==null&&(v.types=k.types),q.T=v}}function Sw(){}function cu(e,t,s,a){if(e.tag!==5)throw Error(o(476));var d=Op(e).queue;Ap(e,d,t,K,s===null?Sw:function(){return Mp(e),s(a)})}function Op(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:K},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Mp(e){var t=Op(e);t.next===null&&(t=e.alternate.memoizedState),Zs(e,t.next.queue,{},Cn())}function uu(){return $t(yo)}function Up(){return Et().memoizedState}function Dp(){return Et().memoizedState}function ww(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=Cn();e=kr(s);var a=jr(t,e,s);a!==null&&(pn(a,t,s),Xs(a,t,s)),t={cache:Lc()},e.payload=t;return}t=t.return}}function xw(e,t,s){var a=Cn();s={lane:a,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Ra(e)?Ip(t,s):(s=kc(e,t,s,a),s!==null&&(pn(s,e,a),zp(s,t,a)))}function Pp(e,t,s){var a=Cn();Zs(e,t,s,a)}function Zs(e,t,s,a){var d={lane:a,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Ra(e))Ip(t,d);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var v=t.lastRenderedState,k=h(v,s);if(d.hasEagerState=!0,d.eagerState=k,vn(k,v))return sa(e,t,d,0),gt===null&&ia(),!1}catch{}if(s=kc(e,t,d,a),s!==null)return pn(s,e,a),zp(s,t,a),!0}return!1}function du(e,t,s,a){if(a={lane:2,revertLane:$u(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Ra(e)){if(t)throw Error(o(479))}else t=kc(e,s,a,2),t!==null&&pn(t,e,2)}function Ra(e){var t=e.alternate;return e===Xe||t!==null&&t===Xe}function Ip(e,t){Zi=va=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function zp(e,t,s){if((s&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,s|=a,t.lanes=s,$f(e,s)}}var eo={readContext:$t,use:wa,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt};eo.useEffectEvent=Tt;var Lp={readContext:$t,use:wa,useCallback:function(e,t){return an().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:xp,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,Ta(4194308,4,Ep.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Ta(4194308,4,e,t)},useInsertionEffect:function(e,t){Ta(4,2,e,t)},useMemo:function(e,t){var s=an();t=t===void 0?null:t;var a=e();if(mi){Ue(!0);try{e()}finally{Ue(!1)}}return s.memoizedState=[a,t],a},useReducer:function(e,t,s){var a=an();if(s!==void 0){var d=s(t);if(mi){Ue(!0);try{s(t)}finally{Ue(!1)}}}else d=t;return a.memoizedState=a.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},a.queue=e,e=e.dispatch=xw.bind(null,Xe,e),[a.memoizedState,e]},useRef:function(e){var t=an();return e={current:e},t.memoizedState=e},useState:function(e){e=iu(e);var t=e.queue,s=Pp.bind(null,Xe,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:au,useDeferredValue:function(e,t){var s=an();return lu(s,e,t)},useTransition:function(){var e=iu(!1);return e=Ap.bind(null,Xe,e.queue,!0,!1),an().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var a=Xe,d=an();if(st){if(s===void 0)throw Error(o(407));s=s()}else{if(s=t(),gt===null)throw Error(o(349));(nt&127)!==0||op(a,t,s)}d.memoizedState=s;var h={value:s,getSnapshot:t};return d.queue=h,xp(lp.bind(null,a,h,e),[e]),a.flags|=2048,ts(9,{destroy:void 0},ap.bind(null,a,h,s,t),null),s},useId:function(){var e=an(),t=gt.identifierPrefix;if(st){var s=Fn,a=Gn;s=(a&~(1<<32-Le(a)-1)).toString(32)+s,t="_"+t+"R_"+s,s=ba++,0<s&&(t+="H"+s.toString(32)),t+="_"}else s=mw++,t="_"+t+"r_"+s.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:uu,useFormState:yp,useActionState:yp,useOptimistic:function(e){var t=an();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=du.bind(null,Xe,!0,s),s.dispatch=t,[e,t]},useMemoCache:tu,useCacheRefresh:function(){return an().memoizedState=ww.bind(null,Xe)},useEffectEvent:function(e){var t=an(),s={impl:e};return t.memoizedState=s,function(){if((ct&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}},fu={readContext:$t,use:wa,useCallback:kp,useContext:$t,useEffect:ou,useImperativeHandle:_p,useInsertionEffect:Cp,useLayoutEffect:Rp,useMemo:jp,useReducer:xa,useRef:wp,useState:function(){return xa(ar)},useDebugValue:au,useDeferredValue:function(e,t){var s=Et();return Np(s,ht.memoizedState,e,t)},useTransition:function(){var e=xa(ar)[0],t=Et().memoizedState;return[typeof e=="boolean"?e:Qs(e),t]},useSyncExternalStore:sp,useId:Up,useHostTransitionStatus:uu,useFormState:vp,useActionState:vp,useOptimistic:function(e,t){var s=Et();return dp(s,ht,e,t)},useMemoCache:tu,useCacheRefresh:Dp};fu.useEffectEvent=Tp;var Bp={readContext:$t,use:wa,useCallback:kp,useContext:$t,useEffect:ou,useImperativeHandle:_p,useInsertionEffect:Cp,useLayoutEffect:Rp,useMemo:jp,useReducer:ru,useRef:wp,useState:function(){return ru(ar)},useDebugValue:au,useDeferredValue:function(e,t){var s=Et();return ht===null?lu(s,e,t):Np(s,ht.memoizedState,e,t)},useTransition:function(){var e=ru(ar)[0],t=Et().memoizedState;return[typeof e=="boolean"?e:Qs(e),t]},useSyncExternalStore:sp,useId:Up,useHostTransitionStatus:uu,useFormState:Sp,useActionState:Sp,useOptimistic:function(e,t){var s=Et();return ht!==null?dp(s,ht,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:tu,useCacheRefresh:Dp};Bp.useEffectEvent=Tp;function hu(e,t,s,a){t=e.memoizedState,s=s(a,t),s=s==null?t:E({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var pu={enqueueSetState:function(e,t,s){e=e._reactInternals;var a=Cn(),d=kr(a);d.payload=t,s!=null&&(d.callback=s),t=jr(e,d,a),t!==null&&(pn(t,e,a),Xs(t,e,a))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var a=Cn(),d=kr(a);d.tag=1,d.payload=t,s!=null&&(d.callback=s),t=jr(e,d,a),t!==null&&(pn(t,e,a),Xs(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Cn(),a=kr(s);a.tag=2,t!=null&&(a.callback=t),t=jr(e,a,s),t!==null&&(pn(t,e,s),Xs(t,e,s))}};function Hp(e,t,s,a,d,h,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,h,v):t.prototype&&t.prototype.isPureReactComponent?!Bs(s,a)||!Bs(d,h):!0}function qp(e,t,s,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,a),t.state!==e&&pu.enqueueReplaceState(t,t.state,null)}function gi(e,t){var s=t;if("ref"in t){s={};for(var a in t)a!=="ref"&&(s[a]=t[a])}if(e=e.defaultProps){s===t&&(s=E({},s));for(var d in e)s[d]===void 0&&(s[d]=e[d])}return s}function $p(e){ra(e)}function Vp(e){console.error(e)}function Gp(e){ra(e)}function Ea(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function Fp(e,t,s){try{var a=e.onCaughtError;a(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function mu(e,t,s){return s=kr(s),s.tag=3,s.payload={element:null},s.callback=function(){Ea(e,t)},s}function Yp(e){return e=kr(e),e.tag=3,e}function Xp(e,t,s,a){var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var h=a.value;e.payload=function(){return d(h)},e.callback=function(){Fp(t,s,a)}}var v=s.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Fp(t,s,a),typeof d!="function"&&(Dr===null?Dr=new Set([this]):Dr.add(this));var k=a.stack;this.componentDidCatch(a.value,{componentStack:k!==null?k:""})})}function Tw(e,t,s,a,d){if(s.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=s.alternate,t!==null&&Yi(t,s,d,!0),s=Sn.current,s!==null){switch(s.tag){case 31:case 13:return Un===null?za():s.alternate===null&&Ct===0&&(Ct=3),s.flags&=-257,s.flags|=65536,s.lanes=d,a===ha?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([a]):t.add(a),Bu(e,a,d)),!1;case 22:return s.flags|=65536,a===ha?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([a]):s.add(a)),Bu(e,a,d)),!1}throw Error(o(435,s.tag))}return Bu(e,a,d),za(),!1}if(st)return t=Sn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,a!==Uc&&(e=Error(o(422),{cause:a}),$s(Nn(e,s)))):(a!==Uc&&(t=Error(o(423),{cause:a}),$s(Nn(t,s))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,a=Nn(a,s),d=mu(e.stateNode,a,d),Gc(e,d),Ct!==4&&(Ct=2)),!1;var h=Error(o(520),{cause:a});if(h=Nn(h,s),lo===null?lo=[h]:lo.push(h),Ct!==4&&(Ct=2),t===null)return!0;a=Nn(a,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=d&-d,s.lanes|=e,e=mu(s.stateNode,a,e),Gc(s,e),!1;case 1:if(t=s.type,h=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Dr===null||!Dr.has(h))))return s.flags|=65536,d&=-d,s.lanes|=d,d=Yp(d),Xp(d,e,s,a),Gc(s,d),!1}s=s.return}while(s!==null);return!1}var gu=Error(o(461)),At=!1;function Vt(e,t,s,a){t.child=e===null?Qh(t,null,s,a):pi(t,e.child,s,a)}function Jp(e,t,s,a,d){s=s.render;var h=t.ref;if("ref"in a){var v={};for(var k in a)k!=="ref"&&(v[k]=a[k])}else v=a;return ui(t),a=Wc(e,t,s,v,h,d),k=Qc(),e!==null&&!At?(Zc(e,t,d),lr(e,t,d)):(st&&k&&Oc(t),t.flags|=1,Vt(e,t,a,d),t.child)}function Kp(e,t,s,a,d){if(e===null){var h=s.type;return typeof h=="function"&&!jc(h)&&h.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=h,Wp(e,t,h,a,d)):(e=aa(s.type,null,a,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!Cu(e,d)){var v=h.memoizedProps;if(s=s.compare,s=s!==null?s:Bs,s(v,a)&&e.ref===t.ref)return lr(e,t,d)}return t.flags|=1,e=nr(h,a),e.ref=t.ref,e.return=t,t.child=e}function Wp(e,t,s,a,d){if(e!==null){var h=e.memoizedProps;if(Bs(h,a)&&e.ref===t.ref)if(At=!1,t.pendingProps=a=h,Cu(e,d))(e.flags&131072)!==0&&(At=!0);else return t.lanes=e.lanes,lr(e,t,d)}return yu(e,t,s,a,d)}function Qp(e,t,s,a){var d=a.children,h=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((t.flags&128)!==0){if(h=h!==null?h.baseLanes|s:s,e!==null){for(a=t.child=e.child,d=0;a!==null;)d=d|a.lanes|a.childLanes,a=a.sibling;a=d&~h}else a=0,t.child=null;return Zp(e,t,h,s,a)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&da(t,h!==null?h.cachePool:null),h!==null?tp(t,h):Yc(),np(t);else return a=t.lanes=536870912,Zp(e,t,h!==null?h.baseLanes|s:s,s,a)}else h!==null?(da(t,h.cachePool),tp(t,h),Ar(),t.memoizedState=null):(e!==null&&da(t,null),Yc(),Ar());return Vt(e,t,d,s),t.child}function to(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Zp(e,t,s,a,d){var h=Hc();return h=h===null?null:{parent:jt._currentValue,pool:h},t.memoizedState={baseLanes:s,cachePool:h},e!==null&&da(t,null),Yc(),np(t),e!==null&&Yi(e,t,a,!0),t.childLanes=d,null}function _a(e,t){return t=ja({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function em(e,t,s){return pi(t,e.child,null,s),e=_a(t,t.pendingProps),e.flags|=2,wn(t),t.memoizedState=null,e}function Cw(e,t,s){var a=t.pendingProps,d=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(st){if(a.mode==="hidden")return e=_a(t,a),t.lanes=536870912,to(null,e);if(Jc(t),(e=vt)?(e=fg(e,Mn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Tr!==null?{id:Gn,overflow:Fn}:null,retryLane:536870912,hydrationErrors:null},s=Ih(e),s.return=t,t.child=s,qt=t,vt=null)):e=null,e===null)throw Rr(t);return t.lanes=536870912,null}return _a(t,a)}var h=e.memoizedState;if(h!==null){var v=h.dehydrated;if(Jc(t),d)if(t.flags&256)t.flags&=-257,t=em(e,t,s);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(At||Yi(e,t,s,!1),d=(s&e.childLanes)!==0,At||d){if(a=gt,a!==null&&(v=Vf(a,s),v!==0&&v!==h.retryLane))throw h.retryLane=v,oi(e,v),pn(a,e,v),gu;za(),t=em(e,t,s)}else e=h.treeContext,vt=Dn(v.nextSibling),qt=t,st=!0,Cr=null,Mn=!1,e!==null&&Bh(t,e),t=_a(t,a),t.flags|=4096;return t}return e=nr(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function ka(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(o(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function yu(e,t,s,a,d){return ui(t),s=Wc(e,t,s,a,void 0,d),a=Qc(),e!==null&&!At?(Zc(e,t,d),lr(e,t,d)):(st&&a&&Oc(t),t.flags|=1,Vt(e,t,s,d),t.child)}function tm(e,t,s,a,d,h){return ui(t),t.updateQueue=null,s=ip(t,a,s,d),rp(e),a=Qc(),e!==null&&!At?(Zc(e,t,h),lr(e,t,h)):(st&&a&&Oc(t),t.flags|=1,Vt(e,t,s,h),t.child)}function nm(e,t,s,a,d){if(ui(t),t.stateNode===null){var h=$i,v=s.contextType;typeof v=="object"&&v!==null&&(h=$t(v)),h=new s(a,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=pu,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=a,h.state=t.memoizedState,h.refs={},$c(t),v=s.contextType,h.context=typeof v=="object"&&v!==null?$t(v):$i,h.state=t.memoizedState,v=s.getDerivedStateFromProps,typeof v=="function"&&(hu(t,s,v,a),h.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(v=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),v!==h.state&&pu.enqueueReplaceState(h,h.state,null),Ks(t,a,h,d),Js(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){h=t.stateNode;var k=t.memoizedProps,X=gi(s,k);h.props=X;var pe=h.context,we=s.contextType;v=$i,typeof we=="object"&&we!==null&&(v=$t(we));var Ee=s.getDerivedStateFromProps;we=typeof Ee=="function"||typeof h.getSnapshotBeforeUpdate=="function",k=t.pendingProps!==k,we||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(k||pe!==v)&&qp(t,h,a,v),_r=!1;var ge=t.memoizedState;h.state=ge,Ks(t,a,h,d),Js(),pe=t.memoizedState,k||ge!==pe||_r?(typeof Ee=="function"&&(hu(t,s,Ee,a),pe=t.memoizedState),(X=_r||Hp(t,s,X,a,ge,pe,v))?(we||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=pe),h.props=a,h.state=pe,h.context=v,a=X):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{h=t.stateNode,Vc(e,t),v=t.memoizedProps,we=gi(s,v),h.props=we,Ee=t.pendingProps,ge=h.context,pe=s.contextType,X=$i,typeof pe=="object"&&pe!==null&&(X=$t(pe)),k=s.getDerivedStateFromProps,(pe=typeof k=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(v!==Ee||ge!==X)&&qp(t,h,a,X),_r=!1,ge=t.memoizedState,h.state=ge,Ks(t,a,h,d),Js();var be=t.memoizedState;v!==Ee||ge!==be||_r||e!==null&&e.dependencies!==null&&ca(e.dependencies)?(typeof k=="function"&&(hu(t,s,k,a),be=t.memoizedState),(we=_r||Hp(t,s,we,a,ge,be,X)||e!==null&&e.dependencies!==null&&ca(e.dependencies))?(pe||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(a,be,X),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(a,be,X)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||v===e.memoizedProps&&ge===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&ge===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=be),h.props=a,h.state=be,h.context=X,a=we):(typeof h.componentDidUpdate!="function"||v===e.memoizedProps&&ge===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&ge===e.memoizedState||(t.flags|=1024),a=!1)}return h=a,ka(e,t),a=(t.flags&128)!==0,h||a?(h=t.stateNode,s=a&&typeof s.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&a?(t.child=pi(t,e.child,null,d),t.child=pi(t,null,s,d)):Vt(e,t,s,d),t.memoizedState=h.state,e=t.child):e=lr(e,t,d),e}function rm(e,t,s,a){return li(),t.flags|=256,Vt(e,t,s,a),t.child}var vu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function bu(e){return{baseLanes:e,cachePool:Fh()}}function Su(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=Tn),e}function im(e,t,s){var a=t.pendingProps,d=!1,h=(t.flags&128)!==0,v;if((v=h)||(v=e!==null&&e.memoizedState===null?!1:(Rt.current&2)!==0),v&&(d=!0,t.flags&=-129),v=(t.flags&32)!==0,t.flags&=-33,e===null){if(st){if(d?Nr(t):Ar(),(e=vt)?(e=fg(e,Mn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Tr!==null?{id:Gn,overflow:Fn}:null,retryLane:536870912,hydrationErrors:null},s=Ih(e),s.return=t,t.child=s,qt=t,vt=null)):e=null,e===null)throw Rr(t);return nd(e)?t.lanes=32:t.lanes=536870912,null}var k=a.children;return a=a.fallback,d?(Ar(),d=t.mode,k=ja({mode:"hidden",children:k},d),a=ai(a,d,s,null),k.return=t,a.return=t,k.sibling=a,t.child=k,a=t.child,a.memoizedState=bu(s),a.childLanes=Su(e,v,s),t.memoizedState=vu,to(null,a)):(Nr(t),wu(t,k))}var X=e.memoizedState;if(X!==null&&(k=X.dehydrated,k!==null)){if(h)t.flags&256?(Nr(t),t.flags&=-257,t=xu(e,t,s)):t.memoizedState!==null?(Ar(),t.child=e.child,t.flags|=128,t=null):(Ar(),k=a.fallback,d=t.mode,a=ja({mode:"visible",children:a.children},d),k=ai(k,d,s,null),k.flags|=2,a.return=t,k.return=t,a.sibling=k,t.child=a,pi(t,e.child,null,s),a=t.child,a.memoizedState=bu(s),a.childLanes=Su(e,v,s),t.memoizedState=vu,t=to(null,a));else if(Nr(t),nd(k)){if(v=k.nextSibling&&k.nextSibling.dataset,v)var pe=v.dgst;v=pe,a=Error(o(419)),a.stack="",a.digest=v,$s({value:a,source:null,stack:null}),t=xu(e,t,s)}else if(At||Yi(e,t,s,!1),v=(s&e.childLanes)!==0,At||v){if(v=gt,v!==null&&(a=Vf(v,s),a!==0&&a!==X.retryLane))throw X.retryLane=a,oi(e,a),pn(v,e,a),gu;td(k)||za(),t=xu(e,t,s)}else td(k)?(t.flags|=192,t.child=e.child,t=null):(e=X.treeContext,vt=Dn(k.nextSibling),qt=t,st=!0,Cr=null,Mn=!1,e!==null&&Bh(t,e),t=wu(t,a.children),t.flags|=4096);return t}return d?(Ar(),k=a.fallback,d=t.mode,X=e.child,pe=X.sibling,a=nr(X,{mode:"hidden",children:a.children}),a.subtreeFlags=X.subtreeFlags&65011712,pe!==null?k=nr(pe,k):(k=ai(k,d,s,null),k.flags|=2),k.return=t,a.return=t,a.sibling=k,t.child=a,to(null,a),a=t.child,k=e.child.memoizedState,k===null?k=bu(s):(d=k.cachePool,d!==null?(X=jt._currentValue,d=d.parent!==X?{parent:X,pool:X}:d):d=Fh(),k={baseLanes:k.baseLanes|s,cachePool:d}),a.memoizedState=k,a.childLanes=Su(e,v,s),t.memoizedState=vu,to(e.child,a)):(Nr(t),s=e.child,e=s.sibling,s=nr(s,{mode:"visible",children:a.children}),s.return=t,s.sibling=null,e!==null&&(v=t.deletions,v===null?(t.deletions=[e],t.flags|=16):v.push(e)),t.child=s,t.memoizedState=null,s)}function wu(e,t){return t=ja({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function ja(e,t){return e=bn(22,e,null,t),e.lanes=0,e}function xu(e,t,s){return pi(t,e.child,null,s),e=wu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function sm(e,t,s){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Ic(e.return,t,s)}function Tu(e,t,s,a,d,h){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:d,treeForkCount:h}:(v.isBackwards=t,v.rendering=null,v.renderingStartTime=0,v.last=a,v.tail=s,v.tailMode=d,v.treeForkCount=h)}function om(e,t,s){var a=t.pendingProps,d=a.revealOrder,h=a.tail;a=a.children;var v=Rt.current,k=(v&2)!==0;if(k?(v=v&1|2,t.flags|=128):v&=1,x(Rt,v),Vt(e,t,a,s),a=st?qs:0,!k&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sm(e,s,t);else if(e.tag===19)sm(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(s=t.child,d=null;s!==null;)e=s.alternate,e!==null&&ya(e)===null&&(d=s),s=s.sibling;s=d,s===null?(d=t.child,t.child=null):(d=s.sibling,s.sibling=null),Tu(t,!1,d,s,h,a);break;case"backwards":case"unstable_legacy-backwards":for(s=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&ya(e)===null){t.child=d;break}e=d.sibling,d.sibling=s,s=d,d=e}Tu(t,!0,s,null,h,a);break;case"together":Tu(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function lr(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Ur|=t.lanes,(s&t.childLanes)===0)if(e!==null){if(Yi(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,s=nr(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=nr(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Cu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ca(e)))}function Rw(e,t,s){switch(t.tag){case 3:w(t,t.stateNode.containerInfo),Er(t,jt,e.memoizedState.cache),li();break;case 27:case 5:j(t);break;case 4:w(t,t.stateNode.containerInfo);break;case 10:Er(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Jc(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(Nr(t),t.flags|=128,null):(s&t.child.childLanes)!==0?im(e,t,s):(Nr(t),e=lr(e,t,s),e!==null?e.sibling:null);Nr(t);break;case 19:var d=(e.flags&128)!==0;if(a=(s&t.childLanes)!==0,a||(Yi(e,t,s,!1),a=(s&t.childLanes)!==0),d){if(a)return om(e,t,s);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),x(Rt,Rt.current),a)break;return null;case 22:return t.lanes=0,Qp(e,t,s,t.pendingProps);case 24:Er(t,jt,e.memoizedState.cache)}return lr(e,t,s)}function am(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)At=!0;else{if(!Cu(e,s)&&(t.flags&128)===0)return At=!1,Rw(e,t,s);At=(e.flags&131072)!==0}else At=!1,st&&(t.flags&1048576)!==0&&Lh(t,qs,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=fi(t.elementType),t.type=e,typeof e=="function")jc(e)?(a=gi(e,a),t.tag=1,t=nm(null,t,e,a,s)):(t.tag=0,t=yu(null,t,e,a,s));else{if(e!=null){var d=e.$$typeof;if(d===ce){t.tag=11,t=Jp(null,t,e,a,s);break e}else if(d===ue){t.tag=14,t=Kp(null,t,e,a,s);break e}}throw t=ye(e)||e,Error(o(306,t,""))}}return t;case 0:return yu(e,t,t.type,t.pendingProps,s);case 1:return a=t.type,d=gi(a,t.pendingProps),nm(e,t,a,d,s);case 3:e:{if(w(t,t.stateNode.containerInfo),e===null)throw Error(o(387));a=t.pendingProps;var h=t.memoizedState;d=h.element,Vc(e,t),Ks(t,a,null,s);var v=t.memoizedState;if(a=v.cache,Er(t,jt,a),a!==h.cache&&zc(t,[jt],s,!0),Js(),a=v.element,h.isDehydrated)if(h={element:a,isDehydrated:!1,cache:v.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=rm(e,t,a,s);break e}else if(a!==d){d=Nn(Error(o(424)),t),$s(d),t=rm(e,t,a,s);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,vt=Dn(e.firstChild),qt=t,st=!0,Cr=null,Mn=!0,s=Qh(t,null,a,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(li(),a===d){t=lr(e,t,s);break e}Vt(e,t,a,s)}t=t.child}return t;case 26:return ka(e,t),e===null?(s=vg(t.type,null,t.pendingProps,null))?t.memoizedState=s:st||(s=t.type,e=t.pendingProps,a=Ga(_.current).createElement(s),a[Ht]=t,a[ln]=e,Gt(a,s,e),zt(a),t.stateNode=a):t.memoizedState=vg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return j(t),e===null&&st&&(a=t.stateNode=mg(t.type,t.pendingProps,_.current),qt=t,Mn=!0,d=vt,Lr(t.type)?(rd=d,vt=Dn(a.firstChild)):vt=d),Vt(e,t,t.pendingProps.children,s),ka(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&st&&((d=a=vt)&&(a=tx(a,t.type,t.pendingProps,Mn),a!==null?(t.stateNode=a,qt=t,vt=Dn(a.firstChild),Mn=!1,d=!0):d=!1),d||Rr(t)),j(t),d=t.type,h=t.pendingProps,v=e!==null?e.memoizedProps:null,a=h.children,Qu(d,h)?a=null:v!==null&&Qu(d,v)&&(t.flags|=32),t.memoizedState!==null&&(d=Wc(e,t,gw,null,null,s),yo._currentValue=d),ka(e,t),Vt(e,t,a,s),t.child;case 6:return e===null&&st&&((e=s=vt)&&(s=nx(s,t.pendingProps,Mn),s!==null?(t.stateNode=s,qt=t,vt=null,e=!0):e=!1),e||Rr(t)),null;case 13:return im(e,t,s);case 4:return w(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=pi(t,null,a,s):Vt(e,t,a,s),t.child;case 11:return Jp(e,t,t.type,t.pendingProps,s);case 7:return Vt(e,t,t.pendingProps,s),t.child;case 8:return Vt(e,t,t.pendingProps.children,s),t.child;case 12:return Vt(e,t,t.pendingProps.children,s),t.child;case 10:return a=t.pendingProps,Er(t,t.type,a.value),Vt(e,t,a.children,s),t.child;case 9:return d=t.type._context,a=t.pendingProps.children,ui(t),d=$t(d),a=a(d),t.flags|=1,Vt(e,t,a,s),t.child;case 14:return Kp(e,t,t.type,t.pendingProps,s);case 15:return Wp(e,t,t.type,t.pendingProps,s);case 19:return om(e,t,s);case 31:return Cw(e,t,s);case 22:return Qp(e,t,s,t.pendingProps);case 24:return ui(t),a=$t(jt),e===null?(d=Hc(),d===null&&(d=gt,h=Lc(),d.pooledCache=h,h.refCount++,h!==null&&(d.pooledCacheLanes|=s),d=h),t.memoizedState={parent:a,cache:d},$c(t),Er(t,jt,d)):((e.lanes&s)!==0&&(Vc(e,t),Ks(t,null,null,s),Js()),d=e.memoizedState,h=t.memoizedState,d.parent!==a?(d={parent:a,cache:a},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),Er(t,jt,a)):(a=h.cache,Er(t,jt,a),a!==d.cache&&zc(t,[jt],s,!0))),Vt(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function cr(e){e.flags|=4}function Ru(e,t,s,a,d){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(Um())e.flags|=8192;else throw hi=ha,qc}else e.flags&=-16777217}function lm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Tg(t))if(Um())e.flags|=8192;else throw hi=ha,qc}function Na(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Hf():536870912,e.lanes|=t,ss|=t)}function no(e,t){if(!st)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,a=0;if(t)for(var d=e.child;d!==null;)s|=d.lanes|d.childLanes,a|=d.subtreeFlags&65011712,a|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)s|=d.lanes|d.childLanes,a|=d.subtreeFlags,a|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=a,e.childLanes=s,t}function Ew(e,t,s){var a=t.pendingProps;switch(Mc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(t),null;case 1:return bt(t),null;case 3:return s=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),sr(jt),R(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Fi(t)?cr(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Dc())),bt(t),null;case 26:var d=t.type,h=t.memoizedState;return e===null?(cr(t),h!==null?(bt(t),lm(t,h)):(bt(t),Ru(t,d,null,a,s))):h?h!==e.memoizedState?(cr(t),bt(t),lm(t,h)):(bt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&cr(t),bt(t),Ru(t,d,e,a,s)),null;case 27:if(G(t),s=_.current,d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&cr(t);else{if(!a){if(t.stateNode===null)throw Error(o(166));return bt(t),null}e=b.current,Fi(t)?Hh(t):(e=mg(d,a,s),t.stateNode=e,cr(t))}return bt(t),null;case 5:if(G(t),d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&cr(t);else{if(!a){if(t.stateNode===null)throw Error(o(166));return bt(t),null}if(h=b.current,Fi(t))Hh(t);else{var v=Ga(_.current);switch(h){case 1:h=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:h=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":h=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":h=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":h=v.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof a.is=="string"?v.createElement("select",{is:a.is}):v.createElement("select"),a.multiple?h.multiple=!0:a.size&&(h.size=a.size);break;default:h=typeof a.is=="string"?v.createElement(d,{is:a.is}):v.createElement(d)}}h[Ht]=t,h[ln]=a;e:for(v=t.child;v!==null;){if(v.tag===5||v.tag===6)h.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}t.stateNode=h;e:switch(Gt(h,d,a),d){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&cr(t)}}return bt(t),Ru(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,s),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&cr(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(o(166));if(e=_.current,Fi(t)){if(e=t.stateNode,s=t.memoizedProps,a=null,d=qt,d!==null)switch(d.tag){case 27:case 5:a=d.memoizedProps}e[Ht]=t,e=!!(e.nodeValue===s||a!==null&&a.suppressHydrationWarning===!0||ig(e.nodeValue,s)),e||Rr(t,!0)}else e=Ga(e).createTextNode(a),e[Ht]=t,t.stateNode=e}return bt(t),null;case 31:if(s=t.memoizedState,e===null||e.memoizedState!==null){if(a=Fi(t),s!==null){if(e===null){if(!a)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[Ht]=t}else li(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;bt(t),e=!1}else s=Dc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return t.flags&256?(wn(t),t):(wn(t),null);if((t.flags&128)!==0)throw Error(o(558))}return bt(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Fi(t),a!==null&&a.dehydrated!==null){if(e===null){if(!d)throw Error(o(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));d[Ht]=t}else li(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;bt(t),d=!1}else d=Dc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return t.flags&256?(wn(t),t):(wn(t),null)}return wn(t),(t.flags&128)!==0?(t.lanes=s,t):(s=a!==null,e=e!==null&&e.memoizedState!==null,s&&(a=t.child,d=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(d=a.alternate.memoizedState.cachePool.pool),h=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(h=a.memoizedState.cachePool.pool),h!==d&&(a.flags|=2048)),s!==e&&s&&(t.child.flags|=8192),Na(t,t.updateQueue),bt(t),null);case 4:return R(),e===null&&Yu(t.stateNode.containerInfo),bt(t),null;case 10:return sr(t.type),bt(t),null;case 19:if(z(Rt),a=t.memoizedState,a===null)return bt(t),null;if(d=(t.flags&128)!==0,h=a.rendering,h===null)if(d)no(a,!1);else{if(Ct!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=ya(e),h!==null){for(t.flags|=128,no(a,!1),e=h.updateQueue,t.updateQueue=e,Na(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)Ph(s,e),s=s.sibling;return x(Rt,Rt.current&1|2),st&&rr(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&qe()>Da&&(t.flags|=128,d=!0,no(a,!1),t.lanes=4194304)}else{if(!d)if(e=ya(h),e!==null){if(t.flags|=128,d=!0,e=e.updateQueue,t.updateQueue=e,Na(t,e),no(a,!0),a.tail===null&&a.tailMode==="hidden"&&!h.alternate&&!st)return bt(t),null}else 2*qe()-a.renderingStartTime>Da&&s!==536870912&&(t.flags|=128,d=!0,no(a,!1),t.lanes=4194304);a.isBackwards?(h.sibling=t.child,t.child=h):(e=a.last,e!==null?e.sibling=h:t.child=h,a.last=h)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=qe(),e.sibling=null,s=Rt.current,x(Rt,d?s&1|2:s&1),st&&rr(t,a.treeForkCount),e):(bt(t),null);case 22:case 23:return wn(t),Xc(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(s&536870912)!==0&&(t.flags&128)===0&&(bt(t),t.subtreeFlags&6&&(t.flags|=8192)):bt(t),s=t.updateQueue,s!==null&&Na(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==s&&(t.flags|=2048),e!==null&&z(di),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),sr(jt),bt(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function _w(e,t){switch(Mc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return sr(jt),R(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return G(t),null;case 31:if(t.memoizedState!==null){if(wn(t),t.alternate===null)throw Error(o(340));li()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(wn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));li()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return z(Rt),null;case 4:return R(),null;case 10:return sr(t.type),null;case 22:case 23:return wn(t),Xc(),e!==null&&z(di),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return sr(jt),null;case 25:return null;default:return null}}function cm(e,t){switch(Mc(t),t.tag){case 3:sr(jt),R();break;case 26:case 27:case 5:G(t);break;case 4:R();break;case 31:t.memoizedState!==null&&wn(t);break;case 13:wn(t);break;case 19:z(Rt);break;case 10:sr(t.type);break;case 22:case 23:wn(t),Xc(),e!==null&&z(di);break;case 24:sr(jt)}}function ro(e,t){try{var s=t.updateQueue,a=s!==null?s.lastEffect:null;if(a!==null){var d=a.next;s=d;do{if((s.tag&e)===e){a=void 0;var h=s.create,v=s.inst;a=h(),v.destroy=a}s=s.next}while(s!==d)}}catch(k){ft(t,t.return,k)}}function Or(e,t,s){try{var a=t.updateQueue,d=a!==null?a.lastEffect:null;if(d!==null){var h=d.next;a=h;do{if((a.tag&e)===e){var v=a.inst,k=v.destroy;if(k!==void 0){v.destroy=void 0,d=t;var X=s,pe=k;try{pe()}catch(we){ft(d,X,we)}}}a=a.next}while(a!==h)}}catch(we){ft(t,t.return,we)}}function um(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{ep(t,s)}catch(a){ft(e,e.return,a)}}}function dm(e,t,s){s.props=gi(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(a){ft(e,t,a)}}function io(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof s=="function"?e.refCleanup=s(a):s.current=a}}catch(d){ft(e,t,d)}}function Yn(e,t){var s=e.ref,a=e.refCleanup;if(s!==null)if(typeof a=="function")try{a()}catch(d){ft(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(d){ft(e,t,d)}else s.current=null}function fm(e){var t=e.type,s=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&a.focus();break e;case"img":s.src?a.src=s.src:s.srcSet&&(a.srcset=s.srcSet)}}catch(d){ft(e,e.return,d)}}function Eu(e,t,s){try{var a=e.stateNode;Jw(a,e.type,s,t),a[ln]=t}catch(d){ft(e,e.return,d)}}function hm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Lr(e.type)||e.tag===4}function _u(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Lr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ku(e,t,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=er));else if(a!==4&&(a===27&&Lr(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(ku(e,t,s),e=e.sibling;e!==null;)ku(e,t,s),e=e.sibling}function Aa(e,t,s){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(a!==4&&(a===27&&Lr(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Aa(e,t,s),e=e.sibling;e!==null;)Aa(e,t,s),e=e.sibling}function pm(e){var t=e.stateNode,s=e.memoizedProps;try{for(var a=e.type,d=t.attributes;d.length;)t.removeAttributeNode(d[0]);Gt(t,a,s),t[Ht]=e,t[ln]=s}catch(h){ft(e,e.return,h)}}var ur=!1,Ot=!1,ju=!1,mm=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function kw(e,t){if(e=e.containerInfo,Ku=Qa,e=_h(e),xc(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var d=a.anchorOffset,h=a.focusNode;a=a.focusOffset;try{s.nodeType,h.nodeType}catch{s=null;break e}var v=0,k=-1,X=-1,pe=0,we=0,Ee=e,ge=null;t:for(;;){for(var be;Ee!==s||d!==0&&Ee.nodeType!==3||(k=v+d),Ee!==h||a!==0&&Ee.nodeType!==3||(X=v+a),Ee.nodeType===3&&(v+=Ee.nodeValue.length),(be=Ee.firstChild)!==null;)ge=Ee,Ee=be;for(;;){if(Ee===e)break t;if(ge===s&&++pe===d&&(k=v),ge===h&&++we===a&&(X=v),(be=Ee.nextSibling)!==null)break;Ee=ge,ge=Ee.parentNode}Ee=be}s=k===-1||X===-1?null:{start:k,end:X}}else s=null}s=s||{start:0,end:0}}else s=null;for(Wu={focusedElem:e,selectionRange:s},Qa=!1,Lt=t;Lt!==null;)if(t=Lt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Lt=e;else for(;Lt!==null;){switch(t=Lt,h=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)d=e[s],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,s=t,d=h.memoizedProps,h=h.memoizedState,a=s.stateNode;try{var Be=gi(s.type,d);e=a.getSnapshotBeforeUpdate(Be,h),a.__reactInternalSnapshotBeforeUpdate=e}catch(Ge){ft(s,s.return,Ge)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)ed(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ed(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,Lt=e;break}Lt=t.return}}function gm(e,t,s){var a=s.flags;switch(s.tag){case 0:case 11:case 15:fr(e,s),a&4&&ro(5,s);break;case 1:if(fr(e,s),a&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(v){ft(s,s.return,v)}else{var d=gi(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(v){ft(s,s.return,v)}}a&64&&um(s),a&512&&io(s,s.return);break;case 3:if(fr(e,s),a&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{ep(e,t)}catch(v){ft(s,s.return,v)}}break;case 27:t===null&&a&4&&pm(s);case 26:case 5:fr(e,s),t===null&&a&4&&fm(s),a&512&&io(s,s.return);break;case 12:fr(e,s);break;case 31:fr(e,s),a&4&&bm(e,s);break;case 13:fr(e,s),a&4&&Sm(e,s),a&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=Iw.bind(null,s),rx(e,s))));break;case 22:if(a=s.memoizedState!==null||ur,!a){t=t!==null&&t.memoizedState!==null||Ot,d=ur;var h=Ot;ur=a,(Ot=t)&&!h?hr(e,s,(s.subtreeFlags&8772)!==0):fr(e,s),ur=d,Ot=h}break;case 30:break;default:fr(e,s)}}function ym(e){var t=e.alternate;t!==null&&(e.alternate=null,ym(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&sc(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var St=null,un=!1;function dr(e,t,s){for(s=s.child;s!==null;)vm(e,t,s),s=s.sibling}function vm(e,t,s){if(Oe&&typeof Oe.onCommitFiberUnmount=="function")try{Oe.onCommitFiberUnmount(Ie,s)}catch{}switch(s.tag){case 26:Ot||Yn(s,t),dr(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Ot||Yn(s,t);var a=St,d=un;Lr(s.type)&&(St=s.stateNode,un=!1),dr(e,t,s),po(s.stateNode),St=a,un=d;break;case 5:Ot||Yn(s,t);case 6:if(a=St,d=un,St=null,dr(e,t,s),St=a,un=d,St!==null)if(un)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(s.stateNode)}catch(h){ft(s,t,h)}else try{St.removeChild(s.stateNode)}catch(h){ft(s,t,h)}break;case 18:St!==null&&(un?(e=St,ug(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),hs(e)):ug(St,s.stateNode));break;case 4:a=St,d=un,St=s.stateNode.containerInfo,un=!0,dr(e,t,s),St=a,un=d;break;case 0:case 11:case 14:case 15:Or(2,s,t),Ot||Or(4,s,t),dr(e,t,s);break;case 1:Ot||(Yn(s,t),a=s.stateNode,typeof a.componentWillUnmount=="function"&&dm(s,t,a)),dr(e,t,s);break;case 21:dr(e,t,s);break;case 22:Ot=(a=Ot)||s.memoizedState!==null,dr(e,t,s),Ot=a;break;default:dr(e,t,s)}}function bm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{hs(e)}catch(s){ft(t,t.return,s)}}}function Sm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{hs(e)}catch(s){ft(t,t.return,s)}}function jw(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new mm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new mm),t;default:throw Error(o(435,e.tag))}}function Oa(e,t){var s=jw(e);t.forEach(function(a){if(!s.has(a)){s.add(a);var d=zw.bind(null,e,a);a.then(d,d)}})}function dn(e,t){var s=t.deletions;if(s!==null)for(var a=0;a<s.length;a++){var d=s[a],h=e,v=t,k=v;e:for(;k!==null;){switch(k.tag){case 27:if(Lr(k.type)){St=k.stateNode,un=!1;break e}break;case 5:St=k.stateNode,un=!1;break e;case 3:case 4:St=k.stateNode.containerInfo,un=!0;break e}k=k.return}if(St===null)throw Error(o(160));vm(h,v,d),St=null,un=!1,h=d.alternate,h!==null&&(h.return=null),d.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)wm(t,e),t=t.sibling}var Bn=null;function wm(e,t){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:dn(t,e),fn(e),a&4&&(Or(3,e,e.return),ro(3,e),Or(5,e,e.return));break;case 1:dn(t,e),fn(e),a&512&&(Ot||s===null||Yn(s,s.return)),a&64&&ur&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?a:s.concat(a))));break;case 26:var d=Bn;if(dn(t,e),fn(e),a&512&&(Ot||s===null||Yn(s,s.return)),a&4){var h=s!==null?s.memoizedState:null;if(a=e.memoizedState,s===null)if(a===null)if(e.stateNode===null){e:{a=e.type,s=e.memoizedProps,d=d.ownerDocument||d;t:switch(a){case"title":h=d.getElementsByTagName("title")[0],(!h||h[As]||h[Ht]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=d.createElement(a),d.head.insertBefore(h,d.querySelector("head > title"))),Gt(h,a,s),h[Ht]=e,zt(h),a=h;break e;case"link":var v=wg("link","href",d).get(a+(s.href||""));if(v){for(var k=0;k<v.length;k++)if(h=v[k],h.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&h.getAttribute("rel")===(s.rel==null?null:s.rel)&&h.getAttribute("title")===(s.title==null?null:s.title)&&h.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){v.splice(k,1);break t}}h=d.createElement(a),Gt(h,a,s),d.head.appendChild(h);break;case"meta":if(v=wg("meta","content",d).get(a+(s.content||""))){for(k=0;k<v.length;k++)if(h=v[k],h.getAttribute("content")===(s.content==null?null:""+s.content)&&h.getAttribute("name")===(s.name==null?null:s.name)&&h.getAttribute("property")===(s.property==null?null:s.property)&&h.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&h.getAttribute("charset")===(s.charSet==null?null:s.charSet)){v.splice(k,1);break t}}h=d.createElement(a),Gt(h,a,s),d.head.appendChild(h);break;default:throw Error(o(468,a))}h[Ht]=e,zt(h),a=h}e.stateNode=a}else xg(d,e.type,e.stateNode);else e.stateNode=Sg(d,a,e.memoizedProps);else h!==a?(h===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):h.count--,a===null?xg(d,e.type,e.stateNode):Sg(d,a,e.memoizedProps)):a===null&&e.stateNode!==null&&Eu(e,e.memoizedProps,s.memoizedProps)}break;case 27:dn(t,e),fn(e),a&512&&(Ot||s===null||Yn(s,s.return)),s!==null&&a&4&&Eu(e,e.memoizedProps,s.memoizedProps);break;case 5:if(dn(t,e),fn(e),a&512&&(Ot||s===null||Yn(s,s.return)),e.flags&32){d=e.stateNode;try{Pi(d,"")}catch(Be){ft(e,e.return,Be)}}a&4&&e.stateNode!=null&&(d=e.memoizedProps,Eu(e,d,s!==null?s.memoizedProps:d)),a&1024&&(ju=!0);break;case 6:if(dn(t,e),fn(e),a&4){if(e.stateNode===null)throw Error(o(162));a=e.memoizedProps,s=e.stateNode;try{s.nodeValue=a}catch(Be){ft(e,e.return,Be)}}break;case 3:if(Xa=null,d=Bn,Bn=Fa(t.containerInfo),dn(t,e),Bn=d,fn(e),a&4&&s!==null&&s.memoizedState.isDehydrated)try{hs(t.containerInfo)}catch(Be){ft(e,e.return,Be)}ju&&(ju=!1,xm(e));break;case 4:a=Bn,Bn=Fa(e.stateNode.containerInfo),dn(t,e),fn(e),Bn=a;break;case 12:dn(t,e),fn(e);break;case 31:dn(t,e),fn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Oa(e,a)));break;case 13:dn(t,e),fn(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Ua=qe()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Oa(e,a)));break;case 22:d=e.memoizedState!==null;var X=s!==null&&s.memoizedState!==null,pe=ur,we=Ot;if(ur=pe||d,Ot=we||X,dn(t,e),Ot=we,ur=pe,fn(e),a&8192)e:for(t=e.stateNode,t._visibility=d?t._visibility&-2:t._visibility|1,d&&(s===null||X||ur||Ot||yi(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){X=s=t;try{if(h=X.stateNode,d)v=h.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{k=X.stateNode;var Ee=X.memoizedProps.style,ge=Ee!=null&&Ee.hasOwnProperty("display")?Ee.display:null;k.style.display=ge==null||typeof ge=="boolean"?"":(""+ge).trim()}}catch(Be){ft(X,X.return,Be)}}}else if(t.tag===6){if(s===null){X=t;try{X.stateNode.nodeValue=d?"":X.memoizedProps}catch(Be){ft(X,X.return,Be)}}}else if(t.tag===18){if(s===null){X=t;try{var be=X.stateNode;d?dg(be,!0):dg(X.stateNode,!1)}catch(Be){ft(X,X.return,Be)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(s=a.retryQueue,s!==null&&(a.retryQueue=null,Oa(e,s))));break;case 19:dn(t,e),fn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,Oa(e,a)));break;case 30:break;case 21:break;default:dn(t,e),fn(e)}}function fn(e){var t=e.flags;if(t&2){try{for(var s,a=e.return;a!==null;){if(hm(a)){s=a;break}a=a.return}if(s==null)throw Error(o(160));switch(s.tag){case 27:var d=s.stateNode,h=_u(e);Aa(e,h,d);break;case 5:var v=s.stateNode;s.flags&32&&(Pi(v,""),s.flags&=-33);var k=_u(e);Aa(e,k,v);break;case 3:case 4:var X=s.stateNode.containerInfo,pe=_u(e);ku(e,pe,X);break;default:throw Error(o(161))}}catch(we){ft(e,e.return,we)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function xm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;xm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function fr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)gm(e,t.alternate,t),t=t.sibling}function yi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Or(4,t,t.return),yi(t);break;case 1:Yn(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&dm(t,t.return,s),yi(t);break;case 27:po(t.stateNode);case 26:case 5:Yn(t,t.return),yi(t);break;case 22:t.memoizedState===null&&yi(t);break;case 30:yi(t);break;default:yi(t)}e=e.sibling}}function hr(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,d=e,h=t,v=h.flags;switch(h.tag){case 0:case 11:case 15:hr(d,h,s),ro(4,h);break;case 1:if(hr(d,h,s),a=h,d=a.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(pe){ft(a,a.return,pe)}if(a=h,d=a.updateQueue,d!==null){var k=a.stateNode;try{var X=d.shared.hiddenCallbacks;if(X!==null)for(d.shared.hiddenCallbacks=null,d=0;d<X.length;d++)Zh(X[d],k)}catch(pe){ft(a,a.return,pe)}}s&&v&64&&um(h),io(h,h.return);break;case 27:pm(h);case 26:case 5:hr(d,h,s),s&&a===null&&v&4&&fm(h),io(h,h.return);break;case 12:hr(d,h,s);break;case 31:hr(d,h,s),s&&v&4&&bm(d,h);break;case 13:hr(d,h,s),s&&v&4&&Sm(d,h);break;case 22:h.memoizedState===null&&hr(d,h,s),io(h,h.return);break;case 30:break;default:hr(d,h,s)}t=t.sibling}}function Nu(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Vs(s))}function Au(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Vs(e))}function Hn(e,t,s,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Tm(e,t,s,a),t=t.sibling}function Tm(e,t,s,a){var d=t.flags;switch(t.tag){case 0:case 11:case 15:Hn(e,t,s,a),d&2048&&ro(9,t);break;case 1:Hn(e,t,s,a);break;case 3:Hn(e,t,s,a),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Vs(e)));break;case 12:if(d&2048){Hn(e,t,s,a),e=t.stateNode;try{var h=t.memoizedProps,v=h.id,k=h.onPostCommit;typeof k=="function"&&k(v,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(X){ft(t,t.return,X)}}else Hn(e,t,s,a);break;case 31:Hn(e,t,s,a);break;case 13:Hn(e,t,s,a);break;case 23:break;case 22:h=t.stateNode,v=t.alternate,t.memoizedState!==null?h._visibility&2?Hn(e,t,s,a):so(e,t):h._visibility&2?Hn(e,t,s,a):(h._visibility|=2,ns(e,t,s,a,(t.subtreeFlags&10256)!==0||!1)),d&2048&&Nu(v,t);break;case 24:Hn(e,t,s,a),d&2048&&Au(t.alternate,t);break;default:Hn(e,t,s,a)}}function ns(e,t,s,a,d){for(d=d&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var h=e,v=t,k=s,X=a,pe=v.flags;switch(v.tag){case 0:case 11:case 15:ns(h,v,k,X,d),ro(8,v);break;case 23:break;case 22:var we=v.stateNode;v.memoizedState!==null?we._visibility&2?ns(h,v,k,X,d):so(h,v):(we._visibility|=2,ns(h,v,k,X,d)),d&&pe&2048&&Nu(v.alternate,v);break;case 24:ns(h,v,k,X,d),d&&pe&2048&&Au(v.alternate,v);break;default:ns(h,v,k,X,d)}t=t.sibling}}function so(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,a=t,d=a.flags;switch(a.tag){case 22:so(s,a),d&2048&&Nu(a.alternate,a);break;case 24:so(s,a),d&2048&&Au(a.alternate,a);break;default:so(s,a)}t=t.sibling}}var oo=8192;function rs(e,t,s){if(e.subtreeFlags&oo)for(e=e.child;e!==null;)Cm(e,t,s),e=e.sibling}function Cm(e,t,s){switch(e.tag){case 26:rs(e,t,s),e.flags&oo&&e.memoizedState!==null&&mx(s,Bn,e.memoizedState,e.memoizedProps);break;case 5:rs(e,t,s);break;case 3:case 4:var a=Bn;Bn=Fa(e.stateNode.containerInfo),rs(e,t,s),Bn=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=oo,oo=16777216,rs(e,t,s),oo=a):rs(e,t,s));break;default:rs(e,t,s)}}function Rm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ao(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var a=t[s];Lt=a,_m(a,e)}Rm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Em(e),e=e.sibling}function Em(e){switch(e.tag){case 0:case 11:case 15:ao(e),e.flags&2048&&Or(9,e,e.return);break;case 3:ao(e);break;case 12:ao(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ma(e)):ao(e);break;default:ao(e)}}function Ma(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var a=t[s];Lt=a,_m(a,e)}Rm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Or(8,t,t.return),Ma(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,Ma(t));break;default:Ma(t)}e=e.sibling}}function _m(e,t){for(;Lt!==null;){var s=Lt;switch(s.tag){case 0:case 11:case 15:Or(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var a=s.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Vs(s.memoizedState.cache)}if(a=s.child,a!==null)a.return=s,Lt=a;else e:for(s=e;Lt!==null;){a=Lt;var d=a.sibling,h=a.return;if(ym(a),a===s){Lt=null;break e}if(d!==null){d.return=h,Lt=d;break e}Lt=h}}}var Nw={getCacheForType:function(e){var t=$t(jt),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s},cacheSignal:function(){return $t(jt).controller.signal}},Aw=typeof WeakMap=="function"?WeakMap:Map,ct=0,gt=null,Ze=null,nt=0,dt=0,xn=null,Mr=!1,is=!1,Ou=!1,pr=0,Ct=0,Ur=0,vi=0,Mu=0,Tn=0,ss=0,lo=null,hn=null,Uu=!1,Ua=0,km=0,Da=1/0,Pa=null,Dr=null,It=0,Pr=null,os=null,mr=0,Du=0,Pu=null,jm=null,co=0,Iu=null;function Cn(){return(ct&2)!==0&&nt!==0?nt&-nt:q.T!==null?$u():Gf()}function Nm(){if(Tn===0)if((nt&536870912)===0||st){var e=ji;ji<<=1,(ji&3932160)===0&&(ji=262144),Tn=e}else Tn=536870912;return e=Sn.current,e!==null&&(e.flags|=32),Tn}function pn(e,t,s){(e===gt&&(dt===2||dt===9)||e.cancelPendingCommit!==null)&&(as(e,0),Ir(e,nt,Tn,!1)),Ns(e,s),((ct&2)===0||e!==gt)&&(e===gt&&((ct&2)===0&&(vi|=s),Ct===4&&Ir(e,nt,Tn,!1)),Xn(e))}function Am(e,t,s){if((ct&6)!==0)throw Error(o(327));var a=!s&&(t&127)===0&&(t&e.expiredLanes)===0||js(e,t),d=a?Uw(e,t):Lu(e,t,!0),h=a;do{if(d===0){is&&!a&&Ir(e,t,0,!1);break}else{if(s=e.current.alternate,h&&!Ow(s)){d=Lu(e,t,!1),h=!1;continue}if(d===2){if(h=t,e.errorRecoveryDisabledLanes&h)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){t=v;e:{var k=e;d=lo;var X=k.current.memoizedState.isDehydrated;if(X&&(as(k,v).flags|=256),v=Lu(k,v,!1),v!==2){if(Ou&&!X){k.errorRecoveryDisabledLanes|=h,vi|=h,d=4;break e}h=hn,hn=d,h!==null&&(hn===null?hn=h:hn.push.apply(hn,h))}d=v}if(h=!1,d!==2)continue}}if(d===1){as(e,0),Ir(e,t,0,!0);break}e:{switch(a=e,h=d,h){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:Ir(a,t,Tn,!Mr);break e;case 2:hn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(d=Ua+300-qe(),10<d)){if(Ir(a,t,Tn,!Mr),Fo(a,0,!0)!==0)break e;mr=t,a.timeoutHandle=lg(Om.bind(null,a,s,hn,Pa,Uu,t,Tn,vi,ss,Mr,h,"Throttled",-0,0),d);break e}Om(a,s,hn,Pa,Uu,t,Tn,vi,ss,Mr,h,null,-0,0)}}break}while(!0);Xn(e)}function Om(e,t,s,a,d,h,v,k,X,pe,we,Ee,ge,be){if(e.timeoutHandle=-1,Ee=t.subtreeFlags,Ee&8192||(Ee&16785408)===16785408){Ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:er},Cm(t,h,Ee);var Be=(h&62914560)===h?Ua-qe():(h&4194048)===h?km-qe():0;if(Be=gx(Ee,Be),Be!==null){mr=h,e.cancelPendingCommit=Be(Bm.bind(null,e,t,h,s,a,d,v,k,X,we,Ee,null,ge,be)),Ir(e,h,v,!pe);return}}Bm(e,t,h,s,a,d,v,k,X)}function Ow(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var a=0;a<s.length;a++){var d=s[a],h=d.getSnapshot;d=d.value;try{if(!vn(h(),d))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ir(e,t,s,a){t&=~Mu,t&=~vi,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var d=t;0<d;){var h=31-Le(d),v=1<<h;a[h]=-1,d&=~v}s!==0&&qf(e,s,t)}function Ia(){return(ct&6)===0?(uo(0),!1):!0}function zu(){if(Ze!==null){if(dt===0)var e=Ze.return;else e=Ze,ir=ci=null,eu(e),Wi=null,Fs=0,e=Ze;for(;e!==null;)cm(e.alternate,e),e=e.return;Ze=null}}function as(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,Qw(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),mr=0,zu(),gt=e,Ze=s=nr(e.current,null),nt=t,dt=0,xn=null,Mr=!1,is=js(e,t),Ou=!1,ss=Tn=Mu=vi=Ur=Ct=0,hn=lo=null,Uu=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var d=31-Le(a),h=1<<d;t|=e[d],a&=~h}return pr=t,ia(),s}function Mm(e,t){Xe=null,q.H=eo,t===Ki||t===fa?(t=Jh(),dt=3):t===qc?(t=Jh(),dt=4):dt=t===gu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,xn=t,Ze===null&&(Ct=1,Ea(e,Nn(t,e.current)))}function Um(){var e=Sn.current;return e===null?!0:(nt&4194048)===nt?Un===null:(nt&62914560)===nt||(nt&536870912)!==0?e===Un:!1}function Dm(){var e=q.H;return q.H=eo,e===null?eo:e}function Pm(){var e=q.A;return q.A=Nw,e}function za(){Ct=4,Mr||(nt&4194048)!==nt&&Sn.current!==null||(is=!0),(Ur&134217727)===0&&(vi&134217727)===0||gt===null||Ir(gt,nt,Tn,!1)}function Lu(e,t,s){var a=ct;ct|=2;var d=Dm(),h=Pm();(gt!==e||nt!==t)&&(Pa=null,as(e,t)),t=!1;var v=Ct;e:do try{if(dt!==0&&Ze!==null){var k=Ze,X=xn;switch(dt){case 8:zu(),v=6;break e;case 3:case 2:case 9:case 6:Sn.current===null&&(t=!0);var pe=dt;if(dt=0,xn=null,ls(e,k,X,pe),s&&is){v=0;break e}break;default:pe=dt,dt=0,xn=null,ls(e,k,X,pe)}}Mw(),v=Ct;break}catch(we){Mm(e,we)}while(!0);return t&&e.shellSuspendCounter++,ir=ci=null,ct=a,q.H=d,q.A=h,Ze===null&&(gt=null,nt=0,ia()),v}function Mw(){for(;Ze!==null;)Im(Ze)}function Uw(e,t){var s=ct;ct|=2;var a=Dm(),d=Pm();gt!==e||nt!==t?(Pa=null,Da=qe()+500,as(e,t)):is=js(e,t);e:do try{if(dt!==0&&Ze!==null){t=Ze;var h=xn;t:switch(dt){case 1:dt=0,xn=null,ls(e,t,h,1);break;case 2:case 9:if(Yh(h)){dt=0,xn=null,zm(t);break}t=function(){dt!==2&&dt!==9||gt!==e||(dt=7),Xn(e)},h.then(t,t);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:Yh(h)?(dt=0,xn=null,zm(t)):(dt=0,xn=null,ls(e,t,h,7));break;case 5:var v=null;switch(Ze.tag){case 26:v=Ze.memoizedState;case 5:case 27:var k=Ze;if(v?Tg(v):k.stateNode.complete){dt=0,xn=null;var X=k.sibling;if(X!==null)Ze=X;else{var pe=k.return;pe!==null?(Ze=pe,La(pe)):Ze=null}break t}}dt=0,xn=null,ls(e,t,h,5);break;case 6:dt=0,xn=null,ls(e,t,h,6);break;case 8:zu(),Ct=6;break e;default:throw Error(o(462))}}Dw();break}catch(we){Mm(e,we)}while(!0);return ir=ci=null,q.H=a,q.A=d,ct=s,Ze!==null?0:(gt=null,nt=0,ia(),Ct)}function Dw(){for(;Ze!==null&&!je();)Im(Ze)}function Im(e){var t=am(e.alternate,e,pr);e.memoizedProps=e.pendingProps,t===null?La(e):Ze=t}function zm(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=tm(s,t,t.pendingProps,t.type,void 0,nt);break;case 11:t=tm(s,t,t.pendingProps,t.type.render,t.ref,nt);break;case 5:eu(t);default:cm(s,t),t=Ze=Ph(t,pr),t=am(s,t,pr)}e.memoizedProps=e.pendingProps,t===null?La(e):Ze=t}function ls(e,t,s,a){ir=ci=null,eu(t),Wi=null,Fs=0;var d=t.return;try{if(Tw(e,d,t,s,nt)){Ct=1,Ea(e,Nn(s,e.current)),Ze=null;return}}catch(h){if(d!==null)throw Ze=d,h;Ct=1,Ea(e,Nn(s,e.current)),Ze=null;return}t.flags&32768?(st||a===1?e=!0:is||(nt&536870912)!==0?e=!1:(Mr=e=!0,(a===2||a===9||a===3||a===6)&&(a=Sn.current,a!==null&&a.tag===13&&(a.flags|=16384))),Lm(t,e)):La(t)}function La(e){var t=e;do{if((t.flags&32768)!==0){Lm(t,Mr);return}e=t.return;var s=Ew(t.alternate,t,pr);if(s!==null){Ze=s;return}if(t=t.sibling,t!==null){Ze=t;return}Ze=t=e}while(t!==null);Ct===0&&(Ct=5)}function Lm(e,t){do{var s=_w(e.alternate,e);if(s!==null){s.flags&=32767,Ze=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){Ze=e;return}Ze=e=s}while(e!==null);Ct=6,Ze=null}function Bm(e,t,s,a,d,h,v,k,X){e.cancelPendingCommit=null;do Ba();while(It!==0);if((ct&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(h=t.lanes|t.childLanes,h|=_c,pS(e,s,h,v,k,X),e===gt&&(Ze=gt=null,nt=0),os=t,Pr=e,mr=s,Du=h,Pu=d,jm=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Lw(P,function(){return Gm(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=q.T,q.T=null,d=D.p,D.p=2,v=ct,ct|=4;try{kw(e,t,s)}finally{ct=v,D.p=d,q.T=a}}It=1,Hm(),qm(),$m()}}function Hm(){if(It===1){It=0;var e=Pr,t=os,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=q.T,q.T=null;var a=D.p;D.p=2;var d=ct;ct|=4;try{wm(t,e);var h=Wu,v=_h(e.containerInfo),k=h.focusedElem,X=h.selectionRange;if(v!==k&&k&&k.ownerDocument&&Eh(k.ownerDocument.documentElement,k)){if(X!==null&&xc(k)){var pe=X.start,we=X.end;if(we===void 0&&(we=pe),"selectionStart"in k)k.selectionStart=pe,k.selectionEnd=Math.min(we,k.value.length);else{var Ee=k.ownerDocument||document,ge=Ee&&Ee.defaultView||window;if(ge.getSelection){var be=ge.getSelection(),Be=k.textContent.length,Ge=Math.min(X.start,Be),mt=X.end===void 0?Ge:Math.min(X.end,Be);!be.extend&&Ge>mt&&(v=mt,mt=Ge,Ge=v);var ae=Rh(k,Ge),ee=Rh(k,mt);if(ae&&ee&&(be.rangeCount!==1||be.anchorNode!==ae.node||be.anchorOffset!==ae.offset||be.focusNode!==ee.node||be.focusOffset!==ee.offset)){var de=Ee.createRange();de.setStart(ae.node,ae.offset),be.removeAllRanges(),Ge>mt?(be.addRange(de),be.extend(ee.node,ee.offset)):(de.setEnd(ee.node,ee.offset),be.addRange(de))}}}}for(Ee=[],be=k;be=be.parentNode;)be.nodeType===1&&Ee.push({element:be,left:be.scrollLeft,top:be.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<Ee.length;k++){var Te=Ee[k];Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}}Qa=!!Ku,Wu=Ku=null}finally{ct=d,D.p=a,q.T=s}}e.current=t,It=2}}function qm(){if(It===2){It=0;var e=Pr,t=os,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=q.T,q.T=null;var a=D.p;D.p=2;var d=ct;ct|=4;try{gm(e,t.alternate,t)}finally{ct=d,D.p=a,q.T=s}}It=3}}function $m(){if(It===4||It===3){It=0,Me();var e=Pr,t=os,s=mr,a=jm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?It=5:(It=0,os=Pr=null,Vm(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(Dr=null),rc(s),t=t.stateNode,Oe&&typeof Oe.onCommitFiberRoot=="function")try{Oe.onCommitFiberRoot(Ie,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=q.T,d=D.p,D.p=2,q.T=null;try{for(var h=e.onRecoverableError,v=0;v<a.length;v++){var k=a[v];h(k.value,{componentStack:k.stack})}}finally{q.T=t,D.p=d}}(mr&3)!==0&&Ba(),Xn(e),d=e.pendingLanes,(s&261930)!==0&&(d&42)!==0?e===Iu?co++:(co=0,Iu=e):co=0,uo(0)}}function Vm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Vs(t)))}function Ba(){return Hm(),qm(),$m(),Gm()}function Gm(){if(It!==5)return!1;var e=Pr,t=Du;Du=0;var s=rc(mr),a=q.T,d=D.p;try{D.p=32>s?32:s,q.T=null,s=Pu,Pu=null;var h=Pr,v=mr;if(It=0,os=Pr=null,mr=0,(ct&6)!==0)throw Error(o(331));var k=ct;if(ct|=4,Em(h.current),Tm(h,h.current,v,s),ct=k,uo(0,!1),Oe&&typeof Oe.onPostCommitFiberRoot=="function")try{Oe.onPostCommitFiberRoot(Ie,h)}catch{}return!0}finally{D.p=d,q.T=a,Vm(e,t)}}function Fm(e,t,s){t=Nn(s,t),t=mu(e.stateNode,t,2),e=jr(e,t,2),e!==null&&(Ns(e,2),Xn(e))}function ft(e,t,s){if(e.tag===3)Fm(e,e,s);else for(;t!==null;){if(t.tag===3){Fm(t,e,s);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Dr===null||!Dr.has(a))){e=Nn(s,e),s=Yp(2),a=jr(t,s,2),a!==null&&(Xp(s,a,t,e),Ns(a,2),Xn(a));break}}t=t.return}}function Bu(e,t,s){var a=e.pingCache;if(a===null){a=e.pingCache=new Aw;var d=new Set;a.set(t,d)}else d=a.get(t),d===void 0&&(d=new Set,a.set(t,d));d.has(s)||(Ou=!0,d.add(s),e=Pw.bind(null,e,t,s),t.then(e,e))}function Pw(e,t,s){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,gt===e&&(nt&s)===s&&(Ct===4||Ct===3&&(nt&62914560)===nt&&300>qe()-Ua?(ct&2)===0&&as(e,0):Mu|=s,ss===nt&&(ss=0)),Xn(e)}function Ym(e,t){t===0&&(t=Hf()),e=oi(e,t),e!==null&&(Ns(e,t),Xn(e))}function Iw(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Ym(e,s)}function zw(e,t){var s=0;switch(e.tag){case 31:case 13:var a=e.stateNode,d=e.memoizedState;d!==null&&(s=d.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(o(314))}a!==null&&a.delete(t),Ym(e,s)}function Lw(e,t){return _e(e,t)}var Ha=null,cs=null,Hu=!1,qa=!1,qu=!1,zr=0;function Xn(e){e!==cs&&e.next===null&&(cs===null?Ha=cs=e:cs=cs.next=e),qa=!0,Hu||(Hu=!0,Hw())}function uo(e,t){if(!qu&&qa){qu=!0;do for(var s=!1,a=Ha;a!==null;){if(e!==0){var d=a.pendingLanes;if(d===0)var h=0;else{var v=a.suspendedLanes,k=a.pingedLanes;h=(1<<31-Le(42|e)+1)-1,h&=d&~(v&~k),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(s=!0,Wm(a,h))}else h=nt,h=Fo(a,a===gt?h:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(h&3)===0||js(a,h)||(s=!0,Wm(a,h));a=a.next}while(s);qu=!1}}function Bw(){Xm()}function Xm(){qa=Hu=!1;var e=0;zr!==0&&Ww()&&(e=zr);for(var t=qe(),s=null,a=Ha;a!==null;){var d=a.next,h=Jm(a,t);h===0?(a.next=null,s===null?Ha=d:s.next=d,d===null&&(cs=s)):(s=a,(e!==0||(h&3)!==0)&&(qa=!0)),a=d}It!==0&&It!==5||uo(e),zr!==0&&(zr=0)}function Jm(e,t){for(var s=e.suspendedLanes,a=e.pingedLanes,d=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var v=31-Le(h),k=1<<v,X=d[v];X===-1?((k&s)===0||(k&a)!==0)&&(d[v]=hS(k,t)):X<=t&&(e.expiredLanes|=k),h&=~k}if(t=gt,s=nt,s=Fo(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,s===0||e===t&&(dt===2||dt===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&Ae(a),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||js(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(a!==null&&Ae(a),rc(s)){case 2:case 8:s=T;break;case 32:s=P;break;case 268435456:s=M;break;default:s=P}return a=Km.bind(null,e),s=_e(s,a),e.callbackPriority=t,e.callbackNode=s,t}return a!==null&&a!==null&&Ae(a),e.callbackPriority=2,e.callbackNode=null,2}function Km(e,t){if(It!==0&&It!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Ba()&&e.callbackNode!==s)return null;var a=nt;return a=Fo(e,e===gt?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Am(e,a,t),Jm(e,qe()),e.callbackNode!=null&&e.callbackNode===s?Km.bind(null,e):null)}function Wm(e,t){if(Ba())return null;Am(e,t,!0)}function Hw(){Zw(function(){(ct&6)!==0?_e(U,Bw):Xm()})}function $u(){if(zr===0){var e=Xi;e===0&&(e=Xt,Xt<<=1,(Xt&261888)===0&&(Xt=256)),zr=e}return zr}function Qm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ko(""+e)}function Zm(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function qw(e,t,s,a,d){if(t==="submit"&&s&&s.stateNode===d){var h=Qm((d[ln]||null).action),v=a.submitter;v&&(t=(t=v[ln]||null)?Qm(t.formAction):v.getAttribute("formAction"),t!==null&&(h=t,v=null));var k=new ea("action","action",null,a,d);e.push({event:k,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(zr!==0){var X=v?Zm(d,v):new FormData(d);cu(s,{pending:!0,data:X,method:d.method,action:h},null,X)}}else typeof h=="function"&&(k.preventDefault(),X=v?Zm(d,v):new FormData(d),cu(s,{pending:!0,data:X,method:d.method,action:h},h,X))},currentTarget:d}]})}}for(var Vu=0;Vu<Ec.length;Vu++){var Gu=Ec[Vu],$w=Gu.toLowerCase(),Vw=Gu[0].toUpperCase()+Gu.slice(1);Ln($w,"on"+Vw)}Ln(Nh,"onAnimationEnd"),Ln(Ah,"onAnimationIteration"),Ln(Oh,"onAnimationStart"),Ln("dblclick","onDoubleClick"),Ln("focusin","onFocus"),Ln("focusout","onBlur"),Ln(ow,"onTransitionRun"),Ln(aw,"onTransitionStart"),Ln(lw,"onTransitionCancel"),Ln(Mh,"onTransitionEnd"),Ui("onMouseEnter",["mouseout","mouseover"]),Ui("onMouseLeave",["mouseout","mouseover"]),Ui("onPointerEnter",["pointerout","pointerover"]),Ui("onPointerLeave",["pointerout","pointerover"]),ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ni("onBeforeInput",["compositionend","keypress","textInput","paste"]),ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fo));function eg(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var a=e[s],d=a.event;a=a.listeners;e:{var h=void 0;if(t)for(var v=a.length-1;0<=v;v--){var k=a[v],X=k.instance,pe=k.currentTarget;if(k=k.listener,X!==h&&d.isPropagationStopped())break e;h=k,d.currentTarget=pe;try{h(d)}catch(we){ra(we)}d.currentTarget=null,h=X}else for(v=0;v<a.length;v++){if(k=a[v],X=k.instance,pe=k.currentTarget,k=k.listener,X!==h&&d.isPropagationStopped())break e;h=k,d.currentTarget=pe;try{h(d)}catch(we){ra(we)}d.currentTarget=null,h=X}}}}function et(e,t){var s=t[ic];s===void 0&&(s=t[ic]=new Set);var a=e+"__bubble";s.has(a)||(tg(t,e,2,!1),s.add(a))}function Fu(e,t,s){var a=0;t&&(a|=4),tg(s,e,a,t)}var $a="_reactListening"+Math.random().toString(36).slice(2);function Yu(e){if(!e[$a]){e[$a]=!0,Xf.forEach(function(s){s!=="selectionchange"&&(Gw.has(s)||Fu(s,!1,e),Fu(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$a]||(t[$a]=!0,Fu("selectionchange",!1,t))}}function tg(e,t,s,a){switch(Ng(t)){case 2:var d=bx;break;case 8:d=Sx;break;default:d=ld}s=d.bind(null,t,s,e),d=void 0,!hc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),a?d!==void 0?e.addEventListener(t,s,{capture:!0,passive:d}):e.addEventListener(t,s,!0):d!==void 0?e.addEventListener(t,s,{passive:d}):e.addEventListener(t,s,!1)}function Xu(e,t,s,a,d){var h=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var v=a.tag;if(v===3||v===4){var k=a.stateNode.containerInfo;if(k===d)break;if(v===4)for(v=a.return;v!==null;){var X=v.tag;if((X===3||X===4)&&v.stateNode.containerInfo===d)return;v=v.return}for(;k!==null;){if(v=Ai(k),v===null)return;if(X=v.tag,X===5||X===6||X===26||X===27){a=h=v;continue e}k=k.parentNode}}a=a.return}oh(function(){var pe=h,we=dc(s),Ee=[];e:{var ge=Uh.get(e);if(ge!==void 0){var be=ea,Be=e;switch(e){case"keypress":if(Qo(s)===0)break e;case"keydown":case"keyup":be=zS;break;case"focusin":Be="focus",be=yc;break;case"focusout":Be="blur",be=yc;break;case"beforeblur":case"afterblur":be=yc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=ch;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=ES;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=HS;break;case Nh:case Ah:case Oh:be=jS;break;case Mh:be=$S;break;case"scroll":case"scrollend":be=CS;break;case"wheel":be=GS;break;case"copy":case"cut":case"paste":be=AS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=dh;break;case"toggle":case"beforetoggle":be=YS}var Ge=(t&4)!==0,mt=!Ge&&(e==="scroll"||e==="scrollend"),ae=Ge?ge!==null?ge+"Capture":null:ge;Ge=[];for(var ee=pe,de;ee!==null;){var Te=ee;if(de=Te.stateNode,Te=Te.tag,Te!==5&&Te!==26&&Te!==27||de===null||ae===null||(Te=Ms(ee,ae),Te!=null&&Ge.push(ho(ee,Te,de))),mt)break;ee=ee.return}0<Ge.length&&(ge=new be(ge,Be,null,s,we),Ee.push({event:ge,listeners:Ge}))}}if((t&7)===0){e:{if(ge=e==="mouseover"||e==="pointerover",be=e==="mouseout"||e==="pointerout",ge&&s!==uc&&(Be=s.relatedTarget||s.fromElement)&&(Ai(Be)||Be[Ni]))break e;if((be||ge)&&(ge=we.window===we?we:(ge=we.ownerDocument)?ge.defaultView||ge.parentWindow:window,be?(Be=s.relatedTarget||s.toElement,be=pe,Be=Be?Ai(Be):null,Be!==null&&(mt=u(Be),Ge=Be.tag,Be!==mt||Ge!==5&&Ge!==27&&Ge!==6)&&(Be=null)):(be=null,Be=pe),be!==Be)){if(Ge=ch,Te="onMouseLeave",ae="onMouseEnter",ee="mouse",(e==="pointerout"||e==="pointerover")&&(Ge=dh,Te="onPointerLeave",ae="onPointerEnter",ee="pointer"),mt=be==null?ge:Os(be),de=Be==null?ge:Os(Be),ge=new Ge(Te,ee+"leave",be,s,we),ge.target=mt,ge.relatedTarget=de,Te=null,Ai(we)===pe&&(Ge=new Ge(ae,ee+"enter",Be,s,we),Ge.target=de,Ge.relatedTarget=mt,Te=Ge),mt=Te,be&&Be)t:{for(Ge=Fw,ae=be,ee=Be,de=0,Te=ae;Te;Te=Ge(Te))de++;Te=0;for(var $e=ee;$e;$e=Ge($e))Te++;for(;0<de-Te;)ae=Ge(ae),de--;for(;0<Te-de;)ee=Ge(ee),Te--;for(;de--;){if(ae===ee||ee!==null&&ae===ee.alternate){Ge=ae;break t}ae=Ge(ae),ee=Ge(ee)}Ge=null}else Ge=null;be!==null&&ng(Ee,ge,be,Ge,!1),Be!==null&&mt!==null&&ng(Ee,mt,Be,Ge,!0)}}e:{if(ge=pe?Os(pe):window,be=ge.nodeName&&ge.nodeName.toLowerCase(),be==="select"||be==="input"&&ge.type==="file")var ot=bh;else if(yh(ge))if(Sh)ot=rw;else{ot=tw;var He=ew}else be=ge.nodeName,!be||be.toLowerCase()!=="input"||ge.type!=="checkbox"&&ge.type!=="radio"?pe&&cc(pe.elementType)&&(ot=bh):ot=nw;if(ot&&(ot=ot(e,pe))){vh(Ee,ot,s,we);break e}He&&He(e,ge,pe),e==="focusout"&&pe&&ge.type==="number"&&pe.memoizedProps.value!=null&&lc(ge,"number",ge.value)}switch(He=pe?Os(pe):window,e){case"focusin":(yh(He)||He.contentEditable==="true")&&(Bi=He,Tc=pe,Hs=null);break;case"focusout":Hs=Tc=Bi=null;break;case"mousedown":Cc=!0;break;case"contextmenu":case"mouseup":case"dragend":Cc=!1,kh(Ee,s,we);break;case"selectionchange":if(sw)break;case"keydown":case"keyup":kh(Ee,s,we)}var Ke;if(bc)e:{switch(e){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else Li?mh(e,s)&&(rt="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(rt="onCompositionStart");rt&&(fh&&s.locale!=="ko"&&(Li||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&Li&&(Ke=ah()):(xr=we,pc="value"in xr?xr.value:xr.textContent,Li=!0)),He=Va(pe,rt),0<He.length&&(rt=new uh(rt,e,null,s,we),Ee.push({event:rt,listeners:He}),Ke?rt.data=Ke:(Ke=gh(s),Ke!==null&&(rt.data=Ke)))),(Ke=JS?KS(e,s):WS(e,s))&&(rt=Va(pe,"onBeforeInput"),0<rt.length&&(He=new uh("onBeforeInput","beforeinput",null,s,we),Ee.push({event:He,listeners:rt}),He.data=Ke)),qw(Ee,e,pe,s,we)}eg(Ee,t)})}function ho(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Va(e,t){for(var s=t+"Capture",a=[];e!==null;){var d=e,h=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||h===null||(d=Ms(e,s),d!=null&&a.unshift(ho(e,d,h)),d=Ms(e,t),d!=null&&a.push(ho(e,d,h))),e.tag===3)return a;e=e.return}return[]}function Fw(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ng(e,t,s,a,d){for(var h=t._reactName,v=[];s!==null&&s!==a;){var k=s,X=k.alternate,pe=k.stateNode;if(k=k.tag,X!==null&&X===a)break;k!==5&&k!==26&&k!==27||pe===null||(X=pe,d?(pe=Ms(s,h),pe!=null&&v.unshift(ho(s,pe,X))):d||(pe=Ms(s,h),pe!=null&&v.push(ho(s,pe,X)))),s=s.return}v.length!==0&&e.push({event:t,listeners:v})}var Yw=/\r\n?/g,Xw=/\u0000|\uFFFD/g;function rg(e){return(typeof e=="string"?e:""+e).replace(Yw,`
`).replace(Xw,"")}function ig(e,t){return t=rg(t),rg(e)===t}function pt(e,t,s,a,d,h){switch(s){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||Pi(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&Pi(e,""+a);break;case"className":Xo(e,"class",a);break;case"tabIndex":Xo(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Xo(e,s,a);break;case"style":ih(e,a,h);break;case"data":if(t!=="object"){Xo(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(s);break}a=Ko(""+a),e.setAttribute(s,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(s==="formAction"?(t!=="input"&&pt(e,t,"name",d.name,d,null),pt(e,t,"formEncType",d.formEncType,d,null),pt(e,t,"formMethod",d.formMethod,d,null),pt(e,t,"formTarget",d.formTarget,d,null)):(pt(e,t,"encType",d.encType,d,null),pt(e,t,"method",d.method,d,null),pt(e,t,"target",d.target,d,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(s);break}a=Ko(""+a),e.setAttribute(s,a);break;case"onClick":a!=null&&(e.onclick=er);break;case"onScroll":a!=null&&et("scroll",e);break;case"onScrollEnd":a!=null&&et("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(o(61));if(s=a.__html,s!=null){if(d.children!=null)throw Error(o(60));e.innerHTML=s}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}s=Ko(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(s,""+a):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":a===!0?e.setAttribute(s,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(s,a):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(s,a):e.removeAttribute(s);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(s):e.setAttribute(s,a);break;case"popover":et("beforetoggle",e),et("toggle",e),Yo(e,"popover",a);break;case"xlinkActuate":Zn(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Zn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Zn(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Zn(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Zn(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Zn(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Zn(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Zn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Zn(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":Yo(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=xS.get(s)||s,Yo(e,s,a))}}function Ju(e,t,s,a,d,h){switch(s){case"style":ih(e,a,h);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(o(61));if(s=a.__html,s!=null){if(d.children!=null)throw Error(o(60));e.innerHTML=s}}break;case"children":typeof a=="string"?Pi(e,a):(typeof a=="number"||typeof a=="bigint")&&Pi(e,""+a);break;case"onScroll":a!=null&&et("scroll",e);break;case"onScrollEnd":a!=null&&et("scrollend",e);break;case"onClick":a!=null&&(e.onclick=er);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Jf.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(d=s.endsWith("Capture"),t=s.slice(2,d?s.length-7:void 0),h=e[ln]||null,h=h!=null?h[s]:null,typeof h=="function"&&e.removeEventListener(t,h,d),typeof a=="function")){typeof h!="function"&&h!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,a,d);break e}s in e?e[s]=a:a===!0?e.setAttribute(s,""):Yo(e,s,a)}}}function Gt(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":et("error",e),et("load",e);var a=!1,d=!1,h;for(h in s)if(s.hasOwnProperty(h)){var v=s[h];if(v!=null)switch(h){case"src":a=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:pt(e,t,h,v,s,null)}}d&&pt(e,t,"srcSet",s.srcSet,s,null),a&&pt(e,t,"src",s.src,s,null);return;case"input":et("invalid",e);var k=h=v=d=null,X=null,pe=null;for(a in s)if(s.hasOwnProperty(a)){var we=s[a];if(we!=null)switch(a){case"name":d=we;break;case"type":v=we;break;case"checked":X=we;break;case"defaultChecked":pe=we;break;case"value":h=we;break;case"defaultValue":k=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(o(137,t));break;default:pt(e,t,a,we,s,null)}}eh(e,h,k,X,pe,v,d,!1);return;case"select":et("invalid",e),a=v=h=null;for(d in s)if(s.hasOwnProperty(d)&&(k=s[d],k!=null))switch(d){case"value":h=k;break;case"defaultValue":v=k;break;case"multiple":a=k;default:pt(e,t,d,k,s,null)}t=h,s=v,e.multiple=!!a,t!=null?Di(e,!!a,t,!1):s!=null&&Di(e,!!a,s,!0);return;case"textarea":et("invalid",e),h=d=a=null;for(v in s)if(s.hasOwnProperty(v)&&(k=s[v],k!=null))switch(v){case"value":a=k;break;case"defaultValue":d=k;break;case"children":h=k;break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(o(91));break;default:pt(e,t,v,k,s,null)}nh(e,a,d,h);return;case"option":for(X in s)s.hasOwnProperty(X)&&(a=s[X],a!=null)&&(X==="selected"?e.selected=a&&typeof a!="function"&&typeof a!="symbol":pt(e,t,X,a,s,null));return;case"dialog":et("beforetoggle",e),et("toggle",e),et("cancel",e),et("close",e);break;case"iframe":case"object":et("load",e);break;case"video":case"audio":for(a=0;a<fo.length;a++)et(fo[a],e);break;case"image":et("error",e),et("load",e);break;case"details":et("toggle",e);break;case"embed":case"source":case"link":et("error",e),et("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(pe in s)if(s.hasOwnProperty(pe)&&(a=s[pe],a!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:pt(e,t,pe,a,s,null)}return;default:if(cc(t)){for(we in s)s.hasOwnProperty(we)&&(a=s[we],a!==void 0&&Ju(e,t,we,a,s,void 0));return}}for(k in s)s.hasOwnProperty(k)&&(a=s[k],a!=null&&pt(e,t,k,a,s,null))}function Jw(e,t,s,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,h=null,v=null,k=null,X=null,pe=null,we=null;for(be in s){var Ee=s[be];if(s.hasOwnProperty(be)&&Ee!=null)switch(be){case"checked":break;case"value":break;case"defaultValue":X=Ee;default:a.hasOwnProperty(be)||pt(e,t,be,null,a,Ee)}}for(var ge in a){var be=a[ge];if(Ee=s[ge],a.hasOwnProperty(ge)&&(be!=null||Ee!=null))switch(ge){case"type":h=be;break;case"name":d=be;break;case"checked":pe=be;break;case"defaultChecked":we=be;break;case"value":v=be;break;case"defaultValue":k=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(o(137,t));break;default:be!==Ee&&pt(e,t,ge,be,a,Ee)}}ac(e,v,k,X,pe,we,h,d);return;case"select":be=v=k=ge=null;for(h in s)if(X=s[h],s.hasOwnProperty(h)&&X!=null)switch(h){case"value":break;case"multiple":be=X;default:a.hasOwnProperty(h)||pt(e,t,h,null,a,X)}for(d in a)if(h=a[d],X=s[d],a.hasOwnProperty(d)&&(h!=null||X!=null))switch(d){case"value":ge=h;break;case"defaultValue":k=h;break;case"multiple":v=h;default:h!==X&&pt(e,t,d,h,a,X)}t=k,s=v,a=be,ge!=null?Di(e,!!s,ge,!1):!!a!=!!s&&(t!=null?Di(e,!!s,t,!0):Di(e,!!s,s?[]:"",!1));return;case"textarea":be=ge=null;for(k in s)if(d=s[k],s.hasOwnProperty(k)&&d!=null&&!a.hasOwnProperty(k))switch(k){case"value":break;case"children":break;default:pt(e,t,k,null,a,d)}for(v in a)if(d=a[v],h=s[v],a.hasOwnProperty(v)&&(d!=null||h!=null))switch(v){case"value":ge=d;break;case"defaultValue":be=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(o(91));break;default:d!==h&&pt(e,t,v,d,a,h)}th(e,ge,be);return;case"option":for(var Be in s)ge=s[Be],s.hasOwnProperty(Be)&&ge!=null&&!a.hasOwnProperty(Be)&&(Be==="selected"?e.selected=!1:pt(e,t,Be,null,a,ge));for(X in a)ge=a[X],be=s[X],a.hasOwnProperty(X)&&ge!==be&&(ge!=null||be!=null)&&(X==="selected"?e.selected=ge&&typeof ge!="function"&&typeof ge!="symbol":pt(e,t,X,ge,a,be));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ge in s)ge=s[Ge],s.hasOwnProperty(Ge)&&ge!=null&&!a.hasOwnProperty(Ge)&&pt(e,t,Ge,null,a,ge);for(pe in a)if(ge=a[pe],be=s[pe],a.hasOwnProperty(pe)&&ge!==be&&(ge!=null||be!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(o(137,t));break;default:pt(e,t,pe,ge,a,be)}return;default:if(cc(t)){for(var mt in s)ge=s[mt],s.hasOwnProperty(mt)&&ge!==void 0&&!a.hasOwnProperty(mt)&&Ju(e,t,mt,void 0,a,ge);for(we in a)ge=a[we],be=s[we],!a.hasOwnProperty(we)||ge===be||ge===void 0&&be===void 0||Ju(e,t,we,ge,a,be);return}}for(var ae in s)ge=s[ae],s.hasOwnProperty(ae)&&ge!=null&&!a.hasOwnProperty(ae)&&pt(e,t,ae,null,a,ge);for(Ee in a)ge=a[Ee],be=s[Ee],!a.hasOwnProperty(Ee)||ge===be||ge==null&&be==null||pt(e,t,Ee,ge,a,be)}function sg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Kw(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,s=performance.getEntriesByType("resource"),a=0;a<s.length;a++){var d=s[a],h=d.transferSize,v=d.initiatorType,k=d.duration;if(h&&k&&sg(v)){for(v=0,k=d.responseEnd,a+=1;a<s.length;a++){var X=s[a],pe=X.startTime;if(pe>k)break;var we=X.transferSize,Ee=X.initiatorType;we&&sg(Ee)&&(X=X.responseEnd,v+=we*(X<k?1:(k-pe)/(X-pe)))}if(--a,t+=8*(h+v)/(d.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ku=null,Wu=null;function Ga(e){return e.nodeType===9?e:e.ownerDocument}function og(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ag(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Qu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Zu=null;function Ww(){var e=window.event;return e&&e.type==="popstate"?e===Zu?!1:(Zu=e,!0):(Zu=null,!1)}var lg=typeof setTimeout=="function"?setTimeout:void 0,Qw=typeof clearTimeout=="function"?clearTimeout:void 0,cg=typeof Promise=="function"?Promise:void 0,Zw=typeof queueMicrotask=="function"?queueMicrotask:typeof cg<"u"?function(e){return cg.resolve(null).then(e).catch(ex)}:lg;function ex(e){setTimeout(function(){throw e})}function Lr(e){return e==="head"}function ug(e,t){var s=t,a=0;do{var d=s.nextSibling;if(e.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"||s==="/&"){if(a===0){e.removeChild(d),hs(t);return}a--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")a++;else if(s==="html")po(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,po(s);for(var h=s.firstChild;h;){var v=h.nextSibling,k=h.nodeName;h[As]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&h.rel.toLowerCase()==="stylesheet"||s.removeChild(h),h=v}}else s==="body"&&po(e.ownerDocument.body);s=d}while(s);hs(t)}function dg(e,t){var s=e;e=0;do{var a=s.nextSibling;if(s.nodeType===1?t?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(t?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=a}while(s)}function ed(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":ed(s),sc(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function tx(e,t,s,a){for(;e.nodeType===1;){var d=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[As])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=Dn(e.nextSibling),e===null)break}return null}function nx(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Dn(e.nextSibling),e===null))return null;return e}function fg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Dn(e.nextSibling),e===null))return null;return e}function td(e){return e.data==="$?"||e.data==="$~"}function nd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function rx(e,t){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||s.readyState!=="loading")t();else{var a=function(){t(),s.removeEventListener("DOMContentLoaded",a)};s.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function Dn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var rd=null;function hg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(t===0)return Dn(e.nextSibling);t--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||t++}e=e.nextSibling}return null}function pg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(t===0)return e;t--}else s!=="/$"&&s!=="/&"||t++}e=e.previousSibling}return null}function mg(e,t,s){switch(t=Ga(s),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function po(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);sc(e)}var Pn=new Map,gg=new Set;function Fa(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var gr=D.d;D.d={f:ix,r:sx,D:ox,C:ax,L:lx,m:cx,X:dx,S:ux,M:fx};function ix(){var e=gr.f(),t=Ia();return e||t}function sx(e){var t=Oi(e);t!==null&&t.tag===5&&t.type==="form"?Mp(t):gr.r(e)}var us=typeof document>"u"?null:document;function yg(e,t,s){var a=us;if(a&&typeof t=="string"&&t){var d=kn(t);d='link[rel="'+e+'"][href="'+d+'"]',typeof s=="string"&&(d+='[crossorigin="'+s+'"]'),gg.has(d)||(gg.add(d),e={rel:e,crossOrigin:s,href:t},a.querySelector(d)===null&&(t=a.createElement("link"),Gt(t,"link",e),zt(t),a.head.appendChild(t)))}}function ox(e){gr.D(e),yg("dns-prefetch",e,null)}function ax(e,t){gr.C(e,t),yg("preconnect",e,t)}function lx(e,t,s){gr.L(e,t,s);var a=us;if(a&&e&&t){var d='link[rel="preload"][as="'+kn(t)+'"]';t==="image"&&s&&s.imageSrcSet?(d+='[imagesrcset="'+kn(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(d+='[imagesizes="'+kn(s.imageSizes)+'"]')):d+='[href="'+kn(e)+'"]';var h=d;switch(t){case"style":h=ds(e);break;case"script":h=fs(e)}Pn.has(h)||(e=E({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),Pn.set(h,e),a.querySelector(d)!==null||t==="style"&&a.querySelector(mo(h))||t==="script"&&a.querySelector(go(h))||(t=a.createElement("link"),Gt(t,"link",e),zt(t),a.head.appendChild(t)))}}function cx(e,t){gr.m(e,t);var s=us;if(s&&e){var a=t&&typeof t.as=="string"?t.as:"script",d='link[rel="modulepreload"][as="'+kn(a)+'"][href="'+kn(e)+'"]',h=d;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=fs(e)}if(!Pn.has(h)&&(e=E({rel:"modulepreload",href:e},t),Pn.set(h,e),s.querySelector(d)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(go(h)))return}a=s.createElement("link"),Gt(a,"link",e),zt(a),s.head.appendChild(a)}}}function ux(e,t,s){gr.S(e,t,s);var a=us;if(a&&e){var d=Mi(a).hoistableStyles,h=ds(e);t=t||"default";var v=d.get(h);if(!v){var k={loading:0,preload:null};if(v=a.querySelector(mo(h)))k.loading=5;else{e=E({rel:"stylesheet",href:e,"data-precedence":t},s),(s=Pn.get(h))&&id(e,s);var X=v=a.createElement("link");zt(X),Gt(X,"link",e),X._p=new Promise(function(pe,we){X.onload=pe,X.onerror=we}),X.addEventListener("load",function(){k.loading|=1}),X.addEventListener("error",function(){k.loading|=2}),k.loading|=4,Ya(v,t,a)}v={type:"stylesheet",instance:v,count:1,state:k},d.set(h,v)}}}function dx(e,t){gr.X(e,t);var s=us;if(s&&e){var a=Mi(s).hoistableScripts,d=fs(e),h=a.get(d);h||(h=s.querySelector(go(d)),h||(e=E({src:e,async:!0},t),(t=Pn.get(d))&&sd(e,t),h=s.createElement("script"),zt(h),Gt(h,"link",e),s.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},a.set(d,h))}}function fx(e,t){gr.M(e,t);var s=us;if(s&&e){var a=Mi(s).hoistableScripts,d=fs(e),h=a.get(d);h||(h=s.querySelector(go(d)),h||(e=E({src:e,async:!0,type:"module"},t),(t=Pn.get(d))&&sd(e,t),h=s.createElement("script"),zt(h),Gt(h,"link",e),s.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},a.set(d,h))}}function vg(e,t,s,a){var d=(d=_.current)?Fa(d):null;if(!d)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=ds(s.href),s=Mi(d).hoistableStyles,a=s.get(t),a||(a={type:"style",instance:null,count:0,state:null},s.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=ds(s.href);var h=Mi(d).hoistableStyles,v=h.get(e);if(v||(d=d.ownerDocument||d,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,v),(h=d.querySelector(mo(e)))&&!h._p&&(v.instance=h,v.state.loading=5),Pn.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Pn.set(e,s),h||hx(d,e,s,v.state))),t&&a===null)throw Error(o(528,""));return v}if(t&&a!==null)throw Error(o(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=fs(s),s=Mi(d).hoistableScripts,a=s.get(t),a||(a={type:"script",instance:null,count:0,state:null},s.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function ds(e){return'href="'+kn(e)+'"'}function mo(e){return'link[rel="stylesheet"]['+e+"]"}function bg(e){return E({},e,{"data-precedence":e.precedence,precedence:null})}function hx(e,t,s,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),Gt(t,"link",s),zt(t),e.head.appendChild(t))}function fs(e){return'[src="'+kn(e)+'"]'}function go(e){return"script[async]"+e}function Sg(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+kn(s.href)+'"]');if(a)return t.instance=a,zt(a),a;var d=E({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),zt(a),Gt(a,"style",d),Ya(a,s.precedence,e),t.instance=a;case"stylesheet":d=ds(s.href);var h=e.querySelector(mo(d));if(h)return t.state.loading|=4,t.instance=h,zt(h),h;a=bg(s),(d=Pn.get(d))&&id(a,d),h=(e.ownerDocument||e).createElement("link"),zt(h);var v=h;return v._p=new Promise(function(k,X){v.onload=k,v.onerror=X}),Gt(h,"link",a),t.state.loading|=4,Ya(h,s.precedence,e),t.instance=h;case"script":return h=fs(s.src),(d=e.querySelector(go(h)))?(t.instance=d,zt(d),d):(a=s,(d=Pn.get(h))&&(a=E({},s),sd(a,d)),e=e.ownerDocument||e,d=e.createElement("script"),zt(d),Gt(d,"link",a),e.head.appendChild(d),t.instance=d);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,Ya(a,s.precedence,e));return t.instance}function Ya(e,t,s){for(var a=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=a.length?a[a.length-1]:null,h=d,v=0;v<a.length;v++){var k=a[v];if(k.dataset.precedence===t)h=k;else if(h!==d)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function id(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function sd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Xa=null;function wg(e,t,s){if(Xa===null){var a=new Map,d=Xa=new Map;d.set(s,a)}else d=Xa,a=d.get(s),a||(a=new Map,d.set(s,a));if(a.has(e))return a;for(a.set(e,null),s=s.getElementsByTagName(e),d=0;d<s.length;d++){var h=s[d];if(!(h[As]||h[Ht]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var v=h.getAttribute(t)||"";v=e+v;var k=a.get(v);k?k.push(h):a.set(v,[h])}}return a}function xg(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function px(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Tg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function mx(e,t,s,a){if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=ds(a.href),h=t.querySelector(mo(d));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ja.bind(e),t.then(e,e)),s.state.loading|=4,s.instance=h,zt(h);return}h=t.ownerDocument||t,a=bg(a),(d=Pn.get(d))&&id(a,d),h=h.createElement("link"),zt(h);var v=h;v._p=new Promise(function(k,X){v.onload=k,v.onerror=X}),Gt(h,"link",a),s.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=Ja.bind(e),t.addEventListener("load",s),t.addEventListener("error",s))}}var od=0;function gx(e,t){return e.stylesheets&&e.count===0&&Wa(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var a=setTimeout(function(){if(e.stylesheets&&Wa(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+t);0<e.imgBytes&&od===0&&(od=62500*Kw());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Wa(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>od?50:800)+t);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(d)}}:null}function Ja(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wa(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ka=null;function Wa(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ka=new Map,t.forEach(yx,e),Ka=null,Ja.call(e))}function yx(e,t){if(!(t.state.loading&4)){var s=Ka.get(e);if(s)var a=s.get(null);else{s=new Map,Ka.set(e,s);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<d.length;h++){var v=d[h];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(s.set(v.dataset.precedence,v),a=v)}a&&s.set(null,a)}d=t.instance,v=d.getAttribute("data-precedence"),h=s.get(v)||a,h===a&&s.set(null,d),s.set(v,d),this.count++,a=Ja.bind(this),d.addEventListener("load",a),d.addEventListener("error",a),h?h.parentNode.insertBefore(d,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),t.state.loading|=4}}var yo={$$typeof:me,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function vx(e,t,s,a,d,h,v,k,X){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=tc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tc(0),this.hiddenUpdates=tc(null),this.identifierPrefix=a,this.onUncaughtError=d,this.onCaughtError=h,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=X,this.incompleteTransitions=new Map}function Cg(e,t,s,a,d,h,v,k,X,pe,we,Ee){return e=new vx(e,t,s,v,X,pe,we,Ee,k),t=1,h===!0&&(t|=24),h=bn(3,null,null,t),e.current=h,h.stateNode=e,t=Lc(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:a,isDehydrated:s,cache:t},$c(h),e}function Rg(e){return e?(e=$i,e):$i}function Eg(e,t,s,a,d,h){d=Rg(d),a.context===null?a.context=d:a.pendingContext=d,a=kr(t),a.payload={element:s},h=h===void 0?null:h,h!==null&&(a.callback=h),s=jr(e,a,t),s!==null&&(pn(s,e,t),Xs(s,e,t))}function _g(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function ad(e,t){_g(e,t),(e=e.alternate)&&_g(e,t)}function kg(e){if(e.tag===13||e.tag===31){var t=oi(e,67108864);t!==null&&pn(t,e,67108864),ad(e,67108864)}}function jg(e){if(e.tag===13||e.tag===31){var t=Cn();t=nc(t);var s=oi(e,t);s!==null&&pn(s,e,t),ad(e,t)}}var Qa=!0;function bx(e,t,s,a){var d=q.T;q.T=null;var h=D.p;try{D.p=2,ld(e,t,s,a)}finally{D.p=h,q.T=d}}function Sx(e,t,s,a){var d=q.T;q.T=null;var h=D.p;try{D.p=8,ld(e,t,s,a)}finally{D.p=h,q.T=d}}function ld(e,t,s,a){if(Qa){var d=cd(a);if(d===null)Xu(e,t,a,Za,s),Ag(e,a);else if(xx(d,e,t,s,a))a.stopPropagation();else if(Ag(e,a),t&4&&-1<wx.indexOf(e)){for(;d!==null;){var h=Oi(d);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var v=ti(h.pendingLanes);if(v!==0){var k=h;for(k.pendingLanes|=2,k.entangledLanes|=2;v;){var X=1<<31-Le(v);k.entanglements[1]|=X,v&=~X}Xn(h),(ct&6)===0&&(Da=qe()+500,uo(0))}}break;case 31:case 13:k=oi(h,2),k!==null&&pn(k,h,2),Ia(),ad(h,2)}if(h=cd(a),h===null&&Xu(e,t,a,Za,s),h===d)break;d=h}d!==null&&a.stopPropagation()}else Xu(e,t,a,null,s)}}function cd(e){return e=dc(e),ud(e)}var Za=null;function ud(e){if(Za=null,e=Ai(e),e!==null){var t=u(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=f(t),e!==null)return e;e=null}else if(s===31){if(e=p(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Za=e,null}function Ng(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(We()){case U:return 2;case T:return 8;case P:case ne:return 32;case M:return 268435456;default:return 32}default:return 32}}var dd=!1,Br=null,Hr=null,qr=null,vo=new Map,bo=new Map,$r=[],wx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ag(e,t){switch(e){case"focusin":case"focusout":Br=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":qr=null;break;case"pointerover":case"pointerout":vo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bo.delete(t.pointerId)}}function So(e,t,s,a,d,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:s,eventSystemFlags:a,nativeEvent:h,targetContainers:[d]},t!==null&&(t=Oi(t),t!==null&&kg(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function xx(e,t,s,a,d){switch(t){case"focusin":return Br=So(Br,e,t,s,a,d),!0;case"dragenter":return Hr=So(Hr,e,t,s,a,d),!0;case"mouseover":return qr=So(qr,e,t,s,a,d),!0;case"pointerover":var h=d.pointerId;return vo.set(h,So(vo.get(h)||null,e,t,s,a,d)),!0;case"gotpointercapture":return h=d.pointerId,bo.set(h,So(bo.get(h)||null,e,t,s,a,d)),!0}return!1}function Og(e){var t=Ai(e.target);if(t!==null){var s=u(t);if(s!==null){if(t=s.tag,t===13){if(t=f(s),t!==null){e.blockedOn=t,Ff(e.priority,function(){jg(s)});return}}else if(t===31){if(t=p(s),t!==null){e.blockedOn=t,Ff(e.priority,function(){jg(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function el(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=cd(e.nativeEvent);if(s===null){s=e.nativeEvent;var a=new s.constructor(s.type,s);uc=a,s.target.dispatchEvent(a),uc=null}else return t=Oi(s),t!==null&&kg(t),e.blockedOn=s,!1;t.shift()}return!0}function Mg(e,t,s){el(e)&&s.delete(t)}function Tx(){dd=!1,Br!==null&&el(Br)&&(Br=null),Hr!==null&&el(Hr)&&(Hr=null),qr!==null&&el(qr)&&(qr=null),vo.forEach(Mg),bo.forEach(Mg)}function tl(e,t){e.blockedOn===t&&(e.blockedOn=null,dd||(dd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Tx)))}var nl=null;function Ug(e){nl!==e&&(nl=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){nl===e&&(nl=null);for(var t=0;t<e.length;t+=3){var s=e[t],a=e[t+1],d=e[t+2];if(typeof a!="function"){if(ud(a||s)===null)continue;break}var h=Oi(s);h!==null&&(e.splice(t,3),t-=3,cu(h,{pending:!0,data:d,method:s.method,action:a},a,d))}}))}function hs(e){function t(X){return tl(X,e)}Br!==null&&tl(Br,e),Hr!==null&&tl(Hr,e),qr!==null&&tl(qr,e),vo.forEach(t),bo.forEach(t);for(var s=0;s<$r.length;s++){var a=$r[s];a.blockedOn===e&&(a.blockedOn=null)}for(;0<$r.length&&(s=$r[0],s.blockedOn===null);)Og(s),s.blockedOn===null&&$r.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(a=0;a<s.length;a+=3){var d=s[a],h=s[a+1],v=d[ln]||null;if(typeof h=="function")v||Ug(s);else if(v){var k=null;if(h&&h.hasAttribute("formAction")){if(d=h,v=h[ln]||null)k=v.formAction;else if(ud(d)!==null)continue}else k=v.action;typeof k=="function"?s[a+1]=k:(s.splice(a,3),a-=3),Ug(s)}}}function Dg(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(v){return d=v})},focusReset:"manual",scroll:"manual"})}function t(){d!==null&&(d(),d=null),a||setTimeout(s,20)}function s(){if(!a&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(s,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),d!==null&&(d(),d=null)}}}function fd(e){this._internalRoot=e}rl.prototype.render=fd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var s=t.current,a=Cn();Eg(s,a,e,t,null,null)},rl.prototype.unmount=fd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Eg(e.current,2,null,e,null,null),Ia(),t[Ni]=null}};function rl(e){this._internalRoot=e}rl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Gf();e={blockedOn:null,target:e,priority:t};for(var s=0;s<$r.length&&t!==0&&t<$r[s].priority;s++);$r.splice(s,0,e),s===0&&Og(e)}};var Pg=n.version;if(Pg!=="19.2.3")throw Error(o(527,Pg,"19.2.3"));D.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=g(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var Cx={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{Ie=il.inject(Cx),Oe=il}catch{}}return xo.createRoot=function(e,t){if(!l(e))throw Error(o(299));var s=!1,a="",d=$p,h=Vp,v=Gp;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(d=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(v=t.onRecoverableError)),t=Cg(e,1,!1,null,null,s,a,null,d,h,v,Dg),e[Ni]=t.current,Yu(e),new fd(t)},xo.hydrateRoot=function(e,t,s){if(!l(e))throw Error(o(299));var a=!1,d="",h=$p,v=Vp,k=Gp,X=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(v=s.onCaughtError),s.onRecoverableError!==void 0&&(k=s.onRecoverableError),s.formState!==void 0&&(X=s.formState)),t=Cg(e,1,!0,t,s??null,a,d,X,h,v,k,Dg),t.context=Rg(null),s=t.current,a=Cn(),a=nc(a),d=kr(a),d.callback=null,jr(s,d,a),s=a,t.current.lanes=s,Ns(t,s),Xn(t),e[Ni]=t.current,Yu(e),new rl(t)},xo.version="19.2.3",xo}var Yg;function Ux(){if(Yg)return md.exports;Yg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),md.exports=Mx(),md.exports}var Dx=Ux();var Xg="popstate";function Px(r={}){function n(o,l){let{pathname:u,search:f,hash:p}=o.location;return Ld("",{pathname:u,search:f,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function i(o,l){return typeof l=="string"?l:Oo(l)}return zx(n,i,null,r)}function wt(r,n){if(r===!1||r===null||typeof r>"u")throw new Error(n)}function zn(r,n){if(!r){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Ix(){return Math.random().toString(36).substring(2,10)}function Jg(r,n){return{usr:r.state,key:r.key,idx:n}}function Ld(r,n,i=null,o){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof n=="string"?xs(n):n,state:i,key:n&&n.key||o||Ix()}}function Oo({pathname:r="/",search:n="",hash:i=""}){return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(r+=i.charAt(0)==="#"?i:"#"+i),r}function xs(r){let n={};if(r){let i=r.indexOf("#");i>=0&&(n.hash=r.substring(i),r=r.substring(0,i));let o=r.indexOf("?");o>=0&&(n.search=r.substring(o),r=r.substring(0,o)),r&&(n.pathname=r)}return n}function zx(r,n,i,o={}){let{window:l=document.defaultView,v5Compat:u=!1}=o,f=l.history,p="POP",m=null,g=y();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function y(){return(f.state||{idx:null}).idx}function E(){p="POP";let B=y(),se=B==null?null:B-g;g=B,m&&m({action:p,location:H.location,delta:se})}function I(B,se){p="PUSH";let le=Ld(H.location,B,se);g=y()+1;let me=Jg(le,g),ce=H.createHref(le);try{f.pushState(me,"",ce)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;l.location.assign(ce)}u&&m&&m({action:p,location:H.location,delta:1})}function F(B,se){p="REPLACE";let le=Ld(H.location,B,se);g=y();let me=Jg(le,g),ce=H.createHref(le);f.replaceState(me,"",ce),u&&m&&m({action:p,location:H.location,delta:0})}function A(B){return Lx(B)}let H={get action(){return p},get location(){return r(l,f)},listen(B){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(Xg,E),m=B,()=>{l.removeEventListener(Xg,E),m=null}},createHref(B){return n(l,B)},createURL:A,encodeLocation(B){let se=A(B);return{pathname:se.pathname,search:se.search,hash:se.hash}},push:I,replace:F,go(B){return f.go(B)}};return H}function Lx(r,n=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),wt(i,"No window.location.(origin|href) available to create URL");let o=typeof r=="string"?r:Oo(r);return o=o.replace(/ $/,"%20"),!n&&o.startsWith("//")&&(o=i+o),new URL(o,i)}function ov(r,n,i="/"){return Bx(r,n,i,!1)}function Bx(r,n,i,o){let l=typeof n=="string"?xs(n):n,u=vr(l.pathname||"/",i);if(u==null)return null;let f=av(r);Hx(f);let p=null;for(let m=0;p==null&&m<f.length;++m){let g=Qx(u);p=Kx(f[m],g,o)}return p}function av(r,n=[],i=[],o="",l=!1){let u=(f,p,m=l,g)=>{let y={relativePath:g===void 0?f.path||"":g,caseSensitive:f.caseSensitive===!0,childrenIndex:p,route:f};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(o)&&m)return;wt(y.relativePath.startsWith(o),`Absolute route path "${y.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(o.length)}let E=yr([o,y.relativePath]),I=i.concat(y);f.children&&f.children.length>0&&(wt(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),av(f.children,n,I,E,m)),!(f.path==null&&!f.index)&&n.push({path:E,score:Xx(E,f.index),routesMeta:I})};return r.forEach((f,p)=>{if(f.path===""||!f.path?.includes("?"))u(f,p);else for(let m of lv(f.path))u(f,p,!0,m)}),n}function lv(r){let n=r.split("/");if(n.length===0)return[];let[i,...o]=n,l=i.endsWith("?"),u=i.replace(/\?$/,"");if(o.length===0)return l?[u,""]:[u];let f=lv(o.join("/")),p=[];return p.push(...f.map(m=>m===""?u:[u,m].join("/"))),l&&p.push(...f),p.map(m=>r.startsWith("/")&&m===""?"/":m)}function Hx(r){r.sort((n,i)=>n.score!==i.score?i.score-n.score:Jx(n.routesMeta.map(o=>o.childrenIndex),i.routesMeta.map(o=>o.childrenIndex)))}var qx=/^:[\w-]+$/,$x=3,Vx=2,Gx=1,Fx=10,Yx=-2,Kg=r=>r==="*";function Xx(r,n){let i=r.split("/"),o=i.length;return i.some(Kg)&&(o+=Yx),n&&(o+=Vx),i.filter(l=>!Kg(l)).reduce((l,u)=>l+(qx.test(u)?$x:u===""?Gx:Fx),o)}function Jx(r,n){return r.length===n.length&&r.slice(0,-1).every((o,l)=>o===n[l])?r[r.length-1]-n[n.length-1]:0}function Kx(r,n,i=!1){let{routesMeta:o}=r,l={},u="/",f=[];for(let p=0;p<o.length;++p){let m=o[p],g=p===o.length-1,y=u==="/"?n:n.slice(u.length)||"/",E=xl({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},y),I=m.route;if(!E&&g&&i&&!o[o.length-1].route.index&&(E=xl({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!E)return null;Object.assign(l,E.params),f.push({params:l,pathname:yr([u,E.pathname]),pathnameBase:n1(yr([u,E.pathnameBase])),route:I}),E.pathnameBase!=="/"&&(u=yr([u,E.pathnameBase]))}return f}function xl(r,n){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[i,o]=Wx(r.path,r.caseSensitive,r.end),l=n.match(i);if(!l)return null;let u=l[0],f=u.replace(/(.)\/+$/,"$1"),p=l.slice(1);return{params:o.reduce((g,{paramName:y,isOptional:E},I)=>{if(y==="*"){let A=p[I]||"";f=u.slice(0,u.length-A.length).replace(/(.)\/+$/,"$1")}const F=p[I];return E&&!F?g[y]=void 0:g[y]=(F||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:f,pattern:r}}function Wx(r,n=!1,i=!0){zn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let o=[],l="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,p,m)=>(o.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(o.push({paramName:"*"}),l+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?l+="\\/*$":r!==""&&r!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,n?void 0:"i"),o]}function Qx(r){try{return r.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return zn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),r}}function vr(r,n){if(n==="/")return r;if(!r.toLowerCase().startsWith(n.toLowerCase()))return null;let i=n.endsWith("/")?n.length-1:n.length,o=r.charAt(i);return o&&o!=="/"?null:r.slice(i)||"/"}var cv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zx=r=>cv.test(r);function e1(r,n="/"){let{pathname:i,search:o="",hash:l=""}=typeof r=="string"?xs(r):r,u;if(i)if(Zx(i))u=i;else{if(i.includes("//")){let f=i;i=i.replace(/\/\/+/g,"/"),zn(!1,`Pathnames cannot have embedded double slashes - normalizing ${f} -> ${i}`)}i.startsWith("/")?u=Wg(i.substring(1),"/"):u=Wg(i,n)}else u=n;return{pathname:u,search:r1(o),hash:i1(l)}}function Wg(r,n){let i=n.replace(/\/+$/,"").split("/");return r.split("/").forEach(l=>{l===".."?i.length>1&&i.pop():l!=="."&&i.push(l)}),i.length>1?i.join("/"):"/"}function bd(r,n,i,o){return`Cannot include a '${r}' character in a manually specified \`to.${n}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function t1(r){return r.filter((n,i)=>i===0||n.route.path&&n.route.path.length>0)}function nf(r){let n=t1(r);return n.map((i,o)=>o===n.length-1?i.pathname:i.pathnameBase)}function rf(r,n,i,o=!1){let l;typeof r=="string"?l=xs(r):(l={...r},wt(!l.pathname||!l.pathname.includes("?"),bd("?","pathname","search",l)),wt(!l.pathname||!l.pathname.includes("#"),bd("#","pathname","hash",l)),wt(!l.search||!l.search.includes("#"),bd("#","search","hash",l)));let u=r===""||l.pathname==="",f=u?"/":l.pathname,p;if(f==null)p=i;else{let E=n.length-1;if(!o&&f.startsWith("..")){let I=f.split("/");for(;I[0]==="..";)I.shift(),E-=1;l.pathname=I.join("/")}p=E>=0?n[E]:"/"}let m=e1(l,p),g=f&&f!=="/"&&f.endsWith("/"),y=(u||f===".")&&i.endsWith("/");return!m.pathname.endsWith("/")&&(g||y)&&(m.pathname+="/"),m}var yr=r=>r.join("/").replace(/\/\/+/g,"/"),n1=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),r1=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,i1=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,s1=class{constructor(r,n,i,o=!1){this.status=r,this.statusText=n||"",this.internal=o,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function o1(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function a1(r){return r.map(n=>n.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var uv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function dv(r,n){let i=r;if(typeof i!="string"||!cv.test(i))return{absoluteURL:void 0,isExternal:!1,to:i};let o=i,l=!1;if(uv)try{let u=new URL(window.location.href),f=i.startsWith("//")?new URL(u.protocol+i):new URL(i),p=vr(f.pathname,n);f.origin===u.origin&&p!=null?i=p+f.search+f.hash:l=!0}catch{zn(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:l,to:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var fv=["POST","PUT","PATCH","DELETE"];new Set(fv);var l1=["GET",...fv];new Set(l1);var Ts=O.createContext(null);Ts.displayName="DataRouter";var Ml=O.createContext(null);Ml.displayName="DataRouterState";var c1=O.createContext(!1),hv=O.createContext({isTransitioning:!1});hv.displayName="ViewTransition";var u1=O.createContext(new Map);u1.displayName="Fetchers";var d1=O.createContext(null);d1.displayName="Await";var En=O.createContext(null);En.displayName="Navigation";var Io=O.createContext(null);Io.displayName="Location";var $n=O.createContext({outlet:null,matches:[],isDataRoute:!1});$n.displayName="Route";var sf=O.createContext(null);sf.displayName="RouteError";var pv="REACT_ROUTER_ERROR",f1="REDIRECT",h1="ROUTE_ERROR_RESPONSE";function p1(r){if(r.startsWith(`${pv}:${f1}:{`))try{let n=JSON.parse(r.slice(28));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.location=="string"&&typeof n.reloadDocument=="boolean"&&typeof n.replace=="boolean")return n}catch{}}function m1(r){if(r.startsWith(`${pv}:${h1}:{`))try{let n=JSON.parse(r.slice(40));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string")return new s1(n.status,n.statusText,n.data)}catch{}}function g1(r,{relative:n}={}){wt(Cs(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:o}=O.useContext(En),{hash:l,pathname:u,search:f}=zo(r,{relative:n}),p=u;return i!=="/"&&(p=u==="/"?i:yr([i,u])),o.createHref({pathname:p,search:f,hash:l})}function Cs(){return O.useContext(Io)!=null}function Qn(){return wt(Cs(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(Io).location}var mv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function gv(r){O.useContext(En).static||O.useLayoutEffect(r)}function br(){let{isDataRoute:r}=O.useContext($n);return r?j1():y1()}function y1(){wt(Cs(),"useNavigate() may be used only in the context of a <Router> component.");let r=O.useContext(Ts),{basename:n,navigator:i}=O.useContext(En),{matches:o}=O.useContext($n),{pathname:l}=Qn(),u=JSON.stringify(nf(o)),f=O.useRef(!1);return gv(()=>{f.current=!0}),O.useCallback((m,g={})=>{if(zn(f.current,mv),!f.current)return;if(typeof m=="number"){i.go(m);return}let y=rf(m,JSON.parse(u),l,g.relative==="path");r==null&&n!=="/"&&(y.pathname=y.pathname==="/"?n:yr([n,y.pathname])),(g.replace?i.replace:i.push)(y,g.state,g)},[n,i,u,l,r])}O.createContext(null);function yv(){let{matches:r}=O.useContext($n),n=r[r.length-1];return n?n.params:{}}function zo(r,{relative:n}={}){let{matches:i}=O.useContext($n),{pathname:o}=Qn(),l=JSON.stringify(nf(i));return O.useMemo(()=>rf(r,JSON.parse(l),o,n==="path"),[r,l,o,n])}function v1(r,n){return vv(r,n)}function vv(r,n,i,o,l){wt(Cs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=O.useContext(En),{matches:f}=O.useContext($n),p=f[f.length-1],m=p?p.params:{},g=p?p.pathname:"/",y=p?p.pathnameBase:"/",E=p&&p.route;{let le=E&&E.path||"";Sv(g,!E||le.endsWith("*")||le.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${le}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${le}"> to <Route path="${le==="/"?"*":`${le}/*`}">.`)}let I=Qn(),F;if(n){let le=typeof n=="string"?xs(n):n;wt(y==="/"||le.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${le.pathname}" was given in the \`location\` prop.`),F=le}else F=I;let A=F.pathname||"/",H=A;if(y!=="/"){let le=y.replace(/^\//,"").split("/");H="/"+A.replace(/^\//,"").split("/").slice(le.length).join("/")}let B=ov(r,{pathname:H});zn(E||B!=null,`No routes matched location "${F.pathname}${F.search}${F.hash}" `),zn(B==null||B[B.length-1].route.element!==void 0||B[B.length-1].route.Component!==void 0||B[B.length-1].route.lazy!==void 0,`Matched leaf route at location "${F.pathname}${F.search}${F.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let se=T1(B&&B.map(le=>Object.assign({},le,{params:Object.assign({},m,le.params),pathname:yr([y,u.encodeLocation?u.encodeLocation(le.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:le.pathname]),pathnameBase:le.pathnameBase==="/"?y:yr([y,u.encodeLocation?u.encodeLocation(le.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:le.pathnameBase])})),f,i,o,l);return n&&se?O.createElement(Io.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...F},navigationType:"POP"}},se):se}function b1(){let r=k1(),n=o1(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),i=r instanceof Error?r.stack:null,o="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:o},u={padding:"2px 4px",backgroundColor:o},f=null;return console.error("Error handled by React Router default ErrorBoundary:",r),f=O.createElement(O.Fragment,null,O.createElement("p",null," Hey developer "),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:u},"ErrorBoundary")," or"," ",O.createElement("code",{style:u},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},n),i?O.createElement("pre",{style:l},i):null,f)}var S1=O.createElement(b1,null),bv=class extends O.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,n){return n.location!==r.location||n.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:n.error,location:n.location,revalidation:r.revalidation||n.revalidation}}componentDidCatch(r,n){this.props.onError?this.props.onError(r,n):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const i=m1(r.digest);i&&(r=i)}let n=r!==void 0?O.createElement($n.Provider,{value:this.props.routeContext},O.createElement(sf.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?O.createElement(w1,{error:r},n):n}};bv.contextType=c1;var Sd=new WeakMap;function w1({children:r,error:n}){let{basename:i}=O.useContext(En);if(typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){let o=p1(n.digest);if(o){let l=Sd.get(n);if(l)throw l;let u=dv(o.location,i);if(uv&&!Sd.get(n))if(u.isExternal||o.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:o.replace}));throw Sd.set(n,f),f}return O.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return r}function x1({routeContext:r,match:n,children:i}){let o=O.useContext(Ts);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement($n.Provider,{value:r},i)}function T1(r,n=[],i=null,o=null,l=null){if(r==null){if(!i)return null;if(i.errors)r=i.matches;else if(n.length===0&&!i.initialized&&i.matches.length>0)r=i.matches;else return null}let u=r,f=i?.errors;if(f!=null){let y=u.findIndex(E=>E.route.id&&f?.[E.route.id]!==void 0);wt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),u=u.slice(0,Math.min(u.length,y+1))}let p=!1,m=-1;if(i)for(let y=0;y<u.length;y++){let E=u[y];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(m=y),E.route.id){let{loaderData:I,errors:F}=i,A=E.route.loader&&!I.hasOwnProperty(E.route.id)&&(!F||F[E.route.id]===void 0);if(E.route.lazy||A){p=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}let g=i&&o?(y,E)=>{o(y,{location:i.location,params:i.matches?.[0]?.params??{},unstable_pattern:a1(i.matches),errorInfo:E})}:void 0;return u.reduceRight((y,E,I)=>{let F,A=!1,H=null,B=null;i&&(F=f&&E.route.id?f[E.route.id]:void 0,H=E.route.errorElement||S1,p&&(m<0&&I===0?(Sv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,B=null):m===I&&(A=!0,B=E.route.hydrateFallbackElement||null)));let se=n.concat(u.slice(0,I+1)),le=()=>{let me;return F?me=H:A?me=B:E.route.Component?me=O.createElement(E.route.Component,null):E.route.element?me=E.route.element:me=y,O.createElement(x1,{match:E,routeContext:{outlet:y,matches:se,isDataRoute:i!=null},children:me})};return i&&(E.route.ErrorBoundary||E.route.errorElement||I===0)?O.createElement(bv,{location:i.location,revalidation:i.revalidation,component:H,error:F,children:le(),routeContext:{outlet:null,matches:se,isDataRoute:!0},onError:g}):le()},null)}function of(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function C1(r){let n=O.useContext(Ts);return wt(n,of(r)),n}function R1(r){let n=O.useContext(Ml);return wt(n,of(r)),n}function E1(r){let n=O.useContext($n);return wt(n,of(r)),n}function af(r){let n=E1(r),i=n.matches[n.matches.length-1];return wt(i.route.id,`${r} can only be used on routes that contain a unique "id"`),i.route.id}function _1(){return af("useRouteId")}function k1(){let r=O.useContext(sf),n=R1("useRouteError"),i=af("useRouteError");return r!==void 0?r:n.errors?.[i]}function j1(){let{router:r}=C1("useNavigate"),n=af("useNavigate"),i=O.useRef(!1);return gv(()=>{i.current=!0}),O.useCallback(async(l,u={})=>{zn(i.current,mv),i.current&&(typeof l=="number"?await r.navigate(l):await r.navigate(l,{fromRouteId:n,...u}))},[r,n])}var Qg={};function Sv(r,n,i){!n&&!Qg[r]&&(Qg[r]=!0,zn(!1,i))}O.memo(N1);function N1({routes:r,future:n,state:i,onError:o}){return vv(r,void 0,i,o,n)}function Jn({to:r,replace:n,state:i,relative:o}){wt(Cs(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=O.useContext(En);zn(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=O.useContext($n),{pathname:f}=Qn(),p=br(),m=rf(r,nf(u),f,o==="path"),g=JSON.stringify(m);return O.useEffect(()=>{p(JSON.parse(g),{replace:n,state:i,relative:o})},[p,g,o,n,i]),null}function tn(r){wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function A1({basename:r="/",children:n=null,location:i,navigationType:o="POP",navigator:l,static:u=!1,unstable_useTransitions:f}){wt(!Cs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=r.replace(/^\/*/,"/"),m=O.useMemo(()=>({basename:p,navigator:l,static:u,unstable_useTransitions:f,future:{}}),[p,l,u,f]);typeof i=="string"&&(i=xs(i));let{pathname:g="/",search:y="",hash:E="",state:I=null,key:F="default"}=i,A=O.useMemo(()=>{let H=vr(g,p);return H==null?null:{location:{pathname:H,search:y,hash:E,state:I,key:F},navigationType:o}},[p,g,y,E,I,F,o]);return zn(A!=null,`<Router basename="${p}"> is not able to match the URL "${g}${y}${E}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:O.createElement(En.Provider,{value:m},O.createElement(Io.Provider,{children:n,value:A}))}function O1({children:r,location:n}){return v1(Bd(r),n)}function Bd(r,n=[]){let i=[];return O.Children.forEach(r,(o,l)=>{if(!O.isValidElement(o))return;let u=[...n,l];if(o.type===O.Fragment){i.push.apply(i,Bd(o.props.children,u));return}wt(o.type===tn,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),wt(!o.props.index||!o.props.children,"An index route cannot have child routes.");let f={id:o.props.id||u.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(f.children=Bd(o.props.children,u)),i.push(f)}),i}var ml="get",gl="application/x-www-form-urlencoded";function Ul(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function M1(r){return Ul(r)&&r.tagName.toLowerCase()==="button"}function U1(r){return Ul(r)&&r.tagName.toLowerCase()==="form"}function D1(r){return Ul(r)&&r.tagName.toLowerCase()==="input"}function P1(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function I1(r,n){return r.button===0&&(!n||n==="_self")&&!P1(r)}var sl=null;function z1(){if(sl===null)try{new FormData(document.createElement("form"),0),sl=!1}catch{sl=!0}return sl}var L1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wd(r){return r!=null&&!L1.has(r)?(zn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gl}"`),null):r}function B1(r,n){let i,o,l,u,f;if(U1(r)){let p=r.getAttribute("action");o=p?vr(p,n):null,i=r.getAttribute("method")||ml,l=wd(r.getAttribute("enctype"))||gl,u=new FormData(r)}else if(M1(r)||D1(r)&&(r.type==="submit"||r.type==="image")){let p=r.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=r.getAttribute("formaction")||p.getAttribute("action");if(o=m?vr(m,n):null,i=r.getAttribute("formmethod")||p.getAttribute("method")||ml,l=wd(r.getAttribute("formenctype"))||wd(p.getAttribute("enctype"))||gl,u=new FormData(p,r),!z1()){let{name:g,type:y,value:E}=r;if(y==="image"){let I=g?`${g}.`:"";u.append(`${I}x`,"0"),u.append(`${I}y`,"0")}else g&&u.append(g,E)}}else{if(Ul(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=ml,o=null,l=gl,f=r}return u&&l==="text/plain"&&(f=u,u=void 0),{action:o,method:i.toLowerCase(),encType:l,formData:u,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function lf(r,n){if(r===!1||r===null||typeof r>"u")throw new Error(n)}function H1(r,n,i){let o=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return o.pathname==="/"?o.pathname=`_root.${i}`:n&&vr(o.pathname,n)==="/"?o.pathname=`${n.replace(/\/$/,"")}/_root.${i}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${i}`,o}async function q1(r,n){if(r.id in n)return n[r.id];try{let i=await import(r.module);return n[r.id]=i,i}catch(i){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function $1(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function V1(r,n,i){let o=await Promise.all(r.map(async l=>{let u=n.routes[l.route.id];if(u){let f=await q1(u,i);return f.links?f.links():[]}return[]}));return X1(o.flat(1).filter($1).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Zg(r,n,i,o,l,u){let f=(m,g)=>i[g]?m.route.id!==i[g].route.id:!0,p=(m,g)=>i[g].pathname!==m.pathname||i[g].route.path?.endsWith("*")&&i[g].params["*"]!==m.params["*"];return u==="assets"?n.filter((m,g)=>f(m,g)||p(m,g)):u==="data"?n.filter((m,g)=>{let y=o.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(f(m,g)||p(m,g))return!0;if(m.route.shouldRevalidate){let E=m.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function G1(r,n,{includeHydrateFallback:i}={}){return F1(r.map(o=>{let l=n.routes[o.route.id];if(!l)return[];let u=[l.module];return l.clientActionModule&&(u=u.concat(l.clientActionModule)),l.clientLoaderModule&&(u=u.concat(l.clientLoaderModule)),i&&l.hydrateFallbackModule&&(u=u.concat(l.hydrateFallbackModule)),l.imports&&(u=u.concat(l.imports)),u}).flat(1))}function F1(r){return[...new Set(r)]}function Y1(r){let n={},i=Object.keys(r).sort();for(let o of i)n[o]=r[o];return n}function X1(r,n){let i=new Set;return new Set(n),r.reduce((o,l)=>{let u=JSON.stringify(Y1(l));return i.has(u)||(i.add(u),o.push({key:u,link:l})),o},[])}function wv(){let r=O.useContext(Ts);return lf(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function J1(){let r=O.useContext(Ml);return lf(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var cf=O.createContext(void 0);cf.displayName="FrameworkContext";function xv(){let r=O.useContext(cf);return lf(r,"You must render this element inside a <HydratedRouter> element"),r}function K1(r,n){let i=O.useContext(cf),[o,l]=O.useState(!1),[u,f]=O.useState(!1),{onFocus:p,onBlur:m,onMouseEnter:g,onMouseLeave:y,onTouchStart:E}=n,I=O.useRef(null);O.useEffect(()=>{if(r==="render"&&f(!0),r==="viewport"){let H=se=>{se.forEach(le=>{f(le.isIntersecting)})},B=new IntersectionObserver(H,{threshold:.5});return I.current&&B.observe(I.current),()=>{B.disconnect()}}},[r]),O.useEffect(()=>{if(o){let H=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(H)}}},[o]);let F=()=>{l(!0)},A=()=>{l(!1),f(!1)};return i?r!=="intent"?[u,I,{}]:[u,I,{onFocus:To(p,F),onBlur:To(m,A),onMouseEnter:To(g,F),onMouseLeave:To(y,A),onTouchStart:To(E,F)}]:[!1,I,{}]}function To(r,n){return i=>{r&&r(i),i.defaultPrevented||n(i)}}function W1({page:r,...n}){let{router:i}=wv(),o=O.useMemo(()=>ov(i.routes,r,i.basename),[i.routes,r,i.basename]);return o?O.createElement(Z1,{page:r,matches:o,...n}):null}function Q1(r){let{manifest:n,routeModules:i}=xv(),[o,l]=O.useState([]);return O.useEffect(()=>{let u=!1;return V1(r,n,i).then(f=>{u||l(f)}),()=>{u=!0}},[r,n,i]),o}function Z1({page:r,matches:n,...i}){let o=Qn(),{manifest:l,routeModules:u}=xv(),{basename:f}=wv(),{loaderData:p,matches:m}=J1(),g=O.useMemo(()=>Zg(r,n,m,l,o,"data"),[r,n,m,l,o]),y=O.useMemo(()=>Zg(r,n,m,l,o,"assets"),[r,n,m,l,o]),E=O.useMemo(()=>{if(r===o.pathname+o.search+o.hash)return[];let A=new Set,H=!1;if(n.forEach(se=>{let le=l.routes[se.route.id];!le||!le.hasLoader||(!g.some(me=>me.route.id===se.route.id)&&se.route.id in p&&u[se.route.id]?.shouldRevalidate||le.hasClientLoader?H=!0:A.add(se.route.id))}),A.size===0)return[];let B=H1(r,f,"data");return H&&A.size>0&&B.searchParams.set("_routes",n.filter(se=>A.has(se.route.id)).map(se=>se.route.id).join(",")),[B.pathname+B.search]},[f,p,o,l,g,n,r,u]),I=O.useMemo(()=>G1(y,l),[y,l]),F=Q1(y);return O.createElement(O.Fragment,null,E.map(A=>O.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...i})),I.map(A=>O.createElement("link",{key:A,rel:"modulepreload",href:A,...i})),F.map(({key:A,link:H})=>O.createElement("link",{key:A,nonce:i.nonce,...H})))}function eT(...r){return n=>{r.forEach(i=>{typeof i=="function"?i(n):i!=null&&(i.current=n)})}}var tT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{tT&&(window.__reactRouterVersion="7.11.0")}catch{}function nT({basename:r,children:n,unstable_useTransitions:i,window:o}){let l=O.useRef();l.current==null&&(l.current=Px({window:o,v5Compat:!0}));let u=l.current,[f,p]=O.useState({action:u.action,location:u.location}),m=O.useCallback(g=>{i===!1?p(g):O.startTransition(()=>p(g))},[i]);return O.useLayoutEffect(()=>u.listen(m),[u,m]),O.createElement(A1,{basename:r,children:n,location:f.location,navigationType:f.action,navigator:u,unstable_useTransitions:i})}var Tv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,In=O.forwardRef(function({onClick:n,discover:i="render",prefetch:o="none",relative:l,reloadDocument:u,replace:f,state:p,target:m,to:g,preventScrollReset:y,viewTransition:E,unstable_defaultShouldRevalidate:I,...F},A){let{basename:H,unstable_useTransitions:B}=O.useContext(En),se=typeof g=="string"&&Tv.test(g),le=dv(g,H);g=le.to;let me=g1(g,{relative:l}),[ce,ie,fe]=K1(o,F),ue=oT(g,{replace:f,state:p,target:m,preventScrollReset:y,relative:l,viewTransition:E,unstable_defaultShouldRevalidate:I,unstable_useTransitions:B});function Re(xe){n&&n(xe),xe.defaultPrevented||ue(xe)}let Ne=O.createElement("a",{...F,...fe,href:le.absoluteURL||me,onClick:le.isExternal||u?n:Re,ref:eT(A,ie),target:m,"data-discover":!se&&i==="render"?"true":void 0});return ce&&!se?O.createElement(O.Fragment,null,Ne,O.createElement(W1,{page:me})):Ne});In.displayName="Link";var rT=O.forwardRef(function({"aria-current":n="page",caseSensitive:i=!1,className:o="",end:l=!1,style:u,to:f,viewTransition:p,children:m,...g},y){let E=zo(f,{relative:g.relative}),I=Qn(),F=O.useContext(Ml),{navigator:A,basename:H}=O.useContext(En),B=F!=null&&dT(E)&&p===!0,se=A.encodeLocation?A.encodeLocation(E).pathname:E.pathname,le=I.pathname,me=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;i||(le=le.toLowerCase(),me=me?me.toLowerCase():null,se=se.toLowerCase()),me&&H&&(me=vr(me,H)||me);const ce=se!=="/"&&se.endsWith("/")?se.length-1:se.length;let ie=le===se||!l&&le.startsWith(se)&&le.charAt(ce)==="/",fe=me!=null&&(me===se||!l&&me.startsWith(se)&&me.charAt(se.length)==="/"),ue={isActive:ie,isPending:fe,isTransitioning:B},Re=ie?n:void 0,Ne;typeof o=="function"?Ne=o(ue):Ne=[o,ie?"active":null,fe?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let xe=typeof u=="function"?u(ue):u;return O.createElement(In,{...g,"aria-current":Re,className:Ne,ref:y,style:xe,to:f,viewTransition:p},typeof m=="function"?m(ue):m)});rT.displayName="NavLink";var iT=O.forwardRef(({discover:r="render",fetcherKey:n,navigate:i,reloadDocument:o,replace:l,state:u,method:f=ml,action:p,onSubmit:m,relative:g,preventScrollReset:y,viewTransition:E,unstable_defaultShouldRevalidate:I,...F},A)=>{let{unstable_useTransitions:H}=O.useContext(En),B=cT(),se=uT(p,{relative:g}),le=f.toLowerCase()==="get"?"get":"post",me=typeof p=="string"&&Tv.test(p),ce=ie=>{if(m&&m(ie),ie.defaultPrevented)return;ie.preventDefault();let fe=ie.nativeEvent.submitter,ue=fe?.getAttribute("formmethod")||f,Re=()=>B(fe||ie.currentTarget,{fetcherKey:n,method:ue,navigate:i,replace:l,state:u,relative:g,preventScrollReset:y,viewTransition:E,unstable_defaultShouldRevalidate:I});H&&i!==!1?O.startTransition(()=>Re()):Re()};return O.createElement("form",{ref:A,method:le,action:se,onSubmit:o?m:ce,...F,"data-discover":!me&&r==="render"?"true":void 0})});iT.displayName="Form";function sT(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Cv(r){let n=O.useContext(Ts);return wt(n,sT(r)),n}function oT(r,{target:n,replace:i,state:o,preventScrollReset:l,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:p,unstable_useTransitions:m}={}){let g=br(),y=Qn(),E=zo(r,{relative:u});return O.useCallback(I=>{if(I1(I,n)){I.preventDefault();let F=i!==void 0?i:Oo(y)===Oo(E),A=()=>g(r,{replace:F,state:o,preventScrollReset:l,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:p});m?O.startTransition(()=>A()):A()}},[y,g,E,i,o,n,r,l,u,f,p,m])}var aT=0,lT=()=>`__${String(++aT)}__`;function cT(){let{router:r}=Cv("useSubmit"),{basename:n}=O.useContext(En),i=_1(),o=r.fetch,l=r.navigate;return O.useCallback(async(u,f={})=>{let{action:p,method:m,encType:g,formData:y,body:E}=B1(u,n);if(f.navigate===!1){let I=f.fetcherKey||lT();await o(I,i,f.action||p,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:y,body:E,formMethod:f.method||m,formEncType:f.encType||g,flushSync:f.flushSync})}else await l(f.action||p,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:y,body:E,formMethod:f.method||m,formEncType:f.encType||g,replace:f.replace,state:f.state,fromRouteId:i,flushSync:f.flushSync,viewTransition:f.viewTransition})},[o,l,n,i])}function uT(r,{relative:n}={}){let{basename:i}=O.useContext(En),o=O.useContext($n);wt(o,"useFormAction must be used inside a RouteContext");let[l]=o.matches.slice(-1),u={...zo(r||".",{relative:n})},f=Qn();if(r==null){u.search=f.search;let p=new URLSearchParams(u.search),m=p.getAll("index");if(m.some(y=>y==="")){p.delete("index"),m.filter(E=>E).forEach(E=>p.append("index",E));let y=p.toString();u.search=y?`?${y}`:""}}return(!r||r===".")&&l.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(u.pathname=u.pathname==="/"?i:yr([i,u.pathname])),Oo(u)}function dT(r,{relative:n}={}){let i=O.useContext(hv);wt(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=Cv("useViewTransitionState"),l=zo(r,{relative:n});if(!i.isTransitioning)return!1;let u=vr(i.currentLocation.pathname,o)||i.currentLocation.pathname,f=vr(i.nextLocation.pathname,o)||i.nextLocation.pathname;return xl(l.pathname,f)!=null||xl(l.pathname,u)!=null}const fT=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hT=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,i,o)=>o?o.toUpperCase():i.toLowerCase()),ey=r=>{const n=hT(r);return n.charAt(0).toUpperCase()+n.slice(1)},Rv=(...r)=>r.filter((n,i,o)=>!!n&&n.trim()!==""&&o.indexOf(n)===i).join(" ").trim(),pT=r=>{for(const n in r)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};var mT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const gT=O.forwardRef(({color:r="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:u,iconNode:f,...p},m)=>O.createElement("svg",{ref:m,...mT,width:n,height:n,stroke:r,strokeWidth:o?Number(i)*24/Number(n):i,className:Rv("lucide",l),...!u&&!pT(p)&&{"aria-hidden":"true"},...p},[...f.map(([g,y])=>O.createElement(g,y)),...Array.isArray(u)?u:[u]]));const it=(r,n)=>{const i=O.forwardRef(({className:o,...l},u)=>O.createElement(gT,{ref:u,iconNode:n,className:Rv(`lucide-${fT(ey(r))}`,`lucide-${r}`,o),...l}));return i.displayName=ey(r),i};const yT=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],uf=it("arrow-left",yT);const vT=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ty=it("calendar",vT);const bT=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],ST=it("car",bT);const wT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ol=it("circle-alert",wT);const xT=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Co=it("circle-check-big",xT);const TT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Tl=it("circle-question-mark",TT);const CT=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],RT=it("clock",CT);const ET=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],_T=it("copy",ET);const kT=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],jT=it("ellipsis-vertical",kT);const NT=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Cl=it("eye-off",NT);const AT=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Rl=it("eye",AT);const OT=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Ev=it("funnel",OT);const MT=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],UT=it("house",MT);const DT=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],yl=it("key",DT);const PT=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],IT=it("layout-dashboard",PT);const zT=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],LT=it("log-out",zT);const BT=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ny=it("mail",BT);const HT=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],_v=it("map-pin",HT);const qT=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],$T=it("menu",qT);const VT=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],ms=it("message-circle",VT);const GT=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],FT=it("message-square",GT);const YT=[["path",{d:"M5 12h14",key:"1ays0h"}]],kv=it("minus",YT);const XT=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],JT=it("phone",XT);const KT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],df=it("plus",KT);const WT=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Mo=it("send",WT);const QT=[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]],ZT=it("share",QT);const eC=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],tC=it("shield-check",eC);const nC=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],jv=it("square-pen",nC);const rC=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Hd=it("star",rC);const iC=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ry=it("trash-2",iC);const sC=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],oC=it("upload",sC);const aC=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],lC=it("user",aC);const cC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Wr=it("users",cC);const uC=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],dC=it("utensils",uC);const fC=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],hC=it("wifi",fC);const pC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ff=it("x",pC),Nv=O.createContext(),mC=()=>{const r=O.useContext(Nv);if(!r)throw new Error("useNotifications must be used within NotificationProvider");return r},gC=({children:r})=>{const[n,i]=O.useState(0),o=()=>{i(0)};return c.jsx(Nv.Provider,{value:{unreadCount:n,clearUnreadCount:o},children:r})};function Av(r,n){return function(){return r.apply(n,arguments)}}const{toString:yC}=Object.prototype,{getPrototypeOf:hf}=Object,{iterator:Dl,toStringTag:Ov}=Symbol,Pl=(r=>n=>{const i=yC.call(n);return r[i]||(r[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Vn=r=>(r=r.toLowerCase(),n=>Pl(n)===r),Il=r=>n=>typeof n===r,{isArray:Rs}=Array,gs=Il("undefined");function Lo(r){return r!==null&&!gs(r)&&r.constructor!==null&&!gs(r.constructor)&&gn(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const Mv=Vn("ArrayBuffer");function vC(r){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(r):n=r&&r.buffer&&Mv(r.buffer),n}const bC=Il("string"),gn=Il("function"),Uv=Il("number"),Bo=r=>r!==null&&typeof r=="object",SC=r=>r===!0||r===!1,vl=r=>{if(Pl(r)!=="object")return!1;const n=hf(r);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Ov in r)&&!(Dl in r)},wC=r=>{if(!Bo(r)||Lo(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},xC=Vn("Date"),TC=Vn("File"),CC=Vn("Blob"),RC=Vn("FileList"),EC=r=>Bo(r)&&gn(r.pipe),_C=r=>{let n;return r&&(typeof FormData=="function"&&r instanceof FormData||gn(r.append)&&((n=Pl(r))==="formdata"||n==="object"&&gn(r.toString)&&r.toString()==="[object FormData]"))},kC=Vn("URLSearchParams"),[jC,NC,AC,OC]=["ReadableStream","Request","Response","Headers"].map(Vn),MC=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ho(r,n,{allOwnKeys:i=!1}={}){if(r===null||typeof r>"u")return;let o,l;if(typeof r!="object"&&(r=[r]),Rs(r))for(o=0,l=r.length;o<l;o++)n.call(null,r[o],o,r);else{if(Lo(r))return;const u=i?Object.getOwnPropertyNames(r):Object.keys(r),f=u.length;let p;for(o=0;o<f;o++)p=u[o],n.call(null,r[p],p,r)}}function Dv(r,n){if(Lo(r))return null;n=n.toLowerCase();const i=Object.keys(r);let o=i.length,l;for(;o-- >0;)if(l=i[o],n===l.toLowerCase())return l;return null}const bi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Pv=r=>!gs(r)&&r!==bi;function qd(){const{caseless:r,skipUndefined:n}=Pv(this)&&this||{},i={},o=(l,u)=>{const f=r&&Dv(i,u)||u;vl(i[f])&&vl(l)?i[f]=qd(i[f],l):vl(l)?i[f]=qd({},l):Rs(l)?i[f]=l.slice():(!n||!gs(l))&&(i[f]=l)};for(let l=0,u=arguments.length;l<u;l++)arguments[l]&&Ho(arguments[l],o);return i}const UC=(r,n,i,{allOwnKeys:o}={})=>(Ho(n,(l,u)=>{i&&gn(l)?r[u]=Av(l,i):r[u]=l},{allOwnKeys:o}),r),DC=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),PC=(r,n,i,o)=>{r.prototype=Object.create(n.prototype,o),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:n.prototype}),i&&Object.assign(r.prototype,i)},IC=(r,n,i,o)=>{let l,u,f;const p={};if(n=n||{},r==null)return n;do{for(l=Object.getOwnPropertyNames(r),u=l.length;u-- >0;)f=l[u],(!o||o(f,r,n))&&!p[f]&&(n[f]=r[f],p[f]=!0);r=i!==!1&&hf(r)}while(r&&(!i||i(r,n))&&r!==Object.prototype);return n},zC=(r,n,i)=>{r=String(r),(i===void 0||i>r.length)&&(i=r.length),i-=n.length;const o=r.indexOf(n,i);return o!==-1&&o===i},LC=r=>{if(!r)return null;if(Rs(r))return r;let n=r.length;if(!Uv(n))return null;const i=new Array(n);for(;n-- >0;)i[n]=r[n];return i},BC=(r=>n=>r&&n instanceof r)(typeof Uint8Array<"u"&&hf(Uint8Array)),HC=(r,n)=>{const o=(r&&r[Dl]).call(r);let l;for(;(l=o.next())&&!l.done;){const u=l.value;n.call(r,u[0],u[1])}},qC=(r,n)=>{let i;const o=[];for(;(i=r.exec(n))!==null;)o.push(i);return o},$C=Vn("HTMLFormElement"),VC=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,o,l){return o.toUpperCase()+l}),iy=(({hasOwnProperty:r})=>(n,i)=>r.call(n,i))(Object.prototype),GC=Vn("RegExp"),Iv=(r,n)=>{const i=Object.getOwnPropertyDescriptors(r),o={};Ho(i,(l,u)=>{let f;(f=n(l,u,r))!==!1&&(o[u]=f||l)}),Object.defineProperties(r,o)},FC=r=>{Iv(r,(n,i)=>{if(gn(r)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const o=r[i];if(gn(o)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},YC=(r,n)=>{const i={},o=l=>{l.forEach(u=>{i[u]=!0})};return Rs(r)?o(r):o(String(r).split(n)),i},XC=()=>{},JC=(r,n)=>r!=null&&Number.isFinite(r=+r)?r:n;function KC(r){return!!(r&&gn(r.append)&&r[Ov]==="FormData"&&r[Dl])}const WC=r=>{const n=new Array(10),i=(o,l)=>{if(Bo(o)){if(n.indexOf(o)>=0)return;if(Lo(o))return o;if(!("toJSON"in o)){n[l]=o;const u=Rs(o)?[]:{};return Ho(o,(f,p)=>{const m=i(f,l+1);!gs(m)&&(u[p]=m)}),n[l]=void 0,u}}return o};return i(r,0)},QC=Vn("AsyncFunction"),ZC=r=>r&&(Bo(r)||gn(r))&&gn(r.then)&&gn(r.catch),zv=((r,n)=>r?setImmediate:n?((i,o)=>(bi.addEventListener("message",({source:l,data:u})=>{l===bi&&u===i&&o.length&&o.shift()()},!1),l=>{o.push(l),bi.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",gn(bi.postMessage)),eR=typeof queueMicrotask<"u"?queueMicrotask.bind(bi):typeof process<"u"&&process.nextTick||zv,tR=r=>r!=null&&gn(r[Dl]),ve={isArray:Rs,isArrayBuffer:Mv,isBuffer:Lo,isFormData:_C,isArrayBufferView:vC,isString:bC,isNumber:Uv,isBoolean:SC,isObject:Bo,isPlainObject:vl,isEmptyObject:wC,isReadableStream:jC,isRequest:NC,isResponse:AC,isHeaders:OC,isUndefined:gs,isDate:xC,isFile:TC,isBlob:CC,isRegExp:GC,isFunction:gn,isStream:EC,isURLSearchParams:kC,isTypedArray:BC,isFileList:RC,forEach:Ho,merge:qd,extend:UC,trim:MC,stripBOM:DC,inherits:PC,toFlatObject:IC,kindOf:Pl,kindOfTest:Vn,endsWith:zC,toArray:LC,forEachEntry:HC,matchAll:qC,isHTMLForm:$C,hasOwnProperty:iy,hasOwnProp:iy,reduceDescriptors:Iv,freezeMethods:FC,toObjectSet:YC,toCamelCase:VC,noop:XC,toFiniteNumber:JC,findKey:Dv,global:bi,isContextDefined:Pv,isSpecCompliantForm:KC,toJSONObject:WC,isAsyncFn:QC,isThenable:ZC,setImmediate:zv,asap:eR,isIterable:tR};function Je(r,n,i,o,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",n&&(this.code=n),i&&(this.config=i),o&&(this.request=o),l&&(this.response=l,this.status=l.status?l.status:null)}ve.inherits(Je,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ve.toJSONObject(this.config),code:this.code,status:this.status}}});const Lv=Je.prototype,Bv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{Bv[r]={value:r}});Object.defineProperties(Je,Bv);Object.defineProperty(Lv,"isAxiosError",{value:!0});Je.from=(r,n,i,o,l,u)=>{const f=Object.create(Lv);ve.toFlatObject(r,f,function(y){return y!==Error.prototype},g=>g!=="isAxiosError");const p=r&&r.message?r.message:"Error",m=n==null&&r?r.code:n;return Je.call(f,p,m,i,o,l),r&&f.cause==null&&Object.defineProperty(f,"cause",{value:r,configurable:!0}),f.name=r&&r.name||"Error",u&&Object.assign(f,u),f};const nR=null;function $d(r){return ve.isPlainObject(r)||ve.isArray(r)}function Hv(r){return ve.endsWith(r,"[]")?r.slice(0,-2):r}function sy(r,n,i){return r?r.concat(n).map(function(l,u){return l=Hv(l),!i&&u?"["+l+"]":l}).join(i?".":""):n}function rR(r){return ve.isArray(r)&&!r.some($d)}const iR=ve.toFlatObject(ve,{},null,function(n){return/^is[A-Z]/.test(n)});function zl(r,n,i){if(!ve.isObject(r))throw new TypeError("target must be an object");n=n||new FormData,i=ve.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(H,B){return!ve.isUndefined(B[H])});const o=i.metaTokens,l=i.visitor||y,u=i.dots,f=i.indexes,m=(i.Blob||typeof Blob<"u"&&Blob)&&ve.isSpecCompliantForm(n);if(!ve.isFunction(l))throw new TypeError("visitor must be a function");function g(A){if(A===null)return"";if(ve.isDate(A))return A.toISOString();if(ve.isBoolean(A))return A.toString();if(!m&&ve.isBlob(A))throw new Je("Blob is not supported. Use a Buffer instead.");return ve.isArrayBuffer(A)||ve.isTypedArray(A)?m&&typeof Blob=="function"?new Blob([A]):Buffer.from(A):A}function y(A,H,B){let se=A;if(A&&!B&&typeof A=="object"){if(ve.endsWith(H,"{}"))H=o?H:H.slice(0,-2),A=JSON.stringify(A);else if(ve.isArray(A)&&rR(A)||(ve.isFileList(A)||ve.endsWith(H,"[]"))&&(se=ve.toArray(A)))return H=Hv(H),se.forEach(function(me,ce){!(ve.isUndefined(me)||me===null)&&n.append(f===!0?sy([H],ce,u):f===null?H:H+"[]",g(me))}),!1}return $d(A)?!0:(n.append(sy(B,H,u),g(A)),!1)}const E=[],I=Object.assign(iR,{defaultVisitor:y,convertValue:g,isVisitable:$d});function F(A,H){if(!ve.isUndefined(A)){if(E.indexOf(A)!==-1)throw Error("Circular reference detected in "+H.join("."));E.push(A),ve.forEach(A,function(se,le){(!(ve.isUndefined(se)||se===null)&&l.call(n,se,ve.isString(le)?le.trim():le,H,I))===!0&&F(se,H?H.concat(le):[le])}),E.pop()}}if(!ve.isObject(r))throw new TypeError("data must be an object");return F(r),n}function oy(r){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(o){return n[o]})}function pf(r,n){this._pairs=[],r&&zl(r,this,n)}const qv=pf.prototype;qv.append=function(n,i){this._pairs.push([n,i])};qv.toString=function(n){const i=n?function(o){return n.call(this,o,oy)}:oy;return this._pairs.map(function(l){return i(l[0])+"="+i(l[1])},"").join("&")};function sR(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function $v(r,n,i){if(!n)return r;const o=i&&i.encode||sR;ve.isFunction(i)&&(i={serialize:i});const l=i&&i.serialize;let u;if(l?u=l(n,i):u=ve.isURLSearchParams(n)?n.toString():new pf(n,i).toString(o),u){const f=r.indexOf("#");f!==-1&&(r=r.slice(0,f)),r+=(r.indexOf("?")===-1?"?":"&")+u}return r}class ay{constructor(){this.handlers=[]}use(n,i,o){return this.handlers.push({fulfilled:n,rejected:i,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){ve.forEach(this.handlers,function(o){o!==null&&n(o)})}}const Vv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},oR=typeof URLSearchParams<"u"?URLSearchParams:pf,aR=typeof FormData<"u"?FormData:null,lR=typeof Blob<"u"?Blob:null,cR={isBrowser:!0,classes:{URLSearchParams:oR,FormData:aR,Blob:lR},protocols:["http","https","file","blob","url","data"]},mf=typeof window<"u"&&typeof document<"u",Vd=typeof navigator=="object"&&navigator||void 0,uR=mf&&(!Vd||["ReactNative","NativeScript","NS"].indexOf(Vd.product)<0),dR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",fR=mf&&window.location.href||"http://localhost",hR=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:mf,hasStandardBrowserEnv:uR,hasStandardBrowserWebWorkerEnv:dR,navigator:Vd,origin:fR},Symbol.toStringTag,{value:"Module"})),rn={...hR,...cR};function pR(r,n){return zl(r,new rn.classes.URLSearchParams,{visitor:function(i,o,l,u){return rn.isNode&&ve.isBuffer(i)?(this.append(o,i.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)},...n})}function mR(r){return ve.matchAll(/\w+|\[(\w*)]/g,r).map(n=>n[0]==="[]"?"":n[1]||n[0])}function gR(r){const n={},i=Object.keys(r);let o;const l=i.length;let u;for(o=0;o<l;o++)u=i[o],n[u]=r[u];return n}function Gv(r){function n(i,o,l,u){let f=i[u++];if(f==="__proto__")return!0;const p=Number.isFinite(+f),m=u>=i.length;return f=!f&&ve.isArray(l)?l.length:f,m?(ve.hasOwnProp(l,f)?l[f]=[l[f],o]:l[f]=o,!p):((!l[f]||!ve.isObject(l[f]))&&(l[f]=[]),n(i,o,l[f],u)&&ve.isArray(l[f])&&(l[f]=gR(l[f])),!p)}if(ve.isFormData(r)&&ve.isFunction(r.entries)){const i={};return ve.forEachEntry(r,(o,l)=>{n(mR(o),l,i,0)}),i}return null}function yR(r,n,i){if(ve.isString(r))try{return(n||JSON.parse)(r),ve.trim(r)}catch(o){if(o.name!=="SyntaxError")throw o}return(i||JSON.stringify)(r)}const qo={transitional:Vv,adapter:["xhr","http","fetch"],transformRequest:[function(n,i){const o=i.getContentType()||"",l=o.indexOf("application/json")>-1,u=ve.isObject(n);if(u&&ve.isHTMLForm(n)&&(n=new FormData(n)),ve.isFormData(n))return l?JSON.stringify(Gv(n)):n;if(ve.isArrayBuffer(n)||ve.isBuffer(n)||ve.isStream(n)||ve.isFile(n)||ve.isBlob(n)||ve.isReadableStream(n))return n;if(ve.isArrayBufferView(n))return n.buffer;if(ve.isURLSearchParams(n))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let p;if(u){if(o.indexOf("application/x-www-form-urlencoded")>-1)return pR(n,this.formSerializer).toString();if((p=ve.isFileList(n))||o.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return zl(p?{"files[]":n}:n,m&&new m,this.formSerializer)}}return u||l?(i.setContentType("application/json",!1),yR(n)):n}],transformResponse:[function(n){const i=this.transitional||qo.transitional,o=i&&i.forcedJSONParsing,l=this.responseType==="json";if(ve.isResponse(n)||ve.isReadableStream(n))return n;if(n&&ve.isString(n)&&(o&&!this.responseType||l)){const f=!(i&&i.silentJSONParsing)&&l;try{return JSON.parse(n,this.parseReviver)}catch(p){if(f)throw p.name==="SyntaxError"?Je.from(p,Je.ERR_BAD_RESPONSE,this,null,this.response):p}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:rn.classes.FormData,Blob:rn.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ve.forEach(["delete","get","head","post","put","patch"],r=>{qo.headers[r]={}});const vR=ve.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),bR=r=>{const n={};let i,o,l;return r&&r.split(`
`).forEach(function(f){l=f.indexOf(":"),i=f.substring(0,l).trim().toLowerCase(),o=f.substring(l+1).trim(),!(!i||n[i]&&vR[i])&&(i==="set-cookie"?n[i]?n[i].push(o):n[i]=[o]:n[i]=n[i]?n[i]+", "+o:o)}),n},ly=Symbol("internals");function Ro(r){return r&&String(r).trim().toLowerCase()}function bl(r){return r===!1||r==null?r:ve.isArray(r)?r.map(bl):String(r)}function SR(r){const n=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=i.exec(r);)n[o[1]]=o[2];return n}const wR=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function xd(r,n,i,o,l){if(ve.isFunction(o))return o.call(this,n,i);if(l&&(n=i),!!ve.isString(n)){if(ve.isString(o))return n.indexOf(o)!==-1;if(ve.isRegExp(o))return o.test(n)}}function xR(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,i,o)=>i.toUpperCase()+o)}function TR(r,n){const i=ve.toCamelCase(" "+n);["get","set","has"].forEach(o=>{Object.defineProperty(r,o+i,{value:function(l,u,f){return this[o].call(this,n,l,u,f)},configurable:!0})})}let yn=class{constructor(n){n&&this.set(n)}set(n,i,o){const l=this;function u(p,m,g){const y=Ro(m);if(!y)throw new Error("header name must be a non-empty string");const E=ve.findKey(l,y);(!E||l[E]===void 0||g===!0||g===void 0&&l[E]!==!1)&&(l[E||m]=bl(p))}const f=(p,m)=>ve.forEach(p,(g,y)=>u(g,y,m));if(ve.isPlainObject(n)||n instanceof this.constructor)f(n,i);else if(ve.isString(n)&&(n=n.trim())&&!wR(n))f(bR(n),i);else if(ve.isObject(n)&&ve.isIterable(n)){let p={},m,g;for(const y of n){if(!ve.isArray(y))throw TypeError("Object iterator must return a key-value pair");p[g=y[0]]=(m=p[g])?ve.isArray(m)?[...m,y[1]]:[m,y[1]]:y[1]}f(p,i)}else n!=null&&u(i,n,o);return this}get(n,i){if(n=Ro(n),n){const o=ve.findKey(this,n);if(o){const l=this[o];if(!i)return l;if(i===!0)return SR(l);if(ve.isFunction(i))return i.call(this,l,o);if(ve.isRegExp(i))return i.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,i){if(n=Ro(n),n){const o=ve.findKey(this,n);return!!(o&&this[o]!==void 0&&(!i||xd(this,this[o],o,i)))}return!1}delete(n,i){const o=this;let l=!1;function u(f){if(f=Ro(f),f){const p=ve.findKey(o,f);p&&(!i||xd(o,o[p],p,i))&&(delete o[p],l=!0)}}return ve.isArray(n)?n.forEach(u):u(n),l}clear(n){const i=Object.keys(this);let o=i.length,l=!1;for(;o--;){const u=i[o];(!n||xd(this,this[u],u,n,!0))&&(delete this[u],l=!0)}return l}normalize(n){const i=this,o={};return ve.forEach(this,(l,u)=>{const f=ve.findKey(o,u);if(f){i[f]=bl(l),delete i[u];return}const p=n?xR(u):String(u).trim();p!==u&&delete i[u],i[p]=bl(l),o[p]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const i=Object.create(null);return ve.forEach(this,(o,l)=>{o!=null&&o!==!1&&(i[l]=n&&ve.isArray(o)?o.join(", "):o)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,i])=>n+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...i){const o=new this(n);return i.forEach(l=>o.set(l)),o}static accessor(n){const o=(this[ly]=this[ly]={accessors:{}}).accessors,l=this.prototype;function u(f){const p=Ro(f);o[p]||(TR(l,f),o[p]=!0)}return ve.isArray(n)?n.forEach(u):u(n),this}};yn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ve.reduceDescriptors(yn.prototype,({value:r},n)=>{let i=n[0].toUpperCase()+n.slice(1);return{get:()=>r,set(o){this[i]=o}}});ve.freezeMethods(yn);function Td(r,n){const i=this||qo,o=n||i,l=yn.from(o.headers);let u=o.data;return ve.forEach(r,function(p){u=p.call(i,u,l.normalize(),n?n.status:void 0)}),l.normalize(),u}function Fv(r){return!!(r&&r.__CANCEL__)}function Es(r,n,i){Je.call(this,r??"canceled",Je.ERR_CANCELED,n,i),this.name="CanceledError"}ve.inherits(Es,Je,{__CANCEL__:!0});function Yv(r,n,i){const o=i.config.validateStatus;!i.status||!o||o(i.status)?r(i):n(new Je("Request failed with status code "+i.status,[Je.ERR_BAD_REQUEST,Je.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function CR(r){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return n&&n[1]||""}function RR(r,n){r=r||10;const i=new Array(r),o=new Array(r);let l=0,u=0,f;return n=n!==void 0?n:1e3,function(m){const g=Date.now(),y=o[u];f||(f=g),i[l]=m,o[l]=g;let E=u,I=0;for(;E!==l;)I+=i[E++],E=E%r;if(l=(l+1)%r,l===u&&(u=(u+1)%r),g-f<n)return;const F=y&&g-y;return F?Math.round(I*1e3/F):void 0}}function ER(r,n){let i=0,o=1e3/n,l,u;const f=(g,y=Date.now())=>{i=y,l=null,u&&(clearTimeout(u),u=null),r(...g)};return[(...g)=>{const y=Date.now(),E=y-i;E>=o?f(g,y):(l=g,u||(u=setTimeout(()=>{u=null,f(l)},o-E)))},()=>l&&f(l)]}const El=(r,n,i=3)=>{let o=0;const l=RR(50,250);return ER(u=>{const f=u.loaded,p=u.lengthComputable?u.total:void 0,m=f-o,g=l(m),y=f<=p;o=f;const E={loaded:f,total:p,progress:p?f/p:void 0,bytes:m,rate:g||void 0,estimated:g&&p&&y?(p-f)/g:void 0,event:u,lengthComputable:p!=null,[n?"download":"upload"]:!0};r(E)},i)},cy=(r,n)=>{const i=r!=null;return[o=>n[0]({lengthComputable:i,total:r,loaded:o}),n[1]]},uy=r=>(...n)=>ve.asap(()=>r(...n)),_R=rn.hasStandardBrowserEnv?((r,n)=>i=>(i=new URL(i,rn.origin),r.protocol===i.protocol&&r.host===i.host&&(n||r.port===i.port)))(new URL(rn.origin),rn.navigator&&/(msie|trident)/i.test(rn.navigator.userAgent)):()=>!0,kR=rn.hasStandardBrowserEnv?{write(r,n,i,o,l,u,f){if(typeof document>"u")return;const p=[`${r}=${encodeURIComponent(n)}`];ve.isNumber(i)&&p.push(`expires=${new Date(i).toUTCString()}`),ve.isString(o)&&p.push(`path=${o}`),ve.isString(l)&&p.push(`domain=${l}`),u===!0&&p.push("secure"),ve.isString(f)&&p.push(`SameSite=${f}`),document.cookie=p.join("; ")},read(r){if(typeof document>"u")return null;const n=document.cookie.match(new RegExp("(?:^|; )"+r+"=([^;]*)"));return n?decodeURIComponent(n[1]):null},remove(r){this.write(r,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function jR(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function NR(r,n){return n?r.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):r}function Xv(r,n,i){let o=!jR(n);return r&&(o||i==!1)?NR(r,n):n}const dy=r=>r instanceof yn?{...r}:r;function Ci(r,n){n=n||{};const i={};function o(g,y,E,I){return ve.isPlainObject(g)&&ve.isPlainObject(y)?ve.merge.call({caseless:I},g,y):ve.isPlainObject(y)?ve.merge({},y):ve.isArray(y)?y.slice():y}function l(g,y,E,I){if(ve.isUndefined(y)){if(!ve.isUndefined(g))return o(void 0,g,E,I)}else return o(g,y,E,I)}function u(g,y){if(!ve.isUndefined(y))return o(void 0,y)}function f(g,y){if(ve.isUndefined(y)){if(!ve.isUndefined(g))return o(void 0,g)}else return o(void 0,y)}function p(g,y,E){if(E in n)return o(g,y);if(E in r)return o(void 0,g)}const m={url:u,method:u,data:u,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:p,headers:(g,y,E)=>l(dy(g),dy(y),E,!0)};return ve.forEach(Object.keys({...r,...n}),function(y){const E=m[y]||l,I=E(r[y],n[y],y);ve.isUndefined(I)&&E!==p||(i[y]=I)}),i}const Jv=r=>{const n=Ci({},r);let{data:i,withXSRFToken:o,xsrfHeaderName:l,xsrfCookieName:u,headers:f,auth:p}=n;if(n.headers=f=yn.from(f),n.url=$v(Xv(n.baseURL,n.url,n.allowAbsoluteUrls),r.params,r.paramsSerializer),p&&f.set("Authorization","Basic "+btoa((p.username||"")+":"+(p.password?unescape(encodeURIComponent(p.password)):""))),ve.isFormData(i)){if(rn.hasStandardBrowserEnv||rn.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(ve.isFunction(i.getHeaders)){const m=i.getHeaders(),g=["content-type","content-length"];Object.entries(m).forEach(([y,E])=>{g.includes(y.toLowerCase())&&f.set(y,E)})}}if(rn.hasStandardBrowserEnv&&(o&&ve.isFunction(o)&&(o=o(n)),o||o!==!1&&_R(n.url))){const m=l&&u&&kR.read(u);m&&f.set(l,m)}return n},AR=typeof XMLHttpRequest<"u",OR=AR&&function(r){return new Promise(function(i,o){const l=Jv(r);let u=l.data;const f=yn.from(l.headers).normalize();let{responseType:p,onUploadProgress:m,onDownloadProgress:g}=l,y,E,I,F,A;function H(){F&&F(),A&&A(),l.cancelToken&&l.cancelToken.unsubscribe(y),l.signal&&l.signal.removeEventListener("abort",y)}let B=new XMLHttpRequest;B.open(l.method.toUpperCase(),l.url,!0),B.timeout=l.timeout;function se(){if(!B)return;const me=yn.from("getAllResponseHeaders"in B&&B.getAllResponseHeaders()),ie={data:!p||p==="text"||p==="json"?B.responseText:B.response,status:B.status,statusText:B.statusText,headers:me,config:r,request:B};Yv(function(ue){i(ue),H()},function(ue){o(ue),H()},ie),B=null}"onloadend"in B?B.onloadend=se:B.onreadystatechange=function(){!B||B.readyState!==4||B.status===0&&!(B.responseURL&&B.responseURL.indexOf("file:")===0)||setTimeout(se)},B.onabort=function(){B&&(o(new Je("Request aborted",Je.ECONNABORTED,r,B)),B=null)},B.onerror=function(ce){const ie=ce&&ce.message?ce.message:"Network Error",fe=new Je(ie,Je.ERR_NETWORK,r,B);fe.event=ce||null,o(fe),B=null},B.ontimeout=function(){let ce=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const ie=l.transitional||Vv;l.timeoutErrorMessage&&(ce=l.timeoutErrorMessage),o(new Je(ce,ie.clarifyTimeoutError?Je.ETIMEDOUT:Je.ECONNABORTED,r,B)),B=null},u===void 0&&f.setContentType(null),"setRequestHeader"in B&&ve.forEach(f.toJSON(),function(ce,ie){B.setRequestHeader(ie,ce)}),ve.isUndefined(l.withCredentials)||(B.withCredentials=!!l.withCredentials),p&&p!=="json"&&(B.responseType=l.responseType),g&&([I,A]=El(g,!0),B.addEventListener("progress",I)),m&&B.upload&&([E,F]=El(m),B.upload.addEventListener("progress",E),B.upload.addEventListener("loadend",F)),(l.cancelToken||l.signal)&&(y=me=>{B&&(o(!me||me.type?new Es(null,r,B):me),B.abort(),B=null)},l.cancelToken&&l.cancelToken.subscribe(y),l.signal&&(l.signal.aborted?y():l.signal.addEventListener("abort",y)));const le=CR(l.url);if(le&&rn.protocols.indexOf(le)===-1){o(new Je("Unsupported protocol "+le+":",Je.ERR_BAD_REQUEST,r));return}B.send(u||null)})},MR=(r,n)=>{const{length:i}=r=r?r.filter(Boolean):[];if(n||i){let o=new AbortController,l;const u=function(g){if(!l){l=!0,p();const y=g instanceof Error?g:this.reason;o.abort(y instanceof Je?y:new Es(y instanceof Error?y.message:y))}};let f=n&&setTimeout(()=>{f=null,u(new Je(`timeout ${n} of ms exceeded`,Je.ETIMEDOUT))},n);const p=()=>{r&&(f&&clearTimeout(f),f=null,r.forEach(g=>{g.unsubscribe?g.unsubscribe(u):g.removeEventListener("abort",u)}),r=null)};r.forEach(g=>g.addEventListener("abort",u));const{signal:m}=o;return m.unsubscribe=()=>ve.asap(p),m}},UR=function*(r,n){let i=r.byteLength;if(i<n){yield r;return}let o=0,l;for(;o<i;)l=o+n,yield r.slice(o,l),o=l},DR=async function*(r,n){for await(const i of PR(r))yield*UR(i,n)},PR=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const n=r.getReader();try{for(;;){const{done:i,value:o}=await n.read();if(i)break;yield o}}finally{await n.cancel()}},fy=(r,n,i,o)=>{const l=DR(r,n);let u=0,f,p=m=>{f||(f=!0,o&&o(m))};return new ReadableStream({async pull(m){try{const{done:g,value:y}=await l.next();if(g){p(),m.close();return}let E=y.byteLength;if(i){let I=u+=E;i(I)}m.enqueue(new Uint8Array(y))}catch(g){throw p(g),g}},cancel(m){return p(m),l.return()}},{highWaterMark:2})},hy=64*1024,{isFunction:al}=ve,IR=(({Request:r,Response:n})=>({Request:r,Response:n}))(ve.global),{ReadableStream:py,TextEncoder:my}=ve.global,gy=(r,...n)=>{try{return!!r(...n)}catch{return!1}},zR=r=>{r=ve.merge.call({skipUndefined:!0},IR,r);const{fetch:n,Request:i,Response:o}=r,l=n?al(n):typeof fetch=="function",u=al(i),f=al(o);if(!l)return!1;const p=l&&al(py),m=l&&(typeof my=="function"?(A=>H=>A.encode(H))(new my):async A=>new Uint8Array(await new i(A).arrayBuffer())),g=u&&p&&gy(()=>{let A=!1;const H=new i(rn.origin,{body:new py,method:"POST",get duplex(){return A=!0,"half"}}).headers.has("Content-Type");return A&&!H}),y=f&&p&&gy(()=>ve.isReadableStream(new o("").body)),E={stream:y&&(A=>A.body)};l&&["text","arrayBuffer","blob","formData","stream"].forEach(A=>{!E[A]&&(E[A]=(H,B)=>{let se=H&&H[A];if(se)return se.call(H);throw new Je(`Response type '${A}' is not supported`,Je.ERR_NOT_SUPPORT,B)})});const I=async A=>{if(A==null)return 0;if(ve.isBlob(A))return A.size;if(ve.isSpecCompliantForm(A))return(await new i(rn.origin,{method:"POST",body:A}).arrayBuffer()).byteLength;if(ve.isArrayBufferView(A)||ve.isArrayBuffer(A))return A.byteLength;if(ve.isURLSearchParams(A)&&(A=A+""),ve.isString(A))return(await m(A)).byteLength},F=async(A,H)=>{const B=ve.toFiniteNumber(A.getContentLength());return B??I(H)};return async A=>{let{url:H,method:B,data:se,signal:le,cancelToken:me,timeout:ce,onDownloadProgress:ie,onUploadProgress:fe,responseType:ue,headers:Re,withCredentials:Ne="same-origin",fetchOptions:xe}=Jv(A),Se=n||fetch;ue=ue?(ue+"").toLowerCase():"text";let Pe=MR([le,me&&me.toAbortSignal()],ce),ke=null;const ye=Pe&&Pe.unsubscribe&&(()=>{Pe.unsubscribe()});let ze;try{if(fe&&g&&B!=="get"&&B!=="head"&&(ze=await F(Re,se))!==0){let C=new i(H,{method:"POST",body:se,duplex:"half"}),z;if(ve.isFormData(se)&&(z=C.headers.get("content-type"))&&Re.setContentType(z),C.body){const[x,b]=cy(ze,El(uy(fe)));se=fy(C.body,hy,x,b)}}ve.isString(Ne)||(Ne=Ne?"include":"omit");const q=u&&"credentials"in i.prototype,D={...xe,signal:Pe,method:B.toUpperCase(),headers:Re.normalize().toJSON(),body:se,duplex:"half",credentials:q?Ne:void 0};ke=u&&new i(H,D);let K=await(u?Se(ke,xe):Se(H,D));const L=y&&(ue==="stream"||ue==="response");if(y&&(ie||L&&ye)){const C={};["status","statusText","headers"].forEach(S=>{C[S]=K[S]});const z=ve.toFiniteNumber(K.headers.get("content-length")),[x,b]=ie&&cy(z,El(uy(ie),!0))||[];K=new o(fy(K.body,hy,x,()=>{b&&b(),ye&&ye()}),C)}ue=ue||"text";let W=await E[ve.findKey(E,ue)||"text"](K,A);return!L&&ye&&ye(),await new Promise((C,z)=>{Yv(C,z,{data:W,headers:yn.from(K.headers),status:K.status,statusText:K.statusText,config:A,request:ke})})}catch(q){throw ye&&ye(),q&&q.name==="TypeError"&&/Load failed|fetch/i.test(q.message)?Object.assign(new Je("Network Error",Je.ERR_NETWORK,A,ke),{cause:q.cause||q}):Je.from(q,q&&q.code,A,ke)}}},LR=new Map,Kv=r=>{let n=r&&r.env||{};const{fetch:i,Request:o,Response:l}=n,u=[o,l,i];let f=u.length,p=f,m,g,y=LR;for(;p--;)m=u[p],g=y.get(m),g===void 0&&y.set(m,g=p?new Map:zR(n)),y=g;return g};Kv();const gf={http:nR,xhr:OR,fetch:{get:Kv}};ve.forEach(gf,(r,n)=>{if(r){try{Object.defineProperty(r,"name",{value:n})}catch{}Object.defineProperty(r,"adapterName",{value:n})}});const yy=r=>`- ${r}`,BR=r=>ve.isFunction(r)||r===null||r===!1;function HR(r,n){r=ve.isArray(r)?r:[r];const{length:i}=r;let o,l;const u={};for(let f=0;f<i;f++){o=r[f];let p;if(l=o,!BR(o)&&(l=gf[(p=String(o)).toLowerCase()],l===void 0))throw new Je(`Unknown adapter '${p}'`);if(l&&(ve.isFunction(l)||(l=l.get(n))))break;u[p||"#"+f]=l}if(!l){const f=Object.entries(u).map(([m,g])=>`adapter ${m} `+(g===!1?"is not supported by the environment":"is not available in the build"));let p=i?f.length>1?`since :
`+f.map(yy).join(`
`):" "+yy(f[0]):"as no adapter specified";throw new Je("There is no suitable adapter to dispatch the request "+p,"ERR_NOT_SUPPORT")}return l}const Wv={getAdapter:HR,adapters:gf};function Cd(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Es(null,r)}function vy(r){return Cd(r),r.headers=yn.from(r.headers),r.data=Td.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),Wv.getAdapter(r.adapter||qo.adapter,r)(r).then(function(o){return Cd(r),o.data=Td.call(r,r.transformResponse,o),o.headers=yn.from(o.headers),o},function(o){return Fv(o)||(Cd(r),o&&o.response&&(o.response.data=Td.call(r,r.transformResponse,o.response),o.response.headers=yn.from(o.response.headers))),Promise.reject(o)})}const Qv="1.13.2",Ll={};["object","boolean","number","function","string","symbol"].forEach((r,n)=>{Ll[r]=function(o){return typeof o===r||"a"+(n<1?"n ":" ")+r}});const by={};Ll.transitional=function(n,i,o){function l(u,f){return"[Axios v"+Qv+"] Transitional option '"+u+"'"+f+(o?". "+o:"")}return(u,f,p)=>{if(n===!1)throw new Je(l(f," has been removed"+(i?" in "+i:"")),Je.ERR_DEPRECATED);return i&&!by[f]&&(by[f]=!0,console.warn(l(f," has been deprecated since v"+i+" and will be removed in the near future"))),n?n(u,f,p):!0}};Ll.spelling=function(n){return(i,o)=>(console.warn(`${o} is likely a misspelling of ${n}`),!0)};function qR(r,n,i){if(typeof r!="object")throw new Je("options must be an object",Je.ERR_BAD_OPTION_VALUE);const o=Object.keys(r);let l=o.length;for(;l-- >0;){const u=o[l],f=n[u];if(f){const p=r[u],m=p===void 0||f(p,u,r);if(m!==!0)throw new Je("option "+u+" must be "+m,Je.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new Je("Unknown option "+u,Je.ERR_BAD_OPTION)}}const Sl={assertOptions:qR,validators:Ll},Kn=Sl.validators;let Si=class{constructor(n){this.defaults=n||{},this.interceptors={request:new ay,response:new ay}}async request(n,i){try{return await this._request(n,i)}catch(o){if(o instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const u=l.stack?l.stack.replace(/^.+\n/,""):"";try{o.stack?u&&!String(o.stack).endsWith(u.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+u):o.stack=u}catch{}}throw o}}_request(n,i){typeof n=="string"?(i=i||{},i.url=n):i=n||{},i=Ci(this.defaults,i);const{transitional:o,paramsSerializer:l,headers:u}=i;o!==void 0&&Sl.assertOptions(o,{silentJSONParsing:Kn.transitional(Kn.boolean),forcedJSONParsing:Kn.transitional(Kn.boolean),clarifyTimeoutError:Kn.transitional(Kn.boolean)},!1),l!=null&&(ve.isFunction(l)?i.paramsSerializer={serialize:l}:Sl.assertOptions(l,{encode:Kn.function,serialize:Kn.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),Sl.assertOptions(i,{baseUrl:Kn.spelling("baseURL"),withXsrfToken:Kn.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let f=u&&ve.merge(u.common,u[i.method]);u&&ve.forEach(["delete","get","head","post","put","patch","common"],A=>{delete u[A]}),i.headers=yn.concat(f,u);const p=[];let m=!0;this.interceptors.request.forEach(function(H){typeof H.runWhen=="function"&&H.runWhen(i)===!1||(m=m&&H.synchronous,p.unshift(H.fulfilled,H.rejected))});const g=[];this.interceptors.response.forEach(function(H){g.push(H.fulfilled,H.rejected)});let y,E=0,I;if(!m){const A=[vy.bind(this),void 0];for(A.unshift(...p),A.push(...g),I=A.length,y=Promise.resolve(i);E<I;)y=y.then(A[E++],A[E++]);return y}I=p.length;let F=i;for(;E<I;){const A=p[E++],H=p[E++];try{F=A(F)}catch(B){H.call(this,B);break}}try{y=vy.call(this,F)}catch(A){return Promise.reject(A)}for(E=0,I=g.length;E<I;)y=y.then(g[E++],g[E++]);return y}getUri(n){n=Ci(this.defaults,n);const i=Xv(n.baseURL,n.url,n.allowAbsoluteUrls);return $v(i,n.params,n.paramsSerializer)}};ve.forEach(["delete","get","head","options"],function(n){Si.prototype[n]=function(i,o){return this.request(Ci(o||{},{method:n,url:i,data:(o||{}).data}))}});ve.forEach(["post","put","patch"],function(n){function i(o){return function(u,f,p){return this.request(Ci(p||{},{method:n,headers:o?{"Content-Type":"multipart/form-data"}:{},url:u,data:f}))}}Si.prototype[n]=i(),Si.prototype[n+"Form"]=i(!0)});let $R=class Zv{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(u){i=u});const o=this;this.promise.then(l=>{if(!o._listeners)return;let u=o._listeners.length;for(;u-- >0;)o._listeners[u](l);o._listeners=null}),this.promise.then=l=>{let u;const f=new Promise(p=>{o.subscribe(p),u=p}).then(l);return f.cancel=function(){o.unsubscribe(u)},f},n(function(u,f,p){o.reason||(o.reason=new Es(u,f,p),i(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const n=new AbortController,i=o=>{n.abort(o)};return this.subscribe(i),n.signal.unsubscribe=()=>this.unsubscribe(i),n.signal}static source(){let n;return{token:new Zv(function(l){n=l}),cancel:n}}};function VR(r){return function(i){return r.apply(null,i)}}function GR(r){return ve.isObject(r)&&r.isAxiosError===!0}const Gd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Gd).forEach(([r,n])=>{Gd[n]=r});function e0(r){const n=new Si(r),i=Av(Si.prototype.request,n);return ve.extend(i,Si.prototype,n,{allOwnKeys:!0}),ve.extend(i,n,null,{allOwnKeys:!0}),i.create=function(l){return e0(Ci(r,l))},i}const _t=e0(qo);_t.Axios=Si;_t.CanceledError=Es;_t.CancelToken=$R;_t.isCancel=Fv;_t.VERSION=Qv;_t.toFormData=zl;_t.AxiosError=Je;_t.Cancel=_t.CanceledError;_t.all=function(n){return Promise.all(n)};_t.spread=VR;_t.isAxiosError=GR;_t.mergeConfig=Ci;_t.AxiosHeaders=yn;_t.formToJSON=r=>Gv(ve.isHTMLForm(r)?new FormData(r):r);_t.getAdapter=Wv.getAdapter;_t.HttpStatusCode=Gd;_t.default=_t;const{Axios:NO,AxiosError:AO,CanceledError:OO,isCancel:MO,CancelToken:UO,VERSION:DO,all:PO,Cancel:IO,isAxiosError:zO,spread:LO,toFormData:BO,AxiosHeaders:HO,HttpStatusCode:qO,formToJSON:$O,getAdapter:VO,mergeConfig:GO}=_t,FR=()=>"https://festive-guest-api.azurewebsites.net/api",Ve=_t.create({baseURL:FR(),timeout:1e4});Ve.interceptors.request.use(r=>(console.log("API Request:",{method:r.method?.toUpperCase(),url:r.baseURL+"/"+r.url,headers:{...r.headers,Authorization:r.headers.Authorization?"[HIDDEN]":void 0}}),r),r=>(console.error("Request Error:",r),Promise.reject(r)));Ve.interceptors.request.use(r=>{try{const n=localStorage.getItem("user");if(n){const i=JSON.parse(n);i&&i.token&&(r.headers.Authorization=`Bearer ${i.token}`)}}catch{console.warn("Failed to read user from storage")}return r},r=>Promise.reject(r));Ve.interceptors.response.use(r=>r,r=>(console.error("API Error Details:",{status:r.response?.status,statusText:r.response?.statusText,url:r.config?.url,method:r.config?.method,baseURL:r.config?.baseURL,data:r.response?.data,message:r.message}),(r.response?.status===401||r.response?.status===403)&&(localStorage.removeItem("user"),localStorage.removeItem("userId"),window.dispatchEvent(new Event("storage")),window.location.pathname!=="/login"&&window.location.pathname!=="/"&&(window.location.href="/login")),Promise.reject(r)));const t0={sasCache:new Map,async getSasUrl(r,n="logos"){const i=`${n}/${r}`,o=this.sasCache.get(i);if(o&&o.expiresAt>Date.now())return o.url;try{const u=(await Ve.get("storage/get-sas-url",{params:{fileName:r,container:n}})).data.url;return this.sasCache.set(i,{url:u,expiresAt:Date.now()+3e3*1e3}),u}catch(l){return console.error("Error fetching SAS URL:",l),null}},clearCache(){this.sasCache.clear()},needsSasToken(r){return r&&r.includes("blob.core.windows.net")&&!r.includes("?")}},YR=({className:r="",style:n={},alt:i="FestiveGuest Logo",isLoginLogo:o=!1})=>{const[l,u]=O.useState(""),[f,p]=O.useState(!0);return O.useEffect(()=>{(async()=>{try{const g=o?"login-logo.png":"logo.png",y=await t0.getSasUrl(g,"logos");u(y)}catch(g){console.error("Error loading logo:",g),u(o?"/assets/login-logo.png":"/assets/logo.png")}finally{p(!1)}})()},[o]),f?c.jsx("div",{className:r,style:{...n,background:"#f0f0f0"}}):c.jsx("img",{src:l,alt:i,className:r,style:n})},XR=()=>c.jsx("div",{className:"loader-container",children:c.jsx("div",{className:"logo-loader",children:c.jsx("img",{src:"/assets/login-logo.png",alt:"FestiveGuest",className:"loader-logo"})})});class JR{constructor(){this.locations=null,this.loading=!1}async getLocations(){if(this.locations)return this.locations;if(this.loading){for(;this.loading;)await new Promise(n=>setTimeout(n,100));return this.locations}this.loading=!0;try{const n=await Ve.get("location/states-with-cities");return this.locations=n.data,this.locations}catch(n){throw console.error("DEBUG: Failed to fetch locations from API:",n),new Error("Unable to load location data (API Error). Please try again later.")}finally{this.loading=!1}}async seedLocations(){try{const n=await Ve.post("location/seed");return this.locations=null,n.data}catch(n){throw console.error("Failed to seed locations:",n),n}}clearCache(){this.locations=null}}const Bl=new JR,KR=()=>{const[r,n]=O.useState([]),[i,o]=O.useState(!1),l=(p,m="info")=>{n(g=>[...g,{message:p,type:m,timestamp:new Date().toLocaleTimeString()}])},u=async()=>{o(!0),n([]);try{l(" Testing API connectivity...","info");try{l(` API Base URL: ${Ve.defaults.baseURL}`,"info");const p=await Ve.get("health");l(" API Health Check: SUCCESS","success")}catch(p){l(` API Health Check: ${p.message}`,"error")}try{l(" Testing location service...","info");const p=await Bl.getLocations(),m=Object.keys(p||{}).length;l(` Locations loaded: ${m} states found`,"success")}catch(p){l(` Location service: ${p.message}`,"error")}try{l(" Testing direct location API...","info");const p=await Ve.get("location/states-with-cities"),m=Object.keys(p.data||{}).length;l(` Direct API call: ${m} states found`,"success")}catch(p){l(` Direct API call: ${p.message}`,"error")}}catch(p){l(` Test suite failed: ${p.message}`,"error")}finally{o(!1)}},f=()=>{n([])};return c.jsxs("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto",fontFamily:"monospace"},children:[c.jsx("h2",{children:" API Connectivity Test"}),c.jsx("p",{children:"Use this tool to test your API connectivity and location loading."}),c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("button",{onClick:u,disabled:i,style:{padding:"0.75rem 1.5rem",backgroundColor:i?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"0.5rem",cursor:i?"not-allowed":"pointer",marginRight:"1rem"},children:i?" Testing...":" Run Tests"}),c.jsx("button",{onClick:f,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer"},children:" Clear Results"})]}),c.jsx("div",{style:{backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"0.5rem",padding:"1rem",minHeight:"200px",maxHeight:"400px",overflowY:"auto"},children:r.length===0?c.jsx("p",{style:{color:"#6c757d",fontStyle:"italic"},children:'Click "Run Tests" to start testing your API connectivity...'}):r.map((p,m)=>c.jsxs("div",{style:{marginBottom:"0.5rem",padding:"0.5rem",borderRadius:"0.25rem",backgroundColor:p.type==="success"?"#d4edda":p.type==="error"?"#f8d7da":"#d1ecf1",color:p.type==="success"?"#155724":p.type==="error"?"#721c24":"#0c5460"},children:[c.jsxs("span",{style:{fontSize:"0.8rem",opacity:.7},children:["[",p.timestamp,"]"]})," ",p.message]},m))}),c.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.9rem",color:"#6c757d"},children:[c.jsxs("p",{children:[c.jsx("strong",{children:"Environment:"})," ","production"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Current API Base:"})," ",Ve.defaults.baseURL]})]})]})};class wi extends Error{constructor(n,i){const o=new.target.prototype;super(`${n}: Status code '${i}'`),this.statusCode=i,this.__proto__=o}}class yf extends Error{constructor(n="A timeout occurred."){const i=new.target.prototype;super(n),this.__proto__=i}}let qn=class extends Error{constructor(n="An abort occurred."){const i=new.target.prototype;super(n),this.__proto__=i}};class WR extends Error{constructor(n,i){const o=new.target.prototype;super(n),this.transport=i,this.errorType="UnsupportedTransportError",this.__proto__=o}}class QR extends Error{constructor(n,i){const o=new.target.prototype;super(n),this.transport=i,this.errorType="DisabledTransportError",this.__proto__=o}}class ZR extends Error{constructor(n,i){const o=new.target.prototype;super(n),this.transport=i,this.errorType="FailedToStartTransportError",this.__proto__=o}}class Sy extends Error{constructor(n){const i=new.target.prototype;super(n),this.errorType="FailedToNegotiateWithServerError",this.__proto__=i}}class eE extends Error{constructor(n,i){const o=new.target.prototype;super(n),this.innerErrors=i,this.__proto__=o}}class n0{constructor(n,i,o){this.statusCode=n,this.statusText=i,this.content=o}}class Hl{get(n,i){return this.send({...i,method:"GET",url:n})}post(n,i){return this.send({...i,method:"POST",url:n})}delete(n,i){return this.send({...i,method:"DELETE",url:n})}getCookieString(n){return""}}var Ce;(function(r){r[r.Trace=0]="Trace",r[r.Debug=1]="Debug",r[r.Information=2]="Information",r[r.Warning=3]="Warning",r[r.Error=4]="Error",r[r.Critical=5]="Critical",r[r.None=6]="None"})(Ce||(Ce={}));class Uo{constructor(){}log(n,i){}}Uo.instance=new Uo;const tE="10.0.0";class Ut{static isRequired(n,i){if(n==null)throw new Error(`The '${i}' argument is required.`)}static isNotEmpty(n,i){if(!n||n.match(/^\s*$/))throw new Error(`The '${i}' argument should not be empty.`)}static isIn(n,i,o){if(!(n in i))throw new Error(`Unknown ${o} value: ${n}.`)}}class xt{static get isBrowser(){return!xt.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!xt.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!xt.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function Do(r,n){let i="";return Ri(r)?(i=`Binary data of length ${r.byteLength}`,n&&(i+=`. Content: '${nE(r)}'`)):typeof r=="string"&&(i=`String data of length ${r.length}`,n&&(i+=`. Content: '${r}'`)),i}function nE(r){const n=new Uint8Array(r);let i="";return n.forEach(o=>{const l=o<16?"0":"";i+=`0x${l}${o.toString(16)} `}),i.substring(0,i.length-1)}function Ri(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}async function r0(r,n,i,o,l,u){const f={},[p,m]=ys();f[p]=m,r.log(Ce.Trace,`(${n} transport) sending data. ${Do(l,u.logMessageContent)}.`);const g=Ri(l)?"arraybuffer":"text",y=await i.post(o,{content:l,headers:{...f,...u.headers},responseType:g,timeout:u.timeout,withCredentials:u.withCredentials});r.log(Ce.Trace,`(${n} transport) request complete. Response status: ${y.statusCode}.`)}function rE(r){return r===void 0?new _l(Ce.Information):r===null?Uo.instance:r.log!==void 0?r:new _l(r)}class iE{constructor(n,i){this._subject=n,this._observer=i}dispose(){const n=this._subject.observers.indexOf(this._observer);n>-1&&this._subject.observers.splice(n,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(i=>{})}}class _l{constructor(n){this._minLevel=n,this.out=console}log(n,i){if(n>=this._minLevel){const o=`[${new Date().toISOString()}] ${Ce[n]}: ${i}`;switch(n){case Ce.Critical:case Ce.Error:this.out.error(o);break;case Ce.Warning:this.out.warn(o);break;case Ce.Information:this.out.info(o);break;default:this.out.log(o);break}}}}function ys(){let r="X-SignalR-User-Agent";return xt.isNode&&(r="User-Agent"),[r,sE(tE,oE(),lE(),aE())]}function sE(r,n,i,o){let l="Microsoft SignalR/";const u=r.split(".");return l+=`${u[0]}.${u[1]}`,l+=` (${r}; `,n&&n!==""?l+=`${n}; `:l+="Unknown OS; ",l+=`${i}`,o?l+=`; ${o}`:l+="; Unknown Runtime Version",l+=")",l}function oE(){if(xt.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function aE(){if(xt.isNode)return process.versions.node}function lE(){return xt.isNode?"NodeJS":"Browser"}function Rd(r){return r.stack?r.stack:r.message?r.message:`${r}`}function cE(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}let uE=class extends Hl{constructor(n){if(super(),this._logger=n,typeof fetch>"u"||xt.isNode){const i=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(i("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=i("node-fetch"):this._fetchType=fetch,this._fetchType=i("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(cE());if(typeof AbortController>"u"){const i=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=i("abort-controller")}else this._abortControllerType=AbortController}async send(n){if(n.abortSignal&&n.abortSignal.aborted)throw new qn;if(!n.method)throw new Error("No method defined.");if(!n.url)throw new Error("No url defined.");const i=new this._abortControllerType;let o;n.abortSignal&&(n.abortSignal.onabort=()=>{i.abort(),o=new qn});let l=null;if(n.timeout){const m=n.timeout;l=setTimeout(()=>{i.abort(),this._logger.log(Ce.Warning,"Timeout from HTTP request."),o=new yf},m)}n.content===""&&(n.content=void 0),n.content&&(n.headers=n.headers||{},Ri(n.content)?n.headers["Content-Type"]="application/octet-stream":n.headers["Content-Type"]="text/plain;charset=UTF-8");let u;try{u=await this._fetchType(n.url,{body:n.content,cache:"no-cache",credentials:n.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...n.headers},method:n.method,mode:"cors",redirect:"follow",signal:i.signal})}catch(m){throw o||(this._logger.log(Ce.Warning,`Error from HTTP request. ${m}.`),m)}finally{l&&clearTimeout(l),n.abortSignal&&(n.abortSignal.onabort=null)}if(!u.ok){const m=await wy(u,"text");throw new wi(m||u.statusText,u.status)}const p=await wy(u,n.responseType);return new n0(u.status,u.statusText,p)}getCookieString(n){let i="";return xt.isNode&&this._jar&&this._jar.getCookies(n,(o,l)=>i=l.join("; ")),i}};function wy(r,n){let i;switch(n){case"arraybuffer":i=r.arrayBuffer();break;case"text":i=r.text();break;case"blob":case"document":case"json":throw new Error(`${n} is not supported.`);default:i=r.text();break}return i}class dE extends Hl{constructor(n){super(),this._logger=n}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new qn):n.method?n.url?new Promise((i,o)=>{const l=new XMLHttpRequest;l.open(n.method,n.url,!0),l.withCredentials=n.withCredentials===void 0?!0:n.withCredentials,l.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.content===""&&(n.content=void 0),n.content&&(Ri(n.content)?l.setRequestHeader("Content-Type","application/octet-stream"):l.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const u=n.headers;u&&Object.keys(u).forEach(f=>{l.setRequestHeader(f,u[f])}),n.responseType&&(l.responseType=n.responseType),n.abortSignal&&(n.abortSignal.onabort=()=>{l.abort(),o(new qn)}),n.timeout&&(l.timeout=n.timeout),l.onload=()=>{n.abortSignal&&(n.abortSignal.onabort=null),l.status>=200&&l.status<300?i(new n0(l.status,l.statusText,l.response||l.responseText)):o(new wi(l.response||l.responseText||l.statusText,l.status))},l.onerror=()=>{this._logger.log(Ce.Warning,`Error from HTTP request. ${l.status}: ${l.statusText}.`),o(new wi(l.statusText,l.status))},l.ontimeout=()=>{this._logger.log(Ce.Warning,"Timeout from HTTP request."),o(new yf)},l.send(n.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class fE extends Hl{constructor(n){if(super(),typeof fetch<"u"||xt.isNode)this._httpClient=new uE(n);else if(typeof XMLHttpRequest<"u")this._httpClient=new dE(n);else throw new Error("No usable HttpClient found.")}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new qn):n.method?n.url?this._httpClient.send(n):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(n){return this._httpClient.getCookieString(n)}}class Rn{static write(n){return`${n}${Rn.RecordSeparator}`}static parse(n){if(n[n.length-1]!==Rn.RecordSeparator)throw new Error("Message is incomplete.");const i=n.split(Rn.RecordSeparator);return i.pop(),i}}Rn.RecordSeparatorCode=30;Rn.RecordSeparator=String.fromCharCode(Rn.RecordSeparatorCode);class hE{writeHandshakeRequest(n){return Rn.write(JSON.stringify(n))}parseHandshakeResponse(n){let i,o;if(Ri(n)){const p=new Uint8Array(n),m=p.indexOf(Rn.RecordSeparatorCode);if(m===-1)throw new Error("Message is incomplete.");const g=m+1;i=String.fromCharCode.apply(null,Array.prototype.slice.call(p.slice(0,g))),o=p.byteLength>g?p.slice(g).buffer:null}else{const p=n,m=p.indexOf(Rn.RecordSeparator);if(m===-1)throw new Error("Message is incomplete.");const g=m+1;i=p.substring(0,g),o=p.length>g?p.substring(g):null}const l=Rn.parse(i),u=JSON.parse(l[0]);if(u.type)throw new Error("Expected a handshake response from the server.");return[o,u]}}var Ye;(function(r){r[r.Invocation=1]="Invocation",r[r.StreamItem=2]="StreamItem",r[r.Completion=3]="Completion",r[r.StreamInvocation=4]="StreamInvocation",r[r.CancelInvocation=5]="CancelInvocation",r[r.Ping=6]="Ping",r[r.Close=7]="Close",r[r.Ack=8]="Ack",r[r.Sequence=9]="Sequence"})(Ye||(Ye={}));class pE{constructor(){this.observers=[]}next(n){for(const i of this.observers)i.next(n)}error(n){for(const i of this.observers)i.error&&i.error(n)}complete(){for(const n of this.observers)n.complete&&n.complete()}subscribe(n){return this.observers.push(n),new iE(this,n)}}class mE{constructor(n,i,o){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=n,this._connection=i,this._bufferSize=o}async _send(n){const i=this._protocol.writeMessage(n);let o=Promise.resolve();if(this._isInvocationMessage(n)){this._totalMessageCount++;let l=()=>{},u=()=>{};Ri(i)?this._bufferedByteCount+=i.byteLength:this._bufferedByteCount+=i.length,this._bufferedByteCount>=this._bufferSize&&(o=new Promise((f,p)=>{l=f,u=p})),this._messages.push(new gE(i,this._totalMessageCount,l,u))}try{this._reconnectInProgress||await this._connection.send(i)}catch{this._disconnected()}await o}_ack(n){let i=-1;for(let o=0;o<this._messages.length;o++){const l=this._messages[o];if(l._id<=n.sequenceId)i=o,Ri(l._message)?this._bufferedByteCount-=l._message.byteLength:this._bufferedByteCount-=l._message.length,l._resolver();else if(this._bufferedByteCount<this._bufferSize)l._resolver();else break}i!==-1&&(this._messages=this._messages.slice(i+1))}_shouldProcessMessage(n){if(this._waitForSequenceMessage)return n.type!==Ye.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(n))return!0;const i=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,i<=this._latestReceivedSequenceId?(i===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=i,this._ackTimer(),!0)}_resetSequence(n){if(n.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=n.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const n=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:Ye.Sequence,sequenceId:n}));const i=this._messages;for(const o of i)await this._connection.send(o._message);this._reconnectInProgress=!1}_dispose(n){n??(n=new Error("Unable to reconnect to server."));for(const i of this._messages)i._rejector(n)}_isInvocationMessage(n){switch(n.type){case Ye.Invocation:case Ye.StreamItem:case Ye.Completion:case Ye.StreamInvocation:case Ye.CancelInvocation:return!0;case Ye.Close:case Ye.Sequence:case Ye.Ping:case Ye.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:Ye.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class gE{constructor(n,i,o,l){this._message=n,this._id=i,this._resolver=o,this._rejector=l}}const yE=30*1e3,vE=15*1e3,bE=1e5;var yt;(function(r){r.Disconnected="Disconnected",r.Connecting="Connecting",r.Connected="Connected",r.Disconnecting="Disconnecting",r.Reconnecting="Reconnecting"})(yt||(yt={}));class vf{static create(n,i,o,l,u,f,p){return new vf(n,i,o,l,u,f,p)}constructor(n,i,o,l,u,f,p){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(Ce.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},Ut.isRequired(n,"connection"),Ut.isRequired(i,"logger"),Ut.isRequired(o,"protocol"),this.serverTimeoutInMilliseconds=u??yE,this.keepAliveIntervalInMilliseconds=f??vE,this._statefulReconnectBufferSize=p??bE,this._logger=i,this._protocol=o,this.connection=n,this._reconnectPolicy=l,this._handshakeProtocol=new hE,this.connection.onreceive=m=>this._processIncomingData(m),this.connection.onclose=m=>this._connectionClosed(m),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=yt.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Ye.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(n){if(this._connectionState!==yt.Disconnected&&this._connectionState!==yt.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!n)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=n}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==yt.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=yt.Connecting,this._logger.log(Ce.Debug,"Starting HubConnection.");try{await this._startInternal(),xt.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=yt.Connected,this._connectionStarted=!0,this._logger.log(Ce.Debug,"HubConnection connected successfully.")}catch(n){return this._connectionState=yt.Disconnected,this._logger.log(Ce.Debug,`HubConnection failed to start successfully because of error '${n}'.`),Promise.reject(n)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const n=new Promise((i,o)=>{this._handshakeResolver=i,this._handshakeRejecter=o});await this.connection.start(this._protocol.transferFormat);try{let i=this._protocol.version;this.connection.features.reconnect||(i=1);const o={protocol:this._protocol.name,version:i};if(this._logger.log(Ce.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(o)),this._logger.log(Ce.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await n,this._stopDuringStartError)throw this._stopDuringStartError;this.connection.features.reconnect&&(this._messageBuffer=new mE(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(i){throw this._logger.log(Ce.Debug,`Hub handshake failed with error '${i}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(i),i}}async stop(){const n=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await n}catch{}}_stopInternal(n){if(this._connectionState===yt.Disconnected)return this._logger.log(Ce.Debug,`Call to HubConnection.stop(${n}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===yt.Disconnecting)return this._logger.log(Ce.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const i=this._connectionState;return this._connectionState=yt.Disconnecting,this._logger.log(Ce.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(Ce.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(i===yt.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=n||new qn("The connection was stopped before the hub handshake could complete."),this.connection.stop(n))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(n,...i){const[o,l]=this._replaceStreamingParams(i),u=this._createStreamInvocation(n,i,l);let f;const p=new pE;return p.cancelCallback=()=>{const m=this._createCancelInvocation(u.invocationId);return delete this._callbacks[u.invocationId],f.then(()=>this._sendWithProtocol(m))},this._callbacks[u.invocationId]=(m,g)=>{if(g){p.error(g);return}else m&&(m.type===Ye.Completion?m.error?p.error(new Error(m.error)):p.complete():p.next(m.item))},f=this._sendWithProtocol(u).catch(m=>{p.error(m),delete this._callbacks[u.invocationId]}),this._launchStreams(o,f),p}_sendMessage(n){return this._resetKeepAliveInterval(),this.connection.send(n)}_sendWithProtocol(n){return this._messageBuffer?this._messageBuffer._send(n):this._sendMessage(this._protocol.writeMessage(n))}send(n,...i){const[o,l]=this._replaceStreamingParams(i),u=this._sendWithProtocol(this._createInvocation(n,i,!0,l));return this._launchStreams(o,u),u}invoke(n,...i){const[o,l]=this._replaceStreamingParams(i),u=this._createInvocation(n,i,!1,l);return new Promise((p,m)=>{this._callbacks[u.invocationId]=(y,E)=>{if(E){m(E);return}else y&&(y.type===Ye.Completion?y.error?m(new Error(y.error)):p(y.result):m(new Error(`Unexpected message type: ${y.type}`)))};const g=this._sendWithProtocol(u).catch(y=>{m(y),delete this._callbacks[u.invocationId]});this._launchStreams(o,g)})}on(n,i){!n||!i||(n=n.toLowerCase(),this._methods[n]||(this._methods[n]=[]),this._methods[n].indexOf(i)===-1&&this._methods[n].push(i))}off(n,i){if(!n)return;n=n.toLowerCase();const o=this._methods[n];if(o)if(i){const l=o.indexOf(i);l!==-1&&(o.splice(l,1),o.length===0&&delete this._methods[n])}else delete this._methods[n]}onclose(n){n&&this._closedCallbacks.push(n)}onreconnecting(n){n&&this._reconnectingCallbacks.push(n)}onreconnected(n){n&&this._reconnectedCallbacks.push(n)}_processIncomingData(n){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(n=this._processHandshakeResponse(n),this._receivedHandshakeResponse=!0),n){const i=this._protocol.parseMessages(n,this._logger);for(const o of i)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(o)))switch(o.type){case Ye.Invocation:this._invokeClientMethod(o).catch(l=>{this._logger.log(Ce.Error,`Invoke client method threw error: ${Rd(l)}`)});break;case Ye.StreamItem:case Ye.Completion:{const l=this._callbacks[o.invocationId];if(l){o.type===Ye.Completion&&delete this._callbacks[o.invocationId];try{l(o)}catch(u){this._logger.log(Ce.Error,`Stream callback threw error: ${Rd(u)}`)}}break}case Ye.Ping:break;case Ye.Close:{this._logger.log(Ce.Information,"Close message received from server.");const l=o.error?new Error("Server returned an error on close: "+o.error):void 0;o.allowReconnect===!0?this.connection.stop(l):this._stopPromise=this._stopInternal(l);break}case Ye.Ack:this._messageBuffer&&this._messageBuffer._ack(o);break;case Ye.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(o);break;default:this._logger.log(Ce.Warning,`Invalid message type: ${o.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(n){let i,o;try{[o,i]=this._handshakeProtocol.parseHandshakeResponse(n)}catch(l){const u="Error parsing handshake response: "+l;this._logger.log(Ce.Error,u);const f=new Error(u);throw this._handshakeRejecter(f),f}if(i.error){const l="Server returned handshake error: "+i.error;this._logger.log(Ce.Error,l);const u=new Error(l);throw this._handshakeRejecter(u),u}else this._logger.log(Ce.Debug,"Server handshake complete.");return this._handshakeResolver(),o}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if(!this.connection.features||!this.connection.features.inherentKeepAlive){this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds);let n=this._nextKeepAlive-new Date().getTime();if(n<0){this._connectionState===yt.Connected&&this._trySendPingMessage();return}this._pingServerHandle===void 0&&(n<0&&(n=0),this._pingServerHandle=setTimeout(async()=>{this._connectionState===yt.Connected&&await this._trySendPingMessage()},n))}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(n){const i=n.target.toLowerCase(),o=this._methods[i];if(!o){this._logger.log(Ce.Warning,`No client method with the name '${i}' found.`),n.invocationId&&(this._logger.log(Ce.Warning,`No result given for '${i}' method and invocation ID '${n.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)));return}const l=o.slice(),u=!!n.invocationId;let f,p,m;for(const g of l)try{const y=f;f=await g.apply(this,n.arguments),u&&f&&y&&(this._logger.log(Ce.Error,`Multiple results provided for '${i}'. Sending error to server.`),m=this._createCompletionMessage(n.invocationId,"Client provided multiple results.",null)),p=void 0}catch(y){p=y,this._logger.log(Ce.Error,`A callback for the method '${i}' threw error '${y}'.`)}m?await this._sendWithProtocol(m):u?(p?m=this._createCompletionMessage(n.invocationId,`${p}`,null):f!==void 0?m=this._createCompletionMessage(n.invocationId,null,f):(this._logger.log(Ce.Warning,`No result given for '${i}' method and invocation ID '${n.invocationId}'.`),m=this._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(m)):f&&this._logger.log(Ce.Error,`Result given for '${i}' method but server is not expecting a result.`)}_connectionClosed(n){this._logger.log(Ce.Debug,`HubConnection.connectionClosed(${n}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||n||new qn("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(n||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===yt.Disconnecting?this._completeClose(n):this._connectionState===yt.Connected&&this._reconnectPolicy?this._reconnect(n):this._connectionState===yt.Connected&&this._completeClose(n)}_completeClose(n){if(this._connectionStarted){this._connectionState=yt.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(n??new Error("Connection closed.")),this._messageBuffer=void 0),xt.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(i=>i.apply(this,[n]))}catch(i){this._logger.log(Ce.Error,`An onclose callback called with error '${n}' threw error '${i}'.`)}}}async _reconnect(n){const i=Date.now();let o=0,l=n!==void 0?n:new Error("Attempting to reconnect due to a unknown error."),u=this._getNextRetryDelay(o,0,l);if(u===null){this._logger.log(Ce.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(n);return}if(this._connectionState=yt.Reconnecting,n?this._logger.log(Ce.Information,`Connection reconnecting because of error '${n}'.`):this._logger.log(Ce.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(f=>f.apply(this,[n]))}catch(f){this._logger.log(Ce.Error,`An onreconnecting callback called with error '${n}' threw error '${f}'.`)}if(this._connectionState!==yt.Reconnecting){this._logger.log(Ce.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;u!==null;){if(this._logger.log(Ce.Information,`Reconnect attempt number ${o+1} will start in ${u} ms.`),await new Promise(f=>{this._reconnectDelayHandle=setTimeout(f,u)}),this._reconnectDelayHandle=void 0,this._connectionState!==yt.Reconnecting){this._logger.log(Ce.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=yt.Connected,this._logger.log(Ce.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(f=>f.apply(this,[this.connection.connectionId]))}catch(f){this._logger.log(Ce.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${f}'.`)}return}catch(f){if(this._logger.log(Ce.Information,`Reconnect attempt failed because of error '${f}'.`),this._connectionState!==yt.Reconnecting){this._logger.log(Ce.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===yt.Disconnecting&&this._completeClose();return}o++,l=f instanceof Error?f:new Error(f.toString()),u=this._getNextRetryDelay(o,Date.now()-i,l)}}this._logger.log(Ce.Information,`Reconnect retries have been exhausted after ${Date.now()-i} ms and ${o} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(n,i,o){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:i,previousRetryCount:n,retryReason:o})}catch(l){return this._logger.log(Ce.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${n}, ${i}) threw error '${l}'.`),null}}_cancelCallbacksWithError(n){const i=this._callbacks;this._callbacks={},Object.keys(i).forEach(o=>{const l=i[o];try{l(null,n)}catch(u){this._logger.log(Ce.Error,`Stream 'error' callback called with '${n}' threw error: ${Rd(u)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(n,i,o,l){if(o)return l.length!==0?{target:n,arguments:i,streamIds:l,type:Ye.Invocation}:{target:n,arguments:i,type:Ye.Invocation};{const u=this._invocationId;return this._invocationId++,l.length!==0?{target:n,arguments:i,invocationId:u.toString(),streamIds:l,type:Ye.Invocation}:{target:n,arguments:i,invocationId:u.toString(),type:Ye.Invocation}}}_launchStreams(n,i){if(n.length!==0){i||(i=Promise.resolve());for(const o in n)n[o].subscribe({complete:()=>{i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(o)))},error:l=>{let u;l instanceof Error?u=l.message:l&&l.toString?u=l.toString():u="Unknown error",i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(o,u)))},next:l=>{i=i.then(()=>this._sendWithProtocol(this._createStreamItemMessage(o,l)))}})}}_replaceStreamingParams(n){const i=[],o=[];for(let l=0;l<n.length;l++){const u=n[l];if(this._isObservable(u)){const f=this._invocationId;this._invocationId++,i[f]=u,o.push(f.toString()),n.splice(l,1)}}return[i,o]}_isObservable(n){return n&&n.subscribe&&typeof n.subscribe=="function"}_createStreamInvocation(n,i,o){const l=this._invocationId;return this._invocationId++,o.length!==0?{target:n,arguments:i,invocationId:l.toString(),streamIds:o,type:Ye.StreamInvocation}:{target:n,arguments:i,invocationId:l.toString(),type:Ye.StreamInvocation}}_createCancelInvocation(n){return{invocationId:n,type:Ye.CancelInvocation}}_createStreamItemMessage(n,i){return{invocationId:n,item:i,type:Ye.StreamItem}}_createCompletionMessage(n,i,o){return i?{error:i,invocationId:n,type:Ye.Completion}:{invocationId:n,result:o,type:Ye.Completion}}_createCloseMessage(){return{type:Ye.Close}}async _trySendPingMessage(){try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}}const SE=[0,2e3,1e4,3e4,null];class xy{constructor(n){this._retryDelays=n!==void 0?[...n,null]:SE}nextRetryDelayInMilliseconds(n){return this._retryDelays[n.previousRetryCount]}}class xi{}xi.Authorization="Authorization";xi.Cookie="Cookie";class wE extends Hl{constructor(n,i){super(),this._innerClient=n,this._accessTokenFactory=i}async send(n){let i=!0;this._accessTokenFactory&&(!this._accessToken||n.url&&n.url.indexOf("/negotiate?")>0)&&(i=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(n);const o=await this._innerClient.send(n);return i&&o.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(n),await this._innerClient.send(n)):o}_setAuthorizationHeader(n){n.headers||(n.headers={}),this._accessToken?n.headers[xi.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&n.headers[xi.Authorization]&&delete n.headers[xi.Authorization]}getCookieString(n){return this._innerClient.getCookieString(n)}}var Mt;(function(r){r[r.None=0]="None",r[r.WebSockets=1]="WebSockets",r[r.ServerSentEvents=2]="ServerSentEvents",r[r.LongPolling=4]="LongPolling"})(Mt||(Mt={}));var nn;(function(r){r[r.Text=1]="Text",r[r.Binary=2]="Binary"})(nn||(nn={}));let xE=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class Ty{get pollAborted(){return this._pollAbort.aborted}constructor(n,i,o){this._httpClient=n,this._logger=i,this._pollAbort=new xE,this._options=o,this._running=!1,this.onreceive=null,this.onclose=null}async connect(n,i){if(Ut.isRequired(n,"url"),Ut.isRequired(i,"transferFormat"),Ut.isIn(i,nn,"transferFormat"),this._url=n,this._logger.log(Ce.Trace,"(LongPolling transport) Connecting."),i===nn.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[o,l]=ys(),u={[o]:l,...this._options.headers},f={abortSignal:this._pollAbort.signal,headers:u,timeout:1e5,withCredentials:this._options.withCredentials};i===nn.Binary&&(f.responseType="arraybuffer");const p=`${n}&_=${Date.now()}`;this._logger.log(Ce.Trace,`(LongPolling transport) polling: ${p}.`);const m=await this._httpClient.get(p,f);m.statusCode!==200?(this._logger.log(Ce.Error,`(LongPolling transport) Unexpected response code: ${m.statusCode}.`),this._closeError=new wi(m.statusText||"",m.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,f)}async _poll(n,i){try{for(;this._running;)try{const o=`${n}&_=${Date.now()}`;this._logger.log(Ce.Trace,`(LongPolling transport) polling: ${o}.`);const l=await this._httpClient.get(o,i);l.statusCode===204?(this._logger.log(Ce.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):l.statusCode!==200?(this._logger.log(Ce.Error,`(LongPolling transport) Unexpected response code: ${l.statusCode}.`),this._closeError=new wi(l.statusText||"",l.statusCode),this._running=!1):l.content?(this._logger.log(Ce.Trace,`(LongPolling transport) data received. ${Do(l.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(l.content)):this._logger.log(Ce.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(o){this._running?o instanceof yf?this._logger.log(Ce.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=o,this._running=!1):this._logger.log(Ce.Trace,`(LongPolling transport) Poll errored after shutdown: ${o.message}`)}}finally{this._logger.log(Ce.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(n){return this._running?r0(this._logger,"LongPolling",this._httpClient,this._url,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(Ce.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(Ce.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const n={},[i,o]=ys();n[i]=o;const l={headers:{...n,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let u;try{await this._httpClient.delete(this._url,l)}catch(f){u=f}u?u instanceof wi&&(u.statusCode===404?this._logger.log(Ce.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(Ce.Trace,`(LongPolling transport) Error sending a DELETE request: ${u}`)):this._logger.log(Ce.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(Ce.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let n="(LongPolling transport) Firing onclose event.";this._closeError&&(n+=" Error: "+this._closeError),this._logger.log(Ce.Trace,n),this.onclose(this._closeError)}}}class TE{constructor(n,i,o,l){this._httpClient=n,this._accessToken=i,this._logger=o,this._options=l,this.onreceive=null,this.onclose=null}async connect(n,i){return Ut.isRequired(n,"url"),Ut.isRequired(i,"transferFormat"),Ut.isIn(i,nn,"transferFormat"),this._logger.log(Ce.Trace,"(SSE transport) Connecting."),this._url=n,this._accessToken&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((o,l)=>{let u=!1;if(i!==nn.Text){l(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let f;if(xt.isBrowser||xt.isWebWorker)f=new this._options.EventSource(n,{withCredentials:this._options.withCredentials});else{const p=this._httpClient.getCookieString(n),m={};m.Cookie=p;const[g,y]=ys();m[g]=y,f=new this._options.EventSource(n,{withCredentials:this._options.withCredentials,headers:{...m,...this._options.headers}})}try{f.onmessage=p=>{if(this.onreceive)try{this._logger.log(Ce.Trace,`(SSE transport) data received. ${Do(p.data,this._options.logMessageContent)}.`),this.onreceive(p.data)}catch(m){this._close(m);return}},f.onerror=p=>{u?this._close():l(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},f.onopen=()=>{this._logger.log(Ce.Information,`SSE connected to ${this._url}`),this._eventSource=f,u=!0,o()}}catch(p){l(p);return}})}async send(n){return this._eventSource?r0(this._logger,"SSE",this._httpClient,this._url,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(n){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(n))}}class CE{constructor(n,i,o,l,u,f){this._logger=o,this._accessTokenFactory=i,this._logMessageContent=l,this._webSocketConstructor=u,this._httpClient=n,this.onreceive=null,this.onclose=null,this._headers=f}async connect(n,i){Ut.isRequired(n,"url"),Ut.isRequired(i,"transferFormat"),Ut.isIn(i,nn,"transferFormat"),this._logger.log(Ce.Trace,"(WebSockets transport) Connecting.");let o;return this._accessTokenFactory&&(o=await this._accessTokenFactory()),new Promise((l,u)=>{n=n.replace(/^http/,"ws");let f;const p=this._httpClient.getCookieString(n);let m=!1;if(xt.isNode||xt.isReactNative){const g={},[y,E]=ys();g[y]=E,o&&(g[xi.Authorization]=`Bearer ${o}`),p&&(g[xi.Cookie]=p),f=new this._webSocketConstructor(n,void 0,{headers:{...g,...this._headers}})}else o&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(o)}`);f||(f=new this._webSocketConstructor(n)),i===nn.Binary&&(f.binaryType="arraybuffer"),f.onopen=g=>{this._logger.log(Ce.Information,`WebSocket connected to ${n}.`),this._webSocket=f,m=!0,l()},f.onerror=g=>{let y=null;typeof ErrorEvent<"u"&&g instanceof ErrorEvent?y=g.error:y="There was an error with the transport",this._logger.log(Ce.Information,`(WebSockets transport) ${y}.`)},f.onmessage=g=>{if(this._logger.log(Ce.Trace,`(WebSockets transport) data received. ${Do(g.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(g.data)}catch(y){this._close(y);return}},f.onclose=g=>{if(m)this._close(g);else{let y=null;typeof ErrorEvent<"u"&&g instanceof ErrorEvent?y=g.error:y="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",u(new Error(y))}}})}send(n){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(Ce.Trace,`(WebSockets transport) sending data. ${Do(n,this._logMessageContent)}.`),this._webSocket.send(n),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(n){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(Ce.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(n)&&(n.wasClean===!1||n.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${n.code} (${n.reason||"no reason given"}).`)):n instanceof Error?this.onclose(n):this.onclose())}_isCloseEvent(n){return n&&typeof n.wasClean=="boolean"&&typeof n.code=="number"}}const Cy=100;class RE{constructor(n,i={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,Ut.isRequired(n,"url"),this._logger=rE(i.logger),this.baseUrl=this._resolveUrl(n),i=i||{},i.logMessageContent=i.logMessageContent===void 0?!1:i.logMessageContent,typeof i.withCredentials=="boolean"||i.withCredentials===void 0)i.withCredentials=i.withCredentials===void 0?!0:i.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");i.timeout=i.timeout===void 0?100*1e3:i.timeout;let o=null,l=null;if(xt.isNode&&typeof require<"u"){const u=typeof __webpack_require__=="function"?__non_webpack_require__:require;o=u("ws"),l=u("eventsource")}!xt.isNode&&typeof WebSocket<"u"&&!i.WebSocket?i.WebSocket=WebSocket:xt.isNode&&!i.WebSocket&&o&&(i.WebSocket=o),!xt.isNode&&typeof EventSource<"u"&&!i.EventSource?i.EventSource=EventSource:xt.isNode&&!i.EventSource&&typeof l<"u"&&(i.EventSource=l),this._httpClient=new wE(i.httpClient||new fE(this._logger),i.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=i,this.onreceive=null,this.onclose=null}async start(n){if(n=n||nn.Binary,Ut.isIn(n,nn,"transferFormat"),this._logger.log(Ce.Debug,`Starting connection with transfer format '${nn[n]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(n),await this._startInternalPromise,this._connectionState==="Disconnecting"){const i="Failed to start the HttpConnection before stop() was called.";return this._logger.log(Ce.Error,i),await this._stopPromise,Promise.reject(new qn(i))}else if(this._connectionState!=="Connected"){const i="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(Ce.Error,i),Promise.reject(new qn(i))}this._connectionStarted=!0}send(n){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new bf(this.transport)),this._sendQueue.send(n))}async stop(n){if(this._connectionState==="Disconnected")return this._logger.log(Ce.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(Ce.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(i=>{this._stopPromiseResolver=i}),await this._stopInternal(n),await this._stopPromise}async _stopInternal(n){this._stopError=n;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(i){this._logger.log(Ce.Error,`HttpConnection.transport.stop() threw error '${i}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(Ce.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(n){let i=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===Mt.WebSockets)this.transport=this._constructTransport(Mt.WebSockets),await this._startTransport(i,n);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let o=null,l=0;do{if(o=await this._getNegotiationResponse(i),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new qn("The connection was stopped during negotiation.");if(o.error)throw new Error(o.error);if(o.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(o.url&&(i=o.url),o.accessToken){const u=o.accessToken;this._accessTokenFactory=()=>u,this._httpClient._accessToken=u,this._httpClient._accessTokenFactory=void 0}l++}while(o.url&&l<Cy);if(l===Cy&&o.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(i,this._options.transport,o,n)}this.transport instanceof Ty&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(Ce.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(o){return this._logger.log(Ce.Error,"Failed to start the connection: "+o),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(o)}}async _getNegotiationResponse(n){const i={},[o,l]=ys();i[o]=l;const u=this._resolveNegotiateUrl(n);this._logger.log(Ce.Debug,`Sending negotiation request: ${u}.`);try{const f=await this._httpClient.post(u,{content:"",headers:{...i,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(f.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${f.statusCode}'`));const p=JSON.parse(f.content);return(!p.negotiateVersion||p.negotiateVersion<1)&&(p.connectionToken=p.connectionId),p.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new Sy("Client didn't negotiate Stateful Reconnect but the server did.")):p}catch(f){let p="Failed to complete negotiation with the server: "+f;return f instanceof wi&&f.statusCode===404&&(p=p+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(Ce.Error,p),Promise.reject(new Sy(p))}}_createConnectUrl(n,i){return i?n+(n.indexOf("?")===-1?"?":"&")+`id=${i}`:n}async _createTransport(n,i,o,l){let u=this._createConnectUrl(n,o.connectionToken);if(this._isITransport(i)){this._logger.log(Ce.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=i,await this._startTransport(u,l),this.connectionId=o.connectionId;return}const f=[],p=o.availableTransports||[];let m=o;for(const g of p){const y=this._resolveTransportOrError(g,i,l,m?.useStatefulReconnect===!0);if(y instanceof Error)f.push(`${g.transport} failed:`),f.push(y);else if(this._isITransport(y)){if(this.transport=y,!m){try{m=await this._getNegotiationResponse(n)}catch(E){return Promise.reject(E)}u=this._createConnectUrl(n,m.connectionToken)}try{await this._startTransport(u,l),this.connectionId=m.connectionId;return}catch(E){if(this._logger.log(Ce.Error,`Failed to start the transport '${g.transport}': ${E}`),m=void 0,f.push(new ZR(`${g.transport} failed: ${E}`,Mt[g.transport])),this._connectionState!=="Connecting"){const I="Failed to select transport before stop() was called.";return this._logger.log(Ce.Debug,I),Promise.reject(new qn(I))}}}}return f.length>0?Promise.reject(new eE(`Unable to connect to the server with any of the available transports. ${f.join(" ")}`,f)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(n){switch(n){case Mt.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new CE(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case Mt.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new TE(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case Mt.LongPolling:return new Ty(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${n}.`)}}_startTransport(n,i){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async o=>{let l=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(n,i),await this.features.resend()}catch{l=!0}else{this._stopConnection(o);return}l&&this._stopConnection(o)}:this.transport.onclose=o=>this._stopConnection(o),this.transport.connect(n,i)}_resolveTransportOrError(n,i,o,l){const u=Mt[n.transport];if(u==null)return this._logger.log(Ce.Debug,`Skipping transport '${n.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${n.transport}' because it is not supported by this client.`);if(EE(i,u))if(n.transferFormats.map(p=>nn[p]).indexOf(o)>=0){if(u===Mt.WebSockets&&!this._options.WebSocket||u===Mt.ServerSentEvents&&!this._options.EventSource)return this._logger.log(Ce.Debug,`Skipping transport '${Mt[u]}' because it is not supported in your environment.'`),new WR(`'${Mt[u]}' is not supported in your environment.`,u);this._logger.log(Ce.Debug,`Selecting transport '${Mt[u]}'.`);try{return this.features.reconnect=u===Mt.WebSockets?l:void 0,this._constructTransport(u)}catch(p){return p}}else return this._logger.log(Ce.Debug,`Skipping transport '${Mt[u]}' because it does not support the requested transfer format '${nn[o]}'.`),new Error(`'${Mt[u]}' does not support ${nn[o]}.`);else return this._logger.log(Ce.Debug,`Skipping transport '${Mt[u]}' because it was disabled by the client.`),new QR(`'${Mt[u]}' is disabled by the client.`,u)}_isITransport(n){return n&&typeof n=="object"&&"connect"in n}_stopConnection(n){if(this._logger.log(Ce.Debug,`HttpConnection.stopConnection(${n}) called while in state ${this._connectionState}.`),this.transport=void 0,n=this._stopError||n,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(Ce.Debug,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(Ce.Warning,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${n}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),n?this._logger.log(Ce.Error,`Connection disconnected with error '${n}'.`):this._logger.log(Ce.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(i=>{this._logger.log(Ce.Error,`TransportSendQueue.stop() threw error '${i}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(n)}catch(i){this._logger.log(Ce.Error,`HttpConnection.onclose(${n}) threw error '${i}'.`)}}}_resolveUrl(n){if(n.lastIndexOf("https://",0)===0||n.lastIndexOf("http://",0)===0)return n;if(!xt.isBrowser)throw new Error(`Cannot resolve '${n}'.`);const i=window.document.createElement("a");return i.href=n,this._logger.log(Ce.Information,`Normalizing '${n}' to '${i.href}'.`),i.href}_resolveNegotiateUrl(n){const i=new URL(n);i.pathname.endsWith("/")?i.pathname+="negotiate":i.pathname+="/negotiate";const o=new URLSearchParams(i.searchParams);return o.has("negotiateVersion")||o.append("negotiateVersion",this._negotiateVersion.toString()),o.has("useStatefulReconnect")?o.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&o.append("useStatefulReconnect","true"),i.search=o.toString(),i.toString()}}function EE(r,n){return!r||(n&r)!==0}class bf{constructor(n){this._transport=n,this._buffer=[],this._executing=!0,this._sendBufferedData=new ll,this._transportResult=new ll,this._sendLoopPromise=this._sendLoop()}send(n){return this._bufferData(n),this._transportResult||(this._transportResult=new ll),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(n){if(this._buffer.length&&typeof this._buffer[0]!=typeof n)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof n}`);this._buffer.push(n),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new ll;const n=this._transportResult;this._transportResult=void 0;const i=typeof this._buffer[0]=="string"?this._buffer.join(""):bf._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(i),n.resolve()}catch(o){n.reject(o)}}}static _concatBuffers(n){const i=n.map(u=>u.byteLength).reduce((u,f)=>u+f),o=new Uint8Array(i);let l=0;for(const u of n)o.set(new Uint8Array(u),l),l+=u.byteLength;return o.buffer}}class ll{constructor(){this.promise=new Promise((n,i)=>[this._resolver,this._rejecter]=[n,i])}resolve(){this._resolver()}reject(n){this._rejecter(n)}}const _E="json";class kE{constructor(){this.name=_E,this.version=2,this.transferFormat=nn.Text}parseMessages(n,i){if(typeof n!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!n)return[];i===null&&(i=Uo.instance);const o=Rn.parse(n),l=[];for(const u of o){const f=JSON.parse(u);if(typeof f.type!="number")throw new Error("Invalid payload.");switch(f.type){case Ye.Invocation:this._isInvocationMessage(f);break;case Ye.StreamItem:this._isStreamItemMessage(f);break;case Ye.Completion:this._isCompletionMessage(f);break;case Ye.Ping:break;case Ye.Close:break;case Ye.Ack:this._isAckMessage(f);break;case Ye.Sequence:this._isSequenceMessage(f);break;default:i.log(Ce.Information,"Unknown message type '"+f.type+"' ignored.");continue}l.push(f)}return l}writeMessage(n){return Rn.write(JSON.stringify(n))}_isInvocationMessage(n){this._assertNotEmptyString(n.target,"Invalid payload for Invocation message."),n.invocationId!==void 0&&this._assertNotEmptyString(n.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(n){if(this._assertNotEmptyString(n.invocationId,"Invalid payload for StreamItem message."),n.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(n){if(n.result&&n.error)throw new Error("Invalid payload for Completion message.");!n.result&&n.error&&this._assertNotEmptyString(n.error,"Invalid payload for Completion message."),this._assertNotEmptyString(n.invocationId,"Invalid payload for Completion message.")}_isAckMessage(n){if(typeof n.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(n){if(typeof n.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(n,i){if(typeof n!="string"||n==="")throw new Error(i)}}const jE={trace:Ce.Trace,debug:Ce.Debug,info:Ce.Information,information:Ce.Information,warn:Ce.Warning,warning:Ce.Warning,error:Ce.Error,critical:Ce.Critical,none:Ce.None};function NE(r){const n=jE[r.toLowerCase()];if(typeof n<"u")return n;throw new Error(`Unknown log level: ${r}`)}class AE{configureLogging(n){if(Ut.isRequired(n,"logging"),OE(n))this.logger=n;else if(typeof n=="string"){const i=NE(n);this.logger=new _l(i)}else this.logger=new _l(n);return this}withUrl(n,i){return Ut.isRequired(n,"url"),Ut.isNotEmpty(n,"url"),this.url=n,typeof i=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...i}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:i},this}withHubProtocol(n){return Ut.isRequired(n,"protocol"),this.protocol=n,this}withAutomaticReconnect(n){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return n?Array.isArray(n)?this.reconnectPolicy=new xy(n):this.reconnectPolicy=n:this.reconnectPolicy=new xy,this}withServerTimeout(n){return Ut.isRequired(n,"milliseconds"),this._serverTimeoutInMilliseconds=n,this}withKeepAliveInterval(n){return Ut.isRequired(n,"milliseconds"),this._keepAliveIntervalInMilliseconds=n,this}withStatefulReconnect(n){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=n?.bufferSize,this}build(){const n=this.httpConnectionOptions||{};if(n.logger===void 0&&(n.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const i=new RE(this.url,n);return vf.create(i,this.logger||Uo.instance,this.protocol||new kE,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function OE(r){return r.log!==void 0}class ME{constructor(){this.connection=null,this.isConnected=!1}async connect(){if(this.isConnected&&this.connection?.state===yt.Connected)return;if(this.connection)try{await this.connection.stop()}catch(i){console.log("Error stopping existing connection:",i)}const n="https://festive-guest-api.azurewebsites.net/chathub";this.connection=new AE().withUrl(n,{skipNegotiation:!0,transport:Mt.WebSockets,accessTokenFactory:()=>{const i=localStorage.getItem("user");return i?JSON.parse(i).token:null}}).withAutomaticReconnect().build(),this.connection.onreconnected(()=>{this.isConnected=!0}),this.connection.onreconnecting(()=>{this.isConnected=!1}),this.connection.onclose(()=>{this.isConnected=!1});try{await this.connection.start(),this.isConnected=!0,console.log("SignalR Connected")}catch(i){throw console.error("SignalR Connection Error:",i),this.isConnected=!1,i}}async joinChat(n){this.isConnected||await this.connect();try{await this.connection.invoke("JoinChat",n)}catch(i){console.error("Error joining chat:",i)}}async sendMessage(n,i){this.isConnected||await this.connect();try{await this.connection.invoke("SendMessage",n,i)}catch(o){throw console.error("Error sending message:",o),o}}onReceiveMessage(n){this.connection&&this.connection.on("ReceiveMessage",n)}offReceiveMessage(n){this.connection&&this.connection.off("ReceiveMessage",n)}}const Eo=new ME,Wn=({src:r,alt:n,className:i,style:o,fallbackText:l="No Image",userId:u=null})=>{const[f,p]=O.useState(null),[m,g]=O.useState(!0),[y,E]=O.useState(!1),I=`data:image/svg+xml;base64,${btoa(`
    <svg width="150" height="150" viewBox="0 0 150 150" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="150" height="150" rx="8" fill="#f1f5f9"/>
      <text x="75" y="80" text-anchor="middle" fill="#64748b" font-family="Arial" font-size="14">${l.replace(/[^\x00-\x7F]/g,"User")}</text>
    </svg>
  `)}`;O.useEffect(()=>{(async()=>{if(!r||y){p(I),g(!1);return}try{if(g(!0),r.includes("blob.core.windows.net")&&!r.includes("?")){const H=r.split("/"),B=H[H.length-1],se=H[H.length-2]||"logos",le=await t0.getSasUrl(B,se);p(le||I)}else p(r)}catch(H){console.error("Error loading image with SAS:",H),p(I),E(!0)}finally{g(!1)}})()},[r,y,I]);const F=()=>{y||(E(!0),p(I),g(!1))};return m?c.jsx("div",{className:i,style:{...o,display:"flex",alignItems:"center",justifyContent:"center",background:"#f1f5f9",color:"#64748b",fontSize:"12px"},children:"Loading..."}):c.jsx("img",{src:f,alt:n,className:i,style:o,onError:F})},ql=({recipientId:r,recipientName:n,recipientImageUrl:i,onClose:o})=>{const[l,u]=O.useState([]),[f,p]=O.useState(""),[m,g]=O.useState(!1),[y,E]=O.useState(!1),[I,F]=O.useState(!0),[A,H]=O.useState(null),B=localStorage.getItem("userId")||JSON.parse(localStorage.getItem("user")||"{}").userId,se=O.useRef(null),le=O.useRef(null);O.useEffect(()=>(console.log("ChatWidget mounted with:",{recipientId:r,recipientName:n}),me(),()=>{console.log("ChatWidget unmounting"),le.current&&Eo.offReceiveMessage(le.current)}),[r]);const me=async()=>{try{console.log("Initializing chat..."),F(!0),H(null);const ie=setTimeout(()=>{y||(console.log("Using fallback connection state"),E(!0))},2e3);try{await Eo.connect(),await Eo.joinChat(r),clearTimeout(ie),console.log("Chat service connected successfully")}catch(fe){console.warn("Chat service connection failed, using fallback:",fe),clearTimeout(ie)}le.current=fe=>{console.log("Received message:",fe),fe.senderId===r&&u(ue=>ue.find(Re=>Re.id===fe.id)?ue:[...ue,{id:fe.id,sender:"Recipient",text:fe.message,timestamp:new Date(fe.timestamp),status:"delivered"}])},Eo.onReceiveMessage(le.current);try{const fe=await Ve.get(`chat/messages/${r}`);if(fe.data&&fe.data.length>0){const ue=fe.data.map(Re=>({id:Re.id,sender:Re.senderId===B?"Me":"Recipient",text:Re.message,timestamp:new Date(Re.timestamp),status:Re.status?.toLowerCase()||"sent"}));u(ue),console.log("Loaded message history:",ue.length,"messages")}}catch(fe){console.error("Failed to load message history:",fe),H("Failed to load message history")}E(!0)}catch(ie){console.error("Failed to initialize chat:",ie),H("Failed to connect to chat service"),E(!0)}finally{F(!1)}};O.useEffect(()=>{se.current?.scrollIntoView({behavior:"smooth"})},[l]);const ce=async ie=>{if(ie.preventDefault(),!!f.trim())try{g(!0);const fe=f.trim();p(""),console.log("Sending message:",fe,"to:",r);const ue={id:Date.now(),sender:"Me",text:fe,timestamp:new Date,status:"sending"};u(Re=>[...Re,ue]);try{await Eo.sendMessage(r,fe),console.log("Message sent successfully via SignalR"),u(Re=>Re.map(Ne=>Ne.id===ue.id?{...Ne,status:"sent"}:Ne))}catch(Re){console.error("Failed to send message via chat service:",Re);try{console.log("Attempting API fallback for message send"),await Ve.post("chat/send",{recipientId:r,message:fe}),console.log("Message sent via API fallback"),u(Ne=>Ne.map(xe=>xe.id===ue.id?{...xe,status:"sent"}:xe))}catch(Ne){console.error("Failed to send message via API:",Ne),u(xe=>xe.map(Se=>Se.id===ue.id?{...Se,status:"failed"}:Se)),p(fe)}}}catch(fe){console.error("Failed to send message:",fe),p(messageText)}finally{g(!1)}};return c.jsxs("div",{className:"chat-widget",children:[c.jsxs("div",{className:"chat-header",children:[c.jsxs("div",{className:"chat-user-info",children:[c.jsx(Wn,{src:i,alt:n,className:"user-avatar",fallbackText:"User"}),c.jsxs("div",{children:[c.jsx("div",{className:"user-name",children:n||"Chat"}),c.jsxs("div",{className:"user-status",children:[" ",y?"Online":I?"Connecting...":"Offline"]})]})]}),c.jsx("button",{onClick:o,className:"close-btn",title:"Close chat",children:c.jsx(ff,{size:16})})]}),c.jsxs("div",{className:"chat-messages",children:[I?c.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:[c.jsx("div",{style:{marginBottom:"0.5rem"},children:""}),"Loading messages..."]}):A?c.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#ef4444"},children:[c.jsx("div",{style:{marginBottom:"0.5rem"},children:""}),A,c.jsx("button",{onClick:me,style:{display:"block",margin:"1rem auto 0",padding:"0.5rem 1rem",background:"var(--primary)",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer"},children:"Retry"})]}):l.length===0?c.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:[c.jsx("div",{style:{marginBottom:"0.5rem"},children:""}),"Start a conversation with ",n]}):l.map((ie,fe)=>c.jsxs("div",{className:`message ${ie.sender==="Me"?"sent":"received"}`,children:[c.jsx("div",{className:"message-content",children:ie.text}),c.jsxs("div",{style:{fontSize:"11px",color:"#65676b",marginTop:"2px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem"},children:[new Date(ie.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),ie.sender==="Me"&&c.jsxs("span",{className:`message-status ${ie.status}`,children:[ie.status==="sending"&&"",ie.status==="sent"&&"",ie.status==="delivered"&&"",ie.status==="failed"&&""]})]})]},ie.id||fe)),c.jsx("div",{ref:se})]}),c.jsxs("form",{onSubmit:ce,className:"chat-input",children:[c.jsx("input",{type:"text",value:f,onChange:ie=>p(ie.target.value),placeholder:"Type a message...",className:"message-input",disabled:m||I}),c.jsx("button",{type:"submit",className:"send-btn",disabled:m||!f.trim()||I,title:"Send message",children:m?c.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid white",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}):c.jsx(Mo,{size:16})})]})]})},UE=()=>{const[r,n]=O.useState(null),[i,o]=O.useState(""),[l,u]=O.useState(""),f=()=>{if(!i.trim()||!l.trim()){alert("Please enter both recipient ID and name");return}console.log("Opening test chat with:",{id:i,name:l}),n({id:i.trim(),name:l.trim(),imageUrl:null})},p=()=>{console.log("Closing test chat"),n(null)};return c.jsxs("div",{style:{padding:"2rem",maxWidth:"500px",margin:"0 auto"},children:[c.jsx("h2",{children:"Chat Debug Tool"}),c.jsx("div",{style:{marginBottom:"1rem"},children:c.jsxs("label",{style:{display:"block",marginBottom:"0.5rem"},children:["Recipient ID:",c.jsx("input",{type:"text",value:i,onChange:m=>o(m.target.value),placeholder:"Enter recipient user ID",style:{width:"100%",padding:"0.5rem",border:"1px solid #ccc",borderRadius:"0.25rem",marginTop:"0.25rem"}})]})}),c.jsx("div",{style:{marginBottom:"1rem"},children:c.jsxs("label",{style:{display:"block",marginBottom:"0.5rem"},children:["Recipient Name:",c.jsx("input",{type:"text",value:l,onChange:m=>u(m.target.value),placeholder:"Enter recipient name",style:{width:"100%",padding:"0.5rem",border:"1px solid #ccc",borderRadius:"0.25rem",marginTop:"0.25rem"}})]})}),c.jsx("button",{onClick:f,style:{padding:"0.75rem 1.5rem",background:"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",marginRight:"1rem"},children:"Open Test Chat"}),c.jsx("button",{onClick:p,style:{padding:"0.75rem 1.5rem",background:"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer"},children:"Close Chat"}),r&&c.jsx("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,width:"350px",height:"500px",boxShadow:"0 10px 25px rgba(0,0,0,0.2)",borderRadius:"12px",overflow:"hidden",animation:"slideInUp 0.3s ease-out"},children:c.jsx(ql,{recipientId:r.id,recipientName:r.name,recipientImageUrl:r.imageUrl,onClose:p})})]})},DE=({isOpen:r,onClose:n,selectedRole:i})=>{const o=br(),[l,u]=O.useState(!1),[f,p]=O.useState(null),m=()=>{if(!l)return;const E=Date.now(),I={accepted:!0,timestamp:E,role:i,userAgent:navigator.userAgent,sessionId:crypto.randomUUID()};sessionStorage.setItem("disclaimerAcceptance",JSON.stringify(I)),o(`/register?role=${i}&disclaimerAccepted=${E}`),n()},g=()=>{o("/"),n()},y=E=>{const I=E.target.checked;u(I),p(I?Date.now():null)};return r?c.jsx("div",{className:"modal-overlay",style:{zIndex:9999},children:c.jsxs("div",{className:"modal-content",style:{maxWidth:"800px",maxHeight:"90vh",overflowY:"auto"},children:[c.jsx("div",{className:"modal-header",children:c.jsx("h3",{style:{color:"#1e293b",margin:0},children:" Important Disclaimer - Please Read Carefully"})}),c.jsxs("div",{className:"modal-body",children:[c.jsx("div",{style:{padding:"1.5rem",background:"#fef3c7",border:"2px solid #f59e0b",borderRadius:"0.75rem",marginBottom:"1.5rem"},children:c.jsxs("div",{style:{color:"#92400e",fontSize:"0.95rem",lineHeight:"1.6"},children:[c.jsxs("p",{style:{margin:"0 0 1rem 0",fontWeight:"600"},children:[c.jsx("strong",{children:"Local Host Connect"})," is a platform that connects travelers with local hosts for authentic cultural experiences. By proceeding, you acknowledge and agree that:"]}),c.jsxs("ul",{style:{margin:"0",paddingLeft:"1.5rem"},children:[c.jsxs("li",{style:{marginBottom:"0.75rem"},children:["We are ",c.jsx("strong",{children:"not responsible"})," for any incidents, damages, or issues that may occur during your interactions or meetings."]}),c.jsxs("li",{style:{marginBottom:"0.75rem"},children:["We do ",c.jsx("strong",{children:"not guarantee"})," that you will find suitable hosts or guests, as this depends on availability and mutual compatibility."]}),c.jsxs("li",{style:{marginBottom:"0.75rem"},children:["We act solely as a ",c.jsx("strong",{children:"platform for introductions"})," and do not verify the background, intentions, or authenticity of users."]}),c.jsxs("li",{style:{marginBottom:"0.75rem"},children:["All interactions, arrangements, and meetings are ",c.jsx("strong",{children:"at your own risk and discretion"}),"."]}),c.jsxs("li",{style:{marginBottom:"0.75rem"},children:[c.jsx("strong",{children:"Payment & Financial Caution:"})," Hosts may request payment for services. It is entirely your responsibility to decide payment terms. Exercise caution and verify authenticity before any financial transactions."]}),c.jsxs("li",{style:{marginBottom:"0.75rem"},children:["We ",c.jsx("strong",{children:"strongly recommend"})," meeting in public places first and taking necessary safety precautions."]}),c.jsxs("li",{children:["By proceeding, you accept ",c.jsx("strong",{children:"full responsibility"})," for your safety and interactions."]})]})]})}),c.jsx("div",{style:{padding:"1.5rem",background:"#f0f9ff",border:"2px solid #0ea5e9",borderRadius:"0.75rem",marginBottom:"1.5rem"},children:c.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"1rem",cursor:"pointer",fontSize:"1rem",lineHeight:"1.5"},children:[c.jsx("input",{type:"checkbox",checked:l,onChange:y,required:!0,style:{width:"20px",height:"20px",marginTop:"2px",cursor:"pointer",accentColor:"#0ea5e9"}}),c.jsxs("span",{style:{color:"#0c4a6e",fontWeight:"500"},children:["I have read, understood, and agree to the ",c.jsx("strong",{children:"Important Disclaimer"})," above. I acknowledge that I am using this platform at my own risk and accept full responsibility for my safety and interactions. I also agree to the"," ",c.jsx("button",{type:"button",style:{background:"none",border:"none",color:"#0ea5e9",textDecoration:"underline",cursor:"pointer",padding:0,font:"inherit"},onClick:()=>window.open("/privacy-policy","_blank"),children:"Privacy Policy"})," ","and"," ",c.jsx("button",{type:"button",style:{background:"none",border:"none",color:"#0ea5e9",textDecoration:"underline",cursor:"pointer",padding:0,font:"inherit"},onClick:()=>window.open("/terms-of-service","_blank"),children:"Terms of Service"}),"."]})]})})]}),c.jsxs("div",{className:"modal-footer",style:{display:"flex",gap:"1rem",justifyContent:"flex-end",padding:"1rem 0 0 0"},children:[c.jsx("button",{onClick:g,className:"btn btn-outline",style:{padding:"0.75rem 1.5rem"},children:"Cancel"}),c.jsx("button",{onClick:m,className:"btn btn-primary",disabled:!l,style:{padding:"0.75rem 1.5rem",opacity:l?1:.5,cursor:l?"pointer":"not-allowed"},children:"Agree & Continue"})]})]})}):null},PE=({user:r})=>{const n=br(),[i,o]=O.useState(!1),[l,u]=O.useState(""),f=m=>{u(m),o(!0)},p=()=>{const m=r?.role||r?.userType||r?.partitionKey;return m==="Host"?"/host-dashboard":m==="Guest"?"/guest-dashboard":m==="Admin"?"/admin":"/"};return c.jsxs("div",{className:"landing-page",children:[c.jsxs("section",{className:"hero",children:[c.jsxs("div",{className:"hero-content",children:[c.jsx("h1",{className:"hero-title",children:"Connect with Local Hosts Anywhere"}),c.jsx("p",{className:"hero-subtitle",children:"Experience authentic local culture and hospitality during your travels"}),c.jsx("div",{className:"hero-buttons",children:r?c.jsx("button",{className:"btn btn-primary",onClick:()=>n(p()),children:"Go to My Dashboard"}):c.jsxs(c.Fragment,{children:[c.jsx("button",{className:"btn btn-primary",onClick:()=>f("Guest"),children:"Find Local Hosts"}),c.jsx("button",{className:"btn btn-secondary",onClick:()=>f("Host"),children:"Become a Host"})]})})]}),c.jsx("div",{className:"hero-image",children:c.jsxs("div",{className:"festival-card",children:[c.jsx("h3",{children:" Travel & Connect"}),c.jsx("p",{children:"Stay with locals, experience culture, make lasting memories"})]})})]}),c.jsx("section",{className:"features",children:c.jsxs("div",{className:"container",children:[c.jsx("h2",{children:"Why Choose Local Host Connect?"}),c.jsxs("div",{className:"features-grid",children:[c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Local Accommodation"}),c.jsx("p",{children:"Stay with friendly hosts who provide comfortable accommodation and local insights"})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Local Experiences"}),c.jsx("p",{children:"Discover hidden gems, local attractions, and authentic experiences with insider knowledge"})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Cultural Exchange"}),c.jsx("p",{children:"Connect with locals and fellow travelers, learn about local customs and traditions"})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Authentic Cuisine"}),c.jsx("p",{children:"Enjoy homemade local food and discover regional specialties you won't find in restaurants"})]})]})]})}),c.jsx("section",{className:"testimonials",children:c.jsxs("div",{className:"container",children:[c.jsx("h2",{children:"Perfect for Every Type of Travel"}),c.jsxs("div",{className:"features-grid",children:[c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Business Travel"}),c.jsx("p",{children:"Comfortable stays for work trips with local networking opportunities"})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Leisure Travel"}),c.jsx("p",{children:"Explore new destinations with insider tips from local hosts"})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Festival Travel"}),c.jsx("p",{children:"Experience authentic celebrations during Diwali, Pongal, and local festivals"})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Educational Travel"}),c.jsx("p",{children:"Perfect for students, researchers, and cultural learning experiences"})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Family Visits"}),c.jsx("p",{children:"Extended family stays and reunions in different cities"})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Cultural Exchange"}),c.jsx("p",{children:"Immerse yourself in local traditions and make lasting connections"})]})]})]})}),c.jsx("section",{className:"how-it-works",children:c.jsxs("div",{className:"container",children:[c.jsx("h2",{children:"How It Works"}),c.jsxs("div",{className:"steps",children:[c.jsxs("div",{className:"step",children:[c.jsx("div",{className:"step-number",children:"1"}),c.jsx("h3",{children:"Register"}),c.jsx("p",{children:"Sign up as a Guest or Host for free"})]}),c.jsxs("div",{className:"step",children:[c.jsx("div",{className:"step-number",children:"2"}),c.jsx("h3",{children:"Connect"}),c.jsx("p",{children:"Browse profiles and connect with hosts/guests in your destination"})]}),c.jsxs("div",{className:"step",children:[c.jsx("div",{className:"step-number",children:"3"}),c.jsx("h3",{children:"Experience"}),c.jsx("p",{children:"Enjoy authentic local experiences and create lasting memories"})]})]})]})}),c.jsx("section",{className:"testimonials",children:c.jsxs("div",{className:"container",children:[c.jsx("h2",{children:"What Our Users Say"}),c.jsxs("div",{className:"testimonials-grid",children:[c.jsxs("div",{className:"testimonial",children:[c.jsx("p",{children:'"Amazing experience staying with a local family in Rajahmundry! They showed me places I never would have found on my own."'}),c.jsx("div",{className:"testimonial-author",children:"- Priya, Hyderabad"})]}),c.jsxs("div",{className:"testimonial",children:[c.jsx("p",{children:`"Hosting travelers has been so rewarding. I've made friends from all over India and learned so much about different cultures."`}),c.jsx("div",{className:"testimonial-author",children:"- Ravi, Kakinada"})]}),c.jsxs("div",{className:"testimonial",children:[c.jsx("p",{children:'"Perfect for my business trips to Chennai. My host helped me navigate the city and even introduced me to local business contacts."'}),c.jsx("div",{className:"testimonial-author",children:"- Amit, Mumbai"})]}),c.jsxs("div",{className:"testimonial",children:[c.jsx("p",{children:'"As a student researching folk traditions, staying with local families gave me insights no textbook could provide."'}),c.jsx("div",{className:"testimonial-author",children:"- Meera, Delhi"})]})]})]})}),c.jsx("section",{className:"features",children:c.jsxs("div",{className:"container",children:[c.jsx("h2",{children:"Your Safety & Trust is Our Priority"}),c.jsxs("div",{className:"features-grid",children:[c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Profile Registration"}),c.jsx("p",{children:"All users create detailed profiles with personal information for transparency and trust"})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Review System"}),c.jsx("p",{children:"Read genuine reviews from previous guests and hosts to make informed decisions"})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Secure Messaging"}),c.jsx("p",{children:"Connect with hosts and guests through our secure in-app messaging system"})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"24/7 Support"}),c.jsx("p",{children:"Our support team is available round the clock to help with any issues or concerns"})]})]})]})}),c.jsx("section",{className:"testimonials",children:c.jsxs("div",{className:"container",children:[c.jsx("h2",{children:"Popular Destinations"}),c.jsxs("div",{className:"features-grid",children:[c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Hyderabad"}),c.jsx("p",{children:"Tech hub with rich history, famous for biryani and Charminar"})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Visakhapatnam"}),c.jsx("p",{children:"Beautiful coastal city with beaches, hills, and naval heritage"})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Rajahmundry"}),c.jsx("p",{children:"Cultural capital on Godavari river, known for arts and literature"})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Kakinada"}),c.jsx("p",{children:"Port city with industrial significance and beautiful coastline"})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Vijayawada"}),c.jsx("p",{children:"Commercial hub with temples, caves, and rich cultural heritage"})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Tirupati"}),c.jsx("p",{children:"Sacred pilgrimage destination with ancient temples and traditions"})]})]})]})}),c.jsx("section",{className:"how-it-works",children:c.jsxs("div",{className:"container",children:[c.jsx("h2",{children:"Benefits of Becoming a Host"}),c.jsxs("div",{className:"steps",children:[c.jsxs("div",{className:"step",children:[c.jsx("div",{className:"step-number",children:""}),c.jsx("h3",{children:"Earn Extra Income"}),c.jsx("p",{children:"Generate additional revenue by hosting travelers in your spare room"})]}),c.jsxs("div",{className:"step",children:[c.jsx("div",{className:"step-number",children:""}),c.jsx("h3",{children:"Meet New People"}),c.jsx("p",{children:"Connect with travelers from different cultures and backgrounds"})]}),c.jsxs("div",{className:"step",children:[c.jsx("div",{className:"step-number",children:""}),c.jsx("h3",{children:"Share Your Culture"}),c.jsx("p",{children:"Showcase your local traditions, food, and hidden gems to visitors"})]})]})]})}),c.jsx("section",{className:"features",children:c.jsxs("div",{className:"container",children:[c.jsx("h2",{children:" Safety Guidelines - Please Read Before Meeting"}),c.jsxs("div",{className:"features-grid",children:[c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Share Your Plans"}),c.jsx("p",{children:"Always inform family/friends about your travel plans, host details, and expected return time"})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Meet in Public First"}),c.jsx("p",{children:"Arrange initial meetings in public places like cafes or restaurants before going to private locations"})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Video Call Before Meeting"}),c.jsx("p",{children:"Have a video conversation to verify identity and get comfortable before meeting in person"})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Keep Emergency Contacts"}),c.jsx("p",{children:"Save local emergency numbers and keep your phone charged. Share live location with trusted contacts"})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Trust Your Instincts"}),c.jsx("p",{children:"If something feels wrong, don't hesitate to leave. Your safety is more important than being polite"})]}),c.jsxs("div",{className:"feature-card",children:[c.jsx("div",{className:"feature-icon",children:""}),c.jsx("h3",{children:"Secure Payment Methods"}),c.jsx("p",{children:"Use secure payment methods and avoid carrying large amounts of cash. Keep copies of important documents"})]})]})]})}),c.jsx("section",{className:"cta",children:c.jsxs("div",{className:"container",children:[c.jsx("h2",{children:"Ready to Start Your Travel Journey?"}),c.jsx("p",{children:"Join thousands of travelers and hosts connecting across India"}),c.jsx("div",{className:"cta-buttons",children:r?c.jsx("button",{className:"btn btn-primary",onClick:()=>n(p()),children:"Go to My Dashboard"}):c.jsxs(c.Fragment,{children:[c.jsx("button",{className:"btn btn-primary",onClick:()=>f("Guest"),children:"Get Started"}),c.jsx("button",{className:"btn btn-primary",onClick:()=>n("/login"),children:"Already have an account?"})]})})]})}),c.jsx("footer",{className:"footer",children:c.jsx("div",{className:"container",children:c.jsx("p",{children:" 2024 Local Host Connect. Connecting travelers with local experiences."})})}),c.jsx(DE,{isOpen:i,onClose:()=>o(!1),selectedRole:l})]})},IE=({setUser:r})=>{const[n,i]=O.useState(""),[o,l]=O.useState(""),[u,f]=O.useState(!1),[p,m]=O.useState(!1),[g,y]=O.useState(null),[E,I]=O.useState(""),[F,A]=O.useState(""),[H,B]=O.useState(!1),[se,le]=O.useState(""),[me,ce]=O.useState(!1),[ie,fe]=O.useState(""),[ue,Re]=O.useState(""),[Ne,xe]=O.useState(""),[Se,Pe]=O.useState(!1),[ke,ye]=O.useState(!1),[ze,q]=O.useState(""),D=br(),K=[{label:"At least 8 characters",test:S=>S.length>=8},{label:"One uppercase letter",test:S=>/[A-Z]/.test(S)},{label:"One lowercase letter",test:S=>/[a-z]/.test(S)},{label:"One number",test:S=>/\d/.test(S)},{label:"One special character",test:S=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(S)}],L=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,W=S=>S?L.test(S)?(I(""),!0):(I("Please enter a valid email address"),!1):(I(""),!0);O.useEffect(()=>{const S=localStorage.getItem("user"),_=localStorage.getItem("token");S&&_&&D("/"),A("/assets/login-logo.png")},[D]);const C=(S,_="success")=>{y({message:S,type:_}),_==="success"&&setTimeout(()=>{y(N=>N?{...N,hiding:!0}:null),setTimeout(()=>y(null),300)},5e3)},z=async S=>{S?.preventDefault(),m(!0);try{const _=await Ve.post("auth/login",{email:n,password:o});if(_?.data?.success&&_?.data?.token){const{token:N,user:w}=_.data,R={...w,token:N};localStorage.setItem("user",JSON.stringify(R)),localStorage.setItem("userId",w.userId),localStorage.setItem("token",N),r(R),C("Login successful! Redirecting...","success"),setTimeout(()=>D("/"),1e3);return}C("Login failed","error")}catch(_){_.response?.status===429?C("Too many login attempts. Please wait 15 minutes and try again.","error"):C("Login failed: "+(_.response?.data?.message||_.message),"error")}finally{m(!1)}},x=async()=>{if(q(""),!se||se.trim()===""){q("Please enter your email address");return}if(!L.test(se)){q("Please enter a valid email address");return}Pe(!0);try{(await Ve.post("email/send-otp",{email:se,purpose:"password-reset"})).data.success&&(ce(!0),q(""))}catch(S){const _=S.response?.data?.message||S.message;q("Failed to send OTP: "+_)}finally{Pe(!1)}},b=async()=>{if(q(""),!ie||ie.trim()===""){q("Please enter the OTP");return}if(ie.length!==6){q("OTP must be exactly 6 digits");return}if(!ue||ue.trim()===""){q("Please enter a new password");return}if(!Ne||Ne.trim()===""){q("Please confirm your new password");return}if(!K.every(_=>_.test(ue))){q("Password must meet all requirements shown below");return}if(ue!==Ne){q("New password and confirm password do not match");return}ye(!0);try{(await Ve.post("auth/reset-password",{email:se,otpCode:ie,newPassword:ue})).data.success&&(C("Password reset successful! Please login with your new password.","success"),B(!1),ce(!1),fe(""),Re(""),xe(""),le(""),q(""))}catch(_){const N=_.response?.data?.message||_.message;q("Password reset failed: "+N)}finally{ye(!1)}};return c.jsxs("div",{className:"container",children:[g&&c.jsx("div",{className:"toast-container",children:c.jsxs("div",{className:`toast ${g.type} ${g.hiding?"hiding":""}`,children:[c.jsx("span",{className:"toast-icon",children:g.type==="success"?"":g.type==="error"?"":""}),c.jsx("div",{className:"toast-content",children:c.jsx("p",{className:"toast-message",children:g.message})}),g.type!=="success"&&c.jsx("button",{onClick:()=>y(null),style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.5rem"},children:""})]})}),c.jsxs("div",{className:"card",style:{maxWidth:"450px",margin:"50px auto",textAlign:"center"},children:[c.jsxs("div",{style:{marginBottom:"2rem"},children:[c.jsx("img",{src:"/assets/login-logo.png",alt:"Festive Guest Logo",style:{height:"150px",width:"auto",marginBottom:"1.5rem"}}),c.jsx("p",{style:{color:"#64748b",fontSize:"1.1rem"},children:"Connect Guests and Hosts for memorable experiences"})]}),!H&&c.jsxs("form",{onSubmit:z,style:{marginTop:"30px"},children:[c.jsxs("div",{className:"form-group",children:[c.jsx("input",{type:"email",className:"form-control",placeholder:"Enter your email address",value:n,onChange:S=>{i(S.target.value),W(S.target.value)},onBlur:S=>W(S.target.value),required:!0,style:{fontSize:"1rem",padding:"1rem",borderColor:E?"#dc2626":"#cbd5e1"}}),E&&c.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",E]})]}),c.jsxs("div",{className:"form-group",style:{position:"relative"},children:[c.jsx("input",{type:u?"text":"password",className:"form-control",placeholder:"Enter your password",value:o,onChange:S=>l(S.target.value),required:!0,style:{fontSize:"1rem",padding:"1rem",paddingRight:"3rem"}}),c.jsx("button",{type:"button",onClick:()=>f(!u),style:{position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#64748b",display:"flex",alignItems:"center",padding:"0"},children:u?c.jsx(Cl,{size:20}):c.jsx(Rl,{size:20})})]}),c.jsx("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",padding:"1rem",fontSize:"1.1rem"},disabled:p||E!=="",children:p?"Logging in...":"Login"})]}),c.jsx("div",{style:{marginTop:"1.5rem",textAlign:"center"},children:c.jsx("button",{type:"button",onClick:()=>B(!0),style:{background:"none",border:"none",color:"var(--primary)",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem"},children:"Forgot Password?"})}),c.jsx("div",{style:{marginTop:"2rem",padding:"1.5rem",background:"#f8fafc",borderRadius:"1rem",border:"1px solid #e2e8f0"},children:c.jsxs("p",{style:{margin:"0",color:"#64748b",fontSize:"1.05rem"},children:["New user? ",c.jsx("button",{className:"btn btn-primary",onClick:()=>D("/register"),style:{marginLeft:"0.5rem",padding:"0.5rem 1.5rem"},children:"Register"})]})})]}),H&&c.jsx("div",{className:"modal-overlay",onClick:()=>B(!1),children:c.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),style:{maxWidth:"400px"},children:[c.jsxs("div",{className:"modal-header",children:[c.jsxs("h3",{children:[c.jsx(yl,{size:20})," Reset Password"]}),c.jsx("button",{onClick:()=>B(!1),className:"modal-close",children:""})]}),c.jsxs("div",{className:"modal-body",children:[ze&&c.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"0.75rem",borderRadius:"0.5rem",marginBottom:"1rem",fontSize:"0.875rem"},children:[" ",ze]}),me?c.jsxs("div",{children:[c.jsxs("p",{style:{marginBottom:"1rem",color:"#64748b"},children:["Enter the OTP sent to ",se," and your new password"]}),c.jsx("div",{className:"form-group",children:c.jsx("input",{type:"text",value:ie,onChange:S=>fe(S.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter 6-digit OTP",maxLength:6,style:{fontSize:"1rem",padding:"0.75rem",width:"100%"}})}),c.jsxs("div",{className:"form-group",children:[c.jsx("input",{type:"password",value:ue,onChange:S=>Re(S.target.value),placeholder:"Enter new password",style:{fontSize:"1rem",padding:"0.75rem",width:"100%"}}),c.jsx("div",{style:{marginTop:"0.75rem",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:K.map((S,_)=>{const N=S.test(ue);return c.jsxs("div",{style:{fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.25rem",color:N?"#16a34a":"#dc2626",transition:"color 0.2s"},children:[c.jsx("span",{style:{fontSize:"0.9rem"},children:N?"":""}),S.label]},_)})})]}),c.jsx("div",{className:"form-group",children:c.jsx("input",{type:"password",value:Ne,onChange:S=>xe(S.target.value),placeholder:"Confirm new password",style:{fontSize:"1rem",padding:"0.75rem",width:"100%"}})}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[c.jsx("button",{onClick:()=>{ce(!1),fe(""),Re(""),xe(""),q("")},className:"btn btn-secondary",style:{flex:1,padding:"0.75rem"},children:"Back"}),c.jsx("button",{onClick:b,disabled:ke,className:"btn btn-primary",style:{flex:1,padding:"0.75rem"},children:ke?"Resetting...":"Reset Password"})]})]}):c.jsxs("div",{children:[c.jsx("p",{style:{marginBottom:"1rem",color:"#64748b"},children:"Enter your email to receive a password reset OTP"}),c.jsx("div",{className:"form-group",children:c.jsx("input",{type:"email",value:se,onChange:S=>le(S.target.value),placeholder:"Enter your email address",style:{fontSize:"1rem",padding:"0.75rem",width:"100%"}})}),c.jsx("button",{onClick:x,disabled:Se||!se,className:"btn btn-primary",style:{width:"100%",padding:"0.75rem"},children:Se?"Sending OTP...":"Send OTP"})]})]})]})})]})},zE=({setUser:r})=>{const n=br(),i=Qn(),[o,l]=O.useState({}),[u,f]=O.useState({userId:crypto.randomUUID(),name:"",email:"",password:"",phone:"",state:"",city:"",otherCity:"",bio:"",role:"Guest",status:"Active"}),[p,m]=O.useState(!1),[g,y]=O.useState(null),[E,I]=O.useState(""),[F,A]=O.useState(""),[H,B]=O.useState(null),[se,le]=O.useState(""),[me,ce]=O.useState(!1),[ie,fe]=O.useState(""),[ue,Re]=O.useState(!1),[Ne,xe]=O.useState(!1),[Se,Pe]=O.useState(!1),[ke,ye]=O.useState(""),[ze,q]=O.useState(""),[D,K]=O.useState(""),[L,W]=O.useState(""),[C,z]=O.useState(!1),x=[{label:"At least 8 characters",test:V=>V.length>=8},{label:"One uppercase letter",test:V=>/[A-Z]/.test(V)},{label:"One lowercase letter",test:V=>/[a-z]/.test(V)},{label:"One number",test:V=>/\d/.test(V)},{label:"One special character",test:V=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(V)}],b=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,S=/^[6-9]\d{9}$/,_=V=>V?b.test(V)?(ye(""),!0):(ye("Please enter a valid email address"),!1):(ye(""),!0),N=V=>{if(!V)return q(""),!0;const re=V.replace(/\D/g,"");return S.test(re)?(q(""),!0):(q("Please enter a valid 10-digit Indian mobile number (starting with 6-9). This helps other users contact you accurately."),!1)},w=(V,re="success")=>{y({message:V,type:re}),re==="success"&&setTimeout(()=>{y(te=>te?{...te,hiding:!0}:null),setTimeout(()=>y(null),300)},5e3)};O.useEffect(()=>{const V=new URLSearchParams(i.search),re=V.get("role"),te=V.get("referralCode"),Z=V.get("disclaimerAccepted"),oe=sessionStorage.getItem("disclaimerAcceptance");if(!oe||!Z){n("/");return}try{const _e=JSON.parse(oe);if(Date.now()-_e.timestamp>6e5||_e.timestamp.toString()!==Z){sessionStorage.removeItem("disclaimerAcceptance"),n("/");return}}catch{n("/");return}(re==="Guest"||re==="Host")&&f(_e=>({..._e,role:re})),te&&f(_e=>({..._e,ReferredBy:te}))},[i.search,n]),O.useEffect(()=>{(async()=>{try{console.log("Loading locations using locationService...");const re=await Bl.getLocations();console.log("Locations loaded successfully:",re),l(re)}catch(re){console.error("DEBUG: Failed to load locations:",re),console.error("Error details:",{message:re.message,response:re.response?.data,status:re.response?.status,url:re.config?.url}),w("Registration Error: "+re.message,"error")}})().catch(re=>console.error("CRITICAL: loadLocations failed",re))},[]);const R=V=>{const re=V.target.value;j(V),_(re),re!==ie&&(Re(!1),ce(!1),I(""))},j=V=>{const{name:re,value:te}=V.target;f(Z=>{const oe={...Z,[re]:te};return re==="state"&&(oe.city=""),oe})},G=V=>{V.preventDefault(),Q()},Q=async()=>{m(!0),B(null);try{if(!ue){B("Please verify your email before completing registration."),w("Please verify your email before registering","error"),m(!1);return}const V=sessionStorage.getItem("disclaimerAcceptance");if(!V){B("Disclaimer acceptance expired. Please start registration again."),w("Please accept the disclaimer again","error"),n("/");return}try{const _e=JSON.parse(V);if(Date.now()-_e.timestamp>6e5){B("Disclaimer acceptance expired. Please start registration again."),sessionStorage.removeItem("disclaimerAcceptance"),w("Disclaimer acceptance expired","error"),n("/");return}}catch{B("Invalid disclaimer acceptance. Please start registration again."),n("/");return}const re=u.city==="Other"?u.otherCity:u.city,te={email:ie,password:u.password,name:u.name,phone:u.phone,userType:u.role,location:`${re}, ${u.state}`,bio:u.bio};console.log("Sending registration payload:",te);let oe=(await Ve.post("auth/register",te)).data;if(console.log("Registration response:",oe),oe.success||oe.message==="User registered successfully")sessionStorage.removeItem("disclaimerAcceptance"),w(" Registration successful! Please login to continue.","success"),setTimeout(()=>n("/login"),2e3);else throw new Error(oe.message||"Registration failed")}catch(V){console.error("Registration error:",V),console.error("Error response:",V.response?.data);const re=V.response?.data?.message||V.response?.data?.error||V.message;if(V.response?.status===429){const te="Too many attempts. Please wait 15 minutes and try again.";B(te),w(te,"error")}else if(V.response?.status===500){const te="Server error occurred. Please try again later or contact support if the issue persists.";B(`Server Error: ${re||"Internal server error"}`),w(te,"error")}else B(re),w("Registration failed: "+re,"error")}finally{m(!1)}},Y=async()=>{if(!u.email){w("Please enter an email address first","error");return}xe(!0);try{console.log("Sending OTP request:",{email:u.email,purpose:"registration"});const V=await Ve.post("email/send-otp",{email:u.email,purpose:"registration"});console.log("OTP response:",V.data),V.data.success&&(ce(!0),A(u.email),w("OTP sent to your email","success"))}catch(V){console.error("OTP Error Details:",{status:V.response?.status,data:V.response?.data,message:V.message,fullResponse:V.response}),console.error("Full error object:",V);const re=V.response?.data?.message||V.response?.data?.error||V.response?.data||V.message;B(JSON.stringify(V.response?.data)||re),w("Failed to send OTP: "+re,"error")}finally{xe(!1)}},$=async()=>{if(!E||E.length!==6){K("Please enter a valid 6-digit OTP code");return}m(!0),K("");try{const V=await Ve.post("email/validate-otp",{email:u.email,otpCode:E});V.data.success&&(fe(u.email),Re(!0),ce(!1),le(""),K(""),w(V.data?.message||"Email verified","success"))}catch(V){const re=V.response?.data?.message||V.message;K("Verification failed: "+re)}finally{m(!1)}};return c.jsxs("div",{className:"container",children:[g&&c.jsx("div",{className:"toast-container",children:c.jsxs("div",{className:`toast ${g.type} ${g.hiding?"hiding":""}`,children:[c.jsx("span",{className:"toast-icon",children:g.type==="success"?"":g.type==="error"?"":""}),c.jsx("div",{className:"toast-content",children:c.jsx("p",{className:"toast-message",children:g.message})}),g.type!=="success"&&c.jsx("button",{onClick:()=>y(null),style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.5rem"},children:""})]})}),H&&c.jsxs("div",{style:{maxWidth:"1200px",margin:"10px auto",color:"#b91c1c",background:"#fee2e2",padding:"10px",borderRadius:"6px"},children:[c.jsx("strong",{children:"Error:"})," ",H]}),c.jsxs("div",{className:"registration-layout",children:[c.jsxs("div",{className:"disclaimer-section",children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[c.jsx("h2",{style:{color:"#1e293b",marginBottom:"0.5rem"},children:"Welcome to Local Host Connect"}),c.jsx("p",{style:{color:"#64748b"},children:"Connect with local hosts and travelers anywhere"})]}),c.jsxs("div",{style:{padding:"1.5rem",background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"0.75rem",marginBottom:"1.5rem"},children:[c.jsx("h4",{style:{margin:"0 0 1rem 0",color:"#0c4a6e",fontSize:"1rem",fontWeight:"600"},children:" Terms Accepted"}),c.jsxs("div",{style:{color:"#0c4a6e",fontSize:"0.9rem",lineHeight:"1.5"},children:[c.jsx("p",{style:{margin:"0 0 0.75rem 0"},children:"By proceeding to this page, you have already read and agreed to our:"}),c.jsxs("ul",{style:{margin:"0",paddingLeft:"1.25rem"},children:[c.jsxs("li",{style:{marginBottom:"0.5rem"},children:[c.jsx("button",{type:"button",style:{background:"none",border:"none",color:"#0ea5e9",textDecoration:"underline",cursor:"pointer",padding:0,font:"inherit"},onClick:()=>window.open("/privacy-policy","_blank"),children:"Privacy Policy"})," - How we handle your personal information"]}),c.jsxs("li",{style:{marginBottom:"0.5rem"},children:[c.jsx("button",{type:"button",style:{background:"none",border:"none",color:"#0ea5e9",textDecoration:"underline",cursor:"pointer",padding:0,font:"inherit"},onClick:()=>window.open("/terms-of-service","_blank"),children:"Terms of Service"})," - Platform usage guidelines"]}),c.jsxs("li",{children:[c.jsx("button",{type:"button",style:{background:"none",border:"none",color:"#0ea5e9",textDecoration:"underline",cursor:"pointer",padding:0,font:"inherit"},onClick:()=>window.open("/safety-guidelines","_blank"),children:"Safety Guidelines"})," - Important safety recommendations"]})]})]})]})]}),c.jsx("div",{className:"registration-form-section",children:c.jsxs("div",{className:"card",style:{margin:"0",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[c.jsx("h3",{style:{color:"#1e293b",marginBottom:"0.5rem"},children:"Complete Your Registration"}),c.jsx("p",{style:{color:"#64748b"},children:"Join our community of travelers and local hosts"})]}),c.jsxs("form",{onSubmit:G,children:[c.jsxs("div",{className:"form-group",children:[c.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Choose Your Role"}),c.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"0.5rem"},children:[c.jsx("button",{type:"button",onClick:()=>f(V=>({...V,role:"Guest"})),className:`btn ${u.role==="Guest"?"btn-primary":"btn-outline"}`,style:{flex:1,padding:"1rem",fontSize:"1rem"},children:" Traveler (Guest)"}),c.jsx("button",{type:"button",onClick:()=>f(V=>({...V,role:"Host"})),className:`btn ${u.role==="Host"?"btn-primary":"btn-outline"}`,style:{flex:1,padding:"1rem",fontSize:"1rem"},children:" Local Host"})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Full Name"}),c.jsx("input",{type:"text",name:"name",value:u.name,onChange:j,placeholder:"Enter your full name",required:!0,style:{fontSize:"1rem",padding:"1rem",borderColor:u.name?"#cbd5e1":"#dc2626"}})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Email Address"}),c.jsx("input",{type:"email",name:"email",value:u.email,onChange:R,onBlur:V=>_(V.target.value),placeholder:"Enter your email address",required:!0,disabled:ue,style:{fontSize:"1rem",padding:"1rem",borderColor:ke?"#dc2626":u.email?"#cbd5e1":"#dc2626",backgroundColor:ue?"#f3f4f6":"white",cursor:ue?"not-allowed":"text"}}),ke&&c.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",ke]}),c.jsxs("div",{style:{marginTop:"0.75rem",display:"flex",gap:"0.5rem",alignItems:"center"},children:[!ue&&!me&&c.jsx("button",{type:"button",className:"btn btn-secondary",onClick:Y,disabled:Ne||ke!=="",children:Ne?"Sending OTP...":"Send OTP"}),me&&c.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[c.jsx("input",{type:"text",value:E,onChange:V=>{I(V.target.value.replace(/\D/g,"").slice(0,6)),K("")},placeholder:"Enter OTP",maxLength:6,style:{padding:"0.5rem",fontSize:"1rem",width:"160px",borderColor:D?"#dc2626":"#cbd5e1"}}),D&&c.jsxs("p",{style:{margin:"0",color:"#dc2626",fontSize:"0.75rem"},children:[" ",D]})]}),c.jsx("button",{type:"button",className:"btn btn-primary",onClick:$,disabled:p||E.length!==6,style:{opacity:E.length!==6?.5:1,cursor:E.length!==6?"not-allowed":"pointer"},children:"Verify"})]}),ue&&c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx("span",{style:{color:"#16a34a",fontWeight:"600"},children:" Email verified"}),c.jsx("button",{type:"button",onClick:()=>{Re(!1),fe(""),ce(!1),I("")},className:"btn btn-outline",style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},children:"Change Email"})]})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Password"}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx("input",{type:Se?"text":"password",name:"password",value:u.password,onChange:j,placeholder:"Create a strong password",required:!0,style:{fontSize:"1rem",padding:"1rem",paddingRight:"2.5rem",width:"100%",boxSizing:"border-box",borderColor:u.password?"#cbd5e1":"#dc2626"}}),c.jsx("button",{type:"button",onClick:()=>Pe(!Se),style:{position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#64748b",display:"flex",alignItems:"center",padding:"0"},children:Se?c.jsx(Cl,{size:20}):c.jsx(Rl,{size:20})})]}),c.jsx("div",{style:{marginTop:"0.75rem",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:x.map((V,re)=>{const te=V.test(u.password);return c.jsxs("div",{style:{fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.25rem",color:te?"#16a34a":"#dc2626",transition:"color 0.2s"},children:[c.jsx("span",{style:{fontSize:"0.9rem"},children:te?"":""}),V.label]},re)})})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Phone Number"}),c.jsx("input",{type:"tel",name:"phone",value:u.phone,onChange:V=>{const re=V.target.value.replace(/\D/g,"").slice(0,10);j({target:{name:"phone",value:re}}),N(re)},onBlur:V=>N(V.target.value),placeholder:"Enter your 10-digit mobile number",required:!0,maxLength:10,style:{fontSize:"1rem",padding:"1rem",borderColor:ze?"#dc2626":u.phone?"#cbd5e1":"#dc2626"}}),ze&&c.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",ze]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"State"}),c.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginTop:"0.5rem"},children:Object.keys(o||{}).map(V=>c.jsx("button",{type:"button",onClick:()=>{f(re=>({...re,state:V,city:""}))},className:`btn ${u.state===V?"btn-primary":"btn-outline"}`,style:{padding:"0.75rem 1rem",fontSize:"0.9rem"},children:V},V))})]}),u.state&&c.jsxs("div",{className:"form-group",children:[c.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"City"}),c.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginTop:"0.5rem"},children:o[u.state]&&o[u.state].map(V=>c.jsx("button",{type:"button",onClick:()=>f(re=>({...re,city:V})),className:`btn ${u.city===V?"btn-primary":"btn-outline"}`,style:{padding:"0.75rem 1rem",fontSize:"0.9rem"},children:V},V))})]}),u.city==="Other"&&c.jsxs("div",{className:"form-group",children:[c.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Enter Your City"}),c.jsx("input",{type:"text",name:"otherCity",value:u.otherCity,onChange:j,placeholder:"Name of your city",required:!0,style:{fontSize:"1rem",padding:"1rem"}})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:u.role==="Host"?"What You Offer as a Host":"What You're Looking For"}),c.jsx("textarea",{name:"bio",value:u.bio,onChange:j,placeholder:u.role==="Host"?"Describe what you offer to travelers (e.g., accommodation, local experiences, cultural insights, authentic cuisine, city tours)...":"Tell hosts what you're looking for (e.g., local experiences, cultural exchange, authentic food, business travel accommodation, educational opportunities)...",required:!0,rows:"4",maxLength:250,style:{fontSize:"1rem",padding:"1rem",width:"100%",borderRadius:"0.5rem",border:`1px solid ${u.bio?"#cbd5e1":"#dc2626"}`}}),c.jsxs("div",{style:{textAlign:"right",fontSize:"0.875rem",color:"#64748b",marginTop:"0.25rem"},children:[u.bio.length,"/250 characters"]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Referral Code (Optional)"}),c.jsx("input",{type:"text",name:"ReferredBy",value:u.ReferredBy||"",onChange:j,placeholder:"Enter referral code if you have one",style:{fontSize:"1rem",padding:"1rem"}}),u.ReferredBy&&c.jsx("p",{style:{margin:"0.5rem 0 0 0",color:"#16a34a",fontSize:"0.875rem"},children:" Referral code applied"})]}),c.jsx("div",{style:{marginTop:"2rem",padding:"1rem",background:"#f0fdf4",border:"2px solid #16a34a",borderRadius:"0.75rem",textAlign:"center"},children:c.jsx("p",{style:{margin:"0",color:"#15803d",fontWeight:"500",fontSize:"0.95rem"},children:" Disclaimer accepted. You may now complete your registration."})}),c.jsx("button",{type:"submit",className:"btn btn-primary",disabled:p,style:{width:"100%",padding:"1rem",fontSize:"1.1rem",marginTop:"1.5rem"},children:p?"Registering...":"Register Now"})]}),c.jsx("div",{style:{marginTop:"2rem",textAlign:"center",padding:"1.5rem",background:"#f8fafc",borderRadius:"1rem",border:"1px solid #e2e8f0"},children:c.jsxs("p",{style:{margin:"0",color:"#64748b",fontSize:"1.05rem"},children:["Already have an account? ",c.jsx("button",{className:"btn btn-primary",onClick:()=>n("/login"),style:{marginLeft:"0.5rem",padding:"0.5rem 1.5rem"},children:"Login"})]})})]})})]})]})},Ry=({user:r})=>{br();const[n,i]=O.useState([]),[o,l]=O.useState(!0),[u,f]=O.useState({}),[p,m]=O.useState([]),[g,y]=O.useState([]),[E,I]=O.useState(null),[F,A]=O.useState(!1),[H,B]=O.useState({}),[se,le]=O.useState("Not connected"),[me,ce]=O.useState(null),[ie,fe]=O.useState(null),[ue,Re]=O.useState(!1),[Ne,xe]=O.useState(!1),[Se,Pe]=O.useState({rating:0,comment:""}),[ke,ye]=O.useState(!1),[ze,q]=O.useState(""),[D,K]=O.useState(!1),[L,W]=O.useState({name:"",email:"",userType:"Guest",message:""}),[C,z]=O.useState(!1),[x,b]=O.useState(""),[S,_]=O.useState(!1),[N,w]=O.useState(!1),[R,j]=O.useState({title:"",content:"",location:"",facilities:[],visitors:"",days:""}),[G,Q]=O.useState(!1),[Y,$]=O.useState(""),[V,re]=O.useState([]),[te,Z]=O.useState(!1);O.useEffect(()=>{r&&r.token&&(We(),oe())},[r]);const oe=async()=>{try{const M=await Ve.get("location/states-with-cities");B(M.data)}catch(M){console.error("Error fetching locations:",M),B({"Tamil Nadu":["Chennai","Coimbatore","Madurai","Other"],Karnataka:["Bangalore","Mysore","Mangalore","Other"],Kerala:["Kochi","Thiruvananthapuram","Kozhikode","Other"],"Andhra Pradesh":["Hyderabad","Visakhapatnam","Vijayawada","Other"],Maharashtra:["Mumbai","Pune","Nagpur","Other"],Delhi:["New Delhi","Other"]})}};O.useEffect(()=>{_e()},[n,p]);const _e=()=>{if(p.length===0)y(n);else{const M=n.filter(J=>p.some(he=>J.location?.toLowerCase().includes(he.toLowerCase())));y(M)}},Ae=M=>{f(J=>({...J,[M]:!J[M]}))},je=M=>{m(J=>J.includes(M)?J.filter(he=>he!==M):[...J,M])},Me=()=>{m([])},qe=()=>{ce(null),fe(null),document.body.style.overflow="unset"};O.useEffect(()=>(me?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[me]);const We=async()=>{try{const M=await Ve.get("user/browse"),he=(Array.isArray(M.data)?M.data:[M.data]).filter(Ie=>Ie.status==="Active"||Ie.status==="Verified");i(he)}catch(M){console.error("Error fetching hosts:",M),M.response?.status===500?(console.error("Server error - API may be down or misconfigured"),i([])):M.response?.status!==401&&M.response?.status!==403&&i([])}finally{l(!1)}},U=async M=>{fe(M.userId),Re(!0);try{const J=await Ve.post("user/public-profile",{userId:M.userId}),he=r?.userId,Ie=J.data.reviews||[],Oe=Ie.find(ut=>ut.reviewerId===he),Ue=Ie.filter(ut=>ut.reviewerId!==he).sort((ut,kt)=>new Date(kt.createdAt)-new Date(ut.createdAt)),Le=Oe?[Oe,...Ue]:Ue,Qe=!!Oe;ce({...J.data,reviews:Le,hasUserReview:Qe}),xe(!1),Pe({rating:0,comment:""})}catch(J){console.error("Failed to fetch profile:",J)}finally{Re(!1)}},T=M=>{I({id:M.userId,name:M.name})},P=async()=>{if(console.log("Submit clicked, reviewError before:",ze),console.log("Rating:",Se.rating,"Comment:",Se.comment),q(""),!Se.comment.trim()||Se.rating===0){console.log("Setting error message"),q("Please provide both rating and comment"),console.log("reviewError after setting:","Please provide both rating and comment");return}ye(!0);try{await Ve.post("review",{userId:me.userId,rating:Se.rating,comment:Se.comment.trim()});const M=await Ve.post("user/public-profile",{userId:me.userId}),J=r?.userId,he=M.data.reviews||[],Ie=he.find(Qe=>Qe.reviewerId===J),Oe=he.filter(Qe=>Qe.reviewerId!==J).sort((Qe,ut)=>new Date(ut.createdAt)-new Date(Qe.createdAt)),Ue=Ie?[Ie,...Oe]:Oe,Le=!!Ie;ce({...M.data,reviews:Ue,hasUserReview:Le}),xe(!1),Pe({rating:0,comment:""}),q("")}catch(M){console.error("Failed to submit review:",M),M.response?.data?.message?q(M.response.data.message):q("Failed to submit review. Please try again.")}finally{ye(!1)}},ne=async()=>{if(b(""),!L.name.trim()||!L.email.trim()||!L.message.trim()){b("Please fill in all required fields");return}z(!0);try{await Ve.post("feedback",{name:L.name.trim(),email:L.email.trim(),userType:L.userType,message:L.message.trim()}),_(!0),W({name:"",email:"",userType:"Guest",message:""}),setTimeout(()=>{K(!1),_(!1)},2e3)}catch(M){console.error("Failed to submit feedback:",M),M.response?.data?.message?b(M.response.data.message):b("Failed to submit feedback. Please try again.")}finally{z(!1)}};return o?c.jsx("div",{className:"container",children:c.jsxs("div",{className:"loading",style:{padding:"4rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),c.jsx("h3",{children:"Finding amazing hosts for you..."})]})}):c.jsxs("div",{className:"browse-layout",onClick:()=>F&&A(!1),children:[c.jsxs("button",{className:"mobile-filter-toggle",onClick:()=>A(!F),children:[c.jsxs("span",{children:["Filters ",p.length>0&&`(${p.length})`]}),F?c.jsx(kv,{size:16}):c.jsx(df,{size:16})]}),c.jsxs("div",{className:`location-sidebar ${F?"mobile-visible":""}`,onClick:M=>M.stopPropagation(),children:[c.jsxs("div",{className:"filter-header",children:[c.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Ev,{size:20,style:{color:"var(--primary)"}}),"Filter by Location"]}),p.length>0&&c.jsxs("button",{onClick:Me,className:"clear-filters-btn",children:["Clear (",p.length,")"]})]}),c.jsx("div",{className:"location-filters",children:Object.entries(H).map(([M,J])=>c.jsxs("div",{className:"state-group",children:[c.jsxs("button",{className:"state-toggle",onClick:()=>Ae(M),children:[c.jsx("span",{children:M}),c.jsx("span",{className:"expand-icon",children:u[M]?"-":"+"})]}),u[M]&&c.jsx("div",{className:"cities-list",children:J.map(he=>c.jsx("button",{className:`city-btn ${p.includes(he)?"selected":""}`,onClick:()=>je(he),children:he},he))})]},M))})]}),c.jsxs("div",{className:"browse-main",children:[c.jsxs("div",{className:"browse-header",children:[c.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(UT,{size:24,style:{color:"var(--primary)"}}),"Available Hosts"]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[c.jsxs("button",{className:"btn btn-outline",onClick:()=>K(!0),style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(FT,{size:14})," Feedback"]}),c.jsx("div",{className:"results-count",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:!o&&c.jsxs(c.Fragment,{children:[c.jsx(Wr,{size:16,style:{color:"var(--text-light)"}}),c.jsxs("span",{children:[g.length," host",g.length!==1?"s":""," found"]})]})})]})]}),o?c.jsxs("div",{className:"loading",style:{padding:"4rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),c.jsx("h3",{children:"Finding amazing hosts for you..."})]}):c.jsx("div",{children:g.length===0?c.jsxs("div",{className:"no-results",children:[c.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),c.jsxs("h3",{style:{color:"#1e293b"},children:["No hosts found",p.length>0?" for selected locations":" in this area yet"]}),c.jsx("p",{style:{color:"#64748b"},children:p.length>0?"Try selecting different locations or clear filters.":"We're growing fast! Check back tomorrow for new local hosts."}),p.length>0&&c.jsx("button",{onClick:Me,className:"btn btn-outline",children:"Clear filters"})]}):c.jsx("div",{className:"compact-grid",children:g.map(M=>c.jsxs("div",{className:`host-card-horizontal ${ie===M.userId?"selected":""}`,onClick:()=>U(M),children:[c.jsxs("div",{className:"host-image-section",children:[c.jsx(Wn,{src:M.profileImageUrl,alt:M.name,className:"host-card-img",userId:M.userId,fallbackText:"Host"}),c.jsx("button",{className:"chat-btn",onClick:J=>{J.stopPropagation(),T(M)},children:c.jsx(ms,{size:16})}),M.status==="Verified"&&c.jsx("div",{className:"verified-badge",children:" Verified"})]}),c.jsxs("div",{className:"host-content-section",children:[c.jsx("h3",{className:"host-name",children:M.name}),c.jsx("div",{className:"host-location",children:M.location.split(",")[0]})]})]},M.userId))})})]}),me&&c.jsx("div",{className:"modal-overlay",onClick:qe,children:c.jsxs("div",{className:"modal-content",onClick:M=>M.stopPropagation(),style:{maxHeight:"90vh",overflowY:"auto"},children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h3",{children:me.name}),c.jsx("button",{onClick:qe,className:"modal-close",children:""})]}),c.jsxs("div",{className:"modal-body",children:[c.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",alignItems:"flex-start"},children:[c.jsx(Wn,{src:me.profileImageUrl,alt:me.name,className:"modal-profile-image",fallbackText:"Profile",style:{flexShrink:0,width:"100px",height:"100px"}}),c.jsxs("div",{style:{flex:1},children:[c.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1.25rem"},children:me.name}),c.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:c.jsxs("span",{style:{color:"#64748b"},children:[" ",me.location]})}),c.jsxs("p",{style:{color:"#64748b",fontSize:"0.9rem",margin:"0"},children:[me.userType,"  Joined ",new Date(me.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"})]})]})]}),c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("h4",{style:{marginBottom:"0.75rem",color:"var(--text)"},children:me.userType==="Host"?" About My Hosting":" About Me"}),c.jsx("p",{style:{color:"#475569",lineHeight:"1.5",background:"#f8fafc",padding:"1rem",borderRadius:"0.5rem",margin:"0"},children:me.bio||"No description provided."})]}),c.jsxs("div",{children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[c.jsxs("h4",{style:{margin:"0",color:"var(--text)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[" Reviews (",me.totalReviews||me.reviews?.length||0,")",me.averageRating>0&&c.jsxs("span",{style:{fontSize:"0.9rem",color:"#64748b"},children:["(",me.averageRating.toFixed(1)," avg)"]})]}),!me.hasUserReview&&c.jsx("button",{className:"btn btn-outline",onClick:()=>xe(!Ne),style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:Ne?"Cancel":"Write Review"})]}),Ne&&c.jsxs("div",{className:"review-form",children:[ze&&c.jsx("div",{className:"review-error",children:ze}),c.jsxs("div",{style:{marginBottom:"0.75rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Rating:"}),c.jsx("div",{className:"rating-input",children:Array.from({length:5},(M,J)=>c.jsx("button",{type:"button",className:"rating-star",onClick:()=>{Pe(he=>({...he,rating:J+1})),q("")},style:{color:J<Se.rating?"#fbbf24":"#d1d5db"},children:""},J))})]}),c.jsxs("div",{style:{marginBottom:"0.75rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Comment:"}),c.jsx("textarea",{value:Se.comment,onChange:M=>{Pe(J=>({...J,comment:M.target.value})),q("")},placeholder:"Share your experience...",rows:3,style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",resize:"vertical",fontFamily:"inherit"}})]}),c.jsx("button",{className:"btn btn-primary",onClick:P,disabled:ke,style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:ke?"Submitting...":"Submit Review"})]}),me.reviews&&me.reviews.length>0&&c.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:me.reviews.map((M,J)=>{const he=M.reviewerId===r?.userId;return c.jsxs("div",{className:`review-item ${he?"user-review":""}`,children:[he&&c.jsx("div",{className:"user-review-badge",children:"Your Review"}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.25rem",paddingRight:he?"5rem":"0"},children:[c.jsx("strong",{style:{fontSize:"0.9rem"},children:M.reviewerName}),c.jsx("div",{className:"review-stars",children:Array.from({length:5},(Ie,Oe)=>c.jsx("span",{style:{color:Oe<M.rating?"#fbbf24":"#d1d5db"},children:""},Oe))})]}),c.jsx("p",{style:{margin:"0",fontSize:"0.85rem",color:"#475569",lineHeight:"1.4"},children:M.comment}),c.jsx("div",{className:"review-meta",children:new Date(M.createdAt).toLocaleDateString()})]},J)})}),(!me.reviews||me.reviews.length===0)&&!Ne&&c.jsx("p",{style:{color:"#64748b",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:"No reviews yet. Be the first to share your experience!"})]})]})]})}),ue&&c.jsx("div",{className:"modal-overlay",children:c.jsx("div",{className:"loading",style:{color:"white"},children:"Loading profile..."})}),D&&c.jsx("div",{className:"modal-overlay",onClick:()=>K(!1),children:c.jsxs("div",{className:"modal-content",onClick:M=>M.stopPropagation(),style:{maxWidth:"500px"},children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h3",{children:"Share Your Feedback"}),c.jsx("button",{onClick:()=>K(!1),className:"modal-close",children:""})]}),c.jsx("div",{className:"modal-body",children:S?c.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[c.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),c.jsx("h4",{style:{color:"var(--success)",marginBottom:"0.5rem"},children:"Thank you!"}),c.jsx("p",{style:{color:"#64748b"},children:"Your feedback has been submitted successfully."})]}):c.jsxs(c.Fragment,{children:[x&&c.jsx("div",{style:{background:"#fee2e2",color:"#dc2626",padding:"0.75rem",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.9rem"},children:x}),c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Name *"}),c.jsx("input",{type:"text",value:L.name,onChange:M=>{W(J=>({...J,name:M.target.value})),b("")},placeholder:"Your name",style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",fontFamily:"inherit"}})]}),c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Email *"}),c.jsx("input",{type:"email",value:L.email,onChange:M=>{W(J=>({...J,email:M.target.value})),b("")},placeholder:"your.email@example.com",style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",fontFamily:"inherit"}})]}),c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"User Type"}),c.jsxs("select",{value:L.userType,onChange:M=>W(J=>({...J,userType:M.target.value})),style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",fontFamily:"inherit"},children:[c.jsx("option",{value:"Guest",children:"Guest"}),c.jsx("option",{value:"Host",children:"Host"})]})]}),c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Message *"}),c.jsx("textarea",{value:L.message,onChange:M=>{W(J=>({...J,message:M.target.value})),b("")},placeholder:"Share your thoughts, suggestions, or report any issues...",rows:4,style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",resize:"vertical",fontFamily:"inherit"}})]}),c.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[c.jsx("button",{className:"btn btn-outline",onClick:()=>K(!1),disabled:C,children:"Cancel"}),c.jsx("button",{className:"btn btn-primary",onClick:ne,disabled:C,children:C?"Submitting...":"Submit Feedback"})]})]})})]})}),E&&c.jsx(ql,{recipientId:E.id,recipientName:E.name,recipientImageUrl:n.find(M=>M.userId===E.id)?.profileImageUrl,onClose:()=>I(null)})]})},LE=({user:r})=>{const[n,i]=O.useState([]),[o,l]=O.useState(!0),[u,f]=O.useState({}),[p,m]=O.useState([]),[g,y]=O.useState([]),[E,I]=O.useState(null),[F,A]=O.useState(!1),[H,B]=O.useState({}),[se,le]=O.useState(null),[me,ce]=O.useState(null),[ie,fe]=O.useState(!1),[ue,Re]=O.useState(!1),[Ne,xe]=O.useState({rating:0,comment:""}),[Se,Pe]=O.useState(!1),[ke,ye]=O.useState("");O.useEffect(()=>{r.status==="Active"||r.status==="Verified"?(q(),ze()):l(!1)},[r.status]);const ze=async()=>{try{const b=await Ve.get("location/states-with-cities");B(b.data)}catch(b){console.error("Error fetching locations:",b)}};O.useEffect(()=>{D()},[n,p]);const q=async()=>{try{const b=await Ve.get("user/browse"),S=Array.isArray(b.data)?b.data:[b.data];i(S)}catch(b){console.error("Error fetching guests:",b),i([])}finally{l(!1)}},D=()=>{if(p.length===0)y(n);else{const b=n.filter(S=>p.some(_=>S.location?.toLowerCase().includes(_.toLowerCase())));y(b)}},K=b=>{f(S=>({...S,[b]:!S[b]}))},L=b=>{m(S=>S.includes(b)?S.filter(_=>_!==b):[...S,b])},W=()=>{m([])},C=()=>{le(null),ce(null),document.body.style.overflow="unset"};O.useEffect(()=>(se?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[se]);const z=async b=>{ce(b.userId),fe(!0);try{const S=await Ve.post("user/public-profile",{userId:b.userId}),_=r?.userId,N=S.data.reviews||[],w=N.find(Q=>Q.reviewerId===_),R=N.filter(Q=>Q.reviewerId!==_).sort((Q,Y)=>new Date(Y.createdAt)-new Date(Q.createdAt)),j=w?[w,...R]:R,G=!!w;le({...S.data,reviews:j,hasUserReview:G}),Re(!1),xe({rating:0,comment:""})}catch(S){console.error("Failed to fetch profile:",S)}finally{fe(!1)}},x=async()=>{if(ye(""),!Ne.comment.trim()||Ne.rating===0){ye("Please provide both rating and comment");return}Pe(!0);try{await Ve.post("review",{userId:se.userId,rating:Ne.rating,comment:Ne.comment.trim()});const b=await Ve.post("user/public-profile",{userId:se.userId}),S=r?.userId,_=b.data.reviews||[],N=_.find(G=>G.reviewerId===S),w=_.filter(G=>G.reviewerId!==S).sort((G,Q)=>new Date(Q.createdAt)-new Date(G.createdAt)),R=N?[N,...w]:w,j=!!N;le({...b.data,reviews:R,hasUserReview:j}),Re(!1),xe({rating:0,comment:""}),ye("")}catch(b){console.error("Failed to submit review:",b),b.response?.data?.message?ye(b.response.data.message):ye("Failed to submit review. Please try again.")}finally{Pe(!1)}};return r.status==="Pending"?c.jsx("div",{className:"container",style:{paddingTop:"5rem"},children:c.jsxs("div",{className:"card text-center",style:{maxWidth:"600px",margin:"0 auto",padding:"3rem 2rem",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[c.jsx("div",{style:{fontSize:"4rem",marginBottom:"1.5rem"},children:""}),c.jsx("h2",{style:{color:"#1e293b",fontSize:"2rem",marginBottom:"1rem"},children:"Registration Pending"}),c.jsx("p",{style:{color:"#64748b",fontSize:"1.1rem",lineHeight:"1.6",marginBottom:"2rem"},children:"Thank you for joining as a Host! Your registration is currently being verified by our team. Once approved, you'll be able to see guests and start hosting."}),c.jsxs("div",{style:{padding:"1.5rem",background:"#f8fafc",borderRadius:"0.75rem",border:"1px solid #e2e8f0",color:"#475569",textAlign:"left"},children:[c.jsx("p",{style:{margin:"0 0 0.5rem 0"},children:c.jsx("strong",{children:"Next Steps:"})}),c.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[c.jsx("li",{children:"Admin verifies your payment"}),c.jsx("li",{children:'Your profile becomes "Active"'}),c.jsx("li",{children:"You receive guests' contact requests"})]})]})]})}):o?c.jsx("div",{className:"container",children:c.jsxs("div",{className:"loading",style:{padding:"4rem",textAlign:"center"},children:[c.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),c.jsx("h3",{children:"Loading guests near you..."})]})}):c.jsxs("div",{className:"browse-layout",onClick:()=>F&&A(!1),children:[c.jsxs("button",{className:"mobile-filter-toggle",onClick:()=>A(!F),children:[c.jsxs("span",{children:["Filters ",p.length>0&&`(${p.length})`]}),F?c.jsx(kv,{size:16}):c.jsx(df,{size:16})]}),c.jsxs("div",{className:`location-sidebar ${F?"mobile-visible":""}`,onClick:b=>b.stopPropagation(),children:[c.jsxs("div",{className:"filter-header",children:[c.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Ev,{size:20,style:{color:"var(--primary)"}}),"Filter by Location"]}),p.length>0&&c.jsxs("button",{onClick:W,className:"clear-filters-btn",children:["Clear (",p.length,")"]})]}),c.jsx("div",{className:"location-filters",children:Object.entries(H).map(([b,S])=>c.jsxs("div",{className:"state-group",children:[c.jsxs("button",{className:"state-toggle",onClick:()=>K(b),children:[c.jsx("span",{children:b}),c.jsx("span",{className:"expand-icon",children:u[b]?"-":"+"})]}),u[b]&&c.jsx("div",{className:"cities-list",children:S.map(_=>c.jsx("button",{className:`city-btn ${p.includes(_)?"selected":""}`,onClick:()=>L(_),children:_},_))})]},b))})]}),c.jsxs("div",{className:"browse-main",children:[c.jsxs("div",{className:"browse-header",children:[c.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Hd,{size:24,style:{color:"var(--primary)"}}),"Travelers Looking for Local Hosts"]}),c.jsx("div",{className:"results-count",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:!o&&c.jsxs(c.Fragment,{children:[c.jsx(Wr,{size:16,style:{color:"var(--text-light)"}}),c.jsxs("span",{children:[g.length," guest",g.length!==1?"s":""," found"]})]})})]}),g.length===0?c.jsxs("div",{className:"no-results",children:[c.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),c.jsx("h3",{style:{color:"#1e293b"},children:p.length>0?"No guests found for selected locations":"No guests found right now"}),c.jsx("p",{style:{color:"#64748b"},children:p.length>0?"Try adjusting your location filters or check back later.":"Check back soon as more travelers discover local experiences!"}),p.length>0&&c.jsx("button",{onClick:W,className:"btn btn-outline",children:"Clear filters"})]}):c.jsx("div",{className:"compact-grid",children:g.map(b=>c.jsxs("div",{className:`host-card-horizontal ${me===b.userId?"selected":""}`,onClick:()=>z(b),children:[c.jsxs("div",{className:"host-image-section",children:[c.jsx(Wn,{src:b.profileImageUrl,alt:b.name,className:"host-card-img",fallbackText:"Guest"}),c.jsx("button",{className:"chat-btn",onClick:S=>{S.stopPropagation(),console.log("Opening chat with guest:",{id:b.userId,name:b.name}),I(null),setTimeout(()=>{I({id:b.userId,name:b.name,imageUrl:b.profileImageUrl})},50)},title:`Chat with ${b.name}`,children:c.jsx(ms,{size:16})})]}),c.jsxs("div",{className:"host-content-section",children:[c.jsx("h3",{className:"host-name",children:b.name}),c.jsx("div",{className:"host-location",children:b.location?.split(",")[0]||"Location not specified"})]})]},b.userId))})]}),se&&c.jsx("div",{className:"modal-overlay",onClick:C,children:c.jsxs("div",{className:"modal-content",onClick:b=>b.stopPropagation(),style:{maxHeight:"90vh",overflowY:"auto"},children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h3",{children:se.name}),c.jsx("button",{onClick:C,className:"modal-close",children:""})]}),c.jsxs("div",{className:"modal-body",children:[c.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",alignItems:"flex-start"},children:[c.jsx(Wn,{src:se.profileImageUrl,alt:se.name,className:"modal-profile-image",fallbackText:"Guest",style:{flexShrink:0,width:"100px",height:"100px"}}),c.jsxs("div",{style:{flex:1},children:[c.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1.25rem"},children:se.name}),c.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:c.jsxs("span",{style:{color:"#64748b"},children:[" ",se.location]})}),c.jsxs("p",{style:{color:"#64748b",fontSize:"0.9rem",margin:"0"},children:[se.userType,"  Joined ",new Date(se.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"})]})]})]}),c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("h4",{style:{marginBottom:"0.75rem",color:"var(--text)"},children:se.userType==="Host"?" About My Hosting":" About Me"}),c.jsx("p",{style:{color:"#475569",lineHeight:"1.5",background:"#f8fafc",padding:"1rem",borderRadius:"0.5rem",margin:"0"},children:se.bio||"No description provided."})]}),c.jsxs("div",{children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[c.jsxs("h4",{style:{margin:"0",color:"var(--text)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[" Reviews (",se.totalReviews||se.reviews?.length||0,")",se.averageRating>0&&c.jsxs("span",{style:{fontSize:"0.9rem",color:"#64748b"},children:["(",se.averageRating.toFixed(1)," avg)"]})]}),!se.hasUserReview&&c.jsx("button",{className:"btn btn-outline",onClick:()=>Re(!ue),style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:ue?"Cancel":"Write Review"})]}),ue&&c.jsxs("div",{className:"review-form",children:[ke&&c.jsx("div",{className:"review-error",children:ke}),c.jsxs("div",{style:{marginBottom:"0.75rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Rating:"}),c.jsx("div",{className:"rating-input",children:Array.from({length:5},(b,S)=>c.jsx("button",{type:"button",className:"rating-star",onClick:()=>{xe(_=>({..._,rating:S+1})),ye("")},style:{color:S<Ne.rating?"#fbbf24":"#d1d5db"},children:""},S))})]}),c.jsxs("div",{style:{marginBottom:"0.75rem"},children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Comment:"}),c.jsx("textarea",{value:Ne.comment,onChange:b=>{xe(S=>({...S,comment:b.target.value})),ye("")},placeholder:"Share your experience...",rows:3,style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",resize:"vertical",fontFamily:"inherit"}})]}),c.jsx("button",{className:"btn btn-primary",onClick:x,disabled:Se,style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:Se?"Submitting...":"Submit Review"})]}),se.reviews&&se.reviews.length>0&&c.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:se.reviews.map((b,S)=>{const _=b.reviewerId===r?.userId;return c.jsxs("div",{className:`review-item ${_?"user-review":""}`,children:[_&&c.jsx("div",{className:"user-review-badge",children:"Your Review"}),c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.25rem",paddingRight:_?"5rem":"0"},children:[c.jsx("strong",{style:{fontSize:"0.9rem"},children:b.reviewerName}),c.jsx("div",{className:"review-stars",children:Array.from({length:5},(N,w)=>c.jsx("span",{style:{color:w<b.rating?"#fbbf24":"#d1d5db"},children:""},w))})]}),c.jsx("p",{style:{margin:"0",fontSize:"0.85rem",color:"#475569",lineHeight:"1.4"},children:b.comment}),c.jsx("div",{className:"review-meta",children:new Date(b.createdAt).toLocaleDateString()})]},S)})}),(!se.reviews||se.reviews.length===0)&&!ue&&c.jsx("p",{style:{color:"#64748b",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:"No reviews yet. Be the first to share your experience!"})]})]})]})}),ie&&c.jsx("div",{className:"modal-overlay",children:c.jsx("div",{className:"loading",style:{color:"white"},children:"Loading profile..."})}),E&&c.jsx(ql,{recipientId:E.id,recipientName:E.name,recipientImageUrl:n.find(b=>b.userId===E.id)?.profileImageUrl,onClose:()=>I(null)})]})};function Sr(r,n){var i={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&n.indexOf(o)<0&&(i[o]=r[o]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(r);l<o.length;l++)n.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(r,o[l])&&(i[o[l]]=r[o[l]]);return i}function Ey(r){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&r[n],o=0;if(i)return i.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function lt(r){return this instanceof lt?(this.v=r,this):new lt(r)}function Xr(r,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(r,n||[]),l,u=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",f),l[Symbol.asyncIterator]=function(){return this},l;function f(F){return function(A){return Promise.resolve(A).then(F,E)}}function p(F,A){o[F]&&(l[F]=function(H){return new Promise(function(B,se){u.push([F,H,B,se])>1||m(F,H)})},A&&(l[F]=A(l[F])))}function m(F,A){try{g(o[F](A))}catch(H){I(u[0][3],H)}}function g(F){F.value instanceof lt?Promise.resolve(F.value.v).then(y,E):I(u[0][2],F)}function y(F){m("next",F)}function E(F){m("throw",F)}function I(F,A){F(A),u.shift(),u.length&&m(u[0][0],u[0][1])}}function wl(r){var n,i;return n={},o("next"),o("throw",function(l){throw l}),o("return"),n[Symbol.iterator]=function(){return this},n;function o(l,u){n[l]=r[l]?function(f){return(i=!i)?{value:lt(r[l](f)),done:!1}:u?u(f):f}:u}}function Jr(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r[Symbol.asyncIterator],i;return n?n.call(r):(r=typeof Ey=="function"?Ey(r):r[Symbol.iterator](),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(u){i[u]=r[u]&&function(f){return new Promise(function(p,m){f=r[u](f),l(p,m,f.done,f.value)})}}function l(u,f,p,m){Promise.resolve(m).then(function(g){u({value:g,done:p})},f)}}var Ed={exports:{}},cl,BE=new Uint8Array(16);function i0(){if(!cl&&(cl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!cl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return cl(BE)}const HE=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function $l(r){return typeof r=="string"&&HE.test(r)}var Ft=[];for(var _d=0;_d<256;++_d)Ft.push((_d+256).toString(16).substr(1));function Vl(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=(Ft[r[n+0]]+Ft[r[n+1]]+Ft[r[n+2]]+Ft[r[n+3]]+"-"+Ft[r[n+4]]+Ft[r[n+5]]+"-"+Ft[r[n+6]]+Ft[r[n+7]]+"-"+Ft[r[n+8]]+Ft[r[n+9]]+"-"+Ft[r[n+10]]+Ft[r[n+11]]+Ft[r[n+12]]+Ft[r[n+13]]+Ft[r[n+14]]+Ft[r[n+15]]).toLowerCase();if(!$l(i))throw TypeError("Stringified UUID is invalid");return i}var _y,kd,jd=0,Nd=0;function qE(r,n,i){var o=n&&i||0,l=n||new Array(16);r=r||{};var u=r.node||_y,f=r.clockseq!==void 0?r.clockseq:kd;if(u==null||f==null){var p=r.random||(r.rng||i0)();u==null&&(u=_y=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),f==null&&(f=kd=(p[6]<<8|p[7])&16383)}var m=r.msecs!==void 0?r.msecs:Date.now(),g=r.nsecs!==void 0?r.nsecs:Nd+1,y=m-jd+(g-Nd)/1e4;if(y<0&&r.clockseq===void 0&&(f=f+1&16383),(y<0||m>jd)&&r.nsecs===void 0&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");jd=m,Nd=g,kd=f,m+=122192928e5;var E=((m&268435455)*1e4+g)%4294967296;l[o++]=E>>>24&255,l[o++]=E>>>16&255,l[o++]=E>>>8&255,l[o++]=E&255;var I=m/4294967296*1e4&268435455;l[o++]=I>>>8&255,l[o++]=I&255,l[o++]=I>>>24&15|16,l[o++]=I>>>16&255,l[o++]=f>>>8|128,l[o++]=f&255;for(var F=0;F<6;++F)l[o+F]=u[F];return n||Vl(l)}function s0(r){if(!$l(r))throw TypeError("Invalid UUID");var n,i=new Uint8Array(16);return i[0]=(n=parseInt(r.slice(0,8),16))>>>24,i[1]=n>>>16&255,i[2]=n>>>8&255,i[3]=n&255,i[4]=(n=parseInt(r.slice(9,13),16))>>>8,i[5]=n&255,i[6]=(n=parseInt(r.slice(14,18),16))>>>8,i[7]=n&255,i[8]=(n=parseInt(r.slice(19,23),16))>>>8,i[9]=n&255,i[10]=(n=parseInt(r.slice(24,36),16))/1099511627776&255,i[11]=n/4294967296&255,i[12]=n>>>24&255,i[13]=n>>>16&255,i[14]=n>>>8&255,i[15]=n&255,i}function $E(r){r=unescape(encodeURIComponent(r));for(var n=[],i=0;i<r.length;++i)n.push(r.charCodeAt(i));return n}var VE="6ba7b810-9dad-11d1-80b4-00c04fd430c8",GE="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function o0(r,n,i){function o(l,u,f,p){if(typeof l=="string"&&(l=$E(l)),typeof u=="string"&&(u=s0(u)),u.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var m=new Uint8Array(16+l.length);if(m.set(u),m.set(l,u.length),m=i(m),m[6]=m[6]&15|n,m[8]=m[8]&63|128,f){p=p||0;for(var g=0;g<16;++g)f[p+g]=m[g];return f}return Vl(m)}try{o.name=r}catch{}return o.DNS=VE,o.URL=GE,o}function FE(r){if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=new Uint8Array(n.length);for(var i=0;i<n.length;++i)r[i]=n.charCodeAt(i)}return YE(XE(JE(r),r.length*8))}function YE(r){for(var n=[],i=r.length*32,o="0123456789abcdef",l=0;l<i;l+=8){var u=r[l>>5]>>>l%32&255,f=parseInt(o.charAt(u>>>4&15)+o.charAt(u&15),16);n.push(f)}return n}function a0(r){return(r+64>>>9<<4)+14+1}function XE(r,n){r[n>>5]|=128<<n%32,r[a0(n)-1]=n;for(var i=1732584193,o=-271733879,l=-1732584194,u=271733878,f=0;f<r.length;f+=16){var p=i,m=o,g=l,y=u;i=Kt(i,o,l,u,r[f],7,-680876936),u=Kt(u,i,o,l,r[f+1],12,-389564586),l=Kt(l,u,i,o,r[f+2],17,606105819),o=Kt(o,l,u,i,r[f+3],22,-1044525330),i=Kt(i,o,l,u,r[f+4],7,-176418897),u=Kt(u,i,o,l,r[f+5],12,1200080426),l=Kt(l,u,i,o,r[f+6],17,-1473231341),o=Kt(o,l,u,i,r[f+7],22,-45705983),i=Kt(i,o,l,u,r[f+8],7,1770035416),u=Kt(u,i,o,l,r[f+9],12,-1958414417),l=Kt(l,u,i,o,r[f+10],17,-42063),o=Kt(o,l,u,i,r[f+11],22,-1990404162),i=Kt(i,o,l,u,r[f+12],7,1804603682),u=Kt(u,i,o,l,r[f+13],12,-40341101),l=Kt(l,u,i,o,r[f+14],17,-1502002290),o=Kt(o,l,u,i,r[f+15],22,1236535329),i=Wt(i,o,l,u,r[f+1],5,-165796510),u=Wt(u,i,o,l,r[f+6],9,-1069501632),l=Wt(l,u,i,o,r[f+11],14,643717713),o=Wt(o,l,u,i,r[f],20,-373897302),i=Wt(i,o,l,u,r[f+5],5,-701558691),u=Wt(u,i,o,l,r[f+10],9,38016083),l=Wt(l,u,i,o,r[f+15],14,-660478335),o=Wt(o,l,u,i,r[f+4],20,-405537848),i=Wt(i,o,l,u,r[f+9],5,568446438),u=Wt(u,i,o,l,r[f+14],9,-1019803690),l=Wt(l,u,i,o,r[f+3],14,-187363961),o=Wt(o,l,u,i,r[f+8],20,1163531501),i=Wt(i,o,l,u,r[f+13],5,-1444681467),u=Wt(u,i,o,l,r[f+2],9,-51403784),l=Wt(l,u,i,o,r[f+7],14,1735328473),o=Wt(o,l,u,i,r[f+12],20,-1926607734),i=Qt(i,o,l,u,r[f+5],4,-378558),u=Qt(u,i,o,l,r[f+8],11,-2022574463),l=Qt(l,u,i,o,r[f+11],16,1839030562),o=Qt(o,l,u,i,r[f+14],23,-35309556),i=Qt(i,o,l,u,r[f+1],4,-1530992060),u=Qt(u,i,o,l,r[f+4],11,1272893353),l=Qt(l,u,i,o,r[f+7],16,-155497632),o=Qt(o,l,u,i,r[f+10],23,-1094730640),i=Qt(i,o,l,u,r[f+13],4,681279174),u=Qt(u,i,o,l,r[f],11,-358537222),l=Qt(l,u,i,o,r[f+3],16,-722521979),o=Qt(o,l,u,i,r[f+6],23,76029189),i=Qt(i,o,l,u,r[f+9],4,-640364487),u=Qt(u,i,o,l,r[f+12],11,-421815835),l=Qt(l,u,i,o,r[f+15],16,530742520),o=Qt(o,l,u,i,r[f+2],23,-995338651),i=Zt(i,o,l,u,r[f],6,-198630844),u=Zt(u,i,o,l,r[f+7],10,1126891415),l=Zt(l,u,i,o,r[f+14],15,-1416354905),o=Zt(o,l,u,i,r[f+5],21,-57434055),i=Zt(i,o,l,u,r[f+12],6,1700485571),u=Zt(u,i,o,l,r[f+3],10,-1894986606),l=Zt(l,u,i,o,r[f+10],15,-1051523),o=Zt(o,l,u,i,r[f+1],21,-2054922799),i=Zt(i,o,l,u,r[f+8],6,1873313359),u=Zt(u,i,o,l,r[f+15],10,-30611744),l=Zt(l,u,i,o,r[f+6],15,-1560198380),o=Zt(o,l,u,i,r[f+13],21,1309151649),i=Zt(i,o,l,u,r[f+4],6,-145523070),u=Zt(u,i,o,l,r[f+11],10,-1120210379),l=Zt(l,u,i,o,r[f+2],15,718787259),o=Zt(o,l,u,i,r[f+9],21,-343485551),i=Kr(i,p),o=Kr(o,m),l=Kr(l,g),u=Kr(u,y)}return[i,o,l,u]}function JE(r){if(r.length===0)return[];for(var n=r.length*8,i=new Uint32Array(a0(n)),o=0;o<n;o+=8)i[o>>5]|=(r[o/8]&255)<<o%32;return i}function Kr(r,n){var i=(r&65535)+(n&65535),o=(r>>16)+(n>>16)+(i>>16);return o<<16|i&65535}function KE(r,n){return r<<n|r>>>32-n}function Gl(r,n,i,o,l,u){return Kr(KE(Kr(Kr(n,r),Kr(o,u)),l),i)}function Kt(r,n,i,o,l,u,f){return Gl(n&i|~n&o,r,n,l,u,f)}function Wt(r,n,i,o,l,u,f){return Gl(n&o|i&~o,r,n,l,u,f)}function Qt(r,n,i,o,l,u,f){return Gl(n^i^o,r,n,l,u,f)}function Zt(r,n,i,o,l,u,f){return Gl(i^(n|~o),r,n,l,u,f)}var WE=o0("v3",48,FE);function QE(r,n,i){r=r||{};var o=r.random||(r.rng||i0)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,n){i=i||0;for(var l=0;l<16;++l)n[i+l]=o[l];return n}return Vl(o)}function ZE(r,n,i,o){switch(r){case 0:return n&i^~n&o;case 1:return n^i^o;case 2:return n&i^n&o^i&o;case 3:return n^i^o}}function Ad(r,n){return r<<n|r>>>32-n}function e_(r){var n=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var o=unescape(encodeURIComponent(r));r=[];for(var l=0;l<o.length;++l)r.push(o.charCodeAt(l))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var u=r.length/4+2,f=Math.ceil(u/16),p=new Array(f),m=0;m<f;++m){for(var g=new Uint32Array(16),y=0;y<16;++y)g[y]=r[m*64+y*4]<<24|r[m*64+y*4+1]<<16|r[m*64+y*4+2]<<8|r[m*64+y*4+3];p[m]=g}p[f-1][14]=(r.length-1)*8/Math.pow(2,32),p[f-1][14]=Math.floor(p[f-1][14]),p[f-1][15]=(r.length-1)*8&4294967295;for(var E=0;E<f;++E){for(var I=new Uint32Array(80),F=0;F<16;++F)I[F]=p[E][F];for(var A=16;A<80;++A)I[A]=Ad(I[A-3]^I[A-8]^I[A-14]^I[A-16],1);for(var H=i[0],B=i[1],se=i[2],le=i[3],me=i[4],ce=0;ce<80;++ce){var ie=Math.floor(ce/20),fe=Ad(H,5)+ZE(ie,B,se,le)+me+n[ie]+I[ce]>>>0;me=le,le=se,se=Ad(B,30)>>>0,B=H,H=fe}i[0]=i[0]+H>>>0,i[1]=i[1]+B>>>0,i[2]=i[2]+se>>>0,i[3]=i[3]+le>>>0,i[4]=i[4]+me>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,i[0]&255,i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,i[1]&255,i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,i[2]&255,i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,i[3]&255,i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,i[4]&255]}var t_=o0("v5",80,e_);const n_="00000000-0000-0000-0000-000000000000";function r_(r){if(!$l(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const i_=Object.freeze(Object.defineProperty({__proto__:null,NIL:n_,parse:s0,stringify:Vl,v1:qE,v3:WE,v4:QE,v5:t_,validate:$l,version:r_},Symbol.toStringTag,{value:"Module"})),s_=Ol(i_);function l0(r,n){return r=Math.ceil(r),n=Math.floor(n),Math.floor(Math.random()*(n-r+1))+r}function c0(r,n){const i=n.retryDelayInMs*Math.pow(2,r),o=Math.min(n.maxRetryDelayInMs,i);return{retryAfterInMs:o/2+l0(0,o/2)}}function Sf(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&!(r instanceof RegExp)&&!(r instanceof Date)}function wf(r){if(Sf(r)){const n=typeof r.name=="string",i=typeof r.message=="string";return n&&i}return!1}function Fl(r,n){switch(n){case"utf-8":return a_(r);case"base64":return u0(r);case"base64url":return o_(r);case"hex":return l_(r)}}function mn(r,n){switch(n){case"utf-8":return c_(r);case"base64":return d0(r);case"base64url":return u_(r);case"hex":return d_(r)}}function u0(r){return btoa([...r].map(n=>String.fromCharCode(n)).join(""))}function o_(r){return u0(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function a_(r){return new TextDecoder().decode(r)}function l_(r){return[...r].map(n=>n.toString(16).padStart(2,"0")).join("")}function c_(r){return new TextEncoder().encode(r)}function d0(r){return new Uint8Array([...atob(r)].map(n=>n.charCodeAt(0)))}function u_(r){const n=r.replace(/-/g,"+").replace(/_/g,"/");return d0(n)}const ky=new Set("0123456789abcdefABCDEF");function d_(r){const n=new Uint8Array(r.length/2);for(let i=0;i<r.length/2;++i){const o=r[2*i],l=r[2*i+1];if(!ky.has(o)||!ky.has(l))return n.slice(0,i);n[i]=parseInt(`${o}${l}`,16)}return n}let ul;function f0(){if(ul)return ul;if(!self.crypto||!self.crypto.subtle)throw new Error("Your browser environment does not support cryptography functions.");return ul=self.crypto.subtle,ul}async function f_(r,n,i){const o=f0(),l=mn(r,"base64"),u=mn(n,"utf-8"),f=await o.importKey("raw",l,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),p=await o.sign({name:"HMAC",hash:{name:"SHA-256"}},f,u);return Fl(new Uint8Array(p),i)}async function h_(r,n){const i=mn(r,"utf-8"),o=await f0().digest({name:"SHA-256"},i);return Fl(new Uint8Array(o),n)}function p_(){let r="";for(let n=0;n<32;n++){const i=Math.floor(Math.random()*16);n===12?r+="4":n===16?r+=i&3|8:r+=i.toString(16),(n===7||n===11||n===15||n===19)&&(r+="-")}return r}const m_=typeof globalThis?.crypto?.randomUUID=="function"?globalThis.crypto.randomUUID.bind(globalThis.crypto):p_;function xf(){return m_()}const g_=typeof window<"u"&&typeof window.document<"u",y_=typeof self=="object"&&typeof self?.importScripts=="function"&&(self.constructor?.name==="DedicatedWorkerGlobalScope"||self.constructor?.name==="ServiceWorkerGlobalScope"||self.constructor?.name==="SharedWorkerGlobalScope"),h0=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u",p0=typeof Bun<"u"&&typeof Bun.version<"u",Zr=typeof globalThis.process<"u"&&!!globalThis.process.version&&!!globalThis.process.versions?.node,v_=Zr&&!p0&&!h0,b_=typeof navigator<"u"&&navigator?.product==="ReactNative",Od="REDACTED",S_=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],w_=["api-version"];class Tf{allowedHeaderNames;allowedQueryParameters;constructor({additionalAllowedHeaderNames:n=[],additionalAllowedQueryParameters:i=[]}={}){n=S_.concat(n),i=w_.concat(i),this.allowedHeaderNames=new Set(n.map(o=>o.toLowerCase())),this.allowedQueryParameters=new Set(i.map(o=>o.toLowerCase()))}sanitize(n){const i=new Set;return JSON.stringify(n,(o,l)=>{if(l instanceof Error)return{...l,name:l.name,message:l.message};if(o==="headers")return this.sanitizeHeaders(l);if(o==="url")return this.sanitizeUrl(l);if(o==="query")return this.sanitizeQuery(l);if(o==="body")return;if(o==="response")return;if(o==="operationSpec")return;if(Array.isArray(l)||Sf(l)){if(i.has(l))return"[Circular]";i.add(l)}return l},2)}sanitizeUrl(n){if(typeof n!="string"||n===null||n==="")return n;const i=new URL(n);if(!i.search)return n;for(const[o]of i.searchParams)this.allowedQueryParameters.has(o.toLowerCase())||i.searchParams.set(o,Od);return i.toString()}sanitizeHeaders(n){const i={};for(const o of Object.keys(n))this.allowedHeaderNames.has(o.toLowerCase())?i[o]=n[o]:i[o]=Od;return i}sanitizeQuery(n){if(typeof n!="object"||n===null)return n;const i={};for(const o of Object.keys(n))this.allowedQueryParameters.has(o.toLowerCase())?i[o]=n[o]:i[o]=Od;return i}}async function x_(r,n){const i=new AbortController;function o(){i.abort()}n?.abortSignal?.addEventListener("abort",o);try{return await Promise.race(r.map(l=>l({abortSignal:i.signal})))}finally{i.abort(),n?.abortSignal?.removeEventListener("abort",o)}}let T_=class extends Error{constructor(n){super(n),this.name="AbortError"}};function m0(r,n){const{cleanupBeforeAbort:i,abortSignal:o,abortErrorMsg:l}=n??{};return new Promise((u,f)=>{function p(){f(new T_(l??"The operation was aborted."))}function m(){o?.removeEventListener("abort",g)}function g(){i?.(),m(),p()}if(o?.aborted)return p();try{r(y=>{m(),u(y)},y=>{m(),f(y)})}catch(y){f(y)}o?.addEventListener("abort",g)})}const C_="The delay was aborted.";function g0(r,n){let i;const{abortSignal:o,abortErrorMsg:l}=n??{};return m0(u=>{i=setTimeout(u,r)},{cleanupBeforeAbort:()=>clearTimeout(i),abortSignal:o,abortErrorMsg:l??C_})}function $o(r){if(wf(r))return r.message;{let n;try{typeof r=="object"&&r?n=JSON.stringify(r):n=String(r)}catch{n="[unable to stringify input]"}return`Unknown error ${n}`}}function Cf(r){return typeof r<"u"&&r!==null}function R_(r,n){if(!Cf(r)||typeof r!="object")return!1;for(const i of n)if(!y0(r,i))return!1;return!0}function y0(r,n){return Cf(r)&&typeof r=="object"&&n in r}function E_(r,n){return c0(r,n)}function __(r,n){return h_(r,n)}function k_(r,n,i){return f_(r,n,i)}function j_(r,n){return l0(r,n)}function v0(r){return wf(r)}function N_(r){return Sf(r)}function b0(){return xf()}const A_=g_,O_=p0,M_=h0,U_=Zr,kl=Zr,D_=v_,P_=b_,I_=y_;function z_(r,n){return Fl(r,n)}function L_(r,n){return mn(r,n)}const B_=Object.freeze(Object.defineProperty({__proto__:null,calculateRetryDelay:E_,cancelablePromiseRace:x_,computeSha256Hash:__,computeSha256Hmac:k_,createAbortablePromise:m0,delay:g0,getErrorMessage:$o,getRandomIntegerInclusive:j_,isBrowser:A_,isBun:O_,isDefined:Cf,isDeno:M_,isError:v0,isNode:U_,isNodeLike:kl,isNodeRuntime:D_,isObject:N_,isObjectWithProperties:R_,isReactNative:P_,isWebWorker:I_,objectHasProperty:y0,randomUUID:b0,stringToUint8Array:L_,uint8ArrayToString:z_},Symbol.toStringTag,{value:"Module"})),H_=Ol(B_);function S0(r){let n="";for(let i=0;i<r.length;i++)n+=String.fromCharCode(r[i]);return btoa(n)}function w0(r){const n=atob(r),i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}function q_(r){return atob(r)}const Bt="$",vs="_";function $_(r,n){return n!=="Composite"&&n!=="Dictionary"&&(typeof r=="string"||typeof r=="number"||typeof r=="boolean"||n?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||r===void 0||r===null)}const V_=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function G_(r){return V_.test(r)}const F_=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function Y_(r){return F_.test(r)}function X_(r){const n={...r.headers,...r.body};return r.hasNullableType&&Object.getOwnPropertyNames(n).length===0?r.shouldWrapBody?{body:null}:null:r.shouldWrapBody?{...r.headers,body:r.body}:n}function jy(r,n){const i=r.parsedHeaders;if(r.request.method==="HEAD")return{...i,body:r.parsedBody};const o=n&&n.bodyMapper,l=!!o?.nullable,u=o?.type.name;if(u==="Stream")return{...i,blobBody:r.blobBody,readableStreamBody:r.readableStreamBody};const f=u==="Composite"&&o.type.modelProperties||{},p=Object.keys(f).some(m=>f[m].serializedName==="");if(u==="Sequence"||p){const m=r.parsedBody??[];for(const g of Object.keys(f))f[g].serializedName&&(m[g]=r.parsedBody?.[g]);if(i)for(const g of Object.keys(i))m[g]=i[g];return l&&!r.parsedBody&&!i&&Object.getOwnPropertyNames(f).length===0?null:m}return X_({body:r.parsedBody,headers:i,hasNullableType:l,shouldWrapBody:$_(r.parsedBody,u)})}class J_{modelMappers;isXML;constructor(n={},i=!1){this.modelMappers=n,this.isXML=i}validateConstraints(n,i,o){const l=(u,f)=>{throw new Error(`"${o}" with value "${i}" should satisfy the constraint "${u}": ${f}.`)};if(n.constraints&&i!==void 0&&i!==null){const{ExclusiveMaximum:u,ExclusiveMinimum:f,InclusiveMaximum:p,InclusiveMinimum:m,MaxItems:g,MaxLength:y,MinItems:E,MinLength:I,MultipleOf:F,Pattern:A,UniqueItems:H}=n.constraints;if(u!==void 0&&i>=u&&l("ExclusiveMaximum",u),f!==void 0&&i<=f&&l("ExclusiveMinimum",f),p!==void 0&&i>p&&l("InclusiveMaximum",p),m!==void 0&&i<m&&l("InclusiveMinimum",m),g!==void 0&&i.length>g&&l("MaxItems",g),y!==void 0&&i.length>y&&l("MaxLength",y),E!==void 0&&i.length<E&&l("MinItems",E),I!==void 0&&i.length<I&&l("MinLength",I),F!==void 0&&i%F!==0&&l("MultipleOf",F),A){const B=typeof A=="string"?new RegExp(A):A;(typeof i!="string"||i.match(B)===null)&&l("Pattern",A)}H&&i.some((B,se,le)=>le.indexOf(B)!==se)&&l("UniqueItems",H)}}serialize(n,i,o,l={xml:{}}){const u={xml:{rootName:l.xml.rootName??"",includeRoot:l.xml.includeRoot??!1,xmlCharKey:l.xml.xmlCharKey??vs}};let f={};const p=n.type.name;o||(o=n.serializedName),p.match(/^Sequence$/i)!==null&&(f=[]),n.isConstant&&(i=n.defaultValue);const{required:m,nullable:g}=n;if(m&&g&&i===void 0)throw new Error(`${o} cannot be undefined.`);if(m&&!g&&i==null)throw new Error(`${o} cannot be null or undefined.`);if(!m&&g===!1&&i===null)throw new Error(`${o} cannot be null.`);return i==null||p.match(/^any$/i)!==null?f=i:p.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)!==null?f=tk(p,o,i):p.match(/^Enum$/i)!==null?f=nk(o,n.type.allowedValues,i):p.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)!==null?f=sk(p,i,o):p.match(/^ByteArray$/i)!==null?f=rk(o,i):p.match(/^Base64Url$/i)!==null?f=ik(o,i):p.match(/^Sequence$/i)!==null?f=ok(this,n,i,o,!!this.isXML,u):p.match(/^Dictionary$/i)!==null?f=ak(this,n,i,o,!!this.isXML,u):p.match(/^Composite$/i)!==null&&(f=ck(this,n,i,o,!!this.isXML,u)),f}deserialize(n,i,o,l={xml:{}}){const u={xml:{rootName:l.xml.rootName??"",includeRoot:l.xml.includeRoot??!1,xmlCharKey:l.xml.xmlCharKey??vs},ignoreUnknownProperties:l.ignoreUnknownProperties??!1};if(i==null)return this.isXML&&n.type.name==="Sequence"&&!n.xmlIsWrapped&&(i=[]),n.defaultValue!==void 0&&(i=n.defaultValue),i;let f;const p=n.type.name;if(o||(o=n.serializedName),p.match(/^Composite$/i)!==null)f=dk(this,n,i,o,u);else{if(this.isXML){const m=u.xml.xmlCharKey;i[Bt]!==void 0&&i[m]!==void 0&&(i=i[m])}p.match(/^Number$/i)!==null?(f=parseFloat(i),isNaN(f)&&(f=i)):p.match(/^Boolean$/i)!==null?i==="true"?f=!0:i==="false"?f=!1:f=i:p.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)!==null?f=i:p.match(/^(Date|DateTime|DateTimeRfc1123)$/i)!==null?f=new Date(i):p.match(/^UnixTime$/i)!==null?f=ek(i):p.match(/^ByteArray$/i)!==null?f=w0(i):p.match(/^Base64Url$/i)!==null?f=Q_(i):p.match(/^Sequence$/i)!==null?f=hk(this,n,i,o,u):p.match(/^Dictionary$/i)!==null&&(f=fk(this,n,i,o,u))}return n.isConstant&&(f=n.defaultValue),f}}function Rf(r={},n=!1){return new J_(r,n)}function K_(r,n){let i=r.length;for(;i-1>=0&&r[i-1]===n;)--i;return r.substr(0,i)}function W_(r){if(!r)return;if(!(r instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");const n=S0(r);return K_(n,"=").replace(/\+/g,"-").replace(/\//g,"_")}function Q_(r){if(r){if(r&&typeof r.valueOf()!="string")throw new Error("Please provide an input of type string for converting to Uint8Array");return r=r.replace(/-/g,"+").replace(/_/g,"/"),w0(r)}}function Fd(r){const n=[];let i="";if(r){const o=r.split(".");for(const l of o)l.charAt(l.length-1)==="\\"?i+=l.substr(0,l.length-1)+".":(i+=l,n.push(i),i="")}return n}function Z_(r){if(r)return typeof r.valueOf()=="string"&&(r=new Date(r)),Math.floor(r.getTime()/1e3)}function ek(r){if(r)return new Date(r*1e3)}function tk(r,n,i){if(i!=null){if(r.match(/^Number$/i)!==null){if(typeof i!="number")throw new Error(`${n} with value ${i} must be of type number.`)}else if(r.match(/^String$/i)!==null){if(typeof i.valueOf()!="string")throw new Error(`${n} with value "${i}" must be of type string.`)}else if(r.match(/^Uuid$/i)!==null){if(!(typeof i.valueOf()=="string"&&Y_(i)))throw new Error(`${n} with value "${i}" must be of type string and a valid uuid.`)}else if(r.match(/^Boolean$/i)!==null){if(typeof i!="boolean")throw new Error(`${n} with value ${i} must be of type boolean.`)}else if(r.match(/^Stream$/i)!==null){const o=typeof i;if(o!=="string"&&typeof i.pipe!="function"&&typeof i.tee!="function"&&!(i instanceof ArrayBuffer)&&!ArrayBuffer.isView(i)&&!((typeof Blob=="function"||typeof Blob=="object")&&i instanceof Blob)&&o!=="function")throw new Error(`${n} must be a string, Blob, ArrayBuffer, ArrayBufferView, ReadableStream, or () => ReadableStream.`)}}return i}function nk(r,n,i){if(!n)throw new Error(`Please provide a set of allowedValues to validate ${r} as an Enum Type.`);if(!n.some(l=>typeof l.valueOf()=="string"?l.toLowerCase()===i.toLowerCase():l===i))throw new Error(`${i} is not a valid value for ${r}. The valid values are: ${JSON.stringify(n)}.`);return i}function rk(r,n){if(n!=null){if(!(n instanceof Uint8Array))throw new Error(`${r} must be of type Uint8Array.`);n=S0(n)}return n}function ik(r,n){if(n!=null){if(!(n instanceof Uint8Array))throw new Error(`${r} must be of type Uint8Array.`);n=W_(n)}return n}function sk(r,n,i){if(n!=null){if(r.match(/^Date$/i)!==null){if(!(n instanceof Date||typeof n.valueOf()=="string"&&!isNaN(Date.parse(n))))throw new Error(`${i} must be an instanceof Date or a string in ISO8601 format.`);n=n instanceof Date?n.toISOString().substring(0,10):new Date(n).toISOString().substring(0,10)}else if(r.match(/^DateTime$/i)!==null){if(!(n instanceof Date||typeof n.valueOf()=="string"&&!isNaN(Date.parse(n))))throw new Error(`${i} must be an instanceof Date or a string in ISO8601 format.`);n=n instanceof Date?n.toISOString():new Date(n).toISOString()}else if(r.match(/^DateTimeRfc1123$/i)!==null){if(!(n instanceof Date||typeof n.valueOf()=="string"&&!isNaN(Date.parse(n))))throw new Error(`${i} must be an instanceof Date or a string in RFC-1123 format.`);n=n instanceof Date?n.toUTCString():new Date(n).toUTCString()}else if(r.match(/^UnixTime$/i)!==null){if(!(n instanceof Date||typeof n.valueOf()=="string"&&!isNaN(Date.parse(n))))throw new Error(`${i} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);n=Z_(n)}else if(r.match(/^TimeSpan$/i)!==null&&!G_(n))throw new Error(`${i} must be a string in ISO 8601 format. Instead was "${n}".`)}return n}function ok(r,n,i,o,l,u){if(!Array.isArray(i))throw new Error(`${o} must be of type Array.`);let f=n.type.element;if(!f||typeof f!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${o}.`);f.type.name==="Composite"&&f.type.className&&(f=r.modelMappers[f.type.className]??f);const p=[];for(let m=0;m<i.length;m++){const g=r.serialize(f,i[m],o,u);if(l&&f.xmlNamespace){const y=f.xmlNamespacePrefix?`xmlns:${f.xmlNamespacePrefix}`:"xmlns";f.type.name==="Composite"?(p[m]={...g},p[m][Bt]={[y]:f.xmlNamespace}):(p[m]={},p[m][u.xml.xmlCharKey]=g,p[m][Bt]={[y]:f.xmlNamespace})}else p[m]=g}return p}function ak(r,n,i,o,l,u){if(typeof i!="object")throw new Error(`${o} must be of type object.`);const f=n.type.value;if(!f||typeof f!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${o}.`);const p={};for(const m of Object.keys(i)){const g=r.serialize(f,i[m],o,u);p[m]=C0(f,g,l,u)}if(l&&n.xmlNamespace){const m=n.xmlNamespacePrefix?`xmlns:${n.xmlNamespacePrefix}`:"xmlns",g=p;return g[Bt]={[m]:n.xmlNamespace},g}return p}function lk(r,n,i){const o=n.type.additionalProperties;return!o&&n.type.className?x0(r,n,i)?.type.additionalProperties:o}function x0(r,n,i){const o=n.type.className;if(!o)throw new Error(`Class name for model "${i}" is not provided in the mapper "${JSON.stringify(n,void 0,2)}".`);return r.modelMappers[o]}function T0(r,n,i){let o=n.type.modelProperties;if(!o){const l=x0(r,n,i);if(!l)throw new Error(`mapper() cannot be null or undefined for model "${n.type.className}".`);if(o=l?.type.modelProperties,!o)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(l)}" of type "${n.type.className}" for object "${i}".`)}return o}function ck(r,n,i,o,l,u){if(jl(r,n)&&(n=R0(r,n,i,"clientName")),i!=null){const f={},p=T0(r,n,o);for(const g of Object.keys(p)){const y=p[g];if(y.readOnly)continue;let E,I=f;if(r.isXML)y.xmlIsWrapped?E=y.xmlName:E=y.xmlElementName||y.xmlName;else{const F=Fd(y.serializedName);E=F.pop();for(const A of F){const H=I[A];H==null&&(i[g]!==void 0&&i[g]!==null||y.defaultValue!==void 0)&&(I[A]={}),I=I[A]}}if(I!=null){if(l&&n.xmlNamespace){const se=n.xmlNamespacePrefix?`xmlns:${n.xmlNamespacePrefix}`:"xmlns";I[Bt]={...I[Bt],[se]:n.xmlNamespace}}const F=y.serializedName!==""?o+"."+y.serializedName:o;let A=i[g];const H=jl(r,n);H&&H.clientName===g&&A==null&&(A=n.serializedName);const B=r.serialize(y,A,F,u);if(B!==void 0&&E!==void 0&&E!==null){const se=C0(y,B,l,u);l&&y.xmlIsAttribute?(I[Bt]=I[Bt]||{},I[Bt][E]=B):l&&y.xmlIsWrapped?I[E]={[y.xmlElementName]:se}:I[E]=se}}}const m=lk(r,n,o);if(m){const g=Object.keys(p);for(const y in i)g.every(I=>I!==y)&&(f[y]=r.serialize(m,i[y],o+'["'+y+'"]',u))}return f}return i}function C0(r,n,i,o){if(!i||!r.xmlNamespace)return n;const u={[r.xmlNamespacePrefix?`xmlns:${r.xmlNamespacePrefix}`:"xmlns"]:r.xmlNamespace};if(["Composite"].includes(r.type.name)){if(n[Bt])return n;{const p={...n};return p[Bt]=u,p}}const f={};return f[o.xml.xmlCharKey]=n,f[Bt]=u,f}function uk(r,n){return[Bt,n.xml.xmlCharKey].includes(r)}function dk(r,n,i,o,l){const u=l.xml.xmlCharKey??vs;jl(r,n)&&(n=R0(r,n,i,"serializedName"));const f=T0(r,n,o);let p={};const m=[];for(const y of Object.keys(f)){const E=f[y],I=Fd(f[y].serializedName);m.push(I[0]);const{serializedName:F,xmlName:A,xmlElementName:H}=E;let B=o;F!==""&&F!==void 0&&(B=o+"."+F);const se=E.headerCollectionPrefix;if(se){const le={};for(const me of Object.keys(i))me.startsWith(se)&&(le[me.substring(se.length)]=r.deserialize(E.type.value,i[me],B,l)),m.push(me);p[y]=le}else if(r.isXML)if(E.xmlIsAttribute&&i[Bt])p[y]=r.deserialize(E,i[Bt][A],B,l);else if(E.xmlIsMsText)i[u]!==void 0?p[y]=i[u]:typeof i=="string"&&(p[y]=i);else{const le=H||A||F;if(E.xmlIsWrapped){const ce=i[A]?.[H]??[];p[y]=r.deserialize(E,ce,B,l),m.push(A)}else{const me=i[le];p[y]=r.deserialize(E,me,B,l),m.push(le)}}else{let le,me=i,ce=0;for(const ue of I){if(!me)break;ce++,me=me[ue]}me===null&&ce<I.length&&(me=void 0),le=me;const ie=n.type.polymorphicDiscriminator;ie&&y===ie.clientName&&le==null&&(le=n.serializedName);let fe;if(Array.isArray(i[y])&&f[y].serializedName===""){le=i[y];const ue=r.deserialize(E,le,B,l);for(const[Re,Ne]of Object.entries(p))Object.prototype.hasOwnProperty.call(ue,Re)||(ue[Re]=Ne);p=ue}else(le!==void 0||E.defaultValue!==void 0)&&(fe=r.deserialize(E,le,B,l),p[y]=fe)}}const g=n.type.additionalProperties;if(g){const y=E=>{for(const I in f)if(Fd(f[I].serializedName)[0]===E)return!1;return!0};for(const E in i)y(E)&&(p[E]=r.deserialize(g,i[E],o+'["'+E+'"]',l))}else if(i&&!l.ignoreUnknownProperties)for(const y of Object.keys(i))p[y]===void 0&&!m.includes(y)&&!uk(y,l)&&(p[y]=i[y]);return p}function fk(r,n,i,o,l){const u=n.type.value;if(!u||typeof u!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${o}`);if(i){const f={};for(const p of Object.keys(i))f[p]=r.deserialize(u,i[p],o,l);return f}return i}function hk(r,n,i,o,l){let u=n.type.element;if(!u||typeof u!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${o}`);if(i){Array.isArray(i)||(i=[i]),u.type.name==="Composite"&&u.type.className&&(u=r.modelMappers[u.type.className]??u);const f=[];for(let p=0;p<i.length;p++)f[p]=r.deserialize(u,i[p],`${o}[${p}]`,l);return f}return i}function pk(r,n,i){const o=[i];for(;o.length;){const l=o.shift(),u=n===l?n:l+"."+n;if(Object.prototype.hasOwnProperty.call(r,u))return r[u];for(const[f,p]of Object.entries(r))f.startsWith(l+".")&&p.type.uberParent===l&&p.type.className&&o.push(p.type.className)}}function R0(r,n,i,o){const l=jl(r,n);if(l){let u=l[o];if(u){o==="serializedName"&&(u=u.replace(/\\/gi,""));const f=i[u],p=n.type.uberParent??n.type.className;if(typeof f=="string"&&p){const m=pk(r.modelMappers.discriminators,f,p);m&&(n=m)}}}return n}function jl(r,n){return n.type.polymorphicDiscriminator||Ny(r,n.type.uberParent)||Ny(r,n.type.className)}function Ny(r,n){return n&&r.modelMappers[n]&&r.modelMappers[n].type.polymorphicDiscriminator}const Ti={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};class Ef extends Error{constructor(n){super(n),this.name="AbortError"}}function mk(...r){if(r.length>0){const n=String(r[0]);n.includes(":error")?console.error(...r):n.includes(":warning")?console.warn(...r):n.includes(":info")?console.info(...r):n.includes(":verbose")?console.debug(...r):console.debug(...r)}}var Ay={};const Oy=typeof process<"u"&&Ay&&Ay.DEBUG||void 0;let E0,Yd=[],Xd=[];const Nl=[];Oy&&_f(Oy);const ps=Object.assign(r=>_0(r),{enable:_f,enabled:kf,disable:gk,log:mk});function _f(r){E0=r,Yd=[],Xd=[];const n=r.split(",").map(i=>i.trim());for(const i of n)i.startsWith("-")?Xd.push(i.substring(1)):Yd.push(i);for(const i of Nl)i.enabled=kf(i.namespace)}function kf(r){if(r.endsWith("*"))return!0;for(const n of Xd)if(My(r,n))return!1;for(const n of Yd)if(My(r,n))return!0;return!1}function My(r,n){if(n.indexOf("*")===-1)return r===n;let i=n;if(n.indexOf("**")!==-1){const I=[];let F="";for(const A of n)A==="*"&&F==="*"||(F=A,I.push(A));i=I.join("")}let o=0,l=0;const u=i.length,f=r.length;let p=-1,m=-1;for(;o<f&&l<u;)if(i[l]==="*"){if(p=l,l++,l===u)return!0;for(;r[o]!==i[l];)if(o++,o===f)return!1;m=o,o++,l++;continue}else if(i[l]===r[o])l++,o++;else if(p>=0){if(l=p+1,o=m+1,o===f)return!1;for(;r[o]!==i[l];)if(o++,o===f)return!1;m=o,o++,l++;continue}else return!1;const g=o===r.length,y=l===i.length,E=l===i.length-1&&i[l]==="*";return g&&(y||E)}function gk(){const r=E0||"";return _f(""),r}function _0(r){const n=Object.assign(i,{enabled:kf(r),destroy:yk,log:ps.log,namespace:r,extend:vk});function i(...o){n.enabled&&(o.length>0&&(o[0]=`${r} ${o[0]}`),n.log(...o))}return Nl.push(n),n}function yk(){const r=Nl.indexOf(this);return r>=0?(Nl.splice(r,1),!0):!1}function vk(r){const n=_0(`${this.namespace}:${r}`);return n.log=this.log,n}var Uy={};const Jd=["verbose","info","warning","error"],Dy={verbose:400,info:300,warning:200,error:100};function Py(r,n){n.log=(...i)=>{r.log(...i)}}function Iy(r){return Jd.includes(r)}function k0(r){const n=new Set,i=typeof process<"u"&&Uy&&Uy[r.logLevelEnvVarName]||void 0;let o;const l=ps(r.namespace);l.log=(...y)=>{ps.log(...y)};function u(y){if(y&&!Iy(y))throw new Error(`Unknown log level '${y}'. Acceptable values: ${Jd.join(",")}`);o=y;const E=[];for(const I of n)f(I)&&E.push(I.namespace);ps.enable(E.join(","))}i&&(Iy(i)?u(i):console.error(`${r.logLevelEnvVarName} set to unknown log level '${i}'; logging is not enabled. Acceptable values: ${Jd.join(", ")}.`));function f(y){return!!(o&&Dy[y.level]<=Dy[o])}function p(y,E){const I=Object.assign(y.extend(E),{level:E});if(Py(y,I),f(I)){const F=ps.disable();ps.enable(F+","+I.namespace)}return n.add(I),I}function m(){return o}function g(y){const E=l.extend(y);return Py(l,E),{error:p(E,"error"),warning:p(E,"warning"),info:p(E,"info"),verbose:p(E,"verbose")}}return{setLogLevel:u,getLogLevel:m,createClientLogger:g,logger:l}}const bk=k0({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"});function j0(r){return bk.createClientLogger(r)}function dl(r){return r.toLowerCase()}function*Sk(r){for(const n of r.values())yield[n.name,n.value]}class wk{_headersMap;constructor(n){if(this._headersMap=new Map,n)for(const i of Object.keys(n))this.set(i,n[i])}set(n,i){this._headersMap.set(dl(n),{name:n,value:String(i).trim()})}get(n){return this._headersMap.get(dl(n))?.value}has(n){return this._headersMap.has(dl(n))}delete(n){this._headersMap.delete(dl(n))}toJSON(n={}){const i={};if(n.preserveCase)for(const o of this._headersMap.values())i[o.name]=o.value;else for(const[o,l]of this._headersMap)i[o]=l.value;return i}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return Sk(this._headersMap)}}function Ei(r){return new wk(r)}class xk{url;method;headers;timeout;withCredentials;body;multipartBody;formData;streamResponseStatusCodes;enableBrowserStreams;proxySettings;disableKeepAlive;abortSignal;requestId;allowInsecureConnection;onUploadProgress;onDownloadProgress;requestOverrides;authSchemes;constructor(n){this.url=n.url,this.body=n.body,this.headers=n.headers??Ei(),this.method=n.method??"GET",this.timeout=n.timeout??0,this.multipartBody=n.multipartBody,this.formData=n.formData,this.disableKeepAlive=n.disableKeepAlive??!1,this.proxySettings=n.proxySettings,this.streamResponseStatusCodes=n.streamResponseStatusCodes,this.withCredentials=n.withCredentials??!1,this.abortSignal=n.abortSignal,this.onUploadProgress=n.onUploadProgress,this.onDownloadProgress=n.onDownloadProgress,this.requestId=n.requestId||xf(),this.allowInsecureConnection=n.allowInsecureConnection??!1,this.enableBrowserStreams=n.enableBrowserStreams??!1,this.requestOverrides=n.requestOverrides,this.authSchemes=n.authSchemes}}function N0(r){return new xk(r)}const zy=new Set(["Deserialize","Serialize","Retry","Sign"]);class Al{_policies=[];_orderedPolicies;constructor(n){this._policies=n?.slice(0)??[],this._orderedPolicies=void 0}addPolicy(n,i={}){if(i.phase&&i.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(i.phase&&!zy.has(i.phase))throw new Error(`Invalid phase name: ${i.phase}`);if(i.afterPhase&&!zy.has(i.afterPhase))throw new Error(`Invalid afterPhase name: ${i.afterPhase}`);this._policies.push({policy:n,options:i}),this._orderedPolicies=void 0}removePolicy(n){const i=[];return this._policies=this._policies.filter(o=>n.name&&o.policy.name===n.name||n.phase&&o.options.phase===n.phase?(i.push(o.policy),!1):!0),this._orderedPolicies=void 0,i}sendRequest(n,i){return this.getOrderedPolicies().reduceRight((u,f)=>p=>f.sendRequest(p,u),u=>n.sendRequest(u))(i)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new Al(this._policies)}static create(){return new Al}orderPolicies(){const n=[],i=new Map;function o(A){return{name:A,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}const l=o("Serialize"),u=o("None"),f=o("Deserialize"),p=o("Retry"),m=o("Sign"),g=[l,u,f,p,m];function y(A){return A==="Retry"?p:A==="Serialize"?l:A==="Deserialize"?f:A==="Sign"?m:u}for(const A of this._policies){const H=A.policy,B=A.options,se=H.name;if(i.has(se))throw new Error("Duplicate policy names not allowed in pipeline");const le={policy:H,dependsOn:new Set,dependants:new Set};B.afterPhase&&(le.afterPhase=y(B.afterPhase),le.afterPhase.hasAfterPolicies=!0),i.set(se,le),y(B.phase).policies.add(le)}for(const A of this._policies){const{policy:H,options:B}=A,se=H.name,le=i.get(se);if(!le)throw new Error(`Missing node for policy ${se}`);if(B.afterPolicies)for(const me of B.afterPolicies){const ce=i.get(me);ce&&(le.dependsOn.add(ce),ce.dependants.add(le))}if(B.beforePolicies)for(const me of B.beforePolicies){const ce=i.get(me);ce&&(ce.dependsOn.add(le),le.dependants.add(ce))}}function E(A){A.hasRun=!0;for(const H of A.policies)if(!(H.afterPhase&&(!H.afterPhase.hasRun||H.afterPhase.policies.size))&&H.dependsOn.size===0){n.push(H.policy);for(const B of H.dependants)B.dependsOn.delete(H);i.delete(H.policy.name),A.policies.delete(H)}}function I(){for(const A of g){if(E(A),A.policies.size>0&&A!==u){u.hasRun||E(u);return}A.hasAfterPolicies&&E(u)}}let F=0;for(;i.size>0;){F++;const A=n.length;if(I(),n.length<=A&&F>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return n}}function A0(){return Al.create()}const Tk=Symbol(),Ck=new Tf;let _i=class O0 extends Error{static REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";static PARSE_ERROR="PARSE_ERROR";code;statusCode;request;response;details;constructor(n,i={}){super(n),this.name="RestError",this.code=i.code,this.statusCode=i.statusCode,Object.defineProperty(this,"request",{value:i.request,enumerable:!1}),Object.defineProperty(this,"response",{value:i.response,enumerable:!1});const o=this.request?.agent?{maxFreeSockets:this.request.agent.maxFreeSockets,maxSockets:this.request.agent.maxSockets}:void 0;Object.defineProperty(this,Tk,{value:()=>`RestError: ${this.message} 
 ${Ck.sanitize({...this,request:{...this.request,agent:o},response:this.response})}`,enumerable:!1}),Object.setPrototypeOf(this,O0.prototype)}};function M0(r){return r instanceof _i?!0:wf(r)&&r.name==="RestError"}function U0(r){return!!(r&&typeof r.pipe=="function")}function Yl(r){return!!(r&&typeof r.getReader=="function"&&typeof r.tee=="function")}function D0(r){return r!==void 0&&(r instanceof Uint8Array||P0(r)||typeof r=="function"||r instanceof Blob)}function P0(r){return U0(r)||Yl(r)}function Rk(r){return typeof r.stream=="function"}function Ek(r){if(r.buffer instanceof ArrayBuffer&&r.byteOffset===0&&r.byteLength===r.buffer.byteLength)return r.buffer;const n=new ArrayBuffer(r.byteLength),i=new Uint8Array(n),o=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);return i.set(o),i.buffer}function _k(r){return(typeof Blob=="function"||typeof Blob=="object")&&r instanceof Blob}class kk{async sendRequest(n){if(new URL(n.url).protocol!=="https:"&&!n.allowInsecureConnection)throw new Error(`Cannot connect to ${n.url} while allowInsecureConnection is false.`);if(n.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");try{return await jk(n)}catch(l){throw Ok(l,n)}}}async function jk(r){const{abortController:n,abortControllerCleanup:i}=Ak(r);try{const o=Mk(r.headers),{streaming:l,body:u}=Dk(r),f={body:u,method:r.method,headers:o,signal:n.signal,..."credentials"in Request.prototype?{credentials:r.withCredentials?"include":"same-origin"}:{},..."cache"in Request.prototype?{cache:"no-store"}:{}};l&&(f.duplex="half");const p=await fetch(r.url,{...f,...r.requestOverrides});return _k(r.body)&&r.onUploadProgress&&r.onUploadProgress({loadedBytes:r.body.size}),Nk(p,r,i)}catch(o){throw i?.(),o}}async function Nk(r,n,i){const o=Uk(r),l={request:n,headers:o,status:r.status},u=Yl(r.body)?I0(r.body,{onProgress:n.onDownloadProgress,onEnd:i}):r.body;if(n.streamResponseStatusCodes?.has(Number.POSITIVE_INFINITY)||n.streamResponseStatusCodes?.has(l.status))if(n.enableBrowserStreams)l.browserStreamBody=u??void 0;else{const f=new Response(u);l.blobBody=f.blob(),i?.()}else{const f=new Response(u);l.bodyAsText=await f.text(),i?.()}return l}function Ak(r){const n=new AbortController;let i,o;if(r.abortSignal){if(r.abortSignal.aborted)throw new Ef("The operation was aborted. Request has already been canceled.");o=l=>{l.type==="abort"&&n.abort()},r.abortSignal.addEventListener("abort",o),i=()=>{o&&r.abortSignal?.removeEventListener("abort",o)}}return r.timeout>0&&setTimeout(()=>{n.abort()},r.timeout),{abortController:n,abortControllerCleanup:i}}function Ok(r,n){return r&&r?.name==="AbortError"?r:new _i(`Error sending request: ${r.message}`,{code:r?.code??_i.REQUEST_SEND_ERROR,request:n})}function Mk(r){const n=new Headers;for(const[i,o]of r)n.append(i,o);return n}function Uk(r){const n=Ei();for(const[i,o]of r.headers)n.set(i,o);return n}function Dk(r){const n=typeof r.body=="function"?r.body():r.body;if(U0(n))throw new Error("Node streams are not supported in browser environment.");return Yl(n)?{streaming:!0,body:I0(n,{onProgress:r.onUploadProgress})}:typeof n=="object"&&n&&"buffer"in n?{streaming:!1,body:Ek(n)}:n===void 0?{streaming:!1}:{streaming:!1,body:n}}function I0(r,n={}){let i=0;const{onProgress:o,onEnd:l}=n;if(Ik(r))return r.pipeThrough(new TransformStream({transform(u,f){if(u===null){f.terminate();return}f.enqueue(u),i+=u.length,o&&o({loadedBytes:i})},flush(){l?.()}}));{const u=r.getReader();return new ReadableStream({async pull(f){const{done:p,value:m}=await u.read();if(p||!m){l?.(),f.close(),u.releaseLock();return}i+=m?.length??0,f.enqueue(m),o&&o({loadedBytes:i})},cancel(f){return l?.(),u.cancel(f)}})}}function Pk(){return new kk}function Ik(r){return r.pipeThrough!==void 0&&self.TransformStream!==void 0}function z0(){return Pk()}const L0=j0("ts-http-runtime"),B0="logPolicy";function H0(r={}){const n=r.logger??L0.info,i=new Tf({additionalAllowedHeaderNames:r.additionalAllowedHeaderNames,additionalAllowedQueryParameters:r.additionalAllowedQueryParameters});return{name:B0,async sendRequest(o,l){if(!n.enabled)return l(o);n(`Request: ${i.sanitize(o)}`);const u=await l(o);return n(`Response status code: ${u.status}`),n(`Headers: ${i.sanitize(u.headers)}`),u}}}const q0="redirectPolicy",Ly=["GET","HEAD"];function $0(r={}){const{maxRetries:n=20}=r;return{name:q0,async sendRequest(i,o){const l=await o(i);return V0(o,l,n)}}}async function V0(r,n,i,o=0){const{request:l,status:u,headers:f}=n,p=f.get("location");if(p&&(u===300||u===301&&Ly.includes(l.method)||u===302&&Ly.includes(l.method)||u===303&&l.method==="POST"||u===307)&&o<i){const m=new URL(p,l.url);l.url=m.toString(),u===303&&(l.method="GET",l.headers.delete("Content-Length"),delete l.body),l.headers.delete("Authorization");const g=await r(l);return V0(r,g,i,o+1)}return n}function zk(){return"x-ms-useragent"}function Lk(r){const n=[{name:"Firefox",regex:/Firefox\/([\d.]+)/},{name:"Safari",regex:/Version\/([\d.]+).*Safari/}];for(const i of n){const o=r.match(i.regex);if(o)return{brand:i.name,version:o[1]}}}function Bk(r){const n=["Google Chrome","Microsoft Edge","Opera","Brave","Chromium"];for(const i of n){const o=r.find(l=>l.brand===i);if(o)return o}}async function Hk(r){const n=globalThis.navigator;let i="unknown";if(n?.userAgentData){const o=await n.userAgentData.getHighEntropyValues(["architecture","platformVersion"]);i=`${o.platform} ${o.platformVersion}; ${o.architecture}`;const l=Bk(n.userAgentData.brands);l&&r.set(l.brand,`${l.version} (${i})`)}else if(n?.platform){i=n.platform;const o=Lk(n.userAgent);o&&r.set(o.brand,`${o.version} (${i})`)}else typeof globalThis.EdgeRuntime=="string"&&r.set("EdgeRuntime",`${globalThis.EdgeRuntime} (${i})`)}const qk="0.3.2",bs=3;function $k(r){const n=[];for(const[i,o]of r){const l=o?`${i}/${o}`:i;n.push(l)}return n.join(" ")}function Vk(){return zk()}async function Gk(r){const n=new Map;n.set("ts-http-runtime",qk),await Hk(n);const i=$k(n);return r?`${r} ${i}`:i}const By=Vk(),Fk="userAgentPolicy";function Yk(r={}){const n=Gk(r.userAgentPrefix);return{name:Fk,async sendRequest(i,o){return i.headers.has(By)||i.headers.set(By,await n),o(i)}}}const Xk="decompressResponsePolicy";function G0(){throw new Error("decompressResponsePolicy is not supported in browser environment")}const Jk="The operation was aborted.";function Kk(r,n,i){return new Promise((o,l)=>{let u,f;const p=()=>l(new Ef(i?.abortErrorMsg?i?.abortErrorMsg:Jk)),m=()=>{i?.abortSignal&&f&&i.abortSignal.removeEventListener("abort",f)};if(f=()=>(u&&clearTimeout(u),m(),p()),i?.abortSignal&&i.abortSignal.aborted)return p();u=setTimeout(()=>{m(),o(n)},r),i?.abortSignal&&i.abortSignal.addEventListener("abort",f)})}function Wk(r,n){const i=r.headers.get(n);if(!i)return;const o=Number(i);if(!Number.isNaN(o))return o}const Kd="Retry-After",Qk=["retry-after-ms","x-ms-retry-after-ms",Kd];function F0(r){if(r&&[429,503].includes(r.status))try{for(const l of Qk){const u=Wk(r,l);if(u===0||u)return u*(l===Kd?1e3:1)}const n=r.headers.get(Kd);if(!n)return;const o=Date.parse(n)-Date.now();return Number.isFinite(o)?Math.max(0,o):void 0}catch{return}}function Zk(r){return Number.isFinite(F0(r))}function Y0(){return{name:"throttlingRetryStrategy",retry({response:r}){const n=F0(r);return Number.isFinite(n)?{retryAfterInMs:n}:{skipStrategy:!0}}}}const ej=1e3,tj=1e3*64;function jf(r={}){const n=r.retryDelayInMs??ej,i=r.maxRetryDelayInMs??tj;return{name:"exponentialRetryStrategy",retry({retryCount:o,response:l,responseError:u}){const f=rj(u),p=f&&r.ignoreSystemErrors,m=nj(l),g=m&&r.ignoreHttpStatusCodes;return l&&(Zk(l)||!m)||g||p?{skipStrategy:!0}:u&&!f&&!m?{errorToThrow:u}:c0(o,{retryDelayInMs:n,maxRetryDelayInMs:i})}}}function nj(r){return!!(r&&r.status!==void 0&&(r.status>=500||r.status===408)&&r.status!==501&&r.status!==505)}function rj(r){return r?r.code==="ETIMEDOUT"||r.code==="ESOCKETTIMEDOUT"||r.code==="ECONNREFUSED"||r.code==="ECONNRESET"||r.code==="ENOENT"||r.code==="ENOTFOUND":!1}const ij=j0("ts-http-runtime retryPolicy"),sj="retryPolicy";function Vo(r,n={maxRetries:bs}){const i=n.logger||ij;return{name:sj,async sendRequest(o,l){let u,f,p=-1;e:for(;;){p+=1,u=void 0,f=void 0;try{i.info(`Retry ${p}: Attempting to send request`,o.requestId),u=await l(o),i.info(`Retry ${p}: Received a response from request`,o.requestId)}catch(m){if(i.error(`Retry ${p}: Received an error from request`,o.requestId),f=m,!m||f.name!=="RestError")throw m;u=f.response}if(o.abortSignal?.aborted)throw i.error(`Retry ${p}: Request aborted.`),new Ef;if(p>=(n.maxRetries??bs)){if(i.info(`Retry ${p}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),f)throw f;if(u)return u;throw new Error("Maximum retries reached with no response or error to throw")}i.info(`Retry ${p}: Processing ${r.length} retry strategies.`);t:for(const m of r){const g=m.logger||i;g.info(`Retry ${p}: Processing retry strategy ${m.name}.`);const y=m.retry({retryCount:p,response:u,responseError:f});if(y.skipStrategy){g.info(`Retry ${p}: Skipped.`);continue t}const{errorToThrow:E,retryAfterInMs:I,redirectTo:F}=y;if(E)throw g.error(`Retry ${p}: Retry strategy ${m.name} throws error:`,E),E;if(I||I===0){g.info(`Retry ${p}: Retry strategy ${m.name} retries after ${I}`),await Kk(I,void 0,{abortSignal:o.abortSignal});continue e}if(F){g.info(`Retry ${p}: Retry strategy ${m.name} redirects to ${F}`),o.url=F;continue e}}if(f)throw i.info("None of the retry strategies could work with the received error. Throwing it."),f;if(u)return i.info("None of the retry strategies could work with the received response. Returning it."),u}}}}const oj="defaultRetryPolicy";function X0(r={}){return{name:oj,sendRequest:Vo([Y0(),jf(r)],{maxRetries:r.maxRetries??bs}).sendRequest}}const J0="formDataPolicy";function aj(r){const n={};for(const[i,o]of r.entries())n[i]??=[],n[i].push(o);return n}function K0(){return{name:J0,async sendRequest(r,n){if(Zr&&typeof FormData<"u"&&r.body instanceof FormData&&(r.formData=aj(r.body),r.body=void 0),r.formData){const i=r.headers.get("Content-Type");i&&i.indexOf("application/x-www-form-urlencoded")!==-1?r.body=lj(r.formData):await cj(r.formData,r),r.formData=void 0}return n(r)}}}function lj(r){const n=new URLSearchParams;for(const[i,o]of Object.entries(r))if(Array.isArray(o))for(const l of o)n.append(i,l.toString());else n.append(i,o.toString());return n.toString()}async function cj(r,n){const i=n.headers.get("Content-Type");if(i&&!i.startsWith("multipart/form-data"))return;n.headers.set("Content-Type",i??"multipart/form-data");const o=[];for(const[l,u]of Object.entries(r))for(const f of Array.isArray(u)?u:[u])if(typeof f=="string")o.push({headers:Ei({"Content-Disposition":`form-data; name="${l}"`}),body:mn(f,"utf-8")});else{if(f==null||typeof f!="object")throw new Error(`Unexpected value for key ${l}: ${f}. Value should be serialized to string first.`);{const p=f.name||"blob",m=Ei();m.set("Content-Disposition",`form-data; name="${l}"; filename="${p}"`),m.set("Content-Type",f.type||"application/octet-stream"),o.push({headers:m,body:f})}}n.multipartBody={parts:o}}const uj="proxyPolicy",W0="proxyPolicy is not supported in browser environment";function dj(){throw new Error(W0)}function Q0(){throw new Error(W0)}const Z0="agentPolicy";function eb(r){return{name:Z0,sendRequest:async(n,i)=>(n.agent||(n.agent=r),i(n))}}const tb="tlsPolicy";function nb(r){return{name:tb,sendRequest:async(n,i)=>(n.tlsSettings||(n.tlsSettings=r),i(n))}}function fj(r){return new Response(r).blob()}async function hj(r){if(r instanceof Blob||r instanceof Uint8Array)return r;if(Yl(r))return fj(r);throw new Error("Unsupported source type. Only Blob, Uint8Array, and ReadableStream are supported in browser.")}function pj(r){return"resize"in r.buffer?r:r.map(n=>n)}async function mj(r){const n=[];for(const i of r){const o=await hj(typeof i=="function"?i():i);o instanceof Blob?n.push(o):n.push(new Blob([pj(o)]))}return new Blob(n)}function gj(){return`----AzSDKFormBoundary${xf()}`}function yj(r){let n="";for(const[i,o]of r)n+=`${i}: ${o}\r
`;return n}function vj(r){return r instanceof Uint8Array?r.byteLength:Rk(r)?r.size===-1?void 0:r.size:void 0}function bj(r){let n=0;for(const i of r){const o=vj(i);if(o===void 0)return;n+=o}return n}async function Sj(r,n,i){const o=[mn(`--${i}`,"utf-8"),...n.flatMap(u=>[mn(`\r
`,"utf-8"),mn(yj(u.headers),"utf-8"),mn(`\r
`,"utf-8"),u.body,mn(`\r
--${i}`,"utf-8")]),mn(`--\r
\r
`,"utf-8")],l=bj(o);l&&r.headers.set("Content-Length",l),r.body=await mj(o)}const Nf="multipartPolicy",wj=70,xj=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function Tj(r){if(r.length>wj)throw new Error(`Multipart boundary "${r}" exceeds maximum length of 70 characters`);if(Array.from(r).some(n=>!xj.has(n)))throw new Error(`Multipart boundary "${r}" contains invalid characters`)}function rb(){return{name:Nf,async sendRequest(r,n){if(!r.multipartBody)return n(r);if(r.body)throw new Error("multipartBody and regular body cannot be set at the same time");let i=r.multipartBody.boundary;const o=r.headers.get("Content-Type")??"multipart/mixed",l=o.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!l)throw new Error(`Got multipart request body, but content-type header was not multipart: ${o}`);const[,u,f]=l;if(f&&i&&f!==i)throw new Error(`Multipart boundary was specified as ${f} in the header, but got ${i} in the request body`);return i??=f,i?Tj(i):i=gj(),r.headers.set("Content-Type",`${u}; boundary=${i}`),await Sj(r,r.multipartBody.parts,i),r.multipartBody=void 0,n(r)}}}function Cj(r){const n=A0();return Zr&&(r.agent&&n.addPolicy(eb(r.agent)),r.tlsOptions&&n.addPolicy(nb(r.tlsOptions)),n.addPolicy(Q0(r.proxyOptions)),n.addPolicy(G0())),n.addPolicy(K0(),{beforePolicies:[Nf]}),n.addPolicy(Yk(r.userAgentOptions)),n.addPolicy(rb(),{afterPhase:"Deserialize"}),n.addPolicy(X0(r.retryOptions),{phase:"Retry"}),Zr&&n.addPolicy($0(r.redirectOptions),{afterPhase:"Retry"}),n.addPolicy(H0(r.loggingOptions),{afterPhase:"Sign"}),n}const Rj="ApiVersionPolicy";function Ej(r){return{name:Rj,sendRequest:(n,i)=>{const o=new URL(n.url);return!o.searchParams.get("api-version")&&r.apiVersion&&(n.url=`${n.url}${Array.from(o.searchParams.keys()).length>0?"&":"?"}api-version=${r.apiVersion}`),i(n)}}}function _j(r){return"getOAuth2Token"in r}function kj(r){return"getBearerToken"in r}function jj(r){return"username"in r&&"password"in r}function Nj(r){return"key"in r}let Hy=!1;function Aj(r,n){if(n.allowInsecureConnection&&r.allowInsecureConnection){const i=new URL(r.url);if(i.hostname==="localhost"||i.hostname==="127.0.0.1")return!0}return!1}function Oj(){const r="Sending token over insecure transport. Assume any token issued is compromised.";L0.warning(r),typeof process?.emitWarning=="function"&&!Hy&&(Hy=!0,process.emitWarning(r))}function Xl(r,n){if(!r.url.toLowerCase().startsWith("https://"))if(Aj(r,n))Oj();else throw new Error("Authentication is not permitted for non-TLS protected (non-https) URLs when allowInsecureConnection is false.")}const Mj="apiKeyAuthenticationPolicy";function Uj(r){return{name:Mj,async sendRequest(n,i){Xl(n,r);const o=(n.authSchemes??r.authSchemes)?.find(l=>l.kind==="apiKey");if(!o)return i(n);if(o.apiKeyLocation!=="header")throw new Error(`Unsupported API key location: ${o.apiKeyLocation}`);return n.headers.set(o.name,r.credential.key),i(n)}}}const Dj="bearerAuthenticationPolicy";function Pj(r){return{name:Dj,async sendRequest(n,i){if(Xl(n,r),!(n.authSchemes??r.authSchemes)?.find(p=>p.kind==="http"&&p.scheme==="basic"))return i(n);const{username:l,password:u}=r.credential,f=Fl(mn(`${l}:${u}`,"utf-8"),"base64");return n.headers.set("Authorization",`Basic ${f}`),i(n)}}}const Ij="bearerAuthenticationPolicy";function zj(r){return{name:Ij,async sendRequest(n,i){if(Xl(n,r),!(n.authSchemes??r.authSchemes)?.find(u=>u.kind==="http"&&u.scheme==="bearer"))return i(n);const l=await r.credential.getBearerToken({abortSignal:n.abortSignal});return n.headers.set("Authorization",`Bearer ${l}`),i(n)}}}const Lj="oauth2AuthenticationPolicy";function Bj(r){return{name:Lj,async sendRequest(n,i){Xl(n,r);const o=(n.authSchemes??r.authSchemes)?.find(u=>u.kind==="oauth2");if(!o)return i(n);const l=await r.credential.getOAuth2Token(o.flows,{abortSignal:n.abortSignal});return n.headers.set("Authorization",`Bearer ${l}`),i(n)}}}let Md;function Hj(r={}){const n=Cj(r);n.addPolicy(Ej(r));const{credential:i,authSchemes:o,allowInsecureConnection:l}=r;return i&&(Nj(i)?n.addPolicy(Uj({authSchemes:o,credential:i,allowInsecureConnection:l})):jj(i)?n.addPolicy(Pj({authSchemes:o,credential:i,allowInsecureConnection:l})):kj(i)?n.addPolicy(zj({authSchemes:o,credential:i,allowInsecureConnection:l})):_j(i)&&n.addPolicy(Bj({authSchemes:o,credential:i,allowInsecureConnection:l}))),n}function qj(){return Md||(Md=z0()),Md}function ib(r,n){if(r.headers){const i=Object.keys(r.headers).find(o=>o.toLowerCase()===n.toLowerCase());if(i)return r.headers[i]}}function $j(r){const n=ib(r,"content-type");if(n)return n;if(r.contentType===null)return;if(r.contentType)return r.contentType;const{body:i}=r;if(i!=null)return typeof i=="string"||typeof i=="number"||typeof i=="boolean"?"text/plain; charset=UTF-8":i instanceof Blob?i.type||"application/octet-stream":D0(i)?"application/octet-stream":"application/json"}function qy(r){return JSON.stringify(r)}function Vj(r){const n=ib(r,"content-disposition");if(n)return n;if(r.dispositionType===void 0&&r.name===void 0&&r.filename===void 0)return;let o=r.dispositionType??"form-data";r.name&&(o+=`; name=${qy(r.name)}`);let l;if(r.filename)l=r.filename;else if(typeof File<"u"&&r.body instanceof File){const u=r.body.name;u!==""&&(l=u)}return l&&(o+=`; filename=${qy(l)}`),o}function Gj(r,n){if(r===void 0)return new Uint8Array([]);if(D0(r))return r;if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return mn(String(r),"utf-8");if(n&&/application\/(.+\+)?json(;.+)?/i.test(String(n)))return mn(JSON.stringify(r),"utf-8");throw new _i(`Unsupported body/content-type combination: ${r}, ${n}`)}function Fj(r){const n=$j(r),i=Vj(r),o=Ei(r.headers??{});n&&o.set("content-type",n),i&&o.set("content-disposition",i);const l=Gj(r.body,n);return{headers:o,body:l}}function Yj(r){return{parts:r.map(Fj)}}async function Ud(r,n,i,o={},l){const u=l??qj(),f=Kj(r,n,o);try{const p=await i.sendRequest(u,f),m=p.headers.toJSON(),g=p.readableStreamBody??p.browserStreamBody,y=o.responseAsStream||g!==void 0?void 0:Qj(p),E=g??y;return o?.onResponse&&o.onResponse({...p,request:f,rawHeaders:m,parsedBody:y}),{request:f,headers:m,status:`${p.status}`,body:E}}catch(p){if(M0(p)&&p.response&&o.onResponse){const{response:m}=p,g=m.headers.toJSON();o?.onResponse({...m,request:f,rawHeaders:g},p)}throw p}}function Xj(r={}){return r.contentType??r.headers?.["content-type"]??Jj(r.body)}function Jj(r){if(ArrayBuffer.isView(r))return"application/octet-stream";if(typeof r=="string")try{return JSON.parse(r),"application/json"}catch{return}return"application/json"}function Kj(r,n,i={}){const o=Xj(i),{body:l,multipartBody:u}=Wj(i.body,o),f=l!==void 0||u!==void 0,p=Ei({...i.headers?i.headers:{},accept:i.accept??i.headers?.accept??"application/json",...f&&o&&{"content-type":o}});return N0({url:n,method:r,body:l,multipartBody:u,headers:p,allowInsecureConnection:i.allowInsecureConnection,abortSignal:i.abortSignal,onUploadProgress:i.onUploadProgress,onDownloadProgress:i.onDownloadProgress,timeout:i.timeout,enableBrowserStreams:!0,streamResponseStatusCodes:i.responseAsStream?new Set([Number.POSITIVE_INFINITY]):void 0})}function Wj(r,n=""){if(r===void 0)return{body:void 0};if(typeof FormData<"u"&&r instanceof FormData)return{body:r};if(P0(r))return{body:r};if(ArrayBuffer.isView(r))return{body:r instanceof Uint8Array?r:JSON.stringify(r)};switch(n.split(";")[0]){case"application/json":return{body:JSON.stringify(r)};case"multipart/form-data":return Array.isArray(r)?{multipartBody:Yj(r)}:{body:JSON.stringify(r)};case"text/plain":return{body:String(r)};default:return typeof r=="string"?{body:r}:{body:JSON.stringify(r)}}}function Qj(r){const i=(r.headers.get("content-type")??"").split(";")[0],o=r.bodyAsText??"";if(i==="text/plain")return String(o);try{return o?JSON.parse(o):void 0}catch(l){if(i==="application/json")throw Zj(r,l);return String(o)}}function Zj(r,n){const i=`Error "${n}" occurred while parsing the response body - ${r.bodyAsText}.`,o=n.code??_i.PARSE_ERROR;return new _i(i,{code:o,statusCode:r.status,request:r.request,response:r})}function eN(r){const n=r.value;return n!==void 0&&n.toString!==void 0&&typeof n.toString=="function"}function tN(r,n,i,o={}){if(n.startsWith("https://")||n.startsWith("http://"))return n;r=rN(r,o),n=iN(n,i,o);const l=nN(`${r}/${n}`,o);return new URL(l).toString().replace(/([^:]\/)\/+/g,"$1")}function Dd(r,n,i,o){let l;i==="pipeDelimited"?l="|":i==="spaceDelimited"?l="%20":l=",";let u;Array.isArray(o)?u=o:typeof o=="object"&&o.toString===Object.prototype.toString?u=Object.entries(o).flat():u=[o];const f=u.map(p=>{if(p==null)return"";if(!p.toString||typeof p.toString!="function")throw new Error(`Query parameters must be able to be represented as string, ${r} can't`);const m=p.toISOString!==void 0?p.toISOString():p.toString();return n?m:encodeURIComponent(m)}).join(l);return`${n?r:encodeURIComponent(r)}=${f}`}function nN(r,n={}){if(!n.queryParameters)return r;const i=new URL(r),o=n.queryParameters,l=[];for(const u of Object.keys(o)){const f=o[u];if(f==null)continue;const p=eN(f),m=p?f.value:f,g=p?f.explode??!1:!1,y=p&&f.style?f.style:"form";if(g)if(Array.isArray(m))for(const E of m)l.push(Dd(u,n.skipUrlEncoding??!1,y,E));else if(typeof m=="object")for(const[E,I]of Object.entries(m))l.push(Dd(E,n.skipUrlEncoding??!1,y,I));else throw new Error("explode can only be set to true for objects and arrays");else l.push(Dd(u,n.skipUrlEncoding??!1,y,m))}return i.search!==""&&(i.search+="&"),i.search+=l.join("&"),i.toString()}function rN(r,n){if(!n.pathParameters)return r;const i=n.pathParameters;for(const[o,l]of Object.entries(i)){if(l==null)throw new Error(`Path parameters ${o} must not be undefined or null`);if(!l.toString||typeof l.toString!="function")throw new Error(`Path parameters must be able to be represented as string, ${o} can't`);let u=l.toISOString!==void 0?l.toISOString():String(l);n.skipUrlEncoding||(u=encodeURIComponent(l)),r=sN(r,`{${o}}`,u)??""}return r}function iN(r,n,i={}){for(const o of n){const l=typeof o=="object"&&(o.allowReserved??!1);let u=typeof o=="object"?o.value:o;!i.skipUrlEncoding&&!l&&(u=encodeURIComponent(u)),r=r.replace(/\{[\w-]+\}/,String(u))}return r}function sN(r,n,i){return!r||!n?r:r.split(n).join(i||"")}function oN(r,n={}){const i=n.pipeline??Hj(n);if(n.additionalPolicies?.length)for(const{policy:p,position:m}of n.additionalPolicies){const g=m==="perRetry"?"Sign":void 0;i.addPolicy(p,{afterPhase:g})}const{allowInsecureConnection:o,httpClient:l}=n,u=n.endpoint??r,f=(p,...m)=>{const g=y=>tN(u,p,m,{...y});return{get:(y={})=>Gr("GET",g(y),i,y,o,l),post:(y={})=>Gr("POST",g(y),i,y,o,l),put:(y={})=>Gr("PUT",g(y),i,y,o,l),patch:(y={})=>Gr("PATCH",g(y),i,y,o,l),delete:(y={})=>Gr("DELETE",g(y),i,y,o,l),head:(y={})=>Gr("HEAD",g(y),i,y,o,l),options:(y={})=>Gr("OPTIONS",g(y),i,y,o,l),trace:(y={})=>Gr("TRACE",g(y),i,y,o,l)}};return{path:f,pathUnchecked:f,pipeline:i}}function Gr(r,n,i,o,l,u){return l=o.allowInsecureConnection??l,{then:function(f,p){return Ud(r,n,i,{...o,allowInsecureConnection:l},u).then(f,p)},async asBrowserStream(){if(Zr)throw new Error("`asBrowserStream` is supported only in the browser environment. Use `asNodeStream` instead to obtain the response body stream. If you require a Web stream of the response in Node, consider using `Readable.toWeb` on the result of `asNodeStream`.");return Ud(r,n,i,{...o,allowInsecureConnection:l,responseAsStream:!0},u)},async asNodeStream(){if(Zr)return Ud(r,n,i,{...o,allowInsecureConnection:l,responseAsStream:!0},u);throw new Error("`isNodeStream` is not supported in the browser environment. Use `asBrowserStream` to obtain the response body stream.")}}}function sb(){return A0()}const aN=k0({logLevelEnvVarName:"AZURE_LOG_LEVEL",namespace:"azure"});function Jl(r){return aN.createClientLogger(r)}const ki=Jl("core-rest-pipeline"),lN="exponentialRetryPolicy";function cN(r={}){return Vo([jf({...r,ignoreSystemErrors:!0})],{maxRetries:r.maxRetries??bs})}const ob="systemErrorRetryPolicy";function uN(r={}){return{name:ob,sendRequest:Vo([jf({...r,ignoreHttpStatusCodes:!0})],{maxRetries:r.maxRetries??bs}).sendRequest}}const ab="throttlingRetryPolicy";function dN(r={}){return{name:ab,sendRequest:Vo([Y0()],{maxRetries:r.maxRetries??bs}).sendRequest}}const fN=B0;function lb(r={}){return H0({logger:ki.info,...r})}const hN=q0;function cb(r={}){return $0(r)}function pN(){return"x-ms-useragent"}function mN(r){const n=[{name:"Firefox",regex:/Firefox\/([\d.]+)/},{name:"Safari",regex:/Version\/([\d.]+).*Safari/}];for(const i of n){const o=r.match(i.regex);if(o)return{brand:i.name,version:o[1]}}}function gN(r){const n=["Google Chrome","Microsoft Edge","Opera","Brave","Chromium"];for(const i of n){const o=r.find(l=>l.brand===i);if(o)return o}}async function yN(r){const n=globalThis.navigator;let i="unknown";if(n?.userAgentData){const o=await n.userAgentData.getHighEntropyValues(["architecture","platformVersion"]);i=`${o.platform} ${o.platformVersion}; ${o.architecture}`;const l=gN(n.userAgentData.brands);l&&r.set(l.brand,`${l.version} (${i})`)}else if(n?.platform){i=n.platform;const o=mN(n.userAgent);o&&r.set(o.brand,`${o.version} (${i})`)}else typeof globalThis.EdgeRuntime=="string"&&r.set("EdgeRuntime",`${globalThis.EdgeRuntime} (${i})`)}const ub="1.22.2",vN=3;function bN(r){const n=[];for(const[i,o]of r){const l=o?`${i}/${o}`:i;n.push(l)}return n.join(" ")}function SN(){return pN()}async function db(r){const n=new Map;n.set("core-rest-pipeline",ub),await yN(n);const i=bN(n);return r?`${r} ${i}`:i}const $y=SN(),fb="userAgentPolicy";function hb(r={}){const n=db(r.userAgentPrefix);return{name:fb,async sendRequest(i,o){return i.headers.has($y)||i.headers.set($y,await n),o(i)}}}function wN(r){return!!(r&&typeof r.pipe=="function")}const pb={arrayBuffer:()=>{throw new Error("Not implemented")},bytes:()=>{throw new Error("Not implemented")},slice:()=>{throw new Error("Not implemented")},text:()=>{throw new Error("Not implemented")}},Kl=Symbol("rawContent");function mb(r){return typeof r[Kl]=="function"}function xN(r){return mb(r)?r[Kl]():r}function TN(r,n,i={}){return{...pb,type:i.type??"",lastModified:i.lastModified??new Date().getTime(),webkitRelativePath:i.webkitRelativePath??"",size:i.size??-1,name:n,stream:()=>{const o=r();if(wN(o))throw new Error("Not supported: a Node stream was provided as input to createFileFromStream.");return o},[Kl]:r}}function CN(r,n,i={}){return kl?{...pb,type:i.type??"",lastModified:i.lastModified??new Date().getTime(),webkitRelativePath:i.webkitRelativePath??"",size:r.byteLength,name:n,arrayBuffer:async()=>r.buffer,stream:()=>new Blob([Vy(r)]).stream(),[Kl]:()=>r}:new File([Vy(r)],n,i)}function Vy(r){return"resize"in r.buffer?r:r.map(n=>n)}const Af=Nf;function gb(){const r=rb();return{name:Af,sendRequest:async(n,i)=>{if(n.multipartBody)for(const o of n.multipartBody.parts)mb(o.body)&&(o.body=xN(o.body));return r.sendRequest(n,i)}}}const RN=Xk;function yb(){return G0()}function vb(r={}){return X0(r)}const EN=J0;function bb(){return K0()}const _N=uj;function kN(r){return dj()}function Sb(r,n){return Q0()}const wb="setClientRequestIdPolicy";function xb(r="x-ms-client-request-id"){return{name:wb,async sendRequest(n,i){return n.headers.has(r)||n.headers.set(r,n.requestId),i(n)}}}const jN=Z0;function Tb(r){return eb(r)}const NN=tb;function Cb(r){return nb(r)}const jo={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function AN(r={}){let n=new No(r.parentContext);return r.span&&(n=n.setValue(jo.span,r.span)),r.namespace&&(n=n.setValue(jo.namespace,r.namespace)),n}class No{_contextMap;constructor(n){this._contextMap=n instanceof No?new Map(n._contextMap):new Map}setValue(n,i){const o=new No(this);return o._contextMap.set(n,i),o}getValue(n){return this._contextMap.get(n)}deleteValue(n){const i=new No(this);return i._contextMap.delete(n),i}}const Pd={instrumenterImplementation:void 0};function ON(){return{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{},addEvent:()=>{}}}function MN(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(r,n)=>({span:ON(),tracingContext:AN({parentContext:n.tracingContext})}),withContext(r,n,...i){return n(...i)}}}function fl(){return Pd.instrumenterImplementation||(Pd.instrumenterImplementation=MN()),Pd.instrumenterImplementation}function Rb(r){const{namespace:n,packageName:i,packageVersion:o}=r;function l(g,y,E){const I=fl().startSpan(g,{...E,packageName:i,packageVersion:o,tracingContext:y?.tracingOptions?.tracingContext});let F=I.tracingContext;const A=I.span;F.getValue(jo.namespace)||(F=F.setValue(jo.namespace,n)),A.setAttribute("az.namespace",F.getValue(jo.namespace));const H=Object.assign({},y,{tracingOptions:{...y?.tracingOptions,tracingContext:F}});return{span:A,updatedOptions:H}}async function u(g,y,E,I){const{span:F,updatedOptions:A}=l(g,y,I);try{const H=await f(A.tracingOptions.tracingContext,()=>Promise.resolve(E(A,F)));return F.setStatus({status:"success"}),H}catch(H){throw F.setStatus({status:"error",error:H}),H}finally{F.end()}}function f(g,y,...E){return fl().withContext(g,y,...E)}function p(g){return fl().parseTraceparentHeader(g)}function m(g){return fl().createRequestHeaders(g)}return{startSpan:l,withSpan:u,withContext:f,parseTraceparentHeader:p,createRequestHeaders:m}}const Po=_i;function Of(r){return M0(r)}const Eb="tracingPolicy";function _b(r={}){const n=db(r.userAgentPrefix),i=new Tf({additionalAllowedQueryParameters:r.additionalAllowedQueryParameters}),o=UN();return{name:Eb,async sendRequest(l,u){if(!o)return u(l);const f=await n,p={"http.url":i.sanitizeUrl(l.url),"http.method":l.method,"http.user_agent":f,requestId:l.requestId};f&&(p["http.user_agent"]=f);const{span:m,tracingContext:g}=DN(o,l,p)??{};if(!m||!g)return u(l);try{const y=await o.withContext(g,u,l);return IN(m,y),y}catch(y){throw PN(m,y),y}}}}function UN(){try{return Rb({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:ub})}catch(r){ki.warning(`Error when creating the TracingClient: ${$o(r)}`);return}}function DN(r,n,i){try{const{span:o,updatedOptions:l}=r.startSpan(`HTTP ${n.method}`,{tracingOptions:n.tracingOptions},{spanKind:"client",spanAttributes:i});if(!o.isRecording()){o.end();return}const u=r.createRequestHeaders(l.tracingOptions.tracingContext);for(const[f,p]of Object.entries(u))n.headers.set(f,p);return{span:o,tracingContext:l.tracingOptions.tracingContext}}catch(o){ki.warning(`Skipping creating a tracing span due to an error: ${$o(o)}`);return}}function PN(r,n){try{r.setStatus({status:"error",error:v0(n)?n:void 0}),Of(n)&&n.statusCode&&r.setAttribute("http.status_code",n.statusCode),r.end()}catch(i){ki.warning(`Skipping tracing span processing due to an error: ${$o(i)}`)}}function IN(r,n){try{r.setAttribute("http.status_code",n.status);const i=n.headers.get("x-ms-request-id");i&&r.setAttribute("serviceRequestId",i),n.status>=400&&r.setStatus({status:"error"}),r.end()}catch(i){ki.warning(`Skipping tracing span processing due to an error: ${$o(i)}`)}}function kb(r){if(r instanceof AbortSignal)return{abortSignal:r};if(r.aborted)return{abortSignal:AbortSignal.abort(r.reason)};const n=new AbortController;let i=!0;function o(){i&&(r.removeEventListener("abort",l),i=!1)}function l(){n.abort(r.reason),o()}return r.addEventListener("abort",l),{abortSignal:n.signal,cleanup:o}}const zN="wrapAbortSignalLikePolicy";function LN(){return{name:zN,sendRequest:async(r,n)=>{if(!r.abortSignal)return n(r);const{abortSignal:i,cleanup:o}=kb(r.abortSignal);r.abortSignal=i;try{return await n(r)}finally{o?.()}}}}function Mf(r){const n=sb();return kl&&(r.agent&&n.addPolicy(Tb(r.agent)),r.tlsOptions&&n.addPolicy(Cb(r.tlsOptions)),n.addPolicy(Sb(r.proxyOptions)),n.addPolicy(yb())),n.addPolicy(LN()),n.addPolicy(bb(),{beforePolicies:[Af]}),n.addPolicy(hb(r.userAgentOptions)),n.addPolicy(xb(r.telemetryOptions?.clientRequestIdHeaderName)),n.addPolicy(gb(),{afterPhase:"Deserialize"}),n.addPolicy(vb(r.retryOptions),{phase:"Retry"}),n.addPolicy(_b({...r.userAgentOptions,...r.loggingOptions}),{afterPhase:"Retry"}),kl&&n.addPolicy(cb(r.redirectOptions),{afterPhase:"Retry"}),n.addPolicy(lb(r.loggingOptions),{afterPhase:"Sign"}),n}function Uf(){const r=z0();return{async sendRequest(n){const{abortSignal:i,cleanup:o}=n.abortSignal?kb(n.abortSignal):{};try{return n.abortSignal=i,await r.sendRequest(n)}finally{o?.()}}}}function jb(r){return Ei(r)}function Df(r){return N0(r)}const BN=lN;function HN(r={}){return cN(r)}const qN=ob;function $N(r={}){return uN(r)}const VN=ab;function GN(r={}){return dN(r)}const FN=Jl("core-rest-pipeline retryPolicy");function YN(r,n={maxRetries:vN}){return Vo(r,{logger:FN,...n})}const XN={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function JN(r,n,i){async function o(){if(Date.now()<i)try{return await r()}catch{return null}else{const u=await r();if(u===null)throw new Error("Failed to refresh access token.");return u}}let l=await o();for(;l===null;)await g0(n),l=await o();return l}function Nb(r,n){let i=null,o=null,l;const u={...XN,...n},f={get isRefreshing(){return i!==null},get shouldRefresh(){return f.isRefreshing?!1:o?.refreshAfterTimestamp&&o.refreshAfterTimestamp<Date.now()?!0:(o?.expiresOnTimestamp??0)-u.refreshWindowInMs<Date.now()},get mustRefresh(){return o===null||o.expiresOnTimestamp-u.forcedRefreshWindowInMs<Date.now()}};function p(m,g){return f.isRefreshing||(i=JN(()=>r.getToken(m,g),u.retryIntervalInMs,o?.expiresOnTimestamp??Date.now()).then(E=>(i=null,o=E,l=g.tenantId,o)).catch(E=>{throw i=null,o=null,l=void 0,E})),i}return async(m,g)=>{const y=!!g.claims,E=l!==g.tenantId;return y&&(o=null),E||y||f.mustRefresh?p(m,g):(f.shouldRefresh&&p(m,g),o)}}const Ab="bearerTokenAuthenticationPolicy";async function hl(r,n){try{return[await n(r),void 0]}catch(i){if(Of(i)&&i.response)return[i.response,i];throw i}}async function KN(r){const{scopes:n,getAccessToken:i,request:o}=r,l={abortSignal:o.abortSignal,tracingOptions:o.tracingOptions,enableCae:!0},u=await i(n,l);u&&r.request.headers.set("Authorization",`Bearer ${u.token}`)}function Gy(r){return r.status===401&&r.headers.has("WWW-Authenticate")}async function Fy(r,n){const{scopes:i}=r,o=await r.getAccessToken(i,{enableCae:!0,claims:n});return o?(r.request.headers.set("Authorization",`${o.tokenType??"Bearer"} ${o.token}`),!0):!1}function Wl(r){const{credential:n,scopes:i,challengeCallbacks:o}=r,l=r.logger||ki,u={authorizeRequest:o?.authorizeRequest?.bind(o)??KN,authorizeRequestOnChallenge:o?.authorizeRequestOnChallenge?.bind(o)},f=n?Nb(n):()=>Promise.resolve(null);return{name:Ab,async sendRequest(p,m){if(!p.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await u.authorizeRequest({scopes:Array.isArray(i)?i:[i],request:p,getAccessToken:f,logger:l});let g,y,E;if([g,y]=await hl(p,m),Gy(g)){let I=Yy(g.headers.get("WWW-Authenticate"));if(I){let F;try{F=atob(I)}catch{return l.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${I}`),g}E=await Fy({scopes:Array.isArray(i)?i:[i],response:g,request:p,getAccessToken:f,logger:l},F),E&&([g,y]=await hl(p,m))}else if(u.authorizeRequestOnChallenge&&(E=await u.authorizeRequestOnChallenge({scopes:Array.isArray(i)?i:[i],request:p,response:g,getAccessToken:f,logger:l}),E&&([g,y]=await hl(p,m)),Gy(g)&&(I=Yy(g.headers.get("WWW-Authenticate")),I))){let F;try{F=atob(I)}catch{return l.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${I}`),g}E=await Fy({scopes:Array.isArray(i)?i:[i],response:g,request:p,getAccessToken:f,logger:l},F),E&&([g,y]=await hl(p,m))}}if(y)throw y;return g}}}function WN(r){const n=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,i=/(\w+)="([^"]*)"/g,o=[];let l;for(;(l=n.exec(r))!==null;){const u=l[1],f=l[2],p={};let m;for(;(m=i.exec(f))!==null;)p[m[1]]=m[2];o.push({scheme:u,params:p})}return o}function Yy(r){return r?WN(r).find(i=>i.scheme==="Bearer"&&i.params.claims&&i.params.error==="insufficient_claims")?.params.claims:void 0}const Ob="ndJsonPolicy";function QN(){return{name:Ob,async sendRequest(r,n){if(typeof r.body=="string"&&r.body.startsWith("[")){const i=JSON.parse(r.body);Array.isArray(i)&&(r.body=i.map(o=>JSON.stringify(o)+`
`).join(""))}return n(r)}}}const Wd="auxiliaryAuthenticationHeaderPolicy",Xy="x-ms-authorization-auxiliary";async function ZN(r){const{scopes:n,getAccessToken:i,request:o}=r,l={abortSignal:o.abortSignal,tracingOptions:o.tracingOptions};return(await i(n,l))?.token??""}function eA(r){const{credentials:n,scopes:i}=r,o=r.logger||ki,l=new WeakMap;return{name:Wd,async sendRequest(u,f){if(!u.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication for auxiliary header is not permitted for non-TLS protected (non-https) URLs.");if(!n||n.length===0)return o.info(`${Wd} header will not be set due to empty credentials.`),f(u);const p=[];for(const g of n){let y=l.get(g);y||(y=Nb(g),l.set(g,y)),p.push(ZN({scopes:Array.isArray(i)?i:[i],request:u,getAccessToken:y}))}const m=(await Promise.all(p)).filter(g=>!!g);return m.length===0?(o.warning(`None of the auxiliary tokens are valid. ${Xy} header will not be set.`),f(u)):(u.headers.set(Xy,m.map(g=>`Bearer ${g}`).join(", ")),f(u))}}}const tA=Object.freeze(Object.defineProperty({__proto__:null,RestError:Po,agentPolicy:Tb,agentPolicyName:jN,auxiliaryAuthenticationHeaderPolicy:eA,auxiliaryAuthenticationHeaderPolicyName:Wd,bearerTokenAuthenticationPolicy:Wl,bearerTokenAuthenticationPolicyName:Ab,createDefaultHttpClient:Uf,createEmptyPipeline:sb,createFile:CN,createFileFromStream:TN,createHttpHeaders:jb,createPipelineFromOptions:Mf,createPipelineRequest:Df,decompressResponsePolicy:yb,decompressResponsePolicyName:RN,defaultRetryPolicy:vb,exponentialRetryPolicy:HN,exponentialRetryPolicyName:BN,formDataPolicy:bb,formDataPolicyName:EN,getDefaultProxySettings:kN,isRestError:Of,logPolicy:lb,logPolicyName:fN,multipartPolicy:gb,multipartPolicyName:Af,ndJsonPolicy:QN,ndJsonPolicyName:Ob,proxyPolicy:Sb,proxyPolicyName:_N,redirectPolicy:cb,redirectPolicyName:hN,retryPolicy:YN,setClientRequestIdPolicy:xb,setClientRequestIdPolicyName:wb,systemErrorRetryPolicy:$N,systemErrorRetryPolicyName:qN,throttlingRetryPolicy:GN,throttlingRetryPolicyName:VN,tlsPolicy:Cb,tlsPolicyName:NN,tracingPolicy:_b,tracingPolicyName:Eb,userAgentPolicy:hb,userAgentPolicyName:fb},Symbol.toStringTag,{value:"Module"})),Jy={operationRequestMap:new WeakMap};function Ss(r,n,i){let o=n.parameterPath;const l=n.mapper;let u;if(typeof o=="string"&&(o=[o]),Array.isArray(o)){if(o.length>0)if(l.isConstant)u=l.defaultValue;else{let f=Ky(r,o);!f.propertyFound&&i&&(f=Ky(i,o));let p=!1;f.propertyFound||(p=l.required||o[0]==="options"&&o.length===2),u=p?l.defaultValue:f.propertyValue}}else{l.required&&(u={});for(const f in o){const p=l.type.modelProperties[f],m=o[f],g=Ss(r,{parameterPath:m,mapper:p},i);g!==void 0&&(u||(u={}),u[f]=g)}}return u}function Ky(r,n){const i={propertyFound:!1};let o=0;for(;o<n.length;++o){const l=n[o];if(r&&l in r)r=r[l];else break}return o===n.length&&(i.propertyValue=r,i.propertyFound=!0),i}const Mb=Symbol.for("@azure/core-client original request");function nA(r){return Mb in r}function _s(r){if(nA(r))return _s(r[Mb]);let n=Jy.operationRequestMap.get(r);return n||(n={},Jy.operationRequestMap.set(r,n)),n}const rA=["application/json","text/json"],iA=["application/xml","application/atom+xml"],Ub="deserializationPolicy";function Db(r={}){const n=r.expectedContentTypes?.json??rA,i=r.expectedContentTypes?.xml??iA,o=r.parseXML,l=r.serializerOptions,u={xml:{rootName:l?.xml.rootName??"",includeRoot:l?.xml.includeRoot??!1,xmlCharKey:l?.xml.xmlCharKey??vs}};return{name:Ub,async sendRequest(f,p){const m=await p(f);return aA(n,i,m,u,o)}}}function sA(r){let n;const i=r.request,o=_s(i),l=o?.operationSpec;return l&&(o?.operationResponseGetter?n=o?.operationResponseGetter(l,r):n=l.responses[r.status]),n}function oA(r){const n=r.request,o=_s(n)?.shouldDeserialize;let l;return o===void 0?l=!0:typeof o=="boolean"?l=o:l=o(r),l}async function aA(r,n,i,o,l){const u=await uA(r,n,i,o,l);if(!oA(u))return u;const p=_s(u.request)?.operationSpec;if(!p||!p.responses)return u;const m=sA(u),{error:g,shouldReturnResponse:y}=cA(u,p,m,o);if(g)throw g;if(y)return u;if(m){if(m.bodyMapper){let E=u.parsedBody;p.isXML&&m.bodyMapper.type.name===Ti.Sequence&&(E=typeof E=="object"?E[m.bodyMapper.xmlElementName]:[]);try{u.parsedBody=p.serializer.deserialize(m.bodyMapper,E,"operationRes.parsedBody",o)}catch(I){throw new Po(`Error ${I} occurred in deserializing the responseBody - ${u.bodyAsText}`,{statusCode:u.status,request:u.request,response:u})}}else p.httpMethod==="HEAD"&&(u.parsedBody=i.status>=200&&i.status<300);m.headersMapper&&(u.parsedHeaders=p.serializer.deserialize(m.headersMapper,u.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return u}function lA(r){const n=Object.keys(r.responses);return n.length===0||n.length===1&&n[0]==="default"}function cA(r,n,i,o){const l=200<=r.status&&r.status<300;if(lA(n)?l:!!i)if(i){if(!i.isError)return{error:null,shouldReturnResponse:!1}}else return{error:null,shouldReturnResponse:!1};const f=i??n.responses.default,p=r.request.streamResponseStatusCodes?.has(r.status)?`Unexpected status code: ${r.status}`:r.bodyAsText,m=new Po(p,{statusCode:r.status,request:r.request,response:r});if(!f&&!(r.parsedBody?.error?.code&&r.parsedBody?.error?.message))throw m;const g=f?.bodyMapper,y=f?.headersMapper;try{if(r.parsedBody){const E=r.parsedBody;let I;if(g){let A=E;if(n.isXML&&g.type.name===Ti.Sequence){A=[];const H=g.xmlElementName;typeof E=="object"&&H&&(A=E[H])}I=n.serializer.deserialize(g,A,"error.response.parsedBody",o)}const F=E.error||I||E;m.code=F.code,F.message&&(m.message=F.message),g&&(m.response.parsedBody=I)}r.headers&&y&&(m.response.parsedHeaders=n.serializer.deserialize(y,r.headers.toJSON(),"operationRes.parsedHeaders"))}catch(E){m.message=`Error "${E.message}" occurred in deserializing the responseBody - "${r.bodyAsText}" for the default response.`}return{error:m,shouldReturnResponse:!1}}async function uA(r,n,i,o,l){if(!i.request.streamResponseStatusCodes?.has(i.status)&&i.bodyAsText){const u=i.bodyAsText,f=i.headers.get("Content-Type")||"",p=f?f.split(";").map(m=>m.toLowerCase()):[];try{if(p.length===0||p.some(m=>r.indexOf(m)!==-1))return i.parsedBody=JSON.parse(u),i;if(p.some(m=>n.indexOf(m)!==-1)){if(!l)throw new Error("Parsing XML not supported.");const m=await l(u,o.xml);return i.parsedBody=m,i}}catch(m){const g=`Error "${m}" occurred while parsing the response body - ${i.bodyAsText}.`,y=m.code||Po.PARSE_ERROR;throw new Po(g,{code:y,statusCode:i.status,request:i.request,response:i})}}return i}function dA(r){const n=new Set;for(const i in r.responses){const o=r.responses[i];o.bodyMapper&&o.bodyMapper.type.name===Ti.Stream&&n.add(Number(i))}return n}function Qr(r){const{parameterPath:n,mapper:i}=r;let o;return typeof n=="string"?o=n:Array.isArray(n)?o=n.join("."):o=i.serializedName,o}const Pb="serializationPolicy";function Ib(r={}){const n=r.stringifyXML;return{name:Pb,async sendRequest(i,o){const l=_s(i),u=l?.operationSpec,f=l?.operationArguments;return u&&f&&(fA(i,f,u),hA(i,f,u,n)),o(i)}}}function fA(r,n,i){if(i.headerParameters)for(const l of i.headerParameters){let u=Ss(n,l);if(u!=null||l.mapper.required){u=i.serializer.serialize(l.mapper,u,Qr(l));const f=l.mapper.headerCollectionPrefix;if(f)for(const p of Object.keys(u))r.headers.set(f+p,u[p]);else r.headers.set(l.mapper.serializedName||Qr(l),u)}}const o=n.options?.requestOptions?.customHeaders;if(o)for(const l of Object.keys(o))r.headers.set(l,o[l])}function hA(r,n,i,o=function(){throw new Error("XML serialization unsupported!")}){const l=n.options?.serializerOptions,u={xml:{rootName:l?.xml.rootName??"",includeRoot:l?.xml.includeRoot??!1,xmlCharKey:l?.xml.xmlCharKey??vs}},f=u.xml.xmlCharKey;if(i.requestBody&&i.requestBody.mapper){r.body=Ss(n,i.requestBody);const p=i.requestBody.mapper,{required:m,serializedName:g,xmlName:y,xmlElementName:E,xmlNamespace:I,xmlNamespacePrefix:F,nullable:A}=p,H=p.type.name;try{if(r.body!==void 0&&r.body!==null||A&&r.body===null||m){const B=Qr(i.requestBody);r.body=i.serializer.serialize(p,r.body,B,u);const se=H===Ti.Stream;if(i.isXML){const le=F?`xmlns:${F}`:"xmlns",me=pA(I,le,H,r.body,u);H===Ti.Sequence?r.body=o(mA(me,E||y||g,le,I),{rootName:y||g,xmlCharKey:f}):se||(r.body=o(me,{rootName:y||g,xmlCharKey:f}))}else{if(H===Ti.String&&(i.contentType?.match("text/plain")||i.mediaType==="text"))return;se||(r.body=JSON.stringify(r.body))}}}catch(B){throw new Error(`Error "${B.message}" occurred in serializing the payload - ${JSON.stringify(g,void 0,"  ")}.`)}}else if(i.formDataParameters&&i.formDataParameters.length>0){r.formData={};for(const p of i.formDataParameters){const m=Ss(n,p);if(m!=null){const g=p.mapper.serializedName||Qr(p);r.formData[g]=i.serializer.serialize(p.mapper,m,Qr(p),u)}}}}function pA(r,n,i,o,l){if(r&&!["Composite","Sequence","Dictionary"].includes(i)){const u={};return u[l.xml.xmlCharKey]=o,u[Bt]={[n]:r},u}return o}function mA(r,n,i,o){if(Array.isArray(r)||(r=[r]),!i||!o)return{[n]:r};const l={[n]:r};return l[Bt]={[i]:o},l}function zb(r={}){const n=Mf(r??{});return r.credentialOptions&&n.addPolicy(Wl({credential:r.credentialOptions.credential,scopes:r.credentialOptions.credentialScopes})),n.addPolicy(Ib(r.serializationOptions),{phase:"Serialize"}),n.addPolicy(Db(r.deserializationOptions),{phase:"Deserialize"}),n}let Id;function gA(){return Id||(Id=Uf()),Id}const yA={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function vA(r,n,i,o){const l=bA(n,i,o);let u=!1,f=Wy(r,l);if(n.path){let g=Wy(n.path,l);n.path==="/{nextLink}"&&g.startsWith("/")&&(g=g.substring(1)),SA(g)?(f=g,u=!0):f=wA(f,g)}const{queryParams:p,sequenceParams:m}=xA(n,i,o);return f=CA(f,p,m,u),f}function Wy(r,n){let i=r;for(const[o,l]of n)i=i.split(o).join(l);return i}function bA(r,n,i){const o=new Map;if(r.urlParameters?.length)for(const l of r.urlParameters){let u=Ss(n,l,i);const f=Qr(l);u=r.serializer.serialize(l.mapper,u,f),l.skipEncoding||(u=encodeURIComponent(u)),o.set(`{${l.mapper.serializedName||f}}`,u)}return o}function SA(r){return r.includes("://")}function wA(r,n){if(!n)return r;const i=new URL(r);let o=i.pathname;o.endsWith("/")||(o=`${o}/`),n.startsWith("/")&&(n=n.substring(1));const l=n.indexOf("?");if(l!==-1){const u=n.substring(0,l),f=n.substring(l+1);o=o+u,f&&(i.search=i.search?`${i.search}&${f}`:f)}else o=o+n;return i.pathname=o,i.toString()}function xA(r,n,i){const o=new Map,l=new Set;if(r.queryParameters?.length)for(const u of r.queryParameters){u.mapper.type.name==="Sequence"&&u.mapper.serializedName&&l.add(u.mapper.serializedName);let f=Ss(n,u,i);if(f!=null||u.mapper.required){f=r.serializer.serialize(u.mapper,f,Qr(u));const p=u.collectionFormat?yA[u.collectionFormat]:"";if(Array.isArray(f)&&(f=f.map(m=>m??"")),u.collectionFormat==="Multi"&&f.length===0)continue;Array.isArray(f)&&(u.collectionFormat==="SSV"||u.collectionFormat==="TSV")&&(f=f.join(p)),u.skipEncoding||(Array.isArray(f)?f=f.map(m=>encodeURIComponent(m)):f=encodeURIComponent(f)),Array.isArray(f)&&(u.collectionFormat==="CSV"||u.collectionFormat==="Pipes")&&(f=f.join(p)),o.set(u.mapper.serializedName||Qr(u),f)}}return{queryParams:o,sequenceParams:l}}function TA(r){const n=new Map;if(!r||r[0]!=="?")return n;r=r.slice(1);const i=r.split("&");for(const o of i){const[l,u]=o.split("=",2),f=n.get(l);f?Array.isArray(f)?f.push(u):n.set(l,[f,u]):n.set(l,u)}return n}function CA(r,n,i,o=!1){if(n.size===0)return r;const l=new URL(r),u=TA(l.search);for(const[p,m]of n){const g=u.get(p);if(Array.isArray(g))if(Array.isArray(m)){g.push(...m);const y=new Set(g);u.set(p,Array.from(y))}else g.push(m);else g?(Array.isArray(m)?m.unshift(g):i.has(p)&&u.set(p,[g,m]),o||u.set(p,m)):u.set(p,m)}const f=[];for(const[p,m]of u)if(typeof m=="string")f.push(`${p}=${m}`);else if(Array.isArray(m))for(const g of m)f.push(`${p}=${g}`);else f.push(`${p}=${m}`);return l.search=f.length?`?${f.join("&")}`:"",l.toString()}const Lb=Jl("core-client");class Bb{_endpoint;_requestContentType;_allowInsecureConnection;_httpClient;pipeline;constructor(n={}){if(this._requestContentType=n.requestContentType,this._endpoint=n.endpoint??n.baseUri,n.baseUri&&Lb.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=n.allowInsecureConnection,this._httpClient=n.httpClient||gA(),this.pipeline=n.pipeline||RA(n),n.additionalPolicies?.length)for(const{policy:i,position:o}of n.additionalPolicies){const l=o==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(i,{afterPhase:l})}}async sendRequest(n){return this.pipeline.sendRequest(this._httpClient,n)}async sendOperationRequest(n,i){const o=i.baseUrl||this._endpoint;if(!o)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");const l=vA(o,i,n,this),u=Df({url:l});u.method=i.httpMethod;const f=_s(u);f.operationSpec=i,f.operationArguments=n;const p=i.contentType||this._requestContentType;p&&i.requestBody&&u.headers.set("Content-Type",p);const m=n.options;if(m){const g=m.requestOptions;g&&(g.timeout&&(u.timeout=g.timeout),g.onUploadProgress&&(u.onUploadProgress=g.onUploadProgress),g.onDownloadProgress&&(u.onDownloadProgress=g.onDownloadProgress),g.shouldDeserialize!==void 0&&(f.shouldDeserialize=g.shouldDeserialize),g.allowInsecureConnection&&(u.allowInsecureConnection=!0)),m.abortSignal&&(u.abortSignal=m.abortSignal),m.tracingOptions&&(u.tracingOptions=m.tracingOptions)}this._allowInsecureConnection&&(u.allowInsecureConnection=!0),u.streamResponseStatusCodes===void 0&&(u.streamResponseStatusCodes=dA(i));try{const g=await this.sendRequest(u),y=jy(g,i.responses[g.status]);return m?.onResponse&&m.onResponse(g,y),y}catch(g){if(typeof g=="object"&&g?.response){const y=g.response,E=jy(y,i.responses[g.statusCode]||i.responses.default);g.details=E,m?.onResponse&&m.onResponse(y,E,g)}throw g}}}function RA(r){const n=EA(r),i=r.credential&&n?{credentialScopes:n,credential:r.credential}:void 0;return zb({...r,credentialOptions:i})}function EA(r){if(r.credentialScopes)return r.credentialScopes;if(r.endpoint)return`${r.endpoint}/.default`;if(r.baseUri)return`${r.baseUri}/.default`;if(r.credential&&!r.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}function _A(r){return`, ${r.trim()}`.split(", Bearer ").filter(i=>i).map(i=>`${i.trim()}, `.split('", ').filter(u=>u).map(u=>(([f,p])=>({[f]:p}))(u.trim().split('="'))).reduce((u,f)=>({...u,...f}),{}))}async function kA(r){const{scopes:n,response:i}=r,o=r.logger||Lb,l=i.headers.get("WWW-Authenticate");if(!l)return o.info("The WWW-Authenticate header was missing. Failed to perform the Continuous Access Evaluation authentication flow."),!1;const f=(_A(l)||[]).find(m=>m.claims);if(!f)return o.info('The WWW-Authenticate header was missing the necessary "claims" to perform the Continuous Access Evaluation authentication flow.'),!1;const p=await r.getAccessToken(f.scope?[f.scope]:n,{claims:q_(f.claims)});return p?(r.request.headers.set("Authorization",`${p.tokenType??"Bearer"} ${p.token}`),!0):!1}const Hb={DefaultScope:"/.default",HeaderConstants:{AUTHORIZATION:"authorization"}};function jA(r){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(r)}const NA=async r=>{const n=DA(r.request),i=MA(r.response);if(i){const o=UA(i),l=OA(r,o),u=AA(o);if(!u)return!1;const f=await r.getAccessToken(l,{...n,tenantId:u});return f?(r.request.headers.set(Hb.HeaderConstants.AUTHORIZATION,`${f.tokenType??"Bearer"} ${f.token}`),!0):!1}return!1};function AA(r){const o=new URL(r.authorization_uri).pathname.split("/")[1];if(o&&jA(o))return o}function OA(r,n){if(!n.resource_id)return r.scopes;const i=new URL(n.resource_id);i.pathname=Hb.DefaultScope;let o=i.toString();return o==="https://disk.azure.com/.default"&&(o="https://disk.azure.com//.default"),[o]}function MA(r){const n=r.headers.get("WWW-Authenticate");if(r.status===401&&n)return n}function UA(r){return`${r.slice(7).trim()} `.split(" ").filter(l=>l).map(l=>(([u,f])=>({[u]:f}))(l.trim().split("="))).reduce((l,u)=>({...l,...u}),{})}function DA(r){return{abortSignal:r.abortSignal,requestOptions:{timeout:r.timeout},tracingOptions:r.tracingOptions}}const PA=Object.freeze(Object.defineProperty({__proto__:null,MapperTypeNames:Ti,ServiceClient:Bb,XML_ATTRKEY:Bt,XML_CHARKEY:vs,authorizeRequestOnClaimChallenge:kA,authorizeRequestOnTenantChallenge:NA,createClientPipeline:zb,createSerializer:Rf,deserializationPolicy:Db,deserializationPolicyName:Ub,serializationPolicy:Ib,serializationPolicyName:Pb},Symbol.toStringTag,{value:"Module"})),IA=Ol(PA),zA=Ol(tA);var Qy;function LA(){return Qy||(Qy=1,(function(r){var n=s_,i=H_,o=IA,l=zA;function u(ke){return ke&&typeof ke=="object"&&"default"in ke?ke:{default:ke}}var f=u(n),p=u(i),m=u(o),g=u(l),y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Ig<"u"?Ig:typeof self<"u"?self:{};function E(ke){return ke&&ke.__esModule&&Object.prototype.hasOwnProperty.call(ke,"default")?ke.default:ke}function I(ke,ye){return ye={exports:{}},ke(ye,ye.exports),ye.exports}var F=I(function(ke,ye){(function(ze,q){ke.exports=q()})(y,function(){return(function(ze){function q(K){if(D[K])return D[K].exports;var L=D[K]={i:K,l:!1,exports:{}};return ze[K].call(L.exports,L,L.exports,q),L.l=!0,L.exports}var D={};return q.m=ze,q.c=D,q.i=function(K){return K},q.d=function(K,L,W){q.o(K,L)||Object.defineProperty(K,L,{configurable:!1,enumerable:!0,get:W})},q.n=function(K){var L=K&&K.__esModule?function(){return K.default}:function(){return K};return q.d(L,"a",L),L},q.o=function(K,L){return Object.prototype.hasOwnProperty.call(K,L)},q.p="",q(q.s=1)})([function(ze,q,D){function K(C,z){var x,b=new Promise(function(_,N){fetch(C).then(function(w){x!==void 0&&clearTimeout(x),_(w)}).catch(function(w){x!==void 0&&clearTimeout(x),N(w)})});if(z!==0){var S=new Promise(function(_,N){x=setTimeout(N,z,new Error("Fetch for '".concat(C.url,"' timed out")))});return Promise.race([b,S])}return b}function L(C){try{return JSON.stringify(C)}catch{return"Unable to serialize object of type ".concat(typeof C)}}Object.defineProperty(q,"__esModule",{value:!0}),q.Timespan=q.toJson=q.fetchWithTimeout=void 0,q.fetchWithTimeout=K,q.toJson=L;var W=(function(){function C(){this.start=Date.now()}return Object.defineProperty(C.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(C.prototype,"startTime",{get:function(){return this.start},enumerable:!1,configurable:!0}),C.prototype.reset=function(){this.start=Date.now()},C})();q.Timespan=W},function(ze,q,D){function K(w,R,j){return new N(w,R,j)}var L=this&&this.__extends||(function(){var w=function(R,j){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(G,Q){G.__proto__=Q}||function(G,Q){for(var Y in Q)Object.prototype.hasOwnProperty.call(Q,Y)&&(G[Y]=Q[Y])})(R,j)};return function(R,j){function G(){this.constructor=R}if(typeof j!="function"&&j!==null)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");w(R,j),R.prototype=j===null?Object.create(j):(G.prototype=j.prototype,new G)}})(),W=this&&this.__assign||function(){return W=Object.assign||function(w){for(var R,j=1,G=arguments.length;j<G;j++){R=arguments[j];for(var Q in R)Object.prototype.hasOwnProperty.call(R,Q)&&(w[Q]=R[Q])}return w},W.apply(this,arguments)},C=this&&this.__awaiter||function(w,R,j,G){function Q(Y){return Y instanceof j?Y:new j(function($){$(Y)})}return new(j||(j=Promise))(function(Y,$){function V(Z){try{te(G.next(Z))}catch(oe){$(oe)}}function re(Z){try{te(G.throw(Z))}catch(oe){$(oe)}}function te(Z){Z.done?Y(Z.value):Q(Z.value).then(V,re)}te((G=G.apply(w,R||[])).next())})},z=this&&this.__generator||function(w,R){function j(te){return function(Z){return G([te,Z])}}function G(te){if(Q)throw new TypeError("Generator is already executing.");for(;V&&(V=0,te[0]&&(re=0)),re;)try{if(Q=1,Y&&($=2&te[0]?Y.return:te[0]?Y.throw||(($=Y.return)&&$.call(Y),0):Y.next)&&!($=$.call(Y,te[1])).done)return $;switch(Y=0,$&&(te=[2&te[0],$.value]),te[0]){case 0:case 1:$=te;break;case 4:return re.label++,{value:te[1],done:!1};case 5:re.label++,Y=te[1],te=[0];continue;case 7:te=re.ops.pop(),re.trys.pop();continue;default:if($=re.trys,!($=$.length>0&&$[$.length-1])&&(te[0]===6||te[0]===2)){re=0;continue}if(te[0]===3&&(!$||te[1]>$[0]&&te[1]<$[3])){re.label=te[1];break}if(te[0]===6&&re.label<$[1]){re.label=$[1],$=te;break}if($&&re.label<$[2]){re.label=$[2],re.ops.push(te);break}$[2]&&re.ops.pop(),re.trys.pop();continue}te=R.call(w,re)}catch(Z){te=[6,Z],Y=0}finally{Q=$=0}if(5&te[0])throw te[1];return{value:te[0]?te[1]:void 0,done:!0}}var Q,Y,$,V,re={label:0,sent:function(){if(1&$[0])throw $[1];return $[1]},trys:[],ops:[]};return V={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(V[Symbol.iterator]=function(){return this}),V};Object.defineProperty(q,"__esModule",{value:!0}),q.createRegistrarClient=q.RegistrarClient=void 0;var x=D(0),b=["skype","aad","cae"],S=(function(w){function R(j){var G=w.call(this,j)||this;return G.name="CancelationError",G}return L(R,w),R})(Error),_=(function(){function w(R,j,G){this.logger=R,this.maxBackoffInMs=j,this.initialDelay=G,this.backoffCount=0,this.id=++w.idCounter}return w.prototype.delay=function(R){var j=this;if(this.timerHandle!==void 0)throw new Error("Retry sequence logical failure");if(this.backoffCount===-1)return new Promise(function(Q,Y){Y(new S("Cancelled"))});var G=this.calculateNextBackoffMs();return this.backoffCount++,this.logger.info("[RegistrarClient] Backing off ".concat(R," for ").concat(G," milliseconds with ID ").concat(this.id)),new Promise(function(Q,Y){j.cancelFunc=Y,j.timerHandle=setTimeout(function(){j.logger.info("[RegistrarClient] Back off for ".concat(R," with ID ").concat(j.id," complete")),j.timerHandle=void 0,Q()},G)})},w.prototype.cancel=function(){this.timerHandle!==void 0&&(this.logger.debug("Resetting back off"),clearTimeout(this.timerHandle),this.cancelFunc!==void 0&&this.cancelFunc(new S("Cancelled"))),this.backoffCount=-1},w.prototype.calculateNextBackoffMs=function(){var R=1+.4*(Math.random()-.5),j=this.initialDelay*Math.pow(2,this.backoffCount)*R;return j=Math.round(j),Math.min(this.maxBackoffInMs,j)},w.idCounter=0,w})(),N=(function(){function w(R,j,G){var Q;this.logger=R,this.tokenProvider=j,this.options=G,this.DEFAULT_MAX_RETRIES_FOR_GET_TOKEN=15,this.DEFAULT_MAX_BACKOFF_TIME_IN_MS=3e5,this.backoffs={},this.maxBackOffTime=this.options.maxRetryDelayMs>0?this.options.maxRetryDelayMs:this.DEFAULT_MAX_BACKOFF_TIME_IN_MS,this.maxRetriesForGetToken=G.maxRetriesForGetToken===void 0||G.maxRetriesForGetToken===null?this.DEFAULT_MAX_RETRIES_FOR_GET_TOKEN:G.maxRetriesForGetToken,this.proxyUrlRewrite=(Q=G.proxyUrlRewrite)!==null&&Q!==void 0?Q:function(Y){return Y}}return w.prototype.setTelemetryLogger=function(R){this.eventLogger=R},w.prototype.register=function(R,j){return C(this,void 0,void 0,function(){return z(this,function(G){switch(G.label){case 0:return[4,this.performRegistration(R,j,"pr_set_registration")];case 1:return G.sent(),this.cachedRegistrationParams=[R,j],[2]}})})},w.prototype.unregister=function(){return C(this,void 0,void 0,function(){var R;return z(this,function(j){switch(j.label){case 0:return this.logger.info("[RegistrarClient] sending unregister request"),R=new Request(this.proxyUrlRewrite("".concat(this.options.registrarUrl,"/").concat(this.options.registrationId)),{method:"DELETE",mode:"cors",headers:new Headers(W(W({},this.options.extraRegistrationHeaders),{accept:"application/json, text/javascript"}))}),[4,this.callRegistrar(R,"pr_delete_registration")];case 1:return j.sent(),[2]}})})},w.prototype.cancelPendingRequests=function(){var R=this;Object.keys(this.backoffs).forEach(function(j){R.backoffs[j].cancel()}),this.backoffs={}},w.prototype.resendRegistration=function(){return C(this,void 0,void 0,function(){return z(this,function(R){switch(R.label){case 0:if(!this.cachedRegistrationParams)throw new Error("Re-registration failed because there is no registration parameters cached");return[4,this.performRegistration(this.cachedRegistrationParams[0],this.cachedRegistrationParams[1],"pr_resend_registration")];case 1:return R.sent(),[2]}})})},w.prototype.performRegistration=function(R,j,G){return C(this,void 0,void 0,function(){var Q,Y;return z(this,function($){switch($.label){case 0:return this.logger.info("[RegistrarClient] Sending register request"),Q={clientDescription:R,registrationId:this.options.registrationId,nodeId:"",transports:j},Y=new Request(this.proxyUrlRewrite(this.options.registrarUrl),{method:"POST",mode:"cors",headers:new Headers(W(W({},this.options.extraRegistrationHeaders),{"content-type":"application/json",accept:"application/json, text/javascript"})),body:(0,x.toJson)(Q)}),[4,this.callRegistrar(Y,G)];case 1:return $.sent(),[2]}})})},w.prototype.startBackoff=function(){var R=new _(this.logger,this.maxBackOffTime,this.options.initialRetryDelayMs);return this.backoffs[R.id]=R,R},w.prototype.stopBackoff=function(R){R.cancel(),delete this.backoffs[R.id]},w.prototype.getToken=function(R){return C(this,void 0,void 0,function(){var j,G,Q,Y,$,V,re;return z(this,function(te){switch(te.label){case 0:j=this.startBackoff(),G=0,te.label=1;case 1:return te.trys.push([1,3,,8]),this.logger.info("[RegistrarClient] Asking for a new token"),[4,this.tokenProvider({needFresh:!0,supportedTokenTypes:b,wwwAuthenticateHeader:R,purpose:"registrar"})];case 2:return Q=te.sent(),this.stopBackoff(j),[2,Q];case 3:Y=te.sent(),te.label=4;case 4:return te.trys.push([4,6,,7]),G++,$=JSON.stringify(Y),G>this.maxRetriesForGetToken?(V="[RegistrarClient] getToken retry limit hit. Will not retry now. Error: ".concat($),this.logger.error(V),this.stopBackoff(j),[2,Promise.reject(V)]):(this.logger.warn("[RegistrarClient] Retrying for a new token. Retry Count: ".concat(G," Error: ").concat($)),[4,j.delay("Fetching a new token")]);case 5:return te.sent(),[3,8];case 6:throw re=te.sent(),this.stopBackoff(j),re;case 7:return[3,8];case 8:return[3,1];case 9:return[2]}})})},w.prototype.callRegistrar=function(R,j){var G,Q,Y;return C(this,void 0,void 0,function(){var $,V,re,te,Z,oe,_e,Ae,je,Me,qe,We,U,T,P,ne;return z(this,function(M){switch(M.label){case 0:return $=this.startBackoff(),[4,this.tokenProvider({needFresh:!1,supportedTokenTypes:b,wwwAuthenticateHeader:void 0,purpose:"registrar"})];case 1:V=M.sent(),this.setTokenHeader(R,V),re=new x.Timespan,te=0,M.label=2;case 2:Z=void 0,M.label=3;case 3:return M.trys.push([3,10,15,16]),oe=R.clone(),[4,(0,x.fetchWithTimeout)(oe,this.options.requestTimeoutMs)];case 4:return Z=M.sent(),Z.status!==401?[3,8]:++te>this.maxRetriesForGetToken?(_e="[RegistrarClient] getSkypeToken retry limit hit. Will not retry now. Request '".concat(R.url,"' failed with ").concat(Z.status," ").concat(Z.statusText),this.logger.error(_e),this.stopBackoff($),[2,Promise.reject(_e)]):(this.logger.warn("[RegistrarClient] Retry Count ".concat(te,". Request '").concat(R.url,"' failed with ").concat(Z.status," ").concat(Z.statusText)),Ae=(Q=(G=Z.headers)===null||G===void 0?void 0:G.get("www-authenticate"))!==null&&Q!==void 0?Q:void 0,je=this.setTokenHeader,Me=[R],[4,this.getToken(Ae)]);case 5:return je.apply(this,Me.concat([M.sent()])),te>1?[4,$.delay("Registrar call retry after 401")]:[3,7];case 6:M.sent(),M.label=7;case 7:return[3,22];case 8:if(Z.status>=500&&Z.status<600)throw new Error("Fetch for '".concat(R.url,"' failed with ").concat(Z.status," ").concat(Z.statusText));M.label=9;case 9:return[3,16];case 10:qe=M.sent(),this.logger.error("[RegistrarClient] Request failed with ".concat(qe)),M.label=11;case 11:return M.trys.push([11,13,,14]),[4,$.delay("Registrar call retry")];case 12:return M.sent(),[3,22];case 13:throw We=M.sent(),this.logger.error("[RegistrarClient] Request cancelled"),this.stopBackoff($),We;case 14:return[3,16];case 15:return this.sendTelemetryEvent(j,R,Z,re),[7];case 16:return this.stopBackoff($),Z.ok?[2,Z]:[3,17];case 17:U=void 0,M.label=18;case 18:return M.trys.push([18,20,,21]),P=(T=JSON).stringify,[4,Z.json()];case 19:return U=P.apply(T,[M.sent()]),[3,21];case 20:return M.sent(),U="no details",[3,21];case 21:throw ne="Fetch for '".concat(R.url,"' failed with ").concat(Z.status," ").concat(Z.statusText," (").concat(U,", MS-CV: ").concat((Y=Z.headers)===null||Y===void 0?void 0:Y.get("MS-CV"),")"),this.logger.error("[RegistrarClient] ".concat(ne)),new Error(ne);case 22:return[3,2];case 23:return[2]}})})},w.prototype.setTokenHeader=function(R,j){switch(R.headers.delete("X-Skypetoken"),R.headers.delete("Authorization"),R.headers.delete("X-MS-Migration"),j.tokenType.toLowerCase()){case"skype":R.headers.set("X-Skypetoken",j.token);break;case"aad":case"cae":R.headers.set("Authorization","Bearer ".concat(j.token));break;default:throw new Error("unsupported token type: ".concat(j.tokenType))}this.options.usingLegacyTokenApi===!1&&R.headers.set("X-MS-Migration","True")},w.prototype.sendTelemetryEvent=function(R,j,G,Q){if(this.eventLogger!==void 0){var Y={name:R,properties:{url:{value:j.url},result_code:{value:G!==void 0?G.status:0},begin_timestamp:{value:Q.startTime},elapsed:{value:Q.duration}}};this.eventLogger.logEvent(Y)}},w})();q.RegistrarClient=N,q.createRegistrarClient=K}])})});E(F);var A=I(function(ke,ye){(function(ze,q){ke.exports=q(F)})(y,function(ze){return(function(q){function D(L){if(K[L])return K[L].exports;var W=K[L]={i:L,l:!1,exports:{}};return q[L].call(W.exports,W,W.exports,D),W.l=!0,W.exports}var K={};return D.m=q,D.c=K,D.i=function(L){return L},D.d=function(L,W,C){D.o(L,W)||Object.defineProperty(L,W,{configurable:!1,enumerable:!0,get:C})},D.n=function(L){var W=L&&L.__esModule?function(){return L.default}:function(){return L};return D.d(W,"a",W),W},D.o=function(L,W){return Object.prototype.hasOwnProperty.call(L,W)},D.p="",D(D.s=20)})([function(q,D,K){Object.defineProperty(D,"__esModule",{value:!0}),D.Logger=void 0;var L=(function(){function W(C,z){this.name=C,this.logger=z}return W.prototype.debug=function(C){this.logger.debug("[".concat(this.name,"] ").concat(C))},W.prototype.info=function(C){this.logger.info("[".concat(this.name,"] ").concat(C))},W.prototype.warn=function(C){this.logger.warn("[".concat(this.name,"] ").concat(C))},W.prototype.error=function(C){this.logger.error("[".concat(this.name,"] ").concat(C))},W})();D.Logger=L},function(q,D,K){Object.defineProperty(D,"__esModule",{value:!0}),D.USER_AUTHENTICATE_EVENT_NAME=D.SUPPORTED_TOKEN_TYPES=D.FAILED_MESSAGE_ACK=D.UNHANDLED_MESSAGE_ACK=D.HANDLED_MESSAGE_ACK=D.CLIENT_VERSION=D.constants=void 0,D.constants={TROUTER_INIT:"trouterinit",TROUTER_READY_EVENT:"trouterReadyEvent",TROUTER_READY_TIMEOUT:"trouterReadyTimeout",TROUTER_TOKEN_REQUEST:"trouterTokenRequest",TROUTER_TOKEN_GET_SUCCEEDED:"trouterTokenGetSucceeded",TROUTER_TOKEN_GET_FAILED:"trouterTokenGetFailed",TROUTER_RECONNECTING:"trouterReconnecting",RENEWAL:"renewal",NEW_CONNECTION:"newConnection",ENDPOINT_REGISTRATION_FAILED:"endpointRegistrationFailed"},D.CLIENT_VERSION="2024.14.01.55",D.HANDLED_MESSAGE_ACK=200,D.UNHANDLED_MESSAGE_ACK=404,D.FAILED_MESSAGE_ACK=500,D.SUPPORTED_TOKEN_TYPES=["skype","aad","cae"],D.USER_AUTHENTICATE_EVENT_NAME="user.authenticate"},function(q,D,K){Object.defineProperty(D,"__esModule",{value:!0}),D.TrouterState=D.UserActivityState=void 0;var L;(function(C){C[C.Unknown=0]="Unknown",C[C.Active=1]="Active",C[C.Inactive=2]="Inactive"})(L||(D.UserActivityState=L={}));var W;(function(C){C[C.Unknown=0]="Unknown",C[C.Connected=2]="Connected",C[C.Disconnected=3]="Disconnected",C[C.Switching=9]="Switching"})(W||(D.TrouterState=W={}))},function(q,D,K){function L(N){try{return JSON.stringify(N)}catch{return"Unable to serialize object of type ".concat(typeof N)}}function W(N){var w=Math.round(new Date().getTime()/1e3);return N!==void 0&&N>w?N-w:0}function C(N){return Math.round(new Date().getTime()/1e3)+N}function z(N,w){return x(this,void 0,void 0,function(){var R,j,G;return b(this,function(Q){return j=new Promise(function(Y,$){fetch(N).then(function(V){clearTimeout(R),Y(V)}).catch(function(V){clearTimeout(R),$(V)})}),w!==0?(G=new Promise(function(Y,$){var V=new URL(N.url),re=new Error("".concat(N.method," ").concat(V.origin).concat(V.pathname," timed out"));R=setTimeout($,w,re)}),[2,Promise.race([j,G])]):[2,j]})})}var x=this&&this.__awaiter||function(N,w,R,j){function G(Q){return Q instanceof R?Q:new R(function(Y){Y(Q)})}return new(R||(R=Promise))(function(Q,Y){function $(te){try{re(j.next(te))}catch(Z){Y(Z)}}function V(te){try{re(j.throw(te))}catch(Z){Y(Z)}}function re(te){te.done?Q(te.value):G(te.value).then($,V)}re((j=j.apply(N,w||[])).next())})},b=this&&this.__generator||function(N,w){function R(re){return function(te){return j([re,te])}}function j(re){if(G)throw new TypeError("Generator is already executing.");for(;$&&($=0,re[0]&&(V=0)),V;)try{if(G=1,Q&&(Y=2&re[0]?Q.return:re[0]?Q.throw||((Y=Q.return)&&Y.call(Q),0):Q.next)&&!(Y=Y.call(Q,re[1])).done)return Y;switch(Q=0,Y&&(re=[2&re[0],Y.value]),re[0]){case 0:case 1:Y=re;break;case 4:return V.label++,{value:re[1],done:!1};case 5:V.label++,Q=re[1],re=[0];continue;case 7:re=V.ops.pop(),V.trys.pop();continue;default:if(Y=V.trys,!(Y=Y.length>0&&Y[Y.length-1])&&(re[0]===6||re[0]===2)){V=0;continue}if(re[0]===3&&(!Y||re[1]>Y[0]&&re[1]<Y[3])){V.label=re[1];break}if(re[0]===6&&V.label<Y[1]){V.label=Y[1],Y=re;break}if(Y&&V.label<Y[2]){V.label=Y[2],V.ops.push(re);break}Y[2]&&V.ops.pop(),V.trys.pop();continue}re=w.call(N,V)}catch(te){re=[6,te],Q=0}finally{G=Y=0}if(5&re[0])throw re[1];return{value:re[0]?re[1]:void 0,done:!0}}var G,Q,Y,$,V={label:0,sent:function(){if(1&Y[0])throw Y[1];return Y[1]},trys:[],ops:[]};return $={next:R(0),throw:R(1),return:R(2)},typeof Symbol=="function"&&($[Symbol.iterator]=function(){return this}),$};Object.defineProperty(D,"__esModule",{value:!0}),D.Timespan=D.CorrelationVector=D.fetchWithTimeout=D.calculateExpireTsInSec=D.calculateTtlInSec=D.toJson=void 0,D.toJson=L,D.calculateTtlInSec=W,D.calculateExpireTsInSec=C,D.fetchWithTimeout=z;var S=(function(){function N(w){this.base=w!==void 0?w:this.createCorrelationVectorBase(),this.extension=0}return N.extend=function(w){return new N(w)},N.prototype.increase=function(){this.extension++},N.prototype.value=function(){return"".concat(this.base,".").concat(this.extension)},N.prototype.createCorrelationVectorBase=function(){for(var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0987654321/+",R="AQgw",j="",G=0;G<21;G++)j+=w.charAt(Math.floor(Math.random()*w.length));return j+=R.charAt(Math.floor(Math.random()*R.length))},N})();D.CorrelationVector=S;var _=(function(){function N(){this.start=Date.now()}return Object.defineProperty(N.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"startTime",{get:function(){return this.start},enumerable:!1,configurable:!0}),N.prototype.reset=function(){this.start=Date.now()},N})();D.Timespan=_},function(q,D,K){Object.defineProperty(D,"__esModule",{value:!0}),D.TrouterManagerState=D.UserActivityEventReason=D.ServerState=void 0;var L=K(3),W=(function(){function x(b,S,_,N,w,R,j){this.connectionId=b,this.connectedClientId=S,this.domId=_,this.unsecureUrl=N,this.url=w,this.c2cUrlBase=R,this.expirationTsSec=j}return x.prototype.getRemainingTtlInSec=function(){return(0,L.calculateTtlInSec)(this.expirationTsSec)},x})();D.ServerState=W;var C;(function(x){x[x.Unknown=0]="Unknown",x[x.Modified=1]="Modified",x[x.Snapshot=2]="Snapshot",x[x.Connected=3]="Connected"})(C||(D.UserActivityEventReason=C={}));var z;(function(x){x[x.Unknown=0]="Unknown",x[x.Connected=2]="Connected",x[x.Disconnected=3]="Disconnected",x[x.Switching=9]="Switching",x[x.TerminalError=10]="TerminalError"})(z||(D.TrouterManagerState=z={}))},function(q,D,K){function L(w,R){return w==="skype"&&W(R?.scae)!=="1"?"v4a":"v4c"}function W(w){return typeof w=="string"?w:typeof w=="number"?w.toString():void 0}function C(w,R){return R?.kind==="v4c-websocket-failure"?"v4a":w}function z(w){return Object.prototype.hasOwnProperty.call(w,"connectparams")}function x(w,R){return R==="v4a"?w.replace(/\/v4\/c\b/,"/v4/a").replace("wss://","https://").replace("ws://","http://"):w.replace(/\/v4\/a\b/,"/v4/c").replace("https://","wss://").replace("http://","ws://")}function b(w){if(w!==void 0)return N(N({},w),{reconnectUrl:void 0,serviceUrl:void 0})}function S(w){return typeof w=="string"?parseInt(w,10):w}function _(w){if(w?.kind==="redirect"&&w.host!==void 0){var R=w.host;return R.endsWith("/")&&(R=R.substring(0,R.length-1)),R.endsWith("/v4/c")||R.endsWith("/v4/a")||(R+="/v4/c"),R}}var N=this&&this.__assign||function(){return N=Object.assign||function(w){for(var R,j=1,G=arguments.length;j<G;j++){R=arguments[j];for(var Q in R)Object.prototype.hasOwnProperty.call(R,Q)&&(w[Q]=R[Q])}return w},N.apply(this,arguments)};Object.defineProperty(D,"__esModule",{value:!0}),D.redirectUrlIfPresent=D.ensureNumber=D.reconnectParamsWithoutUrls=D.adaptUrl=D.isV4ConnectEvent=D.usedProtocolAfterFallback=D.usedProtocol=void 0,D.usedProtocol=L,D.usedProtocolAfterFallback=C,D.isV4ConnectEvent=z,D.adaptUrl=x,D.reconnectParamsWithoutUrls=b,D.ensureNumber=S,D.redirectUrlIfPresent=_},function(q,D,K){Object.defineProperty(D,"__esModule",{value:!0}),D.TrouterFsm=D.State=void 0;var L,W=K(4),C=K(0),z=K(5);(function(S){S[S.Initial=0]="Initial",S[S.RetrievingToken=1]="RetrievingToken",S[S.Allocating=2]="Allocating",S[S.Handshaking=3]="Handshaking",S[S.Connecting=4]="Connecting",S[S.AnonymousConnecting=5]="AnonymousConnecting",S[S.WebsocketAuthenticating=6]="WebsocketAuthenticating",S[S.Connected=7]="Connected",S[S.Unregistering=8]="Unregistering",S[S.TerminalError=9]="TerminalError"})(L||(D.State=L={}));var x;(function(S){S[S.Initial=0]="Initial",S[S.Registering=1]="Registering",S[S.RegisteringButResendPending=2]="RegisteringButResendPending",S[S.Retrying=3]="Retrying",S[S.Registered=4]="Registered",S[S.RegistrationDisabled=5]="RegistrationDisabled"})(x||(x={}));var b=(function(){function S(_,N,w,R){this.worker=N,this.incallModeEnabled=w,this.protocolSelector=R,this.state=L.Initial,this.autoReconnect=!0,this.logger=new C.Logger("ConnectionFsm",_),this.registrationState=x.Initial}return S.prototype.getState=function(){return this.state},S.prototype.isActive=function(){return this.state===L.Allocating||this.state===L.Connected||this.state===L.Handshaking||this.state===L.Connecting||this.state===L.RetrievingToken||this.state===L.AnonymousConnecting||this.state===L.WebsocketAuthenticating},S.prototype.isConnecting=function(){return this.state===L.Allocating||this.state===L.Handshaking||this.state===L.Connecting||this.state===L.AnonymousConnecting},S.prototype.start=function(){return this.state===L.Initial?(this.setState(L.RetrievingToken),this.worker.getToken(!0,!1,void 0),!0):(this.showIgnored("start"),!1)},S.prototype.stop=function(_,N){_&&(this.registrationState=x.Initial),this.worker.isIncallMode()&&this.worker.exitIncallMode(),this.worker.resetTokenBackoff(),this.worker.cancelPendingRegistrationRequests(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearSentEventTimers(),this.worker.stopRegistrationTimer(),this.worker.stopSocketIo(),this.state===L.Connected&&this.worker.sendDisconnectTelemetryEvent("connection stopped"),this.registrationState!==x.Registered&&this.registrationState!==x.Registering&&this.registrationState!==x.RegisteringButResendPending||this.state===L.Unregistering?N?(this.setState(L.TerminalError),this.worker.dispatchTerminalError()):(this.setState(L.Initial),this.worker.dispatchDisconnected()):(this.registrationState=x.Initial,this.setState(L.Unregistering),this.worker.sendUnregisterRequest())},S.prototype.onTokenReceived=function(_,N,w){this.state===L.RetrievingToken?(0,z.usedProtocolAfterFallback)(this.protocolSelector(_.tokenType,w),N)==="v4c"?(this.setState(L.AnonymousConnecting),this.worker.startConnectionTimer(),this.worker.connectV4c(_,N)):(this.setState(L.Allocating),this.worker.startConnectionTimer(),this.worker.sendAllocateRequest(_)):this.showIgnored("onTokenReceived")},S.prototype.checkConnection=function(_){_&&this.onPingInterval()},S.prototype.onAllocationSucceed=function(_){return this.state===L.Allocating&&this.registrationState===x.Registered&&this.worker.dispatchUnregistered(),this.state===L.Allocating?(this.setState(L.Handshaking),this.registrationState=x.Initial,this.worker.startSocketIo(_),!0):(this.showIgnored("onAllocationSucceed"),!1)},S.prototype.onAllocationFailed=function(_,N){this.state===L.Allocating?this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!_,claimsChallenge:N}):this.showIgnored("onAllocationFailed")},S.prototype.onV4cException=function(){this.state!==L.AnonymousConnecting&&this.state!==L.WebsocketAuthenticating||(this.logger.error("v4c exception, falling back to longpoll"),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"v4c-websocket-failure"}}))},S.prototype.onConnectingTimeout=function(){this.state===L.Allocating||this.state===L.Connecting||this.state===L.Handshaking||this.state===L.AnonymousConnecting||this.state===L.WebsocketAuthenticating?this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0}):this.showIgnored("onConnectingTimeout")},S.prototype.onConnecting=function(){this.state===L.Handshaking?this.setState(L.Connecting):this.showIgnored("onConnecting")},S.prototype.onSocketConnect=function(_){this.state===L.AnonymousConnecting?(this.setState(L.WebsocketAuthenticating),this.worker.sendV4cAuthenticationEvent(_)):this.showIgnored("onSocketConnect")},S.prototype.onConnectingFailed=function(){this.state===L.Connecting?this.onConnectingTimeout():this.state===L.Handshaking?(this.logger.error("Unexpected error in Socket.io - no valid transports"),this.onConnectingTimeout()):this.state===L.AnonymousConnecting||this.state===L.WebsocketAuthenticating?(this.logger.info("/v4/c falling back to longpoll"),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"v4c-websocket-failure"}})):this.showIgnored("onConnectingFailed")},S.prototype.onSocketDisconnect=function(_){this.state===L.Handshaking||this.state===L.Connected||this.state===L.WebsocketAuthenticating?(this.state===L.Connected&&this.worker.sendDisconnectTelemetryEvent(_?.toTelemetryString()),this.state===L.WebsocketAuthenticating&&this.worker.countDisconnectBeforeConnectionEstablishment(),_?.reason==="skypetoken-deprecated"?(this.logger.error("Skypetoken deprecated response, not retrying any further"),this.onTerminalError()):this.cleanUpAndInitiateReconnect({backoff:this.state!==L.Connected&&_?.reason!=="dup",allowCachedToken:_?.reason!=="unauthorized",claimsChallenge:_?.claims})):this.showIgnored("onSocketDisconnect")},S.prototype.onTrouterConnected=function(){this.state===L.Connecting||this.state===L.WebsocketAuthenticating?(this.setState(L.Connected),this.worker.resetTokenBackoff(),this.worker.stopConnectionTimer(),this.worker.sendUserActivityState(W.UserActivityEventReason.Connected,!0),this.worker.startPingTimer(),this.worker.dispatchConnected(),this.worker.shouldSkipRegistration()?(this.registrationState=x.RegistrationDisabled,this.worker.dispatchRegistered()):(this.registrationState=x.Registering,this.worker.sendRegisterRequest())):this.showIgnored("onTrouterConnected")},S.prototype.onReconnectRequired=function(_,N,w){this.state===L.AnonymousConnecting||this.state===L.WebsocketAuthenticating?w===void 0||w.target!=="host"||w.url===void 0||w.url===""?(this.logger.error("unexpected reconnect arguments: ".concat(w?.target," ").concat(w?.url,", reconnecting without cache")),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"redirect-no-host"}})):this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"redirect",host:w.url}}):this.worker.dispatchReconnectIsRequired(_,N)},S.prototype.disableAutoReconnect=function(){this.autoReconnect=!1},S.prototype.onDownstreamRequest=function(_){this.state===L.Connected?(this.switchToIncallModeIfEnabled(),this.worker.dispatchDownstreamRequest(_)):this.showIgnored("onDownstreamRequest")},S.prototype.onTrouterMessageLost=function(_){this.state===L.Connected?this.worker.dispatchTrouterMessageLost(_):this.showIgnored("onTrouterMessageLost")},S.prototype.onPingInterval=function(){this.state===L.Connected?this.worker.sendPingRequest():this.showIgnored("onPingInterval")},S.prototype.onPingResponseTimeout=function(){this.onMissedResponse("onPingResponseTimeout")},S.prototype.onPingResponse=function(){this.state===L.Connected||this.showIgnored("onPingResponse")},S.prototype.onRegistrationFailed=function(){this.state===L.Connected&&this.registrationState===x.Registering?(this.worker.dispatchUnregistered(),this.registrationState=x.Retrying,this.worker.startRegistrationRetryTimer()):this.state===L.Connected&&this.registrationState===x.RegisteringButResendPending?(this.registrationState=x.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationFailed")},S.prototype.onRetryRegistration=function(){this.state===L.Connected&&this.registrationState===x.Retrying?(this.registrationState=x.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRetryRegistration")},S.prototype.onRegistrationSucceeded=function(){this.state===L.Connected&&this.registrationState===x.Registering?(this.registrationState=x.Registered,this.worker.dispatchRegistered(),this.worker.startRegistrationTimer()):this.state===L.Connected&&this.registrationState===x.RegisteringButResendPending?(this.registrationState=x.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationSucceeded")},S.prototype.onRegistrationNearExpiry=function(){this.state===L.Connected&&this.registrationState===x.Registered?(this.registrationState=x.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationNearExpiry")},S.prototype.onUnregistrationDone=function(){this.state===L.Unregistering?(this.setState(L.Initial),this.worker.dispatchUnregistered(),this.worker.dispatchDisconnected()):this.showIgnored("onUnregistrationDone")},S.prototype.onResendRegistration=function(){this.worker.dispatchUnregistered(),this.state===L.Connected&&this.registrationState===x.Registered?(this.registrationState=x.Registering,this.worker.stopRegistrationTimer(),this.worker.sendRegisterRequest()):this.state===L.Connected&&this.registrationState===x.Registering&&(this.registrationState=x.RegisteringButResendPending)},S.prototype.onIncallModeTimer=function(){this.worker.exitIncallMode(),this.state===L.Connected?(this.worker.stopPingTimer(),this.worker.startPingTimer()):this.showIgnored("onIncallModeTimer")},S.prototype.onSetNewUserActivityState=function(){this.worker.sendUserActivityState(W.UserActivityEventReason.Modified,this.state===L.Connected)},S.prototype.onActivityStateResponseTimeout=function(){this.onMissedResponse("onActivityStateResponseTimeout")},S.prototype.forceReconnect=function(_){this.state===L.Connected&&this.worker.sendDisconnectTelemetryEvent(_),this.worker.resetTokenBackoff(),this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0})},S.prototype.onTerminalError=function(){this.logger.error("Cannot proceed, reached terminal state. Switching from state '".concat(L[this.state],"' to ").concat(L[L.TerminalError])),this.stop(!0,!0),this.setState(L.TerminalError)},S.prototype.onMissedResponse=function(_){this.state===L.Connected?(this.worker.sendDisconnectTelemetryEvent(_),this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0})):this.showIgnored(_)},S.prototype.showIgnored=function(_){this.logger.debug("Ignoring event '".concat(_,"' in state '").concat(L[this.state],"'"))},S.prototype.setState=function(_){if(this.logger.info("Switching from state '".concat(L[this.state],"' to state '").concat(L[_],"'")),this.state===_)return void this.logger.error("Attempt to switch to the current state '".concat(L[_],"'"));this.state=_},S.prototype.switchToIncallModeIfEnabled=function(){this.incallModeEnabled&&(this.worker.isIncallMode()||(this.worker.enterIncallMode(),this.worker.stopPingTimer(),this.worker.startPingTimer()),this.worker.restartIncallModeTimer())},S.prototype.cleanUpAndInitiateReconnect=function(_){if(!this.autoReconnect)return this.logger.info("Automatic reconnect is disabled, stopping this connection"),void this.stop(!0);this.worker.cancelPendingRegistrationRequests(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearSentEventTimers(),this.worker.stopRegistrationTimer(),this.worker.stopSocketIo(),this.setState(L.RetrievingToken),this.worker.dispatchReconnecting(),this.worker.getToken(_.allowCachedToken,_.backoff,_.claimsChallenge,_.fallbackReason)},S})();D.TrouterFsm=b},function(q,D,K){function L(U,T){var P=T?void 0:{"X-MS-Migration":"True"};switch(U.tokenType.toLowerCase()){case"skype":return x({"X-Skypetoken":U.token},P);case"aad":case"cae":return x({Authorization:"Bearer ".concat(U.token)},P);default:throw new Error("unsupported token type: ".concat(U.tokenType))}}function W(U){return U!=null&&typeof U.toString=="function"?U.toString():"[".concat(typeof U,"]")}function C(U){return typeof U=="object"&&U!==null&&U.stack!==void 0?(0,w.toJson)(U.stack):'"(no error.stack)"'}function z(U){return typeof U=="object"&&U!==null&&typeof U.message=="string"?U.message:"(no error.message)"}var x=this&&this.__assign||function(){return x=Object.assign||function(U){for(var T,P=1,ne=arguments.length;P<ne;P++){T=arguments[P];for(var M in T)Object.prototype.hasOwnProperty.call(T,M)&&(U[M]=T[M])}return U},x.apply(this,arguments)},b=this&&this.__awaiter||function(U,T,P,ne){function M(J){return J instanceof P?J:new P(function(he){he(J)})}return new(P||(P=Promise))(function(J,he){function Ie(Le){try{Ue(ne.next(Le))}catch(Qe){he(Qe)}}function Oe(Le){try{Ue(ne.throw(Le))}catch(Qe){he(Qe)}}function Ue(Le){Le.done?J(Le.value):M(Le.value).then(Ie,Oe)}Ue((ne=ne.apply(U,T||[])).next())})},S=this&&this.__generator||function(U,T){function P(Ue){return function(Le){return ne([Ue,Le])}}function ne(Ue){if(M)throw new TypeError("Generator is already executing.");for(;Ie&&(Ie=0,Ue[0]&&(Oe=0)),Oe;)try{if(M=1,J&&(he=2&Ue[0]?J.return:Ue[0]?J.throw||((he=J.return)&&he.call(J),0):J.next)&&!(he=he.call(J,Ue[1])).done)return he;switch(J=0,he&&(Ue=[2&Ue[0],he.value]),Ue[0]){case 0:case 1:he=Ue;break;case 4:return Oe.label++,{value:Ue[1],done:!1};case 5:Oe.label++,J=Ue[1],Ue=[0];continue;case 7:Ue=Oe.ops.pop(),Oe.trys.pop();continue;default:if(he=Oe.trys,!(he=he.length>0&&he[he.length-1])&&(Ue[0]===6||Ue[0]===2)){Oe=0;continue}if(Ue[0]===3&&(!he||Ue[1]>he[0]&&Ue[1]<he[3])){Oe.label=Ue[1];break}if(Ue[0]===6&&Oe.label<he[1]){Oe.label=he[1],he=Ue;break}if(he&&Oe.label<he[2]){Oe.label=he[2],Oe.ops.push(Ue);break}he[2]&&Oe.ops.pop(),Oe.trys.pop();continue}Ue=T.call(U,Oe)}catch(Le){Ue=[6,Le],J=0}finally{M=he=0}if(5&Ue[0])throw Ue[1];return{value:Ue[0]?Ue[1]:void 0,done:!0}}var M,J,he,Ie,Oe={label:0,sent:function(){if(1&he[0])throw he[1];return he[1]},trys:[],ops:[]};return Ie={next:P(0),throw:P(1),return:P(2)},typeof Symbol=="function"&&(Ie[Symbol.iterator]=function(){return this}),Ie};Object.defineProperty(D,"__esModule",{value:!0}),D.TrouterConnection=D.ReconnectReason=void 0;var _,N=K(21),w=K(3),R=K(15),j=K(1),G=K(16),Q=K(17),Y=K(2),$=K(4),V=K(0),re=K(5),te=K(6),Z=K(12),oe=(function(){function U(){this.cv=j.CLIENT_VERSION,this.ua="",this.hr="",this.v=""}return U})(),_e=(function(){function U(){this["force new connection"]=!0,this.reconnect=!1,this.query="",this.ackTimeoutMs=5e3}return U.prototype.rewriteUrlForProxy=function(T){return T},U})(),Ae="MS-CV",je=(function(){function U(T,P){this.logger=P,this.cvCounter=0;var ne=JSON.parse(T);this.startTS=this.safeJsonNumber(ne,"startTS",0),this.url=this.safeJsonString(ne,"url",""),this.shortUrl=this.safeJsonString(ne,"shortUrl",""),this.body=this.safeJsonString(ne,"body",""),this.headers=this.safeJsonRecord(ne,"headers",{}),this.id=this.safeJsonNumber(ne,"id",-1),this.method=this.safeJsonString(ne,"method",""),this.replied=!1,this.timedout=!1,this.receivedCv=this.headers[Ae],this.updateCvHeader()}return Object.defineProperty(U.prototype,"correlationVector",{get:function(){return this.receivedCv?"".concat(this.receivedCv,".").concat(this.cvCounter):""},enumerable:!1,configurable:!0}),U.prototype.on=function(T,P){T==="data"?this.dataCallback=P:T==="end"&&(typeof this.dataCallback=="function"&&this.dataCallback(this.body),P())},U.prototype.incrementCorrelationVector=function(){++this.cvCounter,this.updateCvHeader()},U.prototype.updateCvHeader=function(){var T=this.correlationVector;T&&(this.headers[Ae]=T)},U.prototype.safeJsonNumber=function(T,P,ne){var M;if(T!=null&&Object.prototype.hasOwnProperty.call(T,P)){var J=T;if(typeof J[P]=="number")return J[P];if(typeof J[P]=="string")return parseFloat(J[P]);(M=this.logger)===null||M===void 0||M.warn("unexpected type of '".concat(P,"': ").concat(typeof J[P]))}return ne},U.prototype.safeJsonString=function(T,P,ne){var M;if(T!=null&&Object.prototype.hasOwnProperty.call(T,P)){var J=T;if(typeof J[P]=="string")return J[P];(M=this.logger)===null||M===void 0||M.warn("unexpected type of '".concat(P,"': ").concat(typeof J[P]))}return ne},U.prototype.safeJsonRecord=function(T,P,ne){var M;if(T!=null&&Object.prototype.hasOwnProperty.call(T,P)){var J=T;if(typeof J[P]=="object")return J[P];(M=this.logger)===null||M===void 0||M.warn("unexpected type of '".concat(P,"': ").concat(typeof J[P]))}return ne},U})(),Me=(function(){function U(T,P,ne){this.request=T,this.responseData=P,this.sendResponse=ne}return U.prototype.writeHead=function(T,P){this.responseData.status=T,this.responseData.headers=P},U.prototype.write=function(T){this.responseData.body+=T},U.prototype.end=function(T){return T&&(this.responseData.body+=T),this.sendResponse(this.request,this.responseData)},U})(),qe=(function(){function U(T){this.name=T,this.args={},this.timeoutTimerId=0}return U})();(function(U){U[U.Configuration=0]="Configuration",U[U.ServerInitiated=1]="ServerInitiated"})(_||(D.ReconnectReason=_={}));var We=(function(){function U(T,P,ne,M,J,he,Ie,Oe){var Ue,Le=this;this.options=P,this.manager=ne,this.tokenProvider=M,this.usingLegacyTokenApi=J,this.protocolSelector=Ie,this.audienceSubscriptionState=Oe,this.WEBSOCKET_TRANSPORT_NAME="websocket",this.XHR_POLLING_TRANSPORT_NAME="xhr-polling",this.AUDIENCE_SUBSCRIPTION_RESULT_ERROR="Error",this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED="Unsubscribed",this.AUDIENCE_SUBSCRIPTION_RESULT_TIMEOUT="Timeout",this.AUDIENCE_SUBSCRIPTION_RESULT_BAD_REQUEST="BadRequest",this.AUDIENCE_SUBSCRIPTION_STATE_QUERY_PARAM_REGEX=/&audienceSubscriptionState=[^&]*|^audienceSubscriptionState=[^&]*&?/,this.connectionId="",this.inIncallMode=!1,this.connectionAttempt=0,this.connectedClientId="",this.isNavigatorOnline=!0,this.onNavigatorOnlineStatusUpdateBound=this.onNavigatorOnlineStatusUpdate.bind(this),this.c2cUrlBase="",this.connectingErrorsInRow=0,this.unauthorizedErrorCount=0,this.pendingSentEventTimers={},this.lastDisconnectReason="",this.UNKNOWN_TRANSPORT="unknown_transport",this.connectingErrorsThreshold=3,this.pendingAudienceSubscription=void 0,this.logger=new V.Logger("Connection",T),this.timeoutOptions=this.options.timeoutOptions,this.tokenBackoff=new Q.ExponentialBackoff(this.logger,this.timeoutOptions.maxBackoffMs),this.clientID=Date.now(),typeof window<"u"&&window.location&&(this.domId=window.location.hostname);var Qe=new oe;Qe.cv=j.CLIENT_VERSION,Qe.ua="",!((Ue=this.options)===null||Ue===void 0)&&Ue.clientInfo&&(Qe.ua=this.safeString(this.options.clientInfo.ua),Qe.v=this.safeString(this.options.clientInfo.v)),this.clientInfo=Qe,this.connectionTracker=new R.ConnectionTracker(T,this.clientID,this.clientInfo,function(){return Le.getServerState()},this.options.endpointId,this.options.clientCorrelationID,this.options.environment),this.applyConnectionTrackerOptions(P);var ut=this.options.incallModeTimeoutMs>0;if(this.fsm=new te.TrouterFsm(T,this,ut,this.protocolSelector),P.registration){var kt={registrarUrl:P.registration.registrarUrl,proxyUrlRewrite:P.rewriteUrlForProxy,registrationId:P.registration.registrationId,requestTimeoutMs:P.timeoutOptions.fetchTimeoutMs,initialRetryDelayMs:1e3,maxRetryDelayMs:P.timeoutOptions.maxBackoffMs,usingLegacyTokenApi:this.usingLegacyTokenApi,maxRetriesForGetToken:P.retryLimitOnTokenFetch,extraRegistrationHeaders:P.extraConnectionHeaders};this.registrarClient=(0,N.createRegistrarClient)(T,this.tokenProvider,kt)}this.userActivityState=he}return U.prototype.start=function(T){this.logger.info("Starting"),this.reconnectParams=T,typeof window<"u"&&window.navigator&&window.addEventListener?(this.isNavigatorOnline=window.navigator.onLine,window.addEventListener("online",this.onNavigatorOnlineStatusUpdateBound),window.addEventListener("offline",this.onNavigatorOnlineStatusUpdateBound),this.logger.debug("Registered for browser online notifications - current state: ".concat(this.isNavigatorOnline))):this.isNavigatorOnline=!0,this.fsm.start()},U.prototype.stop=function(T){this.logger.info("Stopping"),typeof window<"u"&&window.navigator&&(window.removeEventListener("online",this.onNavigatorOnlineStatusUpdateBound),window.removeEventListener("offline",this.onNavigatorOnlineStatusUpdateBound)),this.fsm.stop(T),this.connectionTracker.close()},U.prototype.configure=function(T){var P=this.options.trouterUrl!==T.trouterUrl;this.options=T,this.applyConnectionTrackerOptions(T),P&&(this.logger.info("Configuration changed. Reconnection required."),this.fsm.onReconnectRequired(!1,_.Configuration))},U.prototype.checkConnection=function(T){this.logger.info("checkConnection called with ".concat(T)),this.fsm.checkConnection(T),T&&this.connectionTracker.sendTelemetry(R.ClientEventName.CheckConnection,{disconnectDetected:T},[])},U.prototype.disableRegistrationsAndAutoReconnect=function(){this.stopRegistrationTimer(),this.cancelPendingRegistrationRequests(),this.fsm.disableAutoReconnect()},U.prototype.getServerState=function(){return new $.ServerState(this.connectionId,this.connectedClientId,this.domId?this.domId:"",this.allocateResult?this.allocateResult.url:"",this.allocateResult?this.allocateResult.surl:"",this.c2cUrlBase,this.connectionExpireTimestampInSecs)},U.prototype.getState=function(){return this.fsm.getState()},U.prototype.getToken=function(T,P,ne,M,J){var he=this;J===void 0&&(J=0),this.logger.info("Getting token ".concat(P?"with backoff":"without backoff"));var Ie=function(){he.connectionTracker.trackStart("token");var Oe={needFresh:!T,wwwAuthenticateHeader:ne,supportedTokenTypes:j.SUPPORTED_TOKEN_TYPES,purpose:"trouter"};he.logger.info("Requesting token: needFresh=".concat(Oe.needFresh," ")+"types=[".concat(j.SUPPORTED_TOKEN_TYPES,"], ")+"wwwAuthenticateHeader is ".concat(Oe.wwwAuthenticateHeader?"non empty":"empty")),he.tokenProvider(Oe).then(function(Ue){he.logger.debug("".concat(Ue.tokenType," token is received")),he.connectionTracker.trackEnd("token"),he.fsm.onTokenReceived(Ue,M,he.reconnectParams)}).catch(function(Ue){var Le=(0,w.toJson)(Ue.stack);if(he.logger.error("Getting token failed, will retry after timeout. Error: ".concat(Le)),he.connectionTracker.trackError("token",Le),!he.canRetryTokenFetchRequest(J+he.unauthorizedErrorCount))return he.connectionTracker.trackError("token","getToken retry limit hit, reached terminal error state"),he.resetTokenBackoff(),void he.fsm.onTerminalError();he.getToken(T,!0,ne,M,J+1)})};P?this.tokenBackoff.backoff("getting token",Ie):(this.resetTokenBackoff(),Ie())},U.prototype.startConnectionTimer=function(){var T=this;this.stopConnectionTimer(),this.logger.debug("Starting connection timeout for ".concat(this.timeoutOptions.connectionTimeoutMs," ms")),this.connectionTimeoutId=setTimeout(function(){T.logger.info("Connection timeout is fired"),T.fsm.onConnectingTimeout()},this.timeoutOptions.connectionTimeoutMs)},U.prototype.stopConnectionTimer=function(){this.connectionTimeoutId&&(this.logger.debug("Stopping connection timeout"),clearTimeout(this.connectionTimeoutId),this.connectionTimeoutId=void 0)},U.prototype.startPingTimer=function(){var T=this;this.transportTypeName==="websocket"?(this.logger.debug("Starting ping timeout for ".concat(this.timeoutOptions.pingTimeoutMs," ms")),this.pingTimerId=setInterval(function(){T.logger.info("Ping interval fired"),T.fsm.onPingInterval()},this.timeoutOptions.pingTimeoutMs)):this.logger.debug("Not starting ping for transport ".concat(this.transportTypeName))},U.prototype.stopPingTimer=function(){this.pingTimerId&&(this.logger.debug("Stopping ping timeout"),this.clearPingResponseTimer(),clearInterval(this.pingTimerId),this.pingTimerId=void 0)},U.prototype.shouldSkipRegistration=function(){return this.options.registration===void 0},U.prototype.hasCustomRegistrationTtl=function(){var T,P;return((T=this.options.registration)===null||T===void 0?void 0:T.registrarTtlSec)!==void 0&&((P=this.options.registration)===null||P===void 0?void 0:P.registrarTtlSec)!==0},U.prototype.startRegistrationTimer=function(){var T=this;this.stopRegistrationTimer();var P=this.getRegistrationTtl(),ne=P[0],M=P[1];if(ne<=30||!M)return this.logger.debug("Starting registration expiration timer (TTL ".concat(ne," sec)")),void(this.registrationTimerId=setTimeout(function(){T.registrationTimerId=void 0,T.logger.warn("Registration expired but the connection is still alive. Should never happen"),T.dispatchUnregistered()},1e3*ne));var J=ne-30;this.logger.debug("Starting registration extension timer for ".concat(J," sec")),this.registrationTimerId=setTimeout(function(){T.logger.info("Registration extension timer fired"),T.registrationTimerId=setTimeout(function(){T.registrationTimerId=void 0,T.logger.debug("Registration extension did not happen in time"),T.dispatchUnregistered()},3e4),T.fsm.onRegistrationNearExpiry()},1e3*J)},U.prototype.startRegistrationRetryTimer=function(){var T=this;this.stopRegistrationTimer(),this.registrationTimerId=setTimeout(function(){T.registrationTimerId=void 0,T.fsm.onRetryRegistration()},123e3)},U.prototype.stopRegistrationTimer=function(){this.registrationTimerId&&(this.logger.debug("Stopping registration timeout"),clearTimeout(this.registrationTimerId),this.registrationTimerId=void 0)},U.prototype.resendRegistration=function(){if(!this.registrarClient)throw new Error("Trouter Client not configured to handle registrations");return this.fsm.onResendRegistration(),Promise.resolve()},U.prototype.buildSocketIoUrlParams=function(T,P){if(!this.allocateResult)throw new Error("Allocate result is undefined in buildSocketIoUrlParams()");for(var ne={},M=this.allocateResult.connectparams,J=0,he=Object.keys(M);J<he.length;J++){var Ie=he[J];if(M[Ie]!==void 0){var Oe=M[Ie];typeof Oe=="string"||typeof Oe=="number"?ne[Ie]=Oe:this.logger.error("signatureData[".concat(Ie,"] has unsupported type ").concat(typeof Oe))}}return ne.v="v4",ne.tc=encodeURI((0,w.toJson)(this.clientInfo)),ne.timeout=this.timeoutOptions.pingTimeoutMs/1e3,ne.auth="true",this.options.endpointId&&(ne.epid=this.options.endpointId),T&&(ne.userActivity=encodeURI((0,w.toJson)(T))),P&&(ne.audienceSubscriptionState=encodeURIComponent((0,w.toJson)(P))),this.appendConnectedClientIds(this.buildQuery(ne),!0)},U.prototype.startSocketIo=function(T){var P,ne;if(this.logger.debug("Starting socket io"),this.connectionTracker.trackStart("connectSocket"),!this.allocateResult)throw new Error("Allocate result is undefined in startSocketIo()");var M=this.options.ioOptions?x({},this.options.ioOptions):new _e,J=this.userActivityState.state!==Y.UserActivityState.Unknown?this.userActivityState.increaseCvAndGetEventObject():void 0,he=(P=this.audienceSubscriptionState)===null||P===void 0?void 0:P.increaseCvAndGetEventObject();if(M["force new connection"]=!0,M.reconnect=!1,M.rewriteUrlForProxy=this.options.rewriteUrlForProxy,M.requestHeaders=x(x({},this.options.extraConnectionHeaders),L(T,this.usingLegacyTokenApi)),M.query=this.buildSocketIoUrlParams(J,he),this.logger.info("connecting to ".concat(this.allocateResult.socketio,"?").concat(M.query)),this.stopSocketIo(),this.socket=((ne=this.options.io)!==null&&ne!==void 0?ne:Z).connect(this.allocateResult.socketio,M),this.socket===void 0)throw new Error("Can't create Socket.io object");this.attachSocketIoHandlers(this.socket,T,J,he)},U.prototype.stopSocketIo=function(){if(this.socket){this.logger.debug("clearing socket.io");try{for(var T=0,P=["connecting","connect","connect_failed","close_during_connecting","disconnect","reconnect","reconnect_failed","reconnecting","error","message","trouter.connected","trouter.reconnect","trouter.message_loss"];T<P.length;T++){var ne=P[T];this.socket.removeAllListeners(ne)}this.socket.disconnect(),this.logger.debug("cleared socket"),this.socket=void 0}catch(M){this.logger.error("exception in disconnecting previous socket. Error: ".concat(C(M)))}}},U.prototype.dispatchConnected=function(){this.logger.info("dispatching connected"),this.manager.onConnected(this)},U.prototype.dispatchRegistered=function(){this.logger.info("dispatching registered"),this.manager.onRegistered(this)},U.prototype.dispatchUnregistered=function(){this.logger.info("dispatching unregistered"),this.manager.onUnregistered(this)},U.prototype.dispatchDownstreamRequest=function(T){var P=this;this.logger.debug("dispatching downstream request");try{var ne=new Me(T,new R.ResponseData(T.id),function(M,J){return P.logger.debug("sending response to downstream"),P.sendResponse(M,J)});this.manager.onDownstreamRequest(this,T,ne)}catch(M){this.logger.error("exception in socket.on message. Error : ".concat(C(M)))}},U.prototype.dispatchReconnecting=function(){this.logger.info("dispatching reconnecting"),this.manager.onReconnecting(this)},U.prototype.dispatchReconnectIsRequired=function(T,P){this.logger.info("dispatching reconnect is required by server"),this.manager.onReconnectIsRequired(this,T,P)},U.prototype.dispatchDisconnected=function(){this.logger.info("dispatching disconnected"),this.manager.onDisconnected(this)},U.prototype.dispatchTerminalError=function(){this.logger.info("dispatching terminal error"),this.manager.onTerminalError(this)},U.prototype.dispatchTrouterMessageLost=function(T){this.logger.info("dispatching trouter message lost"),this.manager.onTrouterMessageLost(T)},U.prototype.countDisconnectBeforeConnectionEstablishment=function(){this.logger.warn("counting disconnect before connection was fully established as a connection failure"),++this.connectingErrorsInRow>=this.connectingErrorsThreshold&&this.resetReconnectParamsOnErrorThreshold()},U.prototype.sendProcessedDroppedIndicators=function(T){var P=this;try{this.logger.debug("emitting processed flow tags to the server");var ne=new qe("trouter.processed_message_loss");ne.args={droppedIndicators:T},this.sendDownstreamEvent(ne,function(){P.logger.info("emitted processed flow tags to the server")})}catch(J){var M=C(J);this.logger.error("unable to send processed message loss event. Error: ".concat(M)),this.connectionTracker.trackError("trouter.processed_message_loss",M,!1)}},U.prototype.sendAllocateRequest=function(T){var P=this;this.connectionAttempt++,this.connectionTracker.trackNewConnection();var ne,M=this.options.trouterUrl,J=this.reconnectParams,he=typeof J?.se=="string"?parseInt(J.se,10):typeof J?.se=="number"?J.se:void 0;he&&he<=Date.now()+36e5&&(this.logger.warn("Dropping expired cached connection parameters: ".concat(new Date(he))),this.reconnectParams=J=void 0),J&&J.serviceUrl!==M&&(this.logger.warn("Dropping cached connection parameters for a different environment (".concat(J.serviceUrl,", now ").concat(M,")")),this.reconnectParams=J=void 0),J?.reconnectUrl&&(M=J.reconnectUrl),ne=J?x(x({},J),{serviceUrl:void 0,reconnectUrl:void 0}):null,M=(0,re.adaptUrl)(M,"v4a"),M=this.appendCorrelationIds(M,!1),M=this.appendEndpointId(M,!1),ne&&(M+="&".concat(this.buildQuery(ne)),ne.v||(M+="&v=".concat("v4"))),M=this.options.rewriteUrlForProxy(M);var Ie=new Request(M,{method:"POST",mode:"cors",headers:new Headers(x(x({"Content-Type":"text/plain"},this.options.extraConnectionHeaders),L(T,this.usingLegacyTokenApi)))});this.logger.info("sendAllocateRequest: POST ".concat(M)),this.connectionTracker.trackStart("allocation");var Oe,Ue=Date.now(),Le=-1,Qe=!1;(0,w.fetchWithTimeout)(Ie,this.timeoutOptions.fetchTimeoutMs).then(function(ut){var kt;if(Le=ut.status,!ut.ok)throw Oe=(kt=ut.headers.get("www-authenticate"))!==null&&kt!==void 0?kt:void 0,Qe=ut.headers.get("x-trouter-skypetoken-deprecated")==="1",P.logger.warn("Allocation request got response status ".concat(ut.status,", www-authenticate header was ").concat(Oe?"not empty":"empty")),new Error(ut.statusText);var Xt=ut.headers.get("content-type");if(!Xt||Xt!=="application/json"&&!Xt.startsWith("application/json;"))throw new Error("Content-type '".concat(Xt,"' is unexpected"));return P.connectionTracker.trackEnd("allocation"),ut.json()}).then(function(ut){P.unauthorizedErrorCount=0,P.onAllocationResponse(ut,T)}).catch(function(ut){P.connectingErrorsInRow++;var kt="".concat(ut).concat(Le>=0?", status code ".concat(Le):"");if(P.logger.error("".concat(P.connectingErrorsInRow," failed connecting attempt(s) in a row. ").concat(kt)),P.connectionTracker.trackError("allocation",kt),Qe){var Xt="Skypetoken deprecated response, not retrying any further";return P.logger.error(Xt),P.connectionTracker.trackError("allocation",Xt),void P.fsm.onTerminalError()}if(Le===401&&P.unauthorizedErrorCount++,!P.canRetryTokenFetchRequest(P.unauthorizedErrorCount)){var Xt="getToken retry limit hit, reached terminal error state";return P.connectionTracker.trackError("allocation",Xt),void P.fsm.onTerminalError()}if(Le!==-1||P.isNavigatorOnline){if(P.reconnectParams&&P.connectingErrorsInRow>=P.connectingErrorsThreshold){if(Le>=400&&Le<=599)P.resetReconnectParamsOnErrorThreshold();else if(P.reconnectParams.reconnectUrl&&P.connectingErrorsInRow%3==0){P.logger.warn("".concat(P.connectingErrorsInRow," connection attempts, testing nominal service URL"));var ji=Math.min(P.timeoutOptions.connectionTimeoutMs-(Date.now()-Ue)-500,P.timeoutOptions.fetchTimeoutMs);return void P.testNominalUrlConnectivity(ji).then(function(ei){P.connectionTracker.trackProgress("nomcheck",ei?"ok":"failed"),ei?(P.logger.warn("Nominal service URL is reachable, erasing cached reconnect URL"),P.reconnectParams&&delete P.reconnectParams.reconnectUrl):P.logger.warn("Nominal service URL is not reachable either, keeping cached reconnect URL"),P.fsm.onAllocationFailed(!1,void 0)},function(){P.fsm.onAllocationFailed(!1,void 0)})}}}else P.logger.info("Expected failure, the browser says it is not online at the moment");P.fsm.onAllocationFailed(Le===401,Oe)})},U.prototype.testNominalUrlConnectivity=function(T){var P=this;if(T<1e3)return this.logger.warn("There is no time left to reasonably perform the nominal service URL connectivity check (".concat(T," ms), falling back to assuming that the connectivity is fine")),Promise.resolve(!0);var ne;try{var M=new URL(this.options.trouterUrl);M.pathname="/",M.search="?"+this.buildQuery({check:Date.now(),cor_id:encodeURIComponent(this.options.clientCorrelationID),epid:encodeURIComponent(this.options.endpointId?this.options.endpointId:""),tc:encodeURIComponent((0,w.toJson)(this.clientInfo))}),ne=new Request(this.options.rewriteUrlForProxy(M.toString()),{method:"GET",headers:{Accept:"text/plain"}})}catch(J){return this.logger.warn("Nominal service URL connectivity test request could not be created (".concat(J,"), falling back to assuming that the connectivity is fine")),Promise.resolve(!0)}return(0,w.fetchWithTimeout)(ne,T).then(function(J){if(J.status!==200)throw new Error("Not 200 OK: ".concat(J.status," ").concat(J.statusText));return J.text()}).then(function(J){if(J!=="Trouter")throw new Error('Not "Trouter": '.concat(J.substring(0,16)).concat(J.length>16?"...":""));return!0}).catch(function(J){return P.logger.error("Nominal service URL connectivity test failed: ".concat(J)),!1})},U.prototype.sendPingRequest=function(){var T=this;if(this.socket&&this.pingResponseTimerId===void 0)try{this.logger.debug("emitting ping event");var P=!1;this.socket.emit("ping",function(){P!==!0&&T.onPingResponse()}),this.pingResponseTimerId=setTimeout(function(){T.logger.error("Ping response timeout is fired"),P=!0,T.clearPingResponseTimer(),T.fsm.onPingResponseTimeout()},this.timeoutOptions.pongTimeoutMs)}catch(M){var ne=C(M);this.logger.error("unable to send ping. Error: ".concat(ne)),this.connectionTracker.trackError("ping",ne,!1)}},U.prototype.connectV4c=function(T,P){var ne,M,J,he,Ie,Oe,Ue=this.options.ioOptions?x({},this.options.ioOptions):new _e;Ue["force new connection"]=!0,Ue.reconnect=!1,!((ne=this.reconnectParams)===null||ne===void 0)&&ne.serviceUrl&&(0,re.adaptUrl)(this.reconnectParams.serviceUrl,"v4c")!==(0,re.adaptUrl)(this.options.trouterUrl,"v4c")&&(this.logger.warn("Dropping cached connection parameters for a different environment (".concat(this.reconnectParams.serviceUrl,", now ").concat(this.options.trouterUrl,")")),this.reconnectParams=void 0);var Le=(he=(M=(0,re.redirectUrlIfPresent)(P))!==null&&M!==void 0?M:P?.kind!=="redirect-no-host"?(J=this.reconnectParams)===null||J===void 0?void 0:J.reconnectUrl:void 0)!==null&&he!==void 0?he:this.options.trouterUrl,Qe=(0,re.adaptUrl)(Le,"v4c");Ue["skipped handshake data"]={timeout:70,websocketUrl:Qe},Ue.query=this.buildV4cUrlParams(),Ue.rewriteUrlForProxy=this.options.rewriteUrlForProxy;try{if(this.stopSocketIo(),this.transportTypeName="websocket",this.socket=((Ie=this.options.io)!==null&&Ie!==void 0?Ie:Z).connect(this.options.trouterUrl,Ue),this.socket===void 0)throw new Error("failed to create Socket.io object");var ut=(Oe=this.audienceSubscriptionState)===null||Oe===void 0?void 0:Oe.increaseCvAndGetEventObject();this.attachSocketIoHandlers(this.socket,T,void 0,ut)}catch(kt){this.logger.error("".concat(kt)),this.connectionTracker.trackError("v4c","".concat(kt)),this.fsm.onV4cException()}},U.prototype.sendV4cAuthenticationEvent=function(T){var P,ne={headers:x(x({},this.options.extraConnectionHeaders),L(T,this.usingLegacyTokenApi)),connectparams:(0,re.reconnectParamsWithoutUrls)(this.reconnectParams)};(P=this.socket)===null||P===void 0||P.emit(j.USER_AUTHENTICATE_EVENT_NAME,ne)},U.prototype.setUserActivityState=function(T){var P=T.state!==this.userActivityState.state;this.userActivityState=T,P?(this.logger.info("Changing user activity state to '".concat(T.toEventJSON(),"'")),this.fsm.onSetNewUserActivityState()):(this.logger.debug("Not changing the same user activity state '".concat(T.toEventJSON(),"'")),this.manager.onUserActivityStateAccepted(T.correlationVector.value()))},U.prototype.sendUserActivityState=function(T,P){this.userActivityState.state!==Y.UserActivityState.Unknown&&(this.transportTypeName==="websocket"&&P?T===$.UserActivityEventReason.Connected?this.sendUserActivityStateMultiple(2):this.sendUserActivityStateMultiple(1):this.transportTypeName==="xhr-polling"&&T===$.UserActivityEventReason.Modified&&this.fsm.forceReconnect("user activity/force reconnect"))},U.prototype.setAudienceSubscriptionsAsync=function(T,P){var ne=this.audienceSubscriptionState;if(this.audienceSubscriptionState=T,this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME)return this.setAudienceSubscriptionsInternalAsync(T.increaseCvAndGetEventObject(),P);if(this.transportTypeName===this.XHR_POLLING_TRANSPORT_NAME){var M=this.setAudienceSubscriptionsLongpollInternalAsync(T.increaseCvAndGetEventObject(),P,ne);return this.fsm.forceReconnect("set audience subscription force reconnect"),M}throw new Error("set audience subscription executed on an unknown transport")},U.prototype.setAudienceSubscriptionsUnsafeAsync=function(T){if(T)return this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME?this.setAudienceSubscriptionsInternalAsync(T,15e3):void 0},U.prototype.setAudienceSubscriptionsInternalAsync=function(T,P){return b(this,void 0,void 0,function(){var ne,M,J=this;return S(this,function(he){switch(he.label){case 0:return this.logger.info("[WebSocket] Audience subscription set requested."),ne=new qe("audience.subscribe"),ne.args=T,[4,new Promise(function(Ie){var Oe=!1,Ue=setTimeout(function(){return Oe=!0,Ie(J.buildAudienceSubscriptionsTimeoutResponse(T))},P);J.sendDownstreamEvent(ne,function(Le,Qe){Oe||(clearTimeout(Ue),J.logger.debug("[Websocket] Audience subscription response: ".concat(Qe)),J.pendingAudienceSubscription&&J.onAudienceSubscriptionResult(Qe),Ie(Qe))})})];case 1:return M=he.sent(),this.manager.onAudiencesSetResolved(M,T.cv),[2,M]}})})},U.prototype.setAudienceSubscriptionsLongpollInternalAsync=function(T,P,ne){var M;return b(this,void 0,void 0,function(){var J,he,Ie,Oe,Ue,Le,Qe=this;return S(this,function(ut){switch(ut.label){case 0:return this.logger.info("[XHR Polling] Audience subscription set requested."),this.pendingAudienceSubscription&&(this.logger.error("Racing audience subscriptions occured. This situation resolves into undefined scenario and/or nasal demons."),clearTimeout(this.pendingAudienceSubscription.timeoutId)),T.audiences.length===0?[2,this.handleAudienceUnsubscribeLongpoll(T.cv,ne)]:[4,new Promise(function(kt){var Xt=setTimeout(function(){return Qe.pendingAudienceSubscription=void 0,kt(Qe.buildAudienceSubscriptionsTimeoutResponse(T))},P);Qe.pendingAudienceSubscription={audienceSetResolve:kt,timeoutId:Xt}})];case 1:return J=ut.sent(),this.manager.getState()===Y.TrouterState.Unknown||this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME?[2,J]:(he=J.responses[0],he?.result.audienceSubscriptionState===this.AUDIENCE_SUBSCRIPTION_RESULT_BAD_REQUEST?(this.clearAudienceSubscriptionStateQueryParam(),this.manager.onAudiencesSetResolved(J,T.cv),[2,J]):(Ie=J.responses.find(function(kt){return kt.audienceId===T.audiences[0].id}),Ie?.result.audienceSubscriptionState===this.AUDIENCE_SUBSCRIPTION_RESULT_ERROR?(this.clearAudienceSubscriptionStateQueryParam(),this.manager.onAudiencesSetResolved(J,T.cv),[2,J]):(Oe=((M=ne?.audienceSubscriptionModel.audienceSubscriptions[0])===null||M===void 0?void 0:M.id)!==he?.audienceId,ne&&Oe&&(Ue=this.mapToSyntheticAudienceSubscriptionResponses(ne.audienceSubscriptionModel.audienceSubscriptions,this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED,200),(Le=J.responses).push.apply(Le,Ue)),this.manager.onAudiencesSetResolved(J,T.cv),[2,J])))}})})},U.prototype.clearAudienceSubscriptionStateQueryParam=function(){var T,P,ne;!((ne=(P=(T=this.socket)===null||T===void 0?void 0:T.socket)===null||P===void 0?void 0:P.options)===null||ne===void 0)&&ne.query&&(this.socket.socket.options.query=this.socket.socket.options.query.replace(this.AUDIENCE_SUBSCRIPTION_STATE_QUERY_PARAM_REGEX,""))},U.prototype.handleAudienceUnsubscribeLongpoll=function(T,P){var ne;this.audienceSubscriptionState=void 0;var M={responses:[]};if(P){var J=this.mapToSyntheticAudienceSubscriptionResponses(P.audienceSubscriptionModel.audienceSubscriptions,this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED,200);(ne=M.responses).push.apply(ne,J)}return this.manager.onAudiencesSetResolved(M,T),M},U.prototype.buildAudienceSubscriptionsTimeoutResponse=function(T){return this.logger.error("Audience subscription attempt has timed out."),{responses:this.mapToSyntheticAudienceSubscriptionResponses(T.audiences,this.AUDIENCE_SUBSCRIPTION_RESULT_TIMEOUT)}},U.prototype.mapToSyntheticAudienceSubscriptionResponses=function(T,P,ne){return T.map(function(M){return{audienceId:M.id,result:{audienceSubscriptionState:P,responseStatus:ne}}})},U.prototype.expediteBackoff=function(){this.tokenBackoff.expediteIfPending()},U.prototype.sendRegisterRequest=function(){var T=this;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");if(!this.allocateResult)throw new Error("Allocate result is undefined in sendRegisterRequest()");this.logger.info("sending register request");var P=new w.Timespan;this.connectionTracker.trackStart("registration");var ne=this.getRegistrationTtl()[0];this.registrarClient.register({appId:this.options.registration.pnhAppId,aesKey:"",languageId:"en-US",platform:this.options.registration.platform,templateKey:this.options.registration.pnhTemplateKey,platformUIVersion:this.options.registration.platformUIVersion,productContext:this.options.registration.productContext},{TROUTER:[{context:this.options.registration.context,path:this.allocateResult.surl,ttl:ne}]}).then(function(){T.logger.info("Register request successful"),T.connectionTracker.trackEnd("registration"),T.fsm.onRegistrationSucceeded(),T.connectionTracker.sendTelemetry(R.ClientEventName.Registration,{duration:P.duration},[])}).catch(function(M){T.logger.error("Register request failed. Error: ".concat(M)),T.connectionTracker.trackError("registration",z(M)),T.fsm.onRegistrationFailed(),T.connectionTracker.sendTelemetry(R.ClientEventName.Registration,{duration:P.duration},[])})},U.prototype.sendUnregisterRequest=function(){var T=this;this.logger.info("sending unregister request");var P=new w.Timespan;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");this.connectionTracker.trackStart("unregistration"),this.registrarClient.unregister().then(function(){T.logger.info("Unregister request successful"),T.connectionTracker.trackEnd("unregistration"),T.fsm.onUnregistrationDone(),T.connectionTracker.sendTelemetry(R.ClientEventName.Unregistration,{duration:P.duration},[])}).catch(function(ne){T.logger.error("Unregister request failed. Error: ".concat(ne)),T.connectionTracker.trackError("unregistration",z(ne)),T.fsm.onUnregistrationDone(),T.connectionTracker.sendTelemetry(R.ClientEventName.Unregistration,{duration:P.duration},[])})},U.prototype.resetTokenBackoff=function(){this.tokenBackoff.reset()},U.prototype.cancelPendingRegistrationRequests=function(){this.registrarClient&&this.registrarClient.cancelPendingRequests()},U.prototype.clearSentEventTimers=function(){var T=Object.keys(this.pendingSentEventTimers);if(T.length>0){this.logger.debug("Clearing all pending downstream events related timers");for(var P=0,ne=T;P<ne.length;P++){var M=ne[P];this.clearSentEventTimer(Number(M))}}},U.prototype.restartIncallModeTimer=function(){var T=this;this.clearIncallModeTimerId(),this.logger.debug("Restarting incall mode timer"),this.incallModeTimerId=setTimeout(function(){T.logger.info("Call mode timer fired"),T.fsm.onIncallModeTimer()},this.options.incallModeTimeoutMs)},U.prototype.enterIncallMode=function(){this.logger.info("Entering incall mode"),this.timeoutOptions=this.options.incallTimeoutOptions,this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!0},U.prototype.exitIncallMode=function(){this.logger.info("Exiting incall mode"),this.clearIncallModeTimerId(),this.timeoutOptions=this.options.timeoutOptions,this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!1},U.prototype.isIncallMode=function(){return this.inIncallMode},U.prototype.sendDisconnectTelemetryEvent=function(T){var P={reason:T,serverClosed:!this.fsm.isActive()};this.connectionTracker.trackDisconnected(P),this.connectionTracker.clearConnectedInfo()},U.prototype.forceReconnectDueToNoRegistration=function(){this.fsm.forceReconnect("force reconnect due to no registration")},U.prototype.resetReconnectParamsOnErrorThreshold=function(){this.logger.warn("".concat(this.connectingErrorsInRow," connection attempts, server-side failure: erasing cached connection parameters")),this.reconnectParams=void 0},U.prototype.onSocketConnecting=function(T){this.logger.info("onSocketConnecting(".concat(T,")")),this.transportTypeName=T,this.connectionTracker.trackProgress("connecting",this.transportTypeName),this.fsm.onConnecting()},U.prototype.onSocketConnect=function(T){this.logger.info("onSocketConnect"),this.fsm.onSocketConnect(T)},U.prototype.onSocketConnectFailed=function(T){this.logger.error("onSocketConnectFailed"),this.connectionTracker.trackError("connect_failed",T,!0,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),this.fsm.onConnectingFailed()},U.prototype.onSocketDisconnect=function(T){var P=this.connectionTracker.getSessionLength()||0,ne=G.DisconnectReason.fromRawReason(T);this.logger.error("onSocketDisconnect, reason: ".concat(ne.reason)),ne.reason==="dup"&&this.lastDisconnectReason==="dup"&&P<this.options.duplicateDisconnectThresholdMs&&(this.logger.warn("Socket was closed by server as Duplicate for the second time in a row "+"after ".concat(P," ms which is below the threshold of ")+"".concat(this.options.duplicateDisconnectThresholdMs," ms. Resetting cached ")+"connection parameters and making a new allocation."),this.reconnectParams=void 0),this.lastDisconnectReason=ne.reason,this.fsm.onSocketDisconnect(ne),this.connectionExpireTimestampInSecs=void 0},U.prototype.onSocketReconnect=function(){this.logger.error("onSocketReconnect"),this.fsm.onTrouterConnected()},U.prototype.onSocketReconnectFailed=function(T){this.logger.error("onSocketReconnectFailed with '".concat(T,"'")),this.fsm.onSocketDisconnect(G.DisconnectReason.fromSocketIoEventData("reconnecterror",T))},U.prototype.onSocketReconnecting=function(){this.logger.error("onSocketReconnecting")},U.prototype.onSocketError=function(T){this.logger.error("onSocketError with '".concat((0,w.toJson)(T),"'")),this.fsm.isConnecting()&&++this.connectingErrorsInRow>=this.connectingErrorsThreshold&&this.resetReconnectParamsOnErrorThreshold(),this.connectionTracker.trackError("connectSocket",W(T)),this.fsm.onSocketDisconnect(G.DisconnectReason.fromSocketIoEventData("socketerror",T))},U.prototype.onSocketMessage=function(T){var P,ne=this;this.logger.debug("onSocketMessage");var M;try{M=new je(T,this.logger);var J=(P=M.headers)===null||P===void 0?void 0:P["X-Microsoft-Skype-Chain-ID"],he=J?" Chain-Id ".concat(J):"";this.logger.info("Received request N ".concat(M.id).concat(he," CV ").concat(M.correlationVector," to '").concat(M.url,"'")),M.startTS=Date.now(),M.url&&this.urlPath&&M.url.startsWith(this.urlPath)&&(M.shortUrl=M.url.substring(this.urlPath.length))}catch(Oe){var Ie=C(Oe);return this.logger.error("unable to parse request. Error: ".concat(Ie)),this.connectionTracker.trackRequest(void 0,Ie),void this.connectionTracker.sendResponseError("unable to parse request, error: ".concat(Oe))}M.timeoutTimerId=setTimeout(function(){if(!M.replied){ne.logger.error("Request ".concat(M.id," timed out"));var Oe=new R.ResponseData(M.id);Oe.status=504,Oe.headers={"Trouter-Responder":"ClientLib"},ne.sendResponse(M,Oe),M.timedout=!0}},this.timeoutOptions.requestTimeoutMs);try{this.connectionTracker.trackRequest(M),this.fsm.onDownstreamRequest(M)}catch(Oe){this.logger.error("exception in socket.on message. Error: ".concat(C(Oe))),this.connectionTracker.sendResponseError(z(Oe),M,void 0)}},U.prototype.onTrouterConnected=function(T,P,ne){var M,J,he,Ie,Oe=this;if((0,re.isV4ConnectEvent)(T)){var Ue=T;this.allocateResult=x(x({},Ue),{ttl:T.ttl.toString()}),this.populateAndCacheReconnectParams(Ue,Ue.reconnectUrl),this.populateConnectionStateFields(Ue)}else if(!this.allocateResult)return void this.logger.error("Invalid internal state - received onTrouterConnected while allocateResult is not set");this.connectingErrorsInRow=0,this.logger.info("onTrouterConnected: ".concat(this.allocateResult.url)),this.transportTypeName==="xhr-polling"&&P&&this.manager.onUserActivityStateAccepted(P.cv),!((he=(J=(M=this.socket)===null||M===void 0?void 0:M.socket)===null||J===void 0?void 0:J.options)===null||he===void 0)&&he.query&&(this.socket.socket.options.query+="&connected=true"),this.urlPath=this.allocateResult.url.replace(/https?:\/\/([A-z0-9\:\$\-\_\.\+\!\*\"\(\)\,]*)\//,"/");var Le=this.connectedUrl!==this.allocateResult.url;this.connectedUrl=this.allocateResult.url,this.connectionExpireTimestampInSecs=(0,w.calculateExpireTsInSec)((0,re.ensureNumber)(T.ttl)),this.connectionTracker.trackEnd("connectSocket"),this.connectionTracker.trackConnected(Le,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),(Ie=this.setAudienceSubscriptionsUnsafeAsync(ne))===null||Ie===void 0||Ie.catch(function(Qe){return Oe.logger.error("Re-subscribe to audiences has failed with ".concat(Qe))}),this.fsm.onTrouterConnected()},U.prototype.onTrouterReconnect=function(T){var P=T.target;this.logger.info("onTrouterReconnect target: ".concat(P)),P==="self"?this.fsm.onReconnectRequired(!0,_.ServerInitiated):this.fsm.onReconnectRequired(!1,_.ServerInitiated,T)},U.prototype.onTrouterMessageLoss=function(T){this.logger.debug("onTrouterMessageLoss"),this.fsm.onTrouterMessageLost(T.droppedIndicators)},U.prototype.onAudienceSubscriptionResult=function(T){this.logger.info("onAudienceSubscriptionResult"),this.pendingAudienceSubscription&&(clearTimeout(this.pendingAudienceSubscription.timeoutId),this.pendingAudienceSubscription.audienceSetResolve(T),this.pendingAudienceSubscription=void 0)},U.prototype.buildV4cUrlParams=function(){var T={};return T.tc=encodeURI((0,w.toJson)(this.clientInfo)),T.timeout=Math.floor(this.timeoutOptions.pingTimeoutMs/1e3),this.options.endpointId&&(T.epid=this.options.endpointId),this.appendConnectedClientIds(this.buildQuery(T),!0)},U.prototype.attachSocketIoHandlers=function(T,P,ne,M){var J=this;T.on("connecting",function(he){J.onSocketConnecting(he)}),T.on("connect",function(){J.onSocketConnect(P)}),T.on("connect_failed",function(he){J.onSocketConnectFailed(he)}),T.on("close_during_connecting",function(he){J.onSocketConnectFailed(he)}),T.on("disconnect",function(he){J.onSocketDisconnect(he)}),T.on("reconnect",function(){J.onSocketReconnect()}),T.on("reconnect_failed",function(he){J.onSocketReconnectFailed(he)}),T.on("reconnecting",function(){J.onSocketReconnecting()}),T.on("error",function(he){J.onSocketError(he)}),T.on("message",function(he){J.onSocketMessage(he)}),T.on("trouter.connected",function(he){J.onTrouterConnected(he,ne,M)}),T.on("trouter.reconnect",function(he){J.onTrouterReconnect(he)}),T.on("trouter.message_loss",function(he){J.onTrouterMessageLoss(he)}),T.on("audience.subscriptionresult",function(he,Ie){J.onAudienceSubscriptionResult(Ie)})},U.prototype.onNavigatorOnlineStatusUpdate=function(){var T=window.navigator.onLine;this.logger.debug("Browser online status update - new state: ".concat(T,", previously: ").concat(this.isNavigatorOnline)),T&&!this.isNavigatorOnline?(this.isNavigatorOnline=!0,this.tokenBackoff.expediteIfPending(),this.connectionTracker.trackProgress("browserNet","online")):!T&&this.isNavigatorOnline&&(this.isNavigatorOnline=!1,this.connectionTracker.trackProgress("browserNet","offline"))},U.prototype.onAllocationResponse=function(T,P){this.logger.info("Received allocation response ".concat(JSON.stringify(T))),this.allocateResult=T,this.populateAndCacheReconnectParams(this.allocateResult,"".concat(this.allocateResult.socketio,"v4/a")),this.populateConnectionStateFields(this.allocateResult),this.fsm.onAllocationSucceed(P)},U.prototype.populateAndCacheReconnectParams=function(T,P){this.reconnectParams=x({serviceUrl:this.options.trouterUrl,reconnectUrl:P},T.connectparams),this.manager.onConnectionParametersUpdated(this.reconnectParams)},U.prototype.populateConnectionStateFields=function(T){var P,ne,M=typeof T.ttl=="string"?parseInt(T.ttl,10):T.ttl;if(this.connectionExpireTimestampInSecs=(0,w.calculateExpireTsInSec)(M),this.connectionId=(P=T.id)!==null&&P!==void 0?P:"",this.connectedClientId=T.ccid,this.logger.debug("connected client id set {connectedClientId:".concat(this.connectedClientId,"}")),this.c2cUrlBase=(ne=T.curlb)!==null&&ne!==void 0?ne:"",this.c2cUrlBase===""){var J=T.surl.indexOf("://");J>=0&&(J=T.surl.indexOf("/",J+3))>=5&&T.surl.substr(J-5,5)===":3443"&&(this.c2cUrlBase=T.surl.substr(0,J-5))}},U.prototype.onPingResponse=function(){this.logger.debug("onPingResponse"),this.connectionTracker.increasePingResponseCount(),this.clearPingResponseTimer(),this.fsm.onPingResponse()},U.prototype.clearPingResponseTimer=function(){this.pingResponseTimerId!==void 0&&(clearTimeout(this.pingResponseTimerId),this.pingResponseTimerId=void 0)},U.prototype.buildQuery=function(T){for(var P=[],ne=0,M=Object.keys(T);ne<M.length;ne++){var J=M[ne];T[J]!==void 0&&P.push("".concat(J,"=").concat(T[J]))}return P.join("&")},U.prototype.appendConnectedClientIds=function(T,P){var ne="";T.includes("ccid=")||(ne="ccid=".concat(this.connectedClientId,"&")),this.domId&&(ne+="dom=".concat(this.domId,"&")),ne.length>0&&(ne=ne.slice(0,-1));var M=P||T.includes("?")?"&":"?";return this.appendCorrelationIds(T+M+ne,P)},U.prototype.appendEndpointId=function(T,P){var ne=P||T.includes("?")?"&":"?";return!T.includes("epid")&&this.options.endpointId?"".concat(T).concat(ne,"epid=").concat(this.options.endpointId):T},U.prototype.appendCorrelationIds=function(T,P){var ne=P||T.includes("?")?"&":"?";return T.includes("cor_id")?T:"".concat(T).concat(ne,"cor_id=").concat(this.options.clientCorrelationID)+"&con_num=".concat(this.clientID,"_").concat(this.connectionAttempt)},U.prototype.safeString=function(T){return typeof T=="string"?T:""},U.prototype.sendResponse=function(T,P){var ne,M,J;if(T.timedout)return this.logger.error("Request ".concat(T.id," already timed out")),1;if(T.replied)return this.logger.error("Response for request ".concat(T.id," already sent")),2;clearTimeout(T.timeoutTimerId),T.timeoutTimerId=void 0,T.replied=!0,P.headers=(ne=P.headers)!==null&&ne!==void 0?ne:{};var he=T.correlationVector;this.logger.info("Sending response N ".concat(T.id," CV ").concat(he," with status ").concat(P.status)),he&&(P.headers[Ae]=he),!((M=T.headers)===null||M===void 0)&&M["trouter-request"]&&(P.headers["trouter-request"]=T.headers["trouter-request"]);var Ie=Date.now()-T.startTS;if(P.headers["trouter-client"]=(0,w.toJson)({cd:Ie}),!((J=T.headers)===null||J===void 0)&&J["trouter-is-broadcast"]&&(P.headers["trouter-is-broadcast"]=T.headers["trouter-is-broadcast"]),this.logger.debug("response: ".concat((0,w.toJson)(P))),!this.socket)return this.connectionTracker.sendResponseError("no socket",T,P),4;try{return this.socket.send((0,w.toJson)(P)),P.sentTS=Date.now(),T.incrementCorrelationVector(),this.connectionTracker.trackResponse(T,Ie,P),this.transportTypeName==="websocket"&&this.sendPingRequest(),0}catch(Ue){var Oe="unable to send data on response.end. Error: ".concat(C(Ue));return this.logger.error(Oe),this.connectionTracker.sendResponseError(Oe,T,P),4}},U.prototype.sendUserActivityStateMultiple=function(T){var P=this,ne=new qe("user.activity"),M=this.userActivityState.increaseCvAndGetEventObject();ne.args=M,this.logger.debug("Sending user activity '".concat(this.userActivityState.toEventJSON(),"', remaining ").concat(T-1));var J=!1;this.sendDownstreamEvent(ne,function(){if(J!==!0&&(P.logger.info("User activity state: ".concat(M.state,", cv: ").concat(M.cv," accepted")),P.manager.onUserActivityStateAccepted(M.cv),P.clearSentEventTimer(ne.timeoutTimerId),T>1)){var he=setTimeout(function(){P.clearSentEventTimer(he),P.sendUserActivityStateMultiple(T-1)},P.options.userActivitySecondResendDelayMs);P.registerSentEventTimer(he,"user.activity/resend")}}),ne.timeoutTimerId=setTimeout(function(){P.logger.error("Activity state response timeout is fired"),J=!0,P.fsm.onActivityStateResponseTimeout(),P.clearSentEventTimer(ne.timeoutTimerId)},this.timeoutOptions.userActivityResponseTimeoutMs),this.registerSentEventTimer(ne.timeoutTimerId,"user.activity/response")},U.prototype.sendDownstreamEvent=function(T,P){this.logger.debug("Sending downstream event ".concat(T.name)),this.socket&&this.socket.emit(T.name,T.args,P)},U.prototype.registerSentEventTimer=function(T,P){this.logger.debug("registering timer ".concat(T," -> ").concat(P)),this.pendingSentEventTimers[T]=P},U.prototype.clearSentEventTimer=function(T){var P=this.pendingSentEventTimers[T];this.logger.debug("clearing timer ".concat(T," -> ").concat(P)),delete this.pendingSentEventTimers[T],clearTimeout(T)},U.prototype.getRegistrationTtl=function(){var T,P,ne=(0,w.calculateTtlInSec)(this.connectionExpireTimestampInSecs);if(this.logger.debug("Current connectionID will expire in ".concat(ne," seconds")),((T=this.options.registration)===null||T===void 0?void 0:T.registrarTtlSec)&&ne>0){var M=this.options.registration.registrarTtlSec<ne;return[Math.min(this.options.registration.registrarTtlSec,ne),M]}return!((P=this.options.registration)===null||P===void 0)&&P.registrarTtlSec?[this.options.registration.registrarTtlSec,!1]:ne>0?[ne,!1]:[3600,!1]},U.prototype.clearIncallModeTimerId=function(){this.incallModeTimerId!==void 0&&(this.logger.debug("Clearing in-call mode timer"),clearTimeout(this.incallModeTimerId),this.incallModeTimerId=void 0)},U.prototype.applyConnectionTrackerOptions=function(T){try{T.eventLogger&&typeof T.eventLogger.logEvent=="function"?(this.connectionTracker.mergeSettings(T.telemetrySettings),this.connectionTracker.enable(T.eventLogger)):this.logger.warn("Trouter client event logging disabled due to invalid configuration.")}catch(P){this.logger.warn("Trouter client event logging disabled. Error: ".concat(C(P))),this.connectionTracker.disable()}},U.prototype.canRetryTokenFetchRequest=function(T){var P=this.options.retryLimitOnTokenFetch;return P==null||T<P||(this.logger.warn("Reached limit on maximum number of token fetch request. Current count: ".concat(T,", retry limit: ").concat(P)),!1)},U})();D.TrouterConnection=We},function(q,D,K){Object.defineProperty(D,"__esModule",{value:!0}),D.MessageHandlerRegistry=void 0;var L=K(1),W=K(0),C=(function(){function z(x){this.messageHandlers=[],this.logger=new W.Logger("MessageHandlers",x)}return z.prototype.register=function(x){if(this.messageHandlers.some(function(b){return b===x}))throw new Error("Registering the same handler twice is not allowed");this.messageHandlers.push(x)},z.prototype.clear=function(){this.logger.debug("Clearing message handlers"),this.messageHandlers=[]},z.prototype.active=function(){return this.messageHandlers.length>0},z.prototype.handleMessage=function(x){for(var b={resultCode:L.UNHANDLED_MESSAGE_ACK,isHandled:!1},S=0,_=this.messageHandlers;S<_.length;S++){var N=_[S],w=this.safeExecuteHandle(N,x);if(w!==void 0&&(w.isHandled===void 0||w.isHandled))return w.resultCode===void 0&&(w.resultCode=L.HANDLED_MESSAGE_ACK),w}return b},z.prototype.safeExecuteHandle=function(x,b){try{return x.handleMessage(b)}catch(S){return void this.logger.warn("Trouter message handler threw an exception: ".concat(S))}},z})();D.MessageHandlerRegistry=C},function(q,D,K){function L(z){var x,b=this;return function(S){return W(b,void 0,void 0,function(){return C(this,function(_){return S&&(x=void 0),[2,new Promise(function(N,w){z(S).then(function(R){x=R,N(R)}).catch(function(R){x!==void 0&&x.length>0&&N(x),w(R)})})]})})}}var W=this&&this.__awaiter||function(z,x,b,S){function _(N){return N instanceof b?N:new b(function(w){w(N)})}return new(b||(b=Promise))(function(N,w){function R(Q){try{G(S.next(Q))}catch(Y){w(Y)}}function j(Q){try{G(S.throw(Q))}catch(Y){w(Y)}}function G(Q){Q.done?N(Q.value):_(Q.value).then(R,j)}G((S=S.apply(z,x||[])).next())})},C=this&&this.__generator||function(z,x){function b(G){return function(Q){return S([G,Q])}}function S(G){if(_)throw new TypeError("Generator is already executing.");for(;R&&(R=0,G[0]&&(j=0)),j;)try{if(_=1,N&&(w=2&G[0]?N.return:G[0]?N.throw||((w=N.return)&&w.call(N),0):N.next)&&!(w=w.call(N,G[1])).done)return w;switch(N=0,w&&(G=[2&G[0],w.value]),G[0]){case 0:case 1:w=G;break;case 4:return j.label++,{value:G[1],done:!1};case 5:j.label++,N=G[1],G=[0];continue;case 7:G=j.ops.pop(),j.trys.pop();continue;default:if(w=j.trys,!(w=w.length>0&&w[w.length-1])&&(G[0]===6||G[0]===2)){j=0;continue}if(G[0]===3&&(!w||G[1]>w[0]&&G[1]<w[3])){j.label=G[1];break}if(G[0]===6&&j.label<w[1]){j.label=w[1],w=G;break}if(w&&j.label<w[2]){j.label=w[2],j.ops.push(G);break}w[2]&&j.ops.pop(),j.trys.pop();continue}G=x.call(z,j)}catch(Q){G=[6,Q],N=0}finally{_=w=0}if(5&G[0])throw G[1];return{value:G[0]?G[1]:void 0,done:!0}}var _,N,w,R,j={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return R={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R};Object.defineProperty(D,"__esModule",{value:!0}),D.addCacheAsBackupTo=void 0,D.addCacheAsBackupTo=L},function(q,D,K){var L=this&&this.__awaiter||function(Y,$,V,re){function te(Z){return Z instanceof V?Z:new V(function(oe){oe(Z)})}return new(V||(V=Promise))(function(Z,oe){function _e(Me){try{je(re.next(Me))}catch(qe){oe(qe)}}function Ae(Me){try{je(re.throw(Me))}catch(qe){oe(qe)}}function je(Me){Me.done?Z(Me.value):te(Me.value).then(_e,Ae)}je((re=re.apply(Y,$||[])).next())})},W=this&&this.__generator||function(Y,$){function V(je){return function(Me){return re([je,Me])}}function re(je){if(te)throw new TypeError("Generator is already executing.");for(;_e&&(_e=0,je[0]&&(Ae=0)),Ae;)try{if(te=1,Z&&(oe=2&je[0]?Z.return:je[0]?Z.throw||((oe=Z.return)&&oe.call(Z),0):Z.next)&&!(oe=oe.call(Z,je[1])).done)return oe;switch(Z=0,oe&&(je=[2&je[0],oe.value]),je[0]){case 0:case 1:oe=je;break;case 4:return Ae.label++,{value:je[1],done:!1};case 5:Ae.label++,Z=je[1],je=[0];continue;case 7:je=Ae.ops.pop(),Ae.trys.pop();continue;default:if(oe=Ae.trys,!(oe=oe.length>0&&oe[oe.length-1])&&(je[0]===6||je[0]===2)){Ae=0;continue}if(je[0]===3&&(!oe||je[1]>oe[0]&&je[1]<oe[3])){Ae.label=je[1];break}if(je[0]===6&&Ae.label<oe[1]){Ae.label=oe[1],oe=je;break}if(oe&&Ae.label<oe[2]){Ae.label=oe[2],Ae.ops.push(je);break}oe[2]&&Ae.ops.pop(),Ae.trys.pop();continue}je=$.call(Y,Ae)}catch(Me){je=[6,Me],Z=0}finally{te=oe=0}if(5&je[0])throw je[1];return{value:je[0]?je[1]:void 0,done:!0}}var te,Z,oe,_e,Ae={label:0,sent:function(){if(1&oe[0])throw oe[1];return oe[1]},trys:[],ops:[]};return _e={next:V(0),throw:V(1),return:V(2)},typeof Symbol=="function"&&(_e[Symbol.iterator]=function(){return this}),_e};Object.defineProperty(D,"__esModule",{value:!0}),D.TrouterManager=D.AudienceSubscriptionState=D.UserActivityObject=void 0;var C=K(3),z=K(2),x=K(4),b=K(0),S=K(5),_=K(18),N=K(7),w=K(6),R=K(19),j=(function(){function Y($,V){this.state=$,this.correlationVector=V!==void 0?V:C.CorrelationVector.extend()}return Y.prototype.getStateString=function(){switch(this.state){case z.UserActivityState.Active:return"active";case z.UserActivityState.Inactive:return"inactive";case z.UserActivityState.Unknown:return"unknown";default:return"undefined"}},Y.prototype.increaseCvAndGetEventObject=function(){return this.correlationVector.increase(),this.toEventObject()},Y.prototype.toEventObject=function(){return{state:this.getStateString(),cv:this.correlationVector.value()}},Y.prototype.toEventJSON=function(){return(0,C.toJson)(this.toEventObject())},Y})();D.UserActivityObject=j;var G=(function(){function Y($,V){V===void 0&&(V=C.CorrelationVector.extend()),this.audienceSubscriptionModel=$,this.correlationVector=V}return Y.prototype.increaseCvAndGetEventObject=function(){return this.correlationVector.increase(),this.toEventObject()},Y.prototype.toEventObject=function(){return{audiences:this.audienceSubscriptionModel.audienceSubscriptions,cv:this.correlationVector.value()}},Y.prototype.toEventJSON=function(){return(0,C.toJson)(this.toEventObject())},Y})();D.AudienceSubscriptionState=G;var Q=(function(){function Y($,V,re,te,Z,oe){var _e=this;this.logFunc=$,this.options=V,this.tokenProvider=re,this.usingLegacyTokenApi=te,this.listener=Z,this.tokenTypeProtocolSelector=function(Ae,je){return _e.options.forceV4aProtocol?"v4a":(0,S.usedProtocol)(Ae,je)},this.logger=new b.Logger("Manager",$),this.logger.info("Created TrouterManager with options ".concat((0,C.toJson)(this.options))),this.fsm=new R.TrouterManagerFsm($,this),this.baseEndpointUrl="",this.processedMessageLoss={},this.userActivityObject=new j(z.UserActivityState.Unknown),this.protocolSelector=oe??this.tokenTypeProtocolSelector.bind(this)}return Y.prototype.start=function(){this.fsm.start()},Y.prototype.stop=function($){this.fsm.stop($)},Y.prototype.configure=function($){this.options=$,this.firstConnection!==void 0&&this.firstConnection.configure($),this.secondConnection!==void 0&&this.secondConnection.configure($),this.logger.info("Reconfigured TrouterManager with options ".concat((0,C.toJson)(this.options)))},Y.prototype.checkConnection=function($){this.firstConnection!==void 0&&this.firstConnection.checkConnection($),this.secondConnection!==void 0&&this.secondConnection.checkConnection($)},Y.prototype.resendRegistration=function(){return L(this,void 0,void 0,function(){return W(this,function($){return this.secondConnection!==void 0?(this.logger.info("Resending registration on the second/new connection"),[2,this.secondConnection.resendRegistration()]):this.firstConnection!==void 0?(this.logger.info("Resending registration on the first/current connection"),[2,this.firstConnection.resendRegistration()]):(this.logger.info("No connection to resend registration on, will be done upon (re)connect"),[2])})})},Y.prototype.getServerState=function(){if(this.firstConnection!==void 0)return this.firstConnection.getServerState()},Y.prototype.getState=function(){return this.fsm.getState()},Y.prototype.isInTerminalState=function(){return this.fsm.getInternalState()===x.TrouterManagerState.TerminalError},Y.prototype.reportStateInfo=function(){var $=this.firstConnection?w.State[this.firstConnection.getState()]:"Unknown",V=x.TrouterManagerState[this.fsm.getInternalState()];if(this.secondConnection){var re=w.State[this.secondConnection.getState()];return"Manager ".concat(V,"; 1st ").concat($,"; 2nd ").concat(re)}return"Manager ".concat(V,"; Connection ").concat($)},Y.prototype.startFirstConnection=function(){var $=new N.TrouterConnection(this.logFunc,this.options,this.configuredTrouterManager(),this.tokenProvider,this.usingLegacyTokenApi,this.userActivityObject,this.protocolSelector,this.audienceSubscriptionState);this.firstConnection=$,this.getConnectionCache().then(function(V){$.start(V)}).catch(function(){})},Y.prototype.startSecondConnection=function($){var V=new N.TrouterConnection(this.logFunc,this.options,this.configuredTrouterManager(),this.tokenProvider,this.usingLegacyTokenApi,this.userActivityObject,this.protocolSelector,this.audienceSubscriptionState);this.secondConnection=V,this.firstConnection!==void 0&&this.firstConnection.disableRegistrationsAndAutoReconnect(),$?this.getConnectionCache().then(function(re){V.start(re)}).catch(function(){}):V.start()},Y.prototype.stopFirstConnection=function($){this.firstConnection!==void 0&&(this.storedFirstConnection=this.firstConnection,this.firstConnection.stop($),this.firstConnection=void 0)},Y.prototype.stopSecondConnection=function($){this.secondConnection!==void 0&&(this.secondConnection.stop($),this.secondConnection=void 0)},Y.prototype.stopSecondConnectionDelayed=function(){if(this.secondConnection!==void 0){var $=this.secondConnection;this.secondConnection=void 0,this.logger.info("Closing an inactive connection in ".concat(Math.round(this.options.lingeringConnectionDelayMs/1e3),"s")),setTimeout(function(){$.stop(!0)},this.options.lingeringConnectionDelayMs)}},Y.prototype.forceStopLingeringConnection=function(){this.storedFirstConnection&&(this.storedFirstConnection.stop(!1),this.storedFirstConnection=void 0)},Y.prototype.switchConnections=function(){var $=this.firstConnection;this.firstConnection=this.secondConnection,this.secondConnection=$},Y.prototype.doesSecondConnectionExist=function(){return this.secondConnection!==void 0},Y.prototype.dispatchConnected=function(){if(this.firstConnection!==void 0){var $=this.firstConnection.getServerState(),V=$.url.endsWith("/")?$.url.slice(0,-1):$.url,re={baseEndpointUrl:V,newEndpointUrl:V!==this.baseEndpointUrl,c2cUrlBase:$.c2cUrlBase,clientId:$.connectedClientId,connectionId:$.connectionId,connectionTtlSec:$.getRemainingTtlInSec()};this.baseEndpointUrl=V,this.listener.onTrouterConnected($.url,re)}},Y.prototype.dispatchDisconnected=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},Y.prototype.dispatchTerminalError=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},Y.prototype.dispatchRegistrationState=function($){this.options.registrationStateCallback&&this.options.registrationStateCallback($)},Y.prototype.expediteBackoffOnConnections=function(){var $;if(this.lastExpediteBackoffCallAt!==void 0&&Date.now()-this.lastExpediteBackoffCallAt<(($=this.options.expediteBackoffOnStartMinimumDelayMs)!==null&&$!==void 0?$:1e4))return void this.logger.info("Expedite backoff due to start() too frequent, skipping");this.lastExpediteBackoffCallAt=Date.now(),this.firstConnection!==void 0&&this.firstConnection.expediteBackoff(),this.secondConnection!==void 0&&this.secondConnection.expediteBackoff()},Y.prototype.onDownstreamRequest=function($,V,re){var te={id:V.id,method:V.method,path:"/".concat(V.shortUrl),body:V.body,headers:V.headers},Z={id:V.id,status:0,headers:{},body:"",send:function(){return Z.status<=100||Z.status>=999?3:(re.writeHead(Z.status,Z.headers),re.end(Z.body))}};this.listener.onTrouterRequest(te,Z)},Y.prototype.onConnected=function($){this.fsm.onConnected($===this.firstConnection)},Y.prototype.onRegistered=function($){this.fsm.onRegistered($===this.firstConnection)},Y.prototype.onUnregistered=function($){this.fsm.onUnregistered($===this.firstConnection||$===this.storedFirstConnection)},Y.prototype.onReconnecting=function($){this.fsm.onReconnecting($===this.firstConnection)},Y.prototype.onReconnectIsRequired=function($,V,re){this.fsm.onReconnectionRequired($===this.firstConnection,V,re)},Y.prototype.onDisconnected=function($){this.fsm.onDisconnected($===this.firstConnection||$==this.storedFirstConnection),this.storedFirstConnection=void 0},Y.prototype.onTerminalError=function(){this.fsm.onTerminalError(),this.storedFirstConnection=void 0},Y.prototype.onUserActivityStateAccepted=function($){this.listener.onTrouterUserActivityStateAccepted&&this.listener.onTrouterUserActivityStateAccepted($)},Y.prototype.onAudiencesSetResolved=function($,V){var re,te;(te=(re=this.listener).onAudiencesSetResolved)===null||te===void 0||te.call(re,$,V)},Y.prototype.onConnectionParametersUpdated=function($){this.setConnectionCache($)},Y.prototype.setUserActivityState=function($,V){return this.userActivityObject=new j($,C.CorrelationVector.extend(V)),this.secondConnection!==void 0?(this.logger.info("Setting user activity ".concat(this.userActivityObject.toEventJSON()," on the second/new connection")),void this.secondConnection.setUserActivityState(this.userActivityObject)):this.firstConnection!==void 0?(this.logger.info("Setting user activity ".concat(this.userActivityObject.toEventJSON()," on the first/current connection")),void this.firstConnection.setUserActivityState(this.userActivityObject)):void 0},Y.prototype.setAudienceSubscriptionsAsync=function($,V,re){if(this.audienceSubscriptionState=new G($,C.CorrelationVector.extend(re)),this.secondConnection)return this.logger.info("Setting audience subscriptions ".concat(this.audienceSubscriptionState.toEventJSON()," on second/new connection")),this.secondConnection.setAudienceSubscriptionsAsync(this.audienceSubscriptionState,V);if(this.firstConnection)return this.logger.info("Setting audience subscriptions ".concat(this.audienceSubscriptionState.toEventJSON()," on first/current connection")),this.firstConnection.setAudienceSubscriptionsAsync(this.audienceSubscriptionState,V);throw new Error("No connection found")},Y.prototype.onTrouterMessageLost=function($){var V=this;if(this.listener.onTrouterMessageLoss)if($?.length){var re=$.filter(function(Z){return V.processedMessageLoss["".concat(Z.tag,"-").concat(Z.etag)]!==void 0});if(re.length&&(this.logger.info("onTrouterMessageLoss - immediately acknowledging ".concat(re.length," seen dropped indicators")),this.sendProcessedDroppedIndicators(re),$=$.filter(function(Z){return V.processedMessageLoss["".concat(Z.tag,"-").concat(Z.etag)]===void 0}),!$.length))return void this.logger.info("onTrouterMessageLoss - all declared dropped indicators have been seen before");var te=this.listener.onTrouterMessageLoss($.map(function(Z){return Z.tag}));if(!te)return void this.logger.warn("onTrouterMessageLoss - some flow tag(s) have not been processed by listeners");$.forEach(function(Z){V.processedMessageLoss["".concat(Z.tag,"-").concat(Z.etag)]=""}),this.sendProcessedDroppedIndicators($)}else this.logger.warn("onTrouterMessageLoss - no flow tags have been provided")},Y.prototype.getConnectionCache=function(){var $=this;return this.options.connectionCache?(this.logger.debug("Querying host's connection cache"),this.options.connectionCache.onGetTrouterConnectionCache().then(function(V){var re=V?JSON.parse(V):void 0;return typeof re=="object"?re:void 0}).catch(function(V){return $.logger.warn("Invalid connection cache content provided: ".concat(V)),$.connectionCache})):Promise.resolve(this.connectionCache)},Y.prototype.setConnectionCache=function($){if(this.connectionCache=$,this.options.connectionCache)try{this.options.connectionCache.onSetTrouterConnectionCache(JSON.stringify($))}catch(V){this.logger.warn("Error setting external connection cache: ".concat(V))}},Y.prototype.sendProcessedDroppedIndicators=function($){return this.firstConnection!==void 0?void this.firstConnection.sendProcessedDroppedIndicators($):this.secondConnection!==void 0?void this.secondConnection.sendProcessedDroppedIndicators($):void 0},Y.prototype.configuredTrouterManager=function(){return new _.RegistrationEnforcer(this,this.options.connectionDependsOnRegistration,this.options.delayEventsUntilRegistered)},Y})();D.TrouterManager=Q},function(q,D,K){Object.defineProperty(D,"__esModule",{value:!0}),D.TrouterUrlPromise=void 0;var L=K(0),W=(function(){function C(z){this.logger=new L.Logger("UrlPromise",z)}return C.prototype.getPromise=function(){var z=this;return this.url!==void 0?(this.logger.debug("returning previously resolved url: ".concat(this.url)),Promise.resolve(this.url)):(this.pendingPromise===void 0?(this.logger.debug("creating and returning promise"),this.pendingPromise=new Promise(function(x,b){z.pendingPromiseResolveRef=x,z.pendingPromiseRejectRef=b})):this.logger.debug("returning existing promise"),this.pendingPromise)},C.prototype.resolveUrl=function(z){this.url=z,this.logger.debug("got url: ".concat(this.url));var x=this.pendingPromiseResolveRef;this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,x!==void 0&&(this.logger.debug("resolving promise"),x(z))},C.prototype.rejectUrl=function(z){this.logger.debug("aborting");var x=this.pendingPromiseRejectRef;this.url=void 0,this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,x!==void 0&&(this.logger.debug("rejecting promise"),x(z))},C.prototype.resetUrl=function(){this.logger.debug("resetting url"),this.url=void 0},C})();D.TrouterUrlPromise=W},function(q,D,K){(function(L,W){(function(z,x){var b=z;b.version="0.9.6",b.protocol=1,b.transports=[],b.j=[],b.sockets={},b.connect=function(S,_){var N,w,R=b.util.parseUri(S);x&&x.location&&(R.protocol=R.protocol||x.location.protocol.slice(0,-1),R.host=R.host||(x.document?x.document.domain:x.location.hostname),R.port=R.port||x.location.port),N=b.util.uniqueUri(R);var j={host:R.host,secure:R.protocol=="https",port:R.port||(R.protocol=="https"?443:80),query:R.query||""};return b.util.merge(j,_),!j["force new connection"]&&b.sockets[N]||(w=new b.Socket(j)),!j["force new connection"]&&w&&(b.sockets[N]=w),w=w||b.sockets[N],j["skipped handshake data"]?w.of(""):w.of(R.path.length>1?R.path:"")}})(W.exports,L===void 0?window:L);var C=W.exports;(function(z,x){var b=z.util={},S=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,_=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];b.parseUri=function(w){for(var R=S.exec(w||""),j={},G=14;G--;)j[_[G]]=R[G]||"";return j},b.uniqueUri=function(w){var R=w.protocol,j=w.host,G=w.port;return"document"in x?(j=j||document.domain,G=G||(R=="https"&&document.location.protocol!=="https:"?443:document.location.port)):(j=j||"localhost",G||R!="https"||(G=443)),(R||"http")+"://"+j+":"+(G||80)},b.query=function(w,R){var j=b.chunkQuery(w||""),G=[];b.merge(j,b.chunkQuery(R||""));for(var Q in j)j.hasOwnProperty(Q)&&G.push(Q+"="+j[Q]);return G.length?"?"+G.join("&"):""},b.chunkQuery=function(w){for(var R,j={},G=w.split("&"),Q=0,Y=G.length;Q<Y;++Q)R=G[Q].split("="),R[0]&&(j[R[0]]=R[1]);return j};var N=!1;b.load=function(w){if("document"in x&&document.readyState==="complete"||N)return w();b.on(x,"load",w,!1)},b.on=function(w,R,j,G){w.attachEvent?w.attachEvent("on"+R,j):w.addEventListener&&w.addEventListener(R,j,G)},b.request=function(w){if(w&&typeof XDomainRequest<"u")return new XDomainRequest;if(typeof XMLHttpRequest<"u"&&(!w||b.ua.hasCORS))return new XMLHttpRequest;if(!w)try{return new window[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}return null},typeof window<"u"&&b.load(function(){N=!0}),b.defer=function(w){if(!b.ua.webkit||typeof importScripts<"u")return w();b.load(function(){setTimeout(w,100)})},b.merge=function(w,R,j,G){var Q,Y=G||[],$=j===void 0?2:j;for(Q in R)R.hasOwnProperty(Q)&&b.indexOf(Y,Q)<0&&(typeof w[Q]=="object"&&$?b.merge(w[Q],R[Q],$-1,Y):(w[Q]=R[Q],Y.push(R[Q])));return w},b.mixin=function(w,R){b.merge(w.prototype,R.prototype)},b.inherit=function(w,R){function j(){}j.prototype=R.prototype,w.prototype=new j},b.isArray=Array.isArray||function(w){return Object.prototype.toString.call(w)==="[object Array]"},b.intersect=function(w,R){for(var j=[],G=w.length>R.length?w:R,Q=w.length>R.length?R:w,Y=0,$=Q.length;Y<$;Y++)~b.indexOf(G,Q[Y])&&j.push(Q[Y]);return j},b.indexOf=function(w,R,j){for(var G=w.length,j=j<0?j+G<0?0:j+G:j||0;j<G&&w[j]!==R;j++);return G<=j?-1:j},b.toArray=function(w){for(var R=[],j=0,G=w.length;j<G;j++)R.push(w[j]);return R},b.ua={},b.ua.hasCORS=typeof XMLHttpRequest<"u"&&(function(){try{var w=new XMLHttpRequest}catch{return!1}return w.withCredentials!=null})(),b.ua.webkit=typeof navigator<"u"&&/webkit/i.test(navigator.userAgent)})(C!==void 0?C:W.exports,L===void 0?window:L),(function(z,x){function b(){}z.EventEmitter=b,b.prototype.on=function(S,_){return this.$events||(this.$events={}),this.$events[S]?x.util.isArray(this.$events[S])?this.$events[S].push(_):this.$events[S]=[this.$events[S],_]:this.$events[S]=_,this},b.prototype.addListener=b.prototype.on,b.prototype.once=function(S,_){function N(){w.removeListener(S,N),_.apply(this,arguments)}var w=this;return N.listener=_,this.on(S,N),this},b.prototype.removeListener=function(S,_){if(this.$events&&this.$events[S]){var N=this.$events[S];if(x.util.isArray(N)){for(var w=-1,R=0,j=N.length;R<j;R++)if(N[R]===_||N[R].listener&&N[R].listener===_){w=R;break}if(w<0)return this;N.splice(w,1),N.length||delete this.$events[S]}else(N===_||N.listener&&N.listener===_)&&delete this.$events[S]}return this},b.prototype.removeAllListeners=function(S){return this.$events&&this.$events[S]&&(this.$events[S]=null),this},b.prototype.listeners=function(S){return this.$events||(this.$events={}),this.$events[S]||(this.$events[S]=[]),x.util.isArray(this.$events[S])||(this.$events[S]=[this.$events[S]]),this.$events[S]},b.prototype.emit=function(S){if(!this.$events)return!1;var _=this.$events[S];if(!_)return!1;var N=Array.prototype.slice.call(arguments,1);if(typeof _=="function")_.apply(this,N);else{if(!x.util.isArray(_))return!1;for(var w=_.slice(),R=0,j=w.length;R<j;R++)w[R].apply(this,N)}return!0}})(C!==void 0?C:W.exports,C!==void 0?C:W.parent.exports),(function(z,x){if(x&&x.parse)return z.JSON={parse:x.parse,stringify:x.stringify};throw new Error("JSON not available")})(C!==void 0?C:W.exports,typeof JSON<"u"?JSON:void 0),(function(z,x){var b=z.parser={},S=b.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],_=b.reasons=["transport not supported","client not handshaken","unauthorized"],N=b.advice=["reconnect"],w=x.JSON,R=x.util.indexOf;b.encodePacket=function(G){var Q=R(S,G.type),Y=G.id||"",$=G.endpoint||"",V=G.ack,re=null;switch(G.type){case"error":var te=G.reason?R(_,G.reason):"",Z=G.advice?R(N,G.advice):"";te===""&&Z===""||(re=te+(Z!==""?"+"+Z:""));break;case"message":G.data!==""&&(re=G.data);break;case"event":var oe={name:G.name};G.args&&G.args.length&&(oe.args=G.args),re=w.stringify(oe);break;case"json":re=w.stringify(G.data);break;case"connect":G.qs&&(re=G.qs);break;case"ack":re=G.ackId+(G.args&&G.args.length?"+"+w.stringify(G.args):"")}var _e=[Q,Y+(V=="data"?"+":""),$];return re!=null&&_e.push(re),_e.join(":")},b.encodePayload=function(G){var Q="";if(G.length==1)return G[0];for(var Y=0,$=G.length;Y<$;Y++)Q+=""+G[Y].length+""+G[Y];return Q};var j=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;b.decodePacket=function($){var Q=$.match(j);if(!Q)return{};var Y=Q[2]||"",$=Q[5]||"",V={type:S[Q[1]],endpoint:Q[4]||""};switch(Y&&(V.id=Y,Q[3]?V.ack="data":V.ack=!0),V.type){case"error":var Q=$.split("+");V.reason=_[Q[0]]||"",V.advice=N[Q[1]]||"";break;case"message":V.data=$||"";break;case"event":try{var re=w.parse($);V.name=re.name,V.args=re.args}catch{}V.args=V.args||[];break;case"json":try{V.data=w.parse($)}catch{}break;case"connect":V.qs=$||"";break;case"ack":var Q=$.match(/^([0-9]+)(\+)?(.*)/);if(Q&&(V.ackId=Q[1],V.args=[],Q[3]))try{V.args=Q[3]?w.parse(Q[3]):[]}catch{}break;case"disconnect":V.reason=$}return V},b.decodePayload=function(G){if(G.charAt(0)==""){for(var Q=[],Y=1,$="";Y<G.length;Y++)G.charAt(Y)==""?(Q.push(b.decodePacket(G.substr(Y+1).substr(0,$))),Y+=Number($)+1,$=""):$+=G.charAt(Y);return Q}return[b.decodePacket(G)]}})(C!==void 0?C:W.exports,C!==void 0?C:W.parent.exports),(function(z,x){function b(S,_){this.socket=S,this.sessid=_,this.connectErrorCallback=void 0,this.isOpened=!1}z.Transport=b,x.util.mixin(b,x.EventEmitter),b.prototype.onData=function(S){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),S!==""){var _=x.parser.decodePayload(S);if(_&&_.length)for(var N=0,w=_.length;N<w;N++)this.onPacket(_[N])}return this},b.prototype.onPacket=function(S){return this.socket.setHeartbeatTimeout(),S.type=="heartbeat"?this.onHeartbeat():(S.type=="connect"&&S.endpoint==""&&this.onConnect(),S.type=="error"&&S.advice=="reconnect"&&(this.isOpened=!1),this.socket.onPacket(S),this)},b.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var S=this;this.closeTimeout=setTimeout(function(){S.onDisconnect()},this.socket.closeTimeout)}},b.prototype.onDisconnect=function(){return this.close&&this.isOpened&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},b.prototype.onConnect=function(){return this.socket.onConnect(),this.connectErrorCallback=void 0,this},b.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},b.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},b.prototype.packet=function(S){this.send(x.parser.encodePacket(S))},b.prototype.onHeartbeat=function(S){this.packet({type:"heartbeat"})},b.prototype.onOpen=function(){this.isOpened=!0,this.clearCloseTimeout(),this.socket.onOpen()},b.prototype.onClose=function(){this.isOpened=!1,this.socket.onClose(),this.onDisconnect()},b.prototype.prepareUrl=function(S){var _=this.socket.options;if(_["skipped handshake data"])return _.rewriteUrlForProxy(_["skipped handshake data"].websocketUrl+(S||""));var N=this.scheme()+"://"+_.host+":"+_.port+"/"+_.resource+"/"+x.protocol+"/"+this.name+"/"+this.sessid+(S||"");return _.rewriteUrlForProxy(N)},b.prototype.ready=function(S,_){_.call(this)},b.prototype.clearEventHandlers=function(){return this}})(C!==void 0?C:W.exports,C!==void 0?C:W.parent.exports),(function(z,x,b){function S(N){if(this.options={port:80,secure:!1,document:"document"in b&&document,resource:"socket.io",transports:x.transports.slice(),"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843},x.util.merge(this.options,N),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.disconnected=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||x.util.ua.hasCORS)){var w=this;x.util.on(b,"unload",function(){w.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function _(){}z.Socket=S,x.util.mixin(S,x.EventEmitter),S.prototype.of=function(N){return this.namespaces[N]||(this.namespaces[N]=new x.SocketNamespace(this,N),N!==""&&this.namespaces[N].packet({type:"connect"})),this.namespaces[N]},S.prototype.publish=function(){this.emit.apply(this,arguments);var N;for(var w in this.namespaces)this.namespaces.hasOwnProperty(w)&&(N=this.of(w),N.$emit.apply(N,arguments))},S.prototype.handshake=function(N){function w(re){re instanceof Error?R.onError(re.message):N.apply(null,re.split(":"))}var R=this,j=this.options;if(!R.disconnected){var G=j.rewriteUrlForProxy(["http"+(j.secure?"s":"")+":/",j.host+":"+j.port,j.resource,x.protocol,x.util.query(this.options.query,"t="+ +new Date)].join("/"));if(this.isXDomain()&&!x.util.ua.hasCORS){var Q=document.getElementsByTagName("script")[0],Y=document.createElement("script");Y.src=G+"&jsonp="+x.j.length,Q.parentNode.insertBefore(Y,Q),x.j.push(function(re){w(re),Y.parentNode.removeChild(Y)})}else{var $=x.util.request();$.open("GET",G,!0);var V=this.options.requestHeaders;V!==void 0&&Object.keys(V).forEach(function(re){$.setRequestHeader(re,V[re])}),$.onreadystatechange=function(){$.readyState==4&&($.onreadystatechange=_,$.status==200?w($.responseText):!R.reconnecting&&R.onError($.responseText))},$.send(null)}}},S.prototype.getTransport=function(N){for(var w,R=N||this.transports,j=0;w=R[j];j++)if(x.Transport[w]&&x.Transport[w].check(this)&&(!this.isXDomain()||x.Transport[w].xdomainCheck()))return new x.Transport[w](this,this.sessionid);return null},S.prototype.connect=function(N){if(this.connecting||this.disconnected)return this;var w=this,R=function(G,Q,Y,$){function V(){if(!w.connected&&!w.disconnected)if(w.connecting=!1,clearTimeout(w.connectTimeoutTimer),w.options["try multiple transports"]){for(;w.remainingTransports.length>0&&w.remainingTransports.splice(0,1)[0]!=w.transport.name;);w.remainingTransports.length?re(w.remainingTransports):w.publish("connect_failed")}else w.publish("connect_failed")}function re(te){if(w.transport&&(w.transport.clearTimeouts(),w.transport.clearEventHandlers()),w.transport=w.getTransport(te),!w.transport||w.disconnected)return w.publish("connect_failed");w.transport.ready(w,function(){w.connecting=!0,w.publish("connecting",w.transport.name),w.transport.open(V),w.options["connect timeout"]&&(w.connectTimeoutTimer=setTimeout(function(){V()},w.options["connect timeout"]))})}w.sessionid=G,w.closeTimeout=1e3*Y+2e3,w.heartbeatTimeout=1e3*Q+2e3,w.transports=$?x.util.intersect($.split(","),w.options.transports):w.options.transports,w.setHeartbeatTimeout(),w.remainingTransports=w.transports.slice(0),re(w.transports),w.once("connect",function(){clearTimeout(w.connectTimeoutTimer),N&&typeof N=="function"&&N()})};if(this.options["skipped handshake data"]){var j=this.options["skipped handshake data"];R("v4c-"+new Date().getTime(),j.timeout,j.timeout,"websocket")}else this.handshake(R);return this},S.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);var N=this;this.heartbeatTimeoutTimer=setTimeout(function(){N.transport.onClose()},this.heartbeatTimeout)},S.prototype.packet=function(N){return this.connected&&!this.doBuffer?this.transport.packet(N):this.buffer.push(N),this},S.prototype.setBuffer=function(N){this.doBuffer=N,!N&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])},S.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this.disconnected=!0,this},S.prototype.disconnectSync=function(){var N=x.util.request(),w=this.resource+"/"+x.protocol+"/"+this.sessionid;N.open("GET",w,!0),this.onDisconnect("booted")},S.prototype.isXDomain=function(){var N=b.location.port||(b.location.protocol=="https:"?443:80);return this.options.host!==b.location.hostname||this.options.port!=N},S.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},S.prototype.onOpen=function(){this.open=!0},S.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},S.prototype.onPacket=function(N){this.of(N.endpoint).onPacket(N)},S.prototype.onError=function(N){N&&N.advice&&N.advice==="reconnect"&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",N&&N.reason?N.reason:N)},S.prototype.onDisconnect=function(N){var w=this.connected,R=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(w||R)&&(this.transport.close(),this.transport.clearTimeouts(),w?(this.publish("disconnect",N),N!="booted"&&this.options.reconnect&&!this.reconnecting&&this.reconnect()):this.publish("close_during_connecting",N))},S.prototype.reconnect=function(){function N(){if(R.connected){for(var Y in R.namespaces)R.namespaces.hasOwnProperty(Y)&&Y!==""&&R.namespaces[Y].packet({type:"connect"});R.publish("reconnect",R.transport.name,R.reconnectionAttempts)}clearTimeout(R.reconnectionTimer),R.removeListener("connect_failed",w),R.removeListener("connect",w),R.reconnecting=!1,delete R.reconnectionAttempts,delete R.reconnectionDelay,delete R.reconnectionTimer,delete R.redoTransports,R.options["try multiple transports"]=G}function w(){if(R.reconnecting)return R.connected?N():R.connecting&&R.reconnecting?R.reconnectionTimer=setTimeout(w,1e3):void(R.reconnectionAttempts++>=j?R.redoTransports?(R.publish("reconnect_failed"),N()):(R.on("connect_failed",w),R.options["try multiple transports"]=!0,R.transport=R.getTransport(),R.redoTransports=!0,R.connect()):(R.reconnectionDelay<Q&&(R.reconnectionDelay*=2),R.connect(),R.publish("reconnecting",R.reconnectionDelay,R.reconnectionAttempts),R.reconnectionTimer=setTimeout(w,R.reconnectionDelay)))}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var R=this,j=this.options["max reconnection attempts"],G=this.options["try multiple transports"],Q=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(w,this.reconnectionDelay),this.on("connect",w)}})(C!==void 0?C:W.exports,C!==void 0?C:W.parent.exports,L===void 0?window:L),(function(z,x){function b(_,N){this.socket=_,this.name=N||"",this.flags={},this.json=new S(this,"json"),this.ackPackets=0,this.acks={}}function S(_,N){this.namespace=_,this.name=N}z.SocketNamespace=b,x.util.mixin(b,x.EventEmitter),b.prototype.$emit=x.EventEmitter.prototype.emit,b.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},b.prototype.packet=function(_){return _.endpoint=this.name,this.socket.packet(_),this.flags={},this},b.prototype.send=function(_,N){var w={type:this.flags.json?"json":"message",data:_};return typeof N=="function"&&(w.id=++this.ackPackets,w.ack=!0,this.acks[w.id]=N),this.packet(w)},b.prototype.emit=function(_){var N=Array.prototype.slice.call(arguments,1),w=N[N.length-1],R={type:"event",name:_};return typeof w=="function"&&(R.id=++this.ackPackets,R.ack="data",this.acks[R.id]=w,N=N.slice(0,N.length-1)),R.args=N,this.packet(R)},b.prototype.disconnect=function(){return this.name===""?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},b.prototype.onPacket=function(_){function N(){w.packet({type:"ack",args:x.util.toArray(arguments),ackId:_.id})}var w=this;switch(_.type){case"connect":this.$emit("connect");break;case"disconnect":this.name===""?this.socket.onDisconnect(_.reason||"booted"):this.$emit("disconnect",_.reason||"");break;case"message":case"json":var R=["message",_.data];_.ack=="data"?R.push(N):_.ack&&this.packet({type:"ack",ackId:_.id}),this.$emit.apply(this,R);break;case"event":var R=[_.name].concat(_.args);_.ack=="data"&&R.push(N),this.$emit.apply(this,R);break;case"ack":this.acks[_.ackId]&&(this.acks[_.ackId].apply(this,_.args),delete this.acks[_.ackId]);break;case"error":_.advice?this.socket.onError(_):_.reason=="unauthorized"?this.$emit("connect_failed",_.reason):this.$emit("error",_.reason)}},S.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},S.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}})(C!==void 0?C:W.exports,C!==void 0?C:W.parent.exports),(function(z,x,b){function S(N){x.Transport.apply(this,arguments)}function _(){}z.websocket=S,x.util.inherit(S,x.Transport),S.prototype.name="websocket",S.prototype.open=function(N){var w,R=x.util.query(this.socket.options.query),j=this;return this.connectErrorCallback=N,w||(w=b.MozWebSocket||b.WebSocket),this.websocket=new w(this.prepareUrl(R)),this.websocket.onopen=function(){j.onOpen(),j.socket.setBuffer(!1)},this.websocket.onmessage=function(G){j.onData(G.data)},this.websocket.onclose=function(){j.onClose(),j.socket.setBuffer(!0)},this.websocket.onerror=function(G){j.onError(G)},this},S.prototype.send=function(N){return this.websocket.send(N),this},S.prototype.payload=function(N){for(var w=0,R=N.length;w<R;w++)this.packet(N[w]);return this},S.prototype.close=function(){return this.websocket.close(),this},S.prototype.onError=function(N){this.connectErrorCallback!==void 0&&(this.connectErrorCallback(),this.connectErrorCallback=void 0),this.socket.onError(N)},S.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},S.check=function(){return"WebSocket"in b&&!("__addTask"in WebSocket)||"MozWebSocket"in b},S.xdomainCheck=function(){return!0},S.prototype.clearEventHandlers=function(){return this.websocket&&(this.websocket.onopen=this.websocket.onmessage=this.websocket.onclose=this.websocket.onerror=_),this},x.transports.push("websocket")})(C!==void 0?C.Transport:W.exports,C!==void 0?C:W.parent.exports,L===void 0?window:L),(function(z,x,b){function S(N){N&&x.Transport.apply(this,arguments)}function _(){}z.XHR=S,x.util.inherit(S,x.Transport),S.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},S.prototype.payload=function(N){for(var w=[],R=0,j=N.length;R<j;R++)w.push(x.parser.encodePacket(N[R]));this.send(x.parser.encodePayload(w))},S.prototype.send=function(N){return this.post(N),this},S.prototype.post=function(N){function w(){this.readyState==4&&(this.onreadystatechange=_,this.status==200?(clearTimeout(this.ackTimeoutTimer),j.socket.setBuffer(!1)):j.onClose())}function R(){this.onload=_,j.socket.setBuffer(!1)}var j=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),b.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=R:this.sendXHR.onreadystatechange=w,this.sendXHR.send(N),j.sendXHR.ackTimeoutTimer=setTimeout(function(){j.onClose()},j.socket.options.ackTimeoutMs)},S.prototype.close=function(){return this.onClose(),this},S.prototype.request=function(N){var w=x.util.request(this.socket.isXDomain()),R=x.util.query(this.socket.options.query,"t="+ +new Date);w.open(N||"GET",this.prepareUrl(R),!0);var j=this.socket.options.requestHeaders;if(j!==void 0&&Object.keys(j).forEach(function(G){w.setRequestHeader(G,j[G])}),N=="POST")try{w.setRequestHeader?w.setRequestHeader("Content-type","text/plain;charset=UTF-8"):w.contentType="text/plain"}catch{}return w},S.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},S.check=function(N,w){try{var R=x.util.request(w),j=b.XDomainRequest&&R instanceof XDomainRequest,G=N&&N.options&&N.options.secure?"https:":"http:",Q=G!=b.location.protocol;if(R&&(!j||!Q))return!0}catch{}return!1},S.xdomainCheck=function(){return S.check(null,!0)},S.prototype.clearEventHandlers=function(){return this.sendXHR&&(this.sendXHR.onreadystatechange=this.sendXHR.onload=_),this}})(C!==void 0?C.Transport:W.exports,C!==void 0?C:W.parent.exports,L===void 0?window:L),(function(z,x,b){function S(){x.Transport.XHR.apply(this,arguments)}function _(){}z["xhr-polling"]=S,x.util.inherit(S,x.Transport.XHR),x.util.merge(S,x.Transport.XHR),S.prototype.name="xhr-polling",S.prototype.open=function(N){var w=this;return w.connectErrorCallback=N,x.Transport.XHR.prototype.open.call(w),!1},S.prototype.get=function(){function N(){this.readyState==4&&(this.onreadystatechange=_,this.status==200?(j.connectErrorCallback=void 0,j.onData(this.responseText),j.get()):(j.onClose(),j.connectErrorCallback!==void 0&&(j.connectErrorCallback(),j.connectErrorCallback=void 0)))}function w(){j.connectErrorCallback=void 0,this.onload=_,this.onerror=_,j.onData(this.responseText),j.get()}function R(){j.onClose(),j.connectErrorCallback!==void 0&&(j.connectErrorCallback(),j.connectErrorCallback=void 0)}if(this.isOpened){var j=this;this.xhr=this.request(),b.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=w,this.xhr.onerror=R):this.xhr.onreadystatechange=N,this.xhr.send(null)}},S.prototype.onClose=function(){if(x.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=_;try{this.xhr.abort()}catch{}this.xhr=null}},S.prototype.ready=function(N,w){var R=this;x.util.defer(function(){w.call(R)})},S.prototype.clearEventHandlers=function(){return x.Transport.XHR.prototype.clearEventHandlers.call(this),this.xhr&&(this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=_),this},x.transports.push("xhr-polling")})(C!==void 0?C.Transport:W.exports,C!==void 0?C:W.parent.exports,L===void 0?window:L),D.io=C}).call(D,K(13),K(14)(q))},function(q,D){var K;K=(function(){return this})();try{K=K||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(K=window)}q.exports=K},function(q,D){q.exports=function(K){return K.webpackPolyfill||(K.deprecate=function(){},K.paths=[],K.children||(K.children=[]),Object.defineProperty(K,"loaded",{enumerable:!0,get:function(){return K.l}}),Object.defineProperty(K,"id",{enumerable:!0,get:function(){return K.i}}),K.webpackPolyfill=1),K}},function(q,D,K){Object.defineProperty(D,"__esModule",{value:!0}),D.ConnectionTracker=D.Properties=D.TrackerStep=D.ClientEventName=D.ResponseData=void 0;var L=K(3),W=K(1),C=K(0),z=(function(){function R(j){this.id=j,this.status=200,this.headers={},this.body=""}return R})();D.ResponseData=z;var x;(function(R){R.Connected="trouter_js_client_connected",R.Disconnected="trouter_js_client_disconnected",R.Error="trouter_js_client_error",R.Progress="trouter_js_client_progress",R.Response="trouter_js_client_response",R.Request="trouter_js_client_request",R.CheckConnection="trouter_js_client_check_connection",R.Registration="trouter_js_client_registration",R.Unregistration="trouter_js_client_unregistration"})(x||(D.ClientEventName=x={}));var b=(function(){function R(j,G,Q,Y,$){this.stepName=j,this.operation=G,this.delta=Q,this.ts=Y,this.error=$}return R})();D.TrackerStep=b;var S=(function(){function R(){}return R})();D.Properties=S;var _=(function(){function R(){this.numberOfPingReplies=0,this.connectedTimestamp=0,this.isNewUrl=!1,this.transportType="",this.connectionNumber=0}return R})(),N=(function(){function R(){this.enabled=!1,this.numberOfStepsToMaintain=40,this.logHealthCheckError=!1,this.sendProgressTimeoutSecs=55,this.logSendPingError=!1,this.maxBackoffInMs=12e4,this.trouter_js_client_connected=!1,this.trouter_js_client_disconnected=!1,this.trouter_js_client_error=!1,this.trouter_js_client_progress=!1,this.trouter_js_client_response=!1,this.trouter_js_client_request=!1,this.trouter_js_client_registration=!1,this.trouter_js_client_unregistration=!1,this.trouter_js_client_check_connection=!0}return R})(),w=(function(){function R(j,G,Q,Y,$,V,re){this.clientId=G,this.clientInfo=Q,this.getServerState=Y,this.endpointId=$,this.clientCorrelationID=V,this.environment=re,this.logger=new C.Logger("ConnectionTracker",j),this.clientCorrelationID=V!==void 0?V:"",this.steps=[],this.connectionAttempt=0,this.totalStepCount=0,this.beginTimestamp=new L.Timespan,this.eventLogSettings=new N,this.connectedInfo=new _}return R.prototype.enable=function(j){this.eventLogSettings.enabled=!0,this.eventLogger=j},R.prototype.disable=function(){this.eventLogSettings.enabled=!1},R.prototype.sendProgress=function(j){this.steps.length>0&&this.sendTelemetry(x.Progress,j,this.steps)},R.prototype.cancelProgressTimer=function(){this.progressTimeout!==void 0&&(clearTimeout(this.progressTimeout),this.progressTimeout=void 0)},R.prototype.resetProgressSendTimer=function(){var j=this;this.cancelProgressTimer(),this.eventLogSettings.sendProgressTimeoutSecs!==void 0&&this.eventLogSettings.sendProgressTimeoutSecs>0&&(this.progressTimeout=setTimeout(function(){j.sendProgress({reason:"timeout",timeoutSecs:j.eventLogSettings.sendProgressTimeoutSecs})},1e3*this.eventLogSettings.sendProgressTimeoutSecs))},R.prototype.setConnectedInfo=function(j,G){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=Date.now(),this.connectedInfo.isNewUrl=j,this.connectedInfo.transportType=G,++this.connectedInfo.connectionNumber},R.prototype.clearConnectedInfo=function(){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=0,this.connectedInfo.isNewUrl=!0,this.connectedInfo.transportType=""},R.prototype.copyProperties=function(j,G){for(var Q=0,Y=Object.keys(G);Q<Y.length;Q++){var $=Y[Q];G[$]!==void 0&&(j[$.replace(/-/g,"_")]={value:G[$]})}},R.prototype.increasePingResponseCount=function(){++this.connectedInfo.numberOfPingReplies},R.prototype.sendTelemetry=function(j,G,Q){try{if(this.eventLogSettings.enabled===!0&&this.eventLogSettings[j]===!0&&this.eventLogger!==void 0){var Y=this.getServerState(),$={name:j,properties:{connectionAttempt:{value:this.connectionAttempt},epid:{value:this.endpointId},clientCorrelationID:{value:this.clientCorrelationID},steps:{value:(0,L.toJson)(Q)},clientID:{value:this.clientId},eventVersion:{value:3},environment:{value:this.environment},cv:{value:W.CLIENT_VERSION},ua:{value:this.clientInfo.ua},connectionId:{value:Y.connectionId},connectedClientId:{value:Y.connectedClientId},domId:{value:Y.domId},url:{value:Y.unsecureUrl},surl:{value:Y.url},ttlInSecs:{value:Y.getRemainingTtlInSec()},numberOfPingReplies:{value:this.connectedInfo.numberOfPingReplies},connectedTimestamp:{value:this.connectedInfo.connectedTimestamp},isNewUrl:{value:this.connectedInfo.isNewUrl},transportType:{value:this.connectedInfo.transportType},connectionNumber:{value:this.connectedInfo.connectionNumber}}};this.copyProperties($.properties,G),this.eventLogger.logEvent($)}}catch(V){this.logger.warn("error in sending event ".concat(j,": ").concat((0,L.toJson)(V)))}},R.prototype.createStep=function(j,G,Q){return new b(j,G,this.beginTimestamp.duration,Date.now(),Q)},R.prototype.addStep=function(j,G,Q){if(this.eventLogSettings.enabled!==!1&&(this.steps.length===0&&this.beginTimestamp.reset(),this.steps.push(this.createStep(j,G,Q)),++this.totalStepCount,this.eventLogSettings.numberOfStepsToMaintain!==void 0&&this.steps.length>this.eventLogSettings.numberOfStepsToMaintain)){var Y=this.steps.slice(0);this.steps.length=0,this.sendTelemetry(x.Progress,{reason:"flush"},Y)}},R.prototype.trackStart=function(j){this.addStep(j,"start")},R.prototype.trackEnd=function(j){this.addStep(j,"end")},R.prototype.trackError=function(j,G,Q,Y){Q===void 0&&(Q=!0),j==="health"&&this.eventLogSettings.logHealthCheckError!==!0||j==="ping"&&this.eventLogSettings.logSendPingError===!1||(Y===void 0&&(Y="error"),Q===!0&&this.addStep(j,Y,G),this.sendTelemetry(x.Error,{},[this.createStep(j,Y,G)]))},R.prototype.trackProgress=function(j,G){this.addStep(j,G)},R.prototype.trackConnected=function(j,G){this.setConnectedInfo(j,G);var Q=this.steps.slice(0),Y=this.totalStepCount,$=this.beginTimestamp.duration;this.steps.length=0,this.totalStepCount=0,this.sendTelemetry(x.Connected,{stepCount:Q.length,totalStepCount:Y,connectionEstablishmentMs_Total:$},Q),this.cancelProgressTimer()},R.prototype.getSessionLength=function(){return Date.now()-this.connectedInfo.connectedTimestamp},R.prototype.trackDisconnected=function(j){j.sessionLengthMS=this.getSessionLength(),this.sendTelemetry(x.Disconnected,j,[]),this.resetProgressSendTimer()},R.prototype.trackNewConnection=function(){++this.connectionAttempt},R.prototype.trackRequest=function(j,G){var Q={};G!==void 0&&(Q.hasError=!0,Q.error=G);try{if(j){Q.requestID=j.id,Q.httpMethod=j.method,Q.url=j.url,Q.bodyLength=j.body.length,Q.shortUrl=j.shortUrl,Q.requestTimeStamp=j.startTS,Q.correlationVector=j.correlationVector;for(var Y=j.headers,$=0,V=Object.keys(Y);$<V.length;$++){var re=V[$];Q[re]=Y[re]}}}catch(te){Q.hasError=!0,Q.error="".concat(Q.error," error creating request context ").concat((0,L.toJson)(te))}this.sendTelemetry(x.Request,Q,[])},R.prototype.trackResponse=function(j,G,Q,Y){var $={};Y!==void 0&&($.hasError=!0,$.error=Y);try{if($.responseTimestamp=Q!==void 0?Q.sentTS:Date.now(),j){$.requestID=j.id,$.httpMethod=j.method,$.shortUrl=j.shortUrl,$.correlationVector=j.correlationVector;for(var V=j.headers,re=0,te=Object.keys(V);re<te.length;re++){var Z=te[re];$[Z]=V[Z]}}Q&&($.latencyMS=G,$.responseCode=Q.status,$.responseLength=Q.body.length)}catch(oe){$.hasError=!0,$.error="".concat($.error," error creating response context ").concat((0,L.toJson)(oe))}this.sendTelemetry(x.Response,$,[])},R.prototype.sendResponseError=function(j,G,Q){this.trackResponse(G,void 0,Q,j)},R.prototype.close=function(){this.sendProgress({reason:"closed"}),this.steps.length=0,this.cancelProgressTimer()},R.prototype.mergeSettings=function(j){if(j){this.eventLogSettings.numberOfStepsToMaintain=Math.min(40,Math.max(10,j.numberOfStepsToMaintain!==void 0?j.numberOfStepsToMaintain:0));var G=Math.min(3600,Math.max(55,j.sendProgressTimeoutSecs!==void 0?j.sendProgressTimeoutSecs:0));this.eventLogSettings.logHealthCheckError=j.logHealthCheckError,this.eventLogSettings.logSendPingError=j.logSendPingError;for(var Q=0,Y=Object.keys(x).map(function(V){return x[V]});Q<Y.length;Q++){var $=Y[Q];j[$]!==void 0&&(this.eventLogSettings[$]=j[$])}this.eventLogSettings.sendProgressTimeoutSecs!==G&&(this.eventLogSettings.sendProgressTimeoutSecs=G,this.resetProgressSendTimer())}},R})();D.ConnectionTracker=w},function(q,D,K){Object.defineProperty(D,"__esModule",{value:!0}),D.DisconnectReason=void 0;var L=(function(){function W(C,z,x){this.reason=C,this.claims=z,this.details=x}return W.fromRawReason=function(C,z){if(C===""||C==="dup")return new W(C);try{var x=JSON.parse(C);return typeof x!="object"||x.reason===void 0?(z?.error("invalid disconnect reason format"),new W("unknown",void 0,C)):new W(x.reason,x.claims,x.details)}catch{return new W("disconnect",void 0,C)}},W.fromSocketIoEventData=function(C,z){return typeof z=="string"?new W(C,void 0,z):void 0},W.prototype.toTelemetryString=function(){return this.reason==="socketerror"||this.reason==="reconnecterror"||this.reason==="disconnect"?this.details:this.reason},W})();D.DisconnectReason=L},function(q,D,K){function L(C,z,x){if(C===void 0||z===void 0)return!1;var b=Date.now()-C;return b>z*x.tolerance&&b>x.minimumWaitMs}Object.defineProperty(D,"__esModule",{value:!0}),D.ExponentialBackoff=void 0;var W=(function(){function C(z,x,b){b===void 0&&(b={tolerance:2,minimumWaitMs:1e4}),this.logger=z,this.maxBackoffInMs=x,this.gapDetectionSettings=b,this.backoffId=0,this.backoffCount=0}return C.calculateNextBackoffMs=function(z,x){var b=1+.4*(Math.random()-.5),S=1e3*Math.pow(2,z)*b;return S=Math.round(S),Math.min(x,S)},C.prototype.setMaxBackoffMs=function(z){this.maxBackoffInMs=z},C.prototype.backoff=function(z,x){var b=this;if(this.timerHandle!==void 0&&(this.logger.debug("Clearing current back off"),clearTimeout(this.timerHandle),this.timerHandle=void 0),this.previousCompleteTime!==void 0){var S=Date.now()-this.previousCompleteTime;S>this.maxBackoffInMs*this.gapDetectionSettings.tolerance&&S>this.gapDetectionSettings.minimumWaitMs&&(this.logger.info("Back off for ".concat(z," with ID ").concat(this.backoffId," will be reset due to a lot of time having passed since the previous backoff (").concat(S," ms)")),this.backoffCount=0,this.previousCompleteTime=void 0)}var _=C.calculateNextBackoffMs(this.backoffCount,this.maxBackoffInMs);this.backoffId++,this.backoffCount++,this.logger.info("Backing off ".concat(z," for ").concat(_," milliseconds with ID ").concat(this.backoffId)),this.callback=function(w,R){L(w,R,b.gapDetectionSettings)&&(b.logger.info("Back off for ".concat(z," with ID ").concat(b.backoffId," will be reset due to the wait (").concat(Date.now()-(w??0)," ms) being longer than expected (").concat(R," ms)")),b.backoffCount=0),b.logger.info("Back off for ".concat(z," with ID ").concat(b.backoffId," complete, invoking handler")),b.timerHandle=void 0,b.callback=void 0,b.previousCompleteTime=Date.now(),x()};var N=Date.now();this.timerHandle=setTimeout(function(){var w;return(w=b.callback)===null||w===void 0?void 0:w.call(b,N,_)},_)},C.prototype.reset=function(){this.timerHandle!==void 0&&(this.logger.debug("Resetting back off with ID ".concat(this.backoffId)),clearTimeout(this.timerHandle),this.timerHandle=void 0,this.callback=void 0),this.backoffCount=0},C.prototype.expediteIfPending=function(){if(this.backoffCount=0,this.timerHandle!==void 0){this.logger.debug("Expediting back off with ID ".concat(this.backoffId)),clearTimeout(this.timerHandle),this.timerHandle=void 0;var z=this.callback;this.callback=void 0,z&&z()}},C})();D.ExponentialBackoff=W},function(q,D,K){var L=this&&this.__spreadArray||function(x,b,S){if(S||arguments.length===2)for(var _,N=0,w=b.length;N<w;N++)!_&&N in b||(_||(_=Array.prototype.slice.call(b,0,N)),_[N]=b[N]);return x.concat(_||Array.prototype.slice.call(b))};Object.defineProperty(D,"__esModule",{value:!0}),D.LoggingManagerConsumer=D.RegistrationEnforcer=void 0;var W=K(6),C=(function(){function x(b,S,_){this.wrapped=b,this.shouldConnectionDependOnRegistration=S,this.shouldHoldBackEvents=_,this.isRegistered=!1,this.heldBackEvents=[]}return x.prototype.onDownstreamRequest=function(b,S,_){this.passIfRegisteredOrNotNeeded("onDownstreamRequest",b,S,_)},x.prototype.onConnected=function(b){this.passIfRegisteredOrNotNeeded("onConnected",b)},x.prototype.onRegistered=function(b){this.isRegistered=!0,this.wrapped.onRegistered(b),this.fireHeldBackEvents()},x.prototype.onUnregistered=function(b){this.isRegistered=!1,this.wrapped.onUnregistered(b),b.getState()===W.State.Connected&&this.shouldConnectionDependOnRegistration()&&b.forceReconnectDueToNoRegistration()},x.prototype.onReconnecting=function(b){this.wrapped.onReconnecting(b)},x.prototype.onReconnectIsRequired=function(b,S,_){this.wrapped.onReconnectIsRequired(b,S,_)},x.prototype.onDisconnected=function(b){this.isRegistered=!1,this.dropHeldBackEvents(),this.wrapped.onDisconnected(b)},x.prototype.onTerminalError=function(b){this.wrapped.onTerminalError(b)},x.prototype.onConnectionParametersUpdated=function(b){this.wrapped.onConnectionParametersUpdated(b)},x.prototype.onTrouterMessageLost=function(b){this.passIfRegisteredOrNotNeeded("onTrouterMessageLost",b)},x.prototype.onUserActivityStateAccepted=function(b){this.passIfRegisteredOrNotNeeded("onUserActivityStateAccepted",b)},x.prototype.onAudiencesSetResolved=function(b,S){this.passIfRegisteredOrNotNeeded("onAudiencesSetResolved",b,S)},x.prototype.getState=function(){return this.wrapped.getState()},x.prototype.holdBackEvent=function(b){for(var S=[],_=1;_<arguments.length;_++)S[_-1]=arguments[_];this.heldBackEvents.push({kind:b,args:S})},x.prototype.passIfRegisteredOrNotNeeded=function(b){for(var S,_=[],N=1;N<arguments.length;N++)_[N-1]=arguments[N];var w=this.shouldConnectionDependOnRegistration(),R=this.shouldHoldBackEvents();w&&R||this.fireHeldBackEvents(w?function(j){return j.kind!=="onConnected"}:void 0),this.isRegistered||!w||R===!1&&b!=="onConnected"?(S=this.wrapped)[b].apply(S,_):this.holdBackEvent.apply(this,L([b],_,!1))},x.prototype.fireHeldBackEvents=function(b){for(var S,_=0,N=this.heldBackEvents;_<N.length;_++){var w=N[_];(b===void 0||b(w))&&(S=this.wrapped)[w.kind].apply(S,w.args)}this.heldBackEvents=b===void 0?[]:this.heldBackEvents.filter(function(R){return!b(R)})},x.prototype.dropHeldBackEvents=function(){this.heldBackEvents=[]},x})();D.RegistrationEnforcer=C;var z=(function(){function x(b,S,_,N){this.wrapped=b,this.prefix=S,this.logger=_,this.onEventAction=N}return x.prototype.onEvent=function(b,S){var _;this.onEventAction!==void 0?this.onEventAction(b,S):((_=this.logger)!==null&&_!==void 0?_:console).log("".concat(this.prefix," TracingEnforcer: ").concat(b,"(").concat(S,")"))},x.prototype.onDownstreamRequest=function(b,S,_){this.onEvent("onDownstreamRequest",JSON.stringify({request:S,response:_})),this.wrapped.onDownstreamRequest(b,S,_)},x.prototype.onConnected=function(b){this.onEvent("onConnected",b.getState().toString()),this.wrapped.onConnected(b)},x.prototype.onRegistered=function(b){this.onEvent("onRegistered",b.getState().toString()),this.wrapped.onRegistered(b)},x.prototype.onUnregistered=function(b){this.onEvent("onUnregistered",b.getState().toString()),this.wrapped.onUnregistered(b)},x.prototype.onReconnecting=function(b){this.onEvent("onReconnecting",b.getState().toString()),this.wrapped.onReconnecting(b)},x.prototype.onReconnectIsRequired=function(b,S,_){this.onEvent("onReconnectIsRequired",JSON.stringify({connection:b.getState().toString(),useConnectParamsFromCache:S,reason:_})),this.wrapped.onReconnectIsRequired(b,S,_)},x.prototype.onDisconnected=function(b){this.onEvent("onDisconnected",b.getState().toString()),this.wrapped.onDisconnected(b)},x.prototype.onTerminalError=function(b){this.onEvent("onTerminalError",JSON.stringify({connection:b})),this.wrapped.onTerminalError(b)},x.prototype.onConnectionParametersUpdated=function(b){this.onEvent("onConnectionParametersUpdated",JSON.stringify({connectParams:b})),this.wrapped.onConnectionParametersUpdated(b)},x.prototype.onTrouterMessageLost=function(b){this.onEvent("onTrouterMessageLost",JSON.stringify({flowTags:b})),this.wrapped.onTrouterMessageLost(b)},x.prototype.onUserActivityStateAccepted=function(b){this.onEvent("onUserActivityStateAccepted",JSON.stringify({cv:b})),this.wrapped.onUserActivityStateAccepted(b)},x.prototype.onAudiencesSetResolved=function(b,S){this.onEvent("onAudiencesSetResolved",JSON.stringify({audienceSubscriptionsResponse:b,cv:S})),this.wrapped.onAudiencesSetResolved(b,S)},x.prototype.getState=function(){return this.wrapped.getState()},x})();D.LoggingManagerConsumer=z},function(q,D,K){Object.defineProperty(D,"__esModule",{value:!0}),D.TrouterManagerFsm=void 0;var L=K(2),W=K(4),C=K(0),z=K(7),x=(function(){function b(S,_){this.worker=_,this.state=W.TrouterManagerState.Unknown,this.logger=new C.Logger("ManagerFsm",S)}return b.prototype.start=function(){this.state===W.TrouterManagerState.Unknown?(this.setState(W.TrouterManagerState.Disconnected),this.worker.forceStopLingeringConnection(),this.worker.startFirstConnection()):(this.logger.info("start called in state '".concat(W.TrouterManagerState[this.state],"', expediting pending backoffs, if any")),this.worker.expediteBackoffOnConnections())},b.prototype.stop=function(S){this.state!==W.TrouterManagerState.Unknown?(this.setState(W.TrouterManagerState.Unknown),this.worker.stopFirstConnection(S===!0),this.worker.stopSecondConnection(S===!0)):this.showIgnored("stop")},b.prototype.getState=function(){switch(this.state){case W.TrouterManagerState.Unknown:case W.TrouterManagerState.Connected:case W.TrouterManagerState.Disconnected:case W.TrouterManagerState.Switching:return this.state;case W.TrouterManagerState.TerminalError:return L.TrouterState.Disconnected}},b.prototype.getInternalState=function(){return this.state},b.prototype.onConnected=function(S){this.state===W.TrouterManagerState.Disconnected&&S?this.worker.doesSecondConnectionExist()?this.setState(W.TrouterManagerState.Switching):(this.setState(W.TrouterManagerState.Connected),this.worker.dispatchConnected()):this.showIgnored("onConnected(".concat(S,")"))},b.prototype.onRegistered=function(S){this.state!==W.TrouterManagerState.Disconnected||S?this.state!==W.TrouterManagerState.Switching||S?this.state===W.TrouterManagerState.Disconnected&&S&&(this.setState(W.TrouterManagerState.Connected),this.worker.dispatchConnected()):(this.setState(W.TrouterManagerState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnectionDelayed(),this.worker.dispatchConnected()):(this.setState(W.TrouterManagerState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnection(!0),this.worker.dispatchConnected()),this.worker.dispatchRegistrationState(!0)},b.prototype.onUnregistered=function(S){S&&this.worker.dispatchRegistrationState(!1)},b.prototype.onReconnecting=function(S){this.state!==W.TrouterManagerState.Connected&&this.state!==W.TrouterManagerState.Switching||!S?this.showIgnored("onReconnecting(".concat(S,")")):(this.setState(W.TrouterManagerState.Disconnected),this.worker.dispatchDisconnected())},b.prototype.onReconnectionRequired=function(S,_,N){this.state===W.TrouterManagerState.Connected&&S?(this.setState(W.TrouterManagerState.Switching),this.worker.startSecondConnection(_)):this.state===W.TrouterManagerState.Disconnected&&S?this.worker.startSecondConnection(_):this.state===W.TrouterManagerState.Switching&&S&&N===z.ReconnectReason.Configuration?(this.logger.debug("onReconnectionRequired: switch requested while already in Switching state"),this.worker.stopSecondConnection(!0),this.worker.startSecondConnection(_)):this.showIgnored("onReconnectionRequired(".concat(S,")"))},b.prototype.onDisconnected=function(S){this.state==W.TrouterManagerState.Unknown&&S?this.worker.dispatchDisconnected():this.state==W.TrouterManagerState.Switching&&S?(this.worker.switchConnections(),this.worker.stopSecondConnection(!1),this.setState(W.TrouterManagerState.Disconnected),this.worker.dispatchDisconnected()):this.showIgnored("onDisconnected(".concat(S,")"))},b.prototype.onTerminalError=function(){this.setState(W.TrouterManagerState.TerminalError),this.worker.dispatchTerminalError()},b.prototype.showIgnored=function(S){this.logger.info("Ignoring event '".concat(S,"' in state '").concat(W.TrouterManagerState[this.state],"'"))},b.prototype.setState=function(S){if(this.logger.info("Switching from state '".concat(W.TrouterManagerState[this.state],"' to state '").concat(W.TrouterManagerState[S],"'")),this.state===S)return void this.logger.error("Attempt to switch to the current state '".concat(W.TrouterManagerState[S],"'"));this.state=S},b})();D.TrouterManagerFsm=x},function(q,D,K){function L(te,Z){if(!Z)return te;var oe=_(_({},te),{enabled:Z.TelemetryEnabled});return Z.ClientTelemetryEventEnabled!==void 0&&(oe=_(_({},oe),Z.ClientTelemetryEventEnabled)),oe}function W(te,Z,oe){var _e,Ae,je,Me,qe,We,U,T,P,ne,M=function(J){return te.proxyUrlRewrite?(Z.info("Using rewritten URL for proxy"),te.proxyUrlRewrite(J)):J};return{clientInfo:{ua:te.trouterSettings.productName,v:te.trouterSettings.version},ioOptions:{ackTimeoutMs:5e3,rewriteUrlForProxy:M},clientCorrelationID:te.trouterSettings.sessionId,environment:te.trouterSettings.environment,telemetrySettings:L(te.telemetryConfig.settings,oe),eventLogger:te.telemetryConfig.eventLogger,endpointId:te.trouterSettings.registrationId,trouterUrl:oe?.TrouterConnectionUrl||te.trouterSettings.trouterServiceUrl,registration:te.trouterSettings.registrarServiceUrl?{registrarUrl:te.trouterSettings.registrarServiceUrl,registrationId:(_e=te.trouterSettings.registrationId)!==null&&_e!==void 0?_e:"",pnhAppId:(Ae=te.trouterSettings.pnhAppId)!==null&&Ae!==void 0?Ae:"",platform:(je=te.trouterSettings.platform)!==null&&je!==void 0?je:"",pnhTemplateKey:(Me=te.trouterSettings.pnhTemplate)!==null&&Me!==void 0?Me:"",platformUIVersion:(qe=te.trouterSettings.platformUIVersion)!==null&&qe!==void 0?qe:"",productContext:te.trouterSettings.pnhProductContext||void 0,context:(We=te.trouterSettings.pnhContext)!==null&&We!==void 0?We:"",registrarTtlSec:((U=te.trouterSettings.maxRegistrationTimeInMs)!==null&&U!==void 0?U:0)/1e3}:void 0,connectionDependsOnRegistration:te.trouterSettings.registrarServiceUrl===void 0?function(){return!1}:(T=te.trouterSettings.connectionDependsOnRegistration)!==null&&T!==void 0?T:function(){return!1},delayEventsUntilRegistered:(P=te.trouterSettings.delayEventsUntilRegistered)!==null&&P!==void 0?P:function(){return!1},timeoutOptions:_({connectionTimeoutMs:te.trouterSettings.trouterConnectTimeoutInMs||3e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:te.trouterSettings.productName==="TeamsCDL"?3e5:3e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},te.trouterSettings.timeoutOptions),incallTimeoutOptions:_({connectionTimeoutMs:1e4,fetchTimeoutMs:5e3,pingTimeoutMs:5e3,pongTimeoutMs:2e3,maxBackoffMs:te.trouterSettings.productName==="TeamsCDL"?3e5:1e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},te.trouterSettings.incallTimeoutOptions),incallModeTimeoutMs:(ne=te.trouterSettings.incallModeTimeoutMs)!==null&&ne!==void 0?ne:0,lingeringConnectionDelayMs:6e4,userActivitySecondResendDelayMs:te.trouterSettings.userActivitySecondResendDelayMs||1e4,duplicateDisconnectThresholdMs:1e4,connectionCache:te.connectionCache,registrationStateCallback:te.registrationStateCallbackForAcsDoNotUse,rewriteUrlForProxy:M,retryLimitOnTokenFetch:te.trouterSettings.retryLimitOnTokenFetch,extraConnectionHeaders:te.trouterSettings.extraConnectionHeaders,expediteBackoffOnStartMinimumDelayMs:1e4,toJSON:function(){return _(_({},this),{connectionCache:this.connectionCache?{}:this.connectionCache})}}}function C(te){return new re(te)}function z(){return R.CLIENT_VERSION}function x(te,Z){var oe=te.indexOf("://");if(oe>=0){var _e=te.indexOf("/",oe+3);if(_e>=0)return Z+te.substr(_e)}return""}function b(te){var Z=this;return function(oe){return N(Z,void 0,void 0,function(){var _e;return w(this,function(Ae){switch(Ae.label){case 0:return _e={},[4,te(oe.needFresh)];case 1:return[2,(_e.token=Ae.sent(),_e.tokenType="skype",_e)]}})})}}function S(te,Z){var oe,_e=this;return function(Ae){return N(_e,void 0,void 0,function(){var je,Me,qe;return w(this,function(We){switch(We.label){case 0:je=new Date,Me=setInterval(function(){var U=Math.round((Date.now()-je.getTime())/6e4);te.warn("Note: Trouter auth token request promise from ".concat(je.toISOString()," has not been resolved for ").concat(U," minutes. The client is blocked from operating properly"))},3e5),We.label=1;case 1:return We.trys.push([1,,3,4]),[4,Z(Ae)];case 2:return qe=We.sent(),Ae.needFresh&&qe.token===oe&&te.error("API violation: Trouter auth token provider got a request with needRefresh=true, but returned the same token as last time anyway. Please fix the host app"),oe=qe.token,[2,qe];case 3:return clearInterval(Me),[7];case 4:return[2]}})})}}var _=this&&this.__assign||function(){return _=Object.assign||function(te){for(var Z,oe=1,_e=arguments.length;oe<_e;oe++){Z=arguments[oe];for(var Ae in Z)Object.prototype.hasOwnProperty.call(Z,Ae)&&(te[Ae]=Z[Ae])}return te},_.apply(this,arguments)},N=this&&this.__awaiter||function(te,Z,oe,_e){function Ae(je){return je instanceof oe?je:new oe(function(Me){Me(je)})}return new(oe||(oe=Promise))(function(je,Me){function qe(T){try{U(_e.next(T))}catch(P){Me(P)}}function We(T){try{U(_e.throw(T))}catch(P){Me(P)}}function U(T){T.done?je(T.value):Ae(T.value).then(qe,We)}U((_e=_e.apply(te,Z||[])).next())})},w=this&&this.__generator||function(te,Z){function oe(U){return function(T){return _e([U,T])}}function _e(U){if(Ae)throw new TypeError("Generator is already executing.");for(;qe&&(qe=0,U[0]&&(We=0)),We;)try{if(Ae=1,je&&(Me=2&U[0]?je.return:U[0]?je.throw||((Me=je.return)&&Me.call(je),0):je.next)&&!(Me=Me.call(je,U[1])).done)return Me;switch(je=0,Me&&(U=[2&U[0],Me.value]),U[0]){case 0:case 1:Me=U;break;case 4:return We.label++,{value:U[1],done:!1};case 5:We.label++,je=U[1],U=[0];continue;case 7:U=We.ops.pop(),We.trys.pop();continue;default:if(Me=We.trys,!(Me=Me.length>0&&Me[Me.length-1])&&(U[0]===6||U[0]===2)){We=0;continue}if(U[0]===3&&(!Me||U[1]>Me[0]&&U[1]<Me[3])){We.label=U[1];break}if(U[0]===6&&We.label<Me[1]){We.label=Me[1],Me=U;break}if(Me&&We.label<Me[2]){We.label=Me[2],We.ops.push(U);break}Me[2]&&We.ops.pop(),We.trys.pop();continue}U=Z.call(te,We)}catch(T){U=[6,T],je=0}finally{Ae=Me=0}if(5&U[0])throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}var Ae,je,Me,qe,We={label:0,sent:function(){if(1&Me[0])throw Me[1];return Me[1]},trys:[],ops:[]};return qe={next:oe(0),throw:oe(1),return:oe(2)},typeof Symbol=="function"&&(qe[Symbol.iterator]=function(){return this}),qe};Object.defineProperty(D,"__esModule",{value:!0}),D.replaceTrouterUrlBase=D.getTrouterServiceVersion=D.createTrouterService=D.TrouterService=D.UserActivityState=D.TrouterState=void 0;var R=K(1),j=K(2);Object.defineProperty(D,"TrouterState",{enumerable:!0,get:function(){return j.TrouterState}}),Object.defineProperty(D,"UserActivityState",{enumerable:!0,get:function(){return j.UserActivityState}});var G=K(0),Q=K(8),Y=K(9),$=K(10),V=K(11),re=(function(){function te(Z){this.logProvider=Z,this.stateChangedListeners=[],this.logger=new G.Logger("Trouter",Z),this.trouterUrlPromise=new V.TrouterUrlPromise(Z),this.messageHandlers=new Q.MessageHandlerRegistry(Z),this.listeners={},this.connectionInfo=null,this.logger.info("Created TrouterService version ".concat(R.CLIENT_VERSION))}return te.prototype.start=function(Z){var oe;if(this.logger.info("Start"),!Z.skypeTokenProvider&&!Z.authTokenProvider)throw new Error("no token provider has been configured, either skypeTokenProvider or authTokenProvider must be populated");Z.skypeTokenProvider&&!Z.trouterSettings.disableInternalSkypeTokenCache&&(Z.skypeTokenProvider=(0,Y.addCacheAsBackupTo)(Z.skypeTokenProvider)),this.trouterCfg=Z;var _e=W(Z,this.logger,this.ecsCfg);Z.internalEnableV4cProtocol===!1&&(_e.forceV4aProtocol=!0);var Ae=S(this.logger,(oe=Z.authTokenProvider)!==null&&oe!==void 0?oe:b(Z.skypeTokenProvider));this.trouterServer===void 0&&(this.trouterServer=new $.TrouterManager(this.logProvider,_e,Ae,Z.authTokenProvider===void 0,this)),this.pendingActivityState!==void 0&&(this.trouterServer.setUserActivityState(this.pendingActivityState[0],this.pendingActivityState[1]),this.pendingActivityState=void 0),this.trouterServer.start()},te.prototype.stop=function(Z){this.logger.info("close connection"),this.trouterUrlPromise.rejectUrl(new Error("TrouterService is stopped")),this.trouterServer!==void 0&&this.trouterServer.stop(Z)},te.prototype.setEcsConfig=function(Z){return N(this,void 0,void 0,function(){var oe=this;return w(this,function(_e){return[2,new Promise(function(Ae){if(oe.ecsCfg=Z.TrouterJScriptClient,oe.logger.info("Setting ECS configuration to ".concat(JSON.stringify(oe.ecsCfg))),oe.trouterServer!==void 0&&oe.trouterCfg!==void 0){var je=W(oe.trouterCfg,oe.logger,oe.ecsCfg);oe.trouterServer.configure(je)}Ae()})]})})},te.prototype.checkConnection=function(Z){this.trouterServer!==void 0&&this.trouterServer.checkConnection(Z!=null&&Z)},te.prototype.resendRegistration=function(){return N(this,void 0,void 0,function(){return w(this,function(Z){if(!this.trouterServer)throw new Error("resendRegistration called too early");return[2,this.trouterServer.resendRegistration()]})})},te.prototype.registerListener=function(Z,oe){return oe===""||!oe.startsWith("/")||oe.includes("?")||oe.includes("#")?(this.logger.error("Listener path '".concat(oe,"' is not valid")),!1):this.listeners[oe]?(this.logger.error("Another listener is already registered for path '".concat(oe,"'")),!1):(this.listeners[oe]=Z,this.logger.debug("Listener for path '".concat(oe,"' registered")),this.connectionInfo&&Z.onTrouterConnected(this.connectionInfo.baseEndpointUrl+oe,this.connectionInfo),!0)},te.prototype.unregisterListener=function(Z){for(var oe=[],_e=0,Ae=Object.keys(this.listeners);_e<Ae.length;_e++){var je=Ae[_e];this.listeners[je]===Z&&oe.push(je)}if(oe.length===0)return!1;for(var Me=0,qe=oe;Me<qe.length;Me++){var je=qe[Me];delete this.listeners[je]}return this.logger.debug("Listener for path(s) '".concat(oe.join("', '"),"' unregistered")),!0},te.prototype.onTrouterConnected=function(Z,oe){this.logger.debug("Trouter is now connected");for(var _e=0,Ae=Object.keys(this.listeners);_e<Ae.length;_e++){var je=Ae[_e];try{this.listeners[je].onTrouterConnected(oe.baseEndpointUrl+je,oe)}catch(Me){this.logger.error("Listener '".concat(je,"' threw an exception from onTrouterConnected(): ").concat(Me))}}this.connectionInfo=oe,this.trouterUrlPromise.resolveUrl(Z),this.notifyStateChanged(j.TrouterState.Connected,{url:Z,getRemainingTtlInSec:function(){return oe.connectionTtlSec}})},te.prototype.onTrouterDisconnected=function(){this.logger.debug("Trouter is now disconnected"),this.connectionInfo=null;for(var Z=0,oe=Object.keys(this.listeners);Z<oe.length;Z++){var _e=oe[Z],Ae=this.listeners[_e];if(Ae.onTrouterDisconnected)try{Ae.onTrouterDisconnected()}catch(je){this.logger.error("Listener '".concat(_e,"' threw an exception from onTrouterDisconnected(): ").concat(je))}}this.notifyStateChanged(j.TrouterState.Disconnected)},te.prototype.onTrouterRequest=function(Z,oe){for(var _e="",Ae=0,je=Object.keys(this.listeners);Ae<je.length;Ae++){var Me=je[Ae];Z.path.startsWith(Me)&&Me.length>_e.length&&(_e=Me)}if(_e==="")this.tryMessageHandlers(Z,oe)||(oe.status=404,oe.headers={"Trouter-Responder":"ClientLib"},oe.send());else try{this.listeners[_e].onTrouterRequest(Z,oe)}catch(qe){this.logger.error("Listener '".concat(_e,"' threw an exception from onTrouterRequest(): ").concat(qe)),oe.status=500,oe.headers={"Trouter-Responder":"ClientLib"},oe.send()}},te.prototype.onTrouterMessageLoss=function(Z){this.logger.info("onTrouterMessageLoss called with tags [".concat(Z,"]"));for(var oe=!0,_e=0,Ae=Object.keys(this.listeners);_e<Ae.length;_e++){var je=Ae[_e],Me=this.listeners[je];if(Me.onTrouterMessageLoss)try{oe=Me.onTrouterMessageLoss(Z)&&oe,oe===void 0&&(this.logger.error("Listener '".concat(je,"' did not return a boolean value from onTrouterMessageLoss()")),oe=!1)}catch(qe){this.logger.error("Listener '".concat(je,"' threw an exception from onTrouterMessageLoss(): ").concat(qe)),oe=!1}}return oe},te.prototype.onTrouterUserActivityStateAccepted=function(Z){this.logger.debug("onTrouterUserActivityStateAccepted cv: ".concat(Z));for(var oe=0,_e=Object.keys(this.listeners);oe<_e.length;oe++){var Ae=_e[oe],je=this.listeners[Ae];if(je.onTrouterUserActivityStateAccepted)try{je.onTrouterUserActivityStateAccepted(Z)}catch(Me){this.logger.error("Listener '".concat(Ae,"' threw an exception from onTrouterUserActivityStateAccepted(): ").concat(Me))}}},te.prototype.onAudiencesSetResolved=function(Z,oe){this.logger.debug("onAudiencesSetResolved cv: ".concat(oe));for(var _e=0,Ae=Object.keys(this.listeners);_e<Ae.length;_e++){var je=Ae[_e],Me=this.listeners[je];if(Me.onAudiencesSetResolved)try{Me.onAudiencesSetResolved(Z,oe)}catch(qe){this.logger.error("Listener '".concat(je,"' threw an exception from onAudienceSubscribed(): ").concat(qe))}}},te.prototype.setUserActivityState=function(Z,oe){if(Z!==j.UserActivityState.Active&&Z!==j.UserActivityState.Inactive)throw new Error("setUserActivityState called with unsupported value ".concat(Z));this.logger.info("setUserActivityState called with value ".concat(j.UserActivityState[Z])),this.trouterServer&&this.state()!==j.TrouterState.Unknown?this.trouterServer.setUserActivityState(Z,oe):(this.pendingActivityState=[Z,oe],this.logger.warn("setUserActivityState called before start() or after stop()"))},te.prototype.setAudienceSubscriptions=function(Z,oe){if(Z.audienceSubscriptions.length>1)throw new Error("Only singular audience subscription is supported");if(this.trouterServer&&this.state()!==j.TrouterState.Unknown)return this.trouterServer.setAudienceSubscriptionsAsync(Z,15e3,oe);throw new Error("audience subscribe called before start() or after stop()")},te.prototype.state=function(){return this.trouterServer!==void 0?this.trouterServer.getState():j.TrouterState.Unknown},te.prototype.isInTerminalState=function(){return this.trouterServer!==void 0&&this.trouterServer.isInTerminalState()},te.prototype.reportStateInfo=function(){return this.trouterServer===void 0?"":this.trouterServer.reportStateInfo()},te.prototype.getServerState=function(){if(this.trouterServer!==void 0)return this.trouterServer.getServerState()},te.prototype.getTrouterUrlAsync=function(){return this.trouterServer!==void 0?this.trouterUrlPromise.getPromise():Promise.reject(new Error("TrouterService has not been started"))},te.prototype.onStateChanged=function(Z){if(this.logger.info("onStateChanged called"),Z===void 0)this.stateChangedListeners=this.stateChangedListeners.filter(function(_e){return _e.wrappedCallback===void 0});else{this.offStateChanged(Z);var oe=function(_e,Ae){Z(_e,Ae?Ae.url:"")};oe.wrappedCallback=Z,this.stateChangedListeners.push(oe)}},te.prototype.offStateChanged=function(Z){this.logger.info("offStateChanged called");var oe=this.stateChangedListeners.length;return this.stateChangedListeners=this.stateChangedListeners.filter(function(_e){return _e.wrappedCallback!==Z}),oe>this.stateChangedListeners.length},te.prototype.addCallback=function(Z){this.logger.info("addListener called"),this.stateChangedListeners.indexOf(Z,0)===-1&&Z!==void 0&&this.stateChangedListeners.push(Z)},te.prototype.removeCallback=function(Z){this.logger.info("removeListener called");var oe=this.stateChangedListeners.indexOf(Z,0);return oe>-1&&(this.stateChangedListeners.splice(oe,1),!0)},te.prototype.registerMessageHandler=function(Z){this.logger.info("registerMessageHandler is called"),this.messageHandlers.register(Z)},te.prototype.clearMessageHandlers=function(){this.logger.info("clearMessageHandlers is called"),this.messageHandlers.clear()},te.prototype.notifyStateChanged=function(Z,oe){var _e=this;this.logger.info("notifyStateChanged called, will forward to ".concat(this.stateChangedListeners.length," listeners")),this.stateChangedListeners.forEach(function(Ae){try{Ae(Z,oe)}catch(je){_e.logger.error("Error in callback ".concat(je))}})},te.prototype.tryMessageHandlers=function(Z,oe){if(!this.messageHandlers.active())return!1;var _e,Ae=null;try{_e=JSON.parse(Z.body),Ae=_e&&(_e.evt||_e.eventId)||null}catch{}var je={eventId:Ae,url:(this.connectionInfo?this.connectionInfo.baseEndpointUrl:"")+Z.path,body:_e,rawBody:Z.body,headers:Z.headers},Me=this.messageHandlers.handleMessage(je);return!!Me.isHandled&&(oe.status=Me.resultCode,Me.responseHeaders&&(oe.headers=Me.responseHeaders),Me.responseBody&&(oe.body=Me.responseBody),oe.send(),!0)},te})();D.TrouterService=re,D.createTrouterService=C,D.getTrouterServiceVersion=z,D.replaceTrouterUrlBase=x},function(q,D){q.exports=ze}])})});E(A);var H=I(function(ke,ye){Object.defineProperty(ye,"__esModule",{value:!0}),ye.DeleteReason=void 0;var ze;(function(q){q.DeletedByPolicy="deletedByPolicy",q.DeletedByUser="deletedByUser"})(ze||(ye.DeleteReason=ze={}))});E(H),H.DeleteReason;var B=I(function(ke,ye){Object.defineProperty(ye,"__esModule",{value:!0}),ye.PACKAGE_VERSION=ye.CONFIG_API_VERSION=ye.EudbCountries=ye.CloudPrefix=ye.CloudType=ye.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES=void 0,ye.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES=3;var ze;(function(D){D.Public="Public",D.GccHigh="GCC High",D.Dod="DoD"})(ze||(ye.CloudType=ze={}));var q;(function(D){D.OrgId="orgid",D.Acs="acs",D.Spool="spool",D.GccHigh="gcch",D.GccHighAcs="gcch-acs",D.Dod="dod",D.DodAcs="dod-acs"})(q||(ye.CloudPrefix=q={})),ye.EudbCountries=["europe","france","germany","norway","switzerland","sweden"],ye.CONFIG_API_VERSION="2024-09-01",ye.PACKAGE_VERSION="1.0.0-beta.34"});E(B),B.PACKAGE_VERSION,B.CONFIG_API_VERSION,B.EudbCountries,B.CloudPrefix,B.CloudType,B.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES;var se=H,le=B,me=I(function(ke,ye){var ze=y&&y.__awaiter||function(U,T,P,ne){function M(J){return J instanceof P?J:new P(function(he){he(J)})}return new(P||(P=Promise))(function(J,he){function Ie(Le){try{Ue(ne.next(Le))}catch(Qe){he(Qe)}}function Oe(Le){try{Ue(ne.throw(Le))}catch(Qe){he(Qe)}}function Ue(Le){Le.done?J(Le.value):M(Le.value).then(Ie,Oe)}Ue((ne=ne.apply(U,T||[])).next())})};Object.defineProperty(ye,"__esModule",{value:!0}),ye.isEudbLocation=ye.parseTokenCredential=ye.base64decode=ye.toTelemetrySender=ye.toLogProvider=ye.toMessageHandler=void 0,ye.generateUuid=Me;const q=new Map([["chatMessageReceived",200],["typingIndicatorReceived",245],["readReceiptReceived",246],["chatMessageEdited",247],["chatMessageDeleted",248],["chatThreadCreated",257],["chatThreadPropertiesUpdated",258],["chatThreadDeleted",259],["participantsAdded",260],["participantsRemoved",261]]),D="8:orgid:",K="8:dod:",L="8:gcch:",W="8:teamsvisitor:",C="4:",z="8:acs:",x="8:gcch-acs:",b="8:dod-acs:",S="8:spool:",_=(U,T,P,ne)=>{const M=q.get(U);return{handleMessage(J){let he=null;if(J?.rawBody&&(he=JSON.parse(J.rawBody)),he===null||he.eventId!==M)return;const Ie=R(U,he,P,ne);if(Ie!==null)return T(Ie),{isHandled:!0,resultCode:200}}}};ye.toMessageHandler=_;function N(U,T,P){return{threadId:U.groupId,sender:V(U.senderId),senderDisplayName:U.senderDisplayName,recipient:V(U.recipientMri),id:U.messageId,createdOn:new Date(U.originalArrivalTime),version:U.version,type:U.messageType,message:U.messageBody,metadata:re(U.acsChatMessageMetadata)||{},attachments:oe(re(U.attachments)||[],T,P)}}function w(U,T,P){return Object.assign(Object.assign({},N(U,T,P)),{editedOn:new Date(U.edittime)})}const R=(U,T,P,ne)=>{if(U==="chatMessageReceived")return N(T,P,ne);if(U==="chatMessageEdited")return w(T,P,ne);if(U==="chatMessageDeleted"){const M=T;return{threadId:M.groupId,sender:V(M.senderId),senderDisplayName:M.senderDisplayName,recipient:V(M.recipientMri),id:M.messageId,createdOn:new Date(M.originalArrivalTime),version:M.version,deletedOn:new Date(M.deletetime),type:M.messageType}}if(U==="typingIndicatorReceived"){const M=T;return{threadId:M.groupId,sender:V(M.senderId),senderDisplayName:M.senderDisplayName,recipient:V(M.recipientMri),version:M.version,receivedOn:new Date(M.originalArrivalTime)}}if(U==="readReceiptReceived"){const M=T,he=JSON.parse(M.messageBody).consumptionhorizon.split(";");return{threadId:M.groupId,sender:V(M.senderId),senderDisplayName:"",recipient:V(M.recipientMri),chatMessageId:M.messageId,readOn:new Date(+he[1])}}if(U==="chatThreadCreated"){const M=T,J=JSON.parse(unescape(M.createdBy)),he=JSON.parse(unescape(M.members)),Ie=j(J),Oe=he.map(Le=>j(Le));return{threadId:M.threadId,createdOn:new Date(M.createTime),createdBy:Ie,version:M.version,participants:Oe,properties:G(JSON.parse(unescape(M.properties))),retentionPolicy:Q(JSON.parse(unescape(M.properties)))}}if(U==="chatThreadPropertiesUpdated"){const M=T,J=JSON.parse(unescape(M.editedBy)),he=j(J);return{threadId:M.threadId,updatedOn:new Date(M.editTime),updatedBy:he,version:M.version,properties:G(JSON.parse(unescape(M.properties))),retentionPolicy:Q(JSON.parse(unescape(M.properties)))}}if(U==="chatThreadDeleted"){const M=T,J=T.reason==se.DeleteReason.DeletedByPolicy?null:j(JSON.parse(unescape(M.deletedBy)));return{threadId:M.threadId,deletedOn:new Date(M.deleteTime),deletedBy:J,version:M.version,reason:M.reason}}if(U==="participantsAdded"){const M=T,J=JSON.parse(unescape(M.addedBy)),he=JSON.parse(unescape(M.participantsAdded)),Ie=j(J),Oe=he.map(Le=>j(Le));return{threadId:M.threadId,addedOn:new Date(M.time),addedBy:Ie,version:M.version,participantsAdded:Oe}}if(U==="participantsRemoved"){const M=T,J=JSON.parse(unescape(M.removedBy)),he=JSON.parse(unescape(M.participantsRemoved)),Ie=j(J),Oe=he.map(Le=>j(Le));return{threadId:M.threadId,removedOn:new Date(M.time),removedBy:Ie,version:M.version,participantsRemoved:Oe}}return null},j=U=>{var T;const P={id:V(U.participantId),displayName:U.displayName,metadata:re((T=U.memberMetaData)!==null&&T!==void 0?T:"")||{}};return U.shareHistoryTime&&(P.shareHistoryTime=new Date(U.shareHistoryTime)),P},G=U=>{var T;return{topic:U.topic,metadata:re((T=U.acsChatThreadMetadata)!==null&&T!==void 0?T:"")||{}}},Q=U=>{const T=U.retentionPolicy;if(!T)return{kind:"none"};let P;try{P=JSON.parse(T)}catch{return{kind:"none"}}if(P.retentionPolicyType==="DeleteAfterCreationTime"&&typeof P.executeAfter=="string"){const ne=P.executeAfter.trim().replace(/^[+-]/,""),M=ne.includes(".")?ne.split(".")[0]:"0",J=parseInt(M,10);return{kind:"threadCreationDate",deleteThreadAfterDays:isNaN(J)?0:J}}return{kind:"none"}},Y=U=>({log:(...T)=>U.info(T),warn:(...T)=>U.warning(T),error:(...T)=>U.error(T),debug:(...T)=>U.verbose(T),info:(...T)=>U.verbose(T)});ye.toLogProvider=Y;const $=U=>({logEvent:T=>U.info(T)});ye.toTelemetrySender=$;const V=U=>U.startsWith(D)?{kind:"microsoftTeamsUser",rawId:U,microsoftTeamsUserId:U.substring(D.length),isAnonymous:!1,cloud:"public"}:U.startsWith(K)?{kind:"microsoftTeamsUser",rawId:U,microsoftTeamsUserId:U.substring(K.length),isAnonymous:!1,cloud:"dod"}:U.startsWith(L)?{kind:"microsoftTeamsUser",rawId:U,microsoftTeamsUserId:U.substring(L.length),isAnonymous:!1,cloud:"gcch"}:U.startsWith(W)?{kind:"microsoftTeamsUser",rawId:U,microsoftTeamsUserId:U.substring(W.length),isAnonymous:!0}:U.startsWith(C)?{kind:"phoneNumber",rawId:U,phoneNumber:U.substring(C.length)}:U.startsWith(z)||U.startsWith(x)||U.startsWith(b)||U.startsWith(S)?{kind:"communicationUser",communicationUserId:U}:{kind:"unknown",id:U},re=U=>{if(!(U==null||U===""||U==="null"||U==="{}"||U==="[]"))return JSON.parse(U)},te=(U,T,P)=>{let ne;try{ne=new URL(U),(ne.protocol==="http:"||ne.protocol==="https:")&&(ne=new URL(ne.pathname,T))}catch{try{ne=new URL(U,T)}catch{return U}}return ne.searchParams.set("api-version",P),ne.toString()},Z=U=>{let T;try{T=new URL(U)}catch{return!1}return T.protocol==="http:"||T.protocol==="https:"},oe=(U,T,P)=>(T==null||T===""||!Z(T)||U.filter(ne=>ne.attachmentType.toLowerCase()==="image".toLowerCase()).map(ne=>{ne.previewUrl&&(ne.previewUrl=te(ne.previewUrl,T,P)),ne.url&&(ne.url=te(ne.url,T,P))}),U),_e=U=>p.default.isNodeLike?Buffer.from(U,"base64").toString():atob(U);ye.base64decode=_e;const Ae=U=>{let[,T]=U?.split(".");if(T===void 0)throw new Error("Invalid token");return T=T.replace(/-/g,"+").replace(/_/g,"/"),JSON.parse(decodeURIComponent(escape((0,ye.base64decode)(T))))},je=U=>ze(void 0,void 0,void 0,function*(){const T=yield U.getToken(),P=T?.token,ne=Ae(P),M=ne.skypeid,J=ne.resourceId,he=We(M),Ie=ne.resourceLocation||"";return{jwtToken:P,acsResourceId:J,identityMri:M,cloudType:he,resourceLocation:Ie}});ye.parseTokenCredential=je;function Me(){return(0,f.default.v4)()}const qe=U=>!!U&&!!le.EudbCountries.find(T=>T===U);ye.isEudbLocation=qe;function We(U){switch(U.substring(0,U.indexOf(":"))){case le.CloudPrefix.OrgId:case le.CloudPrefix.Acs:case le.CloudPrefix.Spool:return le.CloudType.Public;case le.CloudPrefix.GccHigh:case le.CloudPrefix.GccHighAcs:return le.CloudType.GccHigh;case le.CloudPrefix.Dod:case le.CloudPrefix.DodAcs:return le.CloudType.Dod;default:return le.CloudType.Public}}});E(me),me.isEudbLocation,me.parseTokenCredential,me.base64decode,me.toTelemetrySender,me.toLogProvider,me.toMessageHandler,me.generateUuid;var ce=I(function(ke,ye){var ze=y&&y.__createBinding||(Object.create?(function(z,x,b,S){S===void 0&&(S=b);var _=Object.getOwnPropertyDescriptor(x,b);(!_||("get"in _?!x.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return x[b]}}),Object.defineProperty(z,S,_)}):(function(z,x,b,S){S===void 0&&(S=b),z[S]=x[b]})),q=y&&y.__setModuleDefault||(Object.create?(function(z,x){Object.defineProperty(z,"default",{enumerable:!0,value:x})}):function(z,x){z.default=x}),D=y&&y.__importStar||function(z){if(z&&z.__esModule)return z;var x={};if(z!=null)for(var b in z)b!=="default"&&Object.prototype.hasOwnProperty.call(z,b)&&ze(x,z,b);return q(x,z),x},K=y&&y.__awaiter||function(z,x,b,S){function _(N){return N instanceof b?N:new b(function(w){w(N)})}return new(b||(b=Promise))(function(N,w){function R(Q){try{G(S.next(Q))}catch(Y){w(Y)}}function j(Q){try{G(S.throw(Q))}catch(Y){w(Y)}}function G(Q){Q.done?N(Q.value):_(Q.value).then(R,j)}G((S=S.apply(z,x||[])).next())})};Object.defineProperty(ye,"__esModule",{value:!0}),ye.RealTimeNotificationConfiguration=ye.TrouterConfigClient=void 0;const L=D(m.default);class W extends L.ServiceClient{constructor(x,b){b||(b={});const S=`azsdk-js-communication-signaling/${le.PACKAGE_VERSION}`,_=b.userAgentOptions&&b.userAgentOptions.userAgentPrefix?`${b.userAgentOptions.userAgentPrefix} ${S}`:`${S}`,N=Object.assign(Object.assign({},b),{userAgentOptions:{userAgentPrefix:_},additionalPolicies:b.additionalPolicies});super(N),this.apiVersion=le.CONFIG_API_VERSION,this.endpoint=x,this.httpClient=(0,g.default.createDefaultHttpClient)()}fetchServiceUrls(x){return K(this,void 0,void 0,function*(){try{const b=(yield x.getToken()).token,S=(0,g.default.createPipelineRequest)({url:`${this.endpoint}/chat/config/realTimeNotifications?api-version=${this.apiVersion}`,method:"GET",headers:(0,g.default.createHttpHeaders)({Authorization:`Bearer ${b}`})}),_=yield this.pipeline.sendRequest(this.httpClient,S);if(_.status!==200||!_.bodyAsText)throw new Error(`Failed to fetch service URLs. Status: ${_.status}, Body: ${_.bodyAsText||"No response body"}`);const N=JSON.parse(_.bodyAsText);if(!N.trouterServiceUrl||!N.registrarServiceUrl||!N.cloudType)throw new Error("One or more required fields are missing in the response data");return new C(N.trouterServiceUrl,N.registrarServiceUrl,N.cloudType)}catch(b){throw new Error(`Error fetching real-time notification configuration from Chat Gateway: ${b.message}`)}})}}ye.TrouterConfigClient=W;class C{constructor(x,b,S){this.trouterServiceUrl=x,this.registrarServiceUrl=b,this.cloudType=S}}ye.RealTimeNotificationConfiguration=C});E(ce),ce.RealTimeNotificationConfiguration,ce.TrouterConfigClient;var ie=me,fe=ce,ue=I(function(ke,ye){var ze=y&&y.__awaiter||function(K,L,W,C){function z(x){return x instanceof W?x:new W(function(b){b(x)})}return new(W||(W=Promise))(function(x,b){function S(w){try{N(C.next(w))}catch(R){b(R)}}function _(w){try{N(C.throw(w))}catch(R){b(R)}}function N(w){w.done?x(w.value):z(w.value).then(S,_)}N((C=C.apply(K,L||[])).next())})};Object.defineProperty(ye,"__esModule",{value:!0}),ye.defaultTelemetrySettings=ye.createSettings=void 0;const q={version:"1.0.0",registrationId:"",sessionId:"",pnhAppId:"AcsWeb",pnhTemplate:"AcsWeb_Chat_2.1",platform:"SPOOL",platformUIVersion:"0.0.0",environment:"",productName:"acs-chat-web",trouterServiceUrl:"",registrarServiceUrl:"",registrarRefreshTimeoutInMs:35e4,timeoutOptions:{connectionTimeoutMs:2e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:5e4,requestTimeoutMs:5e3},maxRegistrationTimeInMs:72e5},D=(K,L)=>ze(void 0,void 0,void 0,function*(){var W;const C=L?.resourceEndpoint;if(C===void 0)throw new Error("'endpoint' cannot be null");const z=Object.assign({},q);z.registrationId=(0,ie.generateUuid)(),z.sessionId=(0,ie.generateUuid)();const b=yield new fe.TrouterConfigClient(C,L).fetchServiceUrls(K);return z.trouterServiceUrl=`${b.trouterServiceUrl}/v4/a`,z.registrarServiceUrl=`${b.registrarServiceUrl}/v3/registrations`,b.cloudType==="int"&&(z.pnhAppId="cns-e2e-test",z.pnhTemplate="cns-e2e-test:1.8"),z.maxRegistrationTimeInMs=(W=L?.registrationTimeInMs)!==null&&W!==void 0?W:q.maxRegistrationTimeInMs,z});ye.createSettings=D,ye.defaultTelemetrySettings={enabled:!1}});E(ue),ue.defaultTelemetrySettings,ue.createSettings;var Re=ue,Ne=I(function(ke,ye){var ze=y&&y.__awaiter||function(K,L,W,C){function z(x){return x instanceof W?x:new W(function(b){b(x)})}return new(W||(W=Promise))(function(x,b){function S(w){try{N(C.next(w))}catch(R){b(R)}}function _(w){try{N(C.throw(w))}catch(R){b(R)}}function N(w){w.done?x(w.value):z(w.value).then(S,_)}N((C=C.apply(K,L||[])).next())})};Object.defineProperty(ye,"__esModule",{value:!0}),ye.CommunicationSignalingClient=ye.ConnectionState=void 0;var q;(function(K){K[K.Unknown=0]="Unknown",K[K.Connected=2]="Connected",K[K.Disconnected=3]="Disconnected",K[K.Switching=9]="Switching"})(q||(ye.ConnectionState=q={}));class D{constructor(L,W,C){this.credential=L,this.logger=W,this.options=C,this.stateChangedListener=null,this.tokenFetchRetries=0,this.trouter=(0,A.createTrouterService)((0,ie.toLogProvider)(W))}start(){return ze(this,void 0,void 0,function*(){var L,W;if(this.resourceEndpoint=(L=this.options)===null||L===void 0?void 0:L.resourceEndpoint,this.resourceEndpoint===void 0)throw new Error("'endpoint' cannot be null");this.gatewayApiVersion=((W=this.options)===null||W===void 0?void 0:W.gatewayApiVersion)||"2024-03-07",this.config===void 0&&(this.config={trouterSettings:yield(0,Re.createSettings)(this.credential,this.options),skypeTokenProvider:C=>ze(this,void 0,void 0,function*(){if(C){if(this.tokenFetchRetries+=1,this.tokenFetchRetries>le.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES)throw yield this.stop(!0),new Error(`Access token is expired and failed to fetch a valid one after ${le.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES} retries`)}else this.tokenFetchRetries=0;return Promise.resolve((yield this.credential.getToken()).token)}),telemetryConfig:{eventLogger:(0,ie.toTelemetrySender)(this.logger),settings:Re.defaultTelemetrySettings}}),this.trouter.start(this.config),this.trouter.setUserActivityState(A.UserActivityState.Active)})}stop(L){return ze(this,void 0,void 0,function*(){this.trouter.offStateChanged(this.stateChangedListener),this.trouter.clearMessageHandlers(),this.trouter.stop(L??this.tokenFetchRetries>le.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES)})}on(L,W){if(L==="connectionChanged"){this.trouter.offStateChanged(this.stateChangedListener),this.stateChangedListener=(C,z)=>W(C),this.trouter.onStateChanged(this.stateChangedListener);return}this.trouter.registerMessageHandler((0,ie.toMessageHandler)(L,W,this.resourceEndpoint,this.gatewayApiVersion))}}ye.CommunicationSignalingClient=D});E(Ne),Ne.CommunicationSignalingClient,Ne.ConnectionState;var xe=Ne,Se=I(function(ke,ye){var ze=y&&y.__createBinding||(Object.create?(function(D,K,L,W){W===void 0&&(W=L);var C=Object.getOwnPropertyDescriptor(K,L);(!C||("get"in C?!K.__esModule:C.writable||C.configurable))&&(C={enumerable:!0,get:function(){return K[L]}}),Object.defineProperty(D,W,C)}):(function(D,K,L,W){W===void 0&&(W=L),D[W]=K[L]})),q=y&&y.__exportStar||function(D,K){for(var L in D)L!=="default"&&!Object.prototype.hasOwnProperty.call(K,L)&&ze(K,D,L)};Object.defineProperty(ye,"__esModule",{value:!0}),q(xe,ye)}),Pe=E(Se);r.exports=Pe})(Ed)),Ed.exports}var Qd=LA();class ko extends Error{}ko.prototype.name="InvalidTokenError";function BA(r){return decodeURIComponent(atob(r).replace(/(.)/g,(n,i)=>{let o=i.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}function HA(r){let n=r.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return BA(n)}catch{return atob(n)}}function qA(r,n){if(typeof r!="string")throw new ko("Invalid token specified: must be a string");n||(n={});const i=n.header===!0?0:1,o=r.split(".")[i];if(typeof o!="string")throw new ko(`Invalid token specified: missing part #${i+1}`);let l;try{l=HA(o)}catch(u){throw new ko(`Invalid token specified: invalid base64 for part #${i+1} (${u.message})`)}try{return JSON.parse(l)}catch(u){throw new ko(`Invalid token specified: invalid json for part #${i+1} (${u.message})`)}}const Zd=r=>{const{exp:n}=qA(r);return{token:r,expiresOnTimestamp:n*1e3}},Zy={token:"",expiresOnTimestamp:-10},$A=r=>r*1e3*60,VA=$A(10),GA=.5;class FA{constructor(n){this.expiringSoonIntervalInMs=VA,this.refreshAfterLifetimePercentage=GA,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.disposed=!1;const{tokenRefresher:i,token:o,refreshProactively:l}=n;this.refresh=i,this.currentToken=o?Zd(o):Zy,this.refreshProactively=l??!1,this.refreshProactively&&this.scheduleRefresh()}async getToken(n){return this.isTokenExpiringSoon(this.currentToken)?(this.isTokenValid(this.currentToken)||await this.updateTokenAndReschedule(n?.abortSignal),this.currentToken):this.currentToken}dispose(){this.disposed=!0,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.currentToken=Zy,this.activeTimeout&&clearTimeout(this.activeTimeout)}async updateTokenAndReschedule(n){if(this.activeTokenUpdating)return this.activeTokenUpdating;this.activeTokenUpdating=this.refreshTokenAndReschedule(n);try{await this.activeTokenUpdating}finally{this.activeTokenUpdating=null}}async refreshTokenAndReschedule(n){const i=await this.refreshToken(n);if(!this.isTokenValid(i))throw new Error("The token returned from the tokenRefresher is expired.");this.currentToken=i,this.refreshProactively&&this.scheduleRefresh()}async refreshToken(n){try{return this.activeTokenFetching||(this.activeTokenFetching=this.refresh(n)),Zd(await this.activeTokenFetching)}finally{this.activeTokenFetching=null}}scheduleRefresh(){if(this.disposed)return;this.activeTimeout&&clearTimeout(this.activeTimeout);const n=this.currentToken.expiresOnTimestamp-Date.now();let i=null;this.isTokenExpiringSoon(this.currentToken)?i=n*this.refreshAfterLifetimePercentage:i=n-this.expiringSoonIntervalInMs,this.activeTimeout=setTimeout(()=>this.updateTokenAndReschedule(),i)}isTokenValid(n){return n&&Date.now()<n.expiresOnTimestamp}isTokenExpiringSoon(n){return!n||Date.now()>=n.expiresOnTimestamp-this.expiringSoonIntervalInMs}}class YA{constructor(n){this.token=n}async getToken(){return this.token}dispose(){}}function XA(r){const n=r;return n&&typeof n.getToken=="function"&&(n.signRequest===void 0||n.getToken.length>0)}const JA="ApiVersionPolicy";function KA(r){return{name:JA,sendRequest:(n,i)=>{const o=new URL(n.url);return!o.searchParams.get("api-version")&&r.apiVersion&&(n.url=`${n.url}${Array.from(o.searchParams.keys()).length>0?"&":"?"}api-version=${r.apiVersion}`),i(n)}}}const WA="keyCredentialAuthenticationPolicy";function QA(r,n){return{name:WA,async sendRequest(i,o){return i.headers.set(n,r.key),o(i)}}}function ZA(r,n,i={}){const{credential:o,clientOptions:l}=i;if(o){if(XA(o)){const u=Wl({credential:o,scopes:l?.credentials?.scopes??`${n}/.default`});r.addPolicy(u)}else if(t2(o)){if(!l?.credentials?.apiKeyHeaderName)throw new Error("Missing API Key Header Name");const u=QA(o,l?.credentials?.apiKeyHeaderName);r.addPolicy(u)}}}function e2(r,n,i={}){const o=Mf(i);return o.addPolicy(KA(i)),ZA(o,r,{credential:n,clientOptions:i}),o}function t2(r){return r.key!==void 0}function Fr(r){return r.onResponse?{...r,onResponse(n,i){r.onResponse?.(n,i,i)}}:r}function n2(r,n,i={}){const l=e2(r,void 0,i),u=oN(r,{...i,pipeline:l}),f=(p,...m)=>({get:(g={})=>u.path(p,...m).get(Fr(g)),post:(g={})=>u.path(p,...m).post(Fr(g)),put:(g={})=>u.path(p,...m).put(Fr(g)),patch:(g={})=>u.path(p,...m).patch(Fr(g)),delete:(g={})=>u.path(p,...m).delete(Fr(g)),head:(g={})=>u.path(p,...m).head(Fr(g)),options:(g={})=>u.path(p,...m).options(Fr(g)),trace:(g={})=>u.path(p,...m).trace(Fr(g))});return{path:f,pathUnchecked:f,pipeline:u.pipeline}}const r2="https://auth.msft.communication.azure.com/",i2="https://communication.azure.com/clients/",s2="/access/teamsExtension/:exchangeAccessToken",o2="2025-06-30",a2="/access/entra/:exchangeAccessToken",l2="2025-03-02-preview";class c2{constructor(n){this.options=n,this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}},this.client=n2(n.resourceEndpoint),this.httpClient=Uf(),this.options=n,this.options.scopes=this.options.scopes||["https://communication.azure.com/clients/.default"],this.isPending=this.getToken()}async getToken(n){var i;if(!((i=n?.abortSignal)===null||i===void 0)&&i.aborted)return{token:"",expiresOnTimestamp:0};this.isPending||(this.isPending=this.getTokenInternal(n));try{await this.isPending}finally{this.isPending=null}return this.result.acsToken}async getTokenInternal(n){const i=n?.abortSignal?{abortSignal:n.abortSignal}:void 0,o=await this.options.tokenCredential.getToken(this.options.scopes?this.options.scopes:["https://communication.azure.com/clients/.default"],i),l=new Date,u=new Date(this.result.acsToken.expiresOnTimestamp);if(o===null)this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}};else if(this.result.acsToken.token===""||o.token!==this.result.entraToken||u<l){const f=await this.exchangeEntraToken(this.options.resourceEndpoint,o.token,i);this.result={entraToken:o.token,acsToken:f}}return this.result.acsToken}dispose(){this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}}}async exchangeEntraToken(n,i,o){const l=Df({url:this.createRequestUri(n),method:"POST",headers:jb({Authorization:`Bearer ${i}`,"Content-Type":"application/json",Accept:"application/json"}),abortSignal:o?.abortSignal,body:JSON.stringify({})}),u=await this.client.pipeline.sendRequest(this.httpClient,l);if(u.status!==200||!u.bodyAsText)throw new Error(`Service request failed. Status: ${u.status}, Body: ${u.bodyAsText}`);const f=JSON.parse(u.bodyAsText);return{token:f.accessToken.token,expiresOnTimestamp:Date.parse(f.accessToken.expiresOn)}}createRequestUri(n){const[i,o]=this.determineEndpointAndApiVersion();return`${n}${i}?api-version=${o}`}determineEndpointAndApiVersion(){if(!this.options.scopes||this.options.scopes.length===0)throw new Error("Scopes validation failed. Ensure all scopes start with either {TeamsExtensionScopePrefix} or {CommunicationClientsScopePrefix}.");if(this.options.scopes.every(n=>n.startsWith(r2)))return[s2,o2];if(this.options.scopes.every(n=>n.startsWith(i2)))return[a2,l2];throw new Error("Scopes validation failed. Ensure all scopes start with either {TeamsExtensionScopePrefix} or {CommunicationClientsScopePrefix}.")}}class u2{constructor(n){this.disposed=!1,typeof n=="string"?this.tokenCredential=new YA(Zd(n)):"tokenRefresher"in n?this.tokenCredential=new FA(n):this.tokenCredential=new c2(n)}async getToken(n){this.throwIfDisposed();const i=await this.tokenCredential.getToken(n);return this.throwIfDisposed(),i}dispose(){this.disposed=!0,this.tokenCredential.dispose()}throwIfDisposed(){if(this.disposed)throw new Error("User credential is disposed")}}const d2=r=>typeof r.communicationUserId=="string",f2=r=>typeof r.phoneNumber=="string",h2=r=>typeof r.microsoftTeamsUserId=="string",p2=r=>typeof r.teamsAppId=="string",m2=r=>{const n=typeof r.userId=="string",i=typeof r.tenantId=="string",o=typeof r.resourceId=="string";return n&&i&&o},qb=r=>d2(r)?Object.assign(Object.assign({},r),{kind:"communicationUser"}):f2(r)?Object.assign(Object.assign({},r),{kind:"phoneNumber"}):h2(r)?Object.assign(Object.assign({},r),{kind:"microsoftTeamsUser"}):p2(r)?Object.assign(Object.assign({},r),{kind:"microsoftTeamsApp"}):m2(r)?Object.assign(Object.assign({},r),{kind:"teamsExtensionUser"}):Object.assign(Object.assign({},r),{kind:"unknown"}),_o=r=>{const n=qb(r);switch(n.kind){case"communicationUser":return n.communicationUserId;case"microsoftTeamsUser":{const{microsoftTeamsUserId:i,rawId:o,cloud:l,isAnonymous:u}=n;if(o)return o;if(u)return`8:teamsvisitor:${i}`;switch(l){case"dod":return`8:dod:${i}`;case"gcch":return`8:gcch:${i}`;case"public":return`8:orgid:${i}`}return`8:orgid:${i}`}case"microsoftTeamsApp":{const{teamsAppId:i,rawId:o,cloud:l}=n;if(o)return o;switch(l){case"dod":return`28:dod:${i}`;case"gcch":return`28:gcch:${i}`}return`28:orgid:${i}`}case"phoneNumber":{const{phoneNumber:i,rawId:o}=n;return o||`4:${i}`}case"teamsExtensionUser":{const{userId:i,tenantId:o,resourceId:l,rawId:u,cloud:f}=n;if(u)return u;switch(f){case"dod":return`8:dod-acs:${l}_${o}_${i}`;case"gcch":return`8:gcch-acs:${l}_${o}_${i}`}return`8:acs:${l}_${o}_${i}`}case"unknown":return n.id}},en=(r,n)=>{const i=Object.keys(r)[0],o=r[i];if(n in o)return o[n];throw new Error(`Property ${n} is required for identifier of type ${i}.`)},g2=r=>{const n=[];if(r.communicationUser!==void 0&&n.push("communicationUser"),r.microsoftTeamsUser!==void 0&&n.push("microsoftTeamsUser"),r.microsoftTeamsApp!==void 0&&n.push("microsoftTeamsApp"),r.phoneNumber!==void 0&&n.push("phoneNumber"),r.teamsExtensionUser!==void 0&&n.push("teamsExtensionUser"),n.length>1)throw new Error(`Only one of the properties in ${JSON.stringify(n)} should be present.`)},$b=r=>{var n,i,o,l,u,f,p,m,g;const y=qb(r);switch(y.kind){case"communicationUser":return{rawId:_o(y),communicationUser:{id:y.communicationUserId}};case"phoneNumber":return{rawId:(n=y.rawId)!==null&&n!==void 0?n:_o(y),phoneNumber:{value:y.phoneNumber,isAnonymous:(i=y.isAnonymous)!==null&&i!==void 0?i:!1,assertedId:y.assertedId}};case"microsoftTeamsUser":return{rawId:(o=y.rawId)!==null&&o!==void 0?o:_o(y),microsoftTeamsUser:{userId:y.microsoftTeamsUserId,isAnonymous:(l=y.isAnonymous)!==null&&l!==void 0?l:!1,cloud:(u=y.cloud)!==null&&u!==void 0?u:"public"}};case"microsoftTeamsApp":return{rawId:(f=y.rawId)!==null&&f!==void 0?f:_o(y),microsoftTeamsApp:{appId:y.teamsAppId,cloud:(p=y.cloud)!==null&&p!==void 0?p:"public"}};case"teamsExtensionUser":return{rawId:(m=y.rawId)!==null&&m!==void 0?m:_o(y),teamsExtensionUser:{userId:y.userId,tenantId:y.tenantId,resourceId:y.resourceId,cloud:(g=y.cloud)!==null&&g!==void 0?g:"public"}};case"unknown":return{rawId:y.id};default:throw new Error(`Can't serialize an identifier with kind ${y.kind}`)}},y2=r=>r.communicationUser?"communicationUser":r.phoneNumber?"phoneNumber":r.microsoftTeamsUser?"microsoftTeamsUser":r.microsoftTeamsApp?"microsoftTeamsApp":r.teamsExtensionUser?"teamsExtensionUser":"unknown",Go=r=>{var n,i;g2(r);const o=r.communicationUser,l=r.microsoftTeamsUser,u=r.microsoftTeamsApp,f=r.phoneNumber,p=r.teamsExtensionUser,m=(n=r.kind)!==null&&n!==void 0?n:y2(r);return m==="communicationUser"&&o?{kind:"communicationUser",communicationUserId:en({communicationUser:o},"id")}:m==="phoneNumber"&&f?{kind:"phoneNumber",phoneNumber:en({phoneNumber:f},"value"),rawId:en({phoneNumber:r},"rawId"),isAnonymous:(i=f.isAnonymous)!==null&&i!==void 0?i:!1,assertedId:f.assertedId}:m==="microsoftTeamsUser"&&l?{kind:"microsoftTeamsUser",microsoftTeamsUserId:en({microsoftTeamsUser:l},"userId"),isAnonymous:en({microsoftTeamsUser:l},"isAnonymous"),cloud:en({microsoftTeamsUser:l},"cloud"),rawId:en({microsoftTeamsUser:r},"rawId")}:m==="microsoftTeamsApp"&&u?{kind:"microsoftTeamsApp",teamsAppId:en({microsoftTeamsApp:u},"appId"),cloud:en({microsoftTeamsApp:u},"cloud"),rawId:en({microsoftTeamsApp:r},"rawId")}:m==="teamsExtensionUser"&&p?{kind:"teamsExtensionUser",userId:en({teamsExtensionUser:p},"userId"),tenantId:en({teamsExtensionUser:p},"tenantId"),resourceId:en({teamsExtensionUser:p},"resourceId"),cloud:en({teamsExtensionUser:p},"cloud"),rawId:en({teamsExtensionUser:r},"rawId")}:{kind:"unknown",id:en({unknown:r},"rawId")}},v2=r=>{const{participants:n,idempotencyToken:i}=r,o=Sr(r,["participants","idempotencyToken"]);return Object.assign({repeatabilityRequestId:i},o)},Vb=r=>{const{id:n}=r,i=Sr(r,["id"]);return Object.assign(Object.assign({},i),{communicationIdentifier:$b(n)})},b2=r=>{var n;return{participants:(n=r.participants)===null||n===void 0?void 0:n.map(i=>Vb(i))}},ef=r=>{const{communicationIdentifier:n}=r,i=Sr(r,["communicationIdentifier"]);return Object.assign(Object.assign({},i),{id:Go(n)})},S2=r=>{const{participants:n,initiatorCommunicationIdentifier:i}=r,o=Sr(r,["participants","initiatorCommunicationIdentifier"]);let l=Object.assign({},o);if(i){const u=Go(i);l=Object.assign(Object.assign({},l),{initiator:u})}return n&&(l=Object.assign(Object.assign({},l),{participants:n?.map(u=>ef(u))})),l},zd=r=>{const{content:n,senderCommunicationIdentifier:i}=r,o=Sr(r,["content","senderCommunicationIdentifier"]);let l=Object.assign({},o);if(n&&(l=Object.assign(Object.assign({},l),{content:S2(n)})),i){const u=Go(i);l=Object.assign(Object.assign({},l),{sender:u})}return l},w2=r=>{if(r.kind==="threadCreationDate"||r.kind==="none")return r;throw new Error(`Retention Policy ${r.kind} is not supported`)},Gb=r=>{const{createdByCommunicationIdentifier:n,retentionPolicy:i}=r,o=Sr(r,["createdByCommunicationIdentifier","retentionPolicy"]);let l=Object.assign({},o);return n&&(l=Object.assign(Object.assign({},l),{createdBy:Go(n)})),i&&(l=Object.assign(Object.assign({},l),{retentionPolicy:w2(i)})),l},x2=r=>{const{chatThread:n}=r,i=Sr(r,["chatThread"]);return n?Object.assign(Object.assign({},i),{chatThread:Gb(n)}):Object.assign({},i)},ev=r=>{const{senderCommunicationIdentifier:n}=r,i=Sr(r,["senderCommunicationIdentifier"]);return Object.assign(Object.assign({},i),{sender:Go(n)})};var tv;(function(r){r.Unknown="unknown",r.CommunicationUser="communicationUser",r.PhoneNumber="phoneNumber",r.MicrosoftTeamsUser="microsoftTeamsUser",r.MicrosoftTeamsApp="microsoftTeamsApp"})(tv||(tv={}));var nv;(function(r){r.Public="public",r.Dod="dod",r.Gcch="gcch"})(nv||(nv={}));var rv;(function(r){r.ThreadCreationDate="threadCreationDate",r.None="none"})(rv||(rv={}));const tt=Rb({namespace:"Azure.Communication",packageName:"@azure/communication-chat",packageVersion:"1.6.0"}),Pf={type:{name:"Composite",className:"ChatMessageReadReceiptsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessageReadReceipt"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},T2={type:{name:"Composite",className:"ChatMessageReadReceipt",modelProperties:{senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}},readOn:{serializedName:"readOn",required:!0,type:{name:"DateTime"}}}}},Fb={type:{name:"Composite",className:"CommunicationIdentifierModel",modelProperties:{kind:{serializedName:"kind",type:{name:"String"}},rawId:{serializedName:"rawId",type:{name:"String"}},communicationUser:{serializedName:"communicationUser",type:{name:"Composite",className:"CommunicationUserIdentifierModel"}},phoneNumber:{serializedName:"phoneNumber",type:{name:"Composite",className:"PhoneNumberIdentifierModel"}},microsoftTeamsUser:{serializedName:"microsoftTeamsUser",type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel"}},microsoftTeamsApp:{serializedName:"microsoftTeamsApp",type:{name:"Composite",className:"MicrosoftTeamsAppIdentifierModel"}}}}},C2={type:{name:"Composite",className:"CommunicationUserIdentifierModel",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},R2={type:{name:"Composite",className:"PhoneNumberIdentifierModel",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"String"}}}}},E2={type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel",modelProperties:{userId:{serializedName:"userId",required:!0,type:{name:"String"}},isAnonymous:{serializedName:"isAnonymous",type:{name:"Boolean"}},cloud:{serializedName:"cloud",type:{name:"String"}}}}},_2={type:{name:"Composite",className:"MicrosoftTeamsAppIdentifierModel",modelProperties:{appId:{serializedName:"appId",required:!0,type:{name:"String"}},cloud:{serializedName:"cloud",type:{name:"String"}}}}},De={type:{name:"Composite",className:"CommunicationErrorResponse",modelProperties:{error:{serializedName:"error",type:{name:"Composite",className:"ChatError"}}}}},k2={type:{name:"Composite",className:"ChatError",modelProperties:{code:{serializedName:"code",required:!0,type:{name:"String"}},message:{serializedName:"message",required:!0,type:{name:"String"}},target:{serializedName:"target",readOnly:!0,type:{name:"String"}},details:{serializedName:"details",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}},innerError:{serializedName:"innererror",type:{name:"Composite",className:"ChatError"}}}}},Yb={type:{name:"Composite",className:"SendReadReceiptRequest",modelProperties:{chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}}}},Xb={type:{name:"Composite",className:"SendChatMessageRequest",modelProperties:{content:{serializedName:"content",required:!0,type:{name:"String"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},type:{serializedName:"type",type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},Jb={type:{name:"Composite",className:"SendChatMessageResult",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},If={type:{name:"Composite",className:"ChatMessagesCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessage"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Kb={type:{name:"Composite",className:"ChatMessage",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},type:{serializedName:"type",required:!0,type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},sequenceId:{serializedName:"sequenceId",required:!0,type:{name:"String"}},version:{serializedName:"version",required:!0,type:{name:"String"}},content:{serializedName:"content",type:{name:"Composite",className:"ChatMessageContent"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},editedOn:{serializedName:"editedOn",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},j2={type:{name:"Composite",className:"ChatMessageContent",modelProperties:{message:{serializedName:"message",type:{name:"String"}},topic:{serializedName:"topic",type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},attachments:{serializedName:"attachments",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatAttachment"}}}},initiatorCommunicationIdentifier:{serializedName:"initiatorCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}}}}},N2={type:{name:"Composite",className:"ChatParticipant",modelProperties:{communicationIdentifier:{serializedName:"communicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},displayName:{serializedName:"displayName",type:{name:"String"}},shareHistoryTime:{serializedName:"shareHistoryTime",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},A2={type:{name:"Composite",className:"ChatAttachment",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},attachmentType:{serializedName:"attachmentType",required:!0,type:{name:"Enum",allowedValues:["image","file"]}},name:{serializedName:"name",type:{name:"String"}},url:{serializedName:"url",type:{name:"String"}},previewUrl:{serializedName:"previewUrl",type:{name:"String"}}}}},Wb={type:{name:"Composite",className:"UpdateChatMessageRequest",modelProperties:{content:{serializedName:"content",type:{name:"String"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},zf={type:{name:"Composite",className:"ChatParticipantsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Qb={type:{name:"Composite",className:"AddChatParticipantsRequest",modelProperties:{participants:{serializedName:"participants",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}}}}},Zb={type:{name:"Composite",className:"AddChatParticipantsResult",modelProperties:{invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},eS={type:{name:"Composite",className:"CreateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",required:!0,type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},ws={type:{name:"Composite",className:"ChatRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:{serializedName:"kind",clientName:"kind"},modelProperties:{kind:{serializedName:"kind",required:!0,type:{name:"String"}}}}},tS={type:{name:"Composite",className:"CreateChatThreadResult",modelProperties:{chatThread:{serializedName:"chatThread",type:{name:"Composite",className:"ChatThreadProperties"}},invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},nS={type:{name:"Composite",className:"ChatThreadProperties",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},createdByCommunicationIdentifier:{serializedName:"createdByCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},Lf={type:{name:"Composite",className:"ChatThreadsItemCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatThreadItem"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},O2={type:{name:"Composite",className:"ChatThreadItem",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},lastMessageReceivedOn:{serializedName:"lastMessageReceivedOn",readOnly:!0,type:{name:"DateTime"}}}}},rS={type:{name:"Composite",className:"UpdateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",type:{name:"String"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},iS={type:{name:"Composite",className:"SendTypingNotificationRequest",modelProperties:{senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}}}}},sS={serializedName:"threadCreationDate",type:{name:"Composite",className:"ThreadCreationDateRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:ws.type.polymorphicDiscriminator,modelProperties:Object.assign(Object.assign({},ws.type.modelProperties),{deleteThreadAfterDays:{serializedName:"deleteThreadAfterDays",required:!0,type:{name:"Number"}}})}},oS={serializedName:"none",type:{name:"Composite",className:"NoneRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:ws.type.polymorphicDiscriminator,modelProperties:Object.assign({},ws.type.modelProperties)}};let M2={ChatRetentionPolicy:ws,"ChatRetentionPolicy.threadCreationDate":sS,"ChatRetentionPolicy.none":oS};const aS=Object.freeze(Object.defineProperty({__proto__:null,AddChatParticipantsRequest:Qb,AddChatParticipantsResult:Zb,ChatAttachment:A2,ChatError:k2,ChatMessage:Kb,ChatMessageContent:j2,ChatMessageReadReceipt:T2,ChatMessageReadReceiptsCollection:Pf,ChatMessagesCollection:If,ChatParticipant:N2,ChatParticipantsCollection:zf,ChatRetentionPolicy:ws,ChatThreadItem:O2,ChatThreadProperties:nS,ChatThreadsItemCollection:Lf,CommunicationErrorResponse:De,CommunicationIdentifierModel:Fb,CommunicationUserIdentifierModel:C2,CreateChatThreadRequest:eS,CreateChatThreadResult:tS,MicrosoftTeamsAppIdentifierModel:_2,MicrosoftTeamsUserIdentifierModel:E2,NoneRetentionPolicy:oS,PhoneNumberIdentifierModel:R2,SendChatMessageRequest:Xb,SendChatMessageResult:Jb,SendReadReceiptRequest:Yb,SendTypingNotificationRequest:iS,ThreadCreationDateRetentionPolicy:sS,UpdateChatMessageRequest:Wb,UpdateChatThreadRequest:rS,discriminators:M2},Symbol.toStringTag,{value:"Module"})),Dt={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},Pt={parameterPath:"endpoint",mapper:{serializedName:"endpoint",required:!0,type:{name:"String"}},skipEncoding:!0},Yt={parameterPath:"chatThreadId",mapper:{serializedName:"chatThreadId",required:!0,type:{name:"String"}}},Ql={parameterPath:["options","maxPageSize"],mapper:{serializedName:"maxPageSize",type:{name:"Number"}}},lS={parameterPath:["options","skip"],mapper:{serializedName:"skip",type:{name:"Number"}}},sn={parameterPath:"apiVersion",mapper:{defaultValue:"2025-03-15",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},ks={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},U2={parameterPath:"sendReadReceiptRequest",mapper:Yb},D2={parameterPath:"sendChatMessageRequest",mapper:Xb},cS={parameterPath:["options","startTime"],mapper:{serializedName:"startTime",type:{name:"DateTime"}}},Bf={parameterPath:"chatMessageId",mapper:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}},uS={parameterPath:["options","contentType"],mapper:{defaultValue:"application/merge-patch+json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},P2={parameterPath:"updateChatMessageRequest",mapper:Wb},I2={parameterPath:"participantCommunicationIdentifier",mapper:Fb},z2={parameterPath:"addChatParticipantsRequest",mapper:Qb},L2={parameterPath:"updateChatThreadRequest",mapper:rS},B2={parameterPath:["options","sendTypingNotificationRequest"],mapper:iS},Zl={parameterPath:"nextLink",mapper:{serializedName:"nextLink",required:!0,type:{name:"String"}},skipEncoding:!0},H2={parameterPath:"createChatThreadRequest",mapper:eS},q2={parameterPath:["options","repeatabilityRequestId"],mapper:{serializedName:"repeatability-request-id",type:{name:"String"}}};class $2{constructor(n){this.client=n}async listChatReadReceipts(n,i){return tt.withSpan("ChatApiClient.listChatReadReceipts",i??{},async o=>this.client.sendOperationRequest({chatThreadId:n,options:o},V2))}async sendChatReadReceipt(n,i,o){return tt.withSpan("ChatApiClient.sendChatReadReceipt",o??{},async l=>this.client.sendOperationRequest({chatThreadId:n,sendReadReceiptRequest:i,options:l},G2))}async sendChatMessage(n,i,o){return tt.withSpan("ChatApiClient.sendChatMessage",o??{},async l=>this.client.sendOperationRequest({chatThreadId:n,sendChatMessageRequest:i,options:l},F2))}async listChatMessages(n,i){return tt.withSpan("ChatApiClient.listChatMessages",i??{},async o=>this.client.sendOperationRequest({chatThreadId:n,options:o},Y2))}async getChatMessage(n,i,o){return tt.withSpan("ChatApiClient.getChatMessage",o??{},async l=>this.client.sendOperationRequest({chatThreadId:n,chatMessageId:i,options:l},X2))}async updateChatMessage(n,i,o,l){return tt.withSpan("ChatApiClient.updateChatMessage",l??{},async u=>this.client.sendOperationRequest({chatThreadId:n,chatMessageId:i,updateChatMessageRequest:o,options:u},J2))}async deleteChatMessage(n,i,o){return tt.withSpan("ChatApiClient.deleteChatMessage",o??{},async l=>this.client.sendOperationRequest({chatThreadId:n,chatMessageId:i,options:l},K2))}async listChatParticipants(n,i){return tt.withSpan("ChatApiClient.listChatParticipants",i??{},async o=>this.client.sendOperationRequest({chatThreadId:n,options:o},W2))}async removeChatParticipant(n,i,o){return tt.withSpan("ChatApiClient.removeChatParticipant",o??{},async l=>this.client.sendOperationRequest({chatThreadId:n,participantCommunicationIdentifier:i,options:l},Q2))}async addChatParticipants(n,i,o){return tt.withSpan("ChatApiClient.addChatParticipants",o??{},async l=>this.client.sendOperationRequest({chatThreadId:n,addChatParticipantsRequest:i,options:l},Z2))}async updateChatThreadProperties(n,i,o){return tt.withSpan("ChatApiClient.updateChatThreadProperties",o??{},async l=>this.client.sendOperationRequest({chatThreadId:n,updateChatThreadRequest:i,options:l},eO))}async getChatThreadProperties(n,i){return tt.withSpan("ChatApiClient.getChatThreadProperties",i??{},async o=>this.client.sendOperationRequest({chatThreadId:n,options:o},tO))}async sendTypingNotification(n,i){return tt.withSpan("ChatApiClient.sendTypingNotification",i??{},async o=>this.client.sendOperationRequest({chatThreadId:n,options:o},nO))}async listChatReadReceiptsNext(n,i,o){return tt.withSpan("ChatApiClient.listChatReadReceiptsNext",o??{},async l=>this.client.sendOperationRequest({chatThreadId:n,nextLink:i,options:l},rO))}async listChatMessagesNext(n,i,o){return tt.withSpan("ChatApiClient.listChatMessagesNext",o??{},async l=>this.client.sendOperationRequest({chatThreadId:n,nextLink:i,options:l},iO))}async listChatParticipantsNext(n,i,o){return tt.withSpan("ChatApiClient.listChatParticipantsNext",o??{},async l=>this.client.sendOperationRequest({chatThreadId:n,nextLink:i,options:l},sO))}}const on=Rf(aS,!1),V2={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"GET",responses:{200:{bodyMapper:Pf},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},queryParameters:[Ql,lS,sn],urlParameters:[Pt,Yt],headerParameters:[Dt],serializer:on},G2={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"POST",responses:{200:{},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},requestBody:U2,queryParameters:[sn],urlParameters:[Pt,Yt],headerParameters:[Dt,ks],mediaType:"json",serializer:on},F2={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"POST",responses:{201:{bodyMapper:Jb},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},requestBody:D2,queryParameters:[sn],urlParameters:[Pt,Yt],headerParameters:[Dt,ks],mediaType:"json",serializer:on},Y2={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"GET",responses:{200:{bodyMapper:If},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},queryParameters:[Ql,sn,cS],urlParameters:[Pt,Yt],headerParameters:[Dt],serializer:on},X2={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"GET",responses:{200:{bodyMapper:Kb},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},queryParameters:[sn],urlParameters:[Pt,Yt,Bf],headerParameters:[Dt],serializer:on},J2={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},requestBody:P2,queryParameters:[sn],urlParameters:[Pt,Yt,Bf],headerParameters:[Dt,uS],mediaType:"json",serializer:on},K2={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},queryParameters:[sn],urlParameters:[Pt,Yt,Bf],headerParameters:[Dt],serializer:on},W2={path:"/chat/threads/{chatThreadId}/participants",httpMethod:"GET",responses:{200:{bodyMapper:zf},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},queryParameters:[Ql,lS,sn],urlParameters:[Pt,Yt],headerParameters:[Dt],serializer:on},Q2={path:"/chat/threads/{chatThreadId}/participants/:remove",httpMethod:"POST",responses:{204:{},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},requestBody:I2,queryParameters:[sn],urlParameters:[Pt,Yt],headerParameters:[Dt,ks],mediaType:"json",serializer:on},Z2={path:"/chat/threads/{chatThreadId}/participants/:add",httpMethod:"POST",responses:{201:{bodyMapper:Zb},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},requestBody:z2,queryParameters:[sn],urlParameters:[Pt,Yt],headerParameters:[Dt,ks],mediaType:"json",serializer:on},eO={path:"/chat/threads/{chatThreadId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},requestBody:L2,queryParameters:[sn],urlParameters:[Pt,Yt],headerParameters:[Dt,uS],mediaType:"json",serializer:on},tO={path:"/chat/threads/{chatThreadId}",httpMethod:"GET",responses:{200:{bodyMapper:nS},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},queryParameters:[sn],urlParameters:[Pt,Yt],headerParameters:[Dt],serializer:on},nO={path:"/chat/threads/{chatThreadId}/typing",httpMethod:"POST",responses:{200:{},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},requestBody:B2,queryParameters:[sn],urlParameters:[Pt,Yt],headerParameters:[Dt,ks],mediaType:"json",serializer:on},rO={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Pf},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},urlParameters:[Pt,Yt,Zl],headerParameters:[Dt],serializer:on},iO={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:If},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},urlParameters:[Pt,Yt,Zl],headerParameters:[Dt],serializer:on},sO={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:zf},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},urlParameters:[Pt,Yt,Zl],headerParameters:[Dt],serializer:on};class oO{constructor(n){this.client=n}async createChatThread(n,i){return tt.withSpan("ChatApiClient.createChatThread",i??{},async o=>this.client.sendOperationRequest({createChatThreadRequest:n,options:o},aO))}async listChatThreads(n){return tt.withSpan("ChatApiClient.listChatThreads",n??{},async i=>this.client.sendOperationRequest({options:i},lO))}async deleteChatThread(n,i){return tt.withSpan("ChatApiClient.deleteChatThread",i??{},async o=>this.client.sendOperationRequest({chatThreadId:n,options:o},cO))}async listChatThreadsNext(n,i){return tt.withSpan("ChatApiClient.listChatThreadsNext",i??{},async o=>this.client.sendOperationRequest({nextLink:n,options:o},uO))}}const ec=Rf(aS,!1),aO={path:"/chat/threads",httpMethod:"POST",responses:{201:{bodyMapper:tS},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},requestBody:H2,queryParameters:[sn],urlParameters:[Pt],headerParameters:[Dt,ks,q2],mediaType:"json",serializer:ec},lO={path:"/chat/threads",httpMethod:"GET",responses:{200:{bodyMapper:Lf},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},queryParameters:[Ql,sn,cS],urlParameters:[Pt],headerParameters:[Dt],serializer:ec},cO={path:"/chat/threads/{chatThreadId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},queryParameters:[sn],urlParameters:[Pt,Yt],headerParameters:[Dt],serializer:ec},uO={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Lf},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},urlParameters:[Pt,Zl],headerParameters:[Dt],serializer:ec};class dS extends Bb{constructor(n,i){var o,l;if(n===void 0)throw new Error("'endpoint' cannot be null");i||(i={});const u={requestContentType:"application/json; charset=utf-8"},f="azsdk-js-communication-chat/1.6.0",p=i.userAgentOptions&&i.userAgentOptions.userAgentPrefix?`${i.userAgentOptions.userAgentPrefix} ${f}`:`${f}`,m=Object.assign(Object.assign(Object.assign({},u),i),{userAgentOptions:{userAgentPrefix:p},endpoint:(l=(o=i.endpoint)!==null&&o!==void 0?o:i.baseUri)!==null&&l!==void 0?l:"{endpoint}"});super(m),this.endpoint=n,this.apiVersion=i.apiVersion||"2025-03-15",this.chatThread=new $2(this),this.chat=new oO(this),this.addCustomApiVersionPolicy(i.apiVersion)}addCustomApiVersionPolicy(n){if(!n)return;const i={name:"CustomApiVersionPolicy",async sendRequest(o,l){const u=o.url.split("?");if(u.length>1){const f=u[1].split("&").map(p=>p.indexOf("api-version")>-1?"api-version="+n:p);o.url=u[0]+"?"+f.join("&")}return l(o)}};this.pipeline.addPolicy(i)}}const Ao=Jl("communication-chat"),fS=r=>Wl({credential:{getToken:(i,o)=>r.getToken({abortSignal:o?.abortSignal})},scopes:[]}),dO=8e3;class fO{constructor(n,i,o,l={}){this.endpoint=n,this.timeOfLastTypingRequest=void 0,this.threadId=i,this.tokenCredential=o;const u=Object.assign(Object.assign({},l),{loggingOptions:{logger:Ao.info}});this.client=new dS(this.endpoint,Object.assign({endpoint:this.endpoint},u));const f=fS(this.tokenCredential);this.client.pipeline.addPolicy(f)}getProperties(n={}){return tt.withSpan("ChatClient-GetProperties",n,async i=>{const o=await this.client.chatThread.getChatThreadProperties(this.threadId,i);return Gb(o)})}updateTopic(n,i={}){return tt.withSpan("ChatThreadClient-UpdateTopic",i,async o=>{await this.client.chatThread.updateChatThreadProperties(this.threadId,{topic:n},o)})}updateProperties(n={}){return tt.withSpan("ChatThreadClient-UpdateProperties",n,async i=>{await this.client.chatThread.updateChatThreadProperties(this.threadId,n,i)})}sendMessage(n,i={}){return tt.withSpan("ChatThreadClient-SendMessage",i,async o=>(this.timeOfLastTypingRequest=void 0,await this.client.chatThread.sendChatMessage(this.threadId,Object.assign(Object.assign({},n),i),o)))}getMessage(n,i={}){return tt.withSpan("ChatThreadClient-GetMessage",i,async o=>{const l=await this.client.chatThread.getChatMessage(this.threadId,n,o);return zd(l)})}listMessagesPage(n){return Xr(this,arguments,function*(o,l={}){if(!o.continuationToken){const u=yield lt(this.client.chatThread.listChatMessages(this.threadId,l));o.continuationToken=u.nextLink,u.value&&(yield yield lt(u.value.map(zd,this)))}for(;o.continuationToken;){const u=yield lt(this.client.chatThread.listChatMessagesNext(this.threadId,o.continuationToken,l));if(o.continuationToken=u.nextLink,u.value)yield yield lt(u.value.map(zd,this));else break}})}listMessagesAll(n){return Xr(this,arguments,function*(){var o,l,u,f;try{for(var p=!0,m=Jr(this.listMessagesPage({},n)),g;g=yield lt(m.next()),o=g.done,!o;p=!0)f=g.value,p=!1,yield lt(yield*wl(Jr(f)))}catch(y){l={error:y}}finally{try{!p&&!o&&(u=m.return)&&(yield lt(u.call(m)))}finally{if(l)throw l.error}}})}listMessages(n={}){const{span:i,updatedOptions:o}=tt.startSpan("ChatThreadClient-ListMessages",n);try{const l=this.listMessagesAll(o);return{next(){return l.next()},[Symbol.asyncIterator](){return this},byPage:(u={})=>this.listMessagesPage(u,o)}}catch(l){throw i.setStatus({status:"error",error:l}),l}finally{i.end()}}deleteMessage(n,i={}){return tt.withSpan("ChatThreadClient-DeleteMessage",i,async o=>{await this.client.chatThread.deleteChatMessage(this.threadId,n,o)})}async updateMessage(n,i={}){return tt.withSpan("ChatThreadClient-UpdateMessage",i,async o=>{await this.client.chatThread.updateChatMessage(this.threadId,n,i,o)})}async addParticipants(n,i={}){return tt.withSpan("ChatThreadClient-AddParticipants",i,async o=>await this.client.chatThread.addChatParticipants(this.threadId,b2(n),o))}listParticipantsPage(n){return Xr(this,arguments,function*(o,l={}){if(!o.continuationToken){const u=yield lt(this.client.chatThread.listChatParticipants(this.threadId,l));o.continuationToken=u.nextLink,u.value&&(yield yield lt(u.value.map(ef,this)))}for(;o.continuationToken;){const u=yield lt(this.client.chatThread.listChatParticipantsNext(this.threadId,o.continuationToken,l));if(o.continuationToken=u.nextLink,u.value)yield yield lt(u.value.map(ef,this));else break}})}listParticipantsAll(n){return Xr(this,arguments,function*(){var o,l,u,f;try{for(var p=!0,m=Jr(this.listParticipantsPage({},n)),g;g=yield lt(m.next()),o=g.done,!o;p=!0)f=g.value,p=!1,yield lt(yield*wl(Jr(f)))}catch(y){l={error:y}}finally{try{!p&&!o&&(u=m.return)&&(yield lt(u.call(m)))}finally{if(l)throw l.error}}})}listParticipants(n={}){const{span:i,updatedOptions:o}=tt.startSpan("ChatThreadClient-ListParticipants",n);try{const l=this.listParticipantsAll(o);return{next(){return l.next()},[Symbol.asyncIterator](){return this},byPage:(u={})=>this.listParticipantsPage(u,o)}}catch(l){throw i.setStatus({status:"error",error:l}),l}finally{i.end()}}async removeParticipant(n,i={}){return tt.withSpan("ChatThreadClient-RemoveParticipant",i,async o=>{await this.client.chatThread.removeChatParticipant(this.threadId,$b(n),o)})}async sendTypingNotification(n={}){return tt.withSpan("ChatThreadClient-SendTypingNotification",n,async i=>{const o=new Date,{senderDisplayName:l}=i,u=Sr(i,["senderDisplayName"]);return this.canPostTypingNotification(o)?(this.timeOfLastTypingRequest=o,await this.client.chatThread.sendTypingNotification(this.threadId,Object.assign({sendTypingNotificationRequest:{senderDisplayName:l}},u)),!0):(Ao.info(`Typing Notification NOT Send. [thread_id=${this.threadId}]`),!1)})}async sendReadReceipt(n,i={}){return tt.withSpan("ChatThreadClient-SendReadReceipt",i,async o=>{await this.client.chatThread.sendChatReadReceipt(this.threadId,n,o)})}listReadReceiptsPage(n){return Xr(this,arguments,function*(o,l={}){if(!o.continuationToken){const u=yield lt(this.client.chatThread.listChatReadReceipts(this.threadId,l));o.continuationToken=u.nextLink,u.value&&(yield yield lt(u.value.map(ev,this)))}for(;o.continuationToken;){const u=yield lt(this.client.chatThread.listChatReadReceiptsNext(this.threadId,o.continuationToken,l));if(o.continuationToken=u.nextLink,u.value)yield yield lt(u.value.map(ev,this));else break}})}listReadReceiptsAll(n){return Xr(this,arguments,function*(){var o,l,u,f;try{for(var p=!0,m=Jr(this.listReadReceiptsPage({},n)),g;g=yield lt(m.next()),o=g.done,!o;p=!0)f=g.value,p=!1,yield lt(yield*wl(Jr(f)))}catch(y){l={error:y}}finally{try{!p&&!o&&(u=m.return)&&(yield lt(u.call(m)))}finally{if(l)throw l.error}}})}listReadReceipts(n={}){const{span:i,updatedOptions:o}=tt.startSpan("ChatThreadClient-ListChatReadReceipts",n);try{const l=this.listReadReceiptsAll(o);return{next(){return l.next()},[Symbol.asyncIterator](){return this},byPage:(u={})=>this.listReadReceiptsPage(u,o)}}catch(l){throw i.setStatus({status:"error",error:l}),l}finally{i.end()}}canPostTypingNotification(n){return this.timeOfLastTypingRequest&&n.getTime()-this.timeOfLastTypingRequest.getTime()<dO?(Ao.info(`Typing interval check failed. [last_request=${this.timeOfLastTypingRequest}]`),!1):!0}}var pl={exports:{}},iv;function hO(){if(iv)return pl.exports;iv=1;var r=typeof Reflect=="object"?Reflect:null,n=r&&typeof r.apply=="function"?r.apply:function(ie,fe,ue){return Function.prototype.apply.call(ie,fe,ue)},i;r&&typeof r.ownKeys=="function"?i=r.ownKeys:Object.getOwnPropertySymbols?i=function(ie){return Object.getOwnPropertyNames(ie).concat(Object.getOwnPropertySymbols(ie))}:i=function(ie){return Object.getOwnPropertyNames(ie)};function o(ce){console&&console.warn&&console.warn(ce)}var l=Number.isNaN||function(ie){return ie!==ie};function u(){u.init.call(this)}pl.exports=u,pl.exports.once=se,u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var f=10;function p(ce){if(typeof ce!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ce)}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(ce){if(typeof ce!="number"||ce<0||l(ce))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ce+".");f=ce}}),u.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(ie){if(typeof ie!="number"||ie<0||l(ie))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+ie+".");return this._maxListeners=ie,this};function m(ce){return ce._maxListeners===void 0?u.defaultMaxListeners:ce._maxListeners}u.prototype.getMaxListeners=function(){return m(this)},u.prototype.emit=function(ie){for(var fe=[],ue=1;ue<arguments.length;ue++)fe.push(arguments[ue]);var Re=ie==="error",Ne=this._events;if(Ne!==void 0)Re=Re&&Ne.error===void 0;else if(!Re)return!1;if(Re){var xe;if(fe.length>0&&(xe=fe[0]),xe instanceof Error)throw xe;var Se=new Error("Unhandled error."+(xe?" ("+xe.message+")":""));throw Se.context=xe,Se}var Pe=Ne[ie];if(Pe===void 0)return!1;if(typeof Pe=="function")n(Pe,this,fe);else for(var ke=Pe.length,ye=A(Pe,ke),ue=0;ue<ke;++ue)n(ye[ue],this,fe);return!0};function g(ce,ie,fe,ue){var Re,Ne,xe;if(p(fe),Ne=ce._events,Ne===void 0?(Ne=ce._events=Object.create(null),ce._eventsCount=0):(Ne.newListener!==void 0&&(ce.emit("newListener",ie,fe.listener?fe.listener:fe),Ne=ce._events),xe=Ne[ie]),xe===void 0)xe=Ne[ie]=fe,++ce._eventsCount;else if(typeof xe=="function"?xe=Ne[ie]=ue?[fe,xe]:[xe,fe]:ue?xe.unshift(fe):xe.push(fe),Re=m(ce),Re>0&&xe.length>Re&&!xe.warned){xe.warned=!0;var Se=new Error("Possible EventEmitter memory leak detected. "+xe.length+" "+String(ie)+" listeners added. Use emitter.setMaxListeners() to increase limit");Se.name="MaxListenersExceededWarning",Se.emitter=ce,Se.type=ie,Se.count=xe.length,o(Se)}return ce}u.prototype.addListener=function(ie,fe){return g(this,ie,fe,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(ie,fe){return g(this,ie,fe,!0)};function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function E(ce,ie,fe){var ue={fired:!1,wrapFn:void 0,target:ce,type:ie,listener:fe},Re=y.bind(ue);return Re.listener=fe,ue.wrapFn=Re,Re}u.prototype.once=function(ie,fe){return p(fe),this.on(ie,E(this,ie,fe)),this},u.prototype.prependOnceListener=function(ie,fe){return p(fe),this.prependListener(ie,E(this,ie,fe)),this},u.prototype.removeListener=function(ie,fe){var ue,Re,Ne,xe,Se;if(p(fe),Re=this._events,Re===void 0)return this;if(ue=Re[ie],ue===void 0)return this;if(ue===fe||ue.listener===fe)--this._eventsCount===0?this._events=Object.create(null):(delete Re[ie],Re.removeListener&&this.emit("removeListener",ie,ue.listener||fe));else if(typeof ue!="function"){for(Ne=-1,xe=ue.length-1;xe>=0;xe--)if(ue[xe]===fe||ue[xe].listener===fe){Se=ue[xe].listener,Ne=xe;break}if(Ne<0)return this;Ne===0?ue.shift():H(ue,Ne),ue.length===1&&(Re[ie]=ue[0]),Re.removeListener!==void 0&&this.emit("removeListener",ie,Se||fe)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(ie){var fe,ue,Re;if(ue=this._events,ue===void 0)return this;if(ue.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):ue[ie]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete ue[ie]),this;if(arguments.length===0){var Ne=Object.keys(ue),xe;for(Re=0;Re<Ne.length;++Re)xe=Ne[Re],xe!=="removeListener"&&this.removeAllListeners(xe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(fe=ue[ie],typeof fe=="function")this.removeListener(ie,fe);else if(fe!==void 0)for(Re=fe.length-1;Re>=0;Re--)this.removeListener(ie,fe[Re]);return this};function I(ce,ie,fe){var ue=ce._events;if(ue===void 0)return[];var Re=ue[ie];return Re===void 0?[]:typeof Re=="function"?fe?[Re.listener||Re]:[Re]:fe?B(Re):A(Re,Re.length)}u.prototype.listeners=function(ie){return I(this,ie,!0)},u.prototype.rawListeners=function(ie){return I(this,ie,!1)},u.listenerCount=function(ce,ie){return typeof ce.listenerCount=="function"?ce.listenerCount(ie):F.call(ce,ie)},u.prototype.listenerCount=F;function F(ce){var ie=this._events;if(ie!==void 0){var fe=ie[ce];if(typeof fe=="function")return 1;if(fe!==void 0)return fe.length}return 0}u.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function A(ce,ie){for(var fe=new Array(ie),ue=0;ue<ie;++ue)fe[ue]=ce[ue];return fe}function H(ce,ie){for(;ie+1<ce.length;ie++)ce[ie]=ce[ie+1];ce.pop()}function B(ce){for(var ie=new Array(ce.length),fe=0;fe<ie.length;++fe)ie[fe]=ce[fe].listener||ce[fe];return ie}function se(ce,ie){return new Promise(function(fe,ue){function Re(xe){ce.removeListener(ie,Ne),ue(xe)}function Ne(){typeof ce.removeListener=="function"&&ce.removeListener("error",Re),fe([].slice.call(arguments))}me(ce,ie,Ne,{once:!0}),ie!=="error"&&le(ce,Re,{once:!0})})}function le(ce,ie,fe){typeof ce.on=="function"&&me(ce,"error",ie,fe)}function me(ce,ie,fe,ue){if(typeof ce.on=="function")ue.once?ce.once(ie,fe):ce.on(ie,fe);else if(typeof ce.addEventListener=="function")ce.addEventListener(ie,function Re(Ne){ue.once&&ce.removeEventListener(ie,Re),fe(Ne)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ce)}return pl.exports}var pO=hO();function mO(){return b0()}const gO=(r,n,i)=>{var o,l,u,f;return new Qd.CommunicationSignalingClient(r,n,{resourceEndpoint:(o=i?.resourceEndpoint)!==null&&o!==void 0?o:void 0,gatewayApiVersion:(l=i?.gatewayApiVersion)!==null&&l!==void 0?l:void 0,additionalPolicies:(u=i?.additionalPolicies)!==null&&u!==void 0?u:void 0,userAgentOptions:(f=i?.userAgentOptions)!==null&&f!==void 0?f:void 0})};class yO{constructor(n,i,o={}){this.endpoint=n,this.signalingClient=void 0,this.emitter=new pO.EventEmitter,this.isRealtimeNotificationsStarted=!1,this.tokenCredential=i;const l=Object.assign(Object.assign({},o),{loggingOptions:{logger:Ao.info}});this.client=new dS(this.endpoint,Object.assign({endpoint:this.endpoint},l));const u=fS(this.tokenCredential);this.client.pipeline.addPolicy(u),this.clientOptions=Object.assign({},o),this.clientOptions.signalingClientOptions=Object.assign(Object.assign({},this.clientOptions.signalingClientOptions),{resourceEndpoint:this.endpoint,gatewayApiVersion:this.client.apiVersion}),this.signalingClient=gO(i,Ao,this.clientOptions.signalingClientOptions)}getChatThreadClient(n){return new fO(this.endpoint,n,this.tokenCredential,this.clientOptions)}async createChatThread(n,i={}){return tt.withSpan("ChatClient-CreateChatThread",i,async o=>{var l,u;o.idempotencyToken=(l=o.idempotencyToken)!==null&&l!==void 0?l:mO();const f=v2(o),p=await this.client.chat.createChatThread({topic:n.topic,participants:(u=i.participants)===null||u===void 0?void 0:u.map(m=>Vb(m)),metadata:i.metadata,retentionPolicy:i.retentionPolicy},f);return x2(p)})}listChatThreadsPage(n){return Xr(this,arguments,function*(o,l={}){if(!o.continuationToken){const u=yield lt(this.client.chat.listChatThreads(l));o.continuationToken=u.nextLink,u.value&&(yield yield lt(u.value))}for(;o.continuationToken;){const u=yield lt(this.client.chat.listChatThreadsNext(o.continuationToken,l));if(o.continuationToken=u.nextLink,u.value)yield yield lt(u.value);else break}})}listChatThreadsAll(n){return Xr(this,arguments,function*(){var o,l,u,f;try{for(var p=!0,m=Jr(this.listChatThreadsPage({},n)),g;g=yield lt(m.next()),o=g.done,!o;p=!0)f=g.value,p=!1,yield lt(yield*wl(Jr(f)))}catch(y){l={error:y}}finally{try{!p&&!o&&(u=m.return)&&(yield lt(u.call(m)))}finally{if(l)throw l.error}}})}listChatThreads(n={}){const{span:i,updatedOptions:o}=tt.startSpan("ChatClient-ListChatThreads",n);try{const l=this.listChatThreadsAll(o);return{next(){return l.next()},[Symbol.asyncIterator](){return this},byPage:(u={})=>this.listChatThreadsPage(u,o)}}catch(l){throw i.setStatus({error:l,status:"error"}),l}finally{i.end()}}async deleteChatThread(n,i={}){return tt.withSpan("ChatClient-DeleteChatThread",i,async o=>{await this.client.chat.deleteChatThread(n,o)})}async startRealtimeNotifications(){if(this.signalingClient===void 0)throw new Error("Realtime notifications are not supported in node js.");this.isRealtimeNotificationsStarted||(this.isRealtimeNotificationsStarted=!0,await this.signalingClient.start(),this.subscribeToSignalingEvents())}async stopRealtimeNotifications(){if(this.signalingClient===void 0)throw new Error("Realtime notifications are not supported in node js.");this.isRealtimeNotificationsStarted=!1,await this.signalingClient.stop(),this.emitter.removeAllListeners()}on(n,i){if(this.signalingClient===void 0)throw new Error("Realtime notifications are only supported in the browser.");if(!this.isRealtimeNotificationsStarted&&n!=="realTimeNotificationConnected"&&n!=="realTimeNotificationDisconnected")throw new Error("You must call startRealtimeNotifications before you can subscribe to events.");this.emitter.on(n,i)}off(n,i){if(this.signalingClient===void 0)throw new Error("Realtime notifications are only supported in the browser.");this.emitter.removeListener(n,i)}subscribeToSignalingEvents(){if(this.signalingClient===void 0)throw new Error("Realtime notifications are only supported in the browser.");this.signalingClient.on("connectionChanged",n=>{n===Qd.ConnectionState.Connected?this.emitter.emit("realTimeNotificationConnected"):n===Qd.ConnectionState.Disconnected&&this.emitter.emit("realTimeNotificationDisconnected")}),this.signalingClient.on("chatMessageReceived",n=>{this.emitter.emit("chatMessageReceived",n)}),this.signalingClient.on("chatMessageEdited",n=>{this.emitter.emit("chatMessageEdited",n)}),this.signalingClient.on("chatMessageDeleted",n=>{this.emitter.emit("chatMessageDeleted",n)}),this.signalingClient.on("typingIndicatorReceived",n=>{this.emitter.emit("typingIndicatorReceived",n)}),this.signalingClient.on("readReceiptReceived",n=>{this.emitter.emit("readReceiptReceived",n)}),this.signalingClient.on("chatThreadCreated",n=>{this.emitter.emit("chatThreadCreated",n)}),this.signalingClient.on("chatThreadDeleted",n=>{this.emitter.emit("chatThreadDeleted",n)}),this.signalingClient.on("chatThreadPropertiesUpdated",n=>{this.emitter.emit("chatThreadPropertiesUpdated",n)}),this.signalingClient.on("participantsAdded",n=>{this.emitter.emit("participantsAdded",n)}),this.signalingClient.on("participantsRemoved",n=>{this.emitter.emit("participantsRemoved",n)})}}function vO(){const{recipientId:r}=yv(),n=br(),[i,o]=O.useState(null),[l,u]=O.useState(null),[f,p]=O.useState(null),[m,g]=O.useState([]),[y,E]=O.useState(""),[I,F]=O.useState(!0),[A,H]=O.useState(!1),[B,se]=O.useState(null),le=localStorage.getItem("userId"),me=O.useRef(null),ce=O.useRef(!1),ie=O.useRef(null),fe=O.useRef(null),ue=O.useRef(null),Re=(ke,ye="success")=>{se({message:ke,type:ye}),ye==="success"&&setTimeout(()=>{se(ze=>ze?{...ze,hiding:!0}:null),setTimeout(()=>se(null),300)},3e3)},Ne=ke=>{console.log("Real-time message event received:",ke),ke.threadId===fe.current&&ke.sender.communicationUserId!==ue.current&&g(ye=>ye.find(ze=>ze.id===ke.id)?ye:[...ye,{id:ke.id,sender:"Recipient",text:ke.message,timestamp:new Date}])};O.useEffect(()=>(le&&r&&!ce.current&&(ce.current=!0,Se()),()=>{ie.current&&(console.log("Cleaning up chat real-time notifications..."),ie.current.off("chatMessageReceived",Ne),ie.current.stopRealtimeNotifications().catch(console.error),ie.current=null)}),[le,r]),O.useEffect(()=>{xe()},[m]);const xe=()=>{me.current?.scrollIntoView({behavior:"smooth"})},Se=async()=>{try{F(!0),console.log("Initializing chat for user:",le,"with recipient:",r),console.log("Fetching chat token...");const ke=await Ve.get("issuechattoken",{params:{userId:le}}),{token:ye,user:ze}=ke.data;o(ye),ue.current=ze.communicationUserId,console.log("Token received for ACS ID:",ze.communicationUserId);const q=new u2(ye),D=new yO("https://acs-festive-guest.india.communication.azure.com/",q);ie.current=D,u(D),console.log("Getting or creating chat thread...");const L=(await Ve.post("getorcreatechatthread",{userId:le,recipientId:r})).data.threadId;console.log("Thread ID received:",L),fe.current=L,p(L),console.log("Loading message history...");const C=D.getChatThreadClient(L).listMessages(),z=[];for await(const x of C)x.type==="text"&&z.push({id:x.id,sender:x.sender.communicationUserId===ze.communicationUserId?"Me":"Recipient",text:x.content.message,timestamp:x.createdOn});g(z.reverse()),console.log("Starting real-time notifications..."),await D.startRealtimeNotifications(),D.on("chatMessageReceived",Ne),console.log("Chat initialization complete.")}catch(ke){console.error("Failed to init chat:",ke),Re("Failed to initialize chat: "+(ke.response?.data?.error||ke.message),"error")}finally{F(!1)}},Pe=async ke=>{if(ke.preventDefault(),!!y.trim()){if(!ie.current||!fe.current){Re("Chat not fully initialized. Please wait...","error");return}try{H(!0);const ye=ie.current.getChatThreadClient(fe.current),ze=y;console.log("Attempting to send message to ACS...");const q=await ye.sendMessage({content:ze});console.log("Message sent successfully. ID:",q.id),E(""),g(D=>D.find(K=>K.id===q.id)?D:[...D,{id:q.id,sender:"Me",text:ze,timestamp:new Date}])}catch(ye){console.error("Failed to send message:",ye),Re("Failed to send message: "+ye.message,"error")}finally{H(!1)}}};return I?c.jsxs("div",{className:"container",style:{textAlign:"center",padding:"5rem"},children:[c.jsx("div",{className:"spinner"}),c.jsx("p",{children:"Initializing secure chat..."})]}):c.jsxs("div",{className:"modern-chat-page",children:[B&&c.jsx("div",{className:"toast-container",children:c.jsxs("div",{className:`toast ${B.type} ${B.hiding?"hiding":""}`,children:[c.jsx("span",{className:"toast-icon",children:B.type==="success"?"":B.type==="error"?"":""}),c.jsx("div",{className:"toast-content",children:c.jsx("p",{className:"toast-message",children:B.message})}),B.type!=="success"&&c.jsx("button",{onClick:()=>se(null),style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.5rem"},children:""})]})}),c.jsxs("div",{className:"chat-window-full",children:[c.jsx("div",{className:"chat-header-full",children:c.jsxs("div",{className:"chat-user-info-full",children:[c.jsx("button",{onClick:()=>n(-1),className:"back-btn-modern",title:"Go Back",children:c.jsx(uf,{size:20})}),c.jsx("div",{className:"user-avatar",children:""}),c.jsxs("div",{className:"user-details",children:[c.jsx("h3",{children:"Secure Chat"}),c.jsx("span",{className:"user-status",children:" Online"})]})]})}),c.jsxs("div",{className:"chat-messages",children:[m.map((ke,ye)=>c.jsxs("div",{className:`message-bubble ${ke.sender==="Me"?"sent":"received"}`,children:[c.jsx("div",{className:"message-content",children:ke.text}),c.jsx("div",{className:"message-time",children:new Date(ke.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},ke.id||ye)),c.jsx("div",{ref:me})]}),c.jsxs("form",{onSubmit:Pe,className:"chat-input",children:[c.jsx("input",{type:"text",value:y,onChange:ke=>E(ke.target.value),placeholder:"Type a message...",className:"message-input"}),c.jsx("button",{type:"submit",className:"send-btn",disabled:A,children:A?c.jsx("span",{className:"spinner-small"}):c.jsx(Mo,{size:20})})]})]})]})}const bO=()=>{const[r,n]=O.useState([]),[i,o]=O.useState(null),[l,u]=O.useState([]),[f,p]=O.useState(""),[m,g]=O.useState(!1),[y,E]=O.useState(!1),[I,F]=O.useState(!1),[A,H]=O.useState(null),se=(()=>{const xe=localStorage.getItem("userId");if(xe)return xe;try{const Se=JSON.parse(localStorage.getItem("user")||"{}");return Se.userId||Se.id}catch{return null}})(),le=O.useRef(null);O.useEffect(()=>{ce()},[]),O.useEffect(()=>{le.current?.scrollIntoView({behavior:"auto"})},[l]);const me=async xe=>{try{const Se=await Ve.post("user/public-profile",{userId:xe});H(Se.data)}catch(Se){console.error("Failed to fetch profile:",Se)}},ce=async()=>{try{g(!0);const Se=((await Ve.get("chat/conversations")).data||[]).map(Pe=>({...Pe,otherUserName:Pe.otherUserName||"Unknown User",lastMessage:Pe.lastMessage||"",timestamp:Pe.timestamp||new Date().toISOString(),unreadCount:Pe.unreadCount||0}));n(Se)}catch(xe){console.error("Failed to fetch conversations:",xe)}finally{g(!1)}},ie=async xe=>{if(o(xe),u([]),!xe.otherUserId){console.error("No otherUserId in conversation:",xe);return}await fe(xe.otherUserId),F(!0)},fe=async xe=>{try{const Se=await Ve.get(`chat/messages/${xe}`);if(!Se.data||!Array.isArray(Se.data)){u([]);return}const Pe=Se.data.map(ke=>({id:ke.id,sender:ke.senderId===se?"Me":"Recipient",text:ke.message||"",timestamp:new Date(ke.timestamp),status:ke.status||"sent"}));u(Pe)}catch(Se){console.error("Failed to load messages:",Se),u([])}},ue=()=>{F(!1),o(null)},Re=async xe=>{if(xe.preventDefault(),!(!f.trim()||!i))try{E(!0);const Se=f;p(""),u(Pe=>[...Pe,{id:Date.now(),sender:"Me",text:Se,timestamp:new Date,status:"Sent"}]),await Ve.post("chat/send",{recipientId:i.otherUserId,message:Se}),ce()}catch(Se){console.error("Failed to send message:",Se)}finally{E(!1)}},Ne=xe=>{const Se=new Date(xe),ke=new Date-Se;return Math.floor(ke/(1e3*60*60))<24?Se.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):Se.toLocaleDateString([],{month:"short",day:"numeric"})};return c.jsxs("div",{className:"chats-container",children:[c.jsxs("div",{className:`conversations-sidebar ${I?"mobile-hidden":""}`,children:[c.jsx("div",{className:"sidebar-header",children:c.jsx("h3",{children:" Messages"})}),c.jsx("div",{className:"conversations-list",children:m?c.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:"Loading..."}):r.length===0?c.jsx("div",{className:"no-conversations",children:c.jsx("p",{children:"No conversations yet"})}):r.map(xe=>c.jsxs("div",{className:`conversation-item ${i?.otherUserId===xe.otherUserId?"active":""}`,onClick:()=>ie(xe),children:[c.jsx("div",{className:"conversation-avatar",children:c.jsx(Wn,{src:xe.profileImageUrl,alt:xe.otherUserName,style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"},fallbackText:"User"})}),c.jsxs("div",{className:"conversation-content",children:[c.jsxs("div",{className:"conversation-header",children:[c.jsx("div",{className:"conversation-name",children:xe.otherUserName||"Unknown User"}),c.jsx("div",{className:"conversation-time",children:Ne(xe.timestamp)})]}),c.jsxs("div",{className:"conversation-preview",children:[xe.lastSenderId===se?"You: ":"",xe.lastMessage||"Start chatting"]})]}),xe.unreadCount>0&&c.jsx("div",{style:{minWidth:"20px",height:"20px",borderRadius:"10px",background:"#6366f1",color:"white",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 6px"},children:xe.unreadCount})]},xe.chatRoom))})]}),c.jsx("div",{className:`chat-window ${I?"mobile-visible":""}`,children:i?c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"chat-header",children:[c.jsx("button",{className:"mobile-back-btn",onClick:ue,children:c.jsx(uf,{size:20})}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[c.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#e2e8f0",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",cursor:"pointer"},onClick:()=>me(i.otherUserId),children:c.jsx(Wn,{src:i.profileImageUrl,alt:i.otherUserName,style:{width:"100%",height:"100%",objectFit:"cover"},fallbackText:"User"})}),c.jsx("h4",{style:{margin:0,cursor:"pointer"},onClick:()=>me(i.otherUserId),children:i.otherUserName})]})]}),c.jsxs("div",{className:"chat-messages",children:[l.map((xe,Se)=>c.jsxs("div",{className:`message ${xe.sender==="Me"?"sent":"received"}`,children:[c.jsx("div",{className:"message-content",children:xe.text}),c.jsxs("div",{className:"message-time",children:[new Date(xe.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),xe.sender==="Me"&&xe.status&&c.jsxs("span",{style:{marginLeft:"4px",fontSize:"10px"},children:[" ",xe.status]})]})]},xe.id||Se)),c.jsx("div",{ref:le})]}),c.jsxs("form",{onSubmit:Re,className:"chat-input",children:[c.jsx("input",{type:"text",value:f,onChange:xe=>p(xe.target.value),placeholder:"Type a message...",className:"message-input"}),c.jsx("button",{type:"submit",className:"send-btn",disabled:y,children:c.jsx(Mo,{size:16})})]})]}):c.jsxs("div",{className:"no-chat-selected",children:[c.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),c.jsx("h3",{children:"Select a conversation"}),c.jsx("p",{children:"Choose a conversation from the list to start chatting"})]})}),A&&c.jsx("div",{className:"modal-overlay",onClick:()=>H(null),children:c.jsxs("div",{className:"modal-content",onClick:xe=>xe.stopPropagation(),style:{maxHeight:"90vh",overflowY:"auto"},children:[c.jsxs("div",{className:"modal-header",children:[c.jsx("h3",{children:A.name}),c.jsx("button",{onClick:()=>H(null),className:"modal-close",children:""})]}),c.jsxs("div",{className:"modal-body",children:[c.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",alignItems:"flex-start"},children:[c.jsx(Wn,{src:A.profileImageUrl,alt:A.name,className:"modal-profile-image",fallbackText:"Profile",style:{flexShrink:0,width:"100px",height:"100px"}}),c.jsxs("div",{style:{flex:1},children:[c.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1.25rem"},children:A.name}),c.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:c.jsxs("span",{style:{color:"#64748b"},children:[" ",A.location]})}),c.jsxs("p",{style:{color:"#64748b",fontSize:"0.9rem",margin:"0"},children:[A.userType,"  Joined ",new Date(A.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"})]})]})]}),c.jsxs("div",{style:{marginBottom:"1.5rem"},children:[c.jsx("h4",{style:{marginBottom:"0.75rem",color:"var(--text)"},children:A.userType==="Host"?" About My Hosting":" About Me"}),c.jsx("p",{style:{color:"#475569",lineHeight:"1.5",background:"#f8fafc",padding:"1rem",borderRadius:"0.5rem",margin:"0"},children:A.bio||"No description provided."})]})]})]})})]})};function SO(){const[r,n]=O.useState([]),[i,o]=O.useState(!0),[l,u]=O.useState(!1),[f,p]=O.useState(""),[m,g]=O.useState(!1);O.useEffect(()=>{y()},[]);const y=async()=>{try{const A=await Ve.get("listpayments");n(A.data)}catch{console.error("Failed to fetch payments")}finally{o(!1)}},E=async()=>{g(!0);try{const A=await Ve.post("seedlocations"),H=await Ve.get("getlocations");p(` APIs working! Seeded: ${A.data.count} locations. Retrieved: ${Object.keys(H.data).length} states.`)}catch(A){p(` API Error: ${A.message}`)}finally{g(!1)}},I=async()=>{u(!0);try{const A=await Bl.seedLocations();alert(`Locations seeded successfully! ${A.count} locations added.`)}catch(A){alert("Failed to seed locations: "+A.message)}finally{u(!1)}},F=async(A,H)=>{try{await Ve.post("verifypayment",{paymentId:A,userId:H}),alert("Payment verified and user updated!"),y()}catch(B){alert("Verification failed: "+B.message)}};return c.jsxs("div",{className:"admin-container",children:[c.jsx("h2",{children:"Admin Dashboard"}),c.jsxs("div",{className:"admin-section",style:{marginBottom:"2rem",padding:"1rem",border:"1px solid #e2e8f0",borderRadius:"0.5rem"},children:[c.jsx("h3",{children:"Location Management"}),c.jsx("p",{children:"Test and seed the locations table with initial data."}),c.jsxs("div",{style:{marginBottom:"1rem"},children:[c.jsx("button",{className:"btn btn-secondary",onClick:E,disabled:m,style:{marginRight:"1rem"},children:m?"Testing APIs...":"Test Location APIs"}),c.jsx("button",{className:"btn btn-primary",onClick:I,disabled:l,children:l?"Seeding Locations...":"Seed Locations Table"})]}),f&&c.jsx("div",{style:{padding:"0.5rem",background:f.includes("")?"#d1fae5":"#fee2e2",borderRadius:"0.25rem",fontSize:"0.9rem"},children:f})]}),c.jsxs("div",{className:"admin-section",children:[c.jsx("h3",{children:"Verify Payments"}),i?c.jsx("p",{children:"Loading..."}):c.jsx("div",{className:"payment-list",children:c.jsxs("table",{className:"admin-table",children:[c.jsx("thead",{children:c.jsxs("tr",{children:[c.jsx("th",{children:"User ID"}),c.jsx("th",{children:"Type"}),c.jsx("th",{children:"UPI Ref"}),c.jsx("th",{children:"Amount"}),c.jsx("th",{children:"Action"})]})}),c.jsx("tbody",{children:r.length>0?r.map(A=>c.jsxs("tr",{children:[c.jsx("td",{children:A.partitionKey}),c.jsx("td",{children:A.type}),c.jsx("td",{children:A.upiRef}),c.jsxs("td",{children:["",A.amount]}),c.jsx("td",{children:c.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>F(A.rowKey,A.partitionKey),children:"Verify"})})]},A.rowKey)):c.jsx("tr",{children:c.jsx("td",{colSpan:"5",style:{textAlign:"center"},children:"No pending payments"})})})]})})]})]})}function wO(){const[r,n]=O.useState(null),[i,o]=O.useState(null),[l,u]=O.useState(""),[f,p]=O.useState(!1),[m,g]=O.useState(""),[y,E]=O.useState(!1),[I,F]=O.useState(!1),[A,H]=O.useState(!1),[B,se]=O.useState(""),[le,me]=O.useState(""),[ce,ie]=O.useState(""),[fe,ue]=O.useState(!1),[Re,Ne]=O.useState(!1),[xe,Se]=O.useState(!1),[Pe,ke]=O.useState(""),ye=[{label:"At least 8 characters",test:x=>x.length>=8},{label:"One uppercase letter",test:x=>/[A-Z]/.test(x)},{label:"One lowercase letter",test:x=>/[a-z]/.test(x)},{label:"One number",test:x=>/\d/.test(x)},{label:"One special character",test:x=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(x)}],ze=localStorage.getItem("userId");O.useEffect(()=>{ze&&q()},[ze]);const q=async()=>{try{let b=(await Ve.get("user/profile")).data;const S=JSON.parse(localStorage.getItem("user")),_={...b,token:S?.token,role:b.userType||S?.role};n(_),localStorage.setItem("user",JSON.stringify(_)),g(_.referralCode||"Loading..."),window.dispatchEvent(new Event("storage"))}catch{console.error("User not found")}},D=x=>{const b=x.target.files[0];b&&(o(b),u(URL.createObjectURL(b)))},K=async()=>{if(!i||!r){alert("Please select a file and ensure your profile is loaded before uploading.");return}try{console.log("Step 1: Compressing image...");const x=await L(i);console.log("Step 2: Getting SAS token from API...");const b=await Ve.get("user/upload-sas-token");console.log("SAS token response:",b.data);const{sasUrl:S}=b.data;console.log("Step 3: Uploading to blob storage...",S);const _=await fetch(S,{method:"PUT",headers:{"x-ms-blob-type":"BlockBlob","Content-Type":"image/jpeg"},body:x});if(console.log("Upload response status:",_.status),!_.ok)throw new Error(`Upload failed: ${_.status} ${_.statusText}`);console.log("Step 4: Confirming upload with API...");const N=S.split("?")[0];await Ve.post("user/confirm-upload",{imageUrl:N}),alert("Profile image uploaded successfully!"),o(null),u(""),p(!1),await q()}catch(x){console.error("Upload failed:",x),console.error("Error details:",x.response?.data),alert("Image upload failed: "+(x.response?.data?.error||x.message))}},L=x=>new Promise(b=>{const S=document.createElement("canvas"),_=S.getContext("2d"),N=new Image;N.onload=()=>{let{width:w,height:R}=N;const j=800;w>R?w>j&&(R=R*j/w,w=j):R>j&&(w=w*j/R,R=j),S.width=w,S.height=R,_.drawImage(N,0,0,w,R),S.toBlob(G=>{b(G)},"image/jpeg",.8)},N.src=URL.createObjectURL(x)}),W=()=>{navigator.clipboard.writeText(m),E(!0),setTimeout(()=>E(!1),2e3)},C=()=>{const x=` Join FestiveGuest and celebrate festivals with locals! Use my referral code: ${m} when registering to get special benefits!`;navigator.share?navigator.share({text:x}):(navigator.clipboard.writeText(x),E(!0),setTimeout(()=>E(!1),2e3))},z=async()=>{if(!B||!le||!ce){ke("Please fill all password fields");return}if(!ye.every(b=>b.test(le))){ke("New password must meet all requirements");return}if(le!==ce){ke("New passwords do not match");return}Se(!0),ke("");try{(await Ve.post("auth/change-password",{currentPassword:B,newPassword:le})).data.success&&(ke(" Password changed successfully! Closing in 5 seconds..."),setTimeout(()=>{H(!1),se(""),me(""),ie(""),ke("")},5e3))}catch(b){const S=b.response?.data?.message||b.message;ke(S)}finally{Se(!1)}};return r?c.jsxs("div",{className:"profile-container",children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[c.jsx("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:" My Profile"}),c.jsx("p",{style:{color:"#64748b",margin:"0"},children:"View your profile information"})]}),c.jsxs("div",{className:"profile-card",children:[c.jsxs("div",{className:"profile-image-section",children:[c.jsx(Wn,{src:l||r.profileImageUrl,alt:"Profile",className:"profile-img-preview",fallbackText:"Profile"}),c.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexDirection:"column",gap:"0.4rem",alignItems:"center"},children:f?c.jsxs(c.Fragment,{children:[c.jsx("label",{htmlFor:"file-input",className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.3rem",cursor:"pointer",padding:"0.4rem 0.8rem",fontSize:"0.875rem"},children:" Choose File"}),c.jsx("input",{id:"file-input",type:"file",accept:"image/*",onChange:D,style:{display:"none"}}),c.jsxs("button",{className:"btn btn-primary",onClick:K,disabled:!i,style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.4rem 0.8rem",fontSize:"0.875rem"},children:[c.jsx(oC,{size:14})," Upload"]}),c.jsxs("button",{className:"btn btn-secondary",onClick:()=>{p(!1),o(null),u("")},style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.4rem 0.8rem",fontSize:"0.875rem"},children:[c.jsx(ff,{size:14})," Cancel"]})]}):c.jsxs("button",{className:"btn btn-secondary",onClick:()=>p(!0),style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.4rem 0.8rem",fontSize:"0.875rem"},children:[c.jsx(jv,{size:14})," Edit Photo"]})}),c.jsx("p",{style:{color:"#64748b",fontSize:"0.875rem",textAlign:"center"},children:"Upload a profile photo"})]}),c.jsx("div",{className:"profile-details",children:c.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[c.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #3b82f6"},children:c.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx("strong",{children:" Email:"})," ",r.email]})}),c.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #ef4444"},children:c.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx("strong",{children:" Phone:"})," ",r.phone]})}),c.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #6366f1"},children:c.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx("strong",{children:" Name:"})," ",r.name]})}),c.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #10b981"},children:c.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx("strong",{children:" Role:"})," ",r.userType==="Host"?" Host":" Guest"]})}),c.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #f59e0b"},children:c.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx("strong",{children:" Location:"})," ",r.location]})}),c.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #ec4899"},children:c.jsxs("p",{style:{margin:"0",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[c.jsx("strong",{children:r.userType==="Host"?" My Offerings:":" My Festival Wishes:"}),c.jsx("span",{style:{color:"#475569",fontSize:"0.95rem",lineHeight:"1.5"},children:r.bio||"Not specified"})]})}),c.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #f59e0b"},children:c.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx("strong",{children:" Status:"}),c.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.875rem",background:r.status==="Active"?"#dcfce7":"#fef3c7",color:r.status==="Active"?"#166534":"#92400e"},children:r.status})]})}),c.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #8b5cf6"},children:c.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx("strong",{children:" Contact Enabled:"}),c.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.875rem",background:r.isVerified?"#dcfce7":"#fee2e2",color:r.isVerified?"#166534":"#dc2626"},children:r.isVerified?" Yes":" No"})]})})]})})]}),c.jsxs("div",{className:"profile-card",style:{marginTop:"2rem"},children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[c.jsxs("h3",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[c.jsx(Wr,{size:24,style:{color:"var(--primary)"}}),"Refer a Friend"]}),c.jsx("p",{style:{color:"#64748b",margin:"0"},children:"Share FestiveGuest with friends and earn rewards!"})]}),c.jsxs("div",{style:{background:"#f8fafc",padding:"1.5rem",borderRadius:"0.75rem",border:"2px dashed var(--primary)"},children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem"},children:[c.jsx("p",{style:{margin:"0 0 0.5rem 0",fontWeight:"600"},children:"Your Referral Code:"}),c.jsx("div",{style:{background:"white",padding:"0.75rem 1rem",borderRadius:"0.5rem",border:"1px solid var(--border)",fontSize:"1.25rem",fontWeight:"bold",color:"var(--primary)",letterSpacing:"2px"},children:m})]}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",flexWrap:"wrap",marginBottom:"1.5rem"},children:[c.jsxs("button",{onClick:W,className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem"},children:[c.jsx(_T,{size:16}),y?"Copied!":"Copy Code"]}),c.jsxs("button",{onClick:C,className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem"},children:[c.jsx(ZT,{size:16}),"Share Message"]})]}),c.jsxs("div",{style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1rem"},children:[c.jsx("h4",{style:{margin:"0 0 0.5rem 0",fontSize:"1rem",textAlign:"center"},children:" Referral Rewards"}),c.jsxs("div",{style:{fontSize:"0.875rem",lineHeight:"1.4"},children:[c.jsxs("p",{style:{margin:"0 0 0.5rem 0"},children:[" ",c.jsx("strong",{children:"Invite 3 friends"}),"  Get 1 month Premium features FREE!"]}),c.jsxs("p",{style:{margin:"0 0 0.5rem 0"},children:[" ",c.jsx("strong",{children:"Each successful referral"}),"  Both you and your friend get special benefits"]}),c.jsxs("p",{style:{margin:"0"},children:[" ",c.jsx("strong",{children:"Premium features:"})," Priority support, advanced filters, verified badge"]})]})]}),c.jsxs("div",{style:{background:"#fff7ed",border:"1px solid #fed7aa",padding:"1rem",borderRadius:"0.5rem"},children:[c.jsx("h4",{style:{margin:"0 0 0.75rem 0",color:"#9a3412",fontSize:"0.95rem"},children:" How to Share Your Referral Code:"}),c.jsxs("ol",{style:{margin:"0",paddingLeft:"1.25rem",fontSize:"0.875rem",color:"#9a3412",lineHeight:"1.5"},children:[c.jsxs("li",{style:{marginBottom:"0.5rem"},children:[c.jsx("strong",{children:"Copy your code"})," using the button above"]}),c.jsxs("li",{style:{marginBottom:"0.5rem"},children:[c.jsx("strong",{children:"Share with friends"})," via WhatsApp, SMS, or social media"]}),c.jsxs("li",{style:{marginBottom:"0.5rem"},children:[c.jsx("strong",{children:"Ask them to visit"})," festiveguest.com and register"]}),c.jsxs("li",{style:{marginBottom:"0.5rem"},children:[c.jsx("strong",{children:"They enter your code"}),' in the "Referral Code" field during registration']}),c.jsxs("li",{children:[c.jsx("strong",{children:"Both get rewards"})," once they complete their first booking!"]})]})]}),c.jsx("div",{style:{marginTop:"1rem",textAlign:"center"},children:c.jsx("p",{style:{margin:"0",fontSize:"0.875rem",color:"#64748b"},children:"Help us grow our festival community and earn amazing rewards together! "})})]})]}),c.jsxs("div",{className:"profile-card",style:{marginTop:"2rem"},children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[c.jsxs("h3",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[c.jsx(yl,{size:24,style:{color:"var(--primary)"}}),"Security"]}),c.jsx("p",{style:{color:"#64748b",margin:"0"},children:"Manage your account security"})]}),c.jsx("div",{style:{textAlign:"center"},children:c.jsxs("button",{onClick:()=>H(!0),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 auto"},children:[c.jsx(yl,{size:16}),"Change Password"]})})]}),A&&c.jsx("div",{className:"modal-overlay",onClick:()=>H(!1),children:c.jsxs("div",{className:"modal-content",onClick:x=>x.stopPropagation(),style:{maxWidth:"400px"},children:[c.jsxs("div",{className:"modal-header",children:[c.jsxs("h3",{children:[c.jsx(yl,{size:20})," Change Password"]}),c.jsx("button",{onClick:()=>H(!1),className:"modal-close",children:""})]}),c.jsxs("div",{className:"modal-body",children:[Pe&&c.jsx("div",{style:{color:Pe.includes("")?"#16a34a":"#dc2626",background:Pe.includes("")?"#dcfce7":"#fee2e2",padding:"0.75rem",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:Pe.includes("")?Pe:` ${Pe}`}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Current Password"}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx("input",{type:fe?"text":"password",value:B,onChange:x=>{se(x.target.value),ke("")},placeholder:"Enter current password",style:{fontSize:"1rem",padding:"0.75rem",width:"100%",paddingRight:"2.5rem"}}),c.jsx("button",{type:"button",onClick:()=>ue(!fe),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#64748b"},children:fe?c.jsx(Cl,{size:16}):c.jsx(Rl,{size:16})})]})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"New Password"}),c.jsxs("div",{style:{position:"relative"},children:[c.jsx("input",{type:Re?"text":"password",value:le,onChange:x=>{me(x.target.value),ke("")},placeholder:"Enter new password (min 8 characters)",style:{fontSize:"1rem",padding:"0.75rem",width:"100%",paddingRight:"2.5rem"}}),c.jsx("button",{type:"button",onClick:()=>Ne(!Re),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#64748b"},children:Re?c.jsx(Cl,{size:16}):c.jsx(Rl,{size:16})})]}),c.jsx("div",{style:{marginTop:"0.75rem",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:ye.map((x,b)=>{const S=x.test(le);return c.jsxs("div",{style:{fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.25rem",color:S?"#16a34a":"#dc2626",transition:"color 0.2s"},children:[c.jsx("span",{style:{fontSize:"0.9rem"},children:S?"":""}),x.label]},b)})})]}),c.jsxs("div",{className:"form-group",children:[c.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Confirm New Password"}),c.jsx("input",{type:"password",value:ce,onChange:x=>{ie(x.target.value),ke("")},placeholder:"Confirm new password",style:{fontSize:"1rem",padding:"0.75rem",width:"100%"}})]}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[c.jsx("button",{onClick:()=>{H(!1),se(""),me(""),ie(""),ke("")},className:"btn btn-secondary",style:{flex:1,padding:"0.75rem"},children:"Cancel"}),c.jsx("button",{onClick:z,disabled:xe||!B||!le||!ce,className:"btn btn-primary",style:{flex:1,padding:"0.75rem"},children:xe?"Changing...":"Change Password"})]})]})]})})]}):c.jsx("div",{className:"profile-container text-center",style:{padding:"3rem"},children:c.jsx("div",{className:"loading",children:"Loading profile..."})})}function xO(){const{userName:r}=yv(),n=br(),[i,o]=O.useState(null),[l,u]=O.useState([]),[f,p]=O.useState(!0);O.useEffect(()=>{m()},[r]);const m=async()=>{try{console.log("Fetching profile for userName:",r);const[I,F]=await Promise.all([Ve.get(`user/public-profile-by-name/${encodeURIComponent(r)}`),Ve.get(`user/reviews-by-name/${encodeURIComponent(r)}`)]);o(I.data),u(F.data||[])}catch(I){console.error("Failed to fetch profile:",I),console.error("Error details:",I.response?.data),console.error("Requested userName:",r)}finally{p(!1)}},g=I=>Array.from({length:5},(F,A)=>c.jsx(Hd,{size:16,fill:A<I?"#fbbf24":"none",color:A<I?"#fbbf24":"#d1d5db"},A)),y=I=>new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"long"});if(f)return c.jsx("div",{className:"profile-container text-center",style:{padding:"3rem"},children:c.jsx("div",{className:"loading",children:"Loading profile..."})});if(!i)return c.jsxs("div",{className:"profile-container text-center",style:{padding:"3rem"},children:[c.jsx("h3",{children:"Profile not found"}),c.jsx("button",{onClick:()=>n(-1),className:"btn btn-primary",children:"Go Back"})]});const E=l.length>0?l.reduce((I,F)=>I+F.rating,0)/l.length:0;return c.jsxs("div",{className:"profile-container",children:[c.jsxs("div",{style:{marginBottom:"2rem"},children:[c.jsxs("button",{onClick:()=>n(-1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[c.jsx(uf,{size:16})," Back"]}),c.jsxs("div",{style:{textAlign:"center"},children:[c.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[i.userType==="Host"?"":""," ",i.name]}),c.jsxs("p",{style:{color:"#64748b",margin:"0"},children:[i.userType,"  Joined ",y(i.createdAt)]})]})]}),c.jsxs("div",{className:"profile-card",children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[c.jsx(Wn,{src:i.profileImageUrl,alt:i.name,style:{width:"150px",height:"150px",borderRadius:"50%",objectFit:"cover",border:"4px solid var(--border)",marginBottom:"1rem"},fallbackText:"Profile"}),c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[c.jsx(_v,{size:16,color:"#64748b"}),c.jsx("span",{style:{color:"#64748b"},children:i.location})]}),l.length>0&&c.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[c.jsx("div",{style:{display:"flex",gap:"2px"},children:g(Math.round(E))}),c.jsx("span",{style:{fontWeight:"600"},children:E.toFixed(1)}),c.jsxs("span",{style:{color:"#64748b"},children:["(",l.length," reviews)"]})]})]}),c.jsxs("div",{style:{marginBottom:"2rem"},children:[c.jsx("h4",{style:{marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:i.userType==="Host"?" About My Hosting":" About Me"}),c.jsx("p",{style:{color:"#475569",lineHeight:"1.6",background:"#f8fafc",padding:"1rem",borderRadius:"0.75rem",borderLeft:"4px solid var(--primary)"},children:i.bio||"No description provided."})]})]}),l.length>0&&c.jsxs("div",{className:"profile-card",style:{marginTop:"2rem"},children:[c.jsxs("h3",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(Hd,{size:20,color:"#fbbf24"}),"Reviews (",l.length,")"]}),c.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:l.map((I,F)=>c.jsxs("div",{style:{background:"#f8fafc",padding:"1rem",borderRadius:"0.75rem",border:"1px solid var(--border)"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx("strong",{children:I.reviewerName}),c.jsx("div",{style:{display:"flex",gap:"2px"},children:g(I.rating)})]}),c.jsx("span",{style:{color:"#64748b",fontSize:"0.875rem"},children:y(I.createdAt)})]}),c.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.5"},children:I.comment})]},F))})]})]})}const TO=()=>{const[r,n]=O.useState({name:"",email:"",message:""}),[i,o]=O.useState(!1),[l,u]=O.useState(!1),[f,p]=O.useState(""),[m,g]=O.useState(null);O.useEffect(()=>{const I=localStorage.getItem("user");if(I){const F=JSON.parse(I);g(F),n(A=>({...A,name:F.name||"",email:F.email||""}))}},[]);const y=async I=>{if(I.preventDefault(),!r.name||!r.email||!r.message){p("Please fill all fields");return}o(!0),p("");try{const F={name:r.name,email:r.email,message:r.message,userType:m?.userType||m?.role||"Guest"};console.log("Sending feedback:",F);const A=await Ve.post("feedback",F);console.log("Feedback response:",A),u(!0),n({...r,message:""}),setTimeout(()=>u(!1),5e3)}catch(F){console.error("Feedback error details:",{message:F.message,response:F.response?.data,status:F.response?.status,statusText:F.response?.statusText});let A="Failed to send feedback. Please try again.";F.response?.status===404?A="Feedback service not found. Please contact support.":F.response?.status===500?A="Server error occurred. Please try again later.":F.response?.data?.message&&(A=F.response.data.message),p(A)}finally{o(!1)}},E=()=>{window.open("https://wa.me/919966888484","_blank","noopener,noreferrer")};return c.jsx("div",{className:"help-page",children:c.jsxs("div",{className:"help-container",children:[c.jsxs("div",{className:"help-header",children:[c.jsx(Tl,{size:48,className:"help-icon",style:{color:"var(--primary)"}}),c.jsxs("h1",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem"},children:[c.jsx(Wr,{size:32,style:{color:"var(--primary)"}}),"Help & Support"]}),c.jsx("p",{children:"We're here to help you with any questions or issues you may have."})]}),c.jsxs("div",{className:"help-content",children:[c.jsxs("div",{className:"help-card",children:[c.jsx(ny,{size:32,className:"card-icon",style:{color:"var(--primary)"}}),c.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(RT,{size:20}),"Email Support"]}),c.jsx("p",{children:"Send us an email and we'll get back to you as soon as possible."}),c.jsxs("a",{href:"mailto:support@localhostconnect.com",className:"btn btn-outline",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(ny,{size:16}),"Customer Support"]})]}),c.jsxs("div",{className:"help-card",children:[c.jsx(ms,{size:32,className:"card-icon",style:{color:"#25D366"}}),c.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(JT,{size:20}),"WhatsApp Support"]}),c.jsx("p",{children:"Chat with our support team directly for quick assistance."}),c.jsxs("button",{onClick:E,className:"btn btn-primary whatsapp-btn",style:{cursor:"pointer",border:"none",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(ms,{size:16}),"Chat on WhatsApp"]})]})]}),c.jsxs("div",{className:"feedback-section",style:{marginTop:"3rem"},children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[c.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[c.jsx(Mo,{size:28,style:{color:"var(--primary)"}}),"Send Feedback"]}),c.jsx("p",{style:{color:"#64748b",margin:"0"},children:"Share your thoughts, suggestions, or report issues directly with us"})]}),c.jsx("div",{style:{display:"flex",justifyContent:"center"},children:c.jsxs("div",{style:{width:"100%",maxWidth:"500px",background:"#f8fafc",padding:"2rem",borderRadius:"var(--radius)",boxShadow:"var(--shadow)",border:"1px solid var(--border)"},children:[f&&c.jsxs("div",{style:{color:"#dc2626",background:"#fee2e2",padding:"0.75rem",borderRadius:"0.5rem",marginBottom:"1rem",fontSize:"0.875rem",border:"1px solid #fecaca"},children:[" ",f]}),l?c.jsxs("div",{style:{color:"var(--success)",textAlign:"center",padding:"1rem"},children:[c.jsx(Co,{size:48,style:{marginBottom:"1rem",color:"#16a34a"}}),c.jsx("h3",{style:{color:"#16a34a",margin:"0 0 0.5rem 0"},children:"Feedback Sent Successfully!"}),c.jsx("p",{style:{margin:"0",color:"#64748b"},children:"Thank you for your feedback. We'll review it and get back to you if needed."})]}):c.jsx("form",{onSubmit:y,children:c.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[c.jsx("input",{type:"text",placeholder:"Your Name",value:r.name,onChange:I=>n({...r,name:I.target.value}),disabled:!!m,style:{padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"0.5rem",width:"100%",boxSizing:"border-box",fontSize:"1rem",backgroundColor:m?"#f3f4f6":"white",cursor:m?"not-allowed":"text"}}),c.jsx("input",{type:"email",placeholder:"Your Email",value:r.email,onChange:I=>n({...r,email:I.target.value}),disabled:!!m,style:{padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"0.5rem",width:"100%",boxSizing:"border-box",fontSize:"1rem",backgroundColor:m?"#f3f4f6":"white",cursor:m?"not-allowed":"text"}}),c.jsx("textarea",{placeholder:"Your feedback, suggestions, or issues...",value:r.message,onChange:I=>{n({...r,message:I.target.value}),p("")},rows:5,style:{padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"0.5rem",resize:"vertical",width:"100%",boxSizing:"border-box",fontSize:"1rem"}}),c.jsxs("button",{type:"submit",disabled:i,className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"center",padding:"0.75rem 1.5rem",fontSize:"1rem"},children:[c.jsx(Mo,{size:16}),i?"Sending...":"Send Feedback"]})]})})]})})]}),c.jsxs("div",{className:"faq-section",style:{marginTop:"3rem"},children:[c.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[c.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[c.jsx(Tl,{size:28,style:{color:"var(--primary)"}}),"Frequently Asked Questions"]}),c.jsx("p",{style:{color:"#64748b",margin:"0"},children:"Find answers to common questions about Local Host Connect"})]}),c.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[c.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[c.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[c.jsx(Co,{size:20,style:{color:"var(--success)"}}),"How do I become a host?"]}),c.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:'Go to the registration page, select "Local Host", and fill out your profile details including your location, offerings, and bio. Once registered, you can start connecting with travelers looking for authentic local experiences.'})]}),c.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[c.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[c.jsx(ol,{size:20,style:{color:"var(--warning)"}}),"Is it free to use?"]}),c.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:"Registration is completely free for both travelers and hosts. You can browse profiles, chat with other users, and arrange local experiences at no cost. Individual arrangements between hosts and travelers may have their own terms."})]}),c.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[c.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[c.jsx(Wr,{size:20,style:{color:"var(--primary)"}}),"How do I find hosts or travelers?"]}),c.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:"After logging in, go to your dashboard where you can browse profiles, filter by location, and view detailed information about other users. Use the chat feature to connect and arrange local experiences."})]}),c.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[c.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[c.jsx(ms,{size:20,style:{color:"var(--primary)"}}),"How does the referral system work?"]}),c.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:"Share your referral code with friends. When they register using your code, both of you get special benefits. Invite 3 friends to unlock Premium features for 1 month including priority support and advanced filters!"})]}),c.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[c.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[c.jsx(ol,{size:20,style:{color:"var(--warning)"}}),"What safety measures should I take?"]}),c.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:"Always meet in public places first, share your plans with trusted contacts, verify the other person's identity through video calls, keep emergency contacts handy, and trust your instincts. Never share personal financial information or make large advance payments."})]}),c.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[c.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[c.jsx(ol,{size:20,style:{color:"var(--warning)"}}),"How do I report suspicious behavior?"]}),c.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:"If you encounter any suspicious behavior, inappropriate messages, or safety concerns, immediately contact our support team via WhatsApp or email. We take all reports seriously and will investigate promptly to ensure community safety."})]}),c.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[c.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[c.jsx(Co,{size:20,style:{color:"var(--success)"}}),"What if I have a dispute with a host/traveler?"]}),c.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:"Contact our support team immediately with details of the issue. We'll mediate between both parties to find a fair resolution. Remember, all arrangements are between users - we facilitate introductions but cannot guarantee outcomes."})]}),c.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[c.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[c.jsx(ol,{size:20,style:{color:"var(--warning)"}}),"How should I handle payments?"]}),c.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:"Use secure payment methods, avoid large advance payments, and consider paying after services are rendered when possible. Never share banking passwords or OTPs. For high-value arrangements, consider meeting in person first to build trust."})]}),c.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[c.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[c.jsx(Co,{size:20,style:{color:"var(--success)"}}),"Can I verify someone's identity?"]}),c.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:"Yes! We recommend video calls before meeting, checking their profile completeness, reading reviews from other users, and asking for references if needed. Trust your instincts - if something feels off, it's better to be cautious."})]}),c.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[c.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[c.jsx(Wr,{size:20,style:{color:"var(--primary)"}}),"What types of experiences can I find?"]}),c.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:"Our platform connects you for various travel needs: business travel accommodation, leisure tourism, festival celebrations, educational exchanges, family visits, cultural immersion, local food experiences, and city tours with insider knowledge."})]}),c.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[c.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[c.jsx(Co,{size:20,style:{color:"var(--success)"}}),"Is my information safe?"]}),c.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:"Yes, we take privacy seriously. Your personal information is protected and only shared with users you choose to connect with. We strongly recommend meeting in public places first, sharing your plans with trusted contacts, and taking all necessary safety precautions."})]})]})]})]})})};class CO{async createGuestPost(n){return(await Ve.post("guestposts",n)).data}async getGuestPosts(){return(await Ve.get("guestposts")).data}async deleteGuestPost(n){return(await Ve.delete(`guestposts/${n}`)).data}async updateGuestPost(n,i){return(await Ve.put(`guestposts/${n}`,i)).data}async createHostPost(n){return(await Ve.post("hostposts",n)).data}async getHostPosts(){return(await Ve.get("hostposts")).data}async deleteHostPost(n){return(await Ve.delete(`hostposts/${n}`)).data}async updateHostPost(n,i){return(await Ve.put(`hostposts/${n}`,i)).data}}const Yr=new CO,RO=()=>{const[r,n]=O.useState([]),[i,o]=O.useState(!0),[l,u]=O.useState(!1),[f,p]=O.useState(!1),[m,g]=O.useState(!1),[y,E]=O.useState(null),[I,F]=O.useState(null),[A,H]=O.useState(null),[B,se]=O.useState(null),[le,me]=O.useState(null);O.useEffect(()=>{console.log("Posts: activeChat state changed:",le)},[le]),O.useEffect(()=>{const Se=localStorage.getItem("user");Se&&H(JSON.parse(Se)),ce()},[]),O.useEffect(()=>{const Se=()=>se(null);if(B)return document.addEventListener("click",Se),()=>document.removeEventListener("click",Se)},[B]);const ce=async()=>{try{o(!0);const Se=await Yr.getGuestPosts(),Pe=await Yr.getHostPosts(),ke=[...Se.map(ye=>({id:ye.rowKey,title:ye.title,content:ye.content,location:ye.location,planningDate:ye.planningDate,visitors:ye.visitors||1,days:ye.days||1,facilities:ye.facilities?ye.facilities.split(","):[],userName:ye.userName||A?.name||"Unknown",userId:ye.userId,userType:"Guest",createdAt:new Date(ye.createdAt),status:ye.status})),...Pe.map(ye=>({id:ye.rowKey,title:ye.title,content:ye.content,location:ye.location,maxGuests:ye.maxGuests||1,pricePerNight:ye.pricePerNight,amenities:ye.amenities?ye.amenities.split(","):[],userName:ye.userName||A?.name||"Unknown",userId:ye.userId,userType:"Host",createdAt:new Date(ye.createdAt),status:ye.status}))];ke.sort((ye,ze)=>ze.createdAt-ye.createdAt),n(ke)}catch(Se){console.error("Error fetching posts:",Se)}finally{o(!1)}},ie={WiFi:c.jsx(hC,{size:16}),Parking:c.jsx(ST,{size:16}),Meals:c.jsx(dC,{size:16})},fe=async Se=>{try{const Pe={...Se,userName:A?.name||"Unknown User",userId:A?.userId||A?.id,planningDate:Se.planningDate?new Date(Se.planningDate+"T00:00:00.000Z").toISOString():null};A?.userType==="Guest"?await Yr.createGuestPost(Pe):await Yr.createHostPost(Pe),u(!1),ce()}catch(Pe){console.error("Error creating post:",Pe);const ke=Pe.response?.data?.message||Pe.message||"Failed to create post. Please try again.";alert(ke)}},ue=Se=>{E(Se),p(!0),se(null)},Re=async Se=>{try{y.userType==="Guest"?await Yr.updateGuestPost(y.id,Se):await Yr.updateHostPost(y.id,Se),p(!1),E(null),ce()}catch(Pe){console.error("Error updating post:",Pe),alert("Failed to update post. Please try again.")}},Ne=async Se=>{F(Se),g(!0),se(null)},xe=async()=>{if(I)try{I.userType==="Guest"?await Yr.deleteGuestPost(I.id):await Yr.deleteHostPost(I.id),g(!1),F(null),ce()}catch(Se){console.error("Error deleting post:",Se),alert("Failed to delete post. Please try again.")}};return c.jsxs("div",{className:"container",style:{padding:"2rem 1rem",maxWidth:"1200px",margin:"0 auto"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[c.jsxs("div",{children:[c.jsx("h1",{style:{margin:"0 0 0.5rem 0",color:"var(--text)"},children:A?.userType==="Host"?"Guest Posts":"My Posts & Requests"}),c.jsx("p",{style:{margin:0,color:"var(--text-light)"},children:A?.userType==="Host"?"Browse accommodation requests from guests":"Create and manage your accommodation requests"})]}),A?.userType==="Guest"&&c.jsxs("button",{onClick:()=>u(!0),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(df,{size:20}),"Create Post"]})]}),c.jsx("div",{className:"posts-grid",style:{display:"grid",gap:"1.5rem"},children:i?c.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[c.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),c.jsx("p",{children:"Loading posts..."})]}):r.length===0?c.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[c.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),c.jsx("p",{children:"No posts available yet."})]}):r.map(Se=>c.jsxs("div",{className:"post-card",style:{background:"white",borderRadius:"var(--radius)",border:"1px solid var(--border)",padding:"1.5rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:[c.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[c.jsxs("div",{children:[c.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"var(--text)",fontSize:"1.25rem"},children:Se.title}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",color:"var(--text-light)",fontSize:"0.875rem"},children:[c.jsx("span",{children:Se.userName}),c.jsx("span",{children:""}),c.jsx("span",{children:Se.createdAt.toLocaleDateString()})]})]}),c.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:A&&A.userType==="Guest"&&c.jsxs("div",{style:{position:"relative"},children:[c.jsx("button",{onClick:Pe=>{Pe.stopPropagation(),se(B===Se.id?null:Se.id)},style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem",borderRadius:"0.25rem",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(jT,{size:16,color:"var(--text-light)"})}),B===Se.id&&c.jsxs("div",{style:{position:"absolute",top:"100%",right:0,background:"white",border:"1px solid var(--border)",borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:10,minWidth:"120px"},children:[c.jsxs("button",{onClick:()=>ue(Se),style:{width:"100%",padding:"0.5rem 0.75rem",border:"none",background:"none",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem"},children:[c.jsx(jv,{size:14}),"Edit"]}),c.jsxs("button",{onClick:()=>Ne(Se),style:{width:"100%",padding:"0.5rem 0.75rem",border:"none",background:"none",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:"#dc2626"},children:[c.jsx(ry,{size:14}),"Delete"]})]})]})})]}),c.jsx("p",{style:{margin:"0 0 1rem 0",color:"var(--text)",lineHeight:"1.6"},children:Se.content}),c.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",marginBottom:"1rem",fontSize:"0.875rem",color:"var(--text-light)"},children:[c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[c.jsx(_v,{size:16}),Se.location||"Location not specified"]}),Se.userType==="Guest"&&c.jsxs(c.Fragment,{children:[Se.planningDate&&c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[c.jsx(ty,{size:16}),new Date(Se.planningDate).toLocaleDateString()]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[c.jsx(Wr,{size:16}),Se.visitors," visitor",Se.visitors!==1?"s":""]}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[c.jsx(ty,{size:16}),Se.days," day",Se.days!==1?"s":""]})]}),Se.userType==="Host"&&c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[c.jsx(Wr,{size:16}),"Up to ",Se.maxGuests," guest",Se.maxGuests!==1?"s":""]})]}),Se.facilities&&Se.facilities.length>0&&c.jsx("div",{style:{marginBottom:"1rem"},children:c.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:Se.facilities.map(Pe=>c.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",background:"#f1f5f9",color:"var(--primary)",padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.75rem",fontWeight:"500"},children:[ie[Pe],Pe]},Pe))})}),A?.userType==="Host"&&c.jsx("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:c.jsxs("button",{onClick:Pe=>{Pe.stopPropagation(),console.log("Opening chat with:",{id:Se.userId,name:Se.userName}),me(null),setTimeout(()=>{me({id:Se.userId,name:Se.userName,imageUrl:null})},50)},className:"btn btn-primary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.75rem 1rem",fontSize:"0.9rem",fontWeight:"600"},children:[c.jsx(ms,{size:16}),"Contact Guest"]})})]},Se.id))}),l&&c.jsx(sv,{onClose:()=>u(!1),onSubmit:fe}),f&&y&&c.jsx(sv,{onClose:()=>{p(!1),E(null)},onSubmit:Re,initialData:y,isEditing:!0}),m&&I&&c.jsx("div",{className:"modal-overlay",onClick:()=>g(!1),children:c.jsxs("div",{className:"modal-content",onClick:Se=>Se.stopPropagation(),style:{maxWidth:"400px"},children:[c.jsx("div",{className:"modal-header",children:c.jsxs("h3",{style:{color:"#dc2626",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(ry,{size:20}),"Delete Post"]})}),c.jsxs("div",{className:"modal-body",children:[c.jsxs("p",{style:{margin:"0 0 1rem 0",color:"var(--text)"},children:["Are you sure you want to delete ",c.jsxs("strong",{children:['"',I.title,'"']}),"?"]}),c.jsx("p",{style:{margin:"0",color:"var(--text-light)",fontSize:"0.875rem"},children:"This action cannot be undone."})]}),c.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",padding:"1rem"},children:[c.jsx("button",{onClick:()=>g(!1),className:"btn btn-outline",style:{minWidth:"80px"},children:"Cancel"}),c.jsx("button",{onClick:xe,className:"btn",style:{minWidth:"80px",backgroundColor:"#dc2626",color:"white",border:"1px solid #dc2626"},children:"Delete"})]})]})}),le&&c.jsx("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,width:"350px",height:"500px",boxShadow:"0 10px 25px rgba(0,0,0,0.2)",borderRadius:"12px",overflow:"hidden",animation:"slideInUp 0.3s ease-out"},children:c.jsx(ql,{recipientId:le.id,recipientName:le.name,recipientImageUrl:le.imageUrl,onClose:()=>{console.log("Closing chat widget"),me(null)}})})]})},sv=({onClose:r,onSubmit:n,initialData:i=null,isEditing:o=!1})=>{const[l,u]=O.useState({title:i?.title||"",planningDate:i?.planningDate||"",state:i?.location?.split(", ")[1]||"",city:i?.location?.split(", ")[0]||"",facilities:i?.facilities||[],visitors:i?.visitors||1,days:i?.days||1,content:i?.content||""}),[f,p]=O.useState({}),[m,g]=O.useState({}),[y,E]=O.useState(!1);O.useEffect(()=>{(async()=>{try{console.log("Loading locations using locationService...");const B=await Bl.getLocations();console.log("Locations loaded successfully:",B),p(B)}catch(B){console.error("Failed to load locations:",B),p({"Tamil Nadu":["Chennai","Coimbatore","Madurai","Other"],Karnataka:["Bangalore","Mysore","Mangalore","Other"],Kerala:["Kochi","Thiruvananthapuram","Kozhikode","Other"],"Andhra Pradesh":["Hyderabad","Visakhapatnam","Vijayawada","Other"],Maharashtra:["Mumbai","Pune","Nagpur","Other"],Delhi:["New Delhi","Other"]})}})()},[]);const I=[{name:"WiFi",icon:""},{name:"Parking",icon:""},{name:"Meals",icon:""},{name:"AC",icon:""},{name:"Kitchen",icon:""},{name:"Laundry",icon:""}],F=async H=>{if(H.preventDefault(),y)return;const B={};if(l.title.trim()?l.title.trim().length<5&&(B.title="Title must be at least 5 characters long"):B.title="Title is required",l.state||(B.state="Please select a state"),l.city||(B.city="Please select a city"),l.planningDate){const se=new Date(l.planningDate),le=new Date;le.setHours(0,0,0,0),se<le&&(B.planningDate="Planning date should be today or in the future")}if((!l.visitors||l.visitors<1||l.visitors>10)&&(B.visitors="Visitors must be between 1 and 10"),(!l.days||l.days<1||l.days>30)&&(B.days="Days must be between 1 and 30"),l.content&&l.content.trim().length>0&&l.content.trim().length<10&&(B.content="Description should be at least 10 characters long"),g(B),Object.keys(B).length>0){const se=document.querySelector('.modern-input[style*="border-color: rgb(220, 38, 38)"], .modern-textarea[style*="border-color: rgb(220, 38, 38)"]');se&&(se.scrollIntoView({behavior:"smooth",block:"center"}),se.focus());return}try{E(!0);const se=`${l.city}, ${l.state}`,le={...l,location:se,visitors:parseInt(l.visitors),days:parseInt(l.days),content:l.content.trim()};await n(le)}catch(se){console.error("Error submitting post:",se);const le=se.response?.data?.message||se.message||"Failed to save post. Please try again.";alert(le)}finally{E(!1)}},A=H=>{u(B=>({...B,facilities:B.facilities.includes(H)?B.facilities.filter(se=>se!==H):[...B.facilities,H]}))};return c.jsx("div",{className:"modal-overlay",onClick:r,children:c.jsxs("div",{className:"create-post-modal",onClick:H=>H.stopPropagation(),children:[c.jsxs("div",{className:"modal-header-modern",children:[c.jsxs("div",{className:"modal-title-section",children:[c.jsx("div",{className:"modal-icon",children:""}),c.jsxs("div",{children:[c.jsx("h2",{children:o?"Edit Post":"Create New Post"}),c.jsx("p",{children:o?"Update your accommodation request":"Share your accommodation needs with hosts"})]})]}),c.jsx("button",{onClick:r,className:"modal-close-modern",children:""})]}),c.jsx("div",{className:"modal-body-modern",children:c.jsxs("form",{onSubmit:F,className:"modern-form",children:[c.jsxs("div",{className:"form-group-modern",children:[c.jsxs("label",{className:"modern-label",children:[c.jsx("span",{className:"label-text",children:"Title"}),c.jsx("span",{className:"required-star",children:"*"})]}),c.jsx("input",{type:"text",className:"modern-input",value:l.title,onChange:H=>{u(B=>({...B,title:H.target.value})),g(B=>({...B,title:!1}))},placeholder:"e.g., Looking for cozy stay during Diwali",required:!0,style:{borderColor:m.title?"#dc2626":"var(--border)"}}),m.title&&c.jsx("div",{style:{color:"#dc2626",fontSize:"0.875rem",marginTop:"0.25rem"},children:m.title})]}),c.jsxs("div",{className:"form-group-modern",children:[c.jsx("label",{className:"modern-label",children:c.jsx("span",{className:"label-text",children:"Planning Date"})}),c.jsx("input",{type:"date",className:"modern-input",value:l.planningDate,onChange:H=>{u(B=>({...B,planningDate:H.target.value})),g(B=>({...B,planningDate:!1}))},style:{borderColor:m.planningDate?"#dc2626":"var(--border)"},min:new Date().toISOString().split("T")[0]}),m.planningDate&&c.jsx("div",{style:{color:"#dc2626",fontSize:"0.875rem",marginTop:"0.25rem"},children:m.planningDate})]}),c.jsxs("div",{className:"form-group-modern",children:[c.jsxs("label",{className:"modern-label",children:[c.jsx("span",{className:"label-text",children:"Visiting State"}),c.jsx("span",{className:"required-star",children:"*"})]}),c.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginTop:"0.5rem"},children:Object.keys(f).map(H=>c.jsx("button",{type:"button",onClick:()=>{u(B=>({...B,state:H,city:""})),g(B=>({...B,state:!1,city:!1}))},style:{padding:"0.5rem 1rem",border:`1px solid ${m.state?"#dc2626":"var(--border)"}`,borderRadius:"0.375rem",background:l.state===H?"var(--primary)":"white",color:l.state===H?"white":"var(--text)",cursor:"pointer",fontSize:"0.875rem"},children:H},H))}),m.state&&c.jsx("div",{style:{color:"#dc2626",fontSize:"0.875rem",marginTop:"0.25rem"},children:m.state})]}),l.state&&c.jsxs("div",{className:"form-group-modern",children:[c.jsxs("label",{className:"modern-label",children:[c.jsx("span",{className:"label-text",children:"Visiting City"}),c.jsx("span",{className:"required-star",children:"*"})]}),c.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginTop:"0.5rem"},children:f[l.state]&&f[l.state].map(H=>c.jsx("button",{type:"button",onClick:()=>{u(B=>({...B,city:H})),g(B=>({...B,city:!1}))},style:{padding:"0.5rem 1rem",border:`1px solid ${m.city?"#dc2626":"var(--border)"}`,borderRadius:"0.375rem",background:l.city===H?"var(--primary)":"white",color:l.city===H?"white":"var(--text)",cursor:"pointer",fontSize:"0.875rem"},children:H},H))}),m.city&&c.jsx("div",{style:{color:"#dc2626",fontSize:"0.875rem",marginTop:"0.25rem"},children:m.city})]}),c.jsxs("div",{className:"form-group-modern",children:[c.jsx("label",{className:"modern-label",children:c.jsx("span",{className:"label-text",children:"Preferred Facilities"})}),c.jsx("div",{className:"facilities-compact",children:I.map(H=>c.jsxs("button",{type:"button",onClick:()=>A(H.name),className:`facility-btn-compact ${l.facilities.includes(H.name)?"selected":""}`,children:[c.jsx("span",{className:"facility-icon-small",children:H.icon}),c.jsx("span",{children:H.name})]},H.name))})]}),c.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[c.jsxs("div",{children:[c.jsx("label",{className:"modern-label",style:{marginBottom:"0.5rem",display:"block"},children:c.jsx("span",{className:"label-text",children:"Visitors"})}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx("button",{type:"button",onClick:()=>u(H=>({...H,visitors:Math.max(1,H.visitors-1)})),style:{width:"32px",height:"32px",border:"1px solid var(--border)",borderRadius:"0.375rem",background:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:""}),c.jsx("input",{type:"number",min:"1",max:"10",value:l.visitors,onChange:H=>u(B=>({...B,visitors:parseInt(H.target.value)||1})),style:{width:"60px",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",textAlign:"center"}}),c.jsx("button",{type:"button",onClick:()=>u(H=>({...H,visitors:Math.min(10,H.visitors+1)})),style:{width:"32px",height:"32px",border:"1px solid var(--border)",borderRadius:"0.375rem",background:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"modern-label",style:{marginBottom:"0.5rem",display:"block"},children:c.jsx("span",{className:"label-text",children:"Days"})}),c.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx("button",{type:"button",onClick:()=>u(H=>({...H,days:Math.max(1,H.days-1)})),style:{width:"32px",height:"32px",border:"1px solid var(--border)",borderRadius:"0.375rem",background:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:""}),c.jsx("input",{type:"number",min:"1",max:"30",value:l.days,onChange:H=>u(B=>({...B,days:parseInt(H.target.value)||1})),style:{width:"60px",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",textAlign:"center"}}),c.jsx("button",{type:"button",onClick:()=>u(H=>({...H,days:Math.min(30,H.days+1)})),style:{width:"32px",height:"32px",border:"1px solid var(--border)",borderRadius:"0.375rem",background:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"})]})]})]}),c.jsxs("div",{className:"form-group-modern",children:[c.jsx("label",{className:"modern-label",children:c.jsx("span",{className:"label-text",children:"Additional Details"})}),c.jsx("textarea",{className:"modern-textarea",value:l.content,onChange:H=>{u(B=>({...B,content:H.target.value})),g(B=>({...B,content:!1}))},placeholder:"Describe your accommodation needs, preferences, and any special requirements...",rows:4,style:{borderColor:m.content?"#dc2626":"var(--border)"}}),m.content&&c.jsx("div",{style:{color:"#dc2626",fontSize:"0.875rem",marginTop:"0.25rem"},children:m.content})]}),c.jsxs("div",{className:"form-actions",children:[c.jsx("button",{type:"button",onClick:r,className:"btn-secondary-modern",disabled:y,children:"Cancel"}),c.jsx("button",{type:"submit",className:"btn-primary-modern",disabled:y,children:y?c.jsxs(c.Fragment,{children:[c.jsx("span",{children:"Saving..."}),c.jsx("span",{className:"btn-icon",children:""})]}):c.jsxs(c.Fragment,{children:[c.jsx("span",{children:o?"Update Post":"Create Post"}),c.jsx("span",{className:"btn-icon",children:o?"":""})]})})]})]})})]})})},EO=()=>{const[r,n]=O.useState(!1),[i,o]=O.useState(null),[l,u]=O.useState(!0);O.useEffect(()=>{try{const F=localStorage.getItem("user");if(F){const A=JSON.parse(F);A&&A.token&&A.email&&(A.role||A.userType)&&o(A)}}catch{console.warn("Invalid user data in localStorage"),localStorage.removeItem("user")}},[]);const{unreadCount:f,clearUnreadCount:p}=mC(),m=Qn();O.useEffect(()=>{const F=setTimeout(()=>{u(!1)},3e3),A=()=>{try{const H=localStorage.getItem("user");if(H){const B=JSON.parse(H);B&&B.token&&B.email&&(B.role||B.userType)?o(B):o(null)}else o(null)}catch{console.warn("Invalid user data in localStorage"),localStorage.removeItem("user"),o(null)}};return window.addEventListener("storage",A),()=>{clearTimeout(F),window.removeEventListener("storage",A)}},[]);const g=F=>{const A=F?.role||F?.userType||F?.partitionKey;return A==="Host"?"/host-dashboard":A==="Guest"?"/guest-dashboard":A==="Admin"?"/admin":"/login"},y=()=>{window.confirm("Are you sure you want to logout?")&&(localStorage.clear(),o(null),n(!1),window.location.href="/")},E=()=>{p(),n(!1)},I=F=>F==="/dashboard"?m.pathname===g(i)||m.pathname==="/browse":m.pathname===F;return l?c.jsx(XR,{}):c.jsxs("div",{className:"app-container",style:{animation:"fadeIn 0.8s ease-out"},children:[c.jsxs("nav",{className:"navbar",children:[c.jsx(In,{to:"/",className:"nav-logo",onClick:()=>n(!1),children:c.jsx(YR,{className:"nav-logo-img",style:{height:"50px"}})}),c.jsx("button",{className:"menu-toggle",onClick:()=>n(!r),"aria-label":"Toggle menu",children:r?c.jsx(ff,{size:28}):c.jsx($T,{size:28})}),c.jsx("div",{className:`nav-links ${r?"mobile-open":""}`,children:i?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"user-badge",children:c.jsxs("span",{className:"user-badge-text",children:[c.jsx("strong",{children:i.name})," ",c.jsxs("span",{className:"user-badge-role",children:["(",i.role||i.userType||i.partitionKey,")"]})]})}),c.jsxs(In,{to:g(i),className:`nav-item ${I("/dashboard")?"active":""}`,onClick:()=>n(!1),children:[c.jsx(IT,{size:20})," Dashboard"]}),c.jsxs(In,{to:"/chats",className:`nav-item chat-nav-item ${I("/chats")?"active":""}`,onClick:E,children:[" Chats",f>0&&c.jsx("span",{className:`unread-badge ${f>9?"large-count":""}`,children:f>99?"99+":f})]}),c.jsx(In,{to:"/posts",className:`nav-item ${I("/posts")?"active":""}`,onClick:()=>n(!1),children:" Posts"}),c.jsxs(In,{to:"/profile",className:`nav-item ${I("/profile")?"active":""}`,onClick:()=>n(!1),children:[c.jsx(lC,{size:20})," Profile"]}),c.jsxs(In,{to:"/help",className:`nav-item ${I("/help")?"active":""}`,onClick:()=>n(!1),children:[c.jsx(Tl,{size:20})," Help"]}),(i.role==="Admin"||i.userType==="Admin")&&c.jsxs(In,{to:"/admin",className:`nav-item ${I("/admin")?"active":""}`,onClick:()=>n(!1),children:[c.jsx(tC,{size:20})," Admin"]}),c.jsxs("button",{onClick:y,className:"nav-item logout-btn",style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[c.jsx(LT,{size:20})," Logout"]})]}):c.jsxs(c.Fragment,{children:[c.jsxs(In,{to:"/help",className:"nav-item",onClick:()=>n(!1),children:[c.jsx(Tl,{size:20})," Help"]}),c.jsx(In,{to:"/login",className:"nav-item",onClick:()=>n(!1),children:"Login"}),c.jsx(In,{to:"/register",className:"nav-item btn btn-primary",style:{color:"white",padding:"0.5rem 1rem"},onClick:()=>n(!1),children:"Register"})]})})]}),c.jsx("main",{className:"content full-width",children:c.jsxs(O1,{children:[c.jsx(tn,{path:"/",element:c.jsx(PE,{user:i})}),c.jsx(tn,{path:"/login",element:i?c.jsx(Jn,{to:"/"}):c.jsx(IE,{setUser:o})}),c.jsx(tn,{path:"/register",element:i?c.jsx(Jn,{to:"/"}):c.jsx(zE,{setUser:o})}),c.jsx(tn,{path:"/browse",element:i?.role==="Guest"||i?.userType==="Guest"?c.jsx(Ry,{user:i}):c.jsx(Jn,{to:"/login"})}),c.jsx(tn,{path:"/guest-dashboard",element:i?.role==="Guest"||i?.userType==="Guest"?c.jsx(Ry,{user:i}):c.jsx(Jn,{to:"/login"})}),c.jsx(tn,{path:"/host-dashboard",element:i?.role==="Host"||i?.userType==="Host"?c.jsx(LE,{user:i}):c.jsx(Jn,{to:"/login"})}),c.jsx(tn,{path:"/chats",element:i?c.jsx(bO,{}):c.jsx(Jn,{to:"/login"})}),c.jsx(tn,{path:"/posts",element:i?c.jsx(RO,{}):c.jsx(Jn,{to:"/login"})}),c.jsx(tn,{path:"/profile",element:i?c.jsx(wO,{}):c.jsx(Jn,{to:"/login"})}),c.jsx(tn,{path:"/profile/:userName",element:c.jsx(xO,{})}),c.jsx(tn,{path:"/admin",element:i?.role==="Admin"||i?.userType==="Admin"?c.jsx(SO,{}):c.jsx(Jn,{to:"/login"})}),c.jsx(tn,{path:"/chat/:recipientId",element:i?c.jsx(vO,{user:i}):c.jsx(Jn,{to:"/login"})}),c.jsx(tn,{path:"/help",element:c.jsx(TO,{})}),c.jsx(tn,{path:"/api-test",element:c.jsx(KR,{})}),c.jsx(tn,{path:"/chat-debug",element:c.jsx(UE,{})})]})})]})};function _O(){return c.jsx(nT,{children:c.jsx(gC,{children:c.jsx(EO,{})})})}Dx.createRoot(document.getElementById("root")).render(c.jsx(O.StrictMode,{children:c.jsx(_O,{})}));
