(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function i(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(c){if(c.ep)return;c.ep=!0;const u=i(c);fetch(c.href,u)}})();var Bg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ml(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var n=r.default;if(typeof n=="function"){var i=function o(){var c=!1;try{c=this instanceof o}catch{}return c?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};i.prototype=n.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(r).forEach(function(o){var c=Object.getOwnPropertyDescriptor(r,o);Object.defineProperty(i,o,c.get?c:{enumerable:!0,get:function(){return r[o]}})}),i}var pd={exports:{}},wo={};var Hg;function kw(){if(Hg)return wo;Hg=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(o,c,u){var f=null;if(u!==void 0&&(f=""+u),c.key!==void 0&&(f=""+c.key),"key"in c){u={};for(var p in c)p!=="key"&&(u[p]=c[p])}else u=c;return c=u.ref,{$$typeof:r,type:o,key:f,ref:c!==void 0?c:null,props:u}}return wo.Fragment=n,wo.jsx=i,wo.jsxs=i,wo}var qg;function _w(){return qg||(qg=1,pd.exports=kw()),pd.exports}var a=_w(),md={exports:{}},We={};var $g;function Aw(){if($g)return We;$g=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),z=Symbol.iterator;function W(E){return E===null||typeof E!="object"?null:(E=z&&E[z]||E["@@iterator"],typeof E=="function"?E:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,D={};function le(E,I,C){this.props=E,this.context=I,this.refs=D,this.updater=C||U}le.prototype.isReactComponent={},le.prototype.setState=function(E,I){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,I,"setState")},le.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function se(){}se.prototype=le.prototype;function fe(E,I,C){this.props=E,this.context=I,this.refs=D,this.updater=C||U}var oe=fe.prototype=new se;oe.constructor=fe,B(oe,le.prototype),oe.isPureReactComponent=!0;var te=Array.isArray;function ce(){}var ne={H:null,A:null,T:null,S:null},Te=Object.prototype.hasOwnProperty;function Me(E,I,C){var j=C.ref;return{$$typeof:r,type:E,key:I,ref:j!==void 0?j:null,props:C}}function xe(E,I){return Me(E.type,I,E.props)}function Ue(E){return typeof E=="object"&&E!==null&&E.$$typeof===r}function He(E){var I={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(C){return I[C]})}var ke=/\/+/g;function Se(E,I){return typeof E=="object"&&E!==null&&E.key!=null?He(""+E.key):I.toString(36)}function Ie(E){switch(E.status){case"fulfilled":return E.value;case"rejected":throw E.reason;default:switch(typeof E.status=="string"?E.then(ce,ce):(E.status="pending",E.then(function(I){E.status==="pending"&&(E.status="fulfilled",E.value=I)},function(I){E.status==="pending"&&(E.status="rejected",E.reason=I)})),E.status){case"fulfilled":return E.value;case"rejected":throw E.reason}}throw E}function q(E,I,C,j,x){var T=typeof E;(T==="undefined"||T==="boolean")&&(E=null);var w=!1;if(E===null)w=!0;else switch(T){case"bigint":case"string":case"number":w=!0;break;case"object":switch(E.$$typeof){case r:case n:w=!0;break;case v:return w=E._init,q(w(E._payload),I,C,j,x)}}if(w)return x=x(E),w=j===""?"."+Se(E,0):j,te(x)?(C="",w!=null&&(C=w.replace(ke,"$&/")+"/"),q(x,I,C,"",function(_){return _})):x!=null&&(Ue(x)&&(x=xe(x,C+(x.key==null||E&&E.key===x.key?"":(""+x.key).replace(ke,"$&/")+"/")+w)),I.push(x)),1;w=0;var b=j===""?".":j+":";if(te(E))for(var R=0;R<E.length;R++)j=E[R],T=b+Se(j,R),w+=q(j,I,C,T,x);else if(R=W(E),typeof R=="function")for(E=R.call(E),R=0;!(j=E.next()).done;)j=j.value,T=b+Se(j,R++),w+=q(j,I,C,T,x);else if(T==="object"){if(typeof E.then=="function")return q(Ie(E),I,C,j,x);throw I=String(E),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return w}function P(E,I,C){if(E==null)return E;var j=[],x=0;return q(E,j,"","",function(T){return I.call(C,T,x++)}),j}function X(E){if(E._status===-1){var I=E._result;I=I(),I.then(function(C){(E._status===0||E._status===-1)&&(E._status=1,E._result=C)},function(C){(E._status===0||E._status===-1)&&(E._status=2,E._result=C)}),E._status===-1&&(E._status=0,E._result=I)}if(E._status===1)return E._result.default;throw E._result}var L=typeof reportError=="function"?reportError:function(E){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof E=="object"&&E!==null&&typeof E.message=="string"?String(E.message):String(E),error:E});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",E);return}console.error(E)},J={map:P,forEach:function(E,I,C){P(E,function(){I.apply(this,arguments)},C)},count:function(E){var I=0;return P(E,function(){I++}),I},toArray:function(E){return P(E,function(I){return I})||[]},only:function(E){if(!Ue(E))throw Error("React.Children.only expected to receive a single React element child.");return E}};return We.Activity=k,We.Children=J,We.Component=le,We.Fragment=i,We.Profiler=c,We.PureComponent=fe,We.StrictMode=o,We.Suspense=m,We.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ne,We.__COMPILER_RUNTIME={__proto__:null,c:function(E){return ne.H.useMemoCache(E)}},We.cache=function(E){return function(){return E.apply(null,arguments)}},We.cacheSignal=function(){return null},We.cloneElement=function(E,I,C){if(E==null)throw Error("The argument must be a React element, but you passed "+E+".");var j=B({},E.props),x=E.key;if(I!=null)for(T in I.key!==void 0&&(x=""+I.key),I)!Te.call(I,T)||T==="key"||T==="__self"||T==="__source"||T==="ref"&&I.ref===void 0||(j[T]=I[T]);var T=arguments.length-2;if(T===1)j.children=C;else if(1<T){for(var w=Array(T),b=0;b<T;b++)w[b]=arguments[b+2];j.children=w}return Me(E.type,x,j)},We.createContext=function(E){return E={$$typeof:f,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null},E.Provider=E,E.Consumer={$$typeof:u,_context:E},E},We.createElement=function(E,I,C){var j,x={},T=null;if(I!=null)for(j in I.key!==void 0&&(T=""+I.key),I)Te.call(I,j)&&j!=="key"&&j!=="__self"&&j!=="__source"&&(x[j]=I[j]);var w=arguments.length-2;if(w===1)x.children=C;else if(1<w){for(var b=Array(w),R=0;R<w;R++)b[R]=arguments[R+2];x.children=b}if(E&&E.defaultProps)for(j in w=E.defaultProps,w)x[j]===void 0&&(x[j]=w[j]);return Me(E,T,x)},We.createRef=function(){return{current:null}},We.forwardRef=function(E){return{$$typeof:p,render:E}},We.isValidElement=Ue,We.lazy=function(E){return{$$typeof:v,_payload:{_status:-1,_result:E},_init:X}},We.memo=function(E,I){return{$$typeof:g,type:E,compare:I===void 0?null:I}},We.startTransition=function(E){var I=ne.T,C={};ne.T=C;try{var j=E(),x=ne.S;x!==null&&x(C,j),typeof j=="object"&&j!==null&&typeof j.then=="function"&&j.then(ce,L)}catch(T){L(T)}finally{I!==null&&C.types!==null&&(I.types=C.types),ne.T=I}},We.unstable_useCacheRefresh=function(){return ne.H.useCacheRefresh()},We.use=function(E){return ne.H.use(E)},We.useActionState=function(E,I,C){return ne.H.useActionState(E,I,C)},We.useCallback=function(E,I){return ne.H.useCallback(E,I)},We.useContext=function(E){return ne.H.useContext(E)},We.useDebugValue=function(){},We.useDeferredValue=function(E,I){return ne.H.useDeferredValue(E,I)},We.useEffect=function(E,I){return ne.H.useEffect(E,I)},We.useEffectEvent=function(E){return ne.H.useEffectEvent(E)},We.useId=function(){return ne.H.useId()},We.useImperativeHandle=function(E,I,C){return ne.H.useImperativeHandle(E,I,C)},We.useInsertionEffect=function(E,I){return ne.H.useInsertionEffect(E,I)},We.useLayoutEffect=function(E,I){return ne.H.useLayoutEffect(E,I)},We.useMemo=function(E,I){return ne.H.useMemo(E,I)},We.useOptimistic=function(E,I){return ne.H.useOptimistic(E,I)},We.useReducer=function(E,I,C){return ne.H.useReducer(E,I,C)},We.useRef=function(E){return ne.H.useRef(E)},We.useState=function(E){return ne.H.useState(E)},We.useSyncExternalStore=function(E,I,C){return ne.H.useSyncExternalStore(E,I,C)},We.useTransition=function(){return ne.H.useTransition()},We.version="19.2.3",We}var Vg;function rf(){return Vg||(Vg=1,md.exports=Aw()),md.exports}var O=rf(),gd={exports:{}},Co={},yd={exports:{}},vd={};var Gg;function Nw(){return Gg||(Gg=1,(function(r){function n(q,P){var X=q.length;q.push(P);e:for(;0<X;){var L=X-1>>>1,J=q[L];if(0<c(J,P))q[L]=P,q[X]=J,X=L;else break e}}function i(q){return q.length===0?null:q[0]}function o(q){if(q.length===0)return null;var P=q[0],X=q.pop();if(X!==P){q[0]=X;e:for(var L=0,J=q.length,E=J>>>1;L<E;){var I=2*(L+1)-1,C=q[I],j=I+1,x=q[j];if(0>c(C,X))j<J&&0>c(x,C)?(q[L]=x,q[j]=X,L=j):(q[L]=C,q[I]=X,L=I);else if(j<J&&0>c(x,X))q[L]=x,q[j]=X,L=j;else break e}}return P}function c(q,P){var X=q.sortIndex-P.sortIndex;return X!==0?X:q.id-P.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();r.unstable_now=function(){return f.now()-p}}var m=[],g=[],v=1,k=null,z=3,W=!1,U=!1,B=!1,D=!1,le=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,fe=typeof setImmediate<"u"?setImmediate:null;function oe(q){for(var P=i(g);P!==null;){if(P.callback===null)o(g);else if(P.startTime<=q)o(g),P.sortIndex=P.expirationTime,n(m,P);else break;P=i(g)}}function te(q){if(B=!1,oe(q),!U)if(i(m)!==null)U=!0,ce||(ce=!0,He());else{var P=i(g);P!==null&&Ie(te,P.startTime-q)}}var ce=!1,ne=-1,Te=5,Me=-1;function xe(){return D?!0:!(r.unstable_now()-Me<Te)}function Ue(){if(D=!1,ce){var q=r.unstable_now();Me=q;var P=!0;try{e:{U=!1,B&&(B=!1,se(ne),ne=-1),W=!0;var X=z;try{t:{for(oe(q),k=i(m);k!==null&&!(k.expirationTime>q&&xe());){var L=k.callback;if(typeof L=="function"){k.callback=null,z=k.priorityLevel;var J=L(k.expirationTime<=q);if(q=r.unstable_now(),typeof J=="function"){k.callback=J,oe(q),P=!0;break t}k===i(m)&&o(m),oe(q)}else o(m);k=i(m)}if(k!==null)P=!0;else{var E=i(g);E!==null&&Ie(te,E.startTime-q),P=!1}}break e}finally{k=null,z=X,W=!1}P=void 0}}finally{P?He():ce=!1}}}var He;if(typeof fe=="function")He=function(){fe(Ue)};else if(typeof MessageChannel<"u"){var ke=new MessageChannel,Se=ke.port2;ke.port1.onmessage=Ue,He=function(){Se.postMessage(null)}}else He=function(){le(Ue,0)};function Ie(q,P){ne=le(function(){q(r.unstable_now())},P)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(q){q.callback=null},r.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Te=0<q?Math.floor(1e3/q):5},r.unstable_getCurrentPriorityLevel=function(){return z},r.unstable_next=function(q){switch(z){case 1:case 2:case 3:var P=3;break;default:P=z}var X=z;z=P;try{return q()}finally{z=X}},r.unstable_requestPaint=function(){D=!0},r.unstable_runWithPriority=function(q,P){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var X=z;z=q;try{return P()}finally{z=X}},r.unstable_scheduleCallback=function(q,P,X){var L=r.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?L+X:L):X=L,q){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=X+J,q={id:v++,callback:P,priorityLevel:q,startTime:X,expirationTime:J,sortIndex:-1},X>L?(q.sortIndex=X,n(g,q),i(m)===null&&q===i(g)&&(B?(se(ne),ne=-1):B=!0,Ie(te,X-L))):(q.sortIndex=J,n(m,q),U||W||(U=!0,ce||(ce=!0,He()))),q},r.unstable_shouldYield=xe,r.unstable_wrapCallback=function(q){var P=z;return function(){var X=z;z=P;try{return q.apply(this,arguments)}finally{z=X}}}})(vd)),vd}var Fg;function Ow(){return Fg||(Fg=1,yd.exports=Nw()),yd.exports}var bd={exports:{}},Kt={};var Yg;function Mw(){if(Yg)return Kt;Yg=1;var r=rf();function n(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(n(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},c=Symbol.for("react.portal");function u(m,g,v){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:k==null?null:""+k,children:m,containerInfo:g,implementation:v}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Kt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Kt.createPortal=function(m,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(n(299));return u(m,g,null,v)},Kt.flushSync=function(m){var g=f.T,v=o.p;try{if(f.T=null,o.p=2,m)return m()}finally{f.T=g,o.p=v,o.d.f()}},Kt.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,o.d.C(m,g))},Kt.prefetchDNS=function(m){typeof m=="string"&&o.d.D(m)},Kt.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var v=g.as,k=p(v,g.crossOrigin),z=typeof g.integrity=="string"?g.integrity:void 0,W=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?o.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:k,integrity:z,fetchPriority:W}):v==="script"&&o.d.X(m,{crossOrigin:k,integrity:z,fetchPriority:W,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Kt.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=p(g.as,g.crossOrigin);o.d.M(m,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&o.d.M(m)},Kt.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,k=p(v,g.crossOrigin);o.d.L(m,v,{crossOrigin:k,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Kt.preloadModule=function(m,g){if(typeof m=="string")if(g){var v=p(g.as,g.crossOrigin);o.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else o.d.m(m)},Kt.requestFormReset=function(m){o.d.r(m)},Kt.unstable_batchedUpdates=function(m,g){return m(g)},Kt.useFormState=function(m,g,v){return f.H.useFormState(m,g,v)},Kt.useFormStatus=function(){return f.H.useHostTransitionStatus()},Kt.version="19.2.3",Kt}var Wg;function Pw(){if(Wg)return bd.exports;Wg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),bd.exports=Mw(),bd.exports}var Xg;function Uw(){if(Xg)return Co;Xg=1;var r=Ow(),n=rf(),i=Pw();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(u(e)!==e)throw Error(o(188))}function g(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(o(188));return t!==e?null:e}for(var s=e,l=t;;){var d=s.return;if(d===null)break;var h=d.alternate;if(h===null){if(l=d.return,l!==null){s=l;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===s)return m(d),e;if(h===l)return m(d),t;h=h.sibling}throw Error(o(188))}if(s.return!==l.return)s=d,l=h;else{for(var S=!1,N=d.child;N;){if(N===s){S=!0,s=d,l=h;break}if(N===l){S=!0,l=d,s=h;break}N=N.sibling}if(!S){for(N=h.child;N;){if(N===s){S=!0,s=h,l=d;break}if(N===l){S=!0,l=h,s=d;break}N=N.sibling}if(!S)throw Error(o(189))}}if(s.alternate!==l)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var k=Object.assign,z=Symbol.for("react.element"),W=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),le=Symbol.for("react.profiler"),se=Symbol.for("react.consumer"),fe=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),te=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),ne=Symbol.for("react.memo"),Te=Symbol.for("react.lazy"),Me=Symbol.for("react.activity"),xe=Symbol.for("react.memo_cache_sentinel"),Ue=Symbol.iterator;function He(e){return e===null||typeof e!="object"?null:(e=Ue&&e[Ue]||e["@@iterator"],typeof e=="function"?e:null)}var ke=Symbol.for("react.client.reference");function Se(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===ke?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case B:return"Fragment";case le:return"Profiler";case D:return"StrictMode";case te:return"Suspense";case ce:return"SuspenseList";case Me:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case U:return"Portal";case fe:return e.displayName||"Context";case se:return(e._context.displayName||"Context")+".Consumer";case oe:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ne:return t=e.displayName||null,t!==null?t:Se(e.type)||"Memo";case Te:t=e._payload,e=e._init;try{return Se(e(t))}catch{}}return null}var Ie=Array.isArray,q=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},L=[],J=-1;function E(e){return{current:e}}function I(e){0>J||(e.current=L[J],L[J]=null,J--)}function C(e,t){J++,L[J]=e.current,e.current=t}var j=E(null),x=E(null),T=E(null),w=E(null);function b(e,t){switch(C(T,t),C(x,e),C(j,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?cg(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=cg(t),e=ug(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}I(j),C(j,e)}function R(){I(j),I(x),I(T)}function _(e){e.memoizedState!==null&&C(w,e);var t=j.current,s=ug(t,e.type);t!==s&&(C(x,e),C(j,s))}function V(e){x.current===e&&(I(j),I(x)),w.current===e&&(I(w),vo._currentValue=X)}var K,G;function H(e){if(K===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);K=t&&t[1]||"",G=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+K+e+G}var ue=!1;function ge(e,t){if(!e||ue)return"";ue=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var je=function(){throw Error()};if(Object.defineProperty(je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(je,[])}catch(be){var me=be}Reflect.construct(e,[],je)}else{try{je.call()}catch(be){me=be}e.call(je.prototype)}}else{try{throw Error()}catch(be){me=be}(je=e())&&typeof je.catch=="function"&&je.catch(function(){})}}catch(be){if(be&&me&&typeof be.stack=="string")return[be.stack,me.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=l.DetermineComponentFrameRoot(),S=h[0],N=h[1];if(S&&N){var Y=S.split(`
`),pe=N.split(`
`);for(d=l=0;l<Y.length&&!Y[l].includes("DetermineComponentFrameRoot");)l++;for(;d<pe.length&&!pe[d].includes("DetermineComponentFrameRoot");)d++;if(l===Y.length||d===pe.length)for(l=Y.length-1,d=pe.length-1;1<=l&&0<=d&&Y[l]!==pe[d];)d--;for(;1<=l&&0<=d;l--,d--)if(Y[l]!==pe[d]){if(l!==1||d!==1)do if(l--,d--,0>d||Y[l]!==pe[d]){var we=`
`+Y[l].replace(" at new "," at ");return e.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",e.displayName)),we}while(1<=l&&0<=d);break}}}finally{ue=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?H(s):""}function re(e,t){switch(e.tag){case 26:case 27:case 5:return H(e.type);case 16:return H("Lazy");case 13:return e.child!==t&&t!==null?H("Suspense Fallback"):H("Suspense");case 19:return H("SuspenseList");case 0:case 15:return ge(e.type,!1);case 11:return ge(e.type.render,!1);case 1:return ge(e.type,!0);case 31:return H("Activity");default:return""}}function Z(e){try{var t="",s=null;do t+=re(e,s),s=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var ae=Object.prototype.hasOwnProperty,Ee=r.unstable_scheduleCallback,Ae=r.unstable_cancelCallback,_e=r.unstable_shouldYield,Ne=r.unstable_requestPaint,$e=r.unstable_now,Qe=r.unstable_getCurrentPriorityLevel,M=r.unstable_ImmediatePriority,y=r.unstable_UserBlockingPriority,A=r.unstable_NormalPriority,F=r.unstable_LowPriority,$=r.unstable_IdlePriority,ee=r.log,de=r.unstable_setDisableYieldValue,ze=null,Oe=null;function Pe(e){if(typeof ee=="function"&&de(e),Oe&&typeof Oe.setStrictMode=="function")try{Oe.setStrictMode(ze,e)}catch{}}var ye=Math.clz32?Math.clz32:dt,Le=Math.log,Ye=Math.LN2;function dt(e){return e>>>=0,e===0?32:31-(Le(e)/Ye|0)|0}var vt=256,Hn=262144,qn=4194304;function ln(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function An(e,t,s){var l=e.pendingLanes;if(l===0)return 0;var d=0,h=e.suspendedLanes,S=e.pingedLanes;e=e.warmLanes;var N=l&134217727;return N!==0?(l=N&~h,l!==0?d=ln(l):(S&=N,S!==0?d=ln(S):s||(s=N&~e,s!==0&&(d=ln(s))))):(N=l&~h,N!==0?d=ln(N):S!==0?d=ln(S):s||(s=l&~e,s!==0&&(d=ln(s)))),d===0?0:t!==0&&t!==d&&(t&h)===0&&(h=d&-d,s=t&-t,h>=s||h===32&&(s&4194048)!==0)?t:d}function ii(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function mS(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vf(){var e=qn;return qn<<=1,(qn&62914560)===0&&(qn=4194304),e}function nc(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Ns(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function gS(e,t,s,l,d,h){var S=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var N=e.entanglements,Y=e.expirationTimes,pe=e.hiddenUpdates;for(s=S&~s;0<s;){var we=31-ye(s),je=1<<we;N[we]=0,Y[we]=-1;var me=pe[we];if(me!==null)for(pe[we]=null,we=0;we<me.length;we++){var be=me[we];be!==null&&(be.lane&=-536870913)}s&=~je}l!==0&&Gf(e,l,0),h!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=h&~(S&~t))}function Gf(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-ye(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|s&261930}function Ff(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var l=31-ye(s),d=1<<l;d&t|e[l]&t&&(e[l]|=t),s&=~d}}function Yf(e,t){var s=t&-t;return s=(s&42)!==0?1:rc(s),(s&(e.suspendedLanes|t))!==0?0:s}function rc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ic(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Wf(){var e=P.p;return e!==0?e:(e=window.event,e===void 0?32:Mg(e.type))}function Xf(e,t){var s=P.p;try{return P.p=e,t()}finally{P.p=s}}var Rr=Math.random().toString(36).slice(2),$t="__reactFiber$"+Rr,un="__reactProps$"+Rr,Oi="__reactContainer$"+Rr,sc="__reactEvents$"+Rr,yS="__reactListeners$"+Rr,vS="__reactHandles$"+Rr,Jf="__reactResources$"+Rr,Os="__reactMarker$"+Rr;function oc(e){delete e[$t],delete e[un],delete e[sc],delete e[yS],delete e[vS]}function Mi(e){var t=e[$t];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Oi]||s[$t]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=yg(e);e!==null;){if(s=e[$t])return s;e=yg(e)}return t}e=s,s=e.parentNode}return null}function Pi(e){if(e=e[$t]||e[Oi]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Ms(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function Ui(e){var t=e[Jf];return t||(t=e[Jf]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Lt(e){e[Os]=!0}var Kf=new Set,Qf={};function si(e,t){Di(e,t),Di(e+"Capture",t)}function Di(e,t){for(Qf[e]=t,e=0;e<t.length;e++)Kf.add(t[e])}var bS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zf={},eh={};function SS(e){return ae.call(eh,e)?!0:ae.call(Zf,e)?!1:bS.test(e)?eh[e]=!0:(Zf[e]=!0,!1)}function Yo(e,t,s){if(SS(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function Wo(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function ir(e,t,s,l){if(l===null)e.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+l)}}function Nn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function th(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function xS(e,t,s){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var d=l.get,h=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(S){s=""+S,h.call(this,S)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return s},setValue:function(S){s=""+S},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ac(e){if(!e._valueTracker){var t=th(e)?"checked":"value";e._valueTracker=xS(e,t,""+e[t])}}function nh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),l="";return e&&(l=th(e)?e.checked?"true":"false":e.value),e=l,e!==s?(t.setValue(e),!0):!1}function Xo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var wS=/[\n"\\]/g;function On(e){return e.replace(wS,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function lc(e,t,s,l,d,h,S,N){e.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.type=S:e.removeAttribute("type"),t!=null?S==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Nn(t)):e.value!==""+Nn(t)&&(e.value=""+Nn(t)):S!=="submit"&&S!=="reset"||e.removeAttribute("value"),t!=null?cc(e,S,Nn(t)):s!=null?cc(e,S,Nn(s)):l!=null&&e.removeAttribute("value"),d==null&&h!=null&&(e.defaultChecked=!!h),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?e.name=""+Nn(N):e.removeAttribute("name")}function rh(e,t,s,l,d,h,S,N){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||s!=null){if(!(h!=="submit"&&h!=="reset"||t!=null)){ac(e);return}s=s!=null?""+Nn(s):"",t=t!=null?""+Nn(t):s,N||t===e.value||(e.value=t),e.defaultValue=t}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=N?e.checked:!!l,e.defaultChecked=!!l,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(e.name=S),ac(e)}function cc(e,t,s){t==="number"&&Xo(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Ii(e,t,s,l){if(e=e.options,t){t={};for(var d=0;d<s.length;d++)t["$"+s[d]]=!0;for(s=0;s<e.length;s++)d=t.hasOwnProperty("$"+e[s].value),e[s].selected!==d&&(e[s].selected=d),d&&l&&(e[s].defaultSelected=!0)}else{for(s=""+Nn(s),t=null,d=0;d<e.length;d++){if(e[d].value===s){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function ih(e,t,s){if(t!=null&&(t=""+Nn(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+Nn(s):""}function sh(e,t,s,l){if(t==null){if(l!=null){if(s!=null)throw Error(o(92));if(Ie(l)){if(1<l.length)throw Error(o(93));l=l[0]}s=l}s==null&&(s=""),t=s}s=Nn(t),e.defaultValue=s,l=e.textContent,l===s&&l!==""&&l!==null&&(e.value=l),ac(e)}function zi(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var CS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function oh(e,t,s){var l=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,s):typeof s!="number"||s===0||CS.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function ah(e,t,s){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var d in t)l=t[d],t.hasOwnProperty(d)&&s[d]!==l&&oh(e,d,l)}else for(var h in t)t.hasOwnProperty(h)&&oh(e,h,t[h])}function uc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var TS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),RS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jo(e){return RS.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function sr(){}var dc=null;function fc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Li=null,Bi=null;function lh(e){var t=Pi(e);if(t&&(e=t.stateNode)){var s=e[un]||null;e:switch(e=t.stateNode,t.type){case"input":if(lc(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+On(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var l=s[t];if(l!==e&&l.form===e.form){var d=l[un]||null;if(!d)throw Error(o(90));lc(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(t=0;t<s.length;t++)l=s[t],l.form===e.form&&nh(l)}break e;case"textarea":ih(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&Ii(e,!!s.multiple,t,!1)}}}var hc=!1;function ch(e,t,s){if(hc)return e(t,s);hc=!0;try{var l=e(t);return l}finally{if(hc=!1,(Li!==null||Bi!==null)&&(Ia(),Li&&(t=Li,e=Bi,Bi=Li=null,lh(t),e)))for(t=0;t<e.length;t++)lh(e[t])}}function Ps(e,t){var s=e.stateNode;if(s===null)return null;var l=s[un]||null;if(l===null)return null;s=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(o(231,t,typeof s));return s}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),pc=!1;if(or)try{var Us={};Object.defineProperty(Us,"passive",{get:function(){pc=!0}}),window.addEventListener("test",Us,Us),window.removeEventListener("test",Us,Us)}catch{pc=!1}var jr=null,mc=null,Ko=null;function uh(){if(Ko)return Ko;var e,t=mc,s=t.length,l,d="value"in jr?jr.value:jr.textContent,h=d.length;for(e=0;e<s&&t[e]===d[e];e++);var S=s-e;for(l=1;l<=S&&t[s-l]===d[h-l];l++);return Ko=d.slice(e,1<l?1-l:void 0)}function Qo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zo(){return!0}function dh(){return!1}function dn(e){function t(s,l,d,h,S){this._reactName=s,this._targetInst=d,this.type=l,this.nativeEvent=h,this.target=S,this.currentTarget=null;for(var N in e)e.hasOwnProperty(N)&&(s=e[N],this[N]=s?s(h):h[N]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Zo:dh,this.isPropagationStopped=dh,this}return k(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Zo)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Zo)},persist:function(){},isPersistent:Zo}),t}var oi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ea=dn(oi),Ds=k({},oi,{view:0,detail:0}),jS=dn(Ds),gc,yc,Is,ta=k({},Ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Is&&(Is&&e.type==="mousemove"?(gc=e.screenX-Is.screenX,yc=e.screenY-Is.screenY):yc=gc=0,Is=e),gc)},movementY:function(e){return"movementY"in e?e.movementY:yc}}),fh=dn(ta),ES=k({},ta,{dataTransfer:0}),kS=dn(ES),_S=k({},Ds,{relatedTarget:0}),vc=dn(_S),AS=k({},oi,{animationName:0,elapsedTime:0,pseudoElement:0}),NS=dn(AS),OS=k({},oi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),MS=dn(OS),PS=k({},oi,{data:0}),hh=dn(PS),US={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},IS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=IS[e])?!!t[e]:!1}function bc(){return zS}var LS=k({},Ds,{key:function(e){if(e.key){var t=US[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Qo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?DS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bc,charCode:function(e){return e.type==="keypress"?Qo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),BS=dn(LS),HS=k({},ta,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ph=dn(HS),qS=k({},Ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bc}),$S=dn(qS),VS=k({},oi,{propertyName:0,elapsedTime:0,pseudoElement:0}),GS=dn(VS),FS=k({},ta,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),YS=dn(FS),WS=k({},oi,{newState:0,oldState:0}),XS=dn(WS),JS=[9,13,27,32],Sc=or&&"CompositionEvent"in window,zs=null;or&&"documentMode"in document&&(zs=document.documentMode);var KS=or&&"TextEvent"in window&&!zs,mh=or&&(!Sc||zs&&8<zs&&11>=zs),gh=" ",yh=!1;function vh(e,t){switch(e){case"keyup":return JS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hi=!1;function QS(e,t){switch(e){case"compositionend":return bh(t);case"keypress":return t.which!==32?null:(yh=!0,gh);case"textInput":return e=t.data,e===gh&&yh?null:e;default:return null}}function ZS(e,t){if(Hi)return e==="compositionend"||!Sc&&vh(e,t)?(e=uh(),Ko=mc=jr=null,Hi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return mh&&t.locale!=="ko"?null:t.data;default:return null}}var ex={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ex[e.type]:t==="textarea"}function xh(e,t,s,l){Li?Bi?Bi.push(l):Bi=[l]:Li=l,t=Va(t,"onChange"),0<t.length&&(s=new ea("onChange","change",null,s,l),e.push({event:s,listeners:t}))}var Ls=null,Bs=null;function tx(e){rg(e,0)}function na(e){var t=Ms(e);if(nh(t))return e}function wh(e,t){if(e==="change")return t}var Ch=!1;if(or){var xc;if(or){var wc="oninput"in document;if(!wc){var Th=document.createElement("div");Th.setAttribute("oninput","return;"),wc=typeof Th.oninput=="function"}xc=wc}else xc=!1;Ch=xc&&(!document.documentMode||9<document.documentMode)}function Rh(){Ls&&(Ls.detachEvent("onpropertychange",jh),Bs=Ls=null)}function jh(e){if(e.propertyName==="value"&&na(Bs)){var t=[];xh(t,Bs,e,fc(e)),ch(tx,t)}}function nx(e,t,s){e==="focusin"?(Rh(),Ls=t,Bs=s,Ls.attachEvent("onpropertychange",jh)):e==="focusout"&&Rh()}function rx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return na(Bs)}function ix(e,t){if(e==="click")return na(t)}function sx(e,t){if(e==="input"||e==="change")return na(t)}function ox(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Sn=typeof Object.is=="function"?Object.is:ox;function Hs(e,t){if(Sn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),l=Object.keys(t);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var d=s[l];if(!ae.call(t,d)||!Sn(e[d],t[d]))return!1}return!0}function Eh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function kh(e,t){var s=Eh(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=t&&l>=t)return{node:s,offset:t-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Eh(s)}}function _h(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?_h(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ah(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Xo(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Xo(e.document)}return t}function Cc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var ax=or&&"documentMode"in document&&11>=document.documentMode,qi=null,Tc=null,qs=null,Rc=!1;function Nh(e,t,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Rc||qi==null||qi!==Xo(l)||(l=qi,"selectionStart"in l&&Cc(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),qs&&Hs(qs,l)||(qs=l,l=Va(Tc,"onSelect"),0<l.length&&(t=new ea("onSelect","select",null,t,s),e.push({event:t,listeners:l}),t.target=qi)))}function ai(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var $i={animationend:ai("Animation","AnimationEnd"),animationiteration:ai("Animation","AnimationIteration"),animationstart:ai("Animation","AnimationStart"),transitionrun:ai("Transition","TransitionRun"),transitionstart:ai("Transition","TransitionStart"),transitioncancel:ai("Transition","TransitionCancel"),transitionend:ai("Transition","TransitionEnd")},jc={},Oh={};or&&(Oh=document.createElement("div").style,"AnimationEvent"in window||(delete $i.animationend.animation,delete $i.animationiteration.animation,delete $i.animationstart.animation),"TransitionEvent"in window||delete $i.transitionend.transition);function li(e){if(jc[e])return jc[e];if(!$i[e])return e;var t=$i[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Oh)return jc[e]=t[s];return e}var Mh=li("animationend"),Ph=li("animationiteration"),Uh=li("animationstart"),lx=li("transitionrun"),cx=li("transitionstart"),ux=li("transitioncancel"),Dh=li("transitionend"),Ih=new Map,Ec="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ec.push("scrollEnd");function $n(e,t){Ih.set(e,t),si(t,[e])}var ra=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Mn=[],Vi=0,kc=0;function ia(){for(var e=Vi,t=kc=Vi=0;t<e;){var s=Mn[t];Mn[t++]=null;var l=Mn[t];Mn[t++]=null;var d=Mn[t];Mn[t++]=null;var h=Mn[t];if(Mn[t++]=null,l!==null&&d!==null){var S=l.pending;S===null?d.next=d:(d.next=S.next,S.next=d),l.pending=d}h!==0&&zh(s,d,h)}}function sa(e,t,s,l){Mn[Vi++]=e,Mn[Vi++]=t,Mn[Vi++]=s,Mn[Vi++]=l,kc|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function _c(e,t,s,l){return sa(e,t,s,l),oa(e)}function ci(e,t){return sa(e,null,null,t),oa(e)}function zh(e,t,s){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s);for(var d=!1,h=e.return;h!==null;)h.childLanes|=s,l=h.alternate,l!==null&&(l.childLanes|=s),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(d=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,d&&t!==null&&(d=31-ye(s),e=h.hiddenUpdates,l=e[d],l===null?e[d]=[t]:l.push(t),t.lane=s|536870912),h):null}function oa(e){if(50<uo)throw uo=0,zu=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Gi={};function dx(e,t,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(e,t,s,l){return new dx(e,t,s,l)}function Ac(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ar(e,t){var s=e.alternate;return s===null?(s=xn(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function Lh(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function aa(e,t,s,l,d,h){var S=0;if(l=e,typeof e=="function")Ac(e)&&(S=1);else if(typeof e=="string")S=gw(e,s,j.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Me:return e=xn(31,s,t,d),e.elementType=Me,e.lanes=h,e;case B:return ui(s.children,d,h,t);case D:S=8,d|=24;break;case le:return e=xn(12,s,t,d|2),e.elementType=le,e.lanes=h,e;case te:return e=xn(13,s,t,d),e.elementType=te,e.lanes=h,e;case ce:return e=xn(19,s,t,d),e.elementType=ce,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case fe:S=10;break e;case se:S=9;break e;case oe:S=11;break e;case ne:S=14;break e;case Te:S=16,l=null;break e}S=29,s=Error(o(130,e===null?"null":typeof e,"")),l=null}return t=xn(S,s,t,d),t.elementType=e,t.type=l,t.lanes=h,t}function ui(e,t,s,l){return e=xn(7,e,l,t),e.lanes=s,e}function Nc(e,t,s){return e=xn(6,e,null,t),e.lanes=s,e}function Bh(e){var t=xn(18,null,null,0);return t.stateNode=e,t}function Oc(e,t,s){return t=xn(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hh=new WeakMap;function Pn(e,t){if(typeof e=="object"&&e!==null){var s=Hh.get(e);return s!==void 0?s:(t={value:e,source:t,stack:Z(t)},Hh.set(e,t),t)}return{value:e,source:t,stack:Z(t)}}var Fi=[],Yi=0,la=null,$s=0,Un=[],Dn=0,Er=null,Jn=1,Kn="";function lr(e,t){Fi[Yi++]=$s,Fi[Yi++]=la,la=e,$s=t}function qh(e,t,s){Un[Dn++]=Jn,Un[Dn++]=Kn,Un[Dn++]=Er,Er=e;var l=Jn;e=Kn;var d=32-ye(l)-1;l&=~(1<<d),s+=1;var h=32-ye(t)+d;if(30<h){var S=d-d%5;h=(l&(1<<S)-1).toString(32),l>>=S,d-=S,Jn=1<<32-ye(t)+d|s<<d|l,Kn=h+e}else Jn=1<<h|s<<d|l,Kn=e}function Mc(e){e.return!==null&&(lr(e,1),qh(e,1,0))}function Pc(e){for(;e===la;)la=Fi[--Yi],Fi[Yi]=null,$s=Fi[--Yi],Fi[Yi]=null;for(;e===Er;)Er=Un[--Dn],Un[Dn]=null,Kn=Un[--Dn],Un[Dn]=null,Jn=Un[--Dn],Un[Dn]=null}function $h(e,t){Un[Dn++]=Jn,Un[Dn++]=Kn,Un[Dn++]=Er,Jn=t.id,Kn=t.overflow,Er=e}var Vt=null,St=null,st=!1,kr=null,In=!1,Uc=Error(o(519));function _r(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Vs(Pn(t,e)),Uc}function Vh(e){var t=e.stateNode,s=e.type,l=e.memoizedProps;switch(t[$t]=e,t[un]=l,s){case"dialog":tt("cancel",t),tt("close",t);break;case"iframe":case"object":case"embed":tt("load",t);break;case"video":case"audio":for(s=0;s<ho.length;s++)tt(ho[s],t);break;case"source":tt("error",t);break;case"img":case"image":case"link":tt("error",t),tt("load",t);break;case"details":tt("toggle",t);break;case"input":tt("invalid",t),rh(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":tt("invalid",t);break;case"textarea":tt("invalid",t),sh(t,l.value,l.defaultValue,l.children)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||l.suppressHydrationWarning===!0||ag(t.textContent,s)?(l.popover!=null&&(tt("beforetoggle",t),tt("toggle",t)),l.onScroll!=null&&tt("scroll",t),l.onScrollEnd!=null&&tt("scrollend",t),l.onClick!=null&&(t.onclick=sr),t=!0):t=!1,t||_r(e,!0)}function Gh(e){for(Vt=e.return;Vt;)switch(Vt.tag){case 5:case 31:case 13:In=!1;return;case 27:case 3:In=!0;return;default:Vt=Vt.return}}function Wi(e){if(e!==Vt)return!1;if(!st)return Gh(e),st=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Zu(e.type,e.memoizedProps)),s=!s),s&&St&&_r(e),Gh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));St=gg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));St=gg(e)}else t===27?(t=St,$r(e.type)?(e=id,id=null,St=e):St=t):St=Vt?Ln(e.stateNode.nextSibling):null;return!0}function di(){St=Vt=null,st=!1}function Dc(){var e=kr;return e!==null&&(mn===null?mn=e:mn.push.apply(mn,e),kr=null),e}function Vs(e){kr===null?kr=[e]:kr.push(e)}var Ic=E(null),fi=null,cr=null;function Ar(e,t,s){C(Ic,t._currentValue),t._currentValue=s}function ur(e){e._currentValue=Ic.current,I(Ic)}function zc(e,t,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===s)break;e=e.return}}function Lc(e,t,s,l){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var h=d.dependencies;if(h!==null){var S=d.child;h=h.firstContext;e:for(;h!==null;){var N=h;h=d;for(var Y=0;Y<t.length;Y++)if(N.context===t[Y]){h.lanes|=s,N=h.alternate,N!==null&&(N.lanes|=s),zc(h.return,s,e),l||(S=null);break e}h=N.next}}else if(d.tag===18){if(S=d.return,S===null)throw Error(o(341));S.lanes|=s,h=S.alternate,h!==null&&(h.lanes|=s),zc(S,s,e),S=null}else S=d.child;if(S!==null)S.return=d;else for(S=d;S!==null;){if(S===e){S=null;break}if(d=S.sibling,d!==null){d.return=S.return,S=d;break}S=S.return}d=S}}function Xi(e,t,s,l){e=null;for(var d=t,h=!1;d!==null;){if(!h){if((d.flags&524288)!==0)h=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var S=d.alternate;if(S===null)throw Error(o(387));if(S=S.memoizedProps,S!==null){var N=d.type;Sn(d.pendingProps.value,S.value)||(e!==null?e.push(N):e=[N])}}else if(d===w.current){if(S=d.alternate,S===null)throw Error(o(387));S.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(vo):e=[vo])}d=d.return}e!==null&&Lc(t,e,s,l),t.flags|=262144}function ca(e){for(e=e.firstContext;e!==null;){if(!Sn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function hi(e){fi=e,cr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Gt(e){return Fh(fi,e)}function ua(e,t){return fi===null&&hi(e),Fh(e,t)}function Fh(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},cr===null){if(e===null)throw Error(o(308));cr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else cr=cr.next=t;return s}var fx=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},hx=r.unstable_scheduleCallback,px=r.unstable_NormalPriority,At={$$typeof:fe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bc(){return{controller:new fx,data:new Map,refCount:0}}function Gs(e){e.refCount--,e.refCount===0&&hx(px,function(){e.controller.abort()})}var Fs=null,Hc=0,Ji=0,Ki=null;function mx(e,t){if(Fs===null){var s=Fs=[];Hc=0,Ji=Vu(),Ki={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Hc++,t.then(Yh,Yh),t}function Yh(){if(--Hc===0&&Fs!==null){Ki!==null&&(Ki.status="fulfilled");var e=Fs;Fs=null,Ji=0,Ki=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function gx(e,t){var s=[],l={status:"pending",value:null,reason:null,then:function(d){s.push(d)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var d=0;d<s.length;d++)(0,s[d])(t)},function(d){for(l.status="rejected",l.reason=d,d=0;d<s.length;d++)(0,s[d])(void 0)}),l}var Wh=q.S;q.S=function(e,t){Nm=$e(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&mx(e,t),Wh!==null&&Wh(e,t)};var pi=E(null);function qc(){var e=pi.current;return e!==null?e:yt.pooledCache}function da(e,t){t===null?C(pi,pi.current):C(pi,t.pool)}function Xh(){var e=qc();return e===null?null:{parent:At._currentValue,pool:e}}var Qi=Error(o(460)),$c=Error(o(474)),fa=Error(o(542)),ha={then:function(){}};function Jh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Kh(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(sr,sr),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Zh(e),e;default:if(typeof t.status=="string")t.then(sr,sr);else{if(e=yt,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var d=t;d.status="fulfilled",d.value=l}},function(l){if(t.status==="pending"){var d=t;d.status="rejected",d.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Zh(e),e}throw gi=t,Qi}}function mi(e){try{var t=e._init;return t(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(gi=s,Qi):s}}var gi=null;function Qh(){if(gi===null)throw Error(o(459));var e=gi;return gi=null,e}function Zh(e){if(e===Qi||e===fa)throw Error(o(483))}var Zi=null,Ys=0;function pa(e){var t=Ys;return Ys+=1,Zi===null&&(Zi=[]),Kh(Zi,e,t)}function Ws(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ma(e,t){throw t.$$typeof===z?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function ep(e){function t(ie,Q){if(e){var he=ie.deletions;he===null?(ie.deletions=[Q],ie.flags|=16):he.push(Q)}}function s(ie,Q){if(!e)return null;for(;Q!==null;)t(ie,Q),Q=Q.sibling;return null}function l(ie){for(var Q=new Map;ie!==null;)ie.key!==null?Q.set(ie.key,ie):Q.set(ie.index,ie),ie=ie.sibling;return Q}function d(ie,Q){return ie=ar(ie,Q),ie.index=0,ie.sibling=null,ie}function h(ie,Q,he){return ie.index=he,e?(he=ie.alternate,he!==null?(he=he.index,he<Q?(ie.flags|=67108866,Q):he):(ie.flags|=67108866,Q)):(ie.flags|=1048576,Q)}function S(ie){return e&&ie.alternate===null&&(ie.flags|=67108866),ie}function N(ie,Q,he,Ce){return Q===null||Q.tag!==6?(Q=Nc(he,ie.mode,Ce),Q.return=ie,Q):(Q=d(Q,he),Q.return=ie,Q)}function Y(ie,Q,he,Ce){var Ve=he.type;return Ve===B?we(ie,Q,he.props.children,Ce,he.key):Q!==null&&(Q.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===Te&&mi(Ve)===Q.type)?(Q=d(Q,he.props),Ws(Q,he),Q.return=ie,Q):(Q=aa(he.type,he.key,he.props,null,ie.mode,Ce),Ws(Q,he),Q.return=ie,Q)}function pe(ie,Q,he,Ce){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==he.containerInfo||Q.stateNode.implementation!==he.implementation?(Q=Oc(he,ie.mode,Ce),Q.return=ie,Q):(Q=d(Q,he.children||[]),Q.return=ie,Q)}function we(ie,Q,he,Ce,Ve){return Q===null||Q.tag!==7?(Q=ui(he,ie.mode,Ce,Ve),Q.return=ie,Q):(Q=d(Q,he),Q.return=ie,Q)}function je(ie,Q,he){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=Nc(""+Q,ie.mode,he),Q.return=ie,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case W:return he=aa(Q.type,Q.key,Q.props,null,ie.mode,he),Ws(he,Q),he.return=ie,he;case U:return Q=Oc(Q,ie.mode,he),Q.return=ie,Q;case Te:return Q=mi(Q),je(ie,Q,he)}if(Ie(Q)||He(Q))return Q=ui(Q,ie.mode,he,null),Q.return=ie,Q;if(typeof Q.then=="function")return je(ie,pa(Q),he);if(Q.$$typeof===fe)return je(ie,ua(ie,Q),he);ma(ie,Q)}return null}function me(ie,Q,he,Ce){var Ve=Q!==null?Q.key:null;if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return Ve!==null?null:N(ie,Q,""+he,Ce);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case W:return he.key===Ve?Y(ie,Q,he,Ce):null;case U:return he.key===Ve?pe(ie,Q,he,Ce):null;case Te:return he=mi(he),me(ie,Q,he,Ce)}if(Ie(he)||He(he))return Ve!==null?null:we(ie,Q,he,Ce,null);if(typeof he.then=="function")return me(ie,Q,pa(he),Ce);if(he.$$typeof===fe)return me(ie,Q,ua(ie,he),Ce);ma(ie,he)}return null}function be(ie,Q,he,Ce,Ve){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number"||typeof Ce=="bigint")return ie=ie.get(he)||null,N(Q,ie,""+Ce,Ve);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case W:return ie=ie.get(Ce.key===null?he:Ce.key)||null,Y(Q,ie,Ce,Ve);case U:return ie=ie.get(Ce.key===null?he:Ce.key)||null,pe(Q,ie,Ce,Ve);case Te:return Ce=mi(Ce),be(ie,Q,he,Ce,Ve)}if(Ie(Ce)||He(Ce))return ie=ie.get(he)||null,we(Q,ie,Ce,Ve,null);if(typeof Ce.then=="function")return be(ie,Q,he,pa(Ce),Ve);if(Ce.$$typeof===fe)return be(ie,Q,he,ua(Q,Ce),Ve);ma(Q,Ce)}return null}function Be(ie,Q,he,Ce){for(var Ve=null,at=null,qe=Q,Ze=Q=0,it=null;qe!==null&&Ze<he.length;Ze++){qe.index>Ze?(it=qe,qe=null):it=qe.sibling;var lt=me(ie,qe,he[Ze],Ce);if(lt===null){qe===null&&(qe=it);break}e&&qe&&lt.alternate===null&&t(ie,qe),Q=h(lt,Q,Ze),at===null?Ve=lt:at.sibling=lt,at=lt,qe=it}if(Ze===he.length)return s(ie,qe),st&&lr(ie,Ze),Ve;if(qe===null){for(;Ze<he.length;Ze++)qe=je(ie,he[Ze],Ce),qe!==null&&(Q=h(qe,Q,Ze),at===null?Ve=qe:at.sibling=qe,at=qe);return st&&lr(ie,Ze),Ve}for(qe=l(qe);Ze<he.length;Ze++)it=be(qe,ie,Ze,he[Ze],Ce),it!==null&&(e&&it.alternate!==null&&qe.delete(it.key===null?Ze:it.key),Q=h(it,Q,Ze),at===null?Ve=it:at.sibling=it,at=it);return e&&qe.forEach(function(Wr){return t(ie,Wr)}),st&&lr(ie,Ze),Ve}function Fe(ie,Q,he,Ce){if(he==null)throw Error(o(151));for(var Ve=null,at=null,qe=Q,Ze=Q=0,it=null,lt=he.next();qe!==null&&!lt.done;Ze++,lt=he.next()){qe.index>Ze?(it=qe,qe=null):it=qe.sibling;var Wr=me(ie,qe,lt.value,Ce);if(Wr===null){qe===null&&(qe=it);break}e&&qe&&Wr.alternate===null&&t(ie,qe),Q=h(Wr,Q,Ze),at===null?Ve=Wr:at.sibling=Wr,at=Wr,qe=it}if(lt.done)return s(ie,qe),st&&lr(ie,Ze),Ve;if(qe===null){for(;!lt.done;Ze++,lt=he.next())lt=je(ie,lt.value,Ce),lt!==null&&(Q=h(lt,Q,Ze),at===null?Ve=lt:at.sibling=lt,at=lt);return st&&lr(ie,Ze),Ve}for(qe=l(qe);!lt.done;Ze++,lt=he.next())lt=be(qe,ie,Ze,lt.value,Ce),lt!==null&&(e&&lt.alternate!==null&&qe.delete(lt.key===null?Ze:lt.key),Q=h(lt,Q,Ze),at===null?Ve=lt:at.sibling=lt,at=lt);return e&&qe.forEach(function(Ew){return t(ie,Ew)}),st&&lr(ie,Ze),Ve}function gt(ie,Q,he,Ce){if(typeof he=="object"&&he!==null&&he.type===B&&he.key===null&&(he=he.props.children),typeof he=="object"&&he!==null){switch(he.$$typeof){case W:e:{for(var Ve=he.key;Q!==null;){if(Q.key===Ve){if(Ve=he.type,Ve===B){if(Q.tag===7){s(ie,Q.sibling),Ce=d(Q,he.props.children),Ce.return=ie,ie=Ce;break e}}else if(Q.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===Te&&mi(Ve)===Q.type){s(ie,Q.sibling),Ce=d(Q,he.props),Ws(Ce,he),Ce.return=ie,ie=Ce;break e}s(ie,Q);break}else t(ie,Q);Q=Q.sibling}he.type===B?(Ce=ui(he.props.children,ie.mode,Ce,he.key),Ce.return=ie,ie=Ce):(Ce=aa(he.type,he.key,he.props,null,ie.mode,Ce),Ws(Ce,he),Ce.return=ie,ie=Ce)}return S(ie);case U:e:{for(Ve=he.key;Q!==null;){if(Q.key===Ve)if(Q.tag===4&&Q.stateNode.containerInfo===he.containerInfo&&Q.stateNode.implementation===he.implementation){s(ie,Q.sibling),Ce=d(Q,he.children||[]),Ce.return=ie,ie=Ce;break e}else{s(ie,Q);break}else t(ie,Q);Q=Q.sibling}Ce=Oc(he,ie.mode,Ce),Ce.return=ie,ie=Ce}return S(ie);case Te:return he=mi(he),gt(ie,Q,he,Ce)}if(Ie(he))return Be(ie,Q,he,Ce);if(He(he)){if(Ve=He(he),typeof Ve!="function")throw Error(o(150));return he=Ve.call(he),Fe(ie,Q,he,Ce)}if(typeof he.then=="function")return gt(ie,Q,pa(he),Ce);if(he.$$typeof===fe)return gt(ie,Q,ua(ie,he),Ce);ma(ie,he)}return typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint"?(he=""+he,Q!==null&&Q.tag===6?(s(ie,Q.sibling),Ce=d(Q,he),Ce.return=ie,ie=Ce):(s(ie,Q),Ce=Nc(he,ie.mode,Ce),Ce.return=ie,ie=Ce),S(ie)):s(ie,Q)}return function(ie,Q,he,Ce){try{Ys=0;var Ve=gt(ie,Q,he,Ce);return Zi=null,Ve}catch(qe){if(qe===Qi||qe===fa)throw qe;var at=xn(29,qe,null,ie.mode);return at.lanes=Ce,at.return=ie,at}}}var yi=ep(!0),tp=ep(!1),Nr=!1;function Vc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Or(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Mr(e,t,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(ut&2)!==0){var d=l.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),l.pending=t,t=oa(e),zh(e,null,s),t}return sa(e,l,t,s),oa(e)}function Xs(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,Ff(e,s)}}function Fc(e,t){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var d=null,h=null;if(s=s.firstBaseUpdate,s!==null){do{var S={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};h===null?d=h=S:h=h.next=S,s=s.next}while(s!==null);h===null?d=h=t:h=h.next=t}else d=h=t;s={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:l.shared,callbacks:l.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var Yc=!1;function Js(){if(Yc){var e=Ki;if(e!==null)throw e}}function Ks(e,t,s,l){Yc=!1;var d=e.updateQueue;Nr=!1;var h=d.firstBaseUpdate,S=d.lastBaseUpdate,N=d.shared.pending;if(N!==null){d.shared.pending=null;var Y=N,pe=Y.next;Y.next=null,S===null?h=pe:S.next=pe,S=Y;var we=e.alternate;we!==null&&(we=we.updateQueue,N=we.lastBaseUpdate,N!==S&&(N===null?we.firstBaseUpdate=pe:N.next=pe,we.lastBaseUpdate=Y))}if(h!==null){var je=d.baseState;S=0,we=pe=Y=null,N=h;do{var me=N.lane&-536870913,be=me!==N.lane;if(be?(rt&me)===me:(l&me)===me){me!==0&&me===Ji&&(Yc=!0),we!==null&&(we=we.next={lane:0,tag:N.tag,payload:N.payload,callback:null,next:null});e:{var Be=e,Fe=N;me=t;var gt=s;switch(Fe.tag){case 1:if(Be=Fe.payload,typeof Be=="function"){je=Be.call(gt,je,me);break e}je=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=Fe.payload,me=typeof Be=="function"?Be.call(gt,je,me):Be,me==null)break e;je=k({},je,me);break e;case 2:Nr=!0}}me=N.callback,me!==null&&(e.flags|=64,be&&(e.flags|=8192),be=d.callbacks,be===null?d.callbacks=[me]:be.push(me))}else be={lane:me,tag:N.tag,payload:N.payload,callback:N.callback,next:null},we===null?(pe=we=be,Y=je):we=we.next=be,S|=me;if(N=N.next,N===null){if(N=d.shared.pending,N===null)break;be=N,N=be.next,be.next=null,d.lastBaseUpdate=be,d.shared.pending=null}}while(!0);we===null&&(Y=je),d.baseState=Y,d.firstBaseUpdate=pe,d.lastBaseUpdate=we,h===null&&(d.shared.lanes=0),zr|=S,e.lanes=S,e.memoizedState=je}}function np(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function rp(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)np(s[e],t)}var es=E(null),ga=E(0);function ip(e,t){e=br,C(ga,e),C(es,t),br=e|t.baseLanes}function Wc(){C(ga,br),C(es,es.current)}function Xc(){br=ga.current,I(es),I(ga)}var wn=E(null),zn=null;function Pr(e){var t=e.alternate;C(Et,Et.current&1),C(wn,e),zn===null&&(t===null||es.current!==null||t.memoizedState!==null)&&(zn=e)}function Jc(e){C(Et,Et.current),C(wn,e),zn===null&&(zn=e)}function sp(e){e.tag===22?(C(Et,Et.current),C(wn,e),zn===null&&(zn=e)):Ur()}function Ur(){C(Et,Et.current),C(wn,wn.current)}function Cn(e){I(wn),zn===e&&(zn=null),I(Et)}var Et=E(0);function ya(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||nd(s)||rd(s)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var dr=0,Je=null,pt=null,Nt=null,va=!1,ts=!1,vi=!1,ba=0,Qs=0,ns=null,yx=0;function Rt(){throw Error(o(321))}function Kc(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Sn(e[s],t[s]))return!1;return!0}function Qc(e,t,s,l,d,h){return dr=h,Je=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,q.H=e===null||e.memoizedState===null?qp:hu,vi=!1,h=s(l,d),vi=!1,ts&&(h=ap(t,s,l,d)),op(e),h}function op(e){q.H=to;var t=pt!==null&&pt.next!==null;if(dr=0,Nt=pt=Je=null,va=!1,Qs=0,ns=null,t)throw Error(o(300));e===null||Ot||(e=e.dependencies,e!==null&&ca(e)&&(Ot=!0))}function ap(e,t,s,l){Je=e;var d=0;do{if(ts&&(ns=null),Qs=0,ts=!1,25<=d)throw Error(o(301));if(d+=1,Nt=pt=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}q.H=$p,h=t(s,l)}while(ts);return h}function vx(){var e=q.H,t=e.useState()[0];return t=typeof t.then=="function"?Zs(t):t,e=e.useState()[0],(pt!==null?pt.memoizedState:null)!==e&&(Je.flags|=1024),t}function Zc(){var e=ba!==0;return ba=0,e}function eu(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function tu(e){if(va){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}va=!1}dr=0,Nt=pt=Je=null,ts=!1,Qs=ba=0,ns=null}function cn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Je.memoizedState=Nt=e:Nt=Nt.next=e,Nt}function kt(){if(pt===null){var e=Je.alternate;e=e!==null?e.memoizedState:null}else e=pt.next;var t=Nt===null?Je.memoizedState:Nt.next;if(t!==null)Nt=t,pt=e;else{if(e===null)throw Je.alternate===null?Error(o(467)):Error(o(310));pt=e,e={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},Nt===null?Je.memoizedState=Nt=e:Nt=Nt.next=e}return Nt}function Sa(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zs(e){var t=Qs;return Qs+=1,ns===null&&(ns=[]),e=Kh(ns,e,t),t=Je,(Nt===null?t.memoizedState:Nt.next)===null&&(t=t.alternate,q.H=t===null||t.memoizedState===null?qp:hu),e}function xa(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Zs(e);if(e.$$typeof===fe)return Gt(e)}throw Error(o(438,String(e)))}function nu(e){var t=null,s=Je.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var l=Je.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(d){return d.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=Sa(),Je.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),l=0;l<e;l++)s[l]=xe;return t.index++,s}function fr(e,t){return typeof t=="function"?t(e):t}function wa(e){var t=kt();return ru(t,pt,e)}function ru(e,t,s){var l=e.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=s;var d=e.baseQueue,h=l.pending;if(h!==null){if(d!==null){var S=d.next;d.next=h.next,h.next=S}t.baseQueue=d=h,l.pending=null}if(h=e.baseState,d===null)e.memoizedState=h;else{t=d.next;var N=S=null,Y=null,pe=t,we=!1;do{var je=pe.lane&-536870913;if(je!==pe.lane?(rt&je)===je:(dr&je)===je){var me=pe.revertLane;if(me===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null}),je===Ji&&(we=!0);else if((dr&me)===me){pe=pe.next,me===Ji&&(we=!0);continue}else je={lane:0,revertLane:pe.revertLane,gesture:null,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},Y===null?(N=Y=je,S=h):Y=Y.next=je,Je.lanes|=me,zr|=me;je=pe.action,vi&&s(h,je),h=pe.hasEagerState?pe.eagerState:s(h,je)}else me={lane:je,revertLane:pe.revertLane,gesture:pe.gesture,action:pe.action,hasEagerState:pe.hasEagerState,eagerState:pe.eagerState,next:null},Y===null?(N=Y=me,S=h):Y=Y.next=me,Je.lanes|=je,zr|=je;pe=pe.next}while(pe!==null&&pe!==t);if(Y===null?S=h:Y.next=N,!Sn(h,e.memoizedState)&&(Ot=!0,we&&(s=Ki,s!==null)))throw s;e.memoizedState=h,e.baseState=S,e.baseQueue=Y,l.lastRenderedState=h}return d===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function iu(e){var t=kt(),s=t.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var l=s.dispatch,d=s.pending,h=t.memoizedState;if(d!==null){s.pending=null;var S=d=d.next;do h=e(h,S.action),S=S.next;while(S!==d);Sn(h,t.memoizedState)||(Ot=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),s.lastRenderedState=h}return[h,l]}function lp(e,t,s){var l=Je,d=kt(),h=st;if(h){if(s===void 0)throw Error(o(407));s=s()}else s=t();var S=!Sn((pt||d).memoizedState,s);if(S&&(d.memoizedState=s,Ot=!0),d=d.queue,au(dp.bind(null,l,d,e),[e]),d.getSnapshot!==t||S||Nt!==null&&Nt.memoizedState.tag&1){if(l.flags|=2048,rs(9,{destroy:void 0},up.bind(null,l,d,s,t),null),yt===null)throw Error(o(349));h||(dr&127)!==0||cp(l,t,s)}return s}function cp(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Je.updateQueue,t===null?(t=Sa(),Je.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function up(e,t,s,l){t.value=s,t.getSnapshot=l,fp(t)&&hp(e)}function dp(e,t,s){return s(function(){fp(t)&&hp(e)})}function fp(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Sn(e,s)}catch{return!0}}function hp(e){var t=ci(e,2);t!==null&&gn(t,e,2)}function su(e){var t=cn();if(typeof e=="function"){var s=e;if(e=s(),vi){Pe(!0);try{s()}finally{Pe(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fr,lastRenderedState:e},t}function pp(e,t,s,l){return e.baseState=s,ru(e,pt,typeof l=="function"?l:fr)}function bx(e,t,s,l,d){if(Ra(e))throw Error(o(485));if(e=t.action,e!==null){var h={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){h.listeners.push(S)}};q.T!==null?s(!0):h.isTransition=!1,l(h),s=t.pending,s===null?(h.next=t.pending=h,mp(t,h)):(h.next=s.next,t.pending=s.next=h)}}function mp(e,t){var s=t.action,l=t.payload,d=e.state;if(t.isTransition){var h=q.T,S={};q.T=S;try{var N=s(d,l),Y=q.S;Y!==null&&Y(S,N),gp(e,t,N)}catch(pe){ou(e,t,pe)}finally{h!==null&&S.types!==null&&(h.types=S.types),q.T=h}}else try{h=s(d,l),gp(e,t,h)}catch(pe){ou(e,t,pe)}}function gp(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){yp(e,t,l)},function(l){return ou(e,t,l)}):yp(e,t,s)}function yp(e,t,s){t.status="fulfilled",t.value=s,vp(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,mp(e,s)))}function ou(e,t,s){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=s,vp(t),t=t.next;while(t!==l)}e.action=null}function vp(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function bp(e,t){return t}function Sp(e,t){if(st){var s=yt.formState;if(s!==null){e:{var l=Je;if(st){if(St){t:{for(var d=St,h=In;d.nodeType!==8;){if(!h){d=null;break t}if(d=Ln(d.nextSibling),d===null){d=null;break t}}h=d.data,d=h==="F!"||h==="F"?d:null}if(d){St=Ln(d.nextSibling),l=d.data==="F!";break e}}_r(l)}l=!1}l&&(t=s[0])}}return s=cn(),s.memoizedState=s.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bp,lastRenderedState:t},s.queue=l,s=Lp.bind(null,Je,l),l.dispatch=s,l=su(!1),h=fu.bind(null,Je,!1,l.queue),l=cn(),d={state:t,dispatch:null,action:e,pending:null},l.queue=d,s=bx.bind(null,Je,d,h,s),d.dispatch=s,l.memoizedState=e,[t,s,!1]}function xp(e){var t=kt();return wp(t,pt,e)}function wp(e,t,s){if(t=ru(e,t,bp)[0],e=wa(fr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Zs(t)}catch(S){throw S===Qi?fa:S}else l=t;t=kt();var d=t.queue,h=d.dispatch;return s!==t.memoizedState&&(Je.flags|=2048,rs(9,{destroy:void 0},Sx.bind(null,d,s),null)),[l,h,e]}function Sx(e,t){e.action=t}function Cp(e){var t=kt(),s=pt;if(s!==null)return wp(t,s,e);kt(),t=t.memoizedState,s=kt();var l=s.queue.dispatch;return s.memoizedState=e,[t,l,!1]}function rs(e,t,s,l){return e={tag:e,create:s,deps:l,inst:t,next:null},t=Je.updateQueue,t===null&&(t=Sa(),Je.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,t.lastEffect=e),e}function Tp(){return kt().memoizedState}function Ca(e,t,s,l){var d=cn();Je.flags|=e,d.memoizedState=rs(1|t,{destroy:void 0},s,l===void 0?null:l)}function Ta(e,t,s,l){var d=kt();l=l===void 0?null:l;var h=d.memoizedState.inst;pt!==null&&l!==null&&Kc(l,pt.memoizedState.deps)?d.memoizedState=rs(t,h,s,l):(Je.flags|=e,d.memoizedState=rs(1|t,h,s,l))}function Rp(e,t){Ca(8390656,8,e,t)}function au(e,t){Ta(2048,8,e,t)}function xx(e){Je.flags|=4;var t=Je.updateQueue;if(t===null)t=Sa(),Je.updateQueue=t,t.events=[e];else{var s=t.events;s===null?t.events=[e]:s.push(e)}}function jp(e){var t=kt().memoizedState;return xx({ref:t,nextImpl:e}),function(){if((ut&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function Ep(e,t){return Ta(4,2,e,t)}function kp(e,t){return Ta(4,4,e,t)}function _p(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ap(e,t,s){s=s!=null?s.concat([e]):null,Ta(4,4,_p.bind(null,t,e),s)}function lu(){}function Np(e,t){var s=kt();t=t===void 0?null:t;var l=s.memoizedState;return t!==null&&Kc(t,l[1])?l[0]:(s.memoizedState=[e,t],e)}function Op(e,t){var s=kt();t=t===void 0?null:t;var l=s.memoizedState;if(t!==null&&Kc(t,l[1]))return l[0];if(l=e(),vi){Pe(!0);try{e()}finally{Pe(!1)}}return s.memoizedState=[l,t],l}function cu(e,t,s){return s===void 0||(dr&1073741824)!==0&&(rt&261930)===0?e.memoizedState=t:(e.memoizedState=s,e=Mm(),Je.lanes|=e,zr|=e,s)}function Mp(e,t,s,l){return Sn(s,t)?s:es.current!==null?(e=cu(e,s,l),Sn(e,t)||(Ot=!0),e):(dr&42)===0||(dr&1073741824)!==0&&(rt&261930)===0?(Ot=!0,e.memoizedState=s):(e=Mm(),Je.lanes|=e,zr|=e,t)}function Pp(e,t,s,l,d){var h=P.p;P.p=h!==0&&8>h?h:8;var S=q.T,N={};q.T=N,fu(e,!1,t,s);try{var Y=d(),pe=q.S;if(pe!==null&&pe(N,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var we=gx(Y,l);eo(e,t,we,jn(e))}else eo(e,t,l,jn(e))}catch(je){eo(e,t,{then:function(){},status:"rejected",reason:je},jn())}finally{P.p=h,S!==null&&N.types!==null&&(S.types=N.types),q.T=S}}function wx(){}function uu(e,t,s,l){if(e.tag!==5)throw Error(o(476));var d=Up(e).queue;Pp(e,d,t,X,s===null?wx:function(){return Dp(e),s(l)})}function Up(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fr,lastRenderedState:X},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fr,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Dp(e){var t=Up(e);t.next===null&&(t=e.alternate.memoizedState),eo(e,t.next.queue,{},jn())}function du(){return Gt(vo)}function Ip(){return kt().memoizedState}function zp(){return kt().memoizedState}function Cx(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=jn();e=Or(s);var l=Mr(t,e,s);l!==null&&(gn(l,t,s),Xs(l,t,s)),t={cache:Bc()},e.payload=t;return}t=t.return}}function Tx(e,t,s){var l=jn();s={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Ra(e)?Bp(t,s):(s=_c(e,t,s,l),s!==null&&(gn(s,e,l),Hp(s,t,l)))}function Lp(e,t,s){var l=jn();eo(e,t,s,l)}function eo(e,t,s,l){var d={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Ra(e))Bp(t,d);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var S=t.lastRenderedState,N=h(S,s);if(d.hasEagerState=!0,d.eagerState=N,Sn(N,S))return sa(e,t,d,0),yt===null&&ia(),!1}catch{}if(s=_c(e,t,d,l),s!==null)return gn(s,e,l),Hp(s,t,l),!0}return!1}function fu(e,t,s,l){if(l={lane:2,revertLane:Vu(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Ra(e)){if(t)throw Error(o(479))}else t=_c(e,s,l,2),t!==null&&gn(t,e,2)}function Ra(e){var t=e.alternate;return e===Je||t!==null&&t===Je}function Bp(e,t){ts=va=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Hp(e,t,s){if((s&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,Ff(e,s)}}var to={readContext:Gt,use:xa,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt};to.useEffectEvent=Rt;var qp={readContext:Gt,use:xa,useCallback:function(e,t){return cn().memoizedState=[e,t===void 0?null:t],e},useContext:Gt,useEffect:Rp,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,Ca(4194308,4,_p.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Ca(4194308,4,e,t)},useInsertionEffect:function(e,t){Ca(4,2,e,t)},useMemo:function(e,t){var s=cn();t=t===void 0?null:t;var l=e();if(vi){Pe(!0);try{e()}finally{Pe(!1)}}return s.memoizedState=[l,t],l},useReducer:function(e,t,s){var l=cn();if(s!==void 0){var d=s(t);if(vi){Pe(!0);try{s(t)}finally{Pe(!1)}}}else d=t;return l.memoizedState=l.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},l.queue=e,e=e.dispatch=Tx.bind(null,Je,e),[l.memoizedState,e]},useRef:function(e){var t=cn();return e={current:e},t.memoizedState=e},useState:function(e){e=su(e);var t=e.queue,s=Lp.bind(null,Je,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:lu,useDeferredValue:function(e,t){var s=cn();return cu(s,e,t)},useTransition:function(){var e=su(!1);return e=Pp.bind(null,Je,e.queue,!0,!1),cn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var l=Je,d=cn();if(st){if(s===void 0)throw Error(o(407));s=s()}else{if(s=t(),yt===null)throw Error(o(349));(rt&127)!==0||cp(l,t,s)}d.memoizedState=s;var h={value:s,getSnapshot:t};return d.queue=h,Rp(dp.bind(null,l,h,e),[e]),l.flags|=2048,rs(9,{destroy:void 0},up.bind(null,l,h,s,t),null),s},useId:function(){var e=cn(),t=yt.identifierPrefix;if(st){var s=Kn,l=Jn;s=(l&~(1<<32-ye(l)-1)).toString(32)+s,t="_"+t+"R_"+s,s=ba++,0<s&&(t+="H"+s.toString(32)),t+="_"}else s=yx++,t="_"+t+"r_"+s.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:du,useFormState:Sp,useActionState:Sp,useOptimistic:function(e){var t=cn();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=fu.bind(null,Je,!0,s),s.dispatch=t,[e,t]},useMemoCache:nu,useCacheRefresh:function(){return cn().memoizedState=Cx.bind(null,Je)},useEffectEvent:function(e){var t=cn(),s={impl:e};return t.memoizedState=s,function(){if((ut&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}},hu={readContext:Gt,use:xa,useCallback:Np,useContext:Gt,useEffect:au,useImperativeHandle:Ap,useInsertionEffect:Ep,useLayoutEffect:kp,useMemo:Op,useReducer:wa,useRef:Tp,useState:function(){return wa(fr)},useDebugValue:lu,useDeferredValue:function(e,t){var s=kt();return Mp(s,pt.memoizedState,e,t)},useTransition:function(){var e=wa(fr)[0],t=kt().memoizedState;return[typeof e=="boolean"?e:Zs(e),t]},useSyncExternalStore:lp,useId:Ip,useHostTransitionStatus:du,useFormState:xp,useActionState:xp,useOptimistic:function(e,t){var s=kt();return pp(s,pt,e,t)},useMemoCache:nu,useCacheRefresh:zp};hu.useEffectEvent=jp;var $p={readContext:Gt,use:xa,useCallback:Np,useContext:Gt,useEffect:au,useImperativeHandle:Ap,useInsertionEffect:Ep,useLayoutEffect:kp,useMemo:Op,useReducer:iu,useRef:Tp,useState:function(){return iu(fr)},useDebugValue:lu,useDeferredValue:function(e,t){var s=kt();return pt===null?cu(s,e,t):Mp(s,pt.memoizedState,e,t)},useTransition:function(){var e=iu(fr)[0],t=kt().memoizedState;return[typeof e=="boolean"?e:Zs(e),t]},useSyncExternalStore:lp,useId:Ip,useHostTransitionStatus:du,useFormState:Cp,useActionState:Cp,useOptimistic:function(e,t){var s=kt();return pt!==null?pp(s,pt,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:nu,useCacheRefresh:zp};$p.useEffectEvent=jp;function pu(e,t,s,l){t=e.memoizedState,s=s(l,t),s=s==null?t:k({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var mu={enqueueSetState:function(e,t,s){e=e._reactInternals;var l=jn(),d=Or(l);d.payload=t,s!=null&&(d.callback=s),t=Mr(e,d,l),t!==null&&(gn(t,e,l),Xs(t,e,l))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var l=jn(),d=Or(l);d.tag=1,d.payload=t,s!=null&&(d.callback=s),t=Mr(e,d,l),t!==null&&(gn(t,e,l),Xs(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=jn(),l=Or(s);l.tag=2,t!=null&&(l.callback=t),t=Mr(e,l,s),t!==null&&(gn(t,e,s),Xs(t,e,s))}};function Vp(e,t,s,l,d,h,S){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,h,S):t.prototype&&t.prototype.isPureReactComponent?!Hs(s,l)||!Hs(d,h):!0}function Gp(e,t,s,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,l),t.state!==e&&mu.enqueueReplaceState(t,t.state,null)}function bi(e,t){var s=t;if("ref"in t){s={};for(var l in t)l!=="ref"&&(s[l]=t[l])}if(e=e.defaultProps){s===t&&(s=k({},s));for(var d in e)s[d]===void 0&&(s[d]=e[d])}return s}function Fp(e){ra(e)}function Yp(e){console.error(e)}function Wp(e){ra(e)}function ja(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Xp(e,t,s){try{var l=e.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function gu(e,t,s){return s=Or(s),s.tag=3,s.payload={element:null},s.callback=function(){ja(e,t)},s}function Jp(e){return e=Or(e),e.tag=3,e}function Kp(e,t,s,l){var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var h=l.value;e.payload=function(){return d(h)},e.callback=function(){Xp(t,s,l)}}var S=s.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(e.callback=function(){Xp(t,s,l),typeof d!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var N=l.stack;this.componentDidCatch(l.value,{componentStack:N!==null?N:""})})}function Rx(e,t,s,l,d){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=s.alternate,t!==null&&Xi(t,s,d,!0),s=wn.current,s!==null){switch(s.tag){case 31:case 13:return zn===null?za():s.alternate===null&&jt===0&&(jt=3),s.flags&=-257,s.flags|=65536,s.lanes=d,l===ha?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([l]):t.add(l),Hu(e,l,d)),!1;case 22:return s.flags|=65536,l===ha?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([l]):s.add(l)),Hu(e,l,d)),!1}throw Error(o(435,s.tag))}return Hu(e,l,d),za(),!1}if(st)return t=wn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=d,l!==Uc&&(e=Error(o(422),{cause:l}),Vs(Pn(e,s)))):(l!==Uc&&(t=Error(o(423),{cause:l}),Vs(Pn(t,s))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,l=Pn(l,s),d=gu(e.stateNode,l,d),Fc(e,d),jt!==4&&(jt=2)),!1;var h=Error(o(520),{cause:l});if(h=Pn(h,s),co===null?co=[h]:co.push(h),jt!==4&&(jt=2),t===null)return!0;l=Pn(l,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=d&-d,s.lanes|=e,e=gu(s.stateNode,l,e),Fc(s,e),!1;case 1:if(t=s.type,h=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Lr===null||!Lr.has(h))))return s.flags|=65536,d&=-d,s.lanes|=d,d=Jp(d),Kp(d,e,s,l),Fc(s,d),!1}s=s.return}while(s!==null);return!1}var yu=Error(o(461)),Ot=!1;function Ft(e,t,s,l){t.child=e===null?tp(t,null,s,l):yi(t,e.child,s,l)}function Qp(e,t,s,l,d){s=s.render;var h=t.ref;if("ref"in l){var S={};for(var N in l)N!=="ref"&&(S[N]=l[N])}else S=l;return hi(t),l=Qc(e,t,s,S,h,d),N=Zc(),e!==null&&!Ot?(eu(e,t,d),hr(e,t,d)):(st&&N&&Mc(t),t.flags|=1,Ft(e,t,l,d),t.child)}function Zp(e,t,s,l,d){if(e===null){var h=s.type;return typeof h=="function"&&!Ac(h)&&h.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=h,em(e,t,h,l,d)):(e=aa(s.type,null,l,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!Ru(e,d)){var S=h.memoizedProps;if(s=s.compare,s=s!==null?s:Hs,s(S,l)&&e.ref===t.ref)return hr(e,t,d)}return t.flags|=1,e=ar(h,l),e.ref=t.ref,e.return=t,t.child=e}function em(e,t,s,l,d){if(e!==null){var h=e.memoizedProps;if(Hs(h,l)&&e.ref===t.ref)if(Ot=!1,t.pendingProps=l=h,Ru(e,d))(e.flags&131072)!==0&&(Ot=!0);else return t.lanes=e.lanes,hr(e,t,d)}return vu(e,t,s,l,d)}function tm(e,t,s,l){var d=l.children,h=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(h=h!==null?h.baseLanes|s:s,e!==null){for(l=t.child=e.child,d=0;l!==null;)d=d|l.lanes|l.childLanes,l=l.sibling;l=d&~h}else l=0,t.child=null;return nm(e,t,h,s,l)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&da(t,h!==null?h.cachePool:null),h!==null?ip(t,h):Wc(),sp(t);else return l=t.lanes=536870912,nm(e,t,h!==null?h.baseLanes|s:s,s,l)}else h!==null?(da(t,h.cachePool),ip(t,h),Ur(),t.memoizedState=null):(e!==null&&da(t,null),Wc(),Ur());return Ft(e,t,d,s),t.child}function no(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function nm(e,t,s,l,d){var h=qc();return h=h===null?null:{parent:At._currentValue,pool:h},t.memoizedState={baseLanes:s,cachePool:h},e!==null&&da(t,null),Wc(),sp(t),e!==null&&Xi(e,t,l,!0),t.childLanes=d,null}function Ea(e,t){return t=_a({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function rm(e,t,s){return yi(t,e.child,null,s),e=Ea(t,t.pendingProps),e.flags|=2,Cn(t),t.memoizedState=null,e}function jx(e,t,s){var l=t.pendingProps,d=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(st){if(l.mode==="hidden")return e=Ea(t,l),t.lanes=536870912,no(null,e);if(Jc(t),(e=St)?(e=mg(e,In),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Er!==null?{id:Jn,overflow:Kn}:null,retryLane:536870912,hydrationErrors:null},s=Bh(e),s.return=t,t.child=s,Vt=t,St=null)):e=null,e===null)throw _r(t);return t.lanes=536870912,null}return Ea(t,l)}var h=e.memoizedState;if(h!==null){var S=h.dehydrated;if(Jc(t),d)if(t.flags&256)t.flags&=-257,t=rm(e,t,s);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(Ot||Xi(e,t,s,!1),d=(s&e.childLanes)!==0,Ot||d){if(l=yt,l!==null&&(S=Yf(l,s),S!==0&&S!==h.retryLane))throw h.retryLane=S,ci(e,S),gn(l,e,S),yu;za(),t=rm(e,t,s)}else e=h.treeContext,St=Ln(S.nextSibling),Vt=t,st=!0,kr=null,In=!1,e!==null&&$h(t,e),t=Ea(t,l),t.flags|=4096;return t}return e=ar(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function ka(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(o(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function vu(e,t,s,l,d){return hi(t),s=Qc(e,t,s,l,void 0,d),l=Zc(),e!==null&&!Ot?(eu(e,t,d),hr(e,t,d)):(st&&l&&Mc(t),t.flags|=1,Ft(e,t,s,d),t.child)}function im(e,t,s,l,d,h){return hi(t),t.updateQueue=null,s=ap(t,l,s,d),op(e),l=Zc(),e!==null&&!Ot?(eu(e,t,h),hr(e,t,h)):(st&&l&&Mc(t),t.flags|=1,Ft(e,t,s,h),t.child)}function sm(e,t,s,l,d){if(hi(t),t.stateNode===null){var h=Gi,S=s.contextType;typeof S=="object"&&S!==null&&(h=Gt(S)),h=new s(l,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=mu,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=l,h.state=t.memoizedState,h.refs={},Vc(t),S=s.contextType,h.context=typeof S=="object"&&S!==null?Gt(S):Gi,h.state=t.memoizedState,S=s.getDerivedStateFromProps,typeof S=="function"&&(pu(t,s,S,l),h.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(S=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),S!==h.state&&mu.enqueueReplaceState(h,h.state,null),Ks(t,l,h,d),Js(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){h=t.stateNode;var N=t.memoizedProps,Y=bi(s,N);h.props=Y;var pe=h.context,we=s.contextType;S=Gi,typeof we=="object"&&we!==null&&(S=Gt(we));var je=s.getDerivedStateFromProps;we=typeof je=="function"||typeof h.getSnapshotBeforeUpdate=="function",N=t.pendingProps!==N,we||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(N||pe!==S)&&Gp(t,h,l,S),Nr=!1;var me=t.memoizedState;h.state=me,Ks(t,l,h,d),Js(),pe=t.memoizedState,N||me!==pe||Nr?(typeof je=="function"&&(pu(t,s,je,l),pe=t.memoizedState),(Y=Nr||Vp(t,s,Y,l,me,pe,S))?(we||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=pe),h.props=l,h.state=pe,h.context=S,l=Y):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{h=t.stateNode,Gc(e,t),S=t.memoizedProps,we=bi(s,S),h.props=we,je=t.pendingProps,me=h.context,pe=s.contextType,Y=Gi,typeof pe=="object"&&pe!==null&&(Y=Gt(pe)),N=s.getDerivedStateFromProps,(pe=typeof N=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(S!==je||me!==Y)&&Gp(t,h,l,Y),Nr=!1,me=t.memoizedState,h.state=me,Ks(t,l,h,d),Js();var be=t.memoizedState;S!==je||me!==be||Nr||e!==null&&e.dependencies!==null&&ca(e.dependencies)?(typeof N=="function"&&(pu(t,s,N,l),be=t.memoizedState),(we=Nr||Vp(t,s,we,l,me,be,Y)||e!==null&&e.dependencies!==null&&ca(e.dependencies))?(pe||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(l,be,Y),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(l,be,Y)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||S===e.memoizedProps&&me===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&me===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=be),h.props=l,h.state=be,h.context=Y,l=we):(typeof h.componentDidUpdate!="function"||S===e.memoizedProps&&me===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&me===e.memoizedState||(t.flags|=1024),l=!1)}return h=l,ka(e,t),l=(t.flags&128)!==0,h||l?(h=t.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&l?(t.child=yi(t,e.child,null,d),t.child=yi(t,null,s,d)):Ft(e,t,s,d),t.memoizedState=h.state,e=t.child):e=hr(e,t,d),e}function om(e,t,s,l){return di(),t.flags|=256,Ft(e,t,s,l),t.child}var bu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Su(e){return{baseLanes:e,cachePool:Xh()}}function xu(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=Rn),e}function am(e,t,s){var l=t.pendingProps,d=!1,h=(t.flags&128)!==0,S;if((S=h)||(S=e!==null&&e.memoizedState===null?!1:(Et.current&2)!==0),S&&(d=!0,t.flags&=-129),S=(t.flags&32)!==0,t.flags&=-33,e===null){if(st){if(d?Pr(t):Ur(),(e=St)?(e=mg(e,In),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Er!==null?{id:Jn,overflow:Kn}:null,retryLane:536870912,hydrationErrors:null},s=Bh(e),s.return=t,t.child=s,Vt=t,St=null)):e=null,e===null)throw _r(t);return rd(e)?t.lanes=32:t.lanes=536870912,null}var N=l.children;return l=l.fallback,d?(Ur(),d=t.mode,N=_a({mode:"hidden",children:N},d),l=ui(l,d,s,null),N.return=t,l.return=t,N.sibling=l,t.child=N,l=t.child,l.memoizedState=Su(s),l.childLanes=xu(e,S,s),t.memoizedState=bu,no(null,l)):(Pr(t),wu(t,N))}var Y=e.memoizedState;if(Y!==null&&(N=Y.dehydrated,N!==null)){if(h)t.flags&256?(Pr(t),t.flags&=-257,t=Cu(e,t,s)):t.memoizedState!==null?(Ur(),t.child=e.child,t.flags|=128,t=null):(Ur(),N=l.fallback,d=t.mode,l=_a({mode:"visible",children:l.children},d),N=ui(N,d,s,null),N.flags|=2,l.return=t,N.return=t,l.sibling=N,t.child=l,yi(t,e.child,null,s),l=t.child,l.memoizedState=Su(s),l.childLanes=xu(e,S,s),t.memoizedState=bu,t=no(null,l));else if(Pr(t),rd(N)){if(S=N.nextSibling&&N.nextSibling.dataset,S)var pe=S.dgst;S=pe,l=Error(o(419)),l.stack="",l.digest=S,Vs({value:l,source:null,stack:null}),t=Cu(e,t,s)}else if(Ot||Xi(e,t,s,!1),S=(s&e.childLanes)!==0,Ot||S){if(S=yt,S!==null&&(l=Yf(S,s),l!==0&&l!==Y.retryLane))throw Y.retryLane=l,ci(e,l),gn(S,e,l),yu;nd(N)||za(),t=Cu(e,t,s)}else nd(N)?(t.flags|=192,t.child=e.child,t=null):(e=Y.treeContext,St=Ln(N.nextSibling),Vt=t,st=!0,kr=null,In=!1,e!==null&&$h(t,e),t=wu(t,l.children),t.flags|=4096);return t}return d?(Ur(),N=l.fallback,d=t.mode,Y=e.child,pe=Y.sibling,l=ar(Y,{mode:"hidden",children:l.children}),l.subtreeFlags=Y.subtreeFlags&65011712,pe!==null?N=ar(pe,N):(N=ui(N,d,s,null),N.flags|=2),N.return=t,l.return=t,l.sibling=N,t.child=l,no(null,l),l=t.child,N=e.child.memoizedState,N===null?N=Su(s):(d=N.cachePool,d!==null?(Y=At._currentValue,d=d.parent!==Y?{parent:Y,pool:Y}:d):d=Xh(),N={baseLanes:N.baseLanes|s,cachePool:d}),l.memoizedState=N,l.childLanes=xu(e,S,s),t.memoizedState=bu,no(e.child,l)):(Pr(t),s=e.child,e=s.sibling,s=ar(s,{mode:"visible",children:l.children}),s.return=t,s.sibling=null,e!==null&&(S=t.deletions,S===null?(t.deletions=[e],t.flags|=16):S.push(e)),t.child=s,t.memoizedState=null,s)}function wu(e,t){return t=_a({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function _a(e,t){return e=xn(22,e,null,t),e.lanes=0,e}function Cu(e,t,s){return yi(t,e.child,null,s),e=wu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lm(e,t,s){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),zc(e.return,t,s)}function Tu(e,t,s,l,d,h){var S=e.memoizedState;S===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:d,treeForkCount:h}:(S.isBackwards=t,S.rendering=null,S.renderingStartTime=0,S.last=l,S.tail=s,S.tailMode=d,S.treeForkCount=h)}function cm(e,t,s){var l=t.pendingProps,d=l.revealOrder,h=l.tail;l=l.children;var S=Et.current,N=(S&2)!==0;if(N?(S=S&1|2,t.flags|=128):S&=1,C(Et,S),Ft(e,t,l,s),l=st?$s:0,!N&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&lm(e,s,t);else if(e.tag===19)lm(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(s=t.child,d=null;s!==null;)e=s.alternate,e!==null&&ya(e)===null&&(d=s),s=s.sibling;s=d,s===null?(d=t.child,t.child=null):(d=s.sibling,s.sibling=null),Tu(t,!1,d,s,h,l);break;case"backwards":case"unstable_legacy-backwards":for(s=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&ya(e)===null){t.child=d;break}e=d.sibling,d.sibling=s,s=d,d=e}Tu(t,!0,s,null,h,l);break;case"together":Tu(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function hr(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),zr|=t.lanes,(s&t.childLanes)===0)if(e!==null){if(Xi(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,s=ar(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=ar(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Ru(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ca(e)))}function Ex(e,t,s){switch(t.tag){case 3:b(t,t.stateNode.containerInfo),Ar(t,At,e.memoizedState.cache),di();break;case 27:case 5:_(t);break;case 4:b(t,t.stateNode.containerInfo);break;case 10:Ar(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Jc(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Pr(t),t.flags|=128,null):(s&t.child.childLanes)!==0?am(e,t,s):(Pr(t),e=hr(e,t,s),e!==null?e.sibling:null);Pr(t);break;case 19:var d=(e.flags&128)!==0;if(l=(s&t.childLanes)!==0,l||(Xi(e,t,s,!1),l=(s&t.childLanes)!==0),d){if(l)return cm(e,t,s);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),C(Et,Et.current),l)break;return null;case 22:return t.lanes=0,tm(e,t,s,t.pendingProps);case 24:Ar(t,At,e.memoizedState.cache)}return hr(e,t,s)}function um(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ot=!0;else{if(!Ru(e,s)&&(t.flags&128)===0)return Ot=!1,Ex(e,t,s);Ot=(e.flags&131072)!==0}else Ot=!1,st&&(t.flags&1048576)!==0&&qh(t,$s,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=mi(t.elementType),t.type=e,typeof e=="function")Ac(e)?(l=bi(e,l),t.tag=1,t=sm(null,t,e,l,s)):(t.tag=0,t=vu(null,t,e,l,s));else{if(e!=null){var d=e.$$typeof;if(d===oe){t.tag=11,t=Qp(null,t,e,l,s);break e}else if(d===ne){t.tag=14,t=Zp(null,t,e,l,s);break e}}throw t=Se(e)||e,Error(o(306,t,""))}}return t;case 0:return vu(e,t,t.type,t.pendingProps,s);case 1:return l=t.type,d=bi(l,t.pendingProps),sm(e,t,l,d,s);case 3:e:{if(b(t,t.stateNode.containerInfo),e===null)throw Error(o(387));l=t.pendingProps;var h=t.memoizedState;d=h.element,Gc(e,t),Ks(t,l,null,s);var S=t.memoizedState;if(l=S.cache,Ar(t,At,l),l!==h.cache&&Lc(t,[At],s,!0),Js(),l=S.element,h.isDehydrated)if(h={element:l,isDehydrated:!1,cache:S.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=om(e,t,l,s);break e}else if(l!==d){d=Pn(Error(o(424)),t),Vs(d),t=om(e,t,l,s);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,St=Ln(e.firstChild),Vt=t,st=!0,kr=null,In=!0,s=tp(t,null,l,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(di(),l===d){t=hr(e,t,s);break e}Ft(e,t,l,s)}t=t.child}return t;case 26:return ka(e,t),e===null?(s=xg(t.type,null,t.pendingProps,null))?t.memoizedState=s:st||(s=t.type,e=t.pendingProps,l=Ga(T.current).createElement(s),l[$t]=t,l[un]=e,Yt(l,s,e),Lt(l),t.stateNode=l):t.memoizedState=xg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return _(t),e===null&&st&&(l=t.stateNode=vg(t.type,t.pendingProps,T.current),Vt=t,In=!0,d=St,$r(t.type)?(id=d,St=Ln(l.firstChild)):St=d),Ft(e,t,t.pendingProps.children,s),ka(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&st&&((d=l=St)&&(l=rw(l,t.type,t.pendingProps,In),l!==null?(t.stateNode=l,Vt=t,St=Ln(l.firstChild),In=!1,d=!0):d=!1),d||_r(t)),_(t),d=t.type,h=t.pendingProps,S=e!==null?e.memoizedProps:null,l=h.children,Zu(d,h)?l=null:S!==null&&Zu(d,S)&&(t.flags|=32),t.memoizedState!==null&&(d=Qc(e,t,vx,null,null,s),vo._currentValue=d),ka(e,t),Ft(e,t,l,s),t.child;case 6:return e===null&&st&&((e=s=St)&&(s=iw(s,t.pendingProps,In),s!==null?(t.stateNode=s,Vt=t,St=null,e=!0):e=!1),e||_r(t)),null;case 13:return am(e,t,s);case 4:return b(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=yi(t,null,l,s):Ft(e,t,l,s),t.child;case 11:return Qp(e,t,t.type,t.pendingProps,s);case 7:return Ft(e,t,t.pendingProps,s),t.child;case 8:return Ft(e,t,t.pendingProps.children,s),t.child;case 12:return Ft(e,t,t.pendingProps.children,s),t.child;case 10:return l=t.pendingProps,Ar(t,t.type,l.value),Ft(e,t,l.children,s),t.child;case 9:return d=t.type._context,l=t.pendingProps.children,hi(t),d=Gt(d),l=l(d),t.flags|=1,Ft(e,t,l,s),t.child;case 14:return Zp(e,t,t.type,t.pendingProps,s);case 15:return em(e,t,t.type,t.pendingProps,s);case 19:return cm(e,t,s);case 31:return jx(e,t,s);case 22:return tm(e,t,s,t.pendingProps);case 24:return hi(t),l=Gt(At),e===null?(d=qc(),d===null&&(d=yt,h=Bc(),d.pooledCache=h,h.refCount++,h!==null&&(d.pooledCacheLanes|=s),d=h),t.memoizedState={parent:l,cache:d},Vc(t),Ar(t,At,d)):((e.lanes&s)!==0&&(Gc(e,t),Ks(t,null,null,s),Js()),d=e.memoizedState,h=t.memoizedState,d.parent!==l?(d={parent:l,cache:l},t.memoizedState=d,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=d),Ar(t,At,l)):(l=h.cache,Ar(t,At,l),l!==d.cache&&Lc(t,[At],s,!0))),Ft(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function pr(e){e.flags|=4}function ju(e,t,s,l,d){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(Im())e.flags|=8192;else throw gi=ha,$c}else e.flags&=-16777217}function dm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!jg(t))if(Im())e.flags|=8192;else throw gi=ha,$c}function Aa(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Vf():536870912,e.lanes|=t,as|=t)}function ro(e,t){if(!st)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function xt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(t)for(var d=e.child;d!==null;)s|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)s|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=s,t}function kx(e,t,s){var l=t.pendingProps;switch(Pc(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(t),null;case 1:return xt(t),null;case 3:return s=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),ur(At),R(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Wi(t)?pr(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Dc())),xt(t),null;case 26:var d=t.type,h=t.memoizedState;return e===null?(pr(t),h!==null?(xt(t),dm(t,h)):(xt(t),ju(t,d,null,l,s))):h?h!==e.memoizedState?(pr(t),xt(t),dm(t,h)):(xt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&pr(t),xt(t),ju(t,d,e,l,s)),null;case 27:if(V(t),s=T.current,d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&pr(t);else{if(!l){if(t.stateNode===null)throw Error(o(166));return xt(t),null}e=j.current,Wi(t)?Vh(t):(e=vg(d,l,s),t.stateNode=e,pr(t))}return xt(t),null;case 5:if(V(t),d=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&pr(t);else{if(!l){if(t.stateNode===null)throw Error(o(166));return xt(t),null}if(h=j.current,Wi(t))Vh(t);else{var S=Ga(T.current);switch(h){case 1:h=S.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:h=S.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":h=S.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":h=S.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":h=S.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof l.is=="string"?S.createElement("select",{is:l.is}):S.createElement("select"),l.multiple?h.multiple=!0:l.size&&(h.size=l.size);break;default:h=typeof l.is=="string"?S.createElement(d,{is:l.is}):S.createElement(d)}}h[$t]=t,h[un]=l;e:for(S=t.child;S!==null;){if(S.tag===5||S.tag===6)h.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===t)break e;for(;S.sibling===null;){if(S.return===null||S.return===t)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}t.stateNode=h;e:switch(Yt(h,d,l),d){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&pr(t)}}return xt(t),ju(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,s),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&pr(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(o(166));if(e=T.current,Wi(t)){if(e=t.stateNode,s=t.memoizedProps,l=null,d=Vt,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}e[$t]=t,e=!!(e.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||ag(e.nodeValue,s)),e||_r(t,!0)}else e=Ga(e).createTextNode(l),e[$t]=t,t.stateNode=e}return xt(t),null;case 31:if(s=t.memoizedState,e===null||e.memoizedState!==null){if(l=Wi(t),s!==null){if(e===null){if(!l)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[$t]=t}else di(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;xt(t),e=!1}else s=Dc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return t.flags&256?(Cn(t),t):(Cn(t),null);if((t.flags&128)!==0)throw Error(o(558))}return xt(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Wi(t),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(o(318));if(d=t.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));d[$t]=t}else di(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;xt(t),d=!1}else d=Dc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return t.flags&256?(Cn(t),t):(Cn(t),null)}return Cn(t),(t.flags&128)!==0?(t.lanes=s,t):(s=l!==null,e=e!==null&&e.memoizedState!==null,s&&(l=t.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool),h=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==d&&(l.flags|=2048)),s!==e&&s&&(t.child.flags|=8192),Aa(t,t.updateQueue),xt(t),null);case 4:return R(),e===null&&Wu(t.stateNode.containerInfo),xt(t),null;case 10:return ur(t.type),xt(t),null;case 19:if(I(Et),l=t.memoizedState,l===null)return xt(t),null;if(d=(t.flags&128)!==0,h=l.rendering,h===null)if(d)ro(l,!1);else{if(jt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=ya(e),h!==null){for(t.flags|=128,ro(l,!1),e=h.updateQueue,t.updateQueue=e,Aa(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)Lh(s,e),s=s.sibling;return C(Et,Et.current&1|2),st&&lr(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&$e()>Ua&&(t.flags|=128,d=!0,ro(l,!1),t.lanes=4194304)}else{if(!d)if(e=ya(h),e!==null){if(t.flags|=128,d=!0,e=e.updateQueue,t.updateQueue=e,Aa(t,e),ro(l,!0),l.tail===null&&l.tailMode==="hidden"&&!h.alternate&&!st)return xt(t),null}else 2*$e()-l.renderingStartTime>Ua&&s!==536870912&&(t.flags|=128,d=!0,ro(l,!1),t.lanes=4194304);l.isBackwards?(h.sibling=t.child,t.child=h):(e=l.last,e!==null?e.sibling=h:t.child=h,l.last=h)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=$e(),e.sibling=null,s=Et.current,C(Et,d?s&1|2:s&1),st&&lr(t,l.treeForkCount),e):(xt(t),null);case 22:case 23:return Cn(t),Xc(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(s&536870912)!==0&&(t.flags&128)===0&&(xt(t),t.subtreeFlags&6&&(t.flags|=8192)):xt(t),s=t.updateQueue,s!==null&&Aa(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==s&&(t.flags|=2048),e!==null&&I(pi),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),ur(At),xt(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function _x(e,t){switch(Pc(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ur(At),R(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return V(t),null;case 31:if(t.memoizedState!==null){if(Cn(t),t.alternate===null)throw Error(o(340));di()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Cn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));di()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return I(Et),null;case 4:return R(),null;case 10:return ur(t.type),null;case 22:case 23:return Cn(t),Xc(),e!==null&&I(pi),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ur(At),null;case 25:return null;default:return null}}function fm(e,t){switch(Pc(t),t.tag){case 3:ur(At),R();break;case 26:case 27:case 5:V(t);break;case 4:R();break;case 31:t.memoizedState!==null&&Cn(t);break;case 13:Cn(t);break;case 19:I(Et);break;case 10:ur(t.type);break;case 22:case 23:Cn(t),Xc(),e!==null&&I(pi);break;case 24:ur(At)}}function io(e,t){try{var s=t.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var d=l.next;s=d;do{if((s.tag&e)===e){l=void 0;var h=s.create,S=s.inst;l=h(),S.destroy=l}s=s.next}while(s!==d)}}catch(N){ht(t,t.return,N)}}function Dr(e,t,s){try{var l=t.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var h=d.next;l=h;do{if((l.tag&e)===e){var S=l.inst,N=S.destroy;if(N!==void 0){S.destroy=void 0,d=t;var Y=s,pe=N;try{pe()}catch(we){ht(d,Y,we)}}}l=l.next}while(l!==h)}}catch(we){ht(t,t.return,we)}}function hm(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{rp(t,s)}catch(l){ht(e,e.return,l)}}}function pm(e,t,s){s.props=bi(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(l){ht(e,t,l)}}function so(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof s=="function"?e.refCleanup=s(l):s.current=l}}catch(d){ht(e,t,d)}}function Qn(e,t){var s=e.ref,l=e.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(d){ht(e,t,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(d){ht(e,t,d)}else s.current=null}function mm(e){var t=e.type,s=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(d){ht(e,e.return,d)}}function Eu(e,t,s){try{var l=e.stateNode;Kx(l,e.type,s,t),l[un]=t}catch(d){ht(e,e.return,d)}}function gm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&$r(e.type)||e.tag===4}function ku(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&$r(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function _u(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=sr));else if(l!==4&&(l===27&&$r(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(_u(e,t,s),e=e.sibling;e!==null;)_u(e,t,s),e=e.sibling}function Na(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(l!==4&&(l===27&&$r(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Na(e,t,s),e=e.sibling;e!==null;)Na(e,t,s),e=e.sibling}function ym(e){var t=e.stateNode,s=e.memoizedProps;try{for(var l=e.type,d=t.attributes;d.length;)t.removeAttributeNode(d[0]);Yt(t,l,s),t[$t]=e,t[un]=s}catch(h){ht(e,e.return,h)}}var mr=!1,Mt=!1,Au=!1,vm=typeof WeakSet=="function"?WeakSet:Set,Bt=null;function Ax(e,t){if(e=e.containerInfo,Ku=Qa,e=Ah(e),Cc(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var d=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{s.nodeType,h.nodeType}catch{s=null;break e}var S=0,N=-1,Y=-1,pe=0,we=0,je=e,me=null;t:for(;;){for(var be;je!==s||d!==0&&je.nodeType!==3||(N=S+d),je!==h||l!==0&&je.nodeType!==3||(Y=S+l),je.nodeType===3&&(S+=je.nodeValue.length),(be=je.firstChild)!==null;)me=je,je=be;for(;;){if(je===e)break t;if(me===s&&++pe===d&&(N=S),me===h&&++we===l&&(Y=S),(be=je.nextSibling)!==null)break;je=me,me=je.parentNode}je=be}s=N===-1||Y===-1?null:{start:N,end:Y}}else s=null}s=s||{start:0,end:0}}else s=null;for(Qu={focusedElem:e,selectionRange:s},Qa=!1,Bt=t;Bt!==null;)if(t=Bt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Bt=e;else for(;Bt!==null;){switch(t=Bt,h=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)d=e[s],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,s=t,d=h.memoizedProps,h=h.memoizedState,l=s.stateNode;try{var Be=bi(s.type,d);e=l.getSnapshotBeforeUpdate(Be,h),l.__reactInternalSnapshotBeforeUpdate=e}catch(Fe){ht(s,s.return,Fe)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)td(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":td(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,Bt=e;break}Bt=t.return}}function bm(e,t,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:yr(e,s),l&4&&io(5,s);break;case 1:if(yr(e,s),l&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(S){ht(s,s.return,S)}else{var d=bi(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(d,t,e.__reactInternalSnapshotBeforeUpdate)}catch(S){ht(s,s.return,S)}}l&64&&hm(s),l&512&&so(s,s.return);break;case 3:if(yr(e,s),l&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{rp(e,t)}catch(S){ht(s,s.return,S)}}break;case 27:t===null&&l&4&&ym(s);case 26:case 5:yr(e,s),t===null&&l&4&&mm(s),l&512&&so(s,s.return);break;case 12:yr(e,s);break;case 31:yr(e,s),l&4&&wm(e,s);break;case 13:yr(e,s),l&4&&Cm(e,s),l&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=Lx.bind(null,s),sw(e,s))));break;case 22:if(l=s.memoizedState!==null||mr,!l){t=t!==null&&t.memoizedState!==null||Mt,d=mr;var h=Mt;mr=l,(Mt=t)&&!h?vr(e,s,(s.subtreeFlags&8772)!==0):yr(e,s),mr=d,Mt=h}break;case 30:break;default:yr(e,s)}}function Sm(e){var t=e.alternate;t!==null&&(e.alternate=null,Sm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&oc(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var wt=null,fn=!1;function gr(e,t,s){for(s=s.child;s!==null;)xm(e,t,s),s=s.sibling}function xm(e,t,s){if(Oe&&typeof Oe.onCommitFiberUnmount=="function")try{Oe.onCommitFiberUnmount(ze,s)}catch{}switch(s.tag){case 26:Mt||Qn(s,t),gr(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Mt||Qn(s,t);var l=wt,d=fn;$r(s.type)&&(wt=s.stateNode,fn=!1),gr(e,t,s),mo(s.stateNode),wt=l,fn=d;break;case 5:Mt||Qn(s,t);case 6:if(l=wt,d=fn,wt=null,gr(e,t,s),wt=l,fn=d,wt!==null)if(fn)try{(wt.nodeType===9?wt.body:wt.nodeName==="HTML"?wt.ownerDocument.body:wt).removeChild(s.stateNode)}catch(h){ht(s,t,h)}else try{wt.removeChild(s.stateNode)}catch(h){ht(s,t,h)}break;case 18:wt!==null&&(fn?(e=wt,hg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),ms(e)):hg(wt,s.stateNode));break;case 4:l=wt,d=fn,wt=s.stateNode.containerInfo,fn=!0,gr(e,t,s),wt=l,fn=d;break;case 0:case 11:case 14:case 15:Dr(2,s,t),Mt||Dr(4,s,t),gr(e,t,s);break;case 1:Mt||(Qn(s,t),l=s.stateNode,typeof l.componentWillUnmount=="function"&&pm(s,t,l)),gr(e,t,s);break;case 21:gr(e,t,s);break;case 22:Mt=(l=Mt)||s.memoizedState!==null,gr(e,t,s),Mt=l;break;default:gr(e,t,s)}}function wm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ms(e)}catch(s){ht(t,t.return,s)}}}function Cm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ms(e)}catch(s){ht(t,t.return,s)}}function Nx(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new vm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new vm),t;default:throw Error(o(435,e.tag))}}function Oa(e,t){var s=Nx(e);t.forEach(function(l){if(!s.has(l)){s.add(l);var d=Bx.bind(null,e,l);l.then(d,d)}})}function hn(e,t){var s=t.deletions;if(s!==null)for(var l=0;l<s.length;l++){var d=s[l],h=e,S=t,N=S;e:for(;N!==null;){switch(N.tag){case 27:if($r(N.type)){wt=N.stateNode,fn=!1;break e}break;case 5:wt=N.stateNode,fn=!1;break e;case 3:case 4:wt=N.stateNode.containerInfo,fn=!0;break e}N=N.return}if(wt===null)throw Error(o(160));xm(h,S,d),wt=null,fn=!1,h=d.alternate,h!==null&&(h.return=null),d.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Tm(t,e),t=t.sibling}var Vn=null;function Tm(e,t){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:hn(t,e),pn(e),l&4&&(Dr(3,e,e.return),io(3,e),Dr(5,e,e.return));break;case 1:hn(t,e),pn(e),l&512&&(Mt||s===null||Qn(s,s.return)),l&64&&mr&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var d=Vn;if(hn(t,e),pn(e),l&512&&(Mt||s===null||Qn(s,s.return)),l&4){var h=s!==null?s.memoizedState:null;if(l=e.memoizedState,s===null)if(l===null)if(e.stateNode===null){e:{l=e.type,s=e.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":h=d.getElementsByTagName("title")[0],(!h||h[Os]||h[$t]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=d.createElement(l),d.head.insertBefore(h,d.querySelector("head > title"))),Yt(h,l,s),h[$t]=e,Lt(h),l=h;break e;case"link":var S=Tg("link","href",d).get(l+(s.href||""));if(S){for(var N=0;N<S.length;N++)if(h=S[N],h.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&h.getAttribute("rel")===(s.rel==null?null:s.rel)&&h.getAttribute("title")===(s.title==null?null:s.title)&&h.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){S.splice(N,1);break t}}h=d.createElement(l),Yt(h,l,s),d.head.appendChild(h);break;case"meta":if(S=Tg("meta","content",d).get(l+(s.content||""))){for(N=0;N<S.length;N++)if(h=S[N],h.getAttribute("content")===(s.content==null?null:""+s.content)&&h.getAttribute("name")===(s.name==null?null:s.name)&&h.getAttribute("property")===(s.property==null?null:s.property)&&h.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&h.getAttribute("charset")===(s.charSet==null?null:s.charSet)){S.splice(N,1);break t}}h=d.createElement(l),Yt(h,l,s),d.head.appendChild(h);break;default:throw Error(o(468,l))}h[$t]=e,Lt(h),l=h}e.stateNode=l}else Rg(d,e.type,e.stateNode);else e.stateNode=Cg(d,l,e.memoizedProps);else h!==l?(h===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):h.count--,l===null?Rg(d,e.type,e.stateNode):Cg(d,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Eu(e,e.memoizedProps,s.memoizedProps)}break;case 27:hn(t,e),pn(e),l&512&&(Mt||s===null||Qn(s,s.return)),s!==null&&l&4&&Eu(e,e.memoizedProps,s.memoizedProps);break;case 5:if(hn(t,e),pn(e),l&512&&(Mt||s===null||Qn(s,s.return)),e.flags&32){d=e.stateNode;try{zi(d,"")}catch(Be){ht(e,e.return,Be)}}l&4&&e.stateNode!=null&&(d=e.memoizedProps,Eu(e,d,s!==null?s.memoizedProps:d)),l&1024&&(Au=!0);break;case 6:if(hn(t,e),pn(e),l&4){if(e.stateNode===null)throw Error(o(162));l=e.memoizedProps,s=e.stateNode;try{s.nodeValue=l}catch(Be){ht(e,e.return,Be)}}break;case 3:if(Wa=null,d=Vn,Vn=Fa(t.containerInfo),hn(t,e),Vn=d,pn(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{ms(t.containerInfo)}catch(Be){ht(e,e.return,Be)}Au&&(Au=!1,Rm(e));break;case 4:l=Vn,Vn=Fa(e.stateNode.containerInfo),hn(t,e),pn(e),Vn=l;break;case 12:hn(t,e),pn(e);break;case 31:hn(t,e),pn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Oa(e,l)));break;case 13:hn(t,e),pn(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Pa=$e()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Oa(e,l)));break;case 22:d=e.memoizedState!==null;var Y=s!==null&&s.memoizedState!==null,pe=mr,we=Mt;if(mr=pe||d,Mt=we||Y,hn(t,e),Mt=we,mr=pe,pn(e),l&8192)e:for(t=e.stateNode,t._visibility=d?t._visibility&-2:t._visibility|1,d&&(s===null||Y||mr||Mt||Si(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){Y=s=t;try{if(h=Y.stateNode,d)S=h.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{N=Y.stateNode;var je=Y.memoizedProps.style,me=je!=null&&je.hasOwnProperty("display")?je.display:null;N.style.display=me==null||typeof me=="boolean"?"":(""+me).trim()}}catch(Be){ht(Y,Y.return,Be)}}}else if(t.tag===6){if(s===null){Y=t;try{Y.stateNode.nodeValue=d?"":Y.memoizedProps}catch(Be){ht(Y,Y.return,Be)}}}else if(t.tag===18){if(s===null){Y=t;try{var be=Y.stateNode;d?pg(be,!0):pg(Y.stateNode,!1)}catch(Be){ht(Y,Y.return,Be)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Oa(e,s))));break;case 19:hn(t,e),pn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Oa(e,l)));break;case 30:break;case 21:break;default:hn(t,e),pn(e)}}function pn(e){var t=e.flags;if(t&2){try{for(var s,l=e.return;l!==null;){if(gm(l)){s=l;break}l=l.return}if(s==null)throw Error(o(160));switch(s.tag){case 27:var d=s.stateNode,h=ku(e);Na(e,h,d);break;case 5:var S=s.stateNode;s.flags&32&&(zi(S,""),s.flags&=-33);var N=ku(e);Na(e,N,S);break;case 3:case 4:var Y=s.stateNode.containerInfo,pe=ku(e);_u(e,pe,Y);break;default:throw Error(o(161))}}catch(we){ht(e,e.return,we)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Rm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Rm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function yr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)bm(e,t.alternate,t),t=t.sibling}function Si(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Dr(4,t,t.return),Si(t);break;case 1:Qn(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&pm(t,t.return,s),Si(t);break;case 27:mo(t.stateNode);case 26:case 5:Qn(t,t.return),Si(t);break;case 22:t.memoizedState===null&&Si(t);break;case 30:Si(t);break;default:Si(t)}e=e.sibling}}function vr(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,d=e,h=t,S=h.flags;switch(h.tag){case 0:case 11:case 15:vr(d,h,s),io(4,h);break;case 1:if(vr(d,h,s),l=h,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(pe){ht(l,l.return,pe)}if(l=h,d=l.updateQueue,d!==null){var N=l.stateNode;try{var Y=d.shared.hiddenCallbacks;if(Y!==null)for(d.shared.hiddenCallbacks=null,d=0;d<Y.length;d++)np(Y[d],N)}catch(pe){ht(l,l.return,pe)}}s&&S&64&&hm(h),so(h,h.return);break;case 27:ym(h);case 26:case 5:vr(d,h,s),s&&l===null&&S&4&&mm(h),so(h,h.return);break;case 12:vr(d,h,s);break;case 31:vr(d,h,s),s&&S&4&&wm(d,h);break;case 13:vr(d,h,s),s&&S&4&&Cm(d,h);break;case 22:h.memoizedState===null&&vr(d,h,s),so(h,h.return);break;case 30:break;default:vr(d,h,s)}t=t.sibling}}function Nu(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Gs(s))}function Ou(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Gs(e))}function Gn(e,t,s,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)jm(e,t,s,l),t=t.sibling}function jm(e,t,s,l){var d=t.flags;switch(t.tag){case 0:case 11:case 15:Gn(e,t,s,l),d&2048&&io(9,t);break;case 1:Gn(e,t,s,l);break;case 3:Gn(e,t,s,l),d&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Gs(e)));break;case 12:if(d&2048){Gn(e,t,s,l),e=t.stateNode;try{var h=t.memoizedProps,S=h.id,N=h.onPostCommit;typeof N=="function"&&N(S,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(Y){ht(t,t.return,Y)}}else Gn(e,t,s,l);break;case 31:Gn(e,t,s,l);break;case 13:Gn(e,t,s,l);break;case 23:break;case 22:h=t.stateNode,S=t.alternate,t.memoizedState!==null?h._visibility&2?Gn(e,t,s,l):oo(e,t):h._visibility&2?Gn(e,t,s,l):(h._visibility|=2,is(e,t,s,l,(t.subtreeFlags&10256)!==0||!1)),d&2048&&Nu(S,t);break;case 24:Gn(e,t,s,l),d&2048&&Ou(t.alternate,t);break;default:Gn(e,t,s,l)}}function is(e,t,s,l,d){for(d=d&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var h=e,S=t,N=s,Y=l,pe=S.flags;switch(S.tag){case 0:case 11:case 15:is(h,S,N,Y,d),io(8,S);break;case 23:break;case 22:var we=S.stateNode;S.memoizedState!==null?we._visibility&2?is(h,S,N,Y,d):oo(h,S):(we._visibility|=2,is(h,S,N,Y,d)),d&&pe&2048&&Nu(S.alternate,S);break;case 24:is(h,S,N,Y,d),d&&pe&2048&&Ou(S.alternate,S);break;default:is(h,S,N,Y,d)}t=t.sibling}}function oo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,l=t,d=l.flags;switch(l.tag){case 22:oo(s,l),d&2048&&Nu(l.alternate,l);break;case 24:oo(s,l),d&2048&&Ou(l.alternate,l);break;default:oo(s,l)}t=t.sibling}}var ao=8192;function ss(e,t,s){if(e.subtreeFlags&ao)for(e=e.child;e!==null;)Em(e,t,s),e=e.sibling}function Em(e,t,s){switch(e.tag){case 26:ss(e,t,s),e.flags&ao&&e.memoizedState!==null&&yw(s,Vn,e.memoizedState,e.memoizedProps);break;case 5:ss(e,t,s);break;case 3:case 4:var l=Vn;Vn=Fa(e.stateNode.containerInfo),ss(e,t,s),Vn=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=ao,ao=16777216,ss(e,t,s),ao=l):ss(e,t,s));break;default:ss(e,t,s)}}function km(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function lo(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var l=t[s];Bt=l,Am(l,e)}km(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)_m(e),e=e.sibling}function _m(e){switch(e.tag){case 0:case 11:case 15:lo(e),e.flags&2048&&Dr(9,e,e.return);break;case 3:lo(e);break;case 12:lo(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ma(e)):lo(e);break;default:lo(e)}}function Ma(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var l=t[s];Bt=l,Am(l,e)}km(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Dr(8,t,t.return),Ma(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,Ma(t));break;default:Ma(t)}e=e.sibling}}function Am(e,t){for(;Bt!==null;){var s=Bt;switch(s.tag){case 0:case 11:case 15:Dr(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Gs(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,Bt=l;else e:for(s=e;Bt!==null;){l=Bt;var d=l.sibling,h=l.return;if(Sm(l),l===s){Bt=null;break e}if(d!==null){d.return=h,Bt=d;break e}Bt=h}}}var Ox={getCacheForType:function(e){var t=Gt(At),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s},cacheSignal:function(){return Gt(At).controller.signal}},Mx=typeof WeakMap=="function"?WeakMap:Map,ut=0,yt=null,et=null,rt=0,ft=0,Tn=null,Ir=!1,os=!1,Mu=!1,br=0,jt=0,zr=0,xi=0,Pu=0,Rn=0,as=0,co=null,mn=null,Uu=!1,Pa=0,Nm=0,Ua=1/0,Da=null,Lr=null,zt=0,Br=null,ls=null,Sr=0,Du=0,Iu=null,Om=null,uo=0,zu=null;function jn(){return(ut&2)!==0&&rt!==0?rt&-rt:q.T!==null?Vu():Wf()}function Mm(){if(Rn===0)if((rt&536870912)===0||st){var e=Hn;Hn<<=1,(Hn&3932160)===0&&(Hn=262144),Rn=e}else Rn=536870912;return e=wn.current,e!==null&&(e.flags|=32),Rn}function gn(e,t,s){(e===yt&&(ft===2||ft===9)||e.cancelPendingCommit!==null)&&(cs(e,0),Hr(e,rt,Rn,!1)),Ns(e,s),((ut&2)===0||e!==yt)&&(e===yt&&((ut&2)===0&&(xi|=s),jt===4&&Hr(e,rt,Rn,!1)),Zn(e))}function Pm(e,t,s){if((ut&6)!==0)throw Error(o(327));var l=!s&&(t&127)===0&&(t&e.expiredLanes)===0||ii(e,t),d=l?Dx(e,t):Bu(e,t,!0),h=l;do{if(d===0){os&&!l&&Hr(e,t,0,!1);break}else{if(s=e.current.alternate,h&&!Px(s)){d=Bu(e,t,!1),h=!1;continue}if(d===2){if(h=t,e.errorRecoveryDisabledLanes&h)var S=0;else S=e.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){t=S;e:{var N=e;d=co;var Y=N.current.memoizedState.isDehydrated;if(Y&&(cs(N,S).flags|=256),S=Bu(N,S,!1),S!==2){if(Mu&&!Y){N.errorRecoveryDisabledLanes|=h,xi|=h,d=4;break e}h=mn,mn=d,h!==null&&(mn===null?mn=h:mn.push.apply(mn,h))}d=S}if(h=!1,d!==2)continue}}if(d===1){cs(e,0),Hr(e,t,0,!0);break}e:{switch(l=e,h=d,h){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:Hr(l,t,Rn,!Ir);break e;case 2:mn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(d=Pa+300-$e(),10<d)){if(Hr(l,t,Rn,!Ir),An(l,0,!0)!==0)break e;Sr=t,l.timeoutHandle=dg(Um.bind(null,l,s,mn,Da,Uu,t,Rn,xi,as,Ir,h,"Throttled",-0,0),d);break e}Um(l,s,mn,Da,Uu,t,Rn,xi,as,Ir,h,null,-0,0)}}break}while(!0);Zn(e)}function Um(e,t,s,l,d,h,S,N,Y,pe,we,je,me,be){if(e.timeoutHandle=-1,je=t.subtreeFlags,je&8192||(je&16785408)===16785408){je={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:sr},Em(t,h,je);var Be=(h&62914560)===h?Pa-$e():(h&4194048)===h?Nm-$e():0;if(Be=vw(je,Be),Be!==null){Sr=h,e.cancelPendingCommit=Be($m.bind(null,e,t,h,s,l,d,S,N,Y,we,je,null,me,be)),Hr(e,h,S,!pe);return}}$m(e,t,h,s,l,d,S,N,Y)}function Px(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var d=s[l],h=d.getSnapshot;d=d.value;try{if(!Sn(h(),d))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hr(e,t,s,l){t&=~Pu,t&=~xi,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var d=t;0<d;){var h=31-ye(d),S=1<<h;l[h]=-1,d&=~S}s!==0&&Gf(e,s,t)}function Ia(){return(ut&6)===0?(fo(0),!1):!0}function Lu(){if(et!==null){if(ft===0)var e=et.return;else e=et,cr=fi=null,tu(e),Zi=null,Ys=0,e=et;for(;e!==null;)fm(e.alternate,e),e=e.return;et=null}}function cs(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,ew(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Sr=0,Lu(),yt=e,et=s=ar(e.current,null),rt=t,ft=0,Tn=null,Ir=!1,os=ii(e,t),Mu=!1,as=Rn=Pu=xi=zr=jt=0,mn=co=null,Uu=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var d=31-ye(l),h=1<<d;t|=e[d],l&=~h}return br=t,ia(),s}function Dm(e,t){Je=null,q.H=to,t===Qi||t===fa?(t=Qh(),ft=3):t===$c?(t=Qh(),ft=4):ft=t===yu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Tn=t,et===null&&(jt=1,ja(e,Pn(t,e.current)))}function Im(){var e=wn.current;return e===null?!0:(rt&4194048)===rt?zn===null:(rt&62914560)===rt||(rt&536870912)!==0?e===zn:!1}function zm(){var e=q.H;return q.H=to,e===null?to:e}function Lm(){var e=q.A;return q.A=Ox,e}function za(){jt=4,Ir||(rt&4194048)!==rt&&wn.current!==null||(os=!0),(zr&134217727)===0&&(xi&134217727)===0||yt===null||Hr(yt,rt,Rn,!1)}function Bu(e,t,s){var l=ut;ut|=2;var d=zm(),h=Lm();(yt!==e||rt!==t)&&(Da=null,cs(e,t)),t=!1;var S=jt;e:do try{if(ft!==0&&et!==null){var N=et,Y=Tn;switch(ft){case 8:Lu(),S=6;break e;case 3:case 2:case 9:case 6:wn.current===null&&(t=!0);var pe=ft;if(ft=0,Tn=null,us(e,N,Y,pe),s&&os){S=0;break e}break;default:pe=ft,ft=0,Tn=null,us(e,N,Y,pe)}}Ux(),S=jt;break}catch(we){Dm(e,we)}while(!0);return t&&e.shellSuspendCounter++,cr=fi=null,ut=l,q.H=d,q.A=h,et===null&&(yt=null,rt=0,ia()),S}function Ux(){for(;et!==null;)Bm(et)}function Dx(e,t){var s=ut;ut|=2;var l=zm(),d=Lm();yt!==e||rt!==t?(Da=null,Ua=$e()+500,cs(e,t)):os=ii(e,t);e:do try{if(ft!==0&&et!==null){t=et;var h=Tn;t:switch(ft){case 1:ft=0,Tn=null,us(e,t,h,1);break;case 2:case 9:if(Jh(h)){ft=0,Tn=null,Hm(t);break}t=function(){ft!==2&&ft!==9||yt!==e||(ft=7),Zn(e)},h.then(t,t);break e;case 3:ft=7;break e;case 4:ft=5;break e;case 7:Jh(h)?(ft=0,Tn=null,Hm(t)):(ft=0,Tn=null,us(e,t,h,7));break;case 5:var S=null;switch(et.tag){case 26:S=et.memoizedState;case 5:case 27:var N=et;if(S?jg(S):N.stateNode.complete){ft=0,Tn=null;var Y=N.sibling;if(Y!==null)et=Y;else{var pe=N.return;pe!==null?(et=pe,La(pe)):et=null}break t}}ft=0,Tn=null,us(e,t,h,5);break;case 6:ft=0,Tn=null,us(e,t,h,6);break;case 8:Lu(),jt=6;break e;default:throw Error(o(462))}}Ix();break}catch(we){Dm(e,we)}while(!0);return cr=fi=null,q.H=l,q.A=d,ut=s,et!==null?0:(yt=null,rt=0,ia(),jt)}function Ix(){for(;et!==null&&!_e();)Bm(et)}function Bm(e){var t=um(e.alternate,e,br);e.memoizedProps=e.pendingProps,t===null?La(e):et=t}function Hm(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=im(s,t,t.pendingProps,t.type,void 0,rt);break;case 11:t=im(s,t,t.pendingProps,t.type.render,t.ref,rt);break;case 5:tu(t);default:fm(s,t),t=et=Lh(t,br),t=um(s,t,br)}e.memoizedProps=e.pendingProps,t===null?La(e):et=t}function us(e,t,s,l){cr=fi=null,tu(t),Zi=null,Ys=0;var d=t.return;try{if(Rx(e,d,t,s,rt)){jt=1,ja(e,Pn(s,e.current)),et=null;return}}catch(h){if(d!==null)throw et=d,h;jt=1,ja(e,Pn(s,e.current)),et=null;return}t.flags&32768?(st||l===1?e=!0:os||(rt&536870912)!==0?e=!1:(Ir=e=!0,(l===2||l===9||l===3||l===6)&&(l=wn.current,l!==null&&l.tag===13&&(l.flags|=16384))),qm(t,e)):La(t)}function La(e){var t=e;do{if((t.flags&32768)!==0){qm(t,Ir);return}e=t.return;var s=kx(t.alternate,t,br);if(s!==null){et=s;return}if(t=t.sibling,t!==null){et=t;return}et=t=e}while(t!==null);jt===0&&(jt=5)}function qm(e,t){do{var s=_x(e.alternate,e);if(s!==null){s.flags&=32767,et=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){et=e;return}et=e=s}while(e!==null);jt=6,et=null}function $m(e,t,s,l,d,h,S,N,Y){e.cancelPendingCommit=null;do Ba();while(zt!==0);if((ut&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(h=t.lanes|t.childLanes,h|=kc,gS(e,s,h,S,N,Y),e===yt&&(et=yt=null,rt=0),ls=t,Br=e,Sr=s,Du=h,Iu=d,Om=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Hx(A,function(){return Wm(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=q.T,q.T=null,d=P.p,P.p=2,S=ut,ut|=4;try{Ax(e,t,s)}finally{ut=S,P.p=d,q.T=l}}zt=1,Vm(),Gm(),Fm()}}function Vm(){if(zt===1){zt=0;var e=Br,t=ls,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=q.T,q.T=null;var l=P.p;P.p=2;var d=ut;ut|=4;try{Tm(t,e);var h=Qu,S=Ah(e.containerInfo),N=h.focusedElem,Y=h.selectionRange;if(S!==N&&N&&N.ownerDocument&&_h(N.ownerDocument.documentElement,N)){if(Y!==null&&Cc(N)){var pe=Y.start,we=Y.end;if(we===void 0&&(we=pe),"selectionStart"in N)N.selectionStart=pe,N.selectionEnd=Math.min(we,N.value.length);else{var je=N.ownerDocument||document,me=je&&je.defaultView||window;if(me.getSelection){var be=me.getSelection(),Be=N.textContent.length,Fe=Math.min(Y.start,Be),gt=Y.end===void 0?Fe:Math.min(Y.end,Be);!be.extend&&Fe>gt&&(S=gt,gt=Fe,Fe=S);var ie=kh(N,Fe),Q=kh(N,gt);if(ie&&Q&&(be.rangeCount!==1||be.anchorNode!==ie.node||be.anchorOffset!==ie.offset||be.focusNode!==Q.node||be.focusOffset!==Q.offset)){var he=je.createRange();he.setStart(ie.node,ie.offset),be.removeAllRanges(),Fe>gt?(be.addRange(he),be.extend(Q.node,Q.offset)):(he.setEnd(Q.node,Q.offset),be.addRange(he))}}}}for(je=[],be=N;be=be.parentNode;)be.nodeType===1&&je.push({element:be,left:be.scrollLeft,top:be.scrollTop});for(typeof N.focus=="function"&&N.focus(),N=0;N<je.length;N++){var Ce=je[N];Ce.element.scrollLeft=Ce.left,Ce.element.scrollTop=Ce.top}}Qa=!!Ku,Qu=Ku=null}finally{ut=d,P.p=l,q.T=s}}e.current=t,zt=2}}function Gm(){if(zt===2){zt=0;var e=Br,t=ls,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=q.T,q.T=null;var l=P.p;P.p=2;var d=ut;ut|=4;try{bm(e,t.alternate,t)}finally{ut=d,P.p=l,q.T=s}}zt=3}}function Fm(){if(zt===4||zt===3){zt=0,Ne();var e=Br,t=ls,s=Sr,l=Om;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?zt=5:(zt=0,ls=Br=null,Ym(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(Lr=null),ic(s),t=t.stateNode,Oe&&typeof Oe.onCommitFiberRoot=="function")try{Oe.onCommitFiberRoot(ze,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=q.T,d=P.p,P.p=2,q.T=null;try{for(var h=e.onRecoverableError,S=0;S<l.length;S++){var N=l[S];h(N.value,{componentStack:N.stack})}}finally{q.T=t,P.p=d}}(Sr&3)!==0&&Ba(),Zn(e),d=e.pendingLanes,(s&261930)!==0&&(d&42)!==0?e===zu?uo++:(uo=0,zu=e):uo=0,fo(0)}}function Ym(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Gs(t)))}function Ba(){return Vm(),Gm(),Fm(),Wm()}function Wm(){if(zt!==5)return!1;var e=Br,t=Du;Du=0;var s=ic(Sr),l=q.T,d=P.p;try{P.p=32>s?32:s,q.T=null,s=Iu,Iu=null;var h=Br,S=Sr;if(zt=0,ls=Br=null,Sr=0,(ut&6)!==0)throw Error(o(331));var N=ut;if(ut|=4,_m(h.current),jm(h,h.current,S,s),ut=N,fo(0,!1),Oe&&typeof Oe.onPostCommitFiberRoot=="function")try{Oe.onPostCommitFiberRoot(ze,h)}catch{}return!0}finally{P.p=d,q.T=l,Ym(e,t)}}function Xm(e,t,s){t=Pn(s,t),t=gu(e.stateNode,t,2),e=Mr(e,t,2),e!==null&&(Ns(e,2),Zn(e))}function ht(e,t,s){if(e.tag===3)Xm(e,e,s);else for(;t!==null;){if(t.tag===3){Xm(t,e,s);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Lr===null||!Lr.has(l))){e=Pn(s,e),s=Jp(2),l=Mr(t,s,2),l!==null&&(Kp(s,l,t,e),Ns(l,2),Zn(l));break}}t=t.return}}function Hu(e,t,s){var l=e.pingCache;if(l===null){l=e.pingCache=new Mx;var d=new Set;l.set(t,d)}else d=l.get(t),d===void 0&&(d=new Set,l.set(t,d));d.has(s)||(Mu=!0,d.add(s),e=zx.bind(null,e,t,s),t.then(e,e))}function zx(e,t,s){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,yt===e&&(rt&s)===s&&(jt===4||jt===3&&(rt&62914560)===rt&&300>$e()-Pa?(ut&2)===0&&cs(e,0):Pu|=s,as===rt&&(as=0)),Zn(e)}function Jm(e,t){t===0&&(t=Vf()),e=ci(e,t),e!==null&&(Ns(e,t),Zn(e))}function Lx(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Jm(e,s)}function Bx(e,t){var s=0;switch(e.tag){case 31:case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(s=d.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(o(314))}l!==null&&l.delete(t),Jm(e,s)}function Hx(e,t){return Ee(e,t)}var Ha=null,ds=null,qu=!1,qa=!1,$u=!1,qr=0;function Zn(e){e!==ds&&e.next===null&&(ds===null?Ha=ds=e:ds=ds.next=e),qa=!0,qu||(qu=!0,$x())}function fo(e,t){if(!$u&&qa){$u=!0;do for(var s=!1,l=Ha;l!==null;){if(e!==0){var d=l.pendingLanes;if(d===0)var h=0;else{var S=l.suspendedLanes,N=l.pingedLanes;h=(1<<31-ye(42|e)+1)-1,h&=d&~(S&~N),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(s=!0,eg(l,h))}else h=rt,h=An(l,l===yt?h:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(h&3)===0||ii(l,h)||(s=!0,eg(l,h));l=l.next}while(s);$u=!1}}function qx(){Km()}function Km(){qa=qu=!1;var e=0;qr!==0&&Zx()&&(e=qr);for(var t=$e(),s=null,l=Ha;l!==null;){var d=l.next,h=Qm(l,t);h===0?(l.next=null,s===null?Ha=d:s.next=d,d===null&&(ds=s)):(s=l,(e!==0||(h&3)!==0)&&(qa=!0)),l=d}zt!==0&&zt!==5||fo(e),qr!==0&&(qr=0)}function Qm(e,t){for(var s=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var S=31-ye(h),N=1<<S,Y=d[S];Y===-1?((N&s)===0||(N&l)!==0)&&(d[S]=mS(N,t)):Y<=t&&(e.expiredLanes|=N),h&=~N}if(t=yt,s=rt,s=An(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,s===0||e===t&&(ft===2||ft===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Ae(l),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||ii(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(l!==null&&Ae(l),ic(s)){case 2:case 8:s=y;break;case 32:s=A;break;case 268435456:s=$;break;default:s=A}return l=Zm.bind(null,e),s=Ee(s,l),e.callbackPriority=t,e.callbackNode=s,t}return l!==null&&l!==null&&Ae(l),e.callbackPriority=2,e.callbackNode=null,2}function Zm(e,t){if(zt!==0&&zt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Ba()&&e.callbackNode!==s)return null;var l=rt;return l=An(e,e===yt?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(Pm(e,l,t),Qm(e,$e()),e.callbackNode!=null&&e.callbackNode===s?Zm.bind(null,e):null)}function eg(e,t){if(Ba())return null;Pm(e,t,!0)}function $x(){tw(function(){(ut&6)!==0?Ee(M,qx):Km()})}function Vu(){if(qr===0){var e=Ji;e===0&&(e=vt,vt<<=1,(vt&261888)===0&&(vt=256)),qr=e}return qr}function tg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Jo(""+e)}function ng(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function Vx(e,t,s,l,d){if(t==="submit"&&s&&s.stateNode===d){var h=tg((d[un]||null).action),S=l.submitter;S&&(t=(t=S[un]||null)?tg(t.formAction):S.getAttribute("formAction"),t!==null&&(h=t,S=null));var N=new ea("action","action",null,l,d);e.push({event:N,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(qr!==0){var Y=S?ng(d,S):new FormData(d);uu(s,{pending:!0,data:Y,method:d.method,action:h},null,Y)}}else typeof h=="function"&&(N.preventDefault(),Y=S?ng(d,S):new FormData(d),uu(s,{pending:!0,data:Y,method:d.method,action:h},h,Y))},currentTarget:d}]})}}for(var Gu=0;Gu<Ec.length;Gu++){var Fu=Ec[Gu],Gx=Fu.toLowerCase(),Fx=Fu[0].toUpperCase()+Fu.slice(1);$n(Gx,"on"+Fx)}$n(Mh,"onAnimationEnd"),$n(Ph,"onAnimationIteration"),$n(Uh,"onAnimationStart"),$n("dblclick","onDoubleClick"),$n("focusin","onFocus"),$n("focusout","onBlur"),$n(lx,"onTransitionRun"),$n(cx,"onTransitionStart"),$n(ux,"onTransitionCancel"),$n(Dh,"onTransitionEnd"),Di("onMouseEnter",["mouseout","mouseover"]),Di("onMouseLeave",["mouseout","mouseover"]),Di("onPointerEnter",["pointerout","pointerover"]),Di("onPointerLeave",["pointerout","pointerover"]),si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),si("onBeforeInput",["compositionend","keypress","textInput","paste"]),si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ho));function rg(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],d=l.event;l=l.listeners;e:{var h=void 0;if(t)for(var S=l.length-1;0<=S;S--){var N=l[S],Y=N.instance,pe=N.currentTarget;if(N=N.listener,Y!==h&&d.isPropagationStopped())break e;h=N,d.currentTarget=pe;try{h(d)}catch(we){ra(we)}d.currentTarget=null,h=Y}else for(S=0;S<l.length;S++){if(N=l[S],Y=N.instance,pe=N.currentTarget,N=N.listener,Y!==h&&d.isPropagationStopped())break e;h=N,d.currentTarget=pe;try{h(d)}catch(we){ra(we)}d.currentTarget=null,h=Y}}}}function tt(e,t){var s=t[sc];s===void 0&&(s=t[sc]=new Set);var l=e+"__bubble";s.has(l)||(ig(t,e,2,!1),s.add(l))}function Yu(e,t,s){var l=0;t&&(l|=4),ig(s,e,l,t)}var $a="_reactListening"+Math.random().toString(36).slice(2);function Wu(e){if(!e[$a]){e[$a]=!0,Kf.forEach(function(s){s!=="selectionchange"&&(Yx.has(s)||Yu(s,!1,e),Yu(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$a]||(t[$a]=!0,Yu("selectionchange",!1,t))}}function ig(e,t,s,l){switch(Mg(t)){case 2:var d=xw;break;case 8:d=ww;break;default:d=cd}s=d.bind(null,t,s,e),d=void 0,!pc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(t,s,{capture:!0,passive:d}):e.addEventListener(t,s,!0):d!==void 0?e.addEventListener(t,s,{passive:d}):e.addEventListener(t,s,!1)}function Xu(e,t,s,l,d){var h=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var S=l.tag;if(S===3||S===4){var N=l.stateNode.containerInfo;if(N===d)break;if(S===4)for(S=l.return;S!==null;){var Y=S.tag;if((Y===3||Y===4)&&S.stateNode.containerInfo===d)return;S=S.return}for(;N!==null;){if(S=Mi(N),S===null)return;if(Y=S.tag,Y===5||Y===6||Y===26||Y===27){l=h=S;continue e}N=N.parentNode}}l=l.return}ch(function(){var pe=h,we=fc(s),je=[];e:{var me=Ih.get(e);if(me!==void 0){var be=ea,Be=e;switch(e){case"keypress":if(Qo(s)===0)break e;case"keydown":case"keyup":be=BS;break;case"focusin":Be="focus",be=vc;break;case"focusout":Be="blur",be=vc;break;case"beforeblur":case"afterblur":be=vc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":be=fh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":be=kS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":be=$S;break;case Mh:case Ph:case Uh:be=NS;break;case Dh:be=GS;break;case"scroll":case"scrollend":be=jS;break;case"wheel":be=YS;break;case"copy":case"cut":case"paste":be=MS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":be=ph;break;case"toggle":case"beforetoggle":be=XS}var Fe=(t&4)!==0,gt=!Fe&&(e==="scroll"||e==="scrollend"),ie=Fe?me!==null?me+"Capture":null:me;Fe=[];for(var Q=pe,he;Q!==null;){var Ce=Q;if(he=Ce.stateNode,Ce=Ce.tag,Ce!==5&&Ce!==26&&Ce!==27||he===null||ie===null||(Ce=Ps(Q,ie),Ce!=null&&Fe.push(po(Q,Ce,he))),gt)break;Q=Q.return}0<Fe.length&&(me=new be(me,Be,null,s,we),je.push({event:me,listeners:Fe}))}}if((t&7)===0){e:{if(me=e==="mouseover"||e==="pointerover",be=e==="mouseout"||e==="pointerout",me&&s!==dc&&(Be=s.relatedTarget||s.fromElement)&&(Mi(Be)||Be[Oi]))break e;if((be||me)&&(me=we.window===we?we:(me=we.ownerDocument)?me.defaultView||me.parentWindow:window,be?(Be=s.relatedTarget||s.toElement,be=pe,Be=Be?Mi(Be):null,Be!==null&&(gt=u(Be),Fe=Be.tag,Be!==gt||Fe!==5&&Fe!==27&&Fe!==6)&&(Be=null)):(be=null,Be=pe),be!==Be)){if(Fe=fh,Ce="onMouseLeave",ie="onMouseEnter",Q="mouse",(e==="pointerout"||e==="pointerover")&&(Fe=ph,Ce="onPointerLeave",ie="onPointerEnter",Q="pointer"),gt=be==null?me:Ms(be),he=Be==null?me:Ms(Be),me=new Fe(Ce,Q+"leave",be,s,we),me.target=gt,me.relatedTarget=he,Ce=null,Mi(we)===pe&&(Fe=new Fe(ie,Q+"enter",Be,s,we),Fe.target=he,Fe.relatedTarget=gt,Ce=Fe),gt=Ce,be&&Be)t:{for(Fe=Wx,ie=be,Q=Be,he=0,Ce=ie;Ce;Ce=Fe(Ce))he++;Ce=0;for(var Ve=Q;Ve;Ve=Fe(Ve))Ce++;for(;0<he-Ce;)ie=Fe(ie),he--;for(;0<Ce-he;)Q=Fe(Q),Ce--;for(;he--;){if(ie===Q||Q!==null&&ie===Q.alternate){Fe=ie;break t}ie=Fe(ie),Q=Fe(Q)}Fe=null}else Fe=null;be!==null&&sg(je,me,be,Fe,!1),Be!==null&&gt!==null&&sg(je,gt,Be,Fe,!0)}}e:{if(me=pe?Ms(pe):window,be=me.nodeName&&me.nodeName.toLowerCase(),be==="select"||be==="input"&&me.type==="file")var at=wh;else if(Sh(me))if(Ch)at=sx;else{at=rx;var qe=nx}else be=me.nodeName,!be||be.toLowerCase()!=="input"||me.type!=="checkbox"&&me.type!=="radio"?pe&&uc(pe.elementType)&&(at=wh):at=ix;if(at&&(at=at(e,pe))){xh(je,at,s,we);break e}qe&&qe(e,me,pe),e==="focusout"&&pe&&me.type==="number"&&pe.memoizedProps.value!=null&&cc(me,"number",me.value)}switch(qe=pe?Ms(pe):window,e){case"focusin":(Sh(qe)||qe.contentEditable==="true")&&(qi=qe,Tc=pe,qs=null);break;case"focusout":qs=Tc=qi=null;break;case"mousedown":Rc=!0;break;case"contextmenu":case"mouseup":case"dragend":Rc=!1,Nh(je,s,we);break;case"selectionchange":if(ax)break;case"keydown":case"keyup":Nh(je,s,we)}var Ze;if(Sc)e:{switch(e){case"compositionstart":var it="onCompositionStart";break e;case"compositionend":it="onCompositionEnd";break e;case"compositionupdate":it="onCompositionUpdate";break e}it=void 0}else Hi?vh(e,s)&&(it="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(it="onCompositionStart");it&&(mh&&s.locale!=="ko"&&(Hi||it!=="onCompositionStart"?it==="onCompositionEnd"&&Hi&&(Ze=uh()):(jr=we,mc="value"in jr?jr.value:jr.textContent,Hi=!0)),qe=Va(pe,it),0<qe.length&&(it=new hh(it,e,null,s,we),je.push({event:it,listeners:qe}),Ze?it.data=Ze:(Ze=bh(s),Ze!==null&&(it.data=Ze)))),(Ze=KS?QS(e,s):ZS(e,s))&&(it=Va(pe,"onBeforeInput"),0<it.length&&(qe=new hh("onBeforeInput","beforeinput",null,s,we),je.push({event:qe,listeners:it}),qe.data=Ze)),Vx(je,e,pe,s,we)}rg(je,t)})}function po(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Va(e,t){for(var s=t+"Capture",l=[];e!==null;){var d=e,h=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||h===null||(d=Ps(e,s),d!=null&&l.unshift(po(e,d,h)),d=Ps(e,t),d!=null&&l.push(po(e,d,h))),e.tag===3)return l;e=e.return}return[]}function Wx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function sg(e,t,s,l,d){for(var h=t._reactName,S=[];s!==null&&s!==l;){var N=s,Y=N.alternate,pe=N.stateNode;if(N=N.tag,Y!==null&&Y===l)break;N!==5&&N!==26&&N!==27||pe===null||(Y=pe,d?(pe=Ps(s,h),pe!=null&&S.unshift(po(s,pe,Y))):d||(pe=Ps(s,h),pe!=null&&S.push(po(s,pe,Y)))),s=s.return}S.length!==0&&e.push({event:t,listeners:S})}var Xx=/\r\n?/g,Jx=/\u0000|\uFFFD/g;function og(e){return(typeof e=="string"?e:""+e).replace(Xx,`
`).replace(Jx,"")}function ag(e,t){return t=og(t),og(e)===t}function mt(e,t,s,l,d,h){switch(s){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||zi(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&zi(e,""+l);break;case"className":Wo(e,"class",l);break;case"tabIndex":Wo(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Wo(e,s,l);break;case"style":ah(e,l,h);break;case"data":if(t!=="object"){Wo(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Jo(""+l),e.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(s==="formAction"?(t!=="input"&&mt(e,t,"name",d.name,d,null),mt(e,t,"formEncType",d.formEncType,d,null),mt(e,t,"formMethod",d.formMethod,d,null),mt(e,t,"formTarget",d.formTarget,d,null)):(mt(e,t,"encType",d.encType,d,null),mt(e,t,"method",d.method,d,null),mt(e,t,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Jo(""+l),e.setAttribute(s,l);break;case"onClick":l!=null&&(e.onclick=sr);break;case"onScroll":l!=null&&tt("scroll",e);break;case"onScrollEnd":l!=null&&tt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(s=l.__html,s!=null){if(d.children!=null)throw Error(o(60));e.innerHTML=s}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}s=Jo(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""+l):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":l===!0?e.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,l):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(s,l):e.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(s):e.setAttribute(s,l);break;case"popover":tt("beforetoggle",e),tt("toggle",e),Yo(e,"popover",l);break;case"xlinkActuate":ir(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":ir(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":ir(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":ir(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":ir(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":ir(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":ir(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":ir(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":ir(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Yo(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=TS.get(s)||s,Yo(e,s,l))}}function Ju(e,t,s,l,d,h){switch(s){case"style":ah(e,l,h);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(s=l.__html,s!=null){if(d.children!=null)throw Error(o(60));e.innerHTML=s}}break;case"children":typeof l=="string"?zi(e,l):(typeof l=="number"||typeof l=="bigint")&&zi(e,""+l);break;case"onScroll":l!=null&&tt("scroll",e);break;case"onScrollEnd":l!=null&&tt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=sr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qf.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(d=s.endsWith("Capture"),t=s.slice(2,d?s.length-7:void 0),h=e[un]||null,h=h!=null?h[s]:null,typeof h=="function"&&e.removeEventListener(t,h,d),typeof l=="function")){typeof h!="function"&&h!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,l,d);break e}s in e?e[s]=l:l===!0?e.setAttribute(s,""):Yo(e,s,l)}}}function Yt(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",e),tt("load",e);var l=!1,d=!1,h;for(h in s)if(s.hasOwnProperty(h)){var S=s[h];if(S!=null)switch(h){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:mt(e,t,h,S,s,null)}}d&&mt(e,t,"srcSet",s.srcSet,s,null),l&&mt(e,t,"src",s.src,s,null);return;case"input":tt("invalid",e);var N=h=S=d=null,Y=null,pe=null;for(l in s)if(s.hasOwnProperty(l)){var we=s[l];if(we!=null)switch(l){case"name":d=we;break;case"type":S=we;break;case"checked":Y=we;break;case"defaultChecked":pe=we;break;case"value":h=we;break;case"defaultValue":N=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(o(137,t));break;default:mt(e,t,l,we,s,null)}}rh(e,h,N,Y,pe,S,d,!1);return;case"select":tt("invalid",e),l=S=h=null;for(d in s)if(s.hasOwnProperty(d)&&(N=s[d],N!=null))switch(d){case"value":h=N;break;case"defaultValue":S=N;break;case"multiple":l=N;default:mt(e,t,d,N,s,null)}t=h,s=S,e.multiple=!!l,t!=null?Ii(e,!!l,t,!1):s!=null&&Ii(e,!!l,s,!0);return;case"textarea":tt("invalid",e),h=d=l=null;for(S in s)if(s.hasOwnProperty(S)&&(N=s[S],N!=null))switch(S){case"value":l=N;break;case"defaultValue":d=N;break;case"children":h=N;break;case"dangerouslySetInnerHTML":if(N!=null)throw Error(o(91));break;default:mt(e,t,S,N,s,null)}sh(e,l,d,h);return;case"option":for(Y in s)s.hasOwnProperty(Y)&&(l=s[Y],l!=null)&&(Y==="selected"?e.selected=l&&typeof l!="function"&&typeof l!="symbol":mt(e,t,Y,l,s,null));return;case"dialog":tt("beforetoggle",e),tt("toggle",e),tt("cancel",e),tt("close",e);break;case"iframe":case"object":tt("load",e);break;case"video":case"audio":for(l=0;l<ho.length;l++)tt(ho[l],e);break;case"image":tt("error",e),tt("load",e);break;case"details":tt("toggle",e);break;case"embed":case"source":case"link":tt("error",e),tt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(pe in s)if(s.hasOwnProperty(pe)&&(l=s[pe],l!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:mt(e,t,pe,l,s,null)}return;default:if(uc(t)){for(we in s)s.hasOwnProperty(we)&&(l=s[we],l!==void 0&&Ju(e,t,we,l,s,void 0));return}}for(N in s)s.hasOwnProperty(N)&&(l=s[N],l!=null&&mt(e,t,N,l,s,null))}function Kx(e,t,s,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,h=null,S=null,N=null,Y=null,pe=null,we=null;for(be in s){var je=s[be];if(s.hasOwnProperty(be)&&je!=null)switch(be){case"checked":break;case"value":break;case"defaultValue":Y=je;default:l.hasOwnProperty(be)||mt(e,t,be,null,l,je)}}for(var me in l){var be=l[me];if(je=s[me],l.hasOwnProperty(me)&&(be!=null||je!=null))switch(me){case"type":h=be;break;case"name":d=be;break;case"checked":pe=be;break;case"defaultChecked":we=be;break;case"value":S=be;break;case"defaultValue":N=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(o(137,t));break;default:be!==je&&mt(e,t,me,be,l,je)}}lc(e,S,N,Y,pe,we,h,d);return;case"select":be=S=N=me=null;for(h in s)if(Y=s[h],s.hasOwnProperty(h)&&Y!=null)switch(h){case"value":break;case"multiple":be=Y;default:l.hasOwnProperty(h)||mt(e,t,h,null,l,Y)}for(d in l)if(h=l[d],Y=s[d],l.hasOwnProperty(d)&&(h!=null||Y!=null))switch(d){case"value":me=h;break;case"defaultValue":N=h;break;case"multiple":S=h;default:h!==Y&&mt(e,t,d,h,l,Y)}t=N,s=S,l=be,me!=null?Ii(e,!!s,me,!1):!!l!=!!s&&(t!=null?Ii(e,!!s,t,!0):Ii(e,!!s,s?[]:"",!1));return;case"textarea":be=me=null;for(N in s)if(d=s[N],s.hasOwnProperty(N)&&d!=null&&!l.hasOwnProperty(N))switch(N){case"value":break;case"children":break;default:mt(e,t,N,null,l,d)}for(S in l)if(d=l[S],h=s[S],l.hasOwnProperty(S)&&(d!=null||h!=null))switch(S){case"value":me=d;break;case"defaultValue":be=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(o(91));break;default:d!==h&&mt(e,t,S,d,l,h)}ih(e,me,be);return;case"option":for(var Be in s)me=s[Be],s.hasOwnProperty(Be)&&me!=null&&!l.hasOwnProperty(Be)&&(Be==="selected"?e.selected=!1:mt(e,t,Be,null,l,me));for(Y in l)me=l[Y],be=s[Y],l.hasOwnProperty(Y)&&me!==be&&(me!=null||be!=null)&&(Y==="selected"?e.selected=me&&typeof me!="function"&&typeof me!="symbol":mt(e,t,Y,me,l,be));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Fe in s)me=s[Fe],s.hasOwnProperty(Fe)&&me!=null&&!l.hasOwnProperty(Fe)&&mt(e,t,Fe,null,l,me);for(pe in l)if(me=l[pe],be=s[pe],l.hasOwnProperty(pe)&&me!==be&&(me!=null||be!=null))switch(pe){case"children":case"dangerouslySetInnerHTML":if(me!=null)throw Error(o(137,t));break;default:mt(e,t,pe,me,l,be)}return;default:if(uc(t)){for(var gt in s)me=s[gt],s.hasOwnProperty(gt)&&me!==void 0&&!l.hasOwnProperty(gt)&&Ju(e,t,gt,void 0,l,me);for(we in l)me=l[we],be=s[we],!l.hasOwnProperty(we)||me===be||me===void 0&&be===void 0||Ju(e,t,we,me,l,be);return}}for(var ie in s)me=s[ie],s.hasOwnProperty(ie)&&me!=null&&!l.hasOwnProperty(ie)&&mt(e,t,ie,null,l,me);for(je in l)me=l[je],be=s[je],!l.hasOwnProperty(je)||me===be||me==null&&be==null||mt(e,t,je,me,l,be)}function lg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Qx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,s=performance.getEntriesByType("resource"),l=0;l<s.length;l++){var d=s[l],h=d.transferSize,S=d.initiatorType,N=d.duration;if(h&&N&&lg(S)){for(S=0,N=d.responseEnd,l+=1;l<s.length;l++){var Y=s[l],pe=Y.startTime;if(pe>N)break;var we=Y.transferSize,je=Y.initiatorType;we&&lg(je)&&(Y=Y.responseEnd,S+=we*(Y<N?1:(N-pe)/(Y-pe)))}if(--l,t+=8*(h+S)/(d.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ku=null,Qu=null;function Ga(e){return e.nodeType===9?e:e.ownerDocument}function cg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ug(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Zu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ed=null;function Zx(){var e=window.event;return e&&e.type==="popstate"?e===ed?!1:(ed=e,!0):(ed=null,!1)}var dg=typeof setTimeout=="function"?setTimeout:void 0,ew=typeof clearTimeout=="function"?clearTimeout:void 0,fg=typeof Promise=="function"?Promise:void 0,tw=typeof queueMicrotask=="function"?queueMicrotask:typeof fg<"u"?function(e){return fg.resolve(null).then(e).catch(nw)}:dg;function nw(e){setTimeout(function(){throw e})}function $r(e){return e==="head"}function hg(e,t){var s=t,l=0;do{var d=s.nextSibling;if(e.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"||s==="/&"){if(l===0){e.removeChild(d),ms(t);return}l--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")l++;else if(s==="html")mo(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,mo(s);for(var h=s.firstChild;h;){var S=h.nextSibling,N=h.nodeName;h[Os]||N==="SCRIPT"||N==="STYLE"||N==="LINK"&&h.rel.toLowerCase()==="stylesheet"||s.removeChild(h),h=S}}else s==="body"&&mo(e.ownerDocument.body);s=d}while(s);ms(t)}function pg(e,t){var s=e;e=0;do{var l=s.nextSibling;if(s.nodeType===1?t?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(t?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),l&&l.nodeType===8)if(s=l.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=l}while(s)}function td(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":td(s),oc(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function rw(e,t,s,l){for(;e.nodeType===1;){var d=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Os])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=Ln(e.nextSibling),e===null)break}return null}function iw(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Ln(e.nextSibling),e===null))return null;return e}function mg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Ln(e.nextSibling),e===null))return null;return e}function nd(e){return e.data==="$?"||e.data==="$~"}function rd(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function sw(e,t){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||s.readyState!=="loading")t();else{var l=function(){t(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Ln(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var id=null;function gg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(t===0)return Ln(e.nextSibling);t--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||t++}e=e.nextSibling}return null}function yg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(t===0)return e;t--}else s!=="/$"&&s!=="/&"||t++}e=e.previousSibling}return null}function vg(e,t,s){switch(t=Ga(s),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function mo(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);oc(e)}var Bn=new Map,bg=new Set;function Fa(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var xr=P.d;P.d={f:ow,r:aw,D:lw,C:cw,L:uw,m:dw,X:hw,S:fw,M:pw};function ow(){var e=xr.f(),t=Ia();return e||t}function aw(e){var t=Pi(e);t!==null&&t.tag===5&&t.type==="form"?Dp(t):xr.r(e)}var fs=typeof document>"u"?null:document;function Sg(e,t,s){var l=fs;if(l&&typeof t=="string"&&t){var d=On(t);d='link[rel="'+e+'"][href="'+d+'"]',typeof s=="string"&&(d+='[crossorigin="'+s+'"]'),bg.has(d)||(bg.add(d),e={rel:e,crossOrigin:s,href:t},l.querySelector(d)===null&&(t=l.createElement("link"),Yt(t,"link",e),Lt(t),l.head.appendChild(t)))}}function lw(e){xr.D(e),Sg("dns-prefetch",e,null)}function cw(e,t){xr.C(e,t),Sg("preconnect",e,t)}function uw(e,t,s){xr.L(e,t,s);var l=fs;if(l&&e&&t){var d='link[rel="preload"][as="'+On(t)+'"]';t==="image"&&s&&s.imageSrcSet?(d+='[imagesrcset="'+On(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(d+='[imagesizes="'+On(s.imageSizes)+'"]')):d+='[href="'+On(e)+'"]';var h=d;switch(t){case"style":h=hs(e);break;case"script":h=ps(e)}Bn.has(h)||(e=k({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),Bn.set(h,e),l.querySelector(d)!==null||t==="style"&&l.querySelector(go(h))||t==="script"&&l.querySelector(yo(h))||(t=l.createElement("link"),Yt(t,"link",e),Lt(t),l.head.appendChild(t)))}}function dw(e,t){xr.m(e,t);var s=fs;if(s&&e){var l=t&&typeof t.as=="string"?t.as:"script",d='link[rel="modulepreload"][as="'+On(l)+'"][href="'+On(e)+'"]',h=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=ps(e)}if(!Bn.has(h)&&(e=k({rel:"modulepreload",href:e},t),Bn.set(h,e),s.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(yo(h)))return}l=s.createElement("link"),Yt(l,"link",e),Lt(l),s.head.appendChild(l)}}}function fw(e,t,s){xr.S(e,t,s);var l=fs;if(l&&e){var d=Ui(l).hoistableStyles,h=hs(e);t=t||"default";var S=d.get(h);if(!S){var N={loading:0,preload:null};if(S=l.querySelector(go(h)))N.loading=5;else{e=k({rel:"stylesheet",href:e,"data-precedence":t},s),(s=Bn.get(h))&&sd(e,s);var Y=S=l.createElement("link");Lt(Y),Yt(Y,"link",e),Y._p=new Promise(function(pe,we){Y.onload=pe,Y.onerror=we}),Y.addEventListener("load",function(){N.loading|=1}),Y.addEventListener("error",function(){N.loading|=2}),N.loading|=4,Ya(S,t,l)}S={type:"stylesheet",instance:S,count:1,state:N},d.set(h,S)}}}function hw(e,t){xr.X(e,t);var s=fs;if(s&&e){var l=Ui(s).hoistableScripts,d=ps(e),h=l.get(d);h||(h=s.querySelector(yo(d)),h||(e=k({src:e,async:!0},t),(t=Bn.get(d))&&od(e,t),h=s.createElement("script"),Lt(h),Yt(h,"link",e),s.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(d,h))}}function pw(e,t){xr.M(e,t);var s=fs;if(s&&e){var l=Ui(s).hoistableScripts,d=ps(e),h=l.get(d);h||(h=s.querySelector(yo(d)),h||(e=k({src:e,async:!0,type:"module"},t),(t=Bn.get(d))&&od(e,t),h=s.createElement("script"),Lt(h),Yt(h,"link",e),s.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},l.set(d,h))}}function xg(e,t,s,l){var d=(d=T.current)?Fa(d):null;if(!d)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=hs(s.href),s=Ui(d).hoistableStyles,l=s.get(t),l||(l={type:"style",instance:null,count:0,state:null},s.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=hs(s.href);var h=Ui(d).hoistableStyles,S=h.get(e);if(S||(d=d.ownerDocument||d,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,S),(h=d.querySelector(go(e)))&&!h._p&&(S.instance=h,S.state.loading=5),Bn.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Bn.set(e,s),h||mw(d,e,s,S.state))),t&&l===null)throw Error(o(528,""));return S}if(t&&l!==null)throw Error(o(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=ps(s),s=Ui(d).hoistableScripts,l=s.get(t),l||(l={type:"script",instance:null,count:0,state:null},s.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function hs(e){return'href="'+On(e)+'"'}function go(e){return'link[rel="stylesheet"]['+e+"]"}function wg(e){return k({},e,{"data-precedence":e.precedence,precedence:null})}function mw(e,t,s,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),Yt(t,"link",s),Lt(t),e.head.appendChild(t))}function ps(e){return'[src="'+On(e)+'"]'}function yo(e){return"script[async]"+e}function Cg(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+On(s.href)+'"]');if(l)return t.instance=l,Lt(l),l;var d=k({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Lt(l),Yt(l,"style",d),Ya(l,s.precedence,e),t.instance=l;case"stylesheet":d=hs(s.href);var h=e.querySelector(go(d));if(h)return t.state.loading|=4,t.instance=h,Lt(h),h;l=wg(s),(d=Bn.get(d))&&sd(l,d),h=(e.ownerDocument||e).createElement("link"),Lt(h);var S=h;return S._p=new Promise(function(N,Y){S.onload=N,S.onerror=Y}),Yt(h,"link",l),t.state.loading|=4,Ya(h,s.precedence,e),t.instance=h;case"script":return h=ps(s.src),(d=e.querySelector(yo(h)))?(t.instance=d,Lt(d),d):(l=s,(d=Bn.get(h))&&(l=k({},s),od(l,d)),e=e.ownerDocument||e,d=e.createElement("script"),Lt(d),Yt(d,"link",l),e.head.appendChild(d),t.instance=d);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,Ya(l,s.precedence,e));return t.instance}function Ya(e,t,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,h=d,S=0;S<l.length;S++){var N=l[S];if(N.dataset.precedence===t)h=N;else if(h!==d)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function sd(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function od(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Wa=null;function Tg(e,t,s){if(Wa===null){var l=new Map,d=Wa=new Map;d.set(s,l)}else d=Wa,l=d.get(s),l||(l=new Map,d.set(s,l));if(l.has(e))return l;for(l.set(e,null),s=s.getElementsByTagName(e),d=0;d<s.length;d++){var h=s[d];if(!(h[Os]||h[$t]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var S=h.getAttribute(t)||"";S=e+S;var N=l.get(S);N?N.push(h):l.set(S,[h])}}return l}function Rg(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function gw(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function jg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function yw(e,t,s,l){if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=hs(l.href),h=t.querySelector(go(d));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Xa.bind(e),t.then(e,e)),s.state.loading|=4,s.instance=h,Lt(h);return}h=t.ownerDocument||t,l=wg(l),(d=Bn.get(d))&&sd(l,d),h=h.createElement("link"),Lt(h);var S=h;S._p=new Promise(function(N,Y){S.onload=N,S.onerror=Y}),Yt(h,"link",l),s.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=Xa.bind(e),t.addEventListener("load",s),t.addEventListener("error",s))}}var ad=0;function vw(e,t){return e.stylesheets&&e.count===0&&Ka(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var l=setTimeout(function(){if(e.stylesheets&&Ka(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+t);0<e.imgBytes&&ad===0&&(ad=62500*Qx());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ka(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>ad?50:800)+t);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(d)}}:null}function Xa(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ka(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ja=null;function Ka(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ja=new Map,t.forEach(bw,e),Ja=null,Xa.call(e))}function bw(e,t){if(!(t.state.loading&4)){var s=Ja.get(e);if(s)var l=s.get(null);else{s=new Map,Ja.set(e,s);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<d.length;h++){var S=d[h];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(s.set(S.dataset.precedence,S),l=S)}l&&s.set(null,l)}d=t.instance,S=d.getAttribute("data-precedence"),h=s.get(S)||l,h===l&&s.set(null,d),s.set(S,d),this.count++,l=Xa.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),h?h.parentNode.insertBefore(d,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),t.state.loading|=4}}var vo={$$typeof:fe,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function Sw(e,t,s,l,d,h,S,N,Y){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nc(0),this.hiddenUpdates=nc(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=h,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function Eg(e,t,s,l,d,h,S,N,Y,pe,we,je){return e=new Sw(e,t,s,S,Y,pe,we,je,N),t=1,h===!0&&(t|=24),h=xn(3,null,null,t),e.current=h,h.stateNode=e,t=Bc(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:l,isDehydrated:s,cache:t},Vc(h),e}function kg(e){return e?(e=Gi,e):Gi}function _g(e,t,s,l,d,h){d=kg(d),l.context===null?l.context=d:l.pendingContext=d,l=Or(t),l.payload={element:s},h=h===void 0?null:h,h!==null&&(l.callback=h),s=Mr(e,l,t),s!==null&&(gn(s,e,t),Xs(s,e,t))}function Ag(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function ld(e,t){Ag(e,t),(e=e.alternate)&&Ag(e,t)}function Ng(e){if(e.tag===13||e.tag===31){var t=ci(e,67108864);t!==null&&gn(t,e,67108864),ld(e,67108864)}}function Og(e){if(e.tag===13||e.tag===31){var t=jn();t=rc(t);var s=ci(e,t);s!==null&&gn(s,e,t),ld(e,t)}}var Qa=!0;function xw(e,t,s,l){var d=q.T;q.T=null;var h=P.p;try{P.p=2,cd(e,t,s,l)}finally{P.p=h,q.T=d}}function ww(e,t,s,l){var d=q.T;q.T=null;var h=P.p;try{P.p=8,cd(e,t,s,l)}finally{P.p=h,q.T=d}}function cd(e,t,s,l){if(Qa){var d=ud(l);if(d===null)Xu(e,t,l,Za,s),Pg(e,l);else if(Tw(d,e,t,s,l))l.stopPropagation();else if(Pg(e,l),t&4&&-1<Cw.indexOf(e)){for(;d!==null;){var h=Pi(d);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var S=ln(h.pendingLanes);if(S!==0){var N=h;for(N.pendingLanes|=2,N.entangledLanes|=2;S;){var Y=1<<31-ye(S);N.entanglements[1]|=Y,S&=~Y}Zn(h),(ut&6)===0&&(Ua=$e()+500,fo(0))}}break;case 31:case 13:N=ci(h,2),N!==null&&gn(N,h,2),Ia(),ld(h,2)}if(h=ud(l),h===null&&Xu(e,t,l,Za,s),h===d)break;d=h}d!==null&&l.stopPropagation()}else Xu(e,t,l,null,s)}}function ud(e){return e=fc(e),dd(e)}var Za=null;function dd(e){if(Za=null,e=Mi(e),e!==null){var t=u(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=f(t),e!==null)return e;e=null}else if(s===31){if(e=p(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Za=e,null}function Mg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qe()){case M:return 2;case y:return 8;case A:case F:return 32;case $:return 268435456;default:return 32}default:return 32}}var fd=!1,Vr=null,Gr=null,Fr=null,bo=new Map,So=new Map,Yr=[],Cw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Pg(e,t){switch(e){case"focusin":case"focusout":Vr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":Fr=null;break;case"pointerover":case"pointerout":bo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":So.delete(t.pointerId)}}function xo(e,t,s,l,d,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:s,eventSystemFlags:l,nativeEvent:h,targetContainers:[d]},t!==null&&(t=Pi(t),t!==null&&Ng(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function Tw(e,t,s,l,d){switch(t){case"focusin":return Vr=xo(Vr,e,t,s,l,d),!0;case"dragenter":return Gr=xo(Gr,e,t,s,l,d),!0;case"mouseover":return Fr=xo(Fr,e,t,s,l,d),!0;case"pointerover":var h=d.pointerId;return bo.set(h,xo(bo.get(h)||null,e,t,s,l,d)),!0;case"gotpointercapture":return h=d.pointerId,So.set(h,xo(So.get(h)||null,e,t,s,l,d)),!0}return!1}function Ug(e){var t=Mi(e.target);if(t!==null){var s=u(t);if(s!==null){if(t=s.tag,t===13){if(t=f(s),t!==null){e.blockedOn=t,Xf(e.priority,function(){Og(s)});return}}else if(t===31){if(t=p(s),t!==null){e.blockedOn=t,Xf(e.priority,function(){Og(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function el(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=ud(e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);dc=l,s.target.dispatchEvent(l),dc=null}else return t=Pi(s),t!==null&&Ng(t),e.blockedOn=s,!1;t.shift()}return!0}function Dg(e,t,s){el(e)&&s.delete(t)}function Rw(){fd=!1,Vr!==null&&el(Vr)&&(Vr=null),Gr!==null&&el(Gr)&&(Gr=null),Fr!==null&&el(Fr)&&(Fr=null),bo.forEach(Dg),So.forEach(Dg)}function tl(e,t){e.blockedOn===t&&(e.blockedOn=null,fd||(fd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Rw)))}var nl=null;function Ig(e){nl!==e&&(nl=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){nl===e&&(nl=null);for(var t=0;t<e.length;t+=3){var s=e[t],l=e[t+1],d=e[t+2];if(typeof l!="function"){if(dd(l||s)===null)continue;break}var h=Pi(s);h!==null&&(e.splice(t,3),t-=3,uu(h,{pending:!0,data:d,method:s.method,action:l},l,d))}}))}function ms(e){function t(Y){return tl(Y,e)}Vr!==null&&tl(Vr,e),Gr!==null&&tl(Gr,e),Fr!==null&&tl(Fr,e),bo.forEach(t),So.forEach(t);for(var s=0;s<Yr.length;s++){var l=Yr[s];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Yr.length&&(s=Yr[0],s.blockedOn===null);)Ug(s),s.blockedOn===null&&Yr.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var d=s[l],h=s[l+1],S=d[un]||null;if(typeof h=="function")S||Ig(s);else if(S){var N=null;if(h&&h.hasAttribute("formAction")){if(d=h,S=h[un]||null)N=S.formAction;else if(dd(d)!==null)continue}else N=S.action;typeof N=="function"?s[l+1]=N:(s.splice(l,3),l-=3),Ig(s)}}}function zg(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(S){return d=S})},focusReset:"manual",scroll:"manual"})}function t(){d!==null&&(d(),d=null),l||setTimeout(s,20)}function s(){if(!l&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(s,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),d!==null&&(d(),d=null)}}}function hd(e){this._internalRoot=e}rl.prototype.render=hd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var s=t.current,l=jn();_g(s,l,e,t,null,null)},rl.prototype.unmount=hd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;_g(e.current,2,null,e,null,null),Ia(),t[Oi]=null}};function rl(e){this._internalRoot=e}rl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Wf();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Yr.length&&t!==0&&t<Yr[s].priority;s++);Yr.splice(s,0,e),s===0&&Ug(e)}};var Lg=n.version;if(Lg!=="19.2.3")throw Error(o(527,Lg,"19.2.3"));P.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=g(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var jw={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{ze=il.inject(jw),Oe=il}catch{}}return Co.createRoot=function(e,t){if(!c(e))throw Error(o(299));var s=!1,l="",d=Fp,h=Yp,S=Wp;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(d=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(S=t.onRecoverableError)),t=Eg(e,1,!1,null,null,s,l,null,d,h,S,zg),e[Oi]=t.current,Wu(e),new hd(t)},Co.hydrateRoot=function(e,t,s){if(!c(e))throw Error(o(299));var l=!1,d="",h=Fp,S=Yp,N=Wp,Y=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(h=s.onUncaughtError),s.onCaughtError!==void 0&&(S=s.onCaughtError),s.onRecoverableError!==void 0&&(N=s.onRecoverableError),s.formState!==void 0&&(Y=s.formState)),t=Eg(e,1,!0,t,s??null,l,d,Y,h,S,N,zg),t.context=kg(null),s=t.current,l=jn(),l=rc(l),d=Or(l),d.callback=null,Mr(s,d,l),s=l,t.current.lanes=s,Ns(t,s),Zn(t),e[Oi]=t.current,Wu(e),new rl(t)},Co.version="19.2.3",Co}var Jg;function Dw(){if(Jg)return gd.exports;Jg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),gd.exports=Uw(),gd.exports}var Iw=Dw();var Kg="popstate";function zw(r={}){function n(o,c){let{pathname:u,search:f,hash:p}=o.location;return Bd("",{pathname:u,search:f,hash:p},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function i(o,c){return typeof c=="string"?c:Mo(c)}return Bw(n,i,null,r)}function Ct(r,n){if(r===!1||r===null||typeof r>"u")throw new Error(n)}function kn(r,n){if(!r){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Lw(){return Math.random().toString(36).substring(2,10)}function Qg(r,n){return{usr:r.state,key:r.key,idx:n}}function Bd(r,n,i=null,o){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof n=="string"?Ts(n):n,state:i,key:n&&n.key||o||Lw()}}function Mo({pathname:r="/",search:n="",hash:i=""}){return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(r+=i.charAt(0)==="#"?i:"#"+i),r}function Ts(r){let n={};if(r){let i=r.indexOf("#");i>=0&&(n.hash=r.substring(i),r=r.substring(0,i));let o=r.indexOf("?");o>=0&&(n.search=r.substring(o),r=r.substring(0,o)),r&&(n.pathname=r)}return n}function Bw(r,n,i,o={}){let{window:c=document.defaultView,v5Compat:u=!1}=o,f=c.history,p="POP",m=null,g=v();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function v(){return(f.state||{idx:null}).idx}function k(){p="POP";let D=v(),le=D==null?null:D-g;g=D,m&&m({action:p,location:B.location,delta:le})}function z(D,le){p="PUSH";let se=Bd(B.location,D,le);g=v()+1;let fe=Qg(se,g),oe=B.createHref(se);try{f.pushState(fe,"",oe)}catch(te){if(te instanceof DOMException&&te.name==="DataCloneError")throw te;c.location.assign(oe)}u&&m&&m({action:p,location:B.location,delta:1})}function W(D,le){p="REPLACE";let se=Bd(B.location,D,le);g=v();let fe=Qg(se,g),oe=B.createHref(se);f.replaceState(fe,"",oe),u&&m&&m({action:p,location:B.location,delta:0})}function U(D){return Hw(D)}let B={get action(){return p},get location(){return r(c,f)},listen(D){if(m)throw new Error("A history only accepts one active listener");return c.addEventListener(Kg,k),m=D,()=>{c.removeEventListener(Kg,k),m=null}},createHref(D){return n(c,D)},createURL:U,encodeLocation(D){let le=U(D);return{pathname:le.pathname,search:le.search,hash:le.hash}},push:z,replace:W,go(D){return f.go(D)}};return B}function Hw(r,n=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),Ct(i,"No window.location.(origin|href) available to create URL");let o=typeof r=="string"?r:Mo(r);return o=o.replace(/ $/,"%20"),!n&&o.startsWith("//")&&(o=i+o),new URL(o,i)}function uv(r,n,i="/"){return qw(r,n,i,!1)}function qw(r,n,i,o){let c=typeof n=="string"?Ts(n):n,u=Cr(c.pathname||"/",i);if(u==null)return null;let f=dv(r);$w(f);let p=null;for(let m=0;p==null&&m<f.length;++m){let g=e1(u);p=Qw(f[m],g,o)}return p}function dv(r,n=[],i=[],o="",c=!1){let u=(f,p,m=c,g)=>{let v={relativePath:g===void 0?f.path||"":g,caseSensitive:f.caseSensitive===!0,childrenIndex:p,route:f};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(o)&&m)return;Ct(v.relativePath.startsWith(o),`Absolute route path "${v.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(o.length)}let k=wr([o,v.relativePath]),z=i.concat(v);f.children&&f.children.length>0&&(Ct(f.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${k}".`),dv(f.children,n,z,k,m)),!(f.path==null&&!f.index)&&n.push({path:k,score:Jw(k,f.index),routesMeta:z})};return r.forEach((f,p)=>{if(f.path===""||!f.path?.includes("?"))u(f,p);else for(let m of fv(f.path))u(f,p,!0,m)}),n}function fv(r){let n=r.split("/");if(n.length===0)return[];let[i,...o]=n,c=i.endsWith("?"),u=i.replace(/\?$/,"");if(o.length===0)return c?[u,""]:[u];let f=fv(o.join("/")),p=[];return p.push(...f.map(m=>m===""?u:[u,m].join("/"))),c&&p.push(...f),p.map(m=>r.startsWith("/")&&m===""?"/":m)}function $w(r){r.sort((n,i)=>n.score!==i.score?i.score-n.score:Kw(n.routesMeta.map(o=>o.childrenIndex),i.routesMeta.map(o=>o.childrenIndex)))}var Vw=/^:[\w-]+$/,Gw=3,Fw=2,Yw=1,Ww=10,Xw=-2,Zg=r=>r==="*";function Jw(r,n){let i=r.split("/"),o=i.length;return i.some(Zg)&&(o+=Xw),n&&(o+=Fw),i.filter(c=>!Zg(c)).reduce((c,u)=>c+(Vw.test(u)?Gw:u===""?Yw:Ww),o)}function Kw(r,n){return r.length===n.length&&r.slice(0,-1).every((o,c)=>o===n[c])?r[r.length-1]-n[n.length-1]:0}function Qw(r,n,i=!1){let{routesMeta:o}=r,c={},u="/",f=[];for(let p=0;p<o.length;++p){let m=o[p],g=p===o.length-1,v=u==="/"?n:n.slice(u.length)||"/",k=wl({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},v),z=m.route;if(!k&&g&&i&&!o[o.length-1].route.index&&(k=wl({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},v)),!k)return null;Object.assign(c,k.params),f.push({params:c,pathname:wr([u,k.pathname]),pathnameBase:i1(wr([u,k.pathnameBase])),route:z}),k.pathnameBase!=="/"&&(u=wr([u,k.pathnameBase]))}return f}function wl(r,n){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[i,o]=Zw(r.path,r.caseSensitive,r.end),c=n.match(i);if(!c)return null;let u=c[0],f=u.replace(/(.)\/+$/,"$1"),p=c.slice(1);return{params:o.reduce((g,{paramName:v,isOptional:k},z)=>{if(v==="*"){let U=p[z]||"";f=u.slice(0,u.length-U.length).replace(/(.)\/+$/,"$1")}const W=p[z];return k&&!W?g[v]=void 0:g[v]=(W||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:f,pattern:r}}function Zw(r,n=!1,i=!0){kn(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let o=[],c="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,p,m)=>(o.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(o.push({paramName:"*"}),c+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?c+="\\/*$":r!==""&&r!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,n?void 0:"i"),o]}function e1(r){try{return r.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return kn(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),r}}function Cr(r,n){if(n==="/")return r;if(!r.toLowerCase().startsWith(n.toLowerCase()))return null;let i=n.endsWith("/")?n.length-1:n.length,o=r.charAt(i);return o&&o!=="/"?null:r.slice(i)||"/"}var hv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,t1=r=>hv.test(r);function n1(r,n="/"){let{pathname:i,search:o="",hash:c=""}=typeof r=="string"?Ts(r):r,u;if(i)if(t1(i))u=i;else{if(i.includes("//")){let f=i;i=i.replace(/\/\/+/g,"/"),kn(!1,`Pathnames cannot have embedded double slashes - normalizing ${f} -> ${i}`)}i.startsWith("/")?u=ey(i.substring(1),"/"):u=ey(i,n)}else u=n;return{pathname:u,search:s1(o),hash:o1(c)}}function ey(r,n){let i=n.replace(/\/+$/,"").split("/");return r.split("/").forEach(c=>{c===".."?i.length>1&&i.pop():c!=="."&&i.push(c)}),i.length>1?i.join("/"):"/"}function Sd(r,n,i,o){return`Cannot include a '${r}' character in a manually specified \`to.${n}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function r1(r){return r.filter((n,i)=>i===0||n.route.path&&n.route.path.length>0)}function sf(r){let n=r1(r);return n.map((i,o)=>o===n.length-1?i.pathname:i.pathnameBase)}function of(r,n,i,o=!1){let c;typeof r=="string"?c=Ts(r):(c={...r},Ct(!c.pathname||!c.pathname.includes("?"),Sd("?","pathname","search",c)),Ct(!c.pathname||!c.pathname.includes("#"),Sd("#","pathname","hash",c)),Ct(!c.search||!c.search.includes("#"),Sd("#","search","hash",c)));let u=r===""||c.pathname==="",f=u?"/":c.pathname,p;if(f==null)p=i;else{let k=n.length-1;if(!o&&f.startsWith("..")){let z=f.split("/");for(;z[0]==="..";)z.shift(),k-=1;c.pathname=z.join("/")}p=k>=0?n[k]:"/"}let m=n1(c,p),g=f&&f!=="/"&&f.endsWith("/"),v=(u||f===".")&&i.endsWith("/");return!m.pathname.endsWith("/")&&(g||v)&&(m.pathname+="/"),m}var wr=r=>r.join("/").replace(/\/\/+/g,"/"),i1=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),s1=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,o1=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,a1=class{constructor(r,n,i,o=!1){this.status=r,this.statusText=n||"",this.internal=o,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function l1(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function c1(r){return r.map(n=>n.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var pv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function mv(r,n){let i=r;if(typeof i!="string"||!hv.test(i))return{absoluteURL:void 0,isExternal:!1,to:i};let o=i,c=!1;if(pv)try{let u=new URL(window.location.href),f=i.startsWith("//")?new URL(u.protocol+i):new URL(i),p=Cr(f.pathname,n);f.origin===u.origin&&p!=null?i=p+f.search+f.hash:c=!0}catch{kn(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:o,isExternal:c,to:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var gv=["POST","PUT","PATCH","DELETE"];new Set(gv);var u1=["GET",...gv];new Set(u1);var Rs=O.createContext(null);Rs.displayName="DataRouter";var Pl=O.createContext(null);Pl.displayName="DataRouterState";var d1=O.createContext(!1),yv=O.createContext({isTransitioning:!1});yv.displayName="ViewTransition";var f1=O.createContext(new Map);f1.displayName="Fetchers";var h1=O.createContext(null);h1.displayName="Await";var _n=O.createContext(null);_n.displayName="Navigation";var zo=O.createContext(null);zo.displayName="Location";var Yn=O.createContext({outlet:null,matches:[],isDataRoute:!1});Yn.displayName="Route";var af=O.createContext(null);af.displayName="RouteError";var vv="REACT_ROUTER_ERROR",p1="REDIRECT",m1="ROUTE_ERROR_RESPONSE";function g1(r){if(r.startsWith(`${vv}:${p1}:{`))try{let n=JSON.parse(r.slice(28));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.location=="string"&&typeof n.reloadDocument=="boolean"&&typeof n.replace=="boolean")return n}catch{}}function y1(r){if(r.startsWith(`${vv}:${m1}:{`))try{let n=JSON.parse(r.slice(40));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string")return new a1(n.status,n.statusText,n.data)}catch{}}function v1(r,{relative:n}={}){Ct(js(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:o}=O.useContext(_n),{hash:c,pathname:u,search:f}=Lo(r,{relative:n}),p=u;return i!=="/"&&(p=u==="/"?i:wr([i,u])),o.createHref({pathname:p,search:f,hash:c})}function js(){return O.useContext(zo)!=null}function Wn(){return Ct(js(),"useLocation() may be used only in the context of a <Router> component."),O.useContext(zo).location}var bv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Sv(r){O.useContext(_n).static||O.useLayoutEffect(r)}function rr(){let{isDataRoute:r}=O.useContext(Yn);return r?N1():b1()}function b1(){Ct(js(),"useNavigate() may be used only in the context of a <Router> component.");let r=O.useContext(Rs),{basename:n,navigator:i}=O.useContext(_n),{matches:o}=O.useContext(Yn),{pathname:c}=Wn(),u=JSON.stringify(sf(o)),f=O.useRef(!1);return Sv(()=>{f.current=!0}),O.useCallback((m,g={})=>{if(kn(f.current,bv),!f.current)return;if(typeof m=="number"){i.go(m);return}let v=of(m,JSON.parse(u),c,g.relative==="path");r==null&&n!=="/"&&(v.pathname=v.pathname==="/"?n:wr([n,v.pathname])),(g.replace?i.replace:i.push)(v,g.state,g)},[n,i,u,c,r])}O.createContext(null);function xv(){let{matches:r}=O.useContext(Yn),n=r[r.length-1];return n?n.params:{}}function Lo(r,{relative:n}={}){let{matches:i}=O.useContext(Yn),{pathname:o}=Wn(),c=JSON.stringify(sf(i));return O.useMemo(()=>of(r,JSON.parse(c),o,n==="path"),[r,c,o,n])}function S1(r,n){return wv(r,n)}function wv(r,n,i,o,c){Ct(js(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=O.useContext(_n),{matches:f}=O.useContext(Yn),p=f[f.length-1],m=p?p.params:{},g=p?p.pathname:"/",v=p?p.pathnameBase:"/",k=p&&p.route;{let se=k&&k.path||"";Tv(g,!k||se.endsWith("*")||se.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${se}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${se}"> to <Route path="${se==="/"?"*":`${se}/*`}">.`)}let z=Wn(),W;if(n){let se=typeof n=="string"?Ts(n):n;Ct(v==="/"||se.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${se.pathname}" was given in the \`location\` prop.`),W=se}else W=z;let U=W.pathname||"/",B=U;if(v!=="/"){let se=v.replace(/^\//,"").split("/");B="/"+U.replace(/^\//,"").split("/").slice(se.length).join("/")}let D=uv(r,{pathname:B});kn(k||D!=null,`No routes matched location "${W.pathname}${W.search}${W.hash}" `),kn(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${W.pathname}${W.search}${W.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let le=R1(D&&D.map(se=>Object.assign({},se,{params:Object.assign({},m,se.params),pathname:wr([v,u.encodeLocation?u.encodeLocation(se.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:se.pathname]),pathnameBase:se.pathnameBase==="/"?v:wr([v,u.encodeLocation?u.encodeLocation(se.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:se.pathnameBase])})),f,i,o,c);return n&&le?O.createElement(zo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...W},navigationType:"POP"}},le):le}function x1(){let r=A1(),n=l1(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),i=r instanceof Error?r.stack:null,o="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:o},u={padding:"2px 4px",backgroundColor:o},f=null;return console.error("Error handled by React Router default ErrorBoundary:",r),f=O.createElement(O.Fragment,null,O.createElement("p",null," Hey developer "),O.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",O.createElement("code",{style:u},"ErrorBoundary")," or"," ",O.createElement("code",{style:u},"errorElement")," prop on your route.")),O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},n),i?O.createElement("pre",{style:c},i):null,f)}var w1=O.createElement(x1,null),Cv=class extends O.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,n){return n.location!==r.location||n.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:n.error,location:n.location,revalidation:r.revalidation||n.revalidation}}componentDidCatch(r,n){this.props.onError?this.props.onError(r,n):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const i=y1(r.digest);i&&(r=i)}let n=r!==void 0?O.createElement(Yn.Provider,{value:this.props.routeContext},O.createElement(af.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?O.createElement(C1,{error:r},n):n}};Cv.contextType=d1;var xd=new WeakMap;function C1({children:r,error:n}){let{basename:i}=O.useContext(_n);if(typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){let o=g1(n.digest);if(o){let c=xd.get(n);if(c)throw c;let u=mv(o.location,i);if(pv&&!xd.get(n))if(u.isExternal||o.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const f=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:o.replace}));throw xd.set(n,f),f}return O.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return r}function T1({routeContext:r,match:n,children:i}){let o=O.useContext(Rs);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(Yn.Provider,{value:r},i)}function R1(r,n=[],i=null,o=null,c=null){if(r==null){if(!i)return null;if(i.errors)r=i.matches;else if(n.length===0&&!i.initialized&&i.matches.length>0)r=i.matches;else return null}let u=r,f=i?.errors;if(f!=null){let v=u.findIndex(k=>k.route.id&&f?.[k.route.id]!==void 0);Ct(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(f).join(",")}`),u=u.slice(0,Math.min(u.length,v+1))}let p=!1,m=-1;if(i)for(let v=0;v<u.length;v++){let k=u[v];if((k.route.HydrateFallback||k.route.hydrateFallbackElement)&&(m=v),k.route.id){let{loaderData:z,errors:W}=i,U=k.route.loader&&!z.hasOwnProperty(k.route.id)&&(!W||W[k.route.id]===void 0);if(k.route.lazy||U){p=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}let g=i&&o?(v,k)=>{o(v,{location:i.location,params:i.matches?.[0]?.params??{},unstable_pattern:c1(i.matches),errorInfo:k})}:void 0;return u.reduceRight((v,k,z)=>{let W,U=!1,B=null,D=null;i&&(W=f&&k.route.id?f[k.route.id]:void 0,B=k.route.errorElement||w1,p&&(m<0&&z===0?(Tv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),U=!0,D=null):m===z&&(U=!0,D=k.route.hydrateFallbackElement||null)));let le=n.concat(u.slice(0,z+1)),se=()=>{let fe;return W?fe=B:U?fe=D:k.route.Component?fe=O.createElement(k.route.Component,null):k.route.element?fe=k.route.element:fe=v,O.createElement(T1,{match:k,routeContext:{outlet:v,matches:le,isDataRoute:i!=null},children:fe})};return i&&(k.route.ErrorBoundary||k.route.errorElement||z===0)?O.createElement(Cv,{location:i.location,revalidation:i.revalidation,component:B,error:W,children:se(),routeContext:{outlet:null,matches:le,isDataRoute:!0},onError:g}):se()},null)}function lf(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function j1(r){let n=O.useContext(Rs);return Ct(n,lf(r)),n}function E1(r){let n=O.useContext(Pl);return Ct(n,lf(r)),n}function k1(r){let n=O.useContext(Yn);return Ct(n,lf(r)),n}function cf(r){let n=k1(r),i=n.matches[n.matches.length-1];return Ct(i.route.id,`${r} can only be used on routes that contain a unique "id"`),i.route.id}function _1(){return cf("useRouteId")}function A1(){let r=O.useContext(af),n=E1("useRouteError"),i=cf("useRouteError");return r!==void 0?r:n.errors?.[i]}function N1(){let{router:r}=j1("useNavigate"),n=cf("useNavigate"),i=O.useRef(!1);return Sv(()=>{i.current=!0}),O.useCallback(async(c,u={})=>{kn(i.current,bv),i.current&&(typeof c=="number"?await r.navigate(c):await r.navigate(c,{fromRouteId:n,...u}))},[r,n])}var ty={};function Tv(r,n,i){!n&&!ty[r]&&(ty[r]=!0,kn(!1,i))}O.memo(O1);function O1({routes:r,future:n,state:i,onError:o}){return wv(r,void 0,i,o,n)}function er({to:r,replace:n,state:i,relative:o}){Ct(js(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=O.useContext(_n);kn(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=O.useContext(Yn),{pathname:f}=Wn(),p=rr(),m=of(r,sf(u),f,o==="path"),g=JSON.stringify(m);return O.useEffect(()=>{p(JSON.parse(g),{replace:n,state:i,relative:o})},[p,g,o,n,i]),null}function Ht(r){Ct(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function M1({basename:r="/",children:n=null,location:i,navigationType:o="POP",navigator:c,static:u=!1,unstable_useTransitions:f}){Ct(!js(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=r.replace(/^\/*/,"/"),m=O.useMemo(()=>({basename:p,navigator:c,static:u,unstable_useTransitions:f,future:{}}),[p,c,u,f]);typeof i=="string"&&(i=Ts(i));let{pathname:g="/",search:v="",hash:k="",state:z=null,key:W="default"}=i,U=O.useMemo(()=>{let B=Cr(g,p);return B==null?null:{location:{pathname:B,search:v,hash:k,state:z,key:W},navigationType:o}},[p,g,v,k,z,W,o]);return kn(U!=null,`<Router basename="${p}"> is not able to match the URL "${g}${v}${k}" because it does not start with the basename, so the <Router> won't render anything.`),U==null?null:O.createElement(_n.Provider,{value:m},O.createElement(zo.Provider,{children:n,value:U}))}function P1({children:r,location:n}){return S1(Hd(r),n)}function Hd(r,n=[]){let i=[];return O.Children.forEach(r,(o,c)=>{if(!O.isValidElement(o))return;let u=[...n,c];if(o.type===O.Fragment){i.push.apply(i,Hd(o.props.children,u));return}Ct(o.type===Ht,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ct(!o.props.index||!o.props.children,"An index route cannot have child routes.");let f={id:o.props.id||u.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(f.children=Hd(o.props.children,u)),i.push(f)}),i}var ml="get",gl="application/x-www-form-urlencoded";function Ul(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function U1(r){return Ul(r)&&r.tagName.toLowerCase()==="button"}function D1(r){return Ul(r)&&r.tagName.toLowerCase()==="form"}function I1(r){return Ul(r)&&r.tagName.toLowerCase()==="input"}function z1(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function L1(r,n){return r.button===0&&(!n||n==="_self")&&!z1(r)}function qd(r=""){return new URLSearchParams(typeof r=="string"||Array.isArray(r)||r instanceof URLSearchParams?r:Object.keys(r).reduce((n,i)=>{let o=r[i];return n.concat(Array.isArray(o)?o.map(c=>[i,c]):[[i,o]])},[]))}function B1(r,n){let i=qd(r);return n&&n.forEach((o,c)=>{i.has(c)||n.getAll(c).forEach(u=>{i.append(c,u)})}),i}var sl=null;function H1(){if(sl===null)try{new FormData(document.createElement("form"),0),sl=!1}catch{sl=!0}return sl}var q1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wd(r){return r!=null&&!q1.has(r)?(kn(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gl}"`),null):r}function $1(r,n){let i,o,c,u,f;if(D1(r)){let p=r.getAttribute("action");o=p?Cr(p,n):null,i=r.getAttribute("method")||ml,c=wd(r.getAttribute("enctype"))||gl,u=new FormData(r)}else if(U1(r)||I1(r)&&(r.type==="submit"||r.type==="image")){let p=r.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=r.getAttribute("formaction")||p.getAttribute("action");if(o=m?Cr(m,n):null,i=r.getAttribute("formmethod")||p.getAttribute("method")||ml,c=wd(r.getAttribute("formenctype"))||wd(p.getAttribute("enctype"))||gl,u=new FormData(p,r),!H1()){let{name:g,type:v,value:k}=r;if(v==="image"){let z=g?`${g}.`:"";u.append(`${z}x`,"0"),u.append(`${z}y`,"0")}else g&&u.append(g,k)}}else{if(Ul(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=ml,o=null,c=gl,f=r}return u&&c==="text/plain"&&(f=u,u=void 0),{action:o,method:i.toLowerCase(),encType:c,formData:u,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function uf(r,n){if(r===!1||r===null||typeof r>"u")throw new Error(n)}function V1(r,n,i){let o=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return o.pathname==="/"?o.pathname=`_root.${i}`:n&&Cr(o.pathname,n)==="/"?o.pathname=`${n.replace(/\/$/,"")}/_root.${i}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${i}`,o}async function G1(r,n){if(r.id in n)return n[r.id];try{let i=await import(r.module);return n[r.id]=i,i}catch(i){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function F1(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Y1(r,n,i){let o=await Promise.all(r.map(async c=>{let u=n.routes[c.route.id];if(u){let f=await G1(u,i);return f.links?f.links():[]}return[]}));return K1(o.flat(1).filter(F1).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function ny(r,n,i,o,c,u){let f=(m,g)=>i[g]?m.route.id!==i[g].route.id:!0,p=(m,g)=>i[g].pathname!==m.pathname||i[g].route.path?.endsWith("*")&&i[g].params["*"]!==m.params["*"];return u==="assets"?n.filter((m,g)=>f(m,g)||p(m,g)):u==="data"?n.filter((m,g)=>{let v=o.routes[m.route.id];if(!v||!v.hasLoader)return!1;if(f(m,g)||p(m,g))return!0;if(m.route.shouldRevalidate){let k=m.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function W1(r,n,{includeHydrateFallback:i}={}){return X1(r.map(o=>{let c=n.routes[o.route.id];if(!c)return[];let u=[c.module];return c.clientActionModule&&(u=u.concat(c.clientActionModule)),c.clientLoaderModule&&(u=u.concat(c.clientLoaderModule)),i&&c.hydrateFallbackModule&&(u=u.concat(c.hydrateFallbackModule)),c.imports&&(u=u.concat(c.imports)),u}).flat(1))}function X1(r){return[...new Set(r)]}function J1(r){let n={},i=Object.keys(r).sort();for(let o of i)n[o]=r[o];return n}function K1(r,n){let i=new Set;return new Set(n),r.reduce((o,c)=>{let u=JSON.stringify(J1(c));return i.has(u)||(i.add(u),o.push({key:u,link:c})),o},[])}function Rv(){let r=O.useContext(Rs);return uf(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function Q1(){let r=O.useContext(Pl);return uf(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var df=O.createContext(void 0);df.displayName="FrameworkContext";function jv(){let r=O.useContext(df);return uf(r,"You must render this element inside a <HydratedRouter> element"),r}function Z1(r,n){let i=O.useContext(df),[o,c]=O.useState(!1),[u,f]=O.useState(!1),{onFocus:p,onBlur:m,onMouseEnter:g,onMouseLeave:v,onTouchStart:k}=n,z=O.useRef(null);O.useEffect(()=>{if(r==="render"&&f(!0),r==="viewport"){let B=le=>{le.forEach(se=>{f(se.isIntersecting)})},D=new IntersectionObserver(B,{threshold:.5});return z.current&&D.observe(z.current),()=>{D.disconnect()}}},[r]),O.useEffect(()=>{if(o){let B=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(B)}}},[o]);let W=()=>{c(!0)},U=()=>{c(!1),f(!1)};return i?r!=="intent"?[u,z,{}]:[u,z,{onFocus:To(p,W),onBlur:To(m,U),onMouseEnter:To(g,W),onMouseLeave:To(v,U),onTouchStart:To(k,W)}]:[!1,z,{}]}function To(r,n){return i=>{r&&r(i),i.defaultPrevented||n(i)}}function eC({page:r,...n}){let{router:i}=Rv(),o=O.useMemo(()=>uv(i.routes,r,i.basename),[i.routes,r,i.basename]);return o?O.createElement(nC,{page:r,matches:o,...n}):null}function tC(r){let{manifest:n,routeModules:i}=jv(),[o,c]=O.useState([]);return O.useEffect(()=>{let u=!1;return Y1(r,n,i).then(f=>{u||c(f)}),()=>{u=!0}},[r,n,i]),o}function nC({page:r,matches:n,...i}){let o=Wn(),{manifest:c,routeModules:u}=jv(),{basename:f}=Rv(),{loaderData:p,matches:m}=Q1(),g=O.useMemo(()=>ny(r,n,m,c,o,"data"),[r,n,m,c,o]),v=O.useMemo(()=>ny(r,n,m,c,o,"assets"),[r,n,m,c,o]),k=O.useMemo(()=>{if(r===o.pathname+o.search+o.hash)return[];let U=new Set,B=!1;if(n.forEach(le=>{let se=c.routes[le.route.id];!se||!se.hasLoader||(!g.some(fe=>fe.route.id===le.route.id)&&le.route.id in p&&u[le.route.id]?.shouldRevalidate||se.hasClientLoader?B=!0:U.add(le.route.id))}),U.size===0)return[];let D=V1(r,f,"data");return B&&U.size>0&&D.searchParams.set("_routes",n.filter(le=>U.has(le.route.id)).map(le=>le.route.id).join(",")),[D.pathname+D.search]},[f,p,o,c,g,n,r,u]),z=O.useMemo(()=>W1(v,c),[v,c]),W=tC(v);return O.createElement(O.Fragment,null,k.map(U=>O.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...i})),z.map(U=>O.createElement("link",{key:U,rel:"modulepreload",href:U,...i})),W.map(({key:U,link:B})=>O.createElement("link",{key:U,nonce:i.nonce,...B})))}function rC(...r){return n=>{r.forEach(i=>{typeof i=="function"?i(n):i!=null&&(i.current=n)})}}var iC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{iC&&(window.__reactRouterVersion="7.11.0")}catch{}function sC({basename:r,children:n,unstable_useTransitions:i,window:o}){let c=O.useRef();c.current==null&&(c.current=zw({window:o,v5Compat:!0}));let u=c.current,[f,p]=O.useState({action:u.action,location:u.location}),m=O.useCallback(g=>{i===!1?p(g):O.startTransition(()=>p(g))},[i]);return O.useLayoutEffect(()=>u.listen(m),[u,m]),O.createElement(M1,{basename:r,children:n,location:f.location,navigationType:f.action,navigator:u,unstable_useTransitions:i})}var Ev=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xt=O.forwardRef(function({onClick:n,discover:i="render",prefetch:o="none",relative:c,reloadDocument:u,replace:f,state:p,target:m,to:g,preventScrollReset:v,viewTransition:k,unstable_defaultShouldRevalidate:z,...W},U){let{basename:B,unstable_useTransitions:D}=O.useContext(_n),le=typeof g=="string"&&Ev.test(g),se=mv(g,B);g=se.to;let fe=v1(g,{relative:c}),[oe,te,ce]=Z1(o,W),ne=cC(g,{replace:f,state:p,target:m,preventScrollReset:v,relative:c,viewTransition:k,unstable_defaultShouldRevalidate:z,unstable_useTransitions:D});function Te(xe){n&&n(xe),xe.defaultPrevented||ne(xe)}let Me=O.createElement("a",{...W,...ce,href:se.absoluteURL||fe,onClick:se.isExternal||u?n:Te,ref:rC(U,te),target:m,"data-discover":!le&&i==="render"?"true":void 0});return oe&&!le?O.createElement(O.Fragment,null,Me,O.createElement(eC,{page:fe})):Me});Xt.displayName="Link";var oC=O.forwardRef(function({"aria-current":n="page",caseSensitive:i=!1,className:o="",end:c=!1,style:u,to:f,viewTransition:p,children:m,...g},v){let k=Lo(f,{relative:g.relative}),z=Wn(),W=O.useContext(Pl),{navigator:U,basename:B}=O.useContext(_n),D=W!=null&&mC(k)&&p===!0,le=U.encodeLocation?U.encodeLocation(k).pathname:k.pathname,se=z.pathname,fe=W&&W.navigation&&W.navigation.location?W.navigation.location.pathname:null;i||(se=se.toLowerCase(),fe=fe?fe.toLowerCase():null,le=le.toLowerCase()),fe&&B&&(fe=Cr(fe,B)||fe);const oe=le!=="/"&&le.endsWith("/")?le.length-1:le.length;let te=se===le||!c&&se.startsWith(le)&&se.charAt(oe)==="/",ce=fe!=null&&(fe===le||!c&&fe.startsWith(le)&&fe.charAt(le.length)==="/"),ne={isActive:te,isPending:ce,isTransitioning:D},Te=te?n:void 0,Me;typeof o=="function"?Me=o(ne):Me=[o,te?"active":null,ce?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let xe=typeof u=="function"?u(ne):u;return O.createElement(Xt,{...g,"aria-current":Te,className:Me,ref:v,style:xe,to:f,viewTransition:p},typeof m=="function"?m(ne):m)});oC.displayName="NavLink";var aC=O.forwardRef(({discover:r="render",fetcherKey:n,navigate:i,reloadDocument:o,replace:c,state:u,method:f=ml,action:p,onSubmit:m,relative:g,preventScrollReset:v,viewTransition:k,unstable_defaultShouldRevalidate:z,...W},U)=>{let{unstable_useTransitions:B}=O.useContext(_n),D=hC(),le=pC(p,{relative:g}),se=f.toLowerCase()==="get"?"get":"post",fe=typeof p=="string"&&Ev.test(p),oe=te=>{if(m&&m(te),te.defaultPrevented)return;te.preventDefault();let ce=te.nativeEvent.submitter,ne=ce?.getAttribute("formmethod")||f,Te=()=>D(ce||te.currentTarget,{fetcherKey:n,method:ne,navigate:i,replace:c,state:u,relative:g,preventScrollReset:v,viewTransition:k,unstable_defaultShouldRevalidate:z});B&&i!==!1?O.startTransition(()=>Te()):Te()};return O.createElement("form",{ref:U,method:se,action:le,onSubmit:o?m:oe,...W,"data-discover":!fe&&r==="render"?"true":void 0})});aC.displayName="Form";function lC(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kv(r){let n=O.useContext(Rs);return Ct(n,lC(r)),n}function cC(r,{target:n,replace:i,state:o,preventScrollReset:c,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:p,unstable_useTransitions:m}={}){let g=rr(),v=Wn(),k=Lo(r,{relative:u});return O.useCallback(z=>{if(L1(z,n)){z.preventDefault();let W=i!==void 0?i:Mo(v)===Mo(k),U=()=>g(r,{replace:W,state:o,preventScrollReset:c,relative:u,viewTransition:f,unstable_defaultShouldRevalidate:p});m?O.startTransition(()=>U()):U()}},[v,g,k,i,o,n,r,c,u,f,p,m])}function uC(r){kn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let n=O.useRef(qd(r)),i=O.useRef(!1),o=Wn(),c=O.useMemo(()=>B1(o.search,i.current?null:n.current),[o.search]),u=rr(),f=O.useCallback((p,m)=>{const g=qd(typeof p=="function"?p(new URLSearchParams(c)):p);i.current=!0,u("?"+g,m)},[u,c]);return[c,f]}var dC=0,fC=()=>`__${String(++dC)}__`;function hC(){let{router:r}=kv("useSubmit"),{basename:n}=O.useContext(_n),i=_1(),o=r.fetch,c=r.navigate;return O.useCallback(async(u,f={})=>{let{action:p,method:m,encType:g,formData:v,body:k}=$1(u,n);if(f.navigate===!1){let z=f.fetcherKey||fC();await o(z,i,f.action||p,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:v,body:k,formMethod:f.method||m,formEncType:f.encType||g,flushSync:f.flushSync})}else await c(f.action||p,{unstable_defaultShouldRevalidate:f.unstable_defaultShouldRevalidate,preventScrollReset:f.preventScrollReset,formData:v,body:k,formMethod:f.method||m,formEncType:f.encType||g,replace:f.replace,state:f.state,fromRouteId:i,flushSync:f.flushSync,viewTransition:f.viewTransition})},[o,c,n,i])}function pC(r,{relative:n}={}){let{basename:i}=O.useContext(_n),o=O.useContext(Yn);Ct(o,"useFormAction must be used inside a RouteContext");let[c]=o.matches.slice(-1),u={...Lo(r||".",{relative:n})},f=Wn();if(r==null){u.search=f.search;let p=new URLSearchParams(u.search),m=p.getAll("index");if(m.some(v=>v==="")){p.delete("index"),m.filter(k=>k).forEach(k=>p.append("index",k));let v=p.toString();u.search=v?`?${v}`:""}}return(!r||r===".")&&c.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(u.pathname=u.pathname==="/"?i:wr([i,u.pathname])),Mo(u)}function mC(r,{relative:n}={}){let i=O.useContext(yv);Ct(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=kv("useViewTransitionState"),c=Lo(r,{relative:n});if(!i.isTransitioning)return!1;let u=Cr(i.currentLocation.pathname,o)||i.currentLocation.pathname,f=Cr(i.nextLocation.pathname,o)||i.nextLocation.pathname;return wl(c.pathname,f)!=null||wl(c.pathname,u)!=null}const gC=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),yC=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,i,o)=>o?o.toUpperCase():i.toLowerCase()),ry=r=>{const n=yC(r);return n.charAt(0).toUpperCase()+n.slice(1)},_v=(...r)=>r.filter((n,i,o)=>!!n&&n.trim()!==""&&o.indexOf(n)===i).join(" ").trim(),vC=r=>{for(const n in r)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};var bC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const SC=O.forwardRef(({color:r="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:u,iconNode:f,...p},m)=>O.createElement("svg",{ref:m,...bC,width:n,height:n,stroke:r,strokeWidth:o?Number(i)*24/Number(n):i,className:_v("lucide",c),...!u&&!vC(p)&&{"aria-hidden":"true"},...p},[...f.map(([g,v])=>O.createElement(g,v)),...Array.isArray(u)?u:[u]]));const ot=(r,n)=>{const i=O.forwardRef(({className:o,...c},u)=>O.createElement(SC,{ref:u,iconNode:n,className:_v(`lucide-${gC(ry(r))}`,`lucide-${r}`,o),...c}));return i.displayName=ry(r),i};const xC=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ff=ot("arrow-left",xC);const wC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],iy=ot("calendar",wC);const CC=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],TC=ot("car",CC);const RC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ol=ot("circle-alert",RC);const jC=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ro=ot("circle-check-big",jC);const EC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Cl=ot("circle-question-mark",EC);const kC=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],_C=ot("clock",kC);const AC=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],NC=ot("copy",AC);const OC=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],MC=ot("ellipsis-vertical",OC);const PC=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Tl=ot("eye-off",PC);const UC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Rl=ot("eye",UC);const DC=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],hf=ot("funnel",DC);const IC=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],zC=ot("house",IC);const LC=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],yl=ot("key",LC);const BC=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],HC=ot("layout-dashboard",BC);const qC=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],sy=ot("log-out",qC);const $C=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],oy=ot("mail",$C);const VC=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Av=ot("map-pin",VC);const GC=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],FC=ot("menu",GC);const YC=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],ys=ot("message-circle",YC);const WC=[["path",{d:"M5 12h14",key:"1ays0h"}]],pf=ot("minus",WC);const XC=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],JC=ot("phone",XC);const KC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],jl=ot("plus",KC);const QC=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Po=ot("send",QC);const ZC=[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]],eT=ot("share",ZC);const tT=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],nT=ot("shield-check",tT);const rT=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Nv=ot("square-pen",rT);const iT=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],$d=ot("star",iT);const sT=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ay=ot("trash-2",sT);const oT=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],aT=ot("upload",oT);const lT=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],cT=ot("user",lT);const uT=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ti=ot("users",uT);const dT=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],fT=ot("utensils",dT);const hT=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],pT=ot("wifi",hT);const mT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],mf=ot("x",mT),Ov=O.createContext(),gT=()=>{const r=O.useContext(Ov);if(!r)throw new Error("useNotifications must be used within NotificationProvider");return r},yT=({children:r})=>{const[n,i]=O.useState(0),o=()=>{i(0)};return a.jsx(Ov.Provider,{value:{unreadCount:n,clearUnreadCount:o},children:r})};function Mv(r,n){return function(){return r.apply(n,arguments)}}const{toString:vT}=Object.prototype,{getPrototypeOf:gf}=Object,{iterator:Dl,toStringTag:Pv}=Symbol,Il=(r=>n=>{const i=vT.call(n);return r[i]||(r[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Xn=r=>(r=r.toLowerCase(),n=>Il(n)===r),zl=r=>n=>typeof n===r,{isArray:Es}=Array,vs=zl("undefined");function Bo(r){return r!==null&&!vs(r)&&r.constructor!==null&&!vs(r.constructor)&&vn(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const Uv=Xn("ArrayBuffer");function bT(r){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(r):n=r&&r.buffer&&Uv(r.buffer),n}const ST=zl("string"),vn=zl("function"),Dv=zl("number"),Ho=r=>r!==null&&typeof r=="object",xT=r=>r===!0||r===!1,vl=r=>{if(Il(r)!=="object")return!1;const n=gf(r);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Pv in r)&&!(Dl in r)},wT=r=>{if(!Ho(r)||Bo(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},CT=Xn("Date"),TT=Xn("File"),RT=Xn("Blob"),jT=Xn("FileList"),ET=r=>Ho(r)&&vn(r.pipe),kT=r=>{let n;return r&&(typeof FormData=="function"&&r instanceof FormData||vn(r.append)&&((n=Il(r))==="formdata"||n==="object"&&vn(r.toString)&&r.toString()==="[object FormData]"))},_T=Xn("URLSearchParams"),[AT,NT,OT,MT]=["ReadableStream","Request","Response","Headers"].map(Xn),PT=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function qo(r,n,{allOwnKeys:i=!1}={}){if(r===null||typeof r>"u")return;let o,c;if(typeof r!="object"&&(r=[r]),Es(r))for(o=0,c=r.length;o<c;o++)n.call(null,r[o],o,r);else{if(Bo(r))return;const u=i?Object.getOwnPropertyNames(r):Object.keys(r),f=u.length;let p;for(o=0;o<f;o++)p=u[o],n.call(null,r[p],p,r)}}function Iv(r,n){if(Bo(r))return null;n=n.toLowerCase();const i=Object.keys(r);let o=i.length,c;for(;o-- >0;)if(c=i[o],n===c.toLowerCase())return c;return null}const wi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,zv=r=>!vs(r)&&r!==wi;function Vd(){const{caseless:r,skipUndefined:n}=zv(this)&&this||{},i={},o=(c,u)=>{const f=r&&Iv(i,u)||u;vl(i[f])&&vl(c)?i[f]=Vd(i[f],c):vl(c)?i[f]=Vd({},c):Es(c)?i[f]=c.slice():(!n||!vs(c))&&(i[f]=c)};for(let c=0,u=arguments.length;c<u;c++)arguments[c]&&qo(arguments[c],o);return i}const UT=(r,n,i,{allOwnKeys:o}={})=>(qo(n,(c,u)=>{i&&vn(c)?r[u]=Mv(c,i):r[u]=c},{allOwnKeys:o}),r),DT=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),IT=(r,n,i,o)=>{r.prototype=Object.create(n.prototype,o),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:n.prototype}),i&&Object.assign(r.prototype,i)},zT=(r,n,i,o)=>{let c,u,f;const p={};if(n=n||{},r==null)return n;do{for(c=Object.getOwnPropertyNames(r),u=c.length;u-- >0;)f=c[u],(!o||o(f,r,n))&&!p[f]&&(n[f]=r[f],p[f]=!0);r=i!==!1&&gf(r)}while(r&&(!i||i(r,n))&&r!==Object.prototype);return n},LT=(r,n,i)=>{r=String(r),(i===void 0||i>r.length)&&(i=r.length),i-=n.length;const o=r.indexOf(n,i);return o!==-1&&o===i},BT=r=>{if(!r)return null;if(Es(r))return r;let n=r.length;if(!Dv(n))return null;const i=new Array(n);for(;n-- >0;)i[n]=r[n];return i},HT=(r=>n=>r&&n instanceof r)(typeof Uint8Array<"u"&&gf(Uint8Array)),qT=(r,n)=>{const o=(r&&r[Dl]).call(r);let c;for(;(c=o.next())&&!c.done;){const u=c.value;n.call(r,u[0],u[1])}},$T=(r,n)=>{let i;const o=[];for(;(i=r.exec(n))!==null;)o.push(i);return o},VT=Xn("HTMLFormElement"),GT=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,o,c){return o.toUpperCase()+c}),ly=(({hasOwnProperty:r})=>(n,i)=>r.call(n,i))(Object.prototype),FT=Xn("RegExp"),Lv=(r,n)=>{const i=Object.getOwnPropertyDescriptors(r),o={};qo(i,(c,u)=>{let f;(f=n(c,u,r))!==!1&&(o[u]=f||c)}),Object.defineProperties(r,o)},YT=r=>{Lv(r,(n,i)=>{if(vn(r)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const o=r[i];if(vn(o)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},WT=(r,n)=>{const i={},o=c=>{c.forEach(u=>{i[u]=!0})};return Es(r)?o(r):o(String(r).split(n)),i},XT=()=>{},JT=(r,n)=>r!=null&&Number.isFinite(r=+r)?r:n;function KT(r){return!!(r&&vn(r.append)&&r[Pv]==="FormData"&&r[Dl])}const QT=r=>{const n=new Array(10),i=(o,c)=>{if(Ho(o)){if(n.indexOf(o)>=0)return;if(Bo(o))return o;if(!("toJSON"in o)){n[c]=o;const u=Es(o)?[]:{};return qo(o,(f,p)=>{const m=i(f,c+1);!vs(m)&&(u[p]=m)}),n[c]=void 0,u}}return o};return i(r,0)},ZT=Xn("AsyncFunction"),eR=r=>r&&(Ho(r)||vn(r))&&vn(r.then)&&vn(r.catch),Bv=((r,n)=>r?setImmediate:n?((i,o)=>(wi.addEventListener("message",({source:c,data:u})=>{c===wi&&u===i&&o.length&&o.shift()()},!1),c=>{o.push(c),wi.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",vn(wi.postMessage)),tR=typeof queueMicrotask<"u"?queueMicrotask.bind(wi):typeof process<"u"&&process.nextTick||Bv,nR=r=>r!=null&&vn(r[Dl]),ve={isArray:Es,isArrayBuffer:Uv,isBuffer:Bo,isFormData:kT,isArrayBufferView:bT,isString:ST,isNumber:Dv,isBoolean:xT,isObject:Ho,isPlainObject:vl,isEmptyObject:wT,isReadableStream:AT,isRequest:NT,isResponse:OT,isHeaders:MT,isUndefined:vs,isDate:CT,isFile:TT,isBlob:RT,isRegExp:FT,isFunction:vn,isStream:ET,isURLSearchParams:_T,isTypedArray:HT,isFileList:jT,forEach:qo,merge:Vd,extend:UT,trim:PT,stripBOM:DT,inherits:IT,toFlatObject:zT,kindOf:Il,kindOfTest:Xn,endsWith:LT,toArray:BT,forEachEntry:qT,matchAll:$T,isHTMLForm:VT,hasOwnProperty:ly,hasOwnProp:ly,reduceDescriptors:Lv,freezeMethods:YT,toObjectSet:WT,toCamelCase:GT,noop:XT,toFiniteNumber:JT,findKey:Iv,global:wi,isContextDefined:zv,isSpecCompliantForm:KT,toJSONObject:QT,isAsyncFn:ZT,isThenable:eR,setImmediate:Bv,asap:tR,isIterable:nR};function Ke(r,n,i,o,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",n&&(this.code=n),i&&(this.config=i),o&&(this.request=o),c&&(this.response=c,this.status=c.status?c.status:null)}ve.inherits(Ke,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ve.toJSONObject(this.config),code:this.code,status:this.status}}});const Hv=Ke.prototype,qv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{qv[r]={value:r}});Object.defineProperties(Ke,qv);Object.defineProperty(Hv,"isAxiosError",{value:!0});Ke.from=(r,n,i,o,c,u)=>{const f=Object.create(Hv);ve.toFlatObject(r,f,function(v){return v!==Error.prototype},g=>g!=="isAxiosError");const p=r&&r.message?r.message:"Error",m=n==null&&r?r.code:n;return Ke.call(f,p,m,i,o,c),r&&f.cause==null&&Object.defineProperty(f,"cause",{value:r,configurable:!0}),f.name=r&&r.name||"Error",u&&Object.assign(f,u),f};const rR=null;function Gd(r){return ve.isPlainObject(r)||ve.isArray(r)}function $v(r){return ve.endsWith(r,"[]")?r.slice(0,-2):r}function cy(r,n,i){return r?r.concat(n).map(function(c,u){return c=$v(c),!i&&u?"["+c+"]":c}).join(i?".":""):n}function iR(r){return ve.isArray(r)&&!r.some(Gd)}const sR=ve.toFlatObject(ve,{},null,function(n){return/^is[A-Z]/.test(n)});function Ll(r,n,i){if(!ve.isObject(r))throw new TypeError("target must be an object");n=n||new FormData,i=ve.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(B,D){return!ve.isUndefined(D[B])});const o=i.metaTokens,c=i.visitor||v,u=i.dots,f=i.indexes,m=(i.Blob||typeof Blob<"u"&&Blob)&&ve.isSpecCompliantForm(n);if(!ve.isFunction(c))throw new TypeError("visitor must be a function");function g(U){if(U===null)return"";if(ve.isDate(U))return U.toISOString();if(ve.isBoolean(U))return U.toString();if(!m&&ve.isBlob(U))throw new Ke("Blob is not supported. Use a Buffer instead.");return ve.isArrayBuffer(U)||ve.isTypedArray(U)?m&&typeof Blob=="function"?new Blob([U]):Buffer.from(U):U}function v(U,B,D){let le=U;if(U&&!D&&typeof U=="object"){if(ve.endsWith(B,"{}"))B=o?B:B.slice(0,-2),U=JSON.stringify(U);else if(ve.isArray(U)&&iR(U)||(ve.isFileList(U)||ve.endsWith(B,"[]"))&&(le=ve.toArray(U)))return B=$v(B),le.forEach(function(fe,oe){!(ve.isUndefined(fe)||fe===null)&&n.append(f===!0?cy([B],oe,u):f===null?B:B+"[]",g(fe))}),!1}return Gd(U)?!0:(n.append(cy(D,B,u),g(U)),!1)}const k=[],z=Object.assign(sR,{defaultVisitor:v,convertValue:g,isVisitable:Gd});function W(U,B){if(!ve.isUndefined(U)){if(k.indexOf(U)!==-1)throw Error("Circular reference detected in "+B.join("."));k.push(U),ve.forEach(U,function(le,se){(!(ve.isUndefined(le)||le===null)&&c.call(n,le,ve.isString(se)?se.trim():se,B,z))===!0&&W(le,B?B.concat(se):[se])}),k.pop()}}if(!ve.isObject(r))throw new TypeError("data must be an object");return W(r),n}function uy(r){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(o){return n[o]})}function yf(r,n){this._pairs=[],r&&Ll(r,this,n)}const Vv=yf.prototype;Vv.append=function(n,i){this._pairs.push([n,i])};Vv.toString=function(n){const i=n?function(o){return n.call(this,o,uy)}:uy;return this._pairs.map(function(c){return i(c[0])+"="+i(c[1])},"").join("&")};function oR(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Gv(r,n,i){if(!n)return r;const o=i&&i.encode||oR;ve.isFunction(i)&&(i={serialize:i});const c=i&&i.serialize;let u;if(c?u=c(n,i):u=ve.isURLSearchParams(n)?n.toString():new yf(n,i).toString(o),u){const f=r.indexOf("#");f!==-1&&(r=r.slice(0,f)),r+=(r.indexOf("?")===-1?"?":"&")+u}return r}class dy{constructor(){this.handlers=[]}use(n,i,o){return this.handlers.push({fulfilled:n,rejected:i,synchronous:o?o.synchronous:!1,runWhen:o?o.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){ve.forEach(this.handlers,function(o){o!==null&&n(o)})}}const Fv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},aR=typeof URLSearchParams<"u"?URLSearchParams:yf,lR=typeof FormData<"u"?FormData:null,cR=typeof Blob<"u"?Blob:null,uR={isBrowser:!0,classes:{URLSearchParams:aR,FormData:lR,Blob:cR},protocols:["http","https","file","blob","url","data"]},vf=typeof window<"u"&&typeof document<"u",Fd=typeof navigator=="object"&&navigator||void 0,dR=vf&&(!Fd||["ReactNative","NativeScript","NS"].indexOf(Fd.product)<0),fR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",hR=vf&&window.location.href||"http://localhost",pR=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:vf,hasStandardBrowserEnv:dR,hasStandardBrowserWebWorkerEnv:fR,navigator:Fd,origin:hR},Symbol.toStringTag,{value:"Module"})),sn={...pR,...uR};function mR(r,n){return Ll(r,new sn.classes.URLSearchParams,{visitor:function(i,o,c,u){return sn.isNode&&ve.isBuffer(i)?(this.append(o,i.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)},...n})}function gR(r){return ve.matchAll(/\w+|\[(\w*)]/g,r).map(n=>n[0]==="[]"?"":n[1]||n[0])}function yR(r){const n={},i=Object.keys(r);let o;const c=i.length;let u;for(o=0;o<c;o++)u=i[o],n[u]=r[u];return n}function Yv(r){function n(i,o,c,u){let f=i[u++];if(f==="__proto__")return!0;const p=Number.isFinite(+f),m=u>=i.length;return f=!f&&ve.isArray(c)?c.length:f,m?(ve.hasOwnProp(c,f)?c[f]=[c[f],o]:c[f]=o,!p):((!c[f]||!ve.isObject(c[f]))&&(c[f]=[]),n(i,o,c[f],u)&&ve.isArray(c[f])&&(c[f]=yR(c[f])),!p)}if(ve.isFormData(r)&&ve.isFunction(r.entries)){const i={};return ve.forEachEntry(r,(o,c)=>{n(gR(o),c,i,0)}),i}return null}function vR(r,n,i){if(ve.isString(r))try{return(n||JSON.parse)(r),ve.trim(r)}catch(o){if(o.name!=="SyntaxError")throw o}return(i||JSON.stringify)(r)}const $o={transitional:Fv,adapter:["xhr","http","fetch"],transformRequest:[function(n,i){const o=i.getContentType()||"",c=o.indexOf("application/json")>-1,u=ve.isObject(n);if(u&&ve.isHTMLForm(n)&&(n=new FormData(n)),ve.isFormData(n))return c?JSON.stringify(Yv(n)):n;if(ve.isArrayBuffer(n)||ve.isBuffer(n)||ve.isStream(n)||ve.isFile(n)||ve.isBlob(n)||ve.isReadableStream(n))return n;if(ve.isArrayBufferView(n))return n.buffer;if(ve.isURLSearchParams(n))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let p;if(u){if(o.indexOf("application/x-www-form-urlencoded")>-1)return mR(n,this.formSerializer).toString();if((p=ve.isFileList(n))||o.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Ll(p?{"files[]":n}:n,m&&new m,this.formSerializer)}}return u||c?(i.setContentType("application/json",!1),vR(n)):n}],transformResponse:[function(n){const i=this.transitional||$o.transitional,o=i&&i.forcedJSONParsing,c=this.responseType==="json";if(ve.isResponse(n)||ve.isReadableStream(n))return n;if(n&&ve.isString(n)&&(o&&!this.responseType||c)){const f=!(i&&i.silentJSONParsing)&&c;try{return JSON.parse(n,this.parseReviver)}catch(p){if(f)throw p.name==="SyntaxError"?Ke.from(p,Ke.ERR_BAD_RESPONSE,this,null,this.response):p}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:sn.classes.FormData,Blob:sn.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ve.forEach(["delete","get","head","post","put","patch"],r=>{$o.headers[r]={}});const bR=ve.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),SR=r=>{const n={};let i,o,c;return r&&r.split(`
`).forEach(function(f){c=f.indexOf(":"),i=f.substring(0,c).trim().toLowerCase(),o=f.substring(c+1).trim(),!(!i||n[i]&&bR[i])&&(i==="set-cookie"?n[i]?n[i].push(o):n[i]=[o]:n[i]=n[i]?n[i]+", "+o:o)}),n},fy=Symbol("internals");function jo(r){return r&&String(r).trim().toLowerCase()}function bl(r){return r===!1||r==null?r:ve.isArray(r)?r.map(bl):String(r)}function xR(r){const n=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let o;for(;o=i.exec(r);)n[o[1]]=o[2];return n}const wR=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function Cd(r,n,i,o,c){if(ve.isFunction(o))return o.call(this,n,i);if(c&&(n=i),!!ve.isString(n)){if(ve.isString(o))return n.indexOf(o)!==-1;if(ve.isRegExp(o))return o.test(n)}}function CR(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,i,o)=>i.toUpperCase()+o)}function TR(r,n){const i=ve.toCamelCase(" "+n);["get","set","has"].forEach(o=>{Object.defineProperty(r,o+i,{value:function(c,u,f){return this[o].call(this,n,c,u,f)},configurable:!0})})}let bn=class{constructor(n){n&&this.set(n)}set(n,i,o){const c=this;function u(p,m,g){const v=jo(m);if(!v)throw new Error("header name must be a non-empty string");const k=ve.findKey(c,v);(!k||c[k]===void 0||g===!0||g===void 0&&c[k]!==!1)&&(c[k||m]=bl(p))}const f=(p,m)=>ve.forEach(p,(g,v)=>u(g,v,m));if(ve.isPlainObject(n)||n instanceof this.constructor)f(n,i);else if(ve.isString(n)&&(n=n.trim())&&!wR(n))f(SR(n),i);else if(ve.isObject(n)&&ve.isIterable(n)){let p={},m,g;for(const v of n){if(!ve.isArray(v))throw TypeError("Object iterator must return a key-value pair");p[g=v[0]]=(m=p[g])?ve.isArray(m)?[...m,v[1]]:[m,v[1]]:v[1]}f(p,i)}else n!=null&&u(i,n,o);return this}get(n,i){if(n=jo(n),n){const o=ve.findKey(this,n);if(o){const c=this[o];if(!i)return c;if(i===!0)return xR(c);if(ve.isFunction(i))return i.call(this,c,o);if(ve.isRegExp(i))return i.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,i){if(n=jo(n),n){const o=ve.findKey(this,n);return!!(o&&this[o]!==void 0&&(!i||Cd(this,this[o],o,i)))}return!1}delete(n,i){const o=this;let c=!1;function u(f){if(f=jo(f),f){const p=ve.findKey(o,f);p&&(!i||Cd(o,o[p],p,i))&&(delete o[p],c=!0)}}return ve.isArray(n)?n.forEach(u):u(n),c}clear(n){const i=Object.keys(this);let o=i.length,c=!1;for(;o--;){const u=i[o];(!n||Cd(this,this[u],u,n,!0))&&(delete this[u],c=!0)}return c}normalize(n){const i=this,o={};return ve.forEach(this,(c,u)=>{const f=ve.findKey(o,u);if(f){i[f]=bl(c),delete i[u];return}const p=n?CR(u):String(u).trim();p!==u&&delete i[u],i[p]=bl(c),o[p]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const i=Object.create(null);return ve.forEach(this,(o,c)=>{o!=null&&o!==!1&&(i[c]=n&&ve.isArray(o)?o.join(", "):o)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,i])=>n+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...i){const o=new this(n);return i.forEach(c=>o.set(c)),o}static accessor(n){const o=(this[fy]=this[fy]={accessors:{}}).accessors,c=this.prototype;function u(f){const p=jo(f);o[p]||(TR(c,f),o[p]=!0)}return ve.isArray(n)?n.forEach(u):u(n),this}};bn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ve.reduceDescriptors(bn.prototype,({value:r},n)=>{let i=n[0].toUpperCase()+n.slice(1);return{get:()=>r,set(o){this[i]=o}}});ve.freezeMethods(bn);function Td(r,n){const i=this||$o,o=n||i,c=bn.from(o.headers);let u=o.data;return ve.forEach(r,function(p){u=p.call(i,u,c.normalize(),n?n.status:void 0)}),c.normalize(),u}function Wv(r){return!!(r&&r.__CANCEL__)}function ks(r,n,i){Ke.call(this,r??"canceled",Ke.ERR_CANCELED,n,i),this.name="CanceledError"}ve.inherits(ks,Ke,{__CANCEL__:!0});function Xv(r,n,i){const o=i.config.validateStatus;!i.status||!o||o(i.status)?r(i):n(new Ke("Request failed with status code "+i.status,[Ke.ERR_BAD_REQUEST,Ke.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function RR(r){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return n&&n[1]||""}function jR(r,n){r=r||10;const i=new Array(r),o=new Array(r);let c=0,u=0,f;return n=n!==void 0?n:1e3,function(m){const g=Date.now(),v=o[u];f||(f=g),i[c]=m,o[c]=g;let k=u,z=0;for(;k!==c;)z+=i[k++],k=k%r;if(c=(c+1)%r,c===u&&(u=(u+1)%r),g-f<n)return;const W=v&&g-v;return W?Math.round(z*1e3/W):void 0}}function ER(r,n){let i=0,o=1e3/n,c,u;const f=(g,v=Date.now())=>{i=v,c=null,u&&(clearTimeout(u),u=null),r(...g)};return[(...g)=>{const v=Date.now(),k=v-i;k>=o?f(g,v):(c=g,u||(u=setTimeout(()=>{u=null,f(c)},o-k)))},()=>c&&f(c)]}const El=(r,n,i=3)=>{let o=0;const c=jR(50,250);return ER(u=>{const f=u.loaded,p=u.lengthComputable?u.total:void 0,m=f-o,g=c(m),v=f<=p;o=f;const k={loaded:f,total:p,progress:p?f/p:void 0,bytes:m,rate:g||void 0,estimated:g&&p&&v?(p-f)/g:void 0,event:u,lengthComputable:p!=null,[n?"download":"upload"]:!0};r(k)},i)},hy=(r,n)=>{const i=r!=null;return[o=>n[0]({lengthComputable:i,total:r,loaded:o}),n[1]]},py=r=>(...n)=>ve.asap(()=>r(...n)),kR=sn.hasStandardBrowserEnv?((r,n)=>i=>(i=new URL(i,sn.origin),r.protocol===i.protocol&&r.host===i.host&&(n||r.port===i.port)))(new URL(sn.origin),sn.navigator&&/(msie|trident)/i.test(sn.navigator.userAgent)):()=>!0,_R=sn.hasStandardBrowserEnv?{write(r,n,i,o,c,u,f){if(typeof document>"u")return;const p=[`${r}=${encodeURIComponent(n)}`];ve.isNumber(i)&&p.push(`expires=${new Date(i).toUTCString()}`),ve.isString(o)&&p.push(`path=${o}`),ve.isString(c)&&p.push(`domain=${c}`),u===!0&&p.push("secure"),ve.isString(f)&&p.push(`SameSite=${f}`),document.cookie=p.join("; ")},read(r){if(typeof document>"u")return null;const n=document.cookie.match(new RegExp("(?:^|; )"+r+"=([^;]*)"));return n?decodeURIComponent(n[1]):null},remove(r){this.write(r,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function AR(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function NR(r,n){return n?r.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):r}function Jv(r,n,i){let o=!AR(n);return r&&(o||i==!1)?NR(r,n):n}const my=r=>r instanceof bn?{...r}:r;function Ei(r,n){n=n||{};const i={};function o(g,v,k,z){return ve.isPlainObject(g)&&ve.isPlainObject(v)?ve.merge.call({caseless:z},g,v):ve.isPlainObject(v)?ve.merge({},v):ve.isArray(v)?v.slice():v}function c(g,v,k,z){if(ve.isUndefined(v)){if(!ve.isUndefined(g))return o(void 0,g,k,z)}else return o(g,v,k,z)}function u(g,v){if(!ve.isUndefined(v))return o(void 0,v)}function f(g,v){if(ve.isUndefined(v)){if(!ve.isUndefined(g))return o(void 0,g)}else return o(void 0,v)}function p(g,v,k){if(k in n)return o(g,v);if(k in r)return o(void 0,g)}const m={url:u,method:u,data:u,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:p,headers:(g,v,k)=>c(my(g),my(v),k,!0)};return ve.forEach(Object.keys({...r,...n}),function(v){const k=m[v]||c,z=k(r[v],n[v],v);ve.isUndefined(z)&&k!==p||(i[v]=z)}),i}const Kv=r=>{const n=Ei({},r);let{data:i,withXSRFToken:o,xsrfHeaderName:c,xsrfCookieName:u,headers:f,auth:p}=n;if(n.headers=f=bn.from(f),n.url=Gv(Jv(n.baseURL,n.url,n.allowAbsoluteUrls),r.params,r.paramsSerializer),p&&f.set("Authorization","Basic "+btoa((p.username||"")+":"+(p.password?unescape(encodeURIComponent(p.password)):""))),ve.isFormData(i)){if(sn.hasStandardBrowserEnv||sn.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if(ve.isFunction(i.getHeaders)){const m=i.getHeaders(),g=["content-type","content-length"];Object.entries(m).forEach(([v,k])=>{g.includes(v.toLowerCase())&&f.set(v,k)})}}if(sn.hasStandardBrowserEnv&&(o&&ve.isFunction(o)&&(o=o(n)),o||o!==!1&&kR(n.url))){const m=c&&u&&_R.read(u);m&&f.set(c,m)}return n},OR=typeof XMLHttpRequest<"u",MR=OR&&function(r){return new Promise(function(i,o){const c=Kv(r);let u=c.data;const f=bn.from(c.headers).normalize();let{responseType:p,onUploadProgress:m,onDownloadProgress:g}=c,v,k,z,W,U;function B(){W&&W(),U&&U(),c.cancelToken&&c.cancelToken.unsubscribe(v),c.signal&&c.signal.removeEventListener("abort",v)}let D=new XMLHttpRequest;D.open(c.method.toUpperCase(),c.url,!0),D.timeout=c.timeout;function le(){if(!D)return;const fe=bn.from("getAllResponseHeaders"in D&&D.getAllResponseHeaders()),te={data:!p||p==="text"||p==="json"?D.responseText:D.response,status:D.status,statusText:D.statusText,headers:fe,config:r,request:D};Xv(function(ne){i(ne),B()},function(ne){o(ne),B()},te),D=null}"onloadend"in D?D.onloadend=le:D.onreadystatechange=function(){!D||D.readyState!==4||D.status===0&&!(D.responseURL&&D.responseURL.indexOf("file:")===0)||setTimeout(le)},D.onabort=function(){D&&(o(new Ke("Request aborted",Ke.ECONNABORTED,r,D)),D=null)},D.onerror=function(oe){const te=oe&&oe.message?oe.message:"Network Error",ce=new Ke(te,Ke.ERR_NETWORK,r,D);ce.event=oe||null,o(ce),D=null},D.ontimeout=function(){let oe=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const te=c.transitional||Fv;c.timeoutErrorMessage&&(oe=c.timeoutErrorMessage),o(new Ke(oe,te.clarifyTimeoutError?Ke.ETIMEDOUT:Ke.ECONNABORTED,r,D)),D=null},u===void 0&&f.setContentType(null),"setRequestHeader"in D&&ve.forEach(f.toJSON(),function(oe,te){D.setRequestHeader(te,oe)}),ve.isUndefined(c.withCredentials)||(D.withCredentials=!!c.withCredentials),p&&p!=="json"&&(D.responseType=c.responseType),g&&([z,U]=El(g,!0),D.addEventListener("progress",z)),m&&D.upload&&([k,W]=El(m),D.upload.addEventListener("progress",k),D.upload.addEventListener("loadend",W)),(c.cancelToken||c.signal)&&(v=fe=>{D&&(o(!fe||fe.type?new ks(null,r,D):fe),D.abort(),D=null)},c.cancelToken&&c.cancelToken.subscribe(v),c.signal&&(c.signal.aborted?v():c.signal.addEventListener("abort",v)));const se=RR(c.url);if(se&&sn.protocols.indexOf(se)===-1){o(new Ke("Unsupported protocol "+se+":",Ke.ERR_BAD_REQUEST,r));return}D.send(u||null)})},PR=(r,n)=>{const{length:i}=r=r?r.filter(Boolean):[];if(n||i){let o=new AbortController,c;const u=function(g){if(!c){c=!0,p();const v=g instanceof Error?g:this.reason;o.abort(v instanceof Ke?v:new ks(v instanceof Error?v.message:v))}};let f=n&&setTimeout(()=>{f=null,u(new Ke(`timeout ${n} of ms exceeded`,Ke.ETIMEDOUT))},n);const p=()=>{r&&(f&&clearTimeout(f),f=null,r.forEach(g=>{g.unsubscribe?g.unsubscribe(u):g.removeEventListener("abort",u)}),r=null)};r.forEach(g=>g.addEventListener("abort",u));const{signal:m}=o;return m.unsubscribe=()=>ve.asap(p),m}},UR=function*(r,n){let i=r.byteLength;if(i<n){yield r;return}let o=0,c;for(;o<i;)c=o+n,yield r.slice(o,c),o=c},DR=async function*(r,n){for await(const i of IR(r))yield*UR(i,n)},IR=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const n=r.getReader();try{for(;;){const{done:i,value:o}=await n.read();if(i)break;yield o}}finally{await n.cancel()}},gy=(r,n,i,o)=>{const c=DR(r,n);let u=0,f,p=m=>{f||(f=!0,o&&o(m))};return new ReadableStream({async pull(m){try{const{done:g,value:v}=await c.next();if(g){p(),m.close();return}let k=v.byteLength;if(i){let z=u+=k;i(z)}m.enqueue(new Uint8Array(v))}catch(g){throw p(g),g}},cancel(m){return p(m),c.return()}},{highWaterMark:2})},yy=64*1024,{isFunction:al}=ve,zR=(({Request:r,Response:n})=>({Request:r,Response:n}))(ve.global),{ReadableStream:vy,TextEncoder:by}=ve.global,Sy=(r,...n)=>{try{return!!r(...n)}catch{return!1}},LR=r=>{r=ve.merge.call({skipUndefined:!0},zR,r);const{fetch:n,Request:i,Response:o}=r,c=n?al(n):typeof fetch=="function",u=al(i),f=al(o);if(!c)return!1;const p=c&&al(vy),m=c&&(typeof by=="function"?(U=>B=>U.encode(B))(new by):async U=>new Uint8Array(await new i(U).arrayBuffer())),g=u&&p&&Sy(()=>{let U=!1;const B=new i(sn.origin,{body:new vy,method:"POST",get duplex(){return U=!0,"half"}}).headers.has("Content-Type");return U&&!B}),v=f&&p&&Sy(()=>ve.isReadableStream(new o("").body)),k={stream:v&&(U=>U.body)};c&&["text","arrayBuffer","blob","formData","stream"].forEach(U=>{!k[U]&&(k[U]=(B,D)=>{let le=B&&B[U];if(le)return le.call(B);throw new Ke(`Response type '${U}' is not supported`,Ke.ERR_NOT_SUPPORT,D)})});const z=async U=>{if(U==null)return 0;if(ve.isBlob(U))return U.size;if(ve.isSpecCompliantForm(U))return(await new i(sn.origin,{method:"POST",body:U}).arrayBuffer()).byteLength;if(ve.isArrayBufferView(U)||ve.isArrayBuffer(U))return U.byteLength;if(ve.isURLSearchParams(U)&&(U=U+""),ve.isString(U))return(await m(U)).byteLength},W=async(U,B)=>{const D=ve.toFiniteNumber(U.getContentLength());return D??z(B)};return async U=>{let{url:B,method:D,data:le,signal:se,cancelToken:fe,timeout:oe,onDownloadProgress:te,onUploadProgress:ce,responseType:ne,headers:Te,withCredentials:Me="same-origin",fetchOptions:xe}=Kv(U),Ue=n||fetch;ne=ne?(ne+"").toLowerCase():"text";let He=PR([se,fe&&fe.toAbortSignal()],oe),ke=null;const Se=He&&He.unsubscribe&&(()=>{He.unsubscribe()});let Ie;try{if(ce&&g&&D!=="get"&&D!=="head"&&(Ie=await W(Te,le))!==0){let E=new i(B,{method:"POST",body:le,duplex:"half"}),I;if(ve.isFormData(le)&&(I=E.headers.get("content-type"))&&Te.setContentType(I),E.body){const[C,j]=hy(Ie,El(py(ce)));le=gy(E.body,yy,C,j)}}ve.isString(Me)||(Me=Me?"include":"omit");const q=u&&"credentials"in i.prototype,P={...xe,signal:He,method:D.toUpperCase(),headers:Te.normalize().toJSON(),body:le,duplex:"half",credentials:q?Me:void 0};ke=u&&new i(B,P);let X=await(u?Ue(ke,xe):Ue(B,P));const L=v&&(ne==="stream"||ne==="response");if(v&&(te||L&&Se)){const E={};["status","statusText","headers"].forEach(x=>{E[x]=X[x]});const I=ve.toFiniteNumber(X.headers.get("content-length")),[C,j]=te&&hy(I,El(py(te),!0))||[];X=new o(gy(X.body,yy,C,()=>{j&&j(),Se&&Se()}),E)}ne=ne||"text";let J=await k[ve.findKey(k,ne)||"text"](X,U);return!L&&Se&&Se(),await new Promise((E,I)=>{Xv(E,I,{data:J,headers:bn.from(X.headers),status:X.status,statusText:X.statusText,config:U,request:ke})})}catch(q){throw Se&&Se(),q&&q.name==="TypeError"&&/Load failed|fetch/i.test(q.message)?Object.assign(new Ke("Network Error",Ke.ERR_NETWORK,U,ke),{cause:q.cause||q}):Ke.from(q,q&&q.code,U,ke)}}},BR=new Map,Qv=r=>{let n=r&&r.env||{};const{fetch:i,Request:o,Response:c}=n,u=[o,c,i];let f=u.length,p=f,m,g,v=BR;for(;p--;)m=u[p],g=v.get(m),g===void 0&&v.set(m,g=p?new Map:LR(n)),v=g;return g};Qv();const bf={http:rR,xhr:MR,fetch:{get:Qv}};ve.forEach(bf,(r,n)=>{if(r){try{Object.defineProperty(r,"name",{value:n})}catch{}Object.defineProperty(r,"adapterName",{value:n})}});const xy=r=>`- ${r}`,HR=r=>ve.isFunction(r)||r===null||r===!1;function qR(r,n){r=ve.isArray(r)?r:[r];const{length:i}=r;let o,c;const u={};for(let f=0;f<i;f++){o=r[f];let p;if(c=o,!HR(o)&&(c=bf[(p=String(o)).toLowerCase()],c===void 0))throw new Ke(`Unknown adapter '${p}'`);if(c&&(ve.isFunction(c)||(c=c.get(n))))break;u[p||"#"+f]=c}if(!c){const f=Object.entries(u).map(([m,g])=>`adapter ${m} `+(g===!1?"is not supported by the environment":"is not available in the build"));let p=i?f.length>1?`since :
`+f.map(xy).join(`
`):" "+xy(f[0]):"as no adapter specified";throw new Ke("There is no suitable adapter to dispatch the request "+p,"ERR_NOT_SUPPORT")}return c}const Zv={getAdapter:qR,adapters:bf};function Rd(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new ks(null,r)}function wy(r){return Rd(r),r.headers=bn.from(r.headers),r.data=Td.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),Zv.getAdapter(r.adapter||$o.adapter,r)(r).then(function(o){return Rd(r),o.data=Td.call(r,r.transformResponse,o),o.headers=bn.from(o.headers),o},function(o){return Wv(o)||(Rd(r),o&&o.response&&(o.response.data=Td.call(r,r.transformResponse,o.response),o.response.headers=bn.from(o.response.headers))),Promise.reject(o)})}const e0="1.13.2",Bl={};["object","boolean","number","function","string","symbol"].forEach((r,n)=>{Bl[r]=function(o){return typeof o===r||"a"+(n<1?"n ":" ")+r}});const Cy={};Bl.transitional=function(n,i,o){function c(u,f){return"[Axios v"+e0+"] Transitional option '"+u+"'"+f+(o?". "+o:"")}return(u,f,p)=>{if(n===!1)throw new Ke(c(f," has been removed"+(i?" in "+i:"")),Ke.ERR_DEPRECATED);return i&&!Cy[f]&&(Cy[f]=!0,console.warn(c(f," has been deprecated since v"+i+" and will be removed in the near future"))),n?n(u,f,p):!0}};Bl.spelling=function(n){return(i,o)=>(console.warn(`${o} is likely a misspelling of ${n}`),!0)};function $R(r,n,i){if(typeof r!="object")throw new Ke("options must be an object",Ke.ERR_BAD_OPTION_VALUE);const o=Object.keys(r);let c=o.length;for(;c-- >0;){const u=o[c],f=n[u];if(f){const p=r[u],m=p===void 0||f(p,u,r);if(m!==!0)throw new Ke("option "+u+" must be "+m,Ke.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new Ke("Unknown option "+u,Ke.ERR_BAD_OPTION)}}const Sl={assertOptions:$R,validators:Bl},tr=Sl.validators;let Ci=class{constructor(n){this.defaults=n||{},this.interceptors={request:new dy,response:new dy}}async request(n,i){try{return await this._request(n,i)}catch(o){if(o instanceof Error){let c={};Error.captureStackTrace?Error.captureStackTrace(c):c=new Error;const u=c.stack?c.stack.replace(/^.+\n/,""):"";try{o.stack?u&&!String(o.stack).endsWith(u.replace(/^.+\n.+\n/,""))&&(o.stack+=`
`+u):o.stack=u}catch{}}throw o}}_request(n,i){typeof n=="string"?(i=i||{},i.url=n):i=n||{},i=Ei(this.defaults,i);const{transitional:o,paramsSerializer:c,headers:u}=i;o!==void 0&&Sl.assertOptions(o,{silentJSONParsing:tr.transitional(tr.boolean),forcedJSONParsing:tr.transitional(tr.boolean),clarifyTimeoutError:tr.transitional(tr.boolean)},!1),c!=null&&(ve.isFunction(c)?i.paramsSerializer={serialize:c}:Sl.assertOptions(c,{encode:tr.function,serialize:tr.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),Sl.assertOptions(i,{baseUrl:tr.spelling("baseURL"),withXsrfToken:tr.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let f=u&&ve.merge(u.common,u[i.method]);u&&ve.forEach(["delete","get","head","post","put","patch","common"],U=>{delete u[U]}),i.headers=bn.concat(f,u);const p=[];let m=!0;this.interceptors.request.forEach(function(B){typeof B.runWhen=="function"&&B.runWhen(i)===!1||(m=m&&B.synchronous,p.unshift(B.fulfilled,B.rejected))});const g=[];this.interceptors.response.forEach(function(B){g.push(B.fulfilled,B.rejected)});let v,k=0,z;if(!m){const U=[wy.bind(this),void 0];for(U.unshift(...p),U.push(...g),z=U.length,v=Promise.resolve(i);k<z;)v=v.then(U[k++],U[k++]);return v}z=p.length;let W=i;for(;k<z;){const U=p[k++],B=p[k++];try{W=U(W)}catch(D){B.call(this,D);break}}try{v=wy.call(this,W)}catch(U){return Promise.reject(U)}for(k=0,z=g.length;k<z;)v=v.then(g[k++],g[k++]);return v}getUri(n){n=Ei(this.defaults,n);const i=Jv(n.baseURL,n.url,n.allowAbsoluteUrls);return Gv(i,n.params,n.paramsSerializer)}};ve.forEach(["delete","get","head","options"],function(n){Ci.prototype[n]=function(i,o){return this.request(Ei(o||{},{method:n,url:i,data:(o||{}).data}))}});ve.forEach(["post","put","patch"],function(n){function i(o){return function(u,f,p){return this.request(Ei(p||{},{method:n,headers:o?{"Content-Type":"multipart/form-data"}:{},url:u,data:f}))}}Ci.prototype[n]=i(),Ci.prototype[n+"Form"]=i(!0)});let VR=class t0{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(u){i=u});const o=this;this.promise.then(c=>{if(!o._listeners)return;let u=o._listeners.length;for(;u-- >0;)o._listeners[u](c);o._listeners=null}),this.promise.then=c=>{let u;const f=new Promise(p=>{o.subscribe(p),u=p}).then(c);return f.cancel=function(){o.unsubscribe(u)},f},n(function(u,f,p){o.reason||(o.reason=new ks(u,f,p),i(o.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const n=new AbortController,i=o=>{n.abort(o)};return this.subscribe(i),n.signal.unsubscribe=()=>this.unsubscribe(i),n.signal}static source(){let n;return{token:new t0(function(c){n=c}),cancel:n}}};function GR(r){return function(i){return r.apply(null,i)}}function FR(r){return ve.isObject(r)&&r.isAxiosError===!0}const Yd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Yd).forEach(([r,n])=>{Yd[n]=r});function n0(r){const n=new Ci(r),i=Mv(Ci.prototype.request,n);return ve.extend(i,Ci.prototype,n,{allOwnKeys:!0}),ve.extend(i,n,null,{allOwnKeys:!0}),i.create=function(c){return n0(Ei(r,c))},i}const _t=n0($o);_t.Axios=Ci;_t.CanceledError=ks;_t.CancelToken=VR;_t.isCancel=Wv;_t.VERSION=e0;_t.toFormData=Ll;_t.AxiosError=Ke;_t.Cancel=_t.CanceledError;_t.all=function(n){return Promise.all(n)};_t.spread=GR;_t.isAxiosError=FR;_t.mergeConfig=Ei;_t.AxiosHeaders=bn;_t.formToJSON=r=>Yv(ve.isHTMLForm(r)?new FormData(r):r);_t.getAdapter=Zv.getAdapter;_t.HttpStatusCode=Yd;_t.default=_t;const{Axios:MO,AxiosError:PO,CanceledError:UO,isCancel:DO,CancelToken:IO,VERSION:zO,all:LO,Cancel:BO,isAxiosError:HO,spread:qO,toFormData:$O,AxiosHeaders:VO,HttpStatusCode:GO,formToJSON:FO,getAdapter:YO,mergeConfig:WO}=_t,YR=()=>"http://localhost:7219/api",Ge=_t.create({baseURL:YR(),timeout:1e4});Ge.interceptors.request.use(r=>(console.log("API Request:",{method:r.method?.toUpperCase(),url:r.baseURL+"/"+r.url,headers:{...r.headers,Authorization:r.headers.Authorization?"[HIDDEN]":void 0}}),r),r=>(console.error("Request Error:",r),Promise.reject(r)));Ge.interceptors.request.use(r=>{try{const n=localStorage.getItem("user");if(n){const i=JSON.parse(n);i&&i.token&&(r.headers.Authorization=`Bearer ${i.token}`)}}catch{console.warn("Failed to read user from storage")}return r},r=>Promise.reject(r));Ge.interceptors.response.use(r=>r,r=>(console.error("API Error Details:",{status:r.response?.status,statusText:r.response?.statusText,url:r.config?.url,method:r.config?.method,baseURL:r.config?.baseURL,data:r.response?.data,message:r.message}),(r.response?.status===401||r.response?.status===403)&&(localStorage.removeItem("user"),localStorage.removeItem("userId"),window.dispatchEvent(new Event("storage")),window.location.pathname!=="/login"&&window.location.pathname!=="/"&&(window.location.href="/login")),Promise.reject(r)));const r0={sasCache:new Map,async getSasUrl(r,n="logos"){const i=`${n}/${r}`,o=this.sasCache.get(i);if(o&&o.expiresAt>Date.now())return o.url;try{const u=(await Ge.get("storage/get-sas-url",{params:{fileName:r,container:n}})).data.url;return this.sasCache.set(i,{url:u,expiresAt:Date.now()+3e3*1e3}),u}catch(c){return console.error("Error fetching SAS URL:",c),null}},clearCache(){this.sasCache.clear()},needsSasToken(r){return r&&r.includes("blob.core.windows.net")&&!r.includes("?")}},WR=({className:r="",style:n={},alt:i="FestiveGuest Logo",isLoginLogo:o=!1})=>{const[c,u]=O.useState(""),[f,p]=O.useState(!0);return O.useEffect(()=>{(async()=>{try{const g=o?"login-logo.png":"logo.png",v=await r0.getSasUrl(g,"logos");u(v)}catch(g){console.error("Error loading logo:",g),u(o?"/assets/login-logo.png":"/assets/logo.png")}finally{p(!1)}})()},[o]),f?a.jsx("div",{className:r,style:{...n,background:"#f0f0f0"}}):a.jsx("img",{src:c,alt:i,className:r,style:n})},XR=()=>a.jsx("div",{className:"loader-container",children:a.jsx("div",{className:"logo-loader",children:a.jsx("img",{src:"/assets/login-logo.png",alt:"FestiveGuest",className:"loader-logo"})})});class JR{constructor(){this.locations=null,this.loading=!1}async getLocations(){if(this.locations)return this.locations;if(this.loading){for(;this.loading;)await new Promise(n=>setTimeout(n,100));return this.locations}this.loading=!0;try{const n=await Ge.get("location/states-with-cities");return this.locations=n.data,this.locations}catch(n){throw console.error("DEBUG: Failed to fetch locations from API:",n),new Error("Unable to load location data (API Error). Please try again later.")}finally{this.loading=!1}}async seedLocations(){try{const n=await Ge.post("location/seed");return this.locations=null,n.data}catch(n){throw console.error("Failed to seed locations:",n),n}}clearCache(){this.locations=null}}const Hl=new JR,KR=()=>{const[r,n]=O.useState([]),[i,o]=O.useState(!1),c=(p,m="info")=>{n(g=>[...g,{message:p,type:m,timestamp:new Date().toLocaleTimeString()}])},u=async()=>{o(!0),n([]);try{c(" Testing API connectivity...","info");try{c(` API Base URL: ${Ge.defaults.baseURL}`,"info");const p=await Ge.get("health");c(" API Health Check: SUCCESS","success")}catch(p){c(` API Health Check: ${p.message}`,"error")}try{c(" Testing location service...","info");const p=await Hl.getLocations(),m=Object.keys(p||{}).length;c(` Locations loaded: ${m} states found`,"success")}catch(p){c(` Location service: ${p.message}`,"error")}try{c(" Testing direct location API...","info");const p=await Ge.get("location/states-with-cities"),m=Object.keys(p.data||{}).length;c(` Direct API call: ${m} states found`,"success")}catch(p){c(` Direct API call: ${p.message}`,"error")}}catch(p){c(` Test suite failed: ${p.message}`,"error")}finally{o(!1)}},f=()=>{n([])};return a.jsxs("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto",fontFamily:"monospace"},children:[a.jsx("h2",{children:" API Connectivity Test"}),a.jsx("p",{children:"Use this tool to test your API connectivity and location loading."}),a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsx("button",{onClick:u,disabled:i,style:{padding:"0.75rem 1.5rem",backgroundColor:i?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"0.5rem",cursor:i?"not-allowed":"pointer",marginRight:"1rem"},children:i?" Testing...":" Run Tests"}),a.jsx("button",{onClick:f,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer"},children:" Clear Results"})]}),a.jsx("div",{style:{backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"0.5rem",padding:"1rem",minHeight:"200px",maxHeight:"400px",overflowY:"auto"},children:r.length===0?a.jsx("p",{style:{color:"#6c757d",fontStyle:"italic"},children:'Click "Run Tests" to start testing your API connectivity...'}):r.map((p,m)=>a.jsxs("div",{style:{marginBottom:"0.5rem",padding:"0.5rem",borderRadius:"0.25rem",backgroundColor:p.type==="success"?"#d4edda":p.type==="error"?"#f8d7da":"#d1ecf1",color:p.type==="success"?"#155724":p.type==="error"?"#721c24":"#0c5460"},children:[a.jsxs("span",{style:{fontSize:"0.8rem",opacity:.7},children:["[",p.timestamp,"]"]})," ",p.message]},m))}),a.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.9rem",color:"#6c757d"},children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Environment:"})," ","production"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Current API Base:"})," ",Ge.defaults.baseURL]})]})]})};class Ti extends Error{constructor(n,i){const o=new.target.prototype;super(`${n}: Status code '${i}'`),this.statusCode=i,this.__proto__=o}}class Sf extends Error{constructor(n="A timeout occurred."){const i=new.target.prototype;super(n),this.__proto__=i}}let Fn=class extends Error{constructor(n="An abort occurred."){const i=new.target.prototype;super(n),this.__proto__=i}};class QR extends Error{constructor(n,i){const o=new.target.prototype;super(n),this.transport=i,this.errorType="UnsupportedTransportError",this.__proto__=o}}class ZR extends Error{constructor(n,i){const o=new.target.prototype;super(n),this.transport=i,this.errorType="DisabledTransportError",this.__proto__=o}}class ej extends Error{constructor(n,i){const o=new.target.prototype;super(n),this.transport=i,this.errorType="FailedToStartTransportError",this.__proto__=o}}class Ty extends Error{constructor(n){const i=new.target.prototype;super(n),this.errorType="FailedToNegotiateWithServerError",this.__proto__=i}}class tj extends Error{constructor(n,i){const o=new.target.prototype;super(n),this.innerErrors=i,this.__proto__=o}}class i0{constructor(n,i,o){this.statusCode=n,this.statusText=i,this.content=o}}class ql{get(n,i){return this.send({...i,method:"GET",url:n})}post(n,i){return this.send({...i,method:"POST",url:n})}delete(n,i){return this.send({...i,method:"DELETE",url:n})}getCookieString(n){return""}}var Re;(function(r){r[r.Trace=0]="Trace",r[r.Debug=1]="Debug",r[r.Information=2]="Information",r[r.Warning=3]="Warning",r[r.Error=4]="Error",r[r.Critical=5]="Critical",r[r.None=6]="None"})(Re||(Re={}));class Uo{constructor(){}log(n,i){}}Uo.instance=new Uo;const nj="10.0.0";class Ut{static isRequired(n,i){if(n==null)throw new Error(`The '${i}' argument is required.`)}static isNotEmpty(n,i){if(!n||n.match(/^\s*$/))throw new Error(`The '${i}' argument should not be empty.`)}static isIn(n,i,o){if(!(n in i))throw new Error(`Unknown ${o} value: ${n}.`)}}class Tt{static get isBrowser(){return!Tt.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!Tt.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!Tt.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function Do(r,n){let i="";return ki(r)?(i=`Binary data of length ${r.byteLength}`,n&&(i+=`. Content: '${rj(r)}'`)):typeof r=="string"&&(i=`String data of length ${r.length}`,n&&(i+=`. Content: '${r}'`)),i}function rj(r){const n=new Uint8Array(r);let i="";return n.forEach(o=>{const c=o<16?"0":"";i+=`0x${c}${o.toString(16)} `}),i.substring(0,i.length-1)}function ki(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}async function s0(r,n,i,o,c,u){const f={},[p,m]=bs();f[p]=m,r.log(Re.Trace,`(${n} transport) sending data. ${Do(c,u.logMessageContent)}.`);const g=ki(c)?"arraybuffer":"text",v=await i.post(o,{content:c,headers:{...f,...u.headers},responseType:g,timeout:u.timeout,withCredentials:u.withCredentials});r.log(Re.Trace,`(${n} transport) request complete. Response status: ${v.statusCode}.`)}function ij(r){return r===void 0?new kl(Re.Information):r===null?Uo.instance:r.log!==void 0?r:new kl(r)}class sj{constructor(n,i){this._subject=n,this._observer=i}dispose(){const n=this._subject.observers.indexOf(this._observer);n>-1&&this._subject.observers.splice(n,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(i=>{})}}class kl{constructor(n){this._minLevel=n,this.out=console}log(n,i){if(n>=this._minLevel){const o=`[${new Date().toISOString()}] ${Re[n]}: ${i}`;switch(n){case Re.Critical:case Re.Error:this.out.error(o);break;case Re.Warning:this.out.warn(o);break;case Re.Information:this.out.info(o);break;default:this.out.log(o);break}}}}function bs(){let r="X-SignalR-User-Agent";return Tt.isNode&&(r="User-Agent"),[r,oj(nj,aj(),cj(),lj())]}function oj(r,n,i,o){let c="Microsoft SignalR/";const u=r.split(".");return c+=`${u[0]}.${u[1]}`,c+=` (${r}; `,n&&n!==""?c+=`${n}; `:c+="Unknown OS; ",c+=`${i}`,o?c+=`; ${o}`:c+="; Unknown Runtime Version",c+=")",c}function aj(){if(Tt.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function lj(){if(Tt.isNode)return process.versions.node}function cj(){return Tt.isNode?"NodeJS":"Browser"}function jd(r){return r.stack?r.stack:r.message?r.message:`${r}`}function uj(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}let dj=class extends ql{constructor(n){if(super(),this._logger=n,typeof fetch>"u"||Tt.isNode){const i=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(i("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=i("node-fetch"):this._fetchType=fetch,this._fetchType=i("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(uj());if(typeof AbortController>"u"){const i=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=i("abort-controller")}else this._abortControllerType=AbortController}async send(n){if(n.abortSignal&&n.abortSignal.aborted)throw new Fn;if(!n.method)throw new Error("No method defined.");if(!n.url)throw new Error("No url defined.");const i=new this._abortControllerType;let o;n.abortSignal&&(n.abortSignal.onabort=()=>{i.abort(),o=new Fn});let c=null;if(n.timeout){const m=n.timeout;c=setTimeout(()=>{i.abort(),this._logger.log(Re.Warning,"Timeout from HTTP request."),o=new Sf},m)}n.content===""&&(n.content=void 0),n.content&&(n.headers=n.headers||{},ki(n.content)?n.headers["Content-Type"]="application/octet-stream":n.headers["Content-Type"]="text/plain;charset=UTF-8");let u;try{u=await this._fetchType(n.url,{body:n.content,cache:"no-cache",credentials:n.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...n.headers},method:n.method,mode:"cors",redirect:"follow",signal:i.signal})}catch(m){throw o||(this._logger.log(Re.Warning,`Error from HTTP request. ${m}.`),m)}finally{c&&clearTimeout(c),n.abortSignal&&(n.abortSignal.onabort=null)}if(!u.ok){const m=await Ry(u,"text");throw new Ti(m||u.statusText,u.status)}const p=await Ry(u,n.responseType);return new i0(u.status,u.statusText,p)}getCookieString(n){let i="";return Tt.isNode&&this._jar&&this._jar.getCookies(n,(o,c)=>i=c.join("; ")),i}};function Ry(r,n){let i;switch(n){case"arraybuffer":i=r.arrayBuffer();break;case"text":i=r.text();break;case"blob":case"document":case"json":throw new Error(`${n} is not supported.`);default:i=r.text();break}return i}class fj extends ql{constructor(n){super(),this._logger=n}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new Fn):n.method?n.url?new Promise((i,o)=>{const c=new XMLHttpRequest;c.open(n.method,n.url,!0),c.withCredentials=n.withCredentials===void 0?!0:n.withCredentials,c.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.content===""&&(n.content=void 0),n.content&&(ki(n.content)?c.setRequestHeader("Content-Type","application/octet-stream"):c.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const u=n.headers;u&&Object.keys(u).forEach(f=>{c.setRequestHeader(f,u[f])}),n.responseType&&(c.responseType=n.responseType),n.abortSignal&&(n.abortSignal.onabort=()=>{c.abort(),o(new Fn)}),n.timeout&&(c.timeout=n.timeout),c.onload=()=>{n.abortSignal&&(n.abortSignal.onabort=null),c.status>=200&&c.status<300?i(new i0(c.status,c.statusText,c.response||c.responseText)):o(new Ti(c.response||c.responseText||c.statusText,c.status))},c.onerror=()=>{this._logger.log(Re.Warning,`Error from HTTP request. ${c.status}: ${c.statusText}.`),o(new Ti(c.statusText,c.status))},c.ontimeout=()=>{this._logger.log(Re.Warning,"Timeout from HTTP request."),o(new Sf)},c.send(n.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class hj extends ql{constructor(n){if(super(),typeof fetch<"u"||Tt.isNode)this._httpClient=new dj(n);else if(typeof XMLHttpRequest<"u")this._httpClient=new fj(n);else throw new Error("No usable HttpClient found.")}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new Fn):n.method?n.url?this._httpClient.send(n):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(n){return this._httpClient.getCookieString(n)}}class En{static write(n){return`${n}${En.RecordSeparator}`}static parse(n){if(n[n.length-1]!==En.RecordSeparator)throw new Error("Message is incomplete.");const i=n.split(En.RecordSeparator);return i.pop(),i}}En.RecordSeparatorCode=30;En.RecordSeparator=String.fromCharCode(En.RecordSeparatorCode);class pj{writeHandshakeRequest(n){return En.write(JSON.stringify(n))}parseHandshakeResponse(n){let i,o;if(ki(n)){const p=new Uint8Array(n),m=p.indexOf(En.RecordSeparatorCode);if(m===-1)throw new Error("Message is incomplete.");const g=m+1;i=String.fromCharCode.apply(null,Array.prototype.slice.call(p.slice(0,g))),o=p.byteLength>g?p.slice(g).buffer:null}else{const p=n,m=p.indexOf(En.RecordSeparator);if(m===-1)throw new Error("Message is incomplete.");const g=m+1;i=p.substring(0,g),o=p.length>g?p.substring(g):null}const c=En.parse(i),u=JSON.parse(c[0]);if(u.type)throw new Error("Expected a handshake response from the server.");return[o,u]}}var Xe;(function(r){r[r.Invocation=1]="Invocation",r[r.StreamItem=2]="StreamItem",r[r.Completion=3]="Completion",r[r.StreamInvocation=4]="StreamInvocation",r[r.CancelInvocation=5]="CancelInvocation",r[r.Ping=6]="Ping",r[r.Close=7]="Close",r[r.Ack=8]="Ack",r[r.Sequence=9]="Sequence"})(Xe||(Xe={}));class mj{constructor(){this.observers=[]}next(n){for(const i of this.observers)i.next(n)}error(n){for(const i of this.observers)i.error&&i.error(n)}complete(){for(const n of this.observers)n.complete&&n.complete()}subscribe(n){return this.observers.push(n),new sj(this,n)}}class gj{constructor(n,i,o){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=n,this._connection=i,this._bufferSize=o}async _send(n){const i=this._protocol.writeMessage(n);let o=Promise.resolve();if(this._isInvocationMessage(n)){this._totalMessageCount++;let c=()=>{},u=()=>{};ki(i)?this._bufferedByteCount+=i.byteLength:this._bufferedByteCount+=i.length,this._bufferedByteCount>=this._bufferSize&&(o=new Promise((f,p)=>{c=f,u=p})),this._messages.push(new yj(i,this._totalMessageCount,c,u))}try{this._reconnectInProgress||await this._connection.send(i)}catch{this._disconnected()}await o}_ack(n){let i=-1;for(let o=0;o<this._messages.length;o++){const c=this._messages[o];if(c._id<=n.sequenceId)i=o,ki(c._message)?this._bufferedByteCount-=c._message.byteLength:this._bufferedByteCount-=c._message.length,c._resolver();else if(this._bufferedByteCount<this._bufferSize)c._resolver();else break}i!==-1&&(this._messages=this._messages.slice(i+1))}_shouldProcessMessage(n){if(this._waitForSequenceMessage)return n.type!==Xe.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(n))return!0;const i=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,i<=this._latestReceivedSequenceId?(i===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=i,this._ackTimer(),!0)}_resetSequence(n){if(n.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=n.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const n=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:Xe.Sequence,sequenceId:n}));const i=this._messages;for(const o of i)await this._connection.send(o._message);this._reconnectInProgress=!1}_dispose(n){n??(n=new Error("Unable to reconnect to server."));for(const i of this._messages)i._rejector(n)}_isInvocationMessage(n){switch(n.type){case Xe.Invocation:case Xe.StreamItem:case Xe.Completion:case Xe.StreamInvocation:case Xe.CancelInvocation:return!0;case Xe.Close:case Xe.Sequence:case Xe.Ping:case Xe.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:Xe.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class yj{constructor(n,i,o,c){this._message=n,this._id=i,this._resolver=o,this._rejector=c}}const vj=30*1e3,bj=15*1e3,Sj=1e5;var bt;(function(r){r.Disconnected="Disconnected",r.Connecting="Connecting",r.Connected="Connected",r.Disconnecting="Disconnecting",r.Reconnecting="Reconnecting"})(bt||(bt={}));class xf{static create(n,i,o,c,u,f,p){return new xf(n,i,o,c,u,f,p)}constructor(n,i,o,c,u,f,p){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(Re.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},Ut.isRequired(n,"connection"),Ut.isRequired(i,"logger"),Ut.isRequired(o,"protocol"),this.serverTimeoutInMilliseconds=u??vj,this.keepAliveIntervalInMilliseconds=f??bj,this._statefulReconnectBufferSize=p??Sj,this._logger=i,this._protocol=o,this.connection=n,this._reconnectPolicy=c,this._handshakeProtocol=new pj,this.connection.onreceive=m=>this._processIncomingData(m),this.connection.onclose=m=>this._connectionClosed(m),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=bt.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Xe.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(n){if(this._connectionState!==bt.Disconnected&&this._connectionState!==bt.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!n)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=n}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==bt.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=bt.Connecting,this._logger.log(Re.Debug,"Starting HubConnection.");try{await this._startInternal(),Tt.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=bt.Connected,this._connectionStarted=!0,this._logger.log(Re.Debug,"HubConnection connected successfully.")}catch(n){return this._connectionState=bt.Disconnected,this._logger.log(Re.Debug,`HubConnection failed to start successfully because of error '${n}'.`),Promise.reject(n)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const n=new Promise((i,o)=>{this._handshakeResolver=i,this._handshakeRejecter=o});await this.connection.start(this._protocol.transferFormat);try{let i=this._protocol.version;this.connection.features.reconnect||(i=1);const o={protocol:this._protocol.name,version:i};if(this._logger.log(Re.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(o)),this._logger.log(Re.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await n,this._stopDuringStartError)throw this._stopDuringStartError;this.connection.features.reconnect&&(this._messageBuffer=new gj(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(i){throw this._logger.log(Re.Debug,`Hub handshake failed with error '${i}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(i),i}}async stop(){const n=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await n}catch{}}_stopInternal(n){if(this._connectionState===bt.Disconnected)return this._logger.log(Re.Debug,`Call to HubConnection.stop(${n}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===bt.Disconnecting)return this._logger.log(Re.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const i=this._connectionState;return this._connectionState=bt.Disconnecting,this._logger.log(Re.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(Re.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(i===bt.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=n||new Fn("The connection was stopped before the hub handshake could complete."),this.connection.stop(n))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(n,...i){const[o,c]=this._replaceStreamingParams(i),u=this._createStreamInvocation(n,i,c);let f;const p=new mj;return p.cancelCallback=()=>{const m=this._createCancelInvocation(u.invocationId);return delete this._callbacks[u.invocationId],f.then(()=>this._sendWithProtocol(m))},this._callbacks[u.invocationId]=(m,g)=>{if(g){p.error(g);return}else m&&(m.type===Xe.Completion?m.error?p.error(new Error(m.error)):p.complete():p.next(m.item))},f=this._sendWithProtocol(u).catch(m=>{p.error(m),delete this._callbacks[u.invocationId]}),this._launchStreams(o,f),p}_sendMessage(n){return this._resetKeepAliveInterval(),this.connection.send(n)}_sendWithProtocol(n){return this._messageBuffer?this._messageBuffer._send(n):this._sendMessage(this._protocol.writeMessage(n))}send(n,...i){const[o,c]=this._replaceStreamingParams(i),u=this._sendWithProtocol(this._createInvocation(n,i,!0,c));return this._launchStreams(o,u),u}invoke(n,...i){const[o,c]=this._replaceStreamingParams(i),u=this._createInvocation(n,i,!1,c);return new Promise((p,m)=>{this._callbacks[u.invocationId]=(v,k)=>{if(k){m(k);return}else v&&(v.type===Xe.Completion?v.error?m(new Error(v.error)):p(v.result):m(new Error(`Unexpected message type: ${v.type}`)))};const g=this._sendWithProtocol(u).catch(v=>{m(v),delete this._callbacks[u.invocationId]});this._launchStreams(o,g)})}on(n,i){!n||!i||(n=n.toLowerCase(),this._methods[n]||(this._methods[n]=[]),this._methods[n].indexOf(i)===-1&&this._methods[n].push(i))}off(n,i){if(!n)return;n=n.toLowerCase();const o=this._methods[n];if(o)if(i){const c=o.indexOf(i);c!==-1&&(o.splice(c,1),o.length===0&&delete this._methods[n])}else delete this._methods[n]}onclose(n){n&&this._closedCallbacks.push(n)}onreconnecting(n){n&&this._reconnectingCallbacks.push(n)}onreconnected(n){n&&this._reconnectedCallbacks.push(n)}_processIncomingData(n){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(n=this._processHandshakeResponse(n),this._receivedHandshakeResponse=!0),n){const i=this._protocol.parseMessages(n,this._logger);for(const o of i)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(o)))switch(o.type){case Xe.Invocation:this._invokeClientMethod(o).catch(c=>{this._logger.log(Re.Error,`Invoke client method threw error: ${jd(c)}`)});break;case Xe.StreamItem:case Xe.Completion:{const c=this._callbacks[o.invocationId];if(c){o.type===Xe.Completion&&delete this._callbacks[o.invocationId];try{c(o)}catch(u){this._logger.log(Re.Error,`Stream callback threw error: ${jd(u)}`)}}break}case Xe.Ping:break;case Xe.Close:{this._logger.log(Re.Information,"Close message received from server.");const c=o.error?new Error("Server returned an error on close: "+o.error):void 0;o.allowReconnect===!0?this.connection.stop(c):this._stopPromise=this._stopInternal(c);break}case Xe.Ack:this._messageBuffer&&this._messageBuffer._ack(o);break;case Xe.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(o);break;default:this._logger.log(Re.Warning,`Invalid message type: ${o.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(n){let i,o;try{[o,i]=this._handshakeProtocol.parseHandshakeResponse(n)}catch(c){const u="Error parsing handshake response: "+c;this._logger.log(Re.Error,u);const f=new Error(u);throw this._handshakeRejecter(f),f}if(i.error){const c="Server returned handshake error: "+i.error;this._logger.log(Re.Error,c);const u=new Error(c);throw this._handshakeRejecter(u),u}else this._logger.log(Re.Debug,"Server handshake complete.");return this._handshakeResolver(),o}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if(!this.connection.features||!this.connection.features.inherentKeepAlive){this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds);let n=this._nextKeepAlive-new Date().getTime();if(n<0){this._connectionState===bt.Connected&&this._trySendPingMessage();return}this._pingServerHandle===void 0&&(n<0&&(n=0),this._pingServerHandle=setTimeout(async()=>{this._connectionState===bt.Connected&&await this._trySendPingMessage()},n))}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(n){const i=n.target.toLowerCase(),o=this._methods[i];if(!o){this._logger.log(Re.Warning,`No client method with the name '${i}' found.`),n.invocationId&&(this._logger.log(Re.Warning,`No result given for '${i}' method and invocation ID '${n.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)));return}const c=o.slice(),u=!!n.invocationId;let f,p,m;for(const g of c)try{const v=f;f=await g.apply(this,n.arguments),u&&f&&v&&(this._logger.log(Re.Error,`Multiple results provided for '${i}'. Sending error to server.`),m=this._createCompletionMessage(n.invocationId,"Client provided multiple results.",null)),p=void 0}catch(v){p=v,this._logger.log(Re.Error,`A callback for the method '${i}' threw error '${v}'.`)}m?await this._sendWithProtocol(m):u?(p?m=this._createCompletionMessage(n.invocationId,`${p}`,null):f!==void 0?m=this._createCompletionMessage(n.invocationId,null,f):(this._logger.log(Re.Warning,`No result given for '${i}' method and invocation ID '${n.invocationId}'.`),m=this._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(m)):f&&this._logger.log(Re.Error,`Result given for '${i}' method but server is not expecting a result.`)}_connectionClosed(n){this._logger.log(Re.Debug,`HubConnection.connectionClosed(${n}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||n||new Fn("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(n||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===bt.Disconnecting?this._completeClose(n):this._connectionState===bt.Connected&&this._reconnectPolicy?this._reconnect(n):this._connectionState===bt.Connected&&this._completeClose(n)}_completeClose(n){if(this._connectionStarted){this._connectionState=bt.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(n??new Error("Connection closed.")),this._messageBuffer=void 0),Tt.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(i=>i.apply(this,[n]))}catch(i){this._logger.log(Re.Error,`An onclose callback called with error '${n}' threw error '${i}'.`)}}}async _reconnect(n){const i=Date.now();let o=0,c=n!==void 0?n:new Error("Attempting to reconnect due to a unknown error."),u=this._getNextRetryDelay(o,0,c);if(u===null){this._logger.log(Re.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(n);return}if(this._connectionState=bt.Reconnecting,n?this._logger.log(Re.Information,`Connection reconnecting because of error '${n}'.`):this._logger.log(Re.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(f=>f.apply(this,[n]))}catch(f){this._logger.log(Re.Error,`An onreconnecting callback called with error '${n}' threw error '${f}'.`)}if(this._connectionState!==bt.Reconnecting){this._logger.log(Re.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;u!==null;){if(this._logger.log(Re.Information,`Reconnect attempt number ${o+1} will start in ${u} ms.`),await new Promise(f=>{this._reconnectDelayHandle=setTimeout(f,u)}),this._reconnectDelayHandle=void 0,this._connectionState!==bt.Reconnecting){this._logger.log(Re.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=bt.Connected,this._logger.log(Re.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(f=>f.apply(this,[this.connection.connectionId]))}catch(f){this._logger.log(Re.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${f}'.`)}return}catch(f){if(this._logger.log(Re.Information,`Reconnect attempt failed because of error '${f}'.`),this._connectionState!==bt.Reconnecting){this._logger.log(Re.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===bt.Disconnecting&&this._completeClose();return}o++,c=f instanceof Error?f:new Error(f.toString()),u=this._getNextRetryDelay(o,Date.now()-i,c)}}this._logger.log(Re.Information,`Reconnect retries have been exhausted after ${Date.now()-i} ms and ${o} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(n,i,o){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:i,previousRetryCount:n,retryReason:o})}catch(c){return this._logger.log(Re.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${n}, ${i}) threw error '${c}'.`),null}}_cancelCallbacksWithError(n){const i=this._callbacks;this._callbacks={},Object.keys(i).forEach(o=>{const c=i[o];try{c(null,n)}catch(u){this._logger.log(Re.Error,`Stream 'error' callback called with '${n}' threw error: ${jd(u)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(n,i,o,c){if(o)return c.length!==0?{target:n,arguments:i,streamIds:c,type:Xe.Invocation}:{target:n,arguments:i,type:Xe.Invocation};{const u=this._invocationId;return this._invocationId++,c.length!==0?{target:n,arguments:i,invocationId:u.toString(),streamIds:c,type:Xe.Invocation}:{target:n,arguments:i,invocationId:u.toString(),type:Xe.Invocation}}}_launchStreams(n,i){if(n.length!==0){i||(i=Promise.resolve());for(const o in n)n[o].subscribe({complete:()=>{i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(o)))},error:c=>{let u;c instanceof Error?u=c.message:c&&c.toString?u=c.toString():u="Unknown error",i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(o,u)))},next:c=>{i=i.then(()=>this._sendWithProtocol(this._createStreamItemMessage(o,c)))}})}}_replaceStreamingParams(n){const i=[],o=[];for(let c=0;c<n.length;c++){const u=n[c];if(this._isObservable(u)){const f=this._invocationId;this._invocationId++,i[f]=u,o.push(f.toString()),n.splice(c,1)}}return[i,o]}_isObservable(n){return n&&n.subscribe&&typeof n.subscribe=="function"}_createStreamInvocation(n,i,o){const c=this._invocationId;return this._invocationId++,o.length!==0?{target:n,arguments:i,invocationId:c.toString(),streamIds:o,type:Xe.StreamInvocation}:{target:n,arguments:i,invocationId:c.toString(),type:Xe.StreamInvocation}}_createCancelInvocation(n){return{invocationId:n,type:Xe.CancelInvocation}}_createStreamItemMessage(n,i){return{invocationId:n,item:i,type:Xe.StreamItem}}_createCompletionMessage(n,i,o){return i?{error:i,invocationId:n,type:Xe.Completion}:{invocationId:n,result:o,type:Xe.Completion}}_createCloseMessage(){return{type:Xe.Close}}async _trySendPingMessage(){try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}}const xj=[0,2e3,1e4,3e4,null];class jy{constructor(n){this._retryDelays=n!==void 0?[...n,null]:xj}nextRetryDelayInMilliseconds(n){return this._retryDelays[n.previousRetryCount]}}class Ri{}Ri.Authorization="Authorization";Ri.Cookie="Cookie";class wj extends ql{constructor(n,i){super(),this._innerClient=n,this._accessTokenFactory=i}async send(n){let i=!0;this._accessTokenFactory&&(!this._accessToken||n.url&&n.url.indexOf("/negotiate?")>0)&&(i=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(n);const o=await this._innerClient.send(n);return i&&o.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(n),await this._innerClient.send(n)):o}_setAuthorizationHeader(n){n.headers||(n.headers={}),this._accessToken?n.headers[Ri.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&n.headers[Ri.Authorization]&&delete n.headers[Ri.Authorization]}getCookieString(n){return this._innerClient.getCookieString(n)}}var Pt;(function(r){r[r.None=0]="None",r[r.WebSockets=1]="WebSockets",r[r.ServerSentEvents=2]="ServerSentEvents",r[r.LongPolling=4]="LongPolling"})(Pt||(Pt={}));var rn;(function(r){r[r.Text=1]="Text",r[r.Binary=2]="Binary"})(rn||(rn={}));let Cj=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class Ey{get pollAborted(){return this._pollAbort.aborted}constructor(n,i,o){this._httpClient=n,this._logger=i,this._pollAbort=new Cj,this._options=o,this._running=!1,this.onreceive=null,this.onclose=null}async connect(n,i){if(Ut.isRequired(n,"url"),Ut.isRequired(i,"transferFormat"),Ut.isIn(i,rn,"transferFormat"),this._url=n,this._logger.log(Re.Trace,"(LongPolling transport) Connecting."),i===rn.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[o,c]=bs(),u={[o]:c,...this._options.headers},f={abortSignal:this._pollAbort.signal,headers:u,timeout:1e5,withCredentials:this._options.withCredentials};i===rn.Binary&&(f.responseType="arraybuffer");const p=`${n}&_=${Date.now()}`;this._logger.log(Re.Trace,`(LongPolling transport) polling: ${p}.`);const m=await this._httpClient.get(p,f);m.statusCode!==200?(this._logger.log(Re.Error,`(LongPolling transport) Unexpected response code: ${m.statusCode}.`),this._closeError=new Ti(m.statusText||"",m.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,f)}async _poll(n,i){try{for(;this._running;)try{const o=`${n}&_=${Date.now()}`;this._logger.log(Re.Trace,`(LongPolling transport) polling: ${o}.`);const c=await this._httpClient.get(o,i);c.statusCode===204?(this._logger.log(Re.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):c.statusCode!==200?(this._logger.log(Re.Error,`(LongPolling transport) Unexpected response code: ${c.statusCode}.`),this._closeError=new Ti(c.statusText||"",c.statusCode),this._running=!1):c.content?(this._logger.log(Re.Trace,`(LongPolling transport) data received. ${Do(c.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(c.content)):this._logger.log(Re.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(o){this._running?o instanceof Sf?this._logger.log(Re.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=o,this._running=!1):this._logger.log(Re.Trace,`(LongPolling transport) Poll errored after shutdown: ${o.message}`)}}finally{this._logger.log(Re.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(n){return this._running?s0(this._logger,"LongPolling",this._httpClient,this._url,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(Re.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(Re.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const n={},[i,o]=bs();n[i]=o;const c={headers:{...n,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let u;try{await this._httpClient.delete(this._url,c)}catch(f){u=f}u?u instanceof Ti&&(u.statusCode===404?this._logger.log(Re.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(Re.Trace,`(LongPolling transport) Error sending a DELETE request: ${u}`)):this._logger.log(Re.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(Re.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let n="(LongPolling transport) Firing onclose event.";this._closeError&&(n+=" Error: "+this._closeError),this._logger.log(Re.Trace,n),this.onclose(this._closeError)}}}class Tj{constructor(n,i,o,c){this._httpClient=n,this._accessToken=i,this._logger=o,this._options=c,this.onreceive=null,this.onclose=null}async connect(n,i){return Ut.isRequired(n,"url"),Ut.isRequired(i,"transferFormat"),Ut.isIn(i,rn,"transferFormat"),this._logger.log(Re.Trace,"(SSE transport) Connecting."),this._url=n,this._accessToken&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((o,c)=>{let u=!1;if(i!==rn.Text){c(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let f;if(Tt.isBrowser||Tt.isWebWorker)f=new this._options.EventSource(n,{withCredentials:this._options.withCredentials});else{const p=this._httpClient.getCookieString(n),m={};m.Cookie=p;const[g,v]=bs();m[g]=v,f=new this._options.EventSource(n,{withCredentials:this._options.withCredentials,headers:{...m,...this._options.headers}})}try{f.onmessage=p=>{if(this.onreceive)try{this._logger.log(Re.Trace,`(SSE transport) data received. ${Do(p.data,this._options.logMessageContent)}.`),this.onreceive(p.data)}catch(m){this._close(m);return}},f.onerror=p=>{u?this._close():c(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},f.onopen=()=>{this._logger.log(Re.Information,`SSE connected to ${this._url}`),this._eventSource=f,u=!0,o()}}catch(p){c(p);return}})}async send(n){return this._eventSource?s0(this._logger,"SSE",this._httpClient,this._url,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(n){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(n))}}class Rj{constructor(n,i,o,c,u,f){this._logger=o,this._accessTokenFactory=i,this._logMessageContent=c,this._webSocketConstructor=u,this._httpClient=n,this.onreceive=null,this.onclose=null,this._headers=f}async connect(n,i){Ut.isRequired(n,"url"),Ut.isRequired(i,"transferFormat"),Ut.isIn(i,rn,"transferFormat"),this._logger.log(Re.Trace,"(WebSockets transport) Connecting.");let o;return this._accessTokenFactory&&(o=await this._accessTokenFactory()),new Promise((c,u)=>{n=n.replace(/^http/,"ws");let f;const p=this._httpClient.getCookieString(n);let m=!1;if(Tt.isNode||Tt.isReactNative){const g={},[v,k]=bs();g[v]=k,o&&(g[Ri.Authorization]=`Bearer ${o}`),p&&(g[Ri.Cookie]=p),f=new this._webSocketConstructor(n,void 0,{headers:{...g,...this._headers}})}else o&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(o)}`);f||(f=new this._webSocketConstructor(n)),i===rn.Binary&&(f.binaryType="arraybuffer"),f.onopen=g=>{this._logger.log(Re.Information,`WebSocket connected to ${n}.`),this._webSocket=f,m=!0,c()},f.onerror=g=>{let v=null;typeof ErrorEvent<"u"&&g instanceof ErrorEvent?v=g.error:v="There was an error with the transport",this._logger.log(Re.Information,`(WebSockets transport) ${v}.`)},f.onmessage=g=>{if(this._logger.log(Re.Trace,`(WebSockets transport) data received. ${Do(g.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(g.data)}catch(v){this._close(v);return}},f.onclose=g=>{if(m)this._close(g);else{let v=null;typeof ErrorEvent<"u"&&g instanceof ErrorEvent?v=g.error:v="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",u(new Error(v))}}})}send(n){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(Re.Trace,`(WebSockets transport) sending data. ${Do(n,this._logMessageContent)}.`),this._webSocket.send(n),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(n){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(Re.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(n)&&(n.wasClean===!1||n.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${n.code} (${n.reason||"no reason given"}).`)):n instanceof Error?this.onclose(n):this.onclose())}_isCloseEvent(n){return n&&typeof n.wasClean=="boolean"&&typeof n.code=="number"}}const ky=100;class jj{constructor(n,i={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,Ut.isRequired(n,"url"),this._logger=ij(i.logger),this.baseUrl=this._resolveUrl(n),i=i||{},i.logMessageContent=i.logMessageContent===void 0?!1:i.logMessageContent,typeof i.withCredentials=="boolean"||i.withCredentials===void 0)i.withCredentials=i.withCredentials===void 0?!0:i.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");i.timeout=i.timeout===void 0?100*1e3:i.timeout;let o=null,c=null;if(Tt.isNode&&typeof require<"u"){const u=typeof __webpack_require__=="function"?__non_webpack_require__:require;o=u("ws"),c=u("eventsource")}!Tt.isNode&&typeof WebSocket<"u"&&!i.WebSocket?i.WebSocket=WebSocket:Tt.isNode&&!i.WebSocket&&o&&(i.WebSocket=o),!Tt.isNode&&typeof EventSource<"u"&&!i.EventSource?i.EventSource=EventSource:Tt.isNode&&!i.EventSource&&typeof c<"u"&&(i.EventSource=c),this._httpClient=new wj(i.httpClient||new hj(this._logger),i.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=i,this.onreceive=null,this.onclose=null}async start(n){if(n=n||rn.Binary,Ut.isIn(n,rn,"transferFormat"),this._logger.log(Re.Debug,`Starting connection with transfer format '${rn[n]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(n),await this._startInternalPromise,this._connectionState==="Disconnecting"){const i="Failed to start the HttpConnection before stop() was called.";return this._logger.log(Re.Error,i),await this._stopPromise,Promise.reject(new Fn(i))}else if(this._connectionState!=="Connected"){const i="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(Re.Error,i),Promise.reject(new Fn(i))}this._connectionStarted=!0}send(n){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new wf(this.transport)),this._sendQueue.send(n))}async stop(n){if(this._connectionState==="Disconnected")return this._logger.log(Re.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(Re.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(i=>{this._stopPromiseResolver=i}),await this._stopInternal(n),await this._stopPromise}async _stopInternal(n){this._stopError=n;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(i){this._logger.log(Re.Error,`HttpConnection.transport.stop() threw error '${i}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(Re.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(n){let i=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===Pt.WebSockets)this.transport=this._constructTransport(Pt.WebSockets),await this._startTransport(i,n);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let o=null,c=0;do{if(o=await this._getNegotiationResponse(i),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new Fn("The connection was stopped during negotiation.");if(o.error)throw new Error(o.error);if(o.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(o.url&&(i=o.url),o.accessToken){const u=o.accessToken;this._accessTokenFactory=()=>u,this._httpClient._accessToken=u,this._httpClient._accessTokenFactory=void 0}c++}while(o.url&&c<ky);if(c===ky&&o.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(i,this._options.transport,o,n)}this.transport instanceof Ey&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(Re.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(o){return this._logger.log(Re.Error,"Failed to start the connection: "+o),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(o)}}async _getNegotiationResponse(n){const i={},[o,c]=bs();i[o]=c;const u=this._resolveNegotiateUrl(n);this._logger.log(Re.Debug,`Sending negotiation request: ${u}.`);try{const f=await this._httpClient.post(u,{content:"",headers:{...i,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(f.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${f.statusCode}'`));const p=JSON.parse(f.content);return(!p.negotiateVersion||p.negotiateVersion<1)&&(p.connectionToken=p.connectionId),p.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new Ty("Client didn't negotiate Stateful Reconnect but the server did.")):p}catch(f){let p="Failed to complete negotiation with the server: "+f;return f instanceof Ti&&f.statusCode===404&&(p=p+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(Re.Error,p),Promise.reject(new Ty(p))}}_createConnectUrl(n,i){return i?n+(n.indexOf("?")===-1?"?":"&")+`id=${i}`:n}async _createTransport(n,i,o,c){let u=this._createConnectUrl(n,o.connectionToken);if(this._isITransport(i)){this._logger.log(Re.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=i,await this._startTransport(u,c),this.connectionId=o.connectionId;return}const f=[],p=o.availableTransports||[];let m=o;for(const g of p){const v=this._resolveTransportOrError(g,i,c,m?.useStatefulReconnect===!0);if(v instanceof Error)f.push(`${g.transport} failed:`),f.push(v);else if(this._isITransport(v)){if(this.transport=v,!m){try{m=await this._getNegotiationResponse(n)}catch(k){return Promise.reject(k)}u=this._createConnectUrl(n,m.connectionToken)}try{await this._startTransport(u,c),this.connectionId=m.connectionId;return}catch(k){if(this._logger.log(Re.Error,`Failed to start the transport '${g.transport}': ${k}`),m=void 0,f.push(new ej(`${g.transport} failed: ${k}`,Pt[g.transport])),this._connectionState!=="Connecting"){const z="Failed to select transport before stop() was called.";return this._logger.log(Re.Debug,z),Promise.reject(new Fn(z))}}}}return f.length>0?Promise.reject(new tj(`Unable to connect to the server with any of the available transports. ${f.join(" ")}`,f)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(n){switch(n){case Pt.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new Rj(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case Pt.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new Tj(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case Pt.LongPolling:return new Ey(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${n}.`)}}_startTransport(n,i){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async o=>{let c=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(n,i),await this.features.resend()}catch{c=!0}else{this._stopConnection(o);return}c&&this._stopConnection(o)}:this.transport.onclose=o=>this._stopConnection(o),this.transport.connect(n,i)}_resolveTransportOrError(n,i,o,c){const u=Pt[n.transport];if(u==null)return this._logger.log(Re.Debug,`Skipping transport '${n.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${n.transport}' because it is not supported by this client.`);if(Ej(i,u))if(n.transferFormats.map(p=>rn[p]).indexOf(o)>=0){if(u===Pt.WebSockets&&!this._options.WebSocket||u===Pt.ServerSentEvents&&!this._options.EventSource)return this._logger.log(Re.Debug,`Skipping transport '${Pt[u]}' because it is not supported in your environment.'`),new QR(`'${Pt[u]}' is not supported in your environment.`,u);this._logger.log(Re.Debug,`Selecting transport '${Pt[u]}'.`);try{return this.features.reconnect=u===Pt.WebSockets?c:void 0,this._constructTransport(u)}catch(p){return p}}else return this._logger.log(Re.Debug,`Skipping transport '${Pt[u]}' because it does not support the requested transfer format '${rn[o]}'.`),new Error(`'${Pt[u]}' does not support ${rn[o]}.`);else return this._logger.log(Re.Debug,`Skipping transport '${Pt[u]}' because it was disabled by the client.`),new ZR(`'${Pt[u]}' is disabled by the client.`,u)}_isITransport(n){return n&&typeof n=="object"&&"connect"in n}_stopConnection(n){if(this._logger.log(Re.Debug,`HttpConnection.stopConnection(${n}) called while in state ${this._connectionState}.`),this.transport=void 0,n=this._stopError||n,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(Re.Debug,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(Re.Warning,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${n}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),n?this._logger.log(Re.Error,`Connection disconnected with error '${n}'.`):this._logger.log(Re.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(i=>{this._logger.log(Re.Error,`TransportSendQueue.stop() threw error '${i}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(n)}catch(i){this._logger.log(Re.Error,`HttpConnection.onclose(${n}) threw error '${i}'.`)}}}_resolveUrl(n){if(n.lastIndexOf("https://",0)===0||n.lastIndexOf("http://",0)===0)return n;if(!Tt.isBrowser)throw new Error(`Cannot resolve '${n}'.`);const i=window.document.createElement("a");return i.href=n,this._logger.log(Re.Information,`Normalizing '${n}' to '${i.href}'.`),i.href}_resolveNegotiateUrl(n){const i=new URL(n);i.pathname.endsWith("/")?i.pathname+="negotiate":i.pathname+="/negotiate";const o=new URLSearchParams(i.searchParams);return o.has("negotiateVersion")||o.append("negotiateVersion",this._negotiateVersion.toString()),o.has("useStatefulReconnect")?o.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&o.append("useStatefulReconnect","true"),i.search=o.toString(),i.toString()}}function Ej(r,n){return!r||(n&r)!==0}class wf{constructor(n){this._transport=n,this._buffer=[],this._executing=!0,this._sendBufferedData=new ll,this._transportResult=new ll,this._sendLoopPromise=this._sendLoop()}send(n){return this._bufferData(n),this._transportResult||(this._transportResult=new ll),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(n){if(this._buffer.length&&typeof this._buffer[0]!=typeof n)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof n}`);this._buffer.push(n),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new ll;const n=this._transportResult;this._transportResult=void 0;const i=typeof this._buffer[0]=="string"?this._buffer.join(""):wf._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(i),n.resolve()}catch(o){n.reject(o)}}}static _concatBuffers(n){const i=n.map(u=>u.byteLength).reduce((u,f)=>u+f),o=new Uint8Array(i);let c=0;for(const u of n)o.set(new Uint8Array(u),c),c+=u.byteLength;return o.buffer}}class ll{constructor(){this.promise=new Promise((n,i)=>[this._resolver,this._rejecter]=[n,i])}resolve(){this._resolver()}reject(n){this._rejecter(n)}}const kj="json";class _j{constructor(){this.name=kj,this.version=2,this.transferFormat=rn.Text}parseMessages(n,i){if(typeof n!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!n)return[];i===null&&(i=Uo.instance);const o=En.parse(n),c=[];for(const u of o){const f=JSON.parse(u);if(typeof f.type!="number")throw new Error("Invalid payload.");switch(f.type){case Xe.Invocation:this._isInvocationMessage(f);break;case Xe.StreamItem:this._isStreamItemMessage(f);break;case Xe.Completion:this._isCompletionMessage(f);break;case Xe.Ping:break;case Xe.Close:break;case Xe.Ack:this._isAckMessage(f);break;case Xe.Sequence:this._isSequenceMessage(f);break;default:i.log(Re.Information,"Unknown message type '"+f.type+"' ignored.");continue}c.push(f)}return c}writeMessage(n){return En.write(JSON.stringify(n))}_isInvocationMessage(n){this._assertNotEmptyString(n.target,"Invalid payload for Invocation message."),n.invocationId!==void 0&&this._assertNotEmptyString(n.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(n){if(this._assertNotEmptyString(n.invocationId,"Invalid payload for StreamItem message."),n.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(n){if(n.result&&n.error)throw new Error("Invalid payload for Completion message.");!n.result&&n.error&&this._assertNotEmptyString(n.error,"Invalid payload for Completion message."),this._assertNotEmptyString(n.invocationId,"Invalid payload for Completion message.")}_isAckMessage(n){if(typeof n.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(n){if(typeof n.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(n,i){if(typeof n!="string"||n==="")throw new Error(i)}}const Aj={trace:Re.Trace,debug:Re.Debug,info:Re.Information,information:Re.Information,warn:Re.Warning,warning:Re.Warning,error:Re.Error,critical:Re.Critical,none:Re.None};function Nj(r){const n=Aj[r.toLowerCase()];if(typeof n<"u")return n;throw new Error(`Unknown log level: ${r}`)}class Oj{configureLogging(n){if(Ut.isRequired(n,"logging"),Mj(n))this.logger=n;else if(typeof n=="string"){const i=Nj(n);this.logger=new kl(i)}else this.logger=new kl(n);return this}withUrl(n,i){return Ut.isRequired(n,"url"),Ut.isNotEmpty(n,"url"),this.url=n,typeof i=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...i}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:i},this}withHubProtocol(n){return Ut.isRequired(n,"protocol"),this.protocol=n,this}withAutomaticReconnect(n){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return n?Array.isArray(n)?this.reconnectPolicy=new jy(n):this.reconnectPolicy=n:this.reconnectPolicy=new jy,this}withServerTimeout(n){return Ut.isRequired(n,"milliseconds"),this._serverTimeoutInMilliseconds=n,this}withKeepAliveInterval(n){return Ut.isRequired(n,"milliseconds"),this._keepAliveIntervalInMilliseconds=n,this}withStatefulReconnect(n){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=n?.bufferSize,this}build(){const n=this.httpConnectionOptions||{};if(n.logger===void 0&&(n.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const i=new jj(this.url,n);return xf.create(i,this.logger||Uo.instance,this.protocol||new _j,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function Mj(r){return r.log!==void 0}class Pj{constructor(){this.connection=null,this.isConnected=!1}async connect(){if(this.isConnected&&this.connection?.state===bt.Connected)return;if(this.connection)try{await this.connection.stop()}catch(i){console.log("Error stopping existing connection:",i)}const n="https://festive-guest-api.azurewebsites.net/chathub";this.connection=new Oj().withUrl(n,{skipNegotiation:!0,transport:Pt.WebSockets,accessTokenFactory:()=>{const i=localStorage.getItem("user");return i?JSON.parse(i).token:null}}).withAutomaticReconnect().build(),this.connection.onreconnected(()=>{this.isConnected=!0}),this.connection.onreconnecting(()=>{this.isConnected=!1}),this.connection.onclose(()=>{this.isConnected=!1});try{await this.connection.start(),this.isConnected=!0,console.log("SignalR Connected")}catch(i){throw console.error("SignalR Connection Error:",i),this.isConnected=!1,i}}async joinChat(n){this.isConnected||await this.connect();try{await this.connection.invoke("JoinChat",n)}catch(i){console.error("Error joining chat:",i)}}async sendMessage(n,i){this.isConnected||await this.connect();try{await this.connection.invoke("SendMessage",n,i)}catch(o){throw console.error("Error sending message:",o),o}}onReceiveMessage(n){this.connection&&this.connection.on("ReceiveMessage",n)}offReceiveMessage(n){this.connection&&this.connection.off("ReceiveMessage",n)}}const Eo=new Pj,nr=({src:r,alt:n,className:i,style:o,fallbackText:c="No Image",userId:u=null})=>{const[f,p]=O.useState(null),[m,g]=O.useState(!0),[v,k]=O.useState(!1),z=`data:image/svg+xml;base64,${btoa(`
    <svg width="150" height="150" viewBox="0 0 150 150" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="150" height="150" rx="8" fill="#f1f5f9"/>
      <text x="75" y="80" text-anchor="middle" fill="#64748b" font-family="Arial" font-size="14">${c.replace(/[^\x00-\x7F]/g,"User")}</text>
    </svg>
  `)}`;O.useEffect(()=>{(async()=>{if(!r||v){p(z),g(!1);return}try{if(g(!0),r.includes("blob.core.windows.net")&&!r.includes("?")){const B=r.split("/"),D=B[B.length-1],le=B[B.length-2]||"logos",se=await r0.getSasUrl(D,le);p(se||z)}else p(r)}catch(B){console.error("Error loading image with SAS:",B),p(z),k(!0)}finally{g(!1)}})()},[r,v,z]);const W=()=>{v||(k(!0),p(z),g(!1))};return m?a.jsx("div",{className:i,style:{...o,display:"flex",alignItems:"center",justifyContent:"center",background:"#f1f5f9",color:"#64748b",fontSize:"12px"},children:"Loading..."}):a.jsx("img",{src:f,alt:n,className:i,style:o,onError:W})},$l=({recipientId:r,recipientName:n,recipientImageUrl:i,onClose:o})=>{const[c,u]=O.useState([]),[f,p]=O.useState(""),[m,g]=O.useState(!1),[v,k]=O.useState(!1),[z,W]=O.useState(!0),[U,B]=O.useState(null),D=localStorage.getItem("userId")||JSON.parse(localStorage.getItem("user")||"{}").userId,le=O.useRef(null),se=O.useRef(null);O.useEffect(()=>(console.log("ChatWidget mounted with:",{recipientId:r,recipientName:n}),fe(),()=>{console.log("ChatWidget unmounting"),se.current&&Eo.offReceiveMessage(se.current)}),[r]);const fe=async()=>{try{console.log("Initializing chat..."),W(!0),B(null);const te=setTimeout(()=>{v||(console.log("Using fallback connection state"),k(!0))},2e3);try{await Eo.connect(),await Eo.joinChat(r),clearTimeout(te),console.log("Chat service connected successfully")}catch(ce){console.warn("Chat service connection failed, using fallback:",ce),clearTimeout(te)}se.current=ce=>{console.log("Received message:",ce),ce.senderId===r&&u(ne=>ne.find(Te=>Te.id===ce.id)?ne:[...ne,{id:ce.id,sender:"Recipient",text:ce.message,timestamp:new Date(ce.timestamp),status:"delivered"}])},Eo.onReceiveMessage(se.current);try{const ce=await Ge.get(`chat/messages/${r}`);if(ce.data&&ce.data.length>0){const ne=ce.data.map(Te=>({id:Te.id,sender:Te.senderId===D?"Me":"Recipient",text:Te.message,timestamp:new Date(Te.timestamp),status:Te.status?.toLowerCase()||"sent"}));u(ne),console.log("Loaded message history:",ne.length,"messages")}}catch(ce){console.error("Failed to load message history:",ce),B("Failed to load message history")}k(!0)}catch(te){console.error("Failed to initialize chat:",te),B("Failed to connect to chat service"),k(!0)}finally{W(!1)}};O.useEffect(()=>{le.current?.scrollIntoView({behavior:"smooth"})},[c]);const oe=async te=>{if(te.preventDefault(),!!f.trim())try{g(!0);const ce=f.trim();p(""),console.log("Sending message:",ce,"to:",r);const ne={id:Date.now(),sender:"Me",text:ce,timestamp:new Date,status:"sending"};u(Te=>[...Te,ne]);try{await Eo.sendMessage(r,ce),console.log("Message sent successfully via SignalR"),u(Te=>Te.map(Me=>Me.id===ne.id?{...Me,status:"sent"}:Me))}catch(Te){console.error("Failed to send message via chat service:",Te);try{console.log("Attempting API fallback for message send"),await Ge.post("chat/send",{recipientId:r,message:ce}),console.log("Message sent via API fallback"),u(Me=>Me.map(xe=>xe.id===ne.id?{...xe,status:"sent"}:xe))}catch(Me){console.error("Failed to send message via API:",Me),u(xe=>xe.map(Ue=>Ue.id===ne.id?{...Ue,status:"failed"}:Ue)),p(ce)}}}catch(ce){console.error("Failed to send message:",ce),p(messageText)}finally{g(!1)}};return a.jsxs("div",{className:"chat-widget",children:[a.jsxs("div",{className:"chat-header",children:[a.jsxs("div",{className:"chat-user-info",children:[a.jsx(nr,{src:i,alt:n,className:"user-avatar",fallbackText:"User"}),a.jsxs("div",{children:[a.jsx("div",{className:"user-name",children:n||"Chat"}),a.jsxs("div",{className:"user-status",children:[" ",v?"Online":z?"Connecting...":"Offline"]})]})]}),a.jsx("button",{onClick:o,className:"close-btn",title:"Close chat",children:a.jsx(mf,{size:16})})]}),a.jsxs("div",{className:"chat-messages",children:[z?a.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:[a.jsx("div",{style:{marginBottom:"0.5rem"},children:""}),"Loading messages..."]}):U?a.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#ef4444"},children:[a.jsx("div",{style:{marginBottom:"0.5rem"},children:""}),U,a.jsx("button",{onClick:fe,style:{display:"block",margin:"1rem auto 0",padding:"0.5rem 1rem",background:"var(--primary)",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer"},children:"Retry"})]}):c.length===0?a.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:[a.jsx("div",{style:{marginBottom:"0.5rem"},children:""}),"Start a conversation with ",n]}):c.map((te,ce)=>a.jsxs("div",{className:`message ${te.sender==="Me"?"sent":"received"}`,children:[a.jsx("div",{className:"message-content",children:te.text}),a.jsxs("div",{style:{fontSize:"11px",color:"#65676b",marginTop:"2px",textAlign:"center",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.25rem"},children:[new Date(te.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),te.sender==="Me"&&a.jsxs("span",{className:`message-status ${te.status}`,children:[te.status==="sending"&&"",te.status==="sent"&&"",te.status==="delivered"&&"",te.status==="failed"&&""]})]})]},te.id||ce)),a.jsx("div",{ref:le})]}),a.jsxs("form",{onSubmit:oe,className:"chat-input",children:[a.jsx("input",{type:"text",value:f,onChange:te=>p(te.target.value),placeholder:"Type a message...",className:"message-input",disabled:m||z}),a.jsx("button",{type:"submit",className:"send-btn",disabled:m||!f.trim()||z,title:"Send message",children:m?a.jsx("div",{style:{width:"16px",height:"16px",border:"2px solid white",borderTop:"2px solid transparent",borderRadius:"50%",animation:"spin 1s linear infinite"}}):a.jsx(Po,{size:16})})]})]})},Uj=()=>{const[r,n]=O.useState(null),[i,o]=O.useState(""),[c,u]=O.useState(""),f=()=>{if(!i.trim()||!c.trim()){alert("Please enter both recipient ID and name");return}console.log("Opening test chat with:",{id:i,name:c}),n({id:i.trim(),name:c.trim(),imageUrl:null})},p=()=>{console.log("Closing test chat"),n(null)};return a.jsxs("div",{style:{padding:"2rem",maxWidth:"500px",margin:"0 auto"},children:[a.jsx("h2",{children:"Chat Debug Tool"}),a.jsx("div",{style:{marginBottom:"1rem"},children:a.jsxs("label",{style:{display:"block",marginBottom:"0.5rem"},children:["Recipient ID:",a.jsx("input",{type:"text",value:i,onChange:m=>o(m.target.value),placeholder:"Enter recipient user ID",style:{width:"100%",padding:"0.5rem",border:"1px solid #ccc",borderRadius:"0.25rem",marginTop:"0.25rem"}})]})}),a.jsx("div",{style:{marginBottom:"1rem"},children:a.jsxs("label",{style:{display:"block",marginBottom:"0.5rem"},children:["Recipient Name:",a.jsx("input",{type:"text",value:c,onChange:m=>u(m.target.value),placeholder:"Enter recipient name",style:{width:"100%",padding:"0.5rem",border:"1px solid #ccc",borderRadius:"0.25rem",marginTop:"0.25rem"}})]})}),a.jsx("button",{onClick:f,style:{padding:"0.75rem 1.5rem",background:"#6366f1",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer",marginRight:"1rem"},children:"Open Test Chat"}),a.jsx("button",{onClick:p,style:{padding:"0.75rem 1.5rem",background:"#ef4444",color:"white",border:"none",borderRadius:"0.375rem",cursor:"pointer"},children:"Close Chat"}),r&&a.jsx("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,width:"350px",height:"500px",boxShadow:"0 10px 25px rgba(0,0,0,0.2)",borderRadius:"12px",overflow:"hidden",animation:"slideInUp 0.3s ease-out"},children:a.jsx($l,{recipientId:r.id,recipientName:r.name,recipientImageUrl:r.imageUrl,onClose:p})})]})},Dj=({isOpen:r,onClose:n,selectedRole:i})=>{const o=rr(),[c,u]=O.useState(!1),[f,p]=O.useState(null),m=()=>{if(!c)return;const k=Date.now(),z={accepted:!0,timestamp:k,role:i,userAgent:navigator.userAgent,sessionId:crypto.randomUUID()};sessionStorage.setItem("disclaimerAcceptance",JSON.stringify(z)),o(`/register?role=${i}&disclaimerAccepted=${k}`),n()},g=()=>{o("/"),n()},v=k=>{const z=k.target.checked;u(z),p(z?Date.now():null)};return r?a.jsx("div",{className:"modal-overlay",style:{zIndex:9999},children:a.jsxs("div",{className:"modal-content",style:{maxWidth:"800px",maxHeight:"90vh",display:"flex",flexDirection:"column"},children:[a.jsx("div",{className:"modal-header",style:{padding:"1.5rem",flexShrink:0},children:a.jsx("h3",{style:{color:"#1e293b",margin:0},children:" Important Disclaimer - Please Read Carefully"})}),a.jsxs("div",{className:"modal-body",style:{padding:"0 1.5rem",overflowY:"auto",flex:1},children:[a.jsx("style",{children:`
              .modal-body::-webkit-scrollbar {
                width: 4px;
              }
              .modal-body::-webkit-scrollbar-track {
                background: transparent;
              }
              .modal-body::-webkit-scrollbar-thumb {
                background: #cbd5e1;
                border-radius: 2px;
              }
              .modal-body::-webkit-scrollbar-thumb:hover {
                background: #94a3b8;
              }
            `}),a.jsx("div",{style:{padding:"1.5rem",background:"#fef3c7",border:"2px solid #f59e0b",borderRadius:"0.75rem",marginBottom:"1.5rem"},children:a.jsxs("div",{style:{color:"#92400e",fontSize:"0.95rem",lineHeight:"1.6"},children:[a.jsxs("p",{style:{margin:"0 0 1rem 0",fontWeight:"600"},children:[a.jsx("strong",{children:"Local Host Connect"})," is a platform that connects travelers with local hosts for authentic cultural experiences. By proceeding, you acknowledge and agree that:"]}),a.jsxs("ul",{style:{margin:"0",paddingLeft:"1.5rem"},children:[a.jsxs("li",{style:{marginBottom:"0.75rem"},children:["We are ",a.jsx("strong",{children:"not responsible"})," for any incidents, damages, or issues that may occur during your interactions or meetings."]}),a.jsxs("li",{style:{marginBottom:"0.75rem"},children:["We do ",a.jsx("strong",{children:"not guarantee"})," that you will find suitable hosts or guests, as this depends on availability and mutual compatibility."]}),a.jsxs("li",{style:{marginBottom:"0.75rem"},children:["We act solely as a ",a.jsx("strong",{children:"platform for introductions"})," and do not verify the background, intentions, or authenticity of users."]}),a.jsxs("li",{style:{marginBottom:"0.75rem"},children:["All interactions, arrangements, and meetings are ",a.jsx("strong",{children:"at your own risk and discretion"}),"."]}),a.jsxs("li",{style:{marginBottom:"0.75rem"},children:[a.jsx("strong",{children:"Payment & Financial Caution:"})," Hosts may request payment for services. It is entirely your responsibility to decide payment terms. Exercise caution and verify authenticity before any financial transactions."]}),a.jsxs("li",{style:{marginBottom:"0.75rem"},children:["We ",a.jsx("strong",{children:"strongly recommend"})," meeting in public places first and taking necessary safety precautions."]}),a.jsxs("li",{children:["By proceeding, you accept ",a.jsx("strong",{children:"full responsibility"})," for your safety and interactions."]})]})]})}),a.jsx("div",{style:{padding:"1.5rem",background:"#f0f9ff",border:"2px solid #0ea5e9",borderRadius:"0.75rem",marginBottom:"1.5rem"},children:a.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"1rem",cursor:"pointer",fontSize:"1rem",lineHeight:"1.5"},children:[a.jsx("input",{type:"checkbox",checked:c,onChange:v,required:!0,style:{width:"20px",height:"20px",marginTop:"2px",cursor:"pointer",accentColor:"#0ea5e9"}}),a.jsxs("span",{style:{color:"#0c4a6e",fontWeight:"500"},children:["I have read, understood, and agree to the ",a.jsx("strong",{children:"Important Disclaimer"})," above. I acknowledge that I am using this platform at my own risk and accept full responsibility for my safety and interactions. I also agree to the"," ",a.jsx("button",{type:"button",style:{background:"none",border:"none",color:"#0ea5e9",textDecoration:"underline",cursor:"pointer",padding:0,font:"inherit"},onClick:()=>window.open("/privacy-policy","_blank"),children:"Privacy Policy"})," ","and"," ",a.jsx("button",{type:"button",style:{background:"none",border:"none",color:"#0ea5e9",textDecoration:"underline",cursor:"pointer",padding:0,font:"inherit"},onClick:()=>window.open("/terms-of-service","_blank"),children:"Terms of Service"}),"."]})]})})]}),a.jsxs("div",{className:"modal-footer",style:{display:"flex",gap:"1rem",justifyContent:"flex-end",padding:"1.5rem",marginBottom:"1rem",flexShrink:0},children:[a.jsx("button",{onClick:g,className:"btn btn-outline",style:{padding:"0.75rem 1.5rem"},children:"Cancel"}),a.jsx("button",{onClick:m,className:"btn btn-primary",disabled:!c,style:{padding:"0.75rem 1.5rem",opacity:c?1:.5,cursor:c?"pointer":"not-allowed"},children:"Agree & Continue"})]})]})}):null},Ij=({user:r})=>{const n=rr(),[i]=uC(),[o,c]=O.useState(!1),[u,f]=O.useState("");O.useEffect(()=>{i.get("register")==="true"&&p("Guest")},[i]);const p=v=>{f(v),c(!0)},m=()=>{const v=r?.role||r?.userType||r?.partitionKey;return v==="Host"?"/posts":v==="Guest"?"/guest-dashboard":v==="Admin"?"/admin":"/"},g=()=>{const v=r?.role||r?.userType||r?.partitionKey;return v==="Host"?"Go to Posts":v==="Guest"?"Go to My Dashboard":v==="Admin"?"Go to Admin":"Go to Dashboard"};return a.jsxs("div",{className:"landing-page",children:[a.jsxs("section",{className:"hero",children:[a.jsxs("div",{className:"hero-content",children:[a.jsx("h1",{className:"hero-title",children:"Connect with Local Hosts Anywhere"}),a.jsx("p",{className:"hero-subtitle",children:"Experience authentic local culture and hospitality during your travels"}),a.jsx("div",{className:"hero-buttons",children:r?a.jsx("button",{className:"btn btn-primary",onClick:()=>n(m()),children:g()}):a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"btn btn-primary",onClick:()=>p("Guest"),children:"Join as a Guest"}),a.jsx("button",{className:"btn btn-secondary",onClick:()=>p("Host"),children:"Join as a Host"})]})})]}),a.jsx("div",{className:"hero-image",children:a.jsxs("div",{className:"festival-card",children:[a.jsx("h3",{children:" Travel & Connect"}),a.jsx("p",{children:"Stay with locals, experience culture, make lasting memories"}),a.jsx("br",{}),a.jsx("p",{children:" Safely explore new places"}),a.jsx("p",{children:" Connect with trusted hosts"}),a.jsx("p",{children:" Discover hidden gems"})]})})]}),a.jsx("section",{className:"features",children:a.jsxs("div",{className:"container",children:[a.jsx("h2",{children:"Why Choose Local Host Connect?"}),a.jsxs("div",{className:"features-grid",children:[a.jsxs("div",{className:"feature-card",children:[a.jsx("div",{className:"feature-icon",children:""}),a.jsx("h3",{children:"Local Accommodation"}),a.jsx("p",{children:"Stay with friendly hosts who provide comfortable accommodation and local insights"})]}),a.jsxs("div",{className:"feature-card",children:[a.jsx("div",{className:"feature-icon",children:""}),a.jsx("h3",{children:"Local Experiences"}),a.jsx("p",{children:"Discover hidden gems, local attractions, and authentic experiences with insider knowledge"})]}),a.jsxs("div",{className:"feature-card",children:[a.jsx("div",{className:"feature-icon",children:""}),a.jsx("h3",{children:"Cultural Exchange"}),a.jsx("p",{children:"Connect with locals and fellow travellers, learn about local customs and traditions"})]}),a.jsxs("div",{className:"feature-card",children:[a.jsx("div",{className:"feature-icon",children:""}),a.jsx("h3",{children:"Authentic Cuisine"}),a.jsx("p",{children:"Enjoy homemade local food and discover regional specialties you won't find in restaurants"})]})]})]})}),a.jsx("section",{className:"testimonials",children:a.jsxs("div",{className:"container",children:[a.jsx("h2",{children:"Perfect for Every Type of Travel"}),a.jsxs("div",{className:"travel-types-grid",children:[a.jsxs("div",{className:"travel-card",children:[a.jsx("div",{className:"feature-icon",children:""}),a.jsx("h3",{children:"Business & Work"}),a.jsx("p",{children:"Comfortable stays for work trips with local networking opportunities"})]}),a.jsxs("div",{className:"travel-card",children:[a.jsx("div",{className:"feature-icon",children:""}),a.jsx("h3",{children:"Adventure & Leisure"}),a.jsx("p",{children:"Explore new destinations with insider tips from local hosts"})]}),a.jsxs("div",{className:"travel-card",children:[a.jsx("div",{className:"feature-icon",children:""}),a.jsx("h3",{children:"Festivals & Events"}),a.jsx("p",{children:"Experience authentic celebrations during Diwali, Pongal, and local festivals"})]}),a.jsxs("div",{className:"travel-card",children:[a.jsx("div",{className:"feature-icon",children:""}),a.jsx("h3",{children:"Education & Research"}),a.jsx("p",{children:"Perfect for students, researchers, and cultural learning experiences"})]}),a.jsxs("div",{className:"travel-card",children:[a.jsx("div",{className:"feature-icon",children:""}),a.jsx("h3",{children:"Family Visits"}),a.jsx("p",{children:"Extended family stays and reunions in different cities"})]}),a.jsxs("div",{className:"travel-card",children:[a.jsx("div",{className:"feature-icon",children:""}),a.jsx("h3",{children:"Cultural Exchange"}),a.jsx("p",{children:"Immerse yourself in local traditions and make lasting connections"})]})]})]})}),a.jsx("section",{className:"how-it-works",children:a.jsxs("div",{className:"container",children:[a.jsx("h2",{children:"How It Works"}),a.jsxs("div",{className:"steps",children:[a.jsxs("div",{className:"step",children:[a.jsx("div",{className:"step-number",children:"1"}),a.jsx("h3",{children:"Register"}),a.jsx("p",{children:"Sign up as a Guest or Host for free"})]}),a.jsxs("div",{className:"step",children:[a.jsx("div",{className:"step-number",children:"2"}),a.jsx("h3",{children:"Connect"}),a.jsx("p",{children:"Browse profiles and connect with hosts/guests in your destination"})]}),a.jsxs("div",{className:"step",children:[a.jsx("div",{className:"step-number",children:"3"}),a.jsx("h3",{children:"Experience"}),a.jsx("p",{children:"Enjoy authentic local experiences and create lasting memories"})]})]})]})}),a.jsx("section",{className:"testimonials",children:a.jsxs("div",{className:"container",children:[a.jsx("h2",{children:"What Our Users Say"}),a.jsxs("div",{className:"testimonials-compact-grid",children:[a.jsxs("div",{className:"testimonial-compact",children:[a.jsx("p",{children:'"Amazing experience staying with a local family in Rajahmundry! They showed me places I never would have found on my own."'}),a.jsx("div",{className:"testimonial-author",children:"- Priya, Hyderabad"})]}),a.jsxs("div",{className:"testimonial-compact",children:[a.jsx("p",{children:`"Hosting travellers has been so rewarding. I've made friends from all over India and learned so much about different cultures."`}),a.jsx("div",{className:"testimonial-author",children:"- Ravi, Kakinada"})]}),a.jsxs("div",{className:"testimonial-compact",children:[a.jsx("p",{children:'"Perfect for my business trips to Chennai. My host helped me navigate the city and even introduced me to local business contacts."'}),a.jsx("div",{className:"testimonial-author",children:"- Amit, Mumbai"})]}),a.jsxs("div",{className:"testimonial-compact",children:[a.jsx("p",{children:'"As a student researching folk traditions, staying with local families gave me insights no textbook could provide."'}),a.jsx("div",{className:"testimonial-author",children:"- Meera, Delhi"})]})]})]})}),a.jsx("section",{className:"features",children:a.jsxs("div",{className:"container",children:[a.jsx("h2",{children:"Your Safety & Trust is Our Priority"}),a.jsxs("div",{className:"features-grid",children:[a.jsxs("div",{className:"feature-card",children:[a.jsx("div",{className:"feature-icon",children:""}),a.jsx("h3",{children:"Profile Registration"}),a.jsx("p",{children:"All users create detailed profiles with personal information for transparency and trust"})]}),a.jsxs("div",{className:"feature-card",children:[a.jsx("div",{className:"feature-icon",children:""}),a.jsx("h3",{children:"Review System"}),a.jsx("p",{children:"Read genuine reviews from previous guests and hosts to make informed decisions"})]}),a.jsxs("div",{className:"feature-card",children:[a.jsx("div",{className:"feature-icon",children:""}),a.jsx("h3",{children:"Secure Messaging"}),a.jsx("p",{children:"Connect with hosts and guests through our secure in-app messaging system"})]}),a.jsxs("div",{className:"feature-card",children:[a.jsx("div",{className:"feature-icon",children:""}),a.jsx("h3",{children:"24/7 Support"}),a.jsx("p",{children:"Our support team is available round the clock to help with any issues or concerns"})]})]})]})}),a.jsx("section",{className:"how-it-works",children:a.jsxs("div",{className:"container",children:[a.jsx("h2",{children:"Benefits of Becoming a Host"}),a.jsxs("div",{className:"steps",children:[a.jsxs("div",{className:"step",children:[a.jsx("div",{className:"step-number",children:""}),a.jsx("h3",{children:"Earn Extra Income"}),a.jsx("p",{children:"Generate additional revenue by hosting travelers in your spare room"})]}),a.jsxs("div",{className:"step",children:[a.jsx("div",{className:"step-number",children:""}),a.jsx("h3",{children:"Meet New People"}),a.jsx("p",{children:"Connect with travellers from different cultures and backgrounds"})]}),a.jsxs("div",{className:"step",children:[a.jsx("div",{className:"step-number",children:""}),a.jsx("h3",{children:"Share Your Culture"}),a.jsx("p",{children:"Showcase your local traditions, food, and hidden gems to visitors"})]})]})]})}),a.jsx("section",{className:"features",children:a.jsxs("div",{className:"container",children:[a.jsx("h2",{children:" Safety Guidelines - Please Read Before Meeting"}),a.jsxs("div",{className:"safety-grid",children:[a.jsxs("div",{className:"safety-card",children:[a.jsx("div",{className:"feature-icon",children:""}),a.jsx("h3",{children:"Share Your Plans"}),a.jsx("p",{children:"Always inform family/friends about your travel plans, host details, and expected return time"})]}),a.jsxs("div",{className:"safety-card",children:[a.jsx("div",{className:"feature-icon",children:""}),a.jsx("h3",{children:"Meet in Public First"}),a.jsx("p",{children:"Arrange initial meetings in public places like cafes or restaurants before going to private locations"})]}),a.jsxs("div",{className:"safety-card",children:[a.jsx("div",{className:"feature-icon",children:""}),a.jsx("h3",{children:"Video Call Before Meeting"}),a.jsx("p",{children:"Have a video conversation to verify identity and get comfortable before meeting in person"})]}),a.jsxs("div",{className:"safety-card",children:[a.jsx("div",{className:"feature-icon",children:""}),a.jsx("h3",{children:"Keep Emergency Contacts"}),a.jsx("p",{children:"Save local emergency numbers and keep your phone charged. Share live location with trusted contacts"})]}),a.jsxs("div",{className:"safety-card",children:[a.jsx("div",{className:"feature-icon",children:""}),a.jsx("h3",{children:"Trust Your Instincts"}),a.jsx("p",{children:"If something feels wrong, don't hesitate to leave. Your safety is more important than being polite"})]}),a.jsxs("div",{className:"safety-card",children:[a.jsx("div",{className:"feature-icon",children:""}),a.jsx("h3",{children:"Secure Payment Methods"}),a.jsx("p",{children:"Use secure payment methods and avoid carrying large amounts of cash. Keep copies of important documents"})]})]})]})}),a.jsx("section",{className:"cta",children:a.jsxs("div",{className:"container",children:[a.jsx("h2",{children:"Ready to Start Your Travel Journey?"}),a.jsx("p",{children:"Join thousands of travellers and hosts connecting across India"}),a.jsx("div",{className:"cta-buttons",children:r?a.jsx("button",{className:"btn btn-primary",onClick:()=>n(m()),children:g()}):a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"btn btn-primary",onClick:()=>p("Guest"),children:"Join as a Guest"}),a.jsx("button",{className:"btn btn-primary",onClick:()=>n("/login"),children:"Already have an account?"})]})})]})}),a.jsx("section",{className:"features",children:a.jsxs("div",{className:"container",children:[a.jsx("h2",{children:" Mobile Apps"}),a.jsxs("div",{className:"mobile-apps-grid",children:[a.jsxs("div",{className:"mobile-app-card",children:[a.jsx("h3",{children:"iOS App"}),a.jsx("p",{children:"App Store - Coming Soon!"}),a.jsx("button",{className:"btn btn-outline",disabled:!0,style:{opacity:.6,cursor:"not-allowed"},children:"App Store"})]}),a.jsxs("div",{className:"mobile-app-card",children:[a.jsx("h3",{children:"Android App"}),a.jsx("p",{children:"Google Play - Coming Soon!"}),a.jsx("button",{className:"btn btn-outline",disabled:!0,style:{opacity:.6,cursor:"not-allowed"},children:"Google Play"})]})]})]})}),a.jsx("footer",{className:"footer",children:a.jsxs("div",{className:"container",children:[a.jsx("p",{children:" 2024 Local Host Connect. Connecting travellers with local experiences."}),a.jsxs("div",{className:"footer-links",style:{marginTop:"1rem",display:"flex",justifyContent:"center",gap:"2rem",flexWrap:"wrap"},children:[a.jsx(Xt,{to:"/privacy-policy",style:{color:"white",textDecoration:"none"},children:"Privacy Policy"}),a.jsx(Xt,{to:"/terms-of-service",style:{color:"white",textDecoration:"none"},children:"Terms of Service"}),a.jsx(Xt,{to:"/help",style:{color:"white",textDecoration:"none"},children:"Help & Support"})]})]})}),a.jsx(Dj,{isOpen:o,onClose:()=>c(!1),selectedRole:u})]})},zj=({setUser:r})=>{const[n,i]=O.useState(""),[o,c]=O.useState(""),[u,f]=O.useState(!1),[p,m]=O.useState(!1),[g,v]=O.useState(null),[k,z]=O.useState(""),[W,U]=O.useState(""),[B,D]=O.useState(!1),[le,se]=O.useState(""),[fe,oe]=O.useState(!1),[te,ce]=O.useState(""),[ne,Te]=O.useState(""),[Me,xe]=O.useState(""),[Ue,He]=O.useState(!1),[ke,Se]=O.useState(!1),[Ie,q]=O.useState(""),P=rr(),X=[{label:"At least 8 characters",test:x=>x.length>=8},{label:"One uppercase letter",test:x=>/[A-Z]/.test(x)},{label:"One lowercase letter",test:x=>/[a-z]/.test(x)},{label:"One number",test:x=>/\d/.test(x)},{label:"One special character",test:x=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(x)}],L=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,J=x=>x?L.test(x)?(z(""),!0):(z("Please enter a valid email address"),!1):(z(""),!0);O.useEffect(()=>{const x=localStorage.getItem("user"),T=localStorage.getItem("token");x&&T&&P("/"),U("/assets/login-logo.png")},[P]);const E=(x,T="success")=>{v({message:x,type:T}),T==="success"&&setTimeout(()=>{v(w=>w?{...w,hiding:!0}:null),setTimeout(()=>v(null),300)},5e3)},I=async x=>{x?.preventDefault(),m(!0);try{const T=await Ge.post("auth/login",{email:n,password:o});if(T?.data?.success&&T?.data?.token){const{token:w,user:b}=T.data,R={...b,token:w};localStorage.setItem("user",JSON.stringify(R)),localStorage.setItem("userId",b.userId),localStorage.setItem("token",w),r(R),E("Login successful! Redirecting...","success");const _=b.role||b.userType||b.partitionKey;P(_==="Host"?"/posts":_==="Guest"?"/guest-dashboard":_==="Admin"?"/admin":"/");return}E("Login failed","error")}catch(T){T.response?.status===429?E("Too many login attempts. Please wait 15 minutes and try again.","error"):E("Login failed: "+(T.response?.data?.message||T.message),"error")}finally{m(!1)}},C=async()=>{if(q(""),!le||le.trim()===""){q("Please enter your email address");return}if(!L.test(le)){q("Please enter a valid email address");return}He(!0);try{(await Ge.post("email/send-otp",{email:le,purpose:"password-reset"})).data.success&&(oe(!0),q(""))}catch(x){const T=x.response?.data?.message||x.message;q("Failed to send OTP: "+T)}finally{He(!1)}},j=async()=>{if(q(""),!te||te.trim()===""){q("Please enter the OTP");return}if(te.length!==6){q("OTP must be exactly 6 digits");return}if(!ne||ne.trim()===""){q("Please enter a new password");return}if(!Me||Me.trim()===""){q("Please confirm your new password");return}if(!X.every(T=>T.test(ne))){q("Password must meet all requirements shown below");return}if(ne!==Me){q("New password and confirm password do not match");return}Se(!0);try{(await Ge.post("auth/reset-password",{email:le,otpCode:te,newPassword:ne})).data.success&&(E("Password reset successful! Please login with your new password.","success"),D(!1),oe(!1),ce(""),Te(""),xe(""),se(""),q(""))}catch(T){const w=T.response?.data?.message||T.message;q("Password reset failed: "+w)}finally{Se(!1)}};return a.jsxs("div",{className:"container",children:[g&&a.jsx("div",{className:"toast-container",children:a.jsxs("div",{className:`toast ${g.type} ${g.hiding?"hiding":""}`,children:[a.jsx("span",{className:"toast-icon",children:g.type==="success"?"":g.type==="error"?"":""}),a.jsx("div",{className:"toast-content",children:a.jsx("p",{className:"toast-message",children:g.message})}),g.type!=="success"&&a.jsx("button",{onClick:()=>v(null),style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.5rem"},children:""})]})}),a.jsxs("div",{className:"card",style:{maxWidth:"450px",margin:"50px auto",textAlign:"center"},children:[a.jsxs("div",{style:{marginBottom:"2rem"},children:[a.jsx("img",{src:"/assets/login-logo.png",alt:"Festive Guest Logo",style:{height:"150px",width:"auto",marginBottom:"1.5rem"}}),a.jsx("p",{style:{color:"#64748b",fontSize:"1.1rem"},children:"Connect Guests and Hosts for memorable experiences"})]}),!B&&a.jsxs("form",{onSubmit:I,style:{marginTop:"30px"},children:[a.jsxs("div",{className:"form-group",children:[a.jsx("input",{type:"email",className:"form-control",placeholder:"Enter your email address",value:n,onChange:x=>{i(x.target.value),J(x.target.value)},onBlur:x=>J(x.target.value),required:!0,style:{fontSize:"1rem",padding:"1rem",borderColor:k?"#dc2626":"#cbd5e1"}}),k&&a.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",k]})]}),a.jsxs("div",{className:"form-group",style:{position:"relative"},children:[a.jsx("input",{type:u?"text":"password",className:"form-control",placeholder:"Enter your password",value:o,onChange:x=>c(x.target.value),required:!0,style:{fontSize:"1rem",padding:"1rem",paddingRight:"3rem"}}),a.jsx("button",{type:"button",onClick:()=>f(!u),style:{position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#64748b",display:"flex",alignItems:"center",padding:"0"},children:u?a.jsx(Tl,{size:20}):a.jsx(Rl,{size:20})})]}),a.jsx("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",padding:"1rem",fontSize:"1.1rem"},disabled:p||k!=="",children:p?"Logging in...":"Login"})]}),a.jsx("div",{style:{marginTop:"1.5rem",textAlign:"center"},children:a.jsx("button",{type:"button",onClick:()=>D(!0),style:{background:"none",border:"none",color:"var(--primary)",textDecoration:"underline",cursor:"pointer",fontSize:"0.9rem"},children:"Forgot Password?"})}),a.jsx("div",{style:{marginTop:"2rem",padding:"1.5rem",background:"#f8fafc",borderRadius:"1rem",border:"1px solid #e2e8f0"},children:a.jsxs("p",{style:{margin:"0",color:"#64748b",fontSize:"1.05rem"},children:["New user? ",a.jsx("button",{className:"btn btn-primary",onClick:()=>P("/?register=true"),style:{marginLeft:"0.5rem",padding:"0.5rem 1.5rem"},children:"Register"})]})})]}),B&&a.jsx("div",{className:"modal-overlay",onClick:()=>D(!1),children:a.jsxs("div",{className:"modal-content",onClick:x=>x.stopPropagation(),style:{maxWidth:"400px"},children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h3",{children:[a.jsx(yl,{size:20})," Reset Password"]}),a.jsx("button",{onClick:()=>D(!1),className:"modal-close",children:""})]}),a.jsxs("div",{className:"modal-body",children:[Ie&&a.jsxs("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",color:"#dc2626",padding:"0.75rem",borderRadius:"0.5rem",marginBottom:"1rem",fontSize:"0.875rem"},children:[" ",Ie]}),fe?a.jsxs("div",{children:[a.jsxs("p",{style:{marginBottom:"1rem",color:"#64748b"},children:["Enter the OTP sent to ",le," and your new password"]}),a.jsx("div",{className:"form-group",children:a.jsx("input",{type:"text",value:te,onChange:x=>ce(x.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter 6-digit OTP",maxLength:6,style:{fontSize:"1rem",padding:"0.75rem",width:"100%"}})}),a.jsxs("div",{className:"form-group",children:[a.jsx("input",{type:"password",value:ne,onChange:x=>Te(x.target.value),placeholder:"Enter new password",style:{fontSize:"1rem",padding:"0.75rem",width:"100%"}}),a.jsx("div",{style:{marginTop:"0.75rem",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:X.map((x,T)=>{const w=x.test(ne);return a.jsxs("div",{style:{fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.25rem",color:w?"#16a34a":"#dc2626",transition:"color 0.2s"},children:[a.jsx("span",{style:{fontSize:"0.9rem"},children:w?"":""}),x.label]},T)})})]}),a.jsx("div",{className:"form-group",children:a.jsx("input",{type:"password",value:Me,onChange:x=>xe(x.target.value),placeholder:"Confirm new password",style:{fontSize:"1rem",padding:"0.75rem",width:"100%"}})}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem"},children:[a.jsx("button",{onClick:()=>{oe(!1),ce(""),Te(""),xe(""),q("")},className:"btn btn-secondary",style:{flex:1,padding:"0.75rem"},children:"Back"}),a.jsx("button",{onClick:j,disabled:ke,className:"btn btn-primary",style:{flex:1,padding:"0.75rem"},children:ke?"Resetting...":"Reset Password"})]})]}):a.jsxs("div",{children:[a.jsx("p",{style:{marginBottom:"1rem",color:"#64748b"},children:"Enter your email to receive a password reset OTP"}),a.jsx("div",{className:"form-group",children:a.jsx("input",{type:"email",value:le,onChange:x=>se(x.target.value),placeholder:"Enter your email address",style:{fontSize:"1rem",padding:"0.75rem",width:"100%"}})}),a.jsx("button",{onClick:C,disabled:Ue||!le,className:"btn btn-primary",style:{width:"100%",padding:"0.75rem"},children:Ue?"Sending OTP...":"Send OTP"})]})]})]})})]})},Lj=({setUser:r})=>{const n=rr(),i=Wn(),[o,c]=O.useState({}),[u,f]=O.useState({userId:crypto.randomUUID(),name:"",email:"",password:"",phone:"",state:"",city:"",otherCity:"",bio:"",role:"Guest",status:"Active",hostingAreas:[]}),[p,m]=O.useState(!1),[g,v]=O.useState(null),[k,z]=O.useState(""),[W,U]=O.useState(""),[B,D]=O.useState(null),[le,se]=O.useState(""),[fe,oe]=O.useState(!1),[te,ce]=O.useState(""),[ne,Te]=O.useState(!1),[Me,xe]=O.useState(!1),[Ue,He]=O.useState(!1),[ke,Se]=O.useState(""),[Ie,q]=O.useState(""),[P,X]=O.useState(""),[L,J]=O.useState(""),[E,I]=O.useState(!1),[C,j]=O.useState({}),[x,T]=O.useState(0),[w,b]=O.useState(!1),[R,_]=O.useState(!1),[V,K]=O.useState([]),[G,H]=O.useState(0),ue=[{label:"At least 8 characters",test:y=>y.length>=8},{label:"One uppercase letter",test:y=>/[A-Z]/.test(y)},{label:"One lowercase letter",test:y=>/[a-z]/.test(y)},{label:"One number",test:y=>/\d/.test(y)},{label:"One special character",test:y=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(y)}],ge=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,re=/^[6-9]\d{9}$/,Z=y=>y?ge.test(y)?(Se(""),!0):(Se("Please enter a valid email address"),!1):(Se(""),!0),ae=y=>{if(!y)return q(""),!0;const A=y.replace(/\D/g,"");return re.test(A)?(q(""),!0):(q("Please enter a valid 10-digit Indian mobile number (starting with 6-9). This helps other users contact you accurately."),!1)},Ee=(y,A="success")=>{v({message:y,type:A}),A==="success"&&setTimeout(()=>{v(F=>F?{...F,hiding:!0}:null),setTimeout(()=>v(null),300)},5e3)};O.useEffect(()=>{const y=new URLSearchParams(i.search),A=y.get("role"),F=y.get("referralCode"),$=y.get("disclaimerAccepted"),ee=sessionStorage.getItem("disclaimerAcceptance");if(!ee||!$){n("/");return}try{const de=JSON.parse(ee);if(Date.now()-de.timestamp>6e5||de.timestamp.toString()!==$){sessionStorage.removeItem("disclaimerAcceptance"),n("/");return}}catch{n("/");return}(A==="Guest"||A==="Host")&&f(de=>({...de,role:A})),F&&f(de=>({...de,ReferredBy:F}))},[i.search,n]),O.useEffect(()=>{(async()=>{try{console.log("Loading locations using locationService...");const A=await Hl.getLocations();console.log("Locations loaded successfully:",A),c(A)}catch(A){console.error("DEBUG: Failed to load locations:",A),console.error("Error details:",{message:A.message,response:A.response?.data,status:A.response?.status,url:A.config?.url}),Ee("Registration Error: "+A.message,"error")}})().catch(A=>console.error("CRITICAL: loadLocations failed",A))},[]);const Ae=y=>{const A=y.target.value;_e(y),Z(A),A!==te&&(Te(!1),oe(!1),z(""))},_e=y=>{const{name:A,value:F}=y.target;f($=>{const ee={...$,[A]:F};return A==="state"&&(ee.city=""),ee})},Ne=y=>{y.preventDefault();const A={};if(u.name.trim()||(A.name="Name is required"),u.email.trim()||(A.email="Email is required"),u.password.trim()||(A.password="Password is required"),u.phone.trim()||(A.phone="Phone number is required"),u.state||(A.state="State is required"),u.city||(A.city="City is required"),u.bio.trim()||(A.bio="Bio is required"),w||(A.ageConfirmed="You must confirm that you are at least 18 years old"),u.role==="Host"&&(u.hostingAreas.some($=>$.cities&&$.cities.length>0)||(A.hostingAreas="Please select at least one hosting area",Ee("Hosts must select at least one hosting area","error"))),j(A),Object.keys(A).length>0){Ee("Please fill in all required fields","error");return}$e()},$e=async()=>{m(!0),D(null);try{if(!ne){D("Please verify your email before completing registration."),Ee("Please verify your email before registering","error"),m(!1);return}const y=sessionStorage.getItem("disclaimerAcceptance");if(!y){D("Disclaimer acceptance expired. Please start registration again."),Ee("Please accept the disclaimer again","error"),n("/");return}try{const de=JSON.parse(y);if(Date.now()-de.timestamp>6e5){D("Disclaimer acceptance expired. Please start registration again."),sessionStorage.removeItem("disclaimerAcceptance"),Ee("Disclaimer acceptance expired","error"),n("/");return}}catch{D("Invalid disclaimer acceptance. Please start registration again."),n("/");return}const A=u.city==="Other"?u.otherCity:u.city,F={email:te,password:u.password,name:u.name,phone:u.phone,userType:u.role,location:`${A}, ${u.state}`,bio:u.bio,ReferredBy:u.ReferredBy||null,hostingAreas:u.role==="Host"?u.hostingAreas.length>0&&u.hostingAreas.some(de=>de.cities.length>0)?JSON.stringify(u.hostingAreas.filter(de=>de.cities.length>0)):"":null};console.log("Sending registration payload:",F);let ee=(await Ge.post("auth/register",F)).data;if(console.log("Registration response:",ee),ee.success||ee.message==="User registered successfully"){sessionStorage.removeItem("disclaimerAcceptance"),Ee(" Registration successful!","success"),T(5);const de=setInterval(()=>{T(ze=>ze<=1?(clearInterval(de),n("/login"),0):ze-1)},1e3)}else throw new Error(ee.message||"Registration failed")}catch(y){console.error("Registration error:",y),console.error("Error response:",y.response?.data);const A=y.response?.data?.message||y.response?.data?.error||y.message;if(y.response?.status===429){const F="Too many attempts. Please wait 15 minutes and try again.";D(F),Ee(F,"error")}else if(y.response?.status===500){const F="Server error occurred. Please try again later or contact support if the issue persists.";D(`Server Error: ${A||"Internal server error"}`),Ee(F,"error")}else D(A),Ee("Registration failed: "+A,"error")}finally{m(!1)}},Qe=async()=>{if(!u.email){Ee("Please enter an email address first","error");return}xe(!0);try{console.log("Sending OTP request:",{email:u.email,purpose:"registration"});const y=await Ge.post("email/send-otp",{email:u.email,purpose:"registration"});console.log("OTP response:",y.data),y.data.success&&(oe(!0),U(u.email),Ee("OTP sent to your email","success"))}catch(y){console.error("OTP Error Details:",{status:y.response?.status,data:y.response?.data,message:y.message,fullResponse:y.response}),console.error("Full error object:",y);const A=y.response?.data?.message||y.response?.data?.error||y.response?.data||y.message;D(JSON.stringify(y.response?.data)||A),Ee("Failed to send OTP: "+A,"error")}finally{xe(!1)}},M=async()=>{if(!k||k.length!==6){X("Please enter a valid 6-digit OTP code");return}m(!0),X("");try{const y=await Ge.post("email/validate-otp",{email:u.email,otpCode:k});y.data.success&&(ce(u.email),Te(!0),oe(!1),se(""),X(""),Ee(y.data?.message||"Email verified","success"))}catch(y){const A=y.response?.data?.message||y.message;X("Verification failed: "+A)}finally{m(!1)}};return a.jsxs("div",{className:"container",children:[g&&a.jsx("div",{className:"toast-container",children:a.jsxs("div",{className:`toast ${g.type} ${g.hiding?"hiding":""}`,children:[a.jsx("span",{className:"toast-icon",children:g.type==="success"?"":g.type==="error"?"":""}),a.jsxs("div",{className:"toast-content",children:[a.jsx("p",{className:"toast-message",children:g.message}),g.type==="success"&&x>0&&a.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",textAlign:"center",marginTop:"0.5rem"},children:x})]}),g.type!=="success"&&a.jsx("button",{onClick:()=>v(null),style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.5rem"},children:""})]})}),B&&a.jsxs("div",{style:{maxWidth:"1200px",margin:"10px auto",color:"#b91c1c",background:"#fee2e2",padding:"10px",borderRadius:"6px"},children:[a.jsx("strong",{children:"Error:"})," ",B]}),a.jsxs("div",{className:"registration-layout",children:[a.jsxs("div",{className:"disclaimer-section",children:[a.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[a.jsx("h2",{style:{color:"#1e293b",marginBottom:"0.5rem"},children:"Welcome to Local Host Connect"}),a.jsx("p",{style:{color:"#64748b"},children:"Connect with local hosts and travelers anywhere"})]}),a.jsxs("div",{style:{padding:"1.5rem",background:"#f0f9ff",border:"1px solid #0ea5e9",borderRadius:"0.75rem",marginBottom:"1.5rem"},children:[a.jsx("h4",{style:{margin:"0 0 1rem 0",color:"#0c4a6e",fontSize:"1rem",fontWeight:"600"},children:" Terms Accepted"}),a.jsxs("div",{style:{color:"#0c4a6e",fontSize:"0.9rem",lineHeight:"1.5"},children:[a.jsx("p",{style:{margin:"0 0 0.75rem 0"},children:"By proceeding to this page, you have already read and agreed to our:"}),a.jsxs("ul",{style:{margin:"0",paddingLeft:"1.25rem"},children:[a.jsxs("li",{style:{marginBottom:"0.5rem"},children:[a.jsx("button",{type:"button",style:{background:"none",border:"none",color:"#0ea5e9",textDecoration:"underline",cursor:"pointer",padding:0,font:"inherit"},onClick:()=>window.open("/privacy-policy","_blank"),children:"Privacy Policy"})," - How we handle your personal information"]}),a.jsxs("li",{style:{marginBottom:"0.5rem"},children:[a.jsx("button",{type:"button",style:{background:"none",border:"none",color:"#0ea5e9",textDecoration:"underline",cursor:"pointer",padding:0,font:"inherit"},onClick:()=>window.open("/terms-of-service","_blank"),children:"Terms of Service"})," - Platform usage guidelines"]}),a.jsxs("li",{children:[a.jsx("button",{type:"button",style:{background:"none",border:"none",color:"#0ea5e9",textDecoration:"underline",cursor:"pointer",padding:0,font:"inherit"},onClick:()=>window.open("/safety-guidelines","_blank"),children:"Safety Guidelines"})," - Important safety recommendations"]})]})]})]})]}),a.jsx("div",{className:"registration-form-section",children:a.jsxs("div",{className:"card",style:{margin:"0",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},children:[a.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[a.jsx("h3",{style:{color:"#1e293b",marginBottom:"0.5rem"},children:"Complete Your Registration"}),a.jsx("p",{style:{color:"#64748b"},children:"Join our community of travelers and local hosts"})]}),a.jsxs("form",{onSubmit:Ne,children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Choose Your Role"}),a.jsxs("div",{style:{display:"flex",gap:"0.75rem",marginTop:"0.5rem"},children:[a.jsx("button",{type:"button",onClick:()=>f(y=>({...y,role:"Guest"})),className:`btn ${u.role==="Guest"?"btn-primary":"btn-outline"}`,style:{flex:1,padding:"1rem",fontSize:"1rem"},children:" Traveler (Guest)"}),a.jsx("button",{type:"button",onClick:()=>f(y=>({...y,role:"Host"})),className:`btn ${u.role==="Host"?"btn-primary":"btn-outline"}`,style:{flex:1,padding:"1rem",fontSize:"1rem"},children:" Local Host"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Full Name"}),a.jsx("input",{type:"text",name:"name",value:u.name,onChange:y=>{_e(y),C.name&&j(A=>({...A,name:""}))},placeholder:"Enter your full name",required:!0,style:{fontSize:"1rem",padding:"1rem",border:C.name?"2px solid #dc2626 !important":"2px solid #cbd5e1"}}),C.name&&a.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",C.name]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Email Address"}),a.jsx("input",{type:"email",name:"email",value:u.email,onChange:y=>{Ae(y),C.email&&j(A=>({...A,email:""}))},onBlur:y=>Z(y.target.value),placeholder:"Enter your email address",required:!0,disabled:ne,style:{fontSize:"1rem",padding:"1rem",border:ke||C.email?"2px solid #dc2626 !important":"2px solid #cbd5e1",backgroundColor:ne?"#f3f4f6":"white",cursor:ne?"not-allowed":"text"}}),(ke||C.email)&&a.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",ke||C.email]}),a.jsxs("div",{style:{marginTop:"0.75rem",display:"flex",gap:"0.5rem",alignItems:"center"},children:[!ne&&!fe&&a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:Qe,disabled:Me||ke!=="",children:Me?"Sending OTP...":"Send OTP"}),fe&&a.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[a.jsx("input",{type:"text",value:k,onChange:y=>{z(y.target.value.replace(/\D/g,"").slice(0,6)),X("")},placeholder:"Enter OTP",maxLength:6,style:{padding:"0.5rem",fontSize:"1rem",width:"160px",borderColor:P?"#dc2626":"#cbd5e1"}}),P&&a.jsxs("p",{style:{margin:"0",color:"#dc2626",fontSize:"0.75rem"},children:[" ",P]})]}),a.jsx("button",{type:"button",className:"btn btn-primary",onClick:M,disabled:p||k.length!==6,style:{opacity:k.length!==6?.5:1,cursor:k.length!==6?"not-allowed":"pointer"},children:"Verify"})]}),ne&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("span",{style:{color:"#16a34a",fontWeight:"600"},children:" Email verified"}),a.jsx("button",{type:"button",onClick:()=>{Te(!1),ce(""),oe(!1),z("")},className:"btn btn-outline",style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},children:"Change Email"})]})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Password"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("input",{type:Ue?"text":"password",name:"password",value:u.password,onChange:y=>{_e(y),C.password&&j(A=>({...A,password:""}))},placeholder:"Create a strong password",required:!0,style:{fontSize:"1rem",padding:"1rem",paddingRight:"2.5rem",width:"100%",boxSizing:"border-box",border:C.password?"2px solid #dc2626 !important":"2px solid #cbd5e1"}}),a.jsx("button",{type:"button",onClick:()=>He(!Ue),style:{position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#64748b",display:"flex",alignItems:"center",padding:"0"},children:Ue?a.jsx(Tl,{size:20}):a.jsx(Rl,{size:20})})]}),C.password&&a.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",C.password]}),a.jsx("div",{style:{marginTop:"0.75rem",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:ue.map((y,A)=>{const F=y.test(u.password);return a.jsxs("div",{style:{fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.25rem",color:F?"#16a34a":"#dc2626",transition:"color 0.2s"},children:[a.jsx("span",{style:{fontSize:"0.9rem"},children:F?"":""}),y.label]},A)})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Phone Number"}),a.jsx("input",{type:"tel",name:"phone",value:u.phone,onChange:y=>{const A=y.target.value.replace(/\D/g,"").slice(0,10);_e({target:{name:"phone",value:A}}),ae(A),C.phone&&j(F=>({...F,phone:""}))},onBlur:y=>ae(y.target.value),placeholder:"Enter your 10-digit mobile number",required:!0,maxLength:10,style:{fontSize:"1rem",padding:"1rem",border:Ie||C.phone?"2px solid #dc2626 !important":"2px solid #cbd5e1"}}),(Ie||C.phone)&&a.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",Ie||C.phone]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"State"}),a.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginTop:"0.5rem"},children:Object.keys(o||{}).map(y=>a.jsx("button",{type:"button",onClick:()=>{f(A=>({...A,state:y,city:""})),C.state&&j(A=>({...A,state:""}))},className:`btn ${u.state===y?"btn-primary":"btn-outline"}`,style:{padding:"0.75rem 1rem",fontSize:"0.9rem"},children:y},y))}),C.state&&a.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",C.state]})]}),u.state&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"City"}),a.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginTop:"0.5rem"},children:o[u.state]&&o[u.state].map(y=>a.jsx("button",{type:"button",onClick:()=>{f(A=>({...A,city:y})),C.city&&j(A=>({...A,city:""}))},className:`btn ${u.city===y?"btn-primary":"btn-outline"}`,style:{padding:"0.75rem 1rem",fontSize:"0.9rem"},children:y},y))}),C.city&&a.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",C.city]})]}),u.city==="Other"&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Enter Your City"}),a.jsx("input",{type:"text",name:"otherCity",value:u.otherCity,onChange:_e,placeholder:"Name of your city",required:!0,style:{fontSize:"1rem",padding:"1rem"}})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:u.role==="Host"?"What You Offer as a Host":"What You're Looking For"}),a.jsx("textarea",{name:"bio",value:u.bio,onChange:y=>{_e(y),C.bio&&j(A=>({...A,bio:""}))},placeholder:u.role==="Host"?"Describe what you offer to travelers (e.g., accommodation, local experiences, cultural insights, authentic cuisine, city tours)...":"Tell hosts what you're looking for (e.g., local experiences, cultural exchange, authentic food, business travel accommodation, educational opportunities)...",required:!0,rows:"4",maxLength:250,style:{fontSize:"1rem",padding:"1rem",width:"100%",borderRadius:"0.5rem",border:C.bio?"2px solid #dc2626 !important":"2px solid #cbd5e1"}}),C.bio&&a.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",C.bio]}),a.jsxs("div",{style:{textAlign:"right",fontSize:"0.875rem",color:"#64748b",marginTop:"0.25rem"},children:[u.bio.length,"/250 characters"]})]}),u.role==="Host"&&a.jsxs("div",{className:"form-group",children:[a.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Areas Where You Can Host"}),a.jsx("p",{style:{margin:"0.5rem 0",color:"#64748b",fontSize:"0.9rem"},children:"Select all states and cities where you can provide hosting services to travelers."}),a.jsxs("button",{type:"button",onClick:()=>{const y=[...u.hostingAreas];K(y),H(y.reduce((A,F)=>A+F.cities.length,0)),_(!0)},className:"btn btn-outline",style:{padding:"1rem",fontSize:"1rem",width:"100%",marginBottom:"1rem",borderColor:C.hostingAreas?"#dc2626":"#cbd5e1"},children:[" Select Hosting Areas (",u.hostingAreas.reduce((y,A)=>y+A.cities.length,0)," cities selected)"]}),C.hostingAreas&&a.jsxs("p",{style:{margin:"0 0 1rem 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",C.hostingAreas]}),u.hostingAreas.length>0&&u.hostingAreas.some(y=>y.cities.length>0)&&a.jsxs("div",{style:{padding:"1rem",background:"#f0fdf4",borderRadius:"0.5rem",border:"1px solid #16a34a"},children:[a.jsx("p",{style:{margin:"0 0 0.5rem 0",fontWeight:"600",color:"#15803d"},children:"Selected Hosting Areas:"}),u.hostingAreas.filter(y=>y.cities.length>0).map(y=>a.jsxs("div",{style:{marginBottom:"0.25rem",color:"#15803d",fontSize:"0.9rem"},children:[a.jsxs("strong",{children:[y.state,":"]})," ",y.cities.join(", ")]},y.state))]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Referral Code (Optional)"}),a.jsx("input",{type:"text",name:"ReferredBy",value:u.ReferredBy||"",onChange:y=>{const A=y.target.value.toUpperCase();f(F=>({...F,ReferredBy:A}))},placeholder:"Enter referral code if you have one",style:{fontSize:"1rem",padding:"1rem"}}),u.ReferredBy&&a.jsx("p",{style:{margin:"0.5rem 0 0 0",color:"#16a34a",fontSize:"0.875rem"},children:" Referral code applied"})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.75rem",padding:"1rem",background:"#fef3c7",border:"2px solid #f59e0b",borderRadius:"0.75rem",marginBottom:"1rem"},children:[a.jsx("input",{type:"checkbox",id:"ageConfirmation",checked:w,onChange:y=>{b(y.target.checked),C.ageConfirmed&&j(A=>({...A,ageConfirmed:""}))},style:{marginTop:"0.25rem",width:"18px",height:"18px",cursor:"pointer"}}),a.jsxs("label",{htmlFor:"ageConfirmation",style:{fontWeight:"600",color:"#92400e",cursor:"pointer",lineHeight:"1.5",fontSize:"0.95rem"},children:[a.jsx("strong",{children:"Age Verification Required:"})," I confirm that I am at least 18 years of age and have the legal capacity to enter into binding agreements. Users under 18 are not permitted to use this platform."]})]}),C.ageConfirmed&&a.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem",fontWeight:"600"},children:[" ",C.ageConfirmed]})]}),a.jsx("div",{style:{marginTop:"2rem",padding:"1rem",background:"#f0fdf4",border:"2px solid #16a34a",borderRadius:"0.75rem",textAlign:"center"},children:a.jsx("p",{style:{margin:"0",color:"#15803d",fontWeight:"500",fontSize:"0.95rem"},children:" Disclaimer accepted. You may now complete your registration."})}),a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:p||x>0||!w,style:{width:"100%",padding:"1rem",fontSize:"1.1rem",marginTop:"1.5rem",opacity:p||x>0||!w?.5:1},children:p?"Registering...":"Register Now"})]}),a.jsx("div",{style:{marginTop:"2rem",textAlign:"center",padding:"1.5rem",background:"#f8fafc",borderRadius:"1rem",border:"1px solid #e2e8f0"},children:a.jsxs("p",{style:{margin:"0",color:"#64748b",fontSize:"1.05rem"},children:["Already have an account? ",a.jsx("button",{className:"btn btn-primary",onClick:()=>n("/login"),style:{marginLeft:"0.5rem",padding:"0.5rem 1.5rem"},children:"Login"})]})})]})})]}),R&&a.jsx("div",{className:"modal-overlay",onClick:()=>_(!1),children:a.jsxs("div",{className:"modal",onClick:y=>y.stopPropagation(),style:{width:"800px"},children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h3",{children:" Select Hosting Areas"}),a.jsx("button",{className:"modal-close",onClick:()=>_(!1),children:""})]}),a.jsx("div",{className:"modal-body",children:Object.entries(o||{}).map(([y,A])=>{const F=V.find($=>$.state===y)?.cities||[];return a.jsxs("div",{className:"state-section",children:[a.jsx("div",{className:"state-header",children:y}),a.jsx("div",{className:"cities-grid",children:A.map($=>{const ee=F.includes($);return a.jsx("button",{type:"button",onClick:()=>{const de=[...V],ze=de.findIndex(Oe=>Oe.state===y);ze>=0?ee?(de[ze].cities=de[ze].cities.filter(Oe=>Oe!==$),de[ze].cities.length===0&&de.splice(ze,1)):de[ze].cities.push($):de.push({state:y,cities:[$]}),K(de),H(de.reduce((Oe,Pe)=>Oe+Pe.cities.length,0))},className:`city-btn ${ee?"selected":""}`,children:$},$)})})]},y)})}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-primary",onClick:()=>{f(y=>({...y,hostingAreas:V})),_(!1)},style:{padding:"0.75rem 2rem",fontSize:"1.1rem"},children:[" Done (",G," cities selected)"]})})]})})]})},_y=({user:r})=>{rr();const[n,i]=O.useState([]),[o,c]=O.useState(!0),[u,f]=O.useState({}),[p,m]=O.useState([]),[g,v]=O.useState([]),[k,z]=O.useState(null),[W,U]=O.useState(!1),[B,D]=O.useState(!1),[le,se]=O.useState(window.innerWidth>768),[fe,oe]=O.useState({}),[te,ce]=O.useState("Not connected"),[ne,Te]=O.useState(null),[Me,xe]=O.useState(null),[Ue,He]=O.useState(!1),[ke,Se]=O.useState(!1),[Ie,q]=O.useState({rating:0,comment:""}),[P,X]=O.useState(!1),[L,J]=O.useState(""),[E,I]=O.useState(!1),[C,j]=O.useState({name:"",email:"",userType:"Guest",message:""}),[x,T]=O.useState(!1),[w,b]=O.useState(""),[R,_]=O.useState(!1),[V,K]=O.useState(0),[G,H]=O.useState(!1),[ue,ge]=O.useState({title:"",content:"",location:"",facilities:[],visitors:"",days:""}),[re,Z]=O.useState(!1),[ae,Ee]=O.useState(""),[Ae,_e]=O.useState([]),[Ne,$e]=O.useState(!1);O.useEffect(()=>{r&&r.token&&(ee(),Qe())},[r]),O.useEffect(()=>{const ye=()=>{const Le=window.innerWidth>768;se(Le),Le&&D(!0)};return ye(),window.addEventListener("resize",ye),()=>window.removeEventListener("resize",ye)},[]);const Qe=async()=>{try{const ye=await Ge.get("location/states-with-cities");oe(ye.data)}catch(ye){console.error("Error fetching locations:",ye),oe({"Tamil Nadu":["Chennai","Coimbatore","Madurai","Other"],Karnataka:["Bangalore","Mysore","Mangalore","Other"],Kerala:["Kochi","Thiruvananthapuram","Kozhikode","Other"],"Andhra Pradesh":["Hyderabad","Visakhapatnam","Vijayawada","Other"],Maharashtra:["Mumbai","Pune","Nagpur","Other"],Delhi:["New Delhi","Other"]})}};O.useEffect(()=>{M()},[n,p]);const M=()=>{if(p.length===0)v(n);else{const ye=n.filter(Le=>p.some(Ye=>Le.location?.toLowerCase().includes(Ye.toLowerCase())));v(ye)}},y=ye=>{f(Le=>({...Le,[ye]:!Le[ye]}))},A=ye=>{m(Le=>Le.includes(ye)?Le.filter(Ye=>Ye!==ye):[...Le,ye])},F=()=>{m([])},$=()=>{Te(null),xe(null),document.body.style.overflow="unset"};O.useEffect(()=>(ne?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[ne]);const ee=async()=>{try{const ye=await Ge.get("user/browse"),Ye=(Array.isArray(ye.data)?ye.data:[ye.data]).filter(dt=>dt.status==="Active"||dt.status==="Verified");i(Ye)}catch(ye){console.error("Error fetching hosts:",ye),ye.response?.status===500?(console.error("Server error - API may be down or misconfigured"),i([])):ye.response?.status!==401&&ye.response?.status!==403&&i([])}finally{c(!1)}},de=async ye=>{xe(ye.userId),He(!0);try{const Le=await Ge.post("user/public-profile",{userId:ye.userId}),Ye=r?.userId,dt=Le.data.reviews||[],vt=dt.find(An=>An.reviewerId===Ye),Hn=dt.filter(An=>An.reviewerId!==Ye).sort((An,ii)=>new Date(ii.createdAt)-new Date(An.createdAt)),qn=vt?[vt,...Hn]:Hn,ln=!!vt;Te({...Le.data,reviews:qn,hasUserReview:ln}),Se(!1),q({rating:0,comment:""})}catch(Le){console.error("Failed to fetch profile:",Le)}finally{He(!1)}},ze=ye=>{z({id:ye.userId,name:ye.name})},Oe=async()=>{if(console.log("Submit clicked, reviewError before:",L),console.log("Rating:",Ie.rating,"Comment:",Ie.comment),J(""),!Ie.comment.trim()||Ie.rating===0){console.log("Setting error message"),J("Please provide both rating and comment"),console.log("reviewError after setting:","Please provide both rating and comment");return}X(!0);try{await Ge.post("review",{userId:ne.userId,rating:Ie.rating,comment:Ie.comment.trim()});const ye=await Ge.post("user/public-profile",{userId:ne.userId}),Le=r?.userId,Ye=ye.data.reviews||[],dt=Ye.find(ln=>ln.reviewerId===Le),vt=Ye.filter(ln=>ln.reviewerId!==Le).sort((ln,An)=>new Date(An.createdAt)-new Date(ln.createdAt)),Hn=dt?[dt,...vt]:vt,qn=!!dt;Te({...ye.data,reviews:Hn,hasUserReview:qn}),Se(!1),q({rating:0,comment:""}),J("")}catch(ye){console.error("Failed to submit review:",ye),ye.response?.data?.message?J(ye.response.data.message):J("Failed to submit review. Please try again.")}finally{X(!1)}},Pe=async()=>{if(b(""),!C.name.trim()||!C.email.trim()||!C.message.trim()){b("Please fill in all required fields");return}T(!0);try{await Ge.post("feedback",{name:C.name.trim(),email:C.email.trim(),userType:C.userType,message:C.message.trim()}),_(!0),j({name:"",email:"",userType:"Guest",message:""}),K(5);const ye=setInterval(()=>{K(Le=>Le<=1?(clearInterval(ye),I(!1),_(!1),K(0),0):Le-1)},1e3)}catch(ye){console.error("Failed to submit feedback:",ye),ye.response?.data?.message?b(ye.response.data.message):b("Failed to submit feedback. Please try again.")}finally{T(!1)}};return o?a.jsx("div",{className:"container",children:a.jsxs("div",{className:"loading",style:{padding:"4rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),a.jsx("h3",{children:"Finding amazing hosts for you..."})]})}):a.jsxs("div",{className:"browse-layout",children:[a.jsxs("button",{className:"mobile-filter-toggle",onClick:ye=>{ye.stopPropagation(),U(!W)},children:[a.jsxs("span",{children:["Filter by Location ",p.length>0&&`(${p.length})`]}),W?a.jsx(pf,{size:16}):a.jsx(jl,{size:16})]}),a.jsxs("div",{className:`location-sidebar ${W?"mobile-visible":""}`,onClick:ye=>ye.stopPropagation(),children:[a.jsxs("div",{className:"filter-header",children:[a.jsxs("h3",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:le?"default":"pointer",width:"100%"},onClick:()=>!le&&D(!B),children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(hf,{size:20,style:{color:"var(--primary)"}}),"Filter by Location"]}),!le&&a.jsx("span",{style:{color:"var(--primary)",fontSize:"1.2rem"},children:B?"":"+"})]}),a.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:p.length>0&&a.jsxs("button",{onClick:F,className:"clear-filters-btn",children:["Clear (",p.length,")"]})})]}),(le||B)&&a.jsx("div",{className:"location-filters",children:Object.entries(fe).map(([ye,Le])=>a.jsxs("div",{className:"state-group",children:[a.jsxs("button",{className:"state-toggle",onClick:()=>y(ye),children:[a.jsx("span",{children:ye}),a.jsx("span",{className:"expand-icon",style:{color:"var(--primary)",background:"none",border:"none",borderRadius:"0",fontSize:"1.2rem"},children:u[ye]?"-":"+"})]}),u[ye]&&a.jsx("div",{className:"cities-list",children:Le.map(Ye=>a.jsx("button",{className:`city-btn ${p.includes(Ye)?"selected":""}`,onClick:()=>A(Ye),children:Ye},Ye))})]},ye))})]}),a.jsxs("div",{className:"browse-main",children:[a.jsxs("div",{className:"browse-header",children:[a.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(zC,{size:24,style:{color:"var(--primary)"}}),"Available Hosts"]}),a.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:a.jsx("div",{className:"results-count",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:!o&&a.jsxs(a.Fragment,{children:[a.jsx(ti,{size:16,style:{color:"var(--text-light)"}}),a.jsxs("span",{children:[g.length," host",g.length!==1?"s":""," found"]})]})})})]}),o?a.jsxs("div",{className:"loading",style:{padding:"4rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),a.jsx("h3",{children:"Finding amazing hosts for you..."})]}):a.jsx("div",{children:g.length===0?a.jsxs("div",{className:"no-results",children:[a.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),a.jsxs("h3",{style:{color:"#1e293b"},children:["No hosts found",p.length>0?" for selected locations":" in this area yet"]}),a.jsx("p",{style:{color:"#64748b"},children:p.length>0?"Try selecting different locations or clear filters.":"We're growing fast! Check back tomorrow for new local hosts."}),p.length>0&&a.jsx("button",{onClick:F,className:"btn btn-outline",children:"Clear filters"})]}):a.jsx("div",{className:"compact-grid",children:g.map(ye=>a.jsxs("div",{className:`host-card-horizontal ${Me===ye.userId?"selected":""}`,onClick:()=>de(ye),children:[a.jsxs("div",{className:"host-image-section",children:[a.jsx(nr,{src:ye.profileImageUrl,alt:ye.name,className:"host-card-img",userId:ye.userId,fallbackText:"Host"}),a.jsx("button",{className:"chat-btn",onClick:Le=>{Le.stopPropagation(),ze(ye)},children:a.jsx(ys,{size:16,fill:"currentColor"})}),ye.status==="Verified"&&a.jsx("div",{className:"verified-badge",children:" Verified"})]}),a.jsxs("div",{className:"host-content-section",children:[a.jsx("h3",{className:"host-name",children:ye.name}),a.jsx("div",{className:"host-location",children:ye.location.split(",")[0]})]})]},ye.userId))})})]}),ne&&a.jsx("div",{className:"modal-overlay",onClick:$,children:a.jsxs("div",{className:"modal-content",onClick:ye=>ye.stopPropagation(),style:{maxHeight:"90vh",overflowY:"auto"},children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h3",{children:ne.name}),a.jsx("button",{onClick:$,className:"modal-close",children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",alignItems:"flex-start"},children:[a.jsx(nr,{src:ne.profileImageUrl,alt:ne.name,className:"modal-profile-image",fallbackText:"Profile",style:{flexShrink:0,width:"100px",height:"100px"}}),a.jsxs("div",{style:{flex:1},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1.25rem"},children:ne.name}),a.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:a.jsxs("span",{style:{color:"#64748b"},children:[" ",ne.location]})}),a.jsxs("p",{style:{color:"#64748b",fontSize:"0.9rem",margin:"0"},children:[ne.userType,"  Joined ",new Date(ne.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"})]})]})]}),a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("h4",{style:{marginBottom:"0.75rem",color:"var(--text)"},children:ne.userType==="Host"?" About My Hosting":" About Me"}),a.jsx("p",{style:{color:"#475569",lineHeight:"1.5",background:"#f8fafc",padding:"1rem",borderRadius:"0.5rem",margin:"0"},children:ne.bio||"No description provided."})]}),a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[a.jsxs("h4",{style:{margin:"0",color:"var(--text)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[" Reviews (",ne.totalReviews||ne.reviews?.length||0,")",ne.averageRating>0&&a.jsxs("span",{style:{fontSize:"0.9rem",color:"#64748b"},children:["(",ne.averageRating.toFixed(1)," avg)"]})]}),!ne.hasUserReview&&a.jsx("button",{className:"btn btn-outline",onClick:()=>Se(!ke),style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:ke?"Cancel":"Write Review"})]}),ke&&a.jsxs("div",{className:"review-form",children:[L&&a.jsx("div",{className:"review-error",children:L}),a.jsxs("div",{style:{marginBottom:"0.75rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Rating:"}),a.jsx("div",{className:"rating-input",children:Array.from({length:5},(ye,Le)=>a.jsx("button",{type:"button",className:"rating-star",onClick:()=>{q(Ye=>({...Ye,rating:Le+1})),J("")},style:{color:Le<Ie.rating?"#fbbf24":"#d1d5db"},children:""},Le))})]}),a.jsxs("div",{style:{marginBottom:"0.75rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Comment:"}),a.jsx("textarea",{value:Ie.comment,onChange:ye=>{q(Le=>({...Le,comment:ye.target.value})),J("")},placeholder:"Share your experience...",rows:3,style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",resize:"vertical",fontFamily:"inherit"}})]}),a.jsx("button",{className:"btn btn-primary",onClick:Oe,disabled:P,style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:P?"Submitting...":"Submit Review"})]}),ne.reviews&&ne.reviews.length>0&&a.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:ne.reviews.map((ye,Le)=>{const Ye=ye.reviewerId===r?.userId;return a.jsxs("div",{className:`review-item ${Ye?"user-review":""}`,children:[Ye&&a.jsx("div",{className:"user-review-badge",children:"Your Review"}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.25rem",paddingRight:Ye?"5rem":"0"},children:[a.jsx("strong",{style:{fontSize:"0.9rem"},children:ye.reviewerName}),a.jsx("div",{className:"review-stars",children:Array.from({length:5},(dt,vt)=>a.jsx("span",{style:{color:vt<ye.rating?"#fbbf24":"#d1d5db"},children:""},vt))})]}),a.jsx("p",{style:{margin:"0",fontSize:"0.85rem",color:"#475569",lineHeight:"1.4"},children:ye.comment}),a.jsx("div",{className:"review-meta",children:new Date(ye.createdAt).toLocaleDateString()})]},Le)})}),(!ne.reviews||ne.reviews.length===0)&&!ke&&a.jsx("p",{style:{color:"#64748b",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:"No reviews yet. Be the first to share your experience!"})]})]})]})}),Ue&&a.jsx("div",{className:"modal-overlay",children:a.jsx("div",{className:"loading",style:{color:"white"},children:"Loading profile..."})}),E&&a.jsx("div",{className:"modal-overlay",onClick:()=>I(!1),children:a.jsxs("div",{className:"modal-content",onClick:ye=>ye.stopPropagation(),style:{maxWidth:"500px"},children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h3",{children:"Share Your Feedback"}),a.jsx("button",{onClick:()=>I(!1),className:"modal-close",children:""})]}),a.jsx("div",{className:"modal-body",children:R?a.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[a.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),a.jsx("h4",{style:{color:"var(--success)",marginBottom:"0.5rem"},children:"Thank you!"}),a.jsx("p",{style:{color:"#64748b"},children:"Your feedback has been submitted successfully."}),V>0&&a.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",marginTop:"1rem"},children:V})]}):a.jsxs(a.Fragment,{children:[w&&a.jsx("div",{style:{background:"#fee2e2",color:"#dc2626",padding:"0.75rem",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.9rem"},children:w}),a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Name *"}),a.jsx("input",{type:"text",value:C.name,onChange:ye=>{j(Le=>({...Le,name:ye.target.value})),b("")},placeholder:"Your name",style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",fontFamily:"inherit"}})]}),a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Email *"}),a.jsx("input",{type:"email",value:C.email,onChange:ye=>{j(Le=>({...Le,email:ye.target.value})),b("")},placeholder:"your.email@example.com",style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",fontFamily:"inherit"}})]}),a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"User Type"}),a.jsxs("select",{value:C.userType,onChange:ye=>j(Le=>({...Le,userType:ye.target.value})),style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",fontFamily:"inherit"},children:[a.jsx("option",{value:"Guest",children:"Guest"}),a.jsx("option",{value:"Host",children:"Host"})]})]}),a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Message *"}),a.jsx("textarea",{value:C.message,onChange:ye=>{j(Le=>({...Le,message:ye.target.value})),b("")},placeholder:"Share your thoughts, suggestions, or report any issues...",rows:4,style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",resize:"vertical",fontFamily:"inherit"}})]}),a.jsxs("div",{style:{display:"flex",gap:"0.75rem",justifyContent:"flex-end"},children:[a.jsx("button",{className:"btn btn-outline",onClick:()=>I(!1),disabled:x,children:"Cancel"}),a.jsx("button",{className:"btn btn-primary",onClick:Pe,disabled:x,children:x?"Submitting...":"Submit Feedback"})]})]})})]})}),k&&a.jsx($l,{recipientId:k.id,recipientName:k.name,recipientImageUrl:n.find(ye=>ye.userId===k.id)?.profileImageUrl,onClose:()=>z(null)})]})},Bj=({user:r})=>{const[n,i]=O.useState([]),[o,c]=O.useState(!0),[u,f]=O.useState({}),[p,m]=O.useState([]),[g,v]=O.useState([]),[k,z]=O.useState(null),[W,U]=O.useState(!0),[B,D]=O.useState(!0),[le,se]=O.useState({}),[fe,oe]=O.useState(null),[te,ce]=O.useState(null),[ne,Te]=O.useState(!1),[Me,xe]=O.useState(!1),[Ue,He]=O.useState({rating:0,comment:""}),[ke,Se]=O.useState(!1),[Ie,q]=O.useState("");O.useEffect(()=>{r.status==="Active"||r.status==="Verified"?(X(),P()):c(!1)},[r.status]);const P=async()=>{try{const T=await Ge.get("location/states-with-cities");se(T.data)}catch(T){console.error("Error fetching locations:",T)}};O.useEffect(()=>{L()},[n,p]);const X=async()=>{try{const T=await Ge.get("user/browse"),w=Array.isArray(T.data)?T.data:[T.data];i(w)}catch(T){console.error("Error fetching guests:",T),i([])}finally{c(!1)}},L=()=>{if(p.length===0)v(n);else{const T=n.filter(w=>p.some(b=>w.location?.toLowerCase().includes(b.toLowerCase())));v(T)}},J=T=>{f(w=>({...w,[T]:!w[T]}))},E=T=>{m(w=>w.includes(T)?w.filter(b=>b!==T):[...w,T])},I=()=>{m([])},C=()=>{oe(null),ce(null),document.body.style.overflow="unset"};O.useEffect(()=>(fe?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[fe]);const j=async T=>{ce(T.userId),Te(!0);try{const w=await Ge.post("user/public-profile",{userId:T.userId}),b=r?.userId,R=w.data.reviews||[],_=R.find(H=>H.reviewerId===b),V=R.filter(H=>H.reviewerId!==b).sort((H,ue)=>new Date(ue.createdAt)-new Date(H.createdAt)),K=_?[_,...V]:V,G=!!_;oe({...w.data,reviews:K,hasUserReview:G}),xe(!1),He({rating:0,comment:""})}catch(w){console.error("Failed to fetch profile:",w)}finally{Te(!1)}},x=async()=>{if(q(""),!Ue.comment.trim()||Ue.rating===0){q("Please provide both rating and comment");return}Se(!0);try{await Ge.post("review",{userId:fe.userId,rating:Ue.rating,comment:Ue.comment.trim()});const T=await Ge.post("user/public-profile",{userId:fe.userId}),w=r?.userId,b=T.data.reviews||[],R=b.find(G=>G.reviewerId===w),_=b.filter(G=>G.reviewerId!==w).sort((G,H)=>new Date(H.createdAt)-new Date(G.createdAt)),V=R?[R,..._]:_,K=!!R;oe({...T.data,reviews:V,hasUserReview:K}),xe(!1),He({rating:0,comment:""}),q("")}catch(T){console.error("Failed to submit review:",T),T.response?.data?.message?q(T.response.data.message):q("Failed to submit review. Please try again.")}finally{Se(!1)}};return r.status==="Pending"?a.jsx("div",{className:"container",style:{paddingTop:"5rem"},children:a.jsxs("div",{className:"card text-center",style:{maxWidth:"600px",margin:"0 auto",padding:"3rem 2rem",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[a.jsx("div",{style:{fontSize:"4rem",marginBottom:"1.5rem"},children:""}),a.jsx("h2",{style:{color:"#1e293b",fontSize:"2rem",marginBottom:"1rem"},children:"Registration Pending"}),a.jsx("p",{style:{color:"#64748b",fontSize:"1.1rem",lineHeight:"1.6",marginBottom:"2rem"},children:"Thank you for joining as a Host! Your registration is currently being verified by our team. Once approved, you'll be able to see guests and start hosting."}),a.jsxs("div",{style:{padding:"1.5rem",background:"#f8fafc",borderRadius:"0.75rem",border:"1px solid #e2e8f0",color:"#475569",textAlign:"left"},children:[a.jsx("p",{style:{margin:"0 0 0.5rem 0"},children:a.jsx("strong",{children:"Next Steps:"})}),a.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[a.jsx("li",{children:"Admin verifies your payment"}),a.jsx("li",{children:'Your profile becomes "Active"'}),a.jsx("li",{children:"You receive guests' contact requests"})]})]})]})}):o?a.jsx("div",{className:"container",children:a.jsxs("div",{className:"loading",style:{padding:"4rem",textAlign:"center"},children:[a.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),a.jsx("h3",{children:"Loading guests near you..."})]})}):a.jsxs("div",{className:"browse-layout",children:[a.jsxs("button",{className:"mobile-filter-toggle",onClick:T=>{T.stopPropagation(),U(!W)},children:[a.jsxs("span",{children:["Filter by Location ",p.length>0&&`(${p.length})`]}),W?a.jsx(pf,{size:16}):a.jsx(jl,{size:16})]}),a.jsxs("div",{className:`location-sidebar ${W?"mobile-visible":""}`,onClick:T=>T.stopPropagation(),children:[a.jsxs("div",{className:"filter-header",children:[a.jsxs("h3",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",width:"100%"},onClick:()=>D(!B),children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(hf,{size:20,style:{color:"var(--primary)"}}),"Filter by Location"]}),a.jsx("span",{style:{color:"var(--primary)",fontSize:"1.2rem"},children:B?"":"+"})]}),p.length>0&&a.jsxs("button",{onClick:I,className:"clear-filters-btn",children:["Clear (",p.length,")"]})]}),B&&a.jsx("div",{className:"location-filters",children:Object.entries(le).map(([T,w])=>a.jsxs("div",{className:"state-group",children:[a.jsxs("button",{className:"state-toggle",onClick:()=>J(T),children:[a.jsx("span",{children:T}),a.jsx("span",{className:"expand-icon",style:{color:"var(--primary)",background:"none",border:"none",borderRadius:"0",fontSize:"1.2rem"},children:u[T]?"-":"+"})]}),u[T]&&a.jsx("div",{className:"cities-list",children:w.map(b=>a.jsx("button",{className:`city-btn ${p.includes(b)?"selected":""}`,onClick:()=>E(b),children:b},b))})]},T))})]}),a.jsxs("div",{className:"browse-main",children:[a.jsxs("div",{className:"browse-header",children:[a.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx($d,{size:24,style:{color:"var(--primary)"}}),a.jsx("span",{style:{fontSize:"clamp(1.2rem, 4vw, 1.5rem)"},children:"Travellers Looking for Local Hosts"})]}),a.jsx("div",{className:"results-count",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:!o&&a.jsxs(a.Fragment,{children:[a.jsx(ti,{size:16,style:{color:"var(--text-light)"}}),a.jsxs("span",{children:[g.length," guest",g.length!==1?"s":""," found"]})]})})]}),g.length===0?a.jsxs("div",{className:"no-results",children:[a.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),a.jsx("h3",{style:{color:"#1e293b"},children:p.length>0?"No guests found for selected locations":"No guests found right now"}),a.jsx("p",{style:{color:"#64748b"},children:p.length>0?"Try adjusting your location filters or check back later.":"Check back soon as more travelers discover local experiences!"}),p.length>0&&a.jsx("button",{onClick:I,className:"btn btn-outline",children:"Clear filters"})]}):a.jsx("div",{className:"compact-grid",children:g.map(T=>a.jsxs("div",{className:`host-card-horizontal ${te===T.userId?"selected":""}`,onClick:()=>j(T),children:[a.jsxs("div",{className:"host-image-section",children:[a.jsx(nr,{src:T.profileImageUrl,alt:T.name,className:"host-card-img",fallbackText:"Guest"}),a.jsx("button",{className:"chat-btn",onClick:w=>{w.stopPropagation(),console.log("Opening chat with guest:",{id:T.userId,name:T.name}),z(null),setTimeout(()=>{z({id:T.userId,name:T.name,imageUrl:T.profileImageUrl})},50)},title:`Chat with ${T.name}`,children:a.jsx(ys,{size:16})})]}),a.jsxs("div",{className:"host-content-section",children:[a.jsx("h3",{className:"host-name",children:T.name}),a.jsx("div",{className:"host-location",children:T.location?.split(",")[0]||"Location not specified"})]})]},T.userId))})]}),fe&&a.jsx("div",{className:"modal-overlay",onClick:C,children:a.jsxs("div",{className:"modal-content",onClick:T=>T.stopPropagation(),style:{maxHeight:"90vh",overflowY:"auto"},children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h3",{children:fe.name}),a.jsx("button",{onClick:C,className:"modal-close",children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",alignItems:"flex-start"},children:[a.jsx(nr,{src:fe.profileImageUrl,alt:fe.name,className:"modal-profile-image",fallbackText:"Guest",style:{flexShrink:0,width:"100px",height:"100px"}}),a.jsxs("div",{style:{flex:1},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1.25rem"},children:fe.name}),a.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:a.jsxs("span",{style:{color:"#64748b"},children:[" ",fe.location]})}),a.jsxs("p",{style:{color:"#64748b",fontSize:"0.9rem",margin:"0"},children:[fe.userType,"  Joined ",new Date(fe.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"})]})]})]}),a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("h4",{style:{marginBottom:"0.75rem",color:"var(--text)"},children:fe.userType==="Host"?" About My Hosting":" About Me"}),a.jsx("p",{style:{color:"#475569",lineHeight:"1.5",background:"#f8fafc",padding:"1rem",borderRadius:"0.5rem",margin:"0"},children:fe.bio||"No description provided."})]}),a.jsxs("div",{children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[a.jsxs("h4",{style:{margin:"0",color:"var(--text)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[" Reviews (",fe.totalReviews||fe.reviews?.length||0,")",fe.averageRating>0&&a.jsxs("span",{style:{fontSize:"0.9rem",color:"#64748b"},children:["(",fe.averageRating.toFixed(1)," avg)"]})]}),!fe.hasUserReview&&a.jsx("button",{className:"btn btn-outline",onClick:()=>xe(!Me),style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:Me?"Cancel":"Write Review"})]}),Me&&a.jsxs("div",{className:"review-form",children:[Ie&&a.jsx("div",{className:"review-error",children:Ie}),a.jsxs("div",{style:{marginBottom:"0.75rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Rating:"}),a.jsx("div",{className:"rating-input",children:Array.from({length:5},(T,w)=>a.jsx("button",{type:"button",className:"rating-star",onClick:()=>{He(b=>({...b,rating:w+1})),q("")},style:{color:w<Ue.rating?"#fbbf24":"#d1d5db"},children:""},w))})]}),a.jsxs("div",{style:{marginBottom:"0.75rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Comment:"}),a.jsx("textarea",{value:Ue.comment,onChange:T=>{He(w=>({...w,comment:T.target.value})),q("")},placeholder:"Share your experience...",rows:3,style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",resize:"vertical",fontFamily:"inherit"}})]}),a.jsx("button",{className:"btn btn-primary",onClick:x,disabled:ke,style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:ke?"Submitting...":"Submit Review"})]}),fe.reviews&&fe.reviews.length>0&&a.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:fe.reviews.map((T,w)=>{const b=T.reviewerId===r?.userId;return a.jsxs("div",{className:`review-item ${b?"user-review":""}`,children:[b&&a.jsx("div",{className:"user-review-badge",children:"Your Review"}),a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.25rem",paddingRight:b?"5rem":"0"},children:[a.jsx("strong",{style:{fontSize:"0.9rem"},children:T.reviewerName}),a.jsx("div",{className:"review-stars",children:Array.from({length:5},(R,_)=>a.jsx("span",{style:{color:_<T.rating?"#fbbf24":"#d1d5db"},children:""},_))})]}),a.jsx("p",{style:{margin:"0",fontSize:"0.85rem",color:"#475569",lineHeight:"1.4"},children:T.comment}),a.jsx("div",{className:"review-meta",children:new Date(T.createdAt).toLocaleDateString()})]},w)})}),(!fe.reviews||fe.reviews.length===0)&&!Me&&a.jsx("p",{style:{color:"#64748b",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:"No reviews yet. Be the first to share your experience!"})]})]})]})}),ne&&a.jsx("div",{className:"modal-overlay",children:a.jsx("div",{className:"loading",style:{color:"white"},children:"Loading profile..."})}),k&&a.jsx($l,{recipientId:k.id,recipientName:k.name,recipientImageUrl:n.find(T=>T.userId===k.id)?.profileImageUrl,onClose:()=>z(null)})]})};function Tr(r,n){var i={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&n.indexOf(o)<0&&(i[o]=r[o]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(r);c<o.length;c++)n.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(r,o[c])&&(i[o[c]]=r[o[c]]);return i}function Ay(r){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&r[n],o=0;if(i)return i.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function ct(r){return this instanceof ct?(this.v=r,this):new ct(r)}function Qr(r,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=i.apply(r,n||[]),c,u=[];return c=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",f),c[Symbol.asyncIterator]=function(){return this},c;function f(W){return function(U){return Promise.resolve(U).then(W,k)}}function p(W,U){o[W]&&(c[W]=function(B){return new Promise(function(D,le){u.push([W,B,D,le])>1||m(W,B)})},U&&(c[W]=U(c[W])))}function m(W,U){try{g(o[W](U))}catch(B){z(u[0][3],B)}}function g(W){W.value instanceof ct?Promise.resolve(W.value.v).then(v,k):z(u[0][2],W)}function v(W){m("next",W)}function k(W){m("throw",W)}function z(W,U){W(U),u.shift(),u.length&&m(u[0][0],u[0][1])}}function xl(r){var n,i;return n={},o("next"),o("throw",function(c){throw c}),o("return"),n[Symbol.iterator]=function(){return this},n;function o(c,u){n[c]=r[c]?function(f){return(i=!i)?{value:ct(r[c](f)),done:!1}:u?u(f):f}:u}}function Zr(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r[Symbol.asyncIterator],i;return n?n.call(r):(r=typeof Ay=="function"?Ay(r):r[Symbol.iterator](),i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i);function o(u){i[u]=r[u]&&function(f){return new Promise(function(p,m){f=r[u](f),c(p,m,f.done,f.value)})}}function c(u,f,p,m){Promise.resolve(m).then(function(g){u({value:g,done:p})},f)}}var Ed={exports:{}},cl,Hj=new Uint8Array(16);function o0(){if(!cl&&(cl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!cl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return cl(Hj)}const qj=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Vl(r){return typeof r=="string"&&qj.test(r)}var Wt=[];for(var kd=0;kd<256;++kd)Wt.push((kd+256).toString(16).substr(1));function Gl(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=(Wt[r[n+0]]+Wt[r[n+1]]+Wt[r[n+2]]+Wt[r[n+3]]+"-"+Wt[r[n+4]]+Wt[r[n+5]]+"-"+Wt[r[n+6]]+Wt[r[n+7]]+"-"+Wt[r[n+8]]+Wt[r[n+9]]+"-"+Wt[r[n+10]]+Wt[r[n+11]]+Wt[r[n+12]]+Wt[r[n+13]]+Wt[r[n+14]]+Wt[r[n+15]]).toLowerCase();if(!Vl(i))throw TypeError("Stringified UUID is invalid");return i}var Ny,_d,Ad=0,Nd=0;function $j(r,n,i){var o=n&&i||0,c=n||new Array(16);r=r||{};var u=r.node||Ny,f=r.clockseq!==void 0?r.clockseq:_d;if(u==null||f==null){var p=r.random||(r.rng||o0)();u==null&&(u=Ny=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),f==null&&(f=_d=(p[6]<<8|p[7])&16383)}var m=r.msecs!==void 0?r.msecs:Date.now(),g=r.nsecs!==void 0?r.nsecs:Nd+1,v=m-Ad+(g-Nd)/1e4;if(v<0&&r.clockseq===void 0&&(f=f+1&16383),(v<0||m>Ad)&&r.nsecs===void 0&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ad=m,Nd=g,_d=f,m+=122192928e5;var k=((m&268435455)*1e4+g)%4294967296;c[o++]=k>>>24&255,c[o++]=k>>>16&255,c[o++]=k>>>8&255,c[o++]=k&255;var z=m/4294967296*1e4&268435455;c[o++]=z>>>8&255,c[o++]=z&255,c[o++]=z>>>24&15|16,c[o++]=z>>>16&255,c[o++]=f>>>8|128,c[o++]=f&255;for(var W=0;W<6;++W)c[o+W]=u[W];return n||Gl(c)}function a0(r){if(!Vl(r))throw TypeError("Invalid UUID");var n,i=new Uint8Array(16);return i[0]=(n=parseInt(r.slice(0,8),16))>>>24,i[1]=n>>>16&255,i[2]=n>>>8&255,i[3]=n&255,i[4]=(n=parseInt(r.slice(9,13),16))>>>8,i[5]=n&255,i[6]=(n=parseInt(r.slice(14,18),16))>>>8,i[7]=n&255,i[8]=(n=parseInt(r.slice(19,23),16))>>>8,i[9]=n&255,i[10]=(n=parseInt(r.slice(24,36),16))/1099511627776&255,i[11]=n/4294967296&255,i[12]=n>>>24&255,i[13]=n>>>16&255,i[14]=n>>>8&255,i[15]=n&255,i}function Vj(r){r=unescape(encodeURIComponent(r));for(var n=[],i=0;i<r.length;++i)n.push(r.charCodeAt(i));return n}var Gj="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Fj="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function l0(r,n,i){function o(c,u,f,p){if(typeof c=="string"&&(c=Vj(c)),typeof u=="string"&&(u=a0(u)),u.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var m=new Uint8Array(16+c.length);if(m.set(u),m.set(c,u.length),m=i(m),m[6]=m[6]&15|n,m[8]=m[8]&63|128,f){p=p||0;for(var g=0;g<16;++g)f[p+g]=m[g];return f}return Gl(m)}try{o.name=r}catch{}return o.DNS=Gj,o.URL=Fj,o}function Yj(r){if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=new Uint8Array(n.length);for(var i=0;i<n.length;++i)r[i]=n.charCodeAt(i)}return Wj(Xj(Jj(r),r.length*8))}function Wj(r){for(var n=[],i=r.length*32,o="0123456789abcdef",c=0;c<i;c+=8){var u=r[c>>5]>>>c%32&255,f=parseInt(o.charAt(u>>>4&15)+o.charAt(u&15),16);n.push(f)}return n}function c0(r){return(r+64>>>9<<4)+14+1}function Xj(r,n){r[n>>5]|=128<<n%32,r[c0(n)-1]=n;for(var i=1732584193,o=-271733879,c=-1732584194,u=271733878,f=0;f<r.length;f+=16){var p=i,m=o,g=c,v=u;i=Qt(i,o,c,u,r[f],7,-680876936),u=Qt(u,i,o,c,r[f+1],12,-389564586),c=Qt(c,u,i,o,r[f+2],17,606105819),o=Qt(o,c,u,i,r[f+3],22,-1044525330),i=Qt(i,o,c,u,r[f+4],7,-176418897),u=Qt(u,i,o,c,r[f+5],12,1200080426),c=Qt(c,u,i,o,r[f+6],17,-1473231341),o=Qt(o,c,u,i,r[f+7],22,-45705983),i=Qt(i,o,c,u,r[f+8],7,1770035416),u=Qt(u,i,o,c,r[f+9],12,-1958414417),c=Qt(c,u,i,o,r[f+10],17,-42063),o=Qt(o,c,u,i,r[f+11],22,-1990404162),i=Qt(i,o,c,u,r[f+12],7,1804603682),u=Qt(u,i,o,c,r[f+13],12,-40341101),c=Qt(c,u,i,o,r[f+14],17,-1502002290),o=Qt(o,c,u,i,r[f+15],22,1236535329),i=Zt(i,o,c,u,r[f+1],5,-165796510),u=Zt(u,i,o,c,r[f+6],9,-1069501632),c=Zt(c,u,i,o,r[f+11],14,643717713),o=Zt(o,c,u,i,r[f],20,-373897302),i=Zt(i,o,c,u,r[f+5],5,-701558691),u=Zt(u,i,o,c,r[f+10],9,38016083),c=Zt(c,u,i,o,r[f+15],14,-660478335),o=Zt(o,c,u,i,r[f+4],20,-405537848),i=Zt(i,o,c,u,r[f+9],5,568446438),u=Zt(u,i,o,c,r[f+14],9,-1019803690),c=Zt(c,u,i,o,r[f+3],14,-187363961),o=Zt(o,c,u,i,r[f+8],20,1163531501),i=Zt(i,o,c,u,r[f+13],5,-1444681467),u=Zt(u,i,o,c,r[f+2],9,-51403784),c=Zt(c,u,i,o,r[f+7],14,1735328473),o=Zt(o,c,u,i,r[f+12],20,-1926607734),i=en(i,o,c,u,r[f+5],4,-378558),u=en(u,i,o,c,r[f+8],11,-2022574463),c=en(c,u,i,o,r[f+11],16,1839030562),o=en(o,c,u,i,r[f+14],23,-35309556),i=en(i,o,c,u,r[f+1],4,-1530992060),u=en(u,i,o,c,r[f+4],11,1272893353),c=en(c,u,i,o,r[f+7],16,-155497632),o=en(o,c,u,i,r[f+10],23,-1094730640),i=en(i,o,c,u,r[f+13],4,681279174),u=en(u,i,o,c,r[f],11,-358537222),c=en(c,u,i,o,r[f+3],16,-722521979),o=en(o,c,u,i,r[f+6],23,76029189),i=en(i,o,c,u,r[f+9],4,-640364487),u=en(u,i,o,c,r[f+12],11,-421815835),c=en(c,u,i,o,r[f+15],16,530742520),o=en(o,c,u,i,r[f+2],23,-995338651),i=tn(i,o,c,u,r[f],6,-198630844),u=tn(u,i,o,c,r[f+7],10,1126891415),c=tn(c,u,i,o,r[f+14],15,-1416354905),o=tn(o,c,u,i,r[f+5],21,-57434055),i=tn(i,o,c,u,r[f+12],6,1700485571),u=tn(u,i,o,c,r[f+3],10,-1894986606),c=tn(c,u,i,o,r[f+10],15,-1051523),o=tn(o,c,u,i,r[f+1],21,-2054922799),i=tn(i,o,c,u,r[f+8],6,1873313359),u=tn(u,i,o,c,r[f+15],10,-30611744),c=tn(c,u,i,o,r[f+6],15,-1560198380),o=tn(o,c,u,i,r[f+13],21,1309151649),i=tn(i,o,c,u,r[f+4],6,-145523070),u=tn(u,i,o,c,r[f+11],10,-1120210379),c=tn(c,u,i,o,r[f+2],15,718787259),o=tn(o,c,u,i,r[f+9],21,-343485551),i=ei(i,p),o=ei(o,m),c=ei(c,g),u=ei(u,v)}return[i,o,c,u]}function Jj(r){if(r.length===0)return[];for(var n=r.length*8,i=new Uint32Array(c0(n)),o=0;o<n;o+=8)i[o>>5]|=(r[o/8]&255)<<o%32;return i}function ei(r,n){var i=(r&65535)+(n&65535),o=(r>>16)+(n>>16)+(i>>16);return o<<16|i&65535}function Kj(r,n){return r<<n|r>>>32-n}function Fl(r,n,i,o,c,u){return ei(Kj(ei(ei(n,r),ei(o,u)),c),i)}function Qt(r,n,i,o,c,u,f){return Fl(n&i|~n&o,r,n,c,u,f)}function Zt(r,n,i,o,c,u,f){return Fl(n&o|i&~o,r,n,c,u,f)}function en(r,n,i,o,c,u,f){return Fl(n^i^o,r,n,c,u,f)}function tn(r,n,i,o,c,u,f){return Fl(i^(n|~o),r,n,c,u,f)}var Qj=l0("v3",48,Yj);function Zj(r,n,i){r=r||{};var o=r.random||(r.rng||o0)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,n){i=i||0;for(var c=0;c<16;++c)n[i+c]=o[c];return n}return Gl(o)}function eE(r,n,i,o){switch(r){case 0:return n&i^~n&o;case 1:return n^i^o;case 2:return n&i^n&o^i&o;case 3:return n^i^o}}function Od(r,n){return r<<n|r>>>32-n}function tE(r){var n=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var o=unescape(encodeURIComponent(r));r=[];for(var c=0;c<o.length;++c)r.push(o.charCodeAt(c))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var u=r.length/4+2,f=Math.ceil(u/16),p=new Array(f),m=0;m<f;++m){for(var g=new Uint32Array(16),v=0;v<16;++v)g[v]=r[m*64+v*4]<<24|r[m*64+v*4+1]<<16|r[m*64+v*4+2]<<8|r[m*64+v*4+3];p[m]=g}p[f-1][14]=(r.length-1)*8/Math.pow(2,32),p[f-1][14]=Math.floor(p[f-1][14]),p[f-1][15]=(r.length-1)*8&4294967295;for(var k=0;k<f;++k){for(var z=new Uint32Array(80),W=0;W<16;++W)z[W]=p[k][W];for(var U=16;U<80;++U)z[U]=Od(z[U-3]^z[U-8]^z[U-14]^z[U-16],1);for(var B=i[0],D=i[1],le=i[2],se=i[3],fe=i[4],oe=0;oe<80;++oe){var te=Math.floor(oe/20),ce=Od(B,5)+eE(te,D,le,se)+fe+n[te]+z[oe]>>>0;fe=se,se=le,le=Od(D,30)>>>0,D=B,B=ce}i[0]=i[0]+B>>>0,i[1]=i[1]+D>>>0,i[2]=i[2]+le>>>0,i[3]=i[3]+se>>>0,i[4]=i[4]+fe>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,i[0]&255,i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,i[1]&255,i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,i[2]&255,i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,i[3]&255,i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,i[4]&255]}var nE=l0("v5",80,tE);const rE="00000000-0000-0000-0000-000000000000";function iE(r){if(!Vl(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const sE=Object.freeze(Object.defineProperty({__proto__:null,NIL:rE,parse:a0,stringify:Gl,v1:$j,v3:Qj,v4:Zj,v5:nE,validate:Vl,version:iE},Symbol.toStringTag,{value:"Module"})),oE=Ml(sE);function u0(r,n){return r=Math.ceil(r),n=Math.floor(n),Math.floor(Math.random()*(n-r+1))+r}function d0(r,n){const i=n.retryDelayInMs*Math.pow(2,r),o=Math.min(n.maxRetryDelayInMs,i);return{retryAfterInMs:o/2+u0(0,o/2)}}function Cf(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&!(r instanceof RegExp)&&!(r instanceof Date)}function Tf(r){if(Cf(r)){const n=typeof r.name=="string",i=typeof r.message=="string";return n&&i}return!1}function Yl(r,n){switch(n){case"utf-8":return lE(r);case"base64":return f0(r);case"base64url":return aE(r);case"hex":return cE(r)}}function yn(r,n){switch(n){case"utf-8":return uE(r);case"base64":return h0(r);case"base64url":return dE(r);case"hex":return fE(r)}}function f0(r){return btoa([...r].map(n=>String.fromCharCode(n)).join(""))}function aE(r){return f0(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function lE(r){return new TextDecoder().decode(r)}function cE(r){return[...r].map(n=>n.toString(16).padStart(2,"0")).join("")}function uE(r){return new TextEncoder().encode(r)}function h0(r){return new Uint8Array([...atob(r)].map(n=>n.charCodeAt(0)))}function dE(r){const n=r.replace(/-/g,"+").replace(/_/g,"/");return h0(n)}const Oy=new Set("0123456789abcdefABCDEF");function fE(r){const n=new Uint8Array(r.length/2);for(let i=0;i<r.length/2;++i){const o=r[2*i],c=r[2*i+1];if(!Oy.has(o)||!Oy.has(c))return n.slice(0,i);n[i]=parseInt(`${o}${c}`,16)}return n}let ul;function p0(){if(ul)return ul;if(!self.crypto||!self.crypto.subtle)throw new Error("Your browser environment does not support cryptography functions.");return ul=self.crypto.subtle,ul}async function hE(r,n,i){const o=p0(),c=yn(r,"base64"),u=yn(n,"utf-8"),f=await o.importKey("raw",c,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),p=await o.sign({name:"HMAC",hash:{name:"SHA-256"}},f,u);return Yl(new Uint8Array(p),i)}async function pE(r,n){const i=yn(r,"utf-8"),o=await p0().digest({name:"SHA-256"},i);return Yl(new Uint8Array(o),n)}function mE(){let r="";for(let n=0;n<32;n++){const i=Math.floor(Math.random()*16);n===12?r+="4":n===16?r+=i&3|8:r+=i.toString(16),(n===7||n===11||n===15||n===19)&&(r+="-")}return r}const gE=typeof globalThis?.crypto?.randomUUID=="function"?globalThis.crypto.randomUUID.bind(globalThis.crypto):mE;function Rf(){return gE()}const yE=typeof window<"u"&&typeof window.document<"u",vE=typeof self=="object"&&typeof self?.importScripts=="function"&&(self.constructor?.name==="DedicatedWorkerGlobalScope"||self.constructor?.name==="ServiceWorkerGlobalScope"||self.constructor?.name==="SharedWorkerGlobalScope"),m0=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u",g0=typeof Bun<"u"&&typeof Bun.version<"u",ri=typeof globalThis.process<"u"&&!!globalThis.process.version&&!!globalThis.process.versions?.node,bE=ri&&!g0&&!m0,SE=typeof navigator<"u"&&navigator?.product==="ReactNative",Md="REDACTED",xE=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],wE=["api-version"];class jf{allowedHeaderNames;allowedQueryParameters;constructor({additionalAllowedHeaderNames:n=[],additionalAllowedQueryParameters:i=[]}={}){n=xE.concat(n),i=wE.concat(i),this.allowedHeaderNames=new Set(n.map(o=>o.toLowerCase())),this.allowedQueryParameters=new Set(i.map(o=>o.toLowerCase()))}sanitize(n){const i=new Set;return JSON.stringify(n,(o,c)=>{if(c instanceof Error)return{...c,name:c.name,message:c.message};if(o==="headers")return this.sanitizeHeaders(c);if(o==="url")return this.sanitizeUrl(c);if(o==="query")return this.sanitizeQuery(c);if(o==="body")return;if(o==="response")return;if(o==="operationSpec")return;if(Array.isArray(c)||Cf(c)){if(i.has(c))return"[Circular]";i.add(c)}return c},2)}sanitizeUrl(n){if(typeof n!="string"||n===null||n==="")return n;const i=new URL(n);if(!i.search)return n;for(const[o]of i.searchParams)this.allowedQueryParameters.has(o.toLowerCase())||i.searchParams.set(o,Md);return i.toString()}sanitizeHeaders(n){const i={};for(const o of Object.keys(n))this.allowedHeaderNames.has(o.toLowerCase())?i[o]=n[o]:i[o]=Md;return i}sanitizeQuery(n){if(typeof n!="object"||n===null)return n;const i={};for(const o of Object.keys(n))this.allowedQueryParameters.has(o.toLowerCase())?i[o]=n[o]:i[o]=Md;return i}}async function CE(r,n){const i=new AbortController;function o(){i.abort()}n?.abortSignal?.addEventListener("abort",o);try{return await Promise.race(r.map(c=>c({abortSignal:i.signal})))}finally{i.abort(),n?.abortSignal?.removeEventListener("abort",o)}}let TE=class extends Error{constructor(n){super(n),this.name="AbortError"}};function y0(r,n){const{cleanupBeforeAbort:i,abortSignal:o,abortErrorMsg:c}=n??{};return new Promise((u,f)=>{function p(){f(new TE(c??"The operation was aborted."))}function m(){o?.removeEventListener("abort",g)}function g(){i?.(),m(),p()}if(o?.aborted)return p();try{r(v=>{m(),u(v)},v=>{m(),f(v)})}catch(v){f(v)}o?.addEventListener("abort",g)})}const RE="The delay was aborted.";function v0(r,n){let i;const{abortSignal:o,abortErrorMsg:c}=n??{};return y0(u=>{i=setTimeout(u,r)},{cleanupBeforeAbort:()=>clearTimeout(i),abortSignal:o,abortErrorMsg:c??RE})}function Vo(r){if(Tf(r))return r.message;{let n;try{typeof r=="object"&&r?n=JSON.stringify(r):n=String(r)}catch{n="[unable to stringify input]"}return`Unknown error ${n}`}}function Ef(r){return typeof r<"u"&&r!==null}function jE(r,n){if(!Ef(r)||typeof r!="object")return!1;for(const i of n)if(!b0(r,i))return!1;return!0}function b0(r,n){return Ef(r)&&typeof r=="object"&&n in r}function EE(r,n){return d0(r,n)}function kE(r,n){return pE(r,n)}function _E(r,n,i){return hE(r,n,i)}function AE(r,n){return u0(r,n)}function S0(r){return Tf(r)}function NE(r){return Cf(r)}function x0(){return Rf()}const OE=yE,ME=g0,PE=m0,UE=ri,_l=ri,DE=bE,IE=SE,zE=vE;function LE(r,n){return Yl(r,n)}function BE(r,n){return yn(r,n)}const HE=Object.freeze(Object.defineProperty({__proto__:null,calculateRetryDelay:EE,cancelablePromiseRace:CE,computeSha256Hash:kE,computeSha256Hmac:_E,createAbortablePromise:y0,delay:v0,getErrorMessage:Vo,getRandomIntegerInclusive:AE,isBrowser:OE,isBun:ME,isDefined:Ef,isDeno:PE,isError:S0,isNode:UE,isNodeLike:_l,isNodeRuntime:DE,isObject:NE,isObjectWithProperties:jE,isReactNative:IE,isWebWorker:zE,objectHasProperty:b0,randomUUID:x0,stringToUint8Array:BE,uint8ArrayToString:LE},Symbol.toStringTag,{value:"Module"})),qE=Ml(HE);function w0(r){let n="";for(let i=0;i<r.length;i++)n+=String.fromCharCode(r[i]);return btoa(n)}function C0(r){const n=atob(r),i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i}function $E(r){return atob(r)}const qt="$",Ss="_";function VE(r,n){return n!=="Composite"&&n!=="Dictionary"&&(typeof r=="string"||typeof r=="number"||typeof r=="boolean"||n?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||r===void 0||r===null)}const GE=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function FE(r){return GE.test(r)}const YE=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function WE(r){return YE.test(r)}function XE(r){const n={...r.headers,...r.body};return r.hasNullableType&&Object.getOwnPropertyNames(n).length===0?r.shouldWrapBody?{body:null}:null:r.shouldWrapBody?{...r.headers,body:r.body}:n}function My(r,n){const i=r.parsedHeaders;if(r.request.method==="HEAD")return{...i,body:r.parsedBody};const o=n&&n.bodyMapper,c=!!o?.nullable,u=o?.type.name;if(u==="Stream")return{...i,blobBody:r.blobBody,readableStreamBody:r.readableStreamBody};const f=u==="Composite"&&o.type.modelProperties||{},p=Object.keys(f).some(m=>f[m].serializedName==="");if(u==="Sequence"||p){const m=r.parsedBody??[];for(const g of Object.keys(f))f[g].serializedName&&(m[g]=r.parsedBody?.[g]);if(i)for(const g of Object.keys(i))m[g]=i[g];return c&&!r.parsedBody&&!i&&Object.getOwnPropertyNames(f).length===0?null:m}return XE({body:r.parsedBody,headers:i,hasNullableType:c,shouldWrapBody:VE(r.parsedBody,u)})}class JE{modelMappers;isXML;constructor(n={},i=!1){this.modelMappers=n,this.isXML=i}validateConstraints(n,i,o){const c=(u,f)=>{throw new Error(`"${o}" with value "${i}" should satisfy the constraint "${u}": ${f}.`)};if(n.constraints&&i!==void 0&&i!==null){const{ExclusiveMaximum:u,ExclusiveMinimum:f,InclusiveMaximum:p,InclusiveMinimum:m,MaxItems:g,MaxLength:v,MinItems:k,MinLength:z,MultipleOf:W,Pattern:U,UniqueItems:B}=n.constraints;if(u!==void 0&&i>=u&&c("ExclusiveMaximum",u),f!==void 0&&i<=f&&c("ExclusiveMinimum",f),p!==void 0&&i>p&&c("InclusiveMaximum",p),m!==void 0&&i<m&&c("InclusiveMinimum",m),g!==void 0&&i.length>g&&c("MaxItems",g),v!==void 0&&i.length>v&&c("MaxLength",v),k!==void 0&&i.length<k&&c("MinItems",k),z!==void 0&&i.length<z&&c("MinLength",z),W!==void 0&&i%W!==0&&c("MultipleOf",W),U){const D=typeof U=="string"?new RegExp(U):U;(typeof i!="string"||i.match(D)===null)&&c("Pattern",U)}B&&i.some((D,le,se)=>se.indexOf(D)!==le)&&c("UniqueItems",B)}}serialize(n,i,o,c={xml:{}}){const u={xml:{rootName:c.xml.rootName??"",includeRoot:c.xml.includeRoot??!1,xmlCharKey:c.xml.xmlCharKey??Ss}};let f={};const p=n.type.name;o||(o=n.serializedName),p.match(/^Sequence$/i)!==null&&(f=[]),n.isConstant&&(i=n.defaultValue);const{required:m,nullable:g}=n;if(m&&g&&i===void 0)throw new Error(`${o} cannot be undefined.`);if(m&&!g&&i==null)throw new Error(`${o} cannot be null or undefined.`);if(!m&&g===!1&&i===null)throw new Error(`${o} cannot be null.`);return i==null||p.match(/^any$/i)!==null?f=i:p.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)!==null?f=nk(p,o,i):p.match(/^Enum$/i)!==null?f=rk(o,n.type.allowedValues,i):p.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)!==null?f=ok(p,i,o):p.match(/^ByteArray$/i)!==null?f=ik(o,i):p.match(/^Base64Url$/i)!==null?f=sk(o,i):p.match(/^Sequence$/i)!==null?f=ak(this,n,i,o,!!this.isXML,u):p.match(/^Dictionary$/i)!==null?f=lk(this,n,i,o,!!this.isXML,u):p.match(/^Composite$/i)!==null&&(f=uk(this,n,i,o,!!this.isXML,u)),f}deserialize(n,i,o,c={xml:{}}){const u={xml:{rootName:c.xml.rootName??"",includeRoot:c.xml.includeRoot??!1,xmlCharKey:c.xml.xmlCharKey??Ss},ignoreUnknownProperties:c.ignoreUnknownProperties??!1};if(i==null)return this.isXML&&n.type.name==="Sequence"&&!n.xmlIsWrapped&&(i=[]),n.defaultValue!==void 0&&(i=n.defaultValue),i;let f;const p=n.type.name;if(o||(o=n.serializedName),p.match(/^Composite$/i)!==null)f=fk(this,n,i,o,u);else{if(this.isXML){const m=u.xml.xmlCharKey;i[qt]!==void 0&&i[m]!==void 0&&(i=i[m])}p.match(/^Number$/i)!==null?(f=parseFloat(i),isNaN(f)&&(f=i)):p.match(/^Boolean$/i)!==null?i==="true"?f=!0:i==="false"?f=!1:f=i:p.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)!==null?f=i:p.match(/^(Date|DateTime|DateTimeRfc1123)$/i)!==null?f=new Date(i):p.match(/^UnixTime$/i)!==null?f=tk(i):p.match(/^ByteArray$/i)!==null?f=C0(i):p.match(/^Base64Url$/i)!==null?f=ZE(i):p.match(/^Sequence$/i)!==null?f=pk(this,n,i,o,u):p.match(/^Dictionary$/i)!==null&&(f=hk(this,n,i,o,u))}return n.isConstant&&(f=n.defaultValue),f}}function kf(r={},n=!1){return new JE(r,n)}function KE(r,n){let i=r.length;for(;i-1>=0&&r[i-1]===n;)--i;return r.substr(0,i)}function QE(r){if(!r)return;if(!(r instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");const n=w0(r);return KE(n,"=").replace(/\+/g,"-").replace(/\//g,"_")}function ZE(r){if(r){if(r&&typeof r.valueOf()!="string")throw new Error("Please provide an input of type string for converting to Uint8Array");return r=r.replace(/-/g,"+").replace(/_/g,"/"),C0(r)}}function Wd(r){const n=[];let i="";if(r){const o=r.split(".");for(const c of o)c.charAt(c.length-1)==="\\"?i+=c.substr(0,c.length-1)+".":(i+=c,n.push(i),i="")}return n}function ek(r){if(r)return typeof r.valueOf()=="string"&&(r=new Date(r)),Math.floor(r.getTime()/1e3)}function tk(r){if(r)return new Date(r*1e3)}function nk(r,n,i){if(i!=null){if(r.match(/^Number$/i)!==null){if(typeof i!="number")throw new Error(`${n} with value ${i} must be of type number.`)}else if(r.match(/^String$/i)!==null){if(typeof i.valueOf()!="string")throw new Error(`${n} with value "${i}" must be of type string.`)}else if(r.match(/^Uuid$/i)!==null){if(!(typeof i.valueOf()=="string"&&WE(i)))throw new Error(`${n} with value "${i}" must be of type string and a valid uuid.`)}else if(r.match(/^Boolean$/i)!==null){if(typeof i!="boolean")throw new Error(`${n} with value ${i} must be of type boolean.`)}else if(r.match(/^Stream$/i)!==null){const o=typeof i;if(o!=="string"&&typeof i.pipe!="function"&&typeof i.tee!="function"&&!(i instanceof ArrayBuffer)&&!ArrayBuffer.isView(i)&&!((typeof Blob=="function"||typeof Blob=="object")&&i instanceof Blob)&&o!=="function")throw new Error(`${n} must be a string, Blob, ArrayBuffer, ArrayBufferView, ReadableStream, or () => ReadableStream.`)}}return i}function rk(r,n,i){if(!n)throw new Error(`Please provide a set of allowedValues to validate ${r} as an Enum Type.`);if(!n.some(c=>typeof c.valueOf()=="string"?c.toLowerCase()===i.toLowerCase():c===i))throw new Error(`${i} is not a valid value for ${r}. The valid values are: ${JSON.stringify(n)}.`);return i}function ik(r,n){if(n!=null){if(!(n instanceof Uint8Array))throw new Error(`${r} must be of type Uint8Array.`);n=w0(n)}return n}function sk(r,n){if(n!=null){if(!(n instanceof Uint8Array))throw new Error(`${r} must be of type Uint8Array.`);n=QE(n)}return n}function ok(r,n,i){if(n!=null){if(r.match(/^Date$/i)!==null){if(!(n instanceof Date||typeof n.valueOf()=="string"&&!isNaN(Date.parse(n))))throw new Error(`${i} must be an instanceof Date or a string in ISO8601 format.`);n=n instanceof Date?n.toISOString().substring(0,10):new Date(n).toISOString().substring(0,10)}else if(r.match(/^DateTime$/i)!==null){if(!(n instanceof Date||typeof n.valueOf()=="string"&&!isNaN(Date.parse(n))))throw new Error(`${i} must be an instanceof Date or a string in ISO8601 format.`);n=n instanceof Date?n.toISOString():new Date(n).toISOString()}else if(r.match(/^DateTimeRfc1123$/i)!==null){if(!(n instanceof Date||typeof n.valueOf()=="string"&&!isNaN(Date.parse(n))))throw new Error(`${i} must be an instanceof Date or a string in RFC-1123 format.`);n=n instanceof Date?n.toUTCString():new Date(n).toUTCString()}else if(r.match(/^UnixTime$/i)!==null){if(!(n instanceof Date||typeof n.valueOf()=="string"&&!isNaN(Date.parse(n))))throw new Error(`${i} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);n=ek(n)}else if(r.match(/^TimeSpan$/i)!==null&&!FE(n))throw new Error(`${i} must be a string in ISO 8601 format. Instead was "${n}".`)}return n}function ak(r,n,i,o,c,u){if(!Array.isArray(i))throw new Error(`${o} must be of type Array.`);let f=n.type.element;if(!f||typeof f!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${o}.`);f.type.name==="Composite"&&f.type.className&&(f=r.modelMappers[f.type.className]??f);const p=[];for(let m=0;m<i.length;m++){const g=r.serialize(f,i[m],o,u);if(c&&f.xmlNamespace){const v=f.xmlNamespacePrefix?`xmlns:${f.xmlNamespacePrefix}`:"xmlns";f.type.name==="Composite"?(p[m]={...g},p[m][qt]={[v]:f.xmlNamespace}):(p[m]={},p[m][u.xml.xmlCharKey]=g,p[m][qt]={[v]:f.xmlNamespace})}else p[m]=g}return p}function lk(r,n,i,o,c,u){if(typeof i!="object")throw new Error(`${o} must be of type object.`);const f=n.type.value;if(!f||typeof f!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${o}.`);const p={};for(const m of Object.keys(i)){const g=r.serialize(f,i[m],o,u);p[m]=j0(f,g,c,u)}if(c&&n.xmlNamespace){const m=n.xmlNamespacePrefix?`xmlns:${n.xmlNamespacePrefix}`:"xmlns",g=p;return g[qt]={[m]:n.xmlNamespace},g}return p}function ck(r,n,i){const o=n.type.additionalProperties;return!o&&n.type.className?T0(r,n,i)?.type.additionalProperties:o}function T0(r,n,i){const o=n.type.className;if(!o)throw new Error(`Class name for model "${i}" is not provided in the mapper "${JSON.stringify(n,void 0,2)}".`);return r.modelMappers[o]}function R0(r,n,i){let o=n.type.modelProperties;if(!o){const c=T0(r,n,i);if(!c)throw new Error(`mapper() cannot be null or undefined for model "${n.type.className}".`);if(o=c?.type.modelProperties,!o)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(c)}" of type "${n.type.className}" for object "${i}".`)}return o}function uk(r,n,i,o,c,u){if(Al(r,n)&&(n=E0(r,n,i,"clientName")),i!=null){const f={},p=R0(r,n,o);for(const g of Object.keys(p)){const v=p[g];if(v.readOnly)continue;let k,z=f;if(r.isXML)v.xmlIsWrapped?k=v.xmlName:k=v.xmlElementName||v.xmlName;else{const W=Wd(v.serializedName);k=W.pop();for(const U of W){const B=z[U];B==null&&(i[g]!==void 0&&i[g]!==null||v.defaultValue!==void 0)&&(z[U]={}),z=z[U]}}if(z!=null){if(c&&n.xmlNamespace){const le=n.xmlNamespacePrefix?`xmlns:${n.xmlNamespacePrefix}`:"xmlns";z[qt]={...z[qt],[le]:n.xmlNamespace}}const W=v.serializedName!==""?o+"."+v.serializedName:o;let U=i[g];const B=Al(r,n);B&&B.clientName===g&&U==null&&(U=n.serializedName);const D=r.serialize(v,U,W,u);if(D!==void 0&&k!==void 0&&k!==null){const le=j0(v,D,c,u);c&&v.xmlIsAttribute?(z[qt]=z[qt]||{},z[qt][k]=D):c&&v.xmlIsWrapped?z[k]={[v.xmlElementName]:le}:z[k]=le}}}const m=ck(r,n,o);if(m){const g=Object.keys(p);for(const v in i)g.every(z=>z!==v)&&(f[v]=r.serialize(m,i[v],o+'["'+v+'"]',u))}return f}return i}function j0(r,n,i,o){if(!i||!r.xmlNamespace)return n;const u={[r.xmlNamespacePrefix?`xmlns:${r.xmlNamespacePrefix}`:"xmlns"]:r.xmlNamespace};if(["Composite"].includes(r.type.name)){if(n[qt])return n;{const p={...n};return p[qt]=u,p}}const f={};return f[o.xml.xmlCharKey]=n,f[qt]=u,f}function dk(r,n){return[qt,n.xml.xmlCharKey].includes(r)}function fk(r,n,i,o,c){const u=c.xml.xmlCharKey??Ss;Al(r,n)&&(n=E0(r,n,i,"serializedName"));const f=R0(r,n,o);let p={};const m=[];for(const v of Object.keys(f)){const k=f[v],z=Wd(f[v].serializedName);m.push(z[0]);const{serializedName:W,xmlName:U,xmlElementName:B}=k;let D=o;W!==""&&W!==void 0&&(D=o+"."+W);const le=k.headerCollectionPrefix;if(le){const se={};for(const fe of Object.keys(i))fe.startsWith(le)&&(se[fe.substring(le.length)]=r.deserialize(k.type.value,i[fe],D,c)),m.push(fe);p[v]=se}else if(r.isXML)if(k.xmlIsAttribute&&i[qt])p[v]=r.deserialize(k,i[qt][U],D,c);else if(k.xmlIsMsText)i[u]!==void 0?p[v]=i[u]:typeof i=="string"&&(p[v]=i);else{const se=B||U||W;if(k.xmlIsWrapped){const oe=i[U]?.[B]??[];p[v]=r.deserialize(k,oe,D,c),m.push(U)}else{const fe=i[se];p[v]=r.deserialize(k,fe,D,c),m.push(se)}}else{let se,fe=i,oe=0;for(const ne of z){if(!fe)break;oe++,fe=fe[ne]}fe===null&&oe<z.length&&(fe=void 0),se=fe;const te=n.type.polymorphicDiscriminator;te&&v===te.clientName&&se==null&&(se=n.serializedName);let ce;if(Array.isArray(i[v])&&f[v].serializedName===""){se=i[v];const ne=r.deserialize(k,se,D,c);for(const[Te,Me]of Object.entries(p))Object.prototype.hasOwnProperty.call(ne,Te)||(ne[Te]=Me);p=ne}else(se!==void 0||k.defaultValue!==void 0)&&(ce=r.deserialize(k,se,D,c),p[v]=ce)}}const g=n.type.additionalProperties;if(g){const v=k=>{for(const z in f)if(Wd(f[z].serializedName)[0]===k)return!1;return!0};for(const k in i)v(k)&&(p[k]=r.deserialize(g,i[k],o+'["'+k+'"]',c))}else if(i&&!c.ignoreUnknownProperties)for(const v of Object.keys(i))p[v]===void 0&&!m.includes(v)&&!dk(v,c)&&(p[v]=i[v]);return p}function hk(r,n,i,o,c){const u=n.type.value;if(!u||typeof u!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${o}`);if(i){const f={};for(const p of Object.keys(i))f[p]=r.deserialize(u,i[p],o,c);return f}return i}function pk(r,n,i,o,c){let u=n.type.element;if(!u||typeof u!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${o}`);if(i){Array.isArray(i)||(i=[i]),u.type.name==="Composite"&&u.type.className&&(u=r.modelMappers[u.type.className]??u);const f=[];for(let p=0;p<i.length;p++)f[p]=r.deserialize(u,i[p],`${o}[${p}]`,c);return f}return i}function mk(r,n,i){const o=[i];for(;o.length;){const c=o.shift(),u=n===c?n:c+"."+n;if(Object.prototype.hasOwnProperty.call(r,u))return r[u];for(const[f,p]of Object.entries(r))f.startsWith(c+".")&&p.type.uberParent===c&&p.type.className&&o.push(p.type.className)}}function E0(r,n,i,o){const c=Al(r,n);if(c){let u=c[o];if(u){o==="serializedName"&&(u=u.replace(/\\/gi,""));const f=i[u],p=n.type.uberParent??n.type.className;if(typeof f=="string"&&p){const m=mk(r.modelMappers.discriminators,f,p);m&&(n=m)}}}return n}function Al(r,n){return n.type.polymorphicDiscriminator||Py(r,n.type.uberParent)||Py(r,n.type.className)}function Py(r,n){return n&&r.modelMappers[n]&&r.modelMappers[n].type.polymorphicDiscriminator}const ji={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};class _f extends Error{constructor(n){super(n),this.name="AbortError"}}function gk(...r){if(r.length>0){const n=String(r[0]);n.includes(":error")?console.error(...r):n.includes(":warning")?console.warn(...r):n.includes(":info")?console.info(...r):n.includes(":verbose")?console.debug(...r):console.debug(...r)}}var Uy={};const Dy=typeof process<"u"&&Uy&&Uy.DEBUG||void 0;let k0,Xd=[],Jd=[];const Nl=[];Dy&&Af(Dy);const gs=Object.assign(r=>_0(r),{enable:Af,enabled:Nf,disable:yk,log:gk});function Af(r){k0=r,Xd=[],Jd=[];const n=r.split(",").map(i=>i.trim());for(const i of n)i.startsWith("-")?Jd.push(i.substring(1)):Xd.push(i);for(const i of Nl)i.enabled=Nf(i.namespace)}function Nf(r){if(r.endsWith("*"))return!0;for(const n of Jd)if(Iy(r,n))return!1;for(const n of Xd)if(Iy(r,n))return!0;return!1}function Iy(r,n){if(n.indexOf("*")===-1)return r===n;let i=n;if(n.indexOf("**")!==-1){const z=[];let W="";for(const U of n)U==="*"&&W==="*"||(W=U,z.push(U));i=z.join("")}let o=0,c=0;const u=i.length,f=r.length;let p=-1,m=-1;for(;o<f&&c<u;)if(i[c]==="*"){if(p=c,c++,c===u)return!0;for(;r[o]!==i[c];)if(o++,o===f)return!1;m=o,o++,c++;continue}else if(i[c]===r[o])c++,o++;else if(p>=0){if(c=p+1,o=m+1,o===f)return!1;for(;r[o]!==i[c];)if(o++,o===f)return!1;m=o,o++,c++;continue}else return!1;const g=o===r.length,v=c===i.length,k=c===i.length-1&&i[c]==="*";return g&&(v||k)}function yk(){const r=k0||"";return Af(""),r}function _0(r){const n=Object.assign(i,{enabled:Nf(r),destroy:vk,log:gs.log,namespace:r,extend:bk});function i(...o){n.enabled&&(o.length>0&&(o[0]=`${r} ${o[0]}`),n.log(...o))}return Nl.push(n),n}function vk(){const r=Nl.indexOf(this);return r>=0?(Nl.splice(r,1),!0):!1}function bk(r){const n=_0(`${this.namespace}:${r}`);return n.log=this.log,n}var zy={};const Kd=["verbose","info","warning","error"],Ly={verbose:400,info:300,warning:200,error:100};function By(r,n){n.log=(...i)=>{r.log(...i)}}function Hy(r){return Kd.includes(r)}function A0(r){const n=new Set,i=typeof process<"u"&&zy&&zy[r.logLevelEnvVarName]||void 0;let o;const c=gs(r.namespace);c.log=(...v)=>{gs.log(...v)};function u(v){if(v&&!Hy(v))throw new Error(`Unknown log level '${v}'. Acceptable values: ${Kd.join(",")}`);o=v;const k=[];for(const z of n)f(z)&&k.push(z.namespace);gs.enable(k.join(","))}i&&(Hy(i)?u(i):console.error(`${r.logLevelEnvVarName} set to unknown log level '${i}'; logging is not enabled. Acceptable values: ${Kd.join(", ")}.`));function f(v){return!!(o&&Ly[v.level]<=Ly[o])}function p(v,k){const z=Object.assign(v.extend(k),{level:k});if(By(v,z),f(z)){const W=gs.disable();gs.enable(W+","+z.namespace)}return n.add(z),z}function m(){return o}function g(v){const k=c.extend(v);return By(c,k),{error:p(k,"error"),warning:p(k,"warning"),info:p(k,"info"),verbose:p(k,"verbose")}}return{setLogLevel:u,getLogLevel:m,createClientLogger:g,logger:c}}const Sk=A0({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"});function N0(r){return Sk.createClientLogger(r)}function dl(r){return r.toLowerCase()}function*xk(r){for(const n of r.values())yield[n.name,n.value]}class wk{_headersMap;constructor(n){if(this._headersMap=new Map,n)for(const i of Object.keys(n))this.set(i,n[i])}set(n,i){this._headersMap.set(dl(n),{name:n,value:String(i).trim()})}get(n){return this._headersMap.get(dl(n))?.value}has(n){return this._headersMap.has(dl(n))}delete(n){this._headersMap.delete(dl(n))}toJSON(n={}){const i={};if(n.preserveCase)for(const o of this._headersMap.values())i[o.name]=o.value;else for(const[o,c]of this._headersMap)i[o]=c.value;return i}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return xk(this._headersMap)}}function _i(r){return new wk(r)}class Ck{url;method;headers;timeout;withCredentials;body;multipartBody;formData;streamResponseStatusCodes;enableBrowserStreams;proxySettings;disableKeepAlive;abortSignal;requestId;allowInsecureConnection;onUploadProgress;onDownloadProgress;requestOverrides;authSchemes;constructor(n){this.url=n.url,this.body=n.body,this.headers=n.headers??_i(),this.method=n.method??"GET",this.timeout=n.timeout??0,this.multipartBody=n.multipartBody,this.formData=n.formData,this.disableKeepAlive=n.disableKeepAlive??!1,this.proxySettings=n.proxySettings,this.streamResponseStatusCodes=n.streamResponseStatusCodes,this.withCredentials=n.withCredentials??!1,this.abortSignal=n.abortSignal,this.onUploadProgress=n.onUploadProgress,this.onDownloadProgress=n.onDownloadProgress,this.requestId=n.requestId||Rf(),this.allowInsecureConnection=n.allowInsecureConnection??!1,this.enableBrowserStreams=n.enableBrowserStreams??!1,this.requestOverrides=n.requestOverrides,this.authSchemes=n.authSchemes}}function O0(r){return new Ck(r)}const qy=new Set(["Deserialize","Serialize","Retry","Sign"]);class Ol{_policies=[];_orderedPolicies;constructor(n){this._policies=n?.slice(0)??[],this._orderedPolicies=void 0}addPolicy(n,i={}){if(i.phase&&i.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(i.phase&&!qy.has(i.phase))throw new Error(`Invalid phase name: ${i.phase}`);if(i.afterPhase&&!qy.has(i.afterPhase))throw new Error(`Invalid afterPhase name: ${i.afterPhase}`);this._policies.push({policy:n,options:i}),this._orderedPolicies=void 0}removePolicy(n){const i=[];return this._policies=this._policies.filter(o=>n.name&&o.policy.name===n.name||n.phase&&o.options.phase===n.phase?(i.push(o.policy),!1):!0),this._orderedPolicies=void 0,i}sendRequest(n,i){return this.getOrderedPolicies().reduceRight((u,f)=>p=>f.sendRequest(p,u),u=>n.sendRequest(u))(i)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new Ol(this._policies)}static create(){return new Ol}orderPolicies(){const n=[],i=new Map;function o(U){return{name:U,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}const c=o("Serialize"),u=o("None"),f=o("Deserialize"),p=o("Retry"),m=o("Sign"),g=[c,u,f,p,m];function v(U){return U==="Retry"?p:U==="Serialize"?c:U==="Deserialize"?f:U==="Sign"?m:u}for(const U of this._policies){const B=U.policy,D=U.options,le=B.name;if(i.has(le))throw new Error("Duplicate policy names not allowed in pipeline");const se={policy:B,dependsOn:new Set,dependants:new Set};D.afterPhase&&(se.afterPhase=v(D.afterPhase),se.afterPhase.hasAfterPolicies=!0),i.set(le,se),v(D.phase).policies.add(se)}for(const U of this._policies){const{policy:B,options:D}=U,le=B.name,se=i.get(le);if(!se)throw new Error(`Missing node for policy ${le}`);if(D.afterPolicies)for(const fe of D.afterPolicies){const oe=i.get(fe);oe&&(se.dependsOn.add(oe),oe.dependants.add(se))}if(D.beforePolicies)for(const fe of D.beforePolicies){const oe=i.get(fe);oe&&(oe.dependsOn.add(se),se.dependants.add(oe))}}function k(U){U.hasRun=!0;for(const B of U.policies)if(!(B.afterPhase&&(!B.afterPhase.hasRun||B.afterPhase.policies.size))&&B.dependsOn.size===0){n.push(B.policy);for(const D of B.dependants)D.dependsOn.delete(B);i.delete(B.policy.name),U.policies.delete(B)}}function z(){for(const U of g){if(k(U),U.policies.size>0&&U!==u){u.hasRun||k(u);return}U.hasAfterPolicies&&k(u)}}let W=0;for(;i.size>0;){W++;const U=n.length;if(z(),n.length<=U&&W>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return n}}function M0(){return Ol.create()}const Tk=Symbol(),Rk=new jf;let Ai=class P0 extends Error{static REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";static PARSE_ERROR="PARSE_ERROR";code;statusCode;request;response;details;constructor(n,i={}){super(n),this.name="RestError",this.code=i.code,this.statusCode=i.statusCode,Object.defineProperty(this,"request",{value:i.request,enumerable:!1}),Object.defineProperty(this,"response",{value:i.response,enumerable:!1});const o=this.request?.agent?{maxFreeSockets:this.request.agent.maxFreeSockets,maxSockets:this.request.agent.maxSockets}:void 0;Object.defineProperty(this,Tk,{value:()=>`RestError: ${this.message} 
 ${Rk.sanitize({...this,request:{...this.request,agent:o},response:this.response})}`,enumerable:!1}),Object.setPrototypeOf(this,P0.prototype)}};function U0(r){return r instanceof Ai?!0:Tf(r)&&r.name==="RestError"}function D0(r){return!!(r&&typeof r.pipe=="function")}function Wl(r){return!!(r&&typeof r.getReader=="function"&&typeof r.tee=="function")}function I0(r){return r!==void 0&&(r instanceof Uint8Array||z0(r)||typeof r=="function"||r instanceof Blob)}function z0(r){return D0(r)||Wl(r)}function jk(r){return typeof r.stream=="function"}function Ek(r){if(r.buffer instanceof ArrayBuffer&&r.byteOffset===0&&r.byteLength===r.buffer.byteLength)return r.buffer;const n=new ArrayBuffer(r.byteLength),i=new Uint8Array(n),o=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);return i.set(o),i.buffer}function kk(r){return(typeof Blob=="function"||typeof Blob=="object")&&r instanceof Blob}class _k{async sendRequest(n){if(new URL(n.url).protocol!=="https:"&&!n.allowInsecureConnection)throw new Error(`Cannot connect to ${n.url} while allowInsecureConnection is false.`);if(n.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");try{return await Ak(n)}catch(c){throw Mk(c,n)}}}async function Ak(r){const{abortController:n,abortControllerCleanup:i}=Ok(r);try{const o=Pk(r.headers),{streaming:c,body:u}=Dk(r),f={body:u,method:r.method,headers:o,signal:n.signal,..."credentials"in Request.prototype?{credentials:r.withCredentials?"include":"same-origin"}:{},..."cache"in Request.prototype?{cache:"no-store"}:{}};c&&(f.duplex="half");const p=await fetch(r.url,{...f,...r.requestOverrides});return kk(r.body)&&r.onUploadProgress&&r.onUploadProgress({loadedBytes:r.body.size}),Nk(p,r,i)}catch(o){throw i?.(),o}}async function Nk(r,n,i){const o=Uk(r),c={request:n,headers:o,status:r.status},u=Wl(r.body)?L0(r.body,{onProgress:n.onDownloadProgress,onEnd:i}):r.body;if(n.streamResponseStatusCodes?.has(Number.POSITIVE_INFINITY)||n.streamResponseStatusCodes?.has(c.status))if(n.enableBrowserStreams)c.browserStreamBody=u??void 0;else{const f=new Response(u);c.blobBody=f.blob(),i?.()}else{const f=new Response(u);c.bodyAsText=await f.text(),i?.()}return c}function Ok(r){const n=new AbortController;let i,o;if(r.abortSignal){if(r.abortSignal.aborted)throw new _f("The operation was aborted. Request has already been canceled.");o=c=>{c.type==="abort"&&n.abort()},r.abortSignal.addEventListener("abort",o),i=()=>{o&&r.abortSignal?.removeEventListener("abort",o)}}return r.timeout>0&&setTimeout(()=>{n.abort()},r.timeout),{abortController:n,abortControllerCleanup:i}}function Mk(r,n){return r&&r?.name==="AbortError"?r:new Ai(`Error sending request: ${r.message}`,{code:r?.code??Ai.REQUEST_SEND_ERROR,request:n})}function Pk(r){const n=new Headers;for(const[i,o]of r)n.append(i,o);return n}function Uk(r){const n=_i();for(const[i,o]of r.headers)n.set(i,o);return n}function Dk(r){const n=typeof r.body=="function"?r.body():r.body;if(D0(n))throw new Error("Node streams are not supported in browser environment.");return Wl(n)?{streaming:!0,body:L0(n,{onProgress:r.onUploadProgress})}:typeof n=="object"&&n&&"buffer"in n?{streaming:!1,body:Ek(n)}:n===void 0?{streaming:!1}:{streaming:!1,body:n}}function L0(r,n={}){let i=0;const{onProgress:o,onEnd:c}=n;if(zk(r))return r.pipeThrough(new TransformStream({transform(u,f){if(u===null){f.terminate();return}f.enqueue(u),i+=u.length,o&&o({loadedBytes:i})},flush(){c?.()}}));{const u=r.getReader();return new ReadableStream({async pull(f){const{done:p,value:m}=await u.read();if(p||!m){c?.(),f.close(),u.releaseLock();return}i+=m?.length??0,f.enqueue(m),o&&o({loadedBytes:i})},cancel(f){return c?.(),u.cancel(f)}})}}function Ik(){return new _k}function zk(r){return r.pipeThrough!==void 0&&self.TransformStream!==void 0}function B0(){return Ik()}const H0=N0("ts-http-runtime"),q0="logPolicy";function $0(r={}){const n=r.logger??H0.info,i=new jf({additionalAllowedHeaderNames:r.additionalAllowedHeaderNames,additionalAllowedQueryParameters:r.additionalAllowedQueryParameters});return{name:q0,async sendRequest(o,c){if(!n.enabled)return c(o);n(`Request: ${i.sanitize(o)}`);const u=await c(o);return n(`Response status code: ${u.status}`),n(`Headers: ${i.sanitize(u.headers)}`),u}}}const V0="redirectPolicy",$y=["GET","HEAD"];function G0(r={}){const{maxRetries:n=20}=r;return{name:V0,async sendRequest(i,o){const c=await o(i);return F0(o,c,n)}}}async function F0(r,n,i,o=0){const{request:c,status:u,headers:f}=n,p=f.get("location");if(p&&(u===300||u===301&&$y.includes(c.method)||u===302&&$y.includes(c.method)||u===303&&c.method==="POST"||u===307)&&o<i){const m=new URL(p,c.url);c.url=m.toString(),u===303&&(c.method="GET",c.headers.delete("Content-Length"),delete c.body),c.headers.delete("Authorization");const g=await r(c);return F0(r,g,i,o+1)}return n}function Lk(){return"x-ms-useragent"}function Bk(r){const n=[{name:"Firefox",regex:/Firefox\/([\d.]+)/},{name:"Safari",regex:/Version\/([\d.]+).*Safari/}];for(const i of n){const o=r.match(i.regex);if(o)return{brand:i.name,version:o[1]}}}function Hk(r){const n=["Google Chrome","Microsoft Edge","Opera","Brave","Chromium"];for(const i of n){const o=r.find(c=>c.brand===i);if(o)return o}}async function qk(r){const n=globalThis.navigator;let i="unknown";if(n?.userAgentData){const o=await n.userAgentData.getHighEntropyValues(["architecture","platformVersion"]);i=`${o.platform} ${o.platformVersion}; ${o.architecture}`;const c=Hk(n.userAgentData.brands);c&&r.set(c.brand,`${c.version} (${i})`)}else if(n?.platform){i=n.platform;const o=Bk(n.userAgent);o&&r.set(o.brand,`${o.version} (${i})`)}else typeof globalThis.EdgeRuntime=="string"&&r.set("EdgeRuntime",`${globalThis.EdgeRuntime} (${i})`)}const $k="0.3.2",xs=3;function Vk(r){const n=[];for(const[i,o]of r){const c=o?`${i}/${o}`:i;n.push(c)}return n.join(" ")}function Gk(){return Lk()}async function Fk(r){const n=new Map;n.set("ts-http-runtime",$k),await qk(n);const i=Vk(n);return r?`${r} ${i}`:i}const Vy=Gk(),Yk="userAgentPolicy";function Wk(r={}){const n=Fk(r.userAgentPrefix);return{name:Yk,async sendRequest(i,o){return i.headers.has(Vy)||i.headers.set(Vy,await n),o(i)}}}const Xk="decompressResponsePolicy";function Y0(){throw new Error("decompressResponsePolicy is not supported in browser environment")}const Jk="The operation was aborted.";function Kk(r,n,i){return new Promise((o,c)=>{let u,f;const p=()=>c(new _f(i?.abortErrorMsg?i?.abortErrorMsg:Jk)),m=()=>{i?.abortSignal&&f&&i.abortSignal.removeEventListener("abort",f)};if(f=()=>(u&&clearTimeout(u),m(),p()),i?.abortSignal&&i.abortSignal.aborted)return p();u=setTimeout(()=>{m(),o(n)},r),i?.abortSignal&&i.abortSignal.addEventListener("abort",f)})}function Qk(r,n){const i=r.headers.get(n);if(!i)return;const o=Number(i);if(!Number.isNaN(o))return o}const Qd="Retry-After",Zk=["retry-after-ms","x-ms-retry-after-ms",Qd];function W0(r){if(r&&[429,503].includes(r.status))try{for(const c of Zk){const u=Qk(r,c);if(u===0||u)return u*(c===Qd?1e3:1)}const n=r.headers.get(Qd);if(!n)return;const o=Date.parse(n)-Date.now();return Number.isFinite(o)?Math.max(0,o):void 0}catch{return}}function e_(r){return Number.isFinite(W0(r))}function X0(){return{name:"throttlingRetryStrategy",retry({response:r}){const n=W0(r);return Number.isFinite(n)?{retryAfterInMs:n}:{skipStrategy:!0}}}}const t_=1e3,n_=1e3*64;function Of(r={}){const n=r.retryDelayInMs??t_,i=r.maxRetryDelayInMs??n_;return{name:"exponentialRetryStrategy",retry({retryCount:o,response:c,responseError:u}){const f=i_(u),p=f&&r.ignoreSystemErrors,m=r_(c),g=m&&r.ignoreHttpStatusCodes;return c&&(e_(c)||!m)||g||p?{skipStrategy:!0}:u&&!f&&!m?{errorToThrow:u}:d0(o,{retryDelayInMs:n,maxRetryDelayInMs:i})}}}function r_(r){return!!(r&&r.status!==void 0&&(r.status>=500||r.status===408)&&r.status!==501&&r.status!==505)}function i_(r){return r?r.code==="ETIMEDOUT"||r.code==="ESOCKETTIMEDOUT"||r.code==="ECONNREFUSED"||r.code==="ECONNRESET"||r.code==="ENOENT"||r.code==="ENOTFOUND":!1}const s_=N0("ts-http-runtime retryPolicy"),o_="retryPolicy";function Go(r,n={maxRetries:xs}){const i=n.logger||s_;return{name:o_,async sendRequest(o,c){let u,f,p=-1;e:for(;;){p+=1,u=void 0,f=void 0;try{i.info(`Retry ${p}: Attempting to send request`,o.requestId),u=await c(o),i.info(`Retry ${p}: Received a response from request`,o.requestId)}catch(m){if(i.error(`Retry ${p}: Received an error from request`,o.requestId),f=m,!m||f.name!=="RestError")throw m;u=f.response}if(o.abortSignal?.aborted)throw i.error(`Retry ${p}: Request aborted.`),new _f;if(p>=(n.maxRetries??xs)){if(i.info(`Retry ${p}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),f)throw f;if(u)return u;throw new Error("Maximum retries reached with no response or error to throw")}i.info(`Retry ${p}: Processing ${r.length} retry strategies.`);t:for(const m of r){const g=m.logger||i;g.info(`Retry ${p}: Processing retry strategy ${m.name}.`);const v=m.retry({retryCount:p,response:u,responseError:f});if(v.skipStrategy){g.info(`Retry ${p}: Skipped.`);continue t}const{errorToThrow:k,retryAfterInMs:z,redirectTo:W}=v;if(k)throw g.error(`Retry ${p}: Retry strategy ${m.name} throws error:`,k),k;if(z||z===0){g.info(`Retry ${p}: Retry strategy ${m.name} retries after ${z}`),await Kk(z,void 0,{abortSignal:o.abortSignal});continue e}if(W){g.info(`Retry ${p}: Retry strategy ${m.name} redirects to ${W}`),o.url=W;continue e}}if(f)throw i.info("None of the retry strategies could work with the received error. Throwing it."),f;if(u)return i.info("None of the retry strategies could work with the received response. Returning it."),u}}}}const a_="defaultRetryPolicy";function J0(r={}){return{name:a_,sendRequest:Go([X0(),Of(r)],{maxRetries:r.maxRetries??xs}).sendRequest}}const K0="formDataPolicy";function l_(r){const n={};for(const[i,o]of r.entries())n[i]??=[],n[i].push(o);return n}function Q0(){return{name:K0,async sendRequest(r,n){if(ri&&typeof FormData<"u"&&r.body instanceof FormData&&(r.formData=l_(r.body),r.body=void 0),r.formData){const i=r.headers.get("Content-Type");i&&i.indexOf("application/x-www-form-urlencoded")!==-1?r.body=c_(r.formData):await u_(r.formData,r),r.formData=void 0}return n(r)}}}function c_(r){const n=new URLSearchParams;for(const[i,o]of Object.entries(r))if(Array.isArray(o))for(const c of o)n.append(i,c.toString());else n.append(i,o.toString());return n.toString()}async function u_(r,n){const i=n.headers.get("Content-Type");if(i&&!i.startsWith("multipart/form-data"))return;n.headers.set("Content-Type",i??"multipart/form-data");const o=[];for(const[c,u]of Object.entries(r))for(const f of Array.isArray(u)?u:[u])if(typeof f=="string")o.push({headers:_i({"Content-Disposition":`form-data; name="${c}"`}),body:yn(f,"utf-8")});else{if(f==null||typeof f!="object")throw new Error(`Unexpected value for key ${c}: ${f}. Value should be serialized to string first.`);{const p=f.name||"blob",m=_i();m.set("Content-Disposition",`form-data; name="${c}"; filename="${p}"`),m.set("Content-Type",f.type||"application/octet-stream"),o.push({headers:m,body:f})}}n.multipartBody={parts:o}}const d_="proxyPolicy",Z0="proxyPolicy is not supported in browser environment";function f_(){throw new Error(Z0)}function eb(){throw new Error(Z0)}const tb="agentPolicy";function nb(r){return{name:tb,sendRequest:async(n,i)=>(n.agent||(n.agent=r),i(n))}}const rb="tlsPolicy";function ib(r){return{name:rb,sendRequest:async(n,i)=>(n.tlsSettings||(n.tlsSettings=r),i(n))}}function h_(r){return new Response(r).blob()}async function p_(r){if(r instanceof Blob||r instanceof Uint8Array)return r;if(Wl(r))return h_(r);throw new Error("Unsupported source type. Only Blob, Uint8Array, and ReadableStream are supported in browser.")}function m_(r){return"resize"in r.buffer?r:r.map(n=>n)}async function g_(r){const n=[];for(const i of r){const o=await p_(typeof i=="function"?i():i);o instanceof Blob?n.push(o):n.push(new Blob([m_(o)]))}return new Blob(n)}function y_(){return`----AzSDKFormBoundary${Rf()}`}function v_(r){let n="";for(const[i,o]of r)n+=`${i}: ${o}\r
`;return n}function b_(r){return r instanceof Uint8Array?r.byteLength:jk(r)?r.size===-1?void 0:r.size:void 0}function S_(r){let n=0;for(const i of r){const o=b_(i);if(o===void 0)return;n+=o}return n}async function x_(r,n,i){const o=[yn(`--${i}`,"utf-8"),...n.flatMap(u=>[yn(`\r
`,"utf-8"),yn(v_(u.headers),"utf-8"),yn(`\r
`,"utf-8"),u.body,yn(`\r
--${i}`,"utf-8")]),yn(`--\r
\r
`,"utf-8")],c=S_(o);c&&r.headers.set("Content-Length",c),r.body=await g_(o)}const Mf="multipartPolicy",w_=70,C_=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function T_(r){if(r.length>w_)throw new Error(`Multipart boundary "${r}" exceeds maximum length of 70 characters`);if(Array.from(r).some(n=>!C_.has(n)))throw new Error(`Multipart boundary "${r}" contains invalid characters`)}function sb(){return{name:Mf,async sendRequest(r,n){if(!r.multipartBody)return n(r);if(r.body)throw new Error("multipartBody and regular body cannot be set at the same time");let i=r.multipartBody.boundary;const o=r.headers.get("Content-Type")??"multipart/mixed",c=o.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!c)throw new Error(`Got multipart request body, but content-type header was not multipart: ${o}`);const[,u,f]=c;if(f&&i&&f!==i)throw new Error(`Multipart boundary was specified as ${f} in the header, but got ${i} in the request body`);return i??=f,i?T_(i):i=y_(),r.headers.set("Content-Type",`${u}; boundary=${i}`),await x_(r,r.multipartBody.parts,i),r.multipartBody=void 0,n(r)}}}function R_(r){const n=M0();return ri&&(r.agent&&n.addPolicy(nb(r.agent)),r.tlsOptions&&n.addPolicy(ib(r.tlsOptions)),n.addPolicy(eb(r.proxyOptions)),n.addPolicy(Y0())),n.addPolicy(Q0(),{beforePolicies:[Mf]}),n.addPolicy(Wk(r.userAgentOptions)),n.addPolicy(sb(),{afterPhase:"Deserialize"}),n.addPolicy(J0(r.retryOptions),{phase:"Retry"}),ri&&n.addPolicy(G0(r.redirectOptions),{afterPhase:"Retry"}),n.addPolicy($0(r.loggingOptions),{afterPhase:"Sign"}),n}const j_="ApiVersionPolicy";function E_(r){return{name:j_,sendRequest:(n,i)=>{const o=new URL(n.url);return!o.searchParams.get("api-version")&&r.apiVersion&&(n.url=`${n.url}${Array.from(o.searchParams.keys()).length>0?"&":"?"}api-version=${r.apiVersion}`),i(n)}}}function k_(r){return"getOAuth2Token"in r}function __(r){return"getBearerToken"in r}function A_(r){return"username"in r&&"password"in r}function N_(r){return"key"in r}let Gy=!1;function O_(r,n){if(n.allowInsecureConnection&&r.allowInsecureConnection){const i=new URL(r.url);if(i.hostname==="localhost"||i.hostname==="127.0.0.1")return!0}return!1}function M_(){const r="Sending token over insecure transport. Assume any token issued is compromised.";H0.warning(r),typeof process?.emitWarning=="function"&&!Gy&&(Gy=!0,process.emitWarning(r))}function Xl(r,n){if(!r.url.toLowerCase().startsWith("https://"))if(O_(r,n))M_();else throw new Error("Authentication is not permitted for non-TLS protected (non-https) URLs when allowInsecureConnection is false.")}const P_="apiKeyAuthenticationPolicy";function U_(r){return{name:P_,async sendRequest(n,i){Xl(n,r);const o=(n.authSchemes??r.authSchemes)?.find(c=>c.kind==="apiKey");if(!o)return i(n);if(o.apiKeyLocation!=="header")throw new Error(`Unsupported API key location: ${o.apiKeyLocation}`);return n.headers.set(o.name,r.credential.key),i(n)}}}const D_="bearerAuthenticationPolicy";function I_(r){return{name:D_,async sendRequest(n,i){if(Xl(n,r),!(n.authSchemes??r.authSchemes)?.find(p=>p.kind==="http"&&p.scheme==="basic"))return i(n);const{username:c,password:u}=r.credential,f=Yl(yn(`${c}:${u}`,"utf-8"),"base64");return n.headers.set("Authorization",`Basic ${f}`),i(n)}}}const z_="bearerAuthenticationPolicy";function L_(r){return{name:z_,async sendRequest(n,i){if(Xl(n,r),!(n.authSchemes??r.authSchemes)?.find(u=>u.kind==="http"&&u.scheme==="bearer"))return i(n);const c=await r.credential.getBearerToken({abortSignal:n.abortSignal});return n.headers.set("Authorization",`Bearer ${c}`),i(n)}}}const B_="oauth2AuthenticationPolicy";function H_(r){return{name:B_,async sendRequest(n,i){Xl(n,r);const o=(n.authSchemes??r.authSchemes)?.find(u=>u.kind==="oauth2");if(!o)return i(n);const c=await r.credential.getOAuth2Token(o.flows,{abortSignal:n.abortSignal});return n.headers.set("Authorization",`Bearer ${c}`),i(n)}}}let Pd;function q_(r={}){const n=R_(r);n.addPolicy(E_(r));const{credential:i,authSchemes:o,allowInsecureConnection:c}=r;return i&&(N_(i)?n.addPolicy(U_({authSchemes:o,credential:i,allowInsecureConnection:c})):A_(i)?n.addPolicy(I_({authSchemes:o,credential:i,allowInsecureConnection:c})):__(i)?n.addPolicy(L_({authSchemes:o,credential:i,allowInsecureConnection:c})):k_(i)&&n.addPolicy(H_({authSchemes:o,credential:i,allowInsecureConnection:c}))),n}function $_(){return Pd||(Pd=B0()),Pd}function ob(r,n){if(r.headers){const i=Object.keys(r.headers).find(o=>o.toLowerCase()===n.toLowerCase());if(i)return r.headers[i]}}function V_(r){const n=ob(r,"content-type");if(n)return n;if(r.contentType===null)return;if(r.contentType)return r.contentType;const{body:i}=r;if(i!=null)return typeof i=="string"||typeof i=="number"||typeof i=="boolean"?"text/plain; charset=UTF-8":i instanceof Blob?i.type||"application/octet-stream":I0(i)?"application/octet-stream":"application/json"}function Fy(r){return JSON.stringify(r)}function G_(r){const n=ob(r,"content-disposition");if(n)return n;if(r.dispositionType===void 0&&r.name===void 0&&r.filename===void 0)return;let o=r.dispositionType??"form-data";r.name&&(o+=`; name=${Fy(r.name)}`);let c;if(r.filename)c=r.filename;else if(typeof File<"u"&&r.body instanceof File){const u=r.body.name;u!==""&&(c=u)}return c&&(o+=`; filename=${Fy(c)}`),o}function F_(r,n){if(r===void 0)return new Uint8Array([]);if(I0(r))return r;if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return yn(String(r),"utf-8");if(n&&/application\/(.+\+)?json(;.+)?/i.test(String(n)))return yn(JSON.stringify(r),"utf-8");throw new Ai(`Unsupported body/content-type combination: ${r}, ${n}`)}function Y_(r){const n=V_(r),i=G_(r),o=_i(r.headers??{});n&&o.set("content-type",n),i&&o.set("content-disposition",i);const c=F_(r.body,n);return{headers:o,body:c}}function W_(r){return{parts:r.map(Y_)}}async function Ud(r,n,i,o={},c){const u=c??$_(),f=K_(r,n,o);try{const p=await i.sendRequest(u,f),m=p.headers.toJSON(),g=p.readableStreamBody??p.browserStreamBody,v=o.responseAsStream||g!==void 0?void 0:Z_(p),k=g??v;return o?.onResponse&&o.onResponse({...p,request:f,rawHeaders:m,parsedBody:v}),{request:f,headers:m,status:`${p.status}`,body:k}}catch(p){if(U0(p)&&p.response&&o.onResponse){const{response:m}=p,g=m.headers.toJSON();o?.onResponse({...m,request:f,rawHeaders:g},p)}throw p}}function X_(r={}){return r.contentType??r.headers?.["content-type"]??J_(r.body)}function J_(r){if(ArrayBuffer.isView(r))return"application/octet-stream";if(typeof r=="string")try{return JSON.parse(r),"application/json"}catch{return}return"application/json"}function K_(r,n,i={}){const o=X_(i),{body:c,multipartBody:u}=Q_(i.body,o),f=c!==void 0||u!==void 0,p=_i({...i.headers?i.headers:{},accept:i.accept??i.headers?.accept??"application/json",...f&&o&&{"content-type":o}});return O0({url:n,method:r,body:c,multipartBody:u,headers:p,allowInsecureConnection:i.allowInsecureConnection,abortSignal:i.abortSignal,onUploadProgress:i.onUploadProgress,onDownloadProgress:i.onDownloadProgress,timeout:i.timeout,enableBrowserStreams:!0,streamResponseStatusCodes:i.responseAsStream?new Set([Number.POSITIVE_INFINITY]):void 0})}function Q_(r,n=""){if(r===void 0)return{body:void 0};if(typeof FormData<"u"&&r instanceof FormData)return{body:r};if(z0(r))return{body:r};if(ArrayBuffer.isView(r))return{body:r instanceof Uint8Array?r:JSON.stringify(r)};switch(n.split(";")[0]){case"application/json":return{body:JSON.stringify(r)};case"multipart/form-data":return Array.isArray(r)?{multipartBody:W_(r)}:{body:JSON.stringify(r)};case"text/plain":return{body:String(r)};default:return typeof r=="string"?{body:r}:{body:JSON.stringify(r)}}}function Z_(r){const i=(r.headers.get("content-type")??"").split(";")[0],o=r.bodyAsText??"";if(i==="text/plain")return String(o);try{return o?JSON.parse(o):void 0}catch(c){if(i==="application/json")throw eA(r,c);return String(o)}}function eA(r,n){const i=`Error "${n}" occurred while parsing the response body - ${r.bodyAsText}.`,o=n.code??Ai.PARSE_ERROR;return new Ai(i,{code:o,statusCode:r.status,request:r.request,response:r})}function tA(r){const n=r.value;return n!==void 0&&n.toString!==void 0&&typeof n.toString=="function"}function nA(r,n,i,o={}){if(n.startsWith("https://")||n.startsWith("http://"))return n;r=iA(r,o),n=sA(n,i,o);const c=rA(`${r}/${n}`,o);return new URL(c).toString().replace(/([^:]\/)\/+/g,"$1")}function Dd(r,n,i,o){let c;i==="pipeDelimited"?c="|":i==="spaceDelimited"?c="%20":c=",";let u;Array.isArray(o)?u=o:typeof o=="object"&&o.toString===Object.prototype.toString?u=Object.entries(o).flat():u=[o];const f=u.map(p=>{if(p==null)return"";if(!p.toString||typeof p.toString!="function")throw new Error(`Query parameters must be able to be represented as string, ${r} can't`);const m=p.toISOString!==void 0?p.toISOString():p.toString();return n?m:encodeURIComponent(m)}).join(c);return`${n?r:encodeURIComponent(r)}=${f}`}function rA(r,n={}){if(!n.queryParameters)return r;const i=new URL(r),o=n.queryParameters,c=[];for(const u of Object.keys(o)){const f=o[u];if(f==null)continue;const p=tA(f),m=p?f.value:f,g=p?f.explode??!1:!1,v=p&&f.style?f.style:"form";if(g)if(Array.isArray(m))for(const k of m)c.push(Dd(u,n.skipUrlEncoding??!1,v,k));else if(typeof m=="object")for(const[k,z]of Object.entries(m))c.push(Dd(k,n.skipUrlEncoding??!1,v,z));else throw new Error("explode can only be set to true for objects and arrays");else c.push(Dd(u,n.skipUrlEncoding??!1,v,m))}return i.search!==""&&(i.search+="&"),i.search+=c.join("&"),i.toString()}function iA(r,n){if(!n.pathParameters)return r;const i=n.pathParameters;for(const[o,c]of Object.entries(i)){if(c==null)throw new Error(`Path parameters ${o} must not be undefined or null`);if(!c.toString||typeof c.toString!="function")throw new Error(`Path parameters must be able to be represented as string, ${o} can't`);let u=c.toISOString!==void 0?c.toISOString():String(c);n.skipUrlEncoding||(u=encodeURIComponent(c)),r=oA(r,`{${o}}`,u)??""}return r}function sA(r,n,i={}){for(const o of n){const c=typeof o=="object"&&(o.allowReserved??!1);let u=typeof o=="object"?o.value:o;!i.skipUrlEncoding&&!c&&(u=encodeURIComponent(u)),r=r.replace(/\{[\w-]+\}/,String(u))}return r}function oA(r,n,i){return!r||!n?r:r.split(n).join(i||"")}function aA(r,n={}){const i=n.pipeline??q_(n);if(n.additionalPolicies?.length)for(const{policy:p,position:m}of n.additionalPolicies){const g=m==="perRetry"?"Sign":void 0;i.addPolicy(p,{afterPhase:g})}const{allowInsecureConnection:o,httpClient:c}=n,u=n.endpoint??r,f=(p,...m)=>{const g=v=>nA(u,p,m,{...v});return{get:(v={})=>Xr("GET",g(v),i,v,o,c),post:(v={})=>Xr("POST",g(v),i,v,o,c),put:(v={})=>Xr("PUT",g(v),i,v,o,c),patch:(v={})=>Xr("PATCH",g(v),i,v,o,c),delete:(v={})=>Xr("DELETE",g(v),i,v,o,c),head:(v={})=>Xr("HEAD",g(v),i,v,o,c),options:(v={})=>Xr("OPTIONS",g(v),i,v,o,c),trace:(v={})=>Xr("TRACE",g(v),i,v,o,c)}};return{path:f,pathUnchecked:f,pipeline:i}}function Xr(r,n,i,o,c,u){return c=o.allowInsecureConnection??c,{then:function(f,p){return Ud(r,n,i,{...o,allowInsecureConnection:c},u).then(f,p)},async asBrowserStream(){if(ri)throw new Error("`asBrowserStream` is supported only in the browser environment. Use `asNodeStream` instead to obtain the response body stream. If you require a Web stream of the response in Node, consider using `Readable.toWeb` on the result of `asNodeStream`.");return Ud(r,n,i,{...o,allowInsecureConnection:c,responseAsStream:!0},u)},async asNodeStream(){if(ri)return Ud(r,n,i,{...o,allowInsecureConnection:c,responseAsStream:!0},u);throw new Error("`isNodeStream` is not supported in the browser environment. Use `asBrowserStream` to obtain the response body stream.")}}}function ab(){return M0()}const lA=A0({logLevelEnvVarName:"AZURE_LOG_LEVEL",namespace:"azure"});function Jl(r){return lA.createClientLogger(r)}const Ni=Jl("core-rest-pipeline"),cA="exponentialRetryPolicy";function uA(r={}){return Go([Of({...r,ignoreSystemErrors:!0})],{maxRetries:r.maxRetries??xs})}const lb="systemErrorRetryPolicy";function dA(r={}){return{name:lb,sendRequest:Go([Of({...r,ignoreHttpStatusCodes:!0})],{maxRetries:r.maxRetries??xs}).sendRequest}}const cb="throttlingRetryPolicy";function fA(r={}){return{name:cb,sendRequest:Go([X0()],{maxRetries:r.maxRetries??xs}).sendRequest}}const hA=q0;function ub(r={}){return $0({logger:Ni.info,...r})}const pA=V0;function db(r={}){return G0(r)}function mA(){return"x-ms-useragent"}function gA(r){const n=[{name:"Firefox",regex:/Firefox\/([\d.]+)/},{name:"Safari",regex:/Version\/([\d.]+).*Safari/}];for(const i of n){const o=r.match(i.regex);if(o)return{brand:i.name,version:o[1]}}}function yA(r){const n=["Google Chrome","Microsoft Edge","Opera","Brave","Chromium"];for(const i of n){const o=r.find(c=>c.brand===i);if(o)return o}}async function vA(r){const n=globalThis.navigator;let i="unknown";if(n?.userAgentData){const o=await n.userAgentData.getHighEntropyValues(["architecture","platformVersion"]);i=`${o.platform} ${o.platformVersion}; ${o.architecture}`;const c=yA(n.userAgentData.brands);c&&r.set(c.brand,`${c.version} (${i})`)}else if(n?.platform){i=n.platform;const o=gA(n.userAgent);o&&r.set(o.brand,`${o.version} (${i})`)}else typeof globalThis.EdgeRuntime=="string"&&r.set("EdgeRuntime",`${globalThis.EdgeRuntime} (${i})`)}const fb="1.22.2",bA=3;function SA(r){const n=[];for(const[i,o]of r){const c=o?`${i}/${o}`:i;n.push(c)}return n.join(" ")}function xA(){return mA()}async function hb(r){const n=new Map;n.set("core-rest-pipeline",fb),await vA(n);const i=SA(n);return r?`${r} ${i}`:i}const Yy=xA(),pb="userAgentPolicy";function mb(r={}){const n=hb(r.userAgentPrefix);return{name:pb,async sendRequest(i,o){return i.headers.has(Yy)||i.headers.set(Yy,await n),o(i)}}}function wA(r){return!!(r&&typeof r.pipe=="function")}const gb={arrayBuffer:()=>{throw new Error("Not implemented")},bytes:()=>{throw new Error("Not implemented")},slice:()=>{throw new Error("Not implemented")},text:()=>{throw new Error("Not implemented")}},Kl=Symbol("rawContent");function yb(r){return typeof r[Kl]=="function"}function CA(r){return yb(r)?r[Kl]():r}function TA(r,n,i={}){return{...gb,type:i.type??"",lastModified:i.lastModified??new Date().getTime(),webkitRelativePath:i.webkitRelativePath??"",size:i.size??-1,name:n,stream:()=>{const o=r();if(wA(o))throw new Error("Not supported: a Node stream was provided as input to createFileFromStream.");return o},[Kl]:r}}function RA(r,n,i={}){return _l?{...gb,type:i.type??"",lastModified:i.lastModified??new Date().getTime(),webkitRelativePath:i.webkitRelativePath??"",size:r.byteLength,name:n,arrayBuffer:async()=>r.buffer,stream:()=>new Blob([Wy(r)]).stream(),[Kl]:()=>r}:new File([Wy(r)],n,i)}function Wy(r){return"resize"in r.buffer?r:r.map(n=>n)}const Pf=Mf;function vb(){const r=sb();return{name:Pf,sendRequest:async(n,i)=>{if(n.multipartBody)for(const o of n.multipartBody.parts)yb(o.body)&&(o.body=CA(o.body));return r.sendRequest(n,i)}}}const jA=Xk;function bb(){return Y0()}function Sb(r={}){return J0(r)}const EA=K0;function xb(){return Q0()}const kA=d_;function _A(r){return f_()}function wb(r,n){return eb()}const Cb="setClientRequestIdPolicy";function Tb(r="x-ms-client-request-id"){return{name:Cb,async sendRequest(n,i){return n.headers.has(r)||n.headers.set(r,n.requestId),i(n)}}}const AA=tb;function Rb(r){return nb(r)}const NA=rb;function jb(r){return ib(r)}const Ao={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function OA(r={}){let n=new No(r.parentContext);return r.span&&(n=n.setValue(Ao.span,r.span)),r.namespace&&(n=n.setValue(Ao.namespace,r.namespace)),n}class No{_contextMap;constructor(n){this._contextMap=n instanceof No?new Map(n._contextMap):new Map}setValue(n,i){const o=new No(this);return o._contextMap.set(n,i),o}getValue(n){return this._contextMap.get(n)}deleteValue(n){const i=new No(this);return i._contextMap.delete(n),i}}const Id={instrumenterImplementation:void 0};function MA(){return{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{},addEvent:()=>{}}}function PA(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(r,n)=>({span:MA(),tracingContext:OA({parentContext:n.tracingContext})}),withContext(r,n,...i){return n(...i)}}}function fl(){return Id.instrumenterImplementation||(Id.instrumenterImplementation=PA()),Id.instrumenterImplementation}function Eb(r){const{namespace:n,packageName:i,packageVersion:o}=r;function c(g,v,k){const z=fl().startSpan(g,{...k,packageName:i,packageVersion:o,tracingContext:v?.tracingOptions?.tracingContext});let W=z.tracingContext;const U=z.span;W.getValue(Ao.namespace)||(W=W.setValue(Ao.namespace,n)),U.setAttribute("az.namespace",W.getValue(Ao.namespace));const B=Object.assign({},v,{tracingOptions:{...v?.tracingOptions,tracingContext:W}});return{span:U,updatedOptions:B}}async function u(g,v,k,z){const{span:W,updatedOptions:U}=c(g,v,z);try{const B=await f(U.tracingOptions.tracingContext,()=>Promise.resolve(k(U,W)));return W.setStatus({status:"success"}),B}catch(B){throw W.setStatus({status:"error",error:B}),B}finally{W.end()}}function f(g,v,...k){return fl().withContext(g,v,...k)}function p(g){return fl().parseTraceparentHeader(g)}function m(g){return fl().createRequestHeaders(g)}return{startSpan:c,withSpan:u,withContext:f,parseTraceparentHeader:p,createRequestHeaders:m}}const Io=Ai;function Uf(r){return U0(r)}const kb="tracingPolicy";function _b(r={}){const n=hb(r.userAgentPrefix),i=new jf({additionalAllowedQueryParameters:r.additionalAllowedQueryParameters}),o=UA();return{name:kb,async sendRequest(c,u){if(!o)return u(c);const f=await n,p={"http.url":i.sanitizeUrl(c.url),"http.method":c.method,"http.user_agent":f,requestId:c.requestId};f&&(p["http.user_agent"]=f);const{span:m,tracingContext:g}=DA(o,c,p)??{};if(!m||!g)return u(c);try{const v=await o.withContext(g,u,c);return zA(m,v),v}catch(v){throw IA(m,v),v}}}}function UA(){try{return Eb({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:fb})}catch(r){Ni.warning(`Error when creating the TracingClient: ${Vo(r)}`);return}}function DA(r,n,i){try{const{span:o,updatedOptions:c}=r.startSpan(`HTTP ${n.method}`,{tracingOptions:n.tracingOptions},{spanKind:"client",spanAttributes:i});if(!o.isRecording()){o.end();return}const u=r.createRequestHeaders(c.tracingOptions.tracingContext);for(const[f,p]of Object.entries(u))n.headers.set(f,p);return{span:o,tracingContext:c.tracingOptions.tracingContext}}catch(o){Ni.warning(`Skipping creating a tracing span due to an error: ${Vo(o)}`);return}}function IA(r,n){try{r.setStatus({status:"error",error:S0(n)?n:void 0}),Uf(n)&&n.statusCode&&r.setAttribute("http.status_code",n.statusCode),r.end()}catch(i){Ni.warning(`Skipping tracing span processing due to an error: ${Vo(i)}`)}}function zA(r,n){try{r.setAttribute("http.status_code",n.status);const i=n.headers.get("x-ms-request-id");i&&r.setAttribute("serviceRequestId",i),n.status>=400&&r.setStatus({status:"error"}),r.end()}catch(i){Ni.warning(`Skipping tracing span processing due to an error: ${Vo(i)}`)}}function Ab(r){if(r instanceof AbortSignal)return{abortSignal:r};if(r.aborted)return{abortSignal:AbortSignal.abort(r.reason)};const n=new AbortController;let i=!0;function o(){i&&(r.removeEventListener("abort",c),i=!1)}function c(){n.abort(r.reason),o()}return r.addEventListener("abort",c),{abortSignal:n.signal,cleanup:o}}const LA="wrapAbortSignalLikePolicy";function BA(){return{name:LA,sendRequest:async(r,n)=>{if(!r.abortSignal)return n(r);const{abortSignal:i,cleanup:o}=Ab(r.abortSignal);r.abortSignal=i;try{return await n(r)}finally{o?.()}}}}function Df(r){const n=ab();return _l&&(r.agent&&n.addPolicy(Rb(r.agent)),r.tlsOptions&&n.addPolicy(jb(r.tlsOptions)),n.addPolicy(wb(r.proxyOptions)),n.addPolicy(bb())),n.addPolicy(BA()),n.addPolicy(xb(),{beforePolicies:[Pf]}),n.addPolicy(mb(r.userAgentOptions)),n.addPolicy(Tb(r.telemetryOptions?.clientRequestIdHeaderName)),n.addPolicy(vb(),{afterPhase:"Deserialize"}),n.addPolicy(Sb(r.retryOptions),{phase:"Retry"}),n.addPolicy(_b({...r.userAgentOptions,...r.loggingOptions}),{afterPhase:"Retry"}),_l&&n.addPolicy(db(r.redirectOptions),{afterPhase:"Retry"}),n.addPolicy(ub(r.loggingOptions),{afterPhase:"Sign"}),n}function If(){const r=B0();return{async sendRequest(n){const{abortSignal:i,cleanup:o}=n.abortSignal?Ab(n.abortSignal):{};try{return n.abortSignal=i,await r.sendRequest(n)}finally{o?.()}}}}function Nb(r){return _i(r)}function zf(r){return O0(r)}const HA=cA;function qA(r={}){return uA(r)}const $A=lb;function VA(r={}){return dA(r)}const GA=cb;function FA(r={}){return fA(r)}const YA=Jl("core-rest-pipeline retryPolicy");function WA(r,n={maxRetries:bA}){return Go(r,{logger:YA,...n})}const XA={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function JA(r,n,i){async function o(){if(Date.now()<i)try{return await r()}catch{return null}else{const u=await r();if(u===null)throw new Error("Failed to refresh access token.");return u}}let c=await o();for(;c===null;)await v0(n),c=await o();return c}function Ob(r,n){let i=null,o=null,c;const u={...XA,...n},f={get isRefreshing(){return i!==null},get shouldRefresh(){return f.isRefreshing?!1:o?.refreshAfterTimestamp&&o.refreshAfterTimestamp<Date.now()?!0:(o?.expiresOnTimestamp??0)-u.refreshWindowInMs<Date.now()},get mustRefresh(){return o===null||o.expiresOnTimestamp-u.forcedRefreshWindowInMs<Date.now()}};function p(m,g){return f.isRefreshing||(i=JA(()=>r.getToken(m,g),u.retryIntervalInMs,o?.expiresOnTimestamp??Date.now()).then(k=>(i=null,o=k,c=g.tenantId,o)).catch(k=>{throw i=null,o=null,c=void 0,k})),i}return async(m,g)=>{const v=!!g.claims,k=c!==g.tenantId;return v&&(o=null),k||v||f.mustRefresh?p(m,g):(f.shouldRefresh&&p(m,g),o)}}const Mb="bearerTokenAuthenticationPolicy";async function hl(r,n){try{return[await n(r),void 0]}catch(i){if(Uf(i)&&i.response)return[i.response,i];throw i}}async function KA(r){const{scopes:n,getAccessToken:i,request:o}=r,c={abortSignal:o.abortSignal,tracingOptions:o.tracingOptions,enableCae:!0},u=await i(n,c);u&&r.request.headers.set("Authorization",`Bearer ${u.token}`)}function Xy(r){return r.status===401&&r.headers.has("WWW-Authenticate")}async function Jy(r,n){const{scopes:i}=r,o=await r.getAccessToken(i,{enableCae:!0,claims:n});return o?(r.request.headers.set("Authorization",`${o.tokenType??"Bearer"} ${o.token}`),!0):!1}function Ql(r){const{credential:n,scopes:i,challengeCallbacks:o}=r,c=r.logger||Ni,u={authorizeRequest:o?.authorizeRequest?.bind(o)??KA,authorizeRequestOnChallenge:o?.authorizeRequestOnChallenge?.bind(o)},f=n?Ob(n):()=>Promise.resolve(null);return{name:Mb,async sendRequest(p,m){if(!p.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await u.authorizeRequest({scopes:Array.isArray(i)?i:[i],request:p,getAccessToken:f,logger:c});let g,v,k;if([g,v]=await hl(p,m),Xy(g)){let z=Ky(g.headers.get("WWW-Authenticate"));if(z){let W;try{W=atob(z)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${z}`),g}k=await Jy({scopes:Array.isArray(i)?i:[i],response:g,request:p,getAccessToken:f,logger:c},W),k&&([g,v]=await hl(p,m))}else if(u.authorizeRequestOnChallenge&&(k=await u.authorizeRequestOnChallenge({scopes:Array.isArray(i)?i:[i],request:p,response:g,getAccessToken:f,logger:c}),k&&([g,v]=await hl(p,m)),Xy(g)&&(z=Ky(g.headers.get("WWW-Authenticate")),z))){let W;try{W=atob(z)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${z}`),g}k=await Jy({scopes:Array.isArray(i)?i:[i],response:g,request:p,getAccessToken:f,logger:c},W),k&&([g,v]=await hl(p,m))}}if(v)throw v;return g}}}function QA(r){const n=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,i=/(\w+)="([^"]*)"/g,o=[];let c;for(;(c=n.exec(r))!==null;){const u=c[1],f=c[2],p={};let m;for(;(m=i.exec(f))!==null;)p[m[1]]=m[2];o.push({scheme:u,params:p})}return o}function Ky(r){return r?QA(r).find(i=>i.scheme==="Bearer"&&i.params.claims&&i.params.error==="insufficient_claims")?.params.claims:void 0}const Pb="ndJsonPolicy";function ZA(){return{name:Pb,async sendRequest(r,n){if(typeof r.body=="string"&&r.body.startsWith("[")){const i=JSON.parse(r.body);Array.isArray(i)&&(r.body=i.map(o=>JSON.stringify(o)+`
`).join(""))}return n(r)}}}const Zd="auxiliaryAuthenticationHeaderPolicy",Qy="x-ms-authorization-auxiliary";async function eN(r){const{scopes:n,getAccessToken:i,request:o}=r,c={abortSignal:o.abortSignal,tracingOptions:o.tracingOptions};return(await i(n,c))?.token??""}function tN(r){const{credentials:n,scopes:i}=r,o=r.logger||Ni,c=new WeakMap;return{name:Zd,async sendRequest(u,f){if(!u.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication for auxiliary header is not permitted for non-TLS protected (non-https) URLs.");if(!n||n.length===0)return o.info(`${Zd} header will not be set due to empty credentials.`),f(u);const p=[];for(const g of n){let v=c.get(g);v||(v=Ob(g),c.set(g,v)),p.push(eN({scopes:Array.isArray(i)?i:[i],request:u,getAccessToken:v}))}const m=(await Promise.all(p)).filter(g=>!!g);return m.length===0?(o.warning(`None of the auxiliary tokens are valid. ${Qy} header will not be set.`),f(u)):(u.headers.set(Qy,m.map(g=>`Bearer ${g}`).join(", ")),f(u))}}}const nN=Object.freeze(Object.defineProperty({__proto__:null,RestError:Io,agentPolicy:Rb,agentPolicyName:AA,auxiliaryAuthenticationHeaderPolicy:tN,auxiliaryAuthenticationHeaderPolicyName:Zd,bearerTokenAuthenticationPolicy:Ql,bearerTokenAuthenticationPolicyName:Mb,createDefaultHttpClient:If,createEmptyPipeline:ab,createFile:RA,createFileFromStream:TA,createHttpHeaders:Nb,createPipelineFromOptions:Df,createPipelineRequest:zf,decompressResponsePolicy:bb,decompressResponsePolicyName:jA,defaultRetryPolicy:Sb,exponentialRetryPolicy:qA,exponentialRetryPolicyName:HA,formDataPolicy:xb,formDataPolicyName:EA,getDefaultProxySettings:_A,isRestError:Uf,logPolicy:ub,logPolicyName:hA,multipartPolicy:vb,multipartPolicyName:Pf,ndJsonPolicy:ZA,ndJsonPolicyName:Pb,proxyPolicy:wb,proxyPolicyName:kA,redirectPolicy:db,redirectPolicyName:pA,retryPolicy:WA,setClientRequestIdPolicy:Tb,setClientRequestIdPolicyName:Cb,systemErrorRetryPolicy:VA,systemErrorRetryPolicyName:$A,throttlingRetryPolicy:FA,throttlingRetryPolicyName:GA,tlsPolicy:jb,tlsPolicyName:NA,tracingPolicy:_b,tracingPolicyName:kb,userAgentPolicy:mb,userAgentPolicyName:pb},Symbol.toStringTag,{value:"Module"})),Zy={operationRequestMap:new WeakMap};function ws(r,n,i){let o=n.parameterPath;const c=n.mapper;let u;if(typeof o=="string"&&(o=[o]),Array.isArray(o)){if(o.length>0)if(c.isConstant)u=c.defaultValue;else{let f=ev(r,o);!f.propertyFound&&i&&(f=ev(i,o));let p=!1;f.propertyFound||(p=c.required||o[0]==="options"&&o.length===2),u=p?c.defaultValue:f.propertyValue}}else{c.required&&(u={});for(const f in o){const p=c.type.modelProperties[f],m=o[f],g=ws(r,{parameterPath:m,mapper:p},i);g!==void 0&&(u||(u={}),u[f]=g)}}return u}function ev(r,n){const i={propertyFound:!1};let o=0;for(;o<n.length;++o){const c=n[o];if(r&&c in r)r=r[c];else break}return o===n.length&&(i.propertyValue=r,i.propertyFound=!0),i}const Ub=Symbol.for("@azure/core-client original request");function rN(r){return Ub in r}function _s(r){if(rN(r))return _s(r[Ub]);let n=Zy.operationRequestMap.get(r);return n||(n={},Zy.operationRequestMap.set(r,n)),n}const iN=["application/json","text/json"],sN=["application/xml","application/atom+xml"],Db="deserializationPolicy";function Ib(r={}){const n=r.expectedContentTypes?.json??iN,i=r.expectedContentTypes?.xml??sN,o=r.parseXML,c=r.serializerOptions,u={xml:{rootName:c?.xml.rootName??"",includeRoot:c?.xml.includeRoot??!1,xmlCharKey:c?.xml.xmlCharKey??Ss}};return{name:Db,async sendRequest(f,p){const m=await p(f);return lN(n,i,m,u,o)}}}function oN(r){let n;const i=r.request,o=_s(i),c=o?.operationSpec;return c&&(o?.operationResponseGetter?n=o?.operationResponseGetter(c,r):n=c.responses[r.status]),n}function aN(r){const n=r.request,o=_s(n)?.shouldDeserialize;let c;return o===void 0?c=!0:typeof o=="boolean"?c=o:c=o(r),c}async function lN(r,n,i,o,c){const u=await dN(r,n,i,o,c);if(!aN(u))return u;const p=_s(u.request)?.operationSpec;if(!p||!p.responses)return u;const m=oN(u),{error:g,shouldReturnResponse:v}=uN(u,p,m,o);if(g)throw g;if(v)return u;if(m){if(m.bodyMapper){let k=u.parsedBody;p.isXML&&m.bodyMapper.type.name===ji.Sequence&&(k=typeof k=="object"?k[m.bodyMapper.xmlElementName]:[]);try{u.parsedBody=p.serializer.deserialize(m.bodyMapper,k,"operationRes.parsedBody",o)}catch(z){throw new Io(`Error ${z} occurred in deserializing the responseBody - ${u.bodyAsText}`,{statusCode:u.status,request:u.request,response:u})}}else p.httpMethod==="HEAD"&&(u.parsedBody=i.status>=200&&i.status<300);m.headersMapper&&(u.parsedHeaders=p.serializer.deserialize(m.headersMapper,u.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return u}function cN(r){const n=Object.keys(r.responses);return n.length===0||n.length===1&&n[0]==="default"}function uN(r,n,i,o){const c=200<=r.status&&r.status<300;if(cN(n)?c:!!i)if(i){if(!i.isError)return{error:null,shouldReturnResponse:!1}}else return{error:null,shouldReturnResponse:!1};const f=i??n.responses.default,p=r.request.streamResponseStatusCodes?.has(r.status)?`Unexpected status code: ${r.status}`:r.bodyAsText,m=new Io(p,{statusCode:r.status,request:r.request,response:r});if(!f&&!(r.parsedBody?.error?.code&&r.parsedBody?.error?.message))throw m;const g=f?.bodyMapper,v=f?.headersMapper;try{if(r.parsedBody){const k=r.parsedBody;let z;if(g){let U=k;if(n.isXML&&g.type.name===ji.Sequence){U=[];const B=g.xmlElementName;typeof k=="object"&&B&&(U=k[B])}z=n.serializer.deserialize(g,U,"error.response.parsedBody",o)}const W=k.error||z||k;m.code=W.code,W.message&&(m.message=W.message),g&&(m.response.parsedBody=z)}r.headers&&v&&(m.response.parsedHeaders=n.serializer.deserialize(v,r.headers.toJSON(),"operationRes.parsedHeaders"))}catch(k){m.message=`Error "${k.message}" occurred in deserializing the responseBody - "${r.bodyAsText}" for the default response.`}return{error:m,shouldReturnResponse:!1}}async function dN(r,n,i,o,c){if(!i.request.streamResponseStatusCodes?.has(i.status)&&i.bodyAsText){const u=i.bodyAsText,f=i.headers.get("Content-Type")||"",p=f?f.split(";").map(m=>m.toLowerCase()):[];try{if(p.length===0||p.some(m=>r.indexOf(m)!==-1))return i.parsedBody=JSON.parse(u),i;if(p.some(m=>n.indexOf(m)!==-1)){if(!c)throw new Error("Parsing XML not supported.");const m=await c(u,o.xml);return i.parsedBody=m,i}}catch(m){const g=`Error "${m}" occurred while parsing the response body - ${i.bodyAsText}.`,v=m.code||Io.PARSE_ERROR;throw new Io(g,{code:v,statusCode:i.status,request:i.request,response:i})}}return i}function fN(r){const n=new Set;for(const i in r.responses){const o=r.responses[i];o.bodyMapper&&o.bodyMapper.type.name===ji.Stream&&n.add(Number(i))}return n}function ni(r){const{parameterPath:n,mapper:i}=r;let o;return typeof n=="string"?o=n:Array.isArray(n)?o=n.join("."):o=i.serializedName,o}const zb="serializationPolicy";function Lb(r={}){const n=r.stringifyXML;return{name:zb,async sendRequest(i,o){const c=_s(i),u=c?.operationSpec,f=c?.operationArguments;return u&&f&&(hN(i,f,u),pN(i,f,u,n)),o(i)}}}function hN(r,n,i){if(i.headerParameters)for(const c of i.headerParameters){let u=ws(n,c);if(u!=null||c.mapper.required){u=i.serializer.serialize(c.mapper,u,ni(c));const f=c.mapper.headerCollectionPrefix;if(f)for(const p of Object.keys(u))r.headers.set(f+p,u[p]);else r.headers.set(c.mapper.serializedName||ni(c),u)}}const o=n.options?.requestOptions?.customHeaders;if(o)for(const c of Object.keys(o))r.headers.set(c,o[c])}function pN(r,n,i,o=function(){throw new Error("XML serialization unsupported!")}){const c=n.options?.serializerOptions,u={xml:{rootName:c?.xml.rootName??"",includeRoot:c?.xml.includeRoot??!1,xmlCharKey:c?.xml.xmlCharKey??Ss}},f=u.xml.xmlCharKey;if(i.requestBody&&i.requestBody.mapper){r.body=ws(n,i.requestBody);const p=i.requestBody.mapper,{required:m,serializedName:g,xmlName:v,xmlElementName:k,xmlNamespace:z,xmlNamespacePrefix:W,nullable:U}=p,B=p.type.name;try{if(r.body!==void 0&&r.body!==null||U&&r.body===null||m){const D=ni(i.requestBody);r.body=i.serializer.serialize(p,r.body,D,u);const le=B===ji.Stream;if(i.isXML){const se=W?`xmlns:${W}`:"xmlns",fe=mN(z,se,B,r.body,u);B===ji.Sequence?r.body=o(gN(fe,k||v||g,se,z),{rootName:v||g,xmlCharKey:f}):le||(r.body=o(fe,{rootName:v||g,xmlCharKey:f}))}else{if(B===ji.String&&(i.contentType?.match("text/plain")||i.mediaType==="text"))return;le||(r.body=JSON.stringify(r.body))}}}catch(D){throw new Error(`Error "${D.message}" occurred in serializing the payload - ${JSON.stringify(g,void 0,"  ")}.`)}}else if(i.formDataParameters&&i.formDataParameters.length>0){r.formData={};for(const p of i.formDataParameters){const m=ws(n,p);if(m!=null){const g=p.mapper.serializedName||ni(p);r.formData[g]=i.serializer.serialize(p.mapper,m,ni(p),u)}}}}function mN(r,n,i,o,c){if(r&&!["Composite","Sequence","Dictionary"].includes(i)){const u={};return u[c.xml.xmlCharKey]=o,u[qt]={[n]:r},u}return o}function gN(r,n,i,o){if(Array.isArray(r)||(r=[r]),!i||!o)return{[n]:r};const c={[n]:r};return c[qt]={[i]:o},c}function Bb(r={}){const n=Df(r??{});return r.credentialOptions&&n.addPolicy(Ql({credential:r.credentialOptions.credential,scopes:r.credentialOptions.credentialScopes})),n.addPolicy(Lb(r.serializationOptions),{phase:"Serialize"}),n.addPolicy(Ib(r.deserializationOptions),{phase:"Deserialize"}),n}let zd;function yN(){return zd||(zd=If()),zd}const vN={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function bN(r,n,i,o){const c=SN(n,i,o);let u=!1,f=tv(r,c);if(n.path){let g=tv(n.path,c);n.path==="/{nextLink}"&&g.startsWith("/")&&(g=g.substring(1)),xN(g)?(f=g,u=!0):f=wN(f,g)}const{queryParams:p,sequenceParams:m}=CN(n,i,o);return f=RN(f,p,m,u),f}function tv(r,n){let i=r;for(const[o,c]of n)i=i.split(o).join(c);return i}function SN(r,n,i){const o=new Map;if(r.urlParameters?.length)for(const c of r.urlParameters){let u=ws(n,c,i);const f=ni(c);u=r.serializer.serialize(c.mapper,u,f),c.skipEncoding||(u=encodeURIComponent(u)),o.set(`{${c.mapper.serializedName||f}}`,u)}return o}function xN(r){return r.includes("://")}function wN(r,n){if(!n)return r;const i=new URL(r);let o=i.pathname;o.endsWith("/")||(o=`${o}/`),n.startsWith("/")&&(n=n.substring(1));const c=n.indexOf("?");if(c!==-1){const u=n.substring(0,c),f=n.substring(c+1);o=o+u,f&&(i.search=i.search?`${i.search}&${f}`:f)}else o=o+n;return i.pathname=o,i.toString()}function CN(r,n,i){const o=new Map,c=new Set;if(r.queryParameters?.length)for(const u of r.queryParameters){u.mapper.type.name==="Sequence"&&u.mapper.serializedName&&c.add(u.mapper.serializedName);let f=ws(n,u,i);if(f!=null||u.mapper.required){f=r.serializer.serialize(u.mapper,f,ni(u));const p=u.collectionFormat?vN[u.collectionFormat]:"";if(Array.isArray(f)&&(f=f.map(m=>m??"")),u.collectionFormat==="Multi"&&f.length===0)continue;Array.isArray(f)&&(u.collectionFormat==="SSV"||u.collectionFormat==="TSV")&&(f=f.join(p)),u.skipEncoding||(Array.isArray(f)?f=f.map(m=>encodeURIComponent(m)):f=encodeURIComponent(f)),Array.isArray(f)&&(u.collectionFormat==="CSV"||u.collectionFormat==="Pipes")&&(f=f.join(p)),o.set(u.mapper.serializedName||ni(u),f)}}return{queryParams:o,sequenceParams:c}}function TN(r){const n=new Map;if(!r||r[0]!=="?")return n;r=r.slice(1);const i=r.split("&");for(const o of i){const[c,u]=o.split("=",2),f=n.get(c);f?Array.isArray(f)?f.push(u):n.set(c,[f,u]):n.set(c,u)}return n}function RN(r,n,i,o=!1){if(n.size===0)return r;const c=new URL(r),u=TN(c.search);for(const[p,m]of n){const g=u.get(p);if(Array.isArray(g))if(Array.isArray(m)){g.push(...m);const v=new Set(g);u.set(p,Array.from(v))}else g.push(m);else g?(Array.isArray(m)?m.unshift(g):i.has(p)&&u.set(p,[g,m]),o||u.set(p,m)):u.set(p,m)}const f=[];for(const[p,m]of u)if(typeof m=="string")f.push(`${p}=${m}`);else if(Array.isArray(m))for(const g of m)f.push(`${p}=${g}`);else f.push(`${p}=${m}`);return c.search=f.length?`?${f.join("&")}`:"",c.toString()}const Hb=Jl("core-client");class qb{_endpoint;_requestContentType;_allowInsecureConnection;_httpClient;pipeline;constructor(n={}){if(this._requestContentType=n.requestContentType,this._endpoint=n.endpoint??n.baseUri,n.baseUri&&Hb.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=n.allowInsecureConnection,this._httpClient=n.httpClient||yN(),this.pipeline=n.pipeline||jN(n),n.additionalPolicies?.length)for(const{policy:i,position:o}of n.additionalPolicies){const c=o==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(i,{afterPhase:c})}}async sendRequest(n){return this.pipeline.sendRequest(this._httpClient,n)}async sendOperationRequest(n,i){const o=i.baseUrl||this._endpoint;if(!o)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");const c=bN(o,i,n,this),u=zf({url:c});u.method=i.httpMethod;const f=_s(u);f.operationSpec=i,f.operationArguments=n;const p=i.contentType||this._requestContentType;p&&i.requestBody&&u.headers.set("Content-Type",p);const m=n.options;if(m){const g=m.requestOptions;g&&(g.timeout&&(u.timeout=g.timeout),g.onUploadProgress&&(u.onUploadProgress=g.onUploadProgress),g.onDownloadProgress&&(u.onDownloadProgress=g.onDownloadProgress),g.shouldDeserialize!==void 0&&(f.shouldDeserialize=g.shouldDeserialize),g.allowInsecureConnection&&(u.allowInsecureConnection=!0)),m.abortSignal&&(u.abortSignal=m.abortSignal),m.tracingOptions&&(u.tracingOptions=m.tracingOptions)}this._allowInsecureConnection&&(u.allowInsecureConnection=!0),u.streamResponseStatusCodes===void 0&&(u.streamResponseStatusCodes=fN(i));try{const g=await this.sendRequest(u),v=My(g,i.responses[g.status]);return m?.onResponse&&m.onResponse(g,v),v}catch(g){if(typeof g=="object"&&g?.response){const v=g.response,k=My(v,i.responses[g.statusCode]||i.responses.default);g.details=k,m?.onResponse&&m.onResponse(v,k,g)}throw g}}}function jN(r){const n=EN(r),i=r.credential&&n?{credentialScopes:n,credential:r.credential}:void 0;return Bb({...r,credentialOptions:i})}function EN(r){if(r.credentialScopes)return r.credentialScopes;if(r.endpoint)return`${r.endpoint}/.default`;if(r.baseUri)return`${r.baseUri}/.default`;if(r.credential&&!r.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}function kN(r){return`, ${r.trim()}`.split(", Bearer ").filter(i=>i).map(i=>`${i.trim()}, `.split('", ').filter(u=>u).map(u=>(([f,p])=>({[f]:p}))(u.trim().split('="'))).reduce((u,f)=>({...u,...f}),{}))}async function _N(r){const{scopes:n,response:i}=r,o=r.logger||Hb,c=i.headers.get("WWW-Authenticate");if(!c)return o.info("The WWW-Authenticate header was missing. Failed to perform the Continuous Access Evaluation authentication flow."),!1;const f=(kN(c)||[]).find(m=>m.claims);if(!f)return o.info('The WWW-Authenticate header was missing the necessary "claims" to perform the Continuous Access Evaluation authentication flow.'),!1;const p=await r.getAccessToken(f.scope?[f.scope]:n,{claims:$E(f.claims)});return p?(r.request.headers.set("Authorization",`${p.tokenType??"Bearer"} ${p.token}`),!0):!1}const $b={DefaultScope:"/.default",HeaderConstants:{AUTHORIZATION:"authorization"}};function AN(r){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(r)}const NN=async r=>{const n=DN(r.request),i=PN(r.response);if(i){const o=UN(i),c=MN(r,o),u=ON(o);if(!u)return!1;const f=await r.getAccessToken(c,{...n,tenantId:u});return f?(r.request.headers.set($b.HeaderConstants.AUTHORIZATION,`${f.tokenType??"Bearer"} ${f.token}`),!0):!1}return!1};function ON(r){const o=new URL(r.authorization_uri).pathname.split("/")[1];if(o&&AN(o))return o}function MN(r,n){if(!n.resource_id)return r.scopes;const i=new URL(n.resource_id);i.pathname=$b.DefaultScope;let o=i.toString();return o==="https://disk.azure.com/.default"&&(o="https://disk.azure.com//.default"),[o]}function PN(r){const n=r.headers.get("WWW-Authenticate");if(r.status===401&&n)return n}function UN(r){return`${r.slice(7).trim()} `.split(" ").filter(c=>c).map(c=>(([u,f])=>({[u]:f}))(c.trim().split("="))).reduce((c,u)=>({...c,...u}),{})}function DN(r){return{abortSignal:r.abortSignal,requestOptions:{timeout:r.timeout},tracingOptions:r.tracingOptions}}const IN=Object.freeze(Object.defineProperty({__proto__:null,MapperTypeNames:ji,ServiceClient:qb,XML_ATTRKEY:qt,XML_CHARKEY:Ss,authorizeRequestOnClaimChallenge:_N,authorizeRequestOnTenantChallenge:NN,createClientPipeline:Bb,createSerializer:kf,deserializationPolicy:Ib,deserializationPolicyName:Db,serializationPolicy:Lb,serializationPolicyName:zb},Symbol.toStringTag,{value:"Module"})),zN=Ml(IN),LN=Ml(nN);var nv;function BN(){return nv||(nv=1,(function(r){var n=oE,i=qE,o=zN,c=LN;function u(ke){return ke&&typeof ke=="object"&&"default"in ke?ke:{default:ke}}var f=u(n),p=u(i),m=u(o),g=u(c),v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Bg<"u"?Bg:typeof self<"u"?self:{};function k(ke){return ke&&ke.__esModule&&Object.prototype.hasOwnProperty.call(ke,"default")?ke.default:ke}function z(ke,Se){return Se={exports:{}},ke(Se,Se.exports),Se.exports}var W=z(function(ke,Se){(function(Ie,q){ke.exports=q()})(v,function(){return(function(Ie){function q(X){if(P[X])return P[X].exports;var L=P[X]={i:X,l:!1,exports:{}};return Ie[X].call(L.exports,L,L.exports,q),L.l=!0,L.exports}var P={};return q.m=Ie,q.c=P,q.i=function(X){return X},q.d=function(X,L,J){q.o(X,L)||Object.defineProperty(X,L,{configurable:!1,enumerable:!0,get:J})},q.n=function(X){var L=X&&X.__esModule?function(){return X.default}:function(){return X};return q.d(L,"a",L),L},q.o=function(X,L){return Object.prototype.hasOwnProperty.call(X,L)},q.p="",q(q.s=1)})([function(Ie,q,P){function X(E,I){var C,j=new Promise(function(T,w){fetch(E).then(function(b){C!==void 0&&clearTimeout(C),T(b)}).catch(function(b){C!==void 0&&clearTimeout(C),w(b)})});if(I!==0){var x=new Promise(function(T,w){C=setTimeout(w,I,new Error("Fetch for '".concat(E.url,"' timed out")))});return Promise.race([j,x])}return j}function L(E){try{return JSON.stringify(E)}catch{return"Unable to serialize object of type ".concat(typeof E)}}Object.defineProperty(q,"__esModule",{value:!0}),q.Timespan=q.toJson=q.fetchWithTimeout=void 0,q.fetchWithTimeout=X,q.toJson=L;var J=(function(){function E(){this.start=Date.now()}return Object.defineProperty(E.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"startTime",{get:function(){return this.start},enumerable:!1,configurable:!0}),E.prototype.reset=function(){this.start=Date.now()},E})();q.Timespan=J},function(Ie,q,P){function X(b,R,_){return new w(b,R,_)}var L=this&&this.__extends||(function(){var b=function(R,_){return(b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,K){V.__proto__=K}||function(V,K){for(var G in K)Object.prototype.hasOwnProperty.call(K,G)&&(V[G]=K[G])})(R,_)};return function(R,_){function V(){this.constructor=R}if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");b(R,_),R.prototype=_===null?Object.create(_):(V.prototype=_.prototype,new V)}})(),J=this&&this.__assign||function(){return J=Object.assign||function(b){for(var R,_=1,V=arguments.length;_<V;_++){R=arguments[_];for(var K in R)Object.prototype.hasOwnProperty.call(R,K)&&(b[K]=R[K])}return b},J.apply(this,arguments)},E=this&&this.__awaiter||function(b,R,_,V){function K(G){return G instanceof _?G:new _(function(H){H(G)})}return new(_||(_=Promise))(function(G,H){function ue(Z){try{re(V.next(Z))}catch(ae){H(ae)}}function ge(Z){try{re(V.throw(Z))}catch(ae){H(ae)}}function re(Z){Z.done?G(Z.value):K(Z.value).then(ue,ge)}re((V=V.apply(b,R||[])).next())})},I=this&&this.__generator||function(b,R){function _(re){return function(Z){return V([re,Z])}}function V(re){if(K)throw new TypeError("Generator is already executing.");for(;ue&&(ue=0,re[0]&&(ge=0)),ge;)try{if(K=1,G&&(H=2&re[0]?G.return:re[0]?G.throw||((H=G.return)&&H.call(G),0):G.next)&&!(H=H.call(G,re[1])).done)return H;switch(G=0,H&&(re=[2&re[0],H.value]),re[0]){case 0:case 1:H=re;break;case 4:return ge.label++,{value:re[1],done:!1};case 5:ge.label++,G=re[1],re=[0];continue;case 7:re=ge.ops.pop(),ge.trys.pop();continue;default:if(H=ge.trys,!(H=H.length>0&&H[H.length-1])&&(re[0]===6||re[0]===2)){ge=0;continue}if(re[0]===3&&(!H||re[1]>H[0]&&re[1]<H[3])){ge.label=re[1];break}if(re[0]===6&&ge.label<H[1]){ge.label=H[1],H=re;break}if(H&&ge.label<H[2]){ge.label=H[2],ge.ops.push(re);break}H[2]&&ge.ops.pop(),ge.trys.pop();continue}re=R.call(b,ge)}catch(Z){re=[6,Z],G=0}finally{K=H=0}if(5&re[0])throw re[1];return{value:re[0]?re[1]:void 0,done:!0}}var K,G,H,ue,ge={label:0,sent:function(){if(1&H[0])throw H[1];return H[1]},trys:[],ops:[]};return ue={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(ue[Symbol.iterator]=function(){return this}),ue};Object.defineProperty(q,"__esModule",{value:!0}),q.createRegistrarClient=q.RegistrarClient=void 0;var C=P(0),j=["skype","aad","cae"],x=(function(b){function R(_){var V=b.call(this,_)||this;return V.name="CancelationError",V}return L(R,b),R})(Error),T=(function(){function b(R,_,V){this.logger=R,this.maxBackoffInMs=_,this.initialDelay=V,this.backoffCount=0,this.id=++b.idCounter}return b.prototype.delay=function(R){var _=this;if(this.timerHandle!==void 0)throw new Error("Retry sequence logical failure");if(this.backoffCount===-1)return new Promise(function(K,G){G(new x("Cancelled"))});var V=this.calculateNextBackoffMs();return this.backoffCount++,this.logger.info("[RegistrarClient] Backing off ".concat(R," for ").concat(V," milliseconds with ID ").concat(this.id)),new Promise(function(K,G){_.cancelFunc=G,_.timerHandle=setTimeout(function(){_.logger.info("[RegistrarClient] Back off for ".concat(R," with ID ").concat(_.id," complete")),_.timerHandle=void 0,K()},V)})},b.prototype.cancel=function(){this.timerHandle!==void 0&&(this.logger.debug("Resetting back off"),clearTimeout(this.timerHandle),this.cancelFunc!==void 0&&this.cancelFunc(new x("Cancelled"))),this.backoffCount=-1},b.prototype.calculateNextBackoffMs=function(){var R=1+.4*(Math.random()-.5),_=this.initialDelay*Math.pow(2,this.backoffCount)*R;return _=Math.round(_),Math.min(this.maxBackoffInMs,_)},b.idCounter=0,b})(),w=(function(){function b(R,_,V){var K;this.logger=R,this.tokenProvider=_,this.options=V,this.DEFAULT_MAX_RETRIES_FOR_GET_TOKEN=15,this.DEFAULT_MAX_BACKOFF_TIME_IN_MS=3e5,this.backoffs={},this.maxBackOffTime=this.options.maxRetryDelayMs>0?this.options.maxRetryDelayMs:this.DEFAULT_MAX_BACKOFF_TIME_IN_MS,this.maxRetriesForGetToken=V.maxRetriesForGetToken===void 0||V.maxRetriesForGetToken===null?this.DEFAULT_MAX_RETRIES_FOR_GET_TOKEN:V.maxRetriesForGetToken,this.proxyUrlRewrite=(K=V.proxyUrlRewrite)!==null&&K!==void 0?K:function(G){return G}}return b.prototype.setTelemetryLogger=function(R){this.eventLogger=R},b.prototype.register=function(R,_){return E(this,void 0,void 0,function(){return I(this,function(V){switch(V.label){case 0:return[4,this.performRegistration(R,_,"pr_set_registration")];case 1:return V.sent(),this.cachedRegistrationParams=[R,_],[2]}})})},b.prototype.unregister=function(){return E(this,void 0,void 0,function(){var R;return I(this,function(_){switch(_.label){case 0:return this.logger.info("[RegistrarClient] sending unregister request"),R=new Request(this.proxyUrlRewrite("".concat(this.options.registrarUrl,"/").concat(this.options.registrationId)),{method:"DELETE",mode:"cors",headers:new Headers(J(J({},this.options.extraRegistrationHeaders),{accept:"application/json, text/javascript"}))}),[4,this.callRegistrar(R,"pr_delete_registration")];case 1:return _.sent(),[2]}})})},b.prototype.cancelPendingRequests=function(){var R=this;Object.keys(this.backoffs).forEach(function(_){R.backoffs[_].cancel()}),this.backoffs={}},b.prototype.resendRegistration=function(){return E(this,void 0,void 0,function(){return I(this,function(R){switch(R.label){case 0:if(!this.cachedRegistrationParams)throw new Error("Re-registration failed because there is no registration parameters cached");return[4,this.performRegistration(this.cachedRegistrationParams[0],this.cachedRegistrationParams[1],"pr_resend_registration")];case 1:return R.sent(),[2]}})})},b.prototype.performRegistration=function(R,_,V){return E(this,void 0,void 0,function(){var K,G;return I(this,function(H){switch(H.label){case 0:return this.logger.info("[RegistrarClient] Sending register request"),K={clientDescription:R,registrationId:this.options.registrationId,nodeId:"",transports:_},G=new Request(this.proxyUrlRewrite(this.options.registrarUrl),{method:"POST",mode:"cors",headers:new Headers(J(J({},this.options.extraRegistrationHeaders),{"content-type":"application/json",accept:"application/json, text/javascript"})),body:(0,C.toJson)(K)}),[4,this.callRegistrar(G,V)];case 1:return H.sent(),[2]}})})},b.prototype.startBackoff=function(){var R=new T(this.logger,this.maxBackOffTime,this.options.initialRetryDelayMs);return this.backoffs[R.id]=R,R},b.prototype.stopBackoff=function(R){R.cancel(),delete this.backoffs[R.id]},b.prototype.getToken=function(R){return E(this,void 0,void 0,function(){var _,V,K,G,H,ue,ge;return I(this,function(re){switch(re.label){case 0:_=this.startBackoff(),V=0,re.label=1;case 1:return re.trys.push([1,3,,8]),this.logger.info("[RegistrarClient] Asking for a new token"),[4,this.tokenProvider({needFresh:!0,supportedTokenTypes:j,wwwAuthenticateHeader:R,purpose:"registrar"})];case 2:return K=re.sent(),this.stopBackoff(_),[2,K];case 3:G=re.sent(),re.label=4;case 4:return re.trys.push([4,6,,7]),V++,H=JSON.stringify(G),V>this.maxRetriesForGetToken?(ue="[RegistrarClient] getToken retry limit hit. Will not retry now. Error: ".concat(H),this.logger.error(ue),this.stopBackoff(_),[2,Promise.reject(ue)]):(this.logger.warn("[RegistrarClient] Retrying for a new token. Retry Count: ".concat(V," Error: ").concat(H)),[4,_.delay("Fetching a new token")]);case 5:return re.sent(),[3,8];case 6:throw ge=re.sent(),this.stopBackoff(_),ge;case 7:return[3,8];case 8:return[3,1];case 9:return[2]}})})},b.prototype.callRegistrar=function(R,_){var V,K,G;return E(this,void 0,void 0,function(){var H,ue,ge,re,Z,ae,Ee,Ae,_e,Ne,$e,Qe,M,y,A,F;return I(this,function($){switch($.label){case 0:return H=this.startBackoff(),[4,this.tokenProvider({needFresh:!1,supportedTokenTypes:j,wwwAuthenticateHeader:void 0,purpose:"registrar"})];case 1:ue=$.sent(),this.setTokenHeader(R,ue),ge=new C.Timespan,re=0,$.label=2;case 2:Z=void 0,$.label=3;case 3:return $.trys.push([3,10,15,16]),ae=R.clone(),[4,(0,C.fetchWithTimeout)(ae,this.options.requestTimeoutMs)];case 4:return Z=$.sent(),Z.status!==401?[3,8]:++re>this.maxRetriesForGetToken?(Ee="[RegistrarClient] getSkypeToken retry limit hit. Will not retry now. Request '".concat(R.url,"' failed with ").concat(Z.status," ").concat(Z.statusText),this.logger.error(Ee),this.stopBackoff(H),[2,Promise.reject(Ee)]):(this.logger.warn("[RegistrarClient] Retry Count ".concat(re,". Request '").concat(R.url,"' failed with ").concat(Z.status," ").concat(Z.statusText)),Ae=(K=(V=Z.headers)===null||V===void 0?void 0:V.get("www-authenticate"))!==null&&K!==void 0?K:void 0,_e=this.setTokenHeader,Ne=[R],[4,this.getToken(Ae)]);case 5:return _e.apply(this,Ne.concat([$.sent()])),re>1?[4,H.delay("Registrar call retry after 401")]:[3,7];case 6:$.sent(),$.label=7;case 7:return[3,22];case 8:if(Z.status>=500&&Z.status<600)throw new Error("Fetch for '".concat(R.url,"' failed with ").concat(Z.status," ").concat(Z.statusText));$.label=9;case 9:return[3,16];case 10:$e=$.sent(),this.logger.error("[RegistrarClient] Request failed with ".concat($e)),$.label=11;case 11:return $.trys.push([11,13,,14]),[4,H.delay("Registrar call retry")];case 12:return $.sent(),[3,22];case 13:throw Qe=$.sent(),this.logger.error("[RegistrarClient] Request cancelled"),this.stopBackoff(H),Qe;case 14:return[3,16];case 15:return this.sendTelemetryEvent(_,R,Z,ge),[7];case 16:return this.stopBackoff(H),Z.ok?[2,Z]:[3,17];case 17:M=void 0,$.label=18;case 18:return $.trys.push([18,20,,21]),A=(y=JSON).stringify,[4,Z.json()];case 19:return M=A.apply(y,[$.sent()]),[3,21];case 20:return $.sent(),M="no details",[3,21];case 21:throw F="Fetch for '".concat(R.url,"' failed with ").concat(Z.status," ").concat(Z.statusText," (").concat(M,", MS-CV: ").concat((G=Z.headers)===null||G===void 0?void 0:G.get("MS-CV"),")"),this.logger.error("[RegistrarClient] ".concat(F)),new Error(F);case 22:return[3,2];case 23:return[2]}})})},b.prototype.setTokenHeader=function(R,_){switch(R.headers.delete("X-Skypetoken"),R.headers.delete("Authorization"),R.headers.delete("X-MS-Migration"),_.tokenType.toLowerCase()){case"skype":R.headers.set("X-Skypetoken",_.token);break;case"aad":case"cae":R.headers.set("Authorization","Bearer ".concat(_.token));break;default:throw new Error("unsupported token type: ".concat(_.tokenType))}this.options.usingLegacyTokenApi===!1&&R.headers.set("X-MS-Migration","True")},b.prototype.sendTelemetryEvent=function(R,_,V,K){if(this.eventLogger!==void 0){var G={name:R,properties:{url:{value:_.url},result_code:{value:V!==void 0?V.status:0},begin_timestamp:{value:K.startTime},elapsed:{value:K.duration}}};this.eventLogger.logEvent(G)}},b})();q.RegistrarClient=w,q.createRegistrarClient=X}])})});k(W);var U=z(function(ke,Se){(function(Ie,q){ke.exports=q(W)})(v,function(Ie){return(function(q){function P(L){if(X[L])return X[L].exports;var J=X[L]={i:L,l:!1,exports:{}};return q[L].call(J.exports,J,J.exports,P),J.l=!0,J.exports}var X={};return P.m=q,P.c=X,P.i=function(L){return L},P.d=function(L,J,E){P.o(L,J)||Object.defineProperty(L,J,{configurable:!1,enumerable:!0,get:E})},P.n=function(L){var J=L&&L.__esModule?function(){return L.default}:function(){return L};return P.d(J,"a",J),J},P.o=function(L,J){return Object.prototype.hasOwnProperty.call(L,J)},P.p="",P(P.s=20)})([function(q,P,X){Object.defineProperty(P,"__esModule",{value:!0}),P.Logger=void 0;var L=(function(){function J(E,I){this.name=E,this.logger=I}return J.prototype.debug=function(E){this.logger.debug("[".concat(this.name,"] ").concat(E))},J.prototype.info=function(E){this.logger.info("[".concat(this.name,"] ").concat(E))},J.prototype.warn=function(E){this.logger.warn("[".concat(this.name,"] ").concat(E))},J.prototype.error=function(E){this.logger.error("[".concat(this.name,"] ").concat(E))},J})();P.Logger=L},function(q,P,X){Object.defineProperty(P,"__esModule",{value:!0}),P.USER_AUTHENTICATE_EVENT_NAME=P.SUPPORTED_TOKEN_TYPES=P.FAILED_MESSAGE_ACK=P.UNHANDLED_MESSAGE_ACK=P.HANDLED_MESSAGE_ACK=P.CLIENT_VERSION=P.constants=void 0,P.constants={TROUTER_INIT:"trouterinit",TROUTER_READY_EVENT:"trouterReadyEvent",TROUTER_READY_TIMEOUT:"trouterReadyTimeout",TROUTER_TOKEN_REQUEST:"trouterTokenRequest",TROUTER_TOKEN_GET_SUCCEEDED:"trouterTokenGetSucceeded",TROUTER_TOKEN_GET_FAILED:"trouterTokenGetFailed",TROUTER_RECONNECTING:"trouterReconnecting",RENEWAL:"renewal",NEW_CONNECTION:"newConnection",ENDPOINT_REGISTRATION_FAILED:"endpointRegistrationFailed"},P.CLIENT_VERSION="2024.14.01.55",P.HANDLED_MESSAGE_ACK=200,P.UNHANDLED_MESSAGE_ACK=404,P.FAILED_MESSAGE_ACK=500,P.SUPPORTED_TOKEN_TYPES=["skype","aad","cae"],P.USER_AUTHENTICATE_EVENT_NAME="user.authenticate"},function(q,P,X){Object.defineProperty(P,"__esModule",{value:!0}),P.TrouterState=P.UserActivityState=void 0;var L;(function(E){E[E.Unknown=0]="Unknown",E[E.Active=1]="Active",E[E.Inactive=2]="Inactive"})(L||(P.UserActivityState=L={}));var J;(function(E){E[E.Unknown=0]="Unknown",E[E.Connected=2]="Connected",E[E.Disconnected=3]="Disconnected",E[E.Switching=9]="Switching"})(J||(P.TrouterState=J={}))},function(q,P,X){function L(w){try{return JSON.stringify(w)}catch{return"Unable to serialize object of type ".concat(typeof w)}}function J(w){var b=Math.round(new Date().getTime()/1e3);return w!==void 0&&w>b?w-b:0}function E(w){return Math.round(new Date().getTime()/1e3)+w}function I(w,b){return C(this,void 0,void 0,function(){var R,_,V;return j(this,function(K){return _=new Promise(function(G,H){fetch(w).then(function(ue){clearTimeout(R),G(ue)}).catch(function(ue){clearTimeout(R),H(ue)})}),b!==0?(V=new Promise(function(G,H){var ue=new URL(w.url),ge=new Error("".concat(w.method," ").concat(ue.origin).concat(ue.pathname," timed out"));R=setTimeout(H,b,ge)}),[2,Promise.race([_,V])]):[2,_]})})}var C=this&&this.__awaiter||function(w,b,R,_){function V(K){return K instanceof R?K:new R(function(G){G(K)})}return new(R||(R=Promise))(function(K,G){function H(re){try{ge(_.next(re))}catch(Z){G(Z)}}function ue(re){try{ge(_.throw(re))}catch(Z){G(Z)}}function ge(re){re.done?K(re.value):V(re.value).then(H,ue)}ge((_=_.apply(w,b||[])).next())})},j=this&&this.__generator||function(w,b){function R(ge){return function(re){return _([ge,re])}}function _(ge){if(V)throw new TypeError("Generator is already executing.");for(;H&&(H=0,ge[0]&&(ue=0)),ue;)try{if(V=1,K&&(G=2&ge[0]?K.return:ge[0]?K.throw||((G=K.return)&&G.call(K),0):K.next)&&!(G=G.call(K,ge[1])).done)return G;switch(K=0,G&&(ge=[2&ge[0],G.value]),ge[0]){case 0:case 1:G=ge;break;case 4:return ue.label++,{value:ge[1],done:!1};case 5:ue.label++,K=ge[1],ge=[0];continue;case 7:ge=ue.ops.pop(),ue.trys.pop();continue;default:if(G=ue.trys,!(G=G.length>0&&G[G.length-1])&&(ge[0]===6||ge[0]===2)){ue=0;continue}if(ge[0]===3&&(!G||ge[1]>G[0]&&ge[1]<G[3])){ue.label=ge[1];break}if(ge[0]===6&&ue.label<G[1]){ue.label=G[1],G=ge;break}if(G&&ue.label<G[2]){ue.label=G[2],ue.ops.push(ge);break}G[2]&&ue.ops.pop(),ue.trys.pop();continue}ge=b.call(w,ue)}catch(re){ge=[6,re],K=0}finally{V=G=0}if(5&ge[0])throw ge[1];return{value:ge[0]?ge[1]:void 0,done:!0}}var V,K,G,H,ue={label:0,sent:function(){if(1&G[0])throw G[1];return G[1]},trys:[],ops:[]};return H={next:R(0),throw:R(1),return:R(2)},typeof Symbol=="function"&&(H[Symbol.iterator]=function(){return this}),H};Object.defineProperty(P,"__esModule",{value:!0}),P.Timespan=P.CorrelationVector=P.fetchWithTimeout=P.calculateExpireTsInSec=P.calculateTtlInSec=P.toJson=void 0,P.toJson=L,P.calculateTtlInSec=J,P.calculateExpireTsInSec=E,P.fetchWithTimeout=I;var x=(function(){function w(b){this.base=b!==void 0?b:this.createCorrelationVectorBase(),this.extension=0}return w.extend=function(b){return new w(b)},w.prototype.increase=function(){this.extension++},w.prototype.value=function(){return"".concat(this.base,".").concat(this.extension)},w.prototype.createCorrelationVectorBase=function(){for(var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0987654321/+",R="AQgw",_="",V=0;V<21;V++)_+=b.charAt(Math.floor(Math.random()*b.length));return _+=R.charAt(Math.floor(Math.random()*R.length))},w})();P.CorrelationVector=x;var T=(function(){function w(){this.start=Date.now()}return Object.defineProperty(w.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"startTime",{get:function(){return this.start},enumerable:!1,configurable:!0}),w.prototype.reset=function(){this.start=Date.now()},w})();P.Timespan=T},function(q,P,X){Object.defineProperty(P,"__esModule",{value:!0}),P.TrouterManagerState=P.UserActivityEventReason=P.ServerState=void 0;var L=X(3),J=(function(){function C(j,x,T,w,b,R,_){this.connectionId=j,this.connectedClientId=x,this.domId=T,this.unsecureUrl=w,this.url=b,this.c2cUrlBase=R,this.expirationTsSec=_}return C.prototype.getRemainingTtlInSec=function(){return(0,L.calculateTtlInSec)(this.expirationTsSec)},C})();P.ServerState=J;var E;(function(C){C[C.Unknown=0]="Unknown",C[C.Modified=1]="Modified",C[C.Snapshot=2]="Snapshot",C[C.Connected=3]="Connected"})(E||(P.UserActivityEventReason=E={}));var I;(function(C){C[C.Unknown=0]="Unknown",C[C.Connected=2]="Connected",C[C.Disconnected=3]="Disconnected",C[C.Switching=9]="Switching",C[C.TerminalError=10]="TerminalError"})(I||(P.TrouterManagerState=I={}))},function(q,P,X){function L(b,R){return b==="skype"&&J(R?.scae)!=="1"?"v4a":"v4c"}function J(b){return typeof b=="string"?b:typeof b=="number"?b.toString():void 0}function E(b,R){return R?.kind==="v4c-websocket-failure"?"v4a":b}function I(b){return Object.prototype.hasOwnProperty.call(b,"connectparams")}function C(b,R){return R==="v4a"?b.replace(/\/v4\/c\b/,"/v4/a").replace("wss://","https://").replace("ws://","http://"):b.replace(/\/v4\/a\b/,"/v4/c").replace("https://","wss://").replace("http://","ws://")}function j(b){if(b!==void 0)return w(w({},b),{reconnectUrl:void 0,serviceUrl:void 0})}function x(b){return typeof b=="string"?parseInt(b,10):b}function T(b){if(b?.kind==="redirect"&&b.host!==void 0){var R=b.host;return R.endsWith("/")&&(R=R.substring(0,R.length-1)),R.endsWith("/v4/c")||R.endsWith("/v4/a")||(R+="/v4/c"),R}}var w=this&&this.__assign||function(){return w=Object.assign||function(b){for(var R,_=1,V=arguments.length;_<V;_++){R=arguments[_];for(var K in R)Object.prototype.hasOwnProperty.call(R,K)&&(b[K]=R[K])}return b},w.apply(this,arguments)};Object.defineProperty(P,"__esModule",{value:!0}),P.redirectUrlIfPresent=P.ensureNumber=P.reconnectParamsWithoutUrls=P.adaptUrl=P.isV4ConnectEvent=P.usedProtocolAfterFallback=P.usedProtocol=void 0,P.usedProtocol=L,P.usedProtocolAfterFallback=E,P.isV4ConnectEvent=I,P.adaptUrl=C,P.reconnectParamsWithoutUrls=j,P.ensureNumber=x,P.redirectUrlIfPresent=T},function(q,P,X){Object.defineProperty(P,"__esModule",{value:!0}),P.TrouterFsm=P.State=void 0;var L,J=X(4),E=X(0),I=X(5);(function(x){x[x.Initial=0]="Initial",x[x.RetrievingToken=1]="RetrievingToken",x[x.Allocating=2]="Allocating",x[x.Handshaking=3]="Handshaking",x[x.Connecting=4]="Connecting",x[x.AnonymousConnecting=5]="AnonymousConnecting",x[x.WebsocketAuthenticating=6]="WebsocketAuthenticating",x[x.Connected=7]="Connected",x[x.Unregistering=8]="Unregistering",x[x.TerminalError=9]="TerminalError"})(L||(P.State=L={}));var C;(function(x){x[x.Initial=0]="Initial",x[x.Registering=1]="Registering",x[x.RegisteringButResendPending=2]="RegisteringButResendPending",x[x.Retrying=3]="Retrying",x[x.Registered=4]="Registered",x[x.RegistrationDisabled=5]="RegistrationDisabled"})(C||(C={}));var j=(function(){function x(T,w,b,R){this.worker=w,this.incallModeEnabled=b,this.protocolSelector=R,this.state=L.Initial,this.autoReconnect=!0,this.logger=new E.Logger("ConnectionFsm",T),this.registrationState=C.Initial}return x.prototype.getState=function(){return this.state},x.prototype.isActive=function(){return this.state===L.Allocating||this.state===L.Connected||this.state===L.Handshaking||this.state===L.Connecting||this.state===L.RetrievingToken||this.state===L.AnonymousConnecting||this.state===L.WebsocketAuthenticating},x.prototype.isConnecting=function(){return this.state===L.Allocating||this.state===L.Handshaking||this.state===L.Connecting||this.state===L.AnonymousConnecting},x.prototype.start=function(){return this.state===L.Initial?(this.setState(L.RetrievingToken),this.worker.getToken(!0,!1,void 0),!0):(this.showIgnored("start"),!1)},x.prototype.stop=function(T,w){T&&(this.registrationState=C.Initial),this.worker.isIncallMode()&&this.worker.exitIncallMode(),this.worker.resetTokenBackoff(),this.worker.cancelPendingRegistrationRequests(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearSentEventTimers(),this.worker.stopRegistrationTimer(),this.worker.stopSocketIo(),this.state===L.Connected&&this.worker.sendDisconnectTelemetryEvent("connection stopped"),this.registrationState!==C.Registered&&this.registrationState!==C.Registering&&this.registrationState!==C.RegisteringButResendPending||this.state===L.Unregistering?w?(this.setState(L.TerminalError),this.worker.dispatchTerminalError()):(this.setState(L.Initial),this.worker.dispatchDisconnected()):(this.registrationState=C.Initial,this.setState(L.Unregistering),this.worker.sendUnregisterRequest())},x.prototype.onTokenReceived=function(T,w,b){this.state===L.RetrievingToken?(0,I.usedProtocolAfterFallback)(this.protocolSelector(T.tokenType,b),w)==="v4c"?(this.setState(L.AnonymousConnecting),this.worker.startConnectionTimer(),this.worker.connectV4c(T,w)):(this.setState(L.Allocating),this.worker.startConnectionTimer(),this.worker.sendAllocateRequest(T)):this.showIgnored("onTokenReceived")},x.prototype.checkConnection=function(T){T&&this.onPingInterval()},x.prototype.onAllocationSucceed=function(T){return this.state===L.Allocating&&this.registrationState===C.Registered&&this.worker.dispatchUnregistered(),this.state===L.Allocating?(this.setState(L.Handshaking),this.registrationState=C.Initial,this.worker.startSocketIo(T),!0):(this.showIgnored("onAllocationSucceed"),!1)},x.prototype.onAllocationFailed=function(T,w){this.state===L.Allocating?this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!T,claimsChallenge:w}):this.showIgnored("onAllocationFailed")},x.prototype.onV4cException=function(){this.state!==L.AnonymousConnecting&&this.state!==L.WebsocketAuthenticating||(this.logger.error("v4c exception, falling back to longpoll"),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"v4c-websocket-failure"}}))},x.prototype.onConnectingTimeout=function(){this.state===L.Allocating||this.state===L.Connecting||this.state===L.Handshaking||this.state===L.AnonymousConnecting||this.state===L.WebsocketAuthenticating?this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0}):this.showIgnored("onConnectingTimeout")},x.prototype.onConnecting=function(){this.state===L.Handshaking?this.setState(L.Connecting):this.showIgnored("onConnecting")},x.prototype.onSocketConnect=function(T){this.state===L.AnonymousConnecting?(this.setState(L.WebsocketAuthenticating),this.worker.sendV4cAuthenticationEvent(T)):this.showIgnored("onSocketConnect")},x.prototype.onConnectingFailed=function(){this.state===L.Connecting?this.onConnectingTimeout():this.state===L.Handshaking?(this.logger.error("Unexpected error in Socket.io - no valid transports"),this.onConnectingTimeout()):this.state===L.AnonymousConnecting||this.state===L.WebsocketAuthenticating?(this.logger.info("/v4/c falling back to longpoll"),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"v4c-websocket-failure"}})):this.showIgnored("onConnectingFailed")},x.prototype.onSocketDisconnect=function(T){this.state===L.Handshaking||this.state===L.Connected||this.state===L.WebsocketAuthenticating?(this.state===L.Connected&&this.worker.sendDisconnectTelemetryEvent(T?.toTelemetryString()),this.state===L.WebsocketAuthenticating&&this.worker.countDisconnectBeforeConnectionEstablishment(),T?.reason==="skypetoken-deprecated"?(this.logger.error("Skypetoken deprecated response, not retrying any further"),this.onTerminalError()):this.cleanUpAndInitiateReconnect({backoff:this.state!==L.Connected&&T?.reason!=="dup",allowCachedToken:T?.reason!=="unauthorized",claimsChallenge:T?.claims})):this.showIgnored("onSocketDisconnect")},x.prototype.onTrouterConnected=function(){this.state===L.Connecting||this.state===L.WebsocketAuthenticating?(this.setState(L.Connected),this.worker.resetTokenBackoff(),this.worker.stopConnectionTimer(),this.worker.sendUserActivityState(J.UserActivityEventReason.Connected,!0),this.worker.startPingTimer(),this.worker.dispatchConnected(),this.worker.shouldSkipRegistration()?(this.registrationState=C.RegistrationDisabled,this.worker.dispatchRegistered()):(this.registrationState=C.Registering,this.worker.sendRegisterRequest())):this.showIgnored("onTrouterConnected")},x.prototype.onReconnectRequired=function(T,w,b){this.state===L.AnonymousConnecting||this.state===L.WebsocketAuthenticating?b===void 0||b.target!=="host"||b.url===void 0||b.url===""?(this.logger.error("unexpected reconnect arguments: ".concat(b?.target," ").concat(b?.url,", reconnecting without cache")),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"redirect-no-host"}})):this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"redirect",host:b.url}}):this.worker.dispatchReconnectIsRequired(T,w)},x.prototype.disableAutoReconnect=function(){this.autoReconnect=!1},x.prototype.onDownstreamRequest=function(T){this.state===L.Connected?(this.switchToIncallModeIfEnabled(),this.worker.dispatchDownstreamRequest(T)):this.showIgnored("onDownstreamRequest")},x.prototype.onTrouterMessageLost=function(T){this.state===L.Connected?this.worker.dispatchTrouterMessageLost(T):this.showIgnored("onTrouterMessageLost")},x.prototype.onPingInterval=function(){this.state===L.Connected?this.worker.sendPingRequest():this.showIgnored("onPingInterval")},x.prototype.onPingResponseTimeout=function(){this.onMissedResponse("onPingResponseTimeout")},x.prototype.onPingResponse=function(){this.state===L.Connected||this.showIgnored("onPingResponse")},x.prototype.onRegistrationFailed=function(){this.state===L.Connected&&this.registrationState===C.Registering?(this.worker.dispatchUnregistered(),this.registrationState=C.Retrying,this.worker.startRegistrationRetryTimer()):this.state===L.Connected&&this.registrationState===C.RegisteringButResendPending?(this.registrationState=C.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationFailed")},x.prototype.onRetryRegistration=function(){this.state===L.Connected&&this.registrationState===C.Retrying?(this.registrationState=C.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRetryRegistration")},x.prototype.onRegistrationSucceeded=function(){this.state===L.Connected&&this.registrationState===C.Registering?(this.registrationState=C.Registered,this.worker.dispatchRegistered(),this.worker.startRegistrationTimer()):this.state===L.Connected&&this.registrationState===C.RegisteringButResendPending?(this.registrationState=C.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationSucceeded")},x.prototype.onRegistrationNearExpiry=function(){this.state===L.Connected&&this.registrationState===C.Registered?(this.registrationState=C.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationNearExpiry")},x.prototype.onUnregistrationDone=function(){this.state===L.Unregistering?(this.setState(L.Initial),this.worker.dispatchUnregistered(),this.worker.dispatchDisconnected()):this.showIgnored("onUnregistrationDone")},x.prototype.onResendRegistration=function(){this.worker.dispatchUnregistered(),this.state===L.Connected&&this.registrationState===C.Registered?(this.registrationState=C.Registering,this.worker.stopRegistrationTimer(),this.worker.sendRegisterRequest()):this.state===L.Connected&&this.registrationState===C.Registering&&(this.registrationState=C.RegisteringButResendPending)},x.prototype.onIncallModeTimer=function(){this.worker.exitIncallMode(),this.state===L.Connected?(this.worker.stopPingTimer(),this.worker.startPingTimer()):this.showIgnored("onIncallModeTimer")},x.prototype.onSetNewUserActivityState=function(){this.worker.sendUserActivityState(J.UserActivityEventReason.Modified,this.state===L.Connected)},x.prototype.onActivityStateResponseTimeout=function(){this.onMissedResponse("onActivityStateResponseTimeout")},x.prototype.forceReconnect=function(T){this.state===L.Connected&&this.worker.sendDisconnectTelemetryEvent(T),this.worker.resetTokenBackoff(),this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0})},x.prototype.onTerminalError=function(){this.logger.error("Cannot proceed, reached terminal state. Switching from state '".concat(L[this.state],"' to ").concat(L[L.TerminalError])),this.stop(!0,!0),this.setState(L.TerminalError)},x.prototype.onMissedResponse=function(T){this.state===L.Connected?(this.worker.sendDisconnectTelemetryEvent(T),this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0})):this.showIgnored(T)},x.prototype.showIgnored=function(T){this.logger.debug("Ignoring event '".concat(T,"' in state '").concat(L[this.state],"'"))},x.prototype.setState=function(T){if(this.logger.info("Switching from state '".concat(L[this.state],"' to state '").concat(L[T],"'")),this.state===T)return void this.logger.error("Attempt to switch to the current state '".concat(L[T],"'"));this.state=T},x.prototype.switchToIncallModeIfEnabled=function(){this.incallModeEnabled&&(this.worker.isIncallMode()||(this.worker.enterIncallMode(),this.worker.stopPingTimer(),this.worker.startPingTimer()),this.worker.restartIncallModeTimer())},x.prototype.cleanUpAndInitiateReconnect=function(T){if(!this.autoReconnect)return this.logger.info("Automatic reconnect is disabled, stopping this connection"),void this.stop(!0);this.worker.cancelPendingRegistrationRequests(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearSentEventTimers(),this.worker.stopRegistrationTimer(),this.worker.stopSocketIo(),this.setState(L.RetrievingToken),this.worker.dispatchReconnecting(),this.worker.getToken(T.allowCachedToken,T.backoff,T.claimsChallenge,T.fallbackReason)},x})();P.TrouterFsm=j},function(q,P,X){function L(M,y){var A=y?void 0:{"X-MS-Migration":"True"};switch(M.tokenType.toLowerCase()){case"skype":return C({"X-Skypetoken":M.token},A);case"aad":case"cae":return C({Authorization:"Bearer ".concat(M.token)},A);default:throw new Error("unsupported token type: ".concat(M.tokenType))}}function J(M){return M!=null&&typeof M.toString=="function"?M.toString():"[".concat(typeof M,"]")}function E(M){return typeof M=="object"&&M!==null&&M.stack!==void 0?(0,b.toJson)(M.stack):'"(no error.stack)"'}function I(M){return typeof M=="object"&&M!==null&&typeof M.message=="string"?M.message:"(no error.message)"}var C=this&&this.__assign||function(){return C=Object.assign||function(M){for(var y,A=1,F=arguments.length;A<F;A++){y=arguments[A];for(var $ in y)Object.prototype.hasOwnProperty.call(y,$)&&(M[$]=y[$])}return M},C.apply(this,arguments)},j=this&&this.__awaiter||function(M,y,A,F){function $(ee){return ee instanceof A?ee:new A(function(de){de(ee)})}return new(A||(A=Promise))(function(ee,de){function ze(ye){try{Pe(F.next(ye))}catch(Le){de(Le)}}function Oe(ye){try{Pe(F.throw(ye))}catch(Le){de(Le)}}function Pe(ye){ye.done?ee(ye.value):$(ye.value).then(ze,Oe)}Pe((F=F.apply(M,y||[])).next())})},x=this&&this.__generator||function(M,y){function A(Pe){return function(ye){return F([Pe,ye])}}function F(Pe){if($)throw new TypeError("Generator is already executing.");for(;ze&&(ze=0,Pe[0]&&(Oe=0)),Oe;)try{if($=1,ee&&(de=2&Pe[0]?ee.return:Pe[0]?ee.throw||((de=ee.return)&&de.call(ee),0):ee.next)&&!(de=de.call(ee,Pe[1])).done)return de;switch(ee=0,de&&(Pe=[2&Pe[0],de.value]),Pe[0]){case 0:case 1:de=Pe;break;case 4:return Oe.label++,{value:Pe[1],done:!1};case 5:Oe.label++,ee=Pe[1],Pe=[0];continue;case 7:Pe=Oe.ops.pop(),Oe.trys.pop();continue;default:if(de=Oe.trys,!(de=de.length>0&&de[de.length-1])&&(Pe[0]===6||Pe[0]===2)){Oe=0;continue}if(Pe[0]===3&&(!de||Pe[1]>de[0]&&Pe[1]<de[3])){Oe.label=Pe[1];break}if(Pe[0]===6&&Oe.label<de[1]){Oe.label=de[1],de=Pe;break}if(de&&Oe.label<de[2]){Oe.label=de[2],Oe.ops.push(Pe);break}de[2]&&Oe.ops.pop(),Oe.trys.pop();continue}Pe=y.call(M,Oe)}catch(ye){Pe=[6,ye],ee=0}finally{$=de=0}if(5&Pe[0])throw Pe[1];return{value:Pe[0]?Pe[1]:void 0,done:!0}}var $,ee,de,ze,Oe={label:0,sent:function(){if(1&de[0])throw de[1];return de[1]},trys:[],ops:[]};return ze={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(ze[Symbol.iterator]=function(){return this}),ze};Object.defineProperty(P,"__esModule",{value:!0}),P.TrouterConnection=P.ReconnectReason=void 0;var T,w=X(21),b=X(3),R=X(15),_=X(1),V=X(16),K=X(17),G=X(2),H=X(4),ue=X(0),ge=X(5),re=X(6),Z=X(12),ae=(function(){function M(){this.cv=_.CLIENT_VERSION,this.ua="",this.hr="",this.v=""}return M})(),Ee=(function(){function M(){this["force new connection"]=!0,this.reconnect=!1,this.query="",this.ackTimeoutMs=5e3}return M.prototype.rewriteUrlForProxy=function(y){return y},M})(),Ae="MS-CV",_e=(function(){function M(y,A){this.logger=A,this.cvCounter=0;var F=JSON.parse(y);this.startTS=this.safeJsonNumber(F,"startTS",0),this.url=this.safeJsonString(F,"url",""),this.shortUrl=this.safeJsonString(F,"shortUrl",""),this.body=this.safeJsonString(F,"body",""),this.headers=this.safeJsonRecord(F,"headers",{}),this.id=this.safeJsonNumber(F,"id",-1),this.method=this.safeJsonString(F,"method",""),this.replied=!1,this.timedout=!1,this.receivedCv=this.headers[Ae],this.updateCvHeader()}return Object.defineProperty(M.prototype,"correlationVector",{get:function(){return this.receivedCv?"".concat(this.receivedCv,".").concat(this.cvCounter):""},enumerable:!1,configurable:!0}),M.prototype.on=function(y,A){y==="data"?this.dataCallback=A:y==="end"&&(typeof this.dataCallback=="function"&&this.dataCallback(this.body),A())},M.prototype.incrementCorrelationVector=function(){++this.cvCounter,this.updateCvHeader()},M.prototype.updateCvHeader=function(){var y=this.correlationVector;y&&(this.headers[Ae]=y)},M.prototype.safeJsonNumber=function(y,A,F){var $;if(y!=null&&Object.prototype.hasOwnProperty.call(y,A)){var ee=y;if(typeof ee[A]=="number")return ee[A];if(typeof ee[A]=="string")return parseFloat(ee[A]);($=this.logger)===null||$===void 0||$.warn("unexpected type of '".concat(A,"': ").concat(typeof ee[A]))}return F},M.prototype.safeJsonString=function(y,A,F){var $;if(y!=null&&Object.prototype.hasOwnProperty.call(y,A)){var ee=y;if(typeof ee[A]=="string")return ee[A];($=this.logger)===null||$===void 0||$.warn("unexpected type of '".concat(A,"': ").concat(typeof ee[A]))}return F},M.prototype.safeJsonRecord=function(y,A,F){var $;if(y!=null&&Object.prototype.hasOwnProperty.call(y,A)){var ee=y;if(typeof ee[A]=="object")return ee[A];($=this.logger)===null||$===void 0||$.warn("unexpected type of '".concat(A,"': ").concat(typeof ee[A]))}return F},M})(),Ne=(function(){function M(y,A,F){this.request=y,this.responseData=A,this.sendResponse=F}return M.prototype.writeHead=function(y,A){this.responseData.status=y,this.responseData.headers=A},M.prototype.write=function(y){this.responseData.body+=y},M.prototype.end=function(y){return y&&(this.responseData.body+=y),this.sendResponse(this.request,this.responseData)},M})(),$e=(function(){function M(y){this.name=y,this.args={},this.timeoutTimerId=0}return M})();(function(M){M[M.Configuration=0]="Configuration",M[M.ServerInitiated=1]="ServerInitiated"})(T||(P.ReconnectReason=T={}));var Qe=(function(){function M(y,A,F,$,ee,de,ze,Oe){var Pe,ye=this;this.options=A,this.manager=F,this.tokenProvider=$,this.usingLegacyTokenApi=ee,this.protocolSelector=ze,this.audienceSubscriptionState=Oe,this.WEBSOCKET_TRANSPORT_NAME="websocket",this.XHR_POLLING_TRANSPORT_NAME="xhr-polling",this.AUDIENCE_SUBSCRIPTION_RESULT_ERROR="Error",this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED="Unsubscribed",this.AUDIENCE_SUBSCRIPTION_RESULT_TIMEOUT="Timeout",this.AUDIENCE_SUBSCRIPTION_RESULT_BAD_REQUEST="BadRequest",this.AUDIENCE_SUBSCRIPTION_STATE_QUERY_PARAM_REGEX=/&audienceSubscriptionState=[^&]*|^audienceSubscriptionState=[^&]*&?/,this.connectionId="",this.inIncallMode=!1,this.connectionAttempt=0,this.connectedClientId="",this.isNavigatorOnline=!0,this.onNavigatorOnlineStatusUpdateBound=this.onNavigatorOnlineStatusUpdate.bind(this),this.c2cUrlBase="",this.connectingErrorsInRow=0,this.unauthorizedErrorCount=0,this.pendingSentEventTimers={},this.lastDisconnectReason="",this.UNKNOWN_TRANSPORT="unknown_transport",this.connectingErrorsThreshold=3,this.pendingAudienceSubscription=void 0,this.logger=new ue.Logger("Connection",y),this.timeoutOptions=this.options.timeoutOptions,this.tokenBackoff=new K.ExponentialBackoff(this.logger,this.timeoutOptions.maxBackoffMs),this.clientID=Date.now(),typeof window<"u"&&window.location&&(this.domId=window.location.hostname);var Le=new ae;Le.cv=_.CLIENT_VERSION,Le.ua="",!((Pe=this.options)===null||Pe===void 0)&&Pe.clientInfo&&(Le.ua=this.safeString(this.options.clientInfo.ua),Le.v=this.safeString(this.options.clientInfo.v)),this.clientInfo=Le,this.connectionTracker=new R.ConnectionTracker(y,this.clientID,this.clientInfo,function(){return ye.getServerState()},this.options.endpointId,this.options.clientCorrelationID,this.options.environment),this.applyConnectionTrackerOptions(A);var Ye=this.options.incallModeTimeoutMs>0;if(this.fsm=new re.TrouterFsm(y,this,Ye,this.protocolSelector),A.registration){var dt={registrarUrl:A.registration.registrarUrl,proxyUrlRewrite:A.rewriteUrlForProxy,registrationId:A.registration.registrationId,requestTimeoutMs:A.timeoutOptions.fetchTimeoutMs,initialRetryDelayMs:1e3,maxRetryDelayMs:A.timeoutOptions.maxBackoffMs,usingLegacyTokenApi:this.usingLegacyTokenApi,maxRetriesForGetToken:A.retryLimitOnTokenFetch,extraRegistrationHeaders:A.extraConnectionHeaders};this.registrarClient=(0,w.createRegistrarClient)(y,this.tokenProvider,dt)}this.userActivityState=de}return M.prototype.start=function(y){this.logger.info("Starting"),this.reconnectParams=y,typeof window<"u"&&window.navigator&&window.addEventListener?(this.isNavigatorOnline=window.navigator.onLine,window.addEventListener("online",this.onNavigatorOnlineStatusUpdateBound),window.addEventListener("offline",this.onNavigatorOnlineStatusUpdateBound),this.logger.debug("Registered for browser online notifications - current state: ".concat(this.isNavigatorOnline))):this.isNavigatorOnline=!0,this.fsm.start()},M.prototype.stop=function(y){this.logger.info("Stopping"),typeof window<"u"&&window.navigator&&(window.removeEventListener("online",this.onNavigatorOnlineStatusUpdateBound),window.removeEventListener("offline",this.onNavigatorOnlineStatusUpdateBound)),this.fsm.stop(y),this.connectionTracker.close()},M.prototype.configure=function(y){var A=this.options.trouterUrl!==y.trouterUrl;this.options=y,this.applyConnectionTrackerOptions(y),A&&(this.logger.info("Configuration changed. Reconnection required."),this.fsm.onReconnectRequired(!1,T.Configuration))},M.prototype.checkConnection=function(y){this.logger.info("checkConnection called with ".concat(y)),this.fsm.checkConnection(y),y&&this.connectionTracker.sendTelemetry(R.ClientEventName.CheckConnection,{disconnectDetected:y},[])},M.prototype.disableRegistrationsAndAutoReconnect=function(){this.stopRegistrationTimer(),this.cancelPendingRegistrationRequests(),this.fsm.disableAutoReconnect()},M.prototype.getServerState=function(){return new H.ServerState(this.connectionId,this.connectedClientId,this.domId?this.domId:"",this.allocateResult?this.allocateResult.url:"",this.allocateResult?this.allocateResult.surl:"",this.c2cUrlBase,this.connectionExpireTimestampInSecs)},M.prototype.getState=function(){return this.fsm.getState()},M.prototype.getToken=function(y,A,F,$,ee){var de=this;ee===void 0&&(ee=0),this.logger.info("Getting token ".concat(A?"with backoff":"without backoff"));var ze=function(){de.connectionTracker.trackStart("token");var Oe={needFresh:!y,wwwAuthenticateHeader:F,supportedTokenTypes:_.SUPPORTED_TOKEN_TYPES,purpose:"trouter"};de.logger.info("Requesting token: needFresh=".concat(Oe.needFresh," ")+"types=[".concat(_.SUPPORTED_TOKEN_TYPES,"], ")+"wwwAuthenticateHeader is ".concat(Oe.wwwAuthenticateHeader?"non empty":"empty")),de.tokenProvider(Oe).then(function(Pe){de.logger.debug("".concat(Pe.tokenType," token is received")),de.connectionTracker.trackEnd("token"),de.fsm.onTokenReceived(Pe,$,de.reconnectParams)}).catch(function(Pe){var ye=(0,b.toJson)(Pe.stack);if(de.logger.error("Getting token failed, will retry after timeout. Error: ".concat(ye)),de.connectionTracker.trackError("token",ye),!de.canRetryTokenFetchRequest(ee+de.unauthorizedErrorCount))return de.connectionTracker.trackError("token","getToken retry limit hit, reached terminal error state"),de.resetTokenBackoff(),void de.fsm.onTerminalError();de.getToken(y,!0,F,$,ee+1)})};A?this.tokenBackoff.backoff("getting token",ze):(this.resetTokenBackoff(),ze())},M.prototype.startConnectionTimer=function(){var y=this;this.stopConnectionTimer(),this.logger.debug("Starting connection timeout for ".concat(this.timeoutOptions.connectionTimeoutMs," ms")),this.connectionTimeoutId=setTimeout(function(){y.logger.info("Connection timeout is fired"),y.fsm.onConnectingTimeout()},this.timeoutOptions.connectionTimeoutMs)},M.prototype.stopConnectionTimer=function(){this.connectionTimeoutId&&(this.logger.debug("Stopping connection timeout"),clearTimeout(this.connectionTimeoutId),this.connectionTimeoutId=void 0)},M.prototype.startPingTimer=function(){var y=this;this.transportTypeName==="websocket"?(this.logger.debug("Starting ping timeout for ".concat(this.timeoutOptions.pingTimeoutMs," ms")),this.pingTimerId=setInterval(function(){y.logger.info("Ping interval fired"),y.fsm.onPingInterval()},this.timeoutOptions.pingTimeoutMs)):this.logger.debug("Not starting ping for transport ".concat(this.transportTypeName))},M.prototype.stopPingTimer=function(){this.pingTimerId&&(this.logger.debug("Stopping ping timeout"),this.clearPingResponseTimer(),clearInterval(this.pingTimerId),this.pingTimerId=void 0)},M.prototype.shouldSkipRegistration=function(){return this.options.registration===void 0},M.prototype.hasCustomRegistrationTtl=function(){var y,A;return((y=this.options.registration)===null||y===void 0?void 0:y.registrarTtlSec)!==void 0&&((A=this.options.registration)===null||A===void 0?void 0:A.registrarTtlSec)!==0},M.prototype.startRegistrationTimer=function(){var y=this;this.stopRegistrationTimer();var A=this.getRegistrationTtl(),F=A[0],$=A[1];if(F<=30||!$)return this.logger.debug("Starting registration expiration timer (TTL ".concat(F," sec)")),void(this.registrationTimerId=setTimeout(function(){y.registrationTimerId=void 0,y.logger.warn("Registration expired but the connection is still alive. Should never happen"),y.dispatchUnregistered()},1e3*F));var ee=F-30;this.logger.debug("Starting registration extension timer for ".concat(ee," sec")),this.registrationTimerId=setTimeout(function(){y.logger.info("Registration extension timer fired"),y.registrationTimerId=setTimeout(function(){y.registrationTimerId=void 0,y.logger.debug("Registration extension did not happen in time"),y.dispatchUnregistered()},3e4),y.fsm.onRegistrationNearExpiry()},1e3*ee)},M.prototype.startRegistrationRetryTimer=function(){var y=this;this.stopRegistrationTimer(),this.registrationTimerId=setTimeout(function(){y.registrationTimerId=void 0,y.fsm.onRetryRegistration()},123e3)},M.prototype.stopRegistrationTimer=function(){this.registrationTimerId&&(this.logger.debug("Stopping registration timeout"),clearTimeout(this.registrationTimerId),this.registrationTimerId=void 0)},M.prototype.resendRegistration=function(){if(!this.registrarClient)throw new Error("Trouter Client not configured to handle registrations");return this.fsm.onResendRegistration(),Promise.resolve()},M.prototype.buildSocketIoUrlParams=function(y,A){if(!this.allocateResult)throw new Error("Allocate result is undefined in buildSocketIoUrlParams()");for(var F={},$=this.allocateResult.connectparams,ee=0,de=Object.keys($);ee<de.length;ee++){var ze=de[ee];if($[ze]!==void 0){var Oe=$[ze];typeof Oe=="string"||typeof Oe=="number"?F[ze]=Oe:this.logger.error("signatureData[".concat(ze,"] has unsupported type ").concat(typeof Oe))}}return F.v="v4",F.tc=encodeURI((0,b.toJson)(this.clientInfo)),F.timeout=this.timeoutOptions.pingTimeoutMs/1e3,F.auth="true",this.options.endpointId&&(F.epid=this.options.endpointId),y&&(F.userActivity=encodeURI((0,b.toJson)(y))),A&&(F.audienceSubscriptionState=encodeURIComponent((0,b.toJson)(A))),this.appendConnectedClientIds(this.buildQuery(F),!0)},M.prototype.startSocketIo=function(y){var A,F;if(this.logger.debug("Starting socket io"),this.connectionTracker.trackStart("connectSocket"),!this.allocateResult)throw new Error("Allocate result is undefined in startSocketIo()");var $=this.options.ioOptions?C({},this.options.ioOptions):new Ee,ee=this.userActivityState.state!==G.UserActivityState.Unknown?this.userActivityState.increaseCvAndGetEventObject():void 0,de=(A=this.audienceSubscriptionState)===null||A===void 0?void 0:A.increaseCvAndGetEventObject();if($["force new connection"]=!0,$.reconnect=!1,$.rewriteUrlForProxy=this.options.rewriteUrlForProxy,$.requestHeaders=C(C({},this.options.extraConnectionHeaders),L(y,this.usingLegacyTokenApi)),$.query=this.buildSocketIoUrlParams(ee,de),this.logger.info("connecting to ".concat(this.allocateResult.socketio,"?").concat($.query)),this.stopSocketIo(),this.socket=((F=this.options.io)!==null&&F!==void 0?F:Z).connect(this.allocateResult.socketio,$),this.socket===void 0)throw new Error("Can't create Socket.io object");this.attachSocketIoHandlers(this.socket,y,ee,de)},M.prototype.stopSocketIo=function(){if(this.socket){this.logger.debug("clearing socket.io");try{for(var y=0,A=["connecting","connect","connect_failed","close_during_connecting","disconnect","reconnect","reconnect_failed","reconnecting","error","message","trouter.connected","trouter.reconnect","trouter.message_loss"];y<A.length;y++){var F=A[y];this.socket.removeAllListeners(F)}this.socket.disconnect(),this.logger.debug("cleared socket"),this.socket=void 0}catch($){this.logger.error("exception in disconnecting previous socket. Error: ".concat(E($)))}}},M.prototype.dispatchConnected=function(){this.logger.info("dispatching connected"),this.manager.onConnected(this)},M.prototype.dispatchRegistered=function(){this.logger.info("dispatching registered"),this.manager.onRegistered(this)},M.prototype.dispatchUnregistered=function(){this.logger.info("dispatching unregistered"),this.manager.onUnregistered(this)},M.prototype.dispatchDownstreamRequest=function(y){var A=this;this.logger.debug("dispatching downstream request");try{var F=new Ne(y,new R.ResponseData(y.id),function($,ee){return A.logger.debug("sending response to downstream"),A.sendResponse($,ee)});this.manager.onDownstreamRequest(this,y,F)}catch($){this.logger.error("exception in socket.on message. Error : ".concat(E($)))}},M.prototype.dispatchReconnecting=function(){this.logger.info("dispatching reconnecting"),this.manager.onReconnecting(this)},M.prototype.dispatchReconnectIsRequired=function(y,A){this.logger.info("dispatching reconnect is required by server"),this.manager.onReconnectIsRequired(this,y,A)},M.prototype.dispatchDisconnected=function(){this.logger.info("dispatching disconnected"),this.manager.onDisconnected(this)},M.prototype.dispatchTerminalError=function(){this.logger.info("dispatching terminal error"),this.manager.onTerminalError(this)},M.prototype.dispatchTrouterMessageLost=function(y){this.logger.info("dispatching trouter message lost"),this.manager.onTrouterMessageLost(y)},M.prototype.countDisconnectBeforeConnectionEstablishment=function(){this.logger.warn("counting disconnect before connection was fully established as a connection failure"),++this.connectingErrorsInRow>=this.connectingErrorsThreshold&&this.resetReconnectParamsOnErrorThreshold()},M.prototype.sendProcessedDroppedIndicators=function(y){var A=this;try{this.logger.debug("emitting processed flow tags to the server");var F=new $e("trouter.processed_message_loss");F.args={droppedIndicators:y},this.sendDownstreamEvent(F,function(){A.logger.info("emitted processed flow tags to the server")})}catch(ee){var $=E(ee);this.logger.error("unable to send processed message loss event. Error: ".concat($)),this.connectionTracker.trackError("trouter.processed_message_loss",$,!1)}},M.prototype.sendAllocateRequest=function(y){var A=this;this.connectionAttempt++,this.connectionTracker.trackNewConnection();var F,$=this.options.trouterUrl,ee=this.reconnectParams,de=typeof ee?.se=="string"?parseInt(ee.se,10):typeof ee?.se=="number"?ee.se:void 0;de&&de<=Date.now()+36e5&&(this.logger.warn("Dropping expired cached connection parameters: ".concat(new Date(de))),this.reconnectParams=ee=void 0),ee&&ee.serviceUrl!==$&&(this.logger.warn("Dropping cached connection parameters for a different environment (".concat(ee.serviceUrl,", now ").concat($,")")),this.reconnectParams=ee=void 0),ee?.reconnectUrl&&($=ee.reconnectUrl),F=ee?C(C({},ee),{serviceUrl:void 0,reconnectUrl:void 0}):null,$=(0,ge.adaptUrl)($,"v4a"),$=this.appendCorrelationIds($,!1),$=this.appendEndpointId($,!1),F&&($+="&".concat(this.buildQuery(F)),F.v||($+="&v=".concat("v4"))),$=this.options.rewriteUrlForProxy($);var ze=new Request($,{method:"POST",mode:"cors",headers:new Headers(C(C({"Content-Type":"text/plain"},this.options.extraConnectionHeaders),L(y,this.usingLegacyTokenApi)))});this.logger.info("sendAllocateRequest: POST ".concat($)),this.connectionTracker.trackStart("allocation");var Oe,Pe=Date.now(),ye=-1,Le=!1;(0,b.fetchWithTimeout)(ze,this.timeoutOptions.fetchTimeoutMs).then(function(Ye){var dt;if(ye=Ye.status,!Ye.ok)throw Oe=(dt=Ye.headers.get("www-authenticate"))!==null&&dt!==void 0?dt:void 0,Le=Ye.headers.get("x-trouter-skypetoken-deprecated")==="1",A.logger.warn("Allocation request got response status ".concat(Ye.status,", www-authenticate header was ").concat(Oe?"not empty":"empty")),new Error(Ye.statusText);var vt=Ye.headers.get("content-type");if(!vt||vt!=="application/json"&&!vt.startsWith("application/json;"))throw new Error("Content-type '".concat(vt,"' is unexpected"));return A.connectionTracker.trackEnd("allocation"),Ye.json()}).then(function(Ye){A.unauthorizedErrorCount=0,A.onAllocationResponse(Ye,y)}).catch(function(Ye){A.connectingErrorsInRow++;var dt="".concat(Ye).concat(ye>=0?", status code ".concat(ye):"");if(A.logger.error("".concat(A.connectingErrorsInRow," failed connecting attempt(s) in a row. ").concat(dt)),A.connectionTracker.trackError("allocation",dt),Le){var vt="Skypetoken deprecated response, not retrying any further";return A.logger.error(vt),A.connectionTracker.trackError("allocation",vt),void A.fsm.onTerminalError()}if(ye===401&&A.unauthorizedErrorCount++,!A.canRetryTokenFetchRequest(A.unauthorizedErrorCount)){var vt="getToken retry limit hit, reached terminal error state";return A.connectionTracker.trackError("allocation",vt),void A.fsm.onTerminalError()}if(ye!==-1||A.isNavigatorOnline){if(A.reconnectParams&&A.connectingErrorsInRow>=A.connectingErrorsThreshold){if(ye>=400&&ye<=599)A.resetReconnectParamsOnErrorThreshold();else if(A.reconnectParams.reconnectUrl&&A.connectingErrorsInRow%3==0){A.logger.warn("".concat(A.connectingErrorsInRow," connection attempts, testing nominal service URL"));var Hn=Math.min(A.timeoutOptions.connectionTimeoutMs-(Date.now()-Pe)-500,A.timeoutOptions.fetchTimeoutMs);return void A.testNominalUrlConnectivity(Hn).then(function(qn){A.connectionTracker.trackProgress("nomcheck",qn?"ok":"failed"),qn?(A.logger.warn("Nominal service URL is reachable, erasing cached reconnect URL"),A.reconnectParams&&delete A.reconnectParams.reconnectUrl):A.logger.warn("Nominal service URL is not reachable either, keeping cached reconnect URL"),A.fsm.onAllocationFailed(!1,void 0)},function(){A.fsm.onAllocationFailed(!1,void 0)})}}}else A.logger.info("Expected failure, the browser says it is not online at the moment");A.fsm.onAllocationFailed(ye===401,Oe)})},M.prototype.testNominalUrlConnectivity=function(y){var A=this;if(y<1e3)return this.logger.warn("There is no time left to reasonably perform the nominal service URL connectivity check (".concat(y," ms), falling back to assuming that the connectivity is fine")),Promise.resolve(!0);var F;try{var $=new URL(this.options.trouterUrl);$.pathname="/",$.search="?"+this.buildQuery({check:Date.now(),cor_id:encodeURIComponent(this.options.clientCorrelationID),epid:encodeURIComponent(this.options.endpointId?this.options.endpointId:""),tc:encodeURIComponent((0,b.toJson)(this.clientInfo))}),F=new Request(this.options.rewriteUrlForProxy($.toString()),{method:"GET",headers:{Accept:"text/plain"}})}catch(ee){return this.logger.warn("Nominal service URL connectivity test request could not be created (".concat(ee,"), falling back to assuming that the connectivity is fine")),Promise.resolve(!0)}return(0,b.fetchWithTimeout)(F,y).then(function(ee){if(ee.status!==200)throw new Error("Not 200 OK: ".concat(ee.status," ").concat(ee.statusText));return ee.text()}).then(function(ee){if(ee!=="Trouter")throw new Error('Not "Trouter": '.concat(ee.substring(0,16)).concat(ee.length>16?"...":""));return!0}).catch(function(ee){return A.logger.error("Nominal service URL connectivity test failed: ".concat(ee)),!1})},M.prototype.sendPingRequest=function(){var y=this;if(this.socket&&this.pingResponseTimerId===void 0)try{this.logger.debug("emitting ping event");var A=!1;this.socket.emit("ping",function(){A!==!0&&y.onPingResponse()}),this.pingResponseTimerId=setTimeout(function(){y.logger.error("Ping response timeout is fired"),A=!0,y.clearPingResponseTimer(),y.fsm.onPingResponseTimeout()},this.timeoutOptions.pongTimeoutMs)}catch($){var F=E($);this.logger.error("unable to send ping. Error: ".concat(F)),this.connectionTracker.trackError("ping",F,!1)}},M.prototype.connectV4c=function(y,A){var F,$,ee,de,ze,Oe,Pe=this.options.ioOptions?C({},this.options.ioOptions):new Ee;Pe["force new connection"]=!0,Pe.reconnect=!1,!((F=this.reconnectParams)===null||F===void 0)&&F.serviceUrl&&(0,ge.adaptUrl)(this.reconnectParams.serviceUrl,"v4c")!==(0,ge.adaptUrl)(this.options.trouterUrl,"v4c")&&(this.logger.warn("Dropping cached connection parameters for a different environment (".concat(this.reconnectParams.serviceUrl,", now ").concat(this.options.trouterUrl,")")),this.reconnectParams=void 0);var ye=(de=($=(0,ge.redirectUrlIfPresent)(A))!==null&&$!==void 0?$:A?.kind!=="redirect-no-host"?(ee=this.reconnectParams)===null||ee===void 0?void 0:ee.reconnectUrl:void 0)!==null&&de!==void 0?de:this.options.trouterUrl,Le=(0,ge.adaptUrl)(ye,"v4c");Pe["skipped handshake data"]={timeout:70,websocketUrl:Le},Pe.query=this.buildV4cUrlParams(),Pe.rewriteUrlForProxy=this.options.rewriteUrlForProxy;try{if(this.stopSocketIo(),this.transportTypeName="websocket",this.socket=((ze=this.options.io)!==null&&ze!==void 0?ze:Z).connect(this.options.trouterUrl,Pe),this.socket===void 0)throw new Error("failed to create Socket.io object");var Ye=(Oe=this.audienceSubscriptionState)===null||Oe===void 0?void 0:Oe.increaseCvAndGetEventObject();this.attachSocketIoHandlers(this.socket,y,void 0,Ye)}catch(dt){this.logger.error("".concat(dt)),this.connectionTracker.trackError("v4c","".concat(dt)),this.fsm.onV4cException()}},M.prototype.sendV4cAuthenticationEvent=function(y){var A,F={headers:C(C({},this.options.extraConnectionHeaders),L(y,this.usingLegacyTokenApi)),connectparams:(0,ge.reconnectParamsWithoutUrls)(this.reconnectParams)};(A=this.socket)===null||A===void 0||A.emit(_.USER_AUTHENTICATE_EVENT_NAME,F)},M.prototype.setUserActivityState=function(y){var A=y.state!==this.userActivityState.state;this.userActivityState=y,A?(this.logger.info("Changing user activity state to '".concat(y.toEventJSON(),"'")),this.fsm.onSetNewUserActivityState()):(this.logger.debug("Not changing the same user activity state '".concat(y.toEventJSON(),"'")),this.manager.onUserActivityStateAccepted(y.correlationVector.value()))},M.prototype.sendUserActivityState=function(y,A){this.userActivityState.state!==G.UserActivityState.Unknown&&(this.transportTypeName==="websocket"&&A?y===H.UserActivityEventReason.Connected?this.sendUserActivityStateMultiple(2):this.sendUserActivityStateMultiple(1):this.transportTypeName==="xhr-polling"&&y===H.UserActivityEventReason.Modified&&this.fsm.forceReconnect("user activity/force reconnect"))},M.prototype.setAudienceSubscriptionsAsync=function(y,A){var F=this.audienceSubscriptionState;if(this.audienceSubscriptionState=y,this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME)return this.setAudienceSubscriptionsInternalAsync(y.increaseCvAndGetEventObject(),A);if(this.transportTypeName===this.XHR_POLLING_TRANSPORT_NAME){var $=this.setAudienceSubscriptionsLongpollInternalAsync(y.increaseCvAndGetEventObject(),A,F);return this.fsm.forceReconnect("set audience subscription force reconnect"),$}throw new Error("set audience subscription executed on an unknown transport")},M.prototype.setAudienceSubscriptionsUnsafeAsync=function(y){if(y)return this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME?this.setAudienceSubscriptionsInternalAsync(y,15e3):void 0},M.prototype.setAudienceSubscriptionsInternalAsync=function(y,A){return j(this,void 0,void 0,function(){var F,$,ee=this;return x(this,function(de){switch(de.label){case 0:return this.logger.info("[WebSocket] Audience subscription set requested."),F=new $e("audience.subscribe"),F.args=y,[4,new Promise(function(ze){var Oe=!1,Pe=setTimeout(function(){return Oe=!0,ze(ee.buildAudienceSubscriptionsTimeoutResponse(y))},A);ee.sendDownstreamEvent(F,function(ye,Le){Oe||(clearTimeout(Pe),ee.logger.debug("[Websocket] Audience subscription response: ".concat(Le)),ee.pendingAudienceSubscription&&ee.onAudienceSubscriptionResult(Le),ze(Le))})})];case 1:return $=de.sent(),this.manager.onAudiencesSetResolved($,y.cv),[2,$]}})})},M.prototype.setAudienceSubscriptionsLongpollInternalAsync=function(y,A,F){var $;return j(this,void 0,void 0,function(){var ee,de,ze,Oe,Pe,ye,Le=this;return x(this,function(Ye){switch(Ye.label){case 0:return this.logger.info("[XHR Polling] Audience subscription set requested."),this.pendingAudienceSubscription&&(this.logger.error("Racing audience subscriptions occured. This situation resolves into undefined scenario and/or nasal demons."),clearTimeout(this.pendingAudienceSubscription.timeoutId)),y.audiences.length===0?[2,this.handleAudienceUnsubscribeLongpoll(y.cv,F)]:[4,new Promise(function(dt){var vt=setTimeout(function(){return Le.pendingAudienceSubscription=void 0,dt(Le.buildAudienceSubscriptionsTimeoutResponse(y))},A);Le.pendingAudienceSubscription={audienceSetResolve:dt,timeoutId:vt}})];case 1:return ee=Ye.sent(),this.manager.getState()===G.TrouterState.Unknown||this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME?[2,ee]:(de=ee.responses[0],de?.result.audienceSubscriptionState===this.AUDIENCE_SUBSCRIPTION_RESULT_BAD_REQUEST?(this.clearAudienceSubscriptionStateQueryParam(),this.manager.onAudiencesSetResolved(ee,y.cv),[2,ee]):(ze=ee.responses.find(function(dt){return dt.audienceId===y.audiences[0].id}),ze?.result.audienceSubscriptionState===this.AUDIENCE_SUBSCRIPTION_RESULT_ERROR?(this.clearAudienceSubscriptionStateQueryParam(),this.manager.onAudiencesSetResolved(ee,y.cv),[2,ee]):(Oe=(($=F?.audienceSubscriptionModel.audienceSubscriptions[0])===null||$===void 0?void 0:$.id)!==de?.audienceId,F&&Oe&&(Pe=this.mapToSyntheticAudienceSubscriptionResponses(F.audienceSubscriptionModel.audienceSubscriptions,this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED,200),(ye=ee.responses).push.apply(ye,Pe)),this.manager.onAudiencesSetResolved(ee,y.cv),[2,ee])))}})})},M.prototype.clearAudienceSubscriptionStateQueryParam=function(){var y,A,F;!((F=(A=(y=this.socket)===null||y===void 0?void 0:y.socket)===null||A===void 0?void 0:A.options)===null||F===void 0)&&F.query&&(this.socket.socket.options.query=this.socket.socket.options.query.replace(this.AUDIENCE_SUBSCRIPTION_STATE_QUERY_PARAM_REGEX,""))},M.prototype.handleAudienceUnsubscribeLongpoll=function(y,A){var F;this.audienceSubscriptionState=void 0;var $={responses:[]};if(A){var ee=this.mapToSyntheticAudienceSubscriptionResponses(A.audienceSubscriptionModel.audienceSubscriptions,this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED,200);(F=$.responses).push.apply(F,ee)}return this.manager.onAudiencesSetResolved($,y),$},M.prototype.buildAudienceSubscriptionsTimeoutResponse=function(y){return this.logger.error("Audience subscription attempt has timed out."),{responses:this.mapToSyntheticAudienceSubscriptionResponses(y.audiences,this.AUDIENCE_SUBSCRIPTION_RESULT_TIMEOUT)}},M.prototype.mapToSyntheticAudienceSubscriptionResponses=function(y,A,F){return y.map(function($){return{audienceId:$.id,result:{audienceSubscriptionState:A,responseStatus:F}}})},M.prototype.expediteBackoff=function(){this.tokenBackoff.expediteIfPending()},M.prototype.sendRegisterRequest=function(){var y=this;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");if(!this.allocateResult)throw new Error("Allocate result is undefined in sendRegisterRequest()");this.logger.info("sending register request");var A=new b.Timespan;this.connectionTracker.trackStart("registration");var F=this.getRegistrationTtl()[0];this.registrarClient.register({appId:this.options.registration.pnhAppId,aesKey:"",languageId:"en-US",platform:this.options.registration.platform,templateKey:this.options.registration.pnhTemplateKey,platformUIVersion:this.options.registration.platformUIVersion,productContext:this.options.registration.productContext},{TROUTER:[{context:this.options.registration.context,path:this.allocateResult.surl,ttl:F}]}).then(function(){y.logger.info("Register request successful"),y.connectionTracker.trackEnd("registration"),y.fsm.onRegistrationSucceeded(),y.connectionTracker.sendTelemetry(R.ClientEventName.Registration,{duration:A.duration},[])}).catch(function($){y.logger.error("Register request failed. Error: ".concat($)),y.connectionTracker.trackError("registration",I($)),y.fsm.onRegistrationFailed(),y.connectionTracker.sendTelemetry(R.ClientEventName.Registration,{duration:A.duration},[])})},M.prototype.sendUnregisterRequest=function(){var y=this;this.logger.info("sending unregister request");var A=new b.Timespan;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");this.connectionTracker.trackStart("unregistration"),this.registrarClient.unregister().then(function(){y.logger.info("Unregister request successful"),y.connectionTracker.trackEnd("unregistration"),y.fsm.onUnregistrationDone(),y.connectionTracker.sendTelemetry(R.ClientEventName.Unregistration,{duration:A.duration},[])}).catch(function(F){y.logger.error("Unregister request failed. Error: ".concat(F)),y.connectionTracker.trackError("unregistration",I(F)),y.fsm.onUnregistrationDone(),y.connectionTracker.sendTelemetry(R.ClientEventName.Unregistration,{duration:A.duration},[])})},M.prototype.resetTokenBackoff=function(){this.tokenBackoff.reset()},M.prototype.cancelPendingRegistrationRequests=function(){this.registrarClient&&this.registrarClient.cancelPendingRequests()},M.prototype.clearSentEventTimers=function(){var y=Object.keys(this.pendingSentEventTimers);if(y.length>0){this.logger.debug("Clearing all pending downstream events related timers");for(var A=0,F=y;A<F.length;A++){var $=F[A];this.clearSentEventTimer(Number($))}}},M.prototype.restartIncallModeTimer=function(){var y=this;this.clearIncallModeTimerId(),this.logger.debug("Restarting incall mode timer"),this.incallModeTimerId=setTimeout(function(){y.logger.info("Call mode timer fired"),y.fsm.onIncallModeTimer()},this.options.incallModeTimeoutMs)},M.prototype.enterIncallMode=function(){this.logger.info("Entering incall mode"),this.timeoutOptions=this.options.incallTimeoutOptions,this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!0},M.prototype.exitIncallMode=function(){this.logger.info("Exiting incall mode"),this.clearIncallModeTimerId(),this.timeoutOptions=this.options.timeoutOptions,this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!1},M.prototype.isIncallMode=function(){return this.inIncallMode},M.prototype.sendDisconnectTelemetryEvent=function(y){var A={reason:y,serverClosed:!this.fsm.isActive()};this.connectionTracker.trackDisconnected(A),this.connectionTracker.clearConnectedInfo()},M.prototype.forceReconnectDueToNoRegistration=function(){this.fsm.forceReconnect("force reconnect due to no registration")},M.prototype.resetReconnectParamsOnErrorThreshold=function(){this.logger.warn("".concat(this.connectingErrorsInRow," connection attempts, server-side failure: erasing cached connection parameters")),this.reconnectParams=void 0},M.prototype.onSocketConnecting=function(y){this.logger.info("onSocketConnecting(".concat(y,")")),this.transportTypeName=y,this.connectionTracker.trackProgress("connecting",this.transportTypeName),this.fsm.onConnecting()},M.prototype.onSocketConnect=function(y){this.logger.info("onSocketConnect"),this.fsm.onSocketConnect(y)},M.prototype.onSocketConnectFailed=function(y){this.logger.error("onSocketConnectFailed"),this.connectionTracker.trackError("connect_failed",y,!0,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),this.fsm.onConnectingFailed()},M.prototype.onSocketDisconnect=function(y){var A=this.connectionTracker.getSessionLength()||0,F=V.DisconnectReason.fromRawReason(y);this.logger.error("onSocketDisconnect, reason: ".concat(F.reason)),F.reason==="dup"&&this.lastDisconnectReason==="dup"&&A<this.options.duplicateDisconnectThresholdMs&&(this.logger.warn("Socket was closed by server as Duplicate for the second time in a row "+"after ".concat(A," ms which is below the threshold of ")+"".concat(this.options.duplicateDisconnectThresholdMs," ms. Resetting cached ")+"connection parameters and making a new allocation."),this.reconnectParams=void 0),this.lastDisconnectReason=F.reason,this.fsm.onSocketDisconnect(F),this.connectionExpireTimestampInSecs=void 0},M.prototype.onSocketReconnect=function(){this.logger.error("onSocketReconnect"),this.fsm.onTrouterConnected()},M.prototype.onSocketReconnectFailed=function(y){this.logger.error("onSocketReconnectFailed with '".concat(y,"'")),this.fsm.onSocketDisconnect(V.DisconnectReason.fromSocketIoEventData("reconnecterror",y))},M.prototype.onSocketReconnecting=function(){this.logger.error("onSocketReconnecting")},M.prototype.onSocketError=function(y){this.logger.error("onSocketError with '".concat((0,b.toJson)(y),"'")),this.fsm.isConnecting()&&++this.connectingErrorsInRow>=this.connectingErrorsThreshold&&this.resetReconnectParamsOnErrorThreshold(),this.connectionTracker.trackError("connectSocket",J(y)),this.fsm.onSocketDisconnect(V.DisconnectReason.fromSocketIoEventData("socketerror",y))},M.prototype.onSocketMessage=function(y){var A,F=this;this.logger.debug("onSocketMessage");var $;try{$=new _e(y,this.logger);var ee=(A=$.headers)===null||A===void 0?void 0:A["X-Microsoft-Skype-Chain-ID"],de=ee?" Chain-Id ".concat(ee):"";this.logger.info("Received request N ".concat($.id).concat(de," CV ").concat($.correlationVector," to '").concat($.url,"'")),$.startTS=Date.now(),$.url&&this.urlPath&&$.url.startsWith(this.urlPath)&&($.shortUrl=$.url.substring(this.urlPath.length))}catch(Oe){var ze=E(Oe);return this.logger.error("unable to parse request. Error: ".concat(ze)),this.connectionTracker.trackRequest(void 0,ze),void this.connectionTracker.sendResponseError("unable to parse request, error: ".concat(Oe))}$.timeoutTimerId=setTimeout(function(){if(!$.replied){F.logger.error("Request ".concat($.id," timed out"));var Oe=new R.ResponseData($.id);Oe.status=504,Oe.headers={"Trouter-Responder":"ClientLib"},F.sendResponse($,Oe),$.timedout=!0}},this.timeoutOptions.requestTimeoutMs);try{this.connectionTracker.trackRequest($),this.fsm.onDownstreamRequest($)}catch(Oe){this.logger.error("exception in socket.on message. Error: ".concat(E(Oe))),this.connectionTracker.sendResponseError(I(Oe),$,void 0)}},M.prototype.onTrouterConnected=function(y,A,F){var $,ee,de,ze,Oe=this;if((0,ge.isV4ConnectEvent)(y)){var Pe=y;this.allocateResult=C(C({},Pe),{ttl:y.ttl.toString()}),this.populateAndCacheReconnectParams(Pe,Pe.reconnectUrl),this.populateConnectionStateFields(Pe)}else if(!this.allocateResult)return void this.logger.error("Invalid internal state - received onTrouterConnected while allocateResult is not set");this.connectingErrorsInRow=0,this.logger.info("onTrouterConnected: ".concat(this.allocateResult.url)),this.transportTypeName==="xhr-polling"&&A&&this.manager.onUserActivityStateAccepted(A.cv),!((de=(ee=($=this.socket)===null||$===void 0?void 0:$.socket)===null||ee===void 0?void 0:ee.options)===null||de===void 0)&&de.query&&(this.socket.socket.options.query+="&connected=true"),this.urlPath=this.allocateResult.url.replace(/https?:\/\/([A-z0-9\:\$\-\_\.\+\!\*\"\(\)\,]*)\//,"/");var ye=this.connectedUrl!==this.allocateResult.url;this.connectedUrl=this.allocateResult.url,this.connectionExpireTimestampInSecs=(0,b.calculateExpireTsInSec)((0,ge.ensureNumber)(y.ttl)),this.connectionTracker.trackEnd("connectSocket"),this.connectionTracker.trackConnected(ye,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),(ze=this.setAudienceSubscriptionsUnsafeAsync(F))===null||ze===void 0||ze.catch(function(Le){return Oe.logger.error("Re-subscribe to audiences has failed with ".concat(Le))}),this.fsm.onTrouterConnected()},M.prototype.onTrouterReconnect=function(y){var A=y.target;this.logger.info("onTrouterReconnect target: ".concat(A)),A==="self"?this.fsm.onReconnectRequired(!0,T.ServerInitiated):this.fsm.onReconnectRequired(!1,T.ServerInitiated,y)},M.prototype.onTrouterMessageLoss=function(y){this.logger.debug("onTrouterMessageLoss"),this.fsm.onTrouterMessageLost(y.droppedIndicators)},M.prototype.onAudienceSubscriptionResult=function(y){this.logger.info("onAudienceSubscriptionResult"),this.pendingAudienceSubscription&&(clearTimeout(this.pendingAudienceSubscription.timeoutId),this.pendingAudienceSubscription.audienceSetResolve(y),this.pendingAudienceSubscription=void 0)},M.prototype.buildV4cUrlParams=function(){var y={};return y.tc=encodeURI((0,b.toJson)(this.clientInfo)),y.timeout=Math.floor(this.timeoutOptions.pingTimeoutMs/1e3),this.options.endpointId&&(y.epid=this.options.endpointId),this.appendConnectedClientIds(this.buildQuery(y),!0)},M.prototype.attachSocketIoHandlers=function(y,A,F,$){var ee=this;y.on("connecting",function(de){ee.onSocketConnecting(de)}),y.on("connect",function(){ee.onSocketConnect(A)}),y.on("connect_failed",function(de){ee.onSocketConnectFailed(de)}),y.on("close_during_connecting",function(de){ee.onSocketConnectFailed(de)}),y.on("disconnect",function(de){ee.onSocketDisconnect(de)}),y.on("reconnect",function(){ee.onSocketReconnect()}),y.on("reconnect_failed",function(de){ee.onSocketReconnectFailed(de)}),y.on("reconnecting",function(){ee.onSocketReconnecting()}),y.on("error",function(de){ee.onSocketError(de)}),y.on("message",function(de){ee.onSocketMessage(de)}),y.on("trouter.connected",function(de){ee.onTrouterConnected(de,F,$)}),y.on("trouter.reconnect",function(de){ee.onTrouterReconnect(de)}),y.on("trouter.message_loss",function(de){ee.onTrouterMessageLoss(de)}),y.on("audience.subscriptionresult",function(de,ze){ee.onAudienceSubscriptionResult(ze)})},M.prototype.onNavigatorOnlineStatusUpdate=function(){var y=window.navigator.onLine;this.logger.debug("Browser online status update - new state: ".concat(y,", previously: ").concat(this.isNavigatorOnline)),y&&!this.isNavigatorOnline?(this.isNavigatorOnline=!0,this.tokenBackoff.expediteIfPending(),this.connectionTracker.trackProgress("browserNet","online")):!y&&this.isNavigatorOnline&&(this.isNavigatorOnline=!1,this.connectionTracker.trackProgress("browserNet","offline"))},M.prototype.onAllocationResponse=function(y,A){this.logger.info("Received allocation response ".concat(JSON.stringify(y))),this.allocateResult=y,this.populateAndCacheReconnectParams(this.allocateResult,"".concat(this.allocateResult.socketio,"v4/a")),this.populateConnectionStateFields(this.allocateResult),this.fsm.onAllocationSucceed(A)},M.prototype.populateAndCacheReconnectParams=function(y,A){this.reconnectParams=C({serviceUrl:this.options.trouterUrl,reconnectUrl:A},y.connectparams),this.manager.onConnectionParametersUpdated(this.reconnectParams)},M.prototype.populateConnectionStateFields=function(y){var A,F,$=typeof y.ttl=="string"?parseInt(y.ttl,10):y.ttl;if(this.connectionExpireTimestampInSecs=(0,b.calculateExpireTsInSec)($),this.connectionId=(A=y.id)!==null&&A!==void 0?A:"",this.connectedClientId=y.ccid,this.logger.debug("connected client id set {connectedClientId:".concat(this.connectedClientId,"}")),this.c2cUrlBase=(F=y.curlb)!==null&&F!==void 0?F:"",this.c2cUrlBase===""){var ee=y.surl.indexOf("://");ee>=0&&(ee=y.surl.indexOf("/",ee+3))>=5&&y.surl.substr(ee-5,5)===":3443"&&(this.c2cUrlBase=y.surl.substr(0,ee-5))}},M.prototype.onPingResponse=function(){this.logger.debug("onPingResponse"),this.connectionTracker.increasePingResponseCount(),this.clearPingResponseTimer(),this.fsm.onPingResponse()},M.prototype.clearPingResponseTimer=function(){this.pingResponseTimerId!==void 0&&(clearTimeout(this.pingResponseTimerId),this.pingResponseTimerId=void 0)},M.prototype.buildQuery=function(y){for(var A=[],F=0,$=Object.keys(y);F<$.length;F++){var ee=$[F];y[ee]!==void 0&&A.push("".concat(ee,"=").concat(y[ee]))}return A.join("&")},M.prototype.appendConnectedClientIds=function(y,A){var F="";y.includes("ccid=")||(F="ccid=".concat(this.connectedClientId,"&")),this.domId&&(F+="dom=".concat(this.domId,"&")),F.length>0&&(F=F.slice(0,-1));var $=A||y.includes("?")?"&":"?";return this.appendCorrelationIds(y+$+F,A)},M.prototype.appendEndpointId=function(y,A){var F=A||y.includes("?")?"&":"?";return!y.includes("epid")&&this.options.endpointId?"".concat(y).concat(F,"epid=").concat(this.options.endpointId):y},M.prototype.appendCorrelationIds=function(y,A){var F=A||y.includes("?")?"&":"?";return y.includes("cor_id")?y:"".concat(y).concat(F,"cor_id=").concat(this.options.clientCorrelationID)+"&con_num=".concat(this.clientID,"_").concat(this.connectionAttempt)},M.prototype.safeString=function(y){return typeof y=="string"?y:""},M.prototype.sendResponse=function(y,A){var F,$,ee;if(y.timedout)return this.logger.error("Request ".concat(y.id," already timed out")),1;if(y.replied)return this.logger.error("Response for request ".concat(y.id," already sent")),2;clearTimeout(y.timeoutTimerId),y.timeoutTimerId=void 0,y.replied=!0,A.headers=(F=A.headers)!==null&&F!==void 0?F:{};var de=y.correlationVector;this.logger.info("Sending response N ".concat(y.id," CV ").concat(de," with status ").concat(A.status)),de&&(A.headers[Ae]=de),!(($=y.headers)===null||$===void 0)&&$["trouter-request"]&&(A.headers["trouter-request"]=y.headers["trouter-request"]);var ze=Date.now()-y.startTS;if(A.headers["trouter-client"]=(0,b.toJson)({cd:ze}),!((ee=y.headers)===null||ee===void 0)&&ee["trouter-is-broadcast"]&&(A.headers["trouter-is-broadcast"]=y.headers["trouter-is-broadcast"]),this.logger.debug("response: ".concat((0,b.toJson)(A))),!this.socket)return this.connectionTracker.sendResponseError("no socket",y,A),4;try{return this.socket.send((0,b.toJson)(A)),A.sentTS=Date.now(),y.incrementCorrelationVector(),this.connectionTracker.trackResponse(y,ze,A),this.transportTypeName==="websocket"&&this.sendPingRequest(),0}catch(Pe){var Oe="unable to send data on response.end. Error: ".concat(E(Pe));return this.logger.error(Oe),this.connectionTracker.sendResponseError(Oe,y,A),4}},M.prototype.sendUserActivityStateMultiple=function(y){var A=this,F=new $e("user.activity"),$=this.userActivityState.increaseCvAndGetEventObject();F.args=$,this.logger.debug("Sending user activity '".concat(this.userActivityState.toEventJSON(),"', remaining ").concat(y-1));var ee=!1;this.sendDownstreamEvent(F,function(){if(ee!==!0&&(A.logger.info("User activity state: ".concat($.state,", cv: ").concat($.cv," accepted")),A.manager.onUserActivityStateAccepted($.cv),A.clearSentEventTimer(F.timeoutTimerId),y>1)){var de=setTimeout(function(){A.clearSentEventTimer(de),A.sendUserActivityStateMultiple(y-1)},A.options.userActivitySecondResendDelayMs);A.registerSentEventTimer(de,"user.activity/resend")}}),F.timeoutTimerId=setTimeout(function(){A.logger.error("Activity state response timeout is fired"),ee=!0,A.fsm.onActivityStateResponseTimeout(),A.clearSentEventTimer(F.timeoutTimerId)},this.timeoutOptions.userActivityResponseTimeoutMs),this.registerSentEventTimer(F.timeoutTimerId,"user.activity/response")},M.prototype.sendDownstreamEvent=function(y,A){this.logger.debug("Sending downstream event ".concat(y.name)),this.socket&&this.socket.emit(y.name,y.args,A)},M.prototype.registerSentEventTimer=function(y,A){this.logger.debug("registering timer ".concat(y," -> ").concat(A)),this.pendingSentEventTimers[y]=A},M.prototype.clearSentEventTimer=function(y){var A=this.pendingSentEventTimers[y];this.logger.debug("clearing timer ".concat(y," -> ").concat(A)),delete this.pendingSentEventTimers[y],clearTimeout(y)},M.prototype.getRegistrationTtl=function(){var y,A,F=(0,b.calculateTtlInSec)(this.connectionExpireTimestampInSecs);if(this.logger.debug("Current connectionID will expire in ".concat(F," seconds")),((y=this.options.registration)===null||y===void 0?void 0:y.registrarTtlSec)&&F>0){var $=this.options.registration.registrarTtlSec<F;return[Math.min(this.options.registration.registrarTtlSec,F),$]}return!((A=this.options.registration)===null||A===void 0)&&A.registrarTtlSec?[this.options.registration.registrarTtlSec,!1]:F>0?[F,!1]:[3600,!1]},M.prototype.clearIncallModeTimerId=function(){this.incallModeTimerId!==void 0&&(this.logger.debug("Clearing in-call mode timer"),clearTimeout(this.incallModeTimerId),this.incallModeTimerId=void 0)},M.prototype.applyConnectionTrackerOptions=function(y){try{y.eventLogger&&typeof y.eventLogger.logEvent=="function"?(this.connectionTracker.mergeSettings(y.telemetrySettings),this.connectionTracker.enable(y.eventLogger)):this.logger.warn("Trouter client event logging disabled due to invalid configuration.")}catch(A){this.logger.warn("Trouter client event logging disabled. Error: ".concat(E(A))),this.connectionTracker.disable()}},M.prototype.canRetryTokenFetchRequest=function(y){var A=this.options.retryLimitOnTokenFetch;return A==null||y<A||(this.logger.warn("Reached limit on maximum number of token fetch request. Current count: ".concat(y,", retry limit: ").concat(A)),!1)},M})();P.TrouterConnection=Qe},function(q,P,X){Object.defineProperty(P,"__esModule",{value:!0}),P.MessageHandlerRegistry=void 0;var L=X(1),J=X(0),E=(function(){function I(C){this.messageHandlers=[],this.logger=new J.Logger("MessageHandlers",C)}return I.prototype.register=function(C){if(this.messageHandlers.some(function(j){return j===C}))throw new Error("Registering the same handler twice is not allowed");this.messageHandlers.push(C)},I.prototype.clear=function(){this.logger.debug("Clearing message handlers"),this.messageHandlers=[]},I.prototype.active=function(){return this.messageHandlers.length>0},I.prototype.handleMessage=function(C){for(var j={resultCode:L.UNHANDLED_MESSAGE_ACK,isHandled:!1},x=0,T=this.messageHandlers;x<T.length;x++){var w=T[x],b=this.safeExecuteHandle(w,C);if(b!==void 0&&(b.isHandled===void 0||b.isHandled))return b.resultCode===void 0&&(b.resultCode=L.HANDLED_MESSAGE_ACK),b}return j},I.prototype.safeExecuteHandle=function(C,j){try{return C.handleMessage(j)}catch(x){return void this.logger.warn("Trouter message handler threw an exception: ".concat(x))}},I})();P.MessageHandlerRegistry=E},function(q,P,X){function L(I){var C,j=this;return function(x){return J(j,void 0,void 0,function(){return E(this,function(T){return x&&(C=void 0),[2,new Promise(function(w,b){I(x).then(function(R){C=R,w(R)}).catch(function(R){C!==void 0&&C.length>0&&w(C),b(R)})})]})})}}var J=this&&this.__awaiter||function(I,C,j,x){function T(w){return w instanceof j?w:new j(function(b){b(w)})}return new(j||(j=Promise))(function(w,b){function R(K){try{V(x.next(K))}catch(G){b(G)}}function _(K){try{V(x.throw(K))}catch(G){b(G)}}function V(K){K.done?w(K.value):T(K.value).then(R,_)}V((x=x.apply(I,C||[])).next())})},E=this&&this.__generator||function(I,C){function j(V){return function(K){return x([V,K])}}function x(V){if(T)throw new TypeError("Generator is already executing.");for(;R&&(R=0,V[0]&&(_=0)),_;)try{if(T=1,w&&(b=2&V[0]?w.return:V[0]?w.throw||((b=w.return)&&b.call(w),0):w.next)&&!(b=b.call(w,V[1])).done)return b;switch(w=0,b&&(V=[2&V[0],b.value]),V[0]){case 0:case 1:b=V;break;case 4:return _.label++,{value:V[1],done:!1};case 5:_.label++,w=V[1],V=[0];continue;case 7:V=_.ops.pop(),_.trys.pop();continue;default:if(b=_.trys,!(b=b.length>0&&b[b.length-1])&&(V[0]===6||V[0]===2)){_=0;continue}if(V[0]===3&&(!b||V[1]>b[0]&&V[1]<b[3])){_.label=V[1];break}if(V[0]===6&&_.label<b[1]){_.label=b[1],b=V;break}if(b&&_.label<b[2]){_.label=b[2],_.ops.push(V);break}b[2]&&_.ops.pop(),_.trys.pop();continue}V=C.call(I,_)}catch(K){V=[6,K],w=0}finally{T=b=0}if(5&V[0])throw V[1];return{value:V[0]?V[1]:void 0,done:!0}}var T,w,b,R,_={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return R={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R};Object.defineProperty(P,"__esModule",{value:!0}),P.addCacheAsBackupTo=void 0,P.addCacheAsBackupTo=L},function(q,P,X){var L=this&&this.__awaiter||function(G,H,ue,ge){function re(Z){return Z instanceof ue?Z:new ue(function(ae){ae(Z)})}return new(ue||(ue=Promise))(function(Z,ae){function Ee(Ne){try{_e(ge.next(Ne))}catch($e){ae($e)}}function Ae(Ne){try{_e(ge.throw(Ne))}catch($e){ae($e)}}function _e(Ne){Ne.done?Z(Ne.value):re(Ne.value).then(Ee,Ae)}_e((ge=ge.apply(G,H||[])).next())})},J=this&&this.__generator||function(G,H){function ue(_e){return function(Ne){return ge([_e,Ne])}}function ge(_e){if(re)throw new TypeError("Generator is already executing.");for(;Ee&&(Ee=0,_e[0]&&(Ae=0)),Ae;)try{if(re=1,Z&&(ae=2&_e[0]?Z.return:_e[0]?Z.throw||((ae=Z.return)&&ae.call(Z),0):Z.next)&&!(ae=ae.call(Z,_e[1])).done)return ae;switch(Z=0,ae&&(_e=[2&_e[0],ae.value]),_e[0]){case 0:case 1:ae=_e;break;case 4:return Ae.label++,{value:_e[1],done:!1};case 5:Ae.label++,Z=_e[1],_e=[0];continue;case 7:_e=Ae.ops.pop(),Ae.trys.pop();continue;default:if(ae=Ae.trys,!(ae=ae.length>0&&ae[ae.length-1])&&(_e[0]===6||_e[0]===2)){Ae=0;continue}if(_e[0]===3&&(!ae||_e[1]>ae[0]&&_e[1]<ae[3])){Ae.label=_e[1];break}if(_e[0]===6&&Ae.label<ae[1]){Ae.label=ae[1],ae=_e;break}if(ae&&Ae.label<ae[2]){Ae.label=ae[2],Ae.ops.push(_e);break}ae[2]&&Ae.ops.pop(),Ae.trys.pop();continue}_e=H.call(G,Ae)}catch(Ne){_e=[6,Ne],Z=0}finally{re=ae=0}if(5&_e[0])throw _e[1];return{value:_e[0]?_e[1]:void 0,done:!0}}var re,Z,ae,Ee,Ae={label:0,sent:function(){if(1&ae[0])throw ae[1];return ae[1]},trys:[],ops:[]};return Ee={next:ue(0),throw:ue(1),return:ue(2)},typeof Symbol=="function"&&(Ee[Symbol.iterator]=function(){return this}),Ee};Object.defineProperty(P,"__esModule",{value:!0}),P.TrouterManager=P.AudienceSubscriptionState=P.UserActivityObject=void 0;var E=X(3),I=X(2),C=X(4),j=X(0),x=X(5),T=X(18),w=X(7),b=X(6),R=X(19),_=(function(){function G(H,ue){this.state=H,this.correlationVector=ue!==void 0?ue:E.CorrelationVector.extend()}return G.prototype.getStateString=function(){switch(this.state){case I.UserActivityState.Active:return"active";case I.UserActivityState.Inactive:return"inactive";case I.UserActivityState.Unknown:return"unknown";default:return"undefined"}},G.prototype.increaseCvAndGetEventObject=function(){return this.correlationVector.increase(),this.toEventObject()},G.prototype.toEventObject=function(){return{state:this.getStateString(),cv:this.correlationVector.value()}},G.prototype.toEventJSON=function(){return(0,E.toJson)(this.toEventObject())},G})();P.UserActivityObject=_;var V=(function(){function G(H,ue){ue===void 0&&(ue=E.CorrelationVector.extend()),this.audienceSubscriptionModel=H,this.correlationVector=ue}return G.prototype.increaseCvAndGetEventObject=function(){return this.correlationVector.increase(),this.toEventObject()},G.prototype.toEventObject=function(){return{audiences:this.audienceSubscriptionModel.audienceSubscriptions,cv:this.correlationVector.value()}},G.prototype.toEventJSON=function(){return(0,E.toJson)(this.toEventObject())},G})();P.AudienceSubscriptionState=V;var K=(function(){function G(H,ue,ge,re,Z,ae){var Ee=this;this.logFunc=H,this.options=ue,this.tokenProvider=ge,this.usingLegacyTokenApi=re,this.listener=Z,this.tokenTypeProtocolSelector=function(Ae,_e){return Ee.options.forceV4aProtocol?"v4a":(0,x.usedProtocol)(Ae,_e)},this.logger=new j.Logger("Manager",H),this.logger.info("Created TrouterManager with options ".concat((0,E.toJson)(this.options))),this.fsm=new R.TrouterManagerFsm(H,this),this.baseEndpointUrl="",this.processedMessageLoss={},this.userActivityObject=new _(I.UserActivityState.Unknown),this.protocolSelector=ae??this.tokenTypeProtocolSelector.bind(this)}return G.prototype.start=function(){this.fsm.start()},G.prototype.stop=function(H){this.fsm.stop(H)},G.prototype.configure=function(H){this.options=H,this.firstConnection!==void 0&&this.firstConnection.configure(H),this.secondConnection!==void 0&&this.secondConnection.configure(H),this.logger.info("Reconfigured TrouterManager with options ".concat((0,E.toJson)(this.options)))},G.prototype.checkConnection=function(H){this.firstConnection!==void 0&&this.firstConnection.checkConnection(H),this.secondConnection!==void 0&&this.secondConnection.checkConnection(H)},G.prototype.resendRegistration=function(){return L(this,void 0,void 0,function(){return J(this,function(H){return this.secondConnection!==void 0?(this.logger.info("Resending registration on the second/new connection"),[2,this.secondConnection.resendRegistration()]):this.firstConnection!==void 0?(this.logger.info("Resending registration on the first/current connection"),[2,this.firstConnection.resendRegistration()]):(this.logger.info("No connection to resend registration on, will be done upon (re)connect"),[2])})})},G.prototype.getServerState=function(){if(this.firstConnection!==void 0)return this.firstConnection.getServerState()},G.prototype.getState=function(){return this.fsm.getState()},G.prototype.isInTerminalState=function(){return this.fsm.getInternalState()===C.TrouterManagerState.TerminalError},G.prototype.reportStateInfo=function(){var H=this.firstConnection?b.State[this.firstConnection.getState()]:"Unknown",ue=C.TrouterManagerState[this.fsm.getInternalState()];if(this.secondConnection){var ge=b.State[this.secondConnection.getState()];return"Manager ".concat(ue,"; 1st ").concat(H,"; 2nd ").concat(ge)}return"Manager ".concat(ue,"; Connection ").concat(H)},G.prototype.startFirstConnection=function(){var H=new w.TrouterConnection(this.logFunc,this.options,this.configuredTrouterManager(),this.tokenProvider,this.usingLegacyTokenApi,this.userActivityObject,this.protocolSelector,this.audienceSubscriptionState);this.firstConnection=H,this.getConnectionCache().then(function(ue){H.start(ue)}).catch(function(){})},G.prototype.startSecondConnection=function(H){var ue=new w.TrouterConnection(this.logFunc,this.options,this.configuredTrouterManager(),this.tokenProvider,this.usingLegacyTokenApi,this.userActivityObject,this.protocolSelector,this.audienceSubscriptionState);this.secondConnection=ue,this.firstConnection!==void 0&&this.firstConnection.disableRegistrationsAndAutoReconnect(),H?this.getConnectionCache().then(function(ge){ue.start(ge)}).catch(function(){}):ue.start()},G.prototype.stopFirstConnection=function(H){this.firstConnection!==void 0&&(this.storedFirstConnection=this.firstConnection,this.firstConnection.stop(H),this.firstConnection=void 0)},G.prototype.stopSecondConnection=function(H){this.secondConnection!==void 0&&(this.secondConnection.stop(H),this.secondConnection=void 0)},G.prototype.stopSecondConnectionDelayed=function(){if(this.secondConnection!==void 0){var H=this.secondConnection;this.secondConnection=void 0,this.logger.info("Closing an inactive connection in ".concat(Math.round(this.options.lingeringConnectionDelayMs/1e3),"s")),setTimeout(function(){H.stop(!0)},this.options.lingeringConnectionDelayMs)}},G.prototype.forceStopLingeringConnection=function(){this.storedFirstConnection&&(this.storedFirstConnection.stop(!1),this.storedFirstConnection=void 0)},G.prototype.switchConnections=function(){var H=this.firstConnection;this.firstConnection=this.secondConnection,this.secondConnection=H},G.prototype.doesSecondConnectionExist=function(){return this.secondConnection!==void 0},G.prototype.dispatchConnected=function(){if(this.firstConnection!==void 0){var H=this.firstConnection.getServerState(),ue=H.url.endsWith("/")?H.url.slice(0,-1):H.url,ge={baseEndpointUrl:ue,newEndpointUrl:ue!==this.baseEndpointUrl,c2cUrlBase:H.c2cUrlBase,clientId:H.connectedClientId,connectionId:H.connectionId,connectionTtlSec:H.getRemainingTtlInSec()};this.baseEndpointUrl=ue,this.listener.onTrouterConnected(H.url,ge)}},G.prototype.dispatchDisconnected=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},G.prototype.dispatchTerminalError=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},G.prototype.dispatchRegistrationState=function(H){this.options.registrationStateCallback&&this.options.registrationStateCallback(H)},G.prototype.expediteBackoffOnConnections=function(){var H;if(this.lastExpediteBackoffCallAt!==void 0&&Date.now()-this.lastExpediteBackoffCallAt<((H=this.options.expediteBackoffOnStartMinimumDelayMs)!==null&&H!==void 0?H:1e4))return void this.logger.info("Expedite backoff due to start() too frequent, skipping");this.lastExpediteBackoffCallAt=Date.now(),this.firstConnection!==void 0&&this.firstConnection.expediteBackoff(),this.secondConnection!==void 0&&this.secondConnection.expediteBackoff()},G.prototype.onDownstreamRequest=function(H,ue,ge){var re={id:ue.id,method:ue.method,path:"/".concat(ue.shortUrl),body:ue.body,headers:ue.headers},Z={id:ue.id,status:0,headers:{},body:"",send:function(){return Z.status<=100||Z.status>=999?3:(ge.writeHead(Z.status,Z.headers),ge.end(Z.body))}};this.listener.onTrouterRequest(re,Z)},G.prototype.onConnected=function(H){this.fsm.onConnected(H===this.firstConnection)},G.prototype.onRegistered=function(H){this.fsm.onRegistered(H===this.firstConnection)},G.prototype.onUnregistered=function(H){this.fsm.onUnregistered(H===this.firstConnection||H===this.storedFirstConnection)},G.prototype.onReconnecting=function(H){this.fsm.onReconnecting(H===this.firstConnection)},G.prototype.onReconnectIsRequired=function(H,ue,ge){this.fsm.onReconnectionRequired(H===this.firstConnection,ue,ge)},G.prototype.onDisconnected=function(H){this.fsm.onDisconnected(H===this.firstConnection||H==this.storedFirstConnection),this.storedFirstConnection=void 0},G.prototype.onTerminalError=function(){this.fsm.onTerminalError(),this.storedFirstConnection=void 0},G.prototype.onUserActivityStateAccepted=function(H){this.listener.onTrouterUserActivityStateAccepted&&this.listener.onTrouterUserActivityStateAccepted(H)},G.prototype.onAudiencesSetResolved=function(H,ue){var ge,re;(re=(ge=this.listener).onAudiencesSetResolved)===null||re===void 0||re.call(ge,H,ue)},G.prototype.onConnectionParametersUpdated=function(H){this.setConnectionCache(H)},G.prototype.setUserActivityState=function(H,ue){return this.userActivityObject=new _(H,E.CorrelationVector.extend(ue)),this.secondConnection!==void 0?(this.logger.info("Setting user activity ".concat(this.userActivityObject.toEventJSON()," on the second/new connection")),void this.secondConnection.setUserActivityState(this.userActivityObject)):this.firstConnection!==void 0?(this.logger.info("Setting user activity ".concat(this.userActivityObject.toEventJSON()," on the first/current connection")),void this.firstConnection.setUserActivityState(this.userActivityObject)):void 0},G.prototype.setAudienceSubscriptionsAsync=function(H,ue,ge){if(this.audienceSubscriptionState=new V(H,E.CorrelationVector.extend(ge)),this.secondConnection)return this.logger.info("Setting audience subscriptions ".concat(this.audienceSubscriptionState.toEventJSON()," on second/new connection")),this.secondConnection.setAudienceSubscriptionsAsync(this.audienceSubscriptionState,ue);if(this.firstConnection)return this.logger.info("Setting audience subscriptions ".concat(this.audienceSubscriptionState.toEventJSON()," on first/current connection")),this.firstConnection.setAudienceSubscriptionsAsync(this.audienceSubscriptionState,ue);throw new Error("No connection found")},G.prototype.onTrouterMessageLost=function(H){var ue=this;if(this.listener.onTrouterMessageLoss)if(H?.length){var ge=H.filter(function(Z){return ue.processedMessageLoss["".concat(Z.tag,"-").concat(Z.etag)]!==void 0});if(ge.length&&(this.logger.info("onTrouterMessageLoss - immediately acknowledging ".concat(ge.length," seen dropped indicators")),this.sendProcessedDroppedIndicators(ge),H=H.filter(function(Z){return ue.processedMessageLoss["".concat(Z.tag,"-").concat(Z.etag)]===void 0}),!H.length))return void this.logger.info("onTrouterMessageLoss - all declared dropped indicators have been seen before");var re=this.listener.onTrouterMessageLoss(H.map(function(Z){return Z.tag}));if(!re)return void this.logger.warn("onTrouterMessageLoss - some flow tag(s) have not been processed by listeners");H.forEach(function(Z){ue.processedMessageLoss["".concat(Z.tag,"-").concat(Z.etag)]=""}),this.sendProcessedDroppedIndicators(H)}else this.logger.warn("onTrouterMessageLoss - no flow tags have been provided")},G.prototype.getConnectionCache=function(){var H=this;return this.options.connectionCache?(this.logger.debug("Querying host's connection cache"),this.options.connectionCache.onGetTrouterConnectionCache().then(function(ue){var ge=ue?JSON.parse(ue):void 0;return typeof ge=="object"?ge:void 0}).catch(function(ue){return H.logger.warn("Invalid connection cache content provided: ".concat(ue)),H.connectionCache})):Promise.resolve(this.connectionCache)},G.prototype.setConnectionCache=function(H){if(this.connectionCache=H,this.options.connectionCache)try{this.options.connectionCache.onSetTrouterConnectionCache(JSON.stringify(H))}catch(ue){this.logger.warn("Error setting external connection cache: ".concat(ue))}},G.prototype.sendProcessedDroppedIndicators=function(H){return this.firstConnection!==void 0?void this.firstConnection.sendProcessedDroppedIndicators(H):this.secondConnection!==void 0?void this.secondConnection.sendProcessedDroppedIndicators(H):void 0},G.prototype.configuredTrouterManager=function(){return new T.RegistrationEnforcer(this,this.options.connectionDependsOnRegistration,this.options.delayEventsUntilRegistered)},G})();P.TrouterManager=K},function(q,P,X){Object.defineProperty(P,"__esModule",{value:!0}),P.TrouterUrlPromise=void 0;var L=X(0),J=(function(){function E(I){this.logger=new L.Logger("UrlPromise",I)}return E.prototype.getPromise=function(){var I=this;return this.url!==void 0?(this.logger.debug("returning previously resolved url: ".concat(this.url)),Promise.resolve(this.url)):(this.pendingPromise===void 0?(this.logger.debug("creating and returning promise"),this.pendingPromise=new Promise(function(C,j){I.pendingPromiseResolveRef=C,I.pendingPromiseRejectRef=j})):this.logger.debug("returning existing promise"),this.pendingPromise)},E.prototype.resolveUrl=function(I){this.url=I,this.logger.debug("got url: ".concat(this.url));var C=this.pendingPromiseResolveRef;this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,C!==void 0&&(this.logger.debug("resolving promise"),C(I))},E.prototype.rejectUrl=function(I){this.logger.debug("aborting");var C=this.pendingPromiseRejectRef;this.url=void 0,this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,C!==void 0&&(this.logger.debug("rejecting promise"),C(I))},E.prototype.resetUrl=function(){this.logger.debug("resetting url"),this.url=void 0},E})();P.TrouterUrlPromise=J},function(q,P,X){(function(L,J){(function(I,C){var j=I;j.version="0.9.6",j.protocol=1,j.transports=[],j.j=[],j.sockets={},j.connect=function(x,T){var w,b,R=j.util.parseUri(x);C&&C.location&&(R.protocol=R.protocol||C.location.protocol.slice(0,-1),R.host=R.host||(C.document?C.document.domain:C.location.hostname),R.port=R.port||C.location.port),w=j.util.uniqueUri(R);var _={host:R.host,secure:R.protocol=="https",port:R.port||(R.protocol=="https"?443:80),query:R.query||""};return j.util.merge(_,T),!_["force new connection"]&&j.sockets[w]||(b=new j.Socket(_)),!_["force new connection"]&&b&&(j.sockets[w]=b),b=b||j.sockets[w],_["skipped handshake data"]?b.of(""):b.of(R.path.length>1?R.path:"")}})(J.exports,L===void 0?window:L);var E=J.exports;(function(I,C){var j=I.util={},x=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,T=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];j.parseUri=function(b){for(var R=x.exec(b||""),_={},V=14;V--;)_[T[V]]=R[V]||"";return _},j.uniqueUri=function(b){var R=b.protocol,_=b.host,V=b.port;return"document"in C?(_=_||document.domain,V=V||(R=="https"&&document.location.protocol!=="https:"?443:document.location.port)):(_=_||"localhost",V||R!="https"||(V=443)),(R||"http")+"://"+_+":"+(V||80)},j.query=function(b,R){var _=j.chunkQuery(b||""),V=[];j.merge(_,j.chunkQuery(R||""));for(var K in _)_.hasOwnProperty(K)&&V.push(K+"="+_[K]);return V.length?"?"+V.join("&"):""},j.chunkQuery=function(b){for(var R,_={},V=b.split("&"),K=0,G=V.length;K<G;++K)R=V[K].split("="),R[0]&&(_[R[0]]=R[1]);return _};var w=!1;j.load=function(b){if("document"in C&&document.readyState==="complete"||w)return b();j.on(C,"load",b,!1)},j.on=function(b,R,_,V){b.attachEvent?b.attachEvent("on"+R,_):b.addEventListener&&b.addEventListener(R,_,V)},j.request=function(b){if(b&&typeof XDomainRequest<"u")return new XDomainRequest;if(typeof XMLHttpRequest<"u"&&(!b||j.ua.hasCORS))return new XMLHttpRequest;if(!b)try{return new window[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}return null},typeof window<"u"&&j.load(function(){w=!0}),j.defer=function(b){if(!j.ua.webkit||typeof importScripts<"u")return b();j.load(function(){setTimeout(b,100)})},j.merge=function(b,R,_,V){var K,G=V||[],H=_===void 0?2:_;for(K in R)R.hasOwnProperty(K)&&j.indexOf(G,K)<0&&(typeof b[K]=="object"&&H?j.merge(b[K],R[K],H-1,G):(b[K]=R[K],G.push(R[K])));return b},j.mixin=function(b,R){j.merge(b.prototype,R.prototype)},j.inherit=function(b,R){function _(){}_.prototype=R.prototype,b.prototype=new _},j.isArray=Array.isArray||function(b){return Object.prototype.toString.call(b)==="[object Array]"},j.intersect=function(b,R){for(var _=[],V=b.length>R.length?b:R,K=b.length>R.length?R:b,G=0,H=K.length;G<H;G++)~j.indexOf(V,K[G])&&_.push(K[G]);return _},j.indexOf=function(b,R,_){for(var V=b.length,_=_<0?_+V<0?0:_+V:_||0;_<V&&b[_]!==R;_++);return V<=_?-1:_},j.toArray=function(b){for(var R=[],_=0,V=b.length;_<V;_++)R.push(b[_]);return R},j.ua={},j.ua.hasCORS=typeof XMLHttpRequest<"u"&&(function(){try{var b=new XMLHttpRequest}catch{return!1}return b.withCredentials!=null})(),j.ua.webkit=typeof navigator<"u"&&/webkit/i.test(navigator.userAgent)})(E!==void 0?E:J.exports,L===void 0?window:L),(function(I,C){function j(){}I.EventEmitter=j,j.prototype.on=function(x,T){return this.$events||(this.$events={}),this.$events[x]?C.util.isArray(this.$events[x])?this.$events[x].push(T):this.$events[x]=[this.$events[x],T]:this.$events[x]=T,this},j.prototype.addListener=j.prototype.on,j.prototype.once=function(x,T){function w(){b.removeListener(x,w),T.apply(this,arguments)}var b=this;return w.listener=T,this.on(x,w),this},j.prototype.removeListener=function(x,T){if(this.$events&&this.$events[x]){var w=this.$events[x];if(C.util.isArray(w)){for(var b=-1,R=0,_=w.length;R<_;R++)if(w[R]===T||w[R].listener&&w[R].listener===T){b=R;break}if(b<0)return this;w.splice(b,1),w.length||delete this.$events[x]}else(w===T||w.listener&&w.listener===T)&&delete this.$events[x]}return this},j.prototype.removeAllListeners=function(x){return this.$events&&this.$events[x]&&(this.$events[x]=null),this},j.prototype.listeners=function(x){return this.$events||(this.$events={}),this.$events[x]||(this.$events[x]=[]),C.util.isArray(this.$events[x])||(this.$events[x]=[this.$events[x]]),this.$events[x]},j.prototype.emit=function(x){if(!this.$events)return!1;var T=this.$events[x];if(!T)return!1;var w=Array.prototype.slice.call(arguments,1);if(typeof T=="function")T.apply(this,w);else{if(!C.util.isArray(T))return!1;for(var b=T.slice(),R=0,_=b.length;R<_;R++)b[R].apply(this,w)}return!0}})(E!==void 0?E:J.exports,E!==void 0?E:J.parent.exports),(function(I,C){if(C&&C.parse)return I.JSON={parse:C.parse,stringify:C.stringify};throw new Error("JSON not available")})(E!==void 0?E:J.exports,typeof JSON<"u"?JSON:void 0),(function(I,C){var j=I.parser={},x=j.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],T=j.reasons=["transport not supported","client not handshaken","unauthorized"],w=j.advice=["reconnect"],b=C.JSON,R=C.util.indexOf;j.encodePacket=function(V){var K=R(x,V.type),G=V.id||"",H=V.endpoint||"",ue=V.ack,ge=null;switch(V.type){case"error":var re=V.reason?R(T,V.reason):"",Z=V.advice?R(w,V.advice):"";re===""&&Z===""||(ge=re+(Z!==""?"+"+Z:""));break;case"message":V.data!==""&&(ge=V.data);break;case"event":var ae={name:V.name};V.args&&V.args.length&&(ae.args=V.args),ge=b.stringify(ae);break;case"json":ge=b.stringify(V.data);break;case"connect":V.qs&&(ge=V.qs);break;case"ack":ge=V.ackId+(V.args&&V.args.length?"+"+b.stringify(V.args):"")}var Ee=[K,G+(ue=="data"?"+":""),H];return ge!=null&&Ee.push(ge),Ee.join(":")},j.encodePayload=function(V){var K="";if(V.length==1)return V[0];for(var G=0,H=V.length;G<H;G++)K+=""+V[G].length+""+V[G];return K};var _=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;j.decodePacket=function(H){var K=H.match(_);if(!K)return{};var G=K[2]||"",H=K[5]||"",ue={type:x[K[1]],endpoint:K[4]||""};switch(G&&(ue.id=G,K[3]?ue.ack="data":ue.ack=!0),ue.type){case"error":var K=H.split("+");ue.reason=T[K[0]]||"",ue.advice=w[K[1]]||"";break;case"message":ue.data=H||"";break;case"event":try{var ge=b.parse(H);ue.name=ge.name,ue.args=ge.args}catch{}ue.args=ue.args||[];break;case"json":try{ue.data=b.parse(H)}catch{}break;case"connect":ue.qs=H||"";break;case"ack":var K=H.match(/^([0-9]+)(\+)?(.*)/);if(K&&(ue.ackId=K[1],ue.args=[],K[3]))try{ue.args=K[3]?b.parse(K[3]):[]}catch{}break;case"disconnect":ue.reason=H}return ue},j.decodePayload=function(V){if(V.charAt(0)==""){for(var K=[],G=1,H="";G<V.length;G++)V.charAt(G)==""?(K.push(j.decodePacket(V.substr(G+1).substr(0,H))),G+=Number(H)+1,H=""):H+=V.charAt(G);return K}return[j.decodePacket(V)]}})(E!==void 0?E:J.exports,E!==void 0?E:J.parent.exports),(function(I,C){function j(x,T){this.socket=x,this.sessid=T,this.connectErrorCallback=void 0,this.isOpened=!1}I.Transport=j,C.util.mixin(j,C.EventEmitter),j.prototype.onData=function(x){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),x!==""){var T=C.parser.decodePayload(x);if(T&&T.length)for(var w=0,b=T.length;w<b;w++)this.onPacket(T[w])}return this},j.prototype.onPacket=function(x){return this.socket.setHeartbeatTimeout(),x.type=="heartbeat"?this.onHeartbeat():(x.type=="connect"&&x.endpoint==""&&this.onConnect(),x.type=="error"&&x.advice=="reconnect"&&(this.isOpened=!1),this.socket.onPacket(x),this)},j.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var x=this;this.closeTimeout=setTimeout(function(){x.onDisconnect()},this.socket.closeTimeout)}},j.prototype.onDisconnect=function(){return this.close&&this.isOpened&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},j.prototype.onConnect=function(){return this.socket.onConnect(),this.connectErrorCallback=void 0,this},j.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},j.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},j.prototype.packet=function(x){this.send(C.parser.encodePacket(x))},j.prototype.onHeartbeat=function(x){this.packet({type:"heartbeat"})},j.prototype.onOpen=function(){this.isOpened=!0,this.clearCloseTimeout(),this.socket.onOpen()},j.prototype.onClose=function(){this.isOpened=!1,this.socket.onClose(),this.onDisconnect()},j.prototype.prepareUrl=function(x){var T=this.socket.options;if(T["skipped handshake data"])return T.rewriteUrlForProxy(T["skipped handshake data"].websocketUrl+(x||""));var w=this.scheme()+"://"+T.host+":"+T.port+"/"+T.resource+"/"+C.protocol+"/"+this.name+"/"+this.sessid+(x||"");return T.rewriteUrlForProxy(w)},j.prototype.ready=function(x,T){T.call(this)},j.prototype.clearEventHandlers=function(){return this}})(E!==void 0?E:J.exports,E!==void 0?E:J.parent.exports),(function(I,C,j){function x(w){if(this.options={port:80,secure:!1,document:"document"in j&&document,resource:"socket.io",transports:C.transports.slice(),"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843},C.util.merge(this.options,w),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.disconnected=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||C.util.ua.hasCORS)){var b=this;C.util.on(j,"unload",function(){b.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function T(){}I.Socket=x,C.util.mixin(x,C.EventEmitter),x.prototype.of=function(w){return this.namespaces[w]||(this.namespaces[w]=new C.SocketNamespace(this,w),w!==""&&this.namespaces[w].packet({type:"connect"})),this.namespaces[w]},x.prototype.publish=function(){this.emit.apply(this,arguments);var w;for(var b in this.namespaces)this.namespaces.hasOwnProperty(b)&&(w=this.of(b),w.$emit.apply(w,arguments))},x.prototype.handshake=function(w){function b(ge){ge instanceof Error?R.onError(ge.message):w.apply(null,ge.split(":"))}var R=this,_=this.options;if(!R.disconnected){var V=_.rewriteUrlForProxy(["http"+(_.secure?"s":"")+":/",_.host+":"+_.port,_.resource,C.protocol,C.util.query(this.options.query,"t="+ +new Date)].join("/"));if(this.isXDomain()&&!C.util.ua.hasCORS){var K=document.getElementsByTagName("script")[0],G=document.createElement("script");G.src=V+"&jsonp="+C.j.length,K.parentNode.insertBefore(G,K),C.j.push(function(ge){b(ge),G.parentNode.removeChild(G)})}else{var H=C.util.request();H.open("GET",V,!0);var ue=this.options.requestHeaders;ue!==void 0&&Object.keys(ue).forEach(function(ge){H.setRequestHeader(ge,ue[ge])}),H.onreadystatechange=function(){H.readyState==4&&(H.onreadystatechange=T,H.status==200?b(H.responseText):!R.reconnecting&&R.onError(H.responseText))},H.send(null)}}},x.prototype.getTransport=function(w){for(var b,R=w||this.transports,_=0;b=R[_];_++)if(C.Transport[b]&&C.Transport[b].check(this)&&(!this.isXDomain()||C.Transport[b].xdomainCheck()))return new C.Transport[b](this,this.sessionid);return null},x.prototype.connect=function(w){if(this.connecting||this.disconnected)return this;var b=this,R=function(V,K,G,H){function ue(){if(!b.connected&&!b.disconnected)if(b.connecting=!1,clearTimeout(b.connectTimeoutTimer),b.options["try multiple transports"]){for(;b.remainingTransports.length>0&&b.remainingTransports.splice(0,1)[0]!=b.transport.name;);b.remainingTransports.length?ge(b.remainingTransports):b.publish("connect_failed")}else b.publish("connect_failed")}function ge(re){if(b.transport&&(b.transport.clearTimeouts(),b.transport.clearEventHandlers()),b.transport=b.getTransport(re),!b.transport||b.disconnected)return b.publish("connect_failed");b.transport.ready(b,function(){b.connecting=!0,b.publish("connecting",b.transport.name),b.transport.open(ue),b.options["connect timeout"]&&(b.connectTimeoutTimer=setTimeout(function(){ue()},b.options["connect timeout"]))})}b.sessionid=V,b.closeTimeout=1e3*G+2e3,b.heartbeatTimeout=1e3*K+2e3,b.transports=H?C.util.intersect(H.split(","),b.options.transports):b.options.transports,b.setHeartbeatTimeout(),b.remainingTransports=b.transports.slice(0),ge(b.transports),b.once("connect",function(){clearTimeout(b.connectTimeoutTimer),w&&typeof w=="function"&&w()})};if(this.options["skipped handshake data"]){var _=this.options["skipped handshake data"];R("v4c-"+new Date().getTime(),_.timeout,_.timeout,"websocket")}else this.handshake(R);return this},x.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);var w=this;this.heartbeatTimeoutTimer=setTimeout(function(){w.transport.onClose()},this.heartbeatTimeout)},x.prototype.packet=function(w){return this.connected&&!this.doBuffer?this.transport.packet(w):this.buffer.push(w),this},x.prototype.setBuffer=function(w){this.doBuffer=w,!w&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])},x.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this.disconnected=!0,this},x.prototype.disconnectSync=function(){var w=C.util.request(),b=this.resource+"/"+C.protocol+"/"+this.sessionid;w.open("GET",b,!0),this.onDisconnect("booted")},x.prototype.isXDomain=function(){var w=j.location.port||(j.location.protocol=="https:"?443:80);return this.options.host!==j.location.hostname||this.options.port!=w},x.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},x.prototype.onOpen=function(){this.open=!0},x.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},x.prototype.onPacket=function(w){this.of(w.endpoint).onPacket(w)},x.prototype.onError=function(w){w&&w.advice&&w.advice==="reconnect"&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",w&&w.reason?w.reason:w)},x.prototype.onDisconnect=function(w){var b=this.connected,R=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(b||R)&&(this.transport.close(),this.transport.clearTimeouts(),b?(this.publish("disconnect",w),w!="booted"&&this.options.reconnect&&!this.reconnecting&&this.reconnect()):this.publish("close_during_connecting",w))},x.prototype.reconnect=function(){function w(){if(R.connected){for(var G in R.namespaces)R.namespaces.hasOwnProperty(G)&&G!==""&&R.namespaces[G].packet({type:"connect"});R.publish("reconnect",R.transport.name,R.reconnectionAttempts)}clearTimeout(R.reconnectionTimer),R.removeListener("connect_failed",b),R.removeListener("connect",b),R.reconnecting=!1,delete R.reconnectionAttempts,delete R.reconnectionDelay,delete R.reconnectionTimer,delete R.redoTransports,R.options["try multiple transports"]=V}function b(){if(R.reconnecting)return R.connected?w():R.connecting&&R.reconnecting?R.reconnectionTimer=setTimeout(b,1e3):void(R.reconnectionAttempts++>=_?R.redoTransports?(R.publish("reconnect_failed"),w()):(R.on("connect_failed",b),R.options["try multiple transports"]=!0,R.transport=R.getTransport(),R.redoTransports=!0,R.connect()):(R.reconnectionDelay<K&&(R.reconnectionDelay*=2),R.connect(),R.publish("reconnecting",R.reconnectionDelay,R.reconnectionAttempts),R.reconnectionTimer=setTimeout(b,R.reconnectionDelay)))}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var R=this,_=this.options["max reconnection attempts"],V=this.options["try multiple transports"],K=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(b,this.reconnectionDelay),this.on("connect",b)}})(E!==void 0?E:J.exports,E!==void 0?E:J.parent.exports,L===void 0?window:L),(function(I,C){function j(T,w){this.socket=T,this.name=w||"",this.flags={},this.json=new x(this,"json"),this.ackPackets=0,this.acks={}}function x(T,w){this.namespace=T,this.name=w}I.SocketNamespace=j,C.util.mixin(j,C.EventEmitter),j.prototype.$emit=C.EventEmitter.prototype.emit,j.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},j.prototype.packet=function(T){return T.endpoint=this.name,this.socket.packet(T),this.flags={},this},j.prototype.send=function(T,w){var b={type:this.flags.json?"json":"message",data:T};return typeof w=="function"&&(b.id=++this.ackPackets,b.ack=!0,this.acks[b.id]=w),this.packet(b)},j.prototype.emit=function(T){var w=Array.prototype.slice.call(arguments,1),b=w[w.length-1],R={type:"event",name:T};return typeof b=="function"&&(R.id=++this.ackPackets,R.ack="data",this.acks[R.id]=b,w=w.slice(0,w.length-1)),R.args=w,this.packet(R)},j.prototype.disconnect=function(){return this.name===""?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},j.prototype.onPacket=function(T){function w(){b.packet({type:"ack",args:C.util.toArray(arguments),ackId:T.id})}var b=this;switch(T.type){case"connect":this.$emit("connect");break;case"disconnect":this.name===""?this.socket.onDisconnect(T.reason||"booted"):this.$emit("disconnect",T.reason||"");break;case"message":case"json":var R=["message",T.data];T.ack=="data"?R.push(w):T.ack&&this.packet({type:"ack",ackId:T.id}),this.$emit.apply(this,R);break;case"event":var R=[T.name].concat(T.args);T.ack=="data"&&R.push(w),this.$emit.apply(this,R);break;case"ack":this.acks[T.ackId]&&(this.acks[T.ackId].apply(this,T.args),delete this.acks[T.ackId]);break;case"error":T.advice?this.socket.onError(T):T.reason=="unauthorized"?this.$emit("connect_failed",T.reason):this.$emit("error",T.reason)}},x.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},x.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}})(E!==void 0?E:J.exports,E!==void 0?E:J.parent.exports),(function(I,C,j){function x(w){C.Transport.apply(this,arguments)}function T(){}I.websocket=x,C.util.inherit(x,C.Transport),x.prototype.name="websocket",x.prototype.open=function(w){var b,R=C.util.query(this.socket.options.query),_=this;return this.connectErrorCallback=w,b||(b=j.MozWebSocket||j.WebSocket),this.websocket=new b(this.prepareUrl(R)),this.websocket.onopen=function(){_.onOpen(),_.socket.setBuffer(!1)},this.websocket.onmessage=function(V){_.onData(V.data)},this.websocket.onclose=function(){_.onClose(),_.socket.setBuffer(!0)},this.websocket.onerror=function(V){_.onError(V)},this},x.prototype.send=function(w){return this.websocket.send(w),this},x.prototype.payload=function(w){for(var b=0,R=w.length;b<R;b++)this.packet(w[b]);return this},x.prototype.close=function(){return this.websocket.close(),this},x.prototype.onError=function(w){this.connectErrorCallback!==void 0&&(this.connectErrorCallback(),this.connectErrorCallback=void 0),this.socket.onError(w)},x.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},x.check=function(){return"WebSocket"in j&&!("__addTask"in WebSocket)||"MozWebSocket"in j},x.xdomainCheck=function(){return!0},x.prototype.clearEventHandlers=function(){return this.websocket&&(this.websocket.onopen=this.websocket.onmessage=this.websocket.onclose=this.websocket.onerror=T),this},C.transports.push("websocket")})(E!==void 0?E.Transport:J.exports,E!==void 0?E:J.parent.exports,L===void 0?window:L),(function(I,C,j){function x(w){w&&C.Transport.apply(this,arguments)}function T(){}I.XHR=x,C.util.inherit(x,C.Transport),x.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},x.prototype.payload=function(w){for(var b=[],R=0,_=w.length;R<_;R++)b.push(C.parser.encodePacket(w[R]));this.send(C.parser.encodePayload(b))},x.prototype.send=function(w){return this.post(w),this},x.prototype.post=function(w){function b(){this.readyState==4&&(this.onreadystatechange=T,this.status==200?(clearTimeout(this.ackTimeoutTimer),_.socket.setBuffer(!1)):_.onClose())}function R(){this.onload=T,_.socket.setBuffer(!1)}var _=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),j.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=R:this.sendXHR.onreadystatechange=b,this.sendXHR.send(w),_.sendXHR.ackTimeoutTimer=setTimeout(function(){_.onClose()},_.socket.options.ackTimeoutMs)},x.prototype.close=function(){return this.onClose(),this},x.prototype.request=function(w){var b=C.util.request(this.socket.isXDomain()),R=C.util.query(this.socket.options.query,"t="+ +new Date);b.open(w||"GET",this.prepareUrl(R),!0);var _=this.socket.options.requestHeaders;if(_!==void 0&&Object.keys(_).forEach(function(V){b.setRequestHeader(V,_[V])}),w=="POST")try{b.setRequestHeader?b.setRequestHeader("Content-type","text/plain;charset=UTF-8"):b.contentType="text/plain"}catch{}return b},x.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},x.check=function(w,b){try{var R=C.util.request(b),_=j.XDomainRequest&&R instanceof XDomainRequest,V=w&&w.options&&w.options.secure?"https:":"http:",K=V!=j.location.protocol;if(R&&(!_||!K))return!0}catch{}return!1},x.xdomainCheck=function(){return x.check(null,!0)},x.prototype.clearEventHandlers=function(){return this.sendXHR&&(this.sendXHR.onreadystatechange=this.sendXHR.onload=T),this}})(E!==void 0?E.Transport:J.exports,E!==void 0?E:J.parent.exports,L===void 0?window:L),(function(I,C,j){function x(){C.Transport.XHR.apply(this,arguments)}function T(){}I["xhr-polling"]=x,C.util.inherit(x,C.Transport.XHR),C.util.merge(x,C.Transport.XHR),x.prototype.name="xhr-polling",x.prototype.open=function(w){var b=this;return b.connectErrorCallback=w,C.Transport.XHR.prototype.open.call(b),!1},x.prototype.get=function(){function w(){this.readyState==4&&(this.onreadystatechange=T,this.status==200?(_.connectErrorCallback=void 0,_.onData(this.responseText),_.get()):(_.onClose(),_.connectErrorCallback!==void 0&&(_.connectErrorCallback(),_.connectErrorCallback=void 0)))}function b(){_.connectErrorCallback=void 0,this.onload=T,this.onerror=T,_.onData(this.responseText),_.get()}function R(){_.onClose(),_.connectErrorCallback!==void 0&&(_.connectErrorCallback(),_.connectErrorCallback=void 0)}if(this.isOpened){var _=this;this.xhr=this.request(),j.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=b,this.xhr.onerror=R):this.xhr.onreadystatechange=w,this.xhr.send(null)}},x.prototype.onClose=function(){if(C.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=T;try{this.xhr.abort()}catch{}this.xhr=null}},x.prototype.ready=function(w,b){var R=this;C.util.defer(function(){b.call(R)})},x.prototype.clearEventHandlers=function(){return C.Transport.XHR.prototype.clearEventHandlers.call(this),this.xhr&&(this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=T),this},C.transports.push("xhr-polling")})(E!==void 0?E.Transport:J.exports,E!==void 0?E:J.parent.exports,L===void 0?window:L),P.io=E}).call(P,X(13),X(14)(q))},function(q,P){var X;X=(function(){return this})();try{X=X||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(X=window)}q.exports=X},function(q,P){q.exports=function(X){return X.webpackPolyfill||(X.deprecate=function(){},X.paths=[],X.children||(X.children=[]),Object.defineProperty(X,"loaded",{enumerable:!0,get:function(){return X.l}}),Object.defineProperty(X,"id",{enumerable:!0,get:function(){return X.i}}),X.webpackPolyfill=1),X}},function(q,P,X){Object.defineProperty(P,"__esModule",{value:!0}),P.ConnectionTracker=P.Properties=P.TrackerStep=P.ClientEventName=P.ResponseData=void 0;var L=X(3),J=X(1),E=X(0),I=(function(){function R(_){this.id=_,this.status=200,this.headers={},this.body=""}return R})();P.ResponseData=I;var C;(function(R){R.Connected="trouter_js_client_connected",R.Disconnected="trouter_js_client_disconnected",R.Error="trouter_js_client_error",R.Progress="trouter_js_client_progress",R.Response="trouter_js_client_response",R.Request="trouter_js_client_request",R.CheckConnection="trouter_js_client_check_connection",R.Registration="trouter_js_client_registration",R.Unregistration="trouter_js_client_unregistration"})(C||(P.ClientEventName=C={}));var j=(function(){function R(_,V,K,G,H){this.stepName=_,this.operation=V,this.delta=K,this.ts=G,this.error=H}return R})();P.TrackerStep=j;var x=(function(){function R(){}return R})();P.Properties=x;var T=(function(){function R(){this.numberOfPingReplies=0,this.connectedTimestamp=0,this.isNewUrl=!1,this.transportType="",this.connectionNumber=0}return R})(),w=(function(){function R(){this.enabled=!1,this.numberOfStepsToMaintain=40,this.logHealthCheckError=!1,this.sendProgressTimeoutSecs=55,this.logSendPingError=!1,this.maxBackoffInMs=12e4,this.trouter_js_client_connected=!1,this.trouter_js_client_disconnected=!1,this.trouter_js_client_error=!1,this.trouter_js_client_progress=!1,this.trouter_js_client_response=!1,this.trouter_js_client_request=!1,this.trouter_js_client_registration=!1,this.trouter_js_client_unregistration=!1,this.trouter_js_client_check_connection=!0}return R})(),b=(function(){function R(_,V,K,G,H,ue,ge){this.clientId=V,this.clientInfo=K,this.getServerState=G,this.endpointId=H,this.clientCorrelationID=ue,this.environment=ge,this.logger=new E.Logger("ConnectionTracker",_),this.clientCorrelationID=ue!==void 0?ue:"",this.steps=[],this.connectionAttempt=0,this.totalStepCount=0,this.beginTimestamp=new L.Timespan,this.eventLogSettings=new w,this.connectedInfo=new T}return R.prototype.enable=function(_){this.eventLogSettings.enabled=!0,this.eventLogger=_},R.prototype.disable=function(){this.eventLogSettings.enabled=!1},R.prototype.sendProgress=function(_){this.steps.length>0&&this.sendTelemetry(C.Progress,_,this.steps)},R.prototype.cancelProgressTimer=function(){this.progressTimeout!==void 0&&(clearTimeout(this.progressTimeout),this.progressTimeout=void 0)},R.prototype.resetProgressSendTimer=function(){var _=this;this.cancelProgressTimer(),this.eventLogSettings.sendProgressTimeoutSecs!==void 0&&this.eventLogSettings.sendProgressTimeoutSecs>0&&(this.progressTimeout=setTimeout(function(){_.sendProgress({reason:"timeout",timeoutSecs:_.eventLogSettings.sendProgressTimeoutSecs})},1e3*this.eventLogSettings.sendProgressTimeoutSecs))},R.prototype.setConnectedInfo=function(_,V){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=Date.now(),this.connectedInfo.isNewUrl=_,this.connectedInfo.transportType=V,++this.connectedInfo.connectionNumber},R.prototype.clearConnectedInfo=function(){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=0,this.connectedInfo.isNewUrl=!0,this.connectedInfo.transportType=""},R.prototype.copyProperties=function(_,V){for(var K=0,G=Object.keys(V);K<G.length;K++){var H=G[K];V[H]!==void 0&&(_[H.replace(/-/g,"_")]={value:V[H]})}},R.prototype.increasePingResponseCount=function(){++this.connectedInfo.numberOfPingReplies},R.prototype.sendTelemetry=function(_,V,K){try{if(this.eventLogSettings.enabled===!0&&this.eventLogSettings[_]===!0&&this.eventLogger!==void 0){var G=this.getServerState(),H={name:_,properties:{connectionAttempt:{value:this.connectionAttempt},epid:{value:this.endpointId},clientCorrelationID:{value:this.clientCorrelationID},steps:{value:(0,L.toJson)(K)},clientID:{value:this.clientId},eventVersion:{value:3},environment:{value:this.environment},cv:{value:J.CLIENT_VERSION},ua:{value:this.clientInfo.ua},connectionId:{value:G.connectionId},connectedClientId:{value:G.connectedClientId},domId:{value:G.domId},url:{value:G.unsecureUrl},surl:{value:G.url},ttlInSecs:{value:G.getRemainingTtlInSec()},numberOfPingReplies:{value:this.connectedInfo.numberOfPingReplies},connectedTimestamp:{value:this.connectedInfo.connectedTimestamp},isNewUrl:{value:this.connectedInfo.isNewUrl},transportType:{value:this.connectedInfo.transportType},connectionNumber:{value:this.connectedInfo.connectionNumber}}};this.copyProperties(H.properties,V),this.eventLogger.logEvent(H)}}catch(ue){this.logger.warn("error in sending event ".concat(_,": ").concat((0,L.toJson)(ue)))}},R.prototype.createStep=function(_,V,K){return new j(_,V,this.beginTimestamp.duration,Date.now(),K)},R.prototype.addStep=function(_,V,K){if(this.eventLogSettings.enabled!==!1&&(this.steps.length===0&&this.beginTimestamp.reset(),this.steps.push(this.createStep(_,V,K)),++this.totalStepCount,this.eventLogSettings.numberOfStepsToMaintain!==void 0&&this.steps.length>this.eventLogSettings.numberOfStepsToMaintain)){var G=this.steps.slice(0);this.steps.length=0,this.sendTelemetry(C.Progress,{reason:"flush"},G)}},R.prototype.trackStart=function(_){this.addStep(_,"start")},R.prototype.trackEnd=function(_){this.addStep(_,"end")},R.prototype.trackError=function(_,V,K,G){K===void 0&&(K=!0),_==="health"&&this.eventLogSettings.logHealthCheckError!==!0||_==="ping"&&this.eventLogSettings.logSendPingError===!1||(G===void 0&&(G="error"),K===!0&&this.addStep(_,G,V),this.sendTelemetry(C.Error,{},[this.createStep(_,G,V)]))},R.prototype.trackProgress=function(_,V){this.addStep(_,V)},R.prototype.trackConnected=function(_,V){this.setConnectedInfo(_,V);var K=this.steps.slice(0),G=this.totalStepCount,H=this.beginTimestamp.duration;this.steps.length=0,this.totalStepCount=0,this.sendTelemetry(C.Connected,{stepCount:K.length,totalStepCount:G,connectionEstablishmentMs_Total:H},K),this.cancelProgressTimer()},R.prototype.getSessionLength=function(){return Date.now()-this.connectedInfo.connectedTimestamp},R.prototype.trackDisconnected=function(_){_.sessionLengthMS=this.getSessionLength(),this.sendTelemetry(C.Disconnected,_,[]),this.resetProgressSendTimer()},R.prototype.trackNewConnection=function(){++this.connectionAttempt},R.prototype.trackRequest=function(_,V){var K={};V!==void 0&&(K.hasError=!0,K.error=V);try{if(_){K.requestID=_.id,K.httpMethod=_.method,K.url=_.url,K.bodyLength=_.body.length,K.shortUrl=_.shortUrl,K.requestTimeStamp=_.startTS,K.correlationVector=_.correlationVector;for(var G=_.headers,H=0,ue=Object.keys(G);H<ue.length;H++){var ge=ue[H];K[ge]=G[ge]}}}catch(re){K.hasError=!0,K.error="".concat(K.error," error creating request context ").concat((0,L.toJson)(re))}this.sendTelemetry(C.Request,K,[])},R.prototype.trackResponse=function(_,V,K,G){var H={};G!==void 0&&(H.hasError=!0,H.error=G);try{if(H.responseTimestamp=K!==void 0?K.sentTS:Date.now(),_){H.requestID=_.id,H.httpMethod=_.method,H.shortUrl=_.shortUrl,H.correlationVector=_.correlationVector;for(var ue=_.headers,ge=0,re=Object.keys(ue);ge<re.length;ge++){var Z=re[ge];H[Z]=ue[Z]}}K&&(H.latencyMS=V,H.responseCode=K.status,H.responseLength=K.body.length)}catch(ae){H.hasError=!0,H.error="".concat(H.error," error creating response context ").concat((0,L.toJson)(ae))}this.sendTelemetry(C.Response,H,[])},R.prototype.sendResponseError=function(_,V,K){this.trackResponse(V,void 0,K,_)},R.prototype.close=function(){this.sendProgress({reason:"closed"}),this.steps.length=0,this.cancelProgressTimer()},R.prototype.mergeSettings=function(_){if(_){this.eventLogSettings.numberOfStepsToMaintain=Math.min(40,Math.max(10,_.numberOfStepsToMaintain!==void 0?_.numberOfStepsToMaintain:0));var V=Math.min(3600,Math.max(55,_.sendProgressTimeoutSecs!==void 0?_.sendProgressTimeoutSecs:0));this.eventLogSettings.logHealthCheckError=_.logHealthCheckError,this.eventLogSettings.logSendPingError=_.logSendPingError;for(var K=0,G=Object.keys(C).map(function(ue){return C[ue]});K<G.length;K++){var H=G[K];_[H]!==void 0&&(this.eventLogSettings[H]=_[H])}this.eventLogSettings.sendProgressTimeoutSecs!==V&&(this.eventLogSettings.sendProgressTimeoutSecs=V,this.resetProgressSendTimer())}},R})();P.ConnectionTracker=b},function(q,P,X){Object.defineProperty(P,"__esModule",{value:!0}),P.DisconnectReason=void 0;var L=(function(){function J(E,I,C){this.reason=E,this.claims=I,this.details=C}return J.fromRawReason=function(E,I){if(E===""||E==="dup")return new J(E);try{var C=JSON.parse(E);return typeof C!="object"||C.reason===void 0?(I?.error("invalid disconnect reason format"),new J("unknown",void 0,E)):new J(C.reason,C.claims,C.details)}catch{return new J("disconnect",void 0,E)}},J.fromSocketIoEventData=function(E,I){return typeof I=="string"?new J(E,void 0,I):void 0},J.prototype.toTelemetryString=function(){return this.reason==="socketerror"||this.reason==="reconnecterror"||this.reason==="disconnect"?this.details:this.reason},J})();P.DisconnectReason=L},function(q,P,X){function L(E,I,C){if(E===void 0||I===void 0)return!1;var j=Date.now()-E;return j>I*C.tolerance&&j>C.minimumWaitMs}Object.defineProperty(P,"__esModule",{value:!0}),P.ExponentialBackoff=void 0;var J=(function(){function E(I,C,j){j===void 0&&(j={tolerance:2,minimumWaitMs:1e4}),this.logger=I,this.maxBackoffInMs=C,this.gapDetectionSettings=j,this.backoffId=0,this.backoffCount=0}return E.calculateNextBackoffMs=function(I,C){var j=1+.4*(Math.random()-.5),x=1e3*Math.pow(2,I)*j;return x=Math.round(x),Math.min(C,x)},E.prototype.setMaxBackoffMs=function(I){this.maxBackoffInMs=I},E.prototype.backoff=function(I,C){var j=this;if(this.timerHandle!==void 0&&(this.logger.debug("Clearing current back off"),clearTimeout(this.timerHandle),this.timerHandle=void 0),this.previousCompleteTime!==void 0){var x=Date.now()-this.previousCompleteTime;x>this.maxBackoffInMs*this.gapDetectionSettings.tolerance&&x>this.gapDetectionSettings.minimumWaitMs&&(this.logger.info("Back off for ".concat(I," with ID ").concat(this.backoffId," will be reset due to a lot of time having passed since the previous backoff (").concat(x," ms)")),this.backoffCount=0,this.previousCompleteTime=void 0)}var T=E.calculateNextBackoffMs(this.backoffCount,this.maxBackoffInMs);this.backoffId++,this.backoffCount++,this.logger.info("Backing off ".concat(I," for ").concat(T," milliseconds with ID ").concat(this.backoffId)),this.callback=function(b,R){L(b,R,j.gapDetectionSettings)&&(j.logger.info("Back off for ".concat(I," with ID ").concat(j.backoffId," will be reset due to the wait (").concat(Date.now()-(b??0)," ms) being longer than expected (").concat(R," ms)")),j.backoffCount=0),j.logger.info("Back off for ".concat(I," with ID ").concat(j.backoffId," complete, invoking handler")),j.timerHandle=void 0,j.callback=void 0,j.previousCompleteTime=Date.now(),C()};var w=Date.now();this.timerHandle=setTimeout(function(){var b;return(b=j.callback)===null||b===void 0?void 0:b.call(j,w,T)},T)},E.prototype.reset=function(){this.timerHandle!==void 0&&(this.logger.debug("Resetting back off with ID ".concat(this.backoffId)),clearTimeout(this.timerHandle),this.timerHandle=void 0,this.callback=void 0),this.backoffCount=0},E.prototype.expediteIfPending=function(){if(this.backoffCount=0,this.timerHandle!==void 0){this.logger.debug("Expediting back off with ID ".concat(this.backoffId)),clearTimeout(this.timerHandle),this.timerHandle=void 0;var I=this.callback;this.callback=void 0,I&&I()}},E})();P.ExponentialBackoff=J},function(q,P,X){var L=this&&this.__spreadArray||function(C,j,x){if(x||arguments.length===2)for(var T,w=0,b=j.length;w<b;w++)!T&&w in j||(T||(T=Array.prototype.slice.call(j,0,w)),T[w]=j[w]);return C.concat(T||Array.prototype.slice.call(j))};Object.defineProperty(P,"__esModule",{value:!0}),P.LoggingManagerConsumer=P.RegistrationEnforcer=void 0;var J=X(6),E=(function(){function C(j,x,T){this.wrapped=j,this.shouldConnectionDependOnRegistration=x,this.shouldHoldBackEvents=T,this.isRegistered=!1,this.heldBackEvents=[]}return C.prototype.onDownstreamRequest=function(j,x,T){this.passIfRegisteredOrNotNeeded("onDownstreamRequest",j,x,T)},C.prototype.onConnected=function(j){this.passIfRegisteredOrNotNeeded("onConnected",j)},C.prototype.onRegistered=function(j){this.isRegistered=!0,this.wrapped.onRegistered(j),this.fireHeldBackEvents()},C.prototype.onUnregistered=function(j){this.isRegistered=!1,this.wrapped.onUnregistered(j),j.getState()===J.State.Connected&&this.shouldConnectionDependOnRegistration()&&j.forceReconnectDueToNoRegistration()},C.prototype.onReconnecting=function(j){this.wrapped.onReconnecting(j)},C.prototype.onReconnectIsRequired=function(j,x,T){this.wrapped.onReconnectIsRequired(j,x,T)},C.prototype.onDisconnected=function(j){this.isRegistered=!1,this.dropHeldBackEvents(),this.wrapped.onDisconnected(j)},C.prototype.onTerminalError=function(j){this.wrapped.onTerminalError(j)},C.prototype.onConnectionParametersUpdated=function(j){this.wrapped.onConnectionParametersUpdated(j)},C.prototype.onTrouterMessageLost=function(j){this.passIfRegisteredOrNotNeeded("onTrouterMessageLost",j)},C.prototype.onUserActivityStateAccepted=function(j){this.passIfRegisteredOrNotNeeded("onUserActivityStateAccepted",j)},C.prototype.onAudiencesSetResolved=function(j,x){this.passIfRegisteredOrNotNeeded("onAudiencesSetResolved",j,x)},C.prototype.getState=function(){return this.wrapped.getState()},C.prototype.holdBackEvent=function(j){for(var x=[],T=1;T<arguments.length;T++)x[T-1]=arguments[T];this.heldBackEvents.push({kind:j,args:x})},C.prototype.passIfRegisteredOrNotNeeded=function(j){for(var x,T=[],w=1;w<arguments.length;w++)T[w-1]=arguments[w];var b=this.shouldConnectionDependOnRegistration(),R=this.shouldHoldBackEvents();b&&R||this.fireHeldBackEvents(b?function(_){return _.kind!=="onConnected"}:void 0),this.isRegistered||!b||R===!1&&j!=="onConnected"?(x=this.wrapped)[j].apply(x,T):this.holdBackEvent.apply(this,L([j],T,!1))},C.prototype.fireHeldBackEvents=function(j){for(var x,T=0,w=this.heldBackEvents;T<w.length;T++){var b=w[T];(j===void 0||j(b))&&(x=this.wrapped)[b.kind].apply(x,b.args)}this.heldBackEvents=j===void 0?[]:this.heldBackEvents.filter(function(R){return!j(R)})},C.prototype.dropHeldBackEvents=function(){this.heldBackEvents=[]},C})();P.RegistrationEnforcer=E;var I=(function(){function C(j,x,T,w){this.wrapped=j,this.prefix=x,this.logger=T,this.onEventAction=w}return C.prototype.onEvent=function(j,x){var T;this.onEventAction!==void 0?this.onEventAction(j,x):((T=this.logger)!==null&&T!==void 0?T:console).log("".concat(this.prefix," TracingEnforcer: ").concat(j,"(").concat(x,")"))},C.prototype.onDownstreamRequest=function(j,x,T){this.onEvent("onDownstreamRequest",JSON.stringify({request:x,response:T})),this.wrapped.onDownstreamRequest(j,x,T)},C.prototype.onConnected=function(j){this.onEvent("onConnected",j.getState().toString()),this.wrapped.onConnected(j)},C.prototype.onRegistered=function(j){this.onEvent("onRegistered",j.getState().toString()),this.wrapped.onRegistered(j)},C.prototype.onUnregistered=function(j){this.onEvent("onUnregistered",j.getState().toString()),this.wrapped.onUnregistered(j)},C.prototype.onReconnecting=function(j){this.onEvent("onReconnecting",j.getState().toString()),this.wrapped.onReconnecting(j)},C.prototype.onReconnectIsRequired=function(j,x,T){this.onEvent("onReconnectIsRequired",JSON.stringify({connection:j.getState().toString(),useConnectParamsFromCache:x,reason:T})),this.wrapped.onReconnectIsRequired(j,x,T)},C.prototype.onDisconnected=function(j){this.onEvent("onDisconnected",j.getState().toString()),this.wrapped.onDisconnected(j)},C.prototype.onTerminalError=function(j){this.onEvent("onTerminalError",JSON.stringify({connection:j})),this.wrapped.onTerminalError(j)},C.prototype.onConnectionParametersUpdated=function(j){this.onEvent("onConnectionParametersUpdated",JSON.stringify({connectParams:j})),this.wrapped.onConnectionParametersUpdated(j)},C.prototype.onTrouterMessageLost=function(j){this.onEvent("onTrouterMessageLost",JSON.stringify({flowTags:j})),this.wrapped.onTrouterMessageLost(j)},C.prototype.onUserActivityStateAccepted=function(j){this.onEvent("onUserActivityStateAccepted",JSON.stringify({cv:j})),this.wrapped.onUserActivityStateAccepted(j)},C.prototype.onAudiencesSetResolved=function(j,x){this.onEvent("onAudiencesSetResolved",JSON.stringify({audienceSubscriptionsResponse:j,cv:x})),this.wrapped.onAudiencesSetResolved(j,x)},C.prototype.getState=function(){return this.wrapped.getState()},C})();P.LoggingManagerConsumer=I},function(q,P,X){Object.defineProperty(P,"__esModule",{value:!0}),P.TrouterManagerFsm=void 0;var L=X(2),J=X(4),E=X(0),I=X(7),C=(function(){function j(x,T){this.worker=T,this.state=J.TrouterManagerState.Unknown,this.logger=new E.Logger("ManagerFsm",x)}return j.prototype.start=function(){this.state===J.TrouterManagerState.Unknown?(this.setState(J.TrouterManagerState.Disconnected),this.worker.forceStopLingeringConnection(),this.worker.startFirstConnection()):(this.logger.info("start called in state '".concat(J.TrouterManagerState[this.state],"', expediting pending backoffs, if any")),this.worker.expediteBackoffOnConnections())},j.prototype.stop=function(x){this.state!==J.TrouterManagerState.Unknown?(this.setState(J.TrouterManagerState.Unknown),this.worker.stopFirstConnection(x===!0),this.worker.stopSecondConnection(x===!0)):this.showIgnored("stop")},j.prototype.getState=function(){switch(this.state){case J.TrouterManagerState.Unknown:case J.TrouterManagerState.Connected:case J.TrouterManagerState.Disconnected:case J.TrouterManagerState.Switching:return this.state;case J.TrouterManagerState.TerminalError:return L.TrouterState.Disconnected}},j.prototype.getInternalState=function(){return this.state},j.prototype.onConnected=function(x){this.state===J.TrouterManagerState.Disconnected&&x?this.worker.doesSecondConnectionExist()?this.setState(J.TrouterManagerState.Switching):(this.setState(J.TrouterManagerState.Connected),this.worker.dispatchConnected()):this.showIgnored("onConnected(".concat(x,")"))},j.prototype.onRegistered=function(x){this.state!==J.TrouterManagerState.Disconnected||x?this.state!==J.TrouterManagerState.Switching||x?this.state===J.TrouterManagerState.Disconnected&&x&&(this.setState(J.TrouterManagerState.Connected),this.worker.dispatchConnected()):(this.setState(J.TrouterManagerState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnectionDelayed(),this.worker.dispatchConnected()):(this.setState(J.TrouterManagerState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnection(!0),this.worker.dispatchConnected()),this.worker.dispatchRegistrationState(!0)},j.prototype.onUnregistered=function(x){x&&this.worker.dispatchRegistrationState(!1)},j.prototype.onReconnecting=function(x){this.state!==J.TrouterManagerState.Connected&&this.state!==J.TrouterManagerState.Switching||!x?this.showIgnored("onReconnecting(".concat(x,")")):(this.setState(J.TrouterManagerState.Disconnected),this.worker.dispatchDisconnected())},j.prototype.onReconnectionRequired=function(x,T,w){this.state===J.TrouterManagerState.Connected&&x?(this.setState(J.TrouterManagerState.Switching),this.worker.startSecondConnection(T)):this.state===J.TrouterManagerState.Disconnected&&x?this.worker.startSecondConnection(T):this.state===J.TrouterManagerState.Switching&&x&&w===I.ReconnectReason.Configuration?(this.logger.debug("onReconnectionRequired: switch requested while already in Switching state"),this.worker.stopSecondConnection(!0),this.worker.startSecondConnection(T)):this.showIgnored("onReconnectionRequired(".concat(x,")"))},j.prototype.onDisconnected=function(x){this.state==J.TrouterManagerState.Unknown&&x?this.worker.dispatchDisconnected():this.state==J.TrouterManagerState.Switching&&x?(this.worker.switchConnections(),this.worker.stopSecondConnection(!1),this.setState(J.TrouterManagerState.Disconnected),this.worker.dispatchDisconnected()):this.showIgnored("onDisconnected(".concat(x,")"))},j.prototype.onTerminalError=function(){this.setState(J.TrouterManagerState.TerminalError),this.worker.dispatchTerminalError()},j.prototype.showIgnored=function(x){this.logger.info("Ignoring event '".concat(x,"' in state '").concat(J.TrouterManagerState[this.state],"'"))},j.prototype.setState=function(x){if(this.logger.info("Switching from state '".concat(J.TrouterManagerState[this.state],"' to state '").concat(J.TrouterManagerState[x],"'")),this.state===x)return void this.logger.error("Attempt to switch to the current state '".concat(J.TrouterManagerState[x],"'"));this.state=x},j})();P.TrouterManagerFsm=C},function(q,P,X){function L(re,Z){if(!Z)return re;var ae=T(T({},re),{enabled:Z.TelemetryEnabled});return Z.ClientTelemetryEventEnabled!==void 0&&(ae=T(T({},ae),Z.ClientTelemetryEventEnabled)),ae}function J(re,Z,ae){var Ee,Ae,_e,Ne,$e,Qe,M,y,A,F,$=function(ee){return re.proxyUrlRewrite?(Z.info("Using rewritten URL for proxy"),re.proxyUrlRewrite(ee)):ee};return{clientInfo:{ua:re.trouterSettings.productName,v:re.trouterSettings.version},ioOptions:{ackTimeoutMs:5e3,rewriteUrlForProxy:$},clientCorrelationID:re.trouterSettings.sessionId,environment:re.trouterSettings.environment,telemetrySettings:L(re.telemetryConfig.settings,ae),eventLogger:re.telemetryConfig.eventLogger,endpointId:re.trouterSettings.registrationId,trouterUrl:ae?.TrouterConnectionUrl||re.trouterSettings.trouterServiceUrl,registration:re.trouterSettings.registrarServiceUrl?{registrarUrl:re.trouterSettings.registrarServiceUrl,registrationId:(Ee=re.trouterSettings.registrationId)!==null&&Ee!==void 0?Ee:"",pnhAppId:(Ae=re.trouterSettings.pnhAppId)!==null&&Ae!==void 0?Ae:"",platform:(_e=re.trouterSettings.platform)!==null&&_e!==void 0?_e:"",pnhTemplateKey:(Ne=re.trouterSettings.pnhTemplate)!==null&&Ne!==void 0?Ne:"",platformUIVersion:($e=re.trouterSettings.platformUIVersion)!==null&&$e!==void 0?$e:"",productContext:re.trouterSettings.pnhProductContext||void 0,context:(Qe=re.trouterSettings.pnhContext)!==null&&Qe!==void 0?Qe:"",registrarTtlSec:((M=re.trouterSettings.maxRegistrationTimeInMs)!==null&&M!==void 0?M:0)/1e3}:void 0,connectionDependsOnRegistration:re.trouterSettings.registrarServiceUrl===void 0?function(){return!1}:(y=re.trouterSettings.connectionDependsOnRegistration)!==null&&y!==void 0?y:function(){return!1},delayEventsUntilRegistered:(A=re.trouterSettings.delayEventsUntilRegistered)!==null&&A!==void 0?A:function(){return!1},timeoutOptions:T({connectionTimeoutMs:re.trouterSettings.trouterConnectTimeoutInMs||3e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:re.trouterSettings.productName==="TeamsCDL"?3e5:3e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},re.trouterSettings.timeoutOptions),incallTimeoutOptions:T({connectionTimeoutMs:1e4,fetchTimeoutMs:5e3,pingTimeoutMs:5e3,pongTimeoutMs:2e3,maxBackoffMs:re.trouterSettings.productName==="TeamsCDL"?3e5:1e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},re.trouterSettings.incallTimeoutOptions),incallModeTimeoutMs:(F=re.trouterSettings.incallModeTimeoutMs)!==null&&F!==void 0?F:0,lingeringConnectionDelayMs:6e4,userActivitySecondResendDelayMs:re.trouterSettings.userActivitySecondResendDelayMs||1e4,duplicateDisconnectThresholdMs:1e4,connectionCache:re.connectionCache,registrationStateCallback:re.registrationStateCallbackForAcsDoNotUse,rewriteUrlForProxy:$,retryLimitOnTokenFetch:re.trouterSettings.retryLimitOnTokenFetch,extraConnectionHeaders:re.trouterSettings.extraConnectionHeaders,expediteBackoffOnStartMinimumDelayMs:1e4,toJSON:function(){return T(T({},this),{connectionCache:this.connectionCache?{}:this.connectionCache})}}}function E(re){return new ge(re)}function I(){return R.CLIENT_VERSION}function C(re,Z){var ae=re.indexOf("://");if(ae>=0){var Ee=re.indexOf("/",ae+3);if(Ee>=0)return Z+re.substr(Ee)}return""}function j(re){var Z=this;return function(ae){return w(Z,void 0,void 0,function(){var Ee;return b(this,function(Ae){switch(Ae.label){case 0:return Ee={},[4,re(ae.needFresh)];case 1:return[2,(Ee.token=Ae.sent(),Ee.tokenType="skype",Ee)]}})})}}function x(re,Z){var ae,Ee=this;return function(Ae){return w(Ee,void 0,void 0,function(){var _e,Ne,$e;return b(this,function(Qe){switch(Qe.label){case 0:_e=new Date,Ne=setInterval(function(){var M=Math.round((Date.now()-_e.getTime())/6e4);re.warn("Note: Trouter auth token request promise from ".concat(_e.toISOString()," has not been resolved for ").concat(M," minutes. The client is blocked from operating properly"))},3e5),Qe.label=1;case 1:return Qe.trys.push([1,,3,4]),[4,Z(Ae)];case 2:return $e=Qe.sent(),Ae.needFresh&&$e.token===ae&&re.error("API violation: Trouter auth token provider got a request with needRefresh=true, but returned the same token as last time anyway. Please fix the host app"),ae=$e.token,[2,$e];case 3:return clearInterval(Ne),[7];case 4:return[2]}})})}}var T=this&&this.__assign||function(){return T=Object.assign||function(re){for(var Z,ae=1,Ee=arguments.length;ae<Ee;ae++){Z=arguments[ae];for(var Ae in Z)Object.prototype.hasOwnProperty.call(Z,Ae)&&(re[Ae]=Z[Ae])}return re},T.apply(this,arguments)},w=this&&this.__awaiter||function(re,Z,ae,Ee){function Ae(_e){return _e instanceof ae?_e:new ae(function(Ne){Ne(_e)})}return new(ae||(ae=Promise))(function(_e,Ne){function $e(y){try{M(Ee.next(y))}catch(A){Ne(A)}}function Qe(y){try{M(Ee.throw(y))}catch(A){Ne(A)}}function M(y){y.done?_e(y.value):Ae(y.value).then($e,Qe)}M((Ee=Ee.apply(re,Z||[])).next())})},b=this&&this.__generator||function(re,Z){function ae(M){return function(y){return Ee([M,y])}}function Ee(M){if(Ae)throw new TypeError("Generator is already executing.");for(;$e&&($e=0,M[0]&&(Qe=0)),Qe;)try{if(Ae=1,_e&&(Ne=2&M[0]?_e.return:M[0]?_e.throw||((Ne=_e.return)&&Ne.call(_e),0):_e.next)&&!(Ne=Ne.call(_e,M[1])).done)return Ne;switch(_e=0,Ne&&(M=[2&M[0],Ne.value]),M[0]){case 0:case 1:Ne=M;break;case 4:return Qe.label++,{value:M[1],done:!1};case 5:Qe.label++,_e=M[1],M=[0];continue;case 7:M=Qe.ops.pop(),Qe.trys.pop();continue;default:if(Ne=Qe.trys,!(Ne=Ne.length>0&&Ne[Ne.length-1])&&(M[0]===6||M[0]===2)){Qe=0;continue}if(M[0]===3&&(!Ne||M[1]>Ne[0]&&M[1]<Ne[3])){Qe.label=M[1];break}if(M[0]===6&&Qe.label<Ne[1]){Qe.label=Ne[1],Ne=M;break}if(Ne&&Qe.label<Ne[2]){Qe.label=Ne[2],Qe.ops.push(M);break}Ne[2]&&Qe.ops.pop(),Qe.trys.pop();continue}M=Z.call(re,Qe)}catch(y){M=[6,y],_e=0}finally{Ae=Ne=0}if(5&M[0])throw M[1];return{value:M[0]?M[1]:void 0,done:!0}}var Ae,_e,Ne,$e,Qe={label:0,sent:function(){if(1&Ne[0])throw Ne[1];return Ne[1]},trys:[],ops:[]};return $e={next:ae(0),throw:ae(1),return:ae(2)},typeof Symbol=="function"&&($e[Symbol.iterator]=function(){return this}),$e};Object.defineProperty(P,"__esModule",{value:!0}),P.replaceTrouterUrlBase=P.getTrouterServiceVersion=P.createTrouterService=P.TrouterService=P.UserActivityState=P.TrouterState=void 0;var R=X(1),_=X(2);Object.defineProperty(P,"TrouterState",{enumerable:!0,get:function(){return _.TrouterState}}),Object.defineProperty(P,"UserActivityState",{enumerable:!0,get:function(){return _.UserActivityState}});var V=X(0),K=X(8),G=X(9),H=X(10),ue=X(11),ge=(function(){function re(Z){this.logProvider=Z,this.stateChangedListeners=[],this.logger=new V.Logger("Trouter",Z),this.trouterUrlPromise=new ue.TrouterUrlPromise(Z),this.messageHandlers=new K.MessageHandlerRegistry(Z),this.listeners={},this.connectionInfo=null,this.logger.info("Created TrouterService version ".concat(R.CLIENT_VERSION))}return re.prototype.start=function(Z){var ae;if(this.logger.info("Start"),!Z.skypeTokenProvider&&!Z.authTokenProvider)throw new Error("no token provider has been configured, either skypeTokenProvider or authTokenProvider must be populated");Z.skypeTokenProvider&&!Z.trouterSettings.disableInternalSkypeTokenCache&&(Z.skypeTokenProvider=(0,G.addCacheAsBackupTo)(Z.skypeTokenProvider)),this.trouterCfg=Z;var Ee=J(Z,this.logger,this.ecsCfg);Z.internalEnableV4cProtocol===!1&&(Ee.forceV4aProtocol=!0);var Ae=x(this.logger,(ae=Z.authTokenProvider)!==null&&ae!==void 0?ae:j(Z.skypeTokenProvider));this.trouterServer===void 0&&(this.trouterServer=new H.TrouterManager(this.logProvider,Ee,Ae,Z.authTokenProvider===void 0,this)),this.pendingActivityState!==void 0&&(this.trouterServer.setUserActivityState(this.pendingActivityState[0],this.pendingActivityState[1]),this.pendingActivityState=void 0),this.trouterServer.start()},re.prototype.stop=function(Z){this.logger.info("close connection"),this.trouterUrlPromise.rejectUrl(new Error("TrouterService is stopped")),this.trouterServer!==void 0&&this.trouterServer.stop(Z)},re.prototype.setEcsConfig=function(Z){return w(this,void 0,void 0,function(){var ae=this;return b(this,function(Ee){return[2,new Promise(function(Ae){if(ae.ecsCfg=Z.TrouterJScriptClient,ae.logger.info("Setting ECS configuration to ".concat(JSON.stringify(ae.ecsCfg))),ae.trouterServer!==void 0&&ae.trouterCfg!==void 0){var _e=J(ae.trouterCfg,ae.logger,ae.ecsCfg);ae.trouterServer.configure(_e)}Ae()})]})})},re.prototype.checkConnection=function(Z){this.trouterServer!==void 0&&this.trouterServer.checkConnection(Z!=null&&Z)},re.prototype.resendRegistration=function(){return w(this,void 0,void 0,function(){return b(this,function(Z){if(!this.trouterServer)throw new Error("resendRegistration called too early");return[2,this.trouterServer.resendRegistration()]})})},re.prototype.registerListener=function(Z,ae){return ae===""||!ae.startsWith("/")||ae.includes("?")||ae.includes("#")?(this.logger.error("Listener path '".concat(ae,"' is not valid")),!1):this.listeners[ae]?(this.logger.error("Another listener is already registered for path '".concat(ae,"'")),!1):(this.listeners[ae]=Z,this.logger.debug("Listener for path '".concat(ae,"' registered")),this.connectionInfo&&Z.onTrouterConnected(this.connectionInfo.baseEndpointUrl+ae,this.connectionInfo),!0)},re.prototype.unregisterListener=function(Z){for(var ae=[],Ee=0,Ae=Object.keys(this.listeners);Ee<Ae.length;Ee++){var _e=Ae[Ee];this.listeners[_e]===Z&&ae.push(_e)}if(ae.length===0)return!1;for(var Ne=0,$e=ae;Ne<$e.length;Ne++){var _e=$e[Ne];delete this.listeners[_e]}return this.logger.debug("Listener for path(s) '".concat(ae.join("', '"),"' unregistered")),!0},re.prototype.onTrouterConnected=function(Z,ae){this.logger.debug("Trouter is now connected");for(var Ee=0,Ae=Object.keys(this.listeners);Ee<Ae.length;Ee++){var _e=Ae[Ee];try{this.listeners[_e].onTrouterConnected(ae.baseEndpointUrl+_e,ae)}catch(Ne){this.logger.error("Listener '".concat(_e,"' threw an exception from onTrouterConnected(): ").concat(Ne))}}this.connectionInfo=ae,this.trouterUrlPromise.resolveUrl(Z),this.notifyStateChanged(_.TrouterState.Connected,{url:Z,getRemainingTtlInSec:function(){return ae.connectionTtlSec}})},re.prototype.onTrouterDisconnected=function(){this.logger.debug("Trouter is now disconnected"),this.connectionInfo=null;for(var Z=0,ae=Object.keys(this.listeners);Z<ae.length;Z++){var Ee=ae[Z],Ae=this.listeners[Ee];if(Ae.onTrouterDisconnected)try{Ae.onTrouterDisconnected()}catch(_e){this.logger.error("Listener '".concat(Ee,"' threw an exception from onTrouterDisconnected(): ").concat(_e))}}this.notifyStateChanged(_.TrouterState.Disconnected)},re.prototype.onTrouterRequest=function(Z,ae){for(var Ee="",Ae=0,_e=Object.keys(this.listeners);Ae<_e.length;Ae++){var Ne=_e[Ae];Z.path.startsWith(Ne)&&Ne.length>Ee.length&&(Ee=Ne)}if(Ee==="")this.tryMessageHandlers(Z,ae)||(ae.status=404,ae.headers={"Trouter-Responder":"ClientLib"},ae.send());else try{this.listeners[Ee].onTrouterRequest(Z,ae)}catch($e){this.logger.error("Listener '".concat(Ee,"' threw an exception from onTrouterRequest(): ").concat($e)),ae.status=500,ae.headers={"Trouter-Responder":"ClientLib"},ae.send()}},re.prototype.onTrouterMessageLoss=function(Z){this.logger.info("onTrouterMessageLoss called with tags [".concat(Z,"]"));for(var ae=!0,Ee=0,Ae=Object.keys(this.listeners);Ee<Ae.length;Ee++){var _e=Ae[Ee],Ne=this.listeners[_e];if(Ne.onTrouterMessageLoss)try{ae=Ne.onTrouterMessageLoss(Z)&&ae,ae===void 0&&(this.logger.error("Listener '".concat(_e,"' did not return a boolean value from onTrouterMessageLoss()")),ae=!1)}catch($e){this.logger.error("Listener '".concat(_e,"' threw an exception from onTrouterMessageLoss(): ").concat($e)),ae=!1}}return ae},re.prototype.onTrouterUserActivityStateAccepted=function(Z){this.logger.debug("onTrouterUserActivityStateAccepted cv: ".concat(Z));for(var ae=0,Ee=Object.keys(this.listeners);ae<Ee.length;ae++){var Ae=Ee[ae],_e=this.listeners[Ae];if(_e.onTrouterUserActivityStateAccepted)try{_e.onTrouterUserActivityStateAccepted(Z)}catch(Ne){this.logger.error("Listener '".concat(Ae,"' threw an exception from onTrouterUserActivityStateAccepted(): ").concat(Ne))}}},re.prototype.onAudiencesSetResolved=function(Z,ae){this.logger.debug("onAudiencesSetResolved cv: ".concat(ae));for(var Ee=0,Ae=Object.keys(this.listeners);Ee<Ae.length;Ee++){var _e=Ae[Ee],Ne=this.listeners[_e];if(Ne.onAudiencesSetResolved)try{Ne.onAudiencesSetResolved(Z,ae)}catch($e){this.logger.error("Listener '".concat(_e,"' threw an exception from onAudienceSubscribed(): ").concat($e))}}},re.prototype.setUserActivityState=function(Z,ae){if(Z!==_.UserActivityState.Active&&Z!==_.UserActivityState.Inactive)throw new Error("setUserActivityState called with unsupported value ".concat(Z));this.logger.info("setUserActivityState called with value ".concat(_.UserActivityState[Z])),this.trouterServer&&this.state()!==_.TrouterState.Unknown?this.trouterServer.setUserActivityState(Z,ae):(this.pendingActivityState=[Z,ae],this.logger.warn("setUserActivityState called before start() or after stop()"))},re.prototype.setAudienceSubscriptions=function(Z,ae){if(Z.audienceSubscriptions.length>1)throw new Error("Only singular audience subscription is supported");if(this.trouterServer&&this.state()!==_.TrouterState.Unknown)return this.trouterServer.setAudienceSubscriptionsAsync(Z,15e3,ae);throw new Error("audience subscribe called before start() or after stop()")},re.prototype.state=function(){return this.trouterServer!==void 0?this.trouterServer.getState():_.TrouterState.Unknown},re.prototype.isInTerminalState=function(){return this.trouterServer!==void 0&&this.trouterServer.isInTerminalState()},re.prototype.reportStateInfo=function(){return this.trouterServer===void 0?"":this.trouterServer.reportStateInfo()},re.prototype.getServerState=function(){if(this.trouterServer!==void 0)return this.trouterServer.getServerState()},re.prototype.getTrouterUrlAsync=function(){return this.trouterServer!==void 0?this.trouterUrlPromise.getPromise():Promise.reject(new Error("TrouterService has not been started"))},re.prototype.onStateChanged=function(Z){if(this.logger.info("onStateChanged called"),Z===void 0)this.stateChangedListeners=this.stateChangedListeners.filter(function(Ee){return Ee.wrappedCallback===void 0});else{this.offStateChanged(Z);var ae=function(Ee,Ae){Z(Ee,Ae?Ae.url:"")};ae.wrappedCallback=Z,this.stateChangedListeners.push(ae)}},re.prototype.offStateChanged=function(Z){this.logger.info("offStateChanged called");var ae=this.stateChangedListeners.length;return this.stateChangedListeners=this.stateChangedListeners.filter(function(Ee){return Ee.wrappedCallback!==Z}),ae>this.stateChangedListeners.length},re.prototype.addCallback=function(Z){this.logger.info("addListener called"),this.stateChangedListeners.indexOf(Z,0)===-1&&Z!==void 0&&this.stateChangedListeners.push(Z)},re.prototype.removeCallback=function(Z){this.logger.info("removeListener called");var ae=this.stateChangedListeners.indexOf(Z,0);return ae>-1&&(this.stateChangedListeners.splice(ae,1),!0)},re.prototype.registerMessageHandler=function(Z){this.logger.info("registerMessageHandler is called"),this.messageHandlers.register(Z)},re.prototype.clearMessageHandlers=function(){this.logger.info("clearMessageHandlers is called"),this.messageHandlers.clear()},re.prototype.notifyStateChanged=function(Z,ae){var Ee=this;this.logger.info("notifyStateChanged called, will forward to ".concat(this.stateChangedListeners.length," listeners")),this.stateChangedListeners.forEach(function(Ae){try{Ae(Z,ae)}catch(_e){Ee.logger.error("Error in callback ".concat(_e))}})},re.prototype.tryMessageHandlers=function(Z,ae){if(!this.messageHandlers.active())return!1;var Ee,Ae=null;try{Ee=JSON.parse(Z.body),Ae=Ee&&(Ee.evt||Ee.eventId)||null}catch{}var _e={eventId:Ae,url:(this.connectionInfo?this.connectionInfo.baseEndpointUrl:"")+Z.path,body:Ee,rawBody:Z.body,headers:Z.headers},Ne=this.messageHandlers.handleMessage(_e);return!!Ne.isHandled&&(ae.status=Ne.resultCode,Ne.responseHeaders&&(ae.headers=Ne.responseHeaders),Ne.responseBody&&(ae.body=Ne.responseBody),ae.send(),!0)},re})();P.TrouterService=ge,P.createTrouterService=E,P.getTrouterServiceVersion=I,P.replaceTrouterUrlBase=C},function(q,P){q.exports=Ie}])})});k(U);var B=z(function(ke,Se){Object.defineProperty(Se,"__esModule",{value:!0}),Se.DeleteReason=void 0;var Ie;(function(q){q.DeletedByPolicy="deletedByPolicy",q.DeletedByUser="deletedByUser"})(Ie||(Se.DeleteReason=Ie={}))});k(B),B.DeleteReason;var D=z(function(ke,Se){Object.defineProperty(Se,"__esModule",{value:!0}),Se.PACKAGE_VERSION=Se.CONFIG_API_VERSION=Se.EudbCountries=Se.CloudPrefix=Se.CloudType=Se.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES=void 0,Se.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES=3;var Ie;(function(P){P.Public="Public",P.GccHigh="GCC High",P.Dod="DoD"})(Ie||(Se.CloudType=Ie={}));var q;(function(P){P.OrgId="orgid",P.Acs="acs",P.Spool="spool",P.GccHigh="gcch",P.GccHighAcs="gcch-acs",P.Dod="dod",P.DodAcs="dod-acs"})(q||(Se.CloudPrefix=q={})),Se.EudbCountries=["europe","france","germany","norway","switzerland","sweden"],Se.CONFIG_API_VERSION="2024-09-01",Se.PACKAGE_VERSION="1.0.0-beta.34"});k(D),D.PACKAGE_VERSION,D.CONFIG_API_VERSION,D.EudbCountries,D.CloudPrefix,D.CloudType,D.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES;var le=B,se=D,fe=z(function(ke,Se){var Ie=v&&v.__awaiter||function(M,y,A,F){function $(ee){return ee instanceof A?ee:new A(function(de){de(ee)})}return new(A||(A=Promise))(function(ee,de){function ze(ye){try{Pe(F.next(ye))}catch(Le){de(Le)}}function Oe(ye){try{Pe(F.throw(ye))}catch(Le){de(Le)}}function Pe(ye){ye.done?ee(ye.value):$(ye.value).then(ze,Oe)}Pe((F=F.apply(M,y||[])).next())})};Object.defineProperty(Se,"__esModule",{value:!0}),Se.isEudbLocation=Se.parseTokenCredential=Se.base64decode=Se.toTelemetrySender=Se.toLogProvider=Se.toMessageHandler=void 0,Se.generateUuid=Ne;const q=new Map([["chatMessageReceived",200],["typingIndicatorReceived",245],["readReceiptReceived",246],["chatMessageEdited",247],["chatMessageDeleted",248],["chatThreadCreated",257],["chatThreadPropertiesUpdated",258],["chatThreadDeleted",259],["participantsAdded",260],["participantsRemoved",261]]),P="8:orgid:",X="8:dod:",L="8:gcch:",J="8:teamsvisitor:",E="4:",I="8:acs:",C="8:gcch-acs:",j="8:dod-acs:",x="8:spool:",T=(M,y,A,F)=>{const $=q.get(M);return{handleMessage(ee){let de=null;if(ee?.rawBody&&(de=JSON.parse(ee.rawBody)),de===null||de.eventId!==$)return;const ze=R(M,de,A,F);if(ze!==null)return y(ze),{isHandled:!0,resultCode:200}}}};Se.toMessageHandler=T;function w(M,y,A){return{threadId:M.groupId,sender:ue(M.senderId),senderDisplayName:M.senderDisplayName,recipient:ue(M.recipientMri),id:M.messageId,createdOn:new Date(M.originalArrivalTime),version:M.version,type:M.messageType,message:M.messageBody,metadata:ge(M.acsChatMessageMetadata)||{},attachments:ae(ge(M.attachments)||[],y,A)}}function b(M,y,A){return Object.assign(Object.assign({},w(M,y,A)),{editedOn:new Date(M.edittime)})}const R=(M,y,A,F)=>{if(M==="chatMessageReceived")return w(y,A,F);if(M==="chatMessageEdited")return b(y,A,F);if(M==="chatMessageDeleted"){const $=y;return{threadId:$.groupId,sender:ue($.senderId),senderDisplayName:$.senderDisplayName,recipient:ue($.recipientMri),id:$.messageId,createdOn:new Date($.originalArrivalTime),version:$.version,deletedOn:new Date($.deletetime),type:$.messageType}}if(M==="typingIndicatorReceived"){const $=y;return{threadId:$.groupId,sender:ue($.senderId),senderDisplayName:$.senderDisplayName,recipient:ue($.recipientMri),version:$.version,receivedOn:new Date($.originalArrivalTime)}}if(M==="readReceiptReceived"){const $=y,de=JSON.parse($.messageBody).consumptionhorizon.split(";");return{threadId:$.groupId,sender:ue($.senderId),senderDisplayName:"",recipient:ue($.recipientMri),chatMessageId:$.messageId,readOn:new Date(+de[1])}}if(M==="chatThreadCreated"){const $=y,ee=JSON.parse(unescape($.createdBy)),de=JSON.parse(unescape($.members)),ze=_(ee),Oe=de.map(ye=>_(ye));return{threadId:$.threadId,createdOn:new Date($.createTime),createdBy:ze,version:$.version,participants:Oe,properties:V(JSON.parse(unescape($.properties))),retentionPolicy:K(JSON.parse(unescape($.properties)))}}if(M==="chatThreadPropertiesUpdated"){const $=y,ee=JSON.parse(unescape($.editedBy)),de=_(ee);return{threadId:$.threadId,updatedOn:new Date($.editTime),updatedBy:de,version:$.version,properties:V(JSON.parse(unescape($.properties))),retentionPolicy:K(JSON.parse(unescape($.properties)))}}if(M==="chatThreadDeleted"){const $=y,ee=y.reason==le.DeleteReason.DeletedByPolicy?null:_(JSON.parse(unescape($.deletedBy)));return{threadId:$.threadId,deletedOn:new Date($.deleteTime),deletedBy:ee,version:$.version,reason:$.reason}}if(M==="participantsAdded"){const $=y,ee=JSON.parse(unescape($.addedBy)),de=JSON.parse(unescape($.participantsAdded)),ze=_(ee),Oe=de.map(ye=>_(ye));return{threadId:$.threadId,addedOn:new Date($.time),addedBy:ze,version:$.version,participantsAdded:Oe}}if(M==="participantsRemoved"){const $=y,ee=JSON.parse(unescape($.removedBy)),de=JSON.parse(unescape($.participantsRemoved)),ze=_(ee),Oe=de.map(ye=>_(ye));return{threadId:$.threadId,removedOn:new Date($.time),removedBy:ze,version:$.version,participantsRemoved:Oe}}return null},_=M=>{var y;const A={id:ue(M.participantId),displayName:M.displayName,metadata:ge((y=M.memberMetaData)!==null&&y!==void 0?y:"")||{}};return M.shareHistoryTime&&(A.shareHistoryTime=new Date(M.shareHistoryTime)),A},V=M=>{var y;return{topic:M.topic,metadata:ge((y=M.acsChatThreadMetadata)!==null&&y!==void 0?y:"")||{}}},K=M=>{const y=M.retentionPolicy;if(!y)return{kind:"none"};let A;try{A=JSON.parse(y)}catch{return{kind:"none"}}if(A.retentionPolicyType==="DeleteAfterCreationTime"&&typeof A.executeAfter=="string"){const F=A.executeAfter.trim().replace(/^[+-]/,""),$=F.includes(".")?F.split(".")[0]:"0",ee=parseInt($,10);return{kind:"threadCreationDate",deleteThreadAfterDays:isNaN(ee)?0:ee}}return{kind:"none"}},G=M=>({log:(...y)=>M.info(y),warn:(...y)=>M.warning(y),error:(...y)=>M.error(y),debug:(...y)=>M.verbose(y),info:(...y)=>M.verbose(y)});Se.toLogProvider=G;const H=M=>({logEvent:y=>M.info(y)});Se.toTelemetrySender=H;const ue=M=>M.startsWith(P)?{kind:"microsoftTeamsUser",rawId:M,microsoftTeamsUserId:M.substring(P.length),isAnonymous:!1,cloud:"public"}:M.startsWith(X)?{kind:"microsoftTeamsUser",rawId:M,microsoftTeamsUserId:M.substring(X.length),isAnonymous:!1,cloud:"dod"}:M.startsWith(L)?{kind:"microsoftTeamsUser",rawId:M,microsoftTeamsUserId:M.substring(L.length),isAnonymous:!1,cloud:"gcch"}:M.startsWith(J)?{kind:"microsoftTeamsUser",rawId:M,microsoftTeamsUserId:M.substring(J.length),isAnonymous:!0}:M.startsWith(E)?{kind:"phoneNumber",rawId:M,phoneNumber:M.substring(E.length)}:M.startsWith(I)||M.startsWith(C)||M.startsWith(j)||M.startsWith(x)?{kind:"communicationUser",communicationUserId:M}:{kind:"unknown",id:M},ge=M=>{if(!(M==null||M===""||M==="null"||M==="{}"||M==="[]"))return JSON.parse(M)},re=(M,y,A)=>{let F;try{F=new URL(M),(F.protocol==="http:"||F.protocol==="https:")&&(F=new URL(F.pathname,y))}catch{try{F=new URL(M,y)}catch{return M}}return F.searchParams.set("api-version",A),F.toString()},Z=M=>{let y;try{y=new URL(M)}catch{return!1}return y.protocol==="http:"||y.protocol==="https:"},ae=(M,y,A)=>(y==null||y===""||!Z(y)||M.filter(F=>F.attachmentType.toLowerCase()==="image".toLowerCase()).map(F=>{F.previewUrl&&(F.previewUrl=re(F.previewUrl,y,A)),F.url&&(F.url=re(F.url,y,A))}),M),Ee=M=>p.default.isNodeLike?Buffer.from(M,"base64").toString():atob(M);Se.base64decode=Ee;const Ae=M=>{let[,y]=M?.split(".");if(y===void 0)throw new Error("Invalid token");return y=y.replace(/-/g,"+").replace(/_/g,"/"),JSON.parse(decodeURIComponent(escape((0,Se.base64decode)(y))))},_e=M=>Ie(void 0,void 0,void 0,function*(){const y=yield M.getToken(),A=y?.token,F=Ae(A),$=F.skypeid,ee=F.resourceId,de=Qe($),ze=F.resourceLocation||"";return{jwtToken:A,acsResourceId:ee,identityMri:$,cloudType:de,resourceLocation:ze}});Se.parseTokenCredential=_e;function Ne(){return(0,f.default.v4)()}const $e=M=>!!M&&!!se.EudbCountries.find(y=>y===M);Se.isEudbLocation=$e;function Qe(M){switch(M.substring(0,M.indexOf(":"))){case se.CloudPrefix.OrgId:case se.CloudPrefix.Acs:case se.CloudPrefix.Spool:return se.CloudType.Public;case se.CloudPrefix.GccHigh:case se.CloudPrefix.GccHighAcs:return se.CloudType.GccHigh;case se.CloudPrefix.Dod:case se.CloudPrefix.DodAcs:return se.CloudType.Dod;default:return se.CloudType.Public}}});k(fe),fe.isEudbLocation,fe.parseTokenCredential,fe.base64decode,fe.toTelemetrySender,fe.toLogProvider,fe.toMessageHandler,fe.generateUuid;var oe=z(function(ke,Se){var Ie=v&&v.__createBinding||(Object.create?(function(I,C,j,x){x===void 0&&(x=j);var T=Object.getOwnPropertyDescriptor(C,j);(!T||("get"in T?!C.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return C[j]}}),Object.defineProperty(I,x,T)}):(function(I,C,j,x){x===void 0&&(x=j),I[x]=C[j]})),q=v&&v.__setModuleDefault||(Object.create?(function(I,C){Object.defineProperty(I,"default",{enumerable:!0,value:C})}):function(I,C){I.default=C}),P=v&&v.__importStar||function(I){if(I&&I.__esModule)return I;var C={};if(I!=null)for(var j in I)j!=="default"&&Object.prototype.hasOwnProperty.call(I,j)&&Ie(C,I,j);return q(C,I),C},X=v&&v.__awaiter||function(I,C,j,x){function T(w){return w instanceof j?w:new j(function(b){b(w)})}return new(j||(j=Promise))(function(w,b){function R(K){try{V(x.next(K))}catch(G){b(G)}}function _(K){try{V(x.throw(K))}catch(G){b(G)}}function V(K){K.done?w(K.value):T(K.value).then(R,_)}V((x=x.apply(I,C||[])).next())})};Object.defineProperty(Se,"__esModule",{value:!0}),Se.RealTimeNotificationConfiguration=Se.TrouterConfigClient=void 0;const L=P(m.default);class J extends L.ServiceClient{constructor(C,j){j||(j={});const x=`azsdk-js-communication-signaling/${se.PACKAGE_VERSION}`,T=j.userAgentOptions&&j.userAgentOptions.userAgentPrefix?`${j.userAgentOptions.userAgentPrefix} ${x}`:`${x}`,w=Object.assign(Object.assign({},j),{userAgentOptions:{userAgentPrefix:T},additionalPolicies:j.additionalPolicies});super(w),this.apiVersion=se.CONFIG_API_VERSION,this.endpoint=C,this.httpClient=(0,g.default.createDefaultHttpClient)()}fetchServiceUrls(C){return X(this,void 0,void 0,function*(){try{const j=(yield C.getToken()).token,x=(0,g.default.createPipelineRequest)({url:`${this.endpoint}/chat/config/realTimeNotifications?api-version=${this.apiVersion}`,method:"GET",headers:(0,g.default.createHttpHeaders)({Authorization:`Bearer ${j}`})}),T=yield this.pipeline.sendRequest(this.httpClient,x);if(T.status!==200||!T.bodyAsText)throw new Error(`Failed to fetch service URLs. Status: ${T.status}, Body: ${T.bodyAsText||"No response body"}`);const w=JSON.parse(T.bodyAsText);if(!w.trouterServiceUrl||!w.registrarServiceUrl||!w.cloudType)throw new Error("One or more required fields are missing in the response data");return new E(w.trouterServiceUrl,w.registrarServiceUrl,w.cloudType)}catch(j){throw new Error(`Error fetching real-time notification configuration from Chat Gateway: ${j.message}`)}})}}Se.TrouterConfigClient=J;class E{constructor(C,j,x){this.trouterServiceUrl=C,this.registrarServiceUrl=j,this.cloudType=x}}Se.RealTimeNotificationConfiguration=E});k(oe),oe.RealTimeNotificationConfiguration,oe.TrouterConfigClient;var te=fe,ce=oe,ne=z(function(ke,Se){var Ie=v&&v.__awaiter||function(X,L,J,E){function I(C){return C instanceof J?C:new J(function(j){j(C)})}return new(J||(J=Promise))(function(C,j){function x(b){try{w(E.next(b))}catch(R){j(R)}}function T(b){try{w(E.throw(b))}catch(R){j(R)}}function w(b){b.done?C(b.value):I(b.value).then(x,T)}w((E=E.apply(X,L||[])).next())})};Object.defineProperty(Se,"__esModule",{value:!0}),Se.defaultTelemetrySettings=Se.createSettings=void 0;const q={version:"1.0.0",registrationId:"",sessionId:"",pnhAppId:"AcsWeb",pnhTemplate:"AcsWeb_Chat_2.1",platform:"SPOOL",platformUIVersion:"0.0.0",environment:"",productName:"acs-chat-web",trouterServiceUrl:"",registrarServiceUrl:"",registrarRefreshTimeoutInMs:35e4,timeoutOptions:{connectionTimeoutMs:2e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:5e4,requestTimeoutMs:5e3},maxRegistrationTimeInMs:72e5},P=(X,L)=>Ie(void 0,void 0,void 0,function*(){var J;const E=L?.resourceEndpoint;if(E===void 0)throw new Error("'endpoint' cannot be null");const I=Object.assign({},q);I.registrationId=(0,te.generateUuid)(),I.sessionId=(0,te.generateUuid)();const j=yield new ce.TrouterConfigClient(E,L).fetchServiceUrls(X);return I.trouterServiceUrl=`${j.trouterServiceUrl}/v4/a`,I.registrarServiceUrl=`${j.registrarServiceUrl}/v3/registrations`,j.cloudType==="int"&&(I.pnhAppId="cns-e2e-test",I.pnhTemplate="cns-e2e-test:1.8"),I.maxRegistrationTimeInMs=(J=L?.registrationTimeInMs)!==null&&J!==void 0?J:q.maxRegistrationTimeInMs,I});Se.createSettings=P,Se.defaultTelemetrySettings={enabled:!1}});k(ne),ne.defaultTelemetrySettings,ne.createSettings;var Te=ne,Me=z(function(ke,Se){var Ie=v&&v.__awaiter||function(X,L,J,E){function I(C){return C instanceof J?C:new J(function(j){j(C)})}return new(J||(J=Promise))(function(C,j){function x(b){try{w(E.next(b))}catch(R){j(R)}}function T(b){try{w(E.throw(b))}catch(R){j(R)}}function w(b){b.done?C(b.value):I(b.value).then(x,T)}w((E=E.apply(X,L||[])).next())})};Object.defineProperty(Se,"__esModule",{value:!0}),Se.CommunicationSignalingClient=Se.ConnectionState=void 0;var q;(function(X){X[X.Unknown=0]="Unknown",X[X.Connected=2]="Connected",X[X.Disconnected=3]="Disconnected",X[X.Switching=9]="Switching"})(q||(Se.ConnectionState=q={}));class P{constructor(L,J,E){this.credential=L,this.logger=J,this.options=E,this.stateChangedListener=null,this.tokenFetchRetries=0,this.trouter=(0,U.createTrouterService)((0,te.toLogProvider)(J))}start(){return Ie(this,void 0,void 0,function*(){var L,J;if(this.resourceEndpoint=(L=this.options)===null||L===void 0?void 0:L.resourceEndpoint,this.resourceEndpoint===void 0)throw new Error("'endpoint' cannot be null");this.gatewayApiVersion=((J=this.options)===null||J===void 0?void 0:J.gatewayApiVersion)||"2024-03-07",this.config===void 0&&(this.config={trouterSettings:yield(0,Te.createSettings)(this.credential,this.options),skypeTokenProvider:E=>Ie(this,void 0,void 0,function*(){if(E){if(this.tokenFetchRetries+=1,this.tokenFetchRetries>se.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES)throw yield this.stop(!0),new Error(`Access token is expired and failed to fetch a valid one after ${se.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES} retries`)}else this.tokenFetchRetries=0;return Promise.resolve((yield this.credential.getToken()).token)}),telemetryConfig:{eventLogger:(0,te.toTelemetrySender)(this.logger),settings:Te.defaultTelemetrySettings}}),this.trouter.start(this.config),this.trouter.setUserActivityState(U.UserActivityState.Active)})}stop(L){return Ie(this,void 0,void 0,function*(){this.trouter.offStateChanged(this.stateChangedListener),this.trouter.clearMessageHandlers(),this.trouter.stop(L??this.tokenFetchRetries>se.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES)})}on(L,J){if(L==="connectionChanged"){this.trouter.offStateChanged(this.stateChangedListener),this.stateChangedListener=(E,I)=>J(E),this.trouter.onStateChanged(this.stateChangedListener);return}this.trouter.registerMessageHandler((0,te.toMessageHandler)(L,J,this.resourceEndpoint,this.gatewayApiVersion))}}Se.CommunicationSignalingClient=P});k(Me),Me.CommunicationSignalingClient,Me.ConnectionState;var xe=Me,Ue=z(function(ke,Se){var Ie=v&&v.__createBinding||(Object.create?(function(P,X,L,J){J===void 0&&(J=L);var E=Object.getOwnPropertyDescriptor(X,L);(!E||("get"in E?!X.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return X[L]}}),Object.defineProperty(P,J,E)}):(function(P,X,L,J){J===void 0&&(J=L),P[J]=X[L]})),q=v&&v.__exportStar||function(P,X){for(var L in P)L!=="default"&&!Object.prototype.hasOwnProperty.call(X,L)&&Ie(X,P,L)};Object.defineProperty(Se,"__esModule",{value:!0}),q(xe,Se)}),He=k(Ue);r.exports=He})(Ed)),Ed.exports}var ef=BN();class _o extends Error{}_o.prototype.name="InvalidTokenError";function HN(r){return decodeURIComponent(atob(r).replace(/(.)/g,(n,i)=>{let o=i.charCodeAt(0).toString(16).toUpperCase();return o.length<2&&(o="0"+o),"%"+o}))}function qN(r){let n=r.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return HN(n)}catch{return atob(n)}}function $N(r,n){if(typeof r!="string")throw new _o("Invalid token specified: must be a string");n||(n={});const i=n.header===!0?0:1,o=r.split(".")[i];if(typeof o!="string")throw new _o(`Invalid token specified: missing part #${i+1}`);let c;try{c=qN(o)}catch(u){throw new _o(`Invalid token specified: invalid base64 for part #${i+1} (${u.message})`)}try{return JSON.parse(c)}catch(u){throw new _o(`Invalid token specified: invalid json for part #${i+1} (${u.message})`)}}const tf=r=>{const{exp:n}=$N(r);return{token:r,expiresOnTimestamp:n*1e3}},rv={token:"",expiresOnTimestamp:-10},VN=r=>r*1e3*60,GN=VN(10),FN=.5;class YN{constructor(n){this.expiringSoonIntervalInMs=GN,this.refreshAfterLifetimePercentage=FN,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.disposed=!1;const{tokenRefresher:i,token:o,refreshProactively:c}=n;this.refresh=i,this.currentToken=o?tf(o):rv,this.refreshProactively=c??!1,this.refreshProactively&&this.scheduleRefresh()}async getToken(n){return this.isTokenExpiringSoon(this.currentToken)?(this.isTokenValid(this.currentToken)||await this.updateTokenAndReschedule(n?.abortSignal),this.currentToken):this.currentToken}dispose(){this.disposed=!0,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.currentToken=rv,this.activeTimeout&&clearTimeout(this.activeTimeout)}async updateTokenAndReschedule(n){if(this.activeTokenUpdating)return this.activeTokenUpdating;this.activeTokenUpdating=this.refreshTokenAndReschedule(n);try{await this.activeTokenUpdating}finally{this.activeTokenUpdating=null}}async refreshTokenAndReschedule(n){const i=await this.refreshToken(n);if(!this.isTokenValid(i))throw new Error("The token returned from the tokenRefresher is expired.");this.currentToken=i,this.refreshProactively&&this.scheduleRefresh()}async refreshToken(n){try{return this.activeTokenFetching||(this.activeTokenFetching=this.refresh(n)),tf(await this.activeTokenFetching)}finally{this.activeTokenFetching=null}}scheduleRefresh(){if(this.disposed)return;this.activeTimeout&&clearTimeout(this.activeTimeout);const n=this.currentToken.expiresOnTimestamp-Date.now();let i=null;this.isTokenExpiringSoon(this.currentToken)?i=n*this.refreshAfterLifetimePercentage:i=n-this.expiringSoonIntervalInMs,this.activeTimeout=setTimeout(()=>this.updateTokenAndReschedule(),i)}isTokenValid(n){return n&&Date.now()<n.expiresOnTimestamp}isTokenExpiringSoon(n){return!n||Date.now()>=n.expiresOnTimestamp-this.expiringSoonIntervalInMs}}class WN{constructor(n){this.token=n}async getToken(){return this.token}dispose(){}}function XN(r){const n=r;return n&&typeof n.getToken=="function"&&(n.signRequest===void 0||n.getToken.length>0)}const JN="ApiVersionPolicy";function KN(r){return{name:JN,sendRequest:(n,i)=>{const o=new URL(n.url);return!o.searchParams.get("api-version")&&r.apiVersion&&(n.url=`${n.url}${Array.from(o.searchParams.keys()).length>0?"&":"?"}api-version=${r.apiVersion}`),i(n)}}}const QN="keyCredentialAuthenticationPolicy";function ZN(r,n){return{name:QN,async sendRequest(i,o){return i.headers.set(n,r.key),o(i)}}}function e2(r,n,i={}){const{credential:o,clientOptions:c}=i;if(o){if(XN(o)){const u=Ql({credential:o,scopes:c?.credentials?.scopes??`${n}/.default`});r.addPolicy(u)}else if(n2(o)){if(!c?.credentials?.apiKeyHeaderName)throw new Error("Missing API Key Header Name");const u=ZN(o,c?.credentials?.apiKeyHeaderName);r.addPolicy(u)}}}function t2(r,n,i={}){const o=Df(i);return o.addPolicy(KN(i)),e2(o,r,{credential:n,clientOptions:i}),o}function n2(r){return r.key!==void 0}function Jr(r){return r.onResponse?{...r,onResponse(n,i){r.onResponse?.(n,i,i)}}:r}function r2(r,n,i={}){const c=t2(r,void 0,i),u=aA(r,{...i,pipeline:c}),f=(p,...m)=>({get:(g={})=>u.path(p,...m).get(Jr(g)),post:(g={})=>u.path(p,...m).post(Jr(g)),put:(g={})=>u.path(p,...m).put(Jr(g)),patch:(g={})=>u.path(p,...m).patch(Jr(g)),delete:(g={})=>u.path(p,...m).delete(Jr(g)),head:(g={})=>u.path(p,...m).head(Jr(g)),options:(g={})=>u.path(p,...m).options(Jr(g)),trace:(g={})=>u.path(p,...m).trace(Jr(g))});return{path:f,pathUnchecked:f,pipeline:u.pipeline}}const i2="https://auth.msft.communication.azure.com/",s2="https://communication.azure.com/clients/",o2="/access/teamsExtension/:exchangeAccessToken",a2="2025-06-30",l2="/access/entra/:exchangeAccessToken",c2="2025-03-02-preview";class u2{constructor(n){this.options=n,this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}},this.client=r2(n.resourceEndpoint),this.httpClient=If(),this.options=n,this.options.scopes=this.options.scopes||["https://communication.azure.com/clients/.default"],this.isPending=this.getToken()}async getToken(n){var i;if(!((i=n?.abortSignal)===null||i===void 0)&&i.aborted)return{token:"",expiresOnTimestamp:0};this.isPending||(this.isPending=this.getTokenInternal(n));try{await this.isPending}finally{this.isPending=null}return this.result.acsToken}async getTokenInternal(n){const i=n?.abortSignal?{abortSignal:n.abortSignal}:void 0,o=await this.options.tokenCredential.getToken(this.options.scopes?this.options.scopes:["https://communication.azure.com/clients/.default"],i),c=new Date,u=new Date(this.result.acsToken.expiresOnTimestamp);if(o===null)this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}};else if(this.result.acsToken.token===""||o.token!==this.result.entraToken||u<c){const f=await this.exchangeEntraToken(this.options.resourceEndpoint,o.token,i);this.result={entraToken:o.token,acsToken:f}}return this.result.acsToken}dispose(){this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}}}async exchangeEntraToken(n,i,o){const c=zf({url:this.createRequestUri(n),method:"POST",headers:Nb({Authorization:`Bearer ${i}`,"Content-Type":"application/json",Accept:"application/json"}),abortSignal:o?.abortSignal,body:JSON.stringify({})}),u=await this.client.pipeline.sendRequest(this.httpClient,c);if(u.status!==200||!u.bodyAsText)throw new Error(`Service request failed. Status: ${u.status}, Body: ${u.bodyAsText}`);const f=JSON.parse(u.bodyAsText);return{token:f.accessToken.token,expiresOnTimestamp:Date.parse(f.accessToken.expiresOn)}}createRequestUri(n){const[i,o]=this.determineEndpointAndApiVersion();return`${n}${i}?api-version=${o}`}determineEndpointAndApiVersion(){if(!this.options.scopes||this.options.scopes.length===0)throw new Error("Scopes validation failed. Ensure all scopes start with either {TeamsExtensionScopePrefix} or {CommunicationClientsScopePrefix}.");if(this.options.scopes.every(n=>n.startsWith(i2)))return[o2,a2];if(this.options.scopes.every(n=>n.startsWith(s2)))return[l2,c2];throw new Error("Scopes validation failed. Ensure all scopes start with either {TeamsExtensionScopePrefix} or {CommunicationClientsScopePrefix}.")}}class d2{constructor(n){this.disposed=!1,typeof n=="string"?this.tokenCredential=new WN(tf(n)):"tokenRefresher"in n?this.tokenCredential=new YN(n):this.tokenCredential=new u2(n)}async getToken(n){this.throwIfDisposed();const i=await this.tokenCredential.getToken(n);return this.throwIfDisposed(),i}dispose(){this.disposed=!0,this.tokenCredential.dispose()}throwIfDisposed(){if(this.disposed)throw new Error("User credential is disposed")}}const f2=r=>typeof r.communicationUserId=="string",h2=r=>typeof r.phoneNumber=="string",p2=r=>typeof r.microsoftTeamsUserId=="string",m2=r=>typeof r.teamsAppId=="string",g2=r=>{const n=typeof r.userId=="string",i=typeof r.tenantId=="string",o=typeof r.resourceId=="string";return n&&i&&o},Vb=r=>f2(r)?Object.assign(Object.assign({},r),{kind:"communicationUser"}):h2(r)?Object.assign(Object.assign({},r),{kind:"phoneNumber"}):p2(r)?Object.assign(Object.assign({},r),{kind:"microsoftTeamsUser"}):m2(r)?Object.assign(Object.assign({},r),{kind:"microsoftTeamsApp"}):g2(r)?Object.assign(Object.assign({},r),{kind:"teamsExtensionUser"}):Object.assign(Object.assign({},r),{kind:"unknown"}),ko=r=>{const n=Vb(r);switch(n.kind){case"communicationUser":return n.communicationUserId;case"microsoftTeamsUser":{const{microsoftTeamsUserId:i,rawId:o,cloud:c,isAnonymous:u}=n;if(o)return o;if(u)return`8:teamsvisitor:${i}`;switch(c){case"dod":return`8:dod:${i}`;case"gcch":return`8:gcch:${i}`;case"public":return`8:orgid:${i}`}return`8:orgid:${i}`}case"microsoftTeamsApp":{const{teamsAppId:i,rawId:o,cloud:c}=n;if(o)return o;switch(c){case"dod":return`28:dod:${i}`;case"gcch":return`28:gcch:${i}`}return`28:orgid:${i}`}case"phoneNumber":{const{phoneNumber:i,rawId:o}=n;return o||`4:${i}`}case"teamsExtensionUser":{const{userId:i,tenantId:o,resourceId:c,rawId:u,cloud:f}=n;if(u)return u;switch(f){case"dod":return`8:dod-acs:${c}_${o}_${i}`;case"gcch":return`8:gcch-acs:${c}_${o}_${i}`}return`8:acs:${c}_${o}_${i}`}case"unknown":return n.id}},nn=(r,n)=>{const i=Object.keys(r)[0],o=r[i];if(n in o)return o[n];throw new Error(`Property ${n} is required for identifier of type ${i}.`)},y2=r=>{const n=[];if(r.communicationUser!==void 0&&n.push("communicationUser"),r.microsoftTeamsUser!==void 0&&n.push("microsoftTeamsUser"),r.microsoftTeamsApp!==void 0&&n.push("microsoftTeamsApp"),r.phoneNumber!==void 0&&n.push("phoneNumber"),r.teamsExtensionUser!==void 0&&n.push("teamsExtensionUser"),n.length>1)throw new Error(`Only one of the properties in ${JSON.stringify(n)} should be present.`)},Gb=r=>{var n,i,o,c,u,f,p,m,g;const v=Vb(r);switch(v.kind){case"communicationUser":return{rawId:ko(v),communicationUser:{id:v.communicationUserId}};case"phoneNumber":return{rawId:(n=v.rawId)!==null&&n!==void 0?n:ko(v),phoneNumber:{value:v.phoneNumber,isAnonymous:(i=v.isAnonymous)!==null&&i!==void 0?i:!1,assertedId:v.assertedId}};case"microsoftTeamsUser":return{rawId:(o=v.rawId)!==null&&o!==void 0?o:ko(v),microsoftTeamsUser:{userId:v.microsoftTeamsUserId,isAnonymous:(c=v.isAnonymous)!==null&&c!==void 0?c:!1,cloud:(u=v.cloud)!==null&&u!==void 0?u:"public"}};case"microsoftTeamsApp":return{rawId:(f=v.rawId)!==null&&f!==void 0?f:ko(v),microsoftTeamsApp:{appId:v.teamsAppId,cloud:(p=v.cloud)!==null&&p!==void 0?p:"public"}};case"teamsExtensionUser":return{rawId:(m=v.rawId)!==null&&m!==void 0?m:ko(v),teamsExtensionUser:{userId:v.userId,tenantId:v.tenantId,resourceId:v.resourceId,cloud:(g=v.cloud)!==null&&g!==void 0?g:"public"}};case"unknown":return{rawId:v.id};default:throw new Error(`Can't serialize an identifier with kind ${v.kind}`)}},v2=r=>r.communicationUser?"communicationUser":r.phoneNumber?"phoneNumber":r.microsoftTeamsUser?"microsoftTeamsUser":r.microsoftTeamsApp?"microsoftTeamsApp":r.teamsExtensionUser?"teamsExtensionUser":"unknown",Fo=r=>{var n,i;y2(r);const o=r.communicationUser,c=r.microsoftTeamsUser,u=r.microsoftTeamsApp,f=r.phoneNumber,p=r.teamsExtensionUser,m=(n=r.kind)!==null&&n!==void 0?n:v2(r);return m==="communicationUser"&&o?{kind:"communicationUser",communicationUserId:nn({communicationUser:o},"id")}:m==="phoneNumber"&&f?{kind:"phoneNumber",phoneNumber:nn({phoneNumber:f},"value"),rawId:nn({phoneNumber:r},"rawId"),isAnonymous:(i=f.isAnonymous)!==null&&i!==void 0?i:!1,assertedId:f.assertedId}:m==="microsoftTeamsUser"&&c?{kind:"microsoftTeamsUser",microsoftTeamsUserId:nn({microsoftTeamsUser:c},"userId"),isAnonymous:nn({microsoftTeamsUser:c},"isAnonymous"),cloud:nn({microsoftTeamsUser:c},"cloud"),rawId:nn({microsoftTeamsUser:r},"rawId")}:m==="microsoftTeamsApp"&&u?{kind:"microsoftTeamsApp",teamsAppId:nn({microsoftTeamsApp:u},"appId"),cloud:nn({microsoftTeamsApp:u},"cloud"),rawId:nn({microsoftTeamsApp:r},"rawId")}:m==="teamsExtensionUser"&&p?{kind:"teamsExtensionUser",userId:nn({teamsExtensionUser:p},"userId"),tenantId:nn({teamsExtensionUser:p},"tenantId"),resourceId:nn({teamsExtensionUser:p},"resourceId"),cloud:nn({teamsExtensionUser:p},"cloud"),rawId:nn({teamsExtensionUser:r},"rawId")}:{kind:"unknown",id:nn({unknown:r},"rawId")}},b2=r=>{const{participants:n,idempotencyToken:i}=r,o=Tr(r,["participants","idempotencyToken"]);return Object.assign({repeatabilityRequestId:i},o)},Fb=r=>{const{id:n}=r,i=Tr(r,["id"]);return Object.assign(Object.assign({},i),{communicationIdentifier:Gb(n)})},S2=r=>{var n;return{participants:(n=r.participants)===null||n===void 0?void 0:n.map(i=>Fb(i))}},nf=r=>{const{communicationIdentifier:n}=r,i=Tr(r,["communicationIdentifier"]);return Object.assign(Object.assign({},i),{id:Fo(n)})},x2=r=>{const{participants:n,initiatorCommunicationIdentifier:i}=r,o=Tr(r,["participants","initiatorCommunicationIdentifier"]);let c=Object.assign({},o);if(i){const u=Fo(i);c=Object.assign(Object.assign({},c),{initiator:u})}return n&&(c=Object.assign(Object.assign({},c),{participants:n?.map(u=>nf(u))})),c},Ld=r=>{const{content:n,senderCommunicationIdentifier:i}=r,o=Tr(r,["content","senderCommunicationIdentifier"]);let c=Object.assign({},o);if(n&&(c=Object.assign(Object.assign({},c),{content:x2(n)})),i){const u=Fo(i);c=Object.assign(Object.assign({},c),{sender:u})}return c},w2=r=>{if(r.kind==="threadCreationDate"||r.kind==="none")return r;throw new Error(`Retention Policy ${r.kind} is not supported`)},Yb=r=>{const{createdByCommunicationIdentifier:n,retentionPolicy:i}=r,o=Tr(r,["createdByCommunicationIdentifier","retentionPolicy"]);let c=Object.assign({},o);return n&&(c=Object.assign(Object.assign({},c),{createdBy:Fo(n)})),i&&(c=Object.assign(Object.assign({},c),{retentionPolicy:w2(i)})),c},C2=r=>{const{chatThread:n}=r,i=Tr(r,["chatThread"]);return n?Object.assign(Object.assign({},i),{chatThread:Yb(n)}):Object.assign({},i)},iv=r=>{const{senderCommunicationIdentifier:n}=r,i=Tr(r,["senderCommunicationIdentifier"]);return Object.assign(Object.assign({},i),{sender:Fo(n)})};var sv;(function(r){r.Unknown="unknown",r.CommunicationUser="communicationUser",r.PhoneNumber="phoneNumber",r.MicrosoftTeamsUser="microsoftTeamsUser",r.MicrosoftTeamsApp="microsoftTeamsApp"})(sv||(sv={}));var ov;(function(r){r.Public="public",r.Dod="dod",r.Gcch="gcch"})(ov||(ov={}));var av;(function(r){r.ThreadCreationDate="threadCreationDate",r.None="none"})(av||(av={}));const nt=Eb({namespace:"Azure.Communication",packageName:"@azure/communication-chat",packageVersion:"1.6.0"}),Lf={type:{name:"Composite",className:"ChatMessageReadReceiptsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessageReadReceipt"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},T2={type:{name:"Composite",className:"ChatMessageReadReceipt",modelProperties:{senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}},readOn:{serializedName:"readOn",required:!0,type:{name:"DateTime"}}}}},Wb={type:{name:"Composite",className:"CommunicationIdentifierModel",modelProperties:{kind:{serializedName:"kind",type:{name:"String"}},rawId:{serializedName:"rawId",type:{name:"String"}},communicationUser:{serializedName:"communicationUser",type:{name:"Composite",className:"CommunicationUserIdentifierModel"}},phoneNumber:{serializedName:"phoneNumber",type:{name:"Composite",className:"PhoneNumberIdentifierModel"}},microsoftTeamsUser:{serializedName:"microsoftTeamsUser",type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel"}},microsoftTeamsApp:{serializedName:"microsoftTeamsApp",type:{name:"Composite",className:"MicrosoftTeamsAppIdentifierModel"}}}}},R2={type:{name:"Composite",className:"CommunicationUserIdentifierModel",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},j2={type:{name:"Composite",className:"PhoneNumberIdentifierModel",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"String"}}}}},E2={type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel",modelProperties:{userId:{serializedName:"userId",required:!0,type:{name:"String"}},isAnonymous:{serializedName:"isAnonymous",type:{name:"Boolean"}},cloud:{serializedName:"cloud",type:{name:"String"}}}}},k2={type:{name:"Composite",className:"MicrosoftTeamsAppIdentifierModel",modelProperties:{appId:{serializedName:"appId",required:!0,type:{name:"String"}},cloud:{serializedName:"cloud",type:{name:"String"}}}}},De={type:{name:"Composite",className:"CommunicationErrorResponse",modelProperties:{error:{serializedName:"error",type:{name:"Composite",className:"ChatError"}}}}},_2={type:{name:"Composite",className:"ChatError",modelProperties:{code:{serializedName:"code",required:!0,type:{name:"String"}},message:{serializedName:"message",required:!0,type:{name:"String"}},target:{serializedName:"target",readOnly:!0,type:{name:"String"}},details:{serializedName:"details",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}},innerError:{serializedName:"innererror",type:{name:"Composite",className:"ChatError"}}}}},Xb={type:{name:"Composite",className:"SendReadReceiptRequest",modelProperties:{chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}}}},Jb={type:{name:"Composite",className:"SendChatMessageRequest",modelProperties:{content:{serializedName:"content",required:!0,type:{name:"String"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},type:{serializedName:"type",type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},Kb={type:{name:"Composite",className:"SendChatMessageResult",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},Bf={type:{name:"Composite",className:"ChatMessagesCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessage"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Qb={type:{name:"Composite",className:"ChatMessage",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},type:{serializedName:"type",required:!0,type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},sequenceId:{serializedName:"sequenceId",required:!0,type:{name:"String"}},version:{serializedName:"version",required:!0,type:{name:"String"}},content:{serializedName:"content",type:{name:"Composite",className:"ChatMessageContent"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},editedOn:{serializedName:"editedOn",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},A2={type:{name:"Composite",className:"ChatMessageContent",modelProperties:{message:{serializedName:"message",type:{name:"String"}},topic:{serializedName:"topic",type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},attachments:{serializedName:"attachments",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatAttachment"}}}},initiatorCommunicationIdentifier:{serializedName:"initiatorCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}}}}},N2={type:{name:"Composite",className:"ChatParticipant",modelProperties:{communicationIdentifier:{serializedName:"communicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},displayName:{serializedName:"displayName",type:{name:"String"}},shareHistoryTime:{serializedName:"shareHistoryTime",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},O2={type:{name:"Composite",className:"ChatAttachment",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},attachmentType:{serializedName:"attachmentType",required:!0,type:{name:"Enum",allowedValues:["image","file"]}},name:{serializedName:"name",type:{name:"String"}},url:{serializedName:"url",type:{name:"String"}},previewUrl:{serializedName:"previewUrl",type:{name:"String"}}}}},Zb={type:{name:"Composite",className:"UpdateChatMessageRequest",modelProperties:{content:{serializedName:"content",type:{name:"String"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},Hf={type:{name:"Composite",className:"ChatParticipantsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},eS={type:{name:"Composite",className:"AddChatParticipantsRequest",modelProperties:{participants:{serializedName:"participants",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}}}}},tS={type:{name:"Composite",className:"AddChatParticipantsResult",modelProperties:{invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},nS={type:{name:"Composite",className:"CreateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",required:!0,type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},Cs={type:{name:"Composite",className:"ChatRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:{serializedName:"kind",clientName:"kind"},modelProperties:{kind:{serializedName:"kind",required:!0,type:{name:"String"}}}}},rS={type:{name:"Composite",className:"CreateChatThreadResult",modelProperties:{chatThread:{serializedName:"chatThread",type:{name:"Composite",className:"ChatThreadProperties"}},invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},iS={type:{name:"Composite",className:"ChatThreadProperties",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},createdByCommunicationIdentifier:{serializedName:"createdByCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},qf={type:{name:"Composite",className:"ChatThreadsItemCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatThreadItem"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},M2={type:{name:"Composite",className:"ChatThreadItem",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},lastMessageReceivedOn:{serializedName:"lastMessageReceivedOn",readOnly:!0,type:{name:"DateTime"}}}}},sS={type:{name:"Composite",className:"UpdateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",type:{name:"String"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},oS={type:{name:"Composite",className:"SendTypingNotificationRequest",modelProperties:{senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}}}}},aS={serializedName:"threadCreationDate",type:{name:"Composite",className:"ThreadCreationDateRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:Cs.type.polymorphicDiscriminator,modelProperties:Object.assign(Object.assign({},Cs.type.modelProperties),{deleteThreadAfterDays:{serializedName:"deleteThreadAfterDays",required:!0,type:{name:"Number"}}})}},lS={serializedName:"none",type:{name:"Composite",className:"NoneRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:Cs.type.polymorphicDiscriminator,modelProperties:Object.assign({},Cs.type.modelProperties)}};let P2={ChatRetentionPolicy:Cs,"ChatRetentionPolicy.threadCreationDate":aS,"ChatRetentionPolicy.none":lS};const cS=Object.freeze(Object.defineProperty({__proto__:null,AddChatParticipantsRequest:eS,AddChatParticipantsResult:tS,ChatAttachment:O2,ChatError:_2,ChatMessage:Qb,ChatMessageContent:A2,ChatMessageReadReceipt:T2,ChatMessageReadReceiptsCollection:Lf,ChatMessagesCollection:Bf,ChatParticipant:N2,ChatParticipantsCollection:Hf,ChatRetentionPolicy:Cs,ChatThreadItem:M2,ChatThreadProperties:iS,ChatThreadsItemCollection:qf,CommunicationErrorResponse:De,CommunicationIdentifierModel:Wb,CommunicationUserIdentifierModel:R2,CreateChatThreadRequest:nS,CreateChatThreadResult:rS,MicrosoftTeamsAppIdentifierModel:k2,MicrosoftTeamsUserIdentifierModel:E2,NoneRetentionPolicy:lS,PhoneNumberIdentifierModel:j2,SendChatMessageRequest:Jb,SendChatMessageResult:Kb,SendReadReceiptRequest:Xb,SendTypingNotificationRequest:oS,ThreadCreationDateRetentionPolicy:aS,UpdateChatMessageRequest:Zb,UpdateChatThreadRequest:sS,discriminators:P2},Symbol.toStringTag,{value:"Module"})),Dt={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},It={parameterPath:"endpoint",mapper:{serializedName:"endpoint",required:!0,type:{name:"String"}},skipEncoding:!0},Jt={parameterPath:"chatThreadId",mapper:{serializedName:"chatThreadId",required:!0,type:{name:"String"}}},Zl={parameterPath:["options","maxPageSize"],mapper:{serializedName:"maxPageSize",type:{name:"Number"}}},uS={parameterPath:["options","skip"],mapper:{serializedName:"skip",type:{name:"Number"}}},on={parameterPath:"apiVersion",mapper:{defaultValue:"2025-03-15",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},As={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},U2={parameterPath:"sendReadReceiptRequest",mapper:Xb},D2={parameterPath:"sendChatMessageRequest",mapper:Jb},dS={parameterPath:["options","startTime"],mapper:{serializedName:"startTime",type:{name:"DateTime"}}},$f={parameterPath:"chatMessageId",mapper:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}},fS={parameterPath:["options","contentType"],mapper:{defaultValue:"application/merge-patch+json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},I2={parameterPath:"updateChatMessageRequest",mapper:Zb},z2={parameterPath:"participantCommunicationIdentifier",mapper:Wb},L2={parameterPath:"addChatParticipantsRequest",mapper:eS},B2={parameterPath:"updateChatThreadRequest",mapper:sS},H2={parameterPath:["options","sendTypingNotificationRequest"],mapper:oS},ec={parameterPath:"nextLink",mapper:{serializedName:"nextLink",required:!0,type:{name:"String"}},skipEncoding:!0},q2={parameterPath:"createChatThreadRequest",mapper:nS},$2={parameterPath:["options","repeatabilityRequestId"],mapper:{serializedName:"repeatability-request-id",type:{name:"String"}}};class V2{constructor(n){this.client=n}async listChatReadReceipts(n,i){return nt.withSpan("ChatApiClient.listChatReadReceipts",i??{},async o=>this.client.sendOperationRequest({chatThreadId:n,options:o},G2))}async sendChatReadReceipt(n,i,o){return nt.withSpan("ChatApiClient.sendChatReadReceipt",o??{},async c=>this.client.sendOperationRequest({chatThreadId:n,sendReadReceiptRequest:i,options:c},F2))}async sendChatMessage(n,i,o){return nt.withSpan("ChatApiClient.sendChatMessage",o??{},async c=>this.client.sendOperationRequest({chatThreadId:n,sendChatMessageRequest:i,options:c},Y2))}async listChatMessages(n,i){return nt.withSpan("ChatApiClient.listChatMessages",i??{},async o=>this.client.sendOperationRequest({chatThreadId:n,options:o},W2))}async getChatMessage(n,i,o){return nt.withSpan("ChatApiClient.getChatMessage",o??{},async c=>this.client.sendOperationRequest({chatThreadId:n,chatMessageId:i,options:c},X2))}async updateChatMessage(n,i,o,c){return nt.withSpan("ChatApiClient.updateChatMessage",c??{},async u=>this.client.sendOperationRequest({chatThreadId:n,chatMessageId:i,updateChatMessageRequest:o,options:u},J2))}async deleteChatMessage(n,i,o){return nt.withSpan("ChatApiClient.deleteChatMessage",o??{},async c=>this.client.sendOperationRequest({chatThreadId:n,chatMessageId:i,options:c},K2))}async listChatParticipants(n,i){return nt.withSpan("ChatApiClient.listChatParticipants",i??{},async o=>this.client.sendOperationRequest({chatThreadId:n,options:o},Q2))}async removeChatParticipant(n,i,o){return nt.withSpan("ChatApiClient.removeChatParticipant",o??{},async c=>this.client.sendOperationRequest({chatThreadId:n,participantCommunicationIdentifier:i,options:c},Z2))}async addChatParticipants(n,i,o){return nt.withSpan("ChatApiClient.addChatParticipants",o??{},async c=>this.client.sendOperationRequest({chatThreadId:n,addChatParticipantsRequest:i,options:c},eO))}async updateChatThreadProperties(n,i,o){return nt.withSpan("ChatApiClient.updateChatThreadProperties",o??{},async c=>this.client.sendOperationRequest({chatThreadId:n,updateChatThreadRequest:i,options:c},tO))}async getChatThreadProperties(n,i){return nt.withSpan("ChatApiClient.getChatThreadProperties",i??{},async o=>this.client.sendOperationRequest({chatThreadId:n,options:o},nO))}async sendTypingNotification(n,i){return nt.withSpan("ChatApiClient.sendTypingNotification",i??{},async o=>this.client.sendOperationRequest({chatThreadId:n,options:o},rO))}async listChatReadReceiptsNext(n,i,o){return nt.withSpan("ChatApiClient.listChatReadReceiptsNext",o??{},async c=>this.client.sendOperationRequest({chatThreadId:n,nextLink:i,options:c},iO))}async listChatMessagesNext(n,i,o){return nt.withSpan("ChatApiClient.listChatMessagesNext",o??{},async c=>this.client.sendOperationRequest({chatThreadId:n,nextLink:i,options:c},sO))}async listChatParticipantsNext(n,i,o){return nt.withSpan("ChatApiClient.listChatParticipantsNext",o??{},async c=>this.client.sendOperationRequest({chatThreadId:n,nextLink:i,options:c},oO))}}const an=kf(cS,!1),G2={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"GET",responses:{200:{bodyMapper:Lf},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},queryParameters:[Zl,uS,on],urlParameters:[It,Jt],headerParameters:[Dt],serializer:an},F2={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"POST",responses:{200:{},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},requestBody:U2,queryParameters:[on],urlParameters:[It,Jt],headerParameters:[Dt,As],mediaType:"json",serializer:an},Y2={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"POST",responses:{201:{bodyMapper:Kb},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},requestBody:D2,queryParameters:[on],urlParameters:[It,Jt],headerParameters:[Dt,As],mediaType:"json",serializer:an},W2={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"GET",responses:{200:{bodyMapper:Bf},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},queryParameters:[Zl,on,dS],urlParameters:[It,Jt],headerParameters:[Dt],serializer:an},X2={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"GET",responses:{200:{bodyMapper:Qb},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},queryParameters:[on],urlParameters:[It,Jt,$f],headerParameters:[Dt],serializer:an},J2={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},requestBody:I2,queryParameters:[on],urlParameters:[It,Jt,$f],headerParameters:[Dt,fS],mediaType:"json",serializer:an},K2={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},queryParameters:[on],urlParameters:[It,Jt,$f],headerParameters:[Dt],serializer:an},Q2={path:"/chat/threads/{chatThreadId}/participants",httpMethod:"GET",responses:{200:{bodyMapper:Hf},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},queryParameters:[Zl,uS,on],urlParameters:[It,Jt],headerParameters:[Dt],serializer:an},Z2={path:"/chat/threads/{chatThreadId}/participants/:remove",httpMethod:"POST",responses:{204:{},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},requestBody:z2,queryParameters:[on],urlParameters:[It,Jt],headerParameters:[Dt,As],mediaType:"json",serializer:an},eO={path:"/chat/threads/{chatThreadId}/participants/:add",httpMethod:"POST",responses:{201:{bodyMapper:tS},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},requestBody:L2,queryParameters:[on],urlParameters:[It,Jt],headerParameters:[Dt,As],mediaType:"json",serializer:an},tO={path:"/chat/threads/{chatThreadId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},requestBody:B2,queryParameters:[on],urlParameters:[It,Jt],headerParameters:[Dt,fS],mediaType:"json",serializer:an},nO={path:"/chat/threads/{chatThreadId}",httpMethod:"GET",responses:{200:{bodyMapper:iS},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},queryParameters:[on],urlParameters:[It,Jt],headerParameters:[Dt],serializer:an},rO={path:"/chat/threads/{chatThreadId}/typing",httpMethod:"POST",responses:{200:{},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},requestBody:H2,queryParameters:[on],urlParameters:[It,Jt],headerParameters:[Dt,As],mediaType:"json",serializer:an},iO={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Lf},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},urlParameters:[It,Jt,ec],headerParameters:[Dt],serializer:an},sO={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Bf},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},urlParameters:[It,Jt,ec],headerParameters:[Dt],serializer:an},oO={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Hf},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},urlParameters:[It,Jt,ec],headerParameters:[Dt],serializer:an};class aO{constructor(n){this.client=n}async createChatThread(n,i){return nt.withSpan("ChatApiClient.createChatThread",i??{},async o=>this.client.sendOperationRequest({createChatThreadRequest:n,options:o},lO))}async listChatThreads(n){return nt.withSpan("ChatApiClient.listChatThreads",n??{},async i=>this.client.sendOperationRequest({options:i},cO))}async deleteChatThread(n,i){return nt.withSpan("ChatApiClient.deleteChatThread",i??{},async o=>this.client.sendOperationRequest({chatThreadId:n,options:o},uO))}async listChatThreadsNext(n,i){return nt.withSpan("ChatApiClient.listChatThreadsNext",i??{},async o=>this.client.sendOperationRequest({nextLink:n,options:o},dO))}}const tc=kf(cS,!1),lO={path:"/chat/threads",httpMethod:"POST",responses:{201:{bodyMapper:rS},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},requestBody:q2,queryParameters:[on],urlParameters:[It],headerParameters:[Dt,As,$2],mediaType:"json",serializer:tc},cO={path:"/chat/threads",httpMethod:"GET",responses:{200:{bodyMapper:qf},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},queryParameters:[Zl,on,dS],urlParameters:[It],headerParameters:[Dt],serializer:tc},uO={path:"/chat/threads/{chatThreadId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},queryParameters:[on],urlParameters:[It,Jt],headerParameters:[Dt],serializer:tc},dO={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:qf},401:{bodyMapper:De,isError:!0},403:{bodyMapper:De,isError:!0},429:{bodyMapper:De,isError:!0},503:{bodyMapper:De,isError:!0}},urlParameters:[It,ec],headerParameters:[Dt],serializer:tc};class hS extends qb{constructor(n,i){var o,c;if(n===void 0)throw new Error("'endpoint' cannot be null");i||(i={});const u={requestContentType:"application/json; charset=utf-8"},f="azsdk-js-communication-chat/1.6.0",p=i.userAgentOptions&&i.userAgentOptions.userAgentPrefix?`${i.userAgentOptions.userAgentPrefix} ${f}`:`${f}`,m=Object.assign(Object.assign(Object.assign({},u),i),{userAgentOptions:{userAgentPrefix:p},endpoint:(c=(o=i.endpoint)!==null&&o!==void 0?o:i.baseUri)!==null&&c!==void 0?c:"{endpoint}"});super(m),this.endpoint=n,this.apiVersion=i.apiVersion||"2025-03-15",this.chatThread=new V2(this),this.chat=new aO(this),this.addCustomApiVersionPolicy(i.apiVersion)}addCustomApiVersionPolicy(n){if(!n)return;const i={name:"CustomApiVersionPolicy",async sendRequest(o,c){const u=o.url.split("?");if(u.length>1){const f=u[1].split("&").map(p=>p.indexOf("api-version")>-1?"api-version="+n:p);o.url=u[0]+"?"+f.join("&")}return c(o)}};this.pipeline.addPolicy(i)}}const Oo=Jl("communication-chat"),pS=r=>Ql({credential:{getToken:(i,o)=>r.getToken({abortSignal:o?.abortSignal})},scopes:[]}),fO=8e3;class hO{constructor(n,i,o,c={}){this.endpoint=n,this.timeOfLastTypingRequest=void 0,this.threadId=i,this.tokenCredential=o;const u=Object.assign(Object.assign({},c),{loggingOptions:{logger:Oo.info}});this.client=new hS(this.endpoint,Object.assign({endpoint:this.endpoint},u));const f=pS(this.tokenCredential);this.client.pipeline.addPolicy(f)}getProperties(n={}){return nt.withSpan("ChatClient-GetProperties",n,async i=>{const o=await this.client.chatThread.getChatThreadProperties(this.threadId,i);return Yb(o)})}updateTopic(n,i={}){return nt.withSpan("ChatThreadClient-UpdateTopic",i,async o=>{await this.client.chatThread.updateChatThreadProperties(this.threadId,{topic:n},o)})}updateProperties(n={}){return nt.withSpan("ChatThreadClient-UpdateProperties",n,async i=>{await this.client.chatThread.updateChatThreadProperties(this.threadId,n,i)})}sendMessage(n,i={}){return nt.withSpan("ChatThreadClient-SendMessage",i,async o=>(this.timeOfLastTypingRequest=void 0,await this.client.chatThread.sendChatMessage(this.threadId,Object.assign(Object.assign({},n),i),o)))}getMessage(n,i={}){return nt.withSpan("ChatThreadClient-GetMessage",i,async o=>{const c=await this.client.chatThread.getChatMessage(this.threadId,n,o);return Ld(c)})}listMessagesPage(n){return Qr(this,arguments,function*(o,c={}){if(!o.continuationToken){const u=yield ct(this.client.chatThread.listChatMessages(this.threadId,c));o.continuationToken=u.nextLink,u.value&&(yield yield ct(u.value.map(Ld,this)))}for(;o.continuationToken;){const u=yield ct(this.client.chatThread.listChatMessagesNext(this.threadId,o.continuationToken,c));if(o.continuationToken=u.nextLink,u.value)yield yield ct(u.value.map(Ld,this));else break}})}listMessagesAll(n){return Qr(this,arguments,function*(){var o,c,u,f;try{for(var p=!0,m=Zr(this.listMessagesPage({},n)),g;g=yield ct(m.next()),o=g.done,!o;p=!0)f=g.value,p=!1,yield ct(yield*xl(Zr(f)))}catch(v){c={error:v}}finally{try{!p&&!o&&(u=m.return)&&(yield ct(u.call(m)))}finally{if(c)throw c.error}}})}listMessages(n={}){const{span:i,updatedOptions:o}=nt.startSpan("ChatThreadClient-ListMessages",n);try{const c=this.listMessagesAll(o);return{next(){return c.next()},[Symbol.asyncIterator](){return this},byPage:(u={})=>this.listMessagesPage(u,o)}}catch(c){throw i.setStatus({status:"error",error:c}),c}finally{i.end()}}deleteMessage(n,i={}){return nt.withSpan("ChatThreadClient-DeleteMessage",i,async o=>{await this.client.chatThread.deleteChatMessage(this.threadId,n,o)})}async updateMessage(n,i={}){return nt.withSpan("ChatThreadClient-UpdateMessage",i,async o=>{await this.client.chatThread.updateChatMessage(this.threadId,n,i,o)})}async addParticipants(n,i={}){return nt.withSpan("ChatThreadClient-AddParticipants",i,async o=>await this.client.chatThread.addChatParticipants(this.threadId,S2(n),o))}listParticipantsPage(n){return Qr(this,arguments,function*(o,c={}){if(!o.continuationToken){const u=yield ct(this.client.chatThread.listChatParticipants(this.threadId,c));o.continuationToken=u.nextLink,u.value&&(yield yield ct(u.value.map(nf,this)))}for(;o.continuationToken;){const u=yield ct(this.client.chatThread.listChatParticipantsNext(this.threadId,o.continuationToken,c));if(o.continuationToken=u.nextLink,u.value)yield yield ct(u.value.map(nf,this));else break}})}listParticipantsAll(n){return Qr(this,arguments,function*(){var o,c,u,f;try{for(var p=!0,m=Zr(this.listParticipantsPage({},n)),g;g=yield ct(m.next()),o=g.done,!o;p=!0)f=g.value,p=!1,yield ct(yield*xl(Zr(f)))}catch(v){c={error:v}}finally{try{!p&&!o&&(u=m.return)&&(yield ct(u.call(m)))}finally{if(c)throw c.error}}})}listParticipants(n={}){const{span:i,updatedOptions:o}=nt.startSpan("ChatThreadClient-ListParticipants",n);try{const c=this.listParticipantsAll(o);return{next(){return c.next()},[Symbol.asyncIterator](){return this},byPage:(u={})=>this.listParticipantsPage(u,o)}}catch(c){throw i.setStatus({status:"error",error:c}),c}finally{i.end()}}async removeParticipant(n,i={}){return nt.withSpan("ChatThreadClient-RemoveParticipant",i,async o=>{await this.client.chatThread.removeChatParticipant(this.threadId,Gb(n),o)})}async sendTypingNotification(n={}){return nt.withSpan("ChatThreadClient-SendTypingNotification",n,async i=>{const o=new Date,{senderDisplayName:c}=i,u=Tr(i,["senderDisplayName"]);return this.canPostTypingNotification(o)?(this.timeOfLastTypingRequest=o,await this.client.chatThread.sendTypingNotification(this.threadId,Object.assign({sendTypingNotificationRequest:{senderDisplayName:c}},u)),!0):(Oo.info(`Typing Notification NOT Send. [thread_id=${this.threadId}]`),!1)})}async sendReadReceipt(n,i={}){return nt.withSpan("ChatThreadClient-SendReadReceipt",i,async o=>{await this.client.chatThread.sendChatReadReceipt(this.threadId,n,o)})}listReadReceiptsPage(n){return Qr(this,arguments,function*(o,c={}){if(!o.continuationToken){const u=yield ct(this.client.chatThread.listChatReadReceipts(this.threadId,c));o.continuationToken=u.nextLink,u.value&&(yield yield ct(u.value.map(iv,this)))}for(;o.continuationToken;){const u=yield ct(this.client.chatThread.listChatReadReceiptsNext(this.threadId,o.continuationToken,c));if(o.continuationToken=u.nextLink,u.value)yield yield ct(u.value.map(iv,this));else break}})}listReadReceiptsAll(n){return Qr(this,arguments,function*(){var o,c,u,f;try{for(var p=!0,m=Zr(this.listReadReceiptsPage({},n)),g;g=yield ct(m.next()),o=g.done,!o;p=!0)f=g.value,p=!1,yield ct(yield*xl(Zr(f)))}catch(v){c={error:v}}finally{try{!p&&!o&&(u=m.return)&&(yield ct(u.call(m)))}finally{if(c)throw c.error}}})}listReadReceipts(n={}){const{span:i,updatedOptions:o}=nt.startSpan("ChatThreadClient-ListChatReadReceipts",n);try{const c=this.listReadReceiptsAll(o);return{next(){return c.next()},[Symbol.asyncIterator](){return this},byPage:(u={})=>this.listReadReceiptsPage(u,o)}}catch(c){throw i.setStatus({status:"error",error:c}),c}finally{i.end()}}canPostTypingNotification(n){return this.timeOfLastTypingRequest&&n.getTime()-this.timeOfLastTypingRequest.getTime()<fO?(Oo.info(`Typing interval check failed. [last_request=${this.timeOfLastTypingRequest}]`),!1):!0}}var pl={exports:{}},lv;function pO(){if(lv)return pl.exports;lv=1;var r=typeof Reflect=="object"?Reflect:null,n=r&&typeof r.apply=="function"?r.apply:function(te,ce,ne){return Function.prototype.apply.call(te,ce,ne)},i;r&&typeof r.ownKeys=="function"?i=r.ownKeys:Object.getOwnPropertySymbols?i=function(te){return Object.getOwnPropertyNames(te).concat(Object.getOwnPropertySymbols(te))}:i=function(te){return Object.getOwnPropertyNames(te)};function o(oe){console&&console.warn&&console.warn(oe)}var c=Number.isNaN||function(te){return te!==te};function u(){u.init.call(this)}pl.exports=u,pl.exports.once=le,u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var f=10;function p(oe){if(typeof oe!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof oe)}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(oe){if(typeof oe!="number"||oe<0||c(oe))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+oe+".");f=oe}}),u.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(te){if(typeof te!="number"||te<0||c(te))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+te+".");return this._maxListeners=te,this};function m(oe){return oe._maxListeners===void 0?u.defaultMaxListeners:oe._maxListeners}u.prototype.getMaxListeners=function(){return m(this)},u.prototype.emit=function(te){for(var ce=[],ne=1;ne<arguments.length;ne++)ce.push(arguments[ne]);var Te=te==="error",Me=this._events;if(Me!==void 0)Te=Te&&Me.error===void 0;else if(!Te)return!1;if(Te){var xe;if(ce.length>0&&(xe=ce[0]),xe instanceof Error)throw xe;var Ue=new Error("Unhandled error."+(xe?" ("+xe.message+")":""));throw Ue.context=xe,Ue}var He=Me[te];if(He===void 0)return!1;if(typeof He=="function")n(He,this,ce);else for(var ke=He.length,Se=U(He,ke),ne=0;ne<ke;++ne)n(Se[ne],this,ce);return!0};function g(oe,te,ce,ne){var Te,Me,xe;if(p(ce),Me=oe._events,Me===void 0?(Me=oe._events=Object.create(null),oe._eventsCount=0):(Me.newListener!==void 0&&(oe.emit("newListener",te,ce.listener?ce.listener:ce),Me=oe._events),xe=Me[te]),xe===void 0)xe=Me[te]=ce,++oe._eventsCount;else if(typeof xe=="function"?xe=Me[te]=ne?[ce,xe]:[xe,ce]:ne?xe.unshift(ce):xe.push(ce),Te=m(oe),Te>0&&xe.length>Te&&!xe.warned){xe.warned=!0;var Ue=new Error("Possible EventEmitter memory leak detected. "+xe.length+" "+String(te)+" listeners added. Use emitter.setMaxListeners() to increase limit");Ue.name="MaxListenersExceededWarning",Ue.emitter=oe,Ue.type=te,Ue.count=xe.length,o(Ue)}return oe}u.prototype.addListener=function(te,ce){return g(this,te,ce,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(te,ce){return g(this,te,ce,!0)};function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function k(oe,te,ce){var ne={fired:!1,wrapFn:void 0,target:oe,type:te,listener:ce},Te=v.bind(ne);return Te.listener=ce,ne.wrapFn=Te,Te}u.prototype.once=function(te,ce){return p(ce),this.on(te,k(this,te,ce)),this},u.prototype.prependOnceListener=function(te,ce){return p(ce),this.prependListener(te,k(this,te,ce)),this},u.prototype.removeListener=function(te,ce){var ne,Te,Me,xe,Ue;if(p(ce),Te=this._events,Te===void 0)return this;if(ne=Te[te],ne===void 0)return this;if(ne===ce||ne.listener===ce)--this._eventsCount===0?this._events=Object.create(null):(delete Te[te],Te.removeListener&&this.emit("removeListener",te,ne.listener||ce));else if(typeof ne!="function"){for(Me=-1,xe=ne.length-1;xe>=0;xe--)if(ne[xe]===ce||ne[xe].listener===ce){Ue=ne[xe].listener,Me=xe;break}if(Me<0)return this;Me===0?ne.shift():B(ne,Me),ne.length===1&&(Te[te]=ne[0]),Te.removeListener!==void 0&&this.emit("removeListener",te,Ue||ce)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(te){var ce,ne,Te;if(ne=this._events,ne===void 0)return this;if(ne.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):ne[te]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete ne[te]),this;if(arguments.length===0){var Me=Object.keys(ne),xe;for(Te=0;Te<Me.length;++Te)xe=Me[Te],xe!=="removeListener"&&this.removeAllListeners(xe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(ce=ne[te],typeof ce=="function")this.removeListener(te,ce);else if(ce!==void 0)for(Te=ce.length-1;Te>=0;Te--)this.removeListener(te,ce[Te]);return this};function z(oe,te,ce){var ne=oe._events;if(ne===void 0)return[];var Te=ne[te];return Te===void 0?[]:typeof Te=="function"?ce?[Te.listener||Te]:[Te]:ce?D(Te):U(Te,Te.length)}u.prototype.listeners=function(te){return z(this,te,!0)},u.prototype.rawListeners=function(te){return z(this,te,!1)},u.listenerCount=function(oe,te){return typeof oe.listenerCount=="function"?oe.listenerCount(te):W.call(oe,te)},u.prototype.listenerCount=W;function W(oe){var te=this._events;if(te!==void 0){var ce=te[oe];if(typeof ce=="function")return 1;if(ce!==void 0)return ce.length}return 0}u.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function U(oe,te){for(var ce=new Array(te),ne=0;ne<te;++ne)ce[ne]=oe[ne];return ce}function B(oe,te){for(;te+1<oe.length;te++)oe[te]=oe[te+1];oe.pop()}function D(oe){for(var te=new Array(oe.length),ce=0;ce<te.length;++ce)te[ce]=oe[ce].listener||oe[ce];return te}function le(oe,te){return new Promise(function(ce,ne){function Te(xe){oe.removeListener(te,Me),ne(xe)}function Me(){typeof oe.removeListener=="function"&&oe.removeListener("error",Te),ce([].slice.call(arguments))}fe(oe,te,Me,{once:!0}),te!=="error"&&se(oe,Te,{once:!0})})}function se(oe,te,ce){typeof oe.on=="function"&&fe(oe,"error",te,ce)}function fe(oe,te,ce,ne){if(typeof oe.on=="function")ne.once?oe.once(te,ce):oe.on(te,ce);else if(typeof oe.addEventListener=="function")oe.addEventListener(te,function Te(Me){ne.once&&oe.removeEventListener(te,Te),ce(Me)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof oe)}return pl.exports}var mO=pO();function gO(){return x0()}const yO=(r,n,i)=>{var o,c,u,f;return new ef.CommunicationSignalingClient(r,n,{resourceEndpoint:(o=i?.resourceEndpoint)!==null&&o!==void 0?o:void 0,gatewayApiVersion:(c=i?.gatewayApiVersion)!==null&&c!==void 0?c:void 0,additionalPolicies:(u=i?.additionalPolicies)!==null&&u!==void 0?u:void 0,userAgentOptions:(f=i?.userAgentOptions)!==null&&f!==void 0?f:void 0})};class vO{constructor(n,i,o={}){this.endpoint=n,this.signalingClient=void 0,this.emitter=new mO.EventEmitter,this.isRealtimeNotificationsStarted=!1,this.tokenCredential=i;const c=Object.assign(Object.assign({},o),{loggingOptions:{logger:Oo.info}});this.client=new hS(this.endpoint,Object.assign({endpoint:this.endpoint},c));const u=pS(this.tokenCredential);this.client.pipeline.addPolicy(u),this.clientOptions=Object.assign({},o),this.clientOptions.signalingClientOptions=Object.assign(Object.assign({},this.clientOptions.signalingClientOptions),{resourceEndpoint:this.endpoint,gatewayApiVersion:this.client.apiVersion}),this.signalingClient=yO(i,Oo,this.clientOptions.signalingClientOptions)}getChatThreadClient(n){return new hO(this.endpoint,n,this.tokenCredential,this.clientOptions)}async createChatThread(n,i={}){return nt.withSpan("ChatClient-CreateChatThread",i,async o=>{var c,u;o.idempotencyToken=(c=o.idempotencyToken)!==null&&c!==void 0?c:gO();const f=b2(o),p=await this.client.chat.createChatThread({topic:n.topic,participants:(u=i.participants)===null||u===void 0?void 0:u.map(m=>Fb(m)),metadata:i.metadata,retentionPolicy:i.retentionPolicy},f);return C2(p)})}listChatThreadsPage(n){return Qr(this,arguments,function*(o,c={}){if(!o.continuationToken){const u=yield ct(this.client.chat.listChatThreads(c));o.continuationToken=u.nextLink,u.value&&(yield yield ct(u.value))}for(;o.continuationToken;){const u=yield ct(this.client.chat.listChatThreadsNext(o.continuationToken,c));if(o.continuationToken=u.nextLink,u.value)yield yield ct(u.value);else break}})}listChatThreadsAll(n){return Qr(this,arguments,function*(){var o,c,u,f;try{for(var p=!0,m=Zr(this.listChatThreadsPage({},n)),g;g=yield ct(m.next()),o=g.done,!o;p=!0)f=g.value,p=!1,yield ct(yield*xl(Zr(f)))}catch(v){c={error:v}}finally{try{!p&&!o&&(u=m.return)&&(yield ct(u.call(m)))}finally{if(c)throw c.error}}})}listChatThreads(n={}){const{span:i,updatedOptions:o}=nt.startSpan("ChatClient-ListChatThreads",n);try{const c=this.listChatThreadsAll(o);return{next(){return c.next()},[Symbol.asyncIterator](){return this},byPage:(u={})=>this.listChatThreadsPage(u,o)}}catch(c){throw i.setStatus({error:c,status:"error"}),c}finally{i.end()}}async deleteChatThread(n,i={}){return nt.withSpan("ChatClient-DeleteChatThread",i,async o=>{await this.client.chat.deleteChatThread(n,o)})}async startRealtimeNotifications(){if(this.signalingClient===void 0)throw new Error("Realtime notifications are not supported in node js.");this.isRealtimeNotificationsStarted||(this.isRealtimeNotificationsStarted=!0,await this.signalingClient.start(),this.subscribeToSignalingEvents())}async stopRealtimeNotifications(){if(this.signalingClient===void 0)throw new Error("Realtime notifications are not supported in node js.");this.isRealtimeNotificationsStarted=!1,await this.signalingClient.stop(),this.emitter.removeAllListeners()}on(n,i){if(this.signalingClient===void 0)throw new Error("Realtime notifications are only supported in the browser.");if(!this.isRealtimeNotificationsStarted&&n!=="realTimeNotificationConnected"&&n!=="realTimeNotificationDisconnected")throw new Error("You must call startRealtimeNotifications before you can subscribe to events.");this.emitter.on(n,i)}off(n,i){if(this.signalingClient===void 0)throw new Error("Realtime notifications are only supported in the browser.");this.emitter.removeListener(n,i)}subscribeToSignalingEvents(){if(this.signalingClient===void 0)throw new Error("Realtime notifications are only supported in the browser.");this.signalingClient.on("connectionChanged",n=>{n===ef.ConnectionState.Connected?this.emitter.emit("realTimeNotificationConnected"):n===ef.ConnectionState.Disconnected&&this.emitter.emit("realTimeNotificationDisconnected")}),this.signalingClient.on("chatMessageReceived",n=>{this.emitter.emit("chatMessageReceived",n)}),this.signalingClient.on("chatMessageEdited",n=>{this.emitter.emit("chatMessageEdited",n)}),this.signalingClient.on("chatMessageDeleted",n=>{this.emitter.emit("chatMessageDeleted",n)}),this.signalingClient.on("typingIndicatorReceived",n=>{this.emitter.emit("typingIndicatorReceived",n)}),this.signalingClient.on("readReceiptReceived",n=>{this.emitter.emit("readReceiptReceived",n)}),this.signalingClient.on("chatThreadCreated",n=>{this.emitter.emit("chatThreadCreated",n)}),this.signalingClient.on("chatThreadDeleted",n=>{this.emitter.emit("chatThreadDeleted",n)}),this.signalingClient.on("chatThreadPropertiesUpdated",n=>{this.emitter.emit("chatThreadPropertiesUpdated",n)}),this.signalingClient.on("participantsAdded",n=>{this.emitter.emit("participantsAdded",n)}),this.signalingClient.on("participantsRemoved",n=>{this.emitter.emit("participantsRemoved",n)})}}function bO(){const{recipientId:r}=xv(),n=rr(),[i,o]=O.useState(null),[c,u]=O.useState(null),[f,p]=O.useState(null),[m,g]=O.useState([]),[v,k]=O.useState(""),[z,W]=O.useState(!0),[U,B]=O.useState(!1),[D,le]=O.useState(null),se=localStorage.getItem("userId"),fe=O.useRef(null),oe=O.useRef(!1),te=O.useRef(null),ce=O.useRef(null),ne=O.useRef(null),Te=(ke,Se="success")=>{le({message:ke,type:Se}),Se==="success"&&setTimeout(()=>{le(Ie=>Ie?{...Ie,hiding:!0}:null),setTimeout(()=>le(null),300)},3e3)},Me=ke=>{console.log("Real-time message event received:",ke),ke.threadId===ce.current&&ke.sender.communicationUserId!==ne.current&&g(Se=>Se.find(Ie=>Ie.id===ke.id)?Se:[...Se,{id:ke.id,sender:"Recipient",text:ke.message,timestamp:new Date}])};O.useEffect(()=>(se&&r&&!oe.current&&(oe.current=!0,Ue()),()=>{te.current&&(console.log("Cleaning up chat real-time notifications..."),te.current.off("chatMessageReceived",Me),te.current.stopRealtimeNotifications().catch(console.error),te.current=null)}),[se,r]),O.useEffect(()=>{xe()},[m]);const xe=()=>{fe.current?.scrollIntoView({behavior:"smooth"})},Ue=async()=>{try{W(!0),console.log("Initializing chat for user:",se,"with recipient:",r),console.log("Fetching chat token...");const ke=await Ge.get("issuechattoken",{params:{userId:se}}),{token:Se,user:Ie}=ke.data;o(Se),ne.current=Ie.communicationUserId,console.log("Token received for ACS ID:",Ie.communicationUserId);const q=new d2(Se),P=new vO("https://acs-festive-guest.india.communication.azure.com/",q);te.current=P,u(P),console.log("Getting or creating chat thread...");const L=(await Ge.post("getorcreatechatthread",{userId:se,recipientId:r})).data.threadId;console.log("Thread ID received:",L),ce.current=L,p(L),console.log("Loading message history...");const E=P.getChatThreadClient(L).listMessages(),I=[];for await(const C of E)C.type==="text"&&I.push({id:C.id,sender:C.sender.communicationUserId===Ie.communicationUserId?"Me":"Recipient",text:C.content.message,timestamp:C.createdOn});g(I.reverse()),console.log("Starting real-time notifications..."),await P.startRealtimeNotifications(),P.on("chatMessageReceived",Me),console.log("Chat initialization complete.")}catch(ke){console.error("Failed to init chat:",ke),Te("Failed to initialize chat: "+(ke.response?.data?.error||ke.message),"error")}finally{W(!1)}},He=async ke=>{if(ke.preventDefault(),!!v.trim()){if(!te.current||!ce.current){Te("Chat not fully initialized. Please wait...","error");return}try{B(!0);const Se=te.current.getChatThreadClient(ce.current),Ie=v;console.log("Attempting to send message to ACS...");const q=await Se.sendMessage({content:Ie});console.log("Message sent successfully. ID:",q.id),k(""),g(P=>P.find(X=>X.id===q.id)?P:[...P,{id:q.id,sender:"Me",text:Ie,timestamp:new Date}])}catch(Se){console.error("Failed to send message:",Se),Te("Failed to send message: "+Se.message,"error")}finally{B(!1)}}};return z?a.jsxs("div",{className:"container",style:{textAlign:"center",padding:"5rem"},children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Initializing secure chat..."})]}):a.jsxs("div",{className:"modern-chat-page",children:[D&&a.jsx("div",{className:"toast-container",children:a.jsxs("div",{className:`toast ${D.type} ${D.hiding?"hiding":""}`,children:[a.jsx("span",{className:"toast-icon",children:D.type==="success"?"":D.type==="error"?"":""}),a.jsx("div",{className:"toast-content",children:a.jsx("p",{className:"toast-message",children:D.message})}),D.type!=="success"&&a.jsx("button",{onClick:()=>le(null),style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.5rem"},children:""})]})}),a.jsxs("div",{className:"chat-window-full",children:[a.jsx("div",{className:"chat-header-full",children:a.jsxs("div",{className:"chat-user-info-full",children:[a.jsx("button",{onClick:()=>n(-1),className:"back-btn-modern",title:"Go Back",children:a.jsx(ff,{size:20})}),a.jsx("div",{className:"user-avatar",children:""}),a.jsxs("div",{className:"user-details",children:[a.jsx("h3",{children:"Secure Chat"}),a.jsx("span",{className:"user-status",children:" Online"})]})]})}),a.jsxs("div",{className:"chat-messages",children:[m.map((ke,Se)=>a.jsxs("div",{className:`message-bubble ${ke.sender==="Me"?"sent":"received"}`,children:[a.jsx("div",{className:"message-content",children:ke.text}),a.jsx("div",{className:"message-time",children:new Date(ke.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},ke.id||Se)),a.jsx("div",{ref:fe})]}),a.jsxs("form",{onSubmit:He,className:"chat-input",children:[a.jsx("input",{type:"text",value:v,onChange:ke=>k(ke.target.value),placeholder:"Type a message...",className:"message-input"}),a.jsx("button",{type:"submit",className:"send-btn",disabled:U,children:U?a.jsx("span",{className:"spinner-small"}):a.jsx(Po,{size:20})})]})]})]})}const SO=()=>{const[r,n]=O.useState([]),[i,o]=O.useState(null),[c,u]=O.useState([]),[f,p]=O.useState(""),[m,g]=O.useState(!1),[v,k]=O.useState(!1),[z,W]=O.useState(!1),[U,B]=O.useState(null),le=(()=>{const xe=localStorage.getItem("userId");if(xe)return xe;try{const Ue=JSON.parse(localStorage.getItem("user")||"{}");return Ue.userId||Ue.id}catch{return null}})(),se=O.useRef(null);O.useEffect(()=>{oe()},[]),O.useEffect(()=>{se.current?.scrollIntoView({behavior:"auto"})},[c]);const fe=async xe=>{try{const Ue=await Ge.post("user/public-profile",{userId:xe});B(Ue.data)}catch(Ue){console.error("Failed to fetch profile:",Ue)}},oe=async()=>{try{g(!0);const Ue=((await Ge.get("chat/conversations")).data||[]).map(He=>({...He,otherUserName:He.otherUserName||"Unknown User",lastMessage:He.lastMessage||"",timestamp:He.timestamp||new Date().toISOString(),unreadCount:He.unreadCount||0}));n(Ue)}catch(xe){console.error("Failed to fetch conversations:",xe)}finally{g(!1)}},te=async xe=>{if(o(xe),u([]),!xe.otherUserId){console.error("No otherUserId in conversation:",xe);return}await ce(xe.otherUserId),W(!0)},ce=async xe=>{try{const Ue=await Ge.get(`chat/messages/${xe}`);if(!Ue.data||!Array.isArray(Ue.data)){u([]);return}const He=Ue.data.map(ke=>({id:ke.id,sender:ke.senderId===le?"Me":"Recipient",text:ke.message||"",timestamp:new Date(ke.timestamp),status:ke.status||"sent"}));u(He)}catch(Ue){console.error("Failed to load messages:",Ue),u([])}},ne=()=>{W(!1),o(null)},Te=async xe=>{if(xe.preventDefault(),!(!f.trim()||!i))try{k(!0);const Ue=f;p(""),u(ke=>[...ke,{id:Date.now(),sender:"Me",text:Ue,timestamp:new Date,status:"Sent"}]);const He=await Ge.post("chat/send",{recipientId:i.otherUserId,message:Ue});oe()}catch(Ue){console.error("Failed to send message:",Ue)}finally{k(!1)}},Me=xe=>{const Ue=new Date(xe),ke=new Date-Ue;return Math.floor(ke/(1e3*60*60))<24?Ue.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):Ue.toLocaleDateString([],{month:"short",day:"numeric"})};return a.jsxs("div",{className:"chats-container",children:[a.jsxs("div",{className:`conversations-sidebar ${z?"mobile-hidden":""}`,children:[a.jsx("div",{className:"sidebar-header",children:a.jsx("h3",{children:" Messages"})}),a.jsx("div",{className:"conversations-list",children:m?a.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:"Loading..."}):r.length===0?a.jsx("div",{className:"no-conversations",children:a.jsx("p",{children:"No conversations yet"})}):r.map(xe=>a.jsxs("div",{className:`conversation-item ${i?.otherUserId===xe.otherUserId?"active":""}`,onClick:()=>te(xe),children:[a.jsx("div",{className:"conversation-avatar",children:a.jsx(nr,{src:xe.profileImageUrl,alt:xe.otherUserName,style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"},fallbackText:"User"})}),a.jsxs("div",{className:"conversation-content",children:[a.jsxs("div",{className:"conversation-header",children:[a.jsx("div",{className:"conversation-name",children:xe.otherUserName||"Unknown User"}),a.jsx("div",{className:"conversation-time",children:Me(xe.timestamp)})]}),a.jsxs("div",{className:"conversation-preview",children:[xe.lastSenderId===le?"You: ":"",xe.lastMessage||"Start chatting"]})]}),xe.unreadCount>0&&a.jsx("div",{style:{minWidth:"20px",height:"20px",borderRadius:"10px",background:"#6366f1",color:"white",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 6px"},children:xe.unreadCount})]},xe.chatRoom))})]}),a.jsx("div",{className:`chat-window ${z?"mobile-visible":""}`,children:i?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"chat-header",children:[a.jsx("button",{className:"mobile-back-btn",onClick:ne,children:a.jsx(ff,{size:20})}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[a.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#e2e8f0",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",cursor:"pointer"},onClick:()=>fe(i.otherUserId),children:a.jsx(nr,{src:i.profileImageUrl,alt:i.otherUserName,style:{width:"100%",height:"100%",objectFit:"cover"},fallbackText:"User"})}),a.jsx("h4",{style:{margin:0,cursor:"pointer"},onClick:()=>fe(i.otherUserId),children:i.otherUserName})]})]}),a.jsxs("div",{className:"chat-messages",children:[c.map((xe,Ue)=>a.jsxs("div",{className:`message ${xe.sender==="Me"?"sent":"received"}`,children:[a.jsx("div",{className:"message-content",children:xe.text}),a.jsxs("div",{className:"message-time",children:[new Date(xe.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),xe.sender==="Me"&&xe.status&&a.jsxs("span",{style:{marginLeft:"4px",fontSize:"10px"},children:[" ",xe.status]})]})]},xe.id||Ue)),a.jsx("div",{ref:se})]}),a.jsxs("form",{onSubmit:Te,className:"chat-input",children:[a.jsx("input",{type:"text",value:f,onChange:xe=>p(xe.target.value),placeholder:"Type a message...",className:"message-input"}),a.jsx("button",{type:"submit",className:"send-btn",disabled:v,children:a.jsx(Po,{size:16})})]})]}):a.jsxs("div",{className:"no-chat-selected",children:[a.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),a.jsx("h3",{children:"Select a conversation"}),a.jsx("p",{children:"Choose a conversation from the list to start chatting"})]})}),U&&a.jsx("div",{className:"modal-overlay",onClick:()=>B(null),children:a.jsxs("div",{className:"modal-content",onClick:xe=>xe.stopPropagation(),style:{maxHeight:"90vh",overflowY:"auto"},children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h3",{children:U.name}),a.jsx("button",{onClick:()=>B(null),className:"modal-close",children:""})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",alignItems:"flex-start"},children:[a.jsx(nr,{src:U.profileImageUrl,alt:U.name,className:"modal-profile-image",fallbackText:"Profile",style:{flexShrink:0,width:"100px",height:"100px"}}),a.jsxs("div",{style:{flex:1},children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1.25rem"},children:U.name}),a.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:a.jsxs("span",{style:{color:"#64748b"},children:[" ",U.location]})}),a.jsxs("p",{style:{color:"#64748b",fontSize:"0.9rem",margin:"0"},children:[U.userType,"  Joined ",new Date(U.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"})]})]})]}),a.jsxs("div",{style:{marginBottom:"1.5rem"},children:[a.jsx("h4",{style:{marginBottom:"0.75rem",color:"var(--text)"},children:U.userType==="Host"?" About My Hosting":" About Me"}),a.jsx("p",{style:{color:"#475569",lineHeight:"1.5",background:"#f8fafc",padding:"1rem",borderRadius:"0.5rem",margin:"0"},children:U.bio||"No description provided."})]})]})]})})]})};function xO(){const[r,n]=O.useState([]),[i,o]=O.useState(!0),[c,u]=O.useState(!1),[f,p]=O.useState(""),[m,g]=O.useState(!1);O.useEffect(()=>{v()},[]);const v=async()=>{try{const U=await Ge.get("listpayments");n(U.data)}catch{console.error("Failed to fetch payments")}finally{o(!1)}},k=async()=>{g(!0);try{const U=await Ge.post("seedlocations"),B=await Ge.get("getlocations");p(` APIs working! Seeded: ${U.data.count} locations. Retrieved: ${Object.keys(B.data).length} states.`)}catch(U){p(` API Error: ${U.message}`)}finally{g(!1)}},z=async()=>{u(!0);try{const U=await Hl.seedLocations();alert(`Locations seeded successfully! ${U.count} locations added.`)}catch(U){alert("Failed to seed locations: "+U.message)}finally{u(!1)}},W=async(U,B)=>{try{await Ge.post("verifypayment",{paymentId:U,userId:B}),alert("Payment verified and user updated!"),v()}catch(D){alert("Verification failed: "+D.message)}};return a.jsxs("div",{className:"admin-container",children:[a.jsx("h2",{children:"Admin Dashboard"}),a.jsxs("div",{className:"admin-section",style:{marginBottom:"2rem",padding:"1rem",border:"1px solid #e2e8f0",borderRadius:"0.5rem"},children:[a.jsx("h3",{children:"Location Management"}),a.jsx("p",{children:"Test and seed the locations table with initial data."}),a.jsxs("div",{style:{marginBottom:"1rem"},children:[a.jsx("button",{className:"btn btn-secondary",onClick:k,disabled:m,style:{marginRight:"1rem"},children:m?"Testing APIs...":"Test Location APIs"}),a.jsx("button",{className:"btn btn-primary",onClick:z,disabled:c,children:c?"Seeding Locations...":"Seed Locations Table"})]}),f&&a.jsx("div",{style:{padding:"0.5rem",background:f.includes("")?"#d1fae5":"#fee2e2",borderRadius:"0.25rem",fontSize:"0.9rem"},children:f})]}),a.jsxs("div",{className:"admin-section",children:[a.jsx("h3",{children:"Verify Payments"}),i?a.jsx("p",{children:"Loading..."}):a.jsx("div",{className:"payment-list",children:a.jsxs("table",{className:"admin-table",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"User ID"}),a.jsx("th",{children:"Type"}),a.jsx("th",{children:"UPI Ref"}),a.jsx("th",{children:"Amount"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:r.length>0?r.map(U=>a.jsxs("tr",{children:[a.jsx("td",{children:U.partitionKey}),a.jsx("td",{children:U.type}),a.jsx("td",{children:U.upiRef}),a.jsxs("td",{children:["",U.amount]}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>W(U.rowKey,U.partitionKey),children:"Verify"})})]},U.rowKey)):a.jsx("tr",{children:a.jsx("td",{colSpan:"5",style:{textAlign:"center"},children:"No pending payments"})})})]})})]})]})}function wO(){const[r,n]=O.useState(null),[i,o]=O.useState(null),[c,u]=O.useState(""),[f,p]=O.useState(!1),[m,g]=O.useState(""),[v,k]=O.useState(!1),[z,W]=O.useState(!1),[U,B]=O.useState(!1),[D,le]=O.useState(""),[se,fe]=O.useState(""),[oe,te]=O.useState(""),[ce,ne]=O.useState(!1),[Te,Me]=O.useState(!1),[xe,Ue]=O.useState(!1),[He,ke]=O.useState(""),[Se,Ie]=O.useState(0),q=[{label:"At least 8 characters",test:x=>x.length>=8},{label:"One uppercase letter",test:x=>/[A-Z]/.test(x)},{label:"One lowercase letter",test:x=>/[a-z]/.test(x)},{label:"One number",test:x=>/\d/.test(x)},{label:"One special character",test:x=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(x)}],P=localStorage.getItem("userId");O.useEffect(()=>{P&&X()},[P]);const X=async()=>{try{const x=await Ge.get("user/profile");console.log("DEBUG: Full API response:",x);let T=x.data;console.log("DEBUG: Fetched user data:",T),console.log("DEBUG: HostingAreas:",T.hostingAreas);const w=JSON.parse(localStorage.getItem("user")),b={...T,token:w?.token,role:T.userType||w?.role};n(b),localStorage.setItem("user",JSON.stringify(b)),g(b.referralCode||"Loading..."),window.dispatchEvent(new Event("storage"))}catch{console.error("User not found")}},L=x=>{const T=x.target.files[0];T&&(o(T),u(URL.createObjectURL(T)))},J=async()=>{if(!i||!r){alert("Please select a file and ensure your profile is loaded before uploading.");return}try{console.log("Step 1: Compressing image...");const x=await E(i);console.log("Step 2: Getting SAS token from API...");const T=await Ge.get("user/upload-sas-token");console.log("SAS token response:",T.data);const{sasUrl:w}=T.data;console.log("Step 3: Uploading to blob storage...",w);const b=await fetch(w,{method:"PUT",headers:{"x-ms-blob-type":"BlockBlob","Content-Type":"image/jpeg"},body:x});if(console.log("Upload response status:",b.status),!b.ok)throw new Error(`Upload failed: ${b.status} ${b.statusText}`);console.log("Step 4: Confirming upload with API...");const R=w.split("?")[0];await Ge.post("user/confirm-upload",{imageUrl:R}),alert("Profile image uploaded successfully!"),o(null),u(""),p(!1),await X()}catch(x){console.error("Upload failed:",x),console.error("Error details:",x.response?.data),alert("Image upload failed: "+(x.response?.data?.error||x.message))}},E=x=>new Promise(T=>{const w=document.createElement("canvas"),b=w.getContext("2d"),R=new Image;R.onload=()=>{let{width:_,height:V}=R;const K=800;_>V?_>K&&(V=V*K/_,_=K):V>K&&(_=_*K/V,V=K),w.width=_,w.height=V,b.drawImage(R,0,0,_,V),w.toBlob(G=>{T(G)},"image/jpeg",.8)},R.src=URL.createObjectURL(x)}),I=()=>{navigator.clipboard.writeText(m),k(!0),setTimeout(()=>k(!1),2e3)},C=()=>{const x=` Join FestiveGuest and celebrate festivals with locals! Use my referral code: ${m} when registering to get special benefits!`;navigator.share?navigator.share({text:x}):(navigator.clipboard.writeText(x),k(!0),setTimeout(()=>k(!1),2e3))},j=async()=>{if(!D||!se||!oe){ke("Please fill all password fields");return}if(!q.every(T=>T.test(se))){ke("New password must meet all requirements");return}if(se!==oe){ke("New passwords do not match");return}Ue(!0),ke("");try{if((await Ge.post("auth/change-password",{currentPassword:D,newPassword:se})).data.success){ke(" Password changed successfully!"),Ie(5);const w=setInterval(()=>{Ie(b=>b<=1?(clearInterval(w),B(!1),le(""),fe(""),te(""),ke(""),Ie(0),0):b-1)},1e3)}}catch(T){const w=T.response?.data?.message||T.message;ke(w)}finally{Ue(!1)}};return r?a.jsxs("div",{className:"profile-container",children:[a.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[a.jsx("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:" My Profile"}),a.jsx("p",{style:{color:"#64748b",margin:"0"},children:"View your profile information"})]}),a.jsxs("div",{className:"profile-card",children:[a.jsxs("div",{className:"profile-image-section",children:[a.jsx(nr,{src:c||r.profileImageUrl,alt:"Profile",className:"profile-img-preview",fallbackText:"Profile"}),a.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexDirection:"column",gap:"0.4rem",alignItems:"center"},children:f?a.jsxs(a.Fragment,{children:[a.jsx("label",{htmlFor:"file-input",className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.3rem",cursor:"pointer",padding:"0.4rem 0.8rem",fontSize:"0.875rem"},children:" Choose File"}),a.jsx("input",{id:"file-input",type:"file",accept:"image/*",onChange:L,style:{display:"none"}}),a.jsxs("button",{className:"btn btn-primary",onClick:J,disabled:!i,style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.4rem 0.8rem",fontSize:"0.875rem"},children:[a.jsx(aT,{size:14})," Upload"]}),a.jsxs("button",{className:"btn btn-secondary",onClick:()=>{p(!1),o(null),u("")},style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.4rem 0.8rem",fontSize:"0.875rem"},children:[a.jsx(mf,{size:14})," Cancel"]})]}):a.jsxs("button",{className:"btn btn-secondary",onClick:()=>p(!0),style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.4rem 0.8rem",fontSize:"0.875rem"},children:[a.jsx(Nv,{size:14})," Edit Photo"]})}),a.jsx("p",{style:{color:"#64748b",fontSize:"0.875rem",textAlign:"center"},children:"Upload a profile photo"})]}),a.jsx("div",{className:"profile-details",children:a.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[a.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #3b82f6"},children:a.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("strong",{children:" Email:"})," ",r.email]})}),a.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #ef4444"},children:a.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("strong",{children:" Phone:"})," ",r.phone]})}),a.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #6366f1"},children:a.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("strong",{children:" Name:"})," ",r.name]})}),a.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #10b981"},children:a.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("strong",{children:" Role:"})," ",r.userType==="Host"?" Host":" Guest"]})}),a.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #f59e0b"},children:a.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("strong",{children:" Location:"})," ",r.location]})}),a.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #ec4899"},children:a.jsxs("p",{style:{margin:"0",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[a.jsx("strong",{children:r.userType==="Host"?" My Offerings:":" My Festival Wishes:"}),a.jsx("span",{style:{color:"#475569",fontSize:"0.95rem",lineHeight:"1.5"},children:r.bio||"Not specified"})]})}),console.log("DEBUG: Checking hosting areas display:",{userType:r.userType,hostingAreas:r.hostingAreas,hasAreas:r.hostingAreas&&r.hostingAreas.length>0}),r.userType==="Host"&&a.jsxs("div",{style:{padding:"1rem",background:"#f0fdf4",borderRadius:"0.75rem",borderLeft:"4px solid #16a34a"},children:[a.jsx("p",{style:{margin:"0 0 0.75rem 0",display:"flex",alignItems:"center",gap:"0.5rem",fontWeight:"bold"},children:" My Hosting Areas:"}),r.hostingAreas&&r.hostingAreas.length>0?r.hostingAreas.filter(x=>x.state&&x.state.trim()!==""&&x.cities&&x.cities.length>0).length>0?a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:r.hostingAreas.filter(x=>x.state&&x.state.trim()!==""&&x.cities&&x.cities.length>0).map((x,T)=>a.jsxs("div",{style:{color:"#15803d",fontSize:"0.9rem",lineHeight:"1.4"},children:[a.jsx("div",{style:{fontWeight:"bold",marginBottom:"0.25rem"},children:x.state}),a.jsx("div",{style:{paddingLeft:"1rem",fontSize:"0.85rem"},children:x.cities.join(", ")})]},`${x.state}-${T}`))}):a.jsx("div",{style:{color:"#64748b",fontSize:"0.9rem",fontStyle:"italic",lineHeight:"1.4"},children:"No hosting areas selected yet. Update your hosting preferences in settings."}):a.jsx("div",{style:{color:"#64748b",fontSize:"0.9rem",fontStyle:"italic",lineHeight:"1.4"},children:"No hosting areas selected yet. Update your hosting preferences in settings."})]}),a.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #f59e0b"},children:a.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("strong",{children:" Status:"}),a.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.875rem",background:r.status==="Active"?"#dcfce7":"#fef3c7",color:r.status==="Active"?"#166534":"#92400e"},children:r.status})]})}),a.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #8b5cf6"},children:a.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("strong",{children:" Contact Enabled:"}),a.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.875rem",background:r.isVerified?"#dcfce7":"#fee2e2",color:r.isVerified?"#166534":"#dc2626"},children:r.isVerified?" Yes":" No"})]})})]})})]}),a.jsx("div",{className:"profile-card",style:{marginTop:"2rem"},children:a.jsxs("div",{className:"security-section",children:[a.jsxs("h3",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[a.jsx(yl,{size:24,style:{color:"var(--primary)"}}),"Security"]}),a.jsx("p",{style:{color:"#64748b",margin:"0 0 1rem 0"},children:"Manage your account security"}),a.jsxs("button",{onClick:()=>B(!0),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 auto"},children:[a.jsx(yl,{size:16}),"Change Password"]})]})}),a.jsxs("div",{className:"referral-card",style:{marginTop:"2rem"},children:[a.jsxs("div",{className:"referral-header",children:[a.jsxs("h3",{className:"referral-title",children:[a.jsx(ti,{size:24}),"Invite Friends & Earn Together"]}),a.jsx("p",{className:"referral-subtitle",children:"Share FestiveGuest and unlock exclusive rewards for both of you"})]}),a.jsxs("div",{className:"referral-content",children:[a.jsxs("div",{className:"referral-code-section",children:[a.jsx("p",{className:"code-label",children:"Your Personal Referral Code"}),a.jsx("div",{className:"referral-code",style:{fontSize:"1rem",padding:"0.5rem"},children:m}),a.jsxs("div",{className:"referral-actions",children:[a.jsxs("button",{onClick:I,className:"referral-btn",children:[a.jsx(NC,{size:14,style:{marginRight:"0.25rem"}}),v?"Copied!":"Copy"]}),a.jsxs("button",{onClick:C,className:"referral-btn",children:[a.jsx(eT,{size:14,style:{marginRight:"0.25rem"}}),"Share"]})]})]}),a.jsxs("div",{className:"referral-benefits",children:[a.jsxs("div",{className:"benefit-item",children:[a.jsx("span",{className:"benefit-icon",children:""}),a.jsxs("p",{className:"benefit-text",children:[a.jsx("strong",{children:"Premium Access"}),"Invite 3 friends and unlock 1 month of premium features including priority support and advanced search filters."]})]}),a.jsxs("div",{className:"benefit-item",children:[a.jsx("span",{className:"benefit-icon",children:""}),a.jsxs("p",{className:"benefit-text",children:[a.jsx("strong",{children:"Mutual Rewards"}),"Both you and your friend receive special perks and discounts when they complete their first booking."]})]}),a.jsxs("div",{className:"benefit-item",children:[a.jsx("span",{className:"benefit-icon",children:""}),a.jsxs("p",{className:"benefit-text",children:[a.jsx("strong",{children:"Easy Process"}),"Simply share your code, they register with it, and rewards activate automatically after their first booking."]})]})]})]})]}),U&&a.jsx("div",{className:"modal-overlay",onClick:()=>B(!1),children:a.jsxs("div",{className:"modal-content",onClick:x=>x.stopPropagation(),style:{maxWidth:"400px"},children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h3",{children:[a.jsx(yl,{size:20})," Change Password"]}),a.jsx("button",{onClick:()=>B(!1),className:"modal-close",children:""})]}),a.jsxs("div",{className:"modal-body",children:[He&&a.jsx("div",{style:{color:He.includes("")?"#16a34a":"#dc2626",background:He.includes("")?"#dcfce7":"#fee2e2",padding:"0.75rem",borderRadius:"0.375rem",marginBottom:"1rem",fontSize:"0.875rem"},children:He.includes("")?a.jsxs("div",{style:{textAlign:"center"},children:[He,Se>0&&a.jsx("div",{style:{fontSize:"2rem",fontWeight:"bold",marginTop:"0.5rem"},children:Se})]}):` ${He}`}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Current Password"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("input",{type:ce?"text":"password",value:D,onChange:x=>{le(x.target.value),ke("")},placeholder:"Enter current password",disabled:Se>0,style:{fontSize:"1rem",padding:"0.75rem",width:"100%",paddingRight:"2.5rem",opacity:Se>0?.5:1}}),a.jsx("button",{type:"button",onClick:()=>ne(!ce),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#64748b"},children:ce?a.jsx(Tl,{size:16}):a.jsx(Rl,{size:16})})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"New Password"}),a.jsxs("div",{style:{position:"relative"},children:[a.jsx("input",{type:Te?"text":"password",value:se,onChange:x=>{fe(x.target.value),ke("")},placeholder:"Enter new password (min 8 characters)",disabled:Se>0,style:{fontSize:"1rem",padding:"0.75rem",width:"100%",paddingRight:"2.5rem",opacity:Se>0?.5:1}}),a.jsx("button",{type:"button",onClick:()=>Me(!Te),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#64748b"},children:Te?a.jsx(Tl,{size:16}):a.jsx(Rl,{size:16})})]}),a.jsx("div",{style:{marginTop:"0.75rem",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:q.map((x,T)=>{const w=x.test(se);return a.jsxs("div",{style:{fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.25rem",color:w?"#16a34a":"#dc2626",transition:"color 0.2s"},children:[a.jsx("span",{style:{fontSize:"0.9rem"},children:w?"":""}),x.label]},T)})})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Confirm New Password"}),a.jsx("input",{type:"password",value:oe,onChange:x=>{te(x.target.value),ke("")},placeholder:"Confirm new password",disabled:Se>0,style:{fontSize:"1rem",padding:"0.75rem",width:"100%",opacity:Se>0?.5:1}})]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:[a.jsx("button",{onClick:()=>{B(!1),le(""),fe(""),te(""),ke("")},className:"btn btn-secondary",disabled:Se>0,style:{flex:1,padding:"0.75rem",opacity:Se>0?.5:1},children:"Cancel"}),a.jsx("button",{onClick:j,disabled:xe||!D||!se||!oe||Se>0,className:"btn btn-primary",style:{flex:1,padding:"0.75rem",opacity:xe||Se>0?.5:1},children:xe?"Changing...":"Change Password"})]})]})]})})]}):a.jsx("div",{className:"profile-container text-center",style:{padding:"3rem"},children:a.jsx("div",{className:"loading",children:"Loading profile..."})})}function CO(){const{userName:r}=xv(),n=rr(),[i,o]=O.useState(null),[c,u]=O.useState([]),[f,p]=O.useState(!0);O.useEffect(()=>{m()},[r]);const m=async()=>{try{console.log("Fetching profile for userName:",r);const[z,W]=await Promise.all([Ge.get(`user/public-profile-by-name/${encodeURIComponent(r)}`),Ge.get(`user/reviews-by-name/${encodeURIComponent(r)}`)]);o(z.data),u(W.data||[])}catch(z){console.error("Failed to fetch profile:",z),console.error("Error details:",z.response?.data),console.error("Requested userName:",r)}finally{p(!1)}},g=z=>Array.from({length:5},(W,U)=>a.jsx($d,{size:16,fill:U<z?"#fbbf24":"none",color:U<z?"#fbbf24":"#d1d5db"},U)),v=z=>new Date(z).toLocaleDateString("en-US",{year:"numeric",month:"long"});if(f)return a.jsx("div",{className:"profile-container text-center",style:{padding:"3rem"},children:a.jsx("div",{className:"loading",children:"Loading profile..."})});if(!i)return a.jsxs("div",{className:"profile-container text-center",style:{padding:"3rem"},children:[a.jsx("h3",{children:"Profile not found"}),a.jsx("button",{onClick:()=>n(-1),className:"btn btn-primary",children:"Go Back"})]});const k=c.length>0?c.reduce((z,W)=>z+W.rating,0)/c.length:0;return a.jsxs("div",{className:"profile-container",children:[a.jsxs("div",{style:{marginBottom:"2rem"},children:[a.jsxs("button",{onClick:()=>n(-1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[a.jsx(ff,{size:16})," Back"]}),a.jsxs("div",{style:{textAlign:"center"},children:[a.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[i.userType==="Host"?"":""," ",i.name]}),a.jsxs("p",{style:{color:"#64748b",margin:"0"},children:[i.userType,"  Joined ",v(i.createdAt)]})]})]}),a.jsxs("div",{className:"profile-card",children:[a.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[a.jsx(nr,{src:i.profileImageUrl,alt:i.name,style:{width:"150px",height:"150px",borderRadius:"50%",objectFit:"cover",border:"4px solid var(--border)",marginBottom:"1rem"},fallbackText:"Profile"}),a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[a.jsx(Av,{size:16,color:"#64748b"}),a.jsx("span",{style:{color:"#64748b"},children:i.location})]}),c.length>0&&a.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[a.jsx("div",{style:{display:"flex",gap:"2px"},children:g(Math.round(k))}),a.jsx("span",{style:{fontWeight:"600"},children:k.toFixed(1)}),a.jsxs("span",{style:{color:"#64748b"},children:["(",c.length," reviews)"]})]})]}),a.jsxs("div",{style:{marginBottom:"2rem"},children:[a.jsx("h4",{style:{marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:i.userType==="Host"?" About My Hosting":" About Me"}),a.jsx("p",{style:{color:"#475569",lineHeight:"1.6",background:"#f8fafc",padding:"1rem",borderRadius:"0.75rem",borderLeft:"4px solid var(--primary)"},children:i.bio||"No description provided."})]})]}),c.length>0&&a.jsxs("div",{className:"profile-card",style:{marginTop:"2rem"},children:[a.jsxs("h3",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx($d,{size:20,color:"#fbbf24"}),"Reviews (",c.length,")"]}),a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:c.map((z,W)=>a.jsxs("div",{style:{background:"#f8fafc",padding:"1rem",borderRadius:"0.75rem",border:"1px solid var(--border)"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("strong",{children:z.reviewerName}),a.jsx("div",{style:{display:"flex",gap:"2px"},children:g(z.rating)})]}),a.jsx("span",{style:{color:"#64748b",fontSize:"0.875rem"},children:v(z.createdAt)})]}),a.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.5"},children:z.comment})]},W))})]})]})}const TO=()=>{const[r,n]=O.useState({name:"",email:"",message:""}),[i,o]=O.useState(!1),[c,u]=O.useState(!1),[f,p]=O.useState(""),[m,g]=O.useState(null);O.useEffect(()=>{const z=localStorage.getItem("user");if(z){const W=JSON.parse(z);g(W),n(U=>({...U,name:W.name||"",email:W.email||""}))}},[]);const v=async z=>{if(z.preventDefault(),!r.name||!r.email||!r.message){p("Please fill all fields");return}o(!0),p("");try{const W={name:r.name,email:r.email,message:r.message,userType:m?.userType||m?.role||"Guest"};console.log("Sending feedback:",W);const U=await Ge.post("feedback",W);console.log("Feedback response:",U),u(!0),n({...r,message:""}),setTimeout(()=>u(!1),5e3)}catch(W){console.error("Feedback error details:",{message:W.message,response:W.response?.data,status:W.response?.status,statusText:W.response?.statusText});let U="Failed to send feedback. Please try again.";W.response?.status===404?U="Feedback service not found. Please contact support.":W.response?.status===500?U="Server error occurred. Please try again later.":W.response?.data?.message&&(U=W.response.data.message),p(U)}finally{o(!1)}},k=()=>{window.open("https://wa.me/919966888484","_blank","noopener,noreferrer")};return a.jsx("div",{className:"help-page",children:a.jsxs("div",{className:"help-container",children:[a.jsxs("div",{className:"help-header",children:[a.jsx(Cl,{size:48,className:"help-icon",style:{color:"var(--primary)"}}),a.jsxs("h1",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem"},children:[a.jsx(ti,{size:32,style:{color:"var(--primary)"}}),"Help & Support"]}),a.jsx("p",{children:"We're here to help you with any questions or issues you may have."})]}),a.jsxs("div",{className:"help-content",children:[a.jsxs("div",{className:"help-card",children:[a.jsx(oy,{size:32,className:"card-icon",style:{color:"var(--primary)"}}),a.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(_C,{size:20}),"Email Support"]}),a.jsx("p",{children:"Send us an email and we'll get back to you as soon as possible."}),a.jsxs("a",{href:"mailto:support@localhostconnect.com",className:"btn btn-outline",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(oy,{size:16}),"Customer Support"]})]}),a.jsxs("div",{className:"help-card",children:[a.jsx(ys,{size:32,className:"card-icon",style:{color:"#25D366"}}),a.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(JC,{size:20}),"WhatsApp Support"]}),a.jsx("p",{children:"Chat with our support team directly for quick assistance."}),a.jsxs("button",{onClick:k,className:"btn btn-primary whatsapp-btn",style:{cursor:"pointer",border:"none",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(ys,{size:16}),"Chat on WhatsApp"]})]})]}),a.jsxs("div",{className:"feedback-section",style:{marginTop:"3rem"},children:[a.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[a.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[a.jsx(Po,{size:28,style:{color:"var(--primary)"}}),"Send Feedback"]}),a.jsx("p",{style:{color:"#64748b",margin:"0"},children:"Share your thoughts, suggestions, or report issues directly with us"})]}),a.jsx("div",{style:{display:"flex",justifyContent:"center"},children:a.jsxs("div",{style:{width:"100%",maxWidth:"500px",background:"#f8fafc",padding:"2rem",borderRadius:"var(--radius)",boxShadow:"var(--shadow)",border:"1px solid var(--border)"},children:[f&&a.jsxs("div",{style:{color:"#dc2626",background:"#fee2e2",padding:"0.75rem",borderRadius:"0.5rem",marginBottom:"1rem",fontSize:"0.875rem",border:"1px solid #fecaca"},children:[" ",f]}),c?a.jsxs("div",{style:{color:"var(--success)",textAlign:"center",padding:"1rem"},children:[a.jsx(Ro,{size:48,style:{marginBottom:"1rem",color:"#16a34a"}}),a.jsx("h3",{style:{color:"#16a34a",margin:"0 0 0.5rem 0"},children:"Feedback Sent Successfully!"}),a.jsx("p",{style:{margin:"0",color:"#64748b"},children:"Thank you for your feedback. We'll review it and get back to you if needed."})]}):a.jsx("form",{onSubmit:v,children:a.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[a.jsx("input",{type:"text",placeholder:"Your Name",value:r.name,onChange:z=>n({...r,name:z.target.value}),disabled:!!m,style:{padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"0.5rem",width:"100%",boxSizing:"border-box",fontSize:"1rem",backgroundColor:m?"#f3f4f6":"white",cursor:m?"not-allowed":"text"}}),a.jsx("input",{type:"email",placeholder:"Your Email",value:r.email,onChange:z=>n({...r,email:z.target.value}),disabled:!!m,style:{padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"0.5rem",width:"100%",boxSizing:"border-box",fontSize:"1rem",backgroundColor:m?"#f3f4f6":"white",cursor:m?"not-allowed":"text"}}),a.jsx("textarea",{placeholder:"Your feedback, suggestions, or issues...",value:r.message,onChange:z=>{n({...r,message:z.target.value}),p("")},rows:5,style:{padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"0.5rem",resize:"vertical",width:"100%",boxSizing:"border-box",fontSize:"1rem"}}),a.jsxs("button",{type:"submit",disabled:i,className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"center",padding:"0.75rem 1.5rem",fontSize:"1rem"},children:[a.jsx(Po,{size:16}),i?"Sending...":"Send Feedback"]})]})})]})})]}),a.jsxs("div",{className:"faq-section",style:{marginTop:"3rem"},children:[a.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[a.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[a.jsx(Cl,{size:28,style:{color:"var(--primary)"}}),"Frequently Asked Questions"]}),a.jsx("p",{style:{color:"#64748b",margin:"0"},children:"Find answers to common questions about Local Host Connect"})]}),a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto"},children:[a.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[a.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[a.jsx(Ro,{size:20,style:{color:"var(--success)"}}),"How do I become a host?"]}),a.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:'Go to the registration page, select "Local Host", and fill out your profile details including your location, offerings, and bio. Once registered, you can start connecting with travelers looking for authentic local experiences.'})]}),a.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[a.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[a.jsx(ol,{size:20,style:{color:"var(--warning)"}}),"Is it free to use?"]}),a.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:"Registration is completely free for both travelers and hosts. You can browse profiles, chat with other users, and arrange local experiences at no cost. Individual arrangements between hosts and travelers may have their own terms."})]}),a.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[a.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[a.jsx(ti,{size:20,style:{color:"var(--primary)"}}),"How do I find hosts or travelers?"]}),a.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:"After logging in, go to your dashboard where you can browse profiles, filter by location, and view detailed information about other users. Use the chat feature to connect and arrange local experiences."})]}),a.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[a.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[a.jsx(ys,{size:20,style:{color:"var(--primary)"}}),"How does the referral system work?"]}),a.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:"Share your referral code with friends. When they register using your code, both of you get special benefits. Invite 3 friends to unlock Premium features for 1 month including priority support and advanced filters!"})]}),a.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[a.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[a.jsx(ol,{size:20,style:{color:"var(--warning)"}}),"What safety measures should I take?"]}),a.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:"Always meet in public places first, share your plans with trusted contacts, verify the other person's identity through video calls, keep emergency contacts handy, and trust your instincts. Never share personal financial information or make large advance payments."})]}),a.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[a.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[a.jsx(ol,{size:20,style:{color:"var(--warning)"}}),"How do I report suspicious behavior?"]}),a.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:"If you encounter any suspicious behavior, inappropriate messages, or safety concerns, immediately contact our support team via WhatsApp or email. We take all reports seriously and will investigate promptly to ensure community safety."})]}),a.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[a.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[a.jsx(Ro,{size:20,style:{color:"var(--success)"}}),"What if I have a dispute with a host/traveler?"]}),a.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:"Contact our support team immediately with details of the issue. We'll mediate between both parties to find a fair resolution. Remember, all arrangements are between users - we facilitate introductions but cannot guarantee outcomes."})]}),a.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[a.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[a.jsx(ol,{size:20,style:{color:"var(--warning)"}}),"How should I handle payments?"]}),a.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:"Use secure payment methods, avoid large advance payments, and consider paying after services are rendered when possible. Never share banking passwords or OTPs. For high-value arrangements, consider meeting in person first to build trust."})]}),a.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[a.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[a.jsx(Ro,{size:20,style:{color:"var(--success)"}}),"Can I verify someone's identity?"]}),a.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:"Yes! We recommend video calls before meeting, checking their profile completeness, reading reviews from other users, and asking for references if needed. Trust your instincts - if something feels off, it's better to be cautious."})]}),a.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[a.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[a.jsx(ti,{size:20,style:{color:"var(--primary)"}}),"What types of experiences can I find?"]}),a.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:"Our platform connects you for various travel needs: business travel accommodation, leisure tourism, festival celebrations, educational exchanges, family visits, cultural immersion, local food experiences, and city tours with insider knowledge."})]}),a.jsxs("div",{className:"faq-item",style:{background:"white",padding:"1.5rem",borderRadius:"0.75rem",marginBottom:"1rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[a.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem",margin:"0 0 0.75rem 0",color:"var(--primary)"},children:[a.jsx(Ro,{size:20,style:{color:"var(--success)"}}),"Is my information safe?"]}),a.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.6"},children:"Yes, we take privacy seriously. Your personal information is protected and only shared with users you choose to connect with. We strongly recommend meeting in public places first, sharing your plans with trusted contacts, and taking all necessary safety precautions."})]})]})]})]})})};class RO{async createGuestPost(n){return(await Ge.post("guestposts",n)).data}async getGuestPosts(){return(await Ge.get("guestposts")).data}async deleteGuestPost(n){return(await Ge.delete(`guestposts/${n}`)).data}async updateGuestPost(n,i){return(await Ge.put(`guestposts/${n}`,i)).data}async createHostPost(n){return(await Ge.post("hostposts",n)).data}async getHostPosts(){return(await Ge.get("hostposts")).data}async deleteHostPost(n){return(await Ge.delete(`hostposts/${n}`)).data}async updateHostPost(n,i){return(await Ge.put(`hostposts/${n}`,i)).data}}const Kr=new RO,jO=()=>{const[r,n]=O.useState([]),[i,o]=O.useState([]),[c,u]=O.useState(!0),[f,p]=O.useState(!1),[m,g]=O.useState(!1),[v,k]=O.useState(!1),[z,W]=O.useState(null),[U,B]=O.useState(null),[D,le]=O.useState(null),[se,fe]=O.useState(null),[oe,te]=O.useState(null),[ce,ne]=O.useState([]),[Te,Me]=O.useState(!1),[xe,Ue]=O.useState(!1),[He,ke]=O.useState([]),[Se,Ie]=O.useState(window.innerWidth>768);O.useEffect(()=>{console.log("Posts: activeChat state changed:",oe)},[oe]),O.useEffect(()=>{const w=localStorage.getItem("user");if(w){const b=JSON.parse(w);console.log("DEBUG Posts: User data:",b),console.log("DEBUG Posts: HostingAreas:",b.hostingAreas),le(b)}q()},[]),O.useEffect(()=>{D&&P()},[D]),O.useEffect(()=>{const w=()=>{const b=window.innerWidth>768;Ie(b),b&&Ue(!0)};return w(),window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[]),O.useEffect(()=>{X()},[r,ce]),O.useEffect(()=>{const w=()=>fe(null);if(se)return document.addEventListener("click",w),()=>document.removeEventListener("click",w)},[se]);const q=async()=>{try{u(!0);const w=await Kr.getGuestPosts(),b=await Kr.getHostPosts(),R=[...w.map(_=>({id:_.rowKey,title:_.title,content:_.content,location:_.location,planningDate:_.planningDate,visitors:_.visitors||1,days:_.days||1,facilities:_.facilities?_.facilities.split(","):[],userName:_.userName||D?.name||"Unknown",userId:_.userId,userType:"Guest",createdAt:new Date(_.createdAt),status:_.status})),...b.map(_=>({id:_.rowKey,title:_.title,content:_.content,location:_.location,maxGuests:_.maxGuests||1,pricePerNight:_.pricePerNight,amenities:_.amenities?_.amenities.split(","):[],userName:_.userName||D?.name||"Unknown",userId:_.userId,userType:"Host",createdAt:new Date(_.createdAt),status:_.status}))];R.sort((_,V)=>V.createdAt-_.createdAt),n(R)}catch(w){console.error("Error fetching posts:",w)}finally{u(!1)}},P=async()=>{try{if(D?.userType==="Host"&&D?.hostingAreas&&D.hostingAreas.length>0){console.log("DEBUG Posts: Using hosting areas from user data");const w=D.hostingAreas.filter(b=>b.state&&b.state.trim()!==""&&b.cities&&b.cities.length>0).flatMap(b=>b.cities.map(R=>`${R}, ${b.state}`));console.log("DEBUG Posts: Valid hosting areas:",w),ke(w)}else console.log("DEBUG Posts: No hosting areas available"),ke([])}catch(w){console.error("Error processing hosting areas:",w),ke([])}},X=()=>{if(ce.length===0)o(r);else{const w=r.filter(b=>ce.some(R=>b.location?.toLowerCase().includes(R.toLowerCase())));o(w)}},L=w=>{ne(b=>b.includes(w)?b.filter(R=>R!==w):[...b,w])},J=()=>{ne([])},E={WiFi:a.jsx(pT,{size:16}),Parking:a.jsx(TC,{size:16}),Meals:a.jsx(fT,{size:16})},I=async w=>{try{const b={...w,userName:D?.name||"Unknown User",userId:D?.userId||D?.id,planningDate:w.planningDate?new Date(w.planningDate+"T00:00:00.000Z").toISOString():null};D?.userType==="Guest"?await Kr.createGuestPost(b):await Kr.createHostPost(b),p(!1),q()}catch(b){console.error("Error creating post:",b);const R=b.response?.data?.message||b.message||"Failed to create post. Please try again.";alert(R)}},C=w=>{W(w),g(!0),fe(null)},j=async w=>{try{z.userType==="Guest"?await Kr.updateGuestPost(z.id,w):await Kr.updateHostPost(z.id,w),g(!1),W(null),q()}catch(b){console.error("Error updating post:",b),alert("Failed to update post. Please try again.")}},x=async w=>{B(w),k(!0),fe(null)},T=async()=>{if(U)try{U.userType==="Guest"?await Kr.deleteGuestPost(U.id):await Kr.deleteHostPost(U.id),k(!1),B(null),q()}catch(w){console.error("Error deleting post:",w),alert("Failed to delete post. Please try again.")}};return a.jsxs("div",{className:"browse-layout",children:[a.jsxs("button",{className:"mobile-filter-toggle",onClick:w=>{w.stopPropagation(),Me(!Te)},children:[a.jsxs("span",{children:["Filter by Hosting Areas ",ce.length>0&&`(${ce.length})`]}),Te?a.jsx(pf,{size:16}):a.jsx(jl,{size:16})]}),a.jsxs("div",{className:`location-sidebar ${Te?"mobile-visible":""}`,onClick:w=>w.stopPropagation(),children:[a.jsxs("div",{className:"filter-header",children:[a.jsxs("h3",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:Se?"default":"pointer",width:"100%"},onClick:()=>!Se&&Ue(!xe),children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(hf,{size:20,style:{color:"var(--primary)"}}),"Filter by Hosting Areas"]}),!Se&&a.jsx("span",{style:{color:"var(--primary)",fontSize:"1.2rem"},children:xe?"":"+"})]}),a.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:ce.length>0&&a.jsxs("button",{onClick:J,className:"clear-filters-btn",children:["Clear (",ce.length,")"]})})]}),(Se||xe)&&a.jsx("div",{className:"location-filters",children:He.length>0?a.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:He.map(w=>a.jsx("button",{className:`city-btn ${ce.includes(w)?"selected":""}`,onClick:()=>L(w),children:w},w))}):a.jsx("div",{style:{padding:"1rem",textAlign:"center",color:"#64748b",fontSize:"0.9rem"},children:D?.userType==="Host"?"No hosting areas configured":"Hosting areas not available"})})]}),a.jsx("div",{className:"browse-main",children:a.jsxs("div",{className:"container",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[a.jsxs("div",{children:[a.jsx("h1",{style:{margin:"0 0 0.5rem 0",color:"var(--text)"},children:D?.userType==="Host"?"Guest Posts":"My Posts & Requests"}),a.jsx("p",{style:{margin:0,color:"var(--text-light)"},children:D?.userType==="Host"?`Browse accommodation requests from guests (${i.length} found)`:"Create and manage your accommodation requests"})]}),D?.userType==="Guest"&&a.jsxs("button",{onClick:()=>p(!0),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(jl,{size:20}),"Create Post"]})]}),a.jsx("div",{className:"posts-grid",style:{display:"grid",gap:"1.5rem"},children:c?a.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[a.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),a.jsx("p",{children:"Loading posts..."})]}):i.length===0?a.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[a.jsx("div",{style:{fontSize:"2rem",marginBottom:"1rem"},children:""}),a.jsxs("p",{children:["No posts found",ce.length>0?" for selected hosting areas":"","."]}),ce.length>0&&a.jsx("button",{onClick:J,className:"btn btn-outline",children:"Clear filters"})]}):i.map(w=>a.jsxs("div",{className:"post-card",style:{background:"white",borderRadius:"var(--radius)",border:"1px solid var(--border)",padding:"1.5rem",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",transition:"all 0.3s ease"},children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[a.jsxs("div",{children:[a.jsx("h3",{style:{margin:"0 0 0.5rem 0",color:"var(--text)",fontSize:"1.25rem"},children:w.title}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1rem",color:"var(--text-light)",fontSize:"0.875rem"},children:[a.jsx("span",{children:w.userName}),a.jsx("span",{children:""}),a.jsx("span",{children:w.createdAt.toLocaleDateString()})]})]}),a.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:D&&D.userType==="Guest"&&a.jsxs("div",{style:{position:"relative"},children:[a.jsx("button",{onClick:b=>{b.stopPropagation(),fe(se===w.id?null:w.id)},style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem",borderRadius:"0.25rem",display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(MC,{size:16,color:"var(--text-light)"})}),se===w.id&&a.jsxs("div",{style:{position:"absolute",top:"100%",right:0,background:"white",border:"1px solid var(--border)",borderRadius:"0.5rem",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:10,minWidth:"120px"},children:[a.jsxs("button",{onClick:()=>C(w),style:{width:"100%",padding:"0.5rem 0.75rem",border:"none",background:"none",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem"},children:[a.jsx(Nv,{size:14}),"Edit"]}),a.jsxs("button",{onClick:()=>x(w),style:{width:"100%",padding:"0.5rem 0.75rem",border:"none",background:"none",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",color:"#dc2626"},children:[a.jsx(ay,{size:14}),"Delete"]})]})]})})]}),a.jsx("p",{style:{margin:"0 0 1rem 0",color:"var(--text)",lineHeight:"1.6"},children:w.content}),a.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",marginBottom:"1rem",fontSize:"0.875rem",color:"var(--text-light)"},children:[a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(Av,{size:16}),w.location||"Location not specified"]}),w.userType==="Guest"&&a.jsxs(a.Fragment,{children:[w.planningDate&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(iy,{size:16}),new Date(w.planningDate).toLocaleDateString()]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(ti,{size:16}),w.visitors," visitor",w.visitors!==1?"s":""]}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(iy,{size:16}),w.days," day",w.days!==1?"s":""]})]}),w.userType==="Host"&&a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[a.jsx(ti,{size:16}),"Up to ",w.maxGuests," guest",w.maxGuests!==1?"s":""]})]}),w.facilities&&w.facilities.length>0&&a.jsx("div",{style:{marginBottom:"1rem"},children:a.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:w.facilities.map(b=>a.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"0.25rem",background:"#f1f5f9",color:"var(--primary)",padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.75rem",fontWeight:"500"},children:[E[b],b]},b))})}),D?.userType==="Host"&&a.jsx("div",{style:{display:"flex",gap:"0.5rem",marginTop:"1rem"},children:a.jsxs("button",{onClick:b=>{b.stopPropagation(),console.log("Opening chat with:",{id:w.userId,name:w.userName}),te(null),setTimeout(()=>{te({id:w.userId,name:w.userName,imageUrl:null})},50)},className:"btn btn-primary",style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",padding:"0.75rem 1rem",fontSize:"0.9rem",fontWeight:"600"},children:[a.jsx(ys,{size:16}),"Contact Guest"]})})]},w.id))})]})}),f&&a.jsx(cv,{onClose:()=>p(!1),onSubmit:I}),m&&z&&a.jsx(cv,{onClose:()=>{g(!1),W(null)},onSubmit:j,initialData:z,isEditing:!0}),v&&U&&a.jsx("div",{className:"modal-overlay",onClick:()=>k(!1),children:a.jsxs("div",{className:"modal-content",onClick:w=>w.stopPropagation(),style:{maxWidth:"400px"},children:[a.jsx("div",{className:"modal-header",children:a.jsxs("h3",{style:{color:"#dc2626",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(ay,{size:20}),"Delete Post"]})}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("p",{style:{margin:"0 0 1rem 0",color:"var(--text)"},children:["Are you sure you want to delete ",a.jsxs("strong",{children:['"',U.title,'"']}),"?"]}),a.jsx("p",{style:{margin:"0",color:"var(--text-light)",fontSize:"0.875rem"},children:"This action cannot be undone."})]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",padding:"1rem"},children:[a.jsx("button",{onClick:()=>k(!1),className:"btn btn-outline",style:{minWidth:"80px"},children:"Cancel"}),a.jsx("button",{onClick:T,className:"btn",style:{minWidth:"80px",backgroundColor:"#dc2626",color:"white",border:"1px solid #dc2626"},children:"Delete"})]})]})}),oe&&a.jsx("div",{style:{position:"fixed",bottom:"20px",right:"20px",zIndex:1e3,width:"350px",height:"500px",boxShadow:"0 10px 25px rgba(0,0,0,0.2)",borderRadius:"12px",overflow:"hidden",animation:"slideInUp 0.3s ease-out"},children:a.jsx($l,{recipientId:oe.id,recipientName:oe.name,recipientImageUrl:oe.imageUrl,onClose:()=>{console.log("Closing chat widget"),te(null)}})})]})},cv=({onClose:r,onSubmit:n,initialData:i=null,isEditing:o=!1})=>{const[c,u]=O.useState({title:i?.title||"",planningDate:i?.planningDate||"",state:i?.location?.split(", ")[1]||"",city:i?.location?.split(", ")[0]||"",facilities:i?.facilities||[],visitors:i?.visitors||1,days:i?.days||1,content:i?.content||""}),[f,p]=O.useState({}),[m,g]=O.useState({}),[v,k]=O.useState(!1);O.useEffect(()=>{(async()=>{try{const D=await Hl.getLocations();p(D)}catch(D){console.error("Failed to load locations:",D),p({"Tamil Nadu":["Chennai","Coimbatore","Madurai","Other"],Karnataka:["Bangalore","Mysore","Mangalore","Other"],Kerala:["Kochi","Thiruvananthapuram","Kozhikode","Other"],"Andhra Pradesh":["Hyderabad","Visakhapatnam","Vijayawada","Other"],Maharashtra:["Mumbai","Pune","Nagpur","Other"],Delhi:["New Delhi","Other"]})}})()},[]);const z=[{name:"WiFi",icon:""},{name:"Parking",icon:""},{name:"Meals",icon:""},{name:"AC",icon:""},{name:"Kitchen",icon:""},{name:"Laundry",icon:""}],W=async B=>{if(B.preventDefault(),v)return;const D={};if(c.title.trim()?c.title.trim().length<5&&(D.title="Title must be at least 5 characters long"):D.title="Title is required",c.state||(D.state="Please select a state"),c.city||(D.city="Please select a city"),c.planningDate){const le=new Date(c.planningDate),se=new Date;se.setHours(0,0,0,0),le<se&&(D.planningDate="Planning date should be today or in the future")}if((!c.visitors||c.visitors<1||c.visitors>10)&&(D.visitors="Visitors must be between 1 and 10"),(!c.days||c.days<1||c.days>30)&&(D.days="Days must be between 1 and 30"),c.content&&c.content.trim().length>0&&c.content.trim().length<10&&(D.content="Description should be at least 10 characters long"),g(D),!(Object.keys(D).length>0))try{k(!0);const le=`${c.city}, ${c.state}`,se={...c,location:le,visitors:parseInt(c.visitors),days:parseInt(c.days),content:c.content.trim()};await n(se)}catch(le){console.error("Error submitting post:",le);const se=le.response?.data?.message||le.message||"Failed to save post. Please try again.";alert(se)}finally{k(!1)}},U=B=>{u(D=>({...D,facilities:D.facilities.includes(B)?D.facilities.filter(le=>le!==B):[...D.facilities,B]}))};return a.jsx("div",{className:"modal-overlay",onClick:r,children:a.jsxs("div",{className:"create-post-modal",onClick:B=>B.stopPropagation(),children:[a.jsxs("div",{className:"modal-header-modern",children:[a.jsxs("div",{className:"modal-title-section",children:[a.jsx("div",{className:"modal-icon",children:""}),a.jsxs("div",{children:[a.jsx("h2",{children:o?"Edit Post":"Create New Post"}),a.jsx("p",{children:o?"Update your accommodation request":"Share your accommodation needs with hosts"})]})]}),a.jsx("button",{onClick:r,className:"modal-close-modern",children:""})]}),a.jsx("div",{className:"modal-body-modern",children:a.jsxs("form",{onSubmit:W,className:"modern-form",children:[a.jsxs("div",{className:"form-group-modern",children:[a.jsxs("label",{className:"modern-label",children:[a.jsx("span",{className:"label-text",children:"Title"}),a.jsx("span",{className:"required-star",children:"*"})]}),a.jsx("input",{type:"text",className:"modern-input",value:c.title,onChange:B=>{u(D=>({...D,title:B.target.value})),g(D=>({...D,title:!1}))},placeholder:"e.g., Looking for cozy stay during Diwali",required:!0,style:{borderColor:m.title?"#dc2626":"var(--border)"}}),m.title&&a.jsx("div",{style:{color:"#dc2626",fontSize:"0.875rem",marginTop:"0.25rem"},children:m.title})]}),a.jsxs("div",{className:"form-group-modern",children:[a.jsx("label",{className:"modern-label",children:a.jsx("span",{className:"label-text",children:"Planning Date"})}),a.jsx("input",{type:"date",className:"modern-input",value:c.planningDate,onChange:B=>{u(D=>({...D,planningDate:B.target.value})),g(D=>({...D,planningDate:!1}))},style:{borderColor:m.planningDate?"#dc2626":"var(--border)"},min:new Date().toISOString().split("T")[0]}),m.planningDate&&a.jsx("div",{style:{color:"#dc2626",fontSize:"0.875rem",marginTop:"0.25rem"},children:m.planningDate})]}),a.jsxs("div",{className:"form-group-modern",children:[a.jsxs("label",{className:"modern-label",children:[a.jsx("span",{className:"label-text",children:"Visiting State"}),a.jsx("span",{className:"required-star",children:"*"})]}),a.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:Object.keys(f).map(B=>a.jsx("button",{type:"button",onClick:()=>{u(D=>({...D,state:B,city:""})),g(D=>({...D,state:!1,city:!1}))},style:{padding:"0.75rem 1.25rem",border:`2px solid ${m.state?"#dc2626":"#e5e7eb"}`,borderRadius:"8px",background:c.state===B?"#667eea":"white",color:c.state===B?"white":"#374151",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",transition:"all 0.2s ease",boxShadow:c.state===B?"0 4px 12px rgba(102, 126, 234, 0.3)":"0 1px 3px rgba(0, 0, 0, 0.1)"},children:B},B))}),m.state&&a.jsx("div",{style:{color:"#dc2626",fontSize:"0.875rem",marginTop:"0.25rem"},children:m.state})]}),c.state&&a.jsxs("div",{className:"form-group-modern",children:[a.jsxs("label",{className:"modern-label",children:[a.jsx("span",{className:"label-text",children:"Visiting City"}),a.jsx("span",{className:"required-star",children:"*"})]}),a.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},children:f[c.state]&&f[c.state].map(B=>a.jsx("button",{type:"button",onClick:()=>{u(D=>({...D,city:B})),g(D=>({...D,city:!1}))},style:{padding:"0.5rem 1rem",border:`2px solid ${m.city?"#dc2626":"#e5e7eb"}`,borderRadius:"6px",background:c.city===B?"#667eea":"white",color:c.city===B?"white":"#374151",cursor:"pointer",fontSize:"0.8rem",fontWeight:"500",transition:"all 0.2s ease"},children:B},B))}),m.city&&a.jsx("div",{style:{color:"#dc2626",fontSize:"0.875rem",marginTop:"0.25rem"},children:m.city})]}),a.jsxs("div",{className:"form-group-modern",children:[a.jsx("label",{className:"modern-label",children:a.jsx("span",{className:"label-text",children:"Preferred Facilities"})}),a.jsx("div",{className:"facilities-compact",children:z.map(B=>a.jsxs("button",{type:"button",onClick:()=>U(B.name),className:`facility-btn-compact ${c.facilities.includes(B.name)?"selected":""}`,children:[a.jsx("span",{className:"facility-icon-small",children:B.icon}),a.jsx("span",{children:B.name})]},B.name))})]}),a.jsxs("div",{className:"form-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[a.jsxs("div",{children:[a.jsx("label",{className:"modern-label",style:{marginBottom:"0.5rem",display:"block"},children:a.jsx("span",{className:"label-text",children:"Visitors"})}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("button",{type:"button",onClick:()=>u(B=>({...B,visitors:Math.max(1,B.visitors-1)})),style:{width:"32px",height:"32px",border:"1px solid var(--border)",borderRadius:"0.375rem",background:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:""}),a.jsx("input",{type:"number",min:"1",max:"10",value:c.visitors,onChange:B=>u(D=>({...D,visitors:parseInt(B.target.value)||1})),style:{width:"60px",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",textAlign:"center"}}),a.jsx("button",{type:"button",onClick:()=>u(B=>({...B,visitors:Math.min(10,B.visitors+1)})),style:{width:"32px",height:"32px",border:"1px solid var(--border)",borderRadius:"0.375rem",background:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"modern-label",style:{marginBottom:"0.5rem",display:"block"},children:a.jsx("span",{className:"label-text",children:"Days"})}),a.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx("button",{type:"button",onClick:()=>u(B=>({...B,days:Math.max(1,B.days-1)})),style:{width:"32px",height:"32px",border:"1px solid var(--border)",borderRadius:"0.375rem",background:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:""}),a.jsx("input",{type:"number",min:"1",max:"30",value:c.days,onChange:B=>u(D=>({...D,days:parseInt(B.target.value)||1})),style:{width:"60px",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",textAlign:"center"}}),a.jsx("button",{type:"button",onClick:()=>u(B=>({...B,days:Math.min(30,B.days+1)})),style:{width:"32px",height:"32px",border:"1px solid var(--border)",borderRadius:"0.375rem",background:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"})]})]})]}),a.jsxs("div",{className:"form-group-modern",children:[a.jsx("label",{className:"modern-label",children:a.jsx("span",{className:"label-text",children:"Additional Details"})}),a.jsx("textarea",{className:"modern-textarea",value:c.content,onChange:B=>{u(D=>({...D,content:B.target.value})),g(D=>({...D,content:!1}))},placeholder:"Describe your accommodation needs, preferences, and any special requirements...",rows:4,style:{borderColor:m.content?"#dc2626":"var(--border)"}}),m.content&&a.jsx("div",{style:{color:"#dc2626",fontSize:"0.875rem",marginTop:"0.25rem"},children:m.content})]}),a.jsxs("div",{className:"form-actions",children:[a.jsx("button",{type:"button",onClick:r,className:"btn-secondary-modern",disabled:v,children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn-primary-modern",disabled:v,children:v?a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"Saving..."}),a.jsx("span",{className:"btn-icon",children:""})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{children:o?"Update Post":"Create Post"}),a.jsx("span",{className:"btn-icon",children:o?"":""})]})})]})]})})]})})},EO=()=>a.jsx("div",{className:"legal-document",children:a.jsxs("div",{className:"container",children:[a.jsx("h1",{children:"Privacy Policy"}),a.jsxs("p",{className:"last-updated",children:["Last Updated: ",new Date().toLocaleDateString("en-IN")]}),a.jsxs("section",{children:[a.jsx("h2",{children:"1. Introduction"}),a.jsx("p",{children:'Local Host Connect ("we," "our," or "us") operates the FestiveGuestWebApp platform that connects travelers with local hosts. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our service.'}),a.jsx("p",{children:"By using our service, you agree to the collection and use of information in accordance with this policy."})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"2. Information We Collect"}),a.jsx("h3",{children:"2.1 Personal Information"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Full name, email address, phone number"}),a.jsx("li",{children:"Date of birth, gender, nationality"}),a.jsx("li",{children:"Government-issued ID verification documents"}),a.jsx("li",{children:"Profile photos and accommodation photos"}),a.jsx("li",{children:"Address and location information"}),a.jsx("li",{children:"Payment information (processed securely through third-party providers)"}),a.jsx("li",{children:"Emergency contact details"})]}),a.jsx("h3",{children:"2.2 Usage Information"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Device information (IP address, browser type, operating system)"}),a.jsx("li",{children:"Usage patterns and preferences"}),a.jsx("li",{children:"Communication records between users"}),a.jsx("li",{children:"Location data when using our services"}),a.jsx("li",{children:"Cookies and similar tracking technologies"})]}),a.jsx("h3",{children:"2.3 User-Generated Content"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Reviews and ratings"}),a.jsx("li",{children:"Messages and communications"}),a.jsx("li",{children:"Photos and descriptions of accommodations"}),a.jsx("li",{children:"Profile information and preferences"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"3. How We Use Your Information"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Facilitate connections between hosts and guests"}),a.jsx("li",{children:"Verify user identity and ensure platform safety"}),a.jsx("li",{children:"Process payments and transactions"}),a.jsx("li",{children:"Provide customer support and resolve disputes"}),a.jsx("li",{children:"Send important notifications about bookings and safety"}),a.jsx("li",{children:"Improve our services and user experience"}),a.jsx("li",{children:"Comply with legal obligations and prevent fraud"}),a.jsx("li",{children:"Send marketing communications (with your consent)"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"4. Information Sharing and Disclosure"}),a.jsx("h3",{children:"4.1 Privacy-First Approach"}),a.jsx("p",{children:"We prioritize user privacy and do NOT share personal contact details (email addresses, phone numbers) directly between users. Instead:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Contact information is masked/hidden in user profiles"}),a.jsx("li",{children:"Users communicate through our secure in-app chat system"}),a.jsx("li",{children:"Contact sharing is entirely voluntary and at user discretion"}),a.jsx("li",{children:"We collect contact details solely for our reference and emergency purposes"})]}),a.jsx("h3",{children:"4.2 What We Share Between Users"}),a.jsx("p",{children:"We only share non-sensitive information necessary for connections:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Profile information (name, photo, bio, preferences)"}),a.jsx("li",{children:"Accommodation details and photos (for hosts)"}),a.jsx("li",{children:"Reviews and ratings"}),a.jsx("li",{children:"General location area (not exact addresses)"}),a.jsx("li",{children:"Availability and travel dates"})]}),a.jsx("h3",{children:"4.3 Service Providers"}),a.jsx("p",{children:"We may share information with trusted third-party service providers who assist us in operating our platform, including payment processors, identity verification services, and customer support tools. These providers are bound by strict confidentiality agreements."}),a.jsx("h3",{children:"4.4 Legal Requirements"}),a.jsx("p",{children:"We may disclose your information when required by law, court order, or government request, or to protect our rights, property, or safety."}),a.jsx("h3",{children:"4.5 Business Transfers"}),a.jsx("p",{children:"In the event of a merger, acquisition, or sale of assets, your information may be transferred as part of the business transaction."})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"5. Data Security"}),a.jsx("p",{children:"We implement appropriate technical and organizational security measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction. However, no method of transmission over the internet is 100% secure."}),a.jsx("h3",{children:"Security Measures Include:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Encryption of sensitive data in transit and at rest"}),a.jsx("li",{children:"Regular security audits and vulnerability assessments"}),a.jsx("li",{children:"Access controls and authentication mechanisms"}),a.jsx("li",{children:"Employee training on data protection practices"}),a.jsx("li",{children:"Incident response procedures"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"6. Data Retention"}),a.jsx("p",{children:"We retain your personal information for as long as necessary to provide our services and comply with legal obligations. Specific retention periods:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Account information: Until account deletion plus 7 years for legal compliance"}),a.jsx("li",{children:"Transaction records: 7 years from transaction date"}),a.jsx("li",{children:"Communication records: 3 years from last communication"}),a.jsx("li",{children:"Marketing data: Until you withdraw consent"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"7. Your Rights"}),a.jsx("p",{children:"Under applicable data protection laws, you have the following rights:"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Access:"})," Request copies of your personal information"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Rectification:"})," Request correction of inaccurate information"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Erasure:"})," Request deletion of your personal information"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Portability:"})," Request transfer of your data to another service"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Restriction:"})," Request limitation of processing"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Objection:"})," Object to processing for marketing purposes"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Withdraw Consent:"})," Withdraw consent for data processing"]})]}),a.jsx("p",{children:"To exercise these rights, contact us at privacy@localhostconnect.com"})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"8. Cookies and Tracking Technologies"}),a.jsx("p",{children:"We use cookies and similar technologies to enhance your experience. Types of cookies we use:"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Essential Cookies:"})," Required for basic platform functionality"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Performance Cookies:"})," Help us understand how users interact with our platform"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Functional Cookies:"})," Remember your preferences and settings"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Marketing Cookies:"})," Used to deliver relevant advertisements"]})]}),a.jsx("p",{children:"You can control cookie preferences through your browser settings."})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"9. International Data Transfers"}),a.jsx("p",{children:"Your information may be transferred to and processed in countries other than your country of residence. We ensure appropriate safeguards are in place for such transfers, including:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Adequacy decisions by relevant authorities"}),a.jsx("li",{children:"Standard contractual clauses"}),a.jsx("li",{children:"Binding corporate rules"}),a.jsx("li",{children:"Certification schemes"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"10. Children's Privacy"}),a.jsx("p",{children:"Our service is not intended for individuals under 18 years of age. We do not knowingly collect personal information from children under 18. If we become aware that we have collected personal information from a child under 18, we will take steps to delete such information."})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"11. Third-Party Links"}),a.jsx("p",{children:"Our platform may contain links to third-party websites or services. We are not responsible for the privacy practices of these third parties. We encourage you to review their privacy policies before providing any personal information."})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"12. Changes to This Privacy Policy"}),a.jsx("p",{children:"We may update this Privacy Policy from time to time. We will notify you of any material changes by:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Posting the updated policy on our platform"}),a.jsx("li",{children:"Sending email notifications to registered users"}),a.jsx("li",{children:"Displaying prominent notices on our platform"})]}),a.jsx("p",{children:"Your continued use of our service after changes become effective constitutes acceptance of the updated policy."})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"13. Contact Information"}),a.jsxs("p",{children:["If you have questions about this Privacy Policy or our data practices, please visit our ",a.jsx(Xt,{to:"/help",style:{color:"var(--primary)",textDecoration:"none"},children:"Help & Support page"})," for contact information and assistance."]})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"14. Governing Law"}),a.jsx("p",{children:"This Privacy Policy is governed by the laws of India. Any disputes arising from this policy will be subject to the exclusive jurisdiction of the courts in [Your City], India."})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"15. Compliance"}),a.jsx("p",{children:"We comply with applicable data protection laws, including:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Information Technology Act, 2000 (India)"}),a.jsx("li",{children:"Information Technology (Reasonable Security Practices and Procedures and Sensitive Personal Data or Information) Rules, 2011"}),a.jsx("li",{children:"Digital Personal Data Protection Act, 2023 (when applicable)"}),a.jsx("li",{children:"General Data Protection Regulation (GDPR) for EU users"})]})]})]})}),kO=()=>a.jsx("div",{className:"legal-document",children:a.jsxs("div",{className:"container",children:[a.jsx("h1",{children:"Terms of Service"}),a.jsxs("p",{className:"last-updated",children:["Last Updated: ",new Date().toLocaleDateString("en-IN")]}),a.jsxs("section",{children:[a.jsx("h2",{children:"1. Acceptance of Terms"}),a.jsx("p",{children:'By accessing or using Local Host Connect ("Service"), you agree to be bound by these Terms of Service ("Terms"). If you disagree with any part of these terms, you may not access the Service.'}),a.jsx("p",{children:"These Terms constitute a legally binding agreement between you and Local Host Connect."})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"2. Description of Service"}),a.jsx("p",{children:'Local Host Connect is a platform that connects travelers ("Guests") with local accommodation providers ("Hosts"). We facilitate introductions and provide tools for communication, but we do not provide accommodation services directly.'}),a.jsx("h3",{children:"2.1 Platform Services Include:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"User registration and profile creation"}),a.jsx("li",{children:"Host and guest matching services"}),a.jsx("li",{children:"Secure messaging system"}),a.jsx("li",{children:"Review and rating system"}),a.jsx("li",{children:"Payment processing facilitation"}),a.jsx("li",{children:"Customer support services"})]}),a.jsx("h3",{children:"2.2 IMPORTANT: We Are an Introduction Service Only"}),a.jsx("p",{children:a.jsx("strong",{children:"Local Host Connect operates solely as an introduction and communication platform. We explicitly disclaim any responsibility for:"})}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"User Verification:"})," We do not conduct background checks, criminal record searches, or verify the identity, character, or existence of users"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"User Behavior:"})," We are not responsible for the conduct, actions, or behavior of any user on or off the platform"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Communication Quality:"})," We do not monitor, moderate, or take responsibility for the quality, tone, or content of communications between users"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Meeting Arrangements:"})," We are not involved in or responsible for any in-person meetings, accommodations, or arrangements made between users"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Safety and Security:"})," We do not guarantee the safety, security, or well-being of users during interactions or meetings"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Disputes and Conflicts:"})," We are not responsible for resolving disputes, conflicts, or disagreements between users"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Financial Transactions:"})," While we may facilitate payment processing, we are not responsible for payment disputes or financial arrangements between users"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Property and Belongings:"})," We are not responsible for damage to property, theft, or loss of belongings during user interactions"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Accommodation Quality:"})," We do not inspect, verify, or guarantee the quality, safety, or suitability of accommodations"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"User Representations:"})," We do not verify the accuracy of information provided by users in their profiles or communications"]})]})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"3. User Eligibility"}),a.jsx("p",{children:"To use our Service, you must:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Be at least 18 years of age"}),a.jsx("li",{children:"Have the legal capacity to enter into binding contracts"}),a.jsx("li",{children:"Provide accurate and complete registration information"}),a.jsx("li",{children:"Comply with all applicable laws and regulations"}),a.jsx("li",{children:"Not be prohibited from using the Service under applicable law"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"4. User Accounts and Registration"}),a.jsx("h3",{children:"4.1 Account Creation"}),a.jsx("p",{children:"You must create an account to use our Service. You are responsible for:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Providing accurate, current, and complete information"}),a.jsx("li",{children:"Maintaining the security of your account credentials"}),a.jsx("li",{children:"All activities that occur under your account"}),a.jsx("li",{children:"Immediately notifying us of any unauthorized use"})]}),a.jsx("h3",{children:"4.2 Identity Verification"}),a.jsx("p",{children:"We may require identity verification through government-issued documents. Failure to provide required verification may result in account suspension or termination."}),a.jsx("h3",{children:"4.3 Account Termination"}),a.jsx("p",{children:"You may terminate your account at any time. We reserve the right to suspend or terminate accounts that violate these Terms."})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"5. User Conduct and Responsibilities"}),a.jsx("h3",{children:"5.1 Prohibited Activities"}),a.jsx("p",{children:"You agree not to:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Violate any applicable laws or regulations"}),a.jsx("li",{children:"Provide false, misleading, or fraudulent information"}),a.jsx("li",{children:"Impersonate any person or entity"}),a.jsx("li",{children:"Harass, threaten, or harm other users"}),a.jsx("li",{children:"Use the Service for commercial purposes without authorization"}),a.jsx("li",{children:"Attempt to gain unauthorized access to our systems"}),a.jsx("li",{children:"Interfere with the proper functioning of the Service"}),a.jsx("li",{children:"Post inappropriate, offensive, or illegal content"}),a.jsx("li",{children:"Discriminate based on race, religion, gender, or other protected characteristics"})]}),a.jsx("h3",{children:"5.2 Host Responsibilities"}),a.jsx("p",{children:"As a Host, you must:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Provide accurate descriptions of your accommodation"}),a.jsx("li",{children:"Ensure your property meets safety and legal requirements"}),a.jsx("li",{children:"Comply with local laws, regulations, and tax obligations"}),a.jsx("li",{children:"Maintain appropriate insurance coverage"}),a.jsx("li",{children:"Treat guests with respect and without discrimination"}),a.jsx("li",{children:"Honor confirmed bookings or provide adequate notice of cancellation"})]}),a.jsx("h3",{children:"5.3 Guest Responsibilities"}),a.jsx("p",{children:"As a Guest, you must:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Provide accurate information about your travel plans"}),a.jsx("li",{children:"Respect the host's property and house rules"}),a.jsx("li",{children:"Comply with local laws and customs"}),a.jsx("li",{children:"Leave the accommodation in good condition"}),a.jsx("li",{children:"Honor confirmed bookings or provide adequate notice of cancellation"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"6. Booking and Communication"}),a.jsx("h3",{children:"6.1 Privacy-Protected Communication"}),a.jsx("p",{children:"All initial communication between users occurs through our secure in-app messaging system. We do not share personal contact details (email, phone) between users. Contact sharing is entirely voluntary and at the discretion of individual users."}),a.jsx("h3",{children:"6.2 Booking Process"}),a.jsx("p",{children:"Connections and arrangements are facilitated through our platform messaging system. We provide the tools for communication but are not a party to agreements between users."}),a.jsx("h3",{children:"6.3 Payment Processing"}),a.jsxs("ul",{children:[a.jsx("li",{children:"We use third-party payment processors for secure transactions"}),a.jsx("li",{children:"Payment terms are agreed upon between hosts and guests"}),a.jsx("li",{children:"We may charge service fees for platform usage"}),a.jsx("li",{children:"All payments are subject to applicable taxes"})]}),a.jsx("h3",{children:"6.4 Cancellation Policy"}),a.jsx("p",{children:"Cancellation terms are set by individual hosts. Users should review cancellation policies before making arrangements. We reserve the right to implement platform-wide cancellation policies for extraordinary circumstances."}),a.jsx("h3",{children:"6.5 Refunds and Disputes"}),a.jsx("p",{children:"Refund eligibility depends on the host's cancellation policy and circumstances. We provide dispute resolution services but are not obligated to provide refunds for disputes between users."})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"7. Safety and Security"}),a.jsx("h3",{children:"7.1 Safety Guidelines"}),a.jsx("p",{children:"We provide safety guidelines and recommendations, but users are responsible for their own safety and security. We strongly recommend:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Meeting in public places initially"}),a.jsx("li",{children:"Informing trusted contacts of your plans"}),a.jsx("li",{children:"Verifying host/guest identity before meeting"}),a.jsx("li",{children:"Trusting your instincts and leaving if uncomfortable"}),a.jsx("li",{children:"Maintaining emergency contact information"})]}),a.jsx("h3",{children:"7.2 Background Checks"}),a.jsx("p",{children:"We may conduct background checks on users but do not guarantee the accuracy or completeness of such checks. Users should exercise their own judgment when interacting with others."}),a.jsx("h3",{children:"7.3 Reporting and Response"}),a.jsx("p",{children:"Users must report any safety concerns, inappropriate behavior, or violations of these Terms immediately. We will investigate reports and take appropriate action."})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"8. Platform Limitations and User Responsibility"}),a.jsx("h3",{children:"8.1 No Verification or Background Checks"}),a.jsxs("p",{children:[a.jsx("strong",{children:"IMPORTANT NOTICE:"})," Local Host Connect does not:"]}),a.jsxs("ul",{children:[a.jsx("li",{children:"Conduct background checks on users"}),a.jsx("li",{children:"Verify criminal records or legal history"}),a.jsx("li",{children:"Confirm the identity, age, or personal details of users"}),a.jsx("li",{children:"Investigate the character, reputation, or trustworthiness of users"}),a.jsx("li",{children:"Verify the existence or legitimacy of users or their accommodations"}),a.jsx("li",{children:"Confirm the accuracy of profile information, photos, or descriptions"})]}),a.jsx("h3",{children:"8.2 User Responsibility for Due Diligence"}),a.jsx("p",{children:"Users are solely responsible for:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Conducting their own research and verification of other users"}),a.jsx("li",{children:"Making informed decisions about interactions and meetings"}),a.jsx("li",{children:"Ensuring their own safety and security during all interactions"}),a.jsx("li",{children:"Verifying the identity and legitimacy of other users before meeting"}),a.jsx("li",{children:"Assessing the safety and suitability of accommodations"}),a.jsx("li",{children:"Taking appropriate precautions during communications and meetings"})]}),a.jsx("h3",{children:"8.3 No Monitoring of Communications"}),a.jsx("p",{children:"We do not:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Monitor private messages between users"}),a.jsx("li",{children:"Review or moderate user communications"}),a.jsx("li",{children:"Intervene in disputes or disagreements between users"}),a.jsx("li",{children:"Guarantee the quality, tone, or appropriateness of communications"}),a.jsx("li",{children:"Take responsibility for misunderstandings or conflicts"})]}),a.jsx("h3",{children:"8.4 No Involvement in User Arrangements"}),a.jsx("p",{children:"Local Host Connect is not involved in and takes no responsibility for:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Arrangements made between hosts and guests"}),a.jsx("li",{children:"The quality, safety, or condition of accommodations"}),a.jsx("li",{children:"Payment arrangements or financial transactions between users"}),a.jsx("li",{children:"Cancellations, no-shows, or changes to arrangements"}),a.jsx("li",{children:"Disputes over accommodation quality, cleanliness, or amenities"}),a.jsx("li",{children:"Personal conflicts or disagreements between users"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"9. Intellectual Property Rights"}),a.jsx("h3",{children:"9.1 Platform Content"}),a.jsx("p",{children:"The Service and its original content, features, and functionality are owned by Local Host Connect and are protected by copyright, trademark, and other intellectual property laws."}),a.jsx("h3",{children:"9.2 User Content"}),a.jsx("p",{children:"You retain ownership of content you post but grant us a worldwide, non-exclusive, royalty-free license to use, display, and distribute your content in connection with the Service."}),a.jsx("h3",{children:"9.3 Prohibited Use"}),a.jsx("p",{children:"You may not reproduce, distribute, modify, or create derivative works of our content without explicit written permission."})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"10. Privacy and Data Protection"}),a.jsx("p",{children:"Your privacy is important to us. Our Privacy Policy explains how we collect, use, and protect your information. By using the Service, you consent to our data practices as described in the Privacy Policy."})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"11. Disclaimers and Limitations of Liability"}),a.jsx("h3",{children:"11.1 Introduction Service Disclaimer"}),a.jsx("p",{children:a.jsx("strong",{children:"CRITICAL NOTICE: Local Host Connect is ONLY an introduction and communication platform. We explicitly disclaim all responsibility for:"})}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"No Background Checks:"})," We do not conduct background checks, criminal record searches, identity verification, or character assessments of any users"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"No User Monitoring:"})," We do not monitor, supervise, or control user behavior, communications, or interactions"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"No Safety Guarantees:"})," We do not guarantee the safety, security, reliability, or trustworthiness of any user"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"No Verification of Information:"})," We do not verify the accuracy, completeness, or truthfulness of user profiles, descriptions, or communications"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"No Responsibility for Meetings:"})," We are not involved in or responsible for any in-person meetings, arrangements, or interactions between users"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"No Dispute Resolution Obligation:"})," While we may provide dispute resolution tools, we are not obligated to resolve conflicts between users"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"No Accommodation Oversight:"})," We do not inspect, verify, or guarantee the quality, safety, cleanliness, or suitability of any accommodation"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"No Financial Responsibility:"})," We are not responsible for payment disputes, financial losses, or monetary arrangements between users"]})]}),a.jsx("h3",{children:"11.2 Service Disclaimer"}),a.jsx("p",{children:'THE SERVICE IS PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT WARRANTIES OF ANY KIND. WE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND NON-INFRINGEMENT.'}),a.jsx("h3",{children:"11.3 Third-Party Services"}),a.jsx("p",{children:"We are not responsible for the actions, content, or services of third parties, including hosts, guests, payment processors, or other service providers."}),a.jsx("h3",{children:"11.4 Limitation of Liability"}),a.jsx("p",{children:"TO THE MAXIMUM EXTENT PERMITTED BY LAW, WE SHALL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL, OR PUNITIVE DAMAGES, INCLUDING LOSS OF PROFITS, DATA, OR USE, ARISING FROM:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"User interactions, meetings, or communications"}),a.jsx("li",{children:"Theft, damage, or loss of property"}),a.jsx("li",{children:"Personal injury or harm during user interactions"}),a.jsx("li",{children:"Fraudulent or criminal activity by users"}),a.jsx("li",{children:"Disputes or conflicts between users"}),a.jsx("li",{children:"Accommodation quality or safety issues"}),a.jsx("li",{children:"Financial losses or payment disputes"}),a.jsx("li",{children:"Any other interactions between users"})]}),a.jsx("h3",{children:"11.5 Maximum Liability"}),a.jsx("p",{children:"Our total liability for any claims arising from your use of the Service shall not exceed the amount you paid to us in the twelve months preceding the claim, or $100, whichever is less."})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"12. Indemnification"}),a.jsx("p",{children:"You agree to indemnify, defend, and hold harmless Local Host Connect and its officers, directors, employees, and agents from any claims, damages, losses, or expenses arising from:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Your use of the Service"}),a.jsx("li",{children:"Your violation of these Terms"}),a.jsx("li",{children:"Your violation of any rights of another party"}),a.jsx("li",{children:"Your interactions with other users"})]})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"13. Force Majeure"}),a.jsx("p",{children:"We shall not be liable for any failure or delay in performance due to circumstances beyond our reasonable control, including natural disasters, war, terrorism, government actions, or pandemics."})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"14. Modification of Terms"}),a.jsx("p",{children:"We reserve the right to modify these Terms at any time. We will notify users of material changes through:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Email notifications to registered users"}),a.jsx("li",{children:"Prominent notices on our platform"}),a.jsx("li",{children:"In-app notifications"})]}),a.jsx("p",{children:"Continued use of the Service after changes become effective constitutes acceptance of the modified Terms."})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"15. Termination"}),a.jsx("h3",{children:"15.1 Termination by Users"}),a.jsx("p",{children:"You may terminate your account at any time by following the account deletion process in your settings."}),a.jsx("h3",{children:"15.2 Termination by Us"}),a.jsx("p",{children:"We may suspend or terminate your account immediately if you:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Violate these Terms"}),a.jsx("li",{children:"Engage in fraudulent or illegal activities"}),a.jsx("li",{children:"Pose a safety risk to other users"}),a.jsx("li",{children:"Fail to pay applicable fees"})]}),a.jsx("h3",{children:"15.3 Effect of Termination"}),a.jsx("p",{children:"Upon termination, your right to use the Service ceases immediately. Provisions that should survive termination will remain in effect."})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"16. Dispute Resolution"}),a.jsx("h3",{children:"16.1 Informal Resolution"}),a.jsx("p",{children:"Before initiating formal proceedings, parties agree to attempt informal resolution through direct communication or mediation."}),a.jsx("h3",{children:"16.2 Arbitration"}),a.jsx("p",{children:"Any disputes arising from these Terms shall be resolved through binding arbitration in accordance with the Arbitration and Conciliation Act, 2015 of India."}),a.jsx("h3",{children:"16.3 Class Action Waiver"}),a.jsx("p",{children:"You agree to resolve disputes individually and waive any right to participate in class action lawsuits."})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"17. Governing Law and Jurisdiction"}),a.jsx("p",{children:"These Terms are governed by the laws of India. Any legal proceedings shall be conducted in the courts of [Your City], India."})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"18. Severability"}),a.jsx("p",{children:"If any provision of these Terms is found to be unenforceable, the remaining provisions will remain in full force and effect."})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"19. Entire Agreement"}),a.jsx("p",{children:"These Terms, together with our Privacy Policy, constitute the entire agreement between you and Local Host Connect regarding the Service."})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"20. Contact Information"}),a.jsxs("p",{children:["For questions about these Terms, please visit our ",a.jsx(Xt,{to:"/help",style:{color:"var(--primary)",textDecoration:"none"},children:"Help & Support page"})," for contact information and assistance."]})]}),a.jsxs("section",{children:[a.jsx("h2",{children:"21. Acknowledgment"}),a.jsx("p",{children:"By using our Service, you acknowledge that you have read, understood, and agree to be bound by these Terms of Service."})]})]})}),_O=()=>{const[r,n]=O.useState(!1),[i,o]=O.useState(null),[c,u]=O.useState(!0),[f,p]=O.useState(!1);O.useEffect(()=>{try{const D=localStorage.getItem("user");if(D){const le=JSON.parse(D);le&&le.token&&le.email&&(le.role||le.userType)&&o(le)}}catch{console.warn("Invalid user data in localStorage"),localStorage.removeItem("user")}},[]);const{unreadCount:m,clearUnreadCount:g}=gT(),v=Wn();O.useEffect(()=>{const D=setTimeout(()=>{u(!1)},i?0:3e3),le=()=>{try{const se=localStorage.getItem("user");if(se){const fe=JSON.parse(se);fe&&fe.token&&fe.email&&(fe.role||fe.userType)?o(fe):o(null)}else o(null)}catch{console.warn("Invalid user data in localStorage"),localStorage.removeItem("user"),o(null)}};return window.addEventListener("storage",le),()=>{clearTimeout(D),window.removeEventListener("storage",le)}},[i]);const k=D=>{const le=D?.role||D?.userType||D?.partitionKey;return le==="Host"?"/posts":le==="Guest"?"/guest-dashboard":le==="Admin"?"/admin":"/login"},z=()=>{p(!0)},W=()=>{localStorage.clear(),o(null),n(!1),p(!1),window.location.href="/"},U=()=>{g(),n(!1)},B=D=>D==="/dashboard"?v.pathname===k(i)||v.pathname==="/browse":v.pathname===D;return c?a.jsx(XR,{}):a.jsxs("div",{className:"app-container",style:{animation:"fadeIn 0.8s ease-out"},children:[a.jsxs("nav",{className:"navbar",children:[a.jsx(Xt,{to:"/",className:"nav-logo",onClick:()=>n(!1),children:a.jsx(WR,{className:"nav-logo-img",style:{height:"50px"}})}),a.jsx("button",{className:"menu-toggle",onClick:()=>n(!r),"aria-label":"Toggle menu",children:r?a.jsx(mf,{size:28}):a.jsx(FC,{size:28})}),a.jsx("div",{className:`nav-links ${r?"mobile-open":""}`,children:i?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"user-badge",children:a.jsxs("span",{className:"user-badge-text",children:[a.jsx("strong",{children:i.name})," ",a.jsxs("span",{className:"user-badge-role",children:["(",i.role||i.userType||i.partitionKey,")"]})]})}),a.jsxs(Xt,{to:k(i),className:`nav-item ${B("/dashboard")?"active":""}`,onClick:()=>n(!1),style:{display:i.role==="Host"||i.userType==="Host"?"none":"flex"},children:[a.jsx(HC,{size:20})," Dashboard"]}),a.jsx(Xt,{to:"/posts",className:`nav-item ${B("/posts")?"active":""}`,onClick:()=>n(!1),children:" Posts"}),a.jsxs(Xt,{to:"/chats",className:`nav-item chat-nav-item ${B("/chats")?"active":""}`,onClick:U,children:[" Chats",m>0&&a.jsx("span",{className:`unread-badge ${m>9?"large-count":""}`,children:m>99?"99+":m})]}),a.jsxs(Xt,{to:"/profile",className:`nav-item ${B("/profile")?"active":""}`,onClick:()=>n(!1),children:[a.jsx(cT,{size:20})," Profile"]}),a.jsxs(Xt,{to:"/help",className:`nav-item ${B("/help")?"active":""}`,onClick:()=>n(!1),children:[a.jsx(Cl,{size:20})," Help"]}),(i.role==="Admin"||i.userType==="Admin")&&a.jsxs(Xt,{to:"/admin",className:`nav-item ${B("/admin")?"active":""}`,onClick:()=>n(!1),children:[a.jsx(nT,{size:20})," Admin"]}),a.jsxs("button",{onClick:z,className:"nav-item logout-btn",style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(sy,{size:20})," Logout"]})]}):a.jsxs(a.Fragment,{children:[a.jsxs(Xt,{to:"/help",className:"nav-item",onClick:()=>n(!1),children:[a.jsx(Cl,{size:20})," Help"]}),a.jsx(Xt,{to:"/login",className:"nav-item",onClick:()=>n(!1),children:"Login"}),a.jsx(Xt,{to:"/?register=true",className:"nav-item btn btn-primary",style:{color:"white",padding:"0.5rem 1rem"},onClick:()=>n(!1),children:"Register"})]})})]}),a.jsx("main",{className:"content full-width",children:a.jsxs(P1,{children:[a.jsx(Ht,{path:"/",element:a.jsx(Ij,{user:i})}),a.jsx(Ht,{path:"/login",element:i?a.jsx(er,{to:"/"}):a.jsx(zj,{setUser:o})}),a.jsx(Ht,{path:"/register",element:i?a.jsx(er,{to:"/"}):a.jsx(Lj,{setUser:o})}),a.jsx(Ht,{path:"/browse",element:i?.role==="Guest"||i?.userType==="Guest"?a.jsx(_y,{user:i}):a.jsx(er,{to:"/login"})}),a.jsx(Ht,{path:"/guest-dashboard",element:i?.role==="Guest"||i?.userType==="Guest"?a.jsx(_y,{user:i}):a.jsx(er,{to:"/login"})}),a.jsx(Ht,{path:"/host-dashboard",element:i?.role==="Host"||i?.userType==="Host"?a.jsx(Bj,{user:i}):a.jsx(er,{to:"/login"})}),a.jsx(Ht,{path:"/chats",element:i?a.jsx(SO,{}):a.jsx(er,{to:"/login"})}),a.jsx(Ht,{path:"/posts",element:i?a.jsx(jO,{}):a.jsx(er,{to:"/login"})}),a.jsx(Ht,{path:"/profile",element:i?a.jsx(wO,{}):a.jsx(er,{to:"/login"})}),a.jsx(Ht,{path:"/profile/:userName",element:a.jsx(CO,{})}),a.jsx(Ht,{path:"/admin",element:i?.role==="Admin"||i?.userType==="Admin"?a.jsx(xO,{}):a.jsx(er,{to:"/login"})}),a.jsx(Ht,{path:"/chat/:recipientId",element:i?a.jsx(bO,{user:i}):a.jsx(er,{to:"/login"})}),a.jsx(Ht,{path:"/help",element:a.jsx(TO,{})}),a.jsx(Ht,{path:"/privacy-policy",element:a.jsx(EO,{})}),a.jsx(Ht,{path:"/terms-of-service",element:a.jsx(kO,{})}),a.jsx(Ht,{path:"/api-test",element:a.jsx(KR,{})}),a.jsx(Ht,{path:"/chat-debug",element:a.jsx(Uj,{})})]})}),f&&a.jsx("div",{className:"modal-overlay",onClick:()=>p(!1),children:a.jsxs("div",{className:"modal-content",onClick:D=>D.stopPropagation(),style:{maxWidth:"400px"},children:[a.jsx("div",{className:"modal-header",children:a.jsxs("h3",{style:{color:"#dc2626",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a.jsx(sy,{size:20}),"Confirm Logout"]})}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{style:{margin:"0 0 1rem 0",color:"var(--text)"},children:"Are you sure you want to logout?"}),a.jsx("p",{style:{margin:"0",color:"var(--text-light)",fontSize:"0.875rem"},children:"You will need to login again to access your account."})]}),a.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end",padding:"1rem"},children:[a.jsx("button",{onClick:()=>p(!1),className:"btn btn-outline",style:{minWidth:"80px"},children:"Cancel"}),a.jsx("button",{onClick:W,className:"btn",style:{minWidth:"80px",backgroundColor:"#dc2626",color:"white",border:"1px solid #dc2626"},children:"Logout"})]})]})})]})};function AO(){return a.jsx(sC,{children:a.jsx(yT,{children:a.jsx(_O,{})})})}Iw.createRoot(document.getElementById("root")).render(a.jsx(O.StrictMode,{children:a.jsx(AO,{})}));
