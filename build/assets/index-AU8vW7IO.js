(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const l of c)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function i(c){const l={};return c.integrity&&(l.integrity=c.integrity),c.referrerPolicy&&(l.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?l.credentials="include":c.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(c){if(c.ep)return;c.ep=!0;const l=i(c);fetch(c.href,l)}})();var kg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rc(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var n=r.default;if(typeof n=="function"){var i=function s(){var c=!1;try{c=this instanceof s}catch{}return c?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};i.prototype=n.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(r).forEach(function(s){var c=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(i,s,c.get?c:{enumerable:!0,get:function(){return r[s]}})}),i}var id={exports:{}},bs={};var Ng;function vT(){if(Ng)return bs;Ng=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(s,c,l){var d=null;if(l!==void 0&&(d=""+l),c.key!==void 0&&(d=""+c.key),"key"in c){l={};for(var p in c)p!=="key"&&(l[p]=c[p])}else l=c;return c=l.ref,{$$typeof:r,type:s,key:d,ref:c!==void 0?c:null,props:l}}return bs.Fragment=n,bs.jsx=i,bs.jsxs=i,bs}var Og;function bT(){return Og||(Og=1,id.exports=vT()),id.exports}var h=bT(),od={exports:{}},Ge={};var Mg;function ST(){if(Mg)return Ge;Mg=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),I=Symbol.iterator;function F(R){return R===null||typeof R!="object"?null:(R=I&&R[I]||R["@@iterator"],typeof R=="function"?R:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},re=Object.assign,X={};function ve(R,D,x){this.props=R,this.context=D,this.refs=X,this.updater=x||U}ve.prototype.isReactComponent={},ve.prototype.setState=function(R,D){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,D,"setState")},ve.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function pe(){}pe.prototype=ve.prototype;function oe(R,D,x){this.props=R,this.context=D,this.refs=X,this.updater=x||U}var ee=oe.prototype=new pe;ee.constructor=oe,re(ee,ve.prototype),ee.isPureReactComponent=!0;var ae=Array.isArray;function le(){}var ne={H:null,A:null,T:null,S:null},Re=Object.prototype.hasOwnProperty;function Ee(R,D,x){var b=x.ref;return{$$typeof:r,type:R,key:D,ref:b!==void 0?b:null,props:x}}function Ae(R,D){return Ee(R.type,D,R.props)}function He(R){return typeof R=="object"&&R!==null&&R.$$typeof===r}function Ve(R){var D={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(x){return D[x]})}var Oe=/\/+/g;function Te(R,D){return typeof R=="object"&&R!==null&&R.key!=null?Ve(""+R.key):D.toString(36)}function De(R){switch(R.status){case"fulfilled":return R.value;case"rejected":throw R.reason;default:switch(typeof R.status=="string"?R.then(le,le):(R.status="pending",R.then(function(D){R.status==="pending"&&(R.status="fulfilled",R.value=D)},function(D){R.status==="pending"&&(R.status="rejected",R.reason=D)})),R.status){case"fulfilled":return R.value;case"rejected":throw R.reason}}throw R}function $(R,D,x,b,T){var k=typeof R;(k==="undefined"||k==="boolean")&&(R=null);var N=!1;if(R===null)N=!0;else switch(k){case"bigint":case"string":case"number":N=!0;break;case"object":switch(R.$$typeof){case r:case n:N=!0;break;case y:return N=R._init,$(N(R._payload),D,x,b,T)}}if(N)return T=T(R),N=b===""?"."+Te(R,0):b,ae(T)?(x="",N!=null&&(x=N.replace(Oe,"$&/")+"/"),$(T,D,x,"",function(A){return A})):T!=null&&(He(T)&&(T=Ae(T,x+(T.key==null||R&&R.key===T.key?"":(""+T.key).replace(Oe,"$&/")+"/")+N)),D.push(T)),1;N=0;var S=b===""?".":b+":";if(ae(R))for(var C=0;C<R.length;C++)b=R[C],k=S+Te(b,C),N+=$(b,D,x,k,T);else if(C=F(R),typeof C=="function")for(R=C.call(R),C=0;!(b=R.next()).done;)b=b.value,k=S+Te(b,C++),N+=$(b,D,x,k,T);else if(k==="object"){if(typeof R.then=="function")return $(De(R),D,x,b,T);throw D=String(R),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.")}return N}function M(R,D,x){if(R==null)return R;var b=[],T=0;return $(R,b,"","",function(k){return D.call(x,k,T++)}),b}function Y(R){if(R._status===-1){var D=R._result;D=D(),D.then(function(x){(R._status===0||R._status===-1)&&(R._status=1,R._result=x)},function(x){(R._status===0||R._status===-1)&&(R._status=2,R._result=x)}),R._status===-1&&(R._status=0,R._result=D)}if(R._status===1)return R._result.default;throw R._result}var P=typeof reportError=="function"?reportError:function(R){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var D=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof R=="object"&&R!==null&&typeof R.message=="string"?String(R.message):String(R),error:R});if(!window.dispatchEvent(D))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",R);return}console.error(R)},K={map:M,forEach:function(R,D,x){M(R,function(){D.apply(this,arguments)},x)},count:function(R){var D=0;return M(R,function(){D++}),D},toArray:function(R){return M(R,function(D){return D})||[]},only:function(R){if(!He(R))throw Error("React.Children.only expected to receive a single React element child.");return R}};return Ge.Activity=E,Ge.Children=K,Ge.Component=ve,Ge.Fragment=i,Ge.Profiler=c,Ge.PureComponent=oe,Ge.StrictMode=s,Ge.Suspense=m,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ne,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(R){return ne.H.useMemoCache(R)}},Ge.cache=function(R){return function(){return R.apply(null,arguments)}},Ge.cacheSignal=function(){return null},Ge.cloneElement=function(R,D,x){if(R==null)throw Error("The argument must be a React element, but you passed "+R+".");var b=re({},R.props),T=R.key;if(D!=null)for(k in D.key!==void 0&&(T=""+D.key),D)!Re.call(D,k)||k==="key"||k==="__self"||k==="__source"||k==="ref"&&D.ref===void 0||(b[k]=D[k]);var k=arguments.length-2;if(k===1)b.children=x;else if(1<k){for(var N=Array(k),S=0;S<k;S++)N[S]=arguments[S+2];b.children=N}return Ee(R.type,T,b)},Ge.createContext=function(R){return R={$$typeof:d,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider=R,R.Consumer={$$typeof:l,_context:R},R},Ge.createElement=function(R,D,x){var b,T={},k=null;if(D!=null)for(b in D.key!==void 0&&(k=""+D.key),D)Re.call(D,b)&&b!=="key"&&b!=="__self"&&b!=="__source"&&(T[b]=D[b]);var N=arguments.length-2;if(N===1)T.children=x;else if(1<N){for(var S=Array(N),C=0;C<N;C++)S[C]=arguments[C+2];T.children=S}if(R&&R.defaultProps)for(b in N=R.defaultProps,N)T[b]===void 0&&(T[b]=N[b]);return Ee(R,k,T)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(R){return{$$typeof:p,render:R}},Ge.isValidElement=He,Ge.lazy=function(R){return{$$typeof:y,_payload:{_status:-1,_result:R},_init:Y}},Ge.memo=function(R,D){return{$$typeof:g,type:R,compare:D===void 0?null:D}},Ge.startTransition=function(R){var D=ne.T,x={};ne.T=x;try{var b=R(),T=ne.S;T!==null&&T(x,b),typeof b=="object"&&b!==null&&typeof b.then=="function"&&b.then(le,P)}catch(k){P(k)}finally{D!==null&&x.types!==null&&(D.types=x.types),ne.T=D}},Ge.unstable_useCacheRefresh=function(){return ne.H.useCacheRefresh()},Ge.use=function(R){return ne.H.use(R)},Ge.useActionState=function(R,D,x){return ne.H.useActionState(R,D,x)},Ge.useCallback=function(R,D){return ne.H.useCallback(R,D)},Ge.useContext=function(R){return ne.H.useContext(R)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(R,D){return ne.H.useDeferredValue(R,D)},Ge.useEffect=function(R,D){return ne.H.useEffect(R,D)},Ge.useEffectEvent=function(R){return ne.H.useEffectEvent(R)},Ge.useId=function(){return ne.H.useId()},Ge.useImperativeHandle=function(R,D,x){return ne.H.useImperativeHandle(R,D,x)},Ge.useInsertionEffect=function(R,D){return ne.H.useInsertionEffect(R,D)},Ge.useLayoutEffect=function(R,D){return ne.H.useLayoutEffect(R,D)},Ge.useMemo=function(R,D){return ne.H.useMemo(R,D)},Ge.useOptimistic=function(R,D){return ne.H.useOptimistic(R,D)},Ge.useReducer=function(R,D,x){return ne.H.useReducer(R,D,x)},Ge.useRef=function(R){return ne.H.useRef(R)},Ge.useState=function(R){return ne.H.useState(R)},Ge.useSyncExternalStore=function(R,D,x){return ne.H.useSyncExternalStore(R,D,x)},Ge.useTransition=function(){return ne.H.useTransition()},Ge.version="19.2.3",Ge}var jg;function Fd(){return jg||(jg=1,od.exports=ST()),od.exports}var z=Fd(),sd={exports:{}},Ss={},ad={exports:{}},cd={};var Ug;function wT(){return Ug||(Ug=1,(function(r){function n($,M){var Y=$.length;$.push(M);e:for(;0<Y;){var P=Y-1>>>1,K=$[P];if(0<c(K,M))$[P]=M,$[Y]=K,Y=P;else break e}}function i($){return $.length===0?null:$[0]}function s($){if($.length===0)return null;var M=$[0],Y=$.pop();if(Y!==M){$[0]=Y;e:for(var P=0,K=$.length,R=K>>>1;P<R;){var D=2*(P+1)-1,x=$[D],b=D+1,T=$[b];if(0>c(x,Y))b<K&&0>c(T,x)?($[P]=T,$[b]=Y,P=b):($[P]=x,$[D]=Y,P=D);else if(b<K&&0>c(T,Y))$[P]=T,$[b]=Y,P=b;else break e}}return M}function c($,M){var Y=$.sortIndex-M.sortIndex;return Y!==0?Y:$.id-M.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var m=[],g=[],y=1,E=null,I=3,F=!1,U=!1,re=!1,X=!1,ve=typeof setTimeout=="function"?setTimeout:null,pe=typeof clearTimeout=="function"?clearTimeout:null,oe=typeof setImmediate<"u"?setImmediate:null;function ee($){for(var M=i(g);M!==null;){if(M.callback===null)s(g);else if(M.startTime<=$)s(g),M.sortIndex=M.expirationTime,n(m,M);else break;M=i(g)}}function ae($){if(re=!1,ee($),!U)if(i(m)!==null)U=!0,le||(le=!0,Ve());else{var M=i(g);M!==null&&De(ae,M.startTime-$)}}var le=!1,ne=-1,Re=5,Ee=-1;function Ae(){return X?!0:!(r.unstable_now()-Ee<Re)}function He(){if(X=!1,le){var $=r.unstable_now();Ee=$;var M=!0;try{e:{U=!1,re&&(re=!1,pe(ne),ne=-1),F=!0;var Y=I;try{t:{for(ee($),E=i(m);E!==null&&!(E.expirationTime>$&&Ae());){var P=E.callback;if(typeof P=="function"){E.callback=null,I=E.priorityLevel;var K=P(E.expirationTime<=$);if($=r.unstable_now(),typeof K=="function"){E.callback=K,ee($),M=!0;break t}E===i(m)&&s(m),ee($)}else s(m);E=i(m)}if(E!==null)M=!0;else{var R=i(g);R!==null&&De(ae,R.startTime-$),M=!1}}break e}finally{E=null,I=Y,F=!1}M=void 0}}finally{M?Ve():le=!1}}}var Ve;if(typeof oe=="function")Ve=function(){oe(He)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,Te=Oe.port2;Oe.port1.onmessage=He,Ve=function(){Te.postMessage(null)}}else Ve=function(){ve(He,0)};function De($,M){ne=ve(function(){$(r.unstable_now())},M)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function($){$.callback=null},r.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Re=0<$?Math.floor(1e3/$):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_next=function($){switch(I){case 1:case 2:case 3:var M=3;break;default:M=I}var Y=I;I=M;try{return $()}finally{I=Y}},r.unstable_requestPaint=function(){X=!0},r.unstable_runWithPriority=function($,M){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Y=I;I=$;try{return M()}finally{I=Y}},r.unstable_scheduleCallback=function($,M,Y){var P=r.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?P+Y:P):Y=P,$){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=Y+K,$={id:y++,callback:M,priorityLevel:$,startTime:Y,expirationTime:K,sortIndex:-1},Y>P?($.sortIndex=Y,n(g,$),i(m)===null&&$===i(g)&&(re?(pe(ne),ne=-1):re=!0,De(ae,Y-P))):($.sortIndex=K,n(m,$),U||F||(U=!0,le||(le=!0,Ve()))),$},r.unstable_shouldYield=Ae,r.unstable_wrapCallback=function($){var M=I;return function(){var Y=I;I=M;try{return $.apply(this,arguments)}finally{I=Y}}}})(cd)),cd}var Dg;function TT(){return Dg||(Dg=1,ad.exports=wT()),ad.exports}var ld={exports:{}},Jt={};var Pg;function CT(){if(Pg)return Jt;Pg=1;var r=Fd();function n(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(n(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},c=Symbol.for("react.portal");function l(m,g,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:E==null?null:""+E,children:m,containerInfo:g,implementation:y}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Jt.createPortal=function(m,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(n(299));return l(m,g,null,y)},Jt.flushSync=function(m){var g=d.T,y=s.p;try{if(d.T=null,s.p=2,m)return m()}finally{d.T=g,s.p=y,s.d.f()}},Jt.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(m,g))},Jt.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},Jt.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var y=g.as,E=p(y,g.crossOrigin),I=typeof g.integrity=="string"?g.integrity:void 0,F=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?s.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:I,fetchPriority:F}):y==="script"&&s.d.X(m,{crossOrigin:E,integrity:I,fetchPriority:F,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Jt.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=p(g.as,g.crossOrigin);s.d.M(m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(m)},Jt.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,E=p(y,g.crossOrigin);s.d.L(m,y,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Jt.preloadModule=function(m,g){if(typeof m=="string")if(g){var y=p(g.as,g.crossOrigin);s.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(m)},Jt.requestFormReset=function(m){s.d.r(m)},Jt.unstable_batchedUpdates=function(m,g){return m(g)},Jt.useFormState=function(m,g,y){return d.H.useFormState(m,g,y)},Jt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Jt.version="19.2.3",Jt}var Ig;function RT(){if(Ig)return ld.exports;Ig=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),ld.exports=CT(),ld.exports}var zg;function xT(){if(zg)return Ss;zg=1;var r=TT(),n=Fd(),i=RT();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)t+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function l(e){var t=e,o=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(o=t.return),e=t.return;while(e)}return t.tag===3?o:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(l(e)!==e)throw Error(s(188))}function g(e){var t=e.alternate;if(!t){if(t=l(e),t===null)throw Error(s(188));return t!==e?null:e}for(var o=e,a=t;;){var u=o.return;if(u===null)break;var f=u.alternate;if(f===null){if(a=u.return,a!==null){o=a;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===o)return m(u),e;if(f===a)return m(u),t;f=f.sibling}throw Error(s(188))}if(o.return!==a.return)o=u,a=f;else{for(var v=!1,_=u.child;_;){if(_===o){v=!0,o=u,a=f;break}if(_===a){v=!0,a=u,o=f;break}_=_.sibling}if(!v){for(_=f.child;_;){if(_===o){v=!0,o=f,a=u;break}if(_===a){v=!0,a=f,o=u;break}_=_.sibling}if(!v)throw Error(s(189))}}if(o.alternate!==a)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var E=Object.assign,I=Symbol.for("react.element"),F=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),re=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),ve=Symbol.for("react.profiler"),pe=Symbol.for("react.consumer"),oe=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),ne=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),Ee=Symbol.for("react.activity"),Ae=Symbol.for("react.memo_cache_sentinel"),He=Symbol.iterator;function Ve(e){return e===null||typeof e!="object"?null:(e=He&&e[He]||e["@@iterator"],typeof e=="function"?e:null)}var Oe=Symbol.for("react.client.reference");function Te(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Oe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case re:return"Fragment";case ve:return"Profiler";case X:return"StrictMode";case ae:return"Suspense";case le:return"SuspenseList";case Ee:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case U:return"Portal";case oe:return e.displayName||"Context";case pe:return(e._context.displayName||"Context")+".Consumer";case ee:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ne:return t=e.displayName||null,t!==null?t:Te(e.type)||"Memo";case Re:t=e._payload,e=e._init;try{return Te(e(t))}catch{}}return null}var De=Array.isArray,$=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},P=[],K=-1;function R(e){return{current:e}}function D(e){0>K||(e.current=P[K],P[K]=null,K--)}function x(e,t){K++,P[K]=e.current,e.current=t}var b=R(null),T=R(null),k=R(null),N=R(null);function S(e,t){switch(x(k,t),x(T,e),x(b,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Wm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Wm(t),e=Zm(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}D(b),x(b,e)}function C(){D(b),D(T),D(k)}function A(e){e.memoizedState!==null&&x(N,e);var t=b.current,o=Zm(t,e.type);t!==o&&(x(T,e),x(b,o))}function B(e){T.current===e&&(D(b),D(T)),N.current===e&&(D(N),ms._currentValue=Y)}var J,V;function L(e){if(J===void 0)try{throw Error()}catch(o){var t=o.stack.trim().match(/\n( *(at )?)/);J=t&&t[1]||"",V=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+J+e+V}var H=!1;function ie(e,t){if(!e||H)return"";H=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var Ce=function(){throw Error()};if(Object.defineProperty(Ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ce,[])}catch(ge){var he=ge}Reflect.construct(e,[],Ce)}else{try{Ce.call()}catch(ge){he=ge}e.call(Ce.prototype)}}else{try{throw Error()}catch(ge){he=ge}(Ce=e())&&typeof Ce.catch=="function"&&Ce.catch(function(){})}}catch(ge){if(ge&&he&&typeof ge.stack=="string")return[ge.stack,he.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=a.DetermineComponentFrameRoot(),v=f[0],_=f[1];if(v&&_){var G=v.split(`
`),fe=_.split(`
`);for(u=a=0;a<G.length&&!G[a].includes("DetermineComponentFrameRoot");)a++;for(;u<fe.length&&!fe[u].includes("DetermineComponentFrameRoot");)u++;if(a===G.length||u===fe.length)for(a=G.length-1,u=fe.length-1;1<=a&&0<=u&&G[a]!==fe[u];)u--;for(;1<=a&&0<=u;a--,u--)if(G[a]!==fe[u]){if(a!==1||u!==1)do if(a--,u--,0>u||G[a]!==fe[u]){var be=`
`+G[a].replace(" at new "," at ");return e.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",e.displayName)),be}while(1<=a&&0<=u);break}}}finally{H=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?L(o):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return L(e.type);case 16:return L("Lazy");case 13:return e.child!==t&&t!==null?L("Suspense Fallback"):L("Suspense");case 19:return L("SuspenseList");case 0:case 15:return ie(e.type,!1);case 11:return ie(e.type.render,!1);case 1:return ie(e.type,!0);case 31:return L("Activity");default:return""}}function W(e){try{var t="",o=null;do t+=te(e,o),o=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var ue=Object.prototype.hasOwnProperty,_e=r.unstable_scheduleCallback,ke=r.unstable_cancelCallback,xe=r.unstable_shouldYield,Ne=r.unstable_requestPaint,qe=r.unstable_now,Qe=r.unstable_getCurrentPriorityLevel,O=r.unstable_ImmediatePriority,w=r.unstable_UserBlockingPriority,j=r.unstable_NormalPriority,Z=r.unstable_LowPriority,q=r.unstable_IdlePriority,se=r.log,ye=r.unstable_setDisableYieldValue,Ie=null,Me=null;function Ue(e){if(typeof se=="function"&&ye(e),Me&&typeof Me.setStrictMode=="function")try{Me.setStrictMode(Ie,e)}catch{}}var ze=Math.clz32?Math.clz32:It,lt=Math.log,Rt=Math.LN2;function It(e){return e>>>=0,e===0?32:31-(lt(e)/Rt|0)|0}var Yt=256,_i=262144,Wr=4194304;function Zr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Hs(e,t,o){var a=e.pendingLanes;if(a===0)return 0;var u=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var _=a&134217727;return _!==0?(a=_&~f,a!==0?u=Zr(a):(v&=_,v!==0?u=Zr(v):o||(o=_&~e,o!==0&&(u=Zr(o))))):(_=a&~f,_!==0?u=Zr(_):v!==0?u=Zr(v):o||(o=a&~e,o!==0&&(u=Zr(o)))),u===0?0:t!==0&&t!==u&&(t&f)===0&&(f=u&-u,o=t&-t,f>=o||f===32&&(o&4194048)!==0)?t:u}function Ao(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function oS(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jf(){var e=Wr;return Wr<<=1,(Wr&62914560)===0&&(Wr=4194304),e}function Fc(e){for(var t=[],o=0;31>o;o++)t.push(e);return t}function ko(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function sS(e,t,o,a,u,f){var v=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var _=e.entanglements,G=e.expirationTimes,fe=e.hiddenUpdates;for(o=v&~o;0<o;){var be=31-ze(o),Ce=1<<be;_[be]=0,G[be]=-1;var he=fe[be];if(he!==null)for(fe[be]=null,be=0;be<he.length;be++){var ge=he[be];ge!==null&&(ge.lane&=-536870913)}o&=~Ce}a!==0&&Uf(e,a,0),f!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~t))}function Uf(e,t,o){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-ze(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|o&261930}function Df(e,t){var o=e.entangledLanes|=t;for(e=e.entanglements;o;){var a=31-ze(o),u=1<<a;u&t|e[a]&t&&(e[a]|=t),o&=~u}}function Pf(e,t){var o=t&-t;return o=(o&42)!==0?1:Xc(o),(o&(e.suspendedLanes|t))!==0?0:o}function Xc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Yc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function If(){var e=M.p;return e!==0?e:(e=window.event,e===void 0?32:Tg(e.type))}function zf(e,t){var o=M.p;try{return M.p=e,t()}finally{M.p=o}}var Sr=Math.random().toString(36).slice(2),Ht="__reactFiber$"+Sr,an="__reactProps$"+Sr,Ai="__reactContainer$"+Sr,Jc="__reactEvents$"+Sr,aS="__reactListeners$"+Sr,cS="__reactHandles$"+Sr,Lf="__reactResources$"+Sr,No="__reactMarker$"+Sr;function Kc(e){delete e[Ht],delete e[an],delete e[Jc],delete e[aS],delete e[cS]}function ki(e){var t=e[Ht];if(t)return t;for(var o=e.parentNode;o;){if(t=o[Ai]||o[Ht]){if(o=t.alternate,t.child!==null||o!==null&&o.child!==null)for(e=sg(e);e!==null;){if(o=e[Ht])return o;e=sg(e)}return t}e=o,o=e.parentNode}return null}function Ni(e){if(e=e[Ht]||e[Ai]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Oo(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function Oi(e){var t=e[Lf];return t||(t=e[Lf]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function zt(e){e[No]=!0}var Bf=new Set,Hf={};function ei(e,t){Mi(e,t),Mi(e+"Capture",t)}function Mi(e,t){for(Hf[e]=t,e=0;e<t.length;e++)Bf.add(t[e])}var lS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qf={},$f={};function uS(e){return ue.call($f,e)?!0:ue.call(qf,e)?!1:lS.test(e)?$f[e]=!0:(qf[e]=!0,!1)}function qs(e,t,o){if(uS(t))if(o===null)e.removeAttribute(t);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+o)}}function $s(e,t,o){if(o===null)e.removeAttribute(t);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+o)}}function Wn(e,t,o,a){if(a===null)e.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(t,o,""+a)}}function _n(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Vf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function dS(e,t,o){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var u=a.get,f=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Qc(e){if(!e._valueTracker){var t=Vf(e)?"checked":"value";e._valueTracker=dS(e,t,""+e[t])}}function Gf(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var o=t.getValue(),a="";return e&&(a=Vf(e)?e.checked?"true":"false":e.value),e=a,e!==o?(t.setValue(e),!0):!1}function Vs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var fS=/[\n"\\]/g;function An(e){return e.replace(fS,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Wc(e,t,o,a,u,f,v,_){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),t!=null?v==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+_n(t)):e.value!==""+_n(t)&&(e.value=""+_n(t)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),t!=null?Zc(e,v,_n(t)):o!=null?Zc(e,v,_n(o)):a!=null&&e.removeAttribute("value"),u==null&&f!=null&&(e.defaultChecked=!!f),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+_n(_):e.removeAttribute("name")}function Ff(e,t,o,a,u,f,v,_){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||o!=null){if(!(f!=="submit"&&f!=="reset"||t!=null)){Qc(e);return}o=o!=null?""+_n(o):"",t=t!=null?""+_n(t):o,_||t===e.value||(e.value=t),e.defaultValue=t}a=a??u,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=_?e.checked:!!a,e.defaultChecked=!!a,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),Qc(e)}function Zc(e,t,o){t==="number"&&Vs(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function ji(e,t,o,a){if(e=e.options,t){t={};for(var u=0;u<o.length;u++)t["$"+o[u]]=!0;for(o=0;o<e.length;o++)u=t.hasOwnProperty("$"+e[o].value),e[o].selected!==u&&(e[o].selected=u),u&&a&&(e[o].defaultSelected=!0)}else{for(o=""+_n(o),t=null,u=0;u<e.length;u++){if(e[u].value===o){e[u].selected=!0,a&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function Xf(e,t,o){if(t!=null&&(t=""+_n(t),t!==e.value&&(e.value=t),o==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=o!=null?""+_n(o):""}function Yf(e,t,o,a){if(t==null){if(a!=null){if(o!=null)throw Error(s(92));if(De(a)){if(1<a.length)throw Error(s(93));a=a[0]}o=a}o==null&&(o=""),t=o}o=_n(t),e.defaultValue=o,a=e.textContent,a===o&&a!==""&&a!==null&&(e.value=a),Qc(e)}function Ui(e,t){if(t){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=t;return}}e.textContent=t}var hS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jf(e,t,o){var a=t.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,o):typeof o!="number"||o===0||hS.has(t)?t==="float"?e.cssFloat=o:e[t]=(""+o).trim():e[t]=o+"px"}function Kf(e,t,o){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,o!=null){for(var a in o)!o.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var u in t)a=t[u],t.hasOwnProperty(u)&&o[u]!==a&&Jf(e,u,a)}else for(var f in t)t.hasOwnProperty(f)&&Jf(e,f,t[f])}function el(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Gs(e){return mS.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Zn(){}var tl=null;function nl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Di=null,Pi=null;function Qf(e){var t=Ni(e);if(t&&(e=t.stateNode)){var o=e[an]||null;e:switch(e=t.stateNode,t.type){case"input":if(Wc(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),t=o.name,o.type==="radio"&&t!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+An(""+t)+'"][type="radio"]'),t=0;t<o.length;t++){var a=o[t];if(a!==e&&a.form===e.form){var u=a[an]||null;if(!u)throw Error(s(90));Wc(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(t=0;t<o.length;t++)a=o[t],a.form===e.form&&Gf(a)}break e;case"textarea":Xf(e,o.value,o.defaultValue);break e;case"select":t=o.value,t!=null&&ji(e,!!o.multiple,t,!1)}}}var rl=!1;function Wf(e,t,o){if(rl)return e(t,o);rl=!0;try{var a=e(t);return a}finally{if(rl=!1,(Di!==null||Pi!==null)&&(Ma(),Di&&(t=Di,e=Pi,Pi=Di=null,Qf(t),e)))for(t=0;t<e.length;t++)Qf(e[t])}}function Mo(e,t){var o=e.stateNode;if(o===null)return null;var a=o[an]||null;if(a===null)return null;o=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(s(231,t,typeof o));return o}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),il=!1;if(er)try{var jo={};Object.defineProperty(jo,"passive",{get:function(){il=!0}}),window.addEventListener("test",jo,jo),window.removeEventListener("test",jo,jo)}catch{il=!1}var wr=null,ol=null,Fs=null;function Zf(){if(Fs)return Fs;var e,t=ol,o=t.length,a,u="value"in wr?wr.value:wr.textContent,f=u.length;for(e=0;e<o&&t[e]===u[e];e++);var v=o-e;for(a=1;a<=v&&t[o-a]===u[f-a];a++);return Fs=u.slice(e,1<a?1-a:void 0)}function Xs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ys(){return!0}function eh(){return!1}function cn(e){function t(o,a,u,f,v){this._reactName=o,this._targetInst=u,this.type=a,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(o=e[_],this[_]=o?o(f):f[_]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Ys:eh,this.isPropagationStopped=eh,this}return E(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ys)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ys)},persist:function(){},isPersistent:Ys}),t}var ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Js=cn(ti),Uo=E({},ti,{view:0,detail:0}),gS=cn(Uo),sl,al,Do,Ks=E({},Uo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ll,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Do&&(Do&&e.type==="mousemove"?(sl=e.screenX-Do.screenX,al=e.screenY-Do.screenY):al=sl=0,Do=e),sl)},movementY:function(e){return"movementY"in e?e.movementY:al}}),th=cn(Ks),yS=E({},Ks,{dataTransfer:0}),vS=cn(yS),bS=E({},Uo,{relatedTarget:0}),cl=cn(bS),SS=E({},ti,{animationName:0,elapsedTime:0,pseudoElement:0}),wS=cn(SS),TS=E({},ti,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),CS=cn(TS),RS=E({},ti,{data:0}),nh=cn(RS),xS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ES={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_S={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function AS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_S[e])?!!t[e]:!1}function ll(){return AS}var kS=E({},Uo,{key:function(e){if(e.key){var t=xS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ES[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ll,charCode:function(e){return e.type==="keypress"?Xs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),NS=cn(kS),OS=E({},Ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rh=cn(OS),MS=E({},Uo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ll}),jS=cn(MS),US=E({},ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),DS=cn(US),PS=E({},Ks,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),IS=cn(PS),zS=E({},ti,{newState:0,oldState:0}),LS=cn(zS),BS=[9,13,27,32],ul=er&&"CompositionEvent"in window,Po=null;er&&"documentMode"in document&&(Po=document.documentMode);var HS=er&&"TextEvent"in window&&!Po,ih=er&&(!ul||Po&&8<Po&&11>=Po),oh=" ",sh=!1;function ah(e,t){switch(e){case"keyup":return BS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ch(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ii=!1;function qS(e,t){switch(e){case"compositionend":return ch(t);case"keypress":return t.which!==32?null:(sh=!0,oh);case"textInput":return e=t.data,e===oh&&sh?null:e;default:return null}}function $S(e,t){if(Ii)return e==="compositionend"||!ul&&ah(e,t)?(e=Zf(),Fs=ol=wr=null,Ii=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ih&&t.locale!=="ko"?null:t.data;default:return null}}var VS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!VS[e.type]:t==="textarea"}function uh(e,t,o,a){Di?Pi?Pi.push(a):Pi=[a]:Di=a,t=La(t,"onChange"),0<t.length&&(o=new Js("onChange","change",null,o,a),e.push({event:o,listeners:t}))}var Io=null,zo=null;function GS(e){Fm(e,0)}function Qs(e){var t=Oo(e);if(Gf(t))return e}function dh(e,t){if(e==="change")return t}var fh=!1;if(er){var dl;if(er){var fl="oninput"in document;if(!fl){var hh=document.createElement("div");hh.setAttribute("oninput","return;"),fl=typeof hh.oninput=="function"}dl=fl}else dl=!1;fh=dl&&(!document.documentMode||9<document.documentMode)}function ph(){Io&&(Io.detachEvent("onpropertychange",mh),zo=Io=null)}function mh(e){if(e.propertyName==="value"&&Qs(zo)){var t=[];uh(t,zo,e,nl(e)),Wf(GS,t)}}function FS(e,t,o){e==="focusin"?(ph(),Io=t,zo=o,Io.attachEvent("onpropertychange",mh)):e==="focusout"&&ph()}function XS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qs(zo)}function YS(e,t){if(e==="click")return Qs(t)}function JS(e,t){if(e==="input"||e==="change")return Qs(t)}function KS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vn=typeof Object.is=="function"?Object.is:KS;function Lo(e,t){if(vn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(a=0;a<o.length;a++){var u=o[a];if(!ue.call(t,u)||!vn(e[u],t[u]))return!1}return!0}function gh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yh(e,t){var o=gh(e);e=0;for(var a;o;){if(o.nodeType===3){if(a=e+o.textContent.length,e<=t&&a>=t)return{node:o,offset:t-e};e=a}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=gh(o)}}function vh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function bh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Vs(e.document);t instanceof e.HTMLIFrameElement;){try{var o=typeof t.contentWindow.location.href=="string"}catch{o=!1}if(o)e=t.contentWindow;else break;t=Vs(e.document)}return t}function hl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var QS=er&&"documentMode"in document&&11>=document.documentMode,zi=null,pl=null,Bo=null,ml=!1;function Sh(e,t,o){var a=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;ml||zi==null||zi!==Vs(a)||(a=zi,"selectionStart"in a&&hl(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Bo&&Lo(Bo,a)||(Bo=a,a=La(pl,"onSelect"),0<a.length&&(t=new Js("onSelect","select",null,t,o),e.push({event:t,listeners:a}),t.target=zi)))}function ni(e,t){var o={};return o[e.toLowerCase()]=t.toLowerCase(),o["Webkit"+e]="webkit"+t,o["Moz"+e]="moz"+t,o}var Li={animationend:ni("Animation","AnimationEnd"),animationiteration:ni("Animation","AnimationIteration"),animationstart:ni("Animation","AnimationStart"),transitionrun:ni("Transition","TransitionRun"),transitionstart:ni("Transition","TransitionStart"),transitioncancel:ni("Transition","TransitionCancel"),transitionend:ni("Transition","TransitionEnd")},gl={},wh={};er&&(wh=document.createElement("div").style,"AnimationEvent"in window||(delete Li.animationend.animation,delete Li.animationiteration.animation,delete Li.animationstart.animation),"TransitionEvent"in window||delete Li.transitionend.transition);function ri(e){if(gl[e])return gl[e];if(!Li[e])return e;var t=Li[e],o;for(o in t)if(t.hasOwnProperty(o)&&o in wh)return gl[e]=t[o];return e}var Th=ri("animationend"),Ch=ri("animationiteration"),Rh=ri("animationstart"),WS=ri("transitionrun"),ZS=ri("transitionstart"),ew=ri("transitioncancel"),xh=ri("transitionend"),Eh=new Map,yl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");yl.push("scrollEnd");function zn(e,t){Eh.set(e,t),ei(t,[e])}var Ws=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},kn=[],Bi=0,vl=0;function Zs(){for(var e=Bi,t=vl=Bi=0;t<e;){var o=kn[t];kn[t++]=null;var a=kn[t];kn[t++]=null;var u=kn[t];kn[t++]=null;var f=kn[t];if(kn[t++]=null,a!==null&&u!==null){var v=a.pending;v===null?u.next=u:(u.next=v.next,v.next=u),a.pending=u}f!==0&&_h(o,u,f)}}function ea(e,t,o,a){kn[Bi++]=e,kn[Bi++]=t,kn[Bi++]=o,kn[Bi++]=a,vl|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function bl(e,t,o,a){return ea(e,t,o,a),ta(e)}function ii(e,t){return ea(e,null,null,t),ta(e)}function _h(e,t,o){e.lanes|=o;var a=e.alternate;a!==null&&(a.lanes|=o);for(var u=!1,f=e.return;f!==null;)f.childLanes|=o,a=f.alternate,a!==null&&(a.childLanes|=o),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(u=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,u&&t!==null&&(u=31-ze(o),e=f.hiddenUpdates,a=e[u],a===null?e[u]=[t]:a.push(t),t.lane=o|536870912),f):null}function ta(e){if(50<cs)throw cs=0,Au=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Hi={};function tw(e,t,o,a){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(e,t,o,a){return new tw(e,t,o,a)}function Sl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tr(e,t){var o=e.alternate;return o===null?(o=bn(e.tag,t,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=t,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&65011712,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,t=e.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function Ah(e,t){e.flags&=65011714;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,t=o.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function na(e,t,o,a,u,f){var v=0;if(a=e,typeof e=="function")Sl(e)&&(v=1);else if(typeof e=="string")v=sT(e,o,b.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Ee:return e=bn(31,o,t,u),e.elementType=Ee,e.lanes=f,e;case re:return oi(o.children,u,f,t);case X:v=8,u|=24;break;case ve:return e=bn(12,o,t,u|2),e.elementType=ve,e.lanes=f,e;case ae:return e=bn(13,o,t,u),e.elementType=ae,e.lanes=f,e;case le:return e=bn(19,o,t,u),e.elementType=le,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case oe:v=10;break e;case pe:v=9;break e;case ee:v=11;break e;case ne:v=14;break e;case Re:v=16,a=null;break e}v=29,o=Error(s(130,e===null?"null":typeof e,"")),a=null}return t=bn(v,o,t,u),t.elementType=e,t.type=a,t.lanes=f,t}function oi(e,t,o,a){return e=bn(7,e,a,t),e.lanes=o,e}function wl(e,t,o){return e=bn(6,e,null,t),e.lanes=o,e}function kh(e){var t=bn(18,null,null,0);return t.stateNode=e,t}function Tl(e,t,o){return t=bn(4,e.children!==null?e.children:[],e.key,t),t.lanes=o,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Nh=new WeakMap;function Nn(e,t){if(typeof e=="object"&&e!==null){var o=Nh.get(e);return o!==void 0?o:(t={value:e,source:t,stack:W(t)},Nh.set(e,t),t)}return{value:e,source:t,stack:W(t)}}var qi=[],$i=0,ra=null,Ho=0,On=[],Mn=0,Tr=null,Gn=1,Fn="";function nr(e,t){qi[$i++]=Ho,qi[$i++]=ra,ra=e,Ho=t}function Oh(e,t,o){On[Mn++]=Gn,On[Mn++]=Fn,On[Mn++]=Tr,Tr=e;var a=Gn;e=Fn;var u=32-ze(a)-1;a&=~(1<<u),o+=1;var f=32-ze(t)+u;if(30<f){var v=u-u%5;f=(a&(1<<v)-1).toString(32),a>>=v,u-=v,Gn=1<<32-ze(t)+u|o<<u|a,Fn=f+e}else Gn=1<<f|o<<u|a,Fn=e}function Cl(e){e.return!==null&&(nr(e,1),Oh(e,1,0))}function Rl(e){for(;e===ra;)ra=qi[--$i],qi[$i]=null,Ho=qi[--$i],qi[$i]=null;for(;e===Tr;)Tr=On[--Mn],On[Mn]=null,Fn=On[--Mn],On[Mn]=null,Gn=On[--Mn],On[Mn]=null}function Mh(e,t){On[Mn++]=Gn,On[Mn++]=Fn,On[Mn++]=Tr,Gn=t.id,Fn=t.overflow,Tr=e}var qt=null,gt=null,rt=!1,Cr=null,jn=!1,xl=Error(s(519));function Rr(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw qo(Nn(t,e)),xl}function jh(e){var t=e.stateNode,o=e.type,a=e.memoizedProps;switch(t[Ht]=e,t[an]=a,o){case"dialog":Ze("cancel",t),Ze("close",t);break;case"iframe":case"object":case"embed":Ze("load",t);break;case"video":case"audio":for(o=0;o<us.length;o++)Ze(us[o],t);break;case"source":Ze("error",t);break;case"img":case"image":case"link":Ze("error",t),Ze("load",t);break;case"details":Ze("toggle",t);break;case"input":Ze("invalid",t),Ff(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":Ze("invalid",t);break;case"textarea":Ze("invalid",t),Yf(t,a.value,a.defaultValue,a.children)}o=a.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||t.textContent===""+o||a.suppressHydrationWarning===!0||Km(t.textContent,o)?(a.popover!=null&&(Ze("beforetoggle",t),Ze("toggle",t)),a.onScroll!=null&&Ze("scroll",t),a.onScrollEnd!=null&&Ze("scrollend",t),a.onClick!=null&&(t.onclick=Zn),t=!0):t=!1,t||Rr(e,!0)}function Uh(e){for(qt=e.return;qt;)switch(qt.tag){case 5:case 31:case 13:jn=!1;return;case 27:case 3:jn=!0;return;default:qt=qt.return}}function Vi(e){if(e!==qt)return!1;if(!rt)return Uh(e),rt=!0,!1;var t=e.tag,o;if((o=t!==3&&t!==27)&&((o=t===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||$u(e.type,e.memoizedProps)),o=!o),o&&gt&&Rr(e),Uh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));gt=og(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));gt=og(e)}else t===27?(t=gt,zr(e.type)?(e=Yu,Yu=null,gt=e):gt=t):gt=qt?Dn(e.stateNode.nextSibling):null;return!0}function si(){gt=qt=null,rt=!1}function El(){var e=Cr;return e!==null&&(fn===null?fn=e:fn.push.apply(fn,e),Cr=null),e}function qo(e){Cr===null?Cr=[e]:Cr.push(e)}var _l=R(null),ai=null,rr=null;function xr(e,t,o){x(_l,t._currentValue),t._currentValue=o}function ir(e){e._currentValue=_l.current,D(_l)}function Al(e,t,o){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===o)break;e=e.return}}function kl(e,t,o,a){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var f=u.dependencies;if(f!==null){var v=u.child;f=f.firstContext;e:for(;f!==null;){var _=f;f=u;for(var G=0;G<t.length;G++)if(_.context===t[G]){f.lanes|=o,_=f.alternate,_!==null&&(_.lanes|=o),Al(f.return,o,e),a||(v=null);break e}f=_.next}}else if(u.tag===18){if(v=u.return,v===null)throw Error(s(341));v.lanes|=o,f=v.alternate,f!==null&&(f.lanes|=o),Al(v,o,e),v=null}else v=u.child;if(v!==null)v.return=u;else for(v=u;v!==null;){if(v===e){v=null;break}if(u=v.sibling,u!==null){u.return=v.return,v=u;break}v=v.return}u=v}}function Gi(e,t,o,a){e=null;for(var u=t,f=!1;u!==null;){if(!f){if((u.flags&524288)!==0)f=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var v=u.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var _=u.type;vn(u.pendingProps.value,v.value)||(e!==null?e.push(_):e=[_])}}else if(u===N.current){if(v=u.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(ms):e=[ms])}u=u.return}e!==null&&kl(t,e,o,a),t.flags|=262144}function ia(e){for(e=e.firstContext;e!==null;){if(!vn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ci(e){ai=e,rr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function $t(e){return Dh(ai,e)}function oa(e,t){return ai===null&&ci(e),Dh(e,t)}function Dh(e,t){var o=t._currentValue;if(t={context:t,memoizedValue:o,next:null},rr===null){if(e===null)throw Error(s(308));rr=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else rr=rr.next=t;return o}var nw=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(o,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(o){return o()})}},rw=r.unstable_scheduleCallback,iw=r.unstable_NormalPriority,At={$$typeof:oe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nl(){return{controller:new nw,data:new Map,refCount:0}}function $o(e){e.refCount--,e.refCount===0&&rw(iw,function(){e.controller.abort()})}var Vo=null,Ol=0,Fi=0,Xi=null;function ow(e,t){if(Vo===null){var o=Vo=[];Ol=0,Fi=Uu(),Xi={status:"pending",value:void 0,then:function(a){o.push(a)}}}return Ol++,t.then(Ph,Ph),t}function Ph(){if(--Ol===0&&Vo!==null){Xi!==null&&(Xi.status="fulfilled");var e=Vo;Vo=null,Fi=0,Xi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function sw(e,t){var o=[],a={status:"pending",value:null,reason:null,then:function(u){o.push(u)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var u=0;u<o.length;u++)(0,o[u])(t)},function(u){for(a.status="rejected",a.reason=u,u=0;u<o.length;u++)(0,o[u])(void 0)}),a}var Ih=$.S;$.S=function(e,t){Sm=qe(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&ow(e,t),Ih!==null&&Ih(e,t)};var li=R(null);function Ml(){var e=li.current;return e!==null?e:mt.pooledCache}function sa(e,t){t===null?x(li,li.current):x(li,t.pool)}function zh(){var e=Ml();return e===null?null:{parent:At._currentValue,pool:e}}var Yi=Error(s(460)),jl=Error(s(474)),aa=Error(s(542)),ca={then:function(){}};function Lh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Bh(e,t,o){switch(o=e[o],o===void 0?e.push(t):o!==t&&(t.then(Zn,Zn),t=o),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,qh(e),e;default:if(typeof t.status=="string")t.then(Zn,Zn);else{if(e=mt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var u=t;u.status="fulfilled",u.value=a}},function(a){if(t.status==="pending"){var u=t;u.status="rejected",u.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,qh(e),e}throw di=t,Yi}}function ui(e){try{var t=e._init;return t(e._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(di=o,Yi):o}}var di=null;function Hh(){if(di===null)throw Error(s(459));var e=di;return di=null,e}function qh(e){if(e===Yi||e===aa)throw Error(s(483))}var Ji=null,Go=0;function la(e){var t=Go;return Go+=1,Ji===null&&(Ji=[]),Bh(Ji,e,t)}function Fo(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ua(e,t){throw t.$$typeof===I?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function $h(e){function t(ce,Q){if(e){var de=ce.deletions;de===null?(ce.deletions=[Q],ce.flags|=16):de.push(Q)}}function o(ce,Q){if(!e)return null;for(;Q!==null;)t(ce,Q),Q=Q.sibling;return null}function a(ce){for(var Q=new Map;ce!==null;)ce.key!==null?Q.set(ce.key,ce):Q.set(ce.index,ce),ce=ce.sibling;return Q}function u(ce,Q){return ce=tr(ce,Q),ce.index=0,ce.sibling=null,ce}function f(ce,Q,de){return ce.index=de,e?(de=ce.alternate,de!==null?(de=de.index,de<Q?(ce.flags|=67108866,Q):de):(ce.flags|=67108866,Q)):(ce.flags|=1048576,Q)}function v(ce){return e&&ce.alternate===null&&(ce.flags|=67108866),ce}function _(ce,Q,de,Se){return Q===null||Q.tag!==6?(Q=wl(de,ce.mode,Se),Q.return=ce,Q):(Q=u(Q,de),Q.return=ce,Q)}function G(ce,Q,de,Se){var Be=de.type;return Be===re?be(ce,Q,de.props.children,Se,de.key):Q!==null&&(Q.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===Re&&ui(Be)===Q.type)?(Q=u(Q,de.props),Fo(Q,de),Q.return=ce,Q):(Q=na(de.type,de.key,de.props,null,ce.mode,Se),Fo(Q,de),Q.return=ce,Q)}function fe(ce,Q,de,Se){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==de.containerInfo||Q.stateNode.implementation!==de.implementation?(Q=Tl(de,ce.mode,Se),Q.return=ce,Q):(Q=u(Q,de.children||[]),Q.return=ce,Q)}function be(ce,Q,de,Se,Be){return Q===null||Q.tag!==7?(Q=oi(de,ce.mode,Se,Be),Q.return=ce,Q):(Q=u(Q,de),Q.return=ce,Q)}function Ce(ce,Q,de){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=wl(""+Q,ce.mode,de),Q.return=ce,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case F:return de=na(Q.type,Q.key,Q.props,null,ce.mode,de),Fo(de,Q),de.return=ce,de;case U:return Q=Tl(Q,ce.mode,de),Q.return=ce,Q;case Re:return Q=ui(Q),Ce(ce,Q,de)}if(De(Q)||Ve(Q))return Q=oi(Q,ce.mode,de,null),Q.return=ce,Q;if(typeof Q.then=="function")return Ce(ce,la(Q),de);if(Q.$$typeof===oe)return Ce(ce,oa(ce,Q),de);ua(ce,Q)}return null}function he(ce,Q,de,Se){var Be=Q!==null?Q.key:null;if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Be!==null?null:_(ce,Q,""+de,Se);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case F:return de.key===Be?G(ce,Q,de,Se):null;case U:return de.key===Be?fe(ce,Q,de,Se):null;case Re:return de=ui(de),he(ce,Q,de,Se)}if(De(de)||Ve(de))return Be!==null?null:be(ce,Q,de,Se,null);if(typeof de.then=="function")return he(ce,Q,la(de),Se);if(de.$$typeof===oe)return he(ce,Q,oa(ce,de),Se);ua(ce,de)}return null}function ge(ce,Q,de,Se,Be){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return ce=ce.get(de)||null,_(Q,ce,""+Se,Be);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case F:return ce=ce.get(Se.key===null?de:Se.key)||null,G(Q,ce,Se,Be);case U:return ce=ce.get(Se.key===null?de:Se.key)||null,fe(Q,ce,Se,Be);case Re:return Se=ui(Se),ge(ce,Q,de,Se,Be)}if(De(Se)||Ve(Se))return ce=ce.get(de)||null,be(Q,ce,Se,Be,null);if(typeof Se.then=="function")return ge(ce,Q,de,la(Se),Be);if(Se.$$typeof===oe)return ge(ce,Q,de,oa(Q,Se),Be);ua(Q,Se)}return null}function Pe(ce,Q,de,Se){for(var Be=null,it=null,Le=Q,Je=Q=0,nt=null;Le!==null&&Je<de.length;Je++){Le.index>Je?(nt=Le,Le=null):nt=Le.sibling;var ot=he(ce,Le,de[Je],Se);if(ot===null){Le===null&&(Le=nt);break}e&&Le&&ot.alternate===null&&t(ce,Le),Q=f(ot,Q,Je),it===null?Be=ot:it.sibling=ot,it=ot,Le=nt}if(Je===de.length)return o(ce,Le),rt&&nr(ce,Je),Be;if(Le===null){for(;Je<de.length;Je++)Le=Ce(ce,de[Je],Se),Le!==null&&(Q=f(Le,Q,Je),it===null?Be=Le:it.sibling=Le,it=Le);return rt&&nr(ce,Je),Be}for(Le=a(Le);Je<de.length;Je++)nt=ge(Le,ce,Je,de[Je],Se),nt!==null&&(e&&nt.alternate!==null&&Le.delete(nt.key===null?Je:nt.key),Q=f(nt,Q,Je),it===null?Be=nt:it.sibling=nt,it=nt);return e&&Le.forEach(function($r){return t(ce,$r)}),rt&&nr(ce,Je),Be}function $e(ce,Q,de,Se){if(de==null)throw Error(s(151));for(var Be=null,it=null,Le=Q,Je=Q=0,nt=null,ot=de.next();Le!==null&&!ot.done;Je++,ot=de.next()){Le.index>Je?(nt=Le,Le=null):nt=Le.sibling;var $r=he(ce,Le,ot.value,Se);if($r===null){Le===null&&(Le=nt);break}e&&Le&&$r.alternate===null&&t(ce,Le),Q=f($r,Q,Je),it===null?Be=$r:it.sibling=$r,it=$r,Le=nt}if(ot.done)return o(ce,Le),rt&&nr(ce,Je),Be;if(Le===null){for(;!ot.done;Je++,ot=de.next())ot=Ce(ce,ot.value,Se),ot!==null&&(Q=f(ot,Q,Je),it===null?Be=ot:it.sibling=ot,it=ot);return rt&&nr(ce,Je),Be}for(Le=a(Le);!ot.done;Je++,ot=de.next())ot=ge(Le,ce,Je,ot.value,Se),ot!==null&&(e&&ot.alternate!==null&&Le.delete(ot.key===null?Je:ot.key),Q=f(ot,Q,Je),it===null?Be=ot:it.sibling=ot,it=ot);return e&&Le.forEach(function(yT){return t(ce,yT)}),rt&&nr(ce,Je),Be}function pt(ce,Q,de,Se){if(typeof de=="object"&&de!==null&&de.type===re&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case F:e:{for(var Be=de.key;Q!==null;){if(Q.key===Be){if(Be=de.type,Be===re){if(Q.tag===7){o(ce,Q.sibling),Se=u(Q,de.props.children),Se.return=ce,ce=Se;break e}}else if(Q.elementType===Be||typeof Be=="object"&&Be!==null&&Be.$$typeof===Re&&ui(Be)===Q.type){o(ce,Q.sibling),Se=u(Q,de.props),Fo(Se,de),Se.return=ce,ce=Se;break e}o(ce,Q);break}else t(ce,Q);Q=Q.sibling}de.type===re?(Se=oi(de.props.children,ce.mode,Se,de.key),Se.return=ce,ce=Se):(Se=na(de.type,de.key,de.props,null,ce.mode,Se),Fo(Se,de),Se.return=ce,ce=Se)}return v(ce);case U:e:{for(Be=de.key;Q!==null;){if(Q.key===Be)if(Q.tag===4&&Q.stateNode.containerInfo===de.containerInfo&&Q.stateNode.implementation===de.implementation){o(ce,Q.sibling),Se=u(Q,de.children||[]),Se.return=ce,ce=Se;break e}else{o(ce,Q);break}else t(ce,Q);Q=Q.sibling}Se=Tl(de,ce.mode,Se),Se.return=ce,ce=Se}return v(ce);case Re:return de=ui(de),pt(ce,Q,de,Se)}if(De(de))return Pe(ce,Q,de,Se);if(Ve(de)){if(Be=Ve(de),typeof Be!="function")throw Error(s(150));return de=Be.call(de),$e(ce,Q,de,Se)}if(typeof de.then=="function")return pt(ce,Q,la(de),Se);if(de.$$typeof===oe)return pt(ce,Q,oa(ce,de),Se);ua(ce,de)}return typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint"?(de=""+de,Q!==null&&Q.tag===6?(o(ce,Q.sibling),Se=u(Q,de),Se.return=ce,ce=Se):(o(ce,Q),Se=wl(de,ce.mode,Se),Se.return=ce,ce=Se),v(ce)):o(ce,Q)}return function(ce,Q,de,Se){try{Go=0;var Be=pt(ce,Q,de,Se);return Ji=null,Be}catch(Le){if(Le===Yi||Le===aa)throw Le;var it=bn(29,Le,null,ce.mode);return it.lanes=Se,it.return=ce,it}}}var fi=$h(!0),Vh=$h(!1),Er=!1;function Ul(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Dl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function _r(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ar(e,t,o){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(at&2)!==0){var u=a.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),a.pending=t,t=ta(e),_h(e,null,o),t}return ea(e,a,t,o),ta(e)}function Xo(e,t,o){if(t=t.updateQueue,t!==null&&(t=t.shared,(o&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,o|=a,t.lanes=o,Df(e,o)}}function Pl(e,t){var o=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,o===a)){var u=null,f=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};f===null?u=f=v:f=f.next=v,o=o.next}while(o!==null);f===null?u=f=t:f=f.next=t}else u=f=t;o={baseState:a.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:a.shared,callbacks:a.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=t:e.next=t,o.lastBaseUpdate=t}var Il=!1;function Yo(){if(Il){var e=Xi;if(e!==null)throw e}}function Jo(e,t,o,a){Il=!1;var u=e.updateQueue;Er=!1;var f=u.firstBaseUpdate,v=u.lastBaseUpdate,_=u.shared.pending;if(_!==null){u.shared.pending=null;var G=_,fe=G.next;G.next=null,v===null?f=fe:v.next=fe,v=G;var be=e.alternate;be!==null&&(be=be.updateQueue,_=be.lastBaseUpdate,_!==v&&(_===null?be.firstBaseUpdate=fe:_.next=fe,be.lastBaseUpdate=G))}if(f!==null){var Ce=u.baseState;v=0,be=fe=G=null,_=f;do{var he=_.lane&-536870913,ge=he!==_.lane;if(ge?(tt&he)===he:(a&he)===he){he!==0&&he===Fi&&(Il=!0),be!==null&&(be=be.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var Pe=e,$e=_;he=t;var pt=o;switch($e.tag){case 1:if(Pe=$e.payload,typeof Pe=="function"){Ce=Pe.call(pt,Ce,he);break e}Ce=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=$e.payload,he=typeof Pe=="function"?Pe.call(pt,Ce,he):Pe,he==null)break e;Ce=E({},Ce,he);break e;case 2:Er=!0}}he=_.callback,he!==null&&(e.flags|=64,ge&&(e.flags|=8192),ge=u.callbacks,ge===null?u.callbacks=[he]:ge.push(he))}else ge={lane:he,tag:_.tag,payload:_.payload,callback:_.callback,next:null},be===null?(fe=be=ge,G=Ce):be=be.next=ge,v|=he;if(_=_.next,_===null){if(_=u.shared.pending,_===null)break;ge=_,_=ge.next,ge.next=null,u.lastBaseUpdate=ge,u.shared.pending=null}}while(!0);be===null&&(G=Ce),u.baseState=G,u.firstBaseUpdate=fe,u.lastBaseUpdate=be,f===null&&(u.shared.lanes=0),jr|=v,e.lanes=v,e.memoizedState=Ce}}function Gh(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function Fh(e,t){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)Gh(o[e],t)}var Ki=R(null),da=R(0);function Xh(e,t){e=hr,x(da,e),x(Ki,t),hr=e|t.baseLanes}function zl(){x(da,hr),x(Ki,Ki.current)}function Ll(){hr=da.current,D(Ki),D(da)}var Sn=R(null),Un=null;function kr(e){var t=e.alternate;x(xt,xt.current&1),x(Sn,e),Un===null&&(t===null||Ki.current!==null||t.memoizedState!==null)&&(Un=e)}function Bl(e){x(xt,xt.current),x(Sn,e),Un===null&&(Un=e)}function Yh(e){e.tag===22?(x(xt,xt.current),x(Sn,e),Un===null&&(Un=e)):Nr()}function Nr(){x(xt,xt.current),x(Sn,Sn.current)}function wn(e){D(Sn),Un===e&&(Un=null),D(xt)}var xt=R(0);function fa(e){for(var t=e;t!==null;){if(t.tag===13){var o=t.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Fu(o)||Xu(o)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var or=0,Xe=null,ft=null,kt=null,ha=!1,Qi=!1,hi=!1,pa=0,Ko=0,Wi=null,aw=0;function Tt(){throw Error(s(321))}function Hl(e,t){if(t===null)return!1;for(var o=0;o<t.length&&o<e.length;o++)if(!vn(e[o],t[o]))return!1;return!0}function ql(e,t,o,a,u,f){return or=f,Xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$.H=e===null||e.memoizedState===null?Op:ru,hi=!1,f=o(a,u),hi=!1,Qi&&(f=Kh(t,o,a,u)),Jh(e),f}function Jh(e){$.H=Zo;var t=ft!==null&&ft.next!==null;if(or=0,kt=ft=Xe=null,ha=!1,Ko=0,Wi=null,t)throw Error(s(300));e===null||Nt||(e=e.dependencies,e!==null&&ia(e)&&(Nt=!0))}function Kh(e,t,o,a){Xe=e;var u=0;do{if(Qi&&(Wi=null),Ko=0,Qi=!1,25<=u)throw Error(s(301));if(u+=1,kt=ft=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}$.H=Mp,f=t(o,a)}while(Qi);return f}function cw(){var e=$.H,t=e.useState()[0];return t=typeof t.then=="function"?Qo(t):t,e=e.useState()[0],(ft!==null?ft.memoizedState:null)!==e&&(Xe.flags|=1024),t}function $l(){var e=pa!==0;return pa=0,e}function Vl(e,t,o){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o}function Gl(e){if(ha){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ha=!1}or=0,kt=ft=Xe=null,Qi=!1,Ko=pa=0,Wi=null}function sn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Xe.memoizedState=kt=e:kt=kt.next=e,kt}function Et(){if(ft===null){var e=Xe.alternate;e=e!==null?e.memoizedState:null}else e=ft.next;var t=kt===null?Xe.memoizedState:kt.next;if(t!==null)kt=t,ft=e;else{if(e===null)throw Xe.alternate===null?Error(s(467)):Error(s(310));ft=e,e={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},kt===null?Xe.memoizedState=kt=e:kt=kt.next=e}return kt}function ma(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qo(e){var t=Ko;return Ko+=1,Wi===null&&(Wi=[]),e=Bh(Wi,e,t),t=Xe,(kt===null?t.memoizedState:kt.next)===null&&(t=t.alternate,$.H=t===null||t.memoizedState===null?Op:ru),e}function ga(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Qo(e);if(e.$$typeof===oe)return $t(e)}throw Error(s(438,String(e)))}function Fl(e){var t=null,o=Xe.updateQueue;if(o!==null&&(t=o.memoCache),t==null){var a=Xe.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(u){return u.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),o===null&&(o=ma(),Xe.updateQueue=o),o.memoCache=t,o=t.data[t.index],o===void 0)for(o=t.data[t.index]=Array(e),a=0;a<e;a++)o[a]=Ae;return t.index++,o}function sr(e,t){return typeof t=="function"?t(e):t}function ya(e){var t=Et();return Xl(t,ft,e)}function Xl(e,t,o){var a=e.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=o;var u=e.baseQueue,f=a.pending;if(f!==null){if(u!==null){var v=u.next;u.next=f.next,f.next=v}t.baseQueue=u=f,a.pending=null}if(f=e.baseState,u===null)e.memoizedState=f;else{t=u.next;var _=v=null,G=null,fe=t,be=!1;do{var Ce=fe.lane&-536870913;if(Ce!==fe.lane?(tt&Ce)===Ce:(or&Ce)===Ce){var he=fe.revertLane;if(he===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),Ce===Fi&&(be=!0);else if((or&he)===he){fe=fe.next,he===Fi&&(be=!0);continue}else Ce={lane:0,revertLane:fe.revertLane,gesture:null,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},G===null?(_=G=Ce,v=f):G=G.next=Ce,Xe.lanes|=he,jr|=he;Ce=fe.action,hi&&o(f,Ce),f=fe.hasEagerState?fe.eagerState:o(f,Ce)}else he={lane:Ce,revertLane:fe.revertLane,gesture:fe.gesture,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null},G===null?(_=G=he,v=f):G=G.next=he,Xe.lanes|=Ce,jr|=Ce;fe=fe.next}while(fe!==null&&fe!==t);if(G===null?v=f:G.next=_,!vn(f,e.memoizedState)&&(Nt=!0,be&&(o=Xi,o!==null)))throw o;e.memoizedState=f,e.baseState=v,e.baseQueue=G,a.lastRenderedState=f}return u===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Yl(e){var t=Et(),o=t.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=e;var a=o.dispatch,u=o.pending,f=t.memoizedState;if(u!==null){o.pending=null;var v=u=u.next;do f=e(f,v.action),v=v.next;while(v!==u);vn(f,t.memoizedState)||(Nt=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),o.lastRenderedState=f}return[f,a]}function Qh(e,t,o){var a=Xe,u=Et(),f=rt;if(f){if(o===void 0)throw Error(s(407));o=o()}else o=t();var v=!vn((ft||u).memoizedState,o);if(v&&(u.memoizedState=o,Nt=!0),u=u.queue,Ql(ep.bind(null,a,u,e),[e]),u.getSnapshot!==t||v||kt!==null&&kt.memoizedState.tag&1){if(a.flags|=2048,Zi(9,{destroy:void 0},Zh.bind(null,a,u,o,t),null),mt===null)throw Error(s(349));f||(or&127)!==0||Wh(a,t,o)}return o}function Wh(e,t,o){e.flags|=16384,e={getSnapshot:t,value:o},t=Xe.updateQueue,t===null?(t=ma(),Xe.updateQueue=t,t.stores=[e]):(o=t.stores,o===null?t.stores=[e]:o.push(e))}function Zh(e,t,o,a){t.value=o,t.getSnapshot=a,tp(t)&&np(e)}function ep(e,t,o){return o(function(){tp(t)&&np(e)})}function tp(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!vn(e,o)}catch{return!0}}function np(e){var t=ii(e,2);t!==null&&hn(t,e,2)}function Jl(e){var t=sn();if(typeof e=="function"){var o=e;if(e=o(),hi){Ue(!0);try{o()}finally{Ue(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sr,lastRenderedState:e},t}function rp(e,t,o,a){return e.baseState=o,Xl(e,ft,typeof a=="function"?a:sr)}function lw(e,t,o,a,u){if(Sa(e))throw Error(s(485));if(e=t.action,e!==null){var f={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};$.T!==null?o(!0):f.isTransition=!1,a(f),o=t.pending,o===null?(f.next=t.pending=f,ip(t,f)):(f.next=o.next,t.pending=o.next=f)}}function ip(e,t){var o=t.action,a=t.payload,u=e.state;if(t.isTransition){var f=$.T,v={};$.T=v;try{var _=o(u,a),G=$.S;G!==null&&G(v,_),op(e,t,_)}catch(fe){Kl(e,t,fe)}finally{f!==null&&v.types!==null&&(f.types=v.types),$.T=f}}else try{f=o(u,a),op(e,t,f)}catch(fe){Kl(e,t,fe)}}function op(e,t,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(a){sp(e,t,a)},function(a){return Kl(e,t,a)}):sp(e,t,o)}function sp(e,t,o){t.status="fulfilled",t.value=o,ap(t),e.state=o,t=e.pending,t!==null&&(o=t.next,o===t?e.pending=null:(o=o.next,t.next=o,ip(e,o)))}function Kl(e,t,o){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=o,ap(t),t=t.next;while(t!==a)}e.action=null}function ap(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function cp(e,t){return t}function lp(e,t){if(rt){var o=mt.formState;if(o!==null){e:{var a=Xe;if(rt){if(gt){t:{for(var u=gt,f=jn;u.nodeType!==8;){if(!f){u=null;break t}if(u=Dn(u.nextSibling),u===null){u=null;break t}}f=u.data,u=f==="F!"||f==="F"?u:null}if(u){gt=Dn(u.nextSibling),a=u.data==="F!";break e}}Rr(a)}a=!1}a&&(t=o[0])}}return o=sn(),o.memoizedState=o.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cp,lastRenderedState:t},o.queue=a,o=Ap.bind(null,Xe,a),a.dispatch=o,a=Jl(!1),f=nu.bind(null,Xe,!1,a.queue),a=sn(),u={state:t,dispatch:null,action:e,pending:null},a.queue=u,o=lw.bind(null,Xe,u,f,o),u.dispatch=o,a.memoizedState=e,[t,o,!1]}function up(e){var t=Et();return dp(t,ft,e)}function dp(e,t,o){if(t=Xl(e,t,cp)[0],e=ya(sr)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=Qo(t)}catch(v){throw v===Yi?aa:v}else a=t;t=Et();var u=t.queue,f=u.dispatch;return o!==t.memoizedState&&(Xe.flags|=2048,Zi(9,{destroy:void 0},uw.bind(null,u,o),null)),[a,f,e]}function uw(e,t){e.action=t}function fp(e){var t=Et(),o=ft;if(o!==null)return dp(t,o,e);Et(),t=t.memoizedState,o=Et();var a=o.queue.dispatch;return o.memoizedState=e,[t,a,!1]}function Zi(e,t,o,a){return e={tag:e,create:o,deps:a,inst:t,next:null},t=Xe.updateQueue,t===null&&(t=ma(),Xe.updateQueue=t),o=t.lastEffect,o===null?t.lastEffect=e.next=e:(a=o.next,o.next=e,e.next=a,t.lastEffect=e),e}function hp(){return Et().memoizedState}function va(e,t,o,a){var u=sn();Xe.flags|=e,u.memoizedState=Zi(1|t,{destroy:void 0},o,a===void 0?null:a)}function ba(e,t,o,a){var u=Et();a=a===void 0?null:a;var f=u.memoizedState.inst;ft!==null&&a!==null&&Hl(a,ft.memoizedState.deps)?u.memoizedState=Zi(t,f,o,a):(Xe.flags|=e,u.memoizedState=Zi(1|t,f,o,a))}function pp(e,t){va(8390656,8,e,t)}function Ql(e,t){ba(2048,8,e,t)}function dw(e){Xe.flags|=4;var t=Xe.updateQueue;if(t===null)t=ma(),Xe.updateQueue=t,t.events=[e];else{var o=t.events;o===null?t.events=[e]:o.push(e)}}function mp(e){var t=Et().memoizedState;return dw({ref:t,nextImpl:e}),function(){if((at&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function gp(e,t){return ba(4,2,e,t)}function yp(e,t){return ba(4,4,e,t)}function vp(e,t){if(typeof t=="function"){e=e();var o=t(e);return function(){typeof o=="function"?o():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function bp(e,t,o){o=o!=null?o.concat([e]):null,ba(4,4,vp.bind(null,t,e),o)}function Wl(){}function Sp(e,t){var o=Et();t=t===void 0?null:t;var a=o.memoizedState;return t!==null&&Hl(t,a[1])?a[0]:(o.memoizedState=[e,t],e)}function wp(e,t){var o=Et();t=t===void 0?null:t;var a=o.memoizedState;if(t!==null&&Hl(t,a[1]))return a[0];if(a=e(),hi){Ue(!0);try{e()}finally{Ue(!1)}}return o.memoizedState=[a,t],a}function Zl(e,t,o){return o===void 0||(or&1073741824)!==0&&(tt&261930)===0?e.memoizedState=t:(e.memoizedState=o,e=Tm(),Xe.lanes|=e,jr|=e,o)}function Tp(e,t,o,a){return vn(o,t)?o:Ki.current!==null?(e=Zl(e,o,a),vn(e,t)||(Nt=!0),e):(or&42)===0||(or&1073741824)!==0&&(tt&261930)===0?(Nt=!0,e.memoizedState=o):(e=Tm(),Xe.lanes|=e,jr|=e,t)}function Cp(e,t,o,a,u){var f=M.p;M.p=f!==0&&8>f?f:8;var v=$.T,_={};$.T=_,nu(e,!1,t,o);try{var G=u(),fe=$.S;if(fe!==null&&fe(_,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var be=sw(G,a);Wo(e,t,be,Rn(e))}else Wo(e,t,a,Rn(e))}catch(Ce){Wo(e,t,{then:function(){},status:"rejected",reason:Ce},Rn())}finally{M.p=f,v!==null&&_.types!==null&&(v.types=_.types),$.T=v}}function fw(){}function eu(e,t,o,a){if(e.tag!==5)throw Error(s(476));var u=Rp(e).queue;Cp(e,u,t,Y,o===null?fw:function(){return xp(e),o(a)})}function Rp(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sr,lastRenderedState:Y},next:null};var o={};return t.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sr,lastRenderedState:o},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function xp(e){var t=Rp(e);t.next===null&&(t=e.alternate.memoizedState),Wo(e,t.next.queue,{},Rn())}function tu(){return $t(ms)}function Ep(){return Et().memoizedState}function _p(){return Et().memoizedState}function hw(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var o=Rn();e=_r(o);var a=Ar(t,e,o);a!==null&&(hn(a,t,o),Xo(a,t,o)),t={cache:Nl()},e.payload=t;return}t=t.return}}function pw(e,t,o){var a=Rn();o={lane:a,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Sa(e)?kp(t,o):(o=bl(e,t,o,a),o!==null&&(hn(o,e,a),Np(o,t,a)))}function Ap(e,t,o){var a=Rn();Wo(e,t,o,a)}function Wo(e,t,o,a){var u={lane:a,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Sa(e))kp(t,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var v=t.lastRenderedState,_=f(v,o);if(u.hasEagerState=!0,u.eagerState=_,vn(_,v))return ea(e,t,u,0),mt===null&&Zs(),!1}catch{}if(o=bl(e,t,u,a),o!==null)return hn(o,e,a),Np(o,t,a),!0}return!1}function nu(e,t,o,a){if(a={lane:2,revertLane:Uu(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Sa(e)){if(t)throw Error(s(479))}else t=bl(e,o,a,2),t!==null&&hn(t,e,2)}function Sa(e){var t=e.alternate;return e===Xe||t!==null&&t===Xe}function kp(e,t){Qi=ha=!0;var o=e.pending;o===null?t.next=t:(t.next=o.next,o.next=t),e.pending=t}function Np(e,t,o){if((o&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,o|=a,t.lanes=o,Df(e,o)}}var Zo={readContext:$t,use:ga,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt};Zo.useEffectEvent=Tt;var Op={readContext:$t,use:ga,useCallback:function(e,t){return sn().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:pp,useImperativeHandle:function(e,t,o){o=o!=null?o.concat([e]):null,va(4194308,4,vp.bind(null,t,e),o)},useLayoutEffect:function(e,t){return va(4194308,4,e,t)},useInsertionEffect:function(e,t){va(4,2,e,t)},useMemo:function(e,t){var o=sn();t=t===void 0?null:t;var a=e();if(hi){Ue(!0);try{e()}finally{Ue(!1)}}return o.memoizedState=[a,t],a},useReducer:function(e,t,o){var a=sn();if(o!==void 0){var u=o(t);if(hi){Ue(!0);try{o(t)}finally{Ue(!1)}}}else u=t;return a.memoizedState=a.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},a.queue=e,e=e.dispatch=pw.bind(null,Xe,e),[a.memoizedState,e]},useRef:function(e){var t=sn();return e={current:e},t.memoizedState=e},useState:function(e){e=Jl(e);var t=e.queue,o=Ap.bind(null,Xe,t);return t.dispatch=o,[e.memoizedState,o]},useDebugValue:Wl,useDeferredValue:function(e,t){var o=sn();return Zl(o,e,t)},useTransition:function(){var e=Jl(!1);return e=Cp.bind(null,Xe,e.queue,!0,!1),sn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,o){var a=Xe,u=sn();if(rt){if(o===void 0)throw Error(s(407));o=o()}else{if(o=t(),mt===null)throw Error(s(349));(tt&127)!==0||Wh(a,t,o)}u.memoizedState=o;var f={value:o,getSnapshot:t};return u.queue=f,pp(ep.bind(null,a,f,e),[e]),a.flags|=2048,Zi(9,{destroy:void 0},Zh.bind(null,a,f,o,t),null),o},useId:function(){var e=sn(),t=mt.identifierPrefix;if(rt){var o=Fn,a=Gn;o=(a&~(1<<32-ze(a)-1)).toString(32)+o,t="_"+t+"R_"+o,o=pa++,0<o&&(t+="H"+o.toString(32)),t+="_"}else o=aw++,t="_"+t+"r_"+o.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:tu,useFormState:lp,useActionState:lp,useOptimistic:function(e){var t=sn();t.memoizedState=t.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=o,t=nu.bind(null,Xe,!0,o),o.dispatch=t,[e,t]},useMemoCache:Fl,useCacheRefresh:function(){return sn().memoizedState=hw.bind(null,Xe)},useEffectEvent:function(e){var t=sn(),o={impl:e};return t.memoizedState=o,function(){if((at&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},ru={readContext:$t,use:ga,useCallback:Sp,useContext:$t,useEffect:Ql,useImperativeHandle:bp,useInsertionEffect:gp,useLayoutEffect:yp,useMemo:wp,useReducer:ya,useRef:hp,useState:function(){return ya(sr)},useDebugValue:Wl,useDeferredValue:function(e,t){var o=Et();return Tp(o,ft.memoizedState,e,t)},useTransition:function(){var e=ya(sr)[0],t=Et().memoizedState;return[typeof e=="boolean"?e:Qo(e),t]},useSyncExternalStore:Qh,useId:Ep,useHostTransitionStatus:tu,useFormState:up,useActionState:up,useOptimistic:function(e,t){var o=Et();return rp(o,ft,e,t)},useMemoCache:Fl,useCacheRefresh:_p};ru.useEffectEvent=mp;var Mp={readContext:$t,use:ga,useCallback:Sp,useContext:$t,useEffect:Ql,useImperativeHandle:bp,useInsertionEffect:gp,useLayoutEffect:yp,useMemo:wp,useReducer:Yl,useRef:hp,useState:function(){return Yl(sr)},useDebugValue:Wl,useDeferredValue:function(e,t){var o=Et();return ft===null?Zl(o,e,t):Tp(o,ft.memoizedState,e,t)},useTransition:function(){var e=Yl(sr)[0],t=Et().memoizedState;return[typeof e=="boolean"?e:Qo(e),t]},useSyncExternalStore:Qh,useId:Ep,useHostTransitionStatus:tu,useFormState:fp,useActionState:fp,useOptimistic:function(e,t){var o=Et();return ft!==null?rp(o,ft,e,t):(o.baseState=e,[e,o.queue.dispatch])},useMemoCache:Fl,useCacheRefresh:_p};Mp.useEffectEvent=mp;function iu(e,t,o,a){t=e.memoizedState,o=o(a,t),o=o==null?t:E({},t,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var ou={enqueueSetState:function(e,t,o){e=e._reactInternals;var a=Rn(),u=_r(a);u.payload=t,o!=null&&(u.callback=o),t=Ar(e,u,a),t!==null&&(hn(t,e,a),Xo(t,e,a))},enqueueReplaceState:function(e,t,o){e=e._reactInternals;var a=Rn(),u=_r(a);u.tag=1,u.payload=t,o!=null&&(u.callback=o),t=Ar(e,u,a),t!==null&&(hn(t,e,a),Xo(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var o=Rn(),a=_r(o);a.tag=2,t!=null&&(a.callback=t),t=Ar(e,a,o),t!==null&&(hn(t,e,o),Xo(t,e,o))}};function jp(e,t,o,a,u,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,v):t.prototype&&t.prototype.isPureReactComponent?!Lo(o,a)||!Lo(u,f):!0}function Up(e,t,o,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(o,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(o,a),t.state!==e&&ou.enqueueReplaceState(t,t.state,null)}function pi(e,t){var o=t;if("ref"in t){o={};for(var a in t)a!=="ref"&&(o[a]=t[a])}if(e=e.defaultProps){o===t&&(o=E({},o));for(var u in e)o[u]===void 0&&(o[u]=e[u])}return o}function Dp(e){Ws(e)}function Pp(e){console.error(e)}function Ip(e){Ws(e)}function wa(e,t){try{var o=e.onUncaughtError;o(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function zp(e,t,o){try{var a=e.onCaughtError;a(o.value,{componentStack:o.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function su(e,t,o){return o=_r(o),o.tag=3,o.payload={element:null},o.callback=function(){wa(e,t)},o}function Lp(e){return e=_r(e),e.tag=3,e}function Bp(e,t,o,a){var u=o.type.getDerivedStateFromError;if(typeof u=="function"){var f=a.value;e.payload=function(){return u(f)},e.callback=function(){zp(t,o,a)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){zp(t,o,a),typeof u!="function"&&(Ur===null?Ur=new Set([this]):Ur.add(this));var _=a.stack;this.componentDidCatch(a.value,{componentStack:_!==null?_:""})})}function mw(e,t,o,a,u){if(o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=o.alternate,t!==null&&Gi(t,o,u,!0),o=Sn.current,o!==null){switch(o.tag){case 31:case 13:return Un===null?ja():o.alternate===null&&Ct===0&&(Ct=3),o.flags&=-257,o.flags|=65536,o.lanes=u,a===ca?o.flags|=16384:(t=o.updateQueue,t===null?o.updateQueue=new Set([a]):t.add(a),Ou(e,a,u)),!1;case 22:return o.flags|=65536,a===ca?o.flags|=16384:(t=o.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},o.updateQueue=t):(o=t.retryQueue,o===null?t.retryQueue=new Set([a]):o.add(a)),Ou(e,a,u)),!1}throw Error(s(435,o.tag))}return Ou(e,a,u),ja(),!1}if(rt)return t=Sn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=u,a!==xl&&(e=Error(s(422),{cause:a}),qo(Nn(e,o)))):(a!==xl&&(t=Error(s(423),{cause:a}),qo(Nn(t,o))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,a=Nn(a,o),u=su(e.stateNode,a,u),Pl(e,u),Ct!==4&&(Ct=2)),!1;var f=Error(s(520),{cause:a});if(f=Nn(f,o),as===null?as=[f]:as.push(f),Ct!==4&&(Ct=2),t===null)return!0;a=Nn(a,o),o=t;do{switch(o.tag){case 3:return o.flags|=65536,e=u&-u,o.lanes|=e,e=su(o.stateNode,a,e),Pl(o,e),!1;case 1:if(t=o.type,f=o.stateNode,(o.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Ur===null||!Ur.has(f))))return o.flags|=65536,u&=-u,o.lanes|=u,u=Lp(u),Bp(u,e,o,a),Pl(o,u),!1}o=o.return}while(o!==null);return!1}var au=Error(s(461)),Nt=!1;function Vt(e,t,o,a){t.child=e===null?Vh(t,null,o,a):fi(t,e.child,o,a)}function Hp(e,t,o,a,u){o=o.render;var f=t.ref;if("ref"in a){var v={};for(var _ in a)_!=="ref"&&(v[_]=a[_])}else v=a;return ci(t),a=ql(e,t,o,v,f,u),_=$l(),e!==null&&!Nt?(Vl(e,t,u),ar(e,t,u)):(rt&&_&&Cl(t),t.flags|=1,Vt(e,t,a,u),t.child)}function qp(e,t,o,a,u){if(e===null){var f=o.type;return typeof f=="function"&&!Sl(f)&&f.defaultProps===void 0&&o.compare===null?(t.tag=15,t.type=f,$p(e,t,f,a,u)):(e=na(o.type,null,a,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!mu(e,u)){var v=f.memoizedProps;if(o=o.compare,o=o!==null?o:Lo,o(v,a)&&e.ref===t.ref)return ar(e,t,u)}return t.flags|=1,e=tr(f,a),e.ref=t.ref,e.return=t,t.child=e}function $p(e,t,o,a,u){if(e!==null){var f=e.memoizedProps;if(Lo(f,a)&&e.ref===t.ref)if(Nt=!1,t.pendingProps=a=f,mu(e,u))(e.flags&131072)!==0&&(Nt=!0);else return t.lanes=e.lanes,ar(e,t,u)}return cu(e,t,o,a,u)}function Vp(e,t,o,a){var u=a.children,f=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((t.flags&128)!==0){if(f=f!==null?f.baseLanes|o:o,e!==null){for(a=t.child=e.child,u=0;a!==null;)u=u|a.lanes|a.childLanes,a=a.sibling;a=u&~f}else a=0,t.child=null;return Gp(e,t,f,o,a)}if((o&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&sa(t,f!==null?f.cachePool:null),f!==null?Xh(t,f):zl(),Yh(t);else return a=t.lanes=536870912,Gp(e,t,f!==null?f.baseLanes|o:o,o,a)}else f!==null?(sa(t,f.cachePool),Xh(t,f),Nr(),t.memoizedState=null):(e!==null&&sa(t,null),zl(),Nr());return Vt(e,t,u,o),t.child}function es(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Gp(e,t,o,a,u){var f=Ml();return f=f===null?null:{parent:At._currentValue,pool:f},t.memoizedState={baseLanes:o,cachePool:f},e!==null&&sa(t,null),zl(),Yh(t),e!==null&&Gi(e,t,a,!0),t.childLanes=u,null}function Ta(e,t){return t=Ra({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Fp(e,t,o){return fi(t,e.child,null,o),e=Ta(t,t.pendingProps),e.flags|=2,wn(t),t.memoizedState=null,e}function gw(e,t,o){var a=t.pendingProps,u=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(rt){if(a.mode==="hidden")return e=Ta(t,a),t.lanes=536870912,es(null,e);if(Bl(t),(e=gt)?(e=ig(e,jn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Tr!==null?{id:Gn,overflow:Fn}:null,retryLane:536870912,hydrationErrors:null},o=kh(e),o.return=t,t.child=o,qt=t,gt=null)):e=null,e===null)throw Rr(t);return t.lanes=536870912,null}return Ta(t,a)}var f=e.memoizedState;if(f!==null){var v=f.dehydrated;if(Bl(t),u)if(t.flags&256)t.flags&=-257,t=Fp(e,t,o);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(Nt||Gi(e,t,o,!1),u=(o&e.childLanes)!==0,Nt||u){if(a=mt,a!==null&&(v=Pf(a,o),v!==0&&v!==f.retryLane))throw f.retryLane=v,ii(e,v),hn(a,e,v),au;ja(),t=Fp(e,t,o)}else e=f.treeContext,gt=Dn(v.nextSibling),qt=t,rt=!0,Cr=null,jn=!1,e!==null&&Mh(t,e),t=Ta(t,a),t.flags|=4096;return t}return e=tr(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ca(e,t){var o=t.ref;if(o===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(e===null||e.ref!==o)&&(t.flags|=4194816)}}function cu(e,t,o,a,u){return ci(t),o=ql(e,t,o,a,void 0,u),a=$l(),e!==null&&!Nt?(Vl(e,t,u),ar(e,t,u)):(rt&&a&&Cl(t),t.flags|=1,Vt(e,t,o,u),t.child)}function Xp(e,t,o,a,u,f){return ci(t),t.updateQueue=null,o=Kh(t,a,o,u),Jh(e),a=$l(),e!==null&&!Nt?(Vl(e,t,f),ar(e,t,f)):(rt&&a&&Cl(t),t.flags|=1,Vt(e,t,o,f),t.child)}function Yp(e,t,o,a,u){if(ci(t),t.stateNode===null){var f=Hi,v=o.contextType;typeof v=="object"&&v!==null&&(f=$t(v)),f=new o(a,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=ou,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=a,f.state=t.memoizedState,f.refs={},Ul(t),v=o.contextType,f.context=typeof v=="object"&&v!==null?$t(v):Hi,f.state=t.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(iu(t,o,v,a),f.state=t.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&ou.enqueueReplaceState(f,f.state,null),Jo(t,a,f,u),Yo(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){f=t.stateNode;var _=t.memoizedProps,G=pi(o,_);f.props=G;var fe=f.context,be=o.contextType;v=Hi,typeof be=="object"&&be!==null&&(v=$t(be));var Ce=o.getDerivedStateFromProps;be=typeof Ce=="function"||typeof f.getSnapshotBeforeUpdate=="function",_=t.pendingProps!==_,be||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_||fe!==v)&&Up(t,f,a,v),Er=!1;var he=t.memoizedState;f.state=he,Jo(t,a,f,u),Yo(),fe=t.memoizedState,_||he!==fe||Er?(typeof Ce=="function"&&(iu(t,o,Ce,a),fe=t.memoizedState),(G=Er||jp(t,o,G,a,he,fe,v))?(be||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=fe),f.props=a,f.state=fe,f.context=v,a=G):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{f=t.stateNode,Dl(e,t),v=t.memoizedProps,be=pi(o,v),f.props=be,Ce=t.pendingProps,he=f.context,fe=o.contextType,G=Hi,typeof fe=="object"&&fe!==null&&(G=$t(fe)),_=o.getDerivedStateFromProps,(fe=typeof _=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==Ce||he!==G)&&Up(t,f,a,G),Er=!1,he=t.memoizedState,f.state=he,Jo(t,a,f,u),Yo();var ge=t.memoizedState;v!==Ce||he!==ge||Er||e!==null&&e.dependencies!==null&&ia(e.dependencies)?(typeof _=="function"&&(iu(t,o,_,a),ge=t.memoizedState),(be=Er||jp(t,o,be,a,he,ge,G)||e!==null&&e.dependencies!==null&&ia(e.dependencies))?(fe||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(a,ge,G),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(a,ge,G)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&he===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&he===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=ge),f.props=a,f.state=ge,f.context=G,a=be):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&he===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&he===e.memoizedState||(t.flags|=1024),a=!1)}return f=a,Ca(e,t),a=(t.flags&128)!==0,f||a?(f=t.stateNode,o=a&&typeof o.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&a?(t.child=fi(t,e.child,null,u),t.child=fi(t,null,o,u)):Vt(e,t,o,u),t.memoizedState=f.state,e=t.child):e=ar(e,t,u),e}function Jp(e,t,o,a){return si(),t.flags|=256,Vt(e,t,o,a),t.child}var lu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uu(e){return{baseLanes:e,cachePool:zh()}}function du(e,t,o){return e=e!==null?e.childLanes&~o:0,t&&(e|=Cn),e}function Kp(e,t,o){var a=t.pendingProps,u=!1,f=(t.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(xt.current&2)!==0),v&&(u=!0,t.flags&=-129),v=(t.flags&32)!==0,t.flags&=-33,e===null){if(rt){if(u?kr(t):Nr(),(e=gt)?(e=ig(e,jn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Tr!==null?{id:Gn,overflow:Fn}:null,retryLane:536870912,hydrationErrors:null},o=kh(e),o.return=t,t.child=o,qt=t,gt=null)):e=null,e===null)throw Rr(t);return Xu(e)?t.lanes=32:t.lanes=536870912,null}var _=a.children;return a=a.fallback,u?(Nr(),u=t.mode,_=Ra({mode:"hidden",children:_},u),a=oi(a,u,o,null),_.return=t,a.return=t,_.sibling=a,t.child=_,a=t.child,a.memoizedState=uu(o),a.childLanes=du(e,v,o),t.memoizedState=lu,es(null,a)):(kr(t),fu(t,_))}var G=e.memoizedState;if(G!==null&&(_=G.dehydrated,_!==null)){if(f)t.flags&256?(kr(t),t.flags&=-257,t=hu(e,t,o)):t.memoizedState!==null?(Nr(),t.child=e.child,t.flags|=128,t=null):(Nr(),_=a.fallback,u=t.mode,a=Ra({mode:"visible",children:a.children},u),_=oi(_,u,o,null),_.flags|=2,a.return=t,_.return=t,a.sibling=_,t.child=a,fi(t,e.child,null,o),a=t.child,a.memoizedState=uu(o),a.childLanes=du(e,v,o),t.memoizedState=lu,t=es(null,a));else if(kr(t),Xu(_)){if(v=_.nextSibling&&_.nextSibling.dataset,v)var fe=v.dgst;v=fe,a=Error(s(419)),a.stack="",a.digest=v,qo({value:a,source:null,stack:null}),t=hu(e,t,o)}else if(Nt||Gi(e,t,o,!1),v=(o&e.childLanes)!==0,Nt||v){if(v=mt,v!==null&&(a=Pf(v,o),a!==0&&a!==G.retryLane))throw G.retryLane=a,ii(e,a),hn(v,e,a),au;Fu(_)||ja(),t=hu(e,t,o)}else Fu(_)?(t.flags|=192,t.child=e.child,t=null):(e=G.treeContext,gt=Dn(_.nextSibling),qt=t,rt=!0,Cr=null,jn=!1,e!==null&&Mh(t,e),t=fu(t,a.children),t.flags|=4096);return t}return u?(Nr(),_=a.fallback,u=t.mode,G=e.child,fe=G.sibling,a=tr(G,{mode:"hidden",children:a.children}),a.subtreeFlags=G.subtreeFlags&65011712,fe!==null?_=tr(fe,_):(_=oi(_,u,o,null),_.flags|=2),_.return=t,a.return=t,a.sibling=_,t.child=a,es(null,a),a=t.child,_=e.child.memoizedState,_===null?_=uu(o):(u=_.cachePool,u!==null?(G=At._currentValue,u=u.parent!==G?{parent:G,pool:G}:u):u=zh(),_={baseLanes:_.baseLanes|o,cachePool:u}),a.memoizedState=_,a.childLanes=du(e,v,o),t.memoizedState=lu,es(e.child,a)):(kr(t),o=e.child,e=o.sibling,o=tr(o,{mode:"visible",children:a.children}),o.return=t,o.sibling=null,e!==null&&(v=t.deletions,v===null?(t.deletions=[e],t.flags|=16):v.push(e)),t.child=o,t.memoizedState=null,o)}function fu(e,t){return t=Ra({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ra(e,t){return e=bn(22,e,null,t),e.lanes=0,e}function hu(e,t,o){return fi(t,e.child,null,o),e=fu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Qp(e,t,o){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Al(e.return,t,o)}function pu(e,t,o,a,u,f){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:o,tailMode:u,treeForkCount:f}:(v.isBackwards=t,v.rendering=null,v.renderingStartTime=0,v.last=a,v.tail=o,v.tailMode=u,v.treeForkCount=f)}function Wp(e,t,o){var a=t.pendingProps,u=a.revealOrder,f=a.tail;a=a.children;var v=xt.current,_=(v&2)!==0;if(_?(v=v&1|2,t.flags|=128):v&=1,x(xt,v),Vt(e,t,a,o),a=rt?Ho:0,!_&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Qp(e,o,t);else if(e.tag===19)Qp(e,o,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(o=t.child,u=null;o!==null;)e=o.alternate,e!==null&&fa(e)===null&&(u=o),o=o.sibling;o=u,o===null?(u=t.child,t.child=null):(u=o.sibling,o.sibling=null),pu(t,!1,u,o,f,a);break;case"backwards":case"unstable_legacy-backwards":for(o=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&fa(e)===null){t.child=u;break}e=u.sibling,u.sibling=o,o=u,u=e}pu(t,!0,o,null,f,a);break;case"together":pu(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function ar(e,t,o){if(e!==null&&(t.dependencies=e.dependencies),jr|=t.lanes,(o&t.childLanes)===0)if(e!==null){if(Gi(e,t,o,!1),(o&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,o=tr(e,e.pendingProps),t.child=o,o.return=t;e.sibling!==null;)e=e.sibling,o=o.sibling=tr(e,e.pendingProps),o.return=t;o.sibling=null}return t.child}function mu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ia(e)))}function yw(e,t,o){switch(t.tag){case 3:S(t,t.stateNode.containerInfo),xr(t,At,e.memoizedState.cache),si();break;case 27:case 5:A(t);break;case 4:S(t,t.stateNode.containerInfo);break;case 10:xr(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Bl(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(kr(t),t.flags|=128,null):(o&t.child.childLanes)!==0?Kp(e,t,o):(kr(t),e=ar(e,t,o),e!==null?e.sibling:null);kr(t);break;case 19:var u=(e.flags&128)!==0;if(a=(o&t.childLanes)!==0,a||(Gi(e,t,o,!1),a=(o&t.childLanes)!==0),u){if(a)return Wp(e,t,o);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),x(xt,xt.current),a)break;return null;case 22:return t.lanes=0,Vp(e,t,o,t.pendingProps);case 24:xr(t,At,e.memoizedState.cache)}return ar(e,t,o)}function Zp(e,t,o){if(e!==null)if(e.memoizedProps!==t.pendingProps)Nt=!0;else{if(!mu(e,o)&&(t.flags&128)===0)return Nt=!1,yw(e,t,o);Nt=(e.flags&131072)!==0}else Nt=!1,rt&&(t.flags&1048576)!==0&&Oh(t,Ho,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=ui(t.elementType),t.type=e,typeof e=="function")Sl(e)?(a=pi(e,a),t.tag=1,t=Yp(null,t,e,a,o)):(t.tag=0,t=cu(null,t,e,a,o));else{if(e!=null){var u=e.$$typeof;if(u===ee){t.tag=11,t=Hp(null,t,e,a,o);break e}else if(u===ne){t.tag=14,t=qp(null,t,e,a,o);break e}}throw t=Te(e)||e,Error(s(306,t,""))}}return t;case 0:return cu(e,t,t.type,t.pendingProps,o);case 1:return a=t.type,u=pi(a,t.pendingProps),Yp(e,t,a,u,o);case 3:e:{if(S(t,t.stateNode.containerInfo),e===null)throw Error(s(387));a=t.pendingProps;var f=t.memoizedState;u=f.element,Dl(e,t),Jo(t,a,null,o);var v=t.memoizedState;if(a=v.cache,xr(t,At,a),a!==f.cache&&kl(t,[At],o,!0),Yo(),a=v.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:v.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=Jp(e,t,a,o);break e}else if(a!==u){u=Nn(Error(s(424)),t),qo(u),t=Jp(e,t,a,o);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,gt=Dn(e.firstChild),qt=t,rt=!0,Cr=null,jn=!0,o=Vh(t,null,a,o),t.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(si(),a===u){t=ar(e,t,o);break e}Vt(e,t,a,o)}t=t.child}return t;case 26:return Ca(e,t),e===null?(o=ug(t.type,null,t.pendingProps,null))?t.memoizedState=o:rt||(o=t.type,e=t.pendingProps,a=Ba(k.current).createElement(o),a[Ht]=t,a[an]=e,Gt(a,o,e),zt(a),t.stateNode=a):t.memoizedState=ug(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return A(t),e===null&&rt&&(a=t.stateNode=ag(t.type,t.pendingProps,k.current),qt=t,jn=!0,u=gt,zr(t.type)?(Yu=u,gt=Dn(a.firstChild)):gt=u),Vt(e,t,t.pendingProps.children,o),Ca(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&rt&&((u=a=gt)&&(a=Xw(a,t.type,t.pendingProps,jn),a!==null?(t.stateNode=a,qt=t,gt=Dn(a.firstChild),jn=!1,u=!0):u=!1),u||Rr(t)),A(t),u=t.type,f=t.pendingProps,v=e!==null?e.memoizedProps:null,a=f.children,$u(u,f)?a=null:v!==null&&$u(u,v)&&(t.flags|=32),t.memoizedState!==null&&(u=ql(e,t,cw,null,null,o),ms._currentValue=u),Ca(e,t),Vt(e,t,a,o),t.child;case 6:return e===null&&rt&&((e=o=gt)&&(o=Yw(o,t.pendingProps,jn),o!==null?(t.stateNode=o,qt=t,gt=null,e=!0):e=!1),e||Rr(t)),null;case 13:return Kp(e,t,o);case 4:return S(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=fi(t,null,a,o):Vt(e,t,a,o),t.child;case 11:return Hp(e,t,t.type,t.pendingProps,o);case 7:return Vt(e,t,t.pendingProps,o),t.child;case 8:return Vt(e,t,t.pendingProps.children,o),t.child;case 12:return Vt(e,t,t.pendingProps.children,o),t.child;case 10:return a=t.pendingProps,xr(t,t.type,a.value),Vt(e,t,a.children,o),t.child;case 9:return u=t.type._context,a=t.pendingProps.children,ci(t),u=$t(u),a=a(u),t.flags|=1,Vt(e,t,a,o),t.child;case 14:return qp(e,t,t.type,t.pendingProps,o);case 15:return $p(e,t,t.type,t.pendingProps,o);case 19:return Wp(e,t,o);case 31:return gw(e,t,o);case 22:return Vp(e,t,o,t.pendingProps);case 24:return ci(t),a=$t(At),e===null?(u=Ml(),u===null&&(u=mt,f=Nl(),u.pooledCache=f,f.refCount++,f!==null&&(u.pooledCacheLanes|=o),u=f),t.memoizedState={parent:a,cache:u},Ul(t),xr(t,At,u)):((e.lanes&o)!==0&&(Dl(e,t),Jo(t,null,null,o),Yo()),u=e.memoizedState,f=t.memoizedState,u.parent!==a?(u={parent:a,cache:a},t.memoizedState=u,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=u),xr(t,At,a)):(a=f.cache,xr(t,At,a),a!==u.cache&&kl(t,[At],o,!0))),Vt(e,t,t.pendingProps.children,o),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function cr(e){e.flags|=4}function gu(e,t,o,a,u){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(Em())e.flags|=8192;else throw di=ca,jl}else e.flags&=-16777217}function em(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!mg(t))if(Em())e.flags|=8192;else throw di=ca,jl}function xa(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?jf():536870912,e.lanes|=t,ro|=t)}function ts(e,t){if(!rt)switch(e.tailMode){case"hidden":t=e.tail;for(var o=null;t!==null;)t.alternate!==null&&(o=t),t=t.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function yt(e){var t=e.alternate!==null&&e.alternate.child===e.child,o=0,a=0;if(t)for(var u=e.child;u!==null;)o|=u.lanes|u.childLanes,a|=u.subtreeFlags&65011712,a|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)o|=u.lanes|u.childLanes,a|=u.subtreeFlags,a|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=a,e.childLanes=o,t}function vw(e,t,o){var a=t.pendingProps;switch(Rl(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(t),null;case 1:return yt(t),null;case 3:return o=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),ir(At),C(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Vi(t)?cr(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,El())),yt(t),null;case 26:var u=t.type,f=t.memoizedState;return e===null?(cr(t),f!==null?(yt(t),em(t,f)):(yt(t),gu(t,u,null,a,o))):f?f!==e.memoizedState?(cr(t),yt(t),em(t,f)):(yt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&cr(t),yt(t),gu(t,u,e,a,o)),null;case 27:if(B(t),o=k.current,u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&cr(t);else{if(!a){if(t.stateNode===null)throw Error(s(166));return yt(t),null}e=b.current,Vi(t)?jh(t):(e=ag(u,a,o),t.stateNode=e,cr(t))}return yt(t),null;case 5:if(B(t),u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&cr(t);else{if(!a){if(t.stateNode===null)throw Error(s(166));return yt(t),null}if(f=b.current,Vi(t))jh(t);else{var v=Ba(k.current);switch(f){case 1:f=v.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:f=v.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":f=v.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":f=v.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":f=v.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof a.is=="string"?v.createElement("select",{is:a.is}):v.createElement("select"),a.multiple?f.multiple=!0:a.size&&(f.size=a.size);break;default:f=typeof a.is=="string"?v.createElement(u,{is:a.is}):v.createElement(u)}}f[Ht]=t,f[an]=a;e:for(v=t.child;v!==null;){if(v.tag===5||v.tag===6)f.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}t.stateNode=f;e:switch(Gt(f,u,a),u){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&cr(t)}}return yt(t),gu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,o),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&cr(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(s(166));if(e=k.current,Vi(t)){if(e=t.stateNode,o=t.memoizedProps,a=null,u=qt,u!==null)switch(u.tag){case 27:case 5:a=u.memoizedProps}e[Ht]=t,e=!!(e.nodeValue===o||a!==null&&a.suppressHydrationWarning===!0||Km(e.nodeValue,o)),e||Rr(t,!0)}else e=Ba(e).createTextNode(a),e[Ht]=t,t.stateNode=e}return yt(t),null;case 31:if(o=t.memoizedState,e===null||e.memoizedState!==null){if(a=Vi(t),o!==null){if(e===null){if(!a)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Ht]=t}else si(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;yt(t),e=!1}else o=El(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),e=!0;if(!e)return t.flags&256?(wn(t),t):(wn(t),null);if((t.flags&128)!==0)throw Error(s(558))}return yt(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=Vi(t),a!==null&&a.dehydrated!==null){if(e===null){if(!u)throw Error(s(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));u[Ht]=t}else si(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;yt(t),u=!1}else u=El(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return t.flags&256?(wn(t),t):(wn(t),null)}return wn(t),(t.flags&128)!==0?(t.lanes=o,t):(o=a!==null,e=e!==null&&e.memoizedState!==null,o&&(a=t.child,u=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(u=a.alternate.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==u&&(a.flags|=2048)),o!==e&&o&&(t.child.flags|=8192),xa(t,t.updateQueue),yt(t),null);case 4:return C(),e===null&&zu(t.stateNode.containerInfo),yt(t),null;case 10:return ir(t.type),yt(t),null;case 19:if(D(xt),a=t.memoizedState,a===null)return yt(t),null;if(u=(t.flags&128)!==0,f=a.rendering,f===null)if(u)ts(a,!1);else{if(Ct!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=fa(e),f!==null){for(t.flags|=128,ts(a,!1),e=f.updateQueue,t.updateQueue=e,xa(t,e),t.subtreeFlags=0,e=o,o=t.child;o!==null;)Ah(o,e),o=o.sibling;return x(xt,xt.current&1|2),rt&&nr(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&qe()>Na&&(t.flags|=128,u=!0,ts(a,!1),t.lanes=4194304)}else{if(!u)if(e=fa(f),e!==null){if(t.flags|=128,u=!0,e=e.updateQueue,t.updateQueue=e,xa(t,e),ts(a,!0),a.tail===null&&a.tailMode==="hidden"&&!f.alternate&&!rt)return yt(t),null}else 2*qe()-a.renderingStartTime>Na&&o!==536870912&&(t.flags|=128,u=!0,ts(a,!1),t.lanes=4194304);a.isBackwards?(f.sibling=t.child,t.child=f):(e=a.last,e!==null?e.sibling=f:t.child=f,a.last=f)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=qe(),e.sibling=null,o=xt.current,x(xt,u?o&1|2:o&1),rt&&nr(t,a.treeForkCount),e):(yt(t),null);case 22:case 23:return wn(t),Ll(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(o&536870912)!==0&&(t.flags&128)===0&&(yt(t),t.subtreeFlags&6&&(t.flags|=8192)):yt(t),o=t.updateQueue,o!==null&&xa(t,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==o&&(t.flags|=2048),e!==null&&D(li),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),ir(At),yt(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function bw(e,t){switch(Rl(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ir(At),C(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return B(t),null;case 31:if(t.memoizedState!==null){if(wn(t),t.alternate===null)throw Error(s(340));si()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(wn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));si()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return D(xt),null;case 4:return C(),null;case 10:return ir(t.type),null;case 22:case 23:return wn(t),Ll(),e!==null&&D(li),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ir(At),null;case 25:return null;default:return null}}function tm(e,t){switch(Rl(t),t.tag){case 3:ir(At),C();break;case 26:case 27:case 5:B(t);break;case 4:C();break;case 31:t.memoizedState!==null&&wn(t);break;case 13:wn(t);break;case 19:D(xt);break;case 10:ir(t.type);break;case 22:case 23:wn(t),Ll(),e!==null&&D(li);break;case 24:ir(At)}}function ns(e,t){try{var o=t.updateQueue,a=o!==null?o.lastEffect:null;if(a!==null){var u=a.next;o=u;do{if((o.tag&e)===e){a=void 0;var f=o.create,v=o.inst;a=f(),v.destroy=a}o=o.next}while(o!==u)}}catch(_){dt(t,t.return,_)}}function Or(e,t,o){try{var a=t.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var f=u.next;a=f;do{if((a.tag&e)===e){var v=a.inst,_=v.destroy;if(_!==void 0){v.destroy=void 0,u=t;var G=o,fe=_;try{fe()}catch(be){dt(u,G,be)}}}a=a.next}while(a!==f)}}catch(be){dt(t,t.return,be)}}function nm(e){var t=e.updateQueue;if(t!==null){var o=e.stateNode;try{Fh(t,o)}catch(a){dt(e,e.return,a)}}}function rm(e,t,o){o.props=pi(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(a){dt(e,t,a)}}function rs(e,t){try{var o=e.ref;if(o!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof o=="function"?e.refCleanup=o(a):o.current=a}}catch(u){dt(e,t,u)}}function Xn(e,t){var o=e.ref,a=e.refCleanup;if(o!==null)if(typeof a=="function")try{a()}catch(u){dt(e,t,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(u){dt(e,t,u)}else o.current=null}function im(e){var t=e.type,o=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":o.autoFocus&&a.focus();break e;case"img":o.src?a.src=o.src:o.srcSet&&(a.srcset=o.srcSet)}}catch(u){dt(e,e.return,u)}}function yu(e,t,o){try{var a=e.stateNode;Hw(a,e.type,o,t),a[an]=t}catch(u){dt(e,e.return,u)}}function om(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&zr(e.type)||e.tag===4}function vu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||om(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&zr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function bu(e,t,o){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(e,t):(t=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,t.appendChild(e),o=o._reactRootContainer,o!=null||t.onclick!==null||(t.onclick=Zn));else if(a!==4&&(a===27&&zr(e.type)&&(o=e.stateNode,t=null),e=e.child,e!==null))for(bu(e,t,o),e=e.sibling;e!==null;)bu(e,t,o),e=e.sibling}function Ea(e,t,o){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?o.insertBefore(e,t):o.appendChild(e);else if(a!==4&&(a===27&&zr(e.type)&&(o=e.stateNode),e=e.child,e!==null))for(Ea(e,t,o),e=e.sibling;e!==null;)Ea(e,t,o),e=e.sibling}function sm(e){var t=e.stateNode,o=e.memoizedProps;try{for(var a=e.type,u=t.attributes;u.length;)t.removeAttributeNode(u[0]);Gt(t,a,o),t[Ht]=e,t[an]=o}catch(f){dt(e,e.return,f)}}var lr=!1,Ot=!1,Su=!1,am=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function Sw(e,t){if(e=e.containerInfo,Hu=Xa,e=bh(e),hl(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var a=o.getSelection&&o.getSelection();if(a&&a.rangeCount!==0){o=a.anchorNode;var u=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{o.nodeType,f.nodeType}catch{o=null;break e}var v=0,_=-1,G=-1,fe=0,be=0,Ce=e,he=null;t:for(;;){for(var ge;Ce!==o||u!==0&&Ce.nodeType!==3||(_=v+u),Ce!==f||a!==0&&Ce.nodeType!==3||(G=v+a),Ce.nodeType===3&&(v+=Ce.nodeValue.length),(ge=Ce.firstChild)!==null;)he=Ce,Ce=ge;for(;;){if(Ce===e)break t;if(he===o&&++fe===u&&(_=v),he===f&&++be===a&&(G=v),(ge=Ce.nextSibling)!==null)break;Ce=he,he=Ce.parentNode}Ce=ge}o=_===-1||G===-1?null:{start:_,end:G}}else o=null}o=o||{start:0,end:0}}else o=null;for(qu={focusedElem:e,selectionRange:o},Xa=!1,Lt=t;Lt!==null;)if(t=Lt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Lt=e;else for(;Lt!==null;){switch(t=Lt,f=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(o=0;o<e.length;o++)u=e[o],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,o=t,u=f.memoizedProps,f=f.memoizedState,a=o.stateNode;try{var Pe=pi(o.type,u);e=a.getSnapshotBeforeUpdate(Pe,f),a.__reactInternalSnapshotBeforeUpdate=e}catch($e){dt(o,o.return,$e)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,o=e.nodeType,o===9)Gu(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Gu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,Lt=e;break}Lt=t.return}}function cm(e,t,o){var a=o.flags;switch(o.tag){case 0:case 11:case 15:dr(e,o),a&4&&ns(5,o);break;case 1:if(dr(e,o),a&4)if(e=o.stateNode,t===null)try{e.componentDidMount()}catch(v){dt(o,o.return,v)}else{var u=pi(o.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(u,t,e.__reactInternalSnapshotBeforeUpdate)}catch(v){dt(o,o.return,v)}}a&64&&nm(o),a&512&&rs(o,o.return);break;case 3:if(dr(e,o),a&64&&(e=o.updateQueue,e!==null)){if(t=null,o.child!==null)switch(o.child.tag){case 27:case 5:t=o.child.stateNode;break;case 1:t=o.child.stateNode}try{Fh(e,t)}catch(v){dt(o,o.return,v)}}break;case 27:t===null&&a&4&&sm(o);case 26:case 5:dr(e,o),t===null&&a&4&&im(o),a&512&&rs(o,o.return);break;case 12:dr(e,o);break;case 31:dr(e,o),a&4&&dm(e,o);break;case 13:dr(e,o),a&4&&fm(e,o),a&64&&(e=o.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(o=kw.bind(null,o),Jw(e,o))));break;case 22:if(a=o.memoizedState!==null||lr,!a){t=t!==null&&t.memoizedState!==null||Ot,u=lr;var f=Ot;lr=a,(Ot=t)&&!f?fr(e,o,(o.subtreeFlags&8772)!==0):dr(e,o),lr=u,Ot=f}break;case 30:break;default:dr(e,o)}}function lm(e){var t=e.alternate;t!==null&&(e.alternate=null,lm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Kc(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var bt=null,ln=!1;function ur(e,t,o){for(o=o.child;o!==null;)um(e,t,o),o=o.sibling}function um(e,t,o){if(Me&&typeof Me.onCommitFiberUnmount=="function")try{Me.onCommitFiberUnmount(Ie,o)}catch{}switch(o.tag){case 26:Ot||Xn(o,t),ur(e,t,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ot||Xn(o,t);var a=bt,u=ln;zr(o.type)&&(bt=o.stateNode,ln=!1),ur(e,t,o),fs(o.stateNode),bt=a,ln=u;break;case 5:Ot||Xn(o,t);case 6:if(a=bt,u=ln,bt=null,ur(e,t,o),bt=a,ln=u,bt!==null)if(ln)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(o.stateNode)}catch(f){dt(o,t,f)}else try{bt.removeChild(o.stateNode)}catch(f){dt(o,t,f)}break;case 18:bt!==null&&(ln?(e=bt,ng(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,o.stateNode),fo(e)):ng(bt,o.stateNode));break;case 4:a=bt,u=ln,bt=o.stateNode.containerInfo,ln=!0,ur(e,t,o),bt=a,ln=u;break;case 0:case 11:case 14:case 15:Or(2,o,t),Ot||Or(4,o,t),ur(e,t,o);break;case 1:Ot||(Xn(o,t),a=o.stateNode,typeof a.componentWillUnmount=="function"&&rm(o,t,a)),ur(e,t,o);break;case 21:ur(e,t,o);break;case 22:Ot=(a=Ot)||o.memoizedState!==null,ur(e,t,o),Ot=a;break;default:ur(e,t,o)}}function dm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{fo(e)}catch(o){dt(t,t.return,o)}}}function fm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{fo(e)}catch(o){dt(t,t.return,o)}}function ww(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new am),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new am),t;default:throw Error(s(435,e.tag))}}function _a(e,t){var o=ww(e);t.forEach(function(a){if(!o.has(a)){o.add(a);var u=Nw.bind(null,e,a);a.then(u,u)}})}function un(e,t){var o=t.deletions;if(o!==null)for(var a=0;a<o.length;a++){var u=o[a],f=e,v=t,_=v;e:for(;_!==null;){switch(_.tag){case 27:if(zr(_.type)){bt=_.stateNode,ln=!1;break e}break;case 5:bt=_.stateNode,ln=!1;break e;case 3:case 4:bt=_.stateNode.containerInfo,ln=!0;break e}_=_.return}if(bt===null)throw Error(s(160));um(f,v,u),bt=null,ln=!1,f=u.alternate,f!==null&&(f.return=null),u.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)hm(t,e),t=t.sibling}var Ln=null;function hm(e,t){var o=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:un(t,e),dn(e),a&4&&(Or(3,e,e.return),ns(3,e),Or(5,e,e.return));break;case 1:un(t,e),dn(e),a&512&&(Ot||o===null||Xn(o,o.return)),a&64&&lr&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?a:o.concat(a))));break;case 26:var u=Ln;if(un(t,e),dn(e),a&512&&(Ot||o===null||Xn(o,o.return)),a&4){var f=o!==null?o.memoizedState:null;if(a=e.memoizedState,o===null)if(a===null)if(e.stateNode===null){e:{a=e.type,o=e.memoizedProps,u=u.ownerDocument||u;t:switch(a){case"title":f=u.getElementsByTagName("title")[0],(!f||f[No]||f[Ht]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=u.createElement(a),u.head.insertBefore(f,u.querySelector("head > title"))),Gt(f,a,o),f[Ht]=e,zt(f),a=f;break e;case"link":var v=hg("link","href",u).get(a+(o.href||""));if(v){for(var _=0;_<v.length;_++)if(f=v[_],f.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&f.getAttribute("rel")===(o.rel==null?null:o.rel)&&f.getAttribute("title")===(o.title==null?null:o.title)&&f.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(_,1);break t}}f=u.createElement(a),Gt(f,a,o),u.head.appendChild(f);break;case"meta":if(v=hg("meta","content",u).get(a+(o.content||""))){for(_=0;_<v.length;_++)if(f=v[_],f.getAttribute("content")===(o.content==null?null:""+o.content)&&f.getAttribute("name")===(o.name==null?null:o.name)&&f.getAttribute("property")===(o.property==null?null:o.property)&&f.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&f.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(_,1);break t}}f=u.createElement(a),Gt(f,a,o),u.head.appendChild(f);break;default:throw Error(s(468,a))}f[Ht]=e,zt(f),a=f}e.stateNode=a}else pg(u,e.type,e.stateNode);else e.stateNode=fg(u,a,e.memoizedProps);else f!==a?(f===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):f.count--,a===null?pg(u,e.type,e.stateNode):fg(u,a,e.memoizedProps)):a===null&&e.stateNode!==null&&yu(e,e.memoizedProps,o.memoizedProps)}break;case 27:un(t,e),dn(e),a&512&&(Ot||o===null||Xn(o,o.return)),o!==null&&a&4&&yu(e,e.memoizedProps,o.memoizedProps);break;case 5:if(un(t,e),dn(e),a&512&&(Ot||o===null||Xn(o,o.return)),e.flags&32){u=e.stateNode;try{Ui(u,"")}catch(Pe){dt(e,e.return,Pe)}}a&4&&e.stateNode!=null&&(u=e.memoizedProps,yu(e,u,o!==null?o.memoizedProps:u)),a&1024&&(Su=!0);break;case 6:if(un(t,e),dn(e),a&4){if(e.stateNode===null)throw Error(s(162));a=e.memoizedProps,o=e.stateNode;try{o.nodeValue=a}catch(Pe){dt(e,e.return,Pe)}}break;case 3:if($a=null,u=Ln,Ln=Ha(t.containerInfo),un(t,e),Ln=u,dn(e),a&4&&o!==null&&o.memoizedState.isDehydrated)try{fo(t.containerInfo)}catch(Pe){dt(e,e.return,Pe)}Su&&(Su=!1,pm(e));break;case 4:a=Ln,Ln=Ha(e.stateNode.containerInfo),un(t,e),dn(e),Ln=a;break;case 12:un(t,e),dn(e);break;case 31:un(t,e),dn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,_a(e,a)));break;case 13:un(t,e),dn(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(ka=qe()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,_a(e,a)));break;case 22:u=e.memoizedState!==null;var G=o!==null&&o.memoizedState!==null,fe=lr,be=Ot;if(lr=fe||u,Ot=be||G,un(t,e),Ot=be,lr=fe,dn(e),a&8192)e:for(t=e.stateNode,t._visibility=u?t._visibility&-2:t._visibility|1,u&&(o===null||G||lr||Ot||mi(e)),o=null,t=e;;){if(t.tag===5||t.tag===26){if(o===null){G=o=t;try{if(f=G.stateNode,u)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{_=G.stateNode;var Ce=G.memoizedProps.style,he=Ce!=null&&Ce.hasOwnProperty("display")?Ce.display:null;_.style.display=he==null||typeof he=="boolean"?"":(""+he).trim()}}catch(Pe){dt(G,G.return,Pe)}}}else if(t.tag===6){if(o===null){G=t;try{G.stateNode.nodeValue=u?"":G.memoizedProps}catch(Pe){dt(G,G.return,Pe)}}}else if(t.tag===18){if(o===null){G=t;try{var ge=G.stateNode;u?rg(ge,!0):rg(G.stateNode,!1)}catch(Pe){dt(G,G.return,Pe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;o===t&&(o=null),t=t.return}o===t&&(o=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(o=a.retryQueue,o!==null&&(a.retryQueue=null,_a(e,o))));break;case 19:un(t,e),dn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,_a(e,a)));break;case 30:break;case 21:break;default:un(t,e),dn(e)}}function dn(e){var t=e.flags;if(t&2){try{for(var o,a=e.return;a!==null;){if(om(a)){o=a;break}a=a.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var u=o.stateNode,f=vu(e);Ea(e,f,u);break;case 5:var v=o.stateNode;o.flags&32&&(Ui(v,""),o.flags&=-33);var _=vu(e);Ea(e,_,v);break;case 3:case 4:var G=o.stateNode.containerInfo,fe=vu(e);bu(e,fe,G);break;default:throw Error(s(161))}}catch(be){dt(e,e.return,be)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function pm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;pm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function dr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)cm(e,t.alternate,t),t=t.sibling}function mi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Or(4,t,t.return),mi(t);break;case 1:Xn(t,t.return);var o=t.stateNode;typeof o.componentWillUnmount=="function"&&rm(t,t.return,o),mi(t);break;case 27:fs(t.stateNode);case 26:case 5:Xn(t,t.return),mi(t);break;case 22:t.memoizedState===null&&mi(t);break;case 30:mi(t);break;default:mi(t)}e=e.sibling}}function fr(e,t,o){for(o=o&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,u=e,f=t,v=f.flags;switch(f.tag){case 0:case 11:case 15:fr(u,f,o),ns(4,f);break;case 1:if(fr(u,f,o),a=f,u=a.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(fe){dt(a,a.return,fe)}if(a=f,u=a.updateQueue,u!==null){var _=a.stateNode;try{var G=u.shared.hiddenCallbacks;if(G!==null)for(u.shared.hiddenCallbacks=null,u=0;u<G.length;u++)Gh(G[u],_)}catch(fe){dt(a,a.return,fe)}}o&&v&64&&nm(f),rs(f,f.return);break;case 27:sm(f);case 26:case 5:fr(u,f,o),o&&a===null&&v&4&&im(f),rs(f,f.return);break;case 12:fr(u,f,o);break;case 31:fr(u,f,o),o&&v&4&&dm(u,f);break;case 13:fr(u,f,o),o&&v&4&&fm(u,f);break;case 22:f.memoizedState===null&&fr(u,f,o),rs(f,f.return);break;case 30:break;default:fr(u,f,o)}t=t.sibling}}function wu(e,t){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&$o(o))}function Tu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&$o(e))}function Bn(e,t,o,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)mm(e,t,o,a),t=t.sibling}function mm(e,t,o,a){var u=t.flags;switch(t.tag){case 0:case 11:case 15:Bn(e,t,o,a),u&2048&&ns(9,t);break;case 1:Bn(e,t,o,a);break;case 3:Bn(e,t,o,a),u&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&$o(e)));break;case 12:if(u&2048){Bn(e,t,o,a),e=t.stateNode;try{var f=t.memoizedProps,v=f.id,_=f.onPostCommit;typeof _=="function"&&_(v,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(G){dt(t,t.return,G)}}else Bn(e,t,o,a);break;case 31:Bn(e,t,o,a);break;case 13:Bn(e,t,o,a);break;case 23:break;case 22:f=t.stateNode,v=t.alternate,t.memoizedState!==null?f._visibility&2?Bn(e,t,o,a):is(e,t):f._visibility&2?Bn(e,t,o,a):(f._visibility|=2,eo(e,t,o,a,(t.subtreeFlags&10256)!==0||!1)),u&2048&&wu(v,t);break;case 24:Bn(e,t,o,a),u&2048&&Tu(t.alternate,t);break;default:Bn(e,t,o,a)}}function eo(e,t,o,a,u){for(u=u&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var f=e,v=t,_=o,G=a,fe=v.flags;switch(v.tag){case 0:case 11:case 15:eo(f,v,_,G,u),ns(8,v);break;case 23:break;case 22:var be=v.stateNode;v.memoizedState!==null?be._visibility&2?eo(f,v,_,G,u):is(f,v):(be._visibility|=2,eo(f,v,_,G,u)),u&&fe&2048&&wu(v.alternate,v);break;case 24:eo(f,v,_,G,u),u&&fe&2048&&Tu(v.alternate,v);break;default:eo(f,v,_,G,u)}t=t.sibling}}function is(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var o=e,a=t,u=a.flags;switch(a.tag){case 22:is(o,a),u&2048&&wu(a.alternate,a);break;case 24:is(o,a),u&2048&&Tu(a.alternate,a);break;default:is(o,a)}t=t.sibling}}var os=8192;function to(e,t,o){if(e.subtreeFlags&os)for(e=e.child;e!==null;)gm(e,t,o),e=e.sibling}function gm(e,t,o){switch(e.tag){case 26:to(e,t,o),e.flags&os&&e.memoizedState!==null&&aT(o,Ln,e.memoizedState,e.memoizedProps);break;case 5:to(e,t,o);break;case 3:case 4:var a=Ln;Ln=Ha(e.stateNode.containerInfo),to(e,t,o),Ln=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=os,os=16777216,to(e,t,o),os=a):to(e,t,o));break;default:to(e,t,o)}}function ym(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function ss(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var o=0;o<t.length;o++){var a=t[o];Lt=a,bm(a,e)}ym(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)vm(e),e=e.sibling}function vm(e){switch(e.tag){case 0:case 11:case 15:ss(e),e.flags&2048&&Or(9,e,e.return);break;case 3:ss(e);break;case 12:ss(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Aa(e)):ss(e);break;default:ss(e)}}function Aa(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var o=0;o<t.length;o++){var a=t[o];Lt=a,bm(a,e)}ym(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Or(8,t,t.return),Aa(t);break;case 22:o=t.stateNode,o._visibility&2&&(o._visibility&=-3,Aa(t));break;default:Aa(t)}e=e.sibling}}function bm(e,t){for(;Lt!==null;){var o=Lt;switch(o.tag){case 0:case 11:case 15:Or(8,o,t);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var a=o.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:$o(o.memoizedState.cache)}if(a=o.child,a!==null)a.return=o,Lt=a;else e:for(o=e;Lt!==null;){a=Lt;var u=a.sibling,f=a.return;if(lm(a),a===o){Lt=null;break e}if(u!==null){u.return=f,Lt=u;break e}Lt=f}}}var Tw={getCacheForType:function(e){var t=$t(At),o=t.data.get(e);return o===void 0&&(o=e(),t.data.set(e,o)),o},cacheSignal:function(){return $t(At).controller.signal}},Cw=typeof WeakMap=="function"?WeakMap:Map,at=0,mt=null,We=null,tt=0,ut=0,Tn=null,Mr=!1,no=!1,Cu=!1,hr=0,Ct=0,jr=0,gi=0,Ru=0,Cn=0,ro=0,as=null,fn=null,xu=!1,ka=0,Sm=0,Na=1/0,Oa=null,Ur=null,Dt=0,Dr=null,io=null,pr=0,Eu=0,_u=null,wm=null,cs=0,Au=null;function Rn(){return(at&2)!==0&&tt!==0?tt&-tt:$.T!==null?Uu():If()}function Tm(){if(Cn===0)if((tt&536870912)===0||rt){var e=_i;_i<<=1,(_i&3932160)===0&&(_i=262144),Cn=e}else Cn=536870912;return e=Sn.current,e!==null&&(e.flags|=32),Cn}function hn(e,t,o){(e===mt&&(ut===2||ut===9)||e.cancelPendingCommit!==null)&&(oo(e,0),Pr(e,tt,Cn,!1)),ko(e,o),((at&2)===0||e!==mt)&&(e===mt&&((at&2)===0&&(gi|=o),Ct===4&&Pr(e,tt,Cn,!1)),Yn(e))}function Cm(e,t,o){if((at&6)!==0)throw Error(s(327));var a=!o&&(t&127)===0&&(t&e.expiredLanes)===0||Ao(e,t),u=a?Ew(e,t):Nu(e,t,!0),f=a;do{if(u===0){no&&!a&&Pr(e,t,0,!1);break}else{if(o=e.current.alternate,f&&!Rw(o)){u=Nu(e,t,!1),f=!1;continue}if(u===2){if(f=t,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){t=v;e:{var _=e;u=as;var G=_.current.memoizedState.isDehydrated;if(G&&(oo(_,v).flags|=256),v=Nu(_,v,!1),v!==2){if(Cu&&!G){_.errorRecoveryDisabledLanes|=f,gi|=f,u=4;break e}f=fn,fn=u,f!==null&&(fn===null?fn=f:fn.push.apply(fn,f))}u=v}if(f=!1,u!==2)continue}}if(u===1){oo(e,0),Pr(e,t,0,!0);break}e:{switch(a=e,f=u,f){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Pr(a,t,Cn,!Mr);break e;case 2:fn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(u=ka+300-qe(),10<u)){if(Pr(a,t,Cn,!Mr),Hs(a,0,!0)!==0)break e;pr=t,a.timeoutHandle=eg(Rm.bind(null,a,o,fn,Oa,xu,t,Cn,gi,ro,Mr,f,"Throttled",-0,0),u);break e}Rm(a,o,fn,Oa,xu,t,Cn,gi,ro,Mr,f,null,-0,0)}}break}while(!0);Yn(e)}function Rm(e,t,o,a,u,f,v,_,G,fe,be,Ce,he,ge){if(e.timeoutHandle=-1,Ce=t.subtreeFlags,Ce&8192||(Ce&16785408)===16785408){Ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zn},gm(t,f,Ce);var Pe=(f&62914560)===f?ka-qe():(f&4194048)===f?Sm-qe():0;if(Pe=cT(Ce,Pe),Pe!==null){pr=f,e.cancelPendingCommit=Pe(Mm.bind(null,e,t,f,o,a,u,v,_,G,be,Ce,null,he,ge)),Pr(e,f,v,!fe);return}}Mm(e,t,f,o,a,u,v,_,G)}function Rw(e){for(var t=e;;){var o=t.tag;if((o===0||o===11||o===15)&&t.flags&16384&&(o=t.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var a=0;a<o.length;a++){var u=o[a],f=u.getSnapshot;u=u.value;try{if(!vn(f(),u))return!1}catch{return!1}}if(o=t.child,t.subtreeFlags&16384&&o!==null)o.return=t,t=o;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Pr(e,t,o,a){t&=~Ru,t&=~gi,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var u=t;0<u;){var f=31-ze(u),v=1<<f;a[f]=-1,u&=~v}o!==0&&Uf(e,o,t)}function Ma(){return(at&6)===0?(ls(0),!1):!0}function ku(){if(We!==null){if(ut===0)var e=We.return;else e=We,rr=ai=null,Gl(e),Ji=null,Go=0,e=We;for(;e!==null;)tm(e.alternate,e),e=e.return;We=null}}function oo(e,t){var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,Vw(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),pr=0,ku(),mt=e,We=o=tr(e.current,null),tt=t,ut=0,Tn=null,Mr=!1,no=Ao(e,t),Cu=!1,ro=Cn=Ru=gi=jr=Ct=0,fn=as=null,xu=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var u=31-ze(a),f=1<<u;t|=e[u],a&=~f}return hr=t,Zs(),o}function xm(e,t){Xe=null,$.H=Zo,t===Yi||t===aa?(t=Hh(),ut=3):t===jl?(t=Hh(),ut=4):ut=t===au?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Tn=t,We===null&&(Ct=1,wa(e,Nn(t,e.current)))}function Em(){var e=Sn.current;return e===null?!0:(tt&4194048)===tt?Un===null:(tt&62914560)===tt||(tt&536870912)!==0?e===Un:!1}function _m(){var e=$.H;return $.H=Zo,e===null?Zo:e}function Am(){var e=$.A;return $.A=Tw,e}function ja(){Ct=4,Mr||(tt&4194048)!==tt&&Sn.current!==null||(no=!0),(jr&134217727)===0&&(gi&134217727)===0||mt===null||Pr(mt,tt,Cn,!1)}function Nu(e,t,o){var a=at;at|=2;var u=_m(),f=Am();(mt!==e||tt!==t)&&(Oa=null,oo(e,t)),t=!1;var v=Ct;e:do try{if(ut!==0&&We!==null){var _=We,G=Tn;switch(ut){case 8:ku(),v=6;break e;case 3:case 2:case 9:case 6:Sn.current===null&&(t=!0);var fe=ut;if(ut=0,Tn=null,so(e,_,G,fe),o&&no){v=0;break e}break;default:fe=ut,ut=0,Tn=null,so(e,_,G,fe)}}xw(),v=Ct;break}catch(be){xm(e,be)}while(!0);return t&&e.shellSuspendCounter++,rr=ai=null,at=a,$.H=u,$.A=f,We===null&&(mt=null,tt=0,Zs()),v}function xw(){for(;We!==null;)km(We)}function Ew(e,t){var o=at;at|=2;var a=_m(),u=Am();mt!==e||tt!==t?(Oa=null,Na=qe()+500,oo(e,t)):no=Ao(e,t);e:do try{if(ut!==0&&We!==null){t=We;var f=Tn;t:switch(ut){case 1:ut=0,Tn=null,so(e,t,f,1);break;case 2:case 9:if(Lh(f)){ut=0,Tn=null,Nm(t);break}t=function(){ut!==2&&ut!==9||mt!==e||(ut=7),Yn(e)},f.then(t,t);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:Lh(f)?(ut=0,Tn=null,Nm(t)):(ut=0,Tn=null,so(e,t,f,7));break;case 5:var v=null;switch(We.tag){case 26:v=We.memoizedState;case 5:case 27:var _=We;if(v?mg(v):_.stateNode.complete){ut=0,Tn=null;var G=_.sibling;if(G!==null)We=G;else{var fe=_.return;fe!==null?(We=fe,Ua(fe)):We=null}break t}}ut=0,Tn=null,so(e,t,f,5);break;case 6:ut=0,Tn=null,so(e,t,f,6);break;case 8:ku(),Ct=6;break e;default:throw Error(s(462))}}_w();break}catch(be){xm(e,be)}while(!0);return rr=ai=null,$.H=a,$.A=u,at=o,We!==null?0:(mt=null,tt=0,Zs(),Ct)}function _w(){for(;We!==null&&!xe();)km(We)}function km(e){var t=Zp(e.alternate,e,hr);e.memoizedProps=e.pendingProps,t===null?Ua(e):We=t}function Nm(e){var t=e,o=t.alternate;switch(t.tag){case 15:case 0:t=Xp(o,t,t.pendingProps,t.type,void 0,tt);break;case 11:t=Xp(o,t,t.pendingProps,t.type.render,t.ref,tt);break;case 5:Gl(t);default:tm(o,t),t=We=Ah(t,hr),t=Zp(o,t,hr)}e.memoizedProps=e.pendingProps,t===null?Ua(e):We=t}function so(e,t,o,a){rr=ai=null,Gl(t),Ji=null,Go=0;var u=t.return;try{if(mw(e,u,t,o,tt)){Ct=1,wa(e,Nn(o,e.current)),We=null;return}}catch(f){if(u!==null)throw We=u,f;Ct=1,wa(e,Nn(o,e.current)),We=null;return}t.flags&32768?(rt||a===1?e=!0:no||(tt&536870912)!==0?e=!1:(Mr=e=!0,(a===2||a===9||a===3||a===6)&&(a=Sn.current,a!==null&&a.tag===13&&(a.flags|=16384))),Om(t,e)):Ua(t)}function Ua(e){var t=e;do{if((t.flags&32768)!==0){Om(t,Mr);return}e=t.return;var o=vw(t.alternate,t,hr);if(o!==null){We=o;return}if(t=t.sibling,t!==null){We=t;return}We=t=e}while(t!==null);Ct===0&&(Ct=5)}function Om(e,t){do{var o=bw(e.alternate,e);if(o!==null){o.flags&=32767,We=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!t&&(e=e.sibling,e!==null)){We=e;return}We=e=o}while(e!==null);Ct=6,We=null}function Mm(e,t,o,a,u,f,v,_,G){e.cancelPendingCommit=null;do Da();while(Dt!==0);if((at&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(f=t.lanes|t.childLanes,f|=vl,sS(e,o,f,v,_,G),e===mt&&(We=mt=null,tt=0),io=t,Dr=e,pr=o,Eu=f,_u=u,wm=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Ow(j,function(){return Im(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=$.T,$.T=null,u=M.p,M.p=2,v=at,at|=4;try{Sw(e,t,o)}finally{at=v,M.p=u,$.T=a}}Dt=1,jm(),Um(),Dm()}}function jm(){if(Dt===1){Dt=0;var e=Dr,t=io,o=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||o){o=$.T,$.T=null;var a=M.p;M.p=2;var u=at;at|=4;try{hm(t,e);var f=qu,v=bh(e.containerInfo),_=f.focusedElem,G=f.selectionRange;if(v!==_&&_&&_.ownerDocument&&vh(_.ownerDocument.documentElement,_)){if(G!==null&&hl(_)){var fe=G.start,be=G.end;if(be===void 0&&(be=fe),"selectionStart"in _)_.selectionStart=fe,_.selectionEnd=Math.min(be,_.value.length);else{var Ce=_.ownerDocument||document,he=Ce&&Ce.defaultView||window;if(he.getSelection){var ge=he.getSelection(),Pe=_.textContent.length,$e=Math.min(G.start,Pe),pt=G.end===void 0?$e:Math.min(G.end,Pe);!ge.extend&&$e>pt&&(v=pt,pt=$e,$e=v);var ce=yh(_,$e),Q=yh(_,pt);if(ce&&Q&&(ge.rangeCount!==1||ge.anchorNode!==ce.node||ge.anchorOffset!==ce.offset||ge.focusNode!==Q.node||ge.focusOffset!==Q.offset)){var de=Ce.createRange();de.setStart(ce.node,ce.offset),ge.removeAllRanges(),$e>pt?(ge.addRange(de),ge.extend(Q.node,Q.offset)):(de.setEnd(Q.node,Q.offset),ge.addRange(de))}}}}for(Ce=[],ge=_;ge=ge.parentNode;)ge.nodeType===1&&Ce.push({element:ge,left:ge.scrollLeft,top:ge.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<Ce.length;_++){var Se=Ce[_];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}Xa=!!Hu,qu=Hu=null}finally{at=u,M.p=a,$.T=o}}e.current=t,Dt=2}}function Um(){if(Dt===2){Dt=0;var e=Dr,t=io,o=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||o){o=$.T,$.T=null;var a=M.p;M.p=2;var u=at;at|=4;try{cm(e,t.alternate,t)}finally{at=u,M.p=a,$.T=o}}Dt=3}}function Dm(){if(Dt===4||Dt===3){Dt=0,Ne();var e=Dr,t=io,o=pr,a=wm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Dt=5:(Dt=0,io=Dr=null,Pm(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(Ur=null),Yc(o),t=t.stateNode,Me&&typeof Me.onCommitFiberRoot=="function")try{Me.onCommitFiberRoot(Ie,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=$.T,u=M.p,M.p=2,$.T=null;try{for(var f=e.onRecoverableError,v=0;v<a.length;v++){var _=a[v];f(_.value,{componentStack:_.stack})}}finally{$.T=t,M.p=u}}(pr&3)!==0&&Da(),Yn(e),u=e.pendingLanes,(o&261930)!==0&&(u&42)!==0?e===Au?cs++:(cs=0,Au=e):cs=0,ls(0)}}function Pm(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,$o(t)))}function Da(){return jm(),Um(),Dm(),Im()}function Im(){if(Dt!==5)return!1;var e=Dr,t=Eu;Eu=0;var o=Yc(pr),a=$.T,u=M.p;try{M.p=32>o?32:o,$.T=null,o=_u,_u=null;var f=Dr,v=pr;if(Dt=0,io=Dr=null,pr=0,(at&6)!==0)throw Error(s(331));var _=at;if(at|=4,vm(f.current),mm(f,f.current,v,o),at=_,ls(0,!1),Me&&typeof Me.onPostCommitFiberRoot=="function")try{Me.onPostCommitFiberRoot(Ie,f)}catch{}return!0}finally{M.p=u,$.T=a,Pm(e,t)}}function zm(e,t,o){t=Nn(o,t),t=su(e.stateNode,t,2),e=Ar(e,t,2),e!==null&&(ko(e,2),Yn(e))}function dt(e,t,o){if(e.tag===3)zm(e,e,o);else for(;t!==null;){if(t.tag===3){zm(t,e,o);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Ur===null||!Ur.has(a))){e=Nn(o,e),o=Lp(2),a=Ar(t,o,2),a!==null&&(Bp(o,a,t,e),ko(a,2),Yn(a));break}}t=t.return}}function Ou(e,t,o){var a=e.pingCache;if(a===null){a=e.pingCache=new Cw;var u=new Set;a.set(t,u)}else u=a.get(t),u===void 0&&(u=new Set,a.set(t,u));u.has(o)||(Cu=!0,u.add(o),e=Aw.bind(null,e,t,o),t.then(e,e))}function Aw(e,t,o){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,mt===e&&(tt&o)===o&&(Ct===4||Ct===3&&(tt&62914560)===tt&&300>qe()-ka?(at&2)===0&&oo(e,0):Ru|=o,ro===tt&&(ro=0)),Yn(e)}function Lm(e,t){t===0&&(t=jf()),e=ii(e,t),e!==null&&(ko(e,t),Yn(e))}function kw(e){var t=e.memoizedState,o=0;t!==null&&(o=t.retryLane),Lm(e,o)}function Nw(e,t){var o=0;switch(e.tag){case 31:case 13:var a=e.stateNode,u=e.memoizedState;u!==null&&(o=u.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(s(314))}a!==null&&a.delete(t),Lm(e,o)}function Ow(e,t){return _e(e,t)}var Pa=null,ao=null,Mu=!1,Ia=!1,ju=!1,Ir=0;function Yn(e){e!==ao&&e.next===null&&(ao===null?Pa=ao=e:ao=ao.next=e),Ia=!0,Mu||(Mu=!0,jw())}function ls(e,t){if(!ju&&Ia){ju=!0;do for(var o=!1,a=Pa;a!==null;){if(e!==0){var u=a.pendingLanes;if(u===0)var f=0;else{var v=a.suspendedLanes,_=a.pingedLanes;f=(1<<31-ze(42|e)+1)-1,f&=u&~(v&~_),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(o=!0,$m(a,f))}else f=tt,f=Hs(a,a===mt?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(f&3)===0||Ao(a,f)||(o=!0,$m(a,f));a=a.next}while(o);ju=!1}}function Mw(){Bm()}function Bm(){Ia=Mu=!1;var e=0;Ir!==0&&$w()&&(e=Ir);for(var t=qe(),o=null,a=Pa;a!==null;){var u=a.next,f=Hm(a,t);f===0?(a.next=null,o===null?Pa=u:o.next=u,u===null&&(ao=o)):(o=a,(e!==0||(f&3)!==0)&&(Ia=!0)),a=u}Dt!==0&&Dt!==5||ls(e),Ir!==0&&(Ir=0)}function Hm(e,t){for(var o=e.suspendedLanes,a=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-ze(f),_=1<<v,G=u[v];G===-1?((_&o)===0||(_&a)!==0)&&(u[v]=oS(_,t)):G<=t&&(e.expiredLanes|=_),f&=~_}if(t=mt,o=tt,o=Hs(e,e===t?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,o===0||e===t&&(ut===2||ut===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&ke(a),e.callbackNode=null,e.callbackPriority=0;if((o&3)===0||Ao(e,o)){if(t=o&-o,t===e.callbackPriority)return t;switch(a!==null&&ke(a),Yc(o)){case 2:case 8:o=w;break;case 32:o=j;break;case 268435456:o=q;break;default:o=j}return a=qm.bind(null,e),o=_e(o,a),e.callbackPriority=t,e.callbackNode=o,t}return a!==null&&a!==null&&ke(a),e.callbackPriority=2,e.callbackNode=null,2}function qm(e,t){if(Dt!==0&&Dt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var o=e.callbackNode;if(Da()&&e.callbackNode!==o)return null;var a=tt;return a=Hs(e,e===mt?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(Cm(e,a,t),Hm(e,qe()),e.callbackNode!=null&&e.callbackNode===o?qm.bind(null,e):null)}function $m(e,t){if(Da())return null;Cm(e,t,!0)}function jw(){Gw(function(){(at&6)!==0?_e(O,Mw):Bm()})}function Uu(){if(Ir===0){var e=Fi;e===0&&(e=Yt,Yt<<=1,(Yt&261888)===0&&(Yt=256)),Ir=e}return Ir}function Vm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Gs(""+e)}function Gm(e,t){var o=t.ownerDocument.createElement("input");return o.name=t.name,o.value=t.value,e.id&&o.setAttribute("form",e.id),t.parentNode.insertBefore(o,t),e=new FormData(e),o.parentNode.removeChild(o),e}function Uw(e,t,o,a,u){if(t==="submit"&&o&&o.stateNode===u){var f=Vm((u[an]||null).action),v=a.submitter;v&&(t=(t=v[an]||null)?Vm(t.formAction):v.getAttribute("formAction"),t!==null&&(f=t,v=null));var _=new Js("action","action",null,a,u);e.push({event:_,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(Ir!==0){var G=v?Gm(u,v):new FormData(u);eu(o,{pending:!0,data:G,method:u.method,action:f},null,G)}}else typeof f=="function"&&(_.preventDefault(),G=v?Gm(u,v):new FormData(u),eu(o,{pending:!0,data:G,method:u.method,action:f},f,G))},currentTarget:u}]})}}for(var Du=0;Du<yl.length;Du++){var Pu=yl[Du],Dw=Pu.toLowerCase(),Pw=Pu[0].toUpperCase()+Pu.slice(1);zn(Dw,"on"+Pw)}zn(Th,"onAnimationEnd"),zn(Ch,"onAnimationIteration"),zn(Rh,"onAnimationStart"),zn("dblclick","onDoubleClick"),zn("focusin","onFocus"),zn("focusout","onBlur"),zn(WS,"onTransitionRun"),zn(ZS,"onTransitionStart"),zn(ew,"onTransitionCancel"),zn(xh,"onTransitionEnd"),Mi("onMouseEnter",["mouseout","mouseover"]),Mi("onMouseLeave",["mouseout","mouseover"]),Mi("onPointerEnter",["pointerout","pointerover"]),Mi("onPointerLeave",["pointerout","pointerover"]),ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ei("onBeforeInput",["compositionend","keypress","textInput","paste"]),ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var us="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Iw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(us));function Fm(e,t){t=(t&4)!==0;for(var o=0;o<e.length;o++){var a=e[o],u=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var v=a.length-1;0<=v;v--){var _=a[v],G=_.instance,fe=_.currentTarget;if(_=_.listener,G!==f&&u.isPropagationStopped())break e;f=_,u.currentTarget=fe;try{f(u)}catch(be){Ws(be)}u.currentTarget=null,f=G}else for(v=0;v<a.length;v++){if(_=a[v],G=_.instance,fe=_.currentTarget,_=_.listener,G!==f&&u.isPropagationStopped())break e;f=_,u.currentTarget=fe;try{f(u)}catch(be){Ws(be)}u.currentTarget=null,f=G}}}}function Ze(e,t){var o=t[Jc];o===void 0&&(o=t[Jc]=new Set);var a=e+"__bubble";o.has(a)||(Xm(t,e,2,!1),o.add(a))}function Iu(e,t,o){var a=0;t&&(a|=4),Xm(o,e,a,t)}var za="_reactListening"+Math.random().toString(36).slice(2);function zu(e){if(!e[za]){e[za]=!0,Bf.forEach(function(o){o!=="selectionchange"&&(Iw.has(o)||Iu(o,!1,e),Iu(o,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[za]||(t[za]=!0,Iu("selectionchange",!1,t))}}function Xm(e,t,o,a){switch(Tg(t)){case 2:var u=dT;break;case 8:u=fT;break;default:u=Zu}o=u.bind(null,t,o,e),u=void 0,!il||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),a?u!==void 0?e.addEventListener(t,o,{capture:!0,passive:u}):e.addEventListener(t,o,!0):u!==void 0?e.addEventListener(t,o,{passive:u}):e.addEventListener(t,o,!1)}function Lu(e,t,o,a,u){var f=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var v=a.tag;if(v===3||v===4){var _=a.stateNode.containerInfo;if(_===u)break;if(v===4)for(v=a.return;v!==null;){var G=v.tag;if((G===3||G===4)&&v.stateNode.containerInfo===u)return;v=v.return}for(;_!==null;){if(v=ki(_),v===null)return;if(G=v.tag,G===5||G===6||G===26||G===27){a=f=v;continue e}_=_.parentNode}}a=a.return}Wf(function(){var fe=f,be=nl(o),Ce=[];e:{var he=Eh.get(e);if(he!==void 0){var ge=Js,Pe=e;switch(e){case"keypress":if(Xs(o)===0)break e;case"keydown":case"keyup":ge=NS;break;case"focusin":Pe="focus",ge=cl;break;case"focusout":Pe="blur",ge=cl;break;case"beforeblur":case"afterblur":ge=cl;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ge=th;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ge=vS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ge=jS;break;case Th:case Ch:case Rh:ge=wS;break;case xh:ge=DS;break;case"scroll":case"scrollend":ge=gS;break;case"wheel":ge=IS;break;case"copy":case"cut":case"paste":ge=CS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ge=rh;break;case"toggle":case"beforetoggle":ge=LS}var $e=(t&4)!==0,pt=!$e&&(e==="scroll"||e==="scrollend"),ce=$e?he!==null?he+"Capture":null:he;$e=[];for(var Q=fe,de;Q!==null;){var Se=Q;if(de=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||de===null||ce===null||(Se=Mo(Q,ce),Se!=null&&$e.push(ds(Q,Se,de))),pt)break;Q=Q.return}0<$e.length&&(he=new ge(he,Pe,null,o,be),Ce.push({event:he,listeners:$e}))}}if((t&7)===0){e:{if(he=e==="mouseover"||e==="pointerover",ge=e==="mouseout"||e==="pointerout",he&&o!==tl&&(Pe=o.relatedTarget||o.fromElement)&&(ki(Pe)||Pe[Ai]))break e;if((ge||he)&&(he=be.window===be?be:(he=be.ownerDocument)?he.defaultView||he.parentWindow:window,ge?(Pe=o.relatedTarget||o.toElement,ge=fe,Pe=Pe?ki(Pe):null,Pe!==null&&(pt=l(Pe),$e=Pe.tag,Pe!==pt||$e!==5&&$e!==27&&$e!==6)&&(Pe=null)):(ge=null,Pe=fe),ge!==Pe)){if($e=th,Se="onMouseLeave",ce="onMouseEnter",Q="mouse",(e==="pointerout"||e==="pointerover")&&($e=rh,Se="onPointerLeave",ce="onPointerEnter",Q="pointer"),pt=ge==null?he:Oo(ge),de=Pe==null?he:Oo(Pe),he=new $e(Se,Q+"leave",ge,o,be),he.target=pt,he.relatedTarget=de,Se=null,ki(be)===fe&&($e=new $e(ce,Q+"enter",Pe,o,be),$e.target=de,$e.relatedTarget=pt,Se=$e),pt=Se,ge&&Pe)t:{for($e=zw,ce=ge,Q=Pe,de=0,Se=ce;Se;Se=$e(Se))de++;Se=0;for(var Be=Q;Be;Be=$e(Be))Se++;for(;0<de-Se;)ce=$e(ce),de--;for(;0<Se-de;)Q=$e(Q),Se--;for(;de--;){if(ce===Q||Q!==null&&ce===Q.alternate){$e=ce;break t}ce=$e(ce),Q=$e(Q)}$e=null}else $e=null;ge!==null&&Ym(Ce,he,ge,$e,!1),Pe!==null&&pt!==null&&Ym(Ce,pt,Pe,$e,!0)}}e:{if(he=fe?Oo(fe):window,ge=he.nodeName&&he.nodeName.toLowerCase(),ge==="select"||ge==="input"&&he.type==="file")var it=dh;else if(lh(he))if(fh)it=JS;else{it=XS;var Le=FS}else ge=he.nodeName,!ge||ge.toLowerCase()!=="input"||he.type!=="checkbox"&&he.type!=="radio"?fe&&el(fe.elementType)&&(it=dh):it=YS;if(it&&(it=it(e,fe))){uh(Ce,it,o,be);break e}Le&&Le(e,he,fe),e==="focusout"&&fe&&he.type==="number"&&fe.memoizedProps.value!=null&&Zc(he,"number",he.value)}switch(Le=fe?Oo(fe):window,e){case"focusin":(lh(Le)||Le.contentEditable==="true")&&(zi=Le,pl=fe,Bo=null);break;case"focusout":Bo=pl=zi=null;break;case"mousedown":ml=!0;break;case"contextmenu":case"mouseup":case"dragend":ml=!1,Sh(Ce,o,be);break;case"selectionchange":if(QS)break;case"keydown":case"keyup":Sh(Ce,o,be)}var Je;if(ul)e:{switch(e){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else Ii?ah(e,o)&&(nt="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(nt="onCompositionStart");nt&&(ih&&o.locale!=="ko"&&(Ii||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&Ii&&(Je=Zf()):(wr=be,ol="value"in wr?wr.value:wr.textContent,Ii=!0)),Le=La(fe,nt),0<Le.length&&(nt=new nh(nt,e,null,o,be),Ce.push({event:nt,listeners:Le}),Je?nt.data=Je:(Je=ch(o),Je!==null&&(nt.data=Je)))),(Je=HS?qS(e,o):$S(e,o))&&(nt=La(fe,"onBeforeInput"),0<nt.length&&(Le=new nh("onBeforeInput","beforeinput",null,o,be),Ce.push({event:Le,listeners:nt}),Le.data=Je)),Uw(Ce,e,fe,o,be)}Fm(Ce,t)})}function ds(e,t,o){return{instance:e,listener:t,currentTarget:o}}function La(e,t){for(var o=t+"Capture",a=[];e!==null;){var u=e,f=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||f===null||(u=Mo(e,o),u!=null&&a.unshift(ds(e,u,f)),u=Mo(e,t),u!=null&&a.push(ds(e,u,f))),e.tag===3)return a;e=e.return}return[]}function zw(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ym(e,t,o,a,u){for(var f=t._reactName,v=[];o!==null&&o!==a;){var _=o,G=_.alternate,fe=_.stateNode;if(_=_.tag,G!==null&&G===a)break;_!==5&&_!==26&&_!==27||fe===null||(G=fe,u?(fe=Mo(o,f),fe!=null&&v.unshift(ds(o,fe,G))):u||(fe=Mo(o,f),fe!=null&&v.push(ds(o,fe,G)))),o=o.return}v.length!==0&&e.push({event:t,listeners:v})}var Lw=/\r\n?/g,Bw=/\u0000|\uFFFD/g;function Jm(e){return(typeof e=="string"?e:""+e).replace(Lw,`
`).replace(Bw,"")}function Km(e,t){return t=Jm(t),Jm(e)===t}function ht(e,t,o,a,u,f){switch(o){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||Ui(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&Ui(e,""+a);break;case"className":$s(e,"class",a);break;case"tabIndex":$s(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":$s(e,o,a);break;case"style":Kf(e,a,f);break;case"data":if(t!=="object"){$s(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||o!=="href")){e.removeAttribute(o);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(o);break}a=Gs(""+a),e.setAttribute(o,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(o==="formAction"?(t!=="input"&&ht(e,t,"name",u.name,u,null),ht(e,t,"formEncType",u.formEncType,u,null),ht(e,t,"formMethod",u.formMethod,u,null),ht(e,t,"formTarget",u.formTarget,u,null)):(ht(e,t,"encType",u.encType,u,null),ht(e,t,"method",u.method,u,null),ht(e,t,"target",u.target,u,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(o);break}a=Gs(""+a),e.setAttribute(o,a);break;case"onClick":a!=null&&(e.onclick=Zn);break;case"onScroll":a!=null&&Ze("scroll",e);break;case"onScrollEnd":a!=null&&Ze("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(o=a.__html,o!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=o}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}o=Gs(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(o,""+a):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":a===!0?e.setAttribute(o,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(o,a):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(o,a):e.removeAttribute(o);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(o):e.setAttribute(o,a);break;case"popover":Ze("beforetoggle",e),Ze("toggle",e),qs(e,"popover",a);break;case"xlinkActuate":Wn(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Wn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Wn(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Wn(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Wn(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Wn(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Wn(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Wn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Wn(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":qs(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=pS.get(o)||o,qs(e,o,a))}}function Bu(e,t,o,a,u,f){switch(o){case"style":Kf(e,a,f);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(o=a.__html,o!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=o}}break;case"children":typeof a=="string"?Ui(e,a):(typeof a=="number"||typeof a=="bigint")&&Ui(e,""+a);break;case"onScroll":a!=null&&Ze("scroll",e);break;case"onScrollEnd":a!=null&&Ze("scrollend",e);break;case"onClick":a!=null&&(e.onclick=Zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hf.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(u=o.endsWith("Capture"),t=o.slice(2,u?o.length-7:void 0),f=e[an]||null,f=f!=null?f[o]:null,typeof f=="function"&&e.removeEventListener(t,f,u),typeof a=="function")){typeof f!="function"&&f!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(t,a,u);break e}o in e?e[o]=a:a===!0?e.setAttribute(o,""):qs(e,o,a)}}}function Gt(e,t,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",e),Ze("load",e);var a=!1,u=!1,f;for(f in o)if(o.hasOwnProperty(f)){var v=o[f];if(v!=null)switch(f){case"src":a=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:ht(e,t,f,v,o,null)}}u&&ht(e,t,"srcSet",o.srcSet,o,null),a&&ht(e,t,"src",o.src,o,null);return;case"input":Ze("invalid",e);var _=f=v=u=null,G=null,fe=null;for(a in o)if(o.hasOwnProperty(a)){var be=o[a];if(be!=null)switch(a){case"name":u=be;break;case"type":v=be;break;case"checked":G=be;break;case"defaultChecked":fe=be;break;case"value":f=be;break;case"defaultValue":_=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(s(137,t));break;default:ht(e,t,a,be,o,null)}}Ff(e,f,_,G,fe,v,u,!1);return;case"select":Ze("invalid",e),a=v=f=null;for(u in o)if(o.hasOwnProperty(u)&&(_=o[u],_!=null))switch(u){case"value":f=_;break;case"defaultValue":v=_;break;case"multiple":a=_;default:ht(e,t,u,_,o,null)}t=f,o=v,e.multiple=!!a,t!=null?ji(e,!!a,t,!1):o!=null&&ji(e,!!a,o,!0);return;case"textarea":Ze("invalid",e),f=u=a=null;for(v in o)if(o.hasOwnProperty(v)&&(_=o[v],_!=null))switch(v){case"value":a=_;break;case"defaultValue":u=_;break;case"children":f=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:ht(e,t,v,_,o,null)}Yf(e,a,u,f);return;case"option":for(G in o)o.hasOwnProperty(G)&&(a=o[G],a!=null)&&(G==="selected"?e.selected=a&&typeof a!="function"&&typeof a!="symbol":ht(e,t,G,a,o,null));return;case"dialog":Ze("beforetoggle",e),Ze("toggle",e),Ze("cancel",e),Ze("close",e);break;case"iframe":case"object":Ze("load",e);break;case"video":case"audio":for(a=0;a<us.length;a++)Ze(us[a],e);break;case"image":Ze("error",e),Ze("load",e);break;case"details":Ze("toggle",e);break;case"embed":case"source":case"link":Ze("error",e),Ze("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(fe in o)if(o.hasOwnProperty(fe)&&(a=o[fe],a!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:ht(e,t,fe,a,o,null)}return;default:if(el(t)){for(be in o)o.hasOwnProperty(be)&&(a=o[be],a!==void 0&&Bu(e,t,be,a,o,void 0));return}}for(_ in o)o.hasOwnProperty(_)&&(a=o[_],a!=null&&ht(e,t,_,a,o,null))}function Hw(e,t,o,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,f=null,v=null,_=null,G=null,fe=null,be=null;for(ge in o){var Ce=o[ge];if(o.hasOwnProperty(ge)&&Ce!=null)switch(ge){case"checked":break;case"value":break;case"defaultValue":G=Ce;default:a.hasOwnProperty(ge)||ht(e,t,ge,null,a,Ce)}}for(var he in a){var ge=a[he];if(Ce=o[he],a.hasOwnProperty(he)&&(ge!=null||Ce!=null))switch(he){case"type":f=ge;break;case"name":u=ge;break;case"checked":fe=ge;break;case"defaultChecked":be=ge;break;case"value":v=ge;break;case"defaultValue":_=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(s(137,t));break;default:ge!==Ce&&ht(e,t,he,ge,a,Ce)}}Wc(e,v,_,G,fe,be,f,u);return;case"select":ge=v=_=he=null;for(f in o)if(G=o[f],o.hasOwnProperty(f)&&G!=null)switch(f){case"value":break;case"multiple":ge=G;default:a.hasOwnProperty(f)||ht(e,t,f,null,a,G)}for(u in a)if(f=a[u],G=o[u],a.hasOwnProperty(u)&&(f!=null||G!=null))switch(u){case"value":he=f;break;case"defaultValue":_=f;break;case"multiple":v=f;default:f!==G&&ht(e,t,u,f,a,G)}t=_,o=v,a=ge,he!=null?ji(e,!!o,he,!1):!!a!=!!o&&(t!=null?ji(e,!!o,t,!0):ji(e,!!o,o?[]:"",!1));return;case"textarea":ge=he=null;for(_ in o)if(u=o[_],o.hasOwnProperty(_)&&u!=null&&!a.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:ht(e,t,_,null,a,u)}for(v in a)if(u=a[v],f=o[v],a.hasOwnProperty(v)&&(u!=null||f!=null))switch(v){case"value":he=u;break;case"defaultValue":ge=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(s(91));break;default:u!==f&&ht(e,t,v,u,a,f)}Xf(e,he,ge);return;case"option":for(var Pe in o)he=o[Pe],o.hasOwnProperty(Pe)&&he!=null&&!a.hasOwnProperty(Pe)&&(Pe==="selected"?e.selected=!1:ht(e,t,Pe,null,a,he));for(G in a)he=a[G],ge=o[G],a.hasOwnProperty(G)&&he!==ge&&(he!=null||ge!=null)&&(G==="selected"?e.selected=he&&typeof he!="function"&&typeof he!="symbol":ht(e,t,G,he,a,ge));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in o)he=o[$e],o.hasOwnProperty($e)&&he!=null&&!a.hasOwnProperty($e)&&ht(e,t,$e,null,a,he);for(fe in a)if(he=a[fe],ge=o[fe],a.hasOwnProperty(fe)&&he!==ge&&(he!=null||ge!=null))switch(fe){case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(s(137,t));break;default:ht(e,t,fe,he,a,ge)}return;default:if(el(t)){for(var pt in o)he=o[pt],o.hasOwnProperty(pt)&&he!==void 0&&!a.hasOwnProperty(pt)&&Bu(e,t,pt,void 0,a,he);for(be in a)he=a[be],ge=o[be],!a.hasOwnProperty(be)||he===ge||he===void 0&&ge===void 0||Bu(e,t,be,he,a,ge);return}}for(var ce in o)he=o[ce],o.hasOwnProperty(ce)&&he!=null&&!a.hasOwnProperty(ce)&&ht(e,t,ce,null,a,he);for(Ce in a)he=a[Ce],ge=o[Ce],!a.hasOwnProperty(Ce)||he===ge||he==null&&ge==null||ht(e,t,Ce,he,a,ge)}function Qm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function qw(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,o=performance.getEntriesByType("resource"),a=0;a<o.length;a++){var u=o[a],f=u.transferSize,v=u.initiatorType,_=u.duration;if(f&&_&&Qm(v)){for(v=0,_=u.responseEnd,a+=1;a<o.length;a++){var G=o[a],fe=G.startTime;if(fe>_)break;var be=G.transferSize,Ce=G.initiatorType;be&&Qm(Ce)&&(G=G.responseEnd,v+=be*(G<_?1:(_-fe)/(G-fe)))}if(--a,t+=8*(f+v)/(u.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Hu=null,qu=null;function Ba(e){return e.nodeType===9?e:e.ownerDocument}function Wm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zm(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function $u(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Vu=null;function $w(){var e=window.event;return e&&e.type==="popstate"?e===Vu?!1:(Vu=e,!0):(Vu=null,!1)}var eg=typeof setTimeout=="function"?setTimeout:void 0,Vw=typeof clearTimeout=="function"?clearTimeout:void 0,tg=typeof Promise=="function"?Promise:void 0,Gw=typeof queueMicrotask=="function"?queueMicrotask:typeof tg<"u"?function(e){return tg.resolve(null).then(e).catch(Fw)}:eg;function Fw(e){setTimeout(function(){throw e})}function zr(e){return e==="head"}function ng(e,t){var o=t,a=0;do{var u=o.nextSibling;if(e.removeChild(o),u&&u.nodeType===8)if(o=u.data,o==="/$"||o==="/&"){if(a===0){e.removeChild(u),fo(t);return}a--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")a++;else if(o==="html")fs(e.ownerDocument.documentElement);else if(o==="head"){o=e.ownerDocument.head,fs(o);for(var f=o.firstChild;f;){var v=f.nextSibling,_=f.nodeName;f[No]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&f.rel.toLowerCase()==="stylesheet"||o.removeChild(f),f=v}}else o==="body"&&fs(e.ownerDocument.body);o=u}while(o);fo(t)}function rg(e,t){var o=e;e=0;do{var a=o.nextSibling;if(o.nodeType===1?t?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(t?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),a&&a.nodeType===8)if(o=a.data,o==="/$"){if(e===0)break;e--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||e++;o=a}while(o)}function Gu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var o=t;switch(t=t.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Gu(o),Kc(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function Xw(e,t,o,a){for(;e.nodeType===1;){var u=o;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[No])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Dn(e.nextSibling),e===null)break}return null}function Yw(e,t,o){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=Dn(e.nextSibling),e===null))return null;return e}function ig(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Dn(e.nextSibling),e===null))return null;return e}function Fu(e){return e.data==="$?"||e.data==="$~"}function Xu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Jw(e,t){var o=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||o.readyState!=="loading")t();else{var a=function(){t(),o.removeEventListener("DOMContentLoaded",a)};o.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function Dn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Yu=null;function og(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"||o==="/&"){if(t===0)return Dn(e.nextSibling);t--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||t++}e=e.nextSibling}return null}function sg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(t===0)return e;t--}else o!=="/$"&&o!=="/&"||t++}e=e.previousSibling}return null}function ag(e,t,o){switch(t=Ba(o),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function fs(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Kc(e)}var Pn=new Map,cg=new Set;function Ha(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var mr=M.d;M.d={f:Kw,r:Qw,D:Ww,C:Zw,L:eT,m:tT,X:rT,S:nT,M:iT};function Kw(){var e=mr.f(),t=Ma();return e||t}function Qw(e){var t=Ni(e);t!==null&&t.tag===5&&t.type==="form"?xp(t):mr.r(e)}var co=typeof document>"u"?null:document;function lg(e,t,o){var a=co;if(a&&typeof t=="string"&&t){var u=An(t);u='link[rel="'+e+'"][href="'+u+'"]',typeof o=="string"&&(u+='[crossorigin="'+o+'"]'),cg.has(u)||(cg.add(u),e={rel:e,crossOrigin:o,href:t},a.querySelector(u)===null&&(t=a.createElement("link"),Gt(t,"link",e),zt(t),a.head.appendChild(t)))}}function Ww(e){mr.D(e),lg("dns-prefetch",e,null)}function Zw(e,t){mr.C(e,t),lg("preconnect",e,t)}function eT(e,t,o){mr.L(e,t,o);var a=co;if(a&&e&&t){var u='link[rel="preload"][as="'+An(t)+'"]';t==="image"&&o&&o.imageSrcSet?(u+='[imagesrcset="'+An(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(u+='[imagesizes="'+An(o.imageSizes)+'"]')):u+='[href="'+An(e)+'"]';var f=u;switch(t){case"style":f=lo(e);break;case"script":f=uo(e)}Pn.has(f)||(e=E({rel:"preload",href:t==="image"&&o&&o.imageSrcSet?void 0:e,as:t},o),Pn.set(f,e),a.querySelector(u)!==null||t==="style"&&a.querySelector(hs(f))||t==="script"&&a.querySelector(ps(f))||(t=a.createElement("link"),Gt(t,"link",e),zt(t),a.head.appendChild(t)))}}function tT(e,t){mr.m(e,t);var o=co;if(o&&e){var a=t&&typeof t.as=="string"?t.as:"script",u='link[rel="modulepreload"][as="'+An(a)+'"][href="'+An(e)+'"]',f=u;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=uo(e)}if(!Pn.has(f)&&(e=E({rel:"modulepreload",href:e},t),Pn.set(f,e),o.querySelector(u)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(ps(f)))return}a=o.createElement("link"),Gt(a,"link",e),zt(a),o.head.appendChild(a)}}}function nT(e,t,o){mr.S(e,t,o);var a=co;if(a&&e){var u=Oi(a).hoistableStyles,f=lo(e);t=t||"default";var v=u.get(f);if(!v){var _={loading:0,preload:null};if(v=a.querySelector(hs(f)))_.loading=5;else{e=E({rel:"stylesheet",href:e,"data-precedence":t},o),(o=Pn.get(f))&&Ju(e,o);var G=v=a.createElement("link");zt(G),Gt(G,"link",e),G._p=new Promise(function(fe,be){G.onload=fe,G.onerror=be}),G.addEventListener("load",function(){_.loading|=1}),G.addEventListener("error",function(){_.loading|=2}),_.loading|=4,qa(v,t,a)}v={type:"stylesheet",instance:v,count:1,state:_},u.set(f,v)}}}function rT(e,t){mr.X(e,t);var o=co;if(o&&e){var a=Oi(o).hoistableScripts,u=uo(e),f=a.get(u);f||(f=o.querySelector(ps(u)),f||(e=E({src:e,async:!0},t),(t=Pn.get(u))&&Ku(e,t),f=o.createElement("script"),zt(f),Gt(f,"link",e),o.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},a.set(u,f))}}function iT(e,t){mr.M(e,t);var o=co;if(o&&e){var a=Oi(o).hoistableScripts,u=uo(e),f=a.get(u);f||(f=o.querySelector(ps(u)),f||(e=E({src:e,async:!0,type:"module"},t),(t=Pn.get(u))&&Ku(e,t),f=o.createElement("script"),zt(f),Gt(f,"link",e),o.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},a.set(u,f))}}function ug(e,t,o,a){var u=(u=k.current)?Ha(u):null;if(!u)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(t=lo(o.href),o=Oi(u).hoistableStyles,a=o.get(t),a||(a={type:"style",instance:null,count:0,state:null},o.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=lo(o.href);var f=Oi(u).hoistableStyles,v=f.get(e);if(v||(u=u.ownerDocument||u,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=u.querySelector(hs(e)))&&!f._p&&(v.instance=f,v.state.loading=5),Pn.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Pn.set(e,o),f||oT(u,e,o,v.state))),t&&a===null)throw Error(s(528,""));return v}if(t&&a!==null)throw Error(s(529,""));return null;case"script":return t=o.async,o=o.src,typeof o=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=uo(o),o=Oi(u).hoistableScripts,a=o.get(t),a||(a={type:"script",instance:null,count:0,state:null},o.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function lo(e){return'href="'+An(e)+'"'}function hs(e){return'link[rel="stylesheet"]['+e+"]"}function dg(e){return E({},e,{"data-precedence":e.precedence,precedence:null})}function oT(e,t,o,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),Gt(t,"link",o),zt(t),e.head.appendChild(t))}function uo(e){return'[src="'+An(e)+'"]'}function ps(e){return"script[async]"+e}function fg(e,t,o){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+An(o.href)+'"]');if(a)return t.instance=a,zt(a),a;var u=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),zt(a),Gt(a,"style",u),qa(a,o.precedence,e),t.instance=a;case"stylesheet":u=lo(o.href);var f=e.querySelector(hs(u));if(f)return t.state.loading|=4,t.instance=f,zt(f),f;a=dg(o),(u=Pn.get(u))&&Ju(a,u),f=(e.ownerDocument||e).createElement("link"),zt(f);var v=f;return v._p=new Promise(function(_,G){v.onload=_,v.onerror=G}),Gt(f,"link",a),t.state.loading|=4,qa(f,o.precedence,e),t.instance=f;case"script":return f=uo(o.src),(u=e.querySelector(ps(f)))?(t.instance=u,zt(u),u):(a=o,(u=Pn.get(f))&&(a=E({},o),Ku(a,u)),e=e.ownerDocument||e,u=e.createElement("script"),zt(u),Gt(u,"link",a),e.head.appendChild(u),t.instance=u);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,qa(a,o.precedence,e));return t.instance}function qa(e,t,o){for(var a=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=a.length?a[a.length-1]:null,f=u,v=0;v<a.length;v++){var _=a[v];if(_.dataset.precedence===t)f=_;else if(f!==u)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=o.nodeType===9?o.head:o,t.insertBefore(e,t.firstChild))}function Ju(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Ku(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var $a=null;function hg(e,t,o){if($a===null){var a=new Map,u=$a=new Map;u.set(o,a)}else u=$a,a=u.get(o),a||(a=new Map,u.set(o,a));if(a.has(e))return a;for(a.set(e,null),o=o.getElementsByTagName(e),u=0;u<o.length;u++){var f=o[u];if(!(f[No]||f[Ht]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(t)||"";v=e+v;var _=a.get(v);_?_.push(f):a.set(v,[f])}}return a}function pg(e,t,o){e=e.ownerDocument||e,e.head.insertBefore(o,t==="title"?e.querySelector("head > title"):null)}function sT(e,t,o){if(o===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function mg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function aT(e,t,o,a){if(o.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var u=lo(a.href),f=t.querySelector(hs(u));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Va.bind(e),t.then(e,e)),o.state.loading|=4,o.instance=f,zt(f);return}f=t.ownerDocument||t,a=dg(a),(u=Pn.get(u))&&Ju(a,u),f=f.createElement("link"),zt(f);var v=f;v._p=new Promise(function(_,G){v.onload=_,v.onerror=G}),Gt(f,"link",a),o.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(o,t),(t=o.state.preload)&&(o.state.loading&3)===0&&(e.count++,o=Va.bind(e),t.addEventListener("load",o),t.addEventListener("error",o))}}var Qu=0;function cT(e,t){return e.stylesheets&&e.count===0&&Fa(e,e.stylesheets),0<e.count||0<e.imgCount?function(o){var a=setTimeout(function(){if(e.stylesheets&&Fa(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+t);0<e.imgBytes&&Qu===0&&(Qu=62500*qw());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Fa(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>Qu?50:800)+t);return e.unsuspend=o,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(u)}}:null}function Va(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Fa(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ga=null;function Fa(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ga=new Map,t.forEach(lT,e),Ga=null,Va.call(e))}function lT(e,t){if(!(t.state.loading&4)){var o=Ga.get(e);if(o)var a=o.get(null);else{o=new Map,Ga.set(e,o);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<u.length;f++){var v=u[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),a=v)}a&&o.set(null,a)}u=t.instance,v=u.getAttribute("data-precedence"),f=o.get(v)||a,f===a&&o.set(null,u),o.set(v,u),this.count++,a=Va.bind(this),u.addEventListener("load",a),u.addEventListener("error",a),f?f.parentNode.insertBefore(u,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),t.state.loading|=4}}var ms={$$typeof:oe,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function uT(e,t,o,a,u,f,v,_,G){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fc(0),this.hiddenUpdates=Fc(null),this.identifierPrefix=a,this.onUncaughtError=u,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function gg(e,t,o,a,u,f,v,_,G,fe,be,Ce){return e=new uT(e,t,o,v,G,fe,be,Ce,_),t=1,f===!0&&(t|=24),f=bn(3,null,null,t),e.current=f,f.stateNode=e,t=Nl(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:a,isDehydrated:o,cache:t},Ul(f),e}function yg(e){return e?(e=Hi,e):Hi}function vg(e,t,o,a,u,f){u=yg(u),a.context===null?a.context=u:a.pendingContext=u,a=_r(t),a.payload={element:o},f=f===void 0?null:f,f!==null&&(a.callback=f),o=Ar(e,a,t),o!==null&&(hn(o,e,t),Xo(o,e,t))}function bg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<t?o:t}}function Wu(e,t){bg(e,t),(e=e.alternate)&&bg(e,t)}function Sg(e){if(e.tag===13||e.tag===31){var t=ii(e,67108864);t!==null&&hn(t,e,67108864),Wu(e,67108864)}}function wg(e){if(e.tag===13||e.tag===31){var t=Rn();t=Xc(t);var o=ii(e,t);o!==null&&hn(o,e,t),Wu(e,t)}}var Xa=!0;function dT(e,t,o,a){var u=$.T;$.T=null;var f=M.p;try{M.p=2,Zu(e,t,o,a)}finally{M.p=f,$.T=u}}function fT(e,t,o,a){var u=$.T;$.T=null;var f=M.p;try{M.p=8,Zu(e,t,o,a)}finally{M.p=f,$.T=u}}function Zu(e,t,o,a){if(Xa){var u=ed(a);if(u===null)Lu(e,t,a,Ya,o),Cg(e,a);else if(pT(u,e,t,o,a))a.stopPropagation();else if(Cg(e,a),t&4&&-1<hT.indexOf(e)){for(;u!==null;){var f=Ni(u);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=Zr(f.pendingLanes);if(v!==0){var _=f;for(_.pendingLanes|=2,_.entangledLanes|=2;v;){var G=1<<31-ze(v);_.entanglements[1]|=G,v&=~G}Yn(f),(at&6)===0&&(Na=qe()+500,ls(0))}}break;case 31:case 13:_=ii(f,2),_!==null&&hn(_,f,2),Ma(),Wu(f,2)}if(f=ed(a),f===null&&Lu(e,t,a,Ya,o),f===u)break;u=f}u!==null&&a.stopPropagation()}else Lu(e,t,a,null,o)}}function ed(e){return e=nl(e),td(e)}var Ya=null;function td(e){if(Ya=null,e=ki(e),e!==null){var t=l(e);if(t===null)e=null;else{var o=t.tag;if(o===13){if(e=d(t),e!==null)return e;e=null}else if(o===31){if(e=p(t),e!==null)return e;e=null}else if(o===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ya=e,null}function Tg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qe()){case O:return 2;case w:return 8;case j:case Z:return 32;case q:return 268435456;default:return 32}default:return 32}}var nd=!1,Lr=null,Br=null,Hr=null,gs=new Map,ys=new Map,qr=[],hT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Cg(e,t){switch(e){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":Hr=null;break;case"pointerover":case"pointerout":gs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ys.delete(t.pointerId)}}function vs(e,t,o,a,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:o,eventSystemFlags:a,nativeEvent:f,targetContainers:[u]},t!==null&&(t=Ni(t),t!==null&&Sg(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function pT(e,t,o,a,u){switch(t){case"focusin":return Lr=vs(Lr,e,t,o,a,u),!0;case"dragenter":return Br=vs(Br,e,t,o,a,u),!0;case"mouseover":return Hr=vs(Hr,e,t,o,a,u),!0;case"pointerover":var f=u.pointerId;return gs.set(f,vs(gs.get(f)||null,e,t,o,a,u)),!0;case"gotpointercapture":return f=u.pointerId,ys.set(f,vs(ys.get(f)||null,e,t,o,a,u)),!0}return!1}function Rg(e){var t=ki(e.target);if(t!==null){var o=l(t);if(o!==null){if(t=o.tag,t===13){if(t=d(o),t!==null){e.blockedOn=t,zf(e.priority,function(){wg(o)});return}}else if(t===31){if(t=p(o),t!==null){e.blockedOn=t,zf(e.priority,function(){wg(o)});return}}else if(t===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ja(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var o=ed(e.nativeEvent);if(o===null){o=e.nativeEvent;var a=new o.constructor(o.type,o);tl=a,o.target.dispatchEvent(a),tl=null}else return t=Ni(o),t!==null&&Sg(t),e.blockedOn=o,!1;t.shift()}return!0}function xg(e,t,o){Ja(e)&&o.delete(t)}function mT(){nd=!1,Lr!==null&&Ja(Lr)&&(Lr=null),Br!==null&&Ja(Br)&&(Br=null),Hr!==null&&Ja(Hr)&&(Hr=null),gs.forEach(xg),ys.forEach(xg)}function Ka(e,t){e.blockedOn===t&&(e.blockedOn=null,nd||(nd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,mT)))}var Qa=null;function Eg(e){Qa!==e&&(Qa=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Qa===e&&(Qa=null);for(var t=0;t<e.length;t+=3){var o=e[t],a=e[t+1],u=e[t+2];if(typeof a!="function"){if(td(a||o)===null)continue;break}var f=Ni(o);f!==null&&(e.splice(t,3),t-=3,eu(f,{pending:!0,data:u,method:o.method,action:a},a,u))}}))}function fo(e){function t(G){return Ka(G,e)}Lr!==null&&Ka(Lr,e),Br!==null&&Ka(Br,e),Hr!==null&&Ka(Hr,e),gs.forEach(t),ys.forEach(t);for(var o=0;o<qr.length;o++){var a=qr[o];a.blockedOn===e&&(a.blockedOn=null)}for(;0<qr.length&&(o=qr[0],o.blockedOn===null);)Rg(o),o.blockedOn===null&&qr.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(a=0;a<o.length;a+=3){var u=o[a],f=o[a+1],v=u[an]||null;if(typeof f=="function")v||Eg(o);else if(v){var _=null;if(f&&f.hasAttribute("formAction")){if(u=f,v=f[an]||null)_=v.formAction;else if(td(u)!==null)continue}else _=v.action;typeof _=="function"?o[a+1]=_:(o.splice(a,3),a-=3),Eg(o)}}}function _g(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(v){return u=v})},focusReset:"manual",scroll:"manual"})}function t(){u!==null&&(u(),u=null),a||setTimeout(o,20)}function o(){if(!a&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(o,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),u!==null&&(u(),u=null)}}}function rd(e){this._internalRoot=e}Wa.prototype.render=rd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var o=t.current,a=Rn();vg(o,a,e,t,null,null)},Wa.prototype.unmount=rd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;vg(e.current,2,null,e,null,null),Ma(),t[Ai]=null}};function Wa(e){this._internalRoot=e}Wa.prototype.unstable_scheduleHydration=function(e){if(e){var t=If();e={blockedOn:null,target:e,priority:t};for(var o=0;o<qr.length&&t!==0&&t<qr[o].priority;o++);qr.splice(o,0,e),o===0&&Rg(e)}};var Ag=n.version;if(Ag!=="19.2.3")throw Error(s(527,Ag,"19.2.3"));M.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=g(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var gT={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Za=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Za.isDisabled&&Za.supportsFiber)try{Ie=Za.inject(gT),Me=Za}catch{}}return Ss.createRoot=function(e,t){if(!c(e))throw Error(s(299));var o=!1,a="",u=Dp,f=Pp,v=Ip;return t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(u=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(v=t.onRecoverableError)),t=gg(e,1,!1,null,null,o,a,null,u,f,v,_g),e[Ai]=t.current,zu(e),new rd(t)},Ss.hydrateRoot=function(e,t,o){if(!c(e))throw Error(s(299));var a=!1,u="",f=Dp,v=Pp,_=Ip,G=null;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(f=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(_=o.onRecoverableError),o.formState!==void 0&&(G=o.formState)),t=gg(e,1,!0,t,o??null,a,u,G,f,v,_,_g),t.context=yg(null),o=t.current,a=Rn(),a=Xc(a),u=_r(a),u.callback=null,Ar(o,u,a),o=a,t.current.lanes=o,ko(t,o),Yn(t),e[Ai]=t.current,zu(e),new Wa(t)},Ss.version="19.2.3",Ss}var Lg;function ET(){if(Lg)return sd.exports;Lg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),sd.exports=xT(),sd.exports}var _T=ET();var Bg="popstate";function AT(r={}){function n(s,c){let{pathname:l,search:d,hash:p}=s.location;return Nd("",{pathname:l,search:d,hash:p},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function i(s,c){return typeof c=="string"?c:As(c)}return NT(n,i,null,r)}function St(r,n){if(r===!1||r===null||typeof r>"u")throw new Error(n)}function In(r,n){if(!r){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function kT(){return Math.random().toString(36).substring(2,10)}function Hg(r,n){return{usr:r.state,key:r.key,idx:n}}function Nd(r,n,i=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof n=="string"?wo(n):n,state:i,key:n&&n.key||s||kT()}}function As({pathname:r="/",search:n="",hash:i=""}){return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(r+=i.charAt(0)==="#"?i:"#"+i),r}function wo(r){let n={};if(r){let i=r.indexOf("#");i>=0&&(n.hash=r.substring(i),r=r.substring(0,i));let s=r.indexOf("?");s>=0&&(n.search=r.substring(s),r=r.substring(0,s)),r&&(n.pathname=r)}return n}function NT(r,n,i,s={}){let{window:c=document.defaultView,v5Compat:l=!1}=s,d=c.history,p="POP",m=null,g=y();g==null&&(g=0,d.replaceState({...d.state,idx:g},""));function y(){return(d.state||{idx:null}).idx}function E(){p="POP";let X=y(),ve=X==null?null:X-g;g=X,m&&m({action:p,location:re.location,delta:ve})}function I(X,ve){p="PUSH";let pe=Nd(re.location,X,ve);g=y()+1;let oe=Hg(pe,g),ee=re.createHref(pe);try{d.pushState(oe,"",ee)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;c.location.assign(ee)}l&&m&&m({action:p,location:re.location,delta:1})}function F(X,ve){p="REPLACE";let pe=Nd(re.location,X,ve);g=y();let oe=Hg(pe,g),ee=re.createHref(pe);d.replaceState(oe,"",ee),l&&m&&m({action:p,location:re.location,delta:0})}function U(X){return OT(X)}let re={get action(){return p},get location(){return r(c,d)},listen(X){if(m)throw new Error("A history only accepts one active listener");return c.addEventListener(Bg,E),m=X,()=>{c.removeEventListener(Bg,E),m=null}},createHref(X){return n(c,X)},createURL:U,encodeLocation(X){let ve=U(X);return{pathname:ve.pathname,search:ve.search,hash:ve.hash}},push:I,replace:F,go(X){return d.go(X)}};return re}function OT(r,n=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),St(i,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:As(r);return s=s.replace(/ $/,"%20"),!n&&s.startsWith("//")&&(s=i+s),new URL(s,i)}function Ky(r,n,i="/"){return MT(r,n,i,!1)}function MT(r,n,i,s){let c=typeof n=="string"?wo(n):n,l=vr(c.pathname||"/",i);if(l==null)return null;let d=Qy(r);jT(d);let p=null;for(let m=0;p==null&&m<d.length;++m){let g=VT(l);p=qT(d[m],g,s)}return p}function Qy(r,n=[],i=[],s="",c=!1){let l=(d,p,m=c,g)=>{let y={relativePath:g===void 0?d.path||"":g,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(s)&&m)return;St(y.relativePath.startsWith(s),`Absolute route path "${y.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(s.length)}let E=yr([s,y.relativePath]),I=i.concat(y);d.children&&d.children.length>0&&(St(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),Qy(d.children,n,I,E,m)),!(d.path==null&&!d.index)&&n.push({path:E,score:BT(E,d.index),routesMeta:I})};return r.forEach((d,p)=>{if(d.path===""||!d.path?.includes("?"))l(d,p);else for(let m of Wy(d.path))l(d,p,!0,m)}),n}function Wy(r){let n=r.split("/");if(n.length===0)return[];let[i,...s]=n,c=i.endsWith("?"),l=i.replace(/\?$/,"");if(s.length===0)return c?[l,""]:[l];let d=Wy(s.join("/")),p=[];return p.push(...d.map(m=>m===""?l:[l,m].join("/"))),c&&p.push(...d),p.map(m=>r.startsWith("/")&&m===""?"/":m)}function jT(r){r.sort((n,i)=>n.score!==i.score?i.score-n.score:HT(n.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}var UT=/^:[\w-]+$/,DT=3,PT=2,IT=1,zT=10,LT=-2,qg=r=>r==="*";function BT(r,n){let i=r.split("/"),s=i.length;return i.some(qg)&&(s+=LT),n&&(s+=PT),i.filter(c=>!qg(c)).reduce((c,l)=>c+(UT.test(l)?DT:l===""?IT:zT),s)}function HT(r,n){return r.length===n.length&&r.slice(0,-1).every((s,c)=>s===n[c])?r[r.length-1]-n[n.length-1]:0}function qT(r,n,i=!1){let{routesMeta:s}=r,c={},l="/",d=[];for(let p=0;p<s.length;++p){let m=s[p],g=p===s.length-1,y=l==="/"?n:n.slice(l.length)||"/",E=mc({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},y),I=m.route;if(!E&&g&&i&&!s[s.length-1].route.index&&(E=mc({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!E)return null;Object.assign(c,E.params),d.push({params:c,pathname:yr([l,E.pathname]),pathnameBase:YT(yr([l,E.pathnameBase])),route:I}),E.pathnameBase!=="/"&&(l=yr([l,E.pathnameBase]))}return d}function mc(r,n){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[i,s]=$T(r.path,r.caseSensitive,r.end),c=n.match(i);if(!c)return null;let l=c[0],d=l.replace(/(.)\/+$/,"$1"),p=c.slice(1);return{params:s.reduce((g,{paramName:y,isOptional:E},I)=>{if(y==="*"){let U=p[I]||"";d=l.slice(0,l.length-U.length).replace(/(.)\/+$/,"$1")}const F=p[I];return E&&!F?g[y]=void 0:g[y]=(F||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:d,pattern:r}}function $T(r,n=!1,i=!0){In(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],c="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,m)=>(s.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(s.push({paramName:"*"}),c+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?c+="\\/*$":r!==""&&r!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,n?void 0:"i"),s]}function VT(r){try{return r.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return In(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),r}}function vr(r,n){if(n==="/")return r;if(!r.toLowerCase().startsWith(n.toLowerCase()))return null;let i=n.endsWith("/")?n.length-1:n.length,s=r.charAt(i);return s&&s!=="/"?null:r.slice(i)||"/"}var Zy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GT=r=>Zy.test(r);function FT(r,n="/"){let{pathname:i,search:s="",hash:c=""}=typeof r=="string"?wo(r):r,l;if(i)if(GT(i))l=i;else{if(i.includes("//")){let d=i;i=i.replace(/\/\/+/g,"/"),In(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${i}`)}i.startsWith("/")?l=$g(i.substring(1),"/"):l=$g(i,n)}else l=n;return{pathname:l,search:JT(s),hash:KT(c)}}function $g(r,n){let i=n.replace(/\/+$/,"").split("/");return r.split("/").forEach(c=>{c===".."?i.length>1&&i.pop():c!=="."&&i.push(c)}),i.length>1?i.join("/"):"/"}function ud(r,n,i,s){return`Cannot include a '${r}' character in a manually specified \`to.${n}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function XT(r){return r.filter((n,i)=>i===0||n.route.path&&n.route.path.length>0)}function Xd(r){let n=XT(r);return n.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase)}function Yd(r,n,i,s=!1){let c;typeof r=="string"?c=wo(r):(c={...r},St(!c.pathname||!c.pathname.includes("?"),ud("?","pathname","search",c)),St(!c.pathname||!c.pathname.includes("#"),ud("#","pathname","hash",c)),St(!c.search||!c.search.includes("#"),ud("#","search","hash",c)));let l=r===""||c.pathname==="",d=l?"/":c.pathname,p;if(d==null)p=i;else{let E=n.length-1;if(!s&&d.startsWith("..")){let I=d.split("/");for(;I[0]==="..";)I.shift(),E-=1;c.pathname=I.join("/")}p=E>=0?n[E]:"/"}let m=FT(c,p),g=d&&d!=="/"&&d.endsWith("/"),y=(l||d===".")&&i.endsWith("/");return!m.pathname.endsWith("/")&&(g||y)&&(m.pathname+="/"),m}var yr=r=>r.join("/").replace(/\/\/+/g,"/"),YT=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),JT=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,KT=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,QT=class{constructor(r,n,i,s=!1){this.status=r,this.statusText=n||"",this.internal=s,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function WT(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function ZT(r){return r.map(n=>n.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var ev=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function tv(r,n){let i=r;if(typeof i!="string"||!Zy.test(i))return{absoluteURL:void 0,isExternal:!1,to:i};let s=i,c=!1;if(ev)try{let l=new URL(window.location.href),d=i.startsWith("//")?new URL(l.protocol+i):new URL(i),p=vr(d.pathname,n);d.origin===l.origin&&p!=null?i=p+d.search+d.hash:c=!0}catch{In(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:c,to:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var nv=["POST","PUT","PATCH","DELETE"];new Set(nv);var eC=["GET",...nv];new Set(eC);var To=z.createContext(null);To.displayName="DataRouter";var xc=z.createContext(null);xc.displayName="DataRouterState";var tC=z.createContext(!1),rv=z.createContext({isTransitioning:!1});rv.displayName="ViewTransition";var nC=z.createContext(new Map);nC.displayName="Fetchers";var rC=z.createContext(null);rC.displayName="Await";var En=z.createContext(null);En.displayName="Navigation";var Ms=z.createContext(null);Ms.displayName="Location";var $n=z.createContext({outlet:null,matches:[],isDataRoute:!1});$n.displayName="Route";var Jd=z.createContext(null);Jd.displayName="RouteError";var iv="REACT_ROUTER_ERROR",iC="REDIRECT",oC="ROUTE_ERROR_RESPONSE";function sC(r){if(r.startsWith(`${iv}:${iC}:{`))try{let n=JSON.parse(r.slice(28));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.location=="string"&&typeof n.reloadDocument=="boolean"&&typeof n.replace=="boolean")return n}catch{}}function aC(r){if(r.startsWith(`${iv}:${oC}:{`))try{let n=JSON.parse(r.slice(40));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string")return new QT(n.status,n.statusText,n.data)}catch{}}function cC(r,{relative:n}={}){St(Co(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:s}=z.useContext(En),{hash:c,pathname:l,search:d}=js(r,{relative:n}),p=l;return i!=="/"&&(p=l==="/"?i:yr([i,l])),s.createHref({pathname:p,search:d,hash:c})}function Co(){return z.useContext(Ms)!=null}function Qn(){return St(Co(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(Ms).location}var ov="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sv(r){z.useContext(En).static||z.useLayoutEffect(r)}function Qr(){let{isDataRoute:r}=z.useContext($n);return r?wC():lC()}function lC(){St(Co(),"useNavigate() may be used only in the context of a <Router> component.");let r=z.useContext(To),{basename:n,navigator:i}=z.useContext(En),{matches:s}=z.useContext($n),{pathname:c}=Qn(),l=JSON.stringify(Xd(s)),d=z.useRef(!1);return sv(()=>{d.current=!0}),z.useCallback((m,g={})=>{if(In(d.current,ov),!d.current)return;if(typeof m=="number"){i.go(m);return}let y=Yd(m,JSON.parse(l),c,g.relative==="path");r==null&&n!=="/"&&(y.pathname=y.pathname==="/"?n:yr([n,y.pathname])),(g.replace?i.replace:i.push)(y,g.state,g)},[n,i,l,c,r])}z.createContext(null);function av(){let{matches:r}=z.useContext($n),n=r[r.length-1];return n?n.params:{}}function js(r,{relative:n}={}){let{matches:i}=z.useContext($n),{pathname:s}=Qn(),c=JSON.stringify(Xd(i));return z.useMemo(()=>Yd(r,JSON.parse(c),s,n==="path"),[r,c,s,n])}function uC(r,n){return cv(r,n)}function cv(r,n,i,s,c){St(Co(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=z.useContext(En),{matches:d}=z.useContext($n),p=d[d.length-1],m=p?p.params:{},g=p?p.pathname:"/",y=p?p.pathnameBase:"/",E=p&&p.route;{let pe=E&&E.path||"";uv(g,!E||pe.endsWith("*")||pe.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${pe}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${pe}"> to <Route path="${pe==="/"?"*":`${pe}/*`}">.`)}let I=Qn(),F;if(n){let pe=typeof n=="string"?wo(n):n;St(y==="/"||pe.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${pe.pathname}" was given in the \`location\` prop.`),F=pe}else F=I;let U=F.pathname||"/",re=U;if(y!=="/"){let pe=y.replace(/^\//,"").split("/");re="/"+U.replace(/^\//,"").split("/").slice(pe.length).join("/")}let X=Ky(r,{pathname:re});In(E||X!=null,`No routes matched location "${F.pathname}${F.search}${F.hash}" `),In(X==null||X[X.length-1].route.element!==void 0||X[X.length-1].route.Component!==void 0||X[X.length-1].route.lazy!==void 0,`Matched leaf route at location "${F.pathname}${F.search}${F.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ve=mC(X&&X.map(pe=>Object.assign({},pe,{params:Object.assign({},m,pe.params),pathname:yr([y,l.encodeLocation?l.encodeLocation(pe.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:pe.pathname]),pathnameBase:pe.pathnameBase==="/"?y:yr([y,l.encodeLocation?l.encodeLocation(pe.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:pe.pathnameBase])})),d,i,s,c);return n&&ve?z.createElement(Ms.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...F},navigationType:"POP"}},ve):ve}function dC(){let r=SC(),n=WT(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),i=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",r),d=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:l},"ErrorBoundary")," or"," ",z.createElement("code",{style:l},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},n),i?z.createElement("pre",{style:c},i):null,d)}var fC=z.createElement(dC,null),lv=class extends z.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,n){return n.location!==r.location||n.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:n.error,location:n.location,revalidation:r.revalidation||n.revalidation}}componentDidCatch(r,n){this.props.onError?this.props.onError(r,n):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const i=aC(r.digest);i&&(r=i)}let n=r!==void 0?z.createElement($n.Provider,{value:this.props.routeContext},z.createElement(Jd.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?z.createElement(hC,{error:r},n):n}};lv.contextType=tC;var dd=new WeakMap;function hC({children:r,error:n}){let{basename:i}=z.useContext(En);if(typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){let s=sC(n.digest);if(s){let c=dd.get(n);if(c)throw c;let l=tv(s.location,i);if(ev&&!dd.get(n))if(l.isExternal||s.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:s.replace}));throw dd.set(n,d),d}return z.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return r}function pC({routeContext:r,match:n,children:i}){let s=z.useContext(To);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),z.createElement($n.Provider,{value:r},i)}function mC(r,n=[],i=null,s=null,c=null){if(r==null){if(!i)return null;if(i.errors)r=i.matches;else if(n.length===0&&!i.initialized&&i.matches.length>0)r=i.matches;else return null}let l=r,d=i?.errors;if(d!=null){let y=l.findIndex(E=>E.route.id&&d?.[E.route.id]!==void 0);St(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let p=!1,m=-1;if(i)for(let y=0;y<l.length;y++){let E=l[y];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(m=y),E.route.id){let{loaderData:I,errors:F}=i,U=E.route.loader&&!I.hasOwnProperty(E.route.id)&&(!F||F[E.route.id]===void 0);if(E.route.lazy||U){p=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let g=i&&s?(y,E)=>{s(y,{location:i.location,params:i.matches?.[0]?.params??{},unstable_pattern:ZT(i.matches),errorInfo:E})}:void 0;return l.reduceRight((y,E,I)=>{let F,U=!1,re=null,X=null;i&&(F=d&&E.route.id?d[E.route.id]:void 0,re=E.route.errorElement||fC,p&&(m<0&&I===0?(uv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),U=!0,X=null):m===I&&(U=!0,X=E.route.hydrateFallbackElement||null)));let ve=n.concat(l.slice(0,I+1)),pe=()=>{let oe;return F?oe=re:U?oe=X:E.route.Component?oe=z.createElement(E.route.Component,null):E.route.element?oe=E.route.element:oe=y,z.createElement(pC,{match:E,routeContext:{outlet:y,matches:ve,isDataRoute:i!=null},children:oe})};return i&&(E.route.ErrorBoundary||E.route.errorElement||I===0)?z.createElement(lv,{location:i.location,revalidation:i.revalidation,component:re,error:F,children:pe(),routeContext:{outlet:null,matches:ve,isDataRoute:!0},onError:g}):pe()},null)}function Kd(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gC(r){let n=z.useContext(To);return St(n,Kd(r)),n}function yC(r){let n=z.useContext(xc);return St(n,Kd(r)),n}function vC(r){let n=z.useContext($n);return St(n,Kd(r)),n}function Qd(r){let n=vC(r),i=n.matches[n.matches.length-1];return St(i.route.id,`${r} can only be used on routes that contain a unique "id"`),i.route.id}function bC(){return Qd("useRouteId")}function SC(){let r=z.useContext(Jd),n=yC("useRouteError"),i=Qd("useRouteError");return r!==void 0?r:n.errors?.[i]}function wC(){let{router:r}=gC("useNavigate"),n=Qd("useNavigate"),i=z.useRef(!1);return sv(()=>{i.current=!0}),z.useCallback(async(c,l={})=>{In(i.current,ov),i.current&&(typeof c=="number"?await r.navigate(c):await r.navigate(c,{fromRouteId:n,...l}))},[r,n])}var Vg={};function uv(r,n,i){!n&&!Vg[r]&&(Vg[r]=!0,In(!1,i))}z.memo(TC);function TC({routes:r,future:n,state:i,onError:s}){return cv(r,void 0,i,s,n)}function gr({to:r,replace:n,state:i,relative:s}){St(Co(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=z.useContext(En);In(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=z.useContext($n),{pathname:d}=Qn(),p=Qr(),m=Yd(r,Xd(l),d,s==="path"),g=JSON.stringify(m);return z.useEffect(()=>{p(JSON.parse(g),{replace:n,state:i,relative:s})},[p,g,s,n,i]),null}function pn(r){St(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function CC({basename:r="/",children:n=null,location:i,navigationType:s="POP",navigator:c,static:l=!1,unstable_useTransitions:d}){St(!Co(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=r.replace(/^\/*/,"/"),m=z.useMemo(()=>({basename:p,navigator:c,static:l,unstable_useTransitions:d,future:{}}),[p,c,l,d]);typeof i=="string"&&(i=wo(i));let{pathname:g="/",search:y="",hash:E="",state:I=null,key:F="default"}=i,U=z.useMemo(()=>{let re=vr(g,p);return re==null?null:{location:{pathname:re,search:y,hash:E,state:I,key:F},navigationType:s}},[p,g,y,E,I,F,s]);return In(U!=null,`<Router basename="${p}"> is not able to match the URL "${g}${y}${E}" because it does not start with the basename, so the <Router> won't render anything.`),U==null?null:z.createElement(En.Provider,{value:m},z.createElement(Ms.Provider,{children:n,value:U}))}function RC({children:r,location:n}){return uC(Od(r),n)}function Od(r,n=[]){let i=[];return z.Children.forEach(r,(s,c)=>{if(!z.isValidElement(s))return;let l=[...n,c];if(s.type===z.Fragment){i.push.apply(i,Od(s.props.children,l));return}St(s.type===pn,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),St(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=Od(s.props.children,l)),i.push(d)}),i}var lc="get",uc="application/x-www-form-urlencoded";function Ec(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function xC(r){return Ec(r)&&r.tagName.toLowerCase()==="button"}function EC(r){return Ec(r)&&r.tagName.toLowerCase()==="form"}function _C(r){return Ec(r)&&r.tagName.toLowerCase()==="input"}function AC(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function kC(r,n){return r.button===0&&(!n||n==="_self")&&!AC(r)}var ec=null;function NC(){if(ec===null)try{new FormData(document.createElement("form"),0),ec=!1}catch{ec=!0}return ec}var OC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function fd(r){return r!=null&&!OC.has(r)?(In(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${uc}"`),null):r}function MC(r,n){let i,s,c,l,d;if(EC(r)){let p=r.getAttribute("action");s=p?vr(p,n):null,i=r.getAttribute("method")||lc,c=fd(r.getAttribute("enctype"))||uc,l=new FormData(r)}else if(xC(r)||_C(r)&&(r.type==="submit"||r.type==="image")){let p=r.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=r.getAttribute("formaction")||p.getAttribute("action");if(s=m?vr(m,n):null,i=r.getAttribute("formmethod")||p.getAttribute("method")||lc,c=fd(r.getAttribute("formenctype"))||fd(p.getAttribute("enctype"))||uc,l=new FormData(p,r),!NC()){let{name:g,type:y,value:E}=r;if(y==="image"){let I=g?`${g}.`:"";l.append(`${I}x`,"0"),l.append(`${I}y`,"0")}else g&&l.append(g,E)}}else{if(Ec(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=lc,s=null,c=uc,d=r}return l&&c==="text/plain"&&(d=l,l=void 0),{action:s,method:i.toLowerCase(),encType:c,formData:l,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Wd(r,n){if(r===!1||r===null||typeof r>"u")throw new Error(n)}function jC(r,n,i){let s=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return s.pathname==="/"?s.pathname=`_root.${i}`:n&&vr(s.pathname,n)==="/"?s.pathname=`${n.replace(/\/$/,"")}/_root.${i}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${i}`,s}async function UC(r,n){if(r.id in n)return n[r.id];try{let i=await import(r.module);return n[r.id]=i,i}catch(i){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function DC(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function PC(r,n,i){let s=await Promise.all(r.map(async c=>{let l=n.routes[c.route.id];if(l){let d=await UC(l,i);return d.links?d.links():[]}return[]}));return BC(s.flat(1).filter(DC).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function Gg(r,n,i,s,c,l){let d=(m,g)=>i[g]?m.route.id!==i[g].route.id:!0,p=(m,g)=>i[g].pathname!==m.pathname||i[g].route.path?.endsWith("*")&&i[g].params["*"]!==m.params["*"];return l==="assets"?n.filter((m,g)=>d(m,g)||p(m,g)):l==="data"?n.filter((m,g)=>{let y=s.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(d(m,g)||p(m,g))return!0;if(m.route.shouldRevalidate){let E=m.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function IC(r,n,{includeHydrateFallback:i}={}){return zC(r.map(s=>{let c=n.routes[s.route.id];if(!c)return[];let l=[c.module];return c.clientActionModule&&(l=l.concat(c.clientActionModule)),c.clientLoaderModule&&(l=l.concat(c.clientLoaderModule)),i&&c.hydrateFallbackModule&&(l=l.concat(c.hydrateFallbackModule)),c.imports&&(l=l.concat(c.imports)),l}).flat(1))}function zC(r){return[...new Set(r)]}function LC(r){let n={},i=Object.keys(r).sort();for(let s of i)n[s]=r[s];return n}function BC(r,n){let i=new Set;return new Set(n),r.reduce((s,c)=>{let l=JSON.stringify(LC(c));return i.has(l)||(i.add(l),s.push({key:l,link:c})),s},[])}function dv(){let r=z.useContext(To);return Wd(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function HC(){let r=z.useContext(xc);return Wd(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Zd=z.createContext(void 0);Zd.displayName="FrameworkContext";function fv(){let r=z.useContext(Zd);return Wd(r,"You must render this element inside a <HydratedRouter> element"),r}function qC(r,n){let i=z.useContext(Zd),[s,c]=z.useState(!1),[l,d]=z.useState(!1),{onFocus:p,onBlur:m,onMouseEnter:g,onMouseLeave:y,onTouchStart:E}=n,I=z.useRef(null);z.useEffect(()=>{if(r==="render"&&d(!0),r==="viewport"){let re=ve=>{ve.forEach(pe=>{d(pe.isIntersecting)})},X=new IntersectionObserver(re,{threshold:.5});return I.current&&X.observe(I.current),()=>{X.disconnect()}}},[r]),z.useEffect(()=>{if(s){let re=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(re)}}},[s]);let F=()=>{c(!0)},U=()=>{c(!1),d(!1)};return i?r!=="intent"?[l,I,{}]:[l,I,{onFocus:ws(p,F),onBlur:ws(m,U),onMouseEnter:ws(g,F),onMouseLeave:ws(y,U),onTouchStart:ws(E,F)}]:[!1,I,{}]}function ws(r,n){return i=>{r&&r(i),i.defaultPrevented||n(i)}}function $C({page:r,...n}){let{router:i}=dv(),s=z.useMemo(()=>Ky(i.routes,r,i.basename),[i.routes,r,i.basename]);return s?z.createElement(GC,{page:r,matches:s,...n}):null}function VC(r){let{manifest:n,routeModules:i}=fv(),[s,c]=z.useState([]);return z.useEffect(()=>{let l=!1;return PC(r,n,i).then(d=>{l||c(d)}),()=>{l=!0}},[r,n,i]),s}function GC({page:r,matches:n,...i}){let s=Qn(),{manifest:c,routeModules:l}=fv(),{basename:d}=dv(),{loaderData:p,matches:m}=HC(),g=z.useMemo(()=>Gg(r,n,m,c,s,"data"),[r,n,m,c,s]),y=z.useMemo(()=>Gg(r,n,m,c,s,"assets"),[r,n,m,c,s]),E=z.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let U=new Set,re=!1;if(n.forEach(ve=>{let pe=c.routes[ve.route.id];!pe||!pe.hasLoader||(!g.some(oe=>oe.route.id===ve.route.id)&&ve.route.id in p&&l[ve.route.id]?.shouldRevalidate||pe.hasClientLoader?re=!0:U.add(ve.route.id))}),U.size===0)return[];let X=jC(r,d,"data");return re&&U.size>0&&X.searchParams.set("_routes",n.filter(ve=>U.has(ve.route.id)).map(ve=>ve.route.id).join(",")),[X.pathname+X.search]},[d,p,s,c,g,n,r,l]),I=z.useMemo(()=>IC(y,c),[y,c]),F=VC(y);return z.createElement(z.Fragment,null,E.map(U=>z.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...i})),I.map(U=>z.createElement("link",{key:U,rel:"modulepreload",href:U,...i})),F.map(({key:U,link:re})=>z.createElement("link",{key:U,nonce:i.nonce,...re})))}function FC(...r){return n=>{r.forEach(i=>{typeof i=="function"?i(n):i!=null&&(i.current=n)})}}var XC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{XC&&(window.__reactRouterVersion="7.11.0")}catch{}function YC({basename:r,children:n,unstable_useTransitions:i,window:s}){let c=z.useRef();c.current==null&&(c.current=AT({window:s,v5Compat:!0}));let l=c.current,[d,p]=z.useState({action:l.action,location:l.location}),m=z.useCallback(g=>{i===!1?p(g):z.startTransition(()=>p(g))},[i]);return z.useLayoutEffect(()=>l.listen(m),[l,m]),z.createElement(CC,{basename:r,children:n,location:d.location,navigationType:d.action,navigator:l,unstable_useTransitions:i})}var hv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hn=z.forwardRef(function({onClick:n,discover:i="render",prefetch:s="none",relative:c,reloadDocument:l,replace:d,state:p,target:m,to:g,preventScrollReset:y,viewTransition:E,unstable_defaultShouldRevalidate:I,...F},U){let{basename:re,unstable_useTransitions:X}=z.useContext(En),ve=typeof g=="string"&&hv.test(g),pe=tv(g,re);g=pe.to;let oe=cC(g,{relative:c}),[ee,ae,le]=qC(s,F),ne=WC(g,{replace:d,state:p,target:m,preventScrollReset:y,relative:c,viewTransition:E,unstable_defaultShouldRevalidate:I,unstable_useTransitions:X});function Re(Ae){n&&n(Ae),Ae.defaultPrevented||ne(Ae)}let Ee=z.createElement("a",{...F,...le,href:pe.absoluteURL||oe,onClick:pe.isExternal||l?n:Re,ref:FC(U,ae),target:m,"data-discover":!ve&&i==="render"?"true":void 0});return ee&&!ve?z.createElement(z.Fragment,null,Ee,z.createElement($C,{page:oe})):Ee});Hn.displayName="Link";var JC=z.forwardRef(function({"aria-current":n="page",caseSensitive:i=!1,className:s="",end:c=!1,style:l,to:d,viewTransition:p,children:m,...g},y){let E=js(d,{relative:g.relative}),I=Qn(),F=z.useContext(xc),{navigator:U,basename:re}=z.useContext(En),X=F!=null&&r1(E)&&p===!0,ve=U.encodeLocation?U.encodeLocation(E).pathname:E.pathname,pe=I.pathname,oe=F&&F.navigation&&F.navigation.location?F.navigation.location.pathname:null;i||(pe=pe.toLowerCase(),oe=oe?oe.toLowerCase():null,ve=ve.toLowerCase()),oe&&re&&(oe=vr(oe,re)||oe);const ee=ve!=="/"&&ve.endsWith("/")?ve.length-1:ve.length;let ae=pe===ve||!c&&pe.startsWith(ve)&&pe.charAt(ee)==="/",le=oe!=null&&(oe===ve||!c&&oe.startsWith(ve)&&oe.charAt(ve.length)==="/"),ne={isActive:ae,isPending:le,isTransitioning:X},Re=ae?n:void 0,Ee;typeof s=="function"?Ee=s(ne):Ee=[s,ae?"active":null,le?"pending":null,X?"transitioning":null].filter(Boolean).join(" ");let Ae=typeof l=="function"?l(ne):l;return z.createElement(Hn,{...g,"aria-current":Re,className:Ee,ref:y,style:Ae,to:d,viewTransition:p},typeof m=="function"?m(ne):m)});JC.displayName="NavLink";var KC=z.forwardRef(({discover:r="render",fetcherKey:n,navigate:i,reloadDocument:s,replace:c,state:l,method:d=lc,action:p,onSubmit:m,relative:g,preventScrollReset:y,viewTransition:E,unstable_defaultShouldRevalidate:I,...F},U)=>{let{unstable_useTransitions:re}=z.useContext(En),X=t1(),ve=n1(p,{relative:g}),pe=d.toLowerCase()==="get"?"get":"post",oe=typeof p=="string"&&hv.test(p),ee=ae=>{if(m&&m(ae),ae.defaultPrevented)return;ae.preventDefault();let le=ae.nativeEvent.submitter,ne=le?.getAttribute("formmethod")||d,Re=()=>X(le||ae.currentTarget,{fetcherKey:n,method:ne,navigate:i,replace:c,state:l,relative:g,preventScrollReset:y,viewTransition:E,unstable_defaultShouldRevalidate:I});re&&i!==!1?z.startTransition(()=>Re()):Re()};return z.createElement("form",{ref:U,method:pe,action:ve,onSubmit:s?m:ee,...F,"data-discover":!oe&&r==="render"?"true":void 0})});KC.displayName="Form";function QC(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pv(r){let n=z.useContext(To);return St(n,QC(r)),n}function WC(r,{target:n,replace:i,state:s,preventScrollReset:c,relative:l,viewTransition:d,unstable_defaultShouldRevalidate:p,unstable_useTransitions:m}={}){let g=Qr(),y=Qn(),E=js(r,{relative:l});return z.useCallback(I=>{if(kC(I,n)){I.preventDefault();let F=i!==void 0?i:As(y)===As(E),U=()=>g(r,{replace:F,state:s,preventScrollReset:c,relative:l,viewTransition:d,unstable_defaultShouldRevalidate:p});m?z.startTransition(()=>U()):U()}},[y,g,E,i,s,n,r,c,l,d,p,m])}var ZC=0,e1=()=>`__${String(++ZC)}__`;function t1(){let{router:r}=pv("useSubmit"),{basename:n}=z.useContext(En),i=bC(),s=r.fetch,c=r.navigate;return z.useCallback(async(l,d={})=>{let{action:p,method:m,encType:g,formData:y,body:E}=MC(l,n);if(d.navigate===!1){let I=d.fetcherKey||e1();await s(I,i,d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:y,body:E,formMethod:d.method||m,formEncType:d.encType||g,flushSync:d.flushSync})}else await c(d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:y,body:E,formMethod:d.method||m,formEncType:d.encType||g,replace:d.replace,state:d.state,fromRouteId:i,flushSync:d.flushSync,viewTransition:d.viewTransition})},[s,c,n,i])}function n1(r,{relative:n}={}){let{basename:i}=z.useContext(En),s=z.useContext($n);St(s,"useFormAction must be used inside a RouteContext");let[c]=s.matches.slice(-1),l={...js(r||".",{relative:n})},d=Qn();if(r==null){l.search=d.search;let p=new URLSearchParams(l.search),m=p.getAll("index");if(m.some(y=>y==="")){p.delete("index"),m.filter(E=>E).forEach(E=>p.append("index",E));let y=p.toString();l.search=y?`?${y}`:""}}return(!r||r===".")&&c.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(l.pathname=l.pathname==="/"?i:yr([i,l.pathname])),As(l)}function r1(r,{relative:n}={}){let i=z.useContext(rv);St(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=pv("useViewTransitionState"),c=js(r,{relative:n});if(!i.isTransitioning)return!1;let l=vr(i.currentLocation.pathname,s)||i.currentLocation.pathname,d=vr(i.nextLocation.pathname,s)||i.nextLocation.pathname;return mc(c.pathname,d)!=null||mc(c.pathname,l)!=null}const i1=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o1=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,i,s)=>s?s.toUpperCase():i.toLowerCase()),Fg=r=>{const n=o1(r);return n.charAt(0).toUpperCase()+n.slice(1)},mv=(...r)=>r.filter((n,i,s)=>!!n&&n.trim()!==""&&s.indexOf(n)===i).join(" ").trim(),s1=r=>{for(const n in r)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};var a1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const c1=z.forwardRef(({color:r="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:c="",children:l,iconNode:d,...p},m)=>z.createElement("svg",{ref:m,...a1,width:n,height:n,stroke:r,strokeWidth:s?Number(i)*24/Number(n):i,className:mv("lucide",c),...!l&&!s1(p)&&{"aria-hidden":"true"},...p},[...d.map(([g,y])=>z.createElement(g,y)),...Array.isArray(l)?l:[l]]));const ct=(r,n)=>{const i=z.forwardRef(({className:s,...c},l)=>z.createElement(c1,{ref:l,iconNode:n,className:mv(`lucide-${i1(Fg(r))}`,`lucide-${r}`,s),...c}));return i.displayName=Fg(r),i};const l1=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ef=ct("arrow-left",l1);const u1=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],gv=ct("chevron-down",u1);const d1=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],yv=ct("chevron-right",d1);const f1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],h1=ct("circle-alert",f1);const p1=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Xg=ct("circle-check-big",p1);const m1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],gc=ct("circle-question-mark",m1);const g1=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],y1=ct("clock",g1);const v1=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],b1=ct("copy",v1);const S1=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],vv=ct("eye-off",S1);const w1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],tf=ct("eye",w1);const T1=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],bv=ct("funnel",T1);const C1=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],R1=ct("house",C1);const x1=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],E1=ct("layout-dashboard",x1);const _1=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],A1=ct("log-out",_1);const k1=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Yg=ct("mail",k1);const N1=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],O1=ct("map-pin",N1);const M1=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],j1=ct("menu",M1);const U1=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],yc=ct("message-circle",U1);const D1=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],P1=ct("message-square",D1);const I1=[["path",{d:"M5 12h14",key:"1ays0h"}]],Sv=ct("minus",I1);const z1=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],L1=ct("phone",z1);const B1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],wv=ct("plus",B1);const H1=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],po=ct("send",H1);const q1=[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]],$1=ct("share",q1);const V1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],G1=ct("shield-check",V1);const F1=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],X1=ct("square-pen",F1);const Y1=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Md=ct("star",Y1);const J1=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],K1=ct("upload",J1);const Q1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],W1=ct("user",Q1);const Z1=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],_c=ct("users",Z1);const eR=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],nf=ct("x",eR),Tv=z.createContext(),tR=()=>{const r=z.useContext(Tv);if(!r)throw new Error("useNotifications must be used within NotificationProvider");return r},nR=({children:r})=>{const[n,i]=z.useState(0),s=()=>{i(0)};return h.jsx(Tv.Provider,{value:{unreadCount:n,clearUnreadCount:s},children:r})};function Cv(r,n){return function(){return r.apply(n,arguments)}}const{toString:rR}=Object.prototype,{getPrototypeOf:rf}=Object,{iterator:Ac,toStringTag:Rv}=Symbol,kc=(r=>n=>{const i=rR.call(n);return r[i]||(r[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Vn=r=>(r=r.toLowerCase(),n=>kc(n)===r),Nc=r=>n=>typeof n===r,{isArray:Ro}=Array,mo=Nc("undefined");function Us(r){return r!==null&&!mo(r)&&r.constructor!==null&&!mo(r.constructor)&&gn(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const xv=Vn("ArrayBuffer");function iR(r){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(r):n=r&&r.buffer&&xv(r.buffer),n}const oR=Nc("string"),gn=Nc("function"),Ev=Nc("number"),Ds=r=>r!==null&&typeof r=="object",sR=r=>r===!0||r===!1,dc=r=>{if(kc(r)!=="object")return!1;const n=rf(r);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Rv in r)&&!(Ac in r)},aR=r=>{if(!Ds(r)||Us(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},cR=Vn("Date"),lR=Vn("File"),uR=Vn("Blob"),dR=Vn("FileList"),fR=r=>Ds(r)&&gn(r.pipe),hR=r=>{let n;return r&&(typeof FormData=="function"&&r instanceof FormData||gn(r.append)&&((n=kc(r))==="formdata"||n==="object"&&gn(r.toString)&&r.toString()==="[object FormData]"))},pR=Vn("URLSearchParams"),[mR,gR,yR,vR]=["ReadableStream","Request","Response","Headers"].map(Vn),bR=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ps(r,n,{allOwnKeys:i=!1}={}){if(r===null||typeof r>"u")return;let s,c;if(typeof r!="object"&&(r=[r]),Ro(r))for(s=0,c=r.length;s<c;s++)n.call(null,r[s],s,r);else{if(Us(r))return;const l=i?Object.getOwnPropertyNames(r):Object.keys(r),d=l.length;let p;for(s=0;s<d;s++)p=l[s],n.call(null,r[p],p,r)}}function _v(r,n){if(Us(r))return null;n=n.toLowerCase();const i=Object.keys(r);let s=i.length,c;for(;s-- >0;)if(c=i[s],n===c.toLowerCase())return c;return null}const yi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Av=r=>!mo(r)&&r!==yi;function jd(){const{caseless:r,skipUndefined:n}=Av(this)&&this||{},i={},s=(c,l)=>{const d=r&&_v(i,l)||l;dc(i[d])&&dc(c)?i[d]=jd(i[d],c):dc(c)?i[d]=jd({},c):Ro(c)?i[d]=c.slice():(!n||!mo(c))&&(i[d]=c)};for(let c=0,l=arguments.length;c<l;c++)arguments[c]&&Ps(arguments[c],s);return i}const SR=(r,n,i,{allOwnKeys:s}={})=>(Ps(n,(c,l)=>{i&&gn(c)?r[l]=Cv(c,i):r[l]=c},{allOwnKeys:s}),r),wR=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),TR=(r,n,i,s)=>{r.prototype=Object.create(n.prototype,s),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:n.prototype}),i&&Object.assign(r.prototype,i)},CR=(r,n,i,s)=>{let c,l,d;const p={};if(n=n||{},r==null)return n;do{for(c=Object.getOwnPropertyNames(r),l=c.length;l-- >0;)d=c[l],(!s||s(d,r,n))&&!p[d]&&(n[d]=r[d],p[d]=!0);r=i!==!1&&rf(r)}while(r&&(!i||i(r,n))&&r!==Object.prototype);return n},RR=(r,n,i)=>{r=String(r),(i===void 0||i>r.length)&&(i=r.length),i-=n.length;const s=r.indexOf(n,i);return s!==-1&&s===i},xR=r=>{if(!r)return null;if(Ro(r))return r;let n=r.length;if(!Ev(n))return null;const i=new Array(n);for(;n-- >0;)i[n]=r[n];return i},ER=(r=>n=>r&&n instanceof r)(typeof Uint8Array<"u"&&rf(Uint8Array)),_R=(r,n)=>{const s=(r&&r[Ac]).call(r);let c;for(;(c=s.next())&&!c.done;){const l=c.value;n.call(r,l[0],l[1])}},AR=(r,n)=>{let i;const s=[];for(;(i=r.exec(n))!==null;)s.push(i);return s},kR=Vn("HTMLFormElement"),NR=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,s,c){return s.toUpperCase()+c}),Jg=(({hasOwnProperty:r})=>(n,i)=>r.call(n,i))(Object.prototype),OR=Vn("RegExp"),kv=(r,n)=>{const i=Object.getOwnPropertyDescriptors(r),s={};Ps(i,(c,l)=>{let d;(d=n(c,l,r))!==!1&&(s[l]=d||c)}),Object.defineProperties(r,s)},MR=r=>{kv(r,(n,i)=>{if(gn(r)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const s=r[i];if(gn(s)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},jR=(r,n)=>{const i={},s=c=>{c.forEach(l=>{i[l]=!0})};return Ro(r)?s(r):s(String(r).split(n)),i},UR=()=>{},DR=(r,n)=>r!=null&&Number.isFinite(r=+r)?r:n;function PR(r){return!!(r&&gn(r.append)&&r[Rv]==="FormData"&&r[Ac])}const IR=r=>{const n=new Array(10),i=(s,c)=>{if(Ds(s)){if(n.indexOf(s)>=0)return;if(Us(s))return s;if(!("toJSON"in s)){n[c]=s;const l=Ro(s)?[]:{};return Ps(s,(d,p)=>{const m=i(d,c+1);!mo(m)&&(l[p]=m)}),n[c]=void 0,l}}return s};return i(r,0)},zR=Vn("AsyncFunction"),LR=r=>r&&(Ds(r)||gn(r))&&gn(r.then)&&gn(r.catch),Nv=((r,n)=>r?setImmediate:n?((i,s)=>(yi.addEventListener("message",({source:c,data:l})=>{c===yi&&l===i&&s.length&&s.shift()()},!1),c=>{s.push(c),yi.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",gn(yi.postMessage)),BR=typeof queueMicrotask<"u"?queueMicrotask.bind(yi):typeof process<"u"&&process.nextTick||Nv,HR=r=>r!=null&&gn(r[Ac]),me={isArray:Ro,isArrayBuffer:xv,isBuffer:Us,isFormData:hR,isArrayBufferView:iR,isString:oR,isNumber:Ev,isBoolean:sR,isObject:Ds,isPlainObject:dc,isEmptyObject:aR,isReadableStream:mR,isRequest:gR,isResponse:yR,isHeaders:vR,isUndefined:mo,isDate:cR,isFile:lR,isBlob:uR,isRegExp:OR,isFunction:gn,isStream:fR,isURLSearchParams:pR,isTypedArray:ER,isFileList:dR,forEach:Ps,merge:jd,extend:SR,trim:bR,stripBOM:wR,inherits:TR,toFlatObject:CR,kindOf:kc,kindOfTest:Vn,endsWith:RR,toArray:xR,forEachEntry:_R,matchAll:AR,isHTMLForm:kR,hasOwnProperty:Jg,hasOwnProp:Jg,reduceDescriptors:kv,freezeMethods:MR,toObjectSet:jR,toCamelCase:NR,noop:UR,toFiniteNumber:DR,findKey:_v,global:yi,isContextDefined:Av,isSpecCompliantForm:PR,toJSONObject:IR,isAsyncFn:zR,isThenable:LR,setImmediate:Nv,asap:BR,isIterable:HR};function Ye(r,n,i,s,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",n&&(this.code=n),i&&(this.config=i),s&&(this.request=s),c&&(this.response=c,this.status=c.status?c.status:null)}me.inherits(Ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:me.toJSONObject(this.config),code:this.code,status:this.status}}});const Ov=Ye.prototype,Mv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{Mv[r]={value:r}});Object.defineProperties(Ye,Mv);Object.defineProperty(Ov,"isAxiosError",{value:!0});Ye.from=(r,n,i,s,c,l)=>{const d=Object.create(Ov);me.toFlatObject(r,d,function(y){return y!==Error.prototype},g=>g!=="isAxiosError");const p=r&&r.message?r.message:"Error",m=n==null&&r?r.code:n;return Ye.call(d,p,m,i,s,c),r&&d.cause==null&&Object.defineProperty(d,"cause",{value:r,configurable:!0}),d.name=r&&r.name||"Error",l&&Object.assign(d,l),d};const qR=null;function Ud(r){return me.isPlainObject(r)||me.isArray(r)}function jv(r){return me.endsWith(r,"[]")?r.slice(0,-2):r}function Kg(r,n,i){return r?r.concat(n).map(function(c,l){return c=jv(c),!i&&l?"["+c+"]":c}).join(i?".":""):n}function $R(r){return me.isArray(r)&&!r.some(Ud)}const VR=me.toFlatObject(me,{},null,function(n){return/^is[A-Z]/.test(n)});function Oc(r,n,i){if(!me.isObject(r))throw new TypeError("target must be an object");n=n||new FormData,i=me.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(re,X){return!me.isUndefined(X[re])});const s=i.metaTokens,c=i.visitor||y,l=i.dots,d=i.indexes,m=(i.Blob||typeof Blob<"u"&&Blob)&&me.isSpecCompliantForm(n);if(!me.isFunction(c))throw new TypeError("visitor must be a function");function g(U){if(U===null)return"";if(me.isDate(U))return U.toISOString();if(me.isBoolean(U))return U.toString();if(!m&&me.isBlob(U))throw new Ye("Blob is not supported. Use a Buffer instead.");return me.isArrayBuffer(U)||me.isTypedArray(U)?m&&typeof Blob=="function"?new Blob([U]):Buffer.from(U):U}function y(U,re,X){let ve=U;if(U&&!X&&typeof U=="object"){if(me.endsWith(re,"{}"))re=s?re:re.slice(0,-2),U=JSON.stringify(U);else if(me.isArray(U)&&$R(U)||(me.isFileList(U)||me.endsWith(re,"[]"))&&(ve=me.toArray(U)))return re=jv(re),ve.forEach(function(oe,ee){!(me.isUndefined(oe)||oe===null)&&n.append(d===!0?Kg([re],ee,l):d===null?re:re+"[]",g(oe))}),!1}return Ud(U)?!0:(n.append(Kg(X,re,l),g(U)),!1)}const E=[],I=Object.assign(VR,{defaultVisitor:y,convertValue:g,isVisitable:Ud});function F(U,re){if(!me.isUndefined(U)){if(E.indexOf(U)!==-1)throw Error("Circular reference detected in "+re.join("."));E.push(U),me.forEach(U,function(ve,pe){(!(me.isUndefined(ve)||ve===null)&&c.call(n,ve,me.isString(pe)?pe.trim():pe,re,I))===!0&&F(ve,re?re.concat(pe):[pe])}),E.pop()}}if(!me.isObject(r))throw new TypeError("data must be an object");return F(r),n}function Qg(r){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(s){return n[s]})}function of(r,n){this._pairs=[],r&&Oc(r,this,n)}const Uv=of.prototype;Uv.append=function(n,i){this._pairs.push([n,i])};Uv.toString=function(n){const i=n?function(s){return n.call(this,s,Qg)}:Qg;return this._pairs.map(function(c){return i(c[0])+"="+i(c[1])},"").join("&")};function GR(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Dv(r,n,i){if(!n)return r;const s=i&&i.encode||GR;me.isFunction(i)&&(i={serialize:i});const c=i&&i.serialize;let l;if(c?l=c(n,i):l=me.isURLSearchParams(n)?n.toString():new of(n,i).toString(s),l){const d=r.indexOf("#");d!==-1&&(r=r.slice(0,d)),r+=(r.indexOf("?")===-1?"?":"&")+l}return r}class Wg{constructor(){this.handlers=[]}use(n,i,s){return this.handlers.push({fulfilled:n,rejected:i,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){me.forEach(this.handlers,function(s){s!==null&&n(s)})}}const Pv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},FR=typeof URLSearchParams<"u"?URLSearchParams:of,XR=typeof FormData<"u"?FormData:null,YR=typeof Blob<"u"?Blob:null,JR={isBrowser:!0,classes:{URLSearchParams:FR,FormData:XR,Blob:YR},protocols:["http","https","file","blob","url","data"]},sf=typeof window<"u"&&typeof document<"u",Dd=typeof navigator=="object"&&navigator||void 0,KR=sf&&(!Dd||["ReactNative","NativeScript","NS"].indexOf(Dd.product)<0),QR=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",WR=sf&&window.location.href||"http://localhost",ZR=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:sf,hasStandardBrowserEnv:KR,hasStandardBrowserWebWorkerEnv:QR,navigator:Dd,origin:WR},Symbol.toStringTag,{value:"Module"})),nn={...ZR,...JR};function ex(r,n){return Oc(r,new nn.classes.URLSearchParams,{visitor:function(i,s,c,l){return nn.isNode&&me.isBuffer(i)?(this.append(s,i.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...n})}function tx(r){return me.matchAll(/\w+|\[(\w*)]/g,r).map(n=>n[0]==="[]"?"":n[1]||n[0])}function nx(r){const n={},i=Object.keys(r);let s;const c=i.length;let l;for(s=0;s<c;s++)l=i[s],n[l]=r[l];return n}function Iv(r){function n(i,s,c,l){let d=i[l++];if(d==="__proto__")return!0;const p=Number.isFinite(+d),m=l>=i.length;return d=!d&&me.isArray(c)?c.length:d,m?(me.hasOwnProp(c,d)?c[d]=[c[d],s]:c[d]=s,!p):((!c[d]||!me.isObject(c[d]))&&(c[d]=[]),n(i,s,c[d],l)&&me.isArray(c[d])&&(c[d]=nx(c[d])),!p)}if(me.isFormData(r)&&me.isFunction(r.entries)){const i={};return me.forEachEntry(r,(s,c)=>{n(tx(s),c,i,0)}),i}return null}function rx(r,n,i){if(me.isString(r))try{return(n||JSON.parse)(r),me.trim(r)}catch(s){if(s.name!=="SyntaxError")throw s}return(i||JSON.stringify)(r)}const Is={transitional:Pv,adapter:["xhr","http","fetch"],transformRequest:[function(n,i){const s=i.getContentType()||"",c=s.indexOf("application/json")>-1,l=me.isObject(n);if(l&&me.isHTMLForm(n)&&(n=new FormData(n)),me.isFormData(n))return c?JSON.stringify(Iv(n)):n;if(me.isArrayBuffer(n)||me.isBuffer(n)||me.isStream(n)||me.isFile(n)||me.isBlob(n)||me.isReadableStream(n))return n;if(me.isArrayBufferView(n))return n.buffer;if(me.isURLSearchParams(n))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let p;if(l){if(s.indexOf("application/x-www-form-urlencoded")>-1)return ex(n,this.formSerializer).toString();if((p=me.isFileList(n))||s.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Oc(p?{"files[]":n}:n,m&&new m,this.formSerializer)}}return l||c?(i.setContentType("application/json",!1),rx(n)):n}],transformResponse:[function(n){const i=this.transitional||Is.transitional,s=i&&i.forcedJSONParsing,c=this.responseType==="json";if(me.isResponse(n)||me.isReadableStream(n))return n;if(n&&me.isString(n)&&(s&&!this.responseType||c)){const d=!(i&&i.silentJSONParsing)&&c;try{return JSON.parse(n,this.parseReviver)}catch(p){if(d)throw p.name==="SyntaxError"?Ye.from(p,Ye.ERR_BAD_RESPONSE,this,null,this.response):p}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:nn.classes.FormData,Blob:nn.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};me.forEach(["delete","get","head","post","put","patch"],r=>{Is.headers[r]={}});const ix=me.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ox=r=>{const n={};let i,s,c;return r&&r.split(`
`).forEach(function(d){c=d.indexOf(":"),i=d.substring(0,c).trim().toLowerCase(),s=d.substring(c+1).trim(),!(!i||n[i]&&ix[i])&&(i==="set-cookie"?n[i]?n[i].push(s):n[i]=[s]:n[i]=n[i]?n[i]+", "+s:s)}),n},Zg=Symbol("internals");function Ts(r){return r&&String(r).trim().toLowerCase()}function fc(r){return r===!1||r==null?r:me.isArray(r)?r.map(fc):String(r)}function sx(r){const n=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=i.exec(r);)n[s[1]]=s[2];return n}const ax=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function hd(r,n,i,s,c){if(me.isFunction(s))return s.call(this,n,i);if(c&&(n=i),!!me.isString(n)){if(me.isString(s))return n.indexOf(s)!==-1;if(me.isRegExp(s))return s.test(n)}}function cx(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,i,s)=>i.toUpperCase()+s)}function lx(r,n){const i=me.toCamelCase(" "+n);["get","set","has"].forEach(s=>{Object.defineProperty(r,s+i,{value:function(c,l,d){return this[s].call(this,n,c,l,d)},configurable:!0})})}let yn=class{constructor(n){n&&this.set(n)}set(n,i,s){const c=this;function l(p,m,g){const y=Ts(m);if(!y)throw new Error("header name must be a non-empty string");const E=me.findKey(c,y);(!E||c[E]===void 0||g===!0||g===void 0&&c[E]!==!1)&&(c[E||m]=fc(p))}const d=(p,m)=>me.forEach(p,(g,y)=>l(g,y,m));if(me.isPlainObject(n)||n instanceof this.constructor)d(n,i);else if(me.isString(n)&&(n=n.trim())&&!ax(n))d(ox(n),i);else if(me.isObject(n)&&me.isIterable(n)){let p={},m,g;for(const y of n){if(!me.isArray(y))throw TypeError("Object iterator must return a key-value pair");p[g=y[0]]=(m=p[g])?me.isArray(m)?[...m,y[1]]:[m,y[1]]:y[1]}d(p,i)}else n!=null&&l(i,n,s);return this}get(n,i){if(n=Ts(n),n){const s=me.findKey(this,n);if(s){const c=this[s];if(!i)return c;if(i===!0)return sx(c);if(me.isFunction(i))return i.call(this,c,s);if(me.isRegExp(i))return i.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,i){if(n=Ts(n),n){const s=me.findKey(this,n);return!!(s&&this[s]!==void 0&&(!i||hd(this,this[s],s,i)))}return!1}delete(n,i){const s=this;let c=!1;function l(d){if(d=Ts(d),d){const p=me.findKey(s,d);p&&(!i||hd(s,s[p],p,i))&&(delete s[p],c=!0)}}return me.isArray(n)?n.forEach(l):l(n),c}clear(n){const i=Object.keys(this);let s=i.length,c=!1;for(;s--;){const l=i[s];(!n||hd(this,this[l],l,n,!0))&&(delete this[l],c=!0)}return c}normalize(n){const i=this,s={};return me.forEach(this,(c,l)=>{const d=me.findKey(s,l);if(d){i[d]=fc(c),delete i[l];return}const p=n?cx(l):String(l).trim();p!==l&&delete i[l],i[p]=fc(c),s[p]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const i=Object.create(null);return me.forEach(this,(s,c)=>{s!=null&&s!==!1&&(i[c]=n&&me.isArray(s)?s.join(", "):s)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,i])=>n+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...i){const s=new this(n);return i.forEach(c=>s.set(c)),s}static accessor(n){const s=(this[Zg]=this[Zg]={accessors:{}}).accessors,c=this.prototype;function l(d){const p=Ts(d);s[p]||(lx(c,d),s[p]=!0)}return me.isArray(n)?n.forEach(l):l(n),this}};yn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);me.reduceDescriptors(yn.prototype,({value:r},n)=>{let i=n[0].toUpperCase()+n.slice(1);return{get:()=>r,set(s){this[i]=s}}});me.freezeMethods(yn);function pd(r,n){const i=this||Is,s=n||i,c=yn.from(s.headers);let l=s.data;return me.forEach(r,function(p){l=p.call(i,l,c.normalize(),n?n.status:void 0)}),c.normalize(),l}function zv(r){return!!(r&&r.__CANCEL__)}function xo(r,n,i){Ye.call(this,r??"canceled",Ye.ERR_CANCELED,n,i),this.name="CanceledError"}me.inherits(xo,Ye,{__CANCEL__:!0});function Lv(r,n,i){const s=i.config.validateStatus;!i.status||!s||s(i.status)?r(i):n(new Ye("Request failed with status code "+i.status,[Ye.ERR_BAD_REQUEST,Ye.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function ux(r){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return n&&n[1]||""}function dx(r,n){r=r||10;const i=new Array(r),s=new Array(r);let c=0,l=0,d;return n=n!==void 0?n:1e3,function(m){const g=Date.now(),y=s[l];d||(d=g),i[c]=m,s[c]=g;let E=l,I=0;for(;E!==c;)I+=i[E++],E=E%r;if(c=(c+1)%r,c===l&&(l=(l+1)%r),g-d<n)return;const F=y&&g-y;return F?Math.round(I*1e3/F):void 0}}function fx(r,n){let i=0,s=1e3/n,c,l;const d=(g,y=Date.now())=>{i=y,c=null,l&&(clearTimeout(l),l=null),r(...g)};return[(...g)=>{const y=Date.now(),E=y-i;E>=s?d(g,y):(c=g,l||(l=setTimeout(()=>{l=null,d(c)},s-E)))},()=>c&&d(c)]}const vc=(r,n,i=3)=>{let s=0;const c=dx(50,250);return fx(l=>{const d=l.loaded,p=l.lengthComputable?l.total:void 0,m=d-s,g=c(m),y=d<=p;s=d;const E={loaded:d,total:p,progress:p?d/p:void 0,bytes:m,rate:g||void 0,estimated:g&&p&&y?(p-d)/g:void 0,event:l,lengthComputable:p!=null,[n?"download":"upload"]:!0};r(E)},i)},ey=(r,n)=>{const i=r!=null;return[s=>n[0]({lengthComputable:i,total:r,loaded:s}),n[1]]},ty=r=>(...n)=>me.asap(()=>r(...n)),hx=nn.hasStandardBrowserEnv?((r,n)=>i=>(i=new URL(i,nn.origin),r.protocol===i.protocol&&r.host===i.host&&(n||r.port===i.port)))(new URL(nn.origin),nn.navigator&&/(msie|trident)/i.test(nn.navigator.userAgent)):()=>!0,px=nn.hasStandardBrowserEnv?{write(r,n,i,s,c,l,d){if(typeof document>"u")return;const p=[`${r}=${encodeURIComponent(n)}`];me.isNumber(i)&&p.push(`expires=${new Date(i).toUTCString()}`),me.isString(s)&&p.push(`path=${s}`),me.isString(c)&&p.push(`domain=${c}`),l===!0&&p.push("secure"),me.isString(d)&&p.push(`SameSite=${d}`),document.cookie=p.join("; ")},read(r){if(typeof document>"u")return null;const n=document.cookie.match(new RegExp("(?:^|; )"+r+"=([^;]*)"));return n?decodeURIComponent(n[1]):null},remove(r){this.write(r,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function mx(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function gx(r,n){return n?r.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):r}function Bv(r,n,i){let s=!mx(n);return r&&(s||i==!1)?gx(r,n):n}const ny=r=>r instanceof yn?{...r}:r;function Ti(r,n){n=n||{};const i={};function s(g,y,E,I){return me.isPlainObject(g)&&me.isPlainObject(y)?me.merge.call({caseless:I},g,y):me.isPlainObject(y)?me.merge({},y):me.isArray(y)?y.slice():y}function c(g,y,E,I){if(me.isUndefined(y)){if(!me.isUndefined(g))return s(void 0,g,E,I)}else return s(g,y,E,I)}function l(g,y){if(!me.isUndefined(y))return s(void 0,y)}function d(g,y){if(me.isUndefined(y)){if(!me.isUndefined(g))return s(void 0,g)}else return s(void 0,y)}function p(g,y,E){if(E in n)return s(g,y);if(E in r)return s(void 0,g)}const m={url:l,method:l,data:l,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:p,headers:(g,y,E)=>c(ny(g),ny(y),E,!0)};return me.forEach(Object.keys({...r,...n}),function(y){const E=m[y]||c,I=E(r[y],n[y],y);me.isUndefined(I)&&E!==p||(i[y]=I)}),i}const Hv=r=>{const n=Ti({},r);let{data:i,withXSRFToken:s,xsrfHeaderName:c,xsrfCookieName:l,headers:d,auth:p}=n;if(n.headers=d=yn.from(d),n.url=Dv(Bv(n.baseURL,n.url,n.allowAbsoluteUrls),r.params,r.paramsSerializer),p&&d.set("Authorization","Basic "+btoa((p.username||"")+":"+(p.password?unescape(encodeURIComponent(p.password)):""))),me.isFormData(i)){if(nn.hasStandardBrowserEnv||nn.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if(me.isFunction(i.getHeaders)){const m=i.getHeaders(),g=["content-type","content-length"];Object.entries(m).forEach(([y,E])=>{g.includes(y.toLowerCase())&&d.set(y,E)})}}if(nn.hasStandardBrowserEnv&&(s&&me.isFunction(s)&&(s=s(n)),s||s!==!1&&hx(n.url))){const m=c&&l&&px.read(l);m&&d.set(c,m)}return n},yx=typeof XMLHttpRequest<"u",vx=yx&&function(r){return new Promise(function(i,s){const c=Hv(r);let l=c.data;const d=yn.from(c.headers).normalize();let{responseType:p,onUploadProgress:m,onDownloadProgress:g}=c,y,E,I,F,U;function re(){F&&F(),U&&U(),c.cancelToken&&c.cancelToken.unsubscribe(y),c.signal&&c.signal.removeEventListener("abort",y)}let X=new XMLHttpRequest;X.open(c.method.toUpperCase(),c.url,!0),X.timeout=c.timeout;function ve(){if(!X)return;const oe=yn.from("getAllResponseHeaders"in X&&X.getAllResponseHeaders()),ae={data:!p||p==="text"||p==="json"?X.responseText:X.response,status:X.status,statusText:X.statusText,headers:oe,config:r,request:X};Lv(function(ne){i(ne),re()},function(ne){s(ne),re()},ae),X=null}"onloadend"in X?X.onloadend=ve:X.onreadystatechange=function(){!X||X.readyState!==4||X.status===0&&!(X.responseURL&&X.responseURL.indexOf("file:")===0)||setTimeout(ve)},X.onabort=function(){X&&(s(new Ye("Request aborted",Ye.ECONNABORTED,r,X)),X=null)},X.onerror=function(ee){const ae=ee&&ee.message?ee.message:"Network Error",le=new Ye(ae,Ye.ERR_NETWORK,r,X);le.event=ee||null,s(le),X=null},X.ontimeout=function(){let ee=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const ae=c.transitional||Pv;c.timeoutErrorMessage&&(ee=c.timeoutErrorMessage),s(new Ye(ee,ae.clarifyTimeoutError?Ye.ETIMEDOUT:Ye.ECONNABORTED,r,X)),X=null},l===void 0&&d.setContentType(null),"setRequestHeader"in X&&me.forEach(d.toJSON(),function(ee,ae){X.setRequestHeader(ae,ee)}),me.isUndefined(c.withCredentials)||(X.withCredentials=!!c.withCredentials),p&&p!=="json"&&(X.responseType=c.responseType),g&&([I,U]=vc(g,!0),X.addEventListener("progress",I)),m&&X.upload&&([E,F]=vc(m),X.upload.addEventListener("progress",E),X.upload.addEventListener("loadend",F)),(c.cancelToken||c.signal)&&(y=oe=>{X&&(s(!oe||oe.type?new xo(null,r,X):oe),X.abort(),X=null)},c.cancelToken&&c.cancelToken.subscribe(y),c.signal&&(c.signal.aborted?y():c.signal.addEventListener("abort",y)));const pe=ux(c.url);if(pe&&nn.protocols.indexOf(pe)===-1){s(new Ye("Unsupported protocol "+pe+":",Ye.ERR_BAD_REQUEST,r));return}X.send(l||null)})},bx=(r,n)=>{const{length:i}=r=r?r.filter(Boolean):[];if(n||i){let s=new AbortController,c;const l=function(g){if(!c){c=!0,p();const y=g instanceof Error?g:this.reason;s.abort(y instanceof Ye?y:new xo(y instanceof Error?y.message:y))}};let d=n&&setTimeout(()=>{d=null,l(new Ye(`timeout ${n} of ms exceeded`,Ye.ETIMEDOUT))},n);const p=()=>{r&&(d&&clearTimeout(d),d=null,r.forEach(g=>{g.unsubscribe?g.unsubscribe(l):g.removeEventListener("abort",l)}),r=null)};r.forEach(g=>g.addEventListener("abort",l));const{signal:m}=s;return m.unsubscribe=()=>me.asap(p),m}},Sx=function*(r,n){let i=r.byteLength;if(i<n){yield r;return}let s=0,c;for(;s<i;)c=s+n,yield r.slice(s,c),s=c},wx=async function*(r,n){for await(const i of Tx(r))yield*Sx(i,n)},Tx=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const n=r.getReader();try{for(;;){const{done:i,value:s}=await n.read();if(i)break;yield s}}finally{await n.cancel()}},ry=(r,n,i,s)=>{const c=wx(r,n);let l=0,d,p=m=>{d||(d=!0,s&&s(m))};return new ReadableStream({async pull(m){try{const{done:g,value:y}=await c.next();if(g){p(),m.close();return}let E=y.byteLength;if(i){let I=l+=E;i(I)}m.enqueue(new Uint8Array(y))}catch(g){throw p(g),g}},cancel(m){return p(m),c.return()}},{highWaterMark:2})},iy=64*1024,{isFunction:tc}=me,Cx=(({Request:r,Response:n})=>({Request:r,Response:n}))(me.global),{ReadableStream:oy,TextEncoder:sy}=me.global,ay=(r,...n)=>{try{return!!r(...n)}catch{return!1}},Rx=r=>{r=me.merge.call({skipUndefined:!0},Cx,r);const{fetch:n,Request:i,Response:s}=r,c=n?tc(n):typeof fetch=="function",l=tc(i),d=tc(s);if(!c)return!1;const p=c&&tc(oy),m=c&&(typeof sy=="function"?(U=>re=>U.encode(re))(new sy):async U=>new Uint8Array(await new i(U).arrayBuffer())),g=l&&p&&ay(()=>{let U=!1;const re=new i(nn.origin,{body:new oy,method:"POST",get duplex(){return U=!0,"half"}}).headers.has("Content-Type");return U&&!re}),y=d&&p&&ay(()=>me.isReadableStream(new s("").body)),E={stream:y&&(U=>U.body)};c&&["text","arrayBuffer","blob","formData","stream"].forEach(U=>{!E[U]&&(E[U]=(re,X)=>{let ve=re&&re[U];if(ve)return ve.call(re);throw new Ye(`Response type '${U}' is not supported`,Ye.ERR_NOT_SUPPORT,X)})});const I=async U=>{if(U==null)return 0;if(me.isBlob(U))return U.size;if(me.isSpecCompliantForm(U))return(await new i(nn.origin,{method:"POST",body:U}).arrayBuffer()).byteLength;if(me.isArrayBufferView(U)||me.isArrayBuffer(U))return U.byteLength;if(me.isURLSearchParams(U)&&(U=U+""),me.isString(U))return(await m(U)).byteLength},F=async(U,re)=>{const X=me.toFiniteNumber(U.getContentLength());return X??I(re)};return async U=>{let{url:re,method:X,data:ve,signal:pe,cancelToken:oe,timeout:ee,onDownloadProgress:ae,onUploadProgress:le,responseType:ne,headers:Re,withCredentials:Ee="same-origin",fetchOptions:Ae}=Hv(U),He=n||fetch;ne=ne?(ne+"").toLowerCase():"text";let Ve=bx([pe,oe&&oe.toAbortSignal()],ee),Oe=null;const Te=Ve&&Ve.unsubscribe&&(()=>{Ve.unsubscribe()});let De;try{if(le&&g&&X!=="get"&&X!=="head"&&(De=await F(Re,ve))!==0){let R=new i(re,{method:"POST",body:ve,duplex:"half"}),D;if(me.isFormData(ve)&&(D=R.headers.get("content-type"))&&Re.setContentType(D),R.body){const[x,b]=ey(De,vc(ty(le)));ve=ry(R.body,iy,x,b)}}me.isString(Ee)||(Ee=Ee?"include":"omit");const $=l&&"credentials"in i.prototype,M={...Ae,signal:Ve,method:X.toUpperCase(),headers:Re.normalize().toJSON(),body:ve,duplex:"half",credentials:$?Ee:void 0};Oe=l&&new i(re,M);let Y=await(l?He(Oe,Ae):He(re,M));const P=y&&(ne==="stream"||ne==="response");if(y&&(ae||P&&Te)){const R={};["status","statusText","headers"].forEach(T=>{R[T]=Y[T]});const D=me.toFiniteNumber(Y.headers.get("content-length")),[x,b]=ae&&ey(D,vc(ty(ae),!0))||[];Y=new s(ry(Y.body,iy,x,()=>{b&&b(),Te&&Te()}),R)}ne=ne||"text";let K=await E[me.findKey(E,ne)||"text"](Y,U);return!P&&Te&&Te(),await new Promise((R,D)=>{Lv(R,D,{data:K,headers:yn.from(Y.headers),status:Y.status,statusText:Y.statusText,config:U,request:Oe})})}catch($){throw Te&&Te(),$&&$.name==="TypeError"&&/Load failed|fetch/i.test($.message)?Object.assign(new Ye("Network Error",Ye.ERR_NETWORK,U,Oe),{cause:$.cause||$}):Ye.from($,$&&$.code,U,Oe)}}},xx=new Map,qv=r=>{let n=r&&r.env||{};const{fetch:i,Request:s,Response:c}=n,l=[s,c,i];let d=l.length,p=d,m,g,y=xx;for(;p--;)m=l[p],g=y.get(m),g===void 0&&y.set(m,g=p?new Map:Rx(n)),y=g;return g};qv();const af={http:qR,xhr:vx,fetch:{get:qv}};me.forEach(af,(r,n)=>{if(r){try{Object.defineProperty(r,"name",{value:n})}catch{}Object.defineProperty(r,"adapterName",{value:n})}});const cy=r=>`- ${r}`,Ex=r=>me.isFunction(r)||r===null||r===!1;function _x(r,n){r=me.isArray(r)?r:[r];const{length:i}=r;let s,c;const l={};for(let d=0;d<i;d++){s=r[d];let p;if(c=s,!Ex(s)&&(c=af[(p=String(s)).toLowerCase()],c===void 0))throw new Ye(`Unknown adapter '${p}'`);if(c&&(me.isFunction(c)||(c=c.get(n))))break;l[p||"#"+d]=c}if(!c){const d=Object.entries(l).map(([m,g])=>`adapter ${m} `+(g===!1?"is not supported by the environment":"is not available in the build"));let p=i?d.length>1?`since :
`+d.map(cy).join(`
`):" "+cy(d[0]):"as no adapter specified";throw new Ye("There is no suitable adapter to dispatch the request "+p,"ERR_NOT_SUPPORT")}return c}const $v={getAdapter:_x,adapters:af};function md(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new xo(null,r)}function ly(r){return md(r),r.headers=yn.from(r.headers),r.data=pd.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),$v.getAdapter(r.adapter||Is.adapter,r)(r).then(function(s){return md(r),s.data=pd.call(r,r.transformResponse,s),s.headers=yn.from(s.headers),s},function(s){return zv(s)||(md(r),s&&s.response&&(s.response.data=pd.call(r,r.transformResponse,s.response),s.response.headers=yn.from(s.response.headers))),Promise.reject(s)})}const Vv="1.13.2",Mc={};["object","boolean","number","function","string","symbol"].forEach((r,n)=>{Mc[r]=function(s){return typeof s===r||"a"+(n<1?"n ":" ")+r}});const uy={};Mc.transitional=function(n,i,s){function c(l,d){return"[Axios v"+Vv+"] Transitional option '"+l+"'"+d+(s?". "+s:"")}return(l,d,p)=>{if(n===!1)throw new Ye(c(d," has been removed"+(i?" in "+i:"")),Ye.ERR_DEPRECATED);return i&&!uy[d]&&(uy[d]=!0,console.warn(c(d," has been deprecated since v"+i+" and will be removed in the near future"))),n?n(l,d,p):!0}};Mc.spelling=function(n){return(i,s)=>(console.warn(`${s} is likely a misspelling of ${n}`),!0)};function Ax(r,n,i){if(typeof r!="object")throw new Ye("options must be an object",Ye.ERR_BAD_OPTION_VALUE);const s=Object.keys(r);let c=s.length;for(;c-- >0;){const l=s[c],d=n[l];if(d){const p=r[l],m=p===void 0||d(p,l,r);if(m!==!0)throw new Ye("option "+l+" must be "+m,Ye.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new Ye("Unknown option "+l,Ye.ERR_BAD_OPTION)}}const hc={assertOptions:Ax,validators:Mc},Jn=hc.validators;let vi=class{constructor(n){this.defaults=n||{},this.interceptors={request:new Wg,response:new Wg}}async request(n,i){try{return await this._request(n,i)}catch(s){if(s instanceof Error){let c={};Error.captureStackTrace?Error.captureStackTrace(c):c=new Error;const l=c.stack?c.stack.replace(/^.+\n/,""):"";try{s.stack?l&&!String(s.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+l):s.stack=l}catch{}}throw s}}_request(n,i){typeof n=="string"?(i=i||{},i.url=n):i=n||{},i=Ti(this.defaults,i);const{transitional:s,paramsSerializer:c,headers:l}=i;s!==void 0&&hc.assertOptions(s,{silentJSONParsing:Jn.transitional(Jn.boolean),forcedJSONParsing:Jn.transitional(Jn.boolean),clarifyTimeoutError:Jn.transitional(Jn.boolean)},!1),c!=null&&(me.isFunction(c)?i.paramsSerializer={serialize:c}:hc.assertOptions(c,{encode:Jn.function,serialize:Jn.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),hc.assertOptions(i,{baseUrl:Jn.spelling("baseURL"),withXsrfToken:Jn.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let d=l&&me.merge(l.common,l[i.method]);l&&me.forEach(["delete","get","head","post","put","patch","common"],U=>{delete l[U]}),i.headers=yn.concat(d,l);const p=[];let m=!0;this.interceptors.request.forEach(function(re){typeof re.runWhen=="function"&&re.runWhen(i)===!1||(m=m&&re.synchronous,p.unshift(re.fulfilled,re.rejected))});const g=[];this.interceptors.response.forEach(function(re){g.push(re.fulfilled,re.rejected)});let y,E=0,I;if(!m){const U=[ly.bind(this),void 0];for(U.unshift(...p),U.push(...g),I=U.length,y=Promise.resolve(i);E<I;)y=y.then(U[E++],U[E++]);return y}I=p.length;let F=i;for(;E<I;){const U=p[E++],re=p[E++];try{F=U(F)}catch(X){re.call(this,X);break}}try{y=ly.call(this,F)}catch(U){return Promise.reject(U)}for(E=0,I=g.length;E<I;)y=y.then(g[E++],g[E++]);return y}getUri(n){n=Ti(this.defaults,n);const i=Bv(n.baseURL,n.url,n.allowAbsoluteUrls);return Dv(i,n.params,n.paramsSerializer)}};me.forEach(["delete","get","head","options"],function(n){vi.prototype[n]=function(i,s){return this.request(Ti(s||{},{method:n,url:i,data:(s||{}).data}))}});me.forEach(["post","put","patch"],function(n){function i(s){return function(l,d,p){return this.request(Ti(p||{},{method:n,headers:s?{"Content-Type":"multipart/form-data"}:{},url:l,data:d}))}}vi.prototype[n]=i(),vi.prototype[n+"Form"]=i(!0)});let kx=class Gv{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(l){i=l});const s=this;this.promise.then(c=>{if(!s._listeners)return;let l=s._listeners.length;for(;l-- >0;)s._listeners[l](c);s._listeners=null}),this.promise.then=c=>{let l;const d=new Promise(p=>{s.subscribe(p),l=p}).then(c);return d.cancel=function(){s.unsubscribe(l)},d},n(function(l,d,p){s.reason||(s.reason=new xo(l,d,p),i(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const n=new AbortController,i=s=>{n.abort(s)};return this.subscribe(i),n.signal.unsubscribe=()=>this.unsubscribe(i),n.signal}static source(){let n;return{token:new Gv(function(c){n=c}),cancel:n}}};function Nx(r){return function(i){return r.apply(null,i)}}function Ox(r){return me.isObject(r)&&r.isAxiosError===!0}const Pd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Pd).forEach(([r,n])=>{Pd[n]=r});function Fv(r){const n=new vi(r),i=Cv(vi.prototype.request,n);return me.extend(i,vi.prototype,n,{allOwnKeys:!0}),me.extend(i,n,null,{allOwnKeys:!0}),i.create=function(c){return Fv(Ti(r,c))},i}const _t=Fv(Is);_t.Axios=vi;_t.CanceledError=xo;_t.CancelToken=kx;_t.isCancel=zv;_t.VERSION=Vv;_t.toFormData=Oc;_t.AxiosError=Ye;_t.Cancel=_t.CanceledError;_t.all=function(n){return Promise.all(n)};_t.spread=Nx;_t.isAxiosError=Ox;_t.mergeConfig=Ti;_t.AxiosHeaders=yn;_t.formToJSON=r=>Iv(me.isHTMLForm(r)?new FormData(r):r);_t.getAdapter=$v.getAdapter;_t.HttpStatusCode=Pd;_t.default=_t;const{Axios:pM,AxiosError:mM,CanceledError:gM,isCancel:yM,CancelToken:vM,VERSION:bM,all:SM,Cancel:wM,isAxiosError:TM,spread:CM,toFormData:RM,AxiosHeaders:xM,HttpStatusCode:EM,formToJSON:_M,getAdapter:AM,mergeConfig:kM}=_t,Mx=()=>"https://festive-guest-api.azurewebsites.net/api",Ke=_t.create({baseURL:Mx(),timeout:1e4});Ke.interceptors.request.use(r=>(console.log("API Request:",{method:r.method?.toUpperCase(),url:r.baseURL+"/"+r.url,headers:r.headers}),r),r=>(console.error("Request Error:",r),Promise.reject(r)));Ke.interceptors.request.use(r=>{try{const n=localStorage.getItem("user");if(n){const i=JSON.parse(n);i&&i.token&&(r.headers.Authorization=`Bearer ${i.token}`)}}catch{console.warn("Failed to read user from storage")}return r},r=>Promise.reject(r));Ke.interceptors.response.use(r=>r,r=>(console.error("API Error Details:",{status:r.response?.status,statusText:r.response?.statusText,url:r.config?.url,method:r.config?.method,baseURL:r.config?.baseURL,data:r.response?.data,message:r.message}),(r.response?.status===401||r.response?.status===403)&&(localStorage.removeItem("user"),localStorage.removeItem("userId"),window.dispatchEvent(new Event("storage")),window.location.pathname!=="/login"&&window.location.pathname!=="/"&&(window.location.href="/login")),Promise.reject(r)));const jx={sasCache:new Map,async getSasUrl(r,n="logos"){const i=`${n}/${r}`,s=this.sasCache.get(i);if(s&&s.expiresAt>Date.now())return s.url;try{const l=(await Ke.get("storage/get-sas-url",{params:{fileName:r,container:n}})).data.url;return this.sasCache.set(i,{url:l,expiresAt:Date.now()+3e3*1e3}),l}catch(c){return console.error("Error fetching SAS URL:",c),`https://festivegueststorage.blob.core.windows.net/${n}/${r}`}},clearCache(){this.sasCache.clear()}},Ux=({className:r="",style:n={},alt:i="FestiveGuest Logo",isLoginLogo:s=!1})=>{const[c,l]=z.useState(""),[d,p]=z.useState(!0);return z.useEffect(()=>{(async()=>{try{const g=s?"login-logo.png":"logo.png",y=await jx.getSasUrl(g,"logos");l(y)}catch(g){console.error("Error loading logo:",g),l(s?"/assets/login-logo.png":"/assets/logo.png")}finally{p(!1)}})()},[s]),d?h.jsx("div",{className:r,style:{...n,background:"#f0f0f0"}}):h.jsx("img",{src:c,alt:i,className:r,style:n})},Dx=()=>h.jsx("div",{className:"loader-container",children:h.jsx("div",{className:"logo-loader",children:h.jsx("img",{src:"/assets/login-logo.png",alt:"FestiveGuest",className:"loader-logo"})})});class Px{constructor(){this.locations=null,this.loading=!1}async getLocations(){if(this.locations)return this.locations;if(this.loading){for(;this.loading;)await new Promise(n=>setTimeout(n,100));return this.locations}this.loading=!0;try{const n=await Ke.get("location/states-with-cities");return this.locations=n.data,this.locations}catch(n){throw console.error("DEBUG: Failed to fetch locations from API:",n),new Error("Unable to load location data (API Error). Please try again later.")}finally{this.loading=!1}}async seedLocations(){try{const n=await Ke.post("location/seed");return this.locations=null,n.data}catch(n){throw console.error("Failed to seed locations:",n),n}}clearCache(){this.locations=null}}const cf=new Px,Ix=()=>{const[r,n]=z.useState([]),[i,s]=z.useState(!1),c=(p,m="info")=>{n(g=>[...g,{message:p,type:m,timestamp:new Date().toLocaleTimeString()}])},l=async()=>{s(!0),n([]);try{c(" Testing API connectivity...","info");try{c(` API Base URL: ${Ke.defaults.baseURL}`,"info");const p=await Ke.get("health");c(" API Health Check: SUCCESS","success")}catch(p){c(` API Health Check: ${p.message}`,"error")}try{c(" Testing location service...","info");const p=await cf.getLocations(),m=Object.keys(p||{}).length;c(` Locations loaded: ${m} states found`,"success")}catch(p){c(` Location service: ${p.message}`,"error")}try{c(" Testing direct location API...","info");const p=await Ke.get("location/states-with-cities"),m=Object.keys(p.data||{}).length;c(` Direct API call: ${m} states found`,"success")}catch(p){c(` Direct API call: ${p.message}`,"error")}}catch(p){c(` Test suite failed: ${p.message}`,"error")}finally{s(!1)}},d=()=>{n([])};return h.jsxs("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto",fontFamily:"monospace"},children:[h.jsx("h2",{children:" API Connectivity Test"}),h.jsx("p",{children:"Use this tool to test your API connectivity and location loading."}),h.jsxs("div",{style:{marginBottom:"1rem"},children:[h.jsx("button",{onClick:l,disabled:i,style:{padding:"0.75rem 1.5rem",backgroundColor:i?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"0.5rem",cursor:i?"not-allowed":"pointer",marginRight:"1rem"},children:i?" Testing...":" Run Tests"}),h.jsx("button",{onClick:d,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer"},children:" Clear Results"})]}),h.jsx("div",{style:{backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"0.5rem",padding:"1rem",minHeight:"200px",maxHeight:"400px",overflowY:"auto"},children:r.length===0?h.jsx("p",{style:{color:"#6c757d",fontStyle:"italic"},children:'Click "Run Tests" to start testing your API connectivity...'}):r.map((p,m)=>h.jsxs("div",{style:{marginBottom:"0.5rem",padding:"0.5rem",borderRadius:"0.25rem",backgroundColor:p.type==="success"?"#d4edda":p.type==="error"?"#f8d7da":"#d1ecf1",color:p.type==="success"?"#155724":p.type==="error"?"#721c24":"#0c5460"},children:[h.jsxs("span",{style:{fontSize:"0.8rem",opacity:.7},children:["[",p.timestamp,"]"]})," ",p.message]},m))}),h.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.9rem",color:"#6c757d"},children:[h.jsxs("p",{children:[h.jsx("strong",{children:"Environment:"})," ","production"]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Current API Base:"})," ",Ke.defaults.baseURL]})]})]})},zx=({user:r})=>{const n=Qr(),i=()=>{const s=r?.role||r?.userType||r?.partitionKey;return s==="Host"?"/host-dashboard":s==="Guest"?"/guest-dashboard":s==="Admin"?"/admin":"/"};return h.jsxs("div",{className:"landing-page",children:[h.jsxs("section",{className:"hero",children:[h.jsxs("div",{className:"hero-content",children:[h.jsx("h1",{className:"hero-title",children:"Celebrate Festivals with Local Friends"}),h.jsx("p",{className:"hero-subtitle",children:"Experience authentic Pongal celebrations in East & West Godavari districts"}),h.jsx("div",{className:"hero-buttons",children:r?h.jsx("button",{className:"btn btn-primary",onClick:()=>n(i()),children:"Go to My Dashboard"}):h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"btn btn-primary",onClick:()=>n("/register?role=Guest"),children:"Join as Guest"}),h.jsx("button",{className:"btn btn-secondary",onClick:()=>n("/register?role=Host"),children:"Become a Host"})]})})]}),h.jsx("div",{className:"hero-image",children:h.jsxs("div",{className:"festival-card",children:[h.jsx("h3",{children:" Festival Season"}),h.jsx("p",{children:"Connect with locals during Pongal, Diwali, and other celebrations"})]})})]}),h.jsx("section",{className:"features",children:h.jsxs("div",{className:"container",children:[h.jsx("h2",{children:"Why Choose Festive Guest?"}),h.jsxs("div",{className:"features-grid",children:[h.jsxs("div",{className:"feature-card",children:[h.jsx("div",{className:"feature-icon",children:""}),h.jsx("h3",{children:"Local Accommodation"}),h.jsx("p",{children:"Stay with friendly hosts who provide comfortable accommodation during festival season"})]}),h.jsxs("div",{className:"feature-card",children:[h.jsx("div",{className:"feature-icon",children:""}),h.jsx("h3",{children:"Guided Tours"}),h.jsx("p",{children:"Explore nearby temples, cultural sites, and hidden gems with local guides"})]}),h.jsxs("div",{className:"feature-card",children:[h.jsx("div",{className:"feature-icon",children:""}),h.jsx("h3",{children:"Make New Friends"}),h.jsx("p",{children:"Connect with locals and fellow travelers, create lasting friendships"})]}),h.jsxs("div",{className:"feature-card",children:[h.jsx("div",{className:"feature-icon",children:""}),h.jsx("h3",{children:"Authentic Experience"}),h.jsx("p",{children:"Participate in traditional celebrations, enjoy homemade festival food"})]})]})]})}),h.jsx("section",{className:"how-it-works",children:h.jsxs("div",{className:"container",children:[h.jsx("h2",{children:"How It Works"}),h.jsxs("div",{className:"steps",children:[h.jsxs("div",{className:"step",children:[h.jsx("div",{className:"step-number",children:"1"}),h.jsx("h3",{children:"Register"}),h.jsx("p",{children:"Sign up as a Guest or Host for free"})]}),h.jsxs("div",{className:"step",children:[h.jsx("div",{className:"step-number",children:"2"}),h.jsx("h3",{children:"Connect"}),h.jsx("p",{children:"Browse profiles and connect with hosts/guests"})]}),h.jsxs("div",{className:"step",children:[h.jsx("div",{className:"step-number",children:"3"}),h.jsx("h3",{children:"Celebrate"}),h.jsx("p",{children:"Enjoy authentic festival experiences together"})]})]})]})}),h.jsx("section",{className:"testimonials",children:h.jsxs("div",{className:"container",children:[h.jsx("h2",{children:"What Our Users Say"}),h.jsxs("div",{className:"testimonials-grid",children:[h.jsxs("div",{className:"testimonial",children:[h.jsx("p",{children:'"Amazing Pongal experience in Rajahmundry! The host family treated me like their own."'}),h.jsx("div",{className:"testimonial-author",children:"- Priya, Hyderabad"})]}),h.jsxs("div",{className:"testimonial",children:[h.jsx("p",{children:'"Met wonderful guests during Diwali. Sharing our traditions was so fulfilling."'}),h.jsx("div",{className:"testimonial-author",children:"- Ravi, Kakinada"})]})]})]})}),h.jsx("section",{className:"cta",children:h.jsxs("div",{className:"container",children:[h.jsx("h2",{children:"Ready to Start Your Festival Journey?"}),h.jsx("p",{children:"Join thousands of travelers and hosts celebrating together"}),h.jsx("div",{className:"cta-buttons",children:r?h.jsx("button",{className:"btn btn-primary",onClick:()=>n(i()),children:"Go to My Dashboard"}):h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"btn btn-primary",onClick:()=>n("/register?role=Guest"),children:"Get Started"}),h.jsx("button",{className:"btn btn-primary",onClick:()=>n("/login"),children:"Already have an account?"})]})})]})}),h.jsx("footer",{className:"footer",children:h.jsx("div",{className:"container",children:h.jsx("p",{children:" 2024 Festive Guest Marketplace. Connecting hearts during festivals."})})})]})},Lx=({setUser:r})=>{const[n,i]=z.useState(""),[s,c]=z.useState(""),[l,d]=z.useState(!1),[p,m]=z.useState(!1),[g,y]=z.useState(null),[E,I]=z.useState(""),[F,U]=z.useState(""),re=Qr(),X=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,ve=ee=>ee?X.test(ee)?(I(""),!0):(I("Please enter a valid email address"),!1):(I(""),!0);z.useEffect(()=>{const ee=localStorage.getItem("user"),ae=localStorage.getItem("token");ee&&ae&&re("/"),U("/assets/login-logo.png")},[re]);const pe=(ee,ae="success")=>{y({message:ee,type:ae}),ae==="success"&&setTimeout(()=>{y(le=>le?{...le,hiding:!0}:null),setTimeout(()=>y(null),300)},5e3)},oe=async ee=>{ee?.preventDefault(),m(!0);try{const ae=await Ke.post("auth/login",{email:n,password:s});if(ae?.data?.success&&ae?.data?.token){const{token:le,user:ne}=ae.data,Re={...ne,token:le};localStorage.setItem("user",JSON.stringify(Re)),localStorage.setItem("userId",ne.userId),localStorage.setItem("token",le),r(Re),pe("Login successful! Redirecting...","success"),setTimeout(()=>re("/"),1e3);return}pe("Login failed","error")}catch(ae){ae.response?.status===429?pe("Too many login attempts. Please wait 15 minutes and try again.","error"):pe("Login failed: "+(ae.response?.data?.message||ae.message),"error")}finally{m(!1)}};return h.jsxs("div",{className:"container",children:[g&&h.jsx("div",{className:"toast-container",children:h.jsxs("div",{className:`toast ${g.type} ${g.hiding?"hiding":""}`,children:[h.jsx("span",{className:"toast-icon",children:g.type==="success"?"":g.type==="error"?"":""}),h.jsx("div",{className:"toast-content",children:h.jsx("p",{className:"toast-message",children:g.message})}),g.type!=="success"&&h.jsx("button",{onClick:()=>y(null),style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.5rem"},children:""})]})}),h.jsxs("div",{className:"card",style:{maxWidth:"450px",margin:"50px auto",textAlign:"center"},children:[h.jsxs("div",{style:{marginBottom:"2rem"},children:[h.jsx("img",{src:"/assets/login-logo.png",alt:"Festive Guest Logo",style:{height:"150px",width:"auto",marginBottom:"1.5rem"}}),h.jsx("p",{style:{color:"#64748b",fontSize:"1.1rem"},children:"Connect Guests and Hosts for memorable experiences"})]}),h.jsxs("form",{onSubmit:oe,style:{marginTop:"30px"},children:[h.jsxs("div",{className:"form-group",children:[h.jsx("input",{type:"email",className:"form-control",placeholder:"Enter your email address",value:n,onChange:ee=>{i(ee.target.value),ve(ee.target.value)},onBlur:ee=>ve(ee.target.value),required:!0,style:{fontSize:"1rem",padding:"1rem",borderColor:E?"#dc2626":"#cbd5e1"}}),E&&h.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",E]})]}),h.jsxs("div",{className:"form-group",style:{position:"relative"},children:[h.jsx("input",{type:l?"text":"password",className:"form-control",placeholder:"Enter your password",value:s,onChange:ee=>c(ee.target.value),required:!0,style:{fontSize:"1rem",padding:"1rem",paddingRight:"3rem"}}),h.jsx("button",{type:"button",onClick:()=>d(!l),style:{position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#64748b",display:"flex",alignItems:"center",padding:"0"},children:l?h.jsx(vv,{size:20}):h.jsx(tf,{size:20})})]}),h.jsx("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",padding:"1rem",fontSize:"1.1rem"},disabled:p||E!=="",children:p?"Logging in...":"Login"})]}),h.jsx("div",{style:{marginTop:"2rem",padding:"1.5rem",background:"#f8fafc",borderRadius:"1rem",border:"1px solid #e2e8f0"},children:h.jsxs("p",{style:{margin:"0",color:"#64748b",fontSize:"1.05rem"},children:["New user? ",h.jsx("button",{className:"btn btn-primary",onClick:()=>re("/register"),style:{marginLeft:"0.5rem",padding:"0.5rem 1.5rem"},children:"Register"})]})})]})]})},Bx=({setUser:r})=>{const n=Qr(),i=Qn(),[s,c]=z.useState({}),[l,d]=z.useState({userId:crypto.randomUUID(),name:"",email:"",password:"",phone:"",state:"",city:"",otherCity:"",bio:"",role:"Guest",status:"Active"}),[p,m]=z.useState(!1),[g,y]=z.useState(null),[E,I]=z.useState(""),[F,U]=z.useState(""),[re,X]=z.useState(null),[ve,pe]=z.useState(""),[oe,ee]=z.useState(!1),[ae,le]=z.useState(!1),[ne,Re]=z.useState(!1),[Ee,Ae]=z.useState(!1),[He,Ve]=z.useState(""),[Oe,Te]=z.useState(""),[De,$]=z.useState(""),[M,Y]=z.useState(!1),[P,K]=z.useState(!1),[R,D]=z.useState(null),x=[{label:"At least 8 characters",test:H=>H.length>=8},{label:"One uppercase letter",test:H=>/[A-Z]/.test(H)},{label:"One lowercase letter",test:H=>/[a-z]/.test(H)},{label:"One number",test:H=>/\d/.test(H)},{label:"One special character",test:H=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(H)}],b=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,T=/^[6-9]\d{9}$/,k=H=>H?b.test(H)?(Ve(""),!0):(Ve("Please enter a valid email address"),!1):(Ve(""),!0),N=H=>{if(!H)return Te(""),!0;const ie=H.replace(/\D/g,"");return T.test(ie)?(Te(""),!0):(Te("Please enter a valid 10-digit Indian mobile number (starting with 6-9). This helps other users contact you accurately."),!1)},S=(H,ie="success")=>{y({message:H,type:ie}),ie==="success"&&setTimeout(()=>{y(te=>te?{...te,hiding:!0}:null),setTimeout(()=>y(null),300)},5e3)};z.useEffect(()=>{const ie=new URLSearchParams(i.search).get("role");(ie==="Guest"||ie==="Host")&&d(te=>({...te,role:ie}))},[i.search]),z.useEffect(()=>{(async()=>{try{console.log("Loading locations using locationService...");const ie=await cf.getLocations();console.log("Locations loaded successfully:",ie),c(ie)}catch(ie){console.error("DEBUG: Failed to load locations:",ie),console.error("Error details:",{message:ie.message,response:ie.response?.data,status:ie.response?.status,url:ie.config?.url}),S("Registration Error: "+ie.message,"error")}})().catch(ie=>console.error("CRITICAL: loadLocations failed",ie))},[]);const C=H=>{const{name:ie,value:te}=H.target;d(W=>{const ue={...W,[ie]:te};return ie==="state"&&(ue.city=""),ue})},A=H=>{H.preventDefault(),J()},B=H=>{const ie=H.target.checked;K(ie),D(ie?Date.now():null)},J=async()=>{m(!0),X(null);try{if(!ae){X("Please verify your email before completing registration."),S("Please verify your email before registering","error"),m(!1);return}if(!P||!R){X("Please accept the terms and conditions to continue."),S("You must accept the agreement to register","error"),m(!1);return}if(Date.now()-R>3e5){X("Agreement acceptance expired. Please re-accept the terms."),K(!1),D(null),S("Please re-accept the agreement","error"),m(!1);return}const H=l.city==="Other"?l.otherCity:l.city,ie={email:l.email,password:l.password,name:l.name,phone:l.phone,userType:l.role,location:`${H}, ${l.state}`,bio:l.bio};console.log("Sending registration payload:",ie),(await Ke.post("auth/register",ie)).data.success&&(S(" Registration successful! Please login to continue.","success"),setTimeout(()=>n("/login"),2e3))}catch(H){const ie=H.response?.data?.message||H.message;if(H.response?.status===429){const te="Too many attempts. Please wait 15 minutes and try again.";X(te),S(te,"error")}else X(ie),S("Registration failed: "+ie,"error")}finally{m(!1)}},V=async()=>{if(!l.email){S("Please enter an email address first","error");return}Re(!0);try{console.log("Sending OTP request:",{email:l.email,purpose:"registration"});const H=await Ke.post("email/send-otp",{email:l.email,purpose:"registration"});console.log("OTP response:",H.data),H.data.success&&(ee(!0),U(l.email),S("OTP sent to your email","success"))}catch(H){console.error("OTP Error Details:",{status:H.response?.status,data:H.response?.data,message:H.message,fullResponse:H.response}),console.error("Full error object:",H);const ie=H.response?.data?.message||H.response?.data?.error||H.response?.data||H.message;X(JSON.stringify(H.response?.data)||ie),S("Failed to send OTP: "+ie,"error")}finally{Re(!1)}},L=async()=>{if(!E||E.length!==6){S("Please enter a valid 6-digit code","error");return}m(!0);try{const H=await Ke.post("email/validate-otp",{email:l.email,otpCode:E});H.data.success&&(le(!0),ee(!1),pe(""),S(H.data?.message||"Email verified","success"))}catch(H){const ie=H.response?.data?.message||H.message;S("Verification failed: "+ie,"error")}finally{m(!1)}};return h.jsxs("div",{className:"container",children:[g&&h.jsx("div",{className:"toast-container",children:h.jsxs("div",{className:`toast ${g.type} ${g.hiding?"hiding":""}`,children:[h.jsx("span",{className:"toast-icon",children:g.type==="success"?"":g.type==="error"?"":""}),h.jsx("div",{className:"toast-content",children:h.jsx("p",{className:"toast-message",children:g.message})}),g.type!=="success"&&h.jsx("button",{onClick:()=>y(null),style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.5rem"},children:""})]})}),re&&h.jsxs("div",{style:{maxWidth:"1200px",margin:"10px auto",color:"#b91c1c",background:"#fee2e2",padding:"10px",borderRadius:"6px"},children:[h.jsx("strong",{children:"Error:"})," ",re]}),h.jsxs("div",{className:"registration-layout",children:[h.jsxs("div",{className:"disclaimer-section",children:[h.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[h.jsx("h2",{style:{color:"#1e293b",marginBottom:"0.5rem"},children:"Welcome to FestiveGuest"}),h.jsx("p",{style:{color:"#64748b"},children:"Connect with festival enthusiasts"})]}),h.jsxs("div",{style:{padding:"1.5rem",background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"0.75rem",borderLeft:"4px solid #f59e0b",height:"fit-content",position:"sticky",top:"2rem"},children:[h.jsx("h4",{style:{margin:"0 0 1rem 0",color:"#92400e",fontSize:"1rem",fontWeight:"600"},children:" Important Disclaimer"}),h.jsxs("div",{style:{color:"#92400e",fontSize:"0.9rem",lineHeight:"1.5"},children:[h.jsxs("p",{style:{margin:"0 0 0.75rem 0"},children:[h.jsx("strong",{children:"FestiveGuest"})," is a platform that connects like-minded people for festival celebrations. By registering, you acknowledge and agree that:"]}),h.jsxs("ul",{style:{margin:"0",paddingLeft:"1.25rem"},children:[h.jsxs("li",{style:{marginBottom:"0.5rem"},children:["We are ",h.jsx("strong",{children:"not responsible"})," for any incidents, damages, or issues that may occur during your interactions or meetings."]}),h.jsxs("li",{style:{marginBottom:"0.5rem"},children:["We do ",h.jsx("strong",{children:"not guarantee"})," that you will find suitable hosts or guests, as this depends on availability and mutual compatibility."]}),h.jsxs("li",{style:{marginBottom:"0.5rem"},children:["We act solely as a ",h.jsx("strong",{children:"platform for introductions"})," and do not verify the background, intentions, or authenticity of users."]}),h.jsxs("li",{style:{marginBottom:"0.5rem"},children:["All interactions, arrangements, and meetings are ",h.jsx("strong",{children:"at your own risk and discretion"}),"."]}),h.jsxs("li",{style:{marginBottom:"0.5rem"},children:[h.jsx("strong",{children:"Payment & Financial Caution:"})," Hosts may request payment for services (accommodation, food, etc.). It is entirely your responsibility to decide whether to pay in advance or after services are rendered. Both hosts and guests should exercise caution and verify each other's authenticity before any financial transactions."]}),h.jsxs("li",{children:["We ",h.jsx("strong",{children:"strongly recommend"})," meeting in public places first and taking necessary safety precautions."]})]}),h.jsx("p",{style:{margin:"0.75rem 0 0 0",fontWeight:"600"},children:"By proceeding with registration, you accept full responsibility for your safety and interactions."})]})]})]}),h.jsx("div",{className:"registration-form-section",children:h.jsxs("div",{className:"card",style:{margin:"0",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},children:[h.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[h.jsx("h3",{style:{color:"#1e293b",marginBottom:"0.5rem"},children:"Complete Your Registration"}),h.jsx("p",{style:{color:"#64748b"},children:"Join our community of festival enthusiasts"})]}),h.jsxs("form",{onSubmit:A,children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Choose Your Role"}),h.jsxs("select",{name:"role",value:l.role,onChange:C,required:!0,style:{fontSize:"1rem",padding:"1rem"},children:[h.jsx("option",{value:"Guest",children:" Guest"}),h.jsx("option",{value:"Host",children:" Host"})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Full Name"}),h.jsx("input",{type:"text",name:"name",value:l.name,onChange:C,placeholder:"Enter your full name",required:!0,style:{fontSize:"1rem",padding:"1rem"}})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Email Address"}),h.jsx("input",{type:"email",name:"email",value:l.email,onChange:H=>{C(H),k(H.target.value)},onBlur:H=>k(H.target.value),placeholder:"Enter your email address",required:!0,style:{fontSize:"1rem",padding:"1rem",borderColor:He?"#dc2626":"#cbd5e1"}}),He&&h.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",He]}),h.jsxs("div",{style:{marginTop:"0.75rem",display:"flex",gap:"0.5rem",alignItems:"center"},children:[!ae&&!oe&&h.jsx("button",{type:"button",className:"btn btn-secondary",onClick:V,disabled:ne||He!=="",children:ne?"Sending OTP...":"Send OTP"}),oe&&h.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[h.jsx("input",{type:"text",value:E,onChange:H=>I(H.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter OTP",maxLength:6,style:{padding:"0.5rem",fontSize:"1rem",width:"160px"}}),h.jsx("button",{type:"button",className:"btn btn-primary",onClick:L,disabled:p||E.length!==6,children:"Verify"})]}),ae&&h.jsx("span",{style:{color:"#16a34a",fontWeight:"600"},children:" Email verified"})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Password"}),h.jsxs("div",{style:{position:"relative"},children:[h.jsx("input",{type:Ee?"text":"password",name:"password",value:l.password,onChange:C,placeholder:"Create a strong password",required:!0,style:{fontSize:"1rem",padding:"1rem",paddingRight:"2.5rem",width:"100%",boxSizing:"border-box"}}),h.jsx("button",{type:"button",onClick:()=>Ae(!Ee),style:{position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#64748b",display:"flex",alignItems:"center",padding:"0"},children:Ee?h.jsx(vv,{size:20}):h.jsx(tf,{size:20})})]}),h.jsx("div",{style:{marginTop:"0.75rem",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:x.map((H,ie)=>{const te=H.test(l.password);return h.jsxs("div",{style:{fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.25rem",color:te?"#16a34a":"#dc2626",transition:"color 0.2s"},children:[h.jsx("span",{style:{fontSize:"0.9rem"},children:te?"":""}),H.label]},ie)})})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Phone Number"}),h.jsx("input",{type:"tel",name:"phone",value:l.phone,onChange:H=>{C(H),N(H.target.value)},onBlur:H=>N(H.target.value),placeholder:"Enter your 10-digit mobile number",required:!0,style:{fontSize:"1rem",padding:"1rem",borderColor:Oe?"#dc2626":"#cbd5e1"}}),Oe&&h.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",Oe]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"State"}),h.jsxs("select",{name:"state",value:l.state,onChange:C,required:!0,style:{fontSize:"1rem",padding:"1rem"},children:[h.jsx("option",{value:"",children:"Select State"}),Object.keys(s||{}).map(H=>h.jsx("option",{value:H,children:H},H))]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"City"}),h.jsxs("select",{name:"city",value:l.city,onChange:C,required:!0,disabled:!l.state,style:{fontSize:"1rem",padding:"1rem"},children:[h.jsx("option",{value:"",children:"Select City"}),l.state&&s[l.state]&&s[l.state].map(H=>h.jsx("option",{value:H,children:H},H))]})]}),l.city==="Other"&&h.jsxs("div",{className:"form-group",children:[h.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Enter Your City"}),h.jsx("input",{type:"text",name:"otherCity",value:l.otherCity,onChange:C,placeholder:"Name of your city",required:!0,style:{fontSize:"1rem",padding:"1rem"}})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:l.role==="Host"?"Your Offerings":"Your Festival Wishes"}),h.jsx("textarea",{name:"bio",value:l.bio,onChange:C,placeholder:l.role==="Host"?"Tell guests what you offer (e.g., accommodation, traditional food, local tours)...":"Tell hosts what you are looking for (e.g., specific festivals, types of food, culture)...",required:!0,rows:"4",maxLength:250,style:{fontSize:"1rem",padding:"1rem",width:"100%",borderRadius:"0.5rem",border:"1px solid #cbd5e1"}}),h.jsxs("div",{style:{textAlign:"right",fontSize:"0.875rem",color:"#64748b",marginTop:"0.25rem"},children:[l.bio.length,"/250 characters"]})]}),h.jsx("div",{style:{marginTop:"2rem",padding:"1.5rem",background:"#f0f9ff",border:"2px solid #0ea5e9",borderRadius:"0.75rem"},children:h.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"1rem",cursor:"pointer",fontSize:"1rem",lineHeight:"1.5"},children:[h.jsx("input",{type:"checkbox",checked:P,onChange:B,required:!0,style:{width:"20px",height:"20px",marginTop:"2px",cursor:"pointer",accentColor:"#0ea5e9"}}),h.jsxs("span",{style:{color:"#0c4a6e",fontWeight:"500"},children:["I have read, understood, and agree to the ",h.jsx("strong",{children:"Important Disclaimer"})," above. I acknowledge that I am using this platform at my own risk and accept full responsibility for my safety and interactions."]})]})}),h.jsx("button",{type:"submit",className:"btn btn-primary",disabled:p||!P,style:{width:"100%",padding:"1rem",fontSize:"1.1rem",marginTop:"1.5rem",opacity:P?1:.5,cursor:P?"pointer":"not-allowed"},children:p?"Registering...":"Register Now"}),!1]}),h.jsx("div",{style:{marginTop:"2rem",textAlign:"center",padding:"1.5rem",background:"#f8fafc",borderRadius:"1rem",border:"1px solid #e2e8f0"},children:h.jsxs("p",{style:{margin:"0",color:"#64748b",fontSize:"1.05rem"},children:["Already have an account? ",h.jsx("button",{className:"btn btn-primary",onClick:()=>n("/login"),style:{marginLeft:"0.5rem",padding:"0.5rem 1.5rem"},children:"Login"})]})}),!1]})})]})]})};class bi extends Error{constructor(n,i){const s=new.target.prototype;super(`${n}: Status code '${i}'`),this.statusCode=i,this.__proto__=s}}class lf extends Error{constructor(n="A timeout occurred."){const i=new.target.prototype;super(n),this.__proto__=i}}let qn=class extends Error{constructor(n="An abort occurred."){const i=new.target.prototype;super(n),this.__proto__=i}};class Hx extends Error{constructor(n,i){const s=new.target.prototype;super(n),this.transport=i,this.errorType="UnsupportedTransportError",this.__proto__=s}}class qx extends Error{constructor(n,i){const s=new.target.prototype;super(n),this.transport=i,this.errorType="DisabledTransportError",this.__proto__=s}}class $x extends Error{constructor(n,i){const s=new.target.prototype;super(n),this.transport=i,this.errorType="FailedToStartTransportError",this.__proto__=s}}class dy extends Error{constructor(n){const i=new.target.prototype;super(n),this.errorType="FailedToNegotiateWithServerError",this.__proto__=i}}class Vx extends Error{constructor(n,i){const s=new.target.prototype;super(n),this.innerErrors=i,this.__proto__=s}}class Xv{constructor(n,i,s){this.statusCode=n,this.statusText=i,this.content=s}}class jc{get(n,i){return this.send({...i,method:"GET",url:n})}post(n,i){return this.send({...i,method:"POST",url:n})}delete(n,i){return this.send({...i,method:"DELETE",url:n})}getCookieString(n){return""}}var we;(function(r){r[r.Trace=0]="Trace",r[r.Debug=1]="Debug",r[r.Information=2]="Information",r[r.Warning=3]="Warning",r[r.Error=4]="Error",r[r.Critical=5]="Critical",r[r.None=6]="None"})(we||(we={}));class ks{constructor(){}log(n,i){}}ks.instance=new ks;const Gx="10.0.0";class Mt{static isRequired(n,i){if(n==null)throw new Error(`The '${i}' argument is required.`)}static isNotEmpty(n,i){if(!n||n.match(/^\s*$/))throw new Error(`The '${i}' argument should not be empty.`)}static isIn(n,i,s){if(!(n in i))throw new Error(`Unknown ${s} value: ${n}.`)}}class wt{static get isBrowser(){return!wt.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!wt.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!wt.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function Ns(r,n){let i="";return Ci(r)?(i=`Binary data of length ${r.byteLength}`,n&&(i+=`. Content: '${Fx(r)}'`)):typeof r=="string"&&(i=`String data of length ${r.length}`,n&&(i+=`. Content: '${r}'`)),i}function Fx(r){const n=new Uint8Array(r);let i="";return n.forEach(s=>{const c=s<16?"0":"";i+=`0x${c}${s.toString(16)} `}),i.substring(0,i.length-1)}function Ci(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}async function Yv(r,n,i,s,c,l){const d={},[p,m]=go();d[p]=m,r.log(we.Trace,`(${n} transport) sending data. ${Ns(c,l.logMessageContent)}.`);const g=Ci(c)?"arraybuffer":"text",y=await i.post(s,{content:c,headers:{...d,...l.headers},responseType:g,timeout:l.timeout,withCredentials:l.withCredentials});r.log(we.Trace,`(${n} transport) request complete. Response status: ${y.statusCode}.`)}function Xx(r){return r===void 0?new bc(we.Information):r===null?ks.instance:r.log!==void 0?r:new bc(r)}class Yx{constructor(n,i){this._subject=n,this._observer=i}dispose(){const n=this._subject.observers.indexOf(this._observer);n>-1&&this._subject.observers.splice(n,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(i=>{})}}class bc{constructor(n){this._minLevel=n,this.out=console}log(n,i){if(n>=this._minLevel){const s=`[${new Date().toISOString()}] ${we[n]}: ${i}`;switch(n){case we.Critical:case we.Error:this.out.error(s);break;case we.Warning:this.out.warn(s);break;case we.Information:this.out.info(s);break;default:this.out.log(s);break}}}}function go(){let r="X-SignalR-User-Agent";return wt.isNode&&(r="User-Agent"),[r,Jx(Gx,Kx(),Wx(),Qx())]}function Jx(r,n,i,s){let c="Microsoft SignalR/";const l=r.split(".");return c+=`${l[0]}.${l[1]}`,c+=` (${r}; `,n&&n!==""?c+=`${n}; `:c+="Unknown OS; ",c+=`${i}`,s?c+=`; ${s}`:c+="; Unknown Runtime Version",c+=")",c}function Kx(){if(wt.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function Qx(){if(wt.isNode)return process.versions.node}function Wx(){return wt.isNode?"NodeJS":"Browser"}function gd(r){return r.stack?r.stack:r.message?r.message:`${r}`}function Zx(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}let eE=class extends jc{constructor(n){if(super(),this._logger=n,typeof fetch>"u"||wt.isNode){const i=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(i("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=i("node-fetch"):this._fetchType=fetch,this._fetchType=i("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(Zx());if(typeof AbortController>"u"){const i=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=i("abort-controller")}else this._abortControllerType=AbortController}async send(n){if(n.abortSignal&&n.abortSignal.aborted)throw new qn;if(!n.method)throw new Error("No method defined.");if(!n.url)throw new Error("No url defined.");const i=new this._abortControllerType;let s;n.abortSignal&&(n.abortSignal.onabort=()=>{i.abort(),s=new qn});let c=null;if(n.timeout){const m=n.timeout;c=setTimeout(()=>{i.abort(),this._logger.log(we.Warning,"Timeout from HTTP request."),s=new lf},m)}n.content===""&&(n.content=void 0),n.content&&(n.headers=n.headers||{},Ci(n.content)?n.headers["Content-Type"]="application/octet-stream":n.headers["Content-Type"]="text/plain;charset=UTF-8");let l;try{l=await this._fetchType(n.url,{body:n.content,cache:"no-cache",credentials:n.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...n.headers},method:n.method,mode:"cors",redirect:"follow",signal:i.signal})}catch(m){throw s||(this._logger.log(we.Warning,`Error from HTTP request. ${m}.`),m)}finally{c&&clearTimeout(c),n.abortSignal&&(n.abortSignal.onabort=null)}if(!l.ok){const m=await fy(l,"text");throw new bi(m||l.statusText,l.status)}const p=await fy(l,n.responseType);return new Xv(l.status,l.statusText,p)}getCookieString(n){let i="";return wt.isNode&&this._jar&&this._jar.getCookies(n,(s,c)=>i=c.join("; ")),i}};function fy(r,n){let i;switch(n){case"arraybuffer":i=r.arrayBuffer();break;case"text":i=r.text();break;case"blob":case"document":case"json":throw new Error(`${n} is not supported.`);default:i=r.text();break}return i}class tE extends jc{constructor(n){super(),this._logger=n}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new qn):n.method?n.url?new Promise((i,s)=>{const c=new XMLHttpRequest;c.open(n.method,n.url,!0),c.withCredentials=n.withCredentials===void 0?!0:n.withCredentials,c.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.content===""&&(n.content=void 0),n.content&&(Ci(n.content)?c.setRequestHeader("Content-Type","application/octet-stream"):c.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const l=n.headers;l&&Object.keys(l).forEach(d=>{c.setRequestHeader(d,l[d])}),n.responseType&&(c.responseType=n.responseType),n.abortSignal&&(n.abortSignal.onabort=()=>{c.abort(),s(new qn)}),n.timeout&&(c.timeout=n.timeout),c.onload=()=>{n.abortSignal&&(n.abortSignal.onabort=null),c.status>=200&&c.status<300?i(new Xv(c.status,c.statusText,c.response||c.responseText)):s(new bi(c.response||c.responseText||c.statusText,c.status))},c.onerror=()=>{this._logger.log(we.Warning,`Error from HTTP request. ${c.status}: ${c.statusText}.`),s(new bi(c.statusText,c.status))},c.ontimeout=()=>{this._logger.log(we.Warning,"Timeout from HTTP request."),s(new lf)},c.send(n.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class nE extends jc{constructor(n){if(super(),typeof fetch<"u"||wt.isNode)this._httpClient=new eE(n);else if(typeof XMLHttpRequest<"u")this._httpClient=new tE(n);else throw new Error("No usable HttpClient found.")}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new qn):n.method?n.url?this._httpClient.send(n):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(n){return this._httpClient.getCookieString(n)}}class xn{static write(n){return`${n}${xn.RecordSeparator}`}static parse(n){if(n[n.length-1]!==xn.RecordSeparator)throw new Error("Message is incomplete.");const i=n.split(xn.RecordSeparator);return i.pop(),i}}xn.RecordSeparatorCode=30;xn.RecordSeparator=String.fromCharCode(xn.RecordSeparatorCode);class rE{writeHandshakeRequest(n){return xn.write(JSON.stringify(n))}parseHandshakeResponse(n){let i,s;if(Ci(n)){const p=new Uint8Array(n),m=p.indexOf(xn.RecordSeparatorCode);if(m===-1)throw new Error("Message is incomplete.");const g=m+1;i=String.fromCharCode.apply(null,Array.prototype.slice.call(p.slice(0,g))),s=p.byteLength>g?p.slice(g).buffer:null}else{const p=n,m=p.indexOf(xn.RecordSeparator);if(m===-1)throw new Error("Message is incomplete.");const g=m+1;i=p.substring(0,g),s=p.length>g?p.substring(g):null}const c=xn.parse(i),l=JSON.parse(c[0]);if(l.type)throw new Error("Expected a handshake response from the server.");return[s,l]}}var Fe;(function(r){r[r.Invocation=1]="Invocation",r[r.StreamItem=2]="StreamItem",r[r.Completion=3]="Completion",r[r.StreamInvocation=4]="StreamInvocation",r[r.CancelInvocation=5]="CancelInvocation",r[r.Ping=6]="Ping",r[r.Close=7]="Close",r[r.Ack=8]="Ack",r[r.Sequence=9]="Sequence"})(Fe||(Fe={}));class iE{constructor(){this.observers=[]}next(n){for(const i of this.observers)i.next(n)}error(n){for(const i of this.observers)i.error&&i.error(n)}complete(){for(const n of this.observers)n.complete&&n.complete()}subscribe(n){return this.observers.push(n),new Yx(this,n)}}class oE{constructor(n,i,s){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=n,this._connection=i,this._bufferSize=s}async _send(n){const i=this._protocol.writeMessage(n);let s=Promise.resolve();if(this._isInvocationMessage(n)){this._totalMessageCount++;let c=()=>{},l=()=>{};Ci(i)?this._bufferedByteCount+=i.byteLength:this._bufferedByteCount+=i.length,this._bufferedByteCount>=this._bufferSize&&(s=new Promise((d,p)=>{c=d,l=p})),this._messages.push(new sE(i,this._totalMessageCount,c,l))}try{this._reconnectInProgress||await this._connection.send(i)}catch{this._disconnected()}await s}_ack(n){let i=-1;for(let s=0;s<this._messages.length;s++){const c=this._messages[s];if(c._id<=n.sequenceId)i=s,Ci(c._message)?this._bufferedByteCount-=c._message.byteLength:this._bufferedByteCount-=c._message.length,c._resolver();else if(this._bufferedByteCount<this._bufferSize)c._resolver();else break}i!==-1&&(this._messages=this._messages.slice(i+1))}_shouldProcessMessage(n){if(this._waitForSequenceMessage)return n.type!==Fe.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(n))return!0;const i=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,i<=this._latestReceivedSequenceId?(i===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=i,this._ackTimer(),!0)}_resetSequence(n){if(n.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=n.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const n=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:Fe.Sequence,sequenceId:n}));const i=this._messages;for(const s of i)await this._connection.send(s._message);this._reconnectInProgress=!1}_dispose(n){n??(n=new Error("Unable to reconnect to server."));for(const i of this._messages)i._rejector(n)}_isInvocationMessage(n){switch(n.type){case Fe.Invocation:case Fe.StreamItem:case Fe.Completion:case Fe.StreamInvocation:case Fe.CancelInvocation:return!0;case Fe.Close:case Fe.Sequence:case Fe.Ping:case Fe.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:Fe.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class sE{constructor(n,i,s,c){this._message=n,this._id=i,this._resolver=s,this._rejector=c}}const aE=30*1e3,cE=15*1e3,lE=1e5;var vt;(function(r){r.Disconnected="Disconnected",r.Connecting="Connecting",r.Connected="Connected",r.Disconnecting="Disconnecting",r.Reconnecting="Reconnecting"})(vt||(vt={}));class uf{static create(n,i,s,c,l,d,p){return new uf(n,i,s,c,l,d,p)}constructor(n,i,s,c,l,d,p){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(we.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},Mt.isRequired(n,"connection"),Mt.isRequired(i,"logger"),Mt.isRequired(s,"protocol"),this.serverTimeoutInMilliseconds=l??aE,this.keepAliveIntervalInMilliseconds=d??cE,this._statefulReconnectBufferSize=p??lE,this._logger=i,this._protocol=s,this.connection=n,this._reconnectPolicy=c,this._handshakeProtocol=new rE,this.connection.onreceive=m=>this._processIncomingData(m),this.connection.onclose=m=>this._connectionClosed(m),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=vt.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Fe.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(n){if(this._connectionState!==vt.Disconnected&&this._connectionState!==vt.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!n)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=n}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==vt.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=vt.Connecting,this._logger.log(we.Debug,"Starting HubConnection.");try{await this._startInternal(),wt.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=vt.Connected,this._connectionStarted=!0,this._logger.log(we.Debug,"HubConnection connected successfully.")}catch(n){return this._connectionState=vt.Disconnected,this._logger.log(we.Debug,`HubConnection failed to start successfully because of error '${n}'.`),Promise.reject(n)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const n=new Promise((i,s)=>{this._handshakeResolver=i,this._handshakeRejecter=s});await this.connection.start(this._protocol.transferFormat);try{let i=this._protocol.version;this.connection.features.reconnect||(i=1);const s={protocol:this._protocol.name,version:i};if(this._logger.log(we.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(s)),this._logger.log(we.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await n,this._stopDuringStartError)throw this._stopDuringStartError;this.connection.features.reconnect&&(this._messageBuffer=new oE(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(i){throw this._logger.log(we.Debug,`Hub handshake failed with error '${i}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(i),i}}async stop(){const n=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await n}catch{}}_stopInternal(n){if(this._connectionState===vt.Disconnected)return this._logger.log(we.Debug,`Call to HubConnection.stop(${n}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===vt.Disconnecting)return this._logger.log(we.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const i=this._connectionState;return this._connectionState=vt.Disconnecting,this._logger.log(we.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(we.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(i===vt.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=n||new qn("The connection was stopped before the hub handshake could complete."),this.connection.stop(n))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(n,...i){const[s,c]=this._replaceStreamingParams(i),l=this._createStreamInvocation(n,i,c);let d;const p=new iE;return p.cancelCallback=()=>{const m=this._createCancelInvocation(l.invocationId);return delete this._callbacks[l.invocationId],d.then(()=>this._sendWithProtocol(m))},this._callbacks[l.invocationId]=(m,g)=>{if(g){p.error(g);return}else m&&(m.type===Fe.Completion?m.error?p.error(new Error(m.error)):p.complete():p.next(m.item))},d=this._sendWithProtocol(l).catch(m=>{p.error(m),delete this._callbacks[l.invocationId]}),this._launchStreams(s,d),p}_sendMessage(n){return this._resetKeepAliveInterval(),this.connection.send(n)}_sendWithProtocol(n){return this._messageBuffer?this._messageBuffer._send(n):this._sendMessage(this._protocol.writeMessage(n))}send(n,...i){const[s,c]=this._replaceStreamingParams(i),l=this._sendWithProtocol(this._createInvocation(n,i,!0,c));return this._launchStreams(s,l),l}invoke(n,...i){const[s,c]=this._replaceStreamingParams(i),l=this._createInvocation(n,i,!1,c);return new Promise((p,m)=>{this._callbacks[l.invocationId]=(y,E)=>{if(E){m(E);return}else y&&(y.type===Fe.Completion?y.error?m(new Error(y.error)):p(y.result):m(new Error(`Unexpected message type: ${y.type}`)))};const g=this._sendWithProtocol(l).catch(y=>{m(y),delete this._callbacks[l.invocationId]});this._launchStreams(s,g)})}on(n,i){!n||!i||(n=n.toLowerCase(),this._methods[n]||(this._methods[n]=[]),this._methods[n].indexOf(i)===-1&&this._methods[n].push(i))}off(n,i){if(!n)return;n=n.toLowerCase();const s=this._methods[n];if(s)if(i){const c=s.indexOf(i);c!==-1&&(s.splice(c,1),s.length===0&&delete this._methods[n])}else delete this._methods[n]}onclose(n){n&&this._closedCallbacks.push(n)}onreconnecting(n){n&&this._reconnectingCallbacks.push(n)}onreconnected(n){n&&this._reconnectedCallbacks.push(n)}_processIncomingData(n){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(n=this._processHandshakeResponse(n),this._receivedHandshakeResponse=!0),n){const i=this._protocol.parseMessages(n,this._logger);for(const s of i)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(s)))switch(s.type){case Fe.Invocation:this._invokeClientMethod(s).catch(c=>{this._logger.log(we.Error,`Invoke client method threw error: ${gd(c)}`)});break;case Fe.StreamItem:case Fe.Completion:{const c=this._callbacks[s.invocationId];if(c){s.type===Fe.Completion&&delete this._callbacks[s.invocationId];try{c(s)}catch(l){this._logger.log(we.Error,`Stream callback threw error: ${gd(l)}`)}}break}case Fe.Ping:break;case Fe.Close:{this._logger.log(we.Information,"Close message received from server.");const c=s.error?new Error("Server returned an error on close: "+s.error):void 0;s.allowReconnect===!0?this.connection.stop(c):this._stopPromise=this._stopInternal(c);break}case Fe.Ack:this._messageBuffer&&this._messageBuffer._ack(s);break;case Fe.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(s);break;default:this._logger.log(we.Warning,`Invalid message type: ${s.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(n){let i,s;try{[s,i]=this._handshakeProtocol.parseHandshakeResponse(n)}catch(c){const l="Error parsing handshake response: "+c;this._logger.log(we.Error,l);const d=new Error(l);throw this._handshakeRejecter(d),d}if(i.error){const c="Server returned handshake error: "+i.error;this._logger.log(we.Error,c);const l=new Error(c);throw this._handshakeRejecter(l),l}else this._logger.log(we.Debug,"Server handshake complete.");return this._handshakeResolver(),s}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if(!this.connection.features||!this.connection.features.inherentKeepAlive){this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds);let n=this._nextKeepAlive-new Date().getTime();if(n<0){this._connectionState===vt.Connected&&this._trySendPingMessage();return}this._pingServerHandle===void 0&&(n<0&&(n=0),this._pingServerHandle=setTimeout(async()=>{this._connectionState===vt.Connected&&await this._trySendPingMessage()},n))}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(n){const i=n.target.toLowerCase(),s=this._methods[i];if(!s){this._logger.log(we.Warning,`No client method with the name '${i}' found.`),n.invocationId&&(this._logger.log(we.Warning,`No result given for '${i}' method and invocation ID '${n.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)));return}const c=s.slice(),l=!!n.invocationId;let d,p,m;for(const g of c)try{const y=d;d=await g.apply(this,n.arguments),l&&d&&y&&(this._logger.log(we.Error,`Multiple results provided for '${i}'. Sending error to server.`),m=this._createCompletionMessage(n.invocationId,"Client provided multiple results.",null)),p=void 0}catch(y){p=y,this._logger.log(we.Error,`A callback for the method '${i}' threw error '${y}'.`)}m?await this._sendWithProtocol(m):l?(p?m=this._createCompletionMessage(n.invocationId,`${p}`,null):d!==void 0?m=this._createCompletionMessage(n.invocationId,null,d):(this._logger.log(we.Warning,`No result given for '${i}' method and invocation ID '${n.invocationId}'.`),m=this._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(m)):d&&this._logger.log(we.Error,`Result given for '${i}' method but server is not expecting a result.`)}_connectionClosed(n){this._logger.log(we.Debug,`HubConnection.connectionClosed(${n}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||n||new qn("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(n||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===vt.Disconnecting?this._completeClose(n):this._connectionState===vt.Connected&&this._reconnectPolicy?this._reconnect(n):this._connectionState===vt.Connected&&this._completeClose(n)}_completeClose(n){if(this._connectionStarted){this._connectionState=vt.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(n??new Error("Connection closed.")),this._messageBuffer=void 0),wt.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(i=>i.apply(this,[n]))}catch(i){this._logger.log(we.Error,`An onclose callback called with error '${n}' threw error '${i}'.`)}}}async _reconnect(n){const i=Date.now();let s=0,c=n!==void 0?n:new Error("Attempting to reconnect due to a unknown error."),l=this._getNextRetryDelay(s,0,c);if(l===null){this._logger.log(we.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(n);return}if(this._connectionState=vt.Reconnecting,n?this._logger.log(we.Information,`Connection reconnecting because of error '${n}'.`):this._logger.log(we.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(d=>d.apply(this,[n]))}catch(d){this._logger.log(we.Error,`An onreconnecting callback called with error '${n}' threw error '${d}'.`)}if(this._connectionState!==vt.Reconnecting){this._logger.log(we.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;l!==null;){if(this._logger.log(we.Information,`Reconnect attempt number ${s+1} will start in ${l} ms.`),await new Promise(d=>{this._reconnectDelayHandle=setTimeout(d,l)}),this._reconnectDelayHandle=void 0,this._connectionState!==vt.Reconnecting){this._logger.log(we.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=vt.Connected,this._logger.log(we.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(d=>d.apply(this,[this.connection.connectionId]))}catch(d){this._logger.log(we.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${d}'.`)}return}catch(d){if(this._logger.log(we.Information,`Reconnect attempt failed because of error '${d}'.`),this._connectionState!==vt.Reconnecting){this._logger.log(we.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===vt.Disconnecting&&this._completeClose();return}s++,c=d instanceof Error?d:new Error(d.toString()),l=this._getNextRetryDelay(s,Date.now()-i,c)}}this._logger.log(we.Information,`Reconnect retries have been exhausted after ${Date.now()-i} ms and ${s} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(n,i,s){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:i,previousRetryCount:n,retryReason:s})}catch(c){return this._logger.log(we.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${n}, ${i}) threw error '${c}'.`),null}}_cancelCallbacksWithError(n){const i=this._callbacks;this._callbacks={},Object.keys(i).forEach(s=>{const c=i[s];try{c(null,n)}catch(l){this._logger.log(we.Error,`Stream 'error' callback called with '${n}' threw error: ${gd(l)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(n,i,s,c){if(s)return c.length!==0?{target:n,arguments:i,streamIds:c,type:Fe.Invocation}:{target:n,arguments:i,type:Fe.Invocation};{const l=this._invocationId;return this._invocationId++,c.length!==0?{target:n,arguments:i,invocationId:l.toString(),streamIds:c,type:Fe.Invocation}:{target:n,arguments:i,invocationId:l.toString(),type:Fe.Invocation}}}_launchStreams(n,i){if(n.length!==0){i||(i=Promise.resolve());for(const s in n)n[s].subscribe({complete:()=>{i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(s)))},error:c=>{let l;c instanceof Error?l=c.message:c&&c.toString?l=c.toString():l="Unknown error",i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(s,l)))},next:c=>{i=i.then(()=>this._sendWithProtocol(this._createStreamItemMessage(s,c)))}})}}_replaceStreamingParams(n){const i=[],s=[];for(let c=0;c<n.length;c++){const l=n[c];if(this._isObservable(l)){const d=this._invocationId;this._invocationId++,i[d]=l,s.push(d.toString()),n.splice(c,1)}}return[i,s]}_isObservable(n){return n&&n.subscribe&&typeof n.subscribe=="function"}_createStreamInvocation(n,i,s){const c=this._invocationId;return this._invocationId++,s.length!==0?{target:n,arguments:i,invocationId:c.toString(),streamIds:s,type:Fe.StreamInvocation}:{target:n,arguments:i,invocationId:c.toString(),type:Fe.StreamInvocation}}_createCancelInvocation(n){return{invocationId:n,type:Fe.CancelInvocation}}_createStreamItemMessage(n,i){return{invocationId:n,item:i,type:Fe.StreamItem}}_createCompletionMessage(n,i,s){return i?{error:i,invocationId:n,type:Fe.Completion}:{invocationId:n,result:s,type:Fe.Completion}}_createCloseMessage(){return{type:Fe.Close}}async _trySendPingMessage(){try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}}const uE=[0,2e3,1e4,3e4,null];class hy{constructor(n){this._retryDelays=n!==void 0?[...n,null]:uE}nextRetryDelayInMilliseconds(n){return this._retryDelays[n.previousRetryCount]}}class Si{}Si.Authorization="Authorization";Si.Cookie="Cookie";class dE extends jc{constructor(n,i){super(),this._innerClient=n,this._accessTokenFactory=i}async send(n){let i=!0;this._accessTokenFactory&&(!this._accessToken||n.url&&n.url.indexOf("/negotiate?")>0)&&(i=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(n);const s=await this._innerClient.send(n);return i&&s.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(n),await this._innerClient.send(n)):s}_setAuthorizationHeader(n){n.headers||(n.headers={}),this._accessToken?n.headers[Si.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&n.headers[Si.Authorization]&&delete n.headers[Si.Authorization]}getCookieString(n){return this._innerClient.getCookieString(n)}}var Pt;(function(r){r[r.None=0]="None",r[r.WebSockets=1]="WebSockets",r[r.ServerSentEvents=2]="ServerSentEvents",r[r.LongPolling=4]="LongPolling"})(Pt||(Pt={}));var tn;(function(r){r[r.Text=1]="Text",r[r.Binary=2]="Binary"})(tn||(tn={}));let fE=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class py{get pollAborted(){return this._pollAbort.aborted}constructor(n,i,s){this._httpClient=n,this._logger=i,this._pollAbort=new fE,this._options=s,this._running=!1,this.onreceive=null,this.onclose=null}async connect(n,i){if(Mt.isRequired(n,"url"),Mt.isRequired(i,"transferFormat"),Mt.isIn(i,tn,"transferFormat"),this._url=n,this._logger.log(we.Trace,"(LongPolling transport) Connecting."),i===tn.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[s,c]=go(),l={[s]:c,...this._options.headers},d={abortSignal:this._pollAbort.signal,headers:l,timeout:1e5,withCredentials:this._options.withCredentials};i===tn.Binary&&(d.responseType="arraybuffer");const p=`${n}&_=${Date.now()}`;this._logger.log(we.Trace,`(LongPolling transport) polling: ${p}.`);const m=await this._httpClient.get(p,d);m.statusCode!==200?(this._logger.log(we.Error,`(LongPolling transport) Unexpected response code: ${m.statusCode}.`),this._closeError=new bi(m.statusText||"",m.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,d)}async _poll(n,i){try{for(;this._running;)try{const s=`${n}&_=${Date.now()}`;this._logger.log(we.Trace,`(LongPolling transport) polling: ${s}.`);const c=await this._httpClient.get(s,i);c.statusCode===204?(this._logger.log(we.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):c.statusCode!==200?(this._logger.log(we.Error,`(LongPolling transport) Unexpected response code: ${c.statusCode}.`),this._closeError=new bi(c.statusText||"",c.statusCode),this._running=!1):c.content?(this._logger.log(we.Trace,`(LongPolling transport) data received. ${Ns(c.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(c.content)):this._logger.log(we.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(s){this._running?s instanceof lf?this._logger.log(we.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=s,this._running=!1):this._logger.log(we.Trace,`(LongPolling transport) Poll errored after shutdown: ${s.message}`)}}finally{this._logger.log(we.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(n){return this._running?Yv(this._logger,"LongPolling",this._httpClient,this._url,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(we.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(we.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const n={},[i,s]=go();n[i]=s;const c={headers:{...n,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let l;try{await this._httpClient.delete(this._url,c)}catch(d){l=d}l?l instanceof bi&&(l.statusCode===404?this._logger.log(we.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(we.Trace,`(LongPolling transport) Error sending a DELETE request: ${l}`)):this._logger.log(we.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(we.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let n="(LongPolling transport) Firing onclose event.";this._closeError&&(n+=" Error: "+this._closeError),this._logger.log(we.Trace,n),this.onclose(this._closeError)}}}class hE{constructor(n,i,s,c){this._httpClient=n,this._accessToken=i,this._logger=s,this._options=c,this.onreceive=null,this.onclose=null}async connect(n,i){return Mt.isRequired(n,"url"),Mt.isRequired(i,"transferFormat"),Mt.isIn(i,tn,"transferFormat"),this._logger.log(we.Trace,"(SSE transport) Connecting."),this._url=n,this._accessToken&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((s,c)=>{let l=!1;if(i!==tn.Text){c(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let d;if(wt.isBrowser||wt.isWebWorker)d=new this._options.EventSource(n,{withCredentials:this._options.withCredentials});else{const p=this._httpClient.getCookieString(n),m={};m.Cookie=p;const[g,y]=go();m[g]=y,d=new this._options.EventSource(n,{withCredentials:this._options.withCredentials,headers:{...m,...this._options.headers}})}try{d.onmessage=p=>{if(this.onreceive)try{this._logger.log(we.Trace,`(SSE transport) data received. ${Ns(p.data,this._options.logMessageContent)}.`),this.onreceive(p.data)}catch(m){this._close(m);return}},d.onerror=p=>{l?this._close():c(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},d.onopen=()=>{this._logger.log(we.Information,`SSE connected to ${this._url}`),this._eventSource=d,l=!0,s()}}catch(p){c(p);return}})}async send(n){return this._eventSource?Yv(this._logger,"SSE",this._httpClient,this._url,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(n){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(n))}}class pE{constructor(n,i,s,c,l,d){this._logger=s,this._accessTokenFactory=i,this._logMessageContent=c,this._webSocketConstructor=l,this._httpClient=n,this.onreceive=null,this.onclose=null,this._headers=d}async connect(n,i){Mt.isRequired(n,"url"),Mt.isRequired(i,"transferFormat"),Mt.isIn(i,tn,"transferFormat"),this._logger.log(we.Trace,"(WebSockets transport) Connecting.");let s;return this._accessTokenFactory&&(s=await this._accessTokenFactory()),new Promise((c,l)=>{n=n.replace(/^http/,"ws");let d;const p=this._httpClient.getCookieString(n);let m=!1;if(wt.isNode||wt.isReactNative){const g={},[y,E]=go();g[y]=E,s&&(g[Si.Authorization]=`Bearer ${s}`),p&&(g[Si.Cookie]=p),d=new this._webSocketConstructor(n,void 0,{headers:{...g,...this._headers}})}else s&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(s)}`);d||(d=new this._webSocketConstructor(n)),i===tn.Binary&&(d.binaryType="arraybuffer"),d.onopen=g=>{this._logger.log(we.Information,`WebSocket connected to ${n}.`),this._webSocket=d,m=!0,c()},d.onerror=g=>{let y=null;typeof ErrorEvent<"u"&&g instanceof ErrorEvent?y=g.error:y="There was an error with the transport",this._logger.log(we.Information,`(WebSockets transport) ${y}.`)},d.onmessage=g=>{if(this._logger.log(we.Trace,`(WebSockets transport) data received. ${Ns(g.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(g.data)}catch(y){this._close(y);return}},d.onclose=g=>{if(m)this._close(g);else{let y=null;typeof ErrorEvent<"u"&&g instanceof ErrorEvent?y=g.error:y="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",l(new Error(y))}}})}send(n){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(we.Trace,`(WebSockets transport) sending data. ${Ns(n,this._logMessageContent)}.`),this._webSocket.send(n),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(n){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(we.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(n)&&(n.wasClean===!1||n.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${n.code} (${n.reason||"no reason given"}).`)):n instanceof Error?this.onclose(n):this.onclose())}_isCloseEvent(n){return n&&typeof n.wasClean=="boolean"&&typeof n.code=="number"}}const my=100;class mE{constructor(n,i={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,Mt.isRequired(n,"url"),this._logger=Xx(i.logger),this.baseUrl=this._resolveUrl(n),i=i||{},i.logMessageContent=i.logMessageContent===void 0?!1:i.logMessageContent,typeof i.withCredentials=="boolean"||i.withCredentials===void 0)i.withCredentials=i.withCredentials===void 0?!0:i.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");i.timeout=i.timeout===void 0?100*1e3:i.timeout;let s=null,c=null;if(wt.isNode&&typeof require<"u"){const l=typeof __webpack_require__=="function"?__non_webpack_require__:require;s=l("ws"),c=l("eventsource")}!wt.isNode&&typeof WebSocket<"u"&&!i.WebSocket?i.WebSocket=WebSocket:wt.isNode&&!i.WebSocket&&s&&(i.WebSocket=s),!wt.isNode&&typeof EventSource<"u"&&!i.EventSource?i.EventSource=EventSource:wt.isNode&&!i.EventSource&&typeof c<"u"&&(i.EventSource=c),this._httpClient=new dE(i.httpClient||new nE(this._logger),i.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=i,this.onreceive=null,this.onclose=null}async start(n){if(n=n||tn.Binary,Mt.isIn(n,tn,"transferFormat"),this._logger.log(we.Debug,`Starting connection with transfer format '${tn[n]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(n),await this._startInternalPromise,this._connectionState==="Disconnecting"){const i="Failed to start the HttpConnection before stop() was called.";return this._logger.log(we.Error,i),await this._stopPromise,Promise.reject(new qn(i))}else if(this._connectionState!=="Connected"){const i="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(we.Error,i),Promise.reject(new qn(i))}this._connectionStarted=!0}send(n){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new df(this.transport)),this._sendQueue.send(n))}async stop(n){if(this._connectionState==="Disconnected")return this._logger.log(we.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(we.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(i=>{this._stopPromiseResolver=i}),await this._stopInternal(n),await this._stopPromise}async _stopInternal(n){this._stopError=n;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(i){this._logger.log(we.Error,`HttpConnection.transport.stop() threw error '${i}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(we.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(n){let i=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===Pt.WebSockets)this.transport=this._constructTransport(Pt.WebSockets),await this._startTransport(i,n);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let s=null,c=0;do{if(s=await this._getNegotiationResponse(i),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new qn("The connection was stopped during negotiation.");if(s.error)throw new Error(s.error);if(s.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(s.url&&(i=s.url),s.accessToken){const l=s.accessToken;this._accessTokenFactory=()=>l,this._httpClient._accessToken=l,this._httpClient._accessTokenFactory=void 0}c++}while(s.url&&c<my);if(c===my&&s.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(i,this._options.transport,s,n)}this.transport instanceof py&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(we.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(s){return this._logger.log(we.Error,"Failed to start the connection: "+s),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(s)}}async _getNegotiationResponse(n){const i={},[s,c]=go();i[s]=c;const l=this._resolveNegotiateUrl(n);this._logger.log(we.Debug,`Sending negotiation request: ${l}.`);try{const d=await this._httpClient.post(l,{content:"",headers:{...i,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(d.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${d.statusCode}'`));const p=JSON.parse(d.content);return(!p.negotiateVersion||p.negotiateVersion<1)&&(p.connectionToken=p.connectionId),p.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new dy("Client didn't negotiate Stateful Reconnect but the server did.")):p}catch(d){let p="Failed to complete negotiation with the server: "+d;return d instanceof bi&&d.statusCode===404&&(p=p+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(we.Error,p),Promise.reject(new dy(p))}}_createConnectUrl(n,i){return i?n+(n.indexOf("?")===-1?"?":"&")+`id=${i}`:n}async _createTransport(n,i,s,c){let l=this._createConnectUrl(n,s.connectionToken);if(this._isITransport(i)){this._logger.log(we.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=i,await this._startTransport(l,c),this.connectionId=s.connectionId;return}const d=[],p=s.availableTransports||[];let m=s;for(const g of p){const y=this._resolveTransportOrError(g,i,c,m?.useStatefulReconnect===!0);if(y instanceof Error)d.push(`${g.transport} failed:`),d.push(y);else if(this._isITransport(y)){if(this.transport=y,!m){try{m=await this._getNegotiationResponse(n)}catch(E){return Promise.reject(E)}l=this._createConnectUrl(n,m.connectionToken)}try{await this._startTransport(l,c),this.connectionId=m.connectionId;return}catch(E){if(this._logger.log(we.Error,`Failed to start the transport '${g.transport}': ${E}`),m=void 0,d.push(new $x(`${g.transport} failed: ${E}`,Pt[g.transport])),this._connectionState!=="Connecting"){const I="Failed to select transport before stop() was called.";return this._logger.log(we.Debug,I),Promise.reject(new qn(I))}}}}return d.length>0?Promise.reject(new Vx(`Unable to connect to the server with any of the available transports. ${d.join(" ")}`,d)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(n){switch(n){case Pt.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new pE(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case Pt.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new hE(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case Pt.LongPolling:return new py(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${n}.`)}}_startTransport(n,i){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async s=>{let c=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(n,i),await this.features.resend()}catch{c=!0}else{this._stopConnection(s);return}c&&this._stopConnection(s)}:this.transport.onclose=s=>this._stopConnection(s),this.transport.connect(n,i)}_resolveTransportOrError(n,i,s,c){const l=Pt[n.transport];if(l==null)return this._logger.log(we.Debug,`Skipping transport '${n.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${n.transport}' because it is not supported by this client.`);if(gE(i,l))if(n.transferFormats.map(p=>tn[p]).indexOf(s)>=0){if(l===Pt.WebSockets&&!this._options.WebSocket||l===Pt.ServerSentEvents&&!this._options.EventSource)return this._logger.log(we.Debug,`Skipping transport '${Pt[l]}' because it is not supported in your environment.'`),new Hx(`'${Pt[l]}' is not supported in your environment.`,l);this._logger.log(we.Debug,`Selecting transport '${Pt[l]}'.`);try{return this.features.reconnect=l===Pt.WebSockets?c:void 0,this._constructTransport(l)}catch(p){return p}}else return this._logger.log(we.Debug,`Skipping transport '${Pt[l]}' because it does not support the requested transfer format '${tn[s]}'.`),new Error(`'${Pt[l]}' does not support ${tn[s]}.`);else return this._logger.log(we.Debug,`Skipping transport '${Pt[l]}' because it was disabled by the client.`),new qx(`'${Pt[l]}' is disabled by the client.`,l)}_isITransport(n){return n&&typeof n=="object"&&"connect"in n}_stopConnection(n){if(this._logger.log(we.Debug,`HttpConnection.stopConnection(${n}) called while in state ${this._connectionState}.`),this.transport=void 0,n=this._stopError||n,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(we.Debug,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(we.Warning,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${n}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),n?this._logger.log(we.Error,`Connection disconnected with error '${n}'.`):this._logger.log(we.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(i=>{this._logger.log(we.Error,`TransportSendQueue.stop() threw error '${i}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(n)}catch(i){this._logger.log(we.Error,`HttpConnection.onclose(${n}) threw error '${i}'.`)}}}_resolveUrl(n){if(n.lastIndexOf("https://",0)===0||n.lastIndexOf("http://",0)===0)return n;if(!wt.isBrowser)throw new Error(`Cannot resolve '${n}'.`);const i=window.document.createElement("a");return i.href=n,this._logger.log(we.Information,`Normalizing '${n}' to '${i.href}'.`),i.href}_resolveNegotiateUrl(n){const i=new URL(n);i.pathname.endsWith("/")?i.pathname+="negotiate":i.pathname+="/negotiate";const s=new URLSearchParams(i.searchParams);return s.has("negotiateVersion")||s.append("negotiateVersion",this._negotiateVersion.toString()),s.has("useStatefulReconnect")?s.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&s.append("useStatefulReconnect","true"),i.search=s.toString(),i.toString()}}function gE(r,n){return!r||(n&r)!==0}class df{constructor(n){this._transport=n,this._buffer=[],this._executing=!0,this._sendBufferedData=new nc,this._transportResult=new nc,this._sendLoopPromise=this._sendLoop()}send(n){return this._bufferData(n),this._transportResult||(this._transportResult=new nc),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(n){if(this._buffer.length&&typeof this._buffer[0]!=typeof n)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof n}`);this._buffer.push(n),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new nc;const n=this._transportResult;this._transportResult=void 0;const i=typeof this._buffer[0]=="string"?this._buffer.join(""):df._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(i),n.resolve()}catch(s){n.reject(s)}}}static _concatBuffers(n){const i=n.map(l=>l.byteLength).reduce((l,d)=>l+d),s=new Uint8Array(i);let c=0;for(const l of n)s.set(new Uint8Array(l),c),c+=l.byteLength;return s.buffer}}class nc{constructor(){this.promise=new Promise((n,i)=>[this._resolver,this._rejecter]=[n,i])}resolve(){this._resolver()}reject(n){this._rejecter(n)}}const yE="json";class vE{constructor(){this.name=yE,this.version=2,this.transferFormat=tn.Text}parseMessages(n,i){if(typeof n!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!n)return[];i===null&&(i=ks.instance);const s=xn.parse(n),c=[];for(const l of s){const d=JSON.parse(l);if(typeof d.type!="number")throw new Error("Invalid payload.");switch(d.type){case Fe.Invocation:this._isInvocationMessage(d);break;case Fe.StreamItem:this._isStreamItemMessage(d);break;case Fe.Completion:this._isCompletionMessage(d);break;case Fe.Ping:break;case Fe.Close:break;case Fe.Ack:this._isAckMessage(d);break;case Fe.Sequence:this._isSequenceMessage(d);break;default:i.log(we.Information,"Unknown message type '"+d.type+"' ignored.");continue}c.push(d)}return c}writeMessage(n){return xn.write(JSON.stringify(n))}_isInvocationMessage(n){this._assertNotEmptyString(n.target,"Invalid payload for Invocation message."),n.invocationId!==void 0&&this._assertNotEmptyString(n.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(n){if(this._assertNotEmptyString(n.invocationId,"Invalid payload for StreamItem message."),n.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(n){if(n.result&&n.error)throw new Error("Invalid payload for Completion message.");!n.result&&n.error&&this._assertNotEmptyString(n.error,"Invalid payload for Completion message."),this._assertNotEmptyString(n.invocationId,"Invalid payload for Completion message.")}_isAckMessage(n){if(typeof n.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(n){if(typeof n.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(n,i){if(typeof n!="string"||n==="")throw new Error(i)}}const bE={trace:we.Trace,debug:we.Debug,info:we.Information,information:we.Information,warn:we.Warning,warning:we.Warning,error:we.Error,critical:we.Critical,none:we.None};function SE(r){const n=bE[r.toLowerCase()];if(typeof n<"u")return n;throw new Error(`Unknown log level: ${r}`)}class wE{configureLogging(n){if(Mt.isRequired(n,"logging"),TE(n))this.logger=n;else if(typeof n=="string"){const i=SE(n);this.logger=new bc(i)}else this.logger=new bc(n);return this}withUrl(n,i){return Mt.isRequired(n,"url"),Mt.isNotEmpty(n,"url"),this.url=n,typeof i=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...i}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:i},this}withHubProtocol(n){return Mt.isRequired(n,"protocol"),this.protocol=n,this}withAutomaticReconnect(n){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return n?Array.isArray(n)?this.reconnectPolicy=new hy(n):this.reconnectPolicy=n:this.reconnectPolicy=new hy,this}withServerTimeout(n){return Mt.isRequired(n,"milliseconds"),this._serverTimeoutInMilliseconds=n,this}withKeepAliveInterval(n){return Mt.isRequired(n,"milliseconds"),this._keepAliveIntervalInMilliseconds=n,this}withStatefulReconnect(n){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=n?.bufferSize,this}build(){const n=this.httpConnectionOptions||{};if(n.logger===void 0&&(n.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const i=new mE(this.url,n);return uf.create(i,this.logger||ks.instance,this.protocol||new vE,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function TE(r){return r.log!==void 0}class CE{constructor(){this.connection=null,this.isConnected=!1,this.messageHandlers=new Set}async connect(){if(!this.isConnected){this.connection=new wE().withUrl("http://localhost:7219/chathub",{accessTokenFactory:()=>{const n=localStorage.getItem("user");return n?JSON.parse(n).token:null}}).withAutomaticReconnect().build();try{await this.connection.start(),this.isConnected=!0,console.log("SignalR Connected")}catch(n){console.error("SignalR Connection Error:",n),this.isConnected=!1}}}async joinChat(n){this.isConnected||await this.connect();try{await this.connection.invoke("JoinChat",n)}catch(i){console.error("Error joining chat:",i)}}async sendMessage(n,i){this.isConnected||await this.connect();try{await this.connection.invoke("SendMessage",n,i)}catch(s){throw console.error("Error sending message:",s),s}}onReceiveMessage(n){this.connection&&!this.messageHandlers.has(n)&&(this.messageHandlers.add(n),this.connection.on("ReceiveMessage",n))}offReceiveMessage(n){this.connection&&this.messageHandlers.has(n)&&(this.messageHandlers.delete(n),this.connection.off("ReceiveMessage",n))}onError(n){this.connection&&this.connection.on("Error",n)}onMessageStatusUpdated(n){this.connection&&this.connection.on("MessageStatusUpdated",n)}async markDelivered(n,i){this.isConnected||await this.connect();try{await this.connection.invoke("MarkDelivered",n,i)}catch(s){console.error("Error marking delivered:",s)}}async markRead(n,i){this.isConnected||await this.connect();try{await this.connection.invoke("MarkRead",n,i)}catch(s){console.error("Error marking read:",s)}}async getMessageHistory(n){this.isConnected||await this.connect();try{return await this.connection.invoke("GetMessageHistory",n)}catch(i){return console.error("Error getting message history:",i),[]}}async disconnect(){this.connection&&this.isConnected&&(await this.connection.stop(),this.isConnected=!1)}}const Kn=new CE,Jv=({recipientId:r,recipientName:n,onClose:i})=>{const[s,c]=z.useState([]),[l,d]=z.useState(""),[p,m]=z.useState(!1),[g,y]=z.useState(!1),[E,I]=z.useState(!0),F=localStorage.getItem("userId"),U=z.useRef(null),re=z.useRef(null);z.useEffect(()=>(X(),()=>{re.current&&Kn.offReceiveMessage(re.current)}),[r]);const X=async()=>{try{I(!0),await Kn.connect(),console.log(" Joining chat with:",r),await Kn.joinChat(r),console.log(" Joined chat successfully"),re.current=oe=>{console.log(" Message received:",oe),oe.senderId===r?c(ee=>{if(ee.find(ne=>ne.id===oe.id))return ee;const ae={id:oe.id,sender:"Recipient",text:oe.message,timestamp:new Date(oe.timestamp),status:oe.status?.toLowerCase()||"sent"},le=`chat_${[F,r].sort().join("_")}`;return console.log(" Calling MarkDelivered:",oe.id,le),Kn.markDelivered(oe.id,le),setTimeout(async()=>{try{const ne=await Ke.get(`chat/messages/${r}`);ne.data&&c(Re=>Re.map(Ee=>{const Ae=ne.data.find(He=>He.id===Ee.id);return Ae&&Ee.sender==="Me"?(console.log(`Refreshed status for ${Ee.id}: ${Ae.status}`),{...Ee,status:Ae.status?.toLowerCase()}):Ee}))}catch(ne){console.error("Failed to refresh status:",ne)}},500),[...ee,ae]}):console.log(" Ignoring message from self or other user")},Kn.onReceiveMessage(re.current),Kn.onMessageStatusUpdated(oe=>{console.log(" Status updated event received:",oe),c(ee=>ee.map(le=>le.id===oe.messageId?(console.log(`Updating message ${le.id} from ${le.status} to ${oe.status}`),{...le,status:oe.status?.toLowerCase()||le.status}):le))}),Kn.onError(oe=>{console.error("Chat error:",oe)});try{const oe=await Ke.get(`chat/messages/${r}`);if(oe.data&&oe.data.length>0){const ee=oe.data.map(ae=>({id:ae.id,sender:ae.senderId===F?"Me":"Recipient",text:ae.message,timestamp:new Date(ae.timestamp),status:ae.status?.toLowerCase()||"sent"}));c(ee)}}catch(oe){console.error("Failed to load message history:",oe)}y(!0)}catch(oe){console.error("Failed to initialize chat:",oe)}finally{I(!1)}};z.useEffect(()=>{ve();const oe=`chat_${[F,r].sort().join("_")}`;s.forEach(ee=>{ee.sender==="Recipient"&&ee.id&&ee.status!=="read"&&(console.log(" Marking as read:",ee.id,oe),Kn.markRead(ee.id,oe))})},[s,F,r]);const ve=()=>{U.current?.scrollIntoView({behavior:"smooth"})},pe=async oe=>{if(oe.preventDefault(),!(!l.trim()||!g))try{m(!0);const ee=l;d(""),await Kn.sendMessage(r,ee),c(ae=>[...ae,{id:Date.now(),sender:"Me",text:ee,timestamp:new Date,status:"sent"}])}catch(ee){console.error("Failed to send message:",ee),alert("Failed to send message. Please try again."),d(messageText)}finally{m(!1)}};return h.jsxs("div",{className:"chat-widget",children:[h.jsxs("div",{className:"chat-header",children:[h.jsxs("div",{className:"chat-user-info",children:[h.jsx("div",{className:"user-avatar",children:""}),h.jsxs("div",{children:[h.jsx("div",{className:"user-name",children:n||"Chat"}),h.jsxs("div",{className:"user-status",children:[" ",g?"Online":"Connecting..."]})]})]}),h.jsx("button",{onClick:i,className:"close-btn",children:h.jsx(nf,{size:16})})]}),h.jsxs("div",{className:"chat-messages",children:[E?h.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:"Loading messages..."}):s.length===0?h.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:["Start a conversation with ",n]}):s.map((oe,ee)=>(console.log("Rendering message:",{id:oe.id,status:oe.status,sender:oe.sender}),h.jsxs("div",{className:`message ${oe.sender==="Me"?"sent":"received"}`,children:[h.jsx("div",{className:"message-content",children:oe.text}),h.jsxs("div",{style:{fontSize:"11px",color:"#65676b",marginTop:"2px",textAlign:"center"},children:[new Date(oe.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),oe.sender==="Me"&&h.jsx("span",{style:{marginLeft:"4px",color:oe.status==="read"?"#4ade80":"#65676b",fontWeight:"500"},children:oe.status==="read"?"Read":oe.status==="delivered"?"Delivered":"Sent"})]})]},oe.id||ee))),h.jsx("div",{ref:U})]}),h.jsxs("form",{onSubmit:pe,className:"chat-input",children:[h.jsx("input",{type:"text",value:l,onChange:oe=>d(oe.target.value),placeholder:"Type a message...",className:"message-input"}),h.jsx("button",{type:"submit",className:"send-btn",disabled:p,children:h.jsx(po,{size:16})})]})]})},RE=({src:r,alt:n,className:i,userId:s})=>{const[c,l]=z.useState(r||"https://via.placeholder.com/400x300/f1f5f9/64748b?text=No+Image"),[d,p]=z.useState(!1);z.useEffect(()=>{r&&!d&&l(r)},[r,d]);const m=()=>{d||(p(!0),l("https://via.placeholder.com/400x300/f1f5f9/64748b?text=No+Image"))};return h.jsx("img",{src:c,alt:n,className:i,onError:m})},gy=({user:r})=>{Qr();const[n,i]=z.useState([]),[s,c]=z.useState(!0),[l,d]=z.useState({}),[p,m]=z.useState([]),[g,y]=z.useState([]),[E,I]=z.useState(null),[F,U]=z.useState(!1),[re,X]=z.useState({}),[ve,pe]=z.useState("Not connected"),[oe,ee]=z.useState(null),[ae,le]=z.useState(!1),[ne,Re]=z.useState(!1),[Ee,Ae]=z.useState({rating:0,comment:""}),[He,Ve]=z.useState(!1),[Oe,Te]=z.useState("");z.useEffect(()=>{r&&r.token&&(K(),De())},[r]);const De=async()=>{try{const b=await Ke.get("location/states-with-cities");X(b.data)}catch(b){console.error("Error fetching locations:",b),X({"Tamil Nadu":["Chennai","Coimbatore","Madurai","Other"],Karnataka:["Bangalore","Mysore","Mangalore","Other"],Kerala:["Kochi","Thiruvananthapuram","Kozhikode","Other"],"Andhra Pradesh":["Hyderabad","Visakhapatnam","Vijayawada","Other"],Maharashtra:["Mumbai","Pune","Nagpur","Other"],Delhi:["New Delhi","Other"]})}};z.useEffect(()=>{$()},[n,p]);const $=()=>{if(p.length===0)y(n);else{const b=n.filter(T=>p.some(k=>T.location?.toLowerCase().includes(k.toLowerCase())));y(b)}},M=b=>{d(T=>({...T,[b]:!T[b]}))},Y=b=>{m(T=>T.includes(b)?T.filter(k=>k!==b):[...T,b])},P=()=>{m([])},K=async()=>{try{const b=await Ke.get("user/browse"),k=(Array.isArray(b.data)?b.data:[b.data]).filter(N=>N.status==="Active"||N.status==="Verified");i(k)}catch(b){console.error("Error fetching hosts:",b),b.response?.status===500?(console.error("Server error - API may be down or misconfigured"),i([])):b.response?.status!==401&&b.response?.status!==403&&i([])}finally{c(!1)}},R=async b=>{le(!0);try{const T=await Ke.post("user/public-profile",{userId:b.userId}),k=r?.userId,N=T.data.reviews||[],S=N.find(J=>J.reviewerId===k),C=N.filter(J=>J.reviewerId!==k).sort((J,V)=>new Date(V.createdAt)-new Date(J.createdAt)),A=S?[S,...C]:C,B=!!S;ee({...T.data,reviews:A,hasUserReview:B}),Re(!1),Ae({rating:0,comment:""})}catch(T){console.error("Failed to fetch profile:",T)}finally{le(!1)}},D=b=>{I({id:b.userId,name:b.name})},x=async()=>{if(Te(""),!Ee.comment.trim()||Ee.rating===0){Te("Please provide both rating and comment");return}Ve(!0);try{await Ke.post("review",{userId:oe.userId,rating:Ee.rating,comment:Ee.comment.trim()});const b=await Ke.post("user/public-profile",{userId:oe.userId}),T=r?.userId,k=b.data.reviews||[],N=k.find(B=>B.reviewerId===T),S=k.filter(B=>B.reviewerId!==T).sort((B,J)=>new Date(J.createdAt)-new Date(B.createdAt)),C=N?[N,...S]:S,A=!!N;ee({...b.data,reviews:C,hasUserReview:A}),Re(!1),Ae({rating:0,comment:""}),Te("")}catch(b){console.error("Failed to submit review:",b),b.response?.data?.message?Te(b.response.data.message):Te("Failed to submit review. Please try again.")}finally{Ve(!1)}};return s?h.jsx("div",{className:"container",children:h.jsxs("div",{className:"loading",style:{padding:"4rem",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),h.jsx("h3",{children:"Finding amazing hosts for you..."})]})}):h.jsxs("div",{className:"browse-layout",children:[h.jsxs("button",{className:"mobile-filter-toggle",onClick:()=>U(!F),children:[F?h.jsx(Sv,{size:16}):h.jsx(wv,{size:16}),"Filters ",p.length>0&&`(${p.length})`]}),h.jsxs("div",{className:`location-sidebar ${F?"mobile-visible":""}`,children:[h.jsxs("div",{className:"filter-header",children:[h.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx(bv,{size:20,style:{color:"var(--primary)"}}),"Filter by Location"]}),p.length>0&&h.jsxs("button",{onClick:P,className:"clear-filters-btn",children:["Clear (",p.length,")"]})]}),h.jsx("div",{className:"location-filters",children:Object.entries(re).map(([b,T])=>h.jsxs("div",{className:"state-group",children:[h.jsxs("button",{className:"state-toggle",onClick:()=>M(b),children:[l[b]?h.jsx(gv,{size:16}):h.jsx(yv,{size:16}),h.jsx("span",{children:b})]}),l[b]&&h.jsx("div",{className:"cities-list",children:T.map(k=>h.jsxs("label",{className:"city-checkbox",children:[h.jsx("input",{type:"checkbox",checked:p.includes(k),onChange:()=>Y(k)}),h.jsx("span",{children:k})]},k))})]},b))})]}),h.jsxs("div",{className:"browse-main",children:[h.jsxs("div",{className:"browse-header",children:[h.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx(R1,{size:24,style:{color:"var(--primary)"}}),"Available Hosts"]}),h.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:h.jsx("div",{className:"results-count",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:!s&&h.jsxs(h.Fragment,{children:[h.jsx(_c,{size:16,style:{color:"var(--text-light)"}}),h.jsxs("span",{children:[g.length," host",g.length!==1?"s":""," found"]})]})})})]}),s?h.jsxs("div",{className:"loading",style:{padding:"4rem",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),h.jsx("h3",{children:"Finding amazing hosts for you..."})]}):h.jsx("div",{children:g.length===0?h.jsxs("div",{className:"no-results",children:[h.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),h.jsxs("h3",{style:{color:"#1e293b"},children:["No hosts found",p.length>0?" for selected locations":" in this area yet"]}),h.jsx("p",{style:{color:"#64748b"},children:p.length>0?"Try selecting different locations or clear filters.":"We're growing fast! Check back tomorrow for new Pongal celebrations."}),p.length>0&&h.jsx("button",{onClick:P,className:"btn btn-outline",children:"Clear filters"})]}):h.jsx("div",{className:"compact-grid",children:g.map(b=>h.jsxs("div",{className:"host-card-horizontal",children:[h.jsxs("div",{className:"host-image-section",children:[h.jsx(RE,{src:b.profileImageUrl,alt:b.name,className:"host-card-img",userId:b.userId}),b.status==="Verified"&&h.jsx("div",{className:"verified-badge",children:" Verified"}),h.jsxs("button",{className:"btn btn-primary overlay-btn",onClick:()=>R(b),children:[h.jsx(tf,{size:14})," View"]})]}),h.jsxs("div",{className:"host-content-section",children:[h.jsx("h3",{className:"host-name",children:b.name}),h.jsxs("div",{className:"host-location",children:[" ",b.location.split(",")[0]]}),b.bio&&h.jsx("p",{className:"host-bio",children:b.bio}),h.jsxs("button",{className:"btn btn-primary",onClick:T=>{T.stopPropagation(),D(b)},style:{marginTop:"0.75rem",fontSize:"0.75rem",padding:"0.4rem 0.8rem",borderRadius:"0.375rem",minHeight:"32px",width:"auto",display:"inline-flex"},children:[h.jsx(yc,{size:14})," Chat"]})]})]},b.userId))})})]}),oe&&h.jsx("div",{className:"modal-overlay",onClick:()=>ee(null),children:h.jsxs("div",{className:"modal-content",onClick:b=>b.stopPropagation(),children:[h.jsxs("div",{className:"modal-header",children:[h.jsx("h3",{children:oe.name}),h.jsx("button",{onClick:()=>ee(null),className:"modal-close",children:""})]}),h.jsxs("div",{className:"modal-body",children:[h.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[h.jsx("img",{src:oe.profileImageUrl||"https://via.placeholder.com/120",alt:oe.name,style:{width:"120px",height:"120px",borderRadius:"50%",objectFit:"cover",border:"3px solid var(--border)",marginBottom:"1rem"}}),h.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:h.jsx("span",{style:{color:"#64748b"},children:oe.location})}),h.jsxs("p",{style:{color:"#64748b",fontSize:"0.9rem"},children:[oe.userType,"  Joined ",new Date(oe.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"})]})]}),h.jsxs("div",{style:{marginBottom:"1.5rem"},children:[h.jsx("h4",{style:{marginBottom:"0.75rem",color:"var(--text)"},children:oe.userType==="Host"?" About My Hosting":" About Me"}),h.jsx("p",{style:{color:"#475569",lineHeight:"1.5",background:"#f8fafc",padding:"1rem",borderRadius:"0.5rem",margin:"0"},children:oe.bio||"No description provided."})]}),h.jsxs("div",{children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[h.jsxs("h4",{style:{margin:"0",color:"var(--text)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[" Reviews (",oe.totalReviews||oe.reviews?.length||0,")",oe.averageRating>0&&h.jsxs("span",{style:{fontSize:"0.9rem",color:"#64748b"},children:["(",oe.averageRating.toFixed(1)," avg)"]})]}),!oe.hasUserReview&&h.jsx("button",{className:"btn btn-outline",onClick:()=>Re(!ne),style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:ne?"Cancel":"Write Review"})]}),ne&&h.jsxs("div",{className:"review-form",children:[Oe&&h.jsx("div",{style:{color:"#dc2626",background:"#fef2f2",padding:"0.5rem",borderRadius:"0.375rem",marginBottom:"0.75rem",fontSize:"0.85rem",border:"1px solid #fecaca"},children:Oe}),h.jsxs("div",{style:{marginBottom:"0.75rem"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Rating:"}),h.jsx("div",{className:"rating-input",children:Array.from({length:5},(b,T)=>h.jsx("button",{type:"button",className:"rating-star",onClick:()=>{Ae(k=>({...k,rating:T+1})),Te("")},style:{color:T<Ee.rating?"#fbbf24":"#d1d5db"},children:""},T))})]}),h.jsxs("div",{style:{marginBottom:"0.75rem"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Comment:"}),h.jsx("textarea",{value:Ee.comment,onChange:b=>{Ae(T=>({...T,comment:b.target.value})),Te("")},placeholder:"Share your experience...",rows:3,style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",resize:"vertical",fontFamily:"inherit"}})]}),h.jsx("button",{className:"btn btn-primary",onClick:x,disabled:He||!Ee.comment.trim()||Ee.rating===0,style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:He?"Submitting...":"Submit Review"})]}),oe.reviews&&oe.reviews.length>0&&h.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:oe.reviews.map((b,T)=>{const k=b.reviewerId===r?.userId;return h.jsxs("div",{className:`review-item ${k?"user-review":""}`,children:[k&&h.jsx("div",{className:"user-review-badge",children:"Your Review"}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.25rem",paddingRight:k?"5rem":"0"},children:[h.jsx("strong",{style:{fontSize:"0.9rem"},children:b.reviewerName}),h.jsx("div",{className:"review-stars",children:Array.from({length:5},(N,S)=>h.jsx("span",{style:{color:S<b.rating?"#fbbf24":"#d1d5db"},children:""},S))})]}),h.jsx("p",{style:{margin:"0",fontSize:"0.85rem",color:"#475569",lineHeight:"1.4"},children:b.comment}),h.jsx("div",{className:"review-meta",children:new Date(b.createdAt).toLocaleDateString()})]},T)})}),(!oe.reviews||oe.reviews.length===0)&&!ne&&h.jsx("p",{style:{color:"#64748b",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:"No reviews yet. Be the first to share your experience!"})]})]})]})}),ae&&h.jsx("div",{className:"modal-overlay",children:h.jsx("div",{className:"loading",style:{color:"white"},children:"Loading profile..."})}),E&&h.jsx(Jv,{recipientId:E.id,recipientName:E.name,onClose:()=>I(null)})]})},xE=({user:r})=>{const[n,i]=z.useState([]),[s,c]=z.useState(!0),[l,d]=z.useState({}),[p,m]=z.useState([]),[g,y]=z.useState([]),[E,I]=z.useState(null),[F,U]=z.useState(!1),[re,X]=z.useState({});z.useEffect(()=>{r.status==="Active"||r.status==="Verified"?(pe(),ve()):c(!1)},[r.status]);const ve=async()=>{try{const ne=await Ke.get("location/states-with-cities");X(ne.data)}catch(ne){console.error("Error fetching locations:",ne)}};z.useEffect(()=>{oe()},[n,p]);const pe=async()=>{try{const ne=await Ke.get("user/browse"),Re=Array.isArray(ne.data)?ne.data:[ne.data];i(Re)}catch(ne){console.error("Error fetching guests:",ne),i([])}finally{c(!1)}},oe=()=>{if(p.length===0)y(n);else{const ne=n.filter(Re=>p.some(Ee=>Re.location?.toLowerCase().includes(Ee.toLowerCase())));y(ne)}},ee=ne=>{d(Re=>({...Re,[ne]:!Re[ne]}))},ae=ne=>{m(Re=>Re.includes(ne)?Re.filter(Ee=>Ee!==ne):[...Re,ne])},le=()=>{m([])};return r.status==="Pending"?h.jsx("div",{className:"container",style:{paddingTop:"5rem"},children:h.jsxs("div",{className:"card text-center",style:{maxWidth:"600px",margin:"0 auto",padding:"3rem 2rem",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[h.jsx("div",{style:{fontSize:"4rem",marginBottom:"1.5rem"},children:""}),h.jsx("h2",{style:{color:"#1e293b",fontSize:"2rem",marginBottom:"1rem"},children:"Registration Pending"}),h.jsx("p",{style:{color:"#64748b",fontSize:"1.1rem",lineHeight:"1.6",marginBottom:"2rem"},children:"Thank you for joining as a Host! Your registration is currently being verified by our team. Once approved, you'll be able to see guests and start hosting."}),h.jsxs("div",{style:{padding:"1.5rem",background:"#f8fafc",borderRadius:"0.75rem",border:"1px solid #e2e8f0",color:"#475569",textAlign:"left"},children:[h.jsx("p",{style:{margin:"0 0 0.5rem 0"},children:h.jsx("strong",{children:"Next Steps:"})}),h.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[h.jsx("li",{children:"Admin verifies your payment"}),h.jsx("li",{children:'Your profile becomes "Active"'}),h.jsx("li",{children:"You receive guests' contact requests"})]})]})]})}):s?h.jsx("div",{className:"container",children:h.jsxs("div",{className:"loading",style:{padding:"4rem",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),h.jsx("h3",{children:"Loading guests near you..."})]})}):h.jsxs("div",{className:"browse-layout",children:[h.jsxs("button",{className:"mobile-filter-toggle",onClick:()=>U(!F),children:[F?h.jsx(Sv,{size:16}):h.jsx(wv,{size:16}),"Filters ",p.length>0&&`(${p.length})`]}),h.jsxs("div",{className:`location-sidebar ${F?"mobile-visible":""}`,children:[h.jsxs("div",{className:"filter-header",children:[h.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx(bv,{size:20,style:{color:"var(--primary)"}}),"Filter by Location"]}),p.length>0&&h.jsxs("button",{onClick:le,className:"clear-filters-btn",children:["Clear (",p.length,")"]})]}),h.jsx("div",{className:"location-filters",children:Object.entries(re).map(([ne,Re])=>h.jsxs("div",{className:"state-group",children:[h.jsxs("button",{className:"state-toggle",onClick:()=>ee(ne),children:[l[ne]?h.jsx(gv,{size:16}):h.jsx(yv,{size:16}),h.jsx("span",{children:ne})]}),l[ne]&&h.jsx("div",{className:"cities-list",children:Re.map(Ee=>h.jsxs("label",{className:"city-checkbox",children:[h.jsx("input",{type:"checkbox",checked:p.includes(Ee),onChange:()=>ae(Ee)}),h.jsx("span",{children:Ee})]},Ee))})]},ne))})]}),h.jsxs("div",{className:"browse-main",children:[h.jsxs("div",{className:"browse-header",children:[h.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx(Md,{size:24,style:{color:"var(--primary)"}}),"Guests Looking for Festivals"]}),h.jsx("div",{className:"results-count",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:!s&&h.jsxs(h.Fragment,{children:[h.jsx(_c,{size:16,style:{color:"var(--text-light)"}}),h.jsxs("span",{children:[g.length," guest",g.length!==1?"s":""," found"]})]})})]}),g.length===0?h.jsxs("div",{className:"no-results",children:[h.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),h.jsx("h3",{style:{color:"#1e293b"},children:p.length>0?"No guests found for selected locations":"No guests found right now"}),h.jsx("p",{style:{color:"#64748b"},children:p.length>0?"Try adjusting your location filters or check back later.":"Check back soon as more travelers join the festival celebrations!"}),p.length>0&&h.jsx("button",{onClick:le,className:"btn btn-outline",children:"Clear filters"})]}):h.jsx("div",{className:"compact-grid",children:g.map(ne=>h.jsxs("div",{className:"host-card-horizontal",children:[h.jsxs("div",{className:"host-image-section",children:[h.jsx("img",{src:ne.profileImageUrl||"https://via.placeholder.com/400x300?text=Guest",alt:ne.name,className:"host-card-img"}),h.jsxs("button",{className:"btn btn-primary chat-btn-overlay",onClick:()=>I({id:ne.userId,name:ne.name}),children:[h.jsx(yc,{size:16,className:"chat-icon"}),h.jsx("span",{className:"chat-text",children:"Chat"})]})]}),h.jsxs("div",{className:"host-content-section",children:[h.jsx("h3",{className:"host-name",children:ne.name}),h.jsxs("div",{className:"host-location",children:[" ",ne.location?.split(",")[0]||"Location not specified"]}),ne.bio&&h.jsx("p",{className:"host-bio",children:ne.bio})]})]},ne.userId))})]}),E&&h.jsx(Jv,{recipientId:E.id,recipientName:E.name,onClose:()=>I(null)})]})};function br(r,n){var i={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&n.indexOf(s)<0&&(i[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(r);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(r,s[c])&&(i[s[c]]=r[s[c]]);return i}function yy(r){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&r[n],s=0;if(i)return i.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function st(r){return this instanceof st?(this.v=r,this):new st(r)}function Fr(r,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(r,n||[]),c,l=[];return c=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",d),c[Symbol.asyncIterator]=function(){return this},c;function d(F){return function(U){return Promise.resolve(U).then(F,E)}}function p(F,U){s[F]&&(c[F]=function(re){return new Promise(function(X,ve){l.push([F,re,X,ve])>1||m(F,re)})},U&&(c[F]=U(c[F])))}function m(F,U){try{g(s[F](U))}catch(re){I(l[0][3],re)}}function g(F){F.value instanceof st?Promise.resolve(F.value.v).then(y,E):I(l[0][2],F)}function y(F){m("next",F)}function E(F){m("throw",F)}function I(F,U){F(U),l.shift(),l.length&&m(l[0][0],l[0][1])}}function pc(r){var n,i;return n={},s("next"),s("throw",function(c){throw c}),s("return"),n[Symbol.iterator]=function(){return this},n;function s(c,l){n[c]=r[c]?function(d){return(i=!i)?{value:st(r[c](d)),done:!1}:l?l(d):d}:l}}function Xr(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r[Symbol.asyncIterator],i;return n?n.call(r):(r=typeof yy=="function"?yy(r):r[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(l){i[l]=r[l]&&function(d){return new Promise(function(p,m){d=r[l](d),c(p,m,d.done,d.value)})}}function c(l,d,p,m){Promise.resolve(m).then(function(g){l({value:g,done:p})},d)}}var yd={exports:{}},rc,EE=new Uint8Array(16);function Kv(){if(!rc&&(rc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!rc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return rc(EE)}const _E=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Uc(r){return typeof r=="string"&&_E.test(r)}var Ft=[];for(var vd=0;vd<256;++vd)Ft.push((vd+256).toString(16).substr(1));function Dc(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=(Ft[r[n+0]]+Ft[r[n+1]]+Ft[r[n+2]]+Ft[r[n+3]]+"-"+Ft[r[n+4]]+Ft[r[n+5]]+"-"+Ft[r[n+6]]+Ft[r[n+7]]+"-"+Ft[r[n+8]]+Ft[r[n+9]]+"-"+Ft[r[n+10]]+Ft[r[n+11]]+Ft[r[n+12]]+Ft[r[n+13]]+Ft[r[n+14]]+Ft[r[n+15]]).toLowerCase();if(!Uc(i))throw TypeError("Stringified UUID is invalid");return i}var vy,bd,Sd=0,wd=0;function AE(r,n,i){var s=n&&i||0,c=n||new Array(16);r=r||{};var l=r.node||vy,d=r.clockseq!==void 0?r.clockseq:bd;if(l==null||d==null){var p=r.random||(r.rng||Kv)();l==null&&(l=vy=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),d==null&&(d=bd=(p[6]<<8|p[7])&16383)}var m=r.msecs!==void 0?r.msecs:Date.now(),g=r.nsecs!==void 0?r.nsecs:wd+1,y=m-Sd+(g-wd)/1e4;if(y<0&&r.clockseq===void 0&&(d=d+1&16383),(y<0||m>Sd)&&r.nsecs===void 0&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Sd=m,wd=g,bd=d,m+=122192928e5;var E=((m&268435455)*1e4+g)%4294967296;c[s++]=E>>>24&255,c[s++]=E>>>16&255,c[s++]=E>>>8&255,c[s++]=E&255;var I=m/4294967296*1e4&268435455;c[s++]=I>>>8&255,c[s++]=I&255,c[s++]=I>>>24&15|16,c[s++]=I>>>16&255,c[s++]=d>>>8|128,c[s++]=d&255;for(var F=0;F<6;++F)c[s+F]=l[F];return n||Dc(c)}function Qv(r){if(!Uc(r))throw TypeError("Invalid UUID");var n,i=new Uint8Array(16);return i[0]=(n=parseInt(r.slice(0,8),16))>>>24,i[1]=n>>>16&255,i[2]=n>>>8&255,i[3]=n&255,i[4]=(n=parseInt(r.slice(9,13),16))>>>8,i[5]=n&255,i[6]=(n=parseInt(r.slice(14,18),16))>>>8,i[7]=n&255,i[8]=(n=parseInt(r.slice(19,23),16))>>>8,i[9]=n&255,i[10]=(n=parseInt(r.slice(24,36),16))/1099511627776&255,i[11]=n/4294967296&255,i[12]=n>>>24&255,i[13]=n>>>16&255,i[14]=n>>>8&255,i[15]=n&255,i}function kE(r){r=unescape(encodeURIComponent(r));for(var n=[],i=0;i<r.length;++i)n.push(r.charCodeAt(i));return n}var NE="6ba7b810-9dad-11d1-80b4-00c04fd430c8",OE="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Wv(r,n,i){function s(c,l,d,p){if(typeof c=="string"&&(c=kE(c)),typeof l=="string"&&(l=Qv(l)),l.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var m=new Uint8Array(16+c.length);if(m.set(l),m.set(c,l.length),m=i(m),m[6]=m[6]&15|n,m[8]=m[8]&63|128,d){p=p||0;for(var g=0;g<16;++g)d[p+g]=m[g];return d}return Dc(m)}try{s.name=r}catch{}return s.DNS=NE,s.URL=OE,s}function ME(r){if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=new Uint8Array(n.length);for(var i=0;i<n.length;++i)r[i]=n.charCodeAt(i)}return jE(UE(DE(r),r.length*8))}function jE(r){for(var n=[],i=r.length*32,s="0123456789abcdef",c=0;c<i;c+=8){var l=r[c>>5]>>>c%32&255,d=parseInt(s.charAt(l>>>4&15)+s.charAt(l&15),16);n.push(d)}return n}function Zv(r){return(r+64>>>9<<4)+14+1}function UE(r,n){r[n>>5]|=128<<n%32,r[Zv(n)-1]=n;for(var i=1732584193,s=-271733879,c=-1732584194,l=271733878,d=0;d<r.length;d+=16){var p=i,m=s,g=c,y=l;i=Kt(i,s,c,l,r[d],7,-680876936),l=Kt(l,i,s,c,r[d+1],12,-389564586),c=Kt(c,l,i,s,r[d+2],17,606105819),s=Kt(s,c,l,i,r[d+3],22,-1044525330),i=Kt(i,s,c,l,r[d+4],7,-176418897),l=Kt(l,i,s,c,r[d+5],12,1200080426),c=Kt(c,l,i,s,r[d+6],17,-1473231341),s=Kt(s,c,l,i,r[d+7],22,-45705983),i=Kt(i,s,c,l,r[d+8],7,1770035416),l=Kt(l,i,s,c,r[d+9],12,-1958414417),c=Kt(c,l,i,s,r[d+10],17,-42063),s=Kt(s,c,l,i,r[d+11],22,-1990404162),i=Kt(i,s,c,l,r[d+12],7,1804603682),l=Kt(l,i,s,c,r[d+13],12,-40341101),c=Kt(c,l,i,s,r[d+14],17,-1502002290),s=Kt(s,c,l,i,r[d+15],22,1236535329),i=Qt(i,s,c,l,r[d+1],5,-165796510),l=Qt(l,i,s,c,r[d+6],9,-1069501632),c=Qt(c,l,i,s,r[d+11],14,643717713),s=Qt(s,c,l,i,r[d],20,-373897302),i=Qt(i,s,c,l,r[d+5],5,-701558691),l=Qt(l,i,s,c,r[d+10],9,38016083),c=Qt(c,l,i,s,r[d+15],14,-660478335),s=Qt(s,c,l,i,r[d+4],20,-405537848),i=Qt(i,s,c,l,r[d+9],5,568446438),l=Qt(l,i,s,c,r[d+14],9,-1019803690),c=Qt(c,l,i,s,r[d+3],14,-187363961),s=Qt(s,c,l,i,r[d+8],20,1163531501),i=Qt(i,s,c,l,r[d+13],5,-1444681467),l=Qt(l,i,s,c,r[d+2],9,-51403784),c=Qt(c,l,i,s,r[d+7],14,1735328473),s=Qt(s,c,l,i,r[d+12],20,-1926607734),i=Wt(i,s,c,l,r[d+5],4,-378558),l=Wt(l,i,s,c,r[d+8],11,-2022574463),c=Wt(c,l,i,s,r[d+11],16,1839030562),s=Wt(s,c,l,i,r[d+14],23,-35309556),i=Wt(i,s,c,l,r[d+1],4,-1530992060),l=Wt(l,i,s,c,r[d+4],11,1272893353),c=Wt(c,l,i,s,r[d+7],16,-155497632),s=Wt(s,c,l,i,r[d+10],23,-1094730640),i=Wt(i,s,c,l,r[d+13],4,681279174),l=Wt(l,i,s,c,r[d],11,-358537222),c=Wt(c,l,i,s,r[d+3],16,-722521979),s=Wt(s,c,l,i,r[d+6],23,76029189),i=Wt(i,s,c,l,r[d+9],4,-640364487),l=Wt(l,i,s,c,r[d+12],11,-421815835),c=Wt(c,l,i,s,r[d+15],16,530742520),s=Wt(s,c,l,i,r[d+2],23,-995338651),i=Zt(i,s,c,l,r[d],6,-198630844),l=Zt(l,i,s,c,r[d+7],10,1126891415),c=Zt(c,l,i,s,r[d+14],15,-1416354905),s=Zt(s,c,l,i,r[d+5],21,-57434055),i=Zt(i,s,c,l,r[d+12],6,1700485571),l=Zt(l,i,s,c,r[d+3],10,-1894986606),c=Zt(c,l,i,s,r[d+10],15,-1051523),s=Zt(s,c,l,i,r[d+1],21,-2054922799),i=Zt(i,s,c,l,r[d+8],6,1873313359),l=Zt(l,i,s,c,r[d+15],10,-30611744),c=Zt(c,l,i,s,r[d+6],15,-1560198380),s=Zt(s,c,l,i,r[d+13],21,1309151649),i=Zt(i,s,c,l,r[d+4],6,-145523070),l=Zt(l,i,s,c,r[d+11],10,-1120210379),c=Zt(c,l,i,s,r[d+2],15,718787259),s=Zt(s,c,l,i,r[d+9],21,-343485551),i=Yr(i,p),s=Yr(s,m),c=Yr(c,g),l=Yr(l,y)}return[i,s,c,l]}function DE(r){if(r.length===0)return[];for(var n=r.length*8,i=new Uint32Array(Zv(n)),s=0;s<n;s+=8)i[s>>5]|=(r[s/8]&255)<<s%32;return i}function Yr(r,n){var i=(r&65535)+(n&65535),s=(r>>16)+(n>>16)+(i>>16);return s<<16|i&65535}function PE(r,n){return r<<n|r>>>32-n}function Pc(r,n,i,s,c,l){return Yr(PE(Yr(Yr(n,r),Yr(s,l)),c),i)}function Kt(r,n,i,s,c,l,d){return Pc(n&i|~n&s,r,n,c,l,d)}function Qt(r,n,i,s,c,l,d){return Pc(n&s|i&~s,r,n,c,l,d)}function Wt(r,n,i,s,c,l,d){return Pc(n^i^s,r,n,c,l,d)}function Zt(r,n,i,s,c,l,d){return Pc(i^(n|~s),r,n,c,l,d)}var IE=Wv("v3",48,ME);function zE(r,n,i){r=r||{};var s=r.random||(r.rng||Kv)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,n){i=i||0;for(var c=0;c<16;++c)n[i+c]=s[c];return n}return Dc(s)}function LE(r,n,i,s){switch(r){case 0:return n&i^~n&s;case 1:return n^i^s;case 2:return n&i^n&s^i&s;case 3:return n^i^s}}function Td(r,n){return r<<n|r>>>32-n}function BE(r){var n=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var s=unescape(encodeURIComponent(r));r=[];for(var c=0;c<s.length;++c)r.push(s.charCodeAt(c))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var l=r.length/4+2,d=Math.ceil(l/16),p=new Array(d),m=0;m<d;++m){for(var g=new Uint32Array(16),y=0;y<16;++y)g[y]=r[m*64+y*4]<<24|r[m*64+y*4+1]<<16|r[m*64+y*4+2]<<8|r[m*64+y*4+3];p[m]=g}p[d-1][14]=(r.length-1)*8/Math.pow(2,32),p[d-1][14]=Math.floor(p[d-1][14]),p[d-1][15]=(r.length-1)*8&4294967295;for(var E=0;E<d;++E){for(var I=new Uint32Array(80),F=0;F<16;++F)I[F]=p[E][F];for(var U=16;U<80;++U)I[U]=Td(I[U-3]^I[U-8]^I[U-14]^I[U-16],1);for(var re=i[0],X=i[1],ve=i[2],pe=i[3],oe=i[4],ee=0;ee<80;++ee){var ae=Math.floor(ee/20),le=Td(re,5)+LE(ae,X,ve,pe)+oe+n[ae]+I[ee]>>>0;oe=pe,pe=ve,ve=Td(X,30)>>>0,X=re,re=le}i[0]=i[0]+re>>>0,i[1]=i[1]+X>>>0,i[2]=i[2]+ve>>>0,i[3]=i[3]+pe>>>0,i[4]=i[4]+oe>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,i[0]&255,i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,i[1]&255,i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,i[2]&255,i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,i[3]&255,i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,i[4]&255]}var HE=Wv("v5",80,BE);const qE="00000000-0000-0000-0000-000000000000";function $E(r){if(!Uc(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const VE=Object.freeze(Object.defineProperty({__proto__:null,NIL:qE,parse:Qv,stringify:Dc,v1:AE,v3:IE,v4:zE,v5:HE,validate:Uc,version:$E},Symbol.toStringTag,{value:"Module"})),GE=Rc(VE);function e0(r,n){return r=Math.ceil(r),n=Math.floor(n),Math.floor(Math.random()*(n-r+1))+r}function t0(r,n){const i=n.retryDelayInMs*Math.pow(2,r),s=Math.min(n.maxRetryDelayInMs,i);return{retryAfterInMs:s/2+e0(0,s/2)}}function ff(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&!(r instanceof RegExp)&&!(r instanceof Date)}function hf(r){if(ff(r)){const n=typeof r.name=="string",i=typeof r.message=="string";return n&&i}return!1}function Ic(r,n){switch(n){case"utf-8":return XE(r);case"base64":return n0(r);case"base64url":return FE(r);case"hex":return YE(r)}}function mn(r,n){switch(n){case"utf-8":return JE(r);case"base64":return r0(r);case"base64url":return KE(r);case"hex":return QE(r)}}function n0(r){return btoa([...r].map(n=>String.fromCharCode(n)).join(""))}function FE(r){return n0(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function XE(r){return new TextDecoder().decode(r)}function YE(r){return[...r].map(n=>n.toString(16).padStart(2,"0")).join("")}function JE(r){return new TextEncoder().encode(r)}function r0(r){return new Uint8Array([...atob(r)].map(n=>n.charCodeAt(0)))}function KE(r){const n=r.replace(/-/g,"+").replace(/_/g,"/");return r0(n)}const by=new Set("0123456789abcdefABCDEF");function QE(r){const n=new Uint8Array(r.length/2);for(let i=0;i<r.length/2;++i){const s=r[2*i],c=r[2*i+1];if(!by.has(s)||!by.has(c))return n.slice(0,i);n[i]=parseInt(`${s}${c}`,16)}return n}let ic;function i0(){if(ic)return ic;if(!self.crypto||!self.crypto.subtle)throw new Error("Your browser environment does not support cryptography functions.");return ic=self.crypto.subtle,ic}async function WE(r,n,i){const s=i0(),c=mn(r,"base64"),l=mn(n,"utf-8"),d=await s.importKey("raw",c,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),p=await s.sign({name:"HMAC",hash:{name:"SHA-256"}},d,l);return Ic(new Uint8Array(p),i)}async function ZE(r,n){const i=mn(r,"utf-8"),s=await i0().digest({name:"SHA-256"},i);return Ic(new Uint8Array(s),n)}function e_(){let r="";for(let n=0;n<32;n++){const i=Math.floor(Math.random()*16);n===12?r+="4":n===16?r+=i&3|8:r+=i.toString(16),(n===7||n===11||n===15||n===19)&&(r+="-")}return r}const t_=typeof globalThis?.crypto?.randomUUID=="function"?globalThis.crypto.randomUUID.bind(globalThis.crypto):e_;function pf(){return t_()}const n_=typeof window<"u"&&typeof window.document<"u",r_=typeof self=="object"&&typeof self?.importScripts=="function"&&(self.constructor?.name==="DedicatedWorkerGlobalScope"||self.constructor?.name==="ServiceWorkerGlobalScope"||self.constructor?.name==="SharedWorkerGlobalScope"),o0=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u",s0=typeof Bun<"u"&&typeof Bun.version<"u",Kr=typeof globalThis.process<"u"&&!!globalThis.process.version&&!!globalThis.process.versions?.node,i_=Kr&&!s0&&!o0,o_=typeof navigator<"u"&&navigator?.product==="ReactNative",Cd="REDACTED",s_=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],a_=["api-version"];class mf{allowedHeaderNames;allowedQueryParameters;constructor({additionalAllowedHeaderNames:n=[],additionalAllowedQueryParameters:i=[]}={}){n=s_.concat(n),i=a_.concat(i),this.allowedHeaderNames=new Set(n.map(s=>s.toLowerCase())),this.allowedQueryParameters=new Set(i.map(s=>s.toLowerCase()))}sanitize(n){const i=new Set;return JSON.stringify(n,(s,c)=>{if(c instanceof Error)return{...c,name:c.name,message:c.message};if(s==="headers")return this.sanitizeHeaders(c);if(s==="url")return this.sanitizeUrl(c);if(s==="query")return this.sanitizeQuery(c);if(s==="body")return;if(s==="response")return;if(s==="operationSpec")return;if(Array.isArray(c)||ff(c)){if(i.has(c))return"[Circular]";i.add(c)}return c},2)}sanitizeUrl(n){if(typeof n!="string"||n===null||n==="")return n;const i=new URL(n);if(!i.search)return n;for(const[s]of i.searchParams)this.allowedQueryParameters.has(s.toLowerCase())||i.searchParams.set(s,Cd);return i.toString()}sanitizeHeaders(n){const i={};for(const s of Object.keys(n))this.allowedHeaderNames.has(s.toLowerCase())?i[s]=n[s]:i[s]=Cd;return i}sanitizeQuery(n){if(typeof n!="object"||n===null)return n;const i={};for(const s of Object.keys(n))this.allowedQueryParameters.has(s.toLowerCase())?i[s]=n[s]:i[s]=Cd;return i}}async function c_(r,n){const i=new AbortController;function s(){i.abort()}n?.abortSignal?.addEventListener("abort",s);try{return await Promise.race(r.map(c=>c({abortSignal:i.signal})))}finally{i.abort(),n?.abortSignal?.removeEventListener("abort",s)}}let l_=class extends Error{constructor(n){super(n),this.name="AbortError"}};function a0(r,n){const{cleanupBeforeAbort:i,abortSignal:s,abortErrorMsg:c}=n??{};return new Promise((l,d)=>{function p(){d(new l_(c??"The operation was aborted."))}function m(){s?.removeEventListener("abort",g)}function g(){i?.(),m(),p()}if(s?.aborted)return p();try{r(y=>{m(),l(y)},y=>{m(),d(y)})}catch(y){d(y)}s?.addEventListener("abort",g)})}const u_="The delay was aborted.";function c0(r,n){let i;const{abortSignal:s,abortErrorMsg:c}=n??{};return a0(l=>{i=setTimeout(l,r)},{cleanupBeforeAbort:()=>clearTimeout(i),abortSignal:s,abortErrorMsg:c??u_})}function zs(r){if(hf(r))return r.message;{let n;try{typeof r=="object"&&r?n=JSON.stringify(r):n=String(r)}catch{n="[unable to stringify input]"}return`Unknown error ${n}`}}function gf(r){return typeof r<"u"&&r!==null}function d_(r,n){if(!gf(r)||typeof r!="object")return!1;for(const i of n)if(!l0(r,i))return!1;return!0}function l0(r,n){return gf(r)&&typeof r=="object"&&n in r}function f_(r,n){return t0(r,n)}function h_(r,n){return ZE(r,n)}function p_(r,n,i){return WE(r,n,i)}function m_(r,n){return e0(r,n)}function u0(r){return hf(r)}function g_(r){return ff(r)}function d0(){return pf()}const y_=n_,v_=s0,b_=o0,S_=Kr,Sc=Kr,w_=i_,T_=o_,C_=r_;function R_(r,n){return Ic(r,n)}function x_(r,n){return mn(r,n)}const E_=Object.freeze(Object.defineProperty({__proto__:null,calculateRetryDelay:f_,cancelablePromiseRace:c_,computeSha256Hash:h_,computeSha256Hmac:p_,createAbortablePromise:a0,delay:c0,getErrorMessage:zs,getRandomIntegerInclusive:m_,isBrowser:y_,isBun:v_,isDefined:gf,isDeno:b_,isError:u0,isNode:S_,isNodeLike:Sc,isNodeRuntime:w_,isObject:g_,isObjectWithProperties:d_,isReactNative:T_,isWebWorker:C_,objectHasProperty:l0,randomUUID:d0,stringToUint8Array:x_,uint8ArrayToString:R_},Symbol.toStringTag,{value:"Module"})),__=Rc(E_);function f0(r){let n="";for(let i=0;i<r.length;i++)n+=String.fromCharCode(r[i]);return btoa(n)}function h0(r){const n=atob(r),i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}function A_(r){return atob(r)}const Bt="$",yo="_";function k_(r,n){return n!=="Composite"&&n!=="Dictionary"&&(typeof r=="string"||typeof r=="number"||typeof r=="boolean"||n?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||r===void 0||r===null)}const N_=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function O_(r){return N_.test(r)}const M_=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function j_(r){return M_.test(r)}function U_(r){const n={...r.headers,...r.body};return r.hasNullableType&&Object.getOwnPropertyNames(n).length===0?r.shouldWrapBody?{body:null}:null:r.shouldWrapBody?{...r.headers,body:r.body}:n}function Sy(r,n){const i=r.parsedHeaders;if(r.request.method==="HEAD")return{...i,body:r.parsedBody};const s=n&&n.bodyMapper,c=!!s?.nullable,l=s?.type.name;if(l==="Stream")return{...i,blobBody:r.blobBody,readableStreamBody:r.readableStreamBody};const d=l==="Composite"&&s.type.modelProperties||{},p=Object.keys(d).some(m=>d[m].serializedName==="");if(l==="Sequence"||p){const m=r.parsedBody??[];for(const g of Object.keys(d))d[g].serializedName&&(m[g]=r.parsedBody?.[g]);if(i)for(const g of Object.keys(i))m[g]=i[g];return c&&!r.parsedBody&&!i&&Object.getOwnPropertyNames(d).length===0?null:m}return U_({body:r.parsedBody,headers:i,hasNullableType:c,shouldWrapBody:k_(r.parsedBody,l)})}class D_{modelMappers;isXML;constructor(n={},i=!1){this.modelMappers=n,this.isXML=i}validateConstraints(n,i,s){const c=(l,d)=>{throw new Error(`"${s}" with value "${i}" should satisfy the constraint "${l}": ${d}.`)};if(n.constraints&&i!==void 0&&i!==null){const{ExclusiveMaximum:l,ExclusiveMinimum:d,InclusiveMaximum:p,InclusiveMinimum:m,MaxItems:g,MaxLength:y,MinItems:E,MinLength:I,MultipleOf:F,Pattern:U,UniqueItems:re}=n.constraints;if(l!==void 0&&i>=l&&c("ExclusiveMaximum",l),d!==void 0&&i<=d&&c("ExclusiveMinimum",d),p!==void 0&&i>p&&c("InclusiveMaximum",p),m!==void 0&&i<m&&c("InclusiveMinimum",m),g!==void 0&&i.length>g&&c("MaxItems",g),y!==void 0&&i.length>y&&c("MaxLength",y),E!==void 0&&i.length<E&&c("MinItems",E),I!==void 0&&i.length<I&&c("MinLength",I),F!==void 0&&i%F!==0&&c("MultipleOf",F),U){const X=typeof U=="string"?new RegExp(U):U;(typeof i!="string"||i.match(X)===null)&&c("Pattern",U)}re&&i.some((X,ve,pe)=>pe.indexOf(X)!==ve)&&c("UniqueItems",re)}}serialize(n,i,s,c={xml:{}}){const l={xml:{rootName:c.xml.rootName??"",includeRoot:c.xml.includeRoot??!1,xmlCharKey:c.xml.xmlCharKey??yo}};let d={};const p=n.type.name;s||(s=n.serializedName),p.match(/^Sequence$/i)!==null&&(d=[]),n.isConstant&&(i=n.defaultValue);const{required:m,nullable:g}=n;if(m&&g&&i===void 0)throw new Error(`${s} cannot be undefined.`);if(m&&!g&&i==null)throw new Error(`${s} cannot be null or undefined.`);if(!m&&g===!1&&i===null)throw new Error(`${s} cannot be null.`);return i==null||p.match(/^any$/i)!==null?d=i:p.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)!==null?d=H_(p,s,i):p.match(/^Enum$/i)!==null?d=q_(s,n.type.allowedValues,i):p.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)!==null?d=G_(p,i,s):p.match(/^ByteArray$/i)!==null?d=$_(s,i):p.match(/^Base64Url$/i)!==null?d=V_(s,i):p.match(/^Sequence$/i)!==null?d=F_(this,n,i,s,!!this.isXML,l):p.match(/^Dictionary$/i)!==null?d=X_(this,n,i,s,!!this.isXML,l):p.match(/^Composite$/i)!==null&&(d=J_(this,n,i,s,!!this.isXML,l)),d}deserialize(n,i,s,c={xml:{}}){const l={xml:{rootName:c.xml.rootName??"",includeRoot:c.xml.includeRoot??!1,xmlCharKey:c.xml.xmlCharKey??yo},ignoreUnknownProperties:c.ignoreUnknownProperties??!1};if(i==null)return this.isXML&&n.type.name==="Sequence"&&!n.xmlIsWrapped&&(i=[]),n.defaultValue!==void 0&&(i=n.defaultValue),i;let d;const p=n.type.name;if(s||(s=n.serializedName),p.match(/^Composite$/i)!==null)d=Q_(this,n,i,s,l);else{if(this.isXML){const m=l.xml.xmlCharKey;i[Bt]!==void 0&&i[m]!==void 0&&(i=i[m])}p.match(/^Number$/i)!==null?(d=parseFloat(i),isNaN(d)&&(d=i)):p.match(/^Boolean$/i)!==null?i==="true"?d=!0:i==="false"?d=!1:d=i:p.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)!==null?d=i:p.match(/^(Date|DateTime|DateTimeRfc1123)$/i)!==null?d=new Date(i):p.match(/^UnixTime$/i)!==null?d=B_(i):p.match(/^ByteArray$/i)!==null?d=h0(i):p.match(/^Base64Url$/i)!==null?d=z_(i):p.match(/^Sequence$/i)!==null?d=Z_(this,n,i,s,l):p.match(/^Dictionary$/i)!==null&&(d=W_(this,n,i,s,l))}return n.isConstant&&(d=n.defaultValue),d}}function yf(r={},n=!1){return new D_(r,n)}function P_(r,n){let i=r.length;for(;i-1>=0&&r[i-1]===n;)--i;return r.substr(0,i)}function I_(r){if(!r)return;if(!(r instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");const n=f0(r);return P_(n,"=").replace(/\+/g,"-").replace(/\//g,"_")}function z_(r){if(r){if(r&&typeof r.valueOf()!="string")throw new Error("Please provide an input of type string for converting to Uint8Array");return r=r.replace(/-/g,"+").replace(/_/g,"/"),h0(r)}}function Id(r){const n=[];let i="";if(r){const s=r.split(".");for(const c of s)c.charAt(c.length-1)==="\\"?i+=c.substr(0,c.length-1)+".":(i+=c,n.push(i),i="")}return n}function L_(r){if(r)return typeof r.valueOf()=="string"&&(r=new Date(r)),Math.floor(r.getTime()/1e3)}function B_(r){if(r)return new Date(r*1e3)}function H_(r,n,i){if(i!=null){if(r.match(/^Number$/i)!==null){if(typeof i!="number")throw new Error(`${n} with value ${i} must be of type number.`)}else if(r.match(/^String$/i)!==null){if(typeof i.valueOf()!="string")throw new Error(`${n} with value "${i}" must be of type string.`)}else if(r.match(/^Uuid$/i)!==null){if(!(typeof i.valueOf()=="string"&&j_(i)))throw new Error(`${n} with value "${i}" must be of type string and a valid uuid.`)}else if(r.match(/^Boolean$/i)!==null){if(typeof i!="boolean")throw new Error(`${n} with value ${i} must be of type boolean.`)}else if(r.match(/^Stream$/i)!==null){const s=typeof i;if(s!=="string"&&typeof i.pipe!="function"&&typeof i.tee!="function"&&!(i instanceof ArrayBuffer)&&!ArrayBuffer.isView(i)&&!((typeof Blob=="function"||typeof Blob=="object")&&i instanceof Blob)&&s!=="function")throw new Error(`${n} must be a string, Blob, ArrayBuffer, ArrayBufferView, ReadableStream, or () => ReadableStream.`)}}return i}function q_(r,n,i){if(!n)throw new Error(`Please provide a set of allowedValues to validate ${r} as an Enum Type.`);if(!n.some(c=>typeof c.valueOf()=="string"?c.toLowerCase()===i.toLowerCase():c===i))throw new Error(`${i} is not a valid value for ${r}. The valid values are: ${JSON.stringify(n)}.`);return i}function $_(r,n){if(n!=null){if(!(n instanceof Uint8Array))throw new Error(`${r} must be of type Uint8Array.`);n=f0(n)}return n}function V_(r,n){if(n!=null){if(!(n instanceof Uint8Array))throw new Error(`${r} must be of type Uint8Array.`);n=I_(n)}return n}function G_(r,n,i){if(n!=null){if(r.match(/^Date$/i)!==null){if(!(n instanceof Date||typeof n.valueOf()=="string"&&!isNaN(Date.parse(n))))throw new Error(`${i} must be an instanceof Date or a string in ISO8601 format.`);n=n instanceof Date?n.toISOString().substring(0,10):new Date(n).toISOString().substring(0,10)}else if(r.match(/^DateTime$/i)!==null){if(!(n instanceof Date||typeof n.valueOf()=="string"&&!isNaN(Date.parse(n))))throw new Error(`${i} must be an instanceof Date or a string in ISO8601 format.`);n=n instanceof Date?n.toISOString():new Date(n).toISOString()}else if(r.match(/^DateTimeRfc1123$/i)!==null){if(!(n instanceof Date||typeof n.valueOf()=="string"&&!isNaN(Date.parse(n))))throw new Error(`${i} must be an instanceof Date or a string in RFC-1123 format.`);n=n instanceof Date?n.toUTCString():new Date(n).toUTCString()}else if(r.match(/^UnixTime$/i)!==null){if(!(n instanceof Date||typeof n.valueOf()=="string"&&!isNaN(Date.parse(n))))throw new Error(`${i} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);n=L_(n)}else if(r.match(/^TimeSpan$/i)!==null&&!O_(n))throw new Error(`${i} must be a string in ISO 8601 format. Instead was "${n}".`)}return n}function F_(r,n,i,s,c,l){if(!Array.isArray(i))throw new Error(`${s} must be of type Array.`);let d=n.type.element;if(!d||typeof d!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${s}.`);d.type.name==="Composite"&&d.type.className&&(d=r.modelMappers[d.type.className]??d);const p=[];for(let m=0;m<i.length;m++){const g=r.serialize(d,i[m],s,l);if(c&&d.xmlNamespace){const y=d.xmlNamespacePrefix?`xmlns:${d.xmlNamespacePrefix}`:"xmlns";d.type.name==="Composite"?(p[m]={...g},p[m][Bt]={[y]:d.xmlNamespace}):(p[m]={},p[m][l.xml.xmlCharKey]=g,p[m][Bt]={[y]:d.xmlNamespace})}else p[m]=g}return p}function X_(r,n,i,s,c,l){if(typeof i!="object")throw new Error(`${s} must be of type object.`);const d=n.type.value;if(!d||typeof d!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${s}.`);const p={};for(const m of Object.keys(i)){const g=r.serialize(d,i[m],s,l);p[m]=g0(d,g,c,l)}if(c&&n.xmlNamespace){const m=n.xmlNamespacePrefix?`xmlns:${n.xmlNamespacePrefix}`:"xmlns",g=p;return g[Bt]={[m]:n.xmlNamespace},g}return p}function Y_(r,n,i){const s=n.type.additionalProperties;return!s&&n.type.className?p0(r,n,i)?.type.additionalProperties:s}function p0(r,n,i){const s=n.type.className;if(!s)throw new Error(`Class name for model "${i}" is not provided in the mapper "${JSON.stringify(n,void 0,2)}".`);return r.modelMappers[s]}function m0(r,n,i){let s=n.type.modelProperties;if(!s){const c=p0(r,n,i);if(!c)throw new Error(`mapper() cannot be null or undefined for model "${n.type.className}".`);if(s=c?.type.modelProperties,!s)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(c)}" of type "${n.type.className}" for object "${i}".`)}return s}function J_(r,n,i,s,c,l){if(wc(r,n)&&(n=y0(r,n,i,"clientName")),i!=null){const d={},p=m0(r,n,s);for(const g of Object.keys(p)){const y=p[g];if(y.readOnly)continue;let E,I=d;if(r.isXML)y.xmlIsWrapped?E=y.xmlName:E=y.xmlElementName||y.xmlName;else{const F=Id(y.serializedName);E=F.pop();for(const U of F){const re=I[U];re==null&&(i[g]!==void 0&&i[g]!==null||y.defaultValue!==void 0)&&(I[U]={}),I=I[U]}}if(I!=null){if(c&&n.xmlNamespace){const ve=n.xmlNamespacePrefix?`xmlns:${n.xmlNamespacePrefix}`:"xmlns";I[Bt]={...I[Bt],[ve]:n.xmlNamespace}}const F=y.serializedName!==""?s+"."+y.serializedName:s;let U=i[g];const re=wc(r,n);re&&re.clientName===g&&U==null&&(U=n.serializedName);const X=r.serialize(y,U,F,l);if(X!==void 0&&E!==void 0&&E!==null){const ve=g0(y,X,c,l);c&&y.xmlIsAttribute?(I[Bt]=I[Bt]||{},I[Bt][E]=X):c&&y.xmlIsWrapped?I[E]={[y.xmlElementName]:ve}:I[E]=ve}}}const m=Y_(r,n,s);if(m){const g=Object.keys(p);for(const y in i)g.every(I=>I!==y)&&(d[y]=r.serialize(m,i[y],s+'["'+y+'"]',l))}return d}return i}function g0(r,n,i,s){if(!i||!r.xmlNamespace)return n;const l={[r.xmlNamespacePrefix?`xmlns:${r.xmlNamespacePrefix}`:"xmlns"]:r.xmlNamespace};if(["Composite"].includes(r.type.name)){if(n[Bt])return n;{const p={...n};return p[Bt]=l,p}}const d={};return d[s.xml.xmlCharKey]=n,d[Bt]=l,d}function K_(r,n){return[Bt,n.xml.xmlCharKey].includes(r)}function Q_(r,n,i,s,c){const l=c.xml.xmlCharKey??yo;wc(r,n)&&(n=y0(r,n,i,"serializedName"));const d=m0(r,n,s);let p={};const m=[];for(const y of Object.keys(d)){const E=d[y],I=Id(d[y].serializedName);m.push(I[0]);const{serializedName:F,xmlName:U,xmlElementName:re}=E;let X=s;F!==""&&F!==void 0&&(X=s+"."+F);const ve=E.headerCollectionPrefix;if(ve){const pe={};for(const oe of Object.keys(i))oe.startsWith(ve)&&(pe[oe.substring(ve.length)]=r.deserialize(E.type.value,i[oe],X,c)),m.push(oe);p[y]=pe}else if(r.isXML)if(E.xmlIsAttribute&&i[Bt])p[y]=r.deserialize(E,i[Bt][U],X,c);else if(E.xmlIsMsText)i[l]!==void 0?p[y]=i[l]:typeof i=="string"&&(p[y]=i);else{const pe=re||U||F;if(E.xmlIsWrapped){const ee=i[U]?.[re]??[];p[y]=r.deserialize(E,ee,X,c),m.push(U)}else{const oe=i[pe];p[y]=r.deserialize(E,oe,X,c),m.push(pe)}}else{let pe,oe=i,ee=0;for(const ne of I){if(!oe)break;ee++,oe=oe[ne]}oe===null&&ee<I.length&&(oe=void 0),pe=oe;const ae=n.type.polymorphicDiscriminator;ae&&y===ae.clientName&&pe==null&&(pe=n.serializedName);let le;if(Array.isArray(i[y])&&d[y].serializedName===""){pe=i[y];const ne=r.deserialize(E,pe,X,c);for(const[Re,Ee]of Object.entries(p))Object.prototype.hasOwnProperty.call(ne,Re)||(ne[Re]=Ee);p=ne}else(pe!==void 0||E.defaultValue!==void 0)&&(le=r.deserialize(E,pe,X,c),p[y]=le)}}const g=n.type.additionalProperties;if(g){const y=E=>{for(const I in d)if(Id(d[I].serializedName)[0]===E)return!1;return!0};for(const E in i)y(E)&&(p[E]=r.deserialize(g,i[E],s+'["'+E+'"]',c))}else if(i&&!c.ignoreUnknownProperties)for(const y of Object.keys(i))p[y]===void 0&&!m.includes(y)&&!K_(y,c)&&(p[y]=i[y]);return p}function W_(r,n,i,s,c){const l=n.type.value;if(!l||typeof l!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${s}`);if(i){const d={};for(const p of Object.keys(i))d[p]=r.deserialize(l,i[p],s,c);return d}return i}function Z_(r,n,i,s,c){let l=n.type.element;if(!l||typeof l!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${s}`);if(i){Array.isArray(i)||(i=[i]),l.type.name==="Composite"&&l.type.className&&(l=r.modelMappers[l.type.className]??l);const d=[];for(let p=0;p<i.length;p++)d[p]=r.deserialize(l,i[p],`${s}[${p}]`,c);return d}return i}function eA(r,n,i){const s=[i];for(;s.length;){const c=s.shift(),l=n===c?n:c+"."+n;if(Object.prototype.hasOwnProperty.call(r,l))return r[l];for(const[d,p]of Object.entries(r))d.startsWith(c+".")&&p.type.uberParent===c&&p.type.className&&s.push(p.type.className)}}function y0(r,n,i,s){const c=wc(r,n);if(c){let l=c[s];if(l){s==="serializedName"&&(l=l.replace(/\\/gi,""));const d=i[l],p=n.type.uberParent??n.type.className;if(typeof d=="string"&&p){const m=eA(r.modelMappers.discriminators,d,p);m&&(n=m)}}}return n}function wc(r,n){return n.type.polymorphicDiscriminator||wy(r,n.type.uberParent)||wy(r,n.type.className)}function wy(r,n){return n&&r.modelMappers[n]&&r.modelMappers[n].type.polymorphicDiscriminator}const wi={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};class vf extends Error{constructor(n){super(n),this.name="AbortError"}}function tA(...r){if(r.length>0){const n=String(r[0]);n.includes(":error")?console.error(...r):n.includes(":warning")?console.warn(...r):n.includes(":info")?console.info(...r):n.includes(":verbose")?console.debug(...r):console.debug(...r)}}var Ty={};const Cy=typeof process<"u"&&Ty&&Ty.DEBUG||void 0;let v0,zd=[],Ld=[];const Tc=[];Cy&&bf(Cy);const ho=Object.assign(r=>b0(r),{enable:bf,enabled:Sf,disable:nA,log:tA});function bf(r){v0=r,zd=[],Ld=[];const n=r.split(",").map(i=>i.trim());for(const i of n)i.startsWith("-")?Ld.push(i.substring(1)):zd.push(i);for(const i of Tc)i.enabled=Sf(i.namespace)}function Sf(r){if(r.endsWith("*"))return!0;for(const n of Ld)if(Ry(r,n))return!1;for(const n of zd)if(Ry(r,n))return!0;return!1}function Ry(r,n){if(n.indexOf("*")===-1)return r===n;let i=n;if(n.indexOf("**")!==-1){const I=[];let F="";for(const U of n)U==="*"&&F==="*"||(F=U,I.push(U));i=I.join("")}let s=0,c=0;const l=i.length,d=r.length;let p=-1,m=-1;for(;s<d&&c<l;)if(i[c]==="*"){if(p=c,c++,c===l)return!0;for(;r[s]!==i[c];)if(s++,s===d)return!1;m=s,s++,c++;continue}else if(i[c]===r[s])c++,s++;else if(p>=0){if(c=p+1,s=m+1,s===d)return!1;for(;r[s]!==i[c];)if(s++,s===d)return!1;m=s,s++,c++;continue}else return!1;const g=s===r.length,y=c===i.length,E=c===i.length-1&&i[c]==="*";return g&&(y||E)}function nA(){const r=v0||"";return bf(""),r}function b0(r){const n=Object.assign(i,{enabled:Sf(r),destroy:rA,log:ho.log,namespace:r,extend:iA});function i(...s){n.enabled&&(s.length>0&&(s[0]=`${r} ${s[0]}`),n.log(...s))}return Tc.push(n),n}function rA(){const r=Tc.indexOf(this);return r>=0?(Tc.splice(r,1),!0):!1}function iA(r){const n=b0(`${this.namespace}:${r}`);return n.log=this.log,n}var xy={};const Bd=["verbose","info","warning","error"],Ey={verbose:400,info:300,warning:200,error:100};function _y(r,n){n.log=(...i)=>{r.log(...i)}}function Ay(r){return Bd.includes(r)}function S0(r){const n=new Set,i=typeof process<"u"&&xy&&xy[r.logLevelEnvVarName]||void 0;let s;const c=ho(r.namespace);c.log=(...y)=>{ho.log(...y)};function l(y){if(y&&!Ay(y))throw new Error(`Unknown log level '${y}'. Acceptable values: ${Bd.join(",")}`);s=y;const E=[];for(const I of n)d(I)&&E.push(I.namespace);ho.enable(E.join(","))}i&&(Ay(i)?l(i):console.error(`${r.logLevelEnvVarName} set to unknown log level '${i}'; logging is not enabled. Acceptable values: ${Bd.join(", ")}.`));function d(y){return!!(s&&Ey[y.level]<=Ey[s])}function p(y,E){const I=Object.assign(y.extend(E),{level:E});if(_y(y,I),d(I)){const F=ho.disable();ho.enable(F+","+I.namespace)}return n.add(I),I}function m(){return s}function g(y){const E=c.extend(y);return _y(c,E),{error:p(E,"error"),warning:p(E,"warning"),info:p(E,"info"),verbose:p(E,"verbose")}}return{setLogLevel:l,getLogLevel:m,createClientLogger:g,logger:c}}const oA=S0({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"});function w0(r){return oA.createClientLogger(r)}function oc(r){return r.toLowerCase()}function*sA(r){for(const n of r.values())yield[n.name,n.value]}class aA{_headersMap;constructor(n){if(this._headersMap=new Map,n)for(const i of Object.keys(n))this.set(i,n[i])}set(n,i){this._headersMap.set(oc(n),{name:n,value:String(i).trim()})}get(n){return this._headersMap.get(oc(n))?.value}has(n){return this._headersMap.has(oc(n))}delete(n){this._headersMap.delete(oc(n))}toJSON(n={}){const i={};if(n.preserveCase)for(const s of this._headersMap.values())i[s.name]=s.value;else for(const[s,c]of this._headersMap)i[s]=c.value;return i}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return sA(this._headersMap)}}function Ri(r){return new aA(r)}class cA{url;method;headers;timeout;withCredentials;body;multipartBody;formData;streamResponseStatusCodes;enableBrowserStreams;proxySettings;disableKeepAlive;abortSignal;requestId;allowInsecureConnection;onUploadProgress;onDownloadProgress;requestOverrides;authSchemes;constructor(n){this.url=n.url,this.body=n.body,this.headers=n.headers??Ri(),this.method=n.method??"GET",this.timeout=n.timeout??0,this.multipartBody=n.multipartBody,this.formData=n.formData,this.disableKeepAlive=n.disableKeepAlive??!1,this.proxySettings=n.proxySettings,this.streamResponseStatusCodes=n.streamResponseStatusCodes,this.withCredentials=n.withCredentials??!1,this.abortSignal=n.abortSignal,this.onUploadProgress=n.onUploadProgress,this.onDownloadProgress=n.onDownloadProgress,this.requestId=n.requestId||pf(),this.allowInsecureConnection=n.allowInsecureConnection??!1,this.enableBrowserStreams=n.enableBrowserStreams??!1,this.requestOverrides=n.requestOverrides,this.authSchemes=n.authSchemes}}function T0(r){return new cA(r)}const ky=new Set(["Deserialize","Serialize","Retry","Sign"]);class Cc{_policies=[];_orderedPolicies;constructor(n){this._policies=n?.slice(0)??[],this._orderedPolicies=void 0}addPolicy(n,i={}){if(i.phase&&i.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(i.phase&&!ky.has(i.phase))throw new Error(`Invalid phase name: ${i.phase}`);if(i.afterPhase&&!ky.has(i.afterPhase))throw new Error(`Invalid afterPhase name: ${i.afterPhase}`);this._policies.push({policy:n,options:i}),this._orderedPolicies=void 0}removePolicy(n){const i=[];return this._policies=this._policies.filter(s=>n.name&&s.policy.name===n.name||n.phase&&s.options.phase===n.phase?(i.push(s.policy),!1):!0),this._orderedPolicies=void 0,i}sendRequest(n,i){return this.getOrderedPolicies().reduceRight((l,d)=>p=>d.sendRequest(p,l),l=>n.sendRequest(l))(i)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new Cc(this._policies)}static create(){return new Cc}orderPolicies(){const n=[],i=new Map;function s(U){return{name:U,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}const c=s("Serialize"),l=s("None"),d=s("Deserialize"),p=s("Retry"),m=s("Sign"),g=[c,l,d,p,m];function y(U){return U==="Retry"?p:U==="Serialize"?c:U==="Deserialize"?d:U==="Sign"?m:l}for(const U of this._policies){const re=U.policy,X=U.options,ve=re.name;if(i.has(ve))throw new Error("Duplicate policy names not allowed in pipeline");const pe={policy:re,dependsOn:new Set,dependants:new Set};X.afterPhase&&(pe.afterPhase=y(X.afterPhase),pe.afterPhase.hasAfterPolicies=!0),i.set(ve,pe),y(X.phase).policies.add(pe)}for(const U of this._policies){const{policy:re,options:X}=U,ve=re.name,pe=i.get(ve);if(!pe)throw new Error(`Missing node for policy ${ve}`);if(X.afterPolicies)for(const oe of X.afterPolicies){const ee=i.get(oe);ee&&(pe.dependsOn.add(ee),ee.dependants.add(pe))}if(X.beforePolicies)for(const oe of X.beforePolicies){const ee=i.get(oe);ee&&(ee.dependsOn.add(pe),pe.dependants.add(ee))}}function E(U){U.hasRun=!0;for(const re of U.policies)if(!(re.afterPhase&&(!re.afterPhase.hasRun||re.afterPhase.policies.size))&&re.dependsOn.size===0){n.push(re.policy);for(const X of re.dependants)X.dependsOn.delete(re);i.delete(re.policy.name),U.policies.delete(re)}}function I(){for(const U of g){if(E(U),U.policies.size>0&&U!==l){l.hasRun||E(l);return}U.hasAfterPolicies&&E(l)}}let F=0;for(;i.size>0;){F++;const U=n.length;if(I(),n.length<=U&&F>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return n}}function C0(){return Cc.create()}const lA=Symbol(),uA=new mf;let xi=class R0 extends Error{static REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";static PARSE_ERROR="PARSE_ERROR";code;statusCode;request;response;details;constructor(n,i={}){super(n),this.name="RestError",this.code=i.code,this.statusCode=i.statusCode,Object.defineProperty(this,"request",{value:i.request,enumerable:!1}),Object.defineProperty(this,"response",{value:i.response,enumerable:!1});const s=this.request?.agent?{maxFreeSockets:this.request.agent.maxFreeSockets,maxSockets:this.request.agent.maxSockets}:void 0;Object.defineProperty(this,lA,{value:()=>`RestError: ${this.message} 
 ${uA.sanitize({...this,request:{...this.request,agent:s},response:this.response})}`,enumerable:!1}),Object.setPrototypeOf(this,R0.prototype)}};function x0(r){return r instanceof xi?!0:hf(r)&&r.name==="RestError"}function E0(r){return!!(r&&typeof r.pipe=="function")}function zc(r){return!!(r&&typeof r.getReader=="function"&&typeof r.tee=="function")}function _0(r){return r!==void 0&&(r instanceof Uint8Array||A0(r)||typeof r=="function"||r instanceof Blob)}function A0(r){return E0(r)||zc(r)}function dA(r){return typeof r.stream=="function"}function fA(r){if(r.buffer instanceof ArrayBuffer&&r.byteOffset===0&&r.byteLength===r.buffer.byteLength)return r.buffer;const n=new ArrayBuffer(r.byteLength),i=new Uint8Array(n),s=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);return i.set(s),i.buffer}function hA(r){return(typeof Blob=="function"||typeof Blob=="object")&&r instanceof Blob}class pA{async sendRequest(n){if(new URL(n.url).protocol!=="https:"&&!n.allowInsecureConnection)throw new Error(`Cannot connect to ${n.url} while allowInsecureConnection is false.`);if(n.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");try{return await mA(n)}catch(c){throw vA(c,n)}}}async function mA(r){const{abortController:n,abortControllerCleanup:i}=yA(r);try{const s=bA(r.headers),{streaming:c,body:l}=wA(r),d={body:l,method:r.method,headers:s,signal:n.signal,..."credentials"in Request.prototype?{credentials:r.withCredentials?"include":"same-origin"}:{},..."cache"in Request.prototype?{cache:"no-store"}:{}};c&&(d.duplex="half");const p=await fetch(r.url,{...d,...r.requestOverrides});return hA(r.body)&&r.onUploadProgress&&r.onUploadProgress({loadedBytes:r.body.size}),gA(p,r,i)}catch(s){throw i?.(),s}}async function gA(r,n,i){const s=SA(r),c={request:n,headers:s,status:r.status},l=zc(r.body)?k0(r.body,{onProgress:n.onDownloadProgress,onEnd:i}):r.body;if(n.streamResponseStatusCodes?.has(Number.POSITIVE_INFINITY)||n.streamResponseStatusCodes?.has(c.status))if(n.enableBrowserStreams)c.browserStreamBody=l??void 0;else{const d=new Response(l);c.blobBody=d.blob(),i?.()}else{const d=new Response(l);c.bodyAsText=await d.text(),i?.()}return c}function yA(r){const n=new AbortController;let i,s;if(r.abortSignal){if(r.abortSignal.aborted)throw new vf("The operation was aborted. Request has already been canceled.");s=c=>{c.type==="abort"&&n.abort()},r.abortSignal.addEventListener("abort",s),i=()=>{s&&r.abortSignal?.removeEventListener("abort",s)}}return r.timeout>0&&setTimeout(()=>{n.abort()},r.timeout),{abortController:n,abortControllerCleanup:i}}function vA(r,n){return r&&r?.name==="AbortError"?r:new xi(`Error sending request: ${r.message}`,{code:r?.code??xi.REQUEST_SEND_ERROR,request:n})}function bA(r){const n=new Headers;for(const[i,s]of r)n.append(i,s);return n}function SA(r){const n=Ri();for(const[i,s]of r.headers)n.set(i,s);return n}function wA(r){const n=typeof r.body=="function"?r.body():r.body;if(E0(n))throw new Error("Node streams are not supported in browser environment.");return zc(n)?{streaming:!0,body:k0(n,{onProgress:r.onUploadProgress})}:typeof n=="object"&&n&&"buffer"in n?{streaming:!1,body:fA(n)}:n===void 0?{streaming:!1}:{streaming:!1,body:n}}function k0(r,n={}){let i=0;const{onProgress:s,onEnd:c}=n;if(CA(r))return r.pipeThrough(new TransformStream({transform(l,d){if(l===null){d.terminate();return}d.enqueue(l),i+=l.length,s&&s({loadedBytes:i})},flush(){c?.()}}));{const l=r.getReader();return new ReadableStream({async pull(d){const{done:p,value:m}=await l.read();if(p||!m){c?.(),d.close(),l.releaseLock();return}i+=m?.length??0,d.enqueue(m),s&&s({loadedBytes:i})},cancel(d){return c?.(),l.cancel(d)}})}}function TA(){return new pA}function CA(r){return r.pipeThrough!==void 0&&self.TransformStream!==void 0}function N0(){return TA()}const O0=w0("ts-http-runtime"),M0="logPolicy";function j0(r={}){const n=r.logger??O0.info,i=new mf({additionalAllowedHeaderNames:r.additionalAllowedHeaderNames,additionalAllowedQueryParameters:r.additionalAllowedQueryParameters});return{name:M0,async sendRequest(s,c){if(!n.enabled)return c(s);n(`Request: ${i.sanitize(s)}`);const l=await c(s);return n(`Response status code: ${l.status}`),n(`Headers: ${i.sanitize(l.headers)}`),l}}}const U0="redirectPolicy",Ny=["GET","HEAD"];function D0(r={}){const{maxRetries:n=20}=r;return{name:U0,async sendRequest(i,s){const c=await s(i);return P0(s,c,n)}}}async function P0(r,n,i,s=0){const{request:c,status:l,headers:d}=n,p=d.get("location");if(p&&(l===300||l===301&&Ny.includes(c.method)||l===302&&Ny.includes(c.method)||l===303&&c.method==="POST"||l===307)&&s<i){const m=new URL(p,c.url);c.url=m.toString(),l===303&&(c.method="GET",c.headers.delete("Content-Length"),delete c.body),c.headers.delete("Authorization");const g=await r(c);return P0(r,g,i,s+1)}return n}function RA(){return"x-ms-useragent"}function xA(r){const n=[{name:"Firefox",regex:/Firefox\/([\d.]+)/},{name:"Safari",regex:/Version\/([\d.]+).*Safari/}];for(const i of n){const s=r.match(i.regex);if(s)return{brand:i.name,version:s[1]}}}function EA(r){const n=["Google Chrome","Microsoft Edge","Opera","Brave","Chromium"];for(const i of n){const s=r.find(c=>c.brand===i);if(s)return s}}async function _A(r){const n=globalThis.navigator;let i="unknown";if(n?.userAgentData){const s=await n.userAgentData.getHighEntropyValues(["architecture","platformVersion"]);i=`${s.platform} ${s.platformVersion}; ${s.architecture}`;const c=EA(n.userAgentData.brands);c&&r.set(c.brand,`${c.version} (${i})`)}else if(n?.platform){i=n.platform;const s=xA(n.userAgent);s&&r.set(s.brand,`${s.version} (${i})`)}else typeof globalThis.EdgeRuntime=="string"&&r.set("EdgeRuntime",`${globalThis.EdgeRuntime} (${i})`)}const AA="0.3.2",vo=3;function kA(r){const n=[];for(const[i,s]of r){const c=s?`${i}/${s}`:i;n.push(c)}return n.join(" ")}function NA(){return RA()}async function OA(r){const n=new Map;n.set("ts-http-runtime",AA),await _A(n);const i=kA(n);return r?`${r} ${i}`:i}const Oy=NA(),MA="userAgentPolicy";function jA(r={}){const n=OA(r.userAgentPrefix);return{name:MA,async sendRequest(i,s){return i.headers.has(Oy)||i.headers.set(Oy,await n),s(i)}}}const UA="decompressResponsePolicy";function I0(){throw new Error("decompressResponsePolicy is not supported in browser environment")}const DA="The operation was aborted.";function PA(r,n,i){return new Promise((s,c)=>{let l,d;const p=()=>c(new vf(i?.abortErrorMsg?i?.abortErrorMsg:DA)),m=()=>{i?.abortSignal&&d&&i.abortSignal.removeEventListener("abort",d)};if(d=()=>(l&&clearTimeout(l),m(),p()),i?.abortSignal&&i.abortSignal.aborted)return p();l=setTimeout(()=>{m(),s(n)},r),i?.abortSignal&&i.abortSignal.addEventListener("abort",d)})}function IA(r,n){const i=r.headers.get(n);if(!i)return;const s=Number(i);if(!Number.isNaN(s))return s}const Hd="Retry-After",zA=["retry-after-ms","x-ms-retry-after-ms",Hd];function z0(r){if(r&&[429,503].includes(r.status))try{for(const c of zA){const l=IA(r,c);if(l===0||l)return l*(c===Hd?1e3:1)}const n=r.headers.get(Hd);if(!n)return;const s=Date.parse(n)-Date.now();return Number.isFinite(s)?Math.max(0,s):void 0}catch{return}}function LA(r){return Number.isFinite(z0(r))}function L0(){return{name:"throttlingRetryStrategy",retry({response:r}){const n=z0(r);return Number.isFinite(n)?{retryAfterInMs:n}:{skipStrategy:!0}}}}const BA=1e3,HA=1e3*64;function wf(r={}){const n=r.retryDelayInMs??BA,i=r.maxRetryDelayInMs??HA;return{name:"exponentialRetryStrategy",retry({retryCount:s,response:c,responseError:l}){const d=$A(l),p=d&&r.ignoreSystemErrors,m=qA(c),g=m&&r.ignoreHttpStatusCodes;return c&&(LA(c)||!m)||g||p?{skipStrategy:!0}:l&&!d&&!m?{errorToThrow:l}:t0(s,{retryDelayInMs:n,maxRetryDelayInMs:i})}}}function qA(r){return!!(r&&r.status!==void 0&&(r.status>=500||r.status===408)&&r.status!==501&&r.status!==505)}function $A(r){return r?r.code==="ETIMEDOUT"||r.code==="ESOCKETTIMEDOUT"||r.code==="ECONNREFUSED"||r.code==="ECONNRESET"||r.code==="ENOENT"||r.code==="ENOTFOUND":!1}const VA=w0("ts-http-runtime retryPolicy"),GA="retryPolicy";function Ls(r,n={maxRetries:vo}){const i=n.logger||VA;return{name:GA,async sendRequest(s,c){let l,d,p=-1;e:for(;;){p+=1,l=void 0,d=void 0;try{i.info(`Retry ${p}: Attempting to send request`,s.requestId),l=await c(s),i.info(`Retry ${p}: Received a response from request`,s.requestId)}catch(m){if(i.error(`Retry ${p}: Received an error from request`,s.requestId),d=m,!m||d.name!=="RestError")throw m;l=d.response}if(s.abortSignal?.aborted)throw i.error(`Retry ${p}: Request aborted.`),new vf;if(p>=(n.maxRetries??vo)){if(i.info(`Retry ${p}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),d)throw d;if(l)return l;throw new Error("Maximum retries reached with no response or error to throw")}i.info(`Retry ${p}: Processing ${r.length} retry strategies.`);t:for(const m of r){const g=m.logger||i;g.info(`Retry ${p}: Processing retry strategy ${m.name}.`);const y=m.retry({retryCount:p,response:l,responseError:d});if(y.skipStrategy){g.info(`Retry ${p}: Skipped.`);continue t}const{errorToThrow:E,retryAfterInMs:I,redirectTo:F}=y;if(E)throw g.error(`Retry ${p}: Retry strategy ${m.name} throws error:`,E),E;if(I||I===0){g.info(`Retry ${p}: Retry strategy ${m.name} retries after ${I}`),await PA(I,void 0,{abortSignal:s.abortSignal});continue e}if(F){g.info(`Retry ${p}: Retry strategy ${m.name} redirects to ${F}`),s.url=F;continue e}}if(d)throw i.info("None of the retry strategies could work with the received error. Throwing it."),d;if(l)return i.info("None of the retry strategies could work with the received response. Returning it."),l}}}}const FA="defaultRetryPolicy";function B0(r={}){return{name:FA,sendRequest:Ls([L0(),wf(r)],{maxRetries:r.maxRetries??vo}).sendRequest}}const H0="formDataPolicy";function XA(r){const n={};for(const[i,s]of r.entries())n[i]??=[],n[i].push(s);return n}function q0(){return{name:H0,async sendRequest(r,n){if(Kr&&typeof FormData<"u"&&r.body instanceof FormData&&(r.formData=XA(r.body),r.body=void 0),r.formData){const i=r.headers.get("Content-Type");i&&i.indexOf("application/x-www-form-urlencoded")!==-1?r.body=YA(r.formData):await JA(r.formData,r),r.formData=void 0}return n(r)}}}function YA(r){const n=new URLSearchParams;for(const[i,s]of Object.entries(r))if(Array.isArray(s))for(const c of s)n.append(i,c.toString());else n.append(i,s.toString());return n.toString()}async function JA(r,n){const i=n.headers.get("Content-Type");if(i&&!i.startsWith("multipart/form-data"))return;n.headers.set("Content-Type",i??"multipart/form-data");const s=[];for(const[c,l]of Object.entries(r))for(const d of Array.isArray(l)?l:[l])if(typeof d=="string")s.push({headers:Ri({"Content-Disposition":`form-data; name="${c}"`}),body:mn(d,"utf-8")});else{if(d==null||typeof d!="object")throw new Error(`Unexpected value for key ${c}: ${d}. Value should be serialized to string first.`);{const p=d.name||"blob",m=Ri();m.set("Content-Disposition",`form-data; name="${c}"; filename="${p}"`),m.set("Content-Type",d.type||"application/octet-stream"),s.push({headers:m,body:d})}}n.multipartBody={parts:s}}const KA="proxyPolicy",$0="proxyPolicy is not supported in browser environment";function QA(){throw new Error($0)}function V0(){throw new Error($0)}const G0="agentPolicy";function F0(r){return{name:G0,sendRequest:async(n,i)=>(n.agent||(n.agent=r),i(n))}}const X0="tlsPolicy";function Y0(r){return{name:X0,sendRequest:async(n,i)=>(n.tlsSettings||(n.tlsSettings=r),i(n))}}function WA(r){return new Response(r).blob()}async function ZA(r){if(r instanceof Blob||r instanceof Uint8Array)return r;if(zc(r))return WA(r);throw new Error("Unsupported source type. Only Blob, Uint8Array, and ReadableStream are supported in browser.")}function ek(r){return"resize"in r.buffer?r:r.map(n=>n)}async function tk(r){const n=[];for(const i of r){const s=await ZA(typeof i=="function"?i():i);s instanceof Blob?n.push(s):n.push(new Blob([ek(s)]))}return new Blob(n)}function nk(){return`----AzSDKFormBoundary${pf()}`}function rk(r){let n="";for(const[i,s]of r)n+=`${i}: ${s}\r
`;return n}function ik(r){return r instanceof Uint8Array?r.byteLength:dA(r)?r.size===-1?void 0:r.size:void 0}function ok(r){let n=0;for(const i of r){const s=ik(i);if(s===void 0)return;n+=s}return n}async function sk(r,n,i){const s=[mn(`--${i}`,"utf-8"),...n.flatMap(l=>[mn(`\r
`,"utf-8"),mn(rk(l.headers),"utf-8"),mn(`\r
`,"utf-8"),l.body,mn(`\r
--${i}`,"utf-8")]),mn(`--\r
\r
`,"utf-8")],c=ok(s);c&&r.headers.set("Content-Length",c),r.body=await tk(s)}const Tf="multipartPolicy",ak=70,ck=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function lk(r){if(r.length>ak)throw new Error(`Multipart boundary "${r}" exceeds maximum length of 70 characters`);if(Array.from(r).some(n=>!ck.has(n)))throw new Error(`Multipart boundary "${r}" contains invalid characters`)}function J0(){return{name:Tf,async sendRequest(r,n){if(!r.multipartBody)return n(r);if(r.body)throw new Error("multipartBody and regular body cannot be set at the same time");let i=r.multipartBody.boundary;const s=r.headers.get("Content-Type")??"multipart/mixed",c=s.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!c)throw new Error(`Got multipart request body, but content-type header was not multipart: ${s}`);const[,l,d]=c;if(d&&i&&d!==i)throw new Error(`Multipart boundary was specified as ${d} in the header, but got ${i} in the request body`);return i??=d,i?lk(i):i=nk(),r.headers.set("Content-Type",`${l}; boundary=${i}`),await sk(r,r.multipartBody.parts,i),r.multipartBody=void 0,n(r)}}}function uk(r){const n=C0();return Kr&&(r.agent&&n.addPolicy(F0(r.agent)),r.tlsOptions&&n.addPolicy(Y0(r.tlsOptions)),n.addPolicy(V0(r.proxyOptions)),n.addPolicy(I0())),n.addPolicy(q0(),{beforePolicies:[Tf]}),n.addPolicy(jA(r.userAgentOptions)),n.addPolicy(J0(),{afterPhase:"Deserialize"}),n.addPolicy(B0(r.retryOptions),{phase:"Retry"}),Kr&&n.addPolicy(D0(r.redirectOptions),{afterPhase:"Retry"}),n.addPolicy(j0(r.loggingOptions),{afterPhase:"Sign"}),n}const dk="ApiVersionPolicy";function fk(r){return{name:dk,sendRequest:(n,i)=>{const s=new URL(n.url);return!s.searchParams.get("api-version")&&r.apiVersion&&(n.url=`${n.url}${Array.from(s.searchParams.keys()).length>0?"&":"?"}api-version=${r.apiVersion}`),i(n)}}}function hk(r){return"getOAuth2Token"in r}function pk(r){return"getBearerToken"in r}function mk(r){return"username"in r&&"password"in r}function gk(r){return"key"in r}let My=!1;function yk(r,n){if(n.allowInsecureConnection&&r.allowInsecureConnection){const i=new URL(r.url);if(i.hostname==="localhost"||i.hostname==="127.0.0.1")return!0}return!1}function vk(){const r="Sending token over insecure transport. Assume any token issued is compromised.";O0.warning(r),typeof process?.emitWarning=="function"&&!My&&(My=!0,process.emitWarning(r))}function Lc(r,n){if(!r.url.toLowerCase().startsWith("https://"))if(yk(r,n))vk();else throw new Error("Authentication is not permitted for non-TLS protected (non-https) URLs when allowInsecureConnection is false.")}const bk="apiKeyAuthenticationPolicy";function Sk(r){return{name:bk,async sendRequest(n,i){Lc(n,r);const s=(n.authSchemes??r.authSchemes)?.find(c=>c.kind==="apiKey");if(!s)return i(n);if(s.apiKeyLocation!=="header")throw new Error(`Unsupported API key location: ${s.apiKeyLocation}`);return n.headers.set(s.name,r.credential.key),i(n)}}}const wk="bearerAuthenticationPolicy";function Tk(r){return{name:wk,async sendRequest(n,i){if(Lc(n,r),!(n.authSchemes??r.authSchemes)?.find(p=>p.kind==="http"&&p.scheme==="basic"))return i(n);const{username:c,password:l}=r.credential,d=Ic(mn(`${c}:${l}`,"utf-8"),"base64");return n.headers.set("Authorization",`Basic ${d}`),i(n)}}}const Ck="bearerAuthenticationPolicy";function Rk(r){return{name:Ck,async sendRequest(n,i){if(Lc(n,r),!(n.authSchemes??r.authSchemes)?.find(l=>l.kind==="http"&&l.scheme==="bearer"))return i(n);const c=await r.credential.getBearerToken({abortSignal:n.abortSignal});return n.headers.set("Authorization",`Bearer ${c}`),i(n)}}}const xk="oauth2AuthenticationPolicy";function Ek(r){return{name:xk,async sendRequest(n,i){Lc(n,r);const s=(n.authSchemes??r.authSchemes)?.find(l=>l.kind==="oauth2");if(!s)return i(n);const c=await r.credential.getOAuth2Token(s.flows,{abortSignal:n.abortSignal});return n.headers.set("Authorization",`Bearer ${c}`),i(n)}}}let Rd;function _k(r={}){const n=uk(r);n.addPolicy(fk(r));const{credential:i,authSchemes:s,allowInsecureConnection:c}=r;return i&&(gk(i)?n.addPolicy(Sk({authSchemes:s,credential:i,allowInsecureConnection:c})):mk(i)?n.addPolicy(Tk({authSchemes:s,credential:i,allowInsecureConnection:c})):pk(i)?n.addPolicy(Rk({authSchemes:s,credential:i,allowInsecureConnection:c})):hk(i)&&n.addPolicy(Ek({authSchemes:s,credential:i,allowInsecureConnection:c}))),n}function Ak(){return Rd||(Rd=N0()),Rd}function K0(r,n){if(r.headers){const i=Object.keys(r.headers).find(s=>s.toLowerCase()===n.toLowerCase());if(i)return r.headers[i]}}function kk(r){const n=K0(r,"content-type");if(n)return n;if(r.contentType===null)return;if(r.contentType)return r.contentType;const{body:i}=r;if(i!=null)return typeof i=="string"||typeof i=="number"||typeof i=="boolean"?"text/plain; charset=UTF-8":i instanceof Blob?i.type||"application/octet-stream":_0(i)?"application/octet-stream":"application/json"}function jy(r){return JSON.stringify(r)}function Nk(r){const n=K0(r,"content-disposition");if(n)return n;if(r.dispositionType===void 0&&r.name===void 0&&r.filename===void 0)return;let s=r.dispositionType??"form-data";r.name&&(s+=`; name=${jy(r.name)}`);let c;if(r.filename)c=r.filename;else if(typeof File<"u"&&r.body instanceof File){const l=r.body.name;l!==""&&(c=l)}return c&&(s+=`; filename=${jy(c)}`),s}function Ok(r,n){if(r===void 0)return new Uint8Array([]);if(_0(r))return r;if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return mn(String(r),"utf-8");if(n&&/application\/(.+\+)?json(;.+)?/i.test(String(n)))return mn(JSON.stringify(r),"utf-8");throw new xi(`Unsupported body/content-type combination: ${r}, ${n}`)}function Mk(r){const n=kk(r),i=Nk(r),s=Ri(r.headers??{});n&&s.set("content-type",n),i&&s.set("content-disposition",i);const c=Ok(r.body,n);return{headers:s,body:c}}function jk(r){return{parts:r.map(Mk)}}async function xd(r,n,i,s={},c){const l=c??Ak(),d=Pk(r,n,s);try{const p=await i.sendRequest(l,d),m=p.headers.toJSON(),g=p.readableStreamBody??p.browserStreamBody,y=s.responseAsStream||g!==void 0?void 0:zk(p),E=g??y;return s?.onResponse&&s.onResponse({...p,request:d,rawHeaders:m,parsedBody:y}),{request:d,headers:m,status:`${p.status}`,body:E}}catch(p){if(x0(p)&&p.response&&s.onResponse){const{response:m}=p,g=m.headers.toJSON();s?.onResponse({...m,request:d,rawHeaders:g},p)}throw p}}function Uk(r={}){return r.contentType??r.headers?.["content-type"]??Dk(r.body)}function Dk(r){if(ArrayBuffer.isView(r))return"application/octet-stream";if(typeof r=="string")try{return JSON.parse(r),"application/json"}catch{return}return"application/json"}function Pk(r,n,i={}){const s=Uk(i),{body:c,multipartBody:l}=Ik(i.body,s),d=c!==void 0||l!==void 0,p=Ri({...i.headers?i.headers:{},accept:i.accept??i.headers?.accept??"application/json",...d&&s&&{"content-type":s}});return T0({url:n,method:r,body:c,multipartBody:l,headers:p,allowInsecureConnection:i.allowInsecureConnection,abortSignal:i.abortSignal,onUploadProgress:i.onUploadProgress,onDownloadProgress:i.onDownloadProgress,timeout:i.timeout,enableBrowserStreams:!0,streamResponseStatusCodes:i.responseAsStream?new Set([Number.POSITIVE_INFINITY]):void 0})}function Ik(r,n=""){if(r===void 0)return{body:void 0};if(typeof FormData<"u"&&r instanceof FormData)return{body:r};if(A0(r))return{body:r};if(ArrayBuffer.isView(r))return{body:r instanceof Uint8Array?r:JSON.stringify(r)};switch(n.split(";")[0]){case"application/json":return{body:JSON.stringify(r)};case"multipart/form-data":return Array.isArray(r)?{multipartBody:jk(r)}:{body:JSON.stringify(r)};case"text/plain":return{body:String(r)};default:return typeof r=="string"?{body:r}:{body:JSON.stringify(r)}}}function zk(r){const i=(r.headers.get("content-type")??"").split(";")[0],s=r.bodyAsText??"";if(i==="text/plain")return String(s);try{return s?JSON.parse(s):void 0}catch(c){if(i==="application/json")throw Lk(r,c);return String(s)}}function Lk(r,n){const i=`Error "${n}" occurred while parsing the response body - ${r.bodyAsText}.`,s=n.code??xi.PARSE_ERROR;return new xi(i,{code:s,statusCode:r.status,request:r.request,response:r})}function Bk(r){const n=r.value;return n!==void 0&&n.toString!==void 0&&typeof n.toString=="function"}function Hk(r,n,i,s={}){if(n.startsWith("https://")||n.startsWith("http://"))return n;r=$k(r,s),n=Vk(n,i,s);const c=qk(`${r}/${n}`,s);return new URL(c).toString().replace(/([^:]\/)\/+/g,"$1")}function Ed(r,n,i,s){let c;i==="pipeDelimited"?c="|":i==="spaceDelimited"?c="%20":c=",";let l;Array.isArray(s)?l=s:typeof s=="object"&&s.toString===Object.prototype.toString?l=Object.entries(s).flat():l=[s];const d=l.map(p=>{if(p==null)return"";if(!p.toString||typeof p.toString!="function")throw new Error(`Query parameters must be able to be represented as string, ${r} can't`);const m=p.toISOString!==void 0?p.toISOString():p.toString();return n?m:encodeURIComponent(m)}).join(c);return`${n?r:encodeURIComponent(r)}=${d}`}function qk(r,n={}){if(!n.queryParameters)return r;const i=new URL(r),s=n.queryParameters,c=[];for(const l of Object.keys(s)){const d=s[l];if(d==null)continue;const p=Bk(d),m=p?d.value:d,g=p?d.explode??!1:!1,y=p&&d.style?d.style:"form";if(g)if(Array.isArray(m))for(const E of m)c.push(Ed(l,n.skipUrlEncoding??!1,y,E));else if(typeof m=="object")for(const[E,I]of Object.entries(m))c.push(Ed(E,n.skipUrlEncoding??!1,y,I));else throw new Error("explode can only be set to true for objects and arrays");else c.push(Ed(l,n.skipUrlEncoding??!1,y,m))}return i.search!==""&&(i.search+="&"),i.search+=c.join("&"),i.toString()}function $k(r,n){if(!n.pathParameters)return r;const i=n.pathParameters;for(const[s,c]of Object.entries(i)){if(c==null)throw new Error(`Path parameters ${s} must not be undefined or null`);if(!c.toString||typeof c.toString!="function")throw new Error(`Path parameters must be able to be represented as string, ${s} can't`);let l=c.toISOString!==void 0?c.toISOString():String(c);n.skipUrlEncoding||(l=encodeURIComponent(c)),r=Gk(r,`{${s}}`,l)??""}return r}function Vk(r,n,i={}){for(const s of n){const c=typeof s=="object"&&(s.allowReserved??!1);let l=typeof s=="object"?s.value:s;!i.skipUrlEncoding&&!c&&(l=encodeURIComponent(l)),r=r.replace(/\{[\w-]+\}/,String(l))}return r}function Gk(r,n,i){return!r||!n?r:r.split(n).join(i||"")}function Fk(r,n={}){const i=n.pipeline??_k(n);if(n.additionalPolicies?.length)for(const{policy:p,position:m}of n.additionalPolicies){const g=m==="perRetry"?"Sign":void 0;i.addPolicy(p,{afterPhase:g})}const{allowInsecureConnection:s,httpClient:c}=n,l=n.endpoint??r,d=(p,...m)=>{const g=y=>Hk(l,p,m,{...y});return{get:(y={})=>Vr("GET",g(y),i,y,s,c),post:(y={})=>Vr("POST",g(y),i,y,s,c),put:(y={})=>Vr("PUT",g(y),i,y,s,c),patch:(y={})=>Vr("PATCH",g(y),i,y,s,c),delete:(y={})=>Vr("DELETE",g(y),i,y,s,c),head:(y={})=>Vr("HEAD",g(y),i,y,s,c),options:(y={})=>Vr("OPTIONS",g(y),i,y,s,c),trace:(y={})=>Vr("TRACE",g(y),i,y,s,c)}};return{path:d,pathUnchecked:d,pipeline:i}}function Vr(r,n,i,s,c,l){return c=s.allowInsecureConnection??c,{then:function(d,p){return xd(r,n,i,{...s,allowInsecureConnection:c},l).then(d,p)},async asBrowserStream(){if(Kr)throw new Error("`asBrowserStream` is supported only in the browser environment. Use `asNodeStream` instead to obtain the response body stream. If you require a Web stream of the response in Node, consider using `Readable.toWeb` on the result of `asNodeStream`.");return xd(r,n,i,{...s,allowInsecureConnection:c,responseAsStream:!0},l)},async asNodeStream(){if(Kr)return xd(r,n,i,{...s,allowInsecureConnection:c,responseAsStream:!0},l);throw new Error("`isNodeStream` is not supported in the browser environment. Use `asBrowserStream` to obtain the response body stream.")}}}function Q0(){return C0()}const Xk=S0({logLevelEnvVarName:"AZURE_LOG_LEVEL",namespace:"azure"});function Bc(r){return Xk.createClientLogger(r)}const Ei=Bc("core-rest-pipeline"),Yk="exponentialRetryPolicy";function Jk(r={}){return Ls([wf({...r,ignoreSystemErrors:!0})],{maxRetries:r.maxRetries??vo})}const W0="systemErrorRetryPolicy";function Kk(r={}){return{name:W0,sendRequest:Ls([wf({...r,ignoreHttpStatusCodes:!0})],{maxRetries:r.maxRetries??vo}).sendRequest}}const Z0="throttlingRetryPolicy";function Qk(r={}){return{name:Z0,sendRequest:Ls([L0()],{maxRetries:r.maxRetries??vo}).sendRequest}}const Wk=M0;function eb(r={}){return j0({logger:Ei.info,...r})}const Zk=U0;function tb(r={}){return D0(r)}function eN(){return"x-ms-useragent"}function tN(r){const n=[{name:"Firefox",regex:/Firefox\/([\d.]+)/},{name:"Safari",regex:/Version\/([\d.]+).*Safari/}];for(const i of n){const s=r.match(i.regex);if(s)return{brand:i.name,version:s[1]}}}function nN(r){const n=["Google Chrome","Microsoft Edge","Opera","Brave","Chromium"];for(const i of n){const s=r.find(c=>c.brand===i);if(s)return s}}async function rN(r){const n=globalThis.navigator;let i="unknown";if(n?.userAgentData){const s=await n.userAgentData.getHighEntropyValues(["architecture","platformVersion"]);i=`${s.platform} ${s.platformVersion}; ${s.architecture}`;const c=nN(n.userAgentData.brands);c&&r.set(c.brand,`${c.version} (${i})`)}else if(n?.platform){i=n.platform;const s=tN(n.userAgent);s&&r.set(s.brand,`${s.version} (${i})`)}else typeof globalThis.EdgeRuntime=="string"&&r.set("EdgeRuntime",`${globalThis.EdgeRuntime} (${i})`)}const nb="1.22.2",iN=3;function oN(r){const n=[];for(const[i,s]of r){const c=s?`${i}/${s}`:i;n.push(c)}return n.join(" ")}function sN(){return eN()}async function rb(r){const n=new Map;n.set("core-rest-pipeline",nb),await rN(n);const i=oN(n);return r?`${r} ${i}`:i}const Uy=sN(),ib="userAgentPolicy";function ob(r={}){const n=rb(r.userAgentPrefix);return{name:ib,async sendRequest(i,s){return i.headers.has(Uy)||i.headers.set(Uy,await n),s(i)}}}function aN(r){return!!(r&&typeof r.pipe=="function")}const sb={arrayBuffer:()=>{throw new Error("Not implemented")},bytes:()=>{throw new Error("Not implemented")},slice:()=>{throw new Error("Not implemented")},text:()=>{throw new Error("Not implemented")}},Hc=Symbol("rawContent");function ab(r){return typeof r[Hc]=="function"}function cN(r){return ab(r)?r[Hc]():r}function lN(r,n,i={}){return{...sb,type:i.type??"",lastModified:i.lastModified??new Date().getTime(),webkitRelativePath:i.webkitRelativePath??"",size:i.size??-1,name:n,stream:()=>{const s=r();if(aN(s))throw new Error("Not supported: a Node stream was provided as input to createFileFromStream.");return s},[Hc]:r}}function uN(r,n,i={}){return Sc?{...sb,type:i.type??"",lastModified:i.lastModified??new Date().getTime(),webkitRelativePath:i.webkitRelativePath??"",size:r.byteLength,name:n,arrayBuffer:async()=>r.buffer,stream:()=>new Blob([Dy(r)]).stream(),[Hc]:()=>r}:new File([Dy(r)],n,i)}function Dy(r){return"resize"in r.buffer?r:r.map(n=>n)}const Cf=Tf;function cb(){const r=J0();return{name:Cf,sendRequest:async(n,i)=>{if(n.multipartBody)for(const s of n.multipartBody.parts)ab(s.body)&&(s.body=cN(s.body));return r.sendRequest(n,i)}}}const dN=UA;function lb(){return I0()}function ub(r={}){return B0(r)}const fN=H0;function db(){return q0()}const hN=KA;function pN(r){return QA()}function fb(r,n){return V0()}const hb="setClientRequestIdPolicy";function pb(r="x-ms-client-request-id"){return{name:hb,async sendRequest(n,i){return n.headers.has(r)||n.headers.set(r,n.requestId),i(n)}}}const mN=G0;function mb(r){return F0(r)}const gN=X0;function gb(r){return Y0(r)}const xs={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function yN(r={}){let n=new Es(r.parentContext);return r.span&&(n=n.setValue(xs.span,r.span)),r.namespace&&(n=n.setValue(xs.namespace,r.namespace)),n}class Es{_contextMap;constructor(n){this._contextMap=n instanceof Es?new Map(n._contextMap):new Map}setValue(n,i){const s=new Es(this);return s._contextMap.set(n,i),s}getValue(n){return this._contextMap.get(n)}deleteValue(n){const i=new Es(this);return i._contextMap.delete(n),i}}const _d={instrumenterImplementation:void 0};function vN(){return{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{},addEvent:()=>{}}}function bN(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(r,n)=>({span:vN(),tracingContext:yN({parentContext:n.tracingContext})}),withContext(r,n,...i){return n(...i)}}}function sc(){return _d.instrumenterImplementation||(_d.instrumenterImplementation=bN()),_d.instrumenterImplementation}function yb(r){const{namespace:n,packageName:i,packageVersion:s}=r;function c(g,y,E){const I=sc().startSpan(g,{...E,packageName:i,packageVersion:s,tracingContext:y?.tracingOptions?.tracingContext});let F=I.tracingContext;const U=I.span;F.getValue(xs.namespace)||(F=F.setValue(xs.namespace,n)),U.setAttribute("az.namespace",F.getValue(xs.namespace));const re=Object.assign({},y,{tracingOptions:{...y?.tracingOptions,tracingContext:F}});return{span:U,updatedOptions:re}}async function l(g,y,E,I){const{span:F,updatedOptions:U}=c(g,y,I);try{const re=await d(U.tracingOptions.tracingContext,()=>Promise.resolve(E(U,F)));return F.setStatus({status:"success"}),re}catch(re){throw F.setStatus({status:"error",error:re}),re}finally{F.end()}}function d(g,y,...E){return sc().withContext(g,y,...E)}function p(g){return sc().parseTraceparentHeader(g)}function m(g){return sc().createRequestHeaders(g)}return{startSpan:c,withSpan:l,withContext:d,parseTraceparentHeader:p,createRequestHeaders:m}}const Os=xi;function Rf(r){return x0(r)}const vb="tracingPolicy";function bb(r={}){const n=rb(r.userAgentPrefix),i=new mf({additionalAllowedQueryParameters:r.additionalAllowedQueryParameters}),s=SN();return{name:vb,async sendRequest(c,l){if(!s)return l(c);const d=await n,p={"http.url":i.sanitizeUrl(c.url),"http.method":c.method,"http.user_agent":d,requestId:c.requestId};d&&(p["http.user_agent"]=d);const{span:m,tracingContext:g}=wN(s,c,p)??{};if(!m||!g)return l(c);try{const y=await s.withContext(g,l,c);return CN(m,y),y}catch(y){throw TN(m,y),y}}}}function SN(){try{return yb({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:nb})}catch(r){Ei.warning(`Error when creating the TracingClient: ${zs(r)}`);return}}function wN(r,n,i){try{const{span:s,updatedOptions:c}=r.startSpan(`HTTP ${n.method}`,{tracingOptions:n.tracingOptions},{spanKind:"client",spanAttributes:i});if(!s.isRecording()){s.end();return}const l=r.createRequestHeaders(c.tracingOptions.tracingContext);for(const[d,p]of Object.entries(l))n.headers.set(d,p);return{span:s,tracingContext:c.tracingOptions.tracingContext}}catch(s){Ei.warning(`Skipping creating a tracing span due to an error: ${zs(s)}`);return}}function TN(r,n){try{r.setStatus({status:"error",error:u0(n)?n:void 0}),Rf(n)&&n.statusCode&&r.setAttribute("http.status_code",n.statusCode),r.end()}catch(i){Ei.warning(`Skipping tracing span processing due to an error: ${zs(i)}`)}}function CN(r,n){try{r.setAttribute("http.status_code",n.status);const i=n.headers.get("x-ms-request-id");i&&r.setAttribute("serviceRequestId",i),n.status>=400&&r.setStatus({status:"error"}),r.end()}catch(i){Ei.warning(`Skipping tracing span processing due to an error: ${zs(i)}`)}}function Sb(r){if(r instanceof AbortSignal)return{abortSignal:r};if(r.aborted)return{abortSignal:AbortSignal.abort(r.reason)};const n=new AbortController;let i=!0;function s(){i&&(r.removeEventListener("abort",c),i=!1)}function c(){n.abort(r.reason),s()}return r.addEventListener("abort",c),{abortSignal:n.signal,cleanup:s}}const RN="wrapAbortSignalLikePolicy";function xN(){return{name:RN,sendRequest:async(r,n)=>{if(!r.abortSignal)return n(r);const{abortSignal:i,cleanup:s}=Sb(r.abortSignal);r.abortSignal=i;try{return await n(r)}finally{s?.()}}}}function xf(r){const n=Q0();return Sc&&(r.agent&&n.addPolicy(mb(r.agent)),r.tlsOptions&&n.addPolicy(gb(r.tlsOptions)),n.addPolicy(fb(r.proxyOptions)),n.addPolicy(lb())),n.addPolicy(xN()),n.addPolicy(db(),{beforePolicies:[Cf]}),n.addPolicy(ob(r.userAgentOptions)),n.addPolicy(pb(r.telemetryOptions?.clientRequestIdHeaderName)),n.addPolicy(cb(),{afterPhase:"Deserialize"}),n.addPolicy(ub(r.retryOptions),{phase:"Retry"}),n.addPolicy(bb({...r.userAgentOptions,...r.loggingOptions}),{afterPhase:"Retry"}),Sc&&n.addPolicy(tb(r.redirectOptions),{afterPhase:"Retry"}),n.addPolicy(eb(r.loggingOptions),{afterPhase:"Sign"}),n}function Ef(){const r=N0();return{async sendRequest(n){const{abortSignal:i,cleanup:s}=n.abortSignal?Sb(n.abortSignal):{};try{return n.abortSignal=i,await r.sendRequest(n)}finally{s?.()}}}}function wb(r){return Ri(r)}function _f(r){return T0(r)}const EN=Yk;function _N(r={}){return Jk(r)}const AN=W0;function kN(r={}){return Kk(r)}const NN=Z0;function ON(r={}){return Qk(r)}const MN=Bc("core-rest-pipeline retryPolicy");function jN(r,n={maxRetries:iN}){return Ls(r,{logger:MN,...n})}const UN={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function DN(r,n,i){async function s(){if(Date.now()<i)try{return await r()}catch{return null}else{const l=await r();if(l===null)throw new Error("Failed to refresh access token.");return l}}let c=await s();for(;c===null;)await c0(n),c=await s();return c}function Tb(r,n){let i=null,s=null,c;const l={...UN,...n},d={get isRefreshing(){return i!==null},get shouldRefresh(){return d.isRefreshing?!1:s?.refreshAfterTimestamp&&s.refreshAfterTimestamp<Date.now()?!0:(s?.expiresOnTimestamp??0)-l.refreshWindowInMs<Date.now()},get mustRefresh(){return s===null||s.expiresOnTimestamp-l.forcedRefreshWindowInMs<Date.now()}};function p(m,g){return d.isRefreshing||(i=DN(()=>r.getToken(m,g),l.retryIntervalInMs,s?.expiresOnTimestamp??Date.now()).then(E=>(i=null,s=E,c=g.tenantId,s)).catch(E=>{throw i=null,s=null,c=void 0,E})),i}return async(m,g)=>{const y=!!g.claims,E=c!==g.tenantId;return y&&(s=null),E||y||d.mustRefresh?p(m,g):(d.shouldRefresh&&p(m,g),s)}}const Cb="bearerTokenAuthenticationPolicy";async function ac(r,n){try{return[await n(r),void 0]}catch(i){if(Rf(i)&&i.response)return[i.response,i];throw i}}async function PN(r){const{scopes:n,getAccessToken:i,request:s}=r,c={abortSignal:s.abortSignal,tracingOptions:s.tracingOptions,enableCae:!0},l=await i(n,c);l&&r.request.headers.set("Authorization",`Bearer ${l.token}`)}function Py(r){return r.status===401&&r.headers.has("WWW-Authenticate")}async function Iy(r,n){const{scopes:i}=r,s=await r.getAccessToken(i,{enableCae:!0,claims:n});return s?(r.request.headers.set("Authorization",`${s.tokenType??"Bearer"} ${s.token}`),!0):!1}function qc(r){const{credential:n,scopes:i,challengeCallbacks:s}=r,c=r.logger||Ei,l={authorizeRequest:s?.authorizeRequest?.bind(s)??PN,authorizeRequestOnChallenge:s?.authorizeRequestOnChallenge?.bind(s)},d=n?Tb(n):()=>Promise.resolve(null);return{name:Cb,async sendRequest(p,m){if(!p.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await l.authorizeRequest({scopes:Array.isArray(i)?i:[i],request:p,getAccessToken:d,logger:c});let g,y,E;if([g,y]=await ac(p,m),Py(g)){let I=zy(g.headers.get("WWW-Authenticate"));if(I){let F;try{F=atob(I)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${I}`),g}E=await Iy({scopes:Array.isArray(i)?i:[i],response:g,request:p,getAccessToken:d,logger:c},F),E&&([g,y]=await ac(p,m))}else if(l.authorizeRequestOnChallenge&&(E=await l.authorizeRequestOnChallenge({scopes:Array.isArray(i)?i:[i],request:p,response:g,getAccessToken:d,logger:c}),E&&([g,y]=await ac(p,m)),Py(g)&&(I=zy(g.headers.get("WWW-Authenticate")),I))){let F;try{F=atob(I)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${I}`),g}E=await Iy({scopes:Array.isArray(i)?i:[i],response:g,request:p,getAccessToken:d,logger:c},F),E&&([g,y]=await ac(p,m))}}if(y)throw y;return g}}}function IN(r){const n=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,i=/(\w+)="([^"]*)"/g,s=[];let c;for(;(c=n.exec(r))!==null;){const l=c[1],d=c[2],p={};let m;for(;(m=i.exec(d))!==null;)p[m[1]]=m[2];s.push({scheme:l,params:p})}return s}function zy(r){return r?IN(r).find(i=>i.scheme==="Bearer"&&i.params.claims&&i.params.error==="insufficient_claims")?.params.claims:void 0}const Rb="ndJsonPolicy";function zN(){return{name:Rb,async sendRequest(r,n){if(typeof r.body=="string"&&r.body.startsWith("[")){const i=JSON.parse(r.body);Array.isArray(i)&&(r.body=i.map(s=>JSON.stringify(s)+`
`).join(""))}return n(r)}}}const qd="auxiliaryAuthenticationHeaderPolicy",Ly="x-ms-authorization-auxiliary";async function LN(r){const{scopes:n,getAccessToken:i,request:s}=r,c={abortSignal:s.abortSignal,tracingOptions:s.tracingOptions};return(await i(n,c))?.token??""}function BN(r){const{credentials:n,scopes:i}=r,s=r.logger||Ei,c=new WeakMap;return{name:qd,async sendRequest(l,d){if(!l.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication for auxiliary header is not permitted for non-TLS protected (non-https) URLs.");if(!n||n.length===0)return s.info(`${qd} header will not be set due to empty credentials.`),d(l);const p=[];for(const g of n){let y=c.get(g);y||(y=Tb(g),c.set(g,y)),p.push(LN({scopes:Array.isArray(i)?i:[i],request:l,getAccessToken:y}))}const m=(await Promise.all(p)).filter(g=>!!g);return m.length===0?(s.warning(`None of the auxiliary tokens are valid. ${Ly} header will not be set.`),d(l)):(l.headers.set(Ly,m.map(g=>`Bearer ${g}`).join(", ")),d(l))}}}const HN=Object.freeze(Object.defineProperty({__proto__:null,RestError:Os,agentPolicy:mb,agentPolicyName:mN,auxiliaryAuthenticationHeaderPolicy:BN,auxiliaryAuthenticationHeaderPolicyName:qd,bearerTokenAuthenticationPolicy:qc,bearerTokenAuthenticationPolicyName:Cb,createDefaultHttpClient:Ef,createEmptyPipeline:Q0,createFile:uN,createFileFromStream:lN,createHttpHeaders:wb,createPipelineFromOptions:xf,createPipelineRequest:_f,decompressResponsePolicy:lb,decompressResponsePolicyName:dN,defaultRetryPolicy:ub,exponentialRetryPolicy:_N,exponentialRetryPolicyName:EN,formDataPolicy:db,formDataPolicyName:fN,getDefaultProxySettings:pN,isRestError:Rf,logPolicy:eb,logPolicyName:Wk,multipartPolicy:cb,multipartPolicyName:Cf,ndJsonPolicy:zN,ndJsonPolicyName:Rb,proxyPolicy:fb,proxyPolicyName:hN,redirectPolicy:tb,redirectPolicyName:Zk,retryPolicy:jN,setClientRequestIdPolicy:pb,setClientRequestIdPolicyName:hb,systemErrorRetryPolicy:kN,systemErrorRetryPolicyName:AN,throttlingRetryPolicy:ON,throttlingRetryPolicyName:NN,tlsPolicy:gb,tlsPolicyName:gN,tracingPolicy:bb,tracingPolicyName:vb,userAgentPolicy:ob,userAgentPolicyName:ib},Symbol.toStringTag,{value:"Module"})),By={operationRequestMap:new WeakMap};function bo(r,n,i){let s=n.parameterPath;const c=n.mapper;let l;if(typeof s=="string"&&(s=[s]),Array.isArray(s)){if(s.length>0)if(c.isConstant)l=c.defaultValue;else{let d=Hy(r,s);!d.propertyFound&&i&&(d=Hy(i,s));let p=!1;d.propertyFound||(p=c.required||s[0]==="options"&&s.length===2),l=p?c.defaultValue:d.propertyValue}}else{c.required&&(l={});for(const d in s){const p=c.type.modelProperties[d],m=s[d],g=bo(r,{parameterPath:m,mapper:p},i);g!==void 0&&(l||(l={}),l[d]=g)}}return l}function Hy(r,n){const i={propertyFound:!1};let s=0;for(;s<n.length;++s){const c=n[s];if(r&&c in r)r=r[c];else break}return s===n.length&&(i.propertyValue=r,i.propertyFound=!0),i}const xb=Symbol.for("@azure/core-client original request");function qN(r){return xb in r}function Eo(r){if(qN(r))return Eo(r[xb]);let n=By.operationRequestMap.get(r);return n||(n={},By.operationRequestMap.set(r,n)),n}const $N=["application/json","text/json"],VN=["application/xml","application/atom+xml"],Eb="deserializationPolicy";function _b(r={}){const n=r.expectedContentTypes?.json??$N,i=r.expectedContentTypes?.xml??VN,s=r.parseXML,c=r.serializerOptions,l={xml:{rootName:c?.xml.rootName??"",includeRoot:c?.xml.includeRoot??!1,xmlCharKey:c?.xml.xmlCharKey??yo}};return{name:Eb,async sendRequest(d,p){const m=await p(d);return XN(n,i,m,l,s)}}}function GN(r){let n;const i=r.request,s=Eo(i),c=s?.operationSpec;return c&&(s?.operationResponseGetter?n=s?.operationResponseGetter(c,r):n=c.responses[r.status]),n}function FN(r){const n=r.request,s=Eo(n)?.shouldDeserialize;let c;return s===void 0?c=!0:typeof s=="boolean"?c=s:c=s(r),c}async function XN(r,n,i,s,c){const l=await KN(r,n,i,s,c);if(!FN(l))return l;const p=Eo(l.request)?.operationSpec;if(!p||!p.responses)return l;const m=GN(l),{error:g,shouldReturnResponse:y}=JN(l,p,m,s);if(g)throw g;if(y)return l;if(m){if(m.bodyMapper){let E=l.parsedBody;p.isXML&&m.bodyMapper.type.name===wi.Sequence&&(E=typeof E=="object"?E[m.bodyMapper.xmlElementName]:[]);try{l.parsedBody=p.serializer.deserialize(m.bodyMapper,E,"operationRes.parsedBody",s)}catch(I){throw new Os(`Error ${I} occurred in deserializing the responseBody - ${l.bodyAsText}`,{statusCode:l.status,request:l.request,response:l})}}else p.httpMethod==="HEAD"&&(l.parsedBody=i.status>=200&&i.status<300);m.headersMapper&&(l.parsedHeaders=p.serializer.deserialize(m.headersMapper,l.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return l}function YN(r){const n=Object.keys(r.responses);return n.length===0||n.length===1&&n[0]==="default"}function JN(r,n,i,s){const c=200<=r.status&&r.status<300;if(YN(n)?c:!!i)if(i){if(!i.isError)return{error:null,shouldReturnResponse:!1}}else return{error:null,shouldReturnResponse:!1};const d=i??n.responses.default,p=r.request.streamResponseStatusCodes?.has(r.status)?`Unexpected status code: ${r.status}`:r.bodyAsText,m=new Os(p,{statusCode:r.status,request:r.request,response:r});if(!d&&!(r.parsedBody?.error?.code&&r.parsedBody?.error?.message))throw m;const g=d?.bodyMapper,y=d?.headersMapper;try{if(r.parsedBody){const E=r.parsedBody;let I;if(g){let U=E;if(n.isXML&&g.type.name===wi.Sequence){U=[];const re=g.xmlElementName;typeof E=="object"&&re&&(U=E[re])}I=n.serializer.deserialize(g,U,"error.response.parsedBody",s)}const F=E.error||I||E;m.code=F.code,F.message&&(m.message=F.message),g&&(m.response.parsedBody=I)}r.headers&&y&&(m.response.parsedHeaders=n.serializer.deserialize(y,r.headers.toJSON(),"operationRes.parsedHeaders"))}catch(E){m.message=`Error "${E.message}" occurred in deserializing the responseBody - "${r.bodyAsText}" for the default response.`}return{error:m,shouldReturnResponse:!1}}async function KN(r,n,i,s,c){if(!i.request.streamResponseStatusCodes?.has(i.status)&&i.bodyAsText){const l=i.bodyAsText,d=i.headers.get("Content-Type")||"",p=d?d.split(";").map(m=>m.toLowerCase()):[];try{if(p.length===0||p.some(m=>r.indexOf(m)!==-1))return i.parsedBody=JSON.parse(l),i;if(p.some(m=>n.indexOf(m)!==-1)){if(!c)throw new Error("Parsing XML not supported.");const m=await c(l,s.xml);return i.parsedBody=m,i}}catch(m){const g=`Error "${m}" occurred while parsing the response body - ${i.bodyAsText}.`,y=m.code||Os.PARSE_ERROR;throw new Os(g,{code:y,statusCode:i.status,request:i.request,response:i})}}return i}function QN(r){const n=new Set;for(const i in r.responses){const s=r.responses[i];s.bodyMapper&&s.bodyMapper.type.name===wi.Stream&&n.add(Number(i))}return n}function Jr(r){const{parameterPath:n,mapper:i}=r;let s;return typeof n=="string"?s=n:Array.isArray(n)?s=n.join("."):s=i.serializedName,s}const Ab="serializationPolicy";function kb(r={}){const n=r.stringifyXML;return{name:Ab,async sendRequest(i,s){const c=Eo(i),l=c?.operationSpec,d=c?.operationArguments;return l&&d&&(WN(i,d,l),ZN(i,d,l,n)),s(i)}}}function WN(r,n,i){if(i.headerParameters)for(const c of i.headerParameters){let l=bo(n,c);if(l!=null||c.mapper.required){l=i.serializer.serialize(c.mapper,l,Jr(c));const d=c.mapper.headerCollectionPrefix;if(d)for(const p of Object.keys(l))r.headers.set(d+p,l[p]);else r.headers.set(c.mapper.serializedName||Jr(c),l)}}const s=n.options?.requestOptions?.customHeaders;if(s)for(const c of Object.keys(s))r.headers.set(c,s[c])}function ZN(r,n,i,s=function(){throw new Error("XML serialization unsupported!")}){const c=n.options?.serializerOptions,l={xml:{rootName:c?.xml.rootName??"",includeRoot:c?.xml.includeRoot??!1,xmlCharKey:c?.xml.xmlCharKey??yo}},d=l.xml.xmlCharKey;if(i.requestBody&&i.requestBody.mapper){r.body=bo(n,i.requestBody);const p=i.requestBody.mapper,{required:m,serializedName:g,xmlName:y,xmlElementName:E,xmlNamespace:I,xmlNamespacePrefix:F,nullable:U}=p,re=p.type.name;try{if(r.body!==void 0&&r.body!==null||U&&r.body===null||m){const X=Jr(i.requestBody);r.body=i.serializer.serialize(p,r.body,X,l);const ve=re===wi.Stream;if(i.isXML){const pe=F?`xmlns:${F}`:"xmlns",oe=e2(I,pe,re,r.body,l);re===wi.Sequence?r.body=s(t2(oe,E||y||g,pe,I),{rootName:y||g,xmlCharKey:d}):ve||(r.body=s(oe,{rootName:y||g,xmlCharKey:d}))}else{if(re===wi.String&&(i.contentType?.match("text/plain")||i.mediaType==="text"))return;ve||(r.body=JSON.stringify(r.body))}}}catch(X){throw new Error(`Error "${X.message}" occurred in serializing the payload - ${JSON.stringify(g,void 0,"  ")}.`)}}else if(i.formDataParameters&&i.formDataParameters.length>0){r.formData={};for(const p of i.formDataParameters){const m=bo(n,p);if(m!=null){const g=p.mapper.serializedName||Jr(p);r.formData[g]=i.serializer.serialize(p.mapper,m,Jr(p),l)}}}}function e2(r,n,i,s,c){if(r&&!["Composite","Sequence","Dictionary"].includes(i)){const l={};return l[c.xml.xmlCharKey]=s,l[Bt]={[n]:r},l}return s}function t2(r,n,i,s){if(Array.isArray(r)||(r=[r]),!i||!s)return{[n]:r};const c={[n]:r};return c[Bt]={[i]:s},c}function Nb(r={}){const n=xf(r??{});return r.credentialOptions&&n.addPolicy(qc({credential:r.credentialOptions.credential,scopes:r.credentialOptions.credentialScopes})),n.addPolicy(kb(r.serializationOptions),{phase:"Serialize"}),n.addPolicy(_b(r.deserializationOptions),{phase:"Deserialize"}),n}let Ad;function n2(){return Ad||(Ad=Ef()),Ad}const r2={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function i2(r,n,i,s){const c=o2(n,i,s);let l=!1,d=qy(r,c);if(n.path){let g=qy(n.path,c);n.path==="/{nextLink}"&&g.startsWith("/")&&(g=g.substring(1)),s2(g)?(d=g,l=!0):d=a2(d,g)}const{queryParams:p,sequenceParams:m}=c2(n,i,s);return d=u2(d,p,m,l),d}function qy(r,n){let i=r;for(const[s,c]of n)i=i.split(s).join(c);return i}function o2(r,n,i){const s=new Map;if(r.urlParameters?.length)for(const c of r.urlParameters){let l=bo(n,c,i);const d=Jr(c);l=r.serializer.serialize(c.mapper,l,d),c.skipEncoding||(l=encodeURIComponent(l)),s.set(`{${c.mapper.serializedName||d}}`,l)}return s}function s2(r){return r.includes("://")}function a2(r,n){if(!n)return r;const i=new URL(r);let s=i.pathname;s.endsWith("/")||(s=`${s}/`),n.startsWith("/")&&(n=n.substring(1));const c=n.indexOf("?");if(c!==-1){const l=n.substring(0,c),d=n.substring(c+1);s=s+l,d&&(i.search=i.search?`${i.search}&${d}`:d)}else s=s+n;return i.pathname=s,i.toString()}function c2(r,n,i){const s=new Map,c=new Set;if(r.queryParameters?.length)for(const l of r.queryParameters){l.mapper.type.name==="Sequence"&&l.mapper.serializedName&&c.add(l.mapper.serializedName);let d=bo(n,l,i);if(d!=null||l.mapper.required){d=r.serializer.serialize(l.mapper,d,Jr(l));const p=l.collectionFormat?r2[l.collectionFormat]:"";if(Array.isArray(d)&&(d=d.map(m=>m??"")),l.collectionFormat==="Multi"&&d.length===0)continue;Array.isArray(d)&&(l.collectionFormat==="SSV"||l.collectionFormat==="TSV")&&(d=d.join(p)),l.skipEncoding||(Array.isArray(d)?d=d.map(m=>encodeURIComponent(m)):d=encodeURIComponent(d)),Array.isArray(d)&&(l.collectionFormat==="CSV"||l.collectionFormat==="Pipes")&&(d=d.join(p)),s.set(l.mapper.serializedName||Jr(l),d)}}return{queryParams:s,sequenceParams:c}}function l2(r){const n=new Map;if(!r||r[0]!=="?")return n;r=r.slice(1);const i=r.split("&");for(const s of i){const[c,l]=s.split("=",2),d=n.get(c);d?Array.isArray(d)?d.push(l):n.set(c,[d,l]):n.set(c,l)}return n}function u2(r,n,i,s=!1){if(n.size===0)return r;const c=new URL(r),l=l2(c.search);for(const[p,m]of n){const g=l.get(p);if(Array.isArray(g))if(Array.isArray(m)){g.push(...m);const y=new Set(g);l.set(p,Array.from(y))}else g.push(m);else g?(Array.isArray(m)?m.unshift(g):i.has(p)&&l.set(p,[g,m]),s||l.set(p,m)):l.set(p,m)}const d=[];for(const[p,m]of l)if(typeof m=="string")d.push(`${p}=${m}`);else if(Array.isArray(m))for(const g of m)d.push(`${p}=${g}`);else d.push(`${p}=${m}`);return c.search=d.length?`?${d.join("&")}`:"",c.toString()}const Ob=Bc("core-client");class Mb{_endpoint;_requestContentType;_allowInsecureConnection;_httpClient;pipeline;constructor(n={}){if(this._requestContentType=n.requestContentType,this._endpoint=n.endpoint??n.baseUri,n.baseUri&&Ob.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=n.allowInsecureConnection,this._httpClient=n.httpClient||n2(),this.pipeline=n.pipeline||d2(n),n.additionalPolicies?.length)for(const{policy:i,position:s}of n.additionalPolicies){const c=s==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(i,{afterPhase:c})}}async sendRequest(n){return this.pipeline.sendRequest(this._httpClient,n)}async sendOperationRequest(n,i){const s=i.baseUrl||this._endpoint;if(!s)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");const c=i2(s,i,n,this),l=_f({url:c});l.method=i.httpMethod;const d=Eo(l);d.operationSpec=i,d.operationArguments=n;const p=i.contentType||this._requestContentType;p&&i.requestBody&&l.headers.set("Content-Type",p);const m=n.options;if(m){const g=m.requestOptions;g&&(g.timeout&&(l.timeout=g.timeout),g.onUploadProgress&&(l.onUploadProgress=g.onUploadProgress),g.onDownloadProgress&&(l.onDownloadProgress=g.onDownloadProgress),g.shouldDeserialize!==void 0&&(d.shouldDeserialize=g.shouldDeserialize),g.allowInsecureConnection&&(l.allowInsecureConnection=!0)),m.abortSignal&&(l.abortSignal=m.abortSignal),m.tracingOptions&&(l.tracingOptions=m.tracingOptions)}this._allowInsecureConnection&&(l.allowInsecureConnection=!0),l.streamResponseStatusCodes===void 0&&(l.streamResponseStatusCodes=QN(i));try{const g=await this.sendRequest(l),y=Sy(g,i.responses[g.status]);return m?.onResponse&&m.onResponse(g,y),y}catch(g){if(typeof g=="object"&&g?.response){const y=g.response,E=Sy(y,i.responses[g.statusCode]||i.responses.default);g.details=E,m?.onResponse&&m.onResponse(y,E,g)}throw g}}}function d2(r){const n=f2(r),i=r.credential&&n?{credentialScopes:n,credential:r.credential}:void 0;return Nb({...r,credentialOptions:i})}function f2(r){if(r.credentialScopes)return r.credentialScopes;if(r.endpoint)return`${r.endpoint}/.default`;if(r.baseUri)return`${r.baseUri}/.default`;if(r.credential&&!r.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}function h2(r){return`, ${r.trim()}`.split(", Bearer ").filter(i=>i).map(i=>`${i.trim()}, `.split('", ').filter(l=>l).map(l=>(([d,p])=>({[d]:p}))(l.trim().split('="'))).reduce((l,d)=>({...l,...d}),{}))}async function p2(r){const{scopes:n,response:i}=r,s=r.logger||Ob,c=i.headers.get("WWW-Authenticate");if(!c)return s.info("The WWW-Authenticate header was missing. Failed to perform the Continuous Access Evaluation authentication flow."),!1;const d=(h2(c)||[]).find(m=>m.claims);if(!d)return s.info('The WWW-Authenticate header was missing the necessary "claims" to perform the Continuous Access Evaluation authentication flow.'),!1;const p=await r.getAccessToken(d.scope?[d.scope]:n,{claims:A_(d.claims)});return p?(r.request.headers.set("Authorization",`${p.tokenType??"Bearer"} ${p.token}`),!0):!1}const jb={DefaultScope:"/.default",HeaderConstants:{AUTHORIZATION:"authorization"}};function m2(r){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(r)}const g2=async r=>{const n=w2(r.request),i=b2(r.response);if(i){const s=S2(i),c=v2(r,s),l=y2(s);if(!l)return!1;const d=await r.getAccessToken(c,{...n,tenantId:l});return d?(r.request.headers.set(jb.HeaderConstants.AUTHORIZATION,`${d.tokenType??"Bearer"} ${d.token}`),!0):!1}return!1};function y2(r){const s=new URL(r.authorization_uri).pathname.split("/")[1];if(s&&m2(s))return s}function v2(r,n){if(!n.resource_id)return r.scopes;const i=new URL(n.resource_id);i.pathname=jb.DefaultScope;let s=i.toString();return s==="https://disk.azure.com/.default"&&(s="https://disk.azure.com//.default"),[s]}function b2(r){const n=r.headers.get("WWW-Authenticate");if(r.status===401&&n)return n}function S2(r){return`${r.slice(7).trim()} `.split(" ").filter(c=>c).map(c=>(([l,d])=>({[l]:d}))(c.trim().split("="))).reduce((c,l)=>({...c,...l}),{})}function w2(r){return{abortSignal:r.abortSignal,requestOptions:{timeout:r.timeout},tracingOptions:r.tracingOptions}}const T2=Object.freeze(Object.defineProperty({__proto__:null,MapperTypeNames:wi,ServiceClient:Mb,XML_ATTRKEY:Bt,XML_CHARKEY:yo,authorizeRequestOnClaimChallenge:p2,authorizeRequestOnTenantChallenge:g2,createClientPipeline:Nb,createSerializer:yf,deserializationPolicy:_b,deserializationPolicyName:Eb,serializationPolicy:kb,serializationPolicyName:Ab},Symbol.toStringTag,{value:"Module"})),C2=Rc(T2),R2=Rc(HN);var $y;function x2(){return $y||($y=1,(function(r){var n=GE,i=__,s=C2,c=R2;function l(Oe){return Oe&&typeof Oe=="object"&&"default"in Oe?Oe:{default:Oe}}var d=l(n),p=l(i),m=l(s),g=l(c),y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof kg<"u"?kg:typeof self<"u"?self:{};function E(Oe){return Oe&&Oe.__esModule&&Object.prototype.hasOwnProperty.call(Oe,"default")?Oe.default:Oe}function I(Oe,Te){return Te={exports:{}},Oe(Te,Te.exports),Te.exports}var F=I(function(Oe,Te){(function(De,$){Oe.exports=$()})(y,function(){return(function(De){function $(Y){if(M[Y])return M[Y].exports;var P=M[Y]={i:Y,l:!1,exports:{}};return De[Y].call(P.exports,P,P.exports,$),P.l=!0,P.exports}var M={};return $.m=De,$.c=M,$.i=function(Y){return Y},$.d=function(Y,P,K){$.o(Y,P)||Object.defineProperty(Y,P,{configurable:!1,enumerable:!0,get:K})},$.n=function(Y){var P=Y&&Y.__esModule?function(){return Y.default}:function(){return Y};return $.d(P,"a",P),P},$.o=function(Y,P){return Object.prototype.hasOwnProperty.call(Y,P)},$.p="",$($.s=1)})([function(De,$,M){function Y(R,D){var x,b=new Promise(function(k,N){fetch(R).then(function(S){x!==void 0&&clearTimeout(x),k(S)}).catch(function(S){x!==void 0&&clearTimeout(x),N(S)})});if(D!==0){var T=new Promise(function(k,N){x=setTimeout(N,D,new Error("Fetch for '".concat(R.url,"' timed out")))});return Promise.race([b,T])}return b}function P(R){try{return JSON.stringify(R)}catch{return"Unable to serialize object of type ".concat(typeof R)}}Object.defineProperty($,"__esModule",{value:!0}),$.Timespan=$.toJson=$.fetchWithTimeout=void 0,$.fetchWithTimeout=Y,$.toJson=P;var K=(function(){function R(){this.start=Date.now()}return Object.defineProperty(R.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(R.prototype,"startTime",{get:function(){return this.start},enumerable:!1,configurable:!0}),R.prototype.reset=function(){this.start=Date.now()},R})();$.Timespan=K},function(De,$,M){function Y(S,C,A){return new N(S,C,A)}var P=this&&this.__extends||(function(){var S=function(C,A){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,J){B.__proto__=J}||function(B,J){for(var V in J)Object.prototype.hasOwnProperty.call(J,V)&&(B[V]=J[V])})(C,A)};return function(C,A){function B(){this.constructor=C}if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");S(C,A),C.prototype=A===null?Object.create(A):(B.prototype=A.prototype,new B)}})(),K=this&&this.__assign||function(){return K=Object.assign||function(S){for(var C,A=1,B=arguments.length;A<B;A++){C=arguments[A];for(var J in C)Object.prototype.hasOwnProperty.call(C,J)&&(S[J]=C[J])}return S},K.apply(this,arguments)},R=this&&this.__awaiter||function(S,C,A,B){function J(V){return V instanceof A?V:new A(function(L){L(V)})}return new(A||(A=Promise))(function(V,L){function H(W){try{te(B.next(W))}catch(ue){L(ue)}}function ie(W){try{te(B.throw(W))}catch(ue){L(ue)}}function te(W){W.done?V(W.value):J(W.value).then(H,ie)}te((B=B.apply(S,C||[])).next())})},D=this&&this.__generator||function(S,C){function A(te){return function(W){return B([te,W])}}function B(te){if(J)throw new TypeError("Generator is already executing.");for(;H&&(H=0,te[0]&&(ie=0)),ie;)try{if(J=1,V&&(L=2&te[0]?V.return:te[0]?V.throw||((L=V.return)&&L.call(V),0):V.next)&&!(L=L.call(V,te[1])).done)return L;switch(V=0,L&&(te=[2&te[0],L.value]),te[0]){case 0:case 1:L=te;break;case 4:return ie.label++,{value:te[1],done:!1};case 5:ie.label++,V=te[1],te=[0];continue;case 7:te=ie.ops.pop(),ie.trys.pop();continue;default:if(L=ie.trys,!(L=L.length>0&&L[L.length-1])&&(te[0]===6||te[0]===2)){ie=0;continue}if(te[0]===3&&(!L||te[1]>L[0]&&te[1]<L[3])){ie.label=te[1];break}if(te[0]===6&&ie.label<L[1]){ie.label=L[1],L=te;break}if(L&&ie.label<L[2]){ie.label=L[2],ie.ops.push(te);break}L[2]&&ie.ops.pop(),ie.trys.pop();continue}te=C.call(S,ie)}catch(W){te=[6,W],V=0}finally{J=L=0}if(5&te[0])throw te[1];return{value:te[0]?te[1]:void 0,done:!0}}var J,V,L,H,ie={label:0,sent:function(){if(1&L[0])throw L[1];return L[1]},trys:[],ops:[]};return H={next:A(0),throw:A(1),return:A(2)},typeof Symbol=="function"&&(H[Symbol.iterator]=function(){return this}),H};Object.defineProperty($,"__esModule",{value:!0}),$.createRegistrarClient=$.RegistrarClient=void 0;var x=M(0),b=["skype","aad","cae"],T=(function(S){function C(A){var B=S.call(this,A)||this;return B.name="CancelationError",B}return P(C,S),C})(Error),k=(function(){function S(C,A,B){this.logger=C,this.maxBackoffInMs=A,this.initialDelay=B,this.backoffCount=0,this.id=++S.idCounter}return S.prototype.delay=function(C){var A=this;if(this.timerHandle!==void 0)throw new Error("Retry sequence logical failure");if(this.backoffCount===-1)return new Promise(function(J,V){V(new T("Cancelled"))});var B=this.calculateNextBackoffMs();return this.backoffCount++,this.logger.info("[RegistrarClient] Backing off ".concat(C," for ").concat(B," milliseconds with ID ").concat(this.id)),new Promise(function(J,V){A.cancelFunc=V,A.timerHandle=setTimeout(function(){A.logger.info("[RegistrarClient] Back off for ".concat(C," with ID ").concat(A.id," complete")),A.timerHandle=void 0,J()},B)})},S.prototype.cancel=function(){this.timerHandle!==void 0&&(this.logger.debug("Resetting back off"),clearTimeout(this.timerHandle),this.cancelFunc!==void 0&&this.cancelFunc(new T("Cancelled"))),this.backoffCount=-1},S.prototype.calculateNextBackoffMs=function(){var C=1+.4*(Math.random()-.5),A=this.initialDelay*Math.pow(2,this.backoffCount)*C;return A=Math.round(A),Math.min(this.maxBackoffInMs,A)},S.idCounter=0,S})(),N=(function(){function S(C,A,B){var J;this.logger=C,this.tokenProvider=A,this.options=B,this.DEFAULT_MAX_RETRIES_FOR_GET_TOKEN=15,this.DEFAULT_MAX_BACKOFF_TIME_IN_MS=3e5,this.backoffs={},this.maxBackOffTime=this.options.maxRetryDelayMs>0?this.options.maxRetryDelayMs:this.DEFAULT_MAX_BACKOFF_TIME_IN_MS,this.maxRetriesForGetToken=B.maxRetriesForGetToken===void 0||B.maxRetriesForGetToken===null?this.DEFAULT_MAX_RETRIES_FOR_GET_TOKEN:B.maxRetriesForGetToken,this.proxyUrlRewrite=(J=B.proxyUrlRewrite)!==null&&J!==void 0?J:function(V){return V}}return S.prototype.setTelemetryLogger=function(C){this.eventLogger=C},S.prototype.register=function(C,A){return R(this,void 0,void 0,function(){return D(this,function(B){switch(B.label){case 0:return[4,this.performRegistration(C,A,"pr_set_registration")];case 1:return B.sent(),this.cachedRegistrationParams=[C,A],[2]}})})},S.prototype.unregister=function(){return R(this,void 0,void 0,function(){var C;return D(this,function(A){switch(A.label){case 0:return this.logger.info("[RegistrarClient] sending unregister request"),C=new Request(this.proxyUrlRewrite("".concat(this.options.registrarUrl,"/").concat(this.options.registrationId)),{method:"DELETE",mode:"cors",headers:new Headers(K(K({},this.options.extraRegistrationHeaders),{accept:"application/json, text/javascript"}))}),[4,this.callRegistrar(C,"pr_delete_registration")];case 1:return A.sent(),[2]}})})},S.prototype.cancelPendingRequests=function(){var C=this;Object.keys(this.backoffs).forEach(function(A){C.backoffs[A].cancel()}),this.backoffs={}},S.prototype.resendRegistration=function(){return R(this,void 0,void 0,function(){return D(this,function(C){switch(C.label){case 0:if(!this.cachedRegistrationParams)throw new Error("Re-registration failed because there is no registration parameters cached");return[4,this.performRegistration(this.cachedRegistrationParams[0],this.cachedRegistrationParams[1],"pr_resend_registration")];case 1:return C.sent(),[2]}})})},S.prototype.performRegistration=function(C,A,B){return R(this,void 0,void 0,function(){var J,V;return D(this,function(L){switch(L.label){case 0:return this.logger.info("[RegistrarClient] Sending register request"),J={clientDescription:C,registrationId:this.options.registrationId,nodeId:"",transports:A},V=new Request(this.proxyUrlRewrite(this.options.registrarUrl),{method:"POST",mode:"cors",headers:new Headers(K(K({},this.options.extraRegistrationHeaders),{"content-type":"application/json",accept:"application/json, text/javascript"})),body:(0,x.toJson)(J)}),[4,this.callRegistrar(V,B)];case 1:return L.sent(),[2]}})})},S.prototype.startBackoff=function(){var C=new k(this.logger,this.maxBackOffTime,this.options.initialRetryDelayMs);return this.backoffs[C.id]=C,C},S.prototype.stopBackoff=function(C){C.cancel(),delete this.backoffs[C.id]},S.prototype.getToken=function(C){return R(this,void 0,void 0,function(){var A,B,J,V,L,H,ie;return D(this,function(te){switch(te.label){case 0:A=this.startBackoff(),B=0,te.label=1;case 1:return te.trys.push([1,3,,8]),this.logger.info("[RegistrarClient] Asking for a new token"),[4,this.tokenProvider({needFresh:!0,supportedTokenTypes:b,wwwAuthenticateHeader:C,purpose:"registrar"})];case 2:return J=te.sent(),this.stopBackoff(A),[2,J];case 3:V=te.sent(),te.label=4;case 4:return te.trys.push([4,6,,7]),B++,L=JSON.stringify(V),B>this.maxRetriesForGetToken?(H="[RegistrarClient] getToken retry limit hit. Will not retry now. Error: ".concat(L),this.logger.error(H),this.stopBackoff(A),[2,Promise.reject(H)]):(this.logger.warn("[RegistrarClient] Retrying for a new token. Retry Count: ".concat(B," Error: ").concat(L)),[4,A.delay("Fetching a new token")]);case 5:return te.sent(),[3,8];case 6:throw ie=te.sent(),this.stopBackoff(A),ie;case 7:return[3,8];case 8:return[3,1];case 9:return[2]}})})},S.prototype.callRegistrar=function(C,A){var B,J,V;return R(this,void 0,void 0,function(){var L,H,ie,te,W,ue,_e,ke,xe,Ne,qe,Qe,O,w,j,Z;return D(this,function(q){switch(q.label){case 0:return L=this.startBackoff(),[4,this.tokenProvider({needFresh:!1,supportedTokenTypes:b,wwwAuthenticateHeader:void 0,purpose:"registrar"})];case 1:H=q.sent(),this.setTokenHeader(C,H),ie=new x.Timespan,te=0,q.label=2;case 2:W=void 0,q.label=3;case 3:return q.trys.push([3,10,15,16]),ue=C.clone(),[4,(0,x.fetchWithTimeout)(ue,this.options.requestTimeoutMs)];case 4:return W=q.sent(),W.status!==401?[3,8]:++te>this.maxRetriesForGetToken?(_e="[RegistrarClient] getSkypeToken retry limit hit. Will not retry now. Request '".concat(C.url,"' failed with ").concat(W.status," ").concat(W.statusText),this.logger.error(_e),this.stopBackoff(L),[2,Promise.reject(_e)]):(this.logger.warn("[RegistrarClient] Retry Count ".concat(te,". Request '").concat(C.url,"' failed with ").concat(W.status," ").concat(W.statusText)),ke=(J=(B=W.headers)===null||B===void 0?void 0:B.get("www-authenticate"))!==null&&J!==void 0?J:void 0,xe=this.setTokenHeader,Ne=[C],[4,this.getToken(ke)]);case 5:return xe.apply(this,Ne.concat([q.sent()])),te>1?[4,L.delay("Registrar call retry after 401")]:[3,7];case 6:q.sent(),q.label=7;case 7:return[3,22];case 8:if(W.status>=500&&W.status<600)throw new Error("Fetch for '".concat(C.url,"' failed with ").concat(W.status," ").concat(W.statusText));q.label=9;case 9:return[3,16];case 10:qe=q.sent(),this.logger.error("[RegistrarClient] Request failed with ".concat(qe)),q.label=11;case 11:return q.trys.push([11,13,,14]),[4,L.delay("Registrar call retry")];case 12:return q.sent(),[3,22];case 13:throw Qe=q.sent(),this.logger.error("[RegistrarClient] Request cancelled"),this.stopBackoff(L),Qe;case 14:return[3,16];case 15:return this.sendTelemetryEvent(A,C,W,ie),[7];case 16:return this.stopBackoff(L),W.ok?[2,W]:[3,17];case 17:O=void 0,q.label=18;case 18:return q.trys.push([18,20,,21]),j=(w=JSON).stringify,[4,W.json()];case 19:return O=j.apply(w,[q.sent()]),[3,21];case 20:return q.sent(),O="no details",[3,21];case 21:throw Z="Fetch for '".concat(C.url,"' failed with ").concat(W.status," ").concat(W.statusText," (").concat(O,", MS-CV: ").concat((V=W.headers)===null||V===void 0?void 0:V.get("MS-CV"),")"),this.logger.error("[RegistrarClient] ".concat(Z)),new Error(Z);case 22:return[3,2];case 23:return[2]}})})},S.prototype.setTokenHeader=function(C,A){switch(C.headers.delete("X-Skypetoken"),C.headers.delete("Authorization"),C.headers.delete("X-MS-Migration"),A.tokenType.toLowerCase()){case"skype":C.headers.set("X-Skypetoken",A.token);break;case"aad":case"cae":C.headers.set("Authorization","Bearer ".concat(A.token));break;default:throw new Error("unsupported token type: ".concat(A.tokenType))}this.options.usingLegacyTokenApi===!1&&C.headers.set("X-MS-Migration","True")},S.prototype.sendTelemetryEvent=function(C,A,B,J){if(this.eventLogger!==void 0){var V={name:C,properties:{url:{value:A.url},result_code:{value:B!==void 0?B.status:0},begin_timestamp:{value:J.startTime},elapsed:{value:J.duration}}};this.eventLogger.logEvent(V)}},S})();$.RegistrarClient=N,$.createRegistrarClient=Y}])})});E(F);var U=I(function(Oe,Te){(function(De,$){Oe.exports=$(F)})(y,function(De){return(function($){function M(P){if(Y[P])return Y[P].exports;var K=Y[P]={i:P,l:!1,exports:{}};return $[P].call(K.exports,K,K.exports,M),K.l=!0,K.exports}var Y={};return M.m=$,M.c=Y,M.i=function(P){return P},M.d=function(P,K,R){M.o(P,K)||Object.defineProperty(P,K,{configurable:!1,enumerable:!0,get:R})},M.n=function(P){var K=P&&P.__esModule?function(){return P.default}:function(){return P};return M.d(K,"a",K),K},M.o=function(P,K){return Object.prototype.hasOwnProperty.call(P,K)},M.p="",M(M.s=20)})([function($,M,Y){Object.defineProperty(M,"__esModule",{value:!0}),M.Logger=void 0;var P=(function(){function K(R,D){this.name=R,this.logger=D}return K.prototype.debug=function(R){this.logger.debug("[".concat(this.name,"] ").concat(R))},K.prototype.info=function(R){this.logger.info("[".concat(this.name,"] ").concat(R))},K.prototype.warn=function(R){this.logger.warn("[".concat(this.name,"] ").concat(R))},K.prototype.error=function(R){this.logger.error("[".concat(this.name,"] ").concat(R))},K})();M.Logger=P},function($,M,Y){Object.defineProperty(M,"__esModule",{value:!0}),M.USER_AUTHENTICATE_EVENT_NAME=M.SUPPORTED_TOKEN_TYPES=M.FAILED_MESSAGE_ACK=M.UNHANDLED_MESSAGE_ACK=M.HANDLED_MESSAGE_ACK=M.CLIENT_VERSION=M.constants=void 0,M.constants={TROUTER_INIT:"trouterinit",TROUTER_READY_EVENT:"trouterReadyEvent",TROUTER_READY_TIMEOUT:"trouterReadyTimeout",TROUTER_TOKEN_REQUEST:"trouterTokenRequest",TROUTER_TOKEN_GET_SUCCEEDED:"trouterTokenGetSucceeded",TROUTER_TOKEN_GET_FAILED:"trouterTokenGetFailed",TROUTER_RECONNECTING:"trouterReconnecting",RENEWAL:"renewal",NEW_CONNECTION:"newConnection",ENDPOINT_REGISTRATION_FAILED:"endpointRegistrationFailed"},M.CLIENT_VERSION="2024.14.01.55",M.HANDLED_MESSAGE_ACK=200,M.UNHANDLED_MESSAGE_ACK=404,M.FAILED_MESSAGE_ACK=500,M.SUPPORTED_TOKEN_TYPES=["skype","aad","cae"],M.USER_AUTHENTICATE_EVENT_NAME="user.authenticate"},function($,M,Y){Object.defineProperty(M,"__esModule",{value:!0}),M.TrouterState=M.UserActivityState=void 0;var P;(function(R){R[R.Unknown=0]="Unknown",R[R.Active=1]="Active",R[R.Inactive=2]="Inactive"})(P||(M.UserActivityState=P={}));var K;(function(R){R[R.Unknown=0]="Unknown",R[R.Connected=2]="Connected",R[R.Disconnected=3]="Disconnected",R[R.Switching=9]="Switching"})(K||(M.TrouterState=K={}))},function($,M,Y){function P(N){try{return JSON.stringify(N)}catch{return"Unable to serialize object of type ".concat(typeof N)}}function K(N){var S=Math.round(new Date().getTime()/1e3);return N!==void 0&&N>S?N-S:0}function R(N){return Math.round(new Date().getTime()/1e3)+N}function D(N,S){return x(this,void 0,void 0,function(){var C,A,B;return b(this,function(J){return A=new Promise(function(V,L){fetch(N).then(function(H){clearTimeout(C),V(H)}).catch(function(H){clearTimeout(C),L(H)})}),S!==0?(B=new Promise(function(V,L){var H=new URL(N.url),ie=new Error("".concat(N.method," ").concat(H.origin).concat(H.pathname," timed out"));C=setTimeout(L,S,ie)}),[2,Promise.race([A,B])]):[2,A]})})}var x=this&&this.__awaiter||function(N,S,C,A){function B(J){return J instanceof C?J:new C(function(V){V(J)})}return new(C||(C=Promise))(function(J,V){function L(te){try{ie(A.next(te))}catch(W){V(W)}}function H(te){try{ie(A.throw(te))}catch(W){V(W)}}function ie(te){te.done?J(te.value):B(te.value).then(L,H)}ie((A=A.apply(N,S||[])).next())})},b=this&&this.__generator||function(N,S){function C(ie){return function(te){return A([ie,te])}}function A(ie){if(B)throw new TypeError("Generator is already executing.");for(;L&&(L=0,ie[0]&&(H=0)),H;)try{if(B=1,J&&(V=2&ie[0]?J.return:ie[0]?J.throw||((V=J.return)&&V.call(J),0):J.next)&&!(V=V.call(J,ie[1])).done)return V;switch(J=0,V&&(ie=[2&ie[0],V.value]),ie[0]){case 0:case 1:V=ie;break;case 4:return H.label++,{value:ie[1],done:!1};case 5:H.label++,J=ie[1],ie=[0];continue;case 7:ie=H.ops.pop(),H.trys.pop();continue;default:if(V=H.trys,!(V=V.length>0&&V[V.length-1])&&(ie[0]===6||ie[0]===2)){H=0;continue}if(ie[0]===3&&(!V||ie[1]>V[0]&&ie[1]<V[3])){H.label=ie[1];break}if(ie[0]===6&&H.label<V[1]){H.label=V[1],V=ie;break}if(V&&H.label<V[2]){H.label=V[2],H.ops.push(ie);break}V[2]&&H.ops.pop(),H.trys.pop();continue}ie=S.call(N,H)}catch(te){ie=[6,te],J=0}finally{B=V=0}if(5&ie[0])throw ie[1];return{value:ie[0]?ie[1]:void 0,done:!0}}var B,J,V,L,H={label:0,sent:function(){if(1&V[0])throw V[1];return V[1]},trys:[],ops:[]};return L={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(L[Symbol.iterator]=function(){return this}),L};Object.defineProperty(M,"__esModule",{value:!0}),M.Timespan=M.CorrelationVector=M.fetchWithTimeout=M.calculateExpireTsInSec=M.calculateTtlInSec=M.toJson=void 0,M.toJson=P,M.calculateTtlInSec=K,M.calculateExpireTsInSec=R,M.fetchWithTimeout=D;var T=(function(){function N(S){this.base=S!==void 0?S:this.createCorrelationVectorBase(),this.extension=0}return N.extend=function(S){return new N(S)},N.prototype.increase=function(){this.extension++},N.prototype.value=function(){return"".concat(this.base,".").concat(this.extension)},N.prototype.createCorrelationVectorBase=function(){for(var S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0987654321/+",C="AQgw",A="",B=0;B<21;B++)A+=S.charAt(Math.floor(Math.random()*S.length));return A+=C.charAt(Math.floor(Math.random()*C.length))},N})();M.CorrelationVector=T;var k=(function(){function N(){this.start=Date.now()}return Object.defineProperty(N.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"startTime",{get:function(){return this.start},enumerable:!1,configurable:!0}),N.prototype.reset=function(){this.start=Date.now()},N})();M.Timespan=k},function($,M,Y){Object.defineProperty(M,"__esModule",{value:!0}),M.TrouterManagerState=M.UserActivityEventReason=M.ServerState=void 0;var P=Y(3),K=(function(){function x(b,T,k,N,S,C,A){this.connectionId=b,this.connectedClientId=T,this.domId=k,this.unsecureUrl=N,this.url=S,this.c2cUrlBase=C,this.expirationTsSec=A}return x.prototype.getRemainingTtlInSec=function(){return(0,P.calculateTtlInSec)(this.expirationTsSec)},x})();M.ServerState=K;var R;(function(x){x[x.Unknown=0]="Unknown",x[x.Modified=1]="Modified",x[x.Snapshot=2]="Snapshot",x[x.Connected=3]="Connected"})(R||(M.UserActivityEventReason=R={}));var D;(function(x){x[x.Unknown=0]="Unknown",x[x.Connected=2]="Connected",x[x.Disconnected=3]="Disconnected",x[x.Switching=9]="Switching",x[x.TerminalError=10]="TerminalError"})(D||(M.TrouterManagerState=D={}))},function($,M,Y){function P(S,C){return S==="skype"&&K(C?.scae)!=="1"?"v4a":"v4c"}function K(S){return typeof S=="string"?S:typeof S=="number"?S.toString():void 0}function R(S,C){return C?.kind==="v4c-websocket-failure"?"v4a":S}function D(S){return Object.prototype.hasOwnProperty.call(S,"connectparams")}function x(S,C){return C==="v4a"?S.replace(/\/v4\/c\b/,"/v4/a").replace("wss://","https://").replace("ws://","http://"):S.replace(/\/v4\/a\b/,"/v4/c").replace("https://","wss://").replace("http://","ws://")}function b(S){if(S!==void 0)return N(N({},S),{reconnectUrl:void 0,serviceUrl:void 0})}function T(S){return typeof S=="string"?parseInt(S,10):S}function k(S){if(S?.kind==="redirect"&&S.host!==void 0){var C=S.host;return C.endsWith("/")&&(C=C.substring(0,C.length-1)),C.endsWith("/v4/c")||C.endsWith("/v4/a")||(C+="/v4/c"),C}}var N=this&&this.__assign||function(){return N=Object.assign||function(S){for(var C,A=1,B=arguments.length;A<B;A++){C=arguments[A];for(var J in C)Object.prototype.hasOwnProperty.call(C,J)&&(S[J]=C[J])}return S},N.apply(this,arguments)};Object.defineProperty(M,"__esModule",{value:!0}),M.redirectUrlIfPresent=M.ensureNumber=M.reconnectParamsWithoutUrls=M.adaptUrl=M.isV4ConnectEvent=M.usedProtocolAfterFallback=M.usedProtocol=void 0,M.usedProtocol=P,M.usedProtocolAfterFallback=R,M.isV4ConnectEvent=D,M.adaptUrl=x,M.reconnectParamsWithoutUrls=b,M.ensureNumber=T,M.redirectUrlIfPresent=k},function($,M,Y){Object.defineProperty(M,"__esModule",{value:!0}),M.TrouterFsm=M.State=void 0;var P,K=Y(4),R=Y(0),D=Y(5);(function(T){T[T.Initial=0]="Initial",T[T.RetrievingToken=1]="RetrievingToken",T[T.Allocating=2]="Allocating",T[T.Handshaking=3]="Handshaking",T[T.Connecting=4]="Connecting",T[T.AnonymousConnecting=5]="AnonymousConnecting",T[T.WebsocketAuthenticating=6]="WebsocketAuthenticating",T[T.Connected=7]="Connected",T[T.Unregistering=8]="Unregistering",T[T.TerminalError=9]="TerminalError"})(P||(M.State=P={}));var x;(function(T){T[T.Initial=0]="Initial",T[T.Registering=1]="Registering",T[T.RegisteringButResendPending=2]="RegisteringButResendPending",T[T.Retrying=3]="Retrying",T[T.Registered=4]="Registered",T[T.RegistrationDisabled=5]="RegistrationDisabled"})(x||(x={}));var b=(function(){function T(k,N,S,C){this.worker=N,this.incallModeEnabled=S,this.protocolSelector=C,this.state=P.Initial,this.autoReconnect=!0,this.logger=new R.Logger("ConnectionFsm",k),this.registrationState=x.Initial}return T.prototype.getState=function(){return this.state},T.prototype.isActive=function(){return this.state===P.Allocating||this.state===P.Connected||this.state===P.Handshaking||this.state===P.Connecting||this.state===P.RetrievingToken||this.state===P.AnonymousConnecting||this.state===P.WebsocketAuthenticating},T.prototype.isConnecting=function(){return this.state===P.Allocating||this.state===P.Handshaking||this.state===P.Connecting||this.state===P.AnonymousConnecting},T.prototype.start=function(){return this.state===P.Initial?(this.setState(P.RetrievingToken),this.worker.getToken(!0,!1,void 0),!0):(this.showIgnored("start"),!1)},T.prototype.stop=function(k,N){k&&(this.registrationState=x.Initial),this.worker.isIncallMode()&&this.worker.exitIncallMode(),this.worker.resetTokenBackoff(),this.worker.cancelPendingRegistrationRequests(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearSentEventTimers(),this.worker.stopRegistrationTimer(),this.worker.stopSocketIo(),this.state===P.Connected&&this.worker.sendDisconnectTelemetryEvent("connection stopped"),this.registrationState!==x.Registered&&this.registrationState!==x.Registering&&this.registrationState!==x.RegisteringButResendPending||this.state===P.Unregistering?N?(this.setState(P.TerminalError),this.worker.dispatchTerminalError()):(this.setState(P.Initial),this.worker.dispatchDisconnected()):(this.registrationState=x.Initial,this.setState(P.Unregistering),this.worker.sendUnregisterRequest())},T.prototype.onTokenReceived=function(k,N,S){this.state===P.RetrievingToken?(0,D.usedProtocolAfterFallback)(this.protocolSelector(k.tokenType,S),N)==="v4c"?(this.setState(P.AnonymousConnecting),this.worker.startConnectionTimer(),this.worker.connectV4c(k,N)):(this.setState(P.Allocating),this.worker.startConnectionTimer(),this.worker.sendAllocateRequest(k)):this.showIgnored("onTokenReceived")},T.prototype.checkConnection=function(k){k&&this.onPingInterval()},T.prototype.onAllocationSucceed=function(k){return this.state===P.Allocating&&this.registrationState===x.Registered&&this.worker.dispatchUnregistered(),this.state===P.Allocating?(this.setState(P.Handshaking),this.registrationState=x.Initial,this.worker.startSocketIo(k),!0):(this.showIgnored("onAllocationSucceed"),!1)},T.prototype.onAllocationFailed=function(k,N){this.state===P.Allocating?this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!k,claimsChallenge:N}):this.showIgnored("onAllocationFailed")},T.prototype.onV4cException=function(){this.state!==P.AnonymousConnecting&&this.state!==P.WebsocketAuthenticating||(this.logger.error("v4c exception, falling back to longpoll"),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"v4c-websocket-failure"}}))},T.prototype.onConnectingTimeout=function(){this.state===P.Allocating||this.state===P.Connecting||this.state===P.Handshaking||this.state===P.AnonymousConnecting||this.state===P.WebsocketAuthenticating?this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0}):this.showIgnored("onConnectingTimeout")},T.prototype.onConnecting=function(){this.state===P.Handshaking?this.setState(P.Connecting):this.showIgnored("onConnecting")},T.prototype.onSocketConnect=function(k){this.state===P.AnonymousConnecting?(this.setState(P.WebsocketAuthenticating),this.worker.sendV4cAuthenticationEvent(k)):this.showIgnored("onSocketConnect")},T.prototype.onConnectingFailed=function(){this.state===P.Connecting?this.onConnectingTimeout():this.state===P.Handshaking?(this.logger.error("Unexpected error in Socket.io - no valid transports"),this.onConnectingTimeout()):this.state===P.AnonymousConnecting||this.state===P.WebsocketAuthenticating?(this.logger.info("/v4/c falling back to longpoll"),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"v4c-websocket-failure"}})):this.showIgnored("onConnectingFailed")},T.prototype.onSocketDisconnect=function(k){this.state===P.Handshaking||this.state===P.Connected||this.state===P.WebsocketAuthenticating?(this.state===P.Connected&&this.worker.sendDisconnectTelemetryEvent(k?.toTelemetryString()),this.state===P.WebsocketAuthenticating&&this.worker.countDisconnectBeforeConnectionEstablishment(),k?.reason==="skypetoken-deprecated"?(this.logger.error("Skypetoken deprecated response, not retrying any further"),this.onTerminalError()):this.cleanUpAndInitiateReconnect({backoff:this.state!==P.Connected&&k?.reason!=="dup",allowCachedToken:k?.reason!=="unauthorized",claimsChallenge:k?.claims})):this.showIgnored("onSocketDisconnect")},T.prototype.onTrouterConnected=function(){this.state===P.Connecting||this.state===P.WebsocketAuthenticating?(this.setState(P.Connected),this.worker.resetTokenBackoff(),this.worker.stopConnectionTimer(),this.worker.sendUserActivityState(K.UserActivityEventReason.Connected,!0),this.worker.startPingTimer(),this.worker.dispatchConnected(),this.worker.shouldSkipRegistration()?(this.registrationState=x.RegistrationDisabled,this.worker.dispatchRegistered()):(this.registrationState=x.Registering,this.worker.sendRegisterRequest())):this.showIgnored("onTrouterConnected")},T.prototype.onReconnectRequired=function(k,N,S){this.state===P.AnonymousConnecting||this.state===P.WebsocketAuthenticating?S===void 0||S.target!=="host"||S.url===void 0||S.url===""?(this.logger.error("unexpected reconnect arguments: ".concat(S?.target," ").concat(S?.url,", reconnecting without cache")),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"redirect-no-host"}})):this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"redirect",host:S.url}}):this.worker.dispatchReconnectIsRequired(k,N)},T.prototype.disableAutoReconnect=function(){this.autoReconnect=!1},T.prototype.onDownstreamRequest=function(k){this.state===P.Connected?(this.switchToIncallModeIfEnabled(),this.worker.dispatchDownstreamRequest(k)):this.showIgnored("onDownstreamRequest")},T.prototype.onTrouterMessageLost=function(k){this.state===P.Connected?this.worker.dispatchTrouterMessageLost(k):this.showIgnored("onTrouterMessageLost")},T.prototype.onPingInterval=function(){this.state===P.Connected?this.worker.sendPingRequest():this.showIgnored("onPingInterval")},T.prototype.onPingResponseTimeout=function(){this.onMissedResponse("onPingResponseTimeout")},T.prototype.onPingResponse=function(){this.state===P.Connected||this.showIgnored("onPingResponse")},T.prototype.onRegistrationFailed=function(){this.state===P.Connected&&this.registrationState===x.Registering?(this.worker.dispatchUnregistered(),this.registrationState=x.Retrying,this.worker.startRegistrationRetryTimer()):this.state===P.Connected&&this.registrationState===x.RegisteringButResendPending?(this.registrationState=x.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationFailed")},T.prototype.onRetryRegistration=function(){this.state===P.Connected&&this.registrationState===x.Retrying?(this.registrationState=x.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRetryRegistration")},T.prototype.onRegistrationSucceeded=function(){this.state===P.Connected&&this.registrationState===x.Registering?(this.registrationState=x.Registered,this.worker.dispatchRegistered(),this.worker.startRegistrationTimer()):this.state===P.Connected&&this.registrationState===x.RegisteringButResendPending?(this.registrationState=x.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationSucceeded")},T.prototype.onRegistrationNearExpiry=function(){this.state===P.Connected&&this.registrationState===x.Registered?(this.registrationState=x.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationNearExpiry")},T.prototype.onUnregistrationDone=function(){this.state===P.Unregistering?(this.setState(P.Initial),this.worker.dispatchUnregistered(),this.worker.dispatchDisconnected()):this.showIgnored("onUnregistrationDone")},T.prototype.onResendRegistration=function(){this.worker.dispatchUnregistered(),this.state===P.Connected&&this.registrationState===x.Registered?(this.registrationState=x.Registering,this.worker.stopRegistrationTimer(),this.worker.sendRegisterRequest()):this.state===P.Connected&&this.registrationState===x.Registering&&(this.registrationState=x.RegisteringButResendPending)},T.prototype.onIncallModeTimer=function(){this.worker.exitIncallMode(),this.state===P.Connected?(this.worker.stopPingTimer(),this.worker.startPingTimer()):this.showIgnored("onIncallModeTimer")},T.prototype.onSetNewUserActivityState=function(){this.worker.sendUserActivityState(K.UserActivityEventReason.Modified,this.state===P.Connected)},T.prototype.onActivityStateResponseTimeout=function(){this.onMissedResponse("onActivityStateResponseTimeout")},T.prototype.forceReconnect=function(k){this.state===P.Connected&&this.worker.sendDisconnectTelemetryEvent(k),this.worker.resetTokenBackoff(),this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0})},T.prototype.onTerminalError=function(){this.logger.error("Cannot proceed, reached terminal state. Switching from state '".concat(P[this.state],"' to ").concat(P[P.TerminalError])),this.stop(!0,!0),this.setState(P.TerminalError)},T.prototype.onMissedResponse=function(k){this.state===P.Connected?(this.worker.sendDisconnectTelemetryEvent(k),this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0})):this.showIgnored(k)},T.prototype.showIgnored=function(k){this.logger.debug("Ignoring event '".concat(k,"' in state '").concat(P[this.state],"'"))},T.prototype.setState=function(k){if(this.logger.info("Switching from state '".concat(P[this.state],"' to state '").concat(P[k],"'")),this.state===k)return void this.logger.error("Attempt to switch to the current state '".concat(P[k],"'"));this.state=k},T.prototype.switchToIncallModeIfEnabled=function(){this.incallModeEnabled&&(this.worker.isIncallMode()||(this.worker.enterIncallMode(),this.worker.stopPingTimer(),this.worker.startPingTimer()),this.worker.restartIncallModeTimer())},T.prototype.cleanUpAndInitiateReconnect=function(k){if(!this.autoReconnect)return this.logger.info("Automatic reconnect is disabled, stopping this connection"),void this.stop(!0);this.worker.cancelPendingRegistrationRequests(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearSentEventTimers(),this.worker.stopRegistrationTimer(),this.worker.stopSocketIo(),this.setState(P.RetrievingToken),this.worker.dispatchReconnecting(),this.worker.getToken(k.allowCachedToken,k.backoff,k.claimsChallenge,k.fallbackReason)},T})();M.TrouterFsm=b},function($,M,Y){function P(O,w){var j=w?void 0:{"X-MS-Migration":"True"};switch(O.tokenType.toLowerCase()){case"skype":return x({"X-Skypetoken":O.token},j);case"aad":case"cae":return x({Authorization:"Bearer ".concat(O.token)},j);default:throw new Error("unsupported token type: ".concat(O.tokenType))}}function K(O){return O!=null&&typeof O.toString=="function"?O.toString():"[".concat(typeof O,"]")}function R(O){return typeof O=="object"&&O!==null&&O.stack!==void 0?(0,S.toJson)(O.stack):'"(no error.stack)"'}function D(O){return typeof O=="object"&&O!==null&&typeof O.message=="string"?O.message:"(no error.message)"}var x=this&&this.__assign||function(){return x=Object.assign||function(O){for(var w,j=1,Z=arguments.length;j<Z;j++){w=arguments[j];for(var q in w)Object.prototype.hasOwnProperty.call(w,q)&&(O[q]=w[q])}return O},x.apply(this,arguments)},b=this&&this.__awaiter||function(O,w,j,Z){function q(se){return se instanceof j?se:new j(function(ye){ye(se)})}return new(j||(j=Promise))(function(se,ye){function Ie(ze){try{Ue(Z.next(ze))}catch(lt){ye(lt)}}function Me(ze){try{Ue(Z.throw(ze))}catch(lt){ye(lt)}}function Ue(ze){ze.done?se(ze.value):q(ze.value).then(Ie,Me)}Ue((Z=Z.apply(O,w||[])).next())})},T=this&&this.__generator||function(O,w){function j(Ue){return function(ze){return Z([Ue,ze])}}function Z(Ue){if(q)throw new TypeError("Generator is already executing.");for(;Ie&&(Ie=0,Ue[0]&&(Me=0)),Me;)try{if(q=1,se&&(ye=2&Ue[0]?se.return:Ue[0]?se.throw||((ye=se.return)&&ye.call(se),0):se.next)&&!(ye=ye.call(se,Ue[1])).done)return ye;switch(se=0,ye&&(Ue=[2&Ue[0],ye.value]),Ue[0]){case 0:case 1:ye=Ue;break;case 4:return Me.label++,{value:Ue[1],done:!1};case 5:Me.label++,se=Ue[1],Ue=[0];continue;case 7:Ue=Me.ops.pop(),Me.trys.pop();continue;default:if(ye=Me.trys,!(ye=ye.length>0&&ye[ye.length-1])&&(Ue[0]===6||Ue[0]===2)){Me=0;continue}if(Ue[0]===3&&(!ye||Ue[1]>ye[0]&&Ue[1]<ye[3])){Me.label=Ue[1];break}if(Ue[0]===6&&Me.label<ye[1]){Me.label=ye[1],ye=Ue;break}if(ye&&Me.label<ye[2]){Me.label=ye[2],Me.ops.push(Ue);break}ye[2]&&Me.ops.pop(),Me.trys.pop();continue}Ue=w.call(O,Me)}catch(ze){Ue=[6,ze],se=0}finally{q=ye=0}if(5&Ue[0])throw Ue[1];return{value:Ue[0]?Ue[1]:void 0,done:!0}}var q,se,ye,Ie,Me={label:0,sent:function(){if(1&ye[0])throw ye[1];return ye[1]},trys:[],ops:[]};return Ie={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(Ie[Symbol.iterator]=function(){return this}),Ie};Object.defineProperty(M,"__esModule",{value:!0}),M.TrouterConnection=M.ReconnectReason=void 0;var k,N=Y(21),S=Y(3),C=Y(15),A=Y(1),B=Y(16),J=Y(17),V=Y(2),L=Y(4),H=Y(0),ie=Y(5),te=Y(6),W=Y(12),ue=(function(){function O(){this.cv=A.CLIENT_VERSION,this.ua="",this.hr="",this.v=""}return O})(),_e=(function(){function O(){this["force new connection"]=!0,this.reconnect=!1,this.query="",this.ackTimeoutMs=5e3}return O.prototype.rewriteUrlForProxy=function(w){return w},O})(),ke="MS-CV",xe=(function(){function O(w,j){this.logger=j,this.cvCounter=0;var Z=JSON.parse(w);this.startTS=this.safeJsonNumber(Z,"startTS",0),this.url=this.safeJsonString(Z,"url",""),this.shortUrl=this.safeJsonString(Z,"shortUrl",""),this.body=this.safeJsonString(Z,"body",""),this.headers=this.safeJsonRecord(Z,"headers",{}),this.id=this.safeJsonNumber(Z,"id",-1),this.method=this.safeJsonString(Z,"method",""),this.replied=!1,this.timedout=!1,this.receivedCv=this.headers[ke],this.updateCvHeader()}return Object.defineProperty(O.prototype,"correlationVector",{get:function(){return this.receivedCv?"".concat(this.receivedCv,".").concat(this.cvCounter):""},enumerable:!1,configurable:!0}),O.prototype.on=function(w,j){w==="data"?this.dataCallback=j:w==="end"&&(typeof this.dataCallback=="function"&&this.dataCallback(this.body),j())},O.prototype.incrementCorrelationVector=function(){++this.cvCounter,this.updateCvHeader()},O.prototype.updateCvHeader=function(){var w=this.correlationVector;w&&(this.headers[ke]=w)},O.prototype.safeJsonNumber=function(w,j,Z){var q;if(w!=null&&Object.prototype.hasOwnProperty.call(w,j)){var se=w;if(typeof se[j]=="number")return se[j];if(typeof se[j]=="string")return parseFloat(se[j]);(q=this.logger)===null||q===void 0||q.warn("unexpected type of '".concat(j,"': ").concat(typeof se[j]))}return Z},O.prototype.safeJsonString=function(w,j,Z){var q;if(w!=null&&Object.prototype.hasOwnProperty.call(w,j)){var se=w;if(typeof se[j]=="string")return se[j];(q=this.logger)===null||q===void 0||q.warn("unexpected type of '".concat(j,"': ").concat(typeof se[j]))}return Z},O.prototype.safeJsonRecord=function(w,j,Z){var q;if(w!=null&&Object.prototype.hasOwnProperty.call(w,j)){var se=w;if(typeof se[j]=="object")return se[j];(q=this.logger)===null||q===void 0||q.warn("unexpected type of '".concat(j,"': ").concat(typeof se[j]))}return Z},O})(),Ne=(function(){function O(w,j,Z){this.request=w,this.responseData=j,this.sendResponse=Z}return O.prototype.writeHead=function(w,j){this.responseData.status=w,this.responseData.headers=j},O.prototype.write=function(w){this.responseData.body+=w},O.prototype.end=function(w){return w&&(this.responseData.body+=w),this.sendResponse(this.request,this.responseData)},O})(),qe=(function(){function O(w){this.name=w,this.args={},this.timeoutTimerId=0}return O})();(function(O){O[O.Configuration=0]="Configuration",O[O.ServerInitiated=1]="ServerInitiated"})(k||(M.ReconnectReason=k={}));var Qe=(function(){function O(w,j,Z,q,se,ye,Ie,Me){var Ue,ze=this;this.options=j,this.manager=Z,this.tokenProvider=q,this.usingLegacyTokenApi=se,this.protocolSelector=Ie,this.audienceSubscriptionState=Me,this.WEBSOCKET_TRANSPORT_NAME="websocket",this.XHR_POLLING_TRANSPORT_NAME="xhr-polling",this.AUDIENCE_SUBSCRIPTION_RESULT_ERROR="Error",this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED="Unsubscribed",this.AUDIENCE_SUBSCRIPTION_RESULT_TIMEOUT="Timeout",this.AUDIENCE_SUBSCRIPTION_RESULT_BAD_REQUEST="BadRequest",this.AUDIENCE_SUBSCRIPTION_STATE_QUERY_PARAM_REGEX=/&audienceSubscriptionState=[^&]*|^audienceSubscriptionState=[^&]*&?/,this.connectionId="",this.inIncallMode=!1,this.connectionAttempt=0,this.connectedClientId="",this.isNavigatorOnline=!0,this.onNavigatorOnlineStatusUpdateBound=this.onNavigatorOnlineStatusUpdate.bind(this),this.c2cUrlBase="",this.connectingErrorsInRow=0,this.unauthorizedErrorCount=0,this.pendingSentEventTimers={},this.lastDisconnectReason="",this.UNKNOWN_TRANSPORT="unknown_transport",this.connectingErrorsThreshold=3,this.pendingAudienceSubscription=void 0,this.logger=new H.Logger("Connection",w),this.timeoutOptions=this.options.timeoutOptions,this.tokenBackoff=new J.ExponentialBackoff(this.logger,this.timeoutOptions.maxBackoffMs),this.clientID=Date.now(),typeof window<"u"&&window.location&&(this.domId=window.location.hostname);var lt=new ue;lt.cv=A.CLIENT_VERSION,lt.ua="",!((Ue=this.options)===null||Ue===void 0)&&Ue.clientInfo&&(lt.ua=this.safeString(this.options.clientInfo.ua),lt.v=this.safeString(this.options.clientInfo.v)),this.clientInfo=lt,this.connectionTracker=new C.ConnectionTracker(w,this.clientID,this.clientInfo,function(){return ze.getServerState()},this.options.endpointId,this.options.clientCorrelationID,this.options.environment),this.applyConnectionTrackerOptions(j);var Rt=this.options.incallModeTimeoutMs>0;if(this.fsm=new te.TrouterFsm(w,this,Rt,this.protocolSelector),j.registration){var It={registrarUrl:j.registration.registrarUrl,proxyUrlRewrite:j.rewriteUrlForProxy,registrationId:j.registration.registrationId,requestTimeoutMs:j.timeoutOptions.fetchTimeoutMs,initialRetryDelayMs:1e3,maxRetryDelayMs:j.timeoutOptions.maxBackoffMs,usingLegacyTokenApi:this.usingLegacyTokenApi,maxRetriesForGetToken:j.retryLimitOnTokenFetch,extraRegistrationHeaders:j.extraConnectionHeaders};this.registrarClient=(0,N.createRegistrarClient)(w,this.tokenProvider,It)}this.userActivityState=ye}return O.prototype.start=function(w){this.logger.info("Starting"),this.reconnectParams=w,typeof window<"u"&&window.navigator&&window.addEventListener?(this.isNavigatorOnline=window.navigator.onLine,window.addEventListener("online",this.onNavigatorOnlineStatusUpdateBound),window.addEventListener("offline",this.onNavigatorOnlineStatusUpdateBound),this.logger.debug("Registered for browser online notifications - current state: ".concat(this.isNavigatorOnline))):this.isNavigatorOnline=!0,this.fsm.start()},O.prototype.stop=function(w){this.logger.info("Stopping"),typeof window<"u"&&window.navigator&&(window.removeEventListener("online",this.onNavigatorOnlineStatusUpdateBound),window.removeEventListener("offline",this.onNavigatorOnlineStatusUpdateBound)),this.fsm.stop(w),this.connectionTracker.close()},O.prototype.configure=function(w){var j=this.options.trouterUrl!==w.trouterUrl;this.options=w,this.applyConnectionTrackerOptions(w),j&&(this.logger.info("Configuration changed. Reconnection required."),this.fsm.onReconnectRequired(!1,k.Configuration))},O.prototype.checkConnection=function(w){this.logger.info("checkConnection called with ".concat(w)),this.fsm.checkConnection(w),w&&this.connectionTracker.sendTelemetry(C.ClientEventName.CheckConnection,{disconnectDetected:w},[])},O.prototype.disableRegistrationsAndAutoReconnect=function(){this.stopRegistrationTimer(),this.cancelPendingRegistrationRequests(),this.fsm.disableAutoReconnect()},O.prototype.getServerState=function(){return new L.ServerState(this.connectionId,this.connectedClientId,this.domId?this.domId:"",this.allocateResult?this.allocateResult.url:"",this.allocateResult?this.allocateResult.surl:"",this.c2cUrlBase,this.connectionExpireTimestampInSecs)},O.prototype.getState=function(){return this.fsm.getState()},O.prototype.getToken=function(w,j,Z,q,se){var ye=this;se===void 0&&(se=0),this.logger.info("Getting token ".concat(j?"with backoff":"without backoff"));var Ie=function(){ye.connectionTracker.trackStart("token");var Me={needFresh:!w,wwwAuthenticateHeader:Z,supportedTokenTypes:A.SUPPORTED_TOKEN_TYPES,purpose:"trouter"};ye.logger.info("Requesting token: needFresh=".concat(Me.needFresh," ")+"types=[".concat(A.SUPPORTED_TOKEN_TYPES,"], ")+"wwwAuthenticateHeader is ".concat(Me.wwwAuthenticateHeader?"non empty":"empty")),ye.tokenProvider(Me).then(function(Ue){ye.logger.debug("".concat(Ue.tokenType," token is received")),ye.connectionTracker.trackEnd("token"),ye.fsm.onTokenReceived(Ue,q,ye.reconnectParams)}).catch(function(Ue){var ze=(0,S.toJson)(Ue.stack);if(ye.logger.error("Getting token failed, will retry after timeout. Error: ".concat(ze)),ye.connectionTracker.trackError("token",ze),!ye.canRetryTokenFetchRequest(se+ye.unauthorizedErrorCount))return ye.connectionTracker.trackError("token","getToken retry limit hit, reached terminal error state"),ye.resetTokenBackoff(),void ye.fsm.onTerminalError();ye.getToken(w,!0,Z,q,se+1)})};j?this.tokenBackoff.backoff("getting token",Ie):(this.resetTokenBackoff(),Ie())},O.prototype.startConnectionTimer=function(){var w=this;this.stopConnectionTimer(),this.logger.debug("Starting connection timeout for ".concat(this.timeoutOptions.connectionTimeoutMs," ms")),this.connectionTimeoutId=setTimeout(function(){w.logger.info("Connection timeout is fired"),w.fsm.onConnectingTimeout()},this.timeoutOptions.connectionTimeoutMs)},O.prototype.stopConnectionTimer=function(){this.connectionTimeoutId&&(this.logger.debug("Stopping connection timeout"),clearTimeout(this.connectionTimeoutId),this.connectionTimeoutId=void 0)},O.prototype.startPingTimer=function(){var w=this;this.transportTypeName==="websocket"?(this.logger.debug("Starting ping timeout for ".concat(this.timeoutOptions.pingTimeoutMs," ms")),this.pingTimerId=setInterval(function(){w.logger.info("Ping interval fired"),w.fsm.onPingInterval()},this.timeoutOptions.pingTimeoutMs)):this.logger.debug("Not starting ping for transport ".concat(this.transportTypeName))},O.prototype.stopPingTimer=function(){this.pingTimerId&&(this.logger.debug("Stopping ping timeout"),this.clearPingResponseTimer(),clearInterval(this.pingTimerId),this.pingTimerId=void 0)},O.prototype.shouldSkipRegistration=function(){return this.options.registration===void 0},O.prototype.hasCustomRegistrationTtl=function(){var w,j;return((w=this.options.registration)===null||w===void 0?void 0:w.registrarTtlSec)!==void 0&&((j=this.options.registration)===null||j===void 0?void 0:j.registrarTtlSec)!==0},O.prototype.startRegistrationTimer=function(){var w=this;this.stopRegistrationTimer();var j=this.getRegistrationTtl(),Z=j[0],q=j[1];if(Z<=30||!q)return this.logger.debug("Starting registration expiration timer (TTL ".concat(Z," sec)")),void(this.registrationTimerId=setTimeout(function(){w.registrationTimerId=void 0,w.logger.warn("Registration expired but the connection is still alive. Should never happen"),w.dispatchUnregistered()},1e3*Z));var se=Z-30;this.logger.debug("Starting registration extension timer for ".concat(se," sec")),this.registrationTimerId=setTimeout(function(){w.logger.info("Registration extension timer fired"),w.registrationTimerId=setTimeout(function(){w.registrationTimerId=void 0,w.logger.debug("Registration extension did not happen in time"),w.dispatchUnregistered()},3e4),w.fsm.onRegistrationNearExpiry()},1e3*se)},O.prototype.startRegistrationRetryTimer=function(){var w=this;this.stopRegistrationTimer(),this.registrationTimerId=setTimeout(function(){w.registrationTimerId=void 0,w.fsm.onRetryRegistration()},123e3)},O.prototype.stopRegistrationTimer=function(){this.registrationTimerId&&(this.logger.debug("Stopping registration timeout"),clearTimeout(this.registrationTimerId),this.registrationTimerId=void 0)},O.prototype.resendRegistration=function(){if(!this.registrarClient)throw new Error("Trouter Client not configured to handle registrations");return this.fsm.onResendRegistration(),Promise.resolve()},O.prototype.buildSocketIoUrlParams=function(w,j){if(!this.allocateResult)throw new Error("Allocate result is undefined in buildSocketIoUrlParams()");for(var Z={},q=this.allocateResult.connectparams,se=0,ye=Object.keys(q);se<ye.length;se++){var Ie=ye[se];if(q[Ie]!==void 0){var Me=q[Ie];typeof Me=="string"||typeof Me=="number"?Z[Ie]=Me:this.logger.error("signatureData[".concat(Ie,"] has unsupported type ").concat(typeof Me))}}return Z.v="v4",Z.tc=encodeURI((0,S.toJson)(this.clientInfo)),Z.timeout=this.timeoutOptions.pingTimeoutMs/1e3,Z.auth="true",this.options.endpointId&&(Z.epid=this.options.endpointId),w&&(Z.userActivity=encodeURI((0,S.toJson)(w))),j&&(Z.audienceSubscriptionState=encodeURIComponent((0,S.toJson)(j))),this.appendConnectedClientIds(this.buildQuery(Z),!0)},O.prototype.startSocketIo=function(w){var j,Z;if(this.logger.debug("Starting socket io"),this.connectionTracker.trackStart("connectSocket"),!this.allocateResult)throw new Error("Allocate result is undefined in startSocketIo()");var q=this.options.ioOptions?x({},this.options.ioOptions):new _e,se=this.userActivityState.state!==V.UserActivityState.Unknown?this.userActivityState.increaseCvAndGetEventObject():void 0,ye=(j=this.audienceSubscriptionState)===null||j===void 0?void 0:j.increaseCvAndGetEventObject();if(q["force new connection"]=!0,q.reconnect=!1,q.rewriteUrlForProxy=this.options.rewriteUrlForProxy,q.requestHeaders=x(x({},this.options.extraConnectionHeaders),P(w,this.usingLegacyTokenApi)),q.query=this.buildSocketIoUrlParams(se,ye),this.logger.info("connecting to ".concat(this.allocateResult.socketio,"?").concat(q.query)),this.stopSocketIo(),this.socket=((Z=this.options.io)!==null&&Z!==void 0?Z:W).connect(this.allocateResult.socketio,q),this.socket===void 0)throw new Error("Can't create Socket.io object");this.attachSocketIoHandlers(this.socket,w,se,ye)},O.prototype.stopSocketIo=function(){if(this.socket){this.logger.debug("clearing socket.io");try{for(var w=0,j=["connecting","connect","connect_failed","close_during_connecting","disconnect","reconnect","reconnect_failed","reconnecting","error","message","trouter.connected","trouter.reconnect","trouter.message_loss"];w<j.length;w++){var Z=j[w];this.socket.removeAllListeners(Z)}this.socket.disconnect(),this.logger.debug("cleared socket"),this.socket=void 0}catch(q){this.logger.error("exception in disconnecting previous socket. Error: ".concat(R(q)))}}},O.prototype.dispatchConnected=function(){this.logger.info("dispatching connected"),this.manager.onConnected(this)},O.prototype.dispatchRegistered=function(){this.logger.info("dispatching registered"),this.manager.onRegistered(this)},O.prototype.dispatchUnregistered=function(){this.logger.info("dispatching unregistered"),this.manager.onUnregistered(this)},O.prototype.dispatchDownstreamRequest=function(w){var j=this;this.logger.debug("dispatching downstream request");try{var Z=new Ne(w,new C.ResponseData(w.id),function(q,se){return j.logger.debug("sending response to downstream"),j.sendResponse(q,se)});this.manager.onDownstreamRequest(this,w,Z)}catch(q){this.logger.error("exception in socket.on message. Error : ".concat(R(q)))}},O.prototype.dispatchReconnecting=function(){this.logger.info("dispatching reconnecting"),this.manager.onReconnecting(this)},O.prototype.dispatchReconnectIsRequired=function(w,j){this.logger.info("dispatching reconnect is required by server"),this.manager.onReconnectIsRequired(this,w,j)},O.prototype.dispatchDisconnected=function(){this.logger.info("dispatching disconnected"),this.manager.onDisconnected(this)},O.prototype.dispatchTerminalError=function(){this.logger.info("dispatching terminal error"),this.manager.onTerminalError(this)},O.prototype.dispatchTrouterMessageLost=function(w){this.logger.info("dispatching trouter message lost"),this.manager.onTrouterMessageLost(w)},O.prototype.countDisconnectBeforeConnectionEstablishment=function(){this.logger.warn("counting disconnect before connection was fully established as a connection failure"),++this.connectingErrorsInRow>=this.connectingErrorsThreshold&&this.resetReconnectParamsOnErrorThreshold()},O.prototype.sendProcessedDroppedIndicators=function(w){var j=this;try{this.logger.debug("emitting processed flow tags to the server");var Z=new qe("trouter.processed_message_loss");Z.args={droppedIndicators:w},this.sendDownstreamEvent(Z,function(){j.logger.info("emitted processed flow tags to the server")})}catch(se){var q=R(se);this.logger.error("unable to send processed message loss event. Error: ".concat(q)),this.connectionTracker.trackError("trouter.processed_message_loss",q,!1)}},O.prototype.sendAllocateRequest=function(w){var j=this;this.connectionAttempt++,this.connectionTracker.trackNewConnection();var Z,q=this.options.trouterUrl,se=this.reconnectParams,ye=typeof se?.se=="string"?parseInt(se.se,10):typeof se?.se=="number"?se.se:void 0;ye&&ye<=Date.now()+36e5&&(this.logger.warn("Dropping expired cached connection parameters: ".concat(new Date(ye))),this.reconnectParams=se=void 0),se&&se.serviceUrl!==q&&(this.logger.warn("Dropping cached connection parameters for a different environment (".concat(se.serviceUrl,", now ").concat(q,")")),this.reconnectParams=se=void 0),se?.reconnectUrl&&(q=se.reconnectUrl),Z=se?x(x({},se),{serviceUrl:void 0,reconnectUrl:void 0}):null,q=(0,ie.adaptUrl)(q,"v4a"),q=this.appendCorrelationIds(q,!1),q=this.appendEndpointId(q,!1),Z&&(q+="&".concat(this.buildQuery(Z)),Z.v||(q+="&v=".concat("v4"))),q=this.options.rewriteUrlForProxy(q);var Ie=new Request(q,{method:"POST",mode:"cors",headers:new Headers(x(x({"Content-Type":"text/plain"},this.options.extraConnectionHeaders),P(w,this.usingLegacyTokenApi)))});this.logger.info("sendAllocateRequest: POST ".concat(q)),this.connectionTracker.trackStart("allocation");var Me,Ue=Date.now(),ze=-1,lt=!1;(0,S.fetchWithTimeout)(Ie,this.timeoutOptions.fetchTimeoutMs).then(function(Rt){var It;if(ze=Rt.status,!Rt.ok)throw Me=(It=Rt.headers.get("www-authenticate"))!==null&&It!==void 0?It:void 0,lt=Rt.headers.get("x-trouter-skypetoken-deprecated")==="1",j.logger.warn("Allocation request got response status ".concat(Rt.status,", www-authenticate header was ").concat(Me?"not empty":"empty")),new Error(Rt.statusText);var Yt=Rt.headers.get("content-type");if(!Yt||Yt!=="application/json"&&!Yt.startsWith("application/json;"))throw new Error("Content-type '".concat(Yt,"' is unexpected"));return j.connectionTracker.trackEnd("allocation"),Rt.json()}).then(function(Rt){j.unauthorizedErrorCount=0,j.onAllocationResponse(Rt,w)}).catch(function(Rt){j.connectingErrorsInRow++;var It="".concat(Rt).concat(ze>=0?", status code ".concat(ze):"");if(j.logger.error("".concat(j.connectingErrorsInRow," failed connecting attempt(s) in a row. ").concat(It)),j.connectionTracker.trackError("allocation",It),lt){var Yt="Skypetoken deprecated response, not retrying any further";return j.logger.error(Yt),j.connectionTracker.trackError("allocation",Yt),void j.fsm.onTerminalError()}if(ze===401&&j.unauthorizedErrorCount++,!j.canRetryTokenFetchRequest(j.unauthorizedErrorCount)){var Yt="getToken retry limit hit, reached terminal error state";return j.connectionTracker.trackError("allocation",Yt),void j.fsm.onTerminalError()}if(ze!==-1||j.isNavigatorOnline){if(j.reconnectParams&&j.connectingErrorsInRow>=j.connectingErrorsThreshold){if(ze>=400&&ze<=599)j.resetReconnectParamsOnErrorThreshold();else if(j.reconnectParams.reconnectUrl&&j.connectingErrorsInRow%3==0){j.logger.warn("".concat(j.connectingErrorsInRow," connection attempts, testing nominal service URL"));var _i=Math.min(j.timeoutOptions.connectionTimeoutMs-(Date.now()-Ue)-500,j.timeoutOptions.fetchTimeoutMs);return void j.testNominalUrlConnectivity(_i).then(function(Wr){j.connectionTracker.trackProgress("nomcheck",Wr?"ok":"failed"),Wr?(j.logger.warn("Nominal service URL is reachable, erasing cached reconnect URL"),j.reconnectParams&&delete j.reconnectParams.reconnectUrl):j.logger.warn("Nominal service URL is not reachable either, keeping cached reconnect URL"),j.fsm.onAllocationFailed(!1,void 0)},function(){j.fsm.onAllocationFailed(!1,void 0)})}}}else j.logger.info("Expected failure, the browser says it is not online at the moment");j.fsm.onAllocationFailed(ze===401,Me)})},O.prototype.testNominalUrlConnectivity=function(w){var j=this;if(w<1e3)return this.logger.warn("There is no time left to reasonably perform the nominal service URL connectivity check (".concat(w," ms), falling back to assuming that the connectivity is fine")),Promise.resolve(!0);var Z;try{var q=new URL(this.options.trouterUrl);q.pathname="/",q.search="?"+this.buildQuery({check:Date.now(),cor_id:encodeURIComponent(this.options.clientCorrelationID),epid:encodeURIComponent(this.options.endpointId?this.options.endpointId:""),tc:encodeURIComponent((0,S.toJson)(this.clientInfo))}),Z=new Request(this.options.rewriteUrlForProxy(q.toString()),{method:"GET",headers:{Accept:"text/plain"}})}catch(se){return this.logger.warn("Nominal service URL connectivity test request could not be created (".concat(se,"), falling back to assuming that the connectivity is fine")),Promise.resolve(!0)}return(0,S.fetchWithTimeout)(Z,w).then(function(se){if(se.status!==200)throw new Error("Not 200 OK: ".concat(se.status," ").concat(se.statusText));return se.text()}).then(function(se){if(se!=="Trouter")throw new Error('Not "Trouter": '.concat(se.substring(0,16)).concat(se.length>16?"...":""));return!0}).catch(function(se){return j.logger.error("Nominal service URL connectivity test failed: ".concat(se)),!1})},O.prototype.sendPingRequest=function(){var w=this;if(this.socket&&this.pingResponseTimerId===void 0)try{this.logger.debug("emitting ping event");var j=!1;this.socket.emit("ping",function(){j!==!0&&w.onPingResponse()}),this.pingResponseTimerId=setTimeout(function(){w.logger.error("Ping response timeout is fired"),j=!0,w.clearPingResponseTimer(),w.fsm.onPingResponseTimeout()},this.timeoutOptions.pongTimeoutMs)}catch(q){var Z=R(q);this.logger.error("unable to send ping. Error: ".concat(Z)),this.connectionTracker.trackError("ping",Z,!1)}},O.prototype.connectV4c=function(w,j){var Z,q,se,ye,Ie,Me,Ue=this.options.ioOptions?x({},this.options.ioOptions):new _e;Ue["force new connection"]=!0,Ue.reconnect=!1,!((Z=this.reconnectParams)===null||Z===void 0)&&Z.serviceUrl&&(0,ie.adaptUrl)(this.reconnectParams.serviceUrl,"v4c")!==(0,ie.adaptUrl)(this.options.trouterUrl,"v4c")&&(this.logger.warn("Dropping cached connection parameters for a different environment (".concat(this.reconnectParams.serviceUrl,", now ").concat(this.options.trouterUrl,")")),this.reconnectParams=void 0);var ze=(ye=(q=(0,ie.redirectUrlIfPresent)(j))!==null&&q!==void 0?q:j?.kind!=="redirect-no-host"?(se=this.reconnectParams)===null||se===void 0?void 0:se.reconnectUrl:void 0)!==null&&ye!==void 0?ye:this.options.trouterUrl,lt=(0,ie.adaptUrl)(ze,"v4c");Ue["skipped handshake data"]={timeout:70,websocketUrl:lt},Ue.query=this.buildV4cUrlParams(),Ue.rewriteUrlForProxy=this.options.rewriteUrlForProxy;try{if(this.stopSocketIo(),this.transportTypeName="websocket",this.socket=((Ie=this.options.io)!==null&&Ie!==void 0?Ie:W).connect(this.options.trouterUrl,Ue),this.socket===void 0)throw new Error("failed to create Socket.io object");var Rt=(Me=this.audienceSubscriptionState)===null||Me===void 0?void 0:Me.increaseCvAndGetEventObject();this.attachSocketIoHandlers(this.socket,w,void 0,Rt)}catch(It){this.logger.error("".concat(It)),this.connectionTracker.trackError("v4c","".concat(It)),this.fsm.onV4cException()}},O.prototype.sendV4cAuthenticationEvent=function(w){var j,Z={headers:x(x({},this.options.extraConnectionHeaders),P(w,this.usingLegacyTokenApi)),connectparams:(0,ie.reconnectParamsWithoutUrls)(this.reconnectParams)};(j=this.socket)===null||j===void 0||j.emit(A.USER_AUTHENTICATE_EVENT_NAME,Z)},O.prototype.setUserActivityState=function(w){var j=w.state!==this.userActivityState.state;this.userActivityState=w,j?(this.logger.info("Changing user activity state to '".concat(w.toEventJSON(),"'")),this.fsm.onSetNewUserActivityState()):(this.logger.debug("Not changing the same user activity state '".concat(w.toEventJSON(),"'")),this.manager.onUserActivityStateAccepted(w.correlationVector.value()))},O.prototype.sendUserActivityState=function(w,j){this.userActivityState.state!==V.UserActivityState.Unknown&&(this.transportTypeName==="websocket"&&j?w===L.UserActivityEventReason.Connected?this.sendUserActivityStateMultiple(2):this.sendUserActivityStateMultiple(1):this.transportTypeName==="xhr-polling"&&w===L.UserActivityEventReason.Modified&&this.fsm.forceReconnect("user activity/force reconnect"))},O.prototype.setAudienceSubscriptionsAsync=function(w,j){var Z=this.audienceSubscriptionState;if(this.audienceSubscriptionState=w,this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME)return this.setAudienceSubscriptionsInternalAsync(w.increaseCvAndGetEventObject(),j);if(this.transportTypeName===this.XHR_POLLING_TRANSPORT_NAME){var q=this.setAudienceSubscriptionsLongpollInternalAsync(w.increaseCvAndGetEventObject(),j,Z);return this.fsm.forceReconnect("set audience subscription force reconnect"),q}throw new Error("set audience subscription executed on an unknown transport")},O.prototype.setAudienceSubscriptionsUnsafeAsync=function(w){if(w)return this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME?this.setAudienceSubscriptionsInternalAsync(w,15e3):void 0},O.prototype.setAudienceSubscriptionsInternalAsync=function(w,j){return b(this,void 0,void 0,function(){var Z,q,se=this;return T(this,function(ye){switch(ye.label){case 0:return this.logger.info("[WebSocket] Audience subscription set requested."),Z=new qe("audience.subscribe"),Z.args=w,[4,new Promise(function(Ie){var Me=!1,Ue=setTimeout(function(){return Me=!0,Ie(se.buildAudienceSubscriptionsTimeoutResponse(w))},j);se.sendDownstreamEvent(Z,function(ze,lt){Me||(clearTimeout(Ue),se.logger.debug("[Websocket] Audience subscription response: ".concat(lt)),se.pendingAudienceSubscription&&se.onAudienceSubscriptionResult(lt),Ie(lt))})})];case 1:return q=ye.sent(),this.manager.onAudiencesSetResolved(q,w.cv),[2,q]}})})},O.prototype.setAudienceSubscriptionsLongpollInternalAsync=function(w,j,Z){var q;return b(this,void 0,void 0,function(){var se,ye,Ie,Me,Ue,ze,lt=this;return T(this,function(Rt){switch(Rt.label){case 0:return this.logger.info("[XHR Polling] Audience subscription set requested."),this.pendingAudienceSubscription&&(this.logger.error("Racing audience subscriptions occured. This situation resolves into undefined scenario and/or nasal demons."),clearTimeout(this.pendingAudienceSubscription.timeoutId)),w.audiences.length===0?[2,this.handleAudienceUnsubscribeLongpoll(w.cv,Z)]:[4,new Promise(function(It){var Yt=setTimeout(function(){return lt.pendingAudienceSubscription=void 0,It(lt.buildAudienceSubscriptionsTimeoutResponse(w))},j);lt.pendingAudienceSubscription={audienceSetResolve:It,timeoutId:Yt}})];case 1:return se=Rt.sent(),this.manager.getState()===V.TrouterState.Unknown||this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME?[2,se]:(ye=se.responses[0],ye?.result.audienceSubscriptionState===this.AUDIENCE_SUBSCRIPTION_RESULT_BAD_REQUEST?(this.clearAudienceSubscriptionStateQueryParam(),this.manager.onAudiencesSetResolved(se,w.cv),[2,se]):(Ie=se.responses.find(function(It){return It.audienceId===w.audiences[0].id}),Ie?.result.audienceSubscriptionState===this.AUDIENCE_SUBSCRIPTION_RESULT_ERROR?(this.clearAudienceSubscriptionStateQueryParam(),this.manager.onAudiencesSetResolved(se,w.cv),[2,se]):(Me=((q=Z?.audienceSubscriptionModel.audienceSubscriptions[0])===null||q===void 0?void 0:q.id)!==ye?.audienceId,Z&&Me&&(Ue=this.mapToSyntheticAudienceSubscriptionResponses(Z.audienceSubscriptionModel.audienceSubscriptions,this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED,200),(ze=se.responses).push.apply(ze,Ue)),this.manager.onAudiencesSetResolved(se,w.cv),[2,se])))}})})},O.prototype.clearAudienceSubscriptionStateQueryParam=function(){var w,j,Z;!((Z=(j=(w=this.socket)===null||w===void 0?void 0:w.socket)===null||j===void 0?void 0:j.options)===null||Z===void 0)&&Z.query&&(this.socket.socket.options.query=this.socket.socket.options.query.replace(this.AUDIENCE_SUBSCRIPTION_STATE_QUERY_PARAM_REGEX,""))},O.prototype.handleAudienceUnsubscribeLongpoll=function(w,j){var Z;this.audienceSubscriptionState=void 0;var q={responses:[]};if(j){var se=this.mapToSyntheticAudienceSubscriptionResponses(j.audienceSubscriptionModel.audienceSubscriptions,this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED,200);(Z=q.responses).push.apply(Z,se)}return this.manager.onAudiencesSetResolved(q,w),q},O.prototype.buildAudienceSubscriptionsTimeoutResponse=function(w){return this.logger.error("Audience subscription attempt has timed out."),{responses:this.mapToSyntheticAudienceSubscriptionResponses(w.audiences,this.AUDIENCE_SUBSCRIPTION_RESULT_TIMEOUT)}},O.prototype.mapToSyntheticAudienceSubscriptionResponses=function(w,j,Z){return w.map(function(q){return{audienceId:q.id,result:{audienceSubscriptionState:j,responseStatus:Z}}})},O.prototype.expediteBackoff=function(){this.tokenBackoff.expediteIfPending()},O.prototype.sendRegisterRequest=function(){var w=this;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");if(!this.allocateResult)throw new Error("Allocate result is undefined in sendRegisterRequest()");this.logger.info("sending register request");var j=new S.Timespan;this.connectionTracker.trackStart("registration");var Z=this.getRegistrationTtl()[0];this.registrarClient.register({appId:this.options.registration.pnhAppId,aesKey:"",languageId:"en-US",platform:this.options.registration.platform,templateKey:this.options.registration.pnhTemplateKey,platformUIVersion:this.options.registration.platformUIVersion,productContext:this.options.registration.productContext},{TROUTER:[{context:this.options.registration.context,path:this.allocateResult.surl,ttl:Z}]}).then(function(){w.logger.info("Register request successful"),w.connectionTracker.trackEnd("registration"),w.fsm.onRegistrationSucceeded(),w.connectionTracker.sendTelemetry(C.ClientEventName.Registration,{duration:j.duration},[])}).catch(function(q){w.logger.error("Register request failed. Error: ".concat(q)),w.connectionTracker.trackError("registration",D(q)),w.fsm.onRegistrationFailed(),w.connectionTracker.sendTelemetry(C.ClientEventName.Registration,{duration:j.duration},[])})},O.prototype.sendUnregisterRequest=function(){var w=this;this.logger.info("sending unregister request");var j=new S.Timespan;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");this.connectionTracker.trackStart("unregistration"),this.registrarClient.unregister().then(function(){w.logger.info("Unregister request successful"),w.connectionTracker.trackEnd("unregistration"),w.fsm.onUnregistrationDone(),w.connectionTracker.sendTelemetry(C.ClientEventName.Unregistration,{duration:j.duration},[])}).catch(function(Z){w.logger.error("Unregister request failed. Error: ".concat(Z)),w.connectionTracker.trackError("unregistration",D(Z)),w.fsm.onUnregistrationDone(),w.connectionTracker.sendTelemetry(C.ClientEventName.Unregistration,{duration:j.duration},[])})},O.prototype.resetTokenBackoff=function(){this.tokenBackoff.reset()},O.prototype.cancelPendingRegistrationRequests=function(){this.registrarClient&&this.registrarClient.cancelPendingRequests()},O.prototype.clearSentEventTimers=function(){var w=Object.keys(this.pendingSentEventTimers);if(w.length>0){this.logger.debug("Clearing all pending downstream events related timers");for(var j=0,Z=w;j<Z.length;j++){var q=Z[j];this.clearSentEventTimer(Number(q))}}},O.prototype.restartIncallModeTimer=function(){var w=this;this.clearIncallModeTimerId(),this.logger.debug("Restarting incall mode timer"),this.incallModeTimerId=setTimeout(function(){w.logger.info("Call mode timer fired"),w.fsm.onIncallModeTimer()},this.options.incallModeTimeoutMs)},O.prototype.enterIncallMode=function(){this.logger.info("Entering incall mode"),this.timeoutOptions=this.options.incallTimeoutOptions,this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!0},O.prototype.exitIncallMode=function(){this.logger.info("Exiting incall mode"),this.clearIncallModeTimerId(),this.timeoutOptions=this.options.timeoutOptions,this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!1},O.prototype.isIncallMode=function(){return this.inIncallMode},O.prototype.sendDisconnectTelemetryEvent=function(w){var j={reason:w,serverClosed:!this.fsm.isActive()};this.connectionTracker.trackDisconnected(j),this.connectionTracker.clearConnectedInfo()},O.prototype.forceReconnectDueToNoRegistration=function(){this.fsm.forceReconnect("force reconnect due to no registration")},O.prototype.resetReconnectParamsOnErrorThreshold=function(){this.logger.warn("".concat(this.connectingErrorsInRow," connection attempts, server-side failure: erasing cached connection parameters")),this.reconnectParams=void 0},O.prototype.onSocketConnecting=function(w){this.logger.info("onSocketConnecting(".concat(w,")")),this.transportTypeName=w,this.connectionTracker.trackProgress("connecting",this.transportTypeName),this.fsm.onConnecting()},O.prototype.onSocketConnect=function(w){this.logger.info("onSocketConnect"),this.fsm.onSocketConnect(w)},O.prototype.onSocketConnectFailed=function(w){this.logger.error("onSocketConnectFailed"),this.connectionTracker.trackError("connect_failed",w,!0,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),this.fsm.onConnectingFailed()},O.prototype.onSocketDisconnect=function(w){var j=this.connectionTracker.getSessionLength()||0,Z=B.DisconnectReason.fromRawReason(w);this.logger.error("onSocketDisconnect, reason: ".concat(Z.reason)),Z.reason==="dup"&&this.lastDisconnectReason==="dup"&&j<this.options.duplicateDisconnectThresholdMs&&(this.logger.warn("Socket was closed by server as Duplicate for the second time in a row "+"after ".concat(j," ms which is below the threshold of ")+"".concat(this.options.duplicateDisconnectThresholdMs," ms. Resetting cached ")+"connection parameters and making a new allocation."),this.reconnectParams=void 0),this.lastDisconnectReason=Z.reason,this.fsm.onSocketDisconnect(Z),this.connectionExpireTimestampInSecs=void 0},O.prototype.onSocketReconnect=function(){this.logger.error("onSocketReconnect"),this.fsm.onTrouterConnected()},O.prototype.onSocketReconnectFailed=function(w){this.logger.error("onSocketReconnectFailed with '".concat(w,"'")),this.fsm.onSocketDisconnect(B.DisconnectReason.fromSocketIoEventData("reconnecterror",w))},O.prototype.onSocketReconnecting=function(){this.logger.error("onSocketReconnecting")},O.prototype.onSocketError=function(w){this.logger.error("onSocketError with '".concat((0,S.toJson)(w),"'")),this.fsm.isConnecting()&&++this.connectingErrorsInRow>=this.connectingErrorsThreshold&&this.resetReconnectParamsOnErrorThreshold(),this.connectionTracker.trackError("connectSocket",K(w)),this.fsm.onSocketDisconnect(B.DisconnectReason.fromSocketIoEventData("socketerror",w))},O.prototype.onSocketMessage=function(w){var j,Z=this;this.logger.debug("onSocketMessage");var q;try{q=new xe(w,this.logger);var se=(j=q.headers)===null||j===void 0?void 0:j["X-Microsoft-Skype-Chain-ID"],ye=se?" Chain-Id ".concat(se):"";this.logger.info("Received request N ".concat(q.id).concat(ye," CV ").concat(q.correlationVector," to '").concat(q.url,"'")),q.startTS=Date.now(),q.url&&this.urlPath&&q.url.startsWith(this.urlPath)&&(q.shortUrl=q.url.substring(this.urlPath.length))}catch(Me){var Ie=R(Me);return this.logger.error("unable to parse request. Error: ".concat(Ie)),this.connectionTracker.trackRequest(void 0,Ie),void this.connectionTracker.sendResponseError("unable to parse request, error: ".concat(Me))}q.timeoutTimerId=setTimeout(function(){if(!q.replied){Z.logger.error("Request ".concat(q.id," timed out"));var Me=new C.ResponseData(q.id);Me.status=504,Me.headers={"Trouter-Responder":"ClientLib"},Z.sendResponse(q,Me),q.timedout=!0}},this.timeoutOptions.requestTimeoutMs);try{this.connectionTracker.trackRequest(q),this.fsm.onDownstreamRequest(q)}catch(Me){this.logger.error("exception in socket.on message. Error: ".concat(R(Me))),this.connectionTracker.sendResponseError(D(Me),q,void 0)}},O.prototype.onTrouterConnected=function(w,j,Z){var q,se,ye,Ie,Me=this;if((0,ie.isV4ConnectEvent)(w)){var Ue=w;this.allocateResult=x(x({},Ue),{ttl:w.ttl.toString()}),this.populateAndCacheReconnectParams(Ue,Ue.reconnectUrl),this.populateConnectionStateFields(Ue)}else if(!this.allocateResult)return void this.logger.error("Invalid internal state - received onTrouterConnected while allocateResult is not set");this.connectingErrorsInRow=0,this.logger.info("onTrouterConnected: ".concat(this.allocateResult.url)),this.transportTypeName==="xhr-polling"&&j&&this.manager.onUserActivityStateAccepted(j.cv),!((ye=(se=(q=this.socket)===null||q===void 0?void 0:q.socket)===null||se===void 0?void 0:se.options)===null||ye===void 0)&&ye.query&&(this.socket.socket.options.query+="&connected=true"),this.urlPath=this.allocateResult.url.replace(/https?:\/\/([A-z0-9\:\$\-\_\.\+\!\*\"\(\)\,]*)\//,"/");var ze=this.connectedUrl!==this.allocateResult.url;this.connectedUrl=this.allocateResult.url,this.connectionExpireTimestampInSecs=(0,S.calculateExpireTsInSec)((0,ie.ensureNumber)(w.ttl)),this.connectionTracker.trackEnd("connectSocket"),this.connectionTracker.trackConnected(ze,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),(Ie=this.setAudienceSubscriptionsUnsafeAsync(Z))===null||Ie===void 0||Ie.catch(function(lt){return Me.logger.error("Re-subscribe to audiences has failed with ".concat(lt))}),this.fsm.onTrouterConnected()},O.prototype.onTrouterReconnect=function(w){var j=w.target;this.logger.info("onTrouterReconnect target: ".concat(j)),j==="self"?this.fsm.onReconnectRequired(!0,k.ServerInitiated):this.fsm.onReconnectRequired(!1,k.ServerInitiated,w)},O.prototype.onTrouterMessageLoss=function(w){this.logger.debug("onTrouterMessageLoss"),this.fsm.onTrouterMessageLost(w.droppedIndicators)},O.prototype.onAudienceSubscriptionResult=function(w){this.logger.info("onAudienceSubscriptionResult"),this.pendingAudienceSubscription&&(clearTimeout(this.pendingAudienceSubscription.timeoutId),this.pendingAudienceSubscription.audienceSetResolve(w),this.pendingAudienceSubscription=void 0)},O.prototype.buildV4cUrlParams=function(){var w={};return w.tc=encodeURI((0,S.toJson)(this.clientInfo)),w.timeout=Math.floor(this.timeoutOptions.pingTimeoutMs/1e3),this.options.endpointId&&(w.epid=this.options.endpointId),this.appendConnectedClientIds(this.buildQuery(w),!0)},O.prototype.attachSocketIoHandlers=function(w,j,Z,q){var se=this;w.on("connecting",function(ye){se.onSocketConnecting(ye)}),w.on("connect",function(){se.onSocketConnect(j)}),w.on("connect_failed",function(ye){se.onSocketConnectFailed(ye)}),w.on("close_during_connecting",function(ye){se.onSocketConnectFailed(ye)}),w.on("disconnect",function(ye){se.onSocketDisconnect(ye)}),w.on("reconnect",function(){se.onSocketReconnect()}),w.on("reconnect_failed",function(ye){se.onSocketReconnectFailed(ye)}),w.on("reconnecting",function(){se.onSocketReconnecting()}),w.on("error",function(ye){se.onSocketError(ye)}),w.on("message",function(ye){se.onSocketMessage(ye)}),w.on("trouter.connected",function(ye){se.onTrouterConnected(ye,Z,q)}),w.on("trouter.reconnect",function(ye){se.onTrouterReconnect(ye)}),w.on("trouter.message_loss",function(ye){se.onTrouterMessageLoss(ye)}),w.on("audience.subscriptionresult",function(ye,Ie){se.onAudienceSubscriptionResult(Ie)})},O.prototype.onNavigatorOnlineStatusUpdate=function(){var w=window.navigator.onLine;this.logger.debug("Browser online status update - new state: ".concat(w,", previously: ").concat(this.isNavigatorOnline)),w&&!this.isNavigatorOnline?(this.isNavigatorOnline=!0,this.tokenBackoff.expediteIfPending(),this.connectionTracker.trackProgress("browserNet","online")):!w&&this.isNavigatorOnline&&(this.isNavigatorOnline=!1,this.connectionTracker.trackProgress("browserNet","offline"))},O.prototype.onAllocationResponse=function(w,j){this.logger.info("Received allocation response ".concat(JSON.stringify(w))),this.allocateResult=w,this.populateAndCacheReconnectParams(this.allocateResult,"".concat(this.allocateResult.socketio,"v4/a")),this.populateConnectionStateFields(this.allocateResult),this.fsm.onAllocationSucceed(j)},O.prototype.populateAndCacheReconnectParams=function(w,j){this.reconnectParams=x({serviceUrl:this.options.trouterUrl,reconnectUrl:j},w.connectparams),this.manager.onConnectionParametersUpdated(this.reconnectParams)},O.prototype.populateConnectionStateFields=function(w){var j,Z,q=typeof w.ttl=="string"?parseInt(w.ttl,10):w.ttl;if(this.connectionExpireTimestampInSecs=(0,S.calculateExpireTsInSec)(q),this.connectionId=(j=w.id)!==null&&j!==void 0?j:"",this.connectedClientId=w.ccid,this.logger.debug("connected client id set {connectedClientId:".concat(this.connectedClientId,"}")),this.c2cUrlBase=(Z=w.curlb)!==null&&Z!==void 0?Z:"",this.c2cUrlBase===""){var se=w.surl.indexOf("://");se>=0&&(se=w.surl.indexOf("/",se+3))>=5&&w.surl.substr(se-5,5)===":3443"&&(this.c2cUrlBase=w.surl.substr(0,se-5))}},O.prototype.onPingResponse=function(){this.logger.debug("onPingResponse"),this.connectionTracker.increasePingResponseCount(),this.clearPingResponseTimer(),this.fsm.onPingResponse()},O.prototype.clearPingResponseTimer=function(){this.pingResponseTimerId!==void 0&&(clearTimeout(this.pingResponseTimerId),this.pingResponseTimerId=void 0)},O.prototype.buildQuery=function(w){for(var j=[],Z=0,q=Object.keys(w);Z<q.length;Z++){var se=q[Z];w[se]!==void 0&&j.push("".concat(se,"=").concat(w[se]))}return j.join("&")},O.prototype.appendConnectedClientIds=function(w,j){var Z="";w.includes("ccid=")||(Z="ccid=".concat(this.connectedClientId,"&")),this.domId&&(Z+="dom=".concat(this.domId,"&")),Z.length>0&&(Z=Z.slice(0,-1));var q=j||w.includes("?")?"&":"?";return this.appendCorrelationIds(w+q+Z,j)},O.prototype.appendEndpointId=function(w,j){var Z=j||w.includes("?")?"&":"?";return!w.includes("epid")&&this.options.endpointId?"".concat(w).concat(Z,"epid=").concat(this.options.endpointId):w},O.prototype.appendCorrelationIds=function(w,j){var Z=j||w.includes("?")?"&":"?";return w.includes("cor_id")?w:"".concat(w).concat(Z,"cor_id=").concat(this.options.clientCorrelationID)+"&con_num=".concat(this.clientID,"_").concat(this.connectionAttempt)},O.prototype.safeString=function(w){return typeof w=="string"?w:""},O.prototype.sendResponse=function(w,j){var Z,q,se;if(w.timedout)return this.logger.error("Request ".concat(w.id," already timed out")),1;if(w.replied)return this.logger.error("Response for request ".concat(w.id," already sent")),2;clearTimeout(w.timeoutTimerId),w.timeoutTimerId=void 0,w.replied=!0,j.headers=(Z=j.headers)!==null&&Z!==void 0?Z:{};var ye=w.correlationVector;this.logger.info("Sending response N ".concat(w.id," CV ").concat(ye," with status ").concat(j.status)),ye&&(j.headers[ke]=ye),!((q=w.headers)===null||q===void 0)&&q["trouter-request"]&&(j.headers["trouter-request"]=w.headers["trouter-request"]);var Ie=Date.now()-w.startTS;if(j.headers["trouter-client"]=(0,S.toJson)({cd:Ie}),!((se=w.headers)===null||se===void 0)&&se["trouter-is-broadcast"]&&(j.headers["trouter-is-broadcast"]=w.headers["trouter-is-broadcast"]),this.logger.debug("response: ".concat((0,S.toJson)(j))),!this.socket)return this.connectionTracker.sendResponseError("no socket",w,j),4;try{return this.socket.send((0,S.toJson)(j)),j.sentTS=Date.now(),w.incrementCorrelationVector(),this.connectionTracker.trackResponse(w,Ie,j),this.transportTypeName==="websocket"&&this.sendPingRequest(),0}catch(Ue){var Me="unable to send data on response.end. Error: ".concat(R(Ue));return this.logger.error(Me),this.connectionTracker.sendResponseError(Me,w,j),4}},O.prototype.sendUserActivityStateMultiple=function(w){var j=this,Z=new qe("user.activity"),q=this.userActivityState.increaseCvAndGetEventObject();Z.args=q,this.logger.debug("Sending user activity '".concat(this.userActivityState.toEventJSON(),"', remaining ").concat(w-1));var se=!1;this.sendDownstreamEvent(Z,function(){if(se!==!0&&(j.logger.info("User activity state: ".concat(q.state,", cv: ").concat(q.cv," accepted")),j.manager.onUserActivityStateAccepted(q.cv),j.clearSentEventTimer(Z.timeoutTimerId),w>1)){var ye=setTimeout(function(){j.clearSentEventTimer(ye),j.sendUserActivityStateMultiple(w-1)},j.options.userActivitySecondResendDelayMs);j.registerSentEventTimer(ye,"user.activity/resend")}}),Z.timeoutTimerId=setTimeout(function(){j.logger.error("Activity state response timeout is fired"),se=!0,j.fsm.onActivityStateResponseTimeout(),j.clearSentEventTimer(Z.timeoutTimerId)},this.timeoutOptions.userActivityResponseTimeoutMs),this.registerSentEventTimer(Z.timeoutTimerId,"user.activity/response")},O.prototype.sendDownstreamEvent=function(w,j){this.logger.debug("Sending downstream event ".concat(w.name)),this.socket&&this.socket.emit(w.name,w.args,j)},O.prototype.registerSentEventTimer=function(w,j){this.logger.debug("registering timer ".concat(w," -> ").concat(j)),this.pendingSentEventTimers[w]=j},O.prototype.clearSentEventTimer=function(w){var j=this.pendingSentEventTimers[w];this.logger.debug("clearing timer ".concat(w," -> ").concat(j)),delete this.pendingSentEventTimers[w],clearTimeout(w)},O.prototype.getRegistrationTtl=function(){var w,j,Z=(0,S.calculateTtlInSec)(this.connectionExpireTimestampInSecs);if(this.logger.debug("Current connectionID will expire in ".concat(Z," seconds")),((w=this.options.registration)===null||w===void 0?void 0:w.registrarTtlSec)&&Z>0){var q=this.options.registration.registrarTtlSec<Z;return[Math.min(this.options.registration.registrarTtlSec,Z),q]}return!((j=this.options.registration)===null||j===void 0)&&j.registrarTtlSec?[this.options.registration.registrarTtlSec,!1]:Z>0?[Z,!1]:[3600,!1]},O.prototype.clearIncallModeTimerId=function(){this.incallModeTimerId!==void 0&&(this.logger.debug("Clearing in-call mode timer"),clearTimeout(this.incallModeTimerId),this.incallModeTimerId=void 0)},O.prototype.applyConnectionTrackerOptions=function(w){try{w.eventLogger&&typeof w.eventLogger.logEvent=="function"?(this.connectionTracker.mergeSettings(w.telemetrySettings),this.connectionTracker.enable(w.eventLogger)):this.logger.warn("Trouter client event logging disabled due to invalid configuration.")}catch(j){this.logger.warn("Trouter client event logging disabled. Error: ".concat(R(j))),this.connectionTracker.disable()}},O.prototype.canRetryTokenFetchRequest=function(w){var j=this.options.retryLimitOnTokenFetch;return j==null||w<j||(this.logger.warn("Reached limit on maximum number of token fetch request. Current count: ".concat(w,", retry limit: ").concat(j)),!1)},O})();M.TrouterConnection=Qe},function($,M,Y){Object.defineProperty(M,"__esModule",{value:!0}),M.MessageHandlerRegistry=void 0;var P=Y(1),K=Y(0),R=(function(){function D(x){this.messageHandlers=[],this.logger=new K.Logger("MessageHandlers",x)}return D.prototype.register=function(x){if(this.messageHandlers.some(function(b){return b===x}))throw new Error("Registering the same handler twice is not allowed");this.messageHandlers.push(x)},D.prototype.clear=function(){this.logger.debug("Clearing message handlers"),this.messageHandlers=[]},D.prototype.active=function(){return this.messageHandlers.length>0},D.prototype.handleMessage=function(x){for(var b={resultCode:P.UNHANDLED_MESSAGE_ACK,isHandled:!1},T=0,k=this.messageHandlers;T<k.length;T++){var N=k[T],S=this.safeExecuteHandle(N,x);if(S!==void 0&&(S.isHandled===void 0||S.isHandled))return S.resultCode===void 0&&(S.resultCode=P.HANDLED_MESSAGE_ACK),S}return b},D.prototype.safeExecuteHandle=function(x,b){try{return x.handleMessage(b)}catch(T){return void this.logger.warn("Trouter message handler threw an exception: ".concat(T))}},D})();M.MessageHandlerRegistry=R},function($,M,Y){function P(D){var x,b=this;return function(T){return K(b,void 0,void 0,function(){return R(this,function(k){return T&&(x=void 0),[2,new Promise(function(N,S){D(T).then(function(C){x=C,N(C)}).catch(function(C){x!==void 0&&x.length>0&&N(x),S(C)})})]})})}}var K=this&&this.__awaiter||function(D,x,b,T){function k(N){return N instanceof b?N:new b(function(S){S(N)})}return new(b||(b=Promise))(function(N,S){function C(J){try{B(T.next(J))}catch(V){S(V)}}function A(J){try{B(T.throw(J))}catch(V){S(V)}}function B(J){J.done?N(J.value):k(J.value).then(C,A)}B((T=T.apply(D,x||[])).next())})},R=this&&this.__generator||function(D,x){function b(B){return function(J){return T([B,J])}}function T(B){if(k)throw new TypeError("Generator is already executing.");for(;C&&(C=0,B[0]&&(A=0)),A;)try{if(k=1,N&&(S=2&B[0]?N.return:B[0]?N.throw||((S=N.return)&&S.call(N),0):N.next)&&!(S=S.call(N,B[1])).done)return S;switch(N=0,S&&(B=[2&B[0],S.value]),B[0]){case 0:case 1:S=B;break;case 4:return A.label++,{value:B[1],done:!1};case 5:A.label++,N=B[1],B=[0];continue;case 7:B=A.ops.pop(),A.trys.pop();continue;default:if(S=A.trys,!(S=S.length>0&&S[S.length-1])&&(B[0]===6||B[0]===2)){A=0;continue}if(B[0]===3&&(!S||B[1]>S[0]&&B[1]<S[3])){A.label=B[1];break}if(B[0]===6&&A.label<S[1]){A.label=S[1],S=B;break}if(S&&A.label<S[2]){A.label=S[2],A.ops.push(B);break}S[2]&&A.ops.pop(),A.trys.pop();continue}B=x.call(D,A)}catch(J){B=[6,J],N=0}finally{k=S=0}if(5&B[0])throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}var k,N,S,C,A={label:0,sent:function(){if(1&S[0])throw S[1];return S[1]},trys:[],ops:[]};return C={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C};Object.defineProperty(M,"__esModule",{value:!0}),M.addCacheAsBackupTo=void 0,M.addCacheAsBackupTo=P},function($,M,Y){var P=this&&this.__awaiter||function(V,L,H,ie){function te(W){return W instanceof H?W:new H(function(ue){ue(W)})}return new(H||(H=Promise))(function(W,ue){function _e(Ne){try{xe(ie.next(Ne))}catch(qe){ue(qe)}}function ke(Ne){try{xe(ie.throw(Ne))}catch(qe){ue(qe)}}function xe(Ne){Ne.done?W(Ne.value):te(Ne.value).then(_e,ke)}xe((ie=ie.apply(V,L||[])).next())})},K=this&&this.__generator||function(V,L){function H(xe){return function(Ne){return ie([xe,Ne])}}function ie(xe){if(te)throw new TypeError("Generator is already executing.");for(;_e&&(_e=0,xe[0]&&(ke=0)),ke;)try{if(te=1,W&&(ue=2&xe[0]?W.return:xe[0]?W.throw||((ue=W.return)&&ue.call(W),0):W.next)&&!(ue=ue.call(W,xe[1])).done)return ue;switch(W=0,ue&&(xe=[2&xe[0],ue.value]),xe[0]){case 0:case 1:ue=xe;break;case 4:return ke.label++,{value:xe[1],done:!1};case 5:ke.label++,W=xe[1],xe=[0];continue;case 7:xe=ke.ops.pop(),ke.trys.pop();continue;default:if(ue=ke.trys,!(ue=ue.length>0&&ue[ue.length-1])&&(xe[0]===6||xe[0]===2)){ke=0;continue}if(xe[0]===3&&(!ue||xe[1]>ue[0]&&xe[1]<ue[3])){ke.label=xe[1];break}if(xe[0]===6&&ke.label<ue[1]){ke.label=ue[1],ue=xe;break}if(ue&&ke.label<ue[2]){ke.label=ue[2],ke.ops.push(xe);break}ue[2]&&ke.ops.pop(),ke.trys.pop();continue}xe=L.call(V,ke)}catch(Ne){xe=[6,Ne],W=0}finally{te=ue=0}if(5&xe[0])throw xe[1];return{value:xe[0]?xe[1]:void 0,done:!0}}var te,W,ue,_e,ke={label:0,sent:function(){if(1&ue[0])throw ue[1];return ue[1]},trys:[],ops:[]};return _e={next:H(0),throw:H(1),return:H(2)},typeof Symbol=="function"&&(_e[Symbol.iterator]=function(){return this}),_e};Object.defineProperty(M,"__esModule",{value:!0}),M.TrouterManager=M.AudienceSubscriptionState=M.UserActivityObject=void 0;var R=Y(3),D=Y(2),x=Y(4),b=Y(0),T=Y(5),k=Y(18),N=Y(7),S=Y(6),C=Y(19),A=(function(){function V(L,H){this.state=L,this.correlationVector=H!==void 0?H:R.CorrelationVector.extend()}return V.prototype.getStateString=function(){switch(this.state){case D.UserActivityState.Active:return"active";case D.UserActivityState.Inactive:return"inactive";case D.UserActivityState.Unknown:return"unknown";default:return"undefined"}},V.prototype.increaseCvAndGetEventObject=function(){return this.correlationVector.increase(),this.toEventObject()},V.prototype.toEventObject=function(){return{state:this.getStateString(),cv:this.correlationVector.value()}},V.prototype.toEventJSON=function(){return(0,R.toJson)(this.toEventObject())},V})();M.UserActivityObject=A;var B=(function(){function V(L,H){H===void 0&&(H=R.CorrelationVector.extend()),this.audienceSubscriptionModel=L,this.correlationVector=H}return V.prototype.increaseCvAndGetEventObject=function(){return this.correlationVector.increase(),this.toEventObject()},V.prototype.toEventObject=function(){return{audiences:this.audienceSubscriptionModel.audienceSubscriptions,cv:this.correlationVector.value()}},V.prototype.toEventJSON=function(){return(0,R.toJson)(this.toEventObject())},V})();M.AudienceSubscriptionState=B;var J=(function(){function V(L,H,ie,te,W,ue){var _e=this;this.logFunc=L,this.options=H,this.tokenProvider=ie,this.usingLegacyTokenApi=te,this.listener=W,this.tokenTypeProtocolSelector=function(ke,xe){return _e.options.forceV4aProtocol?"v4a":(0,T.usedProtocol)(ke,xe)},this.logger=new b.Logger("Manager",L),this.logger.info("Created TrouterManager with options ".concat((0,R.toJson)(this.options))),this.fsm=new C.TrouterManagerFsm(L,this),this.baseEndpointUrl="",this.processedMessageLoss={},this.userActivityObject=new A(D.UserActivityState.Unknown),this.protocolSelector=ue??this.tokenTypeProtocolSelector.bind(this)}return V.prototype.start=function(){this.fsm.start()},V.prototype.stop=function(L){this.fsm.stop(L)},V.prototype.configure=function(L){this.options=L,this.firstConnection!==void 0&&this.firstConnection.configure(L),this.secondConnection!==void 0&&this.secondConnection.configure(L),this.logger.info("Reconfigured TrouterManager with options ".concat((0,R.toJson)(this.options)))},V.prototype.checkConnection=function(L){this.firstConnection!==void 0&&this.firstConnection.checkConnection(L),this.secondConnection!==void 0&&this.secondConnection.checkConnection(L)},V.prototype.resendRegistration=function(){return P(this,void 0,void 0,function(){return K(this,function(L){return this.secondConnection!==void 0?(this.logger.info("Resending registration on the second/new connection"),[2,this.secondConnection.resendRegistration()]):this.firstConnection!==void 0?(this.logger.info("Resending registration on the first/current connection"),[2,this.firstConnection.resendRegistration()]):(this.logger.info("No connection to resend registration on, will be done upon (re)connect"),[2])})})},V.prototype.getServerState=function(){if(this.firstConnection!==void 0)return this.firstConnection.getServerState()},V.prototype.getState=function(){return this.fsm.getState()},V.prototype.isInTerminalState=function(){return this.fsm.getInternalState()===x.TrouterManagerState.TerminalError},V.prototype.reportStateInfo=function(){var L=this.firstConnection?S.State[this.firstConnection.getState()]:"Unknown",H=x.TrouterManagerState[this.fsm.getInternalState()];if(this.secondConnection){var ie=S.State[this.secondConnection.getState()];return"Manager ".concat(H,"; 1st ").concat(L,"; 2nd ").concat(ie)}return"Manager ".concat(H,"; Connection ").concat(L)},V.prototype.startFirstConnection=function(){var L=new N.TrouterConnection(this.logFunc,this.options,this.configuredTrouterManager(),this.tokenProvider,this.usingLegacyTokenApi,this.userActivityObject,this.protocolSelector,this.audienceSubscriptionState);this.firstConnection=L,this.getConnectionCache().then(function(H){L.start(H)}).catch(function(){})},V.prototype.startSecondConnection=function(L){var H=new N.TrouterConnection(this.logFunc,this.options,this.configuredTrouterManager(),this.tokenProvider,this.usingLegacyTokenApi,this.userActivityObject,this.protocolSelector,this.audienceSubscriptionState);this.secondConnection=H,this.firstConnection!==void 0&&this.firstConnection.disableRegistrationsAndAutoReconnect(),L?this.getConnectionCache().then(function(ie){H.start(ie)}).catch(function(){}):H.start()},V.prototype.stopFirstConnection=function(L){this.firstConnection!==void 0&&(this.storedFirstConnection=this.firstConnection,this.firstConnection.stop(L),this.firstConnection=void 0)},V.prototype.stopSecondConnection=function(L){this.secondConnection!==void 0&&(this.secondConnection.stop(L),this.secondConnection=void 0)},V.prototype.stopSecondConnectionDelayed=function(){if(this.secondConnection!==void 0){var L=this.secondConnection;this.secondConnection=void 0,this.logger.info("Closing an inactive connection in ".concat(Math.round(this.options.lingeringConnectionDelayMs/1e3),"s")),setTimeout(function(){L.stop(!0)},this.options.lingeringConnectionDelayMs)}},V.prototype.forceStopLingeringConnection=function(){this.storedFirstConnection&&(this.storedFirstConnection.stop(!1),this.storedFirstConnection=void 0)},V.prototype.switchConnections=function(){var L=this.firstConnection;this.firstConnection=this.secondConnection,this.secondConnection=L},V.prototype.doesSecondConnectionExist=function(){return this.secondConnection!==void 0},V.prototype.dispatchConnected=function(){if(this.firstConnection!==void 0){var L=this.firstConnection.getServerState(),H=L.url.endsWith("/")?L.url.slice(0,-1):L.url,ie={baseEndpointUrl:H,newEndpointUrl:H!==this.baseEndpointUrl,c2cUrlBase:L.c2cUrlBase,clientId:L.connectedClientId,connectionId:L.connectionId,connectionTtlSec:L.getRemainingTtlInSec()};this.baseEndpointUrl=H,this.listener.onTrouterConnected(L.url,ie)}},V.prototype.dispatchDisconnected=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},V.prototype.dispatchTerminalError=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},V.prototype.dispatchRegistrationState=function(L){this.options.registrationStateCallback&&this.options.registrationStateCallback(L)},V.prototype.expediteBackoffOnConnections=function(){var L;if(this.lastExpediteBackoffCallAt!==void 0&&Date.now()-this.lastExpediteBackoffCallAt<((L=this.options.expediteBackoffOnStartMinimumDelayMs)!==null&&L!==void 0?L:1e4))return void this.logger.info("Expedite backoff due to start() too frequent, skipping");this.lastExpediteBackoffCallAt=Date.now(),this.firstConnection!==void 0&&this.firstConnection.expediteBackoff(),this.secondConnection!==void 0&&this.secondConnection.expediteBackoff()},V.prototype.onDownstreamRequest=function(L,H,ie){var te={id:H.id,method:H.method,path:"/".concat(H.shortUrl),body:H.body,headers:H.headers},W={id:H.id,status:0,headers:{},body:"",send:function(){return W.status<=100||W.status>=999?3:(ie.writeHead(W.status,W.headers),ie.end(W.body))}};this.listener.onTrouterRequest(te,W)},V.prototype.onConnected=function(L){this.fsm.onConnected(L===this.firstConnection)},V.prototype.onRegistered=function(L){this.fsm.onRegistered(L===this.firstConnection)},V.prototype.onUnregistered=function(L){this.fsm.onUnregistered(L===this.firstConnection||L===this.storedFirstConnection)},V.prototype.onReconnecting=function(L){this.fsm.onReconnecting(L===this.firstConnection)},V.prototype.onReconnectIsRequired=function(L,H,ie){this.fsm.onReconnectionRequired(L===this.firstConnection,H,ie)},V.prototype.onDisconnected=function(L){this.fsm.onDisconnected(L===this.firstConnection||L==this.storedFirstConnection),this.storedFirstConnection=void 0},V.prototype.onTerminalError=function(){this.fsm.onTerminalError(),this.storedFirstConnection=void 0},V.prototype.onUserActivityStateAccepted=function(L){this.listener.onTrouterUserActivityStateAccepted&&this.listener.onTrouterUserActivityStateAccepted(L)},V.prototype.onAudiencesSetResolved=function(L,H){var ie,te;(te=(ie=this.listener).onAudiencesSetResolved)===null||te===void 0||te.call(ie,L,H)},V.prototype.onConnectionParametersUpdated=function(L){this.setConnectionCache(L)},V.prototype.setUserActivityState=function(L,H){return this.userActivityObject=new A(L,R.CorrelationVector.extend(H)),this.secondConnection!==void 0?(this.logger.info("Setting user activity ".concat(this.userActivityObject.toEventJSON()," on the second/new connection")),void this.secondConnection.setUserActivityState(this.userActivityObject)):this.firstConnection!==void 0?(this.logger.info("Setting user activity ".concat(this.userActivityObject.toEventJSON()," on the first/current connection")),void this.firstConnection.setUserActivityState(this.userActivityObject)):void 0},V.prototype.setAudienceSubscriptionsAsync=function(L,H,ie){if(this.audienceSubscriptionState=new B(L,R.CorrelationVector.extend(ie)),this.secondConnection)return this.logger.info("Setting audience subscriptions ".concat(this.audienceSubscriptionState.toEventJSON()," on second/new connection")),this.secondConnection.setAudienceSubscriptionsAsync(this.audienceSubscriptionState,H);if(this.firstConnection)return this.logger.info("Setting audience subscriptions ".concat(this.audienceSubscriptionState.toEventJSON()," on first/current connection")),this.firstConnection.setAudienceSubscriptionsAsync(this.audienceSubscriptionState,H);throw new Error("No connection found")},V.prototype.onTrouterMessageLost=function(L){var H=this;if(this.listener.onTrouterMessageLoss)if(L?.length){var ie=L.filter(function(W){return H.processedMessageLoss["".concat(W.tag,"-").concat(W.etag)]!==void 0});if(ie.length&&(this.logger.info("onTrouterMessageLoss - immediately acknowledging ".concat(ie.length," seen dropped indicators")),this.sendProcessedDroppedIndicators(ie),L=L.filter(function(W){return H.processedMessageLoss["".concat(W.tag,"-").concat(W.etag)]===void 0}),!L.length))return void this.logger.info("onTrouterMessageLoss - all declared dropped indicators have been seen before");var te=this.listener.onTrouterMessageLoss(L.map(function(W){return W.tag}));if(!te)return void this.logger.warn("onTrouterMessageLoss - some flow tag(s) have not been processed by listeners");L.forEach(function(W){H.processedMessageLoss["".concat(W.tag,"-").concat(W.etag)]=""}),this.sendProcessedDroppedIndicators(L)}else this.logger.warn("onTrouterMessageLoss - no flow tags have been provided")},V.prototype.getConnectionCache=function(){var L=this;return this.options.connectionCache?(this.logger.debug("Querying host's connection cache"),this.options.connectionCache.onGetTrouterConnectionCache().then(function(H){var ie=H?JSON.parse(H):void 0;return typeof ie=="object"?ie:void 0}).catch(function(H){return L.logger.warn("Invalid connection cache content provided: ".concat(H)),L.connectionCache})):Promise.resolve(this.connectionCache)},V.prototype.setConnectionCache=function(L){if(this.connectionCache=L,this.options.connectionCache)try{this.options.connectionCache.onSetTrouterConnectionCache(JSON.stringify(L))}catch(H){this.logger.warn("Error setting external connection cache: ".concat(H))}},V.prototype.sendProcessedDroppedIndicators=function(L){return this.firstConnection!==void 0?void this.firstConnection.sendProcessedDroppedIndicators(L):this.secondConnection!==void 0?void this.secondConnection.sendProcessedDroppedIndicators(L):void 0},V.prototype.configuredTrouterManager=function(){return new k.RegistrationEnforcer(this,this.options.connectionDependsOnRegistration,this.options.delayEventsUntilRegistered)},V})();M.TrouterManager=J},function($,M,Y){Object.defineProperty(M,"__esModule",{value:!0}),M.TrouterUrlPromise=void 0;var P=Y(0),K=(function(){function R(D){this.logger=new P.Logger("UrlPromise",D)}return R.prototype.getPromise=function(){var D=this;return this.url!==void 0?(this.logger.debug("returning previously resolved url: ".concat(this.url)),Promise.resolve(this.url)):(this.pendingPromise===void 0?(this.logger.debug("creating and returning promise"),this.pendingPromise=new Promise(function(x,b){D.pendingPromiseResolveRef=x,D.pendingPromiseRejectRef=b})):this.logger.debug("returning existing promise"),this.pendingPromise)},R.prototype.resolveUrl=function(D){this.url=D,this.logger.debug("got url: ".concat(this.url));var x=this.pendingPromiseResolveRef;this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,x!==void 0&&(this.logger.debug("resolving promise"),x(D))},R.prototype.rejectUrl=function(D){this.logger.debug("aborting");var x=this.pendingPromiseRejectRef;this.url=void 0,this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,x!==void 0&&(this.logger.debug("rejecting promise"),x(D))},R.prototype.resetUrl=function(){this.logger.debug("resetting url"),this.url=void 0},R})();M.TrouterUrlPromise=K},function($,M,Y){(function(P,K){(function(D,x){var b=D;b.version="0.9.6",b.protocol=1,b.transports=[],b.j=[],b.sockets={},b.connect=function(T,k){var N,S,C=b.util.parseUri(T);x&&x.location&&(C.protocol=C.protocol||x.location.protocol.slice(0,-1),C.host=C.host||(x.document?x.document.domain:x.location.hostname),C.port=C.port||x.location.port),N=b.util.uniqueUri(C);var A={host:C.host,secure:C.protocol=="https",port:C.port||(C.protocol=="https"?443:80),query:C.query||""};return b.util.merge(A,k),!A["force new connection"]&&b.sockets[N]||(S=new b.Socket(A)),!A["force new connection"]&&S&&(b.sockets[N]=S),S=S||b.sockets[N],A["skipped handshake data"]?S.of(""):S.of(C.path.length>1?C.path:"")}})(K.exports,P===void 0?window:P);var R=K.exports;(function(D,x){var b=D.util={},T=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,k=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];b.parseUri=function(S){for(var C=T.exec(S||""),A={},B=14;B--;)A[k[B]]=C[B]||"";return A},b.uniqueUri=function(S){var C=S.protocol,A=S.host,B=S.port;return"document"in x?(A=A||document.domain,B=B||(C=="https"&&document.location.protocol!=="https:"?443:document.location.port)):(A=A||"localhost",B||C!="https"||(B=443)),(C||"http")+"://"+A+":"+(B||80)},b.query=function(S,C){var A=b.chunkQuery(S||""),B=[];b.merge(A,b.chunkQuery(C||""));for(var J in A)A.hasOwnProperty(J)&&B.push(J+"="+A[J]);return B.length?"?"+B.join("&"):""},b.chunkQuery=function(S){for(var C,A={},B=S.split("&"),J=0,V=B.length;J<V;++J)C=B[J].split("="),C[0]&&(A[C[0]]=C[1]);return A};var N=!1;b.load=function(S){if("document"in x&&document.readyState==="complete"||N)return S();b.on(x,"load",S,!1)},b.on=function(S,C,A,B){S.attachEvent?S.attachEvent("on"+C,A):S.addEventListener&&S.addEventListener(C,A,B)},b.request=function(S){if(S&&typeof XDomainRequest<"u")return new XDomainRequest;if(typeof XMLHttpRequest<"u"&&(!S||b.ua.hasCORS))return new XMLHttpRequest;if(!S)try{return new window[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}return null},typeof window<"u"&&b.load(function(){N=!0}),b.defer=function(S){if(!b.ua.webkit||typeof importScripts<"u")return S();b.load(function(){setTimeout(S,100)})},b.merge=function(S,C,A,B){var J,V=B||[],L=A===void 0?2:A;for(J in C)C.hasOwnProperty(J)&&b.indexOf(V,J)<0&&(typeof S[J]=="object"&&L?b.merge(S[J],C[J],L-1,V):(S[J]=C[J],V.push(C[J])));return S},b.mixin=function(S,C){b.merge(S.prototype,C.prototype)},b.inherit=function(S,C){function A(){}A.prototype=C.prototype,S.prototype=new A},b.isArray=Array.isArray||function(S){return Object.prototype.toString.call(S)==="[object Array]"},b.intersect=function(S,C){for(var A=[],B=S.length>C.length?S:C,J=S.length>C.length?C:S,V=0,L=J.length;V<L;V++)~b.indexOf(B,J[V])&&A.push(J[V]);return A},b.indexOf=function(S,C,A){for(var B=S.length,A=A<0?A+B<0?0:A+B:A||0;A<B&&S[A]!==C;A++);return B<=A?-1:A},b.toArray=function(S){for(var C=[],A=0,B=S.length;A<B;A++)C.push(S[A]);return C},b.ua={},b.ua.hasCORS=typeof XMLHttpRequest<"u"&&(function(){try{var S=new XMLHttpRequest}catch{return!1}return S.withCredentials!=null})(),b.ua.webkit=typeof navigator<"u"&&/webkit/i.test(navigator.userAgent)})(R!==void 0?R:K.exports,P===void 0?window:P),(function(D,x){function b(){}D.EventEmitter=b,b.prototype.on=function(T,k){return this.$events||(this.$events={}),this.$events[T]?x.util.isArray(this.$events[T])?this.$events[T].push(k):this.$events[T]=[this.$events[T],k]:this.$events[T]=k,this},b.prototype.addListener=b.prototype.on,b.prototype.once=function(T,k){function N(){S.removeListener(T,N),k.apply(this,arguments)}var S=this;return N.listener=k,this.on(T,N),this},b.prototype.removeListener=function(T,k){if(this.$events&&this.$events[T]){var N=this.$events[T];if(x.util.isArray(N)){for(var S=-1,C=0,A=N.length;C<A;C++)if(N[C]===k||N[C].listener&&N[C].listener===k){S=C;break}if(S<0)return this;N.splice(S,1),N.length||delete this.$events[T]}else(N===k||N.listener&&N.listener===k)&&delete this.$events[T]}return this},b.prototype.removeAllListeners=function(T){return this.$events&&this.$events[T]&&(this.$events[T]=null),this},b.prototype.listeners=function(T){return this.$events||(this.$events={}),this.$events[T]||(this.$events[T]=[]),x.util.isArray(this.$events[T])||(this.$events[T]=[this.$events[T]]),this.$events[T]},b.prototype.emit=function(T){if(!this.$events)return!1;var k=this.$events[T];if(!k)return!1;var N=Array.prototype.slice.call(arguments,1);if(typeof k=="function")k.apply(this,N);else{if(!x.util.isArray(k))return!1;for(var S=k.slice(),C=0,A=S.length;C<A;C++)S[C].apply(this,N)}return!0}})(R!==void 0?R:K.exports,R!==void 0?R:K.parent.exports),(function(D,x){if(x&&x.parse)return D.JSON={parse:x.parse,stringify:x.stringify};throw new Error("JSON not available")})(R!==void 0?R:K.exports,typeof JSON<"u"?JSON:void 0),(function(D,x){var b=D.parser={},T=b.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],k=b.reasons=["transport not supported","client not handshaken","unauthorized"],N=b.advice=["reconnect"],S=x.JSON,C=x.util.indexOf;b.encodePacket=function(B){var J=C(T,B.type),V=B.id||"",L=B.endpoint||"",H=B.ack,ie=null;switch(B.type){case"error":var te=B.reason?C(k,B.reason):"",W=B.advice?C(N,B.advice):"";te===""&&W===""||(ie=te+(W!==""?"+"+W:""));break;case"message":B.data!==""&&(ie=B.data);break;case"event":var ue={name:B.name};B.args&&B.args.length&&(ue.args=B.args),ie=S.stringify(ue);break;case"json":ie=S.stringify(B.data);break;case"connect":B.qs&&(ie=B.qs);break;case"ack":ie=B.ackId+(B.args&&B.args.length?"+"+S.stringify(B.args):"")}var _e=[J,V+(H=="data"?"+":""),L];return ie!=null&&_e.push(ie),_e.join(":")},b.encodePayload=function(B){var J="";if(B.length==1)return B[0];for(var V=0,L=B.length;V<L;V++)J+=""+B[V].length+""+B[V];return J};var A=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;b.decodePacket=function(L){var J=L.match(A);if(!J)return{};var V=J[2]||"",L=J[5]||"",H={type:T[J[1]],endpoint:J[4]||""};switch(V&&(H.id=V,J[3]?H.ack="data":H.ack=!0),H.type){case"error":var J=L.split("+");H.reason=k[J[0]]||"",H.advice=N[J[1]]||"";break;case"message":H.data=L||"";break;case"event":try{var ie=S.parse(L);H.name=ie.name,H.args=ie.args}catch{}H.args=H.args||[];break;case"json":try{H.data=S.parse(L)}catch{}break;case"connect":H.qs=L||"";break;case"ack":var J=L.match(/^([0-9]+)(\+)?(.*)/);if(J&&(H.ackId=J[1],H.args=[],J[3]))try{H.args=J[3]?S.parse(J[3]):[]}catch{}break;case"disconnect":H.reason=L}return H},b.decodePayload=function(B){if(B.charAt(0)==""){for(var J=[],V=1,L="";V<B.length;V++)B.charAt(V)==""?(J.push(b.decodePacket(B.substr(V+1).substr(0,L))),V+=Number(L)+1,L=""):L+=B.charAt(V);return J}return[b.decodePacket(B)]}})(R!==void 0?R:K.exports,R!==void 0?R:K.parent.exports),(function(D,x){function b(T,k){this.socket=T,this.sessid=k,this.connectErrorCallback=void 0,this.isOpened=!1}D.Transport=b,x.util.mixin(b,x.EventEmitter),b.prototype.onData=function(T){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),T!==""){var k=x.parser.decodePayload(T);if(k&&k.length)for(var N=0,S=k.length;N<S;N++)this.onPacket(k[N])}return this},b.prototype.onPacket=function(T){return this.socket.setHeartbeatTimeout(),T.type=="heartbeat"?this.onHeartbeat():(T.type=="connect"&&T.endpoint==""&&this.onConnect(),T.type=="error"&&T.advice=="reconnect"&&(this.isOpened=!1),this.socket.onPacket(T),this)},b.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var T=this;this.closeTimeout=setTimeout(function(){T.onDisconnect()},this.socket.closeTimeout)}},b.prototype.onDisconnect=function(){return this.close&&this.isOpened&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},b.prototype.onConnect=function(){return this.socket.onConnect(),this.connectErrorCallback=void 0,this},b.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},b.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},b.prototype.packet=function(T){this.send(x.parser.encodePacket(T))},b.prototype.onHeartbeat=function(T){this.packet({type:"heartbeat"})},b.prototype.onOpen=function(){this.isOpened=!0,this.clearCloseTimeout(),this.socket.onOpen()},b.prototype.onClose=function(){this.isOpened=!1,this.socket.onClose(),this.onDisconnect()},b.prototype.prepareUrl=function(T){var k=this.socket.options;if(k["skipped handshake data"])return k.rewriteUrlForProxy(k["skipped handshake data"].websocketUrl+(T||""));var N=this.scheme()+"://"+k.host+":"+k.port+"/"+k.resource+"/"+x.protocol+"/"+this.name+"/"+this.sessid+(T||"");return k.rewriteUrlForProxy(N)},b.prototype.ready=function(T,k){k.call(this)},b.prototype.clearEventHandlers=function(){return this}})(R!==void 0?R:K.exports,R!==void 0?R:K.parent.exports),(function(D,x,b){function T(N){if(this.options={port:80,secure:!1,document:"document"in b&&document,resource:"socket.io",transports:x.transports.slice(),"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843},x.util.merge(this.options,N),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.disconnected=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||x.util.ua.hasCORS)){var S=this;x.util.on(b,"unload",function(){S.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function k(){}D.Socket=T,x.util.mixin(T,x.EventEmitter),T.prototype.of=function(N){return this.namespaces[N]||(this.namespaces[N]=new x.SocketNamespace(this,N),N!==""&&this.namespaces[N].packet({type:"connect"})),this.namespaces[N]},T.prototype.publish=function(){this.emit.apply(this,arguments);var N;for(var S in this.namespaces)this.namespaces.hasOwnProperty(S)&&(N=this.of(S),N.$emit.apply(N,arguments))},T.prototype.handshake=function(N){function S(ie){ie instanceof Error?C.onError(ie.message):N.apply(null,ie.split(":"))}var C=this,A=this.options;if(!C.disconnected){var B=A.rewriteUrlForProxy(["http"+(A.secure?"s":"")+":/",A.host+":"+A.port,A.resource,x.protocol,x.util.query(this.options.query,"t="+ +new Date)].join("/"));if(this.isXDomain()&&!x.util.ua.hasCORS){var J=document.getElementsByTagName("script")[0],V=document.createElement("script");V.src=B+"&jsonp="+x.j.length,J.parentNode.insertBefore(V,J),x.j.push(function(ie){S(ie),V.parentNode.removeChild(V)})}else{var L=x.util.request();L.open("GET",B,!0);var H=this.options.requestHeaders;H!==void 0&&Object.keys(H).forEach(function(ie){L.setRequestHeader(ie,H[ie])}),L.onreadystatechange=function(){L.readyState==4&&(L.onreadystatechange=k,L.status==200?S(L.responseText):!C.reconnecting&&C.onError(L.responseText))},L.send(null)}}},T.prototype.getTransport=function(N){for(var S,C=N||this.transports,A=0;S=C[A];A++)if(x.Transport[S]&&x.Transport[S].check(this)&&(!this.isXDomain()||x.Transport[S].xdomainCheck()))return new x.Transport[S](this,this.sessionid);return null},T.prototype.connect=function(N){if(this.connecting||this.disconnected)return this;var S=this,C=function(B,J,V,L){function H(){if(!S.connected&&!S.disconnected)if(S.connecting=!1,clearTimeout(S.connectTimeoutTimer),S.options["try multiple transports"]){for(;S.remainingTransports.length>0&&S.remainingTransports.splice(0,1)[0]!=S.transport.name;);S.remainingTransports.length?ie(S.remainingTransports):S.publish("connect_failed")}else S.publish("connect_failed")}function ie(te){if(S.transport&&(S.transport.clearTimeouts(),S.transport.clearEventHandlers()),S.transport=S.getTransport(te),!S.transport||S.disconnected)return S.publish("connect_failed");S.transport.ready(S,function(){S.connecting=!0,S.publish("connecting",S.transport.name),S.transport.open(H),S.options["connect timeout"]&&(S.connectTimeoutTimer=setTimeout(function(){H()},S.options["connect timeout"]))})}S.sessionid=B,S.closeTimeout=1e3*V+2e3,S.heartbeatTimeout=1e3*J+2e3,S.transports=L?x.util.intersect(L.split(","),S.options.transports):S.options.transports,S.setHeartbeatTimeout(),S.remainingTransports=S.transports.slice(0),ie(S.transports),S.once("connect",function(){clearTimeout(S.connectTimeoutTimer),N&&typeof N=="function"&&N()})};if(this.options["skipped handshake data"]){var A=this.options["skipped handshake data"];C("v4c-"+new Date().getTime(),A.timeout,A.timeout,"websocket")}else this.handshake(C);return this},T.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);var N=this;this.heartbeatTimeoutTimer=setTimeout(function(){N.transport.onClose()},this.heartbeatTimeout)},T.prototype.packet=function(N){return this.connected&&!this.doBuffer?this.transport.packet(N):this.buffer.push(N),this},T.prototype.setBuffer=function(N){this.doBuffer=N,!N&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])},T.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this.disconnected=!0,this},T.prototype.disconnectSync=function(){var N=x.util.request(),S=this.resource+"/"+x.protocol+"/"+this.sessionid;N.open("GET",S,!0),this.onDisconnect("booted")},T.prototype.isXDomain=function(){var N=b.location.port||(b.location.protocol=="https:"?443:80);return this.options.host!==b.location.hostname||this.options.port!=N},T.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},T.prototype.onOpen=function(){this.open=!0},T.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},T.prototype.onPacket=function(N){this.of(N.endpoint).onPacket(N)},T.prototype.onError=function(N){N&&N.advice&&N.advice==="reconnect"&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",N&&N.reason?N.reason:N)},T.prototype.onDisconnect=function(N){var S=this.connected,C=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(S||C)&&(this.transport.close(),this.transport.clearTimeouts(),S?(this.publish("disconnect",N),N!="booted"&&this.options.reconnect&&!this.reconnecting&&this.reconnect()):this.publish("close_during_connecting",N))},T.prototype.reconnect=function(){function N(){if(C.connected){for(var V in C.namespaces)C.namespaces.hasOwnProperty(V)&&V!==""&&C.namespaces[V].packet({type:"connect"});C.publish("reconnect",C.transport.name,C.reconnectionAttempts)}clearTimeout(C.reconnectionTimer),C.removeListener("connect_failed",S),C.removeListener("connect",S),C.reconnecting=!1,delete C.reconnectionAttempts,delete C.reconnectionDelay,delete C.reconnectionTimer,delete C.redoTransports,C.options["try multiple transports"]=B}function S(){if(C.reconnecting)return C.connected?N():C.connecting&&C.reconnecting?C.reconnectionTimer=setTimeout(S,1e3):void(C.reconnectionAttempts++>=A?C.redoTransports?(C.publish("reconnect_failed"),N()):(C.on("connect_failed",S),C.options["try multiple transports"]=!0,C.transport=C.getTransport(),C.redoTransports=!0,C.connect()):(C.reconnectionDelay<J&&(C.reconnectionDelay*=2),C.connect(),C.publish("reconnecting",C.reconnectionDelay,C.reconnectionAttempts),C.reconnectionTimer=setTimeout(S,C.reconnectionDelay)))}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var C=this,A=this.options["max reconnection attempts"],B=this.options["try multiple transports"],J=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(S,this.reconnectionDelay),this.on("connect",S)}})(R!==void 0?R:K.exports,R!==void 0?R:K.parent.exports,P===void 0?window:P),(function(D,x){function b(k,N){this.socket=k,this.name=N||"",this.flags={},this.json=new T(this,"json"),this.ackPackets=0,this.acks={}}function T(k,N){this.namespace=k,this.name=N}D.SocketNamespace=b,x.util.mixin(b,x.EventEmitter),b.prototype.$emit=x.EventEmitter.prototype.emit,b.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},b.prototype.packet=function(k){return k.endpoint=this.name,this.socket.packet(k),this.flags={},this},b.prototype.send=function(k,N){var S={type:this.flags.json?"json":"message",data:k};return typeof N=="function"&&(S.id=++this.ackPackets,S.ack=!0,this.acks[S.id]=N),this.packet(S)},b.prototype.emit=function(k){var N=Array.prototype.slice.call(arguments,1),S=N[N.length-1],C={type:"event",name:k};return typeof S=="function"&&(C.id=++this.ackPackets,C.ack="data",this.acks[C.id]=S,N=N.slice(0,N.length-1)),C.args=N,this.packet(C)},b.prototype.disconnect=function(){return this.name===""?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},b.prototype.onPacket=function(k){function N(){S.packet({type:"ack",args:x.util.toArray(arguments),ackId:k.id})}var S=this;switch(k.type){case"connect":this.$emit("connect");break;case"disconnect":this.name===""?this.socket.onDisconnect(k.reason||"booted"):this.$emit("disconnect",k.reason||"");break;case"message":case"json":var C=["message",k.data];k.ack=="data"?C.push(N):k.ack&&this.packet({type:"ack",ackId:k.id}),this.$emit.apply(this,C);break;case"event":var C=[k.name].concat(k.args);k.ack=="data"&&C.push(N),this.$emit.apply(this,C);break;case"ack":this.acks[k.ackId]&&(this.acks[k.ackId].apply(this,k.args),delete this.acks[k.ackId]);break;case"error":k.advice?this.socket.onError(k):k.reason=="unauthorized"?this.$emit("connect_failed",k.reason):this.$emit("error",k.reason)}},T.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},T.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}})(R!==void 0?R:K.exports,R!==void 0?R:K.parent.exports),(function(D,x,b){function T(N){x.Transport.apply(this,arguments)}function k(){}D.websocket=T,x.util.inherit(T,x.Transport),T.prototype.name="websocket",T.prototype.open=function(N){var S,C=x.util.query(this.socket.options.query),A=this;return this.connectErrorCallback=N,S||(S=b.MozWebSocket||b.WebSocket),this.websocket=new S(this.prepareUrl(C)),this.websocket.onopen=function(){A.onOpen(),A.socket.setBuffer(!1)},this.websocket.onmessage=function(B){A.onData(B.data)},this.websocket.onclose=function(){A.onClose(),A.socket.setBuffer(!0)},this.websocket.onerror=function(B){A.onError(B)},this},T.prototype.send=function(N){return this.websocket.send(N),this},T.prototype.payload=function(N){for(var S=0,C=N.length;S<C;S++)this.packet(N[S]);return this},T.prototype.close=function(){return this.websocket.close(),this},T.prototype.onError=function(N){this.connectErrorCallback!==void 0&&(this.connectErrorCallback(),this.connectErrorCallback=void 0),this.socket.onError(N)},T.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},T.check=function(){return"WebSocket"in b&&!("__addTask"in WebSocket)||"MozWebSocket"in b},T.xdomainCheck=function(){return!0},T.prototype.clearEventHandlers=function(){return this.websocket&&(this.websocket.onopen=this.websocket.onmessage=this.websocket.onclose=this.websocket.onerror=k),this},x.transports.push("websocket")})(R!==void 0?R.Transport:K.exports,R!==void 0?R:K.parent.exports,P===void 0?window:P),(function(D,x,b){function T(N){N&&x.Transport.apply(this,arguments)}function k(){}D.XHR=T,x.util.inherit(T,x.Transport),T.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},T.prototype.payload=function(N){for(var S=[],C=0,A=N.length;C<A;C++)S.push(x.parser.encodePacket(N[C]));this.send(x.parser.encodePayload(S))},T.prototype.send=function(N){return this.post(N),this},T.prototype.post=function(N){function S(){this.readyState==4&&(this.onreadystatechange=k,this.status==200?(clearTimeout(this.ackTimeoutTimer),A.socket.setBuffer(!1)):A.onClose())}function C(){this.onload=k,A.socket.setBuffer(!1)}var A=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),b.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=C:this.sendXHR.onreadystatechange=S,this.sendXHR.send(N),A.sendXHR.ackTimeoutTimer=setTimeout(function(){A.onClose()},A.socket.options.ackTimeoutMs)},T.prototype.close=function(){return this.onClose(),this},T.prototype.request=function(N){var S=x.util.request(this.socket.isXDomain()),C=x.util.query(this.socket.options.query,"t="+ +new Date);S.open(N||"GET",this.prepareUrl(C),!0);var A=this.socket.options.requestHeaders;if(A!==void 0&&Object.keys(A).forEach(function(B){S.setRequestHeader(B,A[B])}),N=="POST")try{S.setRequestHeader?S.setRequestHeader("Content-type","text/plain;charset=UTF-8"):S.contentType="text/plain"}catch{}return S},T.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},T.check=function(N,S){try{var C=x.util.request(S),A=b.XDomainRequest&&C instanceof XDomainRequest,B=N&&N.options&&N.options.secure?"https:":"http:",J=B!=b.location.protocol;if(C&&(!A||!J))return!0}catch{}return!1},T.xdomainCheck=function(){return T.check(null,!0)},T.prototype.clearEventHandlers=function(){return this.sendXHR&&(this.sendXHR.onreadystatechange=this.sendXHR.onload=k),this}})(R!==void 0?R.Transport:K.exports,R!==void 0?R:K.parent.exports,P===void 0?window:P),(function(D,x,b){function T(){x.Transport.XHR.apply(this,arguments)}function k(){}D["xhr-polling"]=T,x.util.inherit(T,x.Transport.XHR),x.util.merge(T,x.Transport.XHR),T.prototype.name="xhr-polling",T.prototype.open=function(N){var S=this;return S.connectErrorCallback=N,x.Transport.XHR.prototype.open.call(S),!1},T.prototype.get=function(){function N(){this.readyState==4&&(this.onreadystatechange=k,this.status==200?(A.connectErrorCallback=void 0,A.onData(this.responseText),A.get()):(A.onClose(),A.connectErrorCallback!==void 0&&(A.connectErrorCallback(),A.connectErrorCallback=void 0)))}function S(){A.connectErrorCallback=void 0,this.onload=k,this.onerror=k,A.onData(this.responseText),A.get()}function C(){A.onClose(),A.connectErrorCallback!==void 0&&(A.connectErrorCallback(),A.connectErrorCallback=void 0)}if(this.isOpened){var A=this;this.xhr=this.request(),b.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=S,this.xhr.onerror=C):this.xhr.onreadystatechange=N,this.xhr.send(null)}},T.prototype.onClose=function(){if(x.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=k;try{this.xhr.abort()}catch{}this.xhr=null}},T.prototype.ready=function(N,S){var C=this;x.util.defer(function(){S.call(C)})},T.prototype.clearEventHandlers=function(){return x.Transport.XHR.prototype.clearEventHandlers.call(this),this.xhr&&(this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=k),this},x.transports.push("xhr-polling")})(R!==void 0?R.Transport:K.exports,R!==void 0?R:K.parent.exports,P===void 0?window:P),M.io=R}).call(M,Y(13),Y(14)($))},function($,M){var Y;Y=(function(){return this})();try{Y=Y||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(Y=window)}$.exports=Y},function($,M){$.exports=function(Y){return Y.webpackPolyfill||(Y.deprecate=function(){},Y.paths=[],Y.children||(Y.children=[]),Object.defineProperty(Y,"loaded",{enumerable:!0,get:function(){return Y.l}}),Object.defineProperty(Y,"id",{enumerable:!0,get:function(){return Y.i}}),Y.webpackPolyfill=1),Y}},function($,M,Y){Object.defineProperty(M,"__esModule",{value:!0}),M.ConnectionTracker=M.Properties=M.TrackerStep=M.ClientEventName=M.ResponseData=void 0;var P=Y(3),K=Y(1),R=Y(0),D=(function(){function C(A){this.id=A,this.status=200,this.headers={},this.body=""}return C})();M.ResponseData=D;var x;(function(C){C.Connected="trouter_js_client_connected",C.Disconnected="trouter_js_client_disconnected",C.Error="trouter_js_client_error",C.Progress="trouter_js_client_progress",C.Response="trouter_js_client_response",C.Request="trouter_js_client_request",C.CheckConnection="trouter_js_client_check_connection",C.Registration="trouter_js_client_registration",C.Unregistration="trouter_js_client_unregistration"})(x||(M.ClientEventName=x={}));var b=(function(){function C(A,B,J,V,L){this.stepName=A,this.operation=B,this.delta=J,this.ts=V,this.error=L}return C})();M.TrackerStep=b;var T=(function(){function C(){}return C})();M.Properties=T;var k=(function(){function C(){this.numberOfPingReplies=0,this.connectedTimestamp=0,this.isNewUrl=!1,this.transportType="",this.connectionNumber=0}return C})(),N=(function(){function C(){this.enabled=!1,this.numberOfStepsToMaintain=40,this.logHealthCheckError=!1,this.sendProgressTimeoutSecs=55,this.logSendPingError=!1,this.maxBackoffInMs=12e4,this.trouter_js_client_connected=!1,this.trouter_js_client_disconnected=!1,this.trouter_js_client_error=!1,this.trouter_js_client_progress=!1,this.trouter_js_client_response=!1,this.trouter_js_client_request=!1,this.trouter_js_client_registration=!1,this.trouter_js_client_unregistration=!1,this.trouter_js_client_check_connection=!0}return C})(),S=(function(){function C(A,B,J,V,L,H,ie){this.clientId=B,this.clientInfo=J,this.getServerState=V,this.endpointId=L,this.clientCorrelationID=H,this.environment=ie,this.logger=new R.Logger("ConnectionTracker",A),this.clientCorrelationID=H!==void 0?H:"",this.steps=[],this.connectionAttempt=0,this.totalStepCount=0,this.beginTimestamp=new P.Timespan,this.eventLogSettings=new N,this.connectedInfo=new k}return C.prototype.enable=function(A){this.eventLogSettings.enabled=!0,this.eventLogger=A},C.prototype.disable=function(){this.eventLogSettings.enabled=!1},C.prototype.sendProgress=function(A){this.steps.length>0&&this.sendTelemetry(x.Progress,A,this.steps)},C.prototype.cancelProgressTimer=function(){this.progressTimeout!==void 0&&(clearTimeout(this.progressTimeout),this.progressTimeout=void 0)},C.prototype.resetProgressSendTimer=function(){var A=this;this.cancelProgressTimer(),this.eventLogSettings.sendProgressTimeoutSecs!==void 0&&this.eventLogSettings.sendProgressTimeoutSecs>0&&(this.progressTimeout=setTimeout(function(){A.sendProgress({reason:"timeout",timeoutSecs:A.eventLogSettings.sendProgressTimeoutSecs})},1e3*this.eventLogSettings.sendProgressTimeoutSecs))},C.prototype.setConnectedInfo=function(A,B){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=Date.now(),this.connectedInfo.isNewUrl=A,this.connectedInfo.transportType=B,++this.connectedInfo.connectionNumber},C.prototype.clearConnectedInfo=function(){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=0,this.connectedInfo.isNewUrl=!0,this.connectedInfo.transportType=""},C.prototype.copyProperties=function(A,B){for(var J=0,V=Object.keys(B);J<V.length;J++){var L=V[J];B[L]!==void 0&&(A[L.replace(/-/g,"_")]={value:B[L]})}},C.prototype.increasePingResponseCount=function(){++this.connectedInfo.numberOfPingReplies},C.prototype.sendTelemetry=function(A,B,J){try{if(this.eventLogSettings.enabled===!0&&this.eventLogSettings[A]===!0&&this.eventLogger!==void 0){var V=this.getServerState(),L={name:A,properties:{connectionAttempt:{value:this.connectionAttempt},epid:{value:this.endpointId},clientCorrelationID:{value:this.clientCorrelationID},steps:{value:(0,P.toJson)(J)},clientID:{value:this.clientId},eventVersion:{value:3},environment:{value:this.environment},cv:{value:K.CLIENT_VERSION},ua:{value:this.clientInfo.ua},connectionId:{value:V.connectionId},connectedClientId:{value:V.connectedClientId},domId:{value:V.domId},url:{value:V.unsecureUrl},surl:{value:V.url},ttlInSecs:{value:V.getRemainingTtlInSec()},numberOfPingReplies:{value:this.connectedInfo.numberOfPingReplies},connectedTimestamp:{value:this.connectedInfo.connectedTimestamp},isNewUrl:{value:this.connectedInfo.isNewUrl},transportType:{value:this.connectedInfo.transportType},connectionNumber:{value:this.connectedInfo.connectionNumber}}};this.copyProperties(L.properties,B),this.eventLogger.logEvent(L)}}catch(H){this.logger.warn("error in sending event ".concat(A,": ").concat((0,P.toJson)(H)))}},C.prototype.createStep=function(A,B,J){return new b(A,B,this.beginTimestamp.duration,Date.now(),J)},C.prototype.addStep=function(A,B,J){if(this.eventLogSettings.enabled!==!1&&(this.steps.length===0&&this.beginTimestamp.reset(),this.steps.push(this.createStep(A,B,J)),++this.totalStepCount,this.eventLogSettings.numberOfStepsToMaintain!==void 0&&this.steps.length>this.eventLogSettings.numberOfStepsToMaintain)){var V=this.steps.slice(0);this.steps.length=0,this.sendTelemetry(x.Progress,{reason:"flush"},V)}},C.prototype.trackStart=function(A){this.addStep(A,"start")},C.prototype.trackEnd=function(A){this.addStep(A,"end")},C.prototype.trackError=function(A,B,J,V){J===void 0&&(J=!0),A==="health"&&this.eventLogSettings.logHealthCheckError!==!0||A==="ping"&&this.eventLogSettings.logSendPingError===!1||(V===void 0&&(V="error"),J===!0&&this.addStep(A,V,B),this.sendTelemetry(x.Error,{},[this.createStep(A,V,B)]))},C.prototype.trackProgress=function(A,B){this.addStep(A,B)},C.prototype.trackConnected=function(A,B){this.setConnectedInfo(A,B);var J=this.steps.slice(0),V=this.totalStepCount,L=this.beginTimestamp.duration;this.steps.length=0,this.totalStepCount=0,this.sendTelemetry(x.Connected,{stepCount:J.length,totalStepCount:V,connectionEstablishmentMs_Total:L},J),this.cancelProgressTimer()},C.prototype.getSessionLength=function(){return Date.now()-this.connectedInfo.connectedTimestamp},C.prototype.trackDisconnected=function(A){A.sessionLengthMS=this.getSessionLength(),this.sendTelemetry(x.Disconnected,A,[]),this.resetProgressSendTimer()},C.prototype.trackNewConnection=function(){++this.connectionAttempt},C.prototype.trackRequest=function(A,B){var J={};B!==void 0&&(J.hasError=!0,J.error=B);try{if(A){J.requestID=A.id,J.httpMethod=A.method,J.url=A.url,J.bodyLength=A.body.length,J.shortUrl=A.shortUrl,J.requestTimeStamp=A.startTS,J.correlationVector=A.correlationVector;for(var V=A.headers,L=0,H=Object.keys(V);L<H.length;L++){var ie=H[L];J[ie]=V[ie]}}}catch(te){J.hasError=!0,J.error="".concat(J.error," error creating request context ").concat((0,P.toJson)(te))}this.sendTelemetry(x.Request,J,[])},C.prototype.trackResponse=function(A,B,J,V){var L={};V!==void 0&&(L.hasError=!0,L.error=V);try{if(L.responseTimestamp=J!==void 0?J.sentTS:Date.now(),A){L.requestID=A.id,L.httpMethod=A.method,L.shortUrl=A.shortUrl,L.correlationVector=A.correlationVector;for(var H=A.headers,ie=0,te=Object.keys(H);ie<te.length;ie++){var W=te[ie];L[W]=H[W]}}J&&(L.latencyMS=B,L.responseCode=J.status,L.responseLength=J.body.length)}catch(ue){L.hasError=!0,L.error="".concat(L.error," error creating response context ").concat((0,P.toJson)(ue))}this.sendTelemetry(x.Response,L,[])},C.prototype.sendResponseError=function(A,B,J){this.trackResponse(B,void 0,J,A)},C.prototype.close=function(){this.sendProgress({reason:"closed"}),this.steps.length=0,this.cancelProgressTimer()},C.prototype.mergeSettings=function(A){if(A){this.eventLogSettings.numberOfStepsToMaintain=Math.min(40,Math.max(10,A.numberOfStepsToMaintain!==void 0?A.numberOfStepsToMaintain:0));var B=Math.min(3600,Math.max(55,A.sendProgressTimeoutSecs!==void 0?A.sendProgressTimeoutSecs:0));this.eventLogSettings.logHealthCheckError=A.logHealthCheckError,this.eventLogSettings.logSendPingError=A.logSendPingError;for(var J=0,V=Object.keys(x).map(function(H){return x[H]});J<V.length;J++){var L=V[J];A[L]!==void 0&&(this.eventLogSettings[L]=A[L])}this.eventLogSettings.sendProgressTimeoutSecs!==B&&(this.eventLogSettings.sendProgressTimeoutSecs=B,this.resetProgressSendTimer())}},C})();M.ConnectionTracker=S},function($,M,Y){Object.defineProperty(M,"__esModule",{value:!0}),M.DisconnectReason=void 0;var P=(function(){function K(R,D,x){this.reason=R,this.claims=D,this.details=x}return K.fromRawReason=function(R,D){if(R===""||R==="dup")return new K(R);try{var x=JSON.parse(R);return typeof x!="object"||x.reason===void 0?(D?.error("invalid disconnect reason format"),new K("unknown",void 0,R)):new K(x.reason,x.claims,x.details)}catch{return new K("disconnect",void 0,R)}},K.fromSocketIoEventData=function(R,D){return typeof D=="string"?new K(R,void 0,D):void 0},K.prototype.toTelemetryString=function(){return this.reason==="socketerror"||this.reason==="reconnecterror"||this.reason==="disconnect"?this.details:this.reason},K})();M.DisconnectReason=P},function($,M,Y){function P(R,D,x){if(R===void 0||D===void 0)return!1;var b=Date.now()-R;return b>D*x.tolerance&&b>x.minimumWaitMs}Object.defineProperty(M,"__esModule",{value:!0}),M.ExponentialBackoff=void 0;var K=(function(){function R(D,x,b){b===void 0&&(b={tolerance:2,minimumWaitMs:1e4}),this.logger=D,this.maxBackoffInMs=x,this.gapDetectionSettings=b,this.backoffId=0,this.backoffCount=0}return R.calculateNextBackoffMs=function(D,x){var b=1+.4*(Math.random()-.5),T=1e3*Math.pow(2,D)*b;return T=Math.round(T),Math.min(x,T)},R.prototype.setMaxBackoffMs=function(D){this.maxBackoffInMs=D},R.prototype.backoff=function(D,x){var b=this;if(this.timerHandle!==void 0&&(this.logger.debug("Clearing current back off"),clearTimeout(this.timerHandle),this.timerHandle=void 0),this.previousCompleteTime!==void 0){var T=Date.now()-this.previousCompleteTime;T>this.maxBackoffInMs*this.gapDetectionSettings.tolerance&&T>this.gapDetectionSettings.minimumWaitMs&&(this.logger.info("Back off for ".concat(D," with ID ").concat(this.backoffId," will be reset due to a lot of time having passed since the previous backoff (").concat(T," ms)")),this.backoffCount=0,this.previousCompleteTime=void 0)}var k=R.calculateNextBackoffMs(this.backoffCount,this.maxBackoffInMs);this.backoffId++,this.backoffCount++,this.logger.info("Backing off ".concat(D," for ").concat(k," milliseconds with ID ").concat(this.backoffId)),this.callback=function(S,C){P(S,C,b.gapDetectionSettings)&&(b.logger.info("Back off for ".concat(D," with ID ").concat(b.backoffId," will be reset due to the wait (").concat(Date.now()-(S??0)," ms) being longer than expected (").concat(C," ms)")),b.backoffCount=0),b.logger.info("Back off for ".concat(D," with ID ").concat(b.backoffId," complete, invoking handler")),b.timerHandle=void 0,b.callback=void 0,b.previousCompleteTime=Date.now(),x()};var N=Date.now();this.timerHandle=setTimeout(function(){var S;return(S=b.callback)===null||S===void 0?void 0:S.call(b,N,k)},k)},R.prototype.reset=function(){this.timerHandle!==void 0&&(this.logger.debug("Resetting back off with ID ".concat(this.backoffId)),clearTimeout(this.timerHandle),this.timerHandle=void 0,this.callback=void 0),this.backoffCount=0},R.prototype.expediteIfPending=function(){if(this.backoffCount=0,this.timerHandle!==void 0){this.logger.debug("Expediting back off with ID ".concat(this.backoffId)),clearTimeout(this.timerHandle),this.timerHandle=void 0;var D=this.callback;this.callback=void 0,D&&D()}},R})();M.ExponentialBackoff=K},function($,M,Y){var P=this&&this.__spreadArray||function(x,b,T){if(T||arguments.length===2)for(var k,N=0,S=b.length;N<S;N++)!k&&N in b||(k||(k=Array.prototype.slice.call(b,0,N)),k[N]=b[N]);return x.concat(k||Array.prototype.slice.call(b))};Object.defineProperty(M,"__esModule",{value:!0}),M.LoggingManagerConsumer=M.RegistrationEnforcer=void 0;var K=Y(6),R=(function(){function x(b,T,k){this.wrapped=b,this.shouldConnectionDependOnRegistration=T,this.shouldHoldBackEvents=k,this.isRegistered=!1,this.heldBackEvents=[]}return x.prototype.onDownstreamRequest=function(b,T,k){this.passIfRegisteredOrNotNeeded("onDownstreamRequest",b,T,k)},x.prototype.onConnected=function(b){this.passIfRegisteredOrNotNeeded("onConnected",b)},x.prototype.onRegistered=function(b){this.isRegistered=!0,this.wrapped.onRegistered(b),this.fireHeldBackEvents()},x.prototype.onUnregistered=function(b){this.isRegistered=!1,this.wrapped.onUnregistered(b),b.getState()===K.State.Connected&&this.shouldConnectionDependOnRegistration()&&b.forceReconnectDueToNoRegistration()},x.prototype.onReconnecting=function(b){this.wrapped.onReconnecting(b)},x.prototype.onReconnectIsRequired=function(b,T,k){this.wrapped.onReconnectIsRequired(b,T,k)},x.prototype.onDisconnected=function(b){this.isRegistered=!1,this.dropHeldBackEvents(),this.wrapped.onDisconnected(b)},x.prototype.onTerminalError=function(b){this.wrapped.onTerminalError(b)},x.prototype.onConnectionParametersUpdated=function(b){this.wrapped.onConnectionParametersUpdated(b)},x.prototype.onTrouterMessageLost=function(b){this.passIfRegisteredOrNotNeeded("onTrouterMessageLost",b)},x.prototype.onUserActivityStateAccepted=function(b){this.passIfRegisteredOrNotNeeded("onUserActivityStateAccepted",b)},x.prototype.onAudiencesSetResolved=function(b,T){this.passIfRegisteredOrNotNeeded("onAudiencesSetResolved",b,T)},x.prototype.getState=function(){return this.wrapped.getState()},x.prototype.holdBackEvent=function(b){for(var T=[],k=1;k<arguments.length;k++)T[k-1]=arguments[k];this.heldBackEvents.push({kind:b,args:T})},x.prototype.passIfRegisteredOrNotNeeded=function(b){for(var T,k=[],N=1;N<arguments.length;N++)k[N-1]=arguments[N];var S=this.shouldConnectionDependOnRegistration(),C=this.shouldHoldBackEvents();S&&C||this.fireHeldBackEvents(S?function(A){return A.kind!=="onConnected"}:void 0),this.isRegistered||!S||C===!1&&b!=="onConnected"?(T=this.wrapped)[b].apply(T,k):this.holdBackEvent.apply(this,P([b],k,!1))},x.prototype.fireHeldBackEvents=function(b){for(var T,k=0,N=this.heldBackEvents;k<N.length;k++){var S=N[k];(b===void 0||b(S))&&(T=this.wrapped)[S.kind].apply(T,S.args)}this.heldBackEvents=b===void 0?[]:this.heldBackEvents.filter(function(C){return!b(C)})},x.prototype.dropHeldBackEvents=function(){this.heldBackEvents=[]},x})();M.RegistrationEnforcer=R;var D=(function(){function x(b,T,k,N){this.wrapped=b,this.prefix=T,this.logger=k,this.onEventAction=N}return x.prototype.onEvent=function(b,T){var k;this.onEventAction!==void 0?this.onEventAction(b,T):((k=this.logger)!==null&&k!==void 0?k:console).log("".concat(this.prefix," TracingEnforcer: ").concat(b,"(").concat(T,")"))},x.prototype.onDownstreamRequest=function(b,T,k){this.onEvent("onDownstreamRequest",JSON.stringify({request:T,response:k})),this.wrapped.onDownstreamRequest(b,T,k)},x.prototype.onConnected=function(b){this.onEvent("onConnected",b.getState().toString()),this.wrapped.onConnected(b)},x.prototype.onRegistered=function(b){this.onEvent("onRegistered",b.getState().toString()),this.wrapped.onRegistered(b)},x.prototype.onUnregistered=function(b){this.onEvent("onUnregistered",b.getState().toString()),this.wrapped.onUnregistered(b)},x.prototype.onReconnecting=function(b){this.onEvent("onReconnecting",b.getState().toString()),this.wrapped.onReconnecting(b)},x.prototype.onReconnectIsRequired=function(b,T,k){this.onEvent("onReconnectIsRequired",JSON.stringify({connection:b.getState().toString(),useConnectParamsFromCache:T,reason:k})),this.wrapped.onReconnectIsRequired(b,T,k)},x.prototype.onDisconnected=function(b){this.onEvent("onDisconnected",b.getState().toString()),this.wrapped.onDisconnected(b)},x.prototype.onTerminalError=function(b){this.onEvent("onTerminalError",JSON.stringify({connection:b})),this.wrapped.onTerminalError(b)},x.prototype.onConnectionParametersUpdated=function(b){this.onEvent("onConnectionParametersUpdated",JSON.stringify({connectParams:b})),this.wrapped.onConnectionParametersUpdated(b)},x.prototype.onTrouterMessageLost=function(b){this.onEvent("onTrouterMessageLost",JSON.stringify({flowTags:b})),this.wrapped.onTrouterMessageLost(b)},x.prototype.onUserActivityStateAccepted=function(b){this.onEvent("onUserActivityStateAccepted",JSON.stringify({cv:b})),this.wrapped.onUserActivityStateAccepted(b)},x.prototype.onAudiencesSetResolved=function(b,T){this.onEvent("onAudiencesSetResolved",JSON.stringify({audienceSubscriptionsResponse:b,cv:T})),this.wrapped.onAudiencesSetResolved(b,T)},x.prototype.getState=function(){return this.wrapped.getState()},x})();M.LoggingManagerConsumer=D},function($,M,Y){Object.defineProperty(M,"__esModule",{value:!0}),M.TrouterManagerFsm=void 0;var P=Y(2),K=Y(4),R=Y(0),D=Y(7),x=(function(){function b(T,k){this.worker=k,this.state=K.TrouterManagerState.Unknown,this.logger=new R.Logger("ManagerFsm",T)}return b.prototype.start=function(){this.state===K.TrouterManagerState.Unknown?(this.setState(K.TrouterManagerState.Disconnected),this.worker.forceStopLingeringConnection(),this.worker.startFirstConnection()):(this.logger.info("start called in state '".concat(K.TrouterManagerState[this.state],"', expediting pending backoffs, if any")),this.worker.expediteBackoffOnConnections())},b.prototype.stop=function(T){this.state!==K.TrouterManagerState.Unknown?(this.setState(K.TrouterManagerState.Unknown),this.worker.stopFirstConnection(T===!0),this.worker.stopSecondConnection(T===!0)):this.showIgnored("stop")},b.prototype.getState=function(){switch(this.state){case K.TrouterManagerState.Unknown:case K.TrouterManagerState.Connected:case K.TrouterManagerState.Disconnected:case K.TrouterManagerState.Switching:return this.state;case K.TrouterManagerState.TerminalError:return P.TrouterState.Disconnected}},b.prototype.getInternalState=function(){return this.state},b.prototype.onConnected=function(T){this.state===K.TrouterManagerState.Disconnected&&T?this.worker.doesSecondConnectionExist()?this.setState(K.TrouterManagerState.Switching):(this.setState(K.TrouterManagerState.Connected),this.worker.dispatchConnected()):this.showIgnored("onConnected(".concat(T,")"))},b.prototype.onRegistered=function(T){this.state!==K.TrouterManagerState.Disconnected||T?this.state!==K.TrouterManagerState.Switching||T?this.state===K.TrouterManagerState.Disconnected&&T&&(this.setState(K.TrouterManagerState.Connected),this.worker.dispatchConnected()):(this.setState(K.TrouterManagerState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnectionDelayed(),this.worker.dispatchConnected()):(this.setState(K.TrouterManagerState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnection(!0),this.worker.dispatchConnected()),this.worker.dispatchRegistrationState(!0)},b.prototype.onUnregistered=function(T){T&&this.worker.dispatchRegistrationState(!1)},b.prototype.onReconnecting=function(T){this.state!==K.TrouterManagerState.Connected&&this.state!==K.TrouterManagerState.Switching||!T?this.showIgnored("onReconnecting(".concat(T,")")):(this.setState(K.TrouterManagerState.Disconnected),this.worker.dispatchDisconnected())},b.prototype.onReconnectionRequired=function(T,k,N){this.state===K.TrouterManagerState.Connected&&T?(this.setState(K.TrouterManagerState.Switching),this.worker.startSecondConnection(k)):this.state===K.TrouterManagerState.Disconnected&&T?this.worker.startSecondConnection(k):this.state===K.TrouterManagerState.Switching&&T&&N===D.ReconnectReason.Configuration?(this.logger.debug("onReconnectionRequired: switch requested while already in Switching state"),this.worker.stopSecondConnection(!0),this.worker.startSecondConnection(k)):this.showIgnored("onReconnectionRequired(".concat(T,")"))},b.prototype.onDisconnected=function(T){this.state==K.TrouterManagerState.Unknown&&T?this.worker.dispatchDisconnected():this.state==K.TrouterManagerState.Switching&&T?(this.worker.switchConnections(),this.worker.stopSecondConnection(!1),this.setState(K.TrouterManagerState.Disconnected),this.worker.dispatchDisconnected()):this.showIgnored("onDisconnected(".concat(T,")"))},b.prototype.onTerminalError=function(){this.setState(K.TrouterManagerState.TerminalError),this.worker.dispatchTerminalError()},b.prototype.showIgnored=function(T){this.logger.info("Ignoring event '".concat(T,"' in state '").concat(K.TrouterManagerState[this.state],"'"))},b.prototype.setState=function(T){if(this.logger.info("Switching from state '".concat(K.TrouterManagerState[this.state],"' to state '").concat(K.TrouterManagerState[T],"'")),this.state===T)return void this.logger.error("Attempt to switch to the current state '".concat(K.TrouterManagerState[T],"'"));this.state=T},b})();M.TrouterManagerFsm=x},function($,M,Y){function P(te,W){if(!W)return te;var ue=k(k({},te),{enabled:W.TelemetryEnabled});return W.ClientTelemetryEventEnabled!==void 0&&(ue=k(k({},ue),W.ClientTelemetryEventEnabled)),ue}function K(te,W,ue){var _e,ke,xe,Ne,qe,Qe,O,w,j,Z,q=function(se){return te.proxyUrlRewrite?(W.info("Using rewritten URL for proxy"),te.proxyUrlRewrite(se)):se};return{clientInfo:{ua:te.trouterSettings.productName,v:te.trouterSettings.version},ioOptions:{ackTimeoutMs:5e3,rewriteUrlForProxy:q},clientCorrelationID:te.trouterSettings.sessionId,environment:te.trouterSettings.environment,telemetrySettings:P(te.telemetryConfig.settings,ue),eventLogger:te.telemetryConfig.eventLogger,endpointId:te.trouterSettings.registrationId,trouterUrl:ue?.TrouterConnectionUrl||te.trouterSettings.trouterServiceUrl,registration:te.trouterSettings.registrarServiceUrl?{registrarUrl:te.trouterSettings.registrarServiceUrl,registrationId:(_e=te.trouterSettings.registrationId)!==null&&_e!==void 0?_e:"",pnhAppId:(ke=te.trouterSettings.pnhAppId)!==null&&ke!==void 0?ke:"",platform:(xe=te.trouterSettings.platform)!==null&&xe!==void 0?xe:"",pnhTemplateKey:(Ne=te.trouterSettings.pnhTemplate)!==null&&Ne!==void 0?Ne:"",platformUIVersion:(qe=te.trouterSettings.platformUIVersion)!==null&&qe!==void 0?qe:"",productContext:te.trouterSettings.pnhProductContext||void 0,context:(Qe=te.trouterSettings.pnhContext)!==null&&Qe!==void 0?Qe:"",registrarTtlSec:((O=te.trouterSettings.maxRegistrationTimeInMs)!==null&&O!==void 0?O:0)/1e3}:void 0,connectionDependsOnRegistration:te.trouterSettings.registrarServiceUrl===void 0?function(){return!1}:(w=te.trouterSettings.connectionDependsOnRegistration)!==null&&w!==void 0?w:function(){return!1},delayEventsUntilRegistered:(j=te.trouterSettings.delayEventsUntilRegistered)!==null&&j!==void 0?j:function(){return!1},timeoutOptions:k({connectionTimeoutMs:te.trouterSettings.trouterConnectTimeoutInMs||3e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:te.trouterSettings.productName==="TeamsCDL"?3e5:3e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},te.trouterSettings.timeoutOptions),incallTimeoutOptions:k({connectionTimeoutMs:1e4,fetchTimeoutMs:5e3,pingTimeoutMs:5e3,pongTimeoutMs:2e3,maxBackoffMs:te.trouterSettings.productName==="TeamsCDL"?3e5:1e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},te.trouterSettings.incallTimeoutOptions),incallModeTimeoutMs:(Z=te.trouterSettings.incallModeTimeoutMs)!==null&&Z!==void 0?Z:0,lingeringConnectionDelayMs:6e4,userActivitySecondResendDelayMs:te.trouterSettings.userActivitySecondResendDelayMs||1e4,duplicateDisconnectThresholdMs:1e4,connectionCache:te.connectionCache,registrationStateCallback:te.registrationStateCallbackForAcsDoNotUse,rewriteUrlForProxy:q,retryLimitOnTokenFetch:te.trouterSettings.retryLimitOnTokenFetch,extraConnectionHeaders:te.trouterSettings.extraConnectionHeaders,expediteBackoffOnStartMinimumDelayMs:1e4,toJSON:function(){return k(k({},this),{connectionCache:this.connectionCache?{}:this.connectionCache})}}}function R(te){return new ie(te)}function D(){return C.CLIENT_VERSION}function x(te,W){var ue=te.indexOf("://");if(ue>=0){var _e=te.indexOf("/",ue+3);if(_e>=0)return W+te.substr(_e)}return""}function b(te){var W=this;return function(ue){return N(W,void 0,void 0,function(){var _e;return S(this,function(ke){switch(ke.label){case 0:return _e={},[4,te(ue.needFresh)];case 1:return[2,(_e.token=ke.sent(),_e.tokenType="skype",_e)]}})})}}function T(te,W){var ue,_e=this;return function(ke){return N(_e,void 0,void 0,function(){var xe,Ne,qe;return S(this,function(Qe){switch(Qe.label){case 0:xe=new Date,Ne=setInterval(function(){var O=Math.round((Date.now()-xe.getTime())/6e4);te.warn("Note: Trouter auth token request promise from ".concat(xe.toISOString()," has not been resolved for ").concat(O," minutes. The client is blocked from operating properly"))},3e5),Qe.label=1;case 1:return Qe.trys.push([1,,3,4]),[4,W(ke)];case 2:return qe=Qe.sent(),ke.needFresh&&qe.token===ue&&te.error("API violation: Trouter auth token provider got a request with needRefresh=true, but returned the same token as last time anyway. Please fix the host app"),ue=qe.token,[2,qe];case 3:return clearInterval(Ne),[7];case 4:return[2]}})})}}var k=this&&this.__assign||function(){return k=Object.assign||function(te){for(var W,ue=1,_e=arguments.length;ue<_e;ue++){W=arguments[ue];for(var ke in W)Object.prototype.hasOwnProperty.call(W,ke)&&(te[ke]=W[ke])}return te},k.apply(this,arguments)},N=this&&this.__awaiter||function(te,W,ue,_e){function ke(xe){return xe instanceof ue?xe:new ue(function(Ne){Ne(xe)})}return new(ue||(ue=Promise))(function(xe,Ne){function qe(w){try{O(_e.next(w))}catch(j){Ne(j)}}function Qe(w){try{O(_e.throw(w))}catch(j){Ne(j)}}function O(w){w.done?xe(w.value):ke(w.value).then(qe,Qe)}O((_e=_e.apply(te,W||[])).next())})},S=this&&this.__generator||function(te,W){function ue(O){return function(w){return _e([O,w])}}function _e(O){if(ke)throw new TypeError("Generator is already executing.");for(;qe&&(qe=0,O[0]&&(Qe=0)),Qe;)try{if(ke=1,xe&&(Ne=2&O[0]?xe.return:O[0]?xe.throw||((Ne=xe.return)&&Ne.call(xe),0):xe.next)&&!(Ne=Ne.call(xe,O[1])).done)return Ne;switch(xe=0,Ne&&(O=[2&O[0],Ne.value]),O[0]){case 0:case 1:Ne=O;break;case 4:return Qe.label++,{value:O[1],done:!1};case 5:Qe.label++,xe=O[1],O=[0];continue;case 7:O=Qe.ops.pop(),Qe.trys.pop();continue;default:if(Ne=Qe.trys,!(Ne=Ne.length>0&&Ne[Ne.length-1])&&(O[0]===6||O[0]===2)){Qe=0;continue}if(O[0]===3&&(!Ne||O[1]>Ne[0]&&O[1]<Ne[3])){Qe.label=O[1];break}if(O[0]===6&&Qe.label<Ne[1]){Qe.label=Ne[1],Ne=O;break}if(Ne&&Qe.label<Ne[2]){Qe.label=Ne[2],Qe.ops.push(O);break}Ne[2]&&Qe.ops.pop(),Qe.trys.pop();continue}O=W.call(te,Qe)}catch(w){O=[6,w],xe=0}finally{ke=Ne=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}var ke,xe,Ne,qe,Qe={label:0,sent:function(){if(1&Ne[0])throw Ne[1];return Ne[1]},trys:[],ops:[]};return qe={next:ue(0),throw:ue(1),return:ue(2)},typeof Symbol=="function"&&(qe[Symbol.iterator]=function(){return this}),qe};Object.defineProperty(M,"__esModule",{value:!0}),M.replaceTrouterUrlBase=M.getTrouterServiceVersion=M.createTrouterService=M.TrouterService=M.UserActivityState=M.TrouterState=void 0;var C=Y(1),A=Y(2);Object.defineProperty(M,"TrouterState",{enumerable:!0,get:function(){return A.TrouterState}}),Object.defineProperty(M,"UserActivityState",{enumerable:!0,get:function(){return A.UserActivityState}});var B=Y(0),J=Y(8),V=Y(9),L=Y(10),H=Y(11),ie=(function(){function te(W){this.logProvider=W,this.stateChangedListeners=[],this.logger=new B.Logger("Trouter",W),this.trouterUrlPromise=new H.TrouterUrlPromise(W),this.messageHandlers=new J.MessageHandlerRegistry(W),this.listeners={},this.connectionInfo=null,this.logger.info("Created TrouterService version ".concat(C.CLIENT_VERSION))}return te.prototype.start=function(W){var ue;if(this.logger.info("Start"),!W.skypeTokenProvider&&!W.authTokenProvider)throw new Error("no token provider has been configured, either skypeTokenProvider or authTokenProvider must be populated");W.skypeTokenProvider&&!W.trouterSettings.disableInternalSkypeTokenCache&&(W.skypeTokenProvider=(0,V.addCacheAsBackupTo)(W.skypeTokenProvider)),this.trouterCfg=W;var _e=K(W,this.logger,this.ecsCfg);W.internalEnableV4cProtocol===!1&&(_e.forceV4aProtocol=!0);var ke=T(this.logger,(ue=W.authTokenProvider)!==null&&ue!==void 0?ue:b(W.skypeTokenProvider));this.trouterServer===void 0&&(this.trouterServer=new L.TrouterManager(this.logProvider,_e,ke,W.authTokenProvider===void 0,this)),this.pendingActivityState!==void 0&&(this.trouterServer.setUserActivityState(this.pendingActivityState[0],this.pendingActivityState[1]),this.pendingActivityState=void 0),this.trouterServer.start()},te.prototype.stop=function(W){this.logger.info("close connection"),this.trouterUrlPromise.rejectUrl(new Error("TrouterService is stopped")),this.trouterServer!==void 0&&this.trouterServer.stop(W)},te.prototype.setEcsConfig=function(W){return N(this,void 0,void 0,function(){var ue=this;return S(this,function(_e){return[2,new Promise(function(ke){if(ue.ecsCfg=W.TrouterJScriptClient,ue.logger.info("Setting ECS configuration to ".concat(JSON.stringify(ue.ecsCfg))),ue.trouterServer!==void 0&&ue.trouterCfg!==void 0){var xe=K(ue.trouterCfg,ue.logger,ue.ecsCfg);ue.trouterServer.configure(xe)}ke()})]})})},te.prototype.checkConnection=function(W){this.trouterServer!==void 0&&this.trouterServer.checkConnection(W!=null&&W)},te.prototype.resendRegistration=function(){return N(this,void 0,void 0,function(){return S(this,function(W){if(!this.trouterServer)throw new Error("resendRegistration called too early");return[2,this.trouterServer.resendRegistration()]})})},te.prototype.registerListener=function(W,ue){return ue===""||!ue.startsWith("/")||ue.includes("?")||ue.includes("#")?(this.logger.error("Listener path '".concat(ue,"' is not valid")),!1):this.listeners[ue]?(this.logger.error("Another listener is already registered for path '".concat(ue,"'")),!1):(this.listeners[ue]=W,this.logger.debug("Listener for path '".concat(ue,"' registered")),this.connectionInfo&&W.onTrouterConnected(this.connectionInfo.baseEndpointUrl+ue,this.connectionInfo),!0)},te.prototype.unregisterListener=function(W){for(var ue=[],_e=0,ke=Object.keys(this.listeners);_e<ke.length;_e++){var xe=ke[_e];this.listeners[xe]===W&&ue.push(xe)}if(ue.length===0)return!1;for(var Ne=0,qe=ue;Ne<qe.length;Ne++){var xe=qe[Ne];delete this.listeners[xe]}return this.logger.debug("Listener for path(s) '".concat(ue.join("', '"),"' unregistered")),!0},te.prototype.onTrouterConnected=function(W,ue){this.logger.debug("Trouter is now connected");for(var _e=0,ke=Object.keys(this.listeners);_e<ke.length;_e++){var xe=ke[_e];try{this.listeners[xe].onTrouterConnected(ue.baseEndpointUrl+xe,ue)}catch(Ne){this.logger.error("Listener '".concat(xe,"' threw an exception from onTrouterConnected(): ").concat(Ne))}}this.connectionInfo=ue,this.trouterUrlPromise.resolveUrl(W),this.notifyStateChanged(A.TrouterState.Connected,{url:W,getRemainingTtlInSec:function(){return ue.connectionTtlSec}})},te.prototype.onTrouterDisconnected=function(){this.logger.debug("Trouter is now disconnected"),this.connectionInfo=null;for(var W=0,ue=Object.keys(this.listeners);W<ue.length;W++){var _e=ue[W],ke=this.listeners[_e];if(ke.onTrouterDisconnected)try{ke.onTrouterDisconnected()}catch(xe){this.logger.error("Listener '".concat(_e,"' threw an exception from onTrouterDisconnected(): ").concat(xe))}}this.notifyStateChanged(A.TrouterState.Disconnected)},te.prototype.onTrouterRequest=function(W,ue){for(var _e="",ke=0,xe=Object.keys(this.listeners);ke<xe.length;ke++){var Ne=xe[ke];W.path.startsWith(Ne)&&Ne.length>_e.length&&(_e=Ne)}if(_e==="")this.tryMessageHandlers(W,ue)||(ue.status=404,ue.headers={"Trouter-Responder":"ClientLib"},ue.send());else try{this.listeners[_e].onTrouterRequest(W,ue)}catch(qe){this.logger.error("Listener '".concat(_e,"' threw an exception from onTrouterRequest(): ").concat(qe)),ue.status=500,ue.headers={"Trouter-Responder":"ClientLib"},ue.send()}},te.prototype.onTrouterMessageLoss=function(W){this.logger.info("onTrouterMessageLoss called with tags [".concat(W,"]"));for(var ue=!0,_e=0,ke=Object.keys(this.listeners);_e<ke.length;_e++){var xe=ke[_e],Ne=this.listeners[xe];if(Ne.onTrouterMessageLoss)try{ue=Ne.onTrouterMessageLoss(W)&&ue,ue===void 0&&(this.logger.error("Listener '".concat(xe,"' did not return a boolean value from onTrouterMessageLoss()")),ue=!1)}catch(qe){this.logger.error("Listener '".concat(xe,"' threw an exception from onTrouterMessageLoss(): ").concat(qe)),ue=!1}}return ue},te.prototype.onTrouterUserActivityStateAccepted=function(W){this.logger.debug("onTrouterUserActivityStateAccepted cv: ".concat(W));for(var ue=0,_e=Object.keys(this.listeners);ue<_e.length;ue++){var ke=_e[ue],xe=this.listeners[ke];if(xe.onTrouterUserActivityStateAccepted)try{xe.onTrouterUserActivityStateAccepted(W)}catch(Ne){this.logger.error("Listener '".concat(ke,"' threw an exception from onTrouterUserActivityStateAccepted(): ").concat(Ne))}}},te.prototype.onAudiencesSetResolved=function(W,ue){this.logger.debug("onAudiencesSetResolved cv: ".concat(ue));for(var _e=0,ke=Object.keys(this.listeners);_e<ke.length;_e++){var xe=ke[_e],Ne=this.listeners[xe];if(Ne.onAudiencesSetResolved)try{Ne.onAudiencesSetResolved(W,ue)}catch(qe){this.logger.error("Listener '".concat(xe,"' threw an exception from onAudienceSubscribed(): ").concat(qe))}}},te.prototype.setUserActivityState=function(W,ue){if(W!==A.UserActivityState.Active&&W!==A.UserActivityState.Inactive)throw new Error("setUserActivityState called with unsupported value ".concat(W));this.logger.info("setUserActivityState called with value ".concat(A.UserActivityState[W])),this.trouterServer&&this.state()!==A.TrouterState.Unknown?this.trouterServer.setUserActivityState(W,ue):(this.pendingActivityState=[W,ue],this.logger.warn("setUserActivityState called before start() or after stop()"))},te.prototype.setAudienceSubscriptions=function(W,ue){if(W.audienceSubscriptions.length>1)throw new Error("Only singular audience subscription is supported");if(this.trouterServer&&this.state()!==A.TrouterState.Unknown)return this.trouterServer.setAudienceSubscriptionsAsync(W,15e3,ue);throw new Error("audience subscribe called before start() or after stop()")},te.prototype.state=function(){return this.trouterServer!==void 0?this.trouterServer.getState():A.TrouterState.Unknown},te.prototype.isInTerminalState=function(){return this.trouterServer!==void 0&&this.trouterServer.isInTerminalState()},te.prototype.reportStateInfo=function(){return this.trouterServer===void 0?"":this.trouterServer.reportStateInfo()},te.prototype.getServerState=function(){if(this.trouterServer!==void 0)return this.trouterServer.getServerState()},te.prototype.getTrouterUrlAsync=function(){return this.trouterServer!==void 0?this.trouterUrlPromise.getPromise():Promise.reject(new Error("TrouterService has not been started"))},te.prototype.onStateChanged=function(W){if(this.logger.info("onStateChanged called"),W===void 0)this.stateChangedListeners=this.stateChangedListeners.filter(function(_e){return _e.wrappedCallback===void 0});else{this.offStateChanged(W);var ue=function(_e,ke){W(_e,ke?ke.url:"")};ue.wrappedCallback=W,this.stateChangedListeners.push(ue)}},te.prototype.offStateChanged=function(W){this.logger.info("offStateChanged called");var ue=this.stateChangedListeners.length;return this.stateChangedListeners=this.stateChangedListeners.filter(function(_e){return _e.wrappedCallback!==W}),ue>this.stateChangedListeners.length},te.prototype.addCallback=function(W){this.logger.info("addListener called"),this.stateChangedListeners.indexOf(W,0)===-1&&W!==void 0&&this.stateChangedListeners.push(W)},te.prototype.removeCallback=function(W){this.logger.info("removeListener called");var ue=this.stateChangedListeners.indexOf(W,0);return ue>-1&&(this.stateChangedListeners.splice(ue,1),!0)},te.prototype.registerMessageHandler=function(W){this.logger.info("registerMessageHandler is called"),this.messageHandlers.register(W)},te.prototype.clearMessageHandlers=function(){this.logger.info("clearMessageHandlers is called"),this.messageHandlers.clear()},te.prototype.notifyStateChanged=function(W,ue){var _e=this;this.logger.info("notifyStateChanged called, will forward to ".concat(this.stateChangedListeners.length," listeners")),this.stateChangedListeners.forEach(function(ke){try{ke(W,ue)}catch(xe){_e.logger.error("Error in callback ".concat(xe))}})},te.prototype.tryMessageHandlers=function(W,ue){if(!this.messageHandlers.active())return!1;var _e,ke=null;try{_e=JSON.parse(W.body),ke=_e&&(_e.evt||_e.eventId)||null}catch{}var xe={eventId:ke,url:(this.connectionInfo?this.connectionInfo.baseEndpointUrl:"")+W.path,body:_e,rawBody:W.body,headers:W.headers},Ne=this.messageHandlers.handleMessage(xe);return!!Ne.isHandled&&(ue.status=Ne.resultCode,Ne.responseHeaders&&(ue.headers=Ne.responseHeaders),Ne.responseBody&&(ue.body=Ne.responseBody),ue.send(),!0)},te})();M.TrouterService=ie,M.createTrouterService=R,M.getTrouterServiceVersion=D,M.replaceTrouterUrlBase=x},function($,M){$.exports=De}])})});E(U);var re=I(function(Oe,Te){Object.defineProperty(Te,"__esModule",{value:!0}),Te.DeleteReason=void 0;var De;(function($){$.DeletedByPolicy="deletedByPolicy",$.DeletedByUser="deletedByUser"})(De||(Te.DeleteReason=De={}))});E(re),re.DeleteReason;var X=I(function(Oe,Te){Object.defineProperty(Te,"__esModule",{value:!0}),Te.PACKAGE_VERSION=Te.CONFIG_API_VERSION=Te.EudbCountries=Te.CloudPrefix=Te.CloudType=Te.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES=void 0,Te.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES=3;var De;(function(M){M.Public="Public",M.GccHigh="GCC High",M.Dod="DoD"})(De||(Te.CloudType=De={}));var $;(function(M){M.OrgId="orgid",M.Acs="acs",M.Spool="spool",M.GccHigh="gcch",M.GccHighAcs="gcch-acs",M.Dod="dod",M.DodAcs="dod-acs"})($||(Te.CloudPrefix=$={})),Te.EudbCountries=["europe","france","germany","norway","switzerland","sweden"],Te.CONFIG_API_VERSION="2024-09-01",Te.PACKAGE_VERSION="1.0.0-beta.34"});E(X),X.PACKAGE_VERSION,X.CONFIG_API_VERSION,X.EudbCountries,X.CloudPrefix,X.CloudType,X.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES;var ve=re,pe=X,oe=I(function(Oe,Te){var De=y&&y.__awaiter||function(O,w,j,Z){function q(se){return se instanceof j?se:new j(function(ye){ye(se)})}return new(j||(j=Promise))(function(se,ye){function Ie(ze){try{Ue(Z.next(ze))}catch(lt){ye(lt)}}function Me(ze){try{Ue(Z.throw(ze))}catch(lt){ye(lt)}}function Ue(ze){ze.done?se(ze.value):q(ze.value).then(Ie,Me)}Ue((Z=Z.apply(O,w||[])).next())})};Object.defineProperty(Te,"__esModule",{value:!0}),Te.isEudbLocation=Te.parseTokenCredential=Te.base64decode=Te.toTelemetrySender=Te.toLogProvider=Te.toMessageHandler=void 0,Te.generateUuid=Ne;const $=new Map([["chatMessageReceived",200],["typingIndicatorReceived",245],["readReceiptReceived",246],["chatMessageEdited",247],["chatMessageDeleted",248],["chatThreadCreated",257],["chatThreadPropertiesUpdated",258],["chatThreadDeleted",259],["participantsAdded",260],["participantsRemoved",261]]),M="8:orgid:",Y="8:dod:",P="8:gcch:",K="8:teamsvisitor:",R="4:",D="8:acs:",x="8:gcch-acs:",b="8:dod-acs:",T="8:spool:",k=(O,w,j,Z)=>{const q=$.get(O);return{handleMessage(se){let ye=null;if(se?.rawBody&&(ye=JSON.parse(se.rawBody)),ye===null||ye.eventId!==q)return;const Ie=C(O,ye,j,Z);if(Ie!==null)return w(Ie),{isHandled:!0,resultCode:200}}}};Te.toMessageHandler=k;function N(O,w,j){return{threadId:O.groupId,sender:H(O.senderId),senderDisplayName:O.senderDisplayName,recipient:H(O.recipientMri),id:O.messageId,createdOn:new Date(O.originalArrivalTime),version:O.version,type:O.messageType,message:O.messageBody,metadata:ie(O.acsChatMessageMetadata)||{},attachments:ue(ie(O.attachments)||[],w,j)}}function S(O,w,j){return Object.assign(Object.assign({},N(O,w,j)),{editedOn:new Date(O.edittime)})}const C=(O,w,j,Z)=>{if(O==="chatMessageReceived")return N(w,j,Z);if(O==="chatMessageEdited")return S(w,j,Z);if(O==="chatMessageDeleted"){const q=w;return{threadId:q.groupId,sender:H(q.senderId),senderDisplayName:q.senderDisplayName,recipient:H(q.recipientMri),id:q.messageId,createdOn:new Date(q.originalArrivalTime),version:q.version,deletedOn:new Date(q.deletetime),type:q.messageType}}if(O==="typingIndicatorReceived"){const q=w;return{threadId:q.groupId,sender:H(q.senderId),senderDisplayName:q.senderDisplayName,recipient:H(q.recipientMri),version:q.version,receivedOn:new Date(q.originalArrivalTime)}}if(O==="readReceiptReceived"){const q=w,ye=JSON.parse(q.messageBody).consumptionhorizon.split(";");return{threadId:q.groupId,sender:H(q.senderId),senderDisplayName:"",recipient:H(q.recipientMri),chatMessageId:q.messageId,readOn:new Date(+ye[1])}}if(O==="chatThreadCreated"){const q=w,se=JSON.parse(unescape(q.createdBy)),ye=JSON.parse(unescape(q.members)),Ie=A(se),Me=ye.map(ze=>A(ze));return{threadId:q.threadId,createdOn:new Date(q.createTime),createdBy:Ie,version:q.version,participants:Me,properties:B(JSON.parse(unescape(q.properties))),retentionPolicy:J(JSON.parse(unescape(q.properties)))}}if(O==="chatThreadPropertiesUpdated"){const q=w,se=JSON.parse(unescape(q.editedBy)),ye=A(se);return{threadId:q.threadId,updatedOn:new Date(q.editTime),updatedBy:ye,version:q.version,properties:B(JSON.parse(unescape(q.properties))),retentionPolicy:J(JSON.parse(unescape(q.properties)))}}if(O==="chatThreadDeleted"){const q=w,se=w.reason==ve.DeleteReason.DeletedByPolicy?null:A(JSON.parse(unescape(q.deletedBy)));return{threadId:q.threadId,deletedOn:new Date(q.deleteTime),deletedBy:se,version:q.version,reason:q.reason}}if(O==="participantsAdded"){const q=w,se=JSON.parse(unescape(q.addedBy)),ye=JSON.parse(unescape(q.participantsAdded)),Ie=A(se),Me=ye.map(ze=>A(ze));return{threadId:q.threadId,addedOn:new Date(q.time),addedBy:Ie,version:q.version,participantsAdded:Me}}if(O==="participantsRemoved"){const q=w,se=JSON.parse(unescape(q.removedBy)),ye=JSON.parse(unescape(q.participantsRemoved)),Ie=A(se),Me=ye.map(ze=>A(ze));return{threadId:q.threadId,removedOn:new Date(q.time),removedBy:Ie,version:q.version,participantsRemoved:Me}}return null},A=O=>{var w;const j={id:H(O.participantId),displayName:O.displayName,metadata:ie((w=O.memberMetaData)!==null&&w!==void 0?w:"")||{}};return O.shareHistoryTime&&(j.shareHistoryTime=new Date(O.shareHistoryTime)),j},B=O=>{var w;return{topic:O.topic,metadata:ie((w=O.acsChatThreadMetadata)!==null&&w!==void 0?w:"")||{}}},J=O=>{const w=O.retentionPolicy;if(!w)return{kind:"none"};let j;try{j=JSON.parse(w)}catch{return{kind:"none"}}if(j.retentionPolicyType==="DeleteAfterCreationTime"&&typeof j.executeAfter=="string"){const Z=j.executeAfter.trim().replace(/^[+-]/,""),q=Z.includes(".")?Z.split(".")[0]:"0",se=parseInt(q,10);return{kind:"threadCreationDate",deleteThreadAfterDays:isNaN(se)?0:se}}return{kind:"none"}},V=O=>({log:(...w)=>O.info(w),warn:(...w)=>O.warning(w),error:(...w)=>O.error(w),debug:(...w)=>O.verbose(w),info:(...w)=>O.verbose(w)});Te.toLogProvider=V;const L=O=>({logEvent:w=>O.info(w)});Te.toTelemetrySender=L;const H=O=>O.startsWith(M)?{kind:"microsoftTeamsUser",rawId:O,microsoftTeamsUserId:O.substring(M.length),isAnonymous:!1,cloud:"public"}:O.startsWith(Y)?{kind:"microsoftTeamsUser",rawId:O,microsoftTeamsUserId:O.substring(Y.length),isAnonymous:!1,cloud:"dod"}:O.startsWith(P)?{kind:"microsoftTeamsUser",rawId:O,microsoftTeamsUserId:O.substring(P.length),isAnonymous:!1,cloud:"gcch"}:O.startsWith(K)?{kind:"microsoftTeamsUser",rawId:O,microsoftTeamsUserId:O.substring(K.length),isAnonymous:!0}:O.startsWith(R)?{kind:"phoneNumber",rawId:O,phoneNumber:O.substring(R.length)}:O.startsWith(D)||O.startsWith(x)||O.startsWith(b)||O.startsWith(T)?{kind:"communicationUser",communicationUserId:O}:{kind:"unknown",id:O},ie=O=>{if(!(O==null||O===""||O==="null"||O==="{}"||O==="[]"))return JSON.parse(O)},te=(O,w,j)=>{let Z;try{Z=new URL(O),(Z.protocol==="http:"||Z.protocol==="https:")&&(Z=new URL(Z.pathname,w))}catch{try{Z=new URL(O,w)}catch{return O}}return Z.searchParams.set("api-version",j),Z.toString()},W=O=>{let w;try{w=new URL(O)}catch{return!1}return w.protocol==="http:"||w.protocol==="https:"},ue=(O,w,j)=>(w==null||w===""||!W(w)||O.filter(Z=>Z.attachmentType.toLowerCase()==="image".toLowerCase()).map(Z=>{Z.previewUrl&&(Z.previewUrl=te(Z.previewUrl,w,j)),Z.url&&(Z.url=te(Z.url,w,j))}),O),_e=O=>p.default.isNodeLike?Buffer.from(O,"base64").toString():atob(O);Te.base64decode=_e;const ke=O=>{let[,w]=O?.split(".");if(w===void 0)throw new Error("Invalid token");return w=w.replace(/-/g,"+").replace(/_/g,"/"),JSON.parse(decodeURIComponent(escape((0,Te.base64decode)(w))))},xe=O=>De(void 0,void 0,void 0,function*(){const w=yield O.getToken(),j=w?.token,Z=ke(j),q=Z.skypeid,se=Z.resourceId,ye=Qe(q),Ie=Z.resourceLocation||"";return{jwtToken:j,acsResourceId:se,identityMri:q,cloudType:ye,resourceLocation:Ie}});Te.parseTokenCredential=xe;function Ne(){return(0,d.default.v4)()}const qe=O=>!!O&&!!pe.EudbCountries.find(w=>w===O);Te.isEudbLocation=qe;function Qe(O){switch(O.substring(0,O.indexOf(":"))){case pe.CloudPrefix.OrgId:case pe.CloudPrefix.Acs:case pe.CloudPrefix.Spool:return pe.CloudType.Public;case pe.CloudPrefix.GccHigh:case pe.CloudPrefix.GccHighAcs:return pe.CloudType.GccHigh;case pe.CloudPrefix.Dod:case pe.CloudPrefix.DodAcs:return pe.CloudType.Dod;default:return pe.CloudType.Public}}});E(oe),oe.isEudbLocation,oe.parseTokenCredential,oe.base64decode,oe.toTelemetrySender,oe.toLogProvider,oe.toMessageHandler,oe.generateUuid;var ee=I(function(Oe,Te){var De=y&&y.__createBinding||(Object.create?(function(D,x,b,T){T===void 0&&(T=b);var k=Object.getOwnPropertyDescriptor(x,b);(!k||("get"in k?!x.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return x[b]}}),Object.defineProperty(D,T,k)}):(function(D,x,b,T){T===void 0&&(T=b),D[T]=x[b]})),$=y&&y.__setModuleDefault||(Object.create?(function(D,x){Object.defineProperty(D,"default",{enumerable:!0,value:x})}):function(D,x){D.default=x}),M=y&&y.__importStar||function(D){if(D&&D.__esModule)return D;var x={};if(D!=null)for(var b in D)b!=="default"&&Object.prototype.hasOwnProperty.call(D,b)&&De(x,D,b);return $(x,D),x},Y=y&&y.__awaiter||function(D,x,b,T){function k(N){return N instanceof b?N:new b(function(S){S(N)})}return new(b||(b=Promise))(function(N,S){function C(J){try{B(T.next(J))}catch(V){S(V)}}function A(J){try{B(T.throw(J))}catch(V){S(V)}}function B(J){J.done?N(J.value):k(J.value).then(C,A)}B((T=T.apply(D,x||[])).next())})};Object.defineProperty(Te,"__esModule",{value:!0}),Te.RealTimeNotificationConfiguration=Te.TrouterConfigClient=void 0;const P=M(m.default);class K extends P.ServiceClient{constructor(x,b){b||(b={});const T=`azsdk-js-communication-signaling/${pe.PACKAGE_VERSION}`,k=b.userAgentOptions&&b.userAgentOptions.userAgentPrefix?`${b.userAgentOptions.userAgentPrefix} ${T}`:`${T}`,N=Object.assign(Object.assign({},b),{userAgentOptions:{userAgentPrefix:k},additionalPolicies:b.additionalPolicies});super(N),this.apiVersion=pe.CONFIG_API_VERSION,this.endpoint=x,this.httpClient=(0,g.default.createDefaultHttpClient)()}fetchServiceUrls(x){return Y(this,void 0,void 0,function*(){try{const b=(yield x.getToken()).token,T=(0,g.default.createPipelineRequest)({url:`${this.endpoint}/chat/config/realTimeNotifications?api-version=${this.apiVersion}`,method:"GET",headers:(0,g.default.createHttpHeaders)({Authorization:`Bearer ${b}`})}),k=yield this.pipeline.sendRequest(this.httpClient,T);if(k.status!==200||!k.bodyAsText)throw new Error(`Failed to fetch service URLs. Status: ${k.status}, Body: ${k.bodyAsText||"No response body"}`);const N=JSON.parse(k.bodyAsText);if(!N.trouterServiceUrl||!N.registrarServiceUrl||!N.cloudType)throw new Error("One or more required fields are missing in the response data");return new R(N.trouterServiceUrl,N.registrarServiceUrl,N.cloudType)}catch(b){throw new Error(`Error fetching real-time notification configuration from Chat Gateway: ${b.message}`)}})}}Te.TrouterConfigClient=K;class R{constructor(x,b,T){this.trouterServiceUrl=x,this.registrarServiceUrl=b,this.cloudType=T}}Te.RealTimeNotificationConfiguration=R});E(ee),ee.RealTimeNotificationConfiguration,ee.TrouterConfigClient;var ae=oe,le=ee,ne=I(function(Oe,Te){var De=y&&y.__awaiter||function(Y,P,K,R){function D(x){return x instanceof K?x:new K(function(b){b(x)})}return new(K||(K=Promise))(function(x,b){function T(S){try{N(R.next(S))}catch(C){b(C)}}function k(S){try{N(R.throw(S))}catch(C){b(C)}}function N(S){S.done?x(S.value):D(S.value).then(T,k)}N((R=R.apply(Y,P||[])).next())})};Object.defineProperty(Te,"__esModule",{value:!0}),Te.defaultTelemetrySettings=Te.createSettings=void 0;const $={version:"1.0.0",registrationId:"",sessionId:"",pnhAppId:"AcsWeb",pnhTemplate:"AcsWeb_Chat_2.1",platform:"SPOOL",platformUIVersion:"0.0.0",environment:"",productName:"acs-chat-web",trouterServiceUrl:"",registrarServiceUrl:"",registrarRefreshTimeoutInMs:35e4,timeoutOptions:{connectionTimeoutMs:2e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:5e4,requestTimeoutMs:5e3},maxRegistrationTimeInMs:72e5},M=(Y,P)=>De(void 0,void 0,void 0,function*(){var K;const R=P?.resourceEndpoint;if(R===void 0)throw new Error("'endpoint' cannot be null");const D=Object.assign({},$);D.registrationId=(0,ae.generateUuid)(),D.sessionId=(0,ae.generateUuid)();const b=yield new le.TrouterConfigClient(R,P).fetchServiceUrls(Y);return D.trouterServiceUrl=`${b.trouterServiceUrl}/v4/a`,D.registrarServiceUrl=`${b.registrarServiceUrl}/v3/registrations`,b.cloudType==="int"&&(D.pnhAppId="cns-e2e-test",D.pnhTemplate="cns-e2e-test:1.8"),D.maxRegistrationTimeInMs=(K=P?.registrationTimeInMs)!==null&&K!==void 0?K:$.maxRegistrationTimeInMs,D});Te.createSettings=M,Te.defaultTelemetrySettings={enabled:!1}});E(ne),ne.defaultTelemetrySettings,ne.createSettings;var Re=ne,Ee=I(function(Oe,Te){var De=y&&y.__awaiter||function(Y,P,K,R){function D(x){return x instanceof K?x:new K(function(b){b(x)})}return new(K||(K=Promise))(function(x,b){function T(S){try{N(R.next(S))}catch(C){b(C)}}function k(S){try{N(R.throw(S))}catch(C){b(C)}}function N(S){S.done?x(S.value):D(S.value).then(T,k)}N((R=R.apply(Y,P||[])).next())})};Object.defineProperty(Te,"__esModule",{value:!0}),Te.CommunicationSignalingClient=Te.ConnectionState=void 0;var $;(function(Y){Y[Y.Unknown=0]="Unknown",Y[Y.Connected=2]="Connected",Y[Y.Disconnected=3]="Disconnected",Y[Y.Switching=9]="Switching"})($||(Te.ConnectionState=$={}));class M{constructor(P,K,R){this.credential=P,this.logger=K,this.options=R,this.stateChangedListener=null,this.tokenFetchRetries=0,this.trouter=(0,U.createTrouterService)((0,ae.toLogProvider)(K))}start(){return De(this,void 0,void 0,function*(){var P,K;if(this.resourceEndpoint=(P=this.options)===null||P===void 0?void 0:P.resourceEndpoint,this.resourceEndpoint===void 0)throw new Error("'endpoint' cannot be null");this.gatewayApiVersion=((K=this.options)===null||K===void 0?void 0:K.gatewayApiVersion)||"2024-03-07",this.config===void 0&&(this.config={trouterSettings:yield(0,Re.createSettings)(this.credential,this.options),skypeTokenProvider:R=>De(this,void 0,void 0,function*(){if(R){if(this.tokenFetchRetries+=1,this.tokenFetchRetries>pe.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES)throw yield this.stop(!0),new Error(`Access token is expired and failed to fetch a valid one after ${pe.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES} retries`)}else this.tokenFetchRetries=0;return Promise.resolve((yield this.credential.getToken()).token)}),telemetryConfig:{eventLogger:(0,ae.toTelemetrySender)(this.logger),settings:Re.defaultTelemetrySettings}}),this.trouter.start(this.config),this.trouter.setUserActivityState(U.UserActivityState.Active)})}stop(P){return De(this,void 0,void 0,function*(){this.trouter.offStateChanged(this.stateChangedListener),this.trouter.clearMessageHandlers(),this.trouter.stop(P??this.tokenFetchRetries>pe.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES)})}on(P,K){if(P==="connectionChanged"){this.trouter.offStateChanged(this.stateChangedListener),this.stateChangedListener=(R,D)=>K(R),this.trouter.onStateChanged(this.stateChangedListener);return}this.trouter.registerMessageHandler((0,ae.toMessageHandler)(P,K,this.resourceEndpoint,this.gatewayApiVersion))}}Te.CommunicationSignalingClient=M});E(Ee),Ee.CommunicationSignalingClient,Ee.ConnectionState;var Ae=Ee,He=I(function(Oe,Te){var De=y&&y.__createBinding||(Object.create?(function(M,Y,P,K){K===void 0&&(K=P);var R=Object.getOwnPropertyDescriptor(Y,P);(!R||("get"in R?!Y.__esModule:R.writable||R.configurable))&&(R={enumerable:!0,get:function(){return Y[P]}}),Object.defineProperty(M,K,R)}):(function(M,Y,P,K){K===void 0&&(K=P),M[K]=Y[P]})),$=y&&y.__exportStar||function(M,Y){for(var P in M)P!=="default"&&!Object.prototype.hasOwnProperty.call(Y,P)&&De(Y,M,P)};Object.defineProperty(Te,"__esModule",{value:!0}),$(Ae,Te)}),Ve=E(He);r.exports=Ve})(yd)),yd.exports}var $d=x2();class Rs extends Error{}Rs.prototype.name="InvalidTokenError";function E2(r){return decodeURIComponent(atob(r).replace(/(.)/g,(n,i)=>{let s=i.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}function _2(r){let n=r.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return E2(n)}catch{return atob(n)}}function A2(r,n){if(typeof r!="string")throw new Rs("Invalid token specified: must be a string");n||(n={});const i=n.header===!0?0:1,s=r.split(".")[i];if(typeof s!="string")throw new Rs(`Invalid token specified: missing part #${i+1}`);let c;try{c=_2(s)}catch(l){throw new Rs(`Invalid token specified: invalid base64 for part #${i+1} (${l.message})`)}try{return JSON.parse(c)}catch(l){throw new Rs(`Invalid token specified: invalid json for part #${i+1} (${l.message})`)}}const Vd=r=>{const{exp:n}=A2(r);return{token:r,expiresOnTimestamp:n*1e3}},Vy={token:"",expiresOnTimestamp:-10},k2=r=>r*1e3*60,N2=k2(10),O2=.5;class M2{constructor(n){this.expiringSoonIntervalInMs=N2,this.refreshAfterLifetimePercentage=O2,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.disposed=!1;const{tokenRefresher:i,token:s,refreshProactively:c}=n;this.refresh=i,this.currentToken=s?Vd(s):Vy,this.refreshProactively=c??!1,this.refreshProactively&&this.scheduleRefresh()}async getToken(n){return this.isTokenExpiringSoon(this.currentToken)?(this.isTokenValid(this.currentToken)||await this.updateTokenAndReschedule(n?.abortSignal),this.currentToken):this.currentToken}dispose(){this.disposed=!0,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.currentToken=Vy,this.activeTimeout&&clearTimeout(this.activeTimeout)}async updateTokenAndReschedule(n){if(this.activeTokenUpdating)return this.activeTokenUpdating;this.activeTokenUpdating=this.refreshTokenAndReschedule(n);try{await this.activeTokenUpdating}finally{this.activeTokenUpdating=null}}async refreshTokenAndReschedule(n){const i=await this.refreshToken(n);if(!this.isTokenValid(i))throw new Error("The token returned from the tokenRefresher is expired.");this.currentToken=i,this.refreshProactively&&this.scheduleRefresh()}async refreshToken(n){try{return this.activeTokenFetching||(this.activeTokenFetching=this.refresh(n)),Vd(await this.activeTokenFetching)}finally{this.activeTokenFetching=null}}scheduleRefresh(){if(this.disposed)return;this.activeTimeout&&clearTimeout(this.activeTimeout);const n=this.currentToken.expiresOnTimestamp-Date.now();let i=null;this.isTokenExpiringSoon(this.currentToken)?i=n*this.refreshAfterLifetimePercentage:i=n-this.expiringSoonIntervalInMs,this.activeTimeout=setTimeout(()=>this.updateTokenAndReschedule(),i)}isTokenValid(n){return n&&Date.now()<n.expiresOnTimestamp}isTokenExpiringSoon(n){return!n||Date.now()>=n.expiresOnTimestamp-this.expiringSoonIntervalInMs}}class j2{constructor(n){this.token=n}async getToken(){return this.token}dispose(){}}function U2(r){const n=r;return n&&typeof n.getToken=="function"&&(n.signRequest===void 0||n.getToken.length>0)}const D2="ApiVersionPolicy";function P2(r){return{name:D2,sendRequest:(n,i)=>{const s=new URL(n.url);return!s.searchParams.get("api-version")&&r.apiVersion&&(n.url=`${n.url}${Array.from(s.searchParams.keys()).length>0?"&":"?"}api-version=${r.apiVersion}`),i(n)}}}const I2="keyCredentialAuthenticationPolicy";function z2(r,n){return{name:I2,async sendRequest(i,s){return i.headers.set(n,r.key),s(i)}}}function L2(r,n,i={}){const{credential:s,clientOptions:c}=i;if(s){if(U2(s)){const l=qc({credential:s,scopes:c?.credentials?.scopes??`${n}/.default`});r.addPolicy(l)}else if(H2(s)){if(!c?.credentials?.apiKeyHeaderName)throw new Error("Missing API Key Header Name");const l=z2(s,c?.credentials?.apiKeyHeaderName);r.addPolicy(l)}}}function B2(r,n,i={}){const s=xf(i);return s.addPolicy(P2(i)),L2(s,r,{credential:n,clientOptions:i}),s}function H2(r){return r.key!==void 0}function Gr(r){return r.onResponse?{...r,onResponse(n,i){r.onResponse?.(n,i,i)}}:r}function q2(r,n,i={}){const c=B2(r,void 0,i),l=Fk(r,{...i,pipeline:c}),d=(p,...m)=>({get:(g={})=>l.path(p,...m).get(Gr(g)),post:(g={})=>l.path(p,...m).post(Gr(g)),put:(g={})=>l.path(p,...m).put(Gr(g)),patch:(g={})=>l.path(p,...m).patch(Gr(g)),delete:(g={})=>l.path(p,...m).delete(Gr(g)),head:(g={})=>l.path(p,...m).head(Gr(g)),options:(g={})=>l.path(p,...m).options(Gr(g)),trace:(g={})=>l.path(p,...m).trace(Gr(g))});return{path:d,pathUnchecked:d,pipeline:l.pipeline}}const $2="https://auth.msft.communication.azure.com/",V2="https://communication.azure.com/clients/",G2="/access/teamsExtension/:exchangeAccessToken",F2="2025-06-30",X2="/access/entra/:exchangeAccessToken",Y2="2025-03-02-preview";class J2{constructor(n){this.options=n,this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}},this.client=q2(n.resourceEndpoint),this.httpClient=Ef(),this.options=n,this.options.scopes=this.options.scopes||["https://communication.azure.com/clients/.default"],this.isPending=this.getToken()}async getToken(n){var i;if(!((i=n?.abortSignal)===null||i===void 0)&&i.aborted)return{token:"",expiresOnTimestamp:0};this.isPending||(this.isPending=this.getTokenInternal(n));try{await this.isPending}finally{this.isPending=null}return this.result.acsToken}async getTokenInternal(n){const i=n?.abortSignal?{abortSignal:n.abortSignal}:void 0,s=await this.options.tokenCredential.getToken(this.options.scopes?this.options.scopes:["https://communication.azure.com/clients/.default"],i),c=new Date,l=new Date(this.result.acsToken.expiresOnTimestamp);if(s===null)this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}};else if(this.result.acsToken.token===""||s.token!==this.result.entraToken||l<c){const d=await this.exchangeEntraToken(this.options.resourceEndpoint,s.token,i);this.result={entraToken:s.token,acsToken:d}}return this.result.acsToken}dispose(){this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}}}async exchangeEntraToken(n,i,s){const c=_f({url:this.createRequestUri(n),method:"POST",headers:wb({Authorization:`Bearer ${i}`,"Content-Type":"application/json",Accept:"application/json"}),abortSignal:s?.abortSignal,body:JSON.stringify({})}),l=await this.client.pipeline.sendRequest(this.httpClient,c);if(l.status!==200||!l.bodyAsText)throw new Error(`Service request failed. Status: ${l.status}, Body: ${l.bodyAsText}`);const d=JSON.parse(l.bodyAsText);return{token:d.accessToken.token,expiresOnTimestamp:Date.parse(d.accessToken.expiresOn)}}createRequestUri(n){const[i,s]=this.determineEndpointAndApiVersion();return`${n}${i}?api-version=${s}`}determineEndpointAndApiVersion(){if(!this.options.scopes||this.options.scopes.length===0)throw new Error("Scopes validation failed. Ensure all scopes start with either {TeamsExtensionScopePrefix} or {CommunicationClientsScopePrefix}.");if(this.options.scopes.every(n=>n.startsWith($2)))return[G2,F2];if(this.options.scopes.every(n=>n.startsWith(V2)))return[X2,Y2];throw new Error("Scopes validation failed. Ensure all scopes start with either {TeamsExtensionScopePrefix} or {CommunicationClientsScopePrefix}.")}}class K2{constructor(n){this.disposed=!1,typeof n=="string"?this.tokenCredential=new j2(Vd(n)):"tokenRefresher"in n?this.tokenCredential=new M2(n):this.tokenCredential=new J2(n)}async getToken(n){this.throwIfDisposed();const i=await this.tokenCredential.getToken(n);return this.throwIfDisposed(),i}dispose(){this.disposed=!0,this.tokenCredential.dispose()}throwIfDisposed(){if(this.disposed)throw new Error("User credential is disposed")}}const Q2=r=>typeof r.communicationUserId=="string",W2=r=>typeof r.phoneNumber=="string",Z2=r=>typeof r.microsoftTeamsUserId=="string",eO=r=>typeof r.teamsAppId=="string",tO=r=>{const n=typeof r.userId=="string",i=typeof r.tenantId=="string",s=typeof r.resourceId=="string";return n&&i&&s},Ub=r=>Q2(r)?Object.assign(Object.assign({},r),{kind:"communicationUser"}):W2(r)?Object.assign(Object.assign({},r),{kind:"phoneNumber"}):Z2(r)?Object.assign(Object.assign({},r),{kind:"microsoftTeamsUser"}):eO(r)?Object.assign(Object.assign({},r),{kind:"microsoftTeamsApp"}):tO(r)?Object.assign(Object.assign({},r),{kind:"teamsExtensionUser"}):Object.assign(Object.assign({},r),{kind:"unknown"}),Cs=r=>{const n=Ub(r);switch(n.kind){case"communicationUser":return n.communicationUserId;case"microsoftTeamsUser":{const{microsoftTeamsUserId:i,rawId:s,cloud:c,isAnonymous:l}=n;if(s)return s;if(l)return`8:teamsvisitor:${i}`;switch(c){case"dod":return`8:dod:${i}`;case"gcch":return`8:gcch:${i}`;case"public":return`8:orgid:${i}`}return`8:orgid:${i}`}case"microsoftTeamsApp":{const{teamsAppId:i,rawId:s,cloud:c}=n;if(s)return s;switch(c){case"dod":return`28:dod:${i}`;case"gcch":return`28:gcch:${i}`}return`28:orgid:${i}`}case"phoneNumber":{const{phoneNumber:i,rawId:s}=n;return s||`4:${i}`}case"teamsExtensionUser":{const{userId:i,tenantId:s,resourceId:c,rawId:l,cloud:d}=n;if(l)return l;switch(d){case"dod":return`8:dod-acs:${c}_${s}_${i}`;case"gcch":return`8:gcch-acs:${c}_${s}_${i}`}return`8:acs:${c}_${s}_${i}`}case"unknown":return n.id}},en=(r,n)=>{const i=Object.keys(r)[0],s=r[i];if(n in s)return s[n];throw new Error(`Property ${n} is required for identifier of type ${i}.`)},nO=r=>{const n=[];if(r.communicationUser!==void 0&&n.push("communicationUser"),r.microsoftTeamsUser!==void 0&&n.push("microsoftTeamsUser"),r.microsoftTeamsApp!==void 0&&n.push("microsoftTeamsApp"),r.phoneNumber!==void 0&&n.push("phoneNumber"),r.teamsExtensionUser!==void 0&&n.push("teamsExtensionUser"),n.length>1)throw new Error(`Only one of the properties in ${JSON.stringify(n)} should be present.`)},Db=r=>{var n,i,s,c,l,d,p,m,g;const y=Ub(r);switch(y.kind){case"communicationUser":return{rawId:Cs(y),communicationUser:{id:y.communicationUserId}};case"phoneNumber":return{rawId:(n=y.rawId)!==null&&n!==void 0?n:Cs(y),phoneNumber:{value:y.phoneNumber,isAnonymous:(i=y.isAnonymous)!==null&&i!==void 0?i:!1,assertedId:y.assertedId}};case"microsoftTeamsUser":return{rawId:(s=y.rawId)!==null&&s!==void 0?s:Cs(y),microsoftTeamsUser:{userId:y.microsoftTeamsUserId,isAnonymous:(c=y.isAnonymous)!==null&&c!==void 0?c:!1,cloud:(l=y.cloud)!==null&&l!==void 0?l:"public"}};case"microsoftTeamsApp":return{rawId:(d=y.rawId)!==null&&d!==void 0?d:Cs(y),microsoftTeamsApp:{appId:y.teamsAppId,cloud:(p=y.cloud)!==null&&p!==void 0?p:"public"}};case"teamsExtensionUser":return{rawId:(m=y.rawId)!==null&&m!==void 0?m:Cs(y),teamsExtensionUser:{userId:y.userId,tenantId:y.tenantId,resourceId:y.resourceId,cloud:(g=y.cloud)!==null&&g!==void 0?g:"public"}};case"unknown":return{rawId:y.id};default:throw new Error(`Can't serialize an identifier with kind ${y.kind}`)}},rO=r=>r.communicationUser?"communicationUser":r.phoneNumber?"phoneNumber":r.microsoftTeamsUser?"microsoftTeamsUser":r.microsoftTeamsApp?"microsoftTeamsApp":r.teamsExtensionUser?"teamsExtensionUser":"unknown",Bs=r=>{var n,i;nO(r);const s=r.communicationUser,c=r.microsoftTeamsUser,l=r.microsoftTeamsApp,d=r.phoneNumber,p=r.teamsExtensionUser,m=(n=r.kind)!==null&&n!==void 0?n:rO(r);return m==="communicationUser"&&s?{kind:"communicationUser",communicationUserId:en({communicationUser:s},"id")}:m==="phoneNumber"&&d?{kind:"phoneNumber",phoneNumber:en({phoneNumber:d},"value"),rawId:en({phoneNumber:r},"rawId"),isAnonymous:(i=d.isAnonymous)!==null&&i!==void 0?i:!1,assertedId:d.assertedId}:m==="microsoftTeamsUser"&&c?{kind:"microsoftTeamsUser",microsoftTeamsUserId:en({microsoftTeamsUser:c},"userId"),isAnonymous:en({microsoftTeamsUser:c},"isAnonymous"),cloud:en({microsoftTeamsUser:c},"cloud"),rawId:en({microsoftTeamsUser:r},"rawId")}:m==="microsoftTeamsApp"&&l?{kind:"microsoftTeamsApp",teamsAppId:en({microsoftTeamsApp:l},"appId"),cloud:en({microsoftTeamsApp:l},"cloud"),rawId:en({microsoftTeamsApp:r},"rawId")}:m==="teamsExtensionUser"&&p?{kind:"teamsExtensionUser",userId:en({teamsExtensionUser:p},"userId"),tenantId:en({teamsExtensionUser:p},"tenantId"),resourceId:en({teamsExtensionUser:p},"resourceId"),cloud:en({teamsExtensionUser:p},"cloud"),rawId:en({teamsExtensionUser:r},"rawId")}:{kind:"unknown",id:en({unknown:r},"rawId")}},iO=r=>{const{participants:n,idempotencyToken:i}=r,s=br(r,["participants","idempotencyToken"]);return Object.assign({repeatabilityRequestId:i},s)},Pb=r=>{const{id:n}=r,i=br(r,["id"]);return Object.assign(Object.assign({},i),{communicationIdentifier:Db(n)})},oO=r=>{var n;return{participants:(n=r.participants)===null||n===void 0?void 0:n.map(i=>Pb(i))}},Gd=r=>{const{communicationIdentifier:n}=r,i=br(r,["communicationIdentifier"]);return Object.assign(Object.assign({},i),{id:Bs(n)})},sO=r=>{const{participants:n,initiatorCommunicationIdentifier:i}=r,s=br(r,["participants","initiatorCommunicationIdentifier"]);let c=Object.assign({},s);if(i){const l=Bs(i);c=Object.assign(Object.assign({},c),{initiator:l})}return n&&(c=Object.assign(Object.assign({},c),{participants:n?.map(l=>Gd(l))})),c},kd=r=>{const{content:n,senderCommunicationIdentifier:i}=r,s=br(r,["content","senderCommunicationIdentifier"]);let c=Object.assign({},s);if(n&&(c=Object.assign(Object.assign({},c),{content:sO(n)})),i){const l=Bs(i);c=Object.assign(Object.assign({},c),{sender:l})}return c},aO=r=>{if(r.kind==="threadCreationDate"||r.kind==="none")return r;throw new Error(`Retention Policy ${r.kind} is not supported`)},Ib=r=>{const{createdByCommunicationIdentifier:n,retentionPolicy:i}=r,s=br(r,["createdByCommunicationIdentifier","retentionPolicy"]);let c=Object.assign({},s);return n&&(c=Object.assign(Object.assign({},c),{createdBy:Bs(n)})),i&&(c=Object.assign(Object.assign({},c),{retentionPolicy:aO(i)})),c},cO=r=>{const{chatThread:n}=r,i=br(r,["chatThread"]);return n?Object.assign(Object.assign({},i),{chatThread:Ib(n)}):Object.assign({},i)},Gy=r=>{const{senderCommunicationIdentifier:n}=r,i=br(r,["senderCommunicationIdentifier"]);return Object.assign(Object.assign({},i),{sender:Bs(n)})};var Fy;(function(r){r.Unknown="unknown",r.CommunicationUser="communicationUser",r.PhoneNumber="phoneNumber",r.MicrosoftTeamsUser="microsoftTeamsUser",r.MicrosoftTeamsApp="microsoftTeamsApp"})(Fy||(Fy={}));var Xy;(function(r){r.Public="public",r.Dod="dod",r.Gcch="gcch"})(Xy||(Xy={}));var Yy;(function(r){r.ThreadCreationDate="threadCreationDate",r.None="none"})(Yy||(Yy={}));const et=yb({namespace:"Azure.Communication",packageName:"@azure/communication-chat",packageVersion:"1.6.0"}),Af={type:{name:"Composite",className:"ChatMessageReadReceiptsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessageReadReceipt"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},lO={type:{name:"Composite",className:"ChatMessageReadReceipt",modelProperties:{senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}},readOn:{serializedName:"readOn",required:!0,type:{name:"DateTime"}}}}},zb={type:{name:"Composite",className:"CommunicationIdentifierModel",modelProperties:{kind:{serializedName:"kind",type:{name:"String"}},rawId:{serializedName:"rawId",type:{name:"String"}},communicationUser:{serializedName:"communicationUser",type:{name:"Composite",className:"CommunicationUserIdentifierModel"}},phoneNumber:{serializedName:"phoneNumber",type:{name:"Composite",className:"PhoneNumberIdentifierModel"}},microsoftTeamsUser:{serializedName:"microsoftTeamsUser",type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel"}},microsoftTeamsApp:{serializedName:"microsoftTeamsApp",type:{name:"Composite",className:"MicrosoftTeamsAppIdentifierModel"}}}}},uO={type:{name:"Composite",className:"CommunicationUserIdentifierModel",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},dO={type:{name:"Composite",className:"PhoneNumberIdentifierModel",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"String"}}}}},fO={type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel",modelProperties:{userId:{serializedName:"userId",required:!0,type:{name:"String"}},isAnonymous:{serializedName:"isAnonymous",type:{name:"Boolean"}},cloud:{serializedName:"cloud",type:{name:"String"}}}}},hO={type:{name:"Composite",className:"MicrosoftTeamsAppIdentifierModel",modelProperties:{appId:{serializedName:"appId",required:!0,type:{name:"String"}},cloud:{serializedName:"cloud",type:{name:"String"}}}}},je={type:{name:"Composite",className:"CommunicationErrorResponse",modelProperties:{error:{serializedName:"error",type:{name:"Composite",className:"ChatError"}}}}},pO={type:{name:"Composite",className:"ChatError",modelProperties:{code:{serializedName:"code",required:!0,type:{name:"String"}},message:{serializedName:"message",required:!0,type:{name:"String"}},target:{serializedName:"target",readOnly:!0,type:{name:"String"}},details:{serializedName:"details",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}},innerError:{serializedName:"innererror",type:{name:"Composite",className:"ChatError"}}}}},Lb={type:{name:"Composite",className:"SendReadReceiptRequest",modelProperties:{chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}}}},Bb={type:{name:"Composite",className:"SendChatMessageRequest",modelProperties:{content:{serializedName:"content",required:!0,type:{name:"String"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},type:{serializedName:"type",type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},Hb={type:{name:"Composite",className:"SendChatMessageResult",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},kf={type:{name:"Composite",className:"ChatMessagesCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessage"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},qb={type:{name:"Composite",className:"ChatMessage",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},type:{serializedName:"type",required:!0,type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},sequenceId:{serializedName:"sequenceId",required:!0,type:{name:"String"}},version:{serializedName:"version",required:!0,type:{name:"String"}},content:{serializedName:"content",type:{name:"Composite",className:"ChatMessageContent"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},editedOn:{serializedName:"editedOn",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},mO={type:{name:"Composite",className:"ChatMessageContent",modelProperties:{message:{serializedName:"message",type:{name:"String"}},topic:{serializedName:"topic",type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},attachments:{serializedName:"attachments",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatAttachment"}}}},initiatorCommunicationIdentifier:{serializedName:"initiatorCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}}}}},gO={type:{name:"Composite",className:"ChatParticipant",modelProperties:{communicationIdentifier:{serializedName:"communicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},displayName:{serializedName:"displayName",type:{name:"String"}},shareHistoryTime:{serializedName:"shareHistoryTime",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},yO={type:{name:"Composite",className:"ChatAttachment",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},attachmentType:{serializedName:"attachmentType",required:!0,type:{name:"Enum",allowedValues:["image","file"]}},name:{serializedName:"name",type:{name:"String"}},url:{serializedName:"url",type:{name:"String"}},previewUrl:{serializedName:"previewUrl",type:{name:"String"}}}}},$b={type:{name:"Composite",className:"UpdateChatMessageRequest",modelProperties:{content:{serializedName:"content",type:{name:"String"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},Nf={type:{name:"Composite",className:"ChatParticipantsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Vb={type:{name:"Composite",className:"AddChatParticipantsRequest",modelProperties:{participants:{serializedName:"participants",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}}}}},Gb={type:{name:"Composite",className:"AddChatParticipantsResult",modelProperties:{invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},Fb={type:{name:"Composite",className:"CreateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",required:!0,type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},So={type:{name:"Composite",className:"ChatRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:{serializedName:"kind",clientName:"kind"},modelProperties:{kind:{serializedName:"kind",required:!0,type:{name:"String"}}}}},Xb={type:{name:"Composite",className:"CreateChatThreadResult",modelProperties:{chatThread:{serializedName:"chatThread",type:{name:"Composite",className:"ChatThreadProperties"}},invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},Yb={type:{name:"Composite",className:"ChatThreadProperties",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},createdByCommunicationIdentifier:{serializedName:"createdByCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},Of={type:{name:"Composite",className:"ChatThreadsItemCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatThreadItem"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},vO={type:{name:"Composite",className:"ChatThreadItem",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},lastMessageReceivedOn:{serializedName:"lastMessageReceivedOn",readOnly:!0,type:{name:"DateTime"}}}}},Jb={type:{name:"Composite",className:"UpdateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",type:{name:"String"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},Kb={type:{name:"Composite",className:"SendTypingNotificationRequest",modelProperties:{senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}}}}},Qb={serializedName:"threadCreationDate",type:{name:"Composite",className:"ThreadCreationDateRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:So.type.polymorphicDiscriminator,modelProperties:Object.assign(Object.assign({},So.type.modelProperties),{deleteThreadAfterDays:{serializedName:"deleteThreadAfterDays",required:!0,type:{name:"Number"}}})}},Wb={serializedName:"none",type:{name:"Composite",className:"NoneRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:So.type.polymorphicDiscriminator,modelProperties:Object.assign({},So.type.modelProperties)}};let bO={ChatRetentionPolicy:So,"ChatRetentionPolicy.threadCreationDate":Qb,"ChatRetentionPolicy.none":Wb};const Zb=Object.freeze(Object.defineProperty({__proto__:null,AddChatParticipantsRequest:Vb,AddChatParticipantsResult:Gb,ChatAttachment:yO,ChatError:pO,ChatMessage:qb,ChatMessageContent:mO,ChatMessageReadReceipt:lO,ChatMessageReadReceiptsCollection:Af,ChatMessagesCollection:kf,ChatParticipant:gO,ChatParticipantsCollection:Nf,ChatRetentionPolicy:So,ChatThreadItem:vO,ChatThreadProperties:Yb,ChatThreadsItemCollection:Of,CommunicationErrorResponse:je,CommunicationIdentifierModel:zb,CommunicationUserIdentifierModel:uO,CreateChatThreadRequest:Fb,CreateChatThreadResult:Xb,MicrosoftTeamsAppIdentifierModel:hO,MicrosoftTeamsUserIdentifierModel:fO,NoneRetentionPolicy:Wb,PhoneNumberIdentifierModel:dO,SendChatMessageRequest:Bb,SendChatMessageResult:Hb,SendReadReceiptRequest:Lb,SendTypingNotificationRequest:Kb,ThreadCreationDateRetentionPolicy:Qb,UpdateChatMessageRequest:$b,UpdateChatThreadRequest:Jb,discriminators:bO},Symbol.toStringTag,{value:"Module"})),jt={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},Ut={parameterPath:"endpoint",mapper:{serializedName:"endpoint",required:!0,type:{name:"String"}},skipEncoding:!0},Xt={parameterPath:"chatThreadId",mapper:{serializedName:"chatThreadId",required:!0,type:{name:"String"}}},$c={parameterPath:["options","maxPageSize"],mapper:{serializedName:"maxPageSize",type:{name:"Number"}}},eS={parameterPath:["options","skip"],mapper:{serializedName:"skip",type:{name:"Number"}}},rn={parameterPath:"apiVersion",mapper:{defaultValue:"2025-03-15",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},_o={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},SO={parameterPath:"sendReadReceiptRequest",mapper:Lb},wO={parameterPath:"sendChatMessageRequest",mapper:Bb},tS={parameterPath:["options","startTime"],mapper:{serializedName:"startTime",type:{name:"DateTime"}}},Mf={parameterPath:"chatMessageId",mapper:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}},nS={parameterPath:["options","contentType"],mapper:{defaultValue:"application/merge-patch+json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},TO={parameterPath:"updateChatMessageRequest",mapper:$b},CO={parameterPath:"participantCommunicationIdentifier",mapper:zb},RO={parameterPath:"addChatParticipantsRequest",mapper:Vb},xO={parameterPath:"updateChatThreadRequest",mapper:Jb},EO={parameterPath:["options","sendTypingNotificationRequest"],mapper:Kb},Vc={parameterPath:"nextLink",mapper:{serializedName:"nextLink",required:!0,type:{name:"String"}},skipEncoding:!0},_O={parameterPath:"createChatThreadRequest",mapper:Fb},AO={parameterPath:["options","repeatabilityRequestId"],mapper:{serializedName:"repeatability-request-id",type:{name:"String"}}};class kO{constructor(n){this.client=n}async listChatReadReceipts(n,i){return et.withSpan("ChatApiClient.listChatReadReceipts",i??{},async s=>this.client.sendOperationRequest({chatThreadId:n,options:s},NO))}async sendChatReadReceipt(n,i,s){return et.withSpan("ChatApiClient.sendChatReadReceipt",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,sendReadReceiptRequest:i,options:c},OO))}async sendChatMessage(n,i,s){return et.withSpan("ChatApiClient.sendChatMessage",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,sendChatMessageRequest:i,options:c},MO))}async listChatMessages(n,i){return et.withSpan("ChatApiClient.listChatMessages",i??{},async s=>this.client.sendOperationRequest({chatThreadId:n,options:s},jO))}async getChatMessage(n,i,s){return et.withSpan("ChatApiClient.getChatMessage",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,chatMessageId:i,options:c},UO))}async updateChatMessage(n,i,s,c){return et.withSpan("ChatApiClient.updateChatMessage",c??{},async l=>this.client.sendOperationRequest({chatThreadId:n,chatMessageId:i,updateChatMessageRequest:s,options:l},DO))}async deleteChatMessage(n,i,s){return et.withSpan("ChatApiClient.deleteChatMessage",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,chatMessageId:i,options:c},PO))}async listChatParticipants(n,i){return et.withSpan("ChatApiClient.listChatParticipants",i??{},async s=>this.client.sendOperationRequest({chatThreadId:n,options:s},IO))}async removeChatParticipant(n,i,s){return et.withSpan("ChatApiClient.removeChatParticipant",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,participantCommunicationIdentifier:i,options:c},zO))}async addChatParticipants(n,i,s){return et.withSpan("ChatApiClient.addChatParticipants",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,addChatParticipantsRequest:i,options:c},LO))}async updateChatThreadProperties(n,i,s){return et.withSpan("ChatApiClient.updateChatThreadProperties",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,updateChatThreadRequest:i,options:c},BO))}async getChatThreadProperties(n,i){return et.withSpan("ChatApiClient.getChatThreadProperties",i??{},async s=>this.client.sendOperationRequest({chatThreadId:n,options:s},HO))}async sendTypingNotification(n,i){return et.withSpan("ChatApiClient.sendTypingNotification",i??{},async s=>this.client.sendOperationRequest({chatThreadId:n,options:s},qO))}async listChatReadReceiptsNext(n,i,s){return et.withSpan("ChatApiClient.listChatReadReceiptsNext",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,nextLink:i,options:c},$O))}async listChatMessagesNext(n,i,s){return et.withSpan("ChatApiClient.listChatMessagesNext",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,nextLink:i,options:c},VO))}async listChatParticipantsNext(n,i,s){return et.withSpan("ChatApiClient.listChatParticipantsNext",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,nextLink:i,options:c},GO))}}const on=yf(Zb,!1),NO={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"GET",responses:{200:{bodyMapper:Af},401:{bodyMapper:je,isError:!0},403:{bodyMapper:je,isError:!0},429:{bodyMapper:je,isError:!0},503:{bodyMapper:je,isError:!0}},queryParameters:[$c,eS,rn],urlParameters:[Ut,Xt],headerParameters:[jt],serializer:on},OO={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"POST",responses:{200:{},401:{bodyMapper:je,isError:!0},403:{bodyMapper:je,isError:!0},429:{bodyMapper:je,isError:!0},503:{bodyMapper:je,isError:!0}},requestBody:SO,queryParameters:[rn],urlParameters:[Ut,Xt],headerParameters:[jt,_o],mediaType:"json",serializer:on},MO={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"POST",responses:{201:{bodyMapper:Hb},401:{bodyMapper:je,isError:!0},403:{bodyMapper:je,isError:!0},429:{bodyMapper:je,isError:!0},503:{bodyMapper:je,isError:!0}},requestBody:wO,queryParameters:[rn],urlParameters:[Ut,Xt],headerParameters:[jt,_o],mediaType:"json",serializer:on},jO={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"GET",responses:{200:{bodyMapper:kf},401:{bodyMapper:je,isError:!0},403:{bodyMapper:je,isError:!0},429:{bodyMapper:je,isError:!0},503:{bodyMapper:je,isError:!0}},queryParameters:[$c,rn,tS],urlParameters:[Ut,Xt],headerParameters:[jt],serializer:on},UO={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"GET",responses:{200:{bodyMapper:qb},401:{bodyMapper:je,isError:!0},403:{bodyMapper:je,isError:!0},429:{bodyMapper:je,isError:!0},503:{bodyMapper:je,isError:!0}},queryParameters:[rn],urlParameters:[Ut,Xt,Mf],headerParameters:[jt],serializer:on},DO={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:je,isError:!0},403:{bodyMapper:je,isError:!0},429:{bodyMapper:je,isError:!0},503:{bodyMapper:je,isError:!0}},requestBody:TO,queryParameters:[rn],urlParameters:[Ut,Xt,Mf],headerParameters:[jt,nS],mediaType:"json",serializer:on},PO={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:je,isError:!0},403:{bodyMapper:je,isError:!0},429:{bodyMapper:je,isError:!0},503:{bodyMapper:je,isError:!0}},queryParameters:[rn],urlParameters:[Ut,Xt,Mf],headerParameters:[jt],serializer:on},IO={path:"/chat/threads/{chatThreadId}/participants",httpMethod:"GET",responses:{200:{bodyMapper:Nf},401:{bodyMapper:je,isError:!0},403:{bodyMapper:je,isError:!0},429:{bodyMapper:je,isError:!0},503:{bodyMapper:je,isError:!0}},queryParameters:[$c,eS,rn],urlParameters:[Ut,Xt],headerParameters:[jt],serializer:on},zO={path:"/chat/threads/{chatThreadId}/participants/:remove",httpMethod:"POST",responses:{204:{},401:{bodyMapper:je,isError:!0},403:{bodyMapper:je,isError:!0},429:{bodyMapper:je,isError:!0},503:{bodyMapper:je,isError:!0}},requestBody:CO,queryParameters:[rn],urlParameters:[Ut,Xt],headerParameters:[jt,_o],mediaType:"json",serializer:on},LO={path:"/chat/threads/{chatThreadId}/participants/:add",httpMethod:"POST",responses:{201:{bodyMapper:Gb},401:{bodyMapper:je,isError:!0},403:{bodyMapper:je,isError:!0},429:{bodyMapper:je,isError:!0},503:{bodyMapper:je,isError:!0}},requestBody:RO,queryParameters:[rn],urlParameters:[Ut,Xt],headerParameters:[jt,_o],mediaType:"json",serializer:on},BO={path:"/chat/threads/{chatThreadId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:je,isError:!0},403:{bodyMapper:je,isError:!0},429:{bodyMapper:je,isError:!0},503:{bodyMapper:je,isError:!0}},requestBody:xO,queryParameters:[rn],urlParameters:[Ut,Xt],headerParameters:[jt,nS],mediaType:"json",serializer:on},HO={path:"/chat/threads/{chatThreadId}",httpMethod:"GET",responses:{200:{bodyMapper:Yb},401:{bodyMapper:je,isError:!0},403:{bodyMapper:je,isError:!0},429:{bodyMapper:je,isError:!0},503:{bodyMapper:je,isError:!0}},queryParameters:[rn],urlParameters:[Ut,Xt],headerParameters:[jt],serializer:on},qO={path:"/chat/threads/{chatThreadId}/typing",httpMethod:"POST",responses:{200:{},401:{bodyMapper:je,isError:!0},403:{bodyMapper:je,isError:!0},429:{bodyMapper:je,isError:!0},503:{bodyMapper:je,isError:!0}},requestBody:EO,queryParameters:[rn],urlParameters:[Ut,Xt],headerParameters:[jt,_o],mediaType:"json",serializer:on},$O={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Af},401:{bodyMapper:je,isError:!0},403:{bodyMapper:je,isError:!0},429:{bodyMapper:je,isError:!0},503:{bodyMapper:je,isError:!0}},urlParameters:[Ut,Xt,Vc],headerParameters:[jt],serializer:on},VO={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:kf},401:{bodyMapper:je,isError:!0},403:{bodyMapper:je,isError:!0},429:{bodyMapper:je,isError:!0},503:{bodyMapper:je,isError:!0}},urlParameters:[Ut,Xt,Vc],headerParameters:[jt],serializer:on},GO={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Nf},401:{bodyMapper:je,isError:!0},403:{bodyMapper:je,isError:!0},429:{bodyMapper:je,isError:!0},503:{bodyMapper:je,isError:!0}},urlParameters:[Ut,Xt,Vc],headerParameters:[jt],serializer:on};class FO{constructor(n){this.client=n}async createChatThread(n,i){return et.withSpan("ChatApiClient.createChatThread",i??{},async s=>this.client.sendOperationRequest({createChatThreadRequest:n,options:s},XO))}async listChatThreads(n){return et.withSpan("ChatApiClient.listChatThreads",n??{},async i=>this.client.sendOperationRequest({options:i},YO))}async deleteChatThread(n,i){return et.withSpan("ChatApiClient.deleteChatThread",i??{},async s=>this.client.sendOperationRequest({chatThreadId:n,options:s},JO))}async listChatThreadsNext(n,i){return et.withSpan("ChatApiClient.listChatThreadsNext",i??{},async s=>this.client.sendOperationRequest({nextLink:n,options:s},KO))}}const Gc=yf(Zb,!1),XO={path:"/chat/threads",httpMethod:"POST",responses:{201:{bodyMapper:Xb},401:{bodyMapper:je,isError:!0},403:{bodyMapper:je,isError:!0},429:{bodyMapper:je,isError:!0},503:{bodyMapper:je,isError:!0}},requestBody:_O,queryParameters:[rn],urlParameters:[Ut],headerParameters:[jt,_o,AO],mediaType:"json",serializer:Gc},YO={path:"/chat/threads",httpMethod:"GET",responses:{200:{bodyMapper:Of},401:{bodyMapper:je,isError:!0},403:{bodyMapper:je,isError:!0},429:{bodyMapper:je,isError:!0},503:{bodyMapper:je,isError:!0}},queryParameters:[$c,rn,tS],urlParameters:[Ut],headerParameters:[jt],serializer:Gc},JO={path:"/chat/threads/{chatThreadId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:je,isError:!0},403:{bodyMapper:je,isError:!0},429:{bodyMapper:je,isError:!0},503:{bodyMapper:je,isError:!0}},queryParameters:[rn],urlParameters:[Ut,Xt],headerParameters:[jt],serializer:Gc},KO={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Of},401:{bodyMapper:je,isError:!0},403:{bodyMapper:je,isError:!0},429:{bodyMapper:je,isError:!0},503:{bodyMapper:je,isError:!0}},urlParameters:[Ut,Vc],headerParameters:[jt],serializer:Gc};class rS extends Mb{constructor(n,i){var s,c;if(n===void 0)throw new Error("'endpoint' cannot be null");i||(i={});const l={requestContentType:"application/json; charset=utf-8"},d="azsdk-js-communication-chat/1.6.0",p=i.userAgentOptions&&i.userAgentOptions.userAgentPrefix?`${i.userAgentOptions.userAgentPrefix} ${d}`:`${d}`,m=Object.assign(Object.assign(Object.assign({},l),i),{userAgentOptions:{userAgentPrefix:p},endpoint:(c=(s=i.endpoint)!==null&&s!==void 0?s:i.baseUri)!==null&&c!==void 0?c:"{endpoint}"});super(m),this.endpoint=n,this.apiVersion=i.apiVersion||"2025-03-15",this.chatThread=new kO(this),this.chat=new FO(this),this.addCustomApiVersionPolicy(i.apiVersion)}addCustomApiVersionPolicy(n){if(!n)return;const i={name:"CustomApiVersionPolicy",async sendRequest(s,c){const l=s.url.split("?");if(l.length>1){const d=l[1].split("&").map(p=>p.indexOf("api-version")>-1?"api-version="+n:p);s.url=l[0]+"?"+d.join("&")}return c(s)}};this.pipeline.addPolicy(i)}}const _s=Bc("communication-chat"),iS=r=>qc({credential:{getToken:(i,s)=>r.getToken({abortSignal:s?.abortSignal})},scopes:[]}),QO=8e3;class WO{constructor(n,i,s,c={}){this.endpoint=n,this.timeOfLastTypingRequest=void 0,this.threadId=i,this.tokenCredential=s;const l=Object.assign(Object.assign({},c),{loggingOptions:{logger:_s.info}});this.client=new rS(this.endpoint,Object.assign({endpoint:this.endpoint},l));const d=iS(this.tokenCredential);this.client.pipeline.addPolicy(d)}getProperties(n={}){return et.withSpan("ChatClient-GetProperties",n,async i=>{const s=await this.client.chatThread.getChatThreadProperties(this.threadId,i);return Ib(s)})}updateTopic(n,i={}){return et.withSpan("ChatThreadClient-UpdateTopic",i,async s=>{await this.client.chatThread.updateChatThreadProperties(this.threadId,{topic:n},s)})}updateProperties(n={}){return et.withSpan("ChatThreadClient-UpdateProperties",n,async i=>{await this.client.chatThread.updateChatThreadProperties(this.threadId,n,i)})}sendMessage(n,i={}){return et.withSpan("ChatThreadClient-SendMessage",i,async s=>(this.timeOfLastTypingRequest=void 0,await this.client.chatThread.sendChatMessage(this.threadId,Object.assign(Object.assign({},n),i),s)))}getMessage(n,i={}){return et.withSpan("ChatThreadClient-GetMessage",i,async s=>{const c=await this.client.chatThread.getChatMessage(this.threadId,n,s);return kd(c)})}listMessagesPage(n){return Fr(this,arguments,function*(s,c={}){if(!s.continuationToken){const l=yield st(this.client.chatThread.listChatMessages(this.threadId,c));s.continuationToken=l.nextLink,l.value&&(yield yield st(l.value.map(kd,this)))}for(;s.continuationToken;){const l=yield st(this.client.chatThread.listChatMessagesNext(this.threadId,s.continuationToken,c));if(s.continuationToken=l.nextLink,l.value)yield yield st(l.value.map(kd,this));else break}})}listMessagesAll(n){return Fr(this,arguments,function*(){var s,c,l,d;try{for(var p=!0,m=Xr(this.listMessagesPage({},n)),g;g=yield st(m.next()),s=g.done,!s;p=!0)d=g.value,p=!1,yield st(yield*pc(Xr(d)))}catch(y){c={error:y}}finally{try{!p&&!s&&(l=m.return)&&(yield st(l.call(m)))}finally{if(c)throw c.error}}})}listMessages(n={}){const{span:i,updatedOptions:s}=et.startSpan("ChatThreadClient-ListMessages",n);try{const c=this.listMessagesAll(s);return{next(){return c.next()},[Symbol.asyncIterator](){return this},byPage:(l={})=>this.listMessagesPage(l,s)}}catch(c){throw i.setStatus({status:"error",error:c}),c}finally{i.end()}}deleteMessage(n,i={}){return et.withSpan("ChatThreadClient-DeleteMessage",i,async s=>{await this.client.chatThread.deleteChatMessage(this.threadId,n,s)})}async updateMessage(n,i={}){return et.withSpan("ChatThreadClient-UpdateMessage",i,async s=>{await this.client.chatThread.updateChatMessage(this.threadId,n,i,s)})}async addParticipants(n,i={}){return et.withSpan("ChatThreadClient-AddParticipants",i,async s=>await this.client.chatThread.addChatParticipants(this.threadId,oO(n),s))}listParticipantsPage(n){return Fr(this,arguments,function*(s,c={}){if(!s.continuationToken){const l=yield st(this.client.chatThread.listChatParticipants(this.threadId,c));s.continuationToken=l.nextLink,l.value&&(yield yield st(l.value.map(Gd,this)))}for(;s.continuationToken;){const l=yield st(this.client.chatThread.listChatParticipantsNext(this.threadId,s.continuationToken,c));if(s.continuationToken=l.nextLink,l.value)yield yield st(l.value.map(Gd,this));else break}})}listParticipantsAll(n){return Fr(this,arguments,function*(){var s,c,l,d;try{for(var p=!0,m=Xr(this.listParticipantsPage({},n)),g;g=yield st(m.next()),s=g.done,!s;p=!0)d=g.value,p=!1,yield st(yield*pc(Xr(d)))}catch(y){c={error:y}}finally{try{!p&&!s&&(l=m.return)&&(yield st(l.call(m)))}finally{if(c)throw c.error}}})}listParticipants(n={}){const{span:i,updatedOptions:s}=et.startSpan("ChatThreadClient-ListParticipants",n);try{const c=this.listParticipantsAll(s);return{next(){return c.next()},[Symbol.asyncIterator](){return this},byPage:(l={})=>this.listParticipantsPage(l,s)}}catch(c){throw i.setStatus({status:"error",error:c}),c}finally{i.end()}}async removeParticipant(n,i={}){return et.withSpan("ChatThreadClient-RemoveParticipant",i,async s=>{await this.client.chatThread.removeChatParticipant(this.threadId,Db(n),s)})}async sendTypingNotification(n={}){return et.withSpan("ChatThreadClient-SendTypingNotification",n,async i=>{const s=new Date,{senderDisplayName:c}=i,l=br(i,["senderDisplayName"]);return this.canPostTypingNotification(s)?(this.timeOfLastTypingRequest=s,await this.client.chatThread.sendTypingNotification(this.threadId,Object.assign({sendTypingNotificationRequest:{senderDisplayName:c}},l)),!0):(_s.info(`Typing Notification NOT Send. [thread_id=${this.threadId}]`),!1)})}async sendReadReceipt(n,i={}){return et.withSpan("ChatThreadClient-SendReadReceipt",i,async s=>{await this.client.chatThread.sendChatReadReceipt(this.threadId,n,s)})}listReadReceiptsPage(n){return Fr(this,arguments,function*(s,c={}){if(!s.continuationToken){const l=yield st(this.client.chatThread.listChatReadReceipts(this.threadId,c));s.continuationToken=l.nextLink,l.value&&(yield yield st(l.value.map(Gy,this)))}for(;s.continuationToken;){const l=yield st(this.client.chatThread.listChatReadReceiptsNext(this.threadId,s.continuationToken,c));if(s.continuationToken=l.nextLink,l.value)yield yield st(l.value.map(Gy,this));else break}})}listReadReceiptsAll(n){return Fr(this,arguments,function*(){var s,c,l,d;try{for(var p=!0,m=Xr(this.listReadReceiptsPage({},n)),g;g=yield st(m.next()),s=g.done,!s;p=!0)d=g.value,p=!1,yield st(yield*pc(Xr(d)))}catch(y){c={error:y}}finally{try{!p&&!s&&(l=m.return)&&(yield st(l.call(m)))}finally{if(c)throw c.error}}})}listReadReceipts(n={}){const{span:i,updatedOptions:s}=et.startSpan("ChatThreadClient-ListChatReadReceipts",n);try{const c=this.listReadReceiptsAll(s);return{next(){return c.next()},[Symbol.asyncIterator](){return this},byPage:(l={})=>this.listReadReceiptsPage(l,s)}}catch(c){throw i.setStatus({status:"error",error:c}),c}finally{i.end()}}canPostTypingNotification(n){return this.timeOfLastTypingRequest&&n.getTime()-this.timeOfLastTypingRequest.getTime()<QO?(_s.info(`Typing interval check failed. [last_request=${this.timeOfLastTypingRequest}]`),!1):!0}}var cc={exports:{}},Jy;function ZO(){if(Jy)return cc.exports;Jy=1;var r=typeof Reflect=="object"?Reflect:null,n=r&&typeof r.apply=="function"?r.apply:function(ae,le,ne){return Function.prototype.apply.call(ae,le,ne)},i;r&&typeof r.ownKeys=="function"?i=r.ownKeys:Object.getOwnPropertySymbols?i=function(ae){return Object.getOwnPropertyNames(ae).concat(Object.getOwnPropertySymbols(ae))}:i=function(ae){return Object.getOwnPropertyNames(ae)};function s(ee){console&&console.warn&&console.warn(ee)}var c=Number.isNaN||function(ae){return ae!==ae};function l(){l.init.call(this)}cc.exports=l,cc.exports.once=ve,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var d=10;function p(ee){if(typeof ee!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ee)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return d},set:function(ee){if(typeof ee!="number"||ee<0||c(ee))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ee+".");d=ee}}),l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(ae){if(typeof ae!="number"||ae<0||c(ae))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+ae+".");return this._maxListeners=ae,this};function m(ee){return ee._maxListeners===void 0?l.defaultMaxListeners:ee._maxListeners}l.prototype.getMaxListeners=function(){return m(this)},l.prototype.emit=function(ae){for(var le=[],ne=1;ne<arguments.length;ne++)le.push(arguments[ne]);var Re=ae==="error",Ee=this._events;if(Ee!==void 0)Re=Re&&Ee.error===void 0;else if(!Re)return!1;if(Re){var Ae;if(le.length>0&&(Ae=le[0]),Ae instanceof Error)throw Ae;var He=new Error("Unhandled error."+(Ae?" ("+Ae.message+")":""));throw He.context=Ae,He}var Ve=Ee[ae];if(Ve===void 0)return!1;if(typeof Ve=="function")n(Ve,this,le);else for(var Oe=Ve.length,Te=U(Ve,Oe),ne=0;ne<Oe;++ne)n(Te[ne],this,le);return!0};function g(ee,ae,le,ne){var Re,Ee,Ae;if(p(le),Ee=ee._events,Ee===void 0?(Ee=ee._events=Object.create(null),ee._eventsCount=0):(Ee.newListener!==void 0&&(ee.emit("newListener",ae,le.listener?le.listener:le),Ee=ee._events),Ae=Ee[ae]),Ae===void 0)Ae=Ee[ae]=le,++ee._eventsCount;else if(typeof Ae=="function"?Ae=Ee[ae]=ne?[le,Ae]:[Ae,le]:ne?Ae.unshift(le):Ae.push(le),Re=m(ee),Re>0&&Ae.length>Re&&!Ae.warned){Ae.warned=!0;var He=new Error("Possible EventEmitter memory leak detected. "+Ae.length+" "+String(ae)+" listeners added. Use emitter.setMaxListeners() to increase limit");He.name="MaxListenersExceededWarning",He.emitter=ee,He.type=ae,He.count=Ae.length,s(He)}return ee}l.prototype.addListener=function(ae,le){return g(this,ae,le,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(ae,le){return g(this,ae,le,!0)};function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function E(ee,ae,le){var ne={fired:!1,wrapFn:void 0,target:ee,type:ae,listener:le},Re=y.bind(ne);return Re.listener=le,ne.wrapFn=Re,Re}l.prototype.once=function(ae,le){return p(le),this.on(ae,E(this,ae,le)),this},l.prototype.prependOnceListener=function(ae,le){return p(le),this.prependListener(ae,E(this,ae,le)),this},l.prototype.removeListener=function(ae,le){var ne,Re,Ee,Ae,He;if(p(le),Re=this._events,Re===void 0)return this;if(ne=Re[ae],ne===void 0)return this;if(ne===le||ne.listener===le)--this._eventsCount===0?this._events=Object.create(null):(delete Re[ae],Re.removeListener&&this.emit("removeListener",ae,ne.listener||le));else if(typeof ne!="function"){for(Ee=-1,Ae=ne.length-1;Ae>=0;Ae--)if(ne[Ae]===le||ne[Ae].listener===le){He=ne[Ae].listener,Ee=Ae;break}if(Ee<0)return this;Ee===0?ne.shift():re(ne,Ee),ne.length===1&&(Re[ae]=ne[0]),Re.removeListener!==void 0&&this.emit("removeListener",ae,He||le)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(ae){var le,ne,Re;if(ne=this._events,ne===void 0)return this;if(ne.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):ne[ae]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete ne[ae]),this;if(arguments.length===0){var Ee=Object.keys(ne),Ae;for(Re=0;Re<Ee.length;++Re)Ae=Ee[Re],Ae!=="removeListener"&&this.removeAllListeners(Ae);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(le=ne[ae],typeof le=="function")this.removeListener(ae,le);else if(le!==void 0)for(Re=le.length-1;Re>=0;Re--)this.removeListener(ae,le[Re]);return this};function I(ee,ae,le){var ne=ee._events;if(ne===void 0)return[];var Re=ne[ae];return Re===void 0?[]:typeof Re=="function"?le?[Re.listener||Re]:[Re]:le?X(Re):U(Re,Re.length)}l.prototype.listeners=function(ae){return I(this,ae,!0)},l.prototype.rawListeners=function(ae){return I(this,ae,!1)},l.listenerCount=function(ee,ae){return typeof ee.listenerCount=="function"?ee.listenerCount(ae):F.call(ee,ae)},l.prototype.listenerCount=F;function F(ee){var ae=this._events;if(ae!==void 0){var le=ae[ee];if(typeof le=="function")return 1;if(le!==void 0)return le.length}return 0}l.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function U(ee,ae){for(var le=new Array(ae),ne=0;ne<ae;++ne)le[ne]=ee[ne];return le}function re(ee,ae){for(;ae+1<ee.length;ae++)ee[ae]=ee[ae+1];ee.pop()}function X(ee){for(var ae=new Array(ee.length),le=0;le<ae.length;++le)ae[le]=ee[le].listener||ee[le];return ae}function ve(ee,ae){return new Promise(function(le,ne){function Re(Ae){ee.removeListener(ae,Ee),ne(Ae)}function Ee(){typeof ee.removeListener=="function"&&ee.removeListener("error",Re),le([].slice.call(arguments))}oe(ee,ae,Ee,{once:!0}),ae!=="error"&&pe(ee,Re,{once:!0})})}function pe(ee,ae,le){typeof ee.on=="function"&&oe(ee,"error",ae,le)}function oe(ee,ae,le,ne){if(typeof ee.on=="function")ne.once?ee.once(ae,le):ee.on(ae,le);else if(typeof ee.addEventListener=="function")ee.addEventListener(ae,function Re(Ee){ne.once&&ee.removeEventListener(ae,Re),le(Ee)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ee)}return cc.exports}var eM=ZO();function tM(){return d0()}const nM=(r,n,i)=>{var s,c,l,d;return new $d.CommunicationSignalingClient(r,n,{resourceEndpoint:(s=i?.resourceEndpoint)!==null&&s!==void 0?s:void 0,gatewayApiVersion:(c=i?.gatewayApiVersion)!==null&&c!==void 0?c:void 0,additionalPolicies:(l=i?.additionalPolicies)!==null&&l!==void 0?l:void 0,userAgentOptions:(d=i?.userAgentOptions)!==null&&d!==void 0?d:void 0})};class rM{constructor(n,i,s={}){this.endpoint=n,this.signalingClient=void 0,this.emitter=new eM.EventEmitter,this.isRealtimeNotificationsStarted=!1,this.tokenCredential=i;const c=Object.assign(Object.assign({},s),{loggingOptions:{logger:_s.info}});this.client=new rS(this.endpoint,Object.assign({endpoint:this.endpoint},c));const l=iS(this.tokenCredential);this.client.pipeline.addPolicy(l),this.clientOptions=Object.assign({},s),this.clientOptions.signalingClientOptions=Object.assign(Object.assign({},this.clientOptions.signalingClientOptions),{resourceEndpoint:this.endpoint,gatewayApiVersion:this.client.apiVersion}),this.signalingClient=nM(i,_s,this.clientOptions.signalingClientOptions)}getChatThreadClient(n){return new WO(this.endpoint,n,this.tokenCredential,this.clientOptions)}async createChatThread(n,i={}){return et.withSpan("ChatClient-CreateChatThread",i,async s=>{var c,l;s.idempotencyToken=(c=s.idempotencyToken)!==null&&c!==void 0?c:tM();const d=iO(s),p=await this.client.chat.createChatThread({topic:n.topic,participants:(l=i.participants)===null||l===void 0?void 0:l.map(m=>Pb(m)),metadata:i.metadata,retentionPolicy:i.retentionPolicy},d);return cO(p)})}listChatThreadsPage(n){return Fr(this,arguments,function*(s,c={}){if(!s.continuationToken){const l=yield st(this.client.chat.listChatThreads(c));s.continuationToken=l.nextLink,l.value&&(yield yield st(l.value))}for(;s.continuationToken;){const l=yield st(this.client.chat.listChatThreadsNext(s.continuationToken,c));if(s.continuationToken=l.nextLink,l.value)yield yield st(l.value);else break}})}listChatThreadsAll(n){return Fr(this,arguments,function*(){var s,c,l,d;try{for(var p=!0,m=Xr(this.listChatThreadsPage({},n)),g;g=yield st(m.next()),s=g.done,!s;p=!0)d=g.value,p=!1,yield st(yield*pc(Xr(d)))}catch(y){c={error:y}}finally{try{!p&&!s&&(l=m.return)&&(yield st(l.call(m)))}finally{if(c)throw c.error}}})}listChatThreads(n={}){const{span:i,updatedOptions:s}=et.startSpan("ChatClient-ListChatThreads",n);try{const c=this.listChatThreadsAll(s);return{next(){return c.next()},[Symbol.asyncIterator](){return this},byPage:(l={})=>this.listChatThreadsPage(l,s)}}catch(c){throw i.setStatus({error:c,status:"error"}),c}finally{i.end()}}async deleteChatThread(n,i={}){return et.withSpan("ChatClient-DeleteChatThread",i,async s=>{await this.client.chat.deleteChatThread(n,s)})}async startRealtimeNotifications(){if(this.signalingClient===void 0)throw new Error("Realtime notifications are not supported in node js.");this.isRealtimeNotificationsStarted||(this.isRealtimeNotificationsStarted=!0,await this.signalingClient.start(),this.subscribeToSignalingEvents())}async stopRealtimeNotifications(){if(this.signalingClient===void 0)throw new Error("Realtime notifications are not supported in node js.");this.isRealtimeNotificationsStarted=!1,await this.signalingClient.stop(),this.emitter.removeAllListeners()}on(n,i){if(this.signalingClient===void 0)throw new Error("Realtime notifications are only supported in the browser.");if(!this.isRealtimeNotificationsStarted&&n!=="realTimeNotificationConnected"&&n!=="realTimeNotificationDisconnected")throw new Error("You must call startRealtimeNotifications before you can subscribe to events.");this.emitter.on(n,i)}off(n,i){if(this.signalingClient===void 0)throw new Error("Realtime notifications are only supported in the browser.");this.emitter.removeListener(n,i)}subscribeToSignalingEvents(){if(this.signalingClient===void 0)throw new Error("Realtime notifications are only supported in the browser.");this.signalingClient.on("connectionChanged",n=>{n===$d.ConnectionState.Connected?this.emitter.emit("realTimeNotificationConnected"):n===$d.ConnectionState.Disconnected&&this.emitter.emit("realTimeNotificationDisconnected")}),this.signalingClient.on("chatMessageReceived",n=>{this.emitter.emit("chatMessageReceived",n)}),this.signalingClient.on("chatMessageEdited",n=>{this.emitter.emit("chatMessageEdited",n)}),this.signalingClient.on("chatMessageDeleted",n=>{this.emitter.emit("chatMessageDeleted",n)}),this.signalingClient.on("typingIndicatorReceived",n=>{this.emitter.emit("typingIndicatorReceived",n)}),this.signalingClient.on("readReceiptReceived",n=>{this.emitter.emit("readReceiptReceived",n)}),this.signalingClient.on("chatThreadCreated",n=>{this.emitter.emit("chatThreadCreated",n)}),this.signalingClient.on("chatThreadDeleted",n=>{this.emitter.emit("chatThreadDeleted",n)}),this.signalingClient.on("chatThreadPropertiesUpdated",n=>{this.emitter.emit("chatThreadPropertiesUpdated",n)}),this.signalingClient.on("participantsAdded",n=>{this.emitter.emit("participantsAdded",n)}),this.signalingClient.on("participantsRemoved",n=>{this.emitter.emit("participantsRemoved",n)})}}function iM(){const{recipientId:r}=av(),n=Qr(),[i,s]=z.useState(null),[c,l]=z.useState(null),[d,p]=z.useState(null),[m,g]=z.useState([]),[y,E]=z.useState(""),[I,F]=z.useState(!0),[U,re]=z.useState(!1),[X,ve]=z.useState(null),pe=localStorage.getItem("userId"),oe=z.useRef(null),ee=z.useRef(!1),ae=z.useRef(null),le=z.useRef(null),ne=z.useRef(null),Re=(Oe,Te="success")=>{ve({message:Oe,type:Te}),Te==="success"&&setTimeout(()=>{ve(De=>De?{...De,hiding:!0}:null),setTimeout(()=>ve(null),300)},3e3)},Ee=Oe=>{console.log("Real-time message event received:",Oe),Oe.threadId===le.current&&Oe.sender.communicationUserId!==ne.current&&g(Te=>Te.find(De=>De.id===Oe.id)?Te:[...Te,{id:Oe.id,sender:"Recipient",text:Oe.message,timestamp:new Date}])};z.useEffect(()=>(pe&&r&&!ee.current&&(ee.current=!0,He()),()=>{ae.current&&(console.log("Cleaning up chat real-time notifications..."),ae.current.off("chatMessageReceived",Ee),ae.current.stopRealtimeNotifications().catch(console.error),ae.current=null)}),[pe,r]),z.useEffect(()=>{Ae()},[m]);const Ae=()=>{oe.current?.scrollIntoView({behavior:"smooth"})},He=async()=>{try{F(!0),console.log("Initializing chat for user:",pe,"with recipient:",r),console.log("Fetching chat token...");const Oe=await Ke.get("issuechattoken",{params:{userId:pe}}),{token:Te,user:De}=Oe.data;s(Te),ne.current=De.communicationUserId,console.log("Token received for ACS ID:",De.communicationUserId);const $=new K2(Te),M=new rM("https://acs-festive-guest.india.communication.azure.com/",$);ae.current=M,l(M),console.log("Getting or creating chat thread...");const P=(await Ke.post("getorcreatechatthread",{userId:pe,recipientId:r})).data.threadId;console.log("Thread ID received:",P),le.current=P,p(P),console.log("Loading message history...");const R=M.getChatThreadClient(P).listMessages(),D=[];for await(const x of R)x.type==="text"&&D.push({id:x.id,sender:x.sender.communicationUserId===De.communicationUserId?"Me":"Recipient",text:x.content.message,timestamp:x.createdOn});g(D.reverse()),console.log("Starting real-time notifications..."),await M.startRealtimeNotifications(),M.on("chatMessageReceived",Ee),console.log("Chat initialization complete.")}catch(Oe){console.error("Failed to init chat:",Oe),Re("Failed to initialize chat: "+(Oe.response?.data?.error||Oe.message),"error")}finally{F(!1)}},Ve=async Oe=>{if(Oe.preventDefault(),!!y.trim()){if(!ae.current||!le.current){Re("Chat not fully initialized. Please wait...","error");return}try{re(!0);const Te=ae.current.getChatThreadClient(le.current),De=y;console.log("Attempting to send message to ACS...");const $=await Te.sendMessage({content:De});console.log("Message sent successfully. ID:",$.id),E(""),g(M=>M.find(Y=>Y.id===$.id)?M:[...M,{id:$.id,sender:"Me",text:De,timestamp:new Date}])}catch(Te){console.error("Failed to send message:",Te),Re("Failed to send message: "+Te.message,"error")}finally{re(!1)}}};return I?h.jsxs("div",{className:"container",style:{textAlign:"center",padding:"5rem"},children:[h.jsx("div",{className:"spinner"}),h.jsx("p",{children:"Initializing secure chat..."})]}):h.jsxs("div",{className:"modern-chat-page",children:[X&&h.jsx("div",{className:"toast-container",children:h.jsxs("div",{className:`toast ${X.type} ${X.hiding?"hiding":""}`,children:[h.jsx("span",{className:"toast-icon",children:X.type==="success"?"":X.type==="error"?"":""}),h.jsx("div",{className:"toast-content",children:h.jsx("p",{className:"toast-message",children:X.message})}),X.type!=="success"&&h.jsx("button",{onClick:()=>ve(null),style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.5rem"},children:""})]})}),h.jsxs("div",{className:"chat-window-full",children:[h.jsx("div",{className:"chat-header-full",children:h.jsxs("div",{className:"chat-user-info-full",children:[h.jsx("button",{onClick:()=>n(-1),className:"back-btn-modern",title:"Go Back",children:h.jsx(ef,{size:20})}),h.jsx("div",{className:"user-avatar",children:""}),h.jsxs("div",{className:"user-details",children:[h.jsx("h3",{children:"Secure Chat"}),h.jsx("span",{className:"user-status",children:" Online"})]})]})}),h.jsxs("div",{className:"chat-messages",children:[m.map((Oe,Te)=>h.jsxs("div",{className:`message-bubble ${Oe.sender==="Me"?"sent":"received"}`,children:[h.jsx("div",{className:"message-content",children:Oe.text}),h.jsx("div",{className:"message-time",children:new Date(Oe.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},Oe.id||Te)),h.jsx("div",{ref:oe})]}),h.jsxs("form",{onSubmit:Ve,className:"chat-input",children:[h.jsx("input",{type:"text",value:y,onChange:Oe=>E(Oe.target.value),placeholder:"Type a message...",className:"message-input"}),h.jsx("button",{type:"submit",className:"send-btn",disabled:U,children:U?h.jsx("span",{className:"spinner-small"}):h.jsx(po,{size:20})})]})]})]})}const oM=()=>{const[r,n]=z.useState([]),[i,s]=z.useState(null),[c,l]=z.useState([]),[d,p]=z.useState(""),[m,g]=z.useState(!1),[y,E]=z.useState(!1),[I,F]=z.useState(!1),U=localStorage.getItem("userId"),re=z.useRef(null);z.useEffect(()=>{X()},[]),z.useEffect(()=>{re.current?.scrollIntoView({behavior:"auto"})},[c]);const X=async()=>{try{g(!0);const le=await Ke.get("chat/conversations");n(le.data||[])}catch(le){console.error("Failed to fetch conversations:",le)}finally{g(!1)}},ve=async le=>{s(le),l([]),await pe(le.otherUserId),F(!0)},pe=async le=>{try{const Re=(await Ke.get(`chat/messages/${le}`)).data.map(Ee=>({id:Ee.id,sender:Ee.senderId===U?"Me":"Recipient",text:Ee.message,timestamp:new Date(Ee.timestamp),status:Ee.status}));l(Re)}catch(ne){console.error("Failed to load messages:",ne)}},oe=()=>{F(!1),s(null)},ee=async le=>{if(le.preventDefault(),!(!d.trim()||!i))try{E(!0);const ne=d;p(""),l(Re=>[...Re,{id:Date.now(),sender:"Me",text:ne,timestamp:new Date,status:"Sent"}]),await Kn.sendMessage(i.otherUserId,ne)}catch(ne){console.error("Failed to send message:",ne)}finally{E(!1)}},ae=le=>{const ne=new Date(le),Ee=new Date-ne;return Math.floor(Ee/(1e3*60*60))<24?ne.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):ne.toLocaleDateString([],{month:"short",day:"numeric"})};return h.jsxs("div",{className:"chats-container",children:[h.jsxs("div",{className:`conversations-sidebar ${I?"mobile-hidden":""}`,children:[h.jsx("div",{className:"sidebar-header",children:h.jsx("h3",{children:" Messages"})}),h.jsx("div",{className:"conversations-list",children:m?h.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:"Loading..."}):r.length===0?h.jsx("div",{className:"no-conversations",children:h.jsx("p",{children:"No conversations yet"})}):r.map(le=>h.jsxs("div",{className:`conversation-item ${i?.otherUserId===le.otherUserId?"active":""}`,onClick:()=>ve(le),children:[h.jsx("div",{className:"conversation-avatar",children:le.profileImageUrl?h.jsx("img",{src:le.profileImageUrl,alt:le.otherUserName,style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"}}):h.jsx("span",{children:""})}),h.jsxs("div",{className:"conversation-content",children:[h.jsxs("div",{className:"conversation-header",children:[h.jsx("div",{className:"conversation-name",children:le.otherUserName}),h.jsx("div",{className:"conversation-time",children:ae(le.timestamp)})]}),h.jsxs("div",{className:"conversation-preview",children:[le.lastSenderId===U?"You: ":"",le.lastMessage||"Start chatting"]})]}),le.unreadCount>0&&h.jsx("div",{style:{minWidth:"20px",height:"20px",borderRadius:"10px",background:"#6366f1",color:"white",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 6px"},children:le.unreadCount})]},le.chatRoom))})]}),h.jsx("div",{className:`chat-window ${I?"mobile-visible":""}`,children:i?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"chat-header",children:[h.jsx("button",{className:"mobile-back-btn",onClick:oe,children:h.jsx(ef,{size:20})}),h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[h.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#e2e8f0",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:i.profileImageUrl?h.jsx("img",{src:i.profileImageUrl,alt:i.otherUserName,style:{width:"100%",height:"100%",objectFit:"cover"}}):h.jsx("span",{children:""})}),h.jsx("h4",{style:{margin:0},children:i.otherUserName})]})]}),h.jsxs("div",{className:"chat-messages",children:[c.map((le,ne)=>h.jsxs("div",{className:`message ${le.sender==="Me"?"sent":"received"}`,children:[h.jsx("div",{className:"message-content",children:le.text}),h.jsxs("div",{className:"message-time",children:[new Date(le.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),le.sender==="Me"&&le.status&&h.jsxs("span",{style:{marginLeft:"4px",fontSize:"10px"},children:[" ",le.status]})]})]},le.id||ne)),h.jsx("div",{ref:re})]}),h.jsxs("form",{onSubmit:ee,className:"chat-input",children:[h.jsx("input",{type:"text",value:d,onChange:le=>p(le.target.value),placeholder:"Type a message...",className:"message-input"}),h.jsx("button",{type:"submit",className:"send-btn",disabled:y,children:h.jsx(po,{size:16})})]})]}):h.jsxs("div",{className:"no-chat-selected",children:[h.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),h.jsx("h3",{children:"Select a conversation"}),h.jsx("p",{children:"Choose a conversation from the list to start chatting"})]})})]})};function sM(){const[r,n]=z.useState([]),[i,s]=z.useState(!0),[c,l]=z.useState(!1),[d,p]=z.useState(""),[m,g]=z.useState(!1);z.useEffect(()=>{y()},[]);const y=async()=>{try{const U=await Ke.get("listpayments");n(U.data)}catch{console.error("Failed to fetch payments")}finally{s(!1)}},E=async()=>{g(!0);try{const U=await Ke.post("seedlocations"),re=await Ke.get("getlocations");p(` APIs working! Seeded: ${U.data.count} locations. Retrieved: ${Object.keys(re.data).length} states.`)}catch(U){p(` API Error: ${U.message}`)}finally{g(!1)}},I=async()=>{l(!0);try{const U=await cf.seedLocations();alert(`Locations seeded successfully! ${U.count} locations added.`)}catch(U){alert("Failed to seed locations: "+U.message)}finally{l(!1)}},F=async(U,re)=>{try{await Ke.post("verifypayment",{paymentId:U,userId:re}),alert("Payment verified and user updated!"),y()}catch(X){alert("Verification failed: "+X.message)}};return h.jsxs("div",{className:"admin-container",children:[h.jsx("h2",{children:"Admin Dashboard"}),h.jsxs("div",{className:"admin-section",style:{marginBottom:"2rem",padding:"1rem",border:"1px solid #e2e8f0",borderRadius:"0.5rem"},children:[h.jsx("h3",{children:"Location Management"}),h.jsx("p",{children:"Test and seed the locations table with initial data."}),h.jsxs("div",{style:{marginBottom:"1rem"},children:[h.jsx("button",{className:"btn btn-secondary",onClick:E,disabled:m,style:{marginRight:"1rem"},children:m?"Testing APIs...":"Test Location APIs"}),h.jsx("button",{className:"btn btn-primary",onClick:I,disabled:c,children:c?"Seeding Locations...":"Seed Locations Table"})]}),d&&h.jsx("div",{style:{padding:"0.5rem",background:d.includes("")?"#d1fae5":"#fee2e2",borderRadius:"0.25rem",fontSize:"0.9rem"},children:d})]}),h.jsxs("div",{className:"admin-section",children:[h.jsx("h3",{children:"Verify Payments"}),i?h.jsx("p",{children:"Loading..."}):h.jsx("div",{className:"payment-list",children:h.jsxs("table",{className:"admin-table",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"User ID"}),h.jsx("th",{children:"Type"}),h.jsx("th",{children:"UPI Ref"}),h.jsx("th",{children:"Amount"}),h.jsx("th",{children:"Action"})]})}),h.jsx("tbody",{children:r.length>0?r.map(U=>h.jsxs("tr",{children:[h.jsx("td",{children:U.partitionKey}),h.jsx("td",{children:U.type}),h.jsx("td",{children:U.upiRef}),h.jsxs("td",{children:["",U.amount]}),h.jsx("td",{children:h.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>F(U.rowKey,U.partitionKey),children:"Verify"})})]},U.rowKey)):h.jsx("tr",{children:h.jsx("td",{colSpan:"5",style:{textAlign:"center"},children:"No pending payments"})})})]})})]})]})}function aM(){const[r,n]=z.useState(null),[i,s]=z.useState(null),[c,l]=z.useState(""),[d,p]=z.useState(!1),[m,g]=z.useState(""),[y,E]=z.useState(!1),[I,F]=z.useState({subject:"",message:""}),[U,re]=z.useState(!1),[X,ve]=z.useState(!1),pe=localStorage.getItem("userId");z.useEffect(()=>{pe&&oe()},[pe]);const oe=async()=>{try{let He=(await Ke.get("user/profile")).data;const Ve=JSON.parse(localStorage.getItem("user")),Oe={...He,token:Ve?.token,role:He.userType||Ve?.role};n(Oe),localStorage.setItem("user",JSON.stringify(Oe)),g(Oe.referralCode||"Loading..."),window.dispatchEvent(new Event("storage"))}catch{console.error("User not found")}},ee=Ae=>{const He=Ae.target.files[0];He&&(s(He),l(URL.createObjectURL(He)))},ae=async()=>{if(!i||!r){alert("Please select a file and ensure your profile is loaded before uploading.");return}try{console.log("Step 1: Compressing image...");const Ae=await le(i);console.log("Step 2: Getting SAS token from API...");const He=await Ke.get("user/upload-sas-token");console.log("SAS token response:",He.data);const{sasUrl:Ve}=He.data;console.log("Step 3: Uploading to blob storage...",Ve);const Oe=await fetch(Ve,{method:"PUT",headers:{"x-ms-blob-type":"BlockBlob","Content-Type":"image/jpeg"},body:Ae});if(console.log("Upload response status:",Oe.status),!Oe.ok)throw new Error(`Upload failed: ${Oe.status} ${Oe.statusText}`);console.log("Step 4: Confirming upload with API...");const Te=Ve.split("?")[0];await Ke.post("user/confirm-upload",{imageUrl:Te}),alert("Profile image uploaded successfully!"),s(null),l(""),p(!1),await oe()}catch(Ae){console.error("Upload failed:",Ae),console.error("Error details:",Ae.response?.data),alert("Image upload failed: "+(Ae.response?.data?.error||Ae.message))}},le=Ae=>new Promise(He=>{const Ve=document.createElement("canvas"),Oe=Ve.getContext("2d"),Te=new Image;Te.onload=()=>{let{width:De,height:$}=Te;const M=800;De>$?De>M&&($=$*M/De,De=M):$>M&&(De=De*M/$,$=M),Ve.width=De,Ve.height=$,Oe.drawImage(Te,0,0,De,$),Ve.toBlob(Y=>{He(Y)},"image/jpeg",.8)},Te.src=URL.createObjectURL(Ae)}),ne=()=>{navigator.clipboard.writeText(m),E(!0),setTimeout(()=>E(!1),2e3)},Re=()=>{const Ae=`Join FestiveGuest and celebrate festivals with locals! Use my referral code: ${m}`;navigator.share?navigator.share({text:Ae}):ne()},Ee=async Ae=>{if(Ae.preventDefault(),!I.subject||!I.message){alert("Please fill all fields");return}re(!0);try{await Ke.post("feedback",{name:r.name,email:r.email,subject:I.subject,message:I.message,userType:r.userType}),ve(!0),F({subject:"",message:""}),setTimeout(()=>ve(!1),3e3)}catch(He){console.error("Failed to send feedback:",He),alert("Failed to send feedback. Please try again.")}finally{re(!1)}};return r?h.jsxs("div",{className:"profile-container",children:[h.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[h.jsx("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:" My Profile"}),h.jsx("p",{style:{color:"#64748b",margin:"0"},children:"View your profile information"})]}),h.jsxs("div",{className:"profile-card",children:[h.jsxs("div",{className:"profile-image-section",children:[h.jsx("img",{src:c||r.profileImageUrl||"https://via.placeholder.com/150",alt:"Profile",className:"profile-img-preview"}),h.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexDirection:"column",gap:"0.4rem",alignItems:"center"},children:d?h.jsxs(h.Fragment,{children:[h.jsx("label",{htmlFor:"file-input",className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.3rem",cursor:"pointer",padding:"0.4rem 0.8rem",fontSize:"0.875rem"},children:" Choose File"}),h.jsx("input",{id:"file-input",type:"file",accept:"image/*",onChange:ee,style:{display:"none"}}),h.jsxs("button",{className:"btn btn-primary",onClick:ae,disabled:!i,style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.4rem 0.8rem",fontSize:"0.875rem"},children:[h.jsx(K1,{size:14})," Upload"]}),h.jsxs("button",{className:"btn btn-secondary",onClick:()=>{p(!1),s(null),l("")},style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.4rem 0.8rem",fontSize:"0.875rem"},children:[h.jsx(nf,{size:14})," Cancel"]})]}):h.jsxs("button",{className:"btn btn-secondary",onClick:()=>p(!0),style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.4rem 0.8rem",fontSize:"0.875rem"},children:[h.jsx(X1,{size:14})," Edit Photo"]})}),h.jsx("p",{style:{color:"#64748b",fontSize:"0.875rem",textAlign:"center"},children:"Upload a profile photo"})]}),h.jsx("div",{className:"profile-details",children:h.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[h.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #3b82f6"},children:h.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx("strong",{children:" Email:"})," ",r.email]})}),h.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #ef4444"},children:h.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx("strong",{children:" Phone:"})," ",r.phone]})}),h.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #6366f1"},children:h.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx("strong",{children:" Name:"})," ",r.name]})}),h.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #10b981"},children:h.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx("strong",{children:" Role:"})," ",r.userType==="Host"?" Host":" Guest"]})}),h.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #f59e0b"},children:h.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx("strong",{children:" Location:"})," ",r.location]})}),h.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #ec4899"},children:h.jsxs("p",{style:{margin:"0",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[h.jsx("strong",{children:r.userType==="Host"?" My Offerings:":" My Festival Wishes:"}),h.jsx("span",{style:{color:"#475569",fontSize:"0.95rem",lineHeight:"1.5"},children:r.bio||"Not specified"})]})}),h.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #f59e0b"},children:h.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx("strong",{children:" Status:"}),h.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.875rem",background:r.status==="Active"?"#dcfce7":"#fef3c7",color:r.status==="Active"?"#166534":"#92400e"},children:r.status})]})}),h.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #8b5cf6"},children:h.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx("strong",{children:" Contact Enabled:"}),h.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.875rem",background:r.isVerified?"#dcfce7":"#fee2e2",color:r.isVerified?"#166534":"#dc2626"},children:r.isVerified?" Yes":" No"})]})})]})})]}),h.jsxs("div",{className:"profile-card",style:{marginTop:"2rem"},children:[h.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[h.jsxs("h3",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[h.jsx(_c,{size:24,style:{color:"var(--primary)"}}),"Refer a Friend"]}),h.jsx("p",{style:{color:"#64748b",margin:"0"},children:"Share FestiveGuest with friends and earn rewards!"})]}),h.jsxs("div",{style:{background:"#f8fafc",padding:"1.5rem",borderRadius:"0.75rem",border:"2px dashed var(--primary)"},children:[h.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem"},children:[h.jsx("p",{style:{margin:"0 0 0.5rem 0",fontWeight:"600"},children:"Your Referral Code:"}),h.jsx("div",{style:{background:"white",padding:"0.75rem 1rem",borderRadius:"0.5rem",border:"1px solid var(--border)",fontSize:"1.25rem",fontWeight:"bold",color:"var(--primary)",letterSpacing:"2px"},children:m})]}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",flexWrap:"wrap"},children:[h.jsxs("button",{onClick:ne,className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem"},children:[h.jsx(b1,{size:16}),y?"Copied!":"Copy Code"]}),h.jsxs("button",{onClick:Re,className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem"},children:[h.jsx($1,{size:16}),"Share"]})]}),h.jsx("div",{style:{marginTop:"1rem",textAlign:"center"},children:h.jsx("p",{style:{margin:"0",fontSize:"0.875rem",color:"#64748b"},children:"When friends join using your code, you both get special benefits!"})})]})]}),h.jsxs("div",{className:"profile-card",style:{marginTop:"2rem"},children:[h.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[h.jsxs("h3",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[h.jsx(P1,{size:24,style:{color:"var(--primary)"}}),"Send Feedback"]}),h.jsx("p",{style:{color:"#64748b",margin:"0"},children:r.userType==="Host"?"Share your hosting experience or suggestions":"Tell us about your guest experience"})]}),X?h.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--success)"},children:[h.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),h.jsx("h4",{children:"Feedback Sent Successfully!"}),h.jsx("p",{children:"Thank you for your valuable feedback. We'll review it and get back to you if needed."})]}):h.jsx("form",{onSubmit:Ee,children:h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[h.jsxs("div",{children:[h.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Subject"}),h.jsxs("select",{value:I.subject,onChange:Ae=>F({...I,subject:Ae.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"0.5rem",boxSizing:"border-box"},children:[h.jsx("option",{value:"",children:"Select feedback type..."}),r.userType==="Host"?h.jsxs(h.Fragment,{children:[h.jsx("option",{value:"hosting-experience",children:"Hosting Experience"}),h.jsx("option",{value:"guest-interaction",children:"Guest Interaction"}),h.jsx("option",{value:"platform-features",children:"Platform Features"}),h.jsx("option",{value:"payment-issues",children:"Payment Issues"}),h.jsx("option",{value:"safety-concerns",children:"Safety Concerns"}),h.jsx("option",{value:"suggestions",children:"Suggestions for Improvement"})]}):h.jsxs(h.Fragment,{children:[h.jsx("option",{value:"guest-experience",children:"Guest Experience"}),h.jsx("option",{value:"host-interaction",children:"Host Interaction"}),h.jsx("option",{value:"booking-process",children:"Booking Process"}),h.jsx("option",{value:"app-usability",children:"App Usability"}),h.jsx("option",{value:"safety-concerns",children:"Safety Concerns"}),h.jsx("option",{value:"suggestions",children:"Suggestions for Improvement"})]}),h.jsx("option",{value:"other",children:"Other"})]})]}),h.jsxs("div",{children:[h.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Message"}),h.jsx("textarea",{placeholder:r.userType==="Host"?"Share your hosting experience, challenges, or suggestions...":"Tell us about your experience as a guest, any issues, or suggestions...",value:I.message,onChange:Ae=>F({...I,message:Ae.target.value}),rows:5,style:{width:"100%",padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"0.5rem",resize:"vertical",boxSizing:"border-box"}})]}),h.jsxs("button",{type:"submit",disabled:U,className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"center",alignSelf:"flex-start"},children:[h.jsx(po,{size:16}),U?"Sending...":"Send Feedback"]})]})})]})]}):h.jsx("div",{className:"profile-container text-center",style:{padding:"3rem"},children:h.jsx("div",{className:"loading",children:"Loading profile..."})})}function cM(){const{userName:r}=av(),n=Qr(),[i,s]=z.useState(null),[c,l]=z.useState([]),[d,p]=z.useState(!0);z.useEffect(()=>{m()},[r]);const m=async()=>{try{console.log("Fetching profile for userName:",r);const[I,F]=await Promise.all([Ke.get(`user/public-profile-by-name/${encodeURIComponent(r)}`),Ke.get(`user/reviews-by-name/${encodeURIComponent(r)}`)]);s(I.data),l(F.data||[])}catch(I){console.error("Failed to fetch profile:",I),console.error("Error details:",I.response?.data),console.error("Requested userName:",r)}finally{p(!1)}},g=I=>Array.from({length:5},(F,U)=>h.jsx(Md,{size:16,fill:U<I?"#fbbf24":"none",color:U<I?"#fbbf24":"#d1d5db"},U)),y=I=>new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"long"});if(d)return h.jsx("div",{className:"profile-container text-center",style:{padding:"3rem"},children:h.jsx("div",{className:"loading",children:"Loading profile..."})});if(!i)return h.jsxs("div",{className:"profile-container text-center",style:{padding:"3rem"},children:[h.jsx("h3",{children:"Profile not found"}),h.jsx("button",{onClick:()=>n(-1),className:"btn btn-primary",children:"Go Back"})]});const E=c.length>0?c.reduce((I,F)=>I+F.rating,0)/c.length:0;return h.jsxs("div",{className:"profile-container",children:[h.jsxs("div",{style:{marginBottom:"2rem"},children:[h.jsxs("button",{onClick:()=>n(-1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[h.jsx(ef,{size:16})," Back"]}),h.jsxs("div",{style:{textAlign:"center"},children:[h.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[i.userType==="Host"?"":""," ",i.name]}),h.jsxs("p",{style:{color:"#64748b",margin:"0"},children:[i.userType,"  Joined ",y(i.createdAt)]})]})]}),h.jsxs("div",{className:"profile-card",children:[h.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[h.jsx("img",{src:i.profileImageUrl||"https://via.placeholder.com/150",alt:i.name,style:{width:"150px",height:"150px",borderRadius:"50%",objectFit:"cover",border:"4px solid var(--border)",marginBottom:"1rem"}}),h.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[h.jsx(O1,{size:16,color:"#64748b"}),h.jsx("span",{style:{color:"#64748b"},children:i.location})]}),c.length>0&&h.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[h.jsx("div",{style:{display:"flex",gap:"2px"},children:g(Math.round(E))}),h.jsx("span",{style:{fontWeight:"600"},children:E.toFixed(1)}),h.jsxs("span",{style:{color:"#64748b"},children:["(",c.length," reviews)"]})]})]}),h.jsxs("div",{style:{marginBottom:"2rem"},children:[h.jsx("h4",{style:{marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:i.userType==="Host"?" About My Hosting":" About Me"}),h.jsx("p",{style:{color:"#475569",lineHeight:"1.6",background:"#f8fafc",padding:"1rem",borderRadius:"0.75rem",borderLeft:"4px solid var(--primary)"},children:i.bio||"No description provided."})]})]}),c.length>0&&h.jsxs("div",{className:"profile-card",style:{marginTop:"2rem"},children:[h.jsxs("h3",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx(Md,{size:20,color:"#fbbf24"}),"Reviews (",c.length,")"]}),h.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:c.map((I,F)=>h.jsxs("div",{style:{background:"#f8fafc",padding:"1rem",borderRadius:"0.75rem",border:"1px solid var(--border)"},children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx("strong",{children:I.reviewerName}),h.jsx("div",{style:{display:"flex",gap:"2px"},children:g(I.rating)})]}),h.jsx("span",{style:{color:"#64748b",fontSize:"0.875rem"},children:y(I.createdAt)})]}),h.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.5"},children:I.comment})]},F))})]})]})}const lM=()=>{const[r,n]=z.useState({name:"",email:"",message:""}),[i,s]=z.useState(!1),[c,l]=z.useState(!1),d=async m=>{if(m.preventDefault(),!r.name||!r.email||!r.message){alert("Please fill all fields");return}s(!0);try{await Ke.post("feedback",r),l(!0),n({name:"",email:"",message:""}),setTimeout(()=>l(!1),3e3)}catch(g){console.error("Failed to send feedback:",g),alert("Failed to send feedback. Please try again.")}finally{s(!1)}},p=()=>{window.open("https://wa.me/919966888484","_blank","noopener,noreferrer")};return h.jsx("div",{className:"help-page",children:h.jsxs("div",{className:"help-container",children:[h.jsxs("div",{className:"help-header",children:[h.jsx(gc,{size:48,className:"help-icon",style:{color:"var(--primary)"}}),h.jsxs("h1",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem"},children:[h.jsx(_c,{size:32,style:{color:"var(--primary)"}}),"Help & Support"]}),h.jsx("p",{children:"We're here to help you with any questions or issues you may have."})]}),h.jsxs("div",{className:"help-content",children:[h.jsxs("div",{className:"help-card",children:[h.jsx(Yg,{size:32,className:"card-icon",style:{color:"var(--primary)"}}),h.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx(y1,{size:20}),"Email Support"]}),h.jsx("p",{children:"Send us an email and we'll get back to you as soon as possible."}),h.jsxs("a",{href:"mailto:support@festiveguest.com",className:"btn btn-outline",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx(Yg,{size:16}),"Customer Support"]})]}),h.jsxs("div",{className:"help-card",children:[h.jsx(yc,{size:32,className:"card-icon",style:{color:"#25D366"}}),h.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx(L1,{size:20}),"WhatsApp Support"]}),h.jsx("p",{children:"Chat with our support team directly for quick assistance."}),h.jsxs("button",{onClick:p,className:"btn btn-primary whatsapp-btn",style:{cursor:"pointer",border:"none",display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx(yc,{size:16}),"Chat on WhatsApp"]})]})]}),h.jsx("div",{className:"feedback-section",style:{marginTop:"3rem",display:"flex",justifyContent:"center"},children:h.jsxs("div",{style:{width:"100%",maxWidth:"400px",background:"#f8fafc",padding:"2rem",borderRadius:"var(--radius)",boxShadow:"var(--shadow)",border:"1px solid var(--border)",transition:"all 0.3s ease",textAlign:"center"},onMouseEnter:m=>{m.target.style.transform="translateY(-5px)",m.target.style.borderColor="var(--primary)",m.target.style.boxShadow="var(--shadow)"},onMouseLeave:m=>{m.target.style.transform="translateY(0)",m.target.style.borderColor="var(--border)",m.target.style.boxShadow="var(--shadow)"},children:[h.jsx(po,{size:32,className:"card-icon",style:{color:"var(--primary)",margin:"0 auto"}}),h.jsx("h3",{style:{textAlign:"center"},children:"Send Feedback"}),h.jsx("p",{style:{textAlign:"center"},children:"Share your thoughts or report issues directly with us."}),c?h.jsxs("div",{style:{color:"var(--success)",textAlign:"center",padding:"1rem"},children:[h.jsx(Xg,{size:24,style:{marginBottom:"0.5rem"}}),h.jsx("p",{children:"Feedback sent successfully!"})]}):h.jsx("form",{onSubmit:d,children:h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[h.jsx("input",{type:"text",placeholder:"Your Name",value:r.name,onChange:m=>n({...r,name:m.target.value}),style:{padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"0.5rem",width:"100%",boxSizing:"border-box"}}),h.jsx("input",{type:"email",placeholder:"Your Email",value:r.email,onChange:m=>n({...r,email:m.target.value}),style:{padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"0.5rem",width:"100%",boxSizing:"border-box"}}),h.jsx("textarea",{placeholder:"Your feedback or message...",value:r.message,onChange:m=>n({...r,message:m.target.value}),rows:4,style:{padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"0.5rem",resize:"vertical",width:"100%",boxSizing:"border-box"}}),h.jsxs("button",{type:"submit",disabled:i,className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"center"},children:[h.jsx(po,{size:16}),i?"Sending...":"Send Feedback"]})]})})]})}),h.jsxs("div",{className:"faq-section",children:[h.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[h.jsx(gc,{size:28,style:{color:"var(--primary)"}}),"Frequently Asked Questions"]}),h.jsxs("div",{className:"faq-item",children:[h.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx(Xg,{size:20,style:{color:"var(--success)"}}),"How do I become a host?"]}),h.jsx("p",{children:'Go to the registration page, select "Become a Host", and fill out your profile details.'})]}),h.jsxs("div",{className:"faq-item",children:[h.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx(h1,{size:20,style:{color:"var(--warning)"}}),"Is it free to use?"]}),h.jsx("p",{children:"Registration is free for both guests and hosts. Specific festival experiences may have their own terms."})]})]})]})})},uM=()=>{const[r,n]=z.useState(!1),[i,s]=z.useState(null),[c,l]=z.useState(!0);z.useEffect(()=>{try{const F=localStorage.getItem("user");if(F){const U=JSON.parse(F);U&&U.token&&U.email&&(U.role||U.userType)&&s(U)}}catch{console.warn("Invalid user data in localStorage"),localStorage.removeItem("user")}},[]);const{unreadCount:d,clearUnreadCount:p}=tR(),m=Qn();z.useEffect(()=>{const F=setTimeout(()=>{l(!1)},3e3),U=()=>{try{const re=localStorage.getItem("user");if(re){const X=JSON.parse(re);X&&X.token&&X.email&&(X.role||X.userType)?s(X):s(null)}else s(null)}catch{console.warn("Invalid user data in localStorage"),localStorage.removeItem("user"),s(null)}};return window.addEventListener("storage",U),()=>{clearTimeout(F),window.removeEventListener("storage",U)}},[]);const g=F=>{const U=F?.role||F?.userType||F?.partitionKey;return U==="Host"?"/host-dashboard":U==="Guest"?"/guest-dashboard":U==="Admin"?"/admin":"/login"},y=()=>{localStorage.clear(),s(null),n(!1),window.location.href="/"},E=()=>{p(),n(!1)},I=F=>F==="/dashboard"?m.pathname===g(i)||m.pathname==="/browse":m.pathname===F;return c?h.jsx(Dx,{}):h.jsxs("div",{className:"app-container",style:{animation:"fadeIn 0.8s ease-out"},children:[h.jsxs("nav",{className:"navbar",children:[h.jsx(Hn,{to:"/",className:"nav-logo",onClick:()=>n(!1),children:h.jsx(Ux,{className:"nav-logo-img",style:{height:"50px"}})}),h.jsx("button",{className:"menu-toggle",onClick:()=>n(!r),"aria-label":"Toggle menu",children:r?h.jsx(nf,{size:28}):h.jsx(j1,{size:28})}),h.jsx("div",{className:`nav-links ${r?"mobile-open":""}`,children:i?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"user-badge",children:h.jsxs("span",{className:"user-badge-text",children:[h.jsx("strong",{children:i.name})," ",h.jsxs("span",{className:"user-badge-role",children:["(",i.role||i.userType||i.partitionKey,")"]})]})}),h.jsxs(Hn,{to:g(i),className:`nav-item ${I("/dashboard")?"active":""}`,onClick:()=>n(!1),children:[h.jsx(E1,{size:20})," Dashboard"]}),h.jsxs(Hn,{to:"/chats",className:`nav-item chat-nav-item ${I("/chats")?"active":""}`,onClick:E,children:[" Chats",d>0&&h.jsx("span",{className:`unread-badge ${d>9?"large-count":""}`,children:d>99?"99+":d})]}),h.jsxs(Hn,{to:"/profile",className:`nav-item ${I("/profile")?"active":""}`,onClick:()=>n(!1),children:[h.jsx(W1,{size:20})," Profile"]}),h.jsxs(Hn,{to:"/help",className:`nav-item ${I("/help")?"active":""}`,onClick:()=>n(!1),children:[h.jsx(gc,{size:20})," Help"]}),(i.role==="Admin"||i.userType==="Admin")&&h.jsxs(Hn,{to:"/admin",className:`nav-item ${I("/admin")?"active":""}`,onClick:()=>n(!1),children:[h.jsx(G1,{size:20})," Admin"]}),h.jsxs("button",{onClick:y,className:"nav-item logout-btn",style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx(A1,{size:20})," Logout"]})]}):h.jsxs(h.Fragment,{children:[h.jsxs(Hn,{to:"/help",className:"nav-item",onClick:()=>n(!1),children:[h.jsx(gc,{size:20})," Help"]}),h.jsx(Hn,{to:"/login",className:"nav-item",onClick:()=>n(!1),children:"Login"}),h.jsx(Hn,{to:"/register",className:"nav-item btn btn-primary",style:{color:"white",padding:"0.5rem 1rem"},onClick:()=>n(!1),children:"Register"})]})})]}),h.jsx("main",{className:"content full-width",children:h.jsxs(RC,{children:[h.jsx(pn,{path:"/",element:h.jsx(zx,{user:i})}),h.jsx(pn,{path:"/login",element:i?h.jsx(gr,{to:"/"}):h.jsx(Lx,{setUser:s})}),h.jsx(pn,{path:"/register",element:i?h.jsx(gr,{to:"/"}):h.jsx(Bx,{setUser:s})}),h.jsx(pn,{path:"/browse",element:i?.role==="Guest"||i?.userType==="Guest"?h.jsx(gy,{user:i}):h.jsx(gr,{to:"/login"})}),h.jsx(pn,{path:"/guest-dashboard",element:i?.role==="Guest"||i?.userType==="Guest"?h.jsx(gy,{user:i}):h.jsx(gr,{to:"/login"})}),h.jsx(pn,{path:"/host-dashboard",element:i?.role==="Host"||i?.userType==="Host"?h.jsx(xE,{user:i}):h.jsx(gr,{to:"/login"})}),h.jsx(pn,{path:"/chats",element:i?h.jsx(oM,{}):h.jsx(gr,{to:"/login"})}),h.jsx(pn,{path:"/profile",element:i?h.jsx(aM,{}):h.jsx(gr,{to:"/login"})}),h.jsx(pn,{path:"/profile/:userName",element:h.jsx(cM,{})}),h.jsx(pn,{path:"/admin",element:i?.role==="Admin"||i?.userType==="Admin"?h.jsx(sM,{}):h.jsx(gr,{to:"/login"})}),h.jsx(pn,{path:"/chat/:recipientId",element:i?h.jsx(iM,{user:i}):h.jsx(gr,{to:"/login"})}),h.jsx(pn,{path:"/help",element:h.jsx(lM,{})}),h.jsx(pn,{path:"/api-test",element:h.jsx(Ix,{})})]})})]})};function dM(){return h.jsx(YC,{children:h.jsx(nR,{children:h.jsx(uM,{})})})}_T.createRoot(document.getElementById("root")).render(h.jsx(z.StrictMode,{children:h.jsx(dM,{})}));
