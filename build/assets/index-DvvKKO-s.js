(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))s(c);new MutationObserver(c=>{for(const l of c)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function i(c){const l={};return c.integrity&&(l.integrity=c.integrity),c.referrerPolicy&&(l.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?l.credentials="include":c.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(c){if(c.ep)return;c.ep=!0;const l=i(c);fetch(c.href,l)}})();var Ng=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Rc(r){if(Object.prototype.hasOwnProperty.call(r,"__esModule"))return r;var n=r.default;if(typeof n=="function"){var i=function s(){var c=!1;try{c=this instanceof s}catch{}return c?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};i.prototype=n.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(r).forEach(function(s){var c=Object.getOwnPropertyDescriptor(r,s);Object.defineProperty(i,s,c.get?c:{enumerable:!0,get:function(){return r[s]}})}),i}var sd={exports:{}},Ss={};var Og;function ST(){if(Og)return Ss;Og=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(s,c,l){var d=null;if(l!==void 0&&(d=""+l),c.key!==void 0&&(d=""+c.key),"key"in c){l={};for(var p in c)p!=="key"&&(l[p]=c[p])}else l=c;return c=l.ref,{$$typeof:r,type:s,key:d,ref:c!==void 0?c:null,props:l}}return Ss.Fragment=n,Ss.jsx=i,Ss.jsxs=i,Ss}var jg;function wT(){return jg||(jg=1,sd.exports=ST()),sd.exports}var h=wT(),ad={exports:{}},Ge={};var Mg;function TT(){if(Mg)return Ge;Mg=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),d=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),I=Symbol.iterator;function Y(S){return S===null||typeof S!="object"?null:(S=I&&S[I]||S["@@iterator"],typeof S=="function"?S:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ee=Object.assign,J={};function de(S,j,x){this.props=S,this.context=j,this.refs=J,this.updater=x||M}de.prototype.isReactComponent={},de.prototype.setState=function(S,j){if(typeof S!="object"&&typeof S!="function"&&S!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,S,j,"setState")},de.prototype.forceUpdate=function(S){this.updater.enqueueForceUpdate(this,S,"forceUpdate")};function ue(){}ue.prototype=de.prototype;function pe(S,j,x){this.props=S,this.context=j,this.refs=J,this.updater=x||M}var F=pe.prototype=new ue;F.constructor=pe,ee(F,de.prototype),F.isPureReactComponent=!0;var ne=Array.isArray;function me(){}var ae={H:null,A:null,T:null,S:null},_e=Object.prototype.hasOwnProperty;function Ce(S,j,x){var b=x.ref;return{$$typeof:r,type:S,key:j,ref:b!==void 0?b:null,props:x}}function Re(S,j){return Ce(S.type,j,S.props)}function Le(S){return typeof S=="object"&&S!==null&&S.$$typeof===r}function Ie(S){var j={"=":"=0",":":"=2"};return"$"+S.replace(/[=:]/g,function(x){return j[x]})}var Ne=/\/+/g;function Se(S,j){return typeof S=="object"&&S!==null&&S.key!=null?Ie(""+S.key):j.toString(36)}function De(S){switch(S.status){case"fulfilled":return S.value;case"rejected":throw S.reason;default:switch(typeof S.status=="string"?S.then(me,me):(S.status="pending",S.then(function(j){S.status==="pending"&&(S.status="fulfilled",S.value=j)},function(j){S.status==="pending"&&(S.status="rejected",S.reason=j)})),S.status){case"fulfilled":return S.value;case"rejected":throw S.reason}}throw S}function q(S,j,x,b,C){var A=typeof S;(A==="undefined"||A==="boolean")&&(S=null);var N=!1;if(S===null)N=!0;else switch(A){case"bigint":case"string":case"number":N=!0;break;case"object":switch(S.$$typeof){case r:case n:N=!0;break;case y:return N=S._init,q(N(S._payload),j,x,b,C)}}if(N)return C=C(S),N=b===""?"."+Se(S,0):b,ne(C)?(x="",N!=null&&(x=N.replace(Ne,"$&/")+"/"),q(C,j,x,"",function(k){return k})):C!=null&&(Le(C)&&(C=Re(C,x+(C.key==null||S&&S.key===C.key?"":(""+C.key).replace(Ne,"$&/")+"/")+N)),j.push(C)),1;N=0;var w=b===""?".":b+":";if(ne(S))for(var R=0;R<S.length;R++)b=S[R],A=w+Se(b,R),N+=q(b,j,x,A,C);else if(R=Y(S),typeof R=="function")for(S=R.call(S),R=0;!(b=S.next()).done;)b=b.value,A=w+Se(b,R++),N+=q(b,j,x,A,C);else if(A==="object"){if(typeof S.then=="function")return q(De(S),j,x,b,C);throw j=String(S),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(S).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.")}return N}function U(S,j,x){if(S==null)return S;var b=[],C=0;return q(S,b,"","",function(A){return j.call(x,A,C++)}),b}function Q(S){if(S._status===-1){var j=S._result;j=j(),j.then(function(x){(S._status===0||S._status===-1)&&(S._status=1,S._result=x)},function(x){(S._status===0||S._status===-1)&&(S._status=2,S._result=x)}),S._status===-1&&(S._status=0,S._result=j)}if(S._status===1)return S._result.default;throw S._result}var L=typeof reportError=="function"?reportError:function(S){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var j=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof S=="object"&&S!==null&&typeof S.message=="string"?String(S.message):String(S),error:S});if(!window.dispatchEvent(j))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",S);return}console.error(S)},W={map:U,forEach:function(S,j,x){U(S,function(){j.apply(this,arguments)},x)},count:function(S){var j=0;return U(S,function(){j++}),j},toArray:function(S){return U(S,function(j){return j})||[]},only:function(S){if(!Le(S))throw Error("React.Children.only expected to receive a single React element child.");return S}};return Ge.Activity=E,Ge.Children=W,Ge.Component=de,Ge.Fragment=i,Ge.Profiler=c,Ge.PureComponent=pe,Ge.StrictMode=s,Ge.Suspense=m,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ae,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(S){return ae.H.useMemoCache(S)}},Ge.cache=function(S){return function(){return S.apply(null,arguments)}},Ge.cacheSignal=function(){return null},Ge.cloneElement=function(S,j,x){if(S==null)throw Error("The argument must be a React element, but you passed "+S+".");var b=ee({},S.props),C=S.key;if(j!=null)for(A in j.key!==void 0&&(C=""+j.key),j)!_e.call(j,A)||A==="key"||A==="__self"||A==="__source"||A==="ref"&&j.ref===void 0||(b[A]=j[A]);var A=arguments.length-2;if(A===1)b.children=x;else if(1<A){for(var N=Array(A),w=0;w<A;w++)N[w]=arguments[w+2];b.children=N}return Ce(S.type,C,b)},Ge.createContext=function(S){return S={$$typeof:d,_currentValue:S,_currentValue2:S,_threadCount:0,Provider:null,Consumer:null},S.Provider=S,S.Consumer={$$typeof:l,_context:S},S},Ge.createElement=function(S,j,x){var b,C={},A=null;if(j!=null)for(b in j.key!==void 0&&(A=""+j.key),j)_e.call(j,b)&&b!=="key"&&b!=="__self"&&b!=="__source"&&(C[b]=j[b]);var N=arguments.length-2;if(N===1)C.children=x;else if(1<N){for(var w=Array(N),R=0;R<N;R++)w[R]=arguments[R+2];C.children=w}if(S&&S.defaultProps)for(b in N=S.defaultProps,N)C[b]===void 0&&(C[b]=N[b]);return Ce(S,A,C)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(S){return{$$typeof:p,render:S}},Ge.isValidElement=Le,Ge.lazy=function(S){return{$$typeof:y,_payload:{_status:-1,_result:S},_init:Q}},Ge.memo=function(S,j){return{$$typeof:g,type:S,compare:j===void 0?null:j}},Ge.startTransition=function(S){var j=ae.T,x={};ae.T=x;try{var b=S(),C=ae.S;C!==null&&C(x,b),typeof b=="object"&&b!==null&&typeof b.then=="function"&&b.then(me,L)}catch(A){L(A)}finally{j!==null&&x.types!==null&&(j.types=x.types),ae.T=j}},Ge.unstable_useCacheRefresh=function(){return ae.H.useCacheRefresh()},Ge.use=function(S){return ae.H.use(S)},Ge.useActionState=function(S,j,x){return ae.H.useActionState(S,j,x)},Ge.useCallback=function(S,j){return ae.H.useCallback(S,j)},Ge.useContext=function(S){return ae.H.useContext(S)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(S,j){return ae.H.useDeferredValue(S,j)},Ge.useEffect=function(S,j){return ae.H.useEffect(S,j)},Ge.useEffectEvent=function(S){return ae.H.useEffectEvent(S)},Ge.useId=function(){return ae.H.useId()},Ge.useImperativeHandle=function(S,j,x){return ae.H.useImperativeHandle(S,j,x)},Ge.useInsertionEffect=function(S,j){return ae.H.useInsertionEffect(S,j)},Ge.useLayoutEffect=function(S,j){return ae.H.useLayoutEffect(S,j)},Ge.useMemo=function(S,j){return ae.H.useMemo(S,j)},Ge.useOptimistic=function(S,j){return ae.H.useOptimistic(S,j)},Ge.useReducer=function(S,j,x){return ae.H.useReducer(S,j,x)},Ge.useRef=function(S){return ae.H.useRef(S)},Ge.useState=function(S){return ae.H.useState(S)},Ge.useSyncExternalStore=function(S,j,x){return ae.H.useSyncExternalStore(S,j,x)},Ge.useTransition=function(){return ae.H.useTransition()},Ge.version="19.2.3",Ge}var Ug;function Yd(){return Ug||(Ug=1,ad.exports=TT()),ad.exports}var z=Yd(),cd={exports:{}},ws={},ld={exports:{}},ud={};var Dg;function CT(){return Dg||(Dg=1,(function(r){function n(q,U){var Q=q.length;q.push(U);e:for(;0<Q;){var L=Q-1>>>1,W=q[L];if(0<c(W,U))q[L]=U,q[Q]=W,Q=L;else break e}}function i(q){return q.length===0?null:q[0]}function s(q){if(q.length===0)return null;var U=q[0],Q=q.pop();if(Q!==U){q[0]=Q;e:for(var L=0,W=q.length,S=W>>>1;L<S;){var j=2*(L+1)-1,x=q[j],b=j+1,C=q[b];if(0>c(x,Q))b<W&&0>c(C,x)?(q[L]=C,q[b]=Q,L=b):(q[L]=x,q[j]=Q,L=j);else if(b<W&&0>c(C,Q))q[L]=C,q[b]=Q,L=b;else break e}}return U}function c(q,U){var Q=q.sortIndex-U.sortIndex;return Q!==0?Q:q.id-U.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var d=Date,p=d.now();r.unstable_now=function(){return d.now()-p}}var m=[],g=[],y=1,E=null,I=3,Y=!1,M=!1,ee=!1,J=!1,de=typeof setTimeout=="function"?setTimeout:null,ue=typeof clearTimeout=="function"?clearTimeout:null,pe=typeof setImmediate<"u"?setImmediate:null;function F(q){for(var U=i(g);U!==null;){if(U.callback===null)s(g);else if(U.startTime<=q)s(g),U.sortIndex=U.expirationTime,n(m,U);else break;U=i(g)}}function ne(q){if(ee=!1,F(q),!M)if(i(m)!==null)M=!0,me||(me=!0,Ie());else{var U=i(g);U!==null&&De(ne,U.startTime-q)}}var me=!1,ae=-1,_e=5,Ce=-1;function Re(){return J?!0:!(r.unstable_now()-Ce<_e)}function Le(){if(J=!1,me){var q=r.unstable_now();Ce=q;var U=!0;try{e:{M=!1,ee&&(ee=!1,ue(ae),ae=-1),Y=!0;var Q=I;try{t:{for(F(q),E=i(m);E!==null&&!(E.expirationTime>q&&Re());){var L=E.callback;if(typeof L=="function"){E.callback=null,I=E.priorityLevel;var W=L(E.expirationTime<=q);if(q=r.unstable_now(),typeof W=="function"){E.callback=W,F(q),U=!0;break t}E===i(m)&&s(m),F(q)}else s(m);E=i(m)}if(E!==null)U=!0;else{var S=i(g);S!==null&&De(ne,S.startTime-q),U=!1}}break e}finally{E=null,I=Q,Y=!1}U=void 0}}finally{U?Ie():me=!1}}}var Ie;if(typeof pe=="function")Ie=function(){pe(Le)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,Se=Ne.port2;Ne.port1.onmessage=Le,Ie=function(){Se.postMessage(null)}}else Ie=function(){de(Le,0)};function De(q,U){ae=de(function(){q(r.unstable_now())},U)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(q){q.callback=null},r.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_e=0<q?Math.floor(1e3/q):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_next=function(q){switch(I){case 1:case 2:case 3:var U=3;break;default:U=I}var Q=I;I=U;try{return q()}finally{I=Q}},r.unstable_requestPaint=function(){J=!0},r.unstable_runWithPriority=function(q,U){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Q=I;I=q;try{return U()}finally{I=Q}},r.unstable_scheduleCallback=function(q,U,Q){var L=r.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?L+Q:L):Q=L,q){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=Q+W,q={id:y++,callback:U,priorityLevel:q,startTime:Q,expirationTime:W,sortIndex:-1},Q>L?(q.sortIndex=Q,n(g,q),i(m)===null&&q===i(g)&&(ee?(ue(ae),ae=-1):ee=!0,De(ne,Q-L))):(q.sortIndex=W,n(m,q),M||Y||(M=!0,me||(me=!0,Ie()))),q},r.unstable_shouldYield=Re,r.unstable_wrapCallback=function(q){var U=I;return function(){var Q=I;I=U;try{return q.apply(this,arguments)}finally{I=Q}}}})(ud)),ud}var Pg;function xT(){return Pg||(Pg=1,ld.exports=CT()),ld.exports}var dd={exports:{}},Jt={};var Ig;function RT(){if(Ig)return Jt;Ig=1;var r=Yd();function n(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(n(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},c=Symbol.for("react.portal");function l(m,g,y){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:E==null?null:""+E,children:m,containerInfo:g,implementation:y}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Jt.createPortal=function(m,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(n(299));return l(m,g,null,y)},Jt.flushSync=function(m){var g=d.T,y=s.p;try{if(d.T=null,s.p=2,m)return m()}finally{d.T=g,s.p=y,s.d.f()}},Jt.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(m,g))},Jt.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},Jt.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var y=g.as,E=p(y,g.crossOrigin),I=typeof g.integrity=="string"?g.integrity:void 0,Y=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?s.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:I,fetchPriority:Y}):y==="script"&&s.d.X(m,{crossOrigin:E,integrity:I,fetchPriority:Y,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Jt.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=p(g.as,g.crossOrigin);s.d.M(m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(m)},Jt.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,E=p(y,g.crossOrigin);s.d.L(m,y,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Jt.preloadModule=function(m,g){if(typeof m=="string")if(g){var y=p(g.as,g.crossOrigin);s.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(m)},Jt.requestFormReset=function(m){s.d.r(m)},Jt.unstable_batchedUpdates=function(m,g){return m(g)},Jt.useFormState=function(m,g,y){return d.H.useFormState(m,g,y)},Jt.useFormStatus=function(){return d.H.useHostTransitionStatus()},Jt.version="19.2.3",Jt}var zg;function ET(){if(zg)return dd.exports;zg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),dd.exports=RT(),dd.exports}var Lg;function _T(){if(Lg)return ws;Lg=1;var r=xT(),n=Yd(),i=ET();function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)t+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function l(e){var t=e,o=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(o=t.return),e=t.return;while(e)}return t.tag===3?o:null}function d(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function p(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(l(e)!==e)throw Error(s(188))}function g(e){var t=e.alternate;if(!t){if(t=l(e),t===null)throw Error(s(188));return t!==e?null:e}for(var o=e,a=t;;){var u=o.return;if(u===null)break;var f=u.alternate;if(f===null){if(a=u.return,a!==null){o=a;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===o)return m(u),e;if(f===a)return m(u),t;f=f.sibling}throw Error(s(188))}if(o.return!==a.return)o=u,a=f;else{for(var v=!1,_=u.child;_;){if(_===o){v=!0,o=u,a=f;break}if(_===a){v=!0,a=u,o=f;break}_=_.sibling}if(!v){for(_=f.child;_;){if(_===o){v=!0,o=f,a=u;break}if(_===a){v=!0,a=f,o=u;break}_=_.sibling}if(!v)throw Error(s(189))}}if(o.alternate!==a)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?e:t}function y(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=y(e),t!==null)return t;e=e.sibling}return null}var E=Object.assign,I=Symbol.for("react.element"),Y=Symbol.for("react.transitional.element"),M=Symbol.for("react.portal"),ee=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),de=Symbol.for("react.profiler"),ue=Symbol.for("react.consumer"),pe=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),ne=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),_e=Symbol.for("react.lazy"),Ce=Symbol.for("react.activity"),Re=Symbol.for("react.memo_cache_sentinel"),Le=Symbol.iterator;function Ie(e){return e===null||typeof e!="object"?null:(e=Le&&e[Le]||e["@@iterator"],typeof e=="function"?e:null)}var Ne=Symbol.for("react.client.reference");function Se(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ne?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ee:return"Fragment";case de:return"Profiler";case J:return"StrictMode";case ne:return"Suspense";case me:return"SuspenseList";case Ce:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case M:return"Portal";case pe:return e.displayName||"Context";case ue:return(e._context.displayName||"Context")+".Consumer";case F:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ae:return t=e.displayName||null,t!==null?t:Se(e.type)||"Memo";case _e:t=e._payload,e=e._init;try{return Se(e(t))}catch{}}return null}var De=Array.isArray,q=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},L=[],W=-1;function S(e){return{current:e}}function j(e){0>W||(e.current=L[W],L[W]=null,W--)}function x(e,t){W++,L[W]=e.current,e.current=t}var b=S(null),C=S(null),A=S(null),N=S(null);function w(e,t){switch(x(A,t),x(C,e),x(b,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?Zm(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=Zm(t),e=eg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}j(b),x(b,e)}function R(){j(b),j(C),j(A)}function k(e){e.memoizedState!==null&&x(N,e);var t=b.current,o=eg(t,e.type);t!==o&&(x(C,e),x(b,o))}function H(e){C.current===e&&(j(b),j(C)),N.current===e&&(j(N),gs._currentValue=Q)}var K,V;function B(e){if(K===void 0)try{throw Error()}catch(o){var t=o.stack.trim().match(/\n( *(at )?)/);K=t&&t[1]||"",V=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+K+e+V}var se=!1;function he(e,t){if(!e||se)return"";se=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var a={DetermineComponentFrameRoot:function(){try{if(t){var xe=function(){throw Error()};if(Object.defineProperty(xe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xe,[])}catch(ye){var fe=ye}Reflect.construct(e,[],xe)}else{try{xe.call()}catch(ye){fe=ye}e.call(xe.prototype)}}else{try{throw Error()}catch(ye){fe=ye}(xe=e())&&typeof xe.catch=="function"&&xe.catch(function(){})}}catch(ye){if(ye&&fe&&typeof ye.stack=="string")return[ye.stack,fe.stack]}return[null,null]}};a.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(a.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(a.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=a.DetermineComponentFrameRoot(),v=f[0],_=f[1];if(v&&_){var G=v.split(`
`),le=_.split(`
`);for(u=a=0;a<G.length&&!G[a].includes("DetermineComponentFrameRoot");)a++;for(;u<le.length&&!le[u].includes("DetermineComponentFrameRoot");)u++;if(a===G.length||u===le.length)for(a=G.length-1,u=le.length-1;1<=a&&0<=u&&G[a]!==le[u];)u--;for(;1<=a&&0<=u;a--,u--)if(G[a]!==le[u]){if(a!==1||u!==1)do if(a--,u--,0>u||G[a]!==le[u]){var be=`
`+G[a].replace(" at new "," at ");return e.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",e.displayName)),be}while(1<=a&&0<=u);break}}}finally{se=!1,Error.prepareStackTrace=o}return(o=e?e.displayName||e.name:"")?B(o):""}function ie(e,t){switch(e.tag){case 26:case 27:case 5:return B(e.type);case 16:return B("Lazy");case 13:return e.child!==t&&t!==null?B("Suspense Fallback"):B("Suspense");case 19:return B("SuspenseList");case 0:case 15:return he(e.type,!1);case 11:return he(e.type.render,!1);case 1:return he(e.type,!0);case 31:return B("Activity");default:return""}}function P(e){try{var t="",o=null;do t+=ie(e,o),o=e,e=e.return;while(e);return t}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}var X=Object.prototype.hasOwnProperty,Ee=r.unstable_scheduleCallback,Ae=r.unstable_cancelCallback,ke=r.unstable_shouldYield,Oe=r.unstable_requestPaint,$e=r.unstable_now,Qe=r.unstable_getCurrentPriorityLevel,O=r.unstable_ImmediatePriority,T=r.unstable_UserBlockingPriority,D=r.unstable_NormalPriority,te=r.unstable_LowPriority,$=r.unstable_IdlePriority,re=r.log,ve=r.unstable_setDisableYieldValue,ze=null,je=null;function Ue(e){if(typeof re=="function"&&ve(e),je&&typeof je.setStrictMode=="function")try{je.setStrictMode(ze,e)}catch{}}var Be=Math.clz32?Math.clz32:It,lt=Math.log,xt=Math.LN2;function It(e){return e>>>=0,e===0?32:31-(lt(e)/xt|0)|0}var Yt=256,ki=262144,Zr=4194304;function ei(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function qs(e,t,o){var a=e.pendingLanes;if(a===0)return 0;var u=0,f=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var _=a&134217727;return _!==0?(a=_&~f,a!==0?u=ei(a):(v&=_,v!==0?u=ei(v):o||(o=_&~e,o!==0&&(u=ei(o))))):(_=a&~f,_!==0?u=ei(_):v!==0?u=ei(v):o||(o=a&~e,o!==0&&(u=ei(o)))),u===0?0:t!==0&&t!==u&&(t&f)===0&&(f=u&-u,o=t&-t,f>=o||f===32&&(o&4194048)!==0)?t:u}function Ao(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function aS(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Uf(){var e=Zr;return Zr<<=1,(Zr&62914560)===0&&(Zr=4194304),e}function Yc(e){for(var t=[],o=0;31>o;o++)t.push(e);return t}function No(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function cS(e,t,o,a,u,f){var v=e.pendingLanes;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=o,e.entangledLanes&=o,e.errorRecoveryDisabledLanes&=o,e.shellSuspendCounter=0;var _=e.entanglements,G=e.expirationTimes,le=e.hiddenUpdates;for(o=v&~o;0<o;){var be=31-Be(o),xe=1<<be;_[be]=0,G[be]=-1;var fe=le[be];if(fe!==null)for(le[be]=null,be=0;be<fe.length;be++){var ye=fe[be];ye!==null&&(ye.lane&=-536870913)}o&=~xe}a!==0&&Df(e,a,0),f!==0&&u===0&&e.tag!==0&&(e.suspendedLanes|=f&~(v&~t))}function Df(e,t,o){e.pendingLanes|=t,e.suspendedLanes&=~t;var a=31-Be(t);e.entangledLanes|=t,e.entanglements[a]=e.entanglements[a]|1073741824|o&261930}function Pf(e,t){var o=e.entangledLanes|=t;for(e=e.entanglements;o;){var a=31-Be(o),u=1<<a;u&t|e[a]&t&&(e[a]|=t),o&=~u}}function If(e,t){var o=t&-t;return o=(o&42)!==0?1:Jc(o),(o&(e.suspendedLanes|t))!==0?0:o}function Jc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Kc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function zf(){var e=U.p;return e!==0?e:(e=window.event,e===void 0?32:Cg(e.type))}function Lf(e,t){var o=U.p;try{return U.p=e,t()}finally{U.p=o}}var wr=Math.random().toString(36).slice(2),Ht="__reactFiber$"+wr,an="__reactProps$"+wr,Ai="__reactContainer$"+wr,Qc="__reactEvents$"+wr,lS="__reactListeners$"+wr,uS="__reactHandles$"+wr,Bf="__reactResources$"+wr,Oo="__reactMarker$"+wr;function Wc(e){delete e[Ht],delete e[an],delete e[Qc],delete e[lS],delete e[uS]}function Ni(e){var t=e[Ht];if(t)return t;for(var o=e.parentNode;o;){if(t=o[Ai]||o[Ht]){if(o=t.alternate,t.child!==null||o!==null&&o.child!==null)for(e=ag(e);e!==null;){if(o=e[Ht])return o;e=ag(e)}return t}e=o,o=e.parentNode}return null}function Oi(e){if(e=e[Ht]||e[Ai]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function jo(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(s(33))}function ji(e){var t=e[Bf];return t||(t=e[Bf]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function zt(e){e[Oo]=!0}var Hf=new Set,qf={};function ti(e,t){Mi(e,t),Mi(e+"Capture",t)}function Mi(e,t){for(qf[e]=t,e=0;e<t.length;e++)Hf.add(t[e])}var dS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$f={},Vf={};function fS(e){return X.call(Vf,e)?!0:X.call($f,e)?!1:dS.test(e)?Vf[e]=!0:($f[e]=!0,!1)}function $s(e,t,o){if(fS(t))if(o===null)e.removeAttribute(t);else{switch(typeof o){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var a=t.toLowerCase().slice(0,5);if(a!=="data-"&&a!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+o)}}function Vs(e,t,o){if(o===null)e.removeAttribute(t);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+o)}}function Zn(e,t,o,a){if(a===null)e.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(o);return}e.setAttributeNS(t,o,""+a)}}function _n(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Gf(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function hS(e,t,o){var a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var u=a.get,f=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return u.call(this)},set:function(v){o=""+v,f.call(this,v)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return o},setValue:function(v){o=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Zc(e){if(!e._valueTracker){var t=Gf(e)?"checked":"value";e._valueTracker=hS(e,t,""+e[t])}}function Ff(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var o=t.getValue(),a="";return e&&(a=Gf(e)?e.checked?"true":"false":e.value),e=a,e!==o?(t.setValue(e),!0):!1}function Gs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var pS=/[\n"\\]/g;function kn(e){return e.replace(pS,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function el(e,t,o,a,u,f,v,_){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),t!=null?v==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+_n(t)):e.value!==""+_n(t)&&(e.value=""+_n(t)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),t!=null?tl(e,v,_n(t)):o!=null?tl(e,v,_n(o)):a!=null&&e.removeAttribute("value"),u==null&&f!=null&&(e.defaultChecked=!!f),u!=null&&(e.checked=u&&typeof u!="function"&&typeof u!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+_n(_):e.removeAttribute("name")}function Xf(e,t,o,a,u,f,v,_){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(e.type=f),t!=null||o!=null){if(!(f!=="submit"&&f!=="reset"||t!=null)){Zc(e);return}o=o!=null?""+_n(o):"",t=t!=null?""+_n(t):o,_||t===e.value||(e.value=t),e.defaultValue=t}a=a??u,a=typeof a!="function"&&typeof a!="symbol"&&!!a,e.checked=_?e.checked:!!a,e.defaultChecked=!!a,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),Zc(e)}function tl(e,t,o){t==="number"&&Gs(e.ownerDocument)===e||e.defaultValue===""+o||(e.defaultValue=""+o)}function Ui(e,t,o,a){if(e=e.options,t){t={};for(var u=0;u<o.length;u++)t["$"+o[u]]=!0;for(o=0;o<e.length;o++)u=t.hasOwnProperty("$"+e[o].value),e[o].selected!==u&&(e[o].selected=u),u&&a&&(e[o].defaultSelected=!0)}else{for(o=""+_n(o),t=null,u=0;u<e.length;u++){if(e[u].value===o){e[u].selected=!0,a&&(e[u].defaultSelected=!0);return}t!==null||e[u].disabled||(t=e[u])}t!==null&&(t.selected=!0)}}function Yf(e,t,o){if(t!=null&&(t=""+_n(t),t!==e.value&&(e.value=t),o==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=o!=null?""+_n(o):""}function Jf(e,t,o,a){if(t==null){if(a!=null){if(o!=null)throw Error(s(92));if(De(a)){if(1<a.length)throw Error(s(93));a=a[0]}o=a}o==null&&(o=""),t=o}o=_n(t),e.defaultValue=o,a=e.textContent,a===o&&a!==""&&a!==null&&(e.value=a),Zc(e)}function Di(e,t){if(t){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=t;return}}e.textContent=t}var mS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Kf(e,t,o){var a=t.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?a?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":a?e.setProperty(t,o):typeof o!="number"||o===0||mS.has(t)?t==="float"?e.cssFloat=o:e[t]=(""+o).trim():e[t]=o+"px"}function Qf(e,t,o){if(t!=null&&typeof t!="object")throw Error(s(62));if(e=e.style,o!=null){for(var a in o)!o.hasOwnProperty(a)||t!=null&&t.hasOwnProperty(a)||(a.indexOf("--")===0?e.setProperty(a,""):a==="float"?e.cssFloat="":e[a]="");for(var u in t)a=t[u],t.hasOwnProperty(u)&&o[u]!==a&&Kf(e,u,a)}else for(var f in t)t.hasOwnProperty(f)&&Kf(e,f,t[f])}function nl(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fs(e){return yS.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function er(){}var rl=null;function il(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Pi=null,Ii=null;function Wf(e){var t=Oi(e);if(t&&(e=t.stateNode)){var o=e[an]||null;e:switch(e=t.stateNode,t.type){case"input":if(el(e,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),t=o.name,o.type==="radio"&&t!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+kn(""+t)+'"][type="radio"]'),t=0;t<o.length;t++){var a=o[t];if(a!==e&&a.form===e.form){var u=a[an]||null;if(!u)throw Error(s(90));el(a,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(t=0;t<o.length;t++)a=o[t],a.form===e.form&&Ff(a)}break e;case"textarea":Yf(e,o.value,o.defaultValue);break e;case"select":t=o.value,t!=null&&Ui(e,!!o.multiple,t,!1)}}}var ol=!1;function Zf(e,t,o){if(ol)return e(t,o);ol=!0;try{var a=e(t);return a}finally{if(ol=!1,(Pi!==null||Ii!==null)&&(Ma(),Pi&&(t=Pi,e=Ii,Ii=Pi=null,Wf(t),e)))for(t=0;t<e.length;t++)Wf(e[t])}}function Mo(e,t){var o=e.stateNode;if(o===null)return null;var a=o[an]||null;if(a===null)return null;o=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(s(231,t,typeof o));return o}var tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sl=!1;if(tr)try{var Uo={};Object.defineProperty(Uo,"passive",{get:function(){sl=!0}}),window.addEventListener("test",Uo,Uo),window.removeEventListener("test",Uo,Uo)}catch{sl=!1}var Tr=null,al=null,Xs=null;function eh(){if(Xs)return Xs;var e,t=al,o=t.length,a,u="value"in Tr?Tr.value:Tr.textContent,f=u.length;for(e=0;e<o&&t[e]===u[e];e++);var v=o-e;for(a=1;a<=v&&t[o-a]===u[f-a];a++);return Xs=u.slice(e,1<a?1-a:void 0)}function Ys(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Js(){return!0}function th(){return!1}function cn(e){function t(o,a,u,f,v){this._reactName=o,this._targetInst=u,this.type=a,this.nativeEvent=f,this.target=v,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(o=e[_],this[_]=o?o(f):f[_]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?Js:th,this.isPropagationStopped=th,this}return E(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Js)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Js)},persist:function(){},isPersistent:Js}),t}var ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ks=cn(ni),Do=E({},ni,{view:0,detail:0}),vS=cn(Do),cl,ll,Po,Qs=E({},Do,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Po&&(Po&&e.type==="mousemove"?(cl=e.screenX-Po.screenX,ll=e.screenY-Po.screenY):ll=cl=0,Po=e),cl)},movementY:function(e){return"movementY"in e?e.movementY:ll}}),nh=cn(Qs),bS=E({},Qs,{dataTransfer:0}),SS=cn(bS),wS=E({},Do,{relatedTarget:0}),ul=cn(wS),TS=E({},ni,{animationName:0,elapsedTime:0,pseudoElement:0}),CS=cn(TS),xS=E({},ni,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),RS=cn(xS),ES=E({},ni,{data:0}),rh=cn(ES),_S={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function NS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=AS[e])?!!t[e]:!1}function dl(){return NS}var OS=E({},Do,{key:function(e){if(e.key){var t=_S[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ys(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dl,charCode:function(e){return e.type==="keypress"?Ys(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ys(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),jS=cn(OS),MS=E({},Qs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ih=cn(MS),US=E({},Do,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dl}),DS=cn(US),PS=E({},ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),IS=cn(PS),zS=E({},Qs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),LS=cn(zS),BS=E({},ni,{newState:0,oldState:0}),HS=cn(BS),qS=[9,13,27,32],fl=tr&&"CompositionEvent"in window,Io=null;tr&&"documentMode"in document&&(Io=document.documentMode);var $S=tr&&"TextEvent"in window&&!Io,oh=tr&&(!fl||Io&&8<Io&&11>=Io),sh=" ",ah=!1;function ch(e,t){switch(e){case"keyup":return qS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zi=!1;function VS(e,t){switch(e){case"compositionend":return lh(t);case"keypress":return t.which!==32?null:(ah=!0,sh);case"textInput":return e=t.data,e===sh&&ah?null:e;default:return null}}function GS(e,t){if(zi)return e==="compositionend"||!fl&&ch(e,t)?(e=eh(),Xs=al=Tr=null,zi=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return oh&&t.locale!=="ko"?null:t.data;default:return null}}var FS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!FS[e.type]:t==="textarea"}function dh(e,t,o,a){Pi?Ii?Ii.push(a):Ii=[a]:Pi=a,t=Ba(t,"onChange"),0<t.length&&(o=new Ks("onChange","change",null,o,a),e.push({event:o,listeners:t}))}var zo=null,Lo=null;function XS(e){Xm(e,0)}function Ws(e){var t=jo(e);if(Ff(t))return e}function fh(e,t){if(e==="change")return t}var hh=!1;if(tr){var hl;if(tr){var pl="oninput"in document;if(!pl){var ph=document.createElement("div");ph.setAttribute("oninput","return;"),pl=typeof ph.oninput=="function"}hl=pl}else hl=!1;hh=hl&&(!document.documentMode||9<document.documentMode)}function mh(){zo&&(zo.detachEvent("onpropertychange",gh),Lo=zo=null)}function gh(e){if(e.propertyName==="value"&&Ws(Lo)){var t=[];dh(t,Lo,e,il(e)),Zf(XS,t)}}function YS(e,t,o){e==="focusin"?(mh(),zo=t,Lo=o,zo.attachEvent("onpropertychange",gh)):e==="focusout"&&mh()}function JS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ws(Lo)}function KS(e,t){if(e==="click")return Ws(t)}function QS(e,t){if(e==="input"||e==="change")return Ws(t)}function WS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vn=typeof Object.is=="function"?Object.is:WS;function Bo(e,t){if(vn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var o=Object.keys(e),a=Object.keys(t);if(o.length!==a.length)return!1;for(a=0;a<o.length;a++){var u=o[a];if(!X.call(t,u)||!vn(e[u],t[u]))return!1}return!0}function yh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vh(e,t){var o=yh(e);e=0;for(var a;o;){if(o.nodeType===3){if(a=e+o.textContent.length,e<=t&&a>=t)return{node:o,offset:t-e};e=a}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=yh(o)}}function bh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Sh(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Gs(e.document);t instanceof e.HTMLIFrameElement;){try{var o=typeof t.contentWindow.location.href=="string"}catch{o=!1}if(o)e=t.contentWindow;else break;t=Gs(e.document)}return t}function ml(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var ZS=tr&&"documentMode"in document&&11>=document.documentMode,Li=null,gl=null,Ho=null,yl=!1;function wh(e,t,o){var a=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;yl||Li==null||Li!==Gs(a)||(a=Li,"selectionStart"in a&&ml(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Ho&&Bo(Ho,a)||(Ho=a,a=Ba(gl,"onSelect"),0<a.length&&(t=new Ks("onSelect","select",null,t,o),e.push({event:t,listeners:a}),t.target=Li)))}function ri(e,t){var o={};return o[e.toLowerCase()]=t.toLowerCase(),o["Webkit"+e]="webkit"+t,o["Moz"+e]="moz"+t,o}var Bi={animationend:ri("Animation","AnimationEnd"),animationiteration:ri("Animation","AnimationIteration"),animationstart:ri("Animation","AnimationStart"),transitionrun:ri("Transition","TransitionRun"),transitionstart:ri("Transition","TransitionStart"),transitioncancel:ri("Transition","TransitionCancel"),transitionend:ri("Transition","TransitionEnd")},vl={},Th={};tr&&(Th=document.createElement("div").style,"AnimationEvent"in window||(delete Bi.animationend.animation,delete Bi.animationiteration.animation,delete Bi.animationstart.animation),"TransitionEvent"in window||delete Bi.transitionend.transition);function ii(e){if(vl[e])return vl[e];if(!Bi[e])return e;var t=Bi[e],o;for(o in t)if(t.hasOwnProperty(o)&&o in Th)return vl[e]=t[o];return e}var Ch=ii("animationend"),xh=ii("animationiteration"),Rh=ii("animationstart"),ew=ii("transitionrun"),tw=ii("transitionstart"),nw=ii("transitioncancel"),Eh=ii("transitionend"),_h=new Map,bl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bl.push("scrollEnd");function zn(e,t){_h.set(e,t),ti(t,[e])}var Zs=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},An=[],Hi=0,Sl=0;function ea(){for(var e=Hi,t=Sl=Hi=0;t<e;){var o=An[t];An[t++]=null;var a=An[t];An[t++]=null;var u=An[t];An[t++]=null;var f=An[t];if(An[t++]=null,a!==null&&u!==null){var v=a.pending;v===null?u.next=u:(u.next=v.next,v.next=u),a.pending=u}f!==0&&kh(o,u,f)}}function ta(e,t,o,a){An[Hi++]=e,An[Hi++]=t,An[Hi++]=o,An[Hi++]=a,Sl|=a,e.lanes|=a,e=e.alternate,e!==null&&(e.lanes|=a)}function wl(e,t,o,a){return ta(e,t,o,a),na(e)}function oi(e,t){return ta(e,null,null,t),na(e)}function kh(e,t,o){e.lanes|=o;var a=e.alternate;a!==null&&(a.lanes|=o);for(var u=!1,f=e.return;f!==null;)f.childLanes|=o,a=f.alternate,a!==null&&(a.childLanes|=o),f.tag===22&&(e=f.stateNode,e===null||e._visibility&1||(u=!0)),e=f,f=f.return;return e.tag===3?(f=e.stateNode,u&&t!==null&&(u=31-Be(o),e=f.hiddenUpdates,a=e[u],a===null?e[u]=[t]:a.push(t),t.lane=o|536870912),f):null}function na(e){if(50<ls)throw ls=0,Nu=null,Error(s(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var qi={};function rw(e,t,o,a){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(e,t,o,a){return new rw(e,t,o,a)}function Tl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function nr(e,t){var o=e.alternate;return o===null?(o=bn(e.tag,t,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=t,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&65011712,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,t=e.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o.refCleanup=e.refCleanup,o}function Ah(e,t){e.flags&=65011714;var o=e.alternate;return o===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=o.childLanes,e.lanes=o.lanes,e.child=o.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=o.memoizedProps,e.memoizedState=o.memoizedState,e.updateQueue=o.updateQueue,e.type=o.type,t=o.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ra(e,t,o,a,u,f){var v=0;if(a=e,typeof e=="function")Tl(e)&&(v=1);else if(typeof e=="string")v=cT(e,o,b.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Ce:return e=bn(31,o,t,u),e.elementType=Ce,e.lanes=f,e;case ee:return si(o.children,u,f,t);case J:v=8,u|=24;break;case de:return e=bn(12,o,t,u|2),e.elementType=de,e.lanes=f,e;case ne:return e=bn(13,o,t,u),e.elementType=ne,e.lanes=f,e;case me:return e=bn(19,o,t,u),e.elementType=me,e.lanes=f,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case pe:v=10;break e;case ue:v=9;break e;case F:v=11;break e;case ae:v=14;break e;case _e:v=16,a=null;break e}v=29,o=Error(s(130,e===null?"null":typeof e,"")),a=null}return t=bn(v,o,t,u),t.elementType=e,t.type=a,t.lanes=f,t}function si(e,t,o,a){return e=bn(7,e,a,t),e.lanes=o,e}function Cl(e,t,o){return e=bn(6,e,null,t),e.lanes=o,e}function Nh(e){var t=bn(18,null,null,0);return t.stateNode=e,t}function xl(e,t,o){return t=bn(4,e.children!==null?e.children:[],e.key,t),t.lanes=o,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Oh=new WeakMap;function Nn(e,t){if(typeof e=="object"&&e!==null){var o=Oh.get(e);return o!==void 0?o:(t={value:e,source:t,stack:P(t)},Oh.set(e,t),t)}return{value:e,source:t,stack:P(t)}}var $i=[],Vi=0,ia=null,qo=0,On=[],jn=0,Cr=null,Gn=1,Fn="";function rr(e,t){$i[Vi++]=qo,$i[Vi++]=ia,ia=e,qo=t}function jh(e,t,o){On[jn++]=Gn,On[jn++]=Fn,On[jn++]=Cr,Cr=e;var a=Gn;e=Fn;var u=32-Be(a)-1;a&=~(1<<u),o+=1;var f=32-Be(t)+u;if(30<f){var v=u-u%5;f=(a&(1<<v)-1).toString(32),a>>=v,u-=v,Gn=1<<32-Be(t)+u|o<<u|a,Fn=f+e}else Gn=1<<f|o<<u|a,Fn=e}function Rl(e){e.return!==null&&(rr(e,1),jh(e,1,0))}function El(e){for(;e===ia;)ia=$i[--Vi],$i[Vi]=null,qo=$i[--Vi],$i[Vi]=null;for(;e===Cr;)Cr=On[--jn],On[jn]=null,Fn=On[--jn],On[jn]=null,Gn=On[--jn],On[jn]=null}function Mh(e,t){On[jn++]=Gn,On[jn++]=Fn,On[jn++]=Cr,Gn=t.id,Fn=t.overflow,Cr=e}var qt=null,gt=null,rt=!1,xr=null,Mn=!1,_l=Error(s(519));function Rr(e){var t=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw $o(Nn(t,e)),_l}function Uh(e){var t=e.stateNode,o=e.type,a=e.memoizedProps;switch(t[Ht]=e,t[an]=a,o){case"dialog":Ze("cancel",t),Ze("close",t);break;case"iframe":case"object":case"embed":Ze("load",t);break;case"video":case"audio":for(o=0;o<ds.length;o++)Ze(ds[o],t);break;case"source":Ze("error",t);break;case"img":case"image":case"link":Ze("error",t),Ze("load",t);break;case"details":Ze("toggle",t);break;case"input":Ze("invalid",t),Xf(t,a.value,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name,!0);break;case"select":Ze("invalid",t);break;case"textarea":Ze("invalid",t),Jf(t,a.value,a.defaultValue,a.children)}o=a.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||t.textContent===""+o||a.suppressHydrationWarning===!0||Qm(t.textContent,o)?(a.popover!=null&&(Ze("beforetoggle",t),Ze("toggle",t)),a.onScroll!=null&&Ze("scroll",t),a.onScrollEnd!=null&&Ze("scrollend",t),a.onClick!=null&&(t.onclick=er),t=!0):t=!1,t||Rr(e,!0)}function Dh(e){for(qt=e.return;qt;)switch(qt.tag){case 5:case 31:case 13:Mn=!1;return;case 27:case 3:Mn=!0;return;default:qt=qt.return}}function Gi(e){if(e!==qt)return!1;if(!rt)return Dh(e),rt=!0,!1;var t=e.tag,o;if((o=t!==3&&t!==27)&&((o=t===5)&&(o=e.type,o=!(o!=="form"&&o!=="button")||Gu(e.type,e.memoizedProps)),o=!o),o&&gt&&Rr(e),Dh(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));gt=sg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));gt=sg(e)}else t===27?(t=gt,Lr(e.type)?(e=Ku,Ku=null,gt=e):gt=t):gt=qt?Dn(e.stateNode.nextSibling):null;return!0}function ai(){gt=qt=null,rt=!1}function kl(){var e=xr;return e!==null&&(fn===null?fn=e:fn.push.apply(fn,e),xr=null),e}function $o(e){xr===null?xr=[e]:xr.push(e)}var Al=S(null),ci=null,ir=null;function Er(e,t,o){x(Al,t._currentValue),t._currentValue=o}function or(e){e._currentValue=Al.current,j(Al)}function Nl(e,t,o){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===o)break;e=e.return}}function Ol(e,t,o,a){var u=e.child;for(u!==null&&(u.return=e);u!==null;){var f=u.dependencies;if(f!==null){var v=u.child;f=f.firstContext;e:for(;f!==null;){var _=f;f=u;for(var G=0;G<t.length;G++)if(_.context===t[G]){f.lanes|=o,_=f.alternate,_!==null&&(_.lanes|=o),Nl(f.return,o,e),a||(v=null);break e}f=_.next}}else if(u.tag===18){if(v=u.return,v===null)throw Error(s(341));v.lanes|=o,f=v.alternate,f!==null&&(f.lanes|=o),Nl(v,o,e),v=null}else v=u.child;if(v!==null)v.return=u;else for(v=u;v!==null;){if(v===e){v=null;break}if(u=v.sibling,u!==null){u.return=v.return,v=u;break}v=v.return}u=v}}function Fi(e,t,o,a){e=null;for(var u=t,f=!1;u!==null;){if(!f){if((u.flags&524288)!==0)f=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var v=u.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var _=u.type;vn(u.pendingProps.value,v.value)||(e!==null?e.push(_):e=[_])}}else if(u===N.current){if(v=u.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(e!==null?e.push(gs):e=[gs])}u=u.return}e!==null&&Ol(t,e,o,a),t.flags|=262144}function oa(e){for(e=e.firstContext;e!==null;){if(!vn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function li(e){ci=e,ir=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function $t(e){return Ph(ci,e)}function sa(e,t){return ci===null&&li(e),Ph(e,t)}function Ph(e,t){var o=t._currentValue;if(t={context:t,memoizedValue:o,next:null},ir===null){if(e===null)throw Error(s(308));ir=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ir=ir.next=t;return o}var iw=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(o,a){e.push(a)}};this.abort=function(){t.aborted=!0,e.forEach(function(o){return o()})}},ow=r.unstable_scheduleCallback,sw=r.unstable_NormalPriority,kt={$$typeof:pe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jl(){return{controller:new iw,data:new Map,refCount:0}}function Vo(e){e.refCount--,e.refCount===0&&ow(sw,function(){e.controller.abort()})}var Go=null,Ml=0,Xi=0,Yi=null;function aw(e,t){if(Go===null){var o=Go=[];Ml=0,Xi=Pu(),Yi={status:"pending",value:void 0,then:function(a){o.push(a)}}}return Ml++,t.then(Ih,Ih),t}function Ih(){if(--Ml===0&&Go!==null){Yi!==null&&(Yi.status="fulfilled");var e=Go;Go=null,Xi=0,Yi=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function cw(e,t){var o=[],a={status:"pending",value:null,reason:null,then:function(u){o.push(u)}};return e.then(function(){a.status="fulfilled",a.value=t;for(var u=0;u<o.length;u++)(0,o[u])(t)},function(u){for(a.status="rejected",a.reason=u,u=0;u<o.length;u++)(0,o[u])(void 0)}),a}var zh=q.S;q.S=function(e,t){wm=$e(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&aw(e,t),zh!==null&&zh(e,t)};var ui=S(null);function Ul(){var e=ui.current;return e!==null?e:mt.pooledCache}function aa(e,t){t===null?x(ui,ui.current):x(ui,t.pool)}function Lh(){var e=Ul();return e===null?null:{parent:kt._currentValue,pool:e}}var Ji=Error(s(460)),Dl=Error(s(474)),ca=Error(s(542)),la={then:function(){}};function Bh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Hh(e,t,o){switch(o=e[o],o===void 0?e.push(t):o!==t&&(t.then(er,er),t=o),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,$h(e),e;default:if(typeof t.status=="string")t.then(er,er);else{if(e=mt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=t,e.status="pending",e.then(function(a){if(t.status==="pending"){var u=t;u.status="fulfilled",u.value=a}},function(a){if(t.status==="pending"){var u=t;u.status="rejected",u.reason=a}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,$h(e),e}throw fi=t,Ji}}function di(e){try{var t=e._init;return t(e._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(fi=o,Ji):o}}var fi=null;function qh(){if(fi===null)throw Error(s(459));var e=fi;return fi=null,e}function $h(e){if(e===Ji||e===ca)throw Error(s(483))}var Ki=null,Fo=0;function ua(e){var t=Fo;return Fo+=1,Ki===null&&(Ki=[]),Hh(Ki,e,t)}function Xo(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function da(e,t){throw t.$$typeof===I?Error(s(525)):(e=Object.prototype.toString.call(t),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Vh(e){function t(oe,Z){if(e){var ce=oe.deletions;ce===null?(oe.deletions=[Z],oe.flags|=16):ce.push(Z)}}function o(oe,Z){if(!e)return null;for(;Z!==null;)t(oe,Z),Z=Z.sibling;return null}function a(oe){for(var Z=new Map;oe!==null;)oe.key!==null?Z.set(oe.key,oe):Z.set(oe.index,oe),oe=oe.sibling;return Z}function u(oe,Z){return oe=nr(oe,Z),oe.index=0,oe.sibling=null,oe}function f(oe,Z,ce){return oe.index=ce,e?(ce=oe.alternate,ce!==null?(ce=ce.index,ce<Z?(oe.flags|=67108866,Z):ce):(oe.flags|=67108866,Z)):(oe.flags|=1048576,Z)}function v(oe){return e&&oe.alternate===null&&(oe.flags|=67108866),oe}function _(oe,Z,ce,we){return Z===null||Z.tag!==6?(Z=Cl(ce,oe.mode,we),Z.return=oe,Z):(Z=u(Z,ce),Z.return=oe,Z)}function G(oe,Z,ce,we){var qe=ce.type;return qe===ee?be(oe,Z,ce.props.children,we,ce.key):Z!==null&&(Z.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===_e&&di(qe)===Z.type)?(Z=u(Z,ce.props),Xo(Z,ce),Z.return=oe,Z):(Z=ra(ce.type,ce.key,ce.props,null,oe.mode,we),Xo(Z,ce),Z.return=oe,Z)}function le(oe,Z,ce,we){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ce.containerInfo||Z.stateNode.implementation!==ce.implementation?(Z=xl(ce,oe.mode,we),Z.return=oe,Z):(Z=u(Z,ce.children||[]),Z.return=oe,Z)}function be(oe,Z,ce,we,qe){return Z===null||Z.tag!==7?(Z=si(ce,oe.mode,we,qe),Z.return=oe,Z):(Z=u(Z,ce),Z.return=oe,Z)}function xe(oe,Z,ce){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=Cl(""+Z,oe.mode,ce),Z.return=oe,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Y:return ce=ra(Z.type,Z.key,Z.props,null,oe.mode,ce),Xo(ce,Z),ce.return=oe,ce;case M:return Z=xl(Z,oe.mode,ce),Z.return=oe,Z;case _e:return Z=di(Z),xe(oe,Z,ce)}if(De(Z)||Ie(Z))return Z=si(Z,oe.mode,ce,null),Z.return=oe,Z;if(typeof Z.then=="function")return xe(oe,ua(Z),ce);if(Z.$$typeof===pe)return xe(oe,sa(oe,Z),ce);da(oe,Z)}return null}function fe(oe,Z,ce,we){var qe=Z!==null?Z.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return qe!==null?null:_(oe,Z,""+ce,we);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case Y:return ce.key===qe?G(oe,Z,ce,we):null;case M:return ce.key===qe?le(oe,Z,ce,we):null;case _e:return ce=di(ce),fe(oe,Z,ce,we)}if(De(ce)||Ie(ce))return qe!==null?null:be(oe,Z,ce,we,null);if(typeof ce.then=="function")return fe(oe,Z,ua(ce),we);if(ce.$$typeof===pe)return fe(oe,Z,sa(oe,ce),we);da(oe,ce)}return null}function ye(oe,Z,ce,we,qe){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return oe=oe.get(ce)||null,_(Z,oe,""+we,qe);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case Y:return oe=oe.get(we.key===null?ce:we.key)||null,G(Z,oe,we,qe);case M:return oe=oe.get(we.key===null?ce:we.key)||null,le(Z,oe,we,qe);case _e:return we=di(we),ye(oe,Z,ce,we,qe)}if(De(we)||Ie(we))return oe=oe.get(ce)||null,be(Z,oe,we,qe,null);if(typeof we.then=="function")return ye(oe,Z,ce,ua(we),qe);if(we.$$typeof===pe)return ye(oe,Z,ce,sa(Z,we),qe);da(Z,we)}return null}function Pe(oe,Z,ce,we){for(var qe=null,it=null,He=Z,Ke=Z=0,nt=null;He!==null&&Ke<ce.length;Ke++){He.index>Ke?(nt=He,He=null):nt=He.sibling;var ot=fe(oe,He,ce[Ke],we);if(ot===null){He===null&&(He=nt);break}e&&He&&ot.alternate===null&&t(oe,He),Z=f(ot,Z,Ke),it===null?qe=ot:it.sibling=ot,it=ot,He=nt}if(Ke===ce.length)return o(oe,He),rt&&rr(oe,Ke),qe;if(He===null){for(;Ke<ce.length;Ke++)He=xe(oe,ce[Ke],we),He!==null&&(Z=f(He,Z,Ke),it===null?qe=He:it.sibling=He,it=He);return rt&&rr(oe,Ke),qe}for(He=a(He);Ke<ce.length;Ke++)nt=ye(He,oe,Ke,ce[Ke],we),nt!==null&&(e&&nt.alternate!==null&&He.delete(nt.key===null?Ke:nt.key),Z=f(nt,Z,Ke),it===null?qe=nt:it.sibling=nt,it=nt);return e&&He.forEach(function(Vr){return t(oe,Vr)}),rt&&rr(oe,Ke),qe}function Ve(oe,Z,ce,we){if(ce==null)throw Error(s(151));for(var qe=null,it=null,He=Z,Ke=Z=0,nt=null,ot=ce.next();He!==null&&!ot.done;Ke++,ot=ce.next()){He.index>Ke?(nt=He,He=null):nt=He.sibling;var Vr=fe(oe,He,ot.value,we);if(Vr===null){He===null&&(He=nt);break}e&&He&&Vr.alternate===null&&t(oe,He),Z=f(Vr,Z,Ke),it===null?qe=Vr:it.sibling=Vr,it=Vr,He=nt}if(ot.done)return o(oe,He),rt&&rr(oe,Ke),qe;if(He===null){for(;!ot.done;Ke++,ot=ce.next())ot=xe(oe,ot.value,we),ot!==null&&(Z=f(ot,Z,Ke),it===null?qe=ot:it.sibling=ot,it=ot);return rt&&rr(oe,Ke),qe}for(He=a(He);!ot.done;Ke++,ot=ce.next())ot=ye(He,oe,Ke,ot.value,we),ot!==null&&(e&&ot.alternate!==null&&He.delete(ot.key===null?Ke:ot.key),Z=f(ot,Z,Ke),it===null?qe=ot:it.sibling=ot,it=ot);return e&&He.forEach(function(bT){return t(oe,bT)}),rt&&rr(oe,Ke),qe}function pt(oe,Z,ce,we){if(typeof ce=="object"&&ce!==null&&ce.type===ee&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case Y:e:{for(var qe=ce.key;Z!==null;){if(Z.key===qe){if(qe=ce.type,qe===ee){if(Z.tag===7){o(oe,Z.sibling),we=u(Z,ce.props.children),we.return=oe,oe=we;break e}}else if(Z.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===_e&&di(qe)===Z.type){o(oe,Z.sibling),we=u(Z,ce.props),Xo(we,ce),we.return=oe,oe=we;break e}o(oe,Z);break}else t(oe,Z);Z=Z.sibling}ce.type===ee?(we=si(ce.props.children,oe.mode,we,ce.key),we.return=oe,oe=we):(we=ra(ce.type,ce.key,ce.props,null,oe.mode,we),Xo(we,ce),we.return=oe,oe=we)}return v(oe);case M:e:{for(qe=ce.key;Z!==null;){if(Z.key===qe)if(Z.tag===4&&Z.stateNode.containerInfo===ce.containerInfo&&Z.stateNode.implementation===ce.implementation){o(oe,Z.sibling),we=u(Z,ce.children||[]),we.return=oe,oe=we;break e}else{o(oe,Z);break}else t(oe,Z);Z=Z.sibling}we=xl(ce,oe.mode,we),we.return=oe,oe=we}return v(oe);case _e:return ce=di(ce),pt(oe,Z,ce,we)}if(De(ce))return Pe(oe,Z,ce,we);if(Ie(ce)){if(qe=Ie(ce),typeof qe!="function")throw Error(s(150));return ce=qe.call(ce),Ve(oe,Z,ce,we)}if(typeof ce.then=="function")return pt(oe,Z,ua(ce),we);if(ce.$$typeof===pe)return pt(oe,Z,sa(oe,ce),we);da(oe,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,Z!==null&&Z.tag===6?(o(oe,Z.sibling),we=u(Z,ce),we.return=oe,oe=we):(o(oe,Z),we=Cl(ce,oe.mode,we),we.return=oe,oe=we),v(oe)):o(oe,Z)}return function(oe,Z,ce,we){try{Fo=0;var qe=pt(oe,Z,ce,we);return Ki=null,qe}catch(He){if(He===Ji||He===ca)throw He;var it=bn(29,He,null,oe.mode);return it.lanes=we,it.return=oe,it}}}var hi=Vh(!0),Gh=Vh(!1),_r=!1;function Pl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Il(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function kr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ar(e,t,o){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,(at&2)!==0){var u=a.pending;return u===null?t.next=t:(t.next=u.next,u.next=t),a.pending=t,t=na(e),kh(e,null,o),t}return ta(e,a,t,o),na(e)}function Yo(e,t,o){if(t=t.updateQueue,t!==null&&(t=t.shared,(o&4194048)!==0)){var a=t.lanes;a&=e.pendingLanes,o|=a,t.lanes=o,Pf(e,o)}}function zl(e,t){var o=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,o===a)){var u=null,f=null;if(o=o.firstBaseUpdate,o!==null){do{var v={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};f===null?u=f=v:f=f.next=v,o=o.next}while(o!==null);f===null?u=f=t:f=f.next=t}else u=f=t;o={baseState:a.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:a.shared,callbacks:a.callbacks},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=t:e.next=t,o.lastBaseUpdate=t}var Ll=!1;function Jo(){if(Ll){var e=Yi;if(e!==null)throw e}}function Ko(e,t,o,a){Ll=!1;var u=e.updateQueue;_r=!1;var f=u.firstBaseUpdate,v=u.lastBaseUpdate,_=u.shared.pending;if(_!==null){u.shared.pending=null;var G=_,le=G.next;G.next=null,v===null?f=le:v.next=le,v=G;var be=e.alternate;be!==null&&(be=be.updateQueue,_=be.lastBaseUpdate,_!==v&&(_===null?be.firstBaseUpdate=le:_.next=le,be.lastBaseUpdate=G))}if(f!==null){var xe=u.baseState;v=0,be=le=G=null,_=f;do{var fe=_.lane&-536870913,ye=fe!==_.lane;if(ye?(tt&fe)===fe:(a&fe)===fe){fe!==0&&fe===Xi&&(Ll=!0),be!==null&&(be=be.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var Pe=e,Ve=_;fe=t;var pt=o;switch(Ve.tag){case 1:if(Pe=Ve.payload,typeof Pe=="function"){xe=Pe.call(pt,xe,fe);break e}xe=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=Ve.payload,fe=typeof Pe=="function"?Pe.call(pt,xe,fe):Pe,fe==null)break e;xe=E({},xe,fe);break e;case 2:_r=!0}}fe=_.callback,fe!==null&&(e.flags|=64,ye&&(e.flags|=8192),ye=u.callbacks,ye===null?u.callbacks=[fe]:ye.push(fe))}else ye={lane:fe,tag:_.tag,payload:_.payload,callback:_.callback,next:null},be===null?(le=be=ye,G=xe):be=be.next=ye,v|=fe;if(_=_.next,_===null){if(_=u.shared.pending,_===null)break;ye=_,_=ye.next,ye.next=null,u.lastBaseUpdate=ye,u.shared.pending=null}}while(!0);be===null&&(G=xe),u.baseState=G,u.firstBaseUpdate=le,u.lastBaseUpdate=be,f===null&&(u.shared.lanes=0),Ur|=v,e.lanes=v,e.memoizedState=xe}}function Fh(e,t){if(typeof e!="function")throw Error(s(191,e));e.call(t)}function Xh(e,t){var o=e.callbacks;if(o!==null)for(e.callbacks=null,e=0;e<o.length;e++)Fh(o[e],t)}var Qi=S(null),fa=S(0);function Yh(e,t){e=pr,x(fa,e),x(Qi,t),pr=e|t.baseLanes}function Bl(){x(fa,pr),x(Qi,Qi.current)}function Hl(){pr=fa.current,j(Qi),j(fa)}var Sn=S(null),Un=null;function Nr(e){var t=e.alternate;x(Rt,Rt.current&1),x(Sn,e),Un===null&&(t===null||Qi.current!==null||t.memoizedState!==null)&&(Un=e)}function ql(e){x(Rt,Rt.current),x(Sn,e),Un===null&&(Un=e)}function Jh(e){e.tag===22?(x(Rt,Rt.current),x(Sn,e),Un===null&&(Un=e)):Or()}function Or(){x(Rt,Rt.current),x(Sn,Sn.current)}function wn(e){j(Sn),Un===e&&(Un=null),j(Rt)}var Rt=S(0);function ha(e){for(var t=e;t!==null;){if(t.tag===13){var o=t.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Yu(o)||Ju(o)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sr=0,Xe=null,ft=null,At=null,pa=!1,Wi=!1,pi=!1,ma=0,Qo=0,Zi=null,lw=0;function Tt(){throw Error(s(321))}function $l(e,t){if(t===null)return!1;for(var o=0;o<t.length&&o<e.length;o++)if(!vn(e[o],t[o]))return!1;return!0}function Vl(e,t,o,a,u,f){return sr=f,Xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,q.H=e===null||e.memoizedState===null?jp:ou,pi=!1,f=o(a,u),pi=!1,Wi&&(f=Qh(t,o,a,u)),Kh(e),f}function Kh(e){q.H=es;var t=ft!==null&&ft.next!==null;if(sr=0,At=ft=Xe=null,pa=!1,Qo=0,Zi=null,t)throw Error(s(300));e===null||Nt||(e=e.dependencies,e!==null&&oa(e)&&(Nt=!0))}function Qh(e,t,o,a){Xe=e;var u=0;do{if(Wi&&(Zi=null),Qo=0,Wi=!1,25<=u)throw Error(s(301));if(u+=1,At=ft=null,e.updateQueue!=null){var f=e.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}q.H=Mp,f=t(o,a)}while(Wi);return f}function uw(){var e=q.H,t=e.useState()[0];return t=typeof t.then=="function"?Wo(t):t,e=e.useState()[0],(ft!==null?ft.memoizedState:null)!==e&&(Xe.flags|=1024),t}function Gl(){var e=ma!==0;return ma=0,e}function Fl(e,t,o){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o}function Xl(e){if(pa){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}pa=!1}sr=0,At=ft=Xe=null,Wi=!1,Qo=ma=0,Zi=null}function sn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?Xe.memoizedState=At=e:At=At.next=e,At}function Et(){if(ft===null){var e=Xe.alternate;e=e!==null?e.memoizedState:null}else e=ft.next;var t=At===null?Xe.memoizedState:At.next;if(t!==null)At=t,ft=e;else{if(e===null)throw Xe.alternate===null?Error(s(467)):Error(s(310));ft=e,e={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},At===null?Xe.memoizedState=At=e:At=At.next=e}return At}function ga(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wo(e){var t=Qo;return Qo+=1,Zi===null&&(Zi=[]),e=Hh(Zi,e,t),t=Xe,(At===null?t.memoizedState:At.next)===null&&(t=t.alternate,q.H=t===null||t.memoizedState===null?jp:ou),e}function ya(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Wo(e);if(e.$$typeof===pe)return $t(e)}throw Error(s(438,String(e)))}function Yl(e){var t=null,o=Xe.updateQueue;if(o!==null&&(t=o.memoCache),t==null){var a=Xe.alternate;a!==null&&(a=a.updateQueue,a!==null&&(a=a.memoCache,a!=null&&(t={data:a.data.map(function(u){return u.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),o===null&&(o=ga(),Xe.updateQueue=o),o.memoCache=t,o=t.data[t.index],o===void 0)for(o=t.data[t.index]=Array(e),a=0;a<e;a++)o[a]=Re;return t.index++,o}function ar(e,t){return typeof t=="function"?t(e):t}function va(e){var t=Et();return Jl(t,ft,e)}function Jl(e,t,o){var a=e.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=o;var u=e.baseQueue,f=a.pending;if(f!==null){if(u!==null){var v=u.next;u.next=f.next,f.next=v}t.baseQueue=u=f,a.pending=null}if(f=e.baseState,u===null)e.memoizedState=f;else{t=u.next;var _=v=null,G=null,le=t,be=!1;do{var xe=le.lane&-536870913;if(xe!==le.lane?(tt&xe)===xe:(sr&xe)===xe){var fe=le.revertLane;if(fe===0)G!==null&&(G=G.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),xe===Xi&&(be=!0);else if((sr&fe)===fe){le=le.next,fe===Xi&&(be=!0);continue}else xe={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},G===null?(_=G=xe,v=f):G=G.next=xe,Xe.lanes|=fe,Ur|=fe;xe=le.action,pi&&o(f,xe),f=le.hasEagerState?le.eagerState:o(f,xe)}else fe={lane:xe,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},G===null?(_=G=fe,v=f):G=G.next=fe,Xe.lanes|=xe,Ur|=xe;le=le.next}while(le!==null&&le!==t);if(G===null?v=f:G.next=_,!vn(f,e.memoizedState)&&(Nt=!0,be&&(o=Yi,o!==null)))throw o;e.memoizedState=f,e.baseState=v,e.baseQueue=G,a.lastRenderedState=f}return u===null&&(a.lanes=0),[e.memoizedState,a.dispatch]}function Kl(e){var t=Et(),o=t.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=e;var a=o.dispatch,u=o.pending,f=t.memoizedState;if(u!==null){o.pending=null;var v=u=u.next;do f=e(f,v.action),v=v.next;while(v!==u);vn(f,t.memoizedState)||(Nt=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),o.lastRenderedState=f}return[f,a]}function Wh(e,t,o){var a=Xe,u=Et(),f=rt;if(f){if(o===void 0)throw Error(s(407));o=o()}else o=t();var v=!vn((ft||u).memoizedState,o);if(v&&(u.memoizedState=o,Nt=!0),u=u.queue,Zl(tp.bind(null,a,u,e),[e]),u.getSnapshot!==t||v||At!==null&&At.memoizedState.tag&1){if(a.flags|=2048,eo(9,{destroy:void 0},ep.bind(null,a,u,o,t),null),mt===null)throw Error(s(349));f||(sr&127)!==0||Zh(a,t,o)}return o}function Zh(e,t,o){e.flags|=16384,e={getSnapshot:t,value:o},t=Xe.updateQueue,t===null?(t=ga(),Xe.updateQueue=t,t.stores=[e]):(o=t.stores,o===null?t.stores=[e]:o.push(e))}function ep(e,t,o,a){t.value=o,t.getSnapshot=a,np(t)&&rp(e)}function tp(e,t,o){return o(function(){np(t)&&rp(e)})}function np(e){var t=e.getSnapshot;e=e.value;try{var o=t();return!vn(e,o)}catch{return!0}}function rp(e){var t=oi(e,2);t!==null&&hn(t,e,2)}function Ql(e){var t=sn();if(typeof e=="function"){var o=e;if(e=o(),pi){Ue(!0);try{o()}finally{Ue(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:e},t}function ip(e,t,o,a){return e.baseState=o,Jl(e,ft,typeof a=="function"?a:ar)}function dw(e,t,o,a,u){if(wa(e))throw Error(s(485));if(e=t.action,e!==null){var f={payload:u,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){f.listeners.push(v)}};q.T!==null?o(!0):f.isTransition=!1,a(f),o=t.pending,o===null?(f.next=t.pending=f,op(t,f)):(f.next=o.next,t.pending=o.next=f)}}function op(e,t){var o=t.action,a=t.payload,u=e.state;if(t.isTransition){var f=q.T,v={};q.T=v;try{var _=o(u,a),G=q.S;G!==null&&G(v,_),sp(e,t,_)}catch(le){Wl(e,t,le)}finally{f!==null&&v.types!==null&&(f.types=v.types),q.T=f}}else try{f=o(u,a),sp(e,t,f)}catch(le){Wl(e,t,le)}}function sp(e,t,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(a){ap(e,t,a)},function(a){return Wl(e,t,a)}):ap(e,t,o)}function ap(e,t,o){t.status="fulfilled",t.value=o,cp(t),e.state=o,t=e.pending,t!==null&&(o=t.next,o===t?e.pending=null:(o=o.next,t.next=o,op(e,o)))}function Wl(e,t,o){var a=e.pending;if(e.pending=null,a!==null){a=a.next;do t.status="rejected",t.reason=o,cp(t),t=t.next;while(t!==a)}e.action=null}function cp(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function lp(e,t){return t}function up(e,t){if(rt){var o=mt.formState;if(o!==null){e:{var a=Xe;if(rt){if(gt){t:{for(var u=gt,f=Mn;u.nodeType!==8;){if(!f){u=null;break t}if(u=Dn(u.nextSibling),u===null){u=null;break t}}f=u.data,u=f==="F!"||f==="F"?u:null}if(u){gt=Dn(u.nextSibling),a=u.data==="F!";break e}}Rr(a)}a=!1}a&&(t=o[0])}}return o=sn(),o.memoizedState=o.baseState=t,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lp,lastRenderedState:t},o.queue=a,o=Ap.bind(null,Xe,a),a.dispatch=o,a=Ql(!1),f=iu.bind(null,Xe,!1,a.queue),a=sn(),u={state:t,dispatch:null,action:e,pending:null},a.queue=u,o=dw.bind(null,Xe,u,f,o),u.dispatch=o,a.memoizedState=e,[t,o,!1]}function dp(e){var t=Et();return fp(t,ft,e)}function fp(e,t,o){if(t=Jl(e,t,lp)[0],e=va(ar)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var a=Wo(t)}catch(v){throw v===Ji?ca:v}else a=t;t=Et();var u=t.queue,f=u.dispatch;return o!==t.memoizedState&&(Xe.flags|=2048,eo(9,{destroy:void 0},fw.bind(null,u,o),null)),[a,f,e]}function fw(e,t){e.action=t}function hp(e){var t=Et(),o=ft;if(o!==null)return fp(t,o,e);Et(),t=t.memoizedState,o=Et();var a=o.queue.dispatch;return o.memoizedState=e,[t,a,!1]}function eo(e,t,o,a){return e={tag:e,create:o,deps:a,inst:t,next:null},t=Xe.updateQueue,t===null&&(t=ga(),Xe.updateQueue=t),o=t.lastEffect,o===null?t.lastEffect=e.next=e:(a=o.next,o.next=e,e.next=a,t.lastEffect=e),e}function pp(){return Et().memoizedState}function ba(e,t,o,a){var u=sn();Xe.flags|=e,u.memoizedState=eo(1|t,{destroy:void 0},o,a===void 0?null:a)}function Sa(e,t,o,a){var u=Et();a=a===void 0?null:a;var f=u.memoizedState.inst;ft!==null&&a!==null&&$l(a,ft.memoizedState.deps)?u.memoizedState=eo(t,f,o,a):(Xe.flags|=e,u.memoizedState=eo(1|t,f,o,a))}function mp(e,t){ba(8390656,8,e,t)}function Zl(e,t){Sa(2048,8,e,t)}function hw(e){Xe.flags|=4;var t=Xe.updateQueue;if(t===null)t=ga(),Xe.updateQueue=t,t.events=[e];else{var o=t.events;o===null?t.events=[e]:o.push(e)}}function gp(e){var t=Et().memoizedState;return hw({ref:t,nextImpl:e}),function(){if((at&2)!==0)throw Error(s(440));return t.impl.apply(void 0,arguments)}}function yp(e,t){return Sa(4,2,e,t)}function vp(e,t){return Sa(4,4,e,t)}function bp(e,t){if(typeof t=="function"){e=e();var o=t(e);return function(){typeof o=="function"?o():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Sp(e,t,o){o=o!=null?o.concat([e]):null,Sa(4,4,bp.bind(null,t,e),o)}function eu(){}function wp(e,t){var o=Et();t=t===void 0?null:t;var a=o.memoizedState;return t!==null&&$l(t,a[1])?a[0]:(o.memoizedState=[e,t],e)}function Tp(e,t){var o=Et();t=t===void 0?null:t;var a=o.memoizedState;if(t!==null&&$l(t,a[1]))return a[0];if(a=e(),pi){Ue(!0);try{e()}finally{Ue(!1)}}return o.memoizedState=[a,t],a}function tu(e,t,o){return o===void 0||(sr&1073741824)!==0&&(tt&261930)===0?e.memoizedState=t:(e.memoizedState=o,e=Cm(),Xe.lanes|=e,Ur|=e,o)}function Cp(e,t,o,a){return vn(o,t)?o:Qi.current!==null?(e=tu(e,o,a),vn(e,t)||(Nt=!0),e):(sr&42)===0||(sr&1073741824)!==0&&(tt&261930)===0?(Nt=!0,e.memoizedState=o):(e=Cm(),Xe.lanes|=e,Ur|=e,t)}function xp(e,t,o,a,u){var f=U.p;U.p=f!==0&&8>f?f:8;var v=q.T,_={};q.T=_,iu(e,!1,t,o);try{var G=u(),le=q.S;if(le!==null&&le(_,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var be=cw(G,a);Zo(e,t,be,xn(e))}else Zo(e,t,a,xn(e))}catch(xe){Zo(e,t,{then:function(){},status:"rejected",reason:xe},xn())}finally{U.p=f,v!==null&&_.types!==null&&(v.types=_.types),q.T=v}}function pw(){}function nu(e,t,o,a){if(e.tag!==5)throw Error(s(476));var u=Rp(e).queue;xp(e,u,t,Q,o===null?pw:function(){return Ep(e),o(a)})}function Rp(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:Q},next:null};var o={};return t.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:o},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ep(e){var t=Rp(e);t.next===null&&(t=e.alternate.memoizedState),Zo(e,t.next.queue,{},xn())}function ru(){return $t(gs)}function _p(){return Et().memoizedState}function kp(){return Et().memoizedState}function mw(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var o=xn();e=kr(o);var a=Ar(t,e,o);a!==null&&(hn(a,t,o),Yo(a,t,o)),t={cache:jl()},e.payload=t;return}t=t.return}}function gw(e,t,o){var a=xn();o={lane:a,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},wa(e)?Np(t,o):(o=wl(e,t,o,a),o!==null&&(hn(o,e,a),Op(o,t,a)))}function Ap(e,t,o){var a=xn();Zo(e,t,o,a)}function Zo(e,t,o,a){var u={lane:a,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(wa(e))Np(t,u);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var v=t.lastRenderedState,_=f(v,o);if(u.hasEagerState=!0,u.eagerState=_,vn(_,v))return ta(e,t,u,0),mt===null&&ea(),!1}catch{}if(o=wl(e,t,u,a),o!==null)return hn(o,e,a),Op(o,t,a),!0}return!1}function iu(e,t,o,a){if(a={lane:2,revertLane:Pu(),gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},wa(e)){if(t)throw Error(s(479))}else t=wl(e,o,a,2),t!==null&&hn(t,e,2)}function wa(e){var t=e.alternate;return e===Xe||t!==null&&t===Xe}function Np(e,t){Wi=pa=!0;var o=e.pending;o===null?t.next=t:(t.next=o.next,o.next=t),e.pending=t}function Op(e,t,o){if((o&4194048)!==0){var a=t.lanes;a&=e.pendingLanes,o|=a,t.lanes=o,Pf(e,o)}}var es={readContext:$t,use:ya,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useLayoutEffect:Tt,useInsertionEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useSyncExternalStore:Tt,useId:Tt,useHostTransitionStatus:Tt,useFormState:Tt,useActionState:Tt,useOptimistic:Tt,useMemoCache:Tt,useCacheRefresh:Tt};es.useEffectEvent=Tt;var jp={readContext:$t,use:ya,useCallback:function(e,t){return sn().memoizedState=[e,t===void 0?null:t],e},useContext:$t,useEffect:mp,useImperativeHandle:function(e,t,o){o=o!=null?o.concat([e]):null,ba(4194308,4,bp.bind(null,t,e),o)},useLayoutEffect:function(e,t){return ba(4194308,4,e,t)},useInsertionEffect:function(e,t){ba(4,2,e,t)},useMemo:function(e,t){var o=sn();t=t===void 0?null:t;var a=e();if(pi){Ue(!0);try{e()}finally{Ue(!1)}}return o.memoizedState=[a,t],a},useReducer:function(e,t,o){var a=sn();if(o!==void 0){var u=o(t);if(pi){Ue(!0);try{o(t)}finally{Ue(!1)}}}else u=t;return a.memoizedState=a.baseState=u,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:u},a.queue=e,e=e.dispatch=gw.bind(null,Xe,e),[a.memoizedState,e]},useRef:function(e){var t=sn();return e={current:e},t.memoizedState=e},useState:function(e){e=Ql(e);var t=e.queue,o=Ap.bind(null,Xe,t);return t.dispatch=o,[e.memoizedState,o]},useDebugValue:eu,useDeferredValue:function(e,t){var o=sn();return tu(o,e,t)},useTransition:function(){var e=Ql(!1);return e=xp.bind(null,Xe,e.queue,!0,!1),sn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,o){var a=Xe,u=sn();if(rt){if(o===void 0)throw Error(s(407));o=o()}else{if(o=t(),mt===null)throw Error(s(349));(tt&127)!==0||Zh(a,t,o)}u.memoizedState=o;var f={value:o,getSnapshot:t};return u.queue=f,mp(tp.bind(null,a,f,e),[e]),a.flags|=2048,eo(9,{destroy:void 0},ep.bind(null,a,f,o,t),null),o},useId:function(){var e=sn(),t=mt.identifierPrefix;if(rt){var o=Fn,a=Gn;o=(a&~(1<<32-Be(a)-1)).toString(32)+o,t="_"+t+"R_"+o,o=ma++,0<o&&(t+="H"+o.toString(32)),t+="_"}else o=lw++,t="_"+t+"r_"+o.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ru,useFormState:up,useActionState:up,useOptimistic:function(e){var t=sn();t.memoizedState=t.baseState=e;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=o,t=iu.bind(null,Xe,!0,o),o.dispatch=t,[e,t]},useMemoCache:Yl,useCacheRefresh:function(){return sn().memoizedState=mw.bind(null,Xe)},useEffectEvent:function(e){var t=sn(),o={impl:e};return t.memoizedState=o,function(){if((at&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}},ou={readContext:$t,use:ya,useCallback:wp,useContext:$t,useEffect:Zl,useImperativeHandle:Sp,useInsertionEffect:yp,useLayoutEffect:vp,useMemo:Tp,useReducer:va,useRef:pp,useState:function(){return va(ar)},useDebugValue:eu,useDeferredValue:function(e,t){var o=Et();return Cp(o,ft.memoizedState,e,t)},useTransition:function(){var e=va(ar)[0],t=Et().memoizedState;return[typeof e=="boolean"?e:Wo(e),t]},useSyncExternalStore:Wh,useId:_p,useHostTransitionStatus:ru,useFormState:dp,useActionState:dp,useOptimistic:function(e,t){var o=Et();return ip(o,ft,e,t)},useMemoCache:Yl,useCacheRefresh:kp};ou.useEffectEvent=gp;var Mp={readContext:$t,use:ya,useCallback:wp,useContext:$t,useEffect:Zl,useImperativeHandle:Sp,useInsertionEffect:yp,useLayoutEffect:vp,useMemo:Tp,useReducer:Kl,useRef:pp,useState:function(){return Kl(ar)},useDebugValue:eu,useDeferredValue:function(e,t){var o=Et();return ft===null?tu(o,e,t):Cp(o,ft.memoizedState,e,t)},useTransition:function(){var e=Kl(ar)[0],t=Et().memoizedState;return[typeof e=="boolean"?e:Wo(e),t]},useSyncExternalStore:Wh,useId:_p,useHostTransitionStatus:ru,useFormState:hp,useActionState:hp,useOptimistic:function(e,t){var o=Et();return ft!==null?ip(o,ft,e,t):(o.baseState=e,[e,o.queue.dispatch])},useMemoCache:Yl,useCacheRefresh:kp};Mp.useEffectEvent=gp;function su(e,t,o,a){t=e.memoizedState,o=o(a,t),o=o==null?t:E({},t,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var au={enqueueSetState:function(e,t,o){e=e._reactInternals;var a=xn(),u=kr(a);u.payload=t,o!=null&&(u.callback=o),t=Ar(e,u,a),t!==null&&(hn(t,e,a),Yo(t,e,a))},enqueueReplaceState:function(e,t,o){e=e._reactInternals;var a=xn(),u=kr(a);u.tag=1,u.payload=t,o!=null&&(u.callback=o),t=Ar(e,u,a),t!==null&&(hn(t,e,a),Yo(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var o=xn(),a=kr(o);a.tag=2,t!=null&&(a.callback=t),t=Ar(e,a,o),t!==null&&(hn(t,e,o),Yo(t,e,o))}};function Up(e,t,o,a,u,f,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,f,v):t.prototype&&t.prototype.isPureReactComponent?!Bo(o,a)||!Bo(u,f):!0}function Dp(e,t,o,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(o,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(o,a),t.state!==e&&au.enqueueReplaceState(t,t.state,null)}function mi(e,t){var o=t;if("ref"in t){o={};for(var a in t)a!=="ref"&&(o[a]=t[a])}if(e=e.defaultProps){o===t&&(o=E({},o));for(var u in e)o[u]===void 0&&(o[u]=e[u])}return o}function Pp(e){Zs(e)}function Ip(e){console.error(e)}function zp(e){Zs(e)}function Ta(e,t){try{var o=e.onUncaughtError;o(t.value,{componentStack:t.stack})}catch(a){setTimeout(function(){throw a})}}function Lp(e,t,o){try{var a=e.onCaughtError;a(o.value,{componentStack:o.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function cu(e,t,o){return o=kr(o),o.tag=3,o.payload={element:null},o.callback=function(){Ta(e,t)},o}function Bp(e){return e=kr(e),e.tag=3,e}function Hp(e,t,o,a){var u=o.type.getDerivedStateFromError;if(typeof u=="function"){var f=a.value;e.payload=function(){return u(f)},e.callback=function(){Lp(t,o,a)}}var v=o.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){Lp(t,o,a),typeof u!="function"&&(Dr===null?Dr=new Set([this]):Dr.add(this));var _=a.stack;this.componentDidCatch(a.value,{componentStack:_!==null?_:""})})}function yw(e,t,o,a,u){if(o.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){if(t=o.alternate,t!==null&&Fi(t,o,u,!0),o=Sn.current,o!==null){switch(o.tag){case 31:case 13:return Un===null?Ua():o.alternate===null&&Ct===0&&(Ct=3),o.flags&=-257,o.flags|=65536,o.lanes=u,a===la?o.flags|=16384:(t=o.updateQueue,t===null?o.updateQueue=new Set([a]):t.add(a),Mu(e,a,u)),!1;case 22:return o.flags|=65536,a===la?o.flags|=16384:(t=o.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([a])},o.updateQueue=t):(o=t.retryQueue,o===null?t.retryQueue=new Set([a]):o.add(a)),Mu(e,a,u)),!1}throw Error(s(435,o.tag))}return Mu(e,a,u),Ua(),!1}if(rt)return t=Sn.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=u,a!==_l&&(e=Error(s(422),{cause:a}),$o(Nn(e,o)))):(a!==_l&&(t=Error(s(423),{cause:a}),$o(Nn(t,o))),e=e.current.alternate,e.flags|=65536,u&=-u,e.lanes|=u,a=Nn(a,o),u=cu(e.stateNode,a,u),zl(e,u),Ct!==4&&(Ct=2)),!1;var f=Error(s(520),{cause:a});if(f=Nn(f,o),cs===null?cs=[f]:cs.push(f),Ct!==4&&(Ct=2),t===null)return!0;a=Nn(a,o),o=t;do{switch(o.tag){case 3:return o.flags|=65536,e=u&-u,o.lanes|=e,e=cu(o.stateNode,a,e),zl(o,e),!1;case 1:if(t=o.type,f=o.stateNode,(o.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Dr===null||!Dr.has(f))))return o.flags|=65536,u&=-u,o.lanes|=u,u=Bp(u),Hp(u,e,o,a),zl(o,u),!1}o=o.return}while(o!==null);return!1}var lu=Error(s(461)),Nt=!1;function Vt(e,t,o,a){t.child=e===null?Gh(t,null,o,a):hi(t,e.child,o,a)}function qp(e,t,o,a,u){o=o.render;var f=t.ref;if("ref"in a){var v={};for(var _ in a)_!=="ref"&&(v[_]=a[_])}else v=a;return li(t),a=Vl(e,t,o,v,f,u),_=Gl(),e!==null&&!Nt?(Fl(e,t,u),cr(e,t,u)):(rt&&_&&Rl(t),t.flags|=1,Vt(e,t,a,u),t.child)}function $p(e,t,o,a,u){if(e===null){var f=o.type;return typeof f=="function"&&!Tl(f)&&f.defaultProps===void 0&&o.compare===null?(t.tag=15,t.type=f,Vp(e,t,f,a,u)):(e=ra(o.type,null,a,t,t.mode,u),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!yu(e,u)){var v=f.memoizedProps;if(o=o.compare,o=o!==null?o:Bo,o(v,a)&&e.ref===t.ref)return cr(e,t,u)}return t.flags|=1,e=nr(f,a),e.ref=t.ref,e.return=t,t.child=e}function Vp(e,t,o,a,u){if(e!==null){var f=e.memoizedProps;if(Bo(f,a)&&e.ref===t.ref)if(Nt=!1,t.pendingProps=a=f,yu(e,u))(e.flags&131072)!==0&&(Nt=!0);else return t.lanes=e.lanes,cr(e,t,u)}return uu(e,t,o,a,u)}function Gp(e,t,o,a){var u=a.children,f=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.mode==="hidden"){if((t.flags&128)!==0){if(f=f!==null?f.baseLanes|o:o,e!==null){for(a=t.child=e.child,u=0;a!==null;)u=u|a.lanes|a.childLanes,a=a.sibling;a=u&~f}else a=0,t.child=null;return Fp(e,t,f,o,a)}if((o&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&aa(t,f!==null?f.cachePool:null),f!==null?Yh(t,f):Bl(),Jh(t);else return a=t.lanes=536870912,Fp(e,t,f!==null?f.baseLanes|o:o,o,a)}else f!==null?(aa(t,f.cachePool),Yh(t,f),Or(),t.memoizedState=null):(e!==null&&aa(t,null),Bl(),Or());return Vt(e,t,u,o),t.child}function ts(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Fp(e,t,o,a,u){var f=Ul();return f=f===null?null:{parent:kt._currentValue,pool:f},t.memoizedState={baseLanes:o,cachePool:f},e!==null&&aa(t,null),Bl(),Jh(t),e!==null&&Fi(e,t,a,!0),t.childLanes=u,null}function Ca(e,t){return t=Ra({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Xp(e,t,o){return hi(t,e.child,null,o),e=Ca(t,t.pendingProps),e.flags|=2,wn(t),t.memoizedState=null,e}function vw(e,t,o){var a=t.pendingProps,u=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(rt){if(a.mode==="hidden")return e=Ca(t,a),t.lanes=536870912,ts(null,e);if(ql(t),(e=gt)?(e=og(e,Mn),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Cr!==null?{id:Gn,overflow:Fn}:null,retryLane:536870912,hydrationErrors:null},o=Nh(e),o.return=t,t.child=o,qt=t,gt=null)):e=null,e===null)throw Rr(t);return t.lanes=536870912,null}return Ca(t,a)}var f=e.memoizedState;if(f!==null){var v=f.dehydrated;if(ql(t),u)if(t.flags&256)t.flags&=-257,t=Xp(e,t,o);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(s(558));else if(Nt||Fi(e,t,o,!1),u=(o&e.childLanes)!==0,Nt||u){if(a=mt,a!==null&&(v=If(a,o),v!==0&&v!==f.retryLane))throw f.retryLane=v,oi(e,v),hn(a,e,v),lu;Ua(),t=Xp(e,t,o)}else e=f.treeContext,gt=Dn(v.nextSibling),qt=t,rt=!0,xr=null,Mn=!1,e!==null&&Mh(t,e),t=Ca(t,a),t.flags|=4096;return t}return e=nr(e.child,{mode:a.mode,children:a.children}),e.ref=t.ref,t.child=e,e.return=t,e}function xa(e,t){var o=t.ref;if(o===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(e===null||e.ref!==o)&&(t.flags|=4194816)}}function uu(e,t,o,a,u){return li(t),o=Vl(e,t,o,a,void 0,u),a=Gl(),e!==null&&!Nt?(Fl(e,t,u),cr(e,t,u)):(rt&&a&&Rl(t),t.flags|=1,Vt(e,t,o,u),t.child)}function Yp(e,t,o,a,u,f){return li(t),t.updateQueue=null,o=Qh(t,a,o,u),Kh(e),a=Gl(),e!==null&&!Nt?(Fl(e,t,f),cr(e,t,f)):(rt&&a&&Rl(t),t.flags|=1,Vt(e,t,o,f),t.child)}function Jp(e,t,o,a,u){if(li(t),t.stateNode===null){var f=qi,v=o.contextType;typeof v=="object"&&v!==null&&(f=$t(v)),f=new o(a,f),t.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=au,t.stateNode=f,f._reactInternals=t,f=t.stateNode,f.props=a,f.state=t.memoizedState,f.refs={},Pl(t),v=o.contextType,f.context=typeof v=="object"&&v!==null?$t(v):qi,f.state=t.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(su(t,o,v,a),f.state=t.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(v=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),v!==f.state&&au.enqueueReplaceState(f,f.state,null),Ko(t,a,f,u),Jo(),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!0}else if(e===null){f=t.stateNode;var _=t.memoizedProps,G=mi(o,_);f.props=G;var le=f.context,be=o.contextType;v=qi,typeof be=="object"&&be!==null&&(v=$t(be));var xe=o.getDerivedStateFromProps;be=typeof xe=="function"||typeof f.getSnapshotBeforeUpdate=="function",_=t.pendingProps!==_,be||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_||le!==v)&&Dp(t,f,a,v),_r=!1;var fe=t.memoizedState;f.state=fe,Ko(t,a,f,u),Jo(),le=t.memoizedState,_||fe!==le||_r?(typeof xe=="function"&&(su(t,o,xe,a),le=t.memoizedState),(G=_r||Up(t,o,G,a,fe,le,v))?(be||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=le),f.props=a,f.state=le,f.context=v,a=G):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{f=t.stateNode,Il(e,t),v=t.memoizedProps,be=mi(o,v),f.props=be,xe=t.pendingProps,fe=f.context,le=o.contextType,G=qi,typeof le=="object"&&le!==null&&(G=$t(le)),_=o.getDerivedStateFromProps,(le=typeof _=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(v!==xe||fe!==G)&&Dp(t,f,a,G),_r=!1,fe=t.memoizedState,f.state=fe,Ko(t,a,f,u),Jo();var ye=t.memoizedState;v!==xe||fe!==ye||_r||e!==null&&e.dependencies!==null&&oa(e.dependencies)?(typeof _=="function"&&(su(t,o,_,a),ye=t.memoizedState),(be=_r||Up(t,o,be,a,fe,ye,G)||e!==null&&e.dependencies!==null&&oa(e.dependencies))?(le||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(a,ye,G),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(a,ye,G)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&fe===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&fe===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=ye),f.props=a,f.state=ye,f.context=G,a=be):(typeof f.componentDidUpdate!="function"||v===e.memoizedProps&&fe===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&fe===e.memoizedState||(t.flags|=1024),a=!1)}return f=a,xa(e,t),a=(t.flags&128)!==0,f||a?(f=t.stateNode,o=a&&typeof o.getDerivedStateFromError!="function"?null:f.render(),t.flags|=1,e!==null&&a?(t.child=hi(t,e.child,null,u),t.child=hi(t,null,o,u)):Vt(e,t,o,u),t.memoizedState=f.state,e=t.child):e=cr(e,t,u),e}function Kp(e,t,o,a){return ai(),t.flags|=256,Vt(e,t,o,a),t.child}var du={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fu(e){return{baseLanes:e,cachePool:Lh()}}function hu(e,t,o){return e=e!==null?e.childLanes&~o:0,t&&(e|=Cn),e}function Qp(e,t,o){var a=t.pendingProps,u=!1,f=(t.flags&128)!==0,v;if((v=f)||(v=e!==null&&e.memoizedState===null?!1:(Rt.current&2)!==0),v&&(u=!0,t.flags&=-129),v=(t.flags&32)!==0,t.flags&=-33,e===null){if(rt){if(u?Nr(t):Or(),(e=gt)?(e=og(e,Mn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Cr!==null?{id:Gn,overflow:Fn}:null,retryLane:536870912,hydrationErrors:null},o=Nh(e),o.return=t,t.child=o,qt=t,gt=null)):e=null,e===null)throw Rr(t);return Ju(e)?t.lanes=32:t.lanes=536870912,null}var _=a.children;return a=a.fallback,u?(Or(),u=t.mode,_=Ra({mode:"hidden",children:_},u),a=si(a,u,o,null),_.return=t,a.return=t,_.sibling=a,t.child=_,a=t.child,a.memoizedState=fu(o),a.childLanes=hu(e,v,o),t.memoizedState=du,ts(null,a)):(Nr(t),pu(t,_))}var G=e.memoizedState;if(G!==null&&(_=G.dehydrated,_!==null)){if(f)t.flags&256?(Nr(t),t.flags&=-257,t=mu(e,t,o)):t.memoizedState!==null?(Or(),t.child=e.child,t.flags|=128,t=null):(Or(),_=a.fallback,u=t.mode,a=Ra({mode:"visible",children:a.children},u),_=si(_,u,o,null),_.flags|=2,a.return=t,_.return=t,a.sibling=_,t.child=a,hi(t,e.child,null,o),a=t.child,a.memoizedState=fu(o),a.childLanes=hu(e,v,o),t.memoizedState=du,t=ts(null,a));else if(Nr(t),Ju(_)){if(v=_.nextSibling&&_.nextSibling.dataset,v)var le=v.dgst;v=le,a=Error(s(419)),a.stack="",a.digest=v,$o({value:a,source:null,stack:null}),t=mu(e,t,o)}else if(Nt||Fi(e,t,o,!1),v=(o&e.childLanes)!==0,Nt||v){if(v=mt,v!==null&&(a=If(v,o),a!==0&&a!==G.retryLane))throw G.retryLane=a,oi(e,a),hn(v,e,a),lu;Yu(_)||Ua(),t=mu(e,t,o)}else Yu(_)?(t.flags|=192,t.child=e.child,t=null):(e=G.treeContext,gt=Dn(_.nextSibling),qt=t,rt=!0,xr=null,Mn=!1,e!==null&&Mh(t,e),t=pu(t,a.children),t.flags|=4096);return t}return u?(Or(),_=a.fallback,u=t.mode,G=e.child,le=G.sibling,a=nr(G,{mode:"hidden",children:a.children}),a.subtreeFlags=G.subtreeFlags&65011712,le!==null?_=nr(le,_):(_=si(_,u,o,null),_.flags|=2),_.return=t,a.return=t,a.sibling=_,t.child=a,ts(null,a),a=t.child,_=e.child.memoizedState,_===null?_=fu(o):(u=_.cachePool,u!==null?(G=kt._currentValue,u=u.parent!==G?{parent:G,pool:G}:u):u=Lh(),_={baseLanes:_.baseLanes|o,cachePool:u}),a.memoizedState=_,a.childLanes=hu(e,v,o),t.memoizedState=du,ts(e.child,a)):(Nr(t),o=e.child,e=o.sibling,o=nr(o,{mode:"visible",children:a.children}),o.return=t,o.sibling=null,e!==null&&(v=t.deletions,v===null?(t.deletions=[e],t.flags|=16):v.push(e)),t.child=o,t.memoizedState=null,o)}function pu(e,t){return t=Ra({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Ra(e,t){return e=bn(22,e,null,t),e.lanes=0,e}function mu(e,t,o){return hi(t,e.child,null,o),e=pu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Wp(e,t,o){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Nl(e.return,t,o)}function gu(e,t,o,a,u,f){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:o,tailMode:u,treeForkCount:f}:(v.isBackwards=t,v.rendering=null,v.renderingStartTime=0,v.last=a,v.tail=o,v.tailMode=u,v.treeForkCount=f)}function Zp(e,t,o){var a=t.pendingProps,u=a.revealOrder,f=a.tail;a=a.children;var v=Rt.current,_=(v&2)!==0;if(_?(v=v&1|2,t.flags|=128):v&=1,x(Rt,v),Vt(e,t,a,o),a=rt?qo:0,!_&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Wp(e,o,t);else if(e.tag===19)Wp(e,o,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(u){case"forwards":for(o=t.child,u=null;o!==null;)e=o.alternate,e!==null&&ha(e)===null&&(u=o),o=o.sibling;o=u,o===null?(u=t.child,t.child=null):(u=o.sibling,o.sibling=null),gu(t,!1,u,o,f,a);break;case"backwards":case"unstable_legacy-backwards":for(o=null,u=t.child,t.child=null;u!==null;){if(e=u.alternate,e!==null&&ha(e)===null){t.child=u;break}e=u.sibling,u.sibling=o,o=u,u=e}gu(t,!0,o,null,f,a);break;case"together":gu(t,!1,null,null,void 0,a);break;default:t.memoizedState=null}return t.child}function cr(e,t,o){if(e!==null&&(t.dependencies=e.dependencies),Ur|=t.lanes,(o&t.childLanes)===0)if(e!==null){if(Fi(e,t,o,!1),(o&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(s(153));if(t.child!==null){for(e=t.child,o=nr(e,e.pendingProps),t.child=o,o.return=t;e.sibling!==null;)e=e.sibling,o=o.sibling=nr(e,e.pendingProps),o.return=t;o.sibling=null}return t.child}function yu(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&oa(e)))}function bw(e,t,o){switch(t.tag){case 3:w(t,t.stateNode.containerInfo),Er(t,kt,e.memoizedState.cache),ai();break;case 27:case 5:k(t);break;case 4:w(t,t.stateNode.containerInfo);break;case 10:Er(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,ql(t),null;break;case 13:var a=t.memoizedState;if(a!==null)return a.dehydrated!==null?(Nr(t),t.flags|=128,null):(o&t.child.childLanes)!==0?Qp(e,t,o):(Nr(t),e=cr(e,t,o),e!==null?e.sibling:null);Nr(t);break;case 19:var u=(e.flags&128)!==0;if(a=(o&t.childLanes)!==0,a||(Fi(e,t,o,!1),a=(o&t.childLanes)!==0),u){if(a)return Zp(e,t,o);t.flags|=128}if(u=t.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),x(Rt,Rt.current),a)break;return null;case 22:return t.lanes=0,Gp(e,t,o,t.pendingProps);case 24:Er(t,kt,e.memoizedState.cache)}return cr(e,t,o)}function em(e,t,o){if(e!==null)if(e.memoizedProps!==t.pendingProps)Nt=!0;else{if(!yu(e,o)&&(t.flags&128)===0)return Nt=!1,bw(e,t,o);Nt=(e.flags&131072)!==0}else Nt=!1,rt&&(t.flags&1048576)!==0&&jh(t,qo,t.index);switch(t.lanes=0,t.tag){case 16:e:{var a=t.pendingProps;if(e=di(t.elementType),t.type=e,typeof e=="function")Tl(e)?(a=mi(e,a),t.tag=1,t=Jp(null,t,e,a,o)):(t.tag=0,t=uu(null,t,e,a,o));else{if(e!=null){var u=e.$$typeof;if(u===F){t.tag=11,t=qp(null,t,e,a,o);break e}else if(u===ae){t.tag=14,t=$p(null,t,e,a,o);break e}}throw t=Se(e)||e,Error(s(306,t,""))}}return t;case 0:return uu(e,t,t.type,t.pendingProps,o);case 1:return a=t.type,u=mi(a,t.pendingProps),Jp(e,t,a,u,o);case 3:e:{if(w(t,t.stateNode.containerInfo),e===null)throw Error(s(387));a=t.pendingProps;var f=t.memoizedState;u=f.element,Il(e,t),Ko(t,a,null,o);var v=t.memoizedState;if(a=v.cache,Er(t,kt,a),a!==f.cache&&Ol(t,[kt],o,!0),Jo(),a=v.element,f.isDehydrated)if(f={element:a,isDehydrated:!1,cache:v.cache},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){t=Kp(e,t,a,o);break e}else if(a!==u){u=Nn(Error(s(424)),t),$o(u),t=Kp(e,t,a,o);break e}else for(e=t.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,gt=Dn(e.firstChild),qt=t,rt=!0,xr=null,Mn=!0,o=Gh(t,null,a,o),t.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(ai(),a===u){t=cr(e,t,o);break e}Vt(e,t,a,o)}t=t.child}return t;case 26:return xa(e,t),e===null?(o=dg(t.type,null,t.pendingProps,null))?t.memoizedState=o:rt||(o=t.type,e=t.pendingProps,a=Ha(A.current).createElement(o),a[Ht]=t,a[an]=e,Gt(a,o,e),zt(a),t.stateNode=a):t.memoizedState=dg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return k(t),e===null&&rt&&(a=t.stateNode=cg(t.type,t.pendingProps,A.current),qt=t,Mn=!0,u=gt,Lr(t.type)?(Ku=u,gt=Dn(a.firstChild)):gt=u),Vt(e,t,t.pendingProps.children,o),xa(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&rt&&((u=a=gt)&&(a=Jw(a,t.type,t.pendingProps,Mn),a!==null?(t.stateNode=a,qt=t,gt=Dn(a.firstChild),Mn=!1,u=!0):u=!1),u||Rr(t)),k(t),u=t.type,f=t.pendingProps,v=e!==null?e.memoizedProps:null,a=f.children,Gu(u,f)?a=null:v!==null&&Gu(u,v)&&(t.flags|=32),t.memoizedState!==null&&(u=Vl(e,t,uw,null,null,o),gs._currentValue=u),xa(e,t),Vt(e,t,a,o),t.child;case 6:return e===null&&rt&&((e=o=gt)&&(o=Kw(o,t.pendingProps,Mn),o!==null?(t.stateNode=o,qt=t,gt=null,e=!0):e=!1),e||Rr(t)),null;case 13:return Qp(e,t,o);case 4:return w(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=hi(t,null,a,o):Vt(e,t,a,o),t.child;case 11:return qp(e,t,t.type,t.pendingProps,o);case 7:return Vt(e,t,t.pendingProps,o),t.child;case 8:return Vt(e,t,t.pendingProps.children,o),t.child;case 12:return Vt(e,t,t.pendingProps.children,o),t.child;case 10:return a=t.pendingProps,Er(t,t.type,a.value),Vt(e,t,a.children,o),t.child;case 9:return u=t.type._context,a=t.pendingProps.children,li(t),u=$t(u),a=a(u),t.flags|=1,Vt(e,t,a,o),t.child;case 14:return $p(e,t,t.type,t.pendingProps,o);case 15:return Vp(e,t,t.type,t.pendingProps,o);case 19:return Zp(e,t,o);case 31:return vw(e,t,o);case 22:return Gp(e,t,o,t.pendingProps);case 24:return li(t),a=$t(kt),e===null?(u=Ul(),u===null&&(u=mt,f=jl(),u.pooledCache=f,f.refCount++,f!==null&&(u.pooledCacheLanes|=o),u=f),t.memoizedState={parent:a,cache:u},Pl(t),Er(t,kt,u)):((e.lanes&o)!==0&&(Il(e,t),Ko(t,null,null,o),Jo()),u=e.memoizedState,f=t.memoizedState,u.parent!==a?(u={parent:a,cache:a},t.memoizedState=u,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=u),Er(t,kt,a)):(a=f.cache,Er(t,kt,a),a!==u.cache&&Ol(t,[kt],o,!0))),Vt(e,t,t.pendingProps.children,o),t.child;case 29:throw t.pendingProps}throw Error(s(156,t.tag))}function lr(e){e.flags|=4}function vu(e,t,o,a,u){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(u&335544128)===u)if(e.stateNode.complete)e.flags|=8192;else if(_m())e.flags|=8192;else throw fi=la,Dl}else e.flags&=-16777217}function tm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!gg(t))if(_m())e.flags|=8192;else throw fi=la,Dl}function Ea(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Uf():536870912,e.lanes|=t,io|=t)}function ns(e,t){if(!rt)switch(e.tailMode){case"hidden":t=e.tail;for(var o=null;t!==null;)t.alternate!==null&&(o=t),t=t.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function yt(e){var t=e.alternate!==null&&e.alternate.child===e.child,o=0,a=0;if(t)for(var u=e.child;u!==null;)o|=u.lanes|u.childLanes,a|=u.subtreeFlags&65011712,a|=u.flags&65011712,u.return=e,u=u.sibling;else for(u=e.child;u!==null;)o|=u.lanes|u.childLanes,a|=u.subtreeFlags,a|=u.flags,u.return=e,u=u.sibling;return e.subtreeFlags|=a,e.childLanes=o,t}function Sw(e,t,o){var a=t.pendingProps;switch(El(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(t),null;case 1:return yt(t),null;case 3:return o=t.stateNode,a=null,e!==null&&(a=e.memoizedState.cache),t.memoizedState.cache!==a&&(t.flags|=2048),or(kt),R(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(Gi(t)?lr(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,kl())),yt(t),null;case 26:var u=t.type,f=t.memoizedState;return e===null?(lr(t),f!==null?(yt(t),tm(t,f)):(yt(t),vu(t,u,null,a,o))):f?f!==e.memoizedState?(lr(t),yt(t),tm(t,f)):(yt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==a&&lr(t),yt(t),vu(t,u,e,a,o)),null;case 27:if(H(t),o=A.current,u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&lr(t);else{if(!a){if(t.stateNode===null)throw Error(s(166));return yt(t),null}e=b.current,Gi(t)?Uh(t):(e=cg(u,a,o),t.stateNode=e,lr(t))}return yt(t),null;case 5:if(H(t),u=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==a&&lr(t);else{if(!a){if(t.stateNode===null)throw Error(s(166));return yt(t),null}if(f=b.current,Gi(t))Uh(t);else{var v=Ha(A.current);switch(f){case 1:f=v.createElementNS("http://www.w3.org/2000/svg",u);break;case 2:f=v.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;default:switch(u){case"svg":f=v.createElementNS("http://www.w3.org/2000/svg",u);break;case"math":f=v.createElementNS("http://www.w3.org/1998/Math/MathML",u);break;case"script":f=v.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof a.is=="string"?v.createElement("select",{is:a.is}):v.createElement("select"),a.multiple?f.multiple=!0:a.size&&(f.size=a.size);break;default:f=typeof a.is=="string"?v.createElement(u,{is:a.is}):v.createElement(u)}}f[Ht]=t,f[an]=a;e:for(v=t.child;v!==null;){if(v.tag===5||v.tag===6)f.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}t.stateNode=f;e:switch(Gt(f,u,a),u){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&lr(t)}}return yt(t),vu(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,o),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==a&&lr(t);else{if(typeof a!="string"&&t.stateNode===null)throw Error(s(166));if(e=A.current,Gi(t)){if(e=t.stateNode,o=t.memoizedProps,a=null,u=qt,u!==null)switch(u.tag){case 27:case 5:a=u.memoizedProps}e[Ht]=t,e=!!(e.nodeValue===o||a!==null&&a.suppressHydrationWarning===!0||Qm(e.nodeValue,o)),e||Rr(t,!0)}else e=Ha(e).createTextNode(a),e[Ht]=t,t.stateNode=e}return yt(t),null;case 31:if(o=t.memoizedState,e===null||e.memoizedState!==null){if(a=Gi(t),o!==null){if(e===null){if(!a)throw Error(s(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Ht]=t}else ai(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;yt(t),e=!1}else o=kl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),e=!0;if(!e)return t.flags&256?(wn(t),t):(wn(t),null);if((t.flags&128)!==0)throw Error(s(558))}return yt(t),null;case 13:if(a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(u=Gi(t),a!==null&&a.dehydrated!==null){if(e===null){if(!u)throw Error(s(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));u[Ht]=t}else ai(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;yt(t),u=!1}else u=kl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=u),u=!0;if(!u)return t.flags&256?(wn(t),t):(wn(t),null)}return wn(t),(t.flags&128)!==0?(t.lanes=o,t):(o=a!==null,e=e!==null&&e.memoizedState!==null,o&&(a=t.child,u=null,a.alternate!==null&&a.alternate.memoizedState!==null&&a.alternate.memoizedState.cachePool!==null&&(u=a.alternate.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==u&&(a.flags|=2048)),o!==e&&o&&(t.child.flags|=8192),Ea(t,t.updateQueue),yt(t),null);case 4:return R(),e===null&&Bu(t.stateNode.containerInfo),yt(t),null;case 10:return or(t.type),yt(t),null;case 19:if(j(Rt),a=t.memoizedState,a===null)return yt(t),null;if(u=(t.flags&128)!==0,f=a.rendering,f===null)if(u)ns(a,!1);else{if(Ct!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(f=ha(e),f!==null){for(t.flags|=128,ns(a,!1),e=f.updateQueue,t.updateQueue=e,Ea(t,e),t.subtreeFlags=0,e=o,o=t.child;o!==null;)Ah(o,e),o=o.sibling;return x(Rt,Rt.current&1|2),rt&&rr(t,a.treeForkCount),t.child}e=e.sibling}a.tail!==null&&$e()>Oa&&(t.flags|=128,u=!0,ns(a,!1),t.lanes=4194304)}else{if(!u)if(e=ha(f),e!==null){if(t.flags|=128,u=!0,e=e.updateQueue,t.updateQueue=e,Ea(t,e),ns(a,!0),a.tail===null&&a.tailMode==="hidden"&&!f.alternate&&!rt)return yt(t),null}else 2*$e()-a.renderingStartTime>Oa&&o!==536870912&&(t.flags|=128,u=!0,ns(a,!1),t.lanes=4194304);a.isBackwards?(f.sibling=t.child,t.child=f):(e=a.last,e!==null?e.sibling=f:t.child=f,a.last=f)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=$e(),e.sibling=null,o=Rt.current,x(Rt,u?o&1|2:o&1),rt&&rr(t,a.treeForkCount),e):(yt(t),null);case 22:case 23:return wn(t),Hl(),a=t.memoizedState!==null,e!==null?e.memoizedState!==null!==a&&(t.flags|=8192):a&&(t.flags|=8192),a?(o&536870912)!==0&&(t.flags&128)===0&&(yt(t),t.subtreeFlags&6&&(t.flags|=8192)):yt(t),o=t.updateQueue,o!==null&&Ea(t,o.retryQueue),o=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),a=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),a!==o&&(t.flags|=2048),e!==null&&j(ui),null;case 24:return o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),or(kt),yt(t),null;case 25:return null;case 30:return null}throw Error(s(156,t.tag))}function ww(e,t){switch(El(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return or(kt),R(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return H(t),null;case 31:if(t.memoizedState!==null){if(wn(t),t.alternate===null)throw Error(s(340));ai()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(wn(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(s(340));ai()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return j(Rt),null;case 4:return R(),null;case 10:return or(t.type),null;case 22:case 23:return wn(t),Hl(),e!==null&&j(ui),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return or(kt),null;case 25:return null;default:return null}}function nm(e,t){switch(El(t),t.tag){case 3:or(kt),R();break;case 26:case 27:case 5:H(t);break;case 4:R();break;case 31:t.memoizedState!==null&&wn(t);break;case 13:wn(t);break;case 19:j(Rt);break;case 10:or(t.type);break;case 22:case 23:wn(t),Hl(),e!==null&&j(ui);break;case 24:or(kt)}}function rs(e,t){try{var o=t.updateQueue,a=o!==null?o.lastEffect:null;if(a!==null){var u=a.next;o=u;do{if((o.tag&e)===e){a=void 0;var f=o.create,v=o.inst;a=f(),v.destroy=a}o=o.next}while(o!==u)}}catch(_){dt(t,t.return,_)}}function jr(e,t,o){try{var a=t.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var f=u.next;a=f;do{if((a.tag&e)===e){var v=a.inst,_=v.destroy;if(_!==void 0){v.destroy=void 0,u=t;var G=o,le=_;try{le()}catch(be){dt(u,G,be)}}}a=a.next}while(a!==f)}}catch(be){dt(t,t.return,be)}}function rm(e){var t=e.updateQueue;if(t!==null){var o=e.stateNode;try{Xh(t,o)}catch(a){dt(e,e.return,a)}}}function im(e,t,o){o.props=mi(e.type,e.memoizedProps),o.state=e.memoizedState;try{o.componentWillUnmount()}catch(a){dt(e,t,a)}}function is(e,t){try{var o=e.ref;if(o!==null){switch(e.tag){case 26:case 27:case 5:var a=e.stateNode;break;case 30:a=e.stateNode;break;default:a=e.stateNode}typeof o=="function"?e.refCleanup=o(a):o.current=a}}catch(u){dt(e,t,u)}}function Xn(e,t){var o=e.ref,a=e.refCleanup;if(o!==null)if(typeof a=="function")try{a()}catch(u){dt(e,t,u)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(u){dt(e,t,u)}else o.current=null}function om(e){var t=e.type,o=e.memoizedProps,a=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":o.autoFocus&&a.focus();break e;case"img":o.src?a.src=o.src:o.srcSet&&(a.srcset=o.srcSet)}}catch(u){dt(e,e.return,u)}}function bu(e,t,o){try{var a=e.stateNode;$w(a,e.type,o,t),a[an]=t}catch(u){dt(e,e.return,u)}}function sm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Lr(e.type)||e.tag===4}function Su(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||sm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Lr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function wu(e,t,o){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(e,t):(t=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,t.appendChild(e),o=o._reactRootContainer,o!=null||t.onclick!==null||(t.onclick=er));else if(a!==4&&(a===27&&Lr(e.type)&&(o=e.stateNode,t=null),e=e.child,e!==null))for(wu(e,t,o),e=e.sibling;e!==null;)wu(e,t,o),e=e.sibling}function _a(e,t,o){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?o.insertBefore(e,t):o.appendChild(e);else if(a!==4&&(a===27&&Lr(e.type)&&(o=e.stateNode),e=e.child,e!==null))for(_a(e,t,o),e=e.sibling;e!==null;)_a(e,t,o),e=e.sibling}function am(e){var t=e.stateNode,o=e.memoizedProps;try{for(var a=e.type,u=t.attributes;u.length;)t.removeAttributeNode(u[0]);Gt(t,a,o),t[Ht]=e,t[an]=o}catch(f){dt(e,e.return,f)}}var ur=!1,Ot=!1,Tu=!1,cm=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function Tw(e,t){if(e=e.containerInfo,$u=Ya,e=Sh(e),ml(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var a=o.getSelection&&o.getSelection();if(a&&a.rangeCount!==0){o=a.anchorNode;var u=a.anchorOffset,f=a.focusNode;a=a.focusOffset;try{o.nodeType,f.nodeType}catch{o=null;break e}var v=0,_=-1,G=-1,le=0,be=0,xe=e,fe=null;t:for(;;){for(var ye;xe!==o||u!==0&&xe.nodeType!==3||(_=v+u),xe!==f||a!==0&&xe.nodeType!==3||(G=v+a),xe.nodeType===3&&(v+=xe.nodeValue.length),(ye=xe.firstChild)!==null;)fe=xe,xe=ye;for(;;){if(xe===e)break t;if(fe===o&&++le===u&&(_=v),fe===f&&++be===a&&(G=v),(ye=xe.nextSibling)!==null)break;xe=fe,fe=xe.parentNode}xe=ye}o=_===-1||G===-1?null:{start:_,end:G}}else o=null}o=o||{start:0,end:0}}else o=null;for(Vu={focusedElem:e,selectionRange:o},Ya=!1,Lt=t;Lt!==null;)if(t=Lt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Lt=e;else for(;Lt!==null;){switch(t=Lt,f=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(o=0;o<e.length;o++)u=e[o],u.ref.impl=u.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&f!==null){e=void 0,o=t,u=f.memoizedProps,f=f.memoizedState,a=o.stateNode;try{var Pe=mi(o.type,u);e=a.getSnapshotBeforeUpdate(Pe,f),a.__reactInternalSnapshotBeforeUpdate=e}catch(Ve){dt(o,o.return,Ve)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,o=e.nodeType,o===9)Xu(e);else if(o===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Xu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=t.sibling,e!==null){e.return=t.return,Lt=e;break}Lt=t.return}}function lm(e,t,o){var a=o.flags;switch(o.tag){case 0:case 11:case 15:fr(e,o),a&4&&rs(5,o);break;case 1:if(fr(e,o),a&4)if(e=o.stateNode,t===null)try{e.componentDidMount()}catch(v){dt(o,o.return,v)}else{var u=mi(o.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(u,t,e.__reactInternalSnapshotBeforeUpdate)}catch(v){dt(o,o.return,v)}}a&64&&rm(o),a&512&&is(o,o.return);break;case 3:if(fr(e,o),a&64&&(e=o.updateQueue,e!==null)){if(t=null,o.child!==null)switch(o.child.tag){case 27:case 5:t=o.child.stateNode;break;case 1:t=o.child.stateNode}try{Xh(e,t)}catch(v){dt(o,o.return,v)}}break;case 27:t===null&&a&4&&am(o);case 26:case 5:fr(e,o),t===null&&a&4&&om(o),a&512&&is(o,o.return);break;case 12:fr(e,o);break;case 31:fr(e,o),a&4&&fm(e,o);break;case 13:fr(e,o),a&4&&hm(e,o),a&64&&(e=o.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(o=Ow.bind(null,o),Qw(e,o))));break;case 22:if(a=o.memoizedState!==null||ur,!a){t=t!==null&&t.memoizedState!==null||Ot,u=ur;var f=Ot;ur=a,(Ot=t)&&!f?hr(e,o,(o.subtreeFlags&8772)!==0):fr(e,o),ur=u,Ot=f}break;case 30:break;default:fr(e,o)}}function um(e){var t=e.alternate;t!==null&&(e.alternate=null,um(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Wc(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var bt=null,ln=!1;function dr(e,t,o){for(o=o.child;o!==null;)dm(e,t,o),o=o.sibling}function dm(e,t,o){if(je&&typeof je.onCommitFiberUnmount=="function")try{je.onCommitFiberUnmount(ze,o)}catch{}switch(o.tag){case 26:Ot||Xn(o,t),dr(e,t,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ot||Xn(o,t);var a=bt,u=ln;Lr(o.type)&&(bt=o.stateNode,ln=!1),dr(e,t,o),hs(o.stateNode),bt=a,ln=u;break;case 5:Ot||Xn(o,t);case 6:if(a=bt,u=ln,bt=null,dr(e,t,o),bt=a,ln=u,bt!==null)if(ln)try{(bt.nodeType===9?bt.body:bt.nodeName==="HTML"?bt.ownerDocument.body:bt).removeChild(o.stateNode)}catch(f){dt(o,t,f)}else try{bt.removeChild(o.stateNode)}catch(f){dt(o,t,f)}break;case 18:bt!==null&&(ln?(e=bt,rg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,o.stateNode),ho(e)):rg(bt,o.stateNode));break;case 4:a=bt,u=ln,bt=o.stateNode.containerInfo,ln=!0,dr(e,t,o),bt=a,ln=u;break;case 0:case 11:case 14:case 15:jr(2,o,t),Ot||jr(4,o,t),dr(e,t,o);break;case 1:Ot||(Xn(o,t),a=o.stateNode,typeof a.componentWillUnmount=="function"&&im(o,t,a)),dr(e,t,o);break;case 21:dr(e,t,o);break;case 22:Ot=(a=Ot)||o.memoizedState!==null,dr(e,t,o),Ot=a;break;default:dr(e,t,o)}}function fm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ho(e)}catch(o){dt(t,t.return,o)}}}function hm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ho(e)}catch(o){dt(t,t.return,o)}}function Cw(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new cm),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new cm),t;default:throw Error(s(435,e.tag))}}function ka(e,t){var o=Cw(e);t.forEach(function(a){if(!o.has(a)){o.add(a);var u=jw.bind(null,e,a);a.then(u,u)}})}function un(e,t){var o=t.deletions;if(o!==null)for(var a=0;a<o.length;a++){var u=o[a],f=e,v=t,_=v;e:for(;_!==null;){switch(_.tag){case 27:if(Lr(_.type)){bt=_.stateNode,ln=!1;break e}break;case 5:bt=_.stateNode,ln=!1;break e;case 3:case 4:bt=_.stateNode.containerInfo,ln=!0;break e}_=_.return}if(bt===null)throw Error(s(160));dm(f,v,u),bt=null,ln=!1,f=u.alternate,f!==null&&(f.return=null),u.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)pm(t,e),t=t.sibling}var Ln=null;function pm(e,t){var o=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:un(t,e),dn(e),a&4&&(jr(3,e,e.return),rs(3,e),jr(5,e,e.return));break;case 1:un(t,e),dn(e),a&512&&(Ot||o===null||Xn(o,o.return)),a&64&&ur&&(e=e.updateQueue,e!==null&&(a=e.callbacks,a!==null&&(o=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=o===null?a:o.concat(a))));break;case 26:var u=Ln;if(un(t,e),dn(e),a&512&&(Ot||o===null||Xn(o,o.return)),a&4){var f=o!==null?o.memoizedState:null;if(a=e.memoizedState,o===null)if(a===null)if(e.stateNode===null){e:{a=e.type,o=e.memoizedProps,u=u.ownerDocument||u;t:switch(a){case"title":f=u.getElementsByTagName("title")[0],(!f||f[Oo]||f[Ht]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=u.createElement(a),u.head.insertBefore(f,u.querySelector("head > title"))),Gt(f,a,o),f[Ht]=e,zt(f),a=f;break e;case"link":var v=pg("link","href",u).get(a+(o.href||""));if(v){for(var _=0;_<v.length;_++)if(f=v[_],f.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&f.getAttribute("rel")===(o.rel==null?null:o.rel)&&f.getAttribute("title")===(o.title==null?null:o.title)&&f.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){v.splice(_,1);break t}}f=u.createElement(a),Gt(f,a,o),u.head.appendChild(f);break;case"meta":if(v=pg("meta","content",u).get(a+(o.content||""))){for(_=0;_<v.length;_++)if(f=v[_],f.getAttribute("content")===(o.content==null?null:""+o.content)&&f.getAttribute("name")===(o.name==null?null:o.name)&&f.getAttribute("property")===(o.property==null?null:o.property)&&f.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&f.getAttribute("charset")===(o.charSet==null?null:o.charSet)){v.splice(_,1);break t}}f=u.createElement(a),Gt(f,a,o),u.head.appendChild(f);break;default:throw Error(s(468,a))}f[Ht]=e,zt(f),a=f}e.stateNode=a}else mg(u,e.type,e.stateNode);else e.stateNode=hg(u,a,e.memoizedProps);else f!==a?(f===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):f.count--,a===null?mg(u,e.type,e.stateNode):hg(u,a,e.memoizedProps)):a===null&&e.stateNode!==null&&bu(e,e.memoizedProps,o.memoizedProps)}break;case 27:un(t,e),dn(e),a&512&&(Ot||o===null||Xn(o,o.return)),o!==null&&a&4&&bu(e,e.memoizedProps,o.memoizedProps);break;case 5:if(un(t,e),dn(e),a&512&&(Ot||o===null||Xn(o,o.return)),e.flags&32){u=e.stateNode;try{Di(u,"")}catch(Pe){dt(e,e.return,Pe)}}a&4&&e.stateNode!=null&&(u=e.memoizedProps,bu(e,u,o!==null?o.memoizedProps:u)),a&1024&&(Tu=!0);break;case 6:if(un(t,e),dn(e),a&4){if(e.stateNode===null)throw Error(s(162));a=e.memoizedProps,o=e.stateNode;try{o.nodeValue=a}catch(Pe){dt(e,e.return,Pe)}}break;case 3:if(Va=null,u=Ln,Ln=qa(t.containerInfo),un(t,e),Ln=u,dn(e),a&4&&o!==null&&o.memoizedState.isDehydrated)try{ho(t.containerInfo)}catch(Pe){dt(e,e.return,Pe)}Tu&&(Tu=!1,mm(e));break;case 4:a=Ln,Ln=qa(e.stateNode.containerInfo),un(t,e),dn(e),Ln=a;break;case 12:un(t,e),dn(e);break;case 31:un(t,e),dn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,ka(e,a)));break;case 13:un(t,e),dn(e),e.child.flags&8192&&e.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Na=$e()),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,ka(e,a)));break;case 22:u=e.memoizedState!==null;var G=o!==null&&o.memoizedState!==null,le=ur,be=Ot;if(ur=le||u,Ot=be||G,un(t,e),Ot=be,ur=le,dn(e),a&8192)e:for(t=e.stateNode,t._visibility=u?t._visibility&-2:t._visibility|1,u&&(o===null||G||ur||Ot||gi(e)),o=null,t=e;;){if(t.tag===5||t.tag===26){if(o===null){G=o=t;try{if(f=G.stateNode,u)v=f.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{_=G.stateNode;var xe=G.memoizedProps.style,fe=xe!=null&&xe.hasOwnProperty("display")?xe.display:null;_.style.display=fe==null||typeof fe=="boolean"?"":(""+fe).trim()}}catch(Pe){dt(G,G.return,Pe)}}}else if(t.tag===6){if(o===null){G=t;try{G.stateNode.nodeValue=u?"":G.memoizedProps}catch(Pe){dt(G,G.return,Pe)}}}else if(t.tag===18){if(o===null){G=t;try{var ye=G.stateNode;u?ig(ye,!0):ig(G.stateNode,!1)}catch(Pe){dt(G,G.return,Pe)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;o===t&&(o=null),t=t.return}o===t&&(o=null),t.sibling.return=t.return,t=t.sibling}a&4&&(a=e.updateQueue,a!==null&&(o=a.retryQueue,o!==null&&(a.retryQueue=null,ka(e,o))));break;case 19:un(t,e),dn(e),a&4&&(a=e.updateQueue,a!==null&&(e.updateQueue=null,ka(e,a)));break;case 30:break;case 21:break;default:un(t,e),dn(e)}}function dn(e){var t=e.flags;if(t&2){try{for(var o,a=e.return;a!==null;){if(sm(a)){o=a;break}a=a.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var u=o.stateNode,f=Su(e);_a(e,f,u);break;case 5:var v=o.stateNode;o.flags&32&&(Di(v,""),o.flags&=-33);var _=Su(e);_a(e,_,v);break;case 3:case 4:var G=o.stateNode.containerInfo,le=Su(e);wu(e,le,G);break;default:throw Error(s(161))}}catch(be){dt(e,e.return,be)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function mm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;mm(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function fr(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)lm(e,t.alternate,t),t=t.sibling}function gi(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:jr(4,t,t.return),gi(t);break;case 1:Xn(t,t.return);var o=t.stateNode;typeof o.componentWillUnmount=="function"&&im(t,t.return,o),gi(t);break;case 27:hs(t.stateNode);case 26:case 5:Xn(t,t.return),gi(t);break;case 22:t.memoizedState===null&&gi(t);break;case 30:gi(t);break;default:gi(t)}e=e.sibling}}function hr(e,t,o){for(o=o&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var a=t.alternate,u=e,f=t,v=f.flags;switch(f.tag){case 0:case 11:case 15:hr(u,f,o),rs(4,f);break;case 1:if(hr(u,f,o),a=f,u=a.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(le){dt(a,a.return,le)}if(a=f,u=a.updateQueue,u!==null){var _=a.stateNode;try{var G=u.shared.hiddenCallbacks;if(G!==null)for(u.shared.hiddenCallbacks=null,u=0;u<G.length;u++)Fh(G[u],_)}catch(le){dt(a,a.return,le)}}o&&v&64&&rm(f),is(f,f.return);break;case 27:am(f);case 26:case 5:hr(u,f,o),o&&a===null&&v&4&&om(f),is(f,f.return);break;case 12:hr(u,f,o);break;case 31:hr(u,f,o),o&&v&4&&fm(u,f);break;case 13:hr(u,f,o),o&&v&4&&hm(u,f);break;case 22:f.memoizedState===null&&hr(u,f,o),is(f,f.return);break;case 30:break;default:hr(u,f,o)}t=t.sibling}}function Cu(e,t){var o=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(o=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==o&&(e!=null&&e.refCount++,o!=null&&Vo(o))}function xu(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Vo(e))}function Bn(e,t,o,a){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)gm(e,t,o,a),t=t.sibling}function gm(e,t,o,a){var u=t.flags;switch(t.tag){case 0:case 11:case 15:Bn(e,t,o,a),u&2048&&rs(9,t);break;case 1:Bn(e,t,o,a);break;case 3:Bn(e,t,o,a),u&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Vo(e)));break;case 12:if(u&2048){Bn(e,t,o,a),e=t.stateNode;try{var f=t.memoizedProps,v=f.id,_=f.onPostCommit;typeof _=="function"&&_(v,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(G){dt(t,t.return,G)}}else Bn(e,t,o,a);break;case 31:Bn(e,t,o,a);break;case 13:Bn(e,t,o,a);break;case 23:break;case 22:f=t.stateNode,v=t.alternate,t.memoizedState!==null?f._visibility&2?Bn(e,t,o,a):os(e,t):f._visibility&2?Bn(e,t,o,a):(f._visibility|=2,to(e,t,o,a,(t.subtreeFlags&10256)!==0||!1)),u&2048&&Cu(v,t);break;case 24:Bn(e,t,o,a),u&2048&&xu(t.alternate,t);break;default:Bn(e,t,o,a)}}function to(e,t,o,a,u){for(u=u&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var f=e,v=t,_=o,G=a,le=v.flags;switch(v.tag){case 0:case 11:case 15:to(f,v,_,G,u),rs(8,v);break;case 23:break;case 22:var be=v.stateNode;v.memoizedState!==null?be._visibility&2?to(f,v,_,G,u):os(f,v):(be._visibility|=2,to(f,v,_,G,u)),u&&le&2048&&Cu(v.alternate,v);break;case 24:to(f,v,_,G,u),u&&le&2048&&xu(v.alternate,v);break;default:to(f,v,_,G,u)}t=t.sibling}}function os(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var o=e,a=t,u=a.flags;switch(a.tag){case 22:os(o,a),u&2048&&Cu(a.alternate,a);break;case 24:os(o,a),u&2048&&xu(a.alternate,a);break;default:os(o,a)}t=t.sibling}}var ss=8192;function no(e,t,o){if(e.subtreeFlags&ss)for(e=e.child;e!==null;)ym(e,t,o),e=e.sibling}function ym(e,t,o){switch(e.tag){case 26:no(e,t,o),e.flags&ss&&e.memoizedState!==null&&lT(o,Ln,e.memoizedState,e.memoizedProps);break;case 5:no(e,t,o);break;case 3:case 4:var a=Ln;Ln=qa(e.stateNode.containerInfo),no(e,t,o),Ln=a;break;case 22:e.memoizedState===null&&(a=e.alternate,a!==null&&a.memoizedState!==null?(a=ss,ss=16777216,no(e,t,o),ss=a):no(e,t,o));break;default:no(e,t,o)}}function vm(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function as(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var o=0;o<t.length;o++){var a=t[o];Lt=a,Sm(a,e)}vm(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)bm(e),e=e.sibling}function bm(e){switch(e.tag){case 0:case 11:case 15:as(e),e.flags&2048&&jr(9,e,e.return);break;case 3:as(e);break;case 12:as(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Aa(e)):as(e);break;default:as(e)}}function Aa(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var o=0;o<t.length;o++){var a=t[o];Lt=a,Sm(a,e)}vm(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:jr(8,t,t.return),Aa(t);break;case 22:o=t.stateNode,o._visibility&2&&(o._visibility&=-3,Aa(t));break;default:Aa(t)}e=e.sibling}}function Sm(e,t){for(;Lt!==null;){var o=Lt;switch(o.tag){case 0:case 11:case 15:jr(8,o,t);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var a=o.memoizedState.cachePool.pool;a!=null&&a.refCount++}break;case 24:Vo(o.memoizedState.cache)}if(a=o.child,a!==null)a.return=o,Lt=a;else e:for(o=e;Lt!==null;){a=Lt;var u=a.sibling,f=a.return;if(um(a),a===o){Lt=null;break e}if(u!==null){u.return=f,Lt=u;break e}Lt=f}}}var xw={getCacheForType:function(e){var t=$t(kt),o=t.data.get(e);return o===void 0&&(o=e(),t.data.set(e,o)),o},cacheSignal:function(){return $t(kt).controller.signal}},Rw=typeof WeakMap=="function"?WeakMap:Map,at=0,mt=null,We=null,tt=0,ut=0,Tn=null,Mr=!1,ro=!1,Ru=!1,pr=0,Ct=0,Ur=0,yi=0,Eu=0,Cn=0,io=0,cs=null,fn=null,_u=!1,Na=0,wm=0,Oa=1/0,ja=null,Dr=null,Dt=0,Pr=null,oo=null,mr=0,ku=0,Au=null,Tm=null,ls=0,Nu=null;function xn(){return(at&2)!==0&&tt!==0?tt&-tt:q.T!==null?Pu():zf()}function Cm(){if(Cn===0)if((tt&536870912)===0||rt){var e=ki;ki<<=1,(ki&3932160)===0&&(ki=262144),Cn=e}else Cn=536870912;return e=Sn.current,e!==null&&(e.flags|=32),Cn}function hn(e,t,o){(e===mt&&(ut===2||ut===9)||e.cancelPendingCommit!==null)&&(so(e,0),Ir(e,tt,Cn,!1)),No(e,o),((at&2)===0||e!==mt)&&(e===mt&&((at&2)===0&&(yi|=o),Ct===4&&Ir(e,tt,Cn,!1)),Yn(e))}function xm(e,t,o){if((at&6)!==0)throw Error(s(327));var a=!o&&(t&127)===0&&(t&e.expiredLanes)===0||Ao(e,t),u=a?kw(e,t):ju(e,t,!0),f=a;do{if(u===0){ro&&!a&&Ir(e,t,0,!1);break}else{if(o=e.current.alternate,f&&!Ew(o)){u=ju(e,t,!1),f=!1;continue}if(u===2){if(f=t,e.errorRecoveryDisabledLanes&f)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){t=v;e:{var _=e;u=cs;var G=_.current.memoizedState.isDehydrated;if(G&&(so(_,v).flags|=256),v=ju(_,v,!1),v!==2){if(Ru&&!G){_.errorRecoveryDisabledLanes|=f,yi|=f,u=4;break e}f=fn,fn=u,f!==null&&(fn===null?fn=f:fn.push.apply(fn,f))}u=v}if(f=!1,u!==2)continue}}if(u===1){so(e,0),Ir(e,t,0,!0);break}e:{switch(a=e,f=u,f){case 0:case 1:throw Error(s(345));case 4:if((t&4194048)!==t)break;case 6:Ir(a,t,Cn,!Mr);break e;case 2:fn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((t&62914560)===t&&(u=Na+300-$e(),10<u)){if(Ir(a,t,Cn,!Mr),qs(a,0,!0)!==0)break e;mr=t,a.timeoutHandle=tg(Rm.bind(null,a,o,fn,ja,_u,t,Cn,yi,io,Mr,f,"Throttled",-0,0),u);break e}Rm(a,o,fn,ja,_u,t,Cn,yi,io,Mr,f,null,-0,0)}}break}while(!0);Yn(e)}function Rm(e,t,o,a,u,f,v,_,G,le,be,xe,fe,ye){if(e.timeoutHandle=-1,xe=t.subtreeFlags,xe&8192||(xe&16785408)===16785408){xe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:er},ym(t,f,xe);var Pe=(f&62914560)===f?Na-$e():(f&4194048)===f?wm-$e():0;if(Pe=uT(xe,Pe),Pe!==null){mr=f,e.cancelPendingCommit=Pe(Mm.bind(null,e,t,f,o,a,u,v,_,G,be,xe,null,fe,ye)),Ir(e,f,v,!le);return}}Mm(e,t,f,o,a,u,v,_,G)}function Ew(e){for(var t=e;;){var o=t.tag;if((o===0||o===11||o===15)&&t.flags&16384&&(o=t.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var a=0;a<o.length;a++){var u=o[a],f=u.getSnapshot;u=u.value;try{if(!vn(f(),u))return!1}catch{return!1}}if(o=t.child,t.subtreeFlags&16384&&o!==null)o.return=t,t=o;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ir(e,t,o,a){t&=~Eu,t&=~yi,e.suspendedLanes|=t,e.pingedLanes&=~t,a&&(e.warmLanes|=t),a=e.expirationTimes;for(var u=t;0<u;){var f=31-Be(u),v=1<<f;a[f]=-1,u&=~v}o!==0&&Df(e,o,t)}function Ma(){return(at&6)===0?(us(0),!1):!0}function Ou(){if(We!==null){if(ut===0)var e=We.return;else e=We,ir=ci=null,Xl(e),Ki=null,Fo=0,e=We;for(;e!==null;)nm(e.alternate,e),e=e.return;We=null}}function so(e,t){var o=e.timeoutHandle;o!==-1&&(e.timeoutHandle=-1,Fw(o)),o=e.cancelPendingCommit,o!==null&&(e.cancelPendingCommit=null,o()),mr=0,Ou(),mt=e,We=o=nr(e.current,null),tt=t,ut=0,Tn=null,Mr=!1,ro=Ao(e,t),Ru=!1,io=Cn=Eu=yi=Ur=Ct=0,fn=cs=null,_u=!1,(t&8)!==0&&(t|=t&32);var a=e.entangledLanes;if(a!==0)for(e=e.entanglements,a&=t;0<a;){var u=31-Be(a),f=1<<u;t|=e[u],a&=~f}return pr=t,ea(),o}function Em(e,t){Xe=null,q.H=es,t===Ji||t===ca?(t=qh(),ut=3):t===Dl?(t=qh(),ut=4):ut=t===lu?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Tn=t,We===null&&(Ct=1,Ta(e,Nn(t,e.current)))}function _m(){var e=Sn.current;return e===null?!0:(tt&4194048)===tt?Un===null:(tt&62914560)===tt||(tt&536870912)!==0?e===Un:!1}function km(){var e=q.H;return q.H=es,e===null?es:e}function Am(){var e=q.A;return q.A=xw,e}function Ua(){Ct=4,Mr||(tt&4194048)!==tt&&Sn.current!==null||(ro=!0),(Ur&134217727)===0&&(yi&134217727)===0||mt===null||Ir(mt,tt,Cn,!1)}function ju(e,t,o){var a=at;at|=2;var u=km(),f=Am();(mt!==e||tt!==t)&&(ja=null,so(e,t)),t=!1;var v=Ct;e:do try{if(ut!==0&&We!==null){var _=We,G=Tn;switch(ut){case 8:Ou(),v=6;break e;case 3:case 2:case 9:case 6:Sn.current===null&&(t=!0);var le=ut;if(ut=0,Tn=null,ao(e,_,G,le),o&&ro){v=0;break e}break;default:le=ut,ut=0,Tn=null,ao(e,_,G,le)}}_w(),v=Ct;break}catch(be){Em(e,be)}while(!0);return t&&e.shellSuspendCounter++,ir=ci=null,at=a,q.H=u,q.A=f,We===null&&(mt=null,tt=0,ea()),v}function _w(){for(;We!==null;)Nm(We)}function kw(e,t){var o=at;at|=2;var a=km(),u=Am();mt!==e||tt!==t?(ja=null,Oa=$e()+500,so(e,t)):ro=Ao(e,t);e:do try{if(ut!==0&&We!==null){t=We;var f=Tn;t:switch(ut){case 1:ut=0,Tn=null,ao(e,t,f,1);break;case 2:case 9:if(Bh(f)){ut=0,Tn=null,Om(t);break}t=function(){ut!==2&&ut!==9||mt!==e||(ut=7),Yn(e)},f.then(t,t);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:Bh(f)?(ut=0,Tn=null,Om(t)):(ut=0,Tn=null,ao(e,t,f,7));break;case 5:var v=null;switch(We.tag){case 26:v=We.memoizedState;case 5:case 27:var _=We;if(v?gg(v):_.stateNode.complete){ut=0,Tn=null;var G=_.sibling;if(G!==null)We=G;else{var le=_.return;le!==null?(We=le,Da(le)):We=null}break t}}ut=0,Tn=null,ao(e,t,f,5);break;case 6:ut=0,Tn=null,ao(e,t,f,6);break;case 8:Ou(),Ct=6;break e;default:throw Error(s(462))}}Aw();break}catch(be){Em(e,be)}while(!0);return ir=ci=null,q.H=a,q.A=u,at=o,We!==null?0:(mt=null,tt=0,ea(),Ct)}function Aw(){for(;We!==null&&!ke();)Nm(We)}function Nm(e){var t=em(e.alternate,e,pr);e.memoizedProps=e.pendingProps,t===null?Da(e):We=t}function Om(e){var t=e,o=t.alternate;switch(t.tag){case 15:case 0:t=Yp(o,t,t.pendingProps,t.type,void 0,tt);break;case 11:t=Yp(o,t,t.pendingProps,t.type.render,t.ref,tt);break;case 5:Xl(t);default:nm(o,t),t=We=Ah(t,pr),t=em(o,t,pr)}e.memoizedProps=e.pendingProps,t===null?Da(e):We=t}function ao(e,t,o,a){ir=ci=null,Xl(t),Ki=null,Fo=0;var u=t.return;try{if(yw(e,u,t,o,tt)){Ct=1,Ta(e,Nn(o,e.current)),We=null;return}}catch(f){if(u!==null)throw We=u,f;Ct=1,Ta(e,Nn(o,e.current)),We=null;return}t.flags&32768?(rt||a===1?e=!0:ro||(tt&536870912)!==0?e=!1:(Mr=e=!0,(a===2||a===9||a===3||a===6)&&(a=Sn.current,a!==null&&a.tag===13&&(a.flags|=16384))),jm(t,e)):Da(t)}function Da(e){var t=e;do{if((t.flags&32768)!==0){jm(t,Mr);return}e=t.return;var o=Sw(t.alternate,t,pr);if(o!==null){We=o;return}if(t=t.sibling,t!==null){We=t;return}We=t=e}while(t!==null);Ct===0&&(Ct=5)}function jm(e,t){do{var o=ww(e.alternate,e);if(o!==null){o.flags&=32767,We=o;return}if(o=e.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!t&&(e=e.sibling,e!==null)){We=e;return}We=e=o}while(e!==null);Ct=6,We=null}function Mm(e,t,o,a,u,f,v,_,G){e.cancelPendingCommit=null;do Pa();while(Dt!==0);if((at&6)!==0)throw Error(s(327));if(t!==null){if(t===e.current)throw Error(s(177));if(f=t.lanes|t.childLanes,f|=Sl,cS(e,o,f,v,_,G),e===mt&&(We=mt=null,tt=0),oo=t,Pr=e,mr=o,ku=f,Au=u,Tm=a,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Mw(D,function(){return zm(),null})):(e.callbackNode=null,e.callbackPriority=0),a=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||a){a=q.T,q.T=null,u=U.p,U.p=2,v=at,at|=4;try{Tw(e,t,o)}finally{at=v,U.p=u,q.T=a}}Dt=1,Um(),Dm(),Pm()}}function Um(){if(Dt===1){Dt=0;var e=Pr,t=oo,o=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||o){o=q.T,q.T=null;var a=U.p;U.p=2;var u=at;at|=4;try{pm(t,e);var f=Vu,v=Sh(e.containerInfo),_=f.focusedElem,G=f.selectionRange;if(v!==_&&_&&_.ownerDocument&&bh(_.ownerDocument.documentElement,_)){if(G!==null&&ml(_)){var le=G.start,be=G.end;if(be===void 0&&(be=le),"selectionStart"in _)_.selectionStart=le,_.selectionEnd=Math.min(be,_.value.length);else{var xe=_.ownerDocument||document,fe=xe&&xe.defaultView||window;if(fe.getSelection){var ye=fe.getSelection(),Pe=_.textContent.length,Ve=Math.min(G.start,Pe),pt=G.end===void 0?Ve:Math.min(G.end,Pe);!ye.extend&&Ve>pt&&(v=pt,pt=Ve,Ve=v);var oe=vh(_,Ve),Z=vh(_,pt);if(oe&&Z&&(ye.rangeCount!==1||ye.anchorNode!==oe.node||ye.anchorOffset!==oe.offset||ye.focusNode!==Z.node||ye.focusOffset!==Z.offset)){var ce=xe.createRange();ce.setStart(oe.node,oe.offset),ye.removeAllRanges(),Ve>pt?(ye.addRange(ce),ye.extend(Z.node,Z.offset)):(ce.setEnd(Z.node,Z.offset),ye.addRange(ce))}}}}for(xe=[],ye=_;ye=ye.parentNode;)ye.nodeType===1&&xe.push({element:ye,left:ye.scrollLeft,top:ye.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<xe.length;_++){var we=xe[_];we.element.scrollLeft=we.left,we.element.scrollTop=we.top}}Ya=!!$u,Vu=$u=null}finally{at=u,U.p=a,q.T=o}}e.current=t,Dt=2}}function Dm(){if(Dt===2){Dt=0;var e=Pr,t=oo,o=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||o){o=q.T,q.T=null;var a=U.p;U.p=2;var u=at;at|=4;try{lm(e,t.alternate,t)}finally{at=u,U.p=a,q.T=o}}Dt=3}}function Pm(){if(Dt===4||Dt===3){Dt=0,Oe();var e=Pr,t=oo,o=mr,a=Tm;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?Dt=5:(Dt=0,oo=Pr=null,Im(e,e.pendingLanes));var u=e.pendingLanes;if(u===0&&(Dr=null),Kc(o),t=t.stateNode,je&&typeof je.onCommitFiberRoot=="function")try{je.onCommitFiberRoot(ze,t,void 0,(t.current.flags&128)===128)}catch{}if(a!==null){t=q.T,u=U.p,U.p=2,q.T=null;try{for(var f=e.onRecoverableError,v=0;v<a.length;v++){var _=a[v];f(_.value,{componentStack:_.stack})}}finally{q.T=t,U.p=u}}(mr&3)!==0&&Pa(),Yn(e),u=e.pendingLanes,(o&261930)!==0&&(u&42)!==0?e===Nu?ls++:(ls=0,Nu=e):ls=0,us(0)}}function Im(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Vo(t)))}function Pa(){return Um(),Dm(),Pm(),zm()}function zm(){if(Dt!==5)return!1;var e=Pr,t=ku;ku=0;var o=Kc(mr),a=q.T,u=U.p;try{U.p=32>o?32:o,q.T=null,o=Au,Au=null;var f=Pr,v=mr;if(Dt=0,oo=Pr=null,mr=0,(at&6)!==0)throw Error(s(331));var _=at;if(at|=4,bm(f.current),gm(f,f.current,v,o),at=_,us(0,!1),je&&typeof je.onPostCommitFiberRoot=="function")try{je.onPostCommitFiberRoot(ze,f)}catch{}return!0}finally{U.p=u,q.T=a,Im(e,t)}}function Lm(e,t,o){t=Nn(o,t),t=cu(e.stateNode,t,2),e=Ar(e,t,2),e!==null&&(No(e,2),Yn(e))}function dt(e,t,o){if(e.tag===3)Lm(e,e,o);else for(;t!==null;){if(t.tag===3){Lm(t,e,o);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Dr===null||!Dr.has(a))){e=Nn(o,e),o=Bp(2),a=Ar(t,o,2),a!==null&&(Hp(o,a,t,e),No(a,2),Yn(a));break}}t=t.return}}function Mu(e,t,o){var a=e.pingCache;if(a===null){a=e.pingCache=new Rw;var u=new Set;a.set(t,u)}else u=a.get(t),u===void 0&&(u=new Set,a.set(t,u));u.has(o)||(Ru=!0,u.add(o),e=Nw.bind(null,e,t,o),t.then(e,e))}function Nw(e,t,o){var a=e.pingCache;a!==null&&a.delete(t),e.pingedLanes|=e.suspendedLanes&o,e.warmLanes&=~o,mt===e&&(tt&o)===o&&(Ct===4||Ct===3&&(tt&62914560)===tt&&300>$e()-Na?(at&2)===0&&so(e,0):Eu|=o,io===tt&&(io=0)),Yn(e)}function Bm(e,t){t===0&&(t=Uf()),e=oi(e,t),e!==null&&(No(e,t),Yn(e))}function Ow(e){var t=e.memoizedState,o=0;t!==null&&(o=t.retryLane),Bm(e,o)}function jw(e,t){var o=0;switch(e.tag){case 31:case 13:var a=e.stateNode,u=e.memoizedState;u!==null&&(o=u.retryLane);break;case 19:a=e.stateNode;break;case 22:a=e.stateNode._retryCache;break;default:throw Error(s(314))}a!==null&&a.delete(t),Bm(e,o)}function Mw(e,t){return Ee(e,t)}var Ia=null,co=null,Uu=!1,za=!1,Du=!1,zr=0;function Yn(e){e!==co&&e.next===null&&(co===null?Ia=co=e:co=co.next=e),za=!0,Uu||(Uu=!0,Dw())}function us(e,t){if(!Du&&za){Du=!0;do for(var o=!1,a=Ia;a!==null;){if(e!==0){var u=a.pendingLanes;if(u===0)var f=0;else{var v=a.suspendedLanes,_=a.pingedLanes;f=(1<<31-Be(42|e)+1)-1,f&=u&~(v&~_),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(o=!0,Vm(a,f))}else f=tt,f=qs(a,a===mt?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),(f&3)===0||Ao(a,f)||(o=!0,Vm(a,f));a=a.next}while(o);Du=!1}}function Uw(){Hm()}function Hm(){za=Uu=!1;var e=0;zr!==0&&Gw()&&(e=zr);for(var t=$e(),o=null,a=Ia;a!==null;){var u=a.next,f=qm(a,t);f===0?(a.next=null,o===null?Ia=u:o.next=u,u===null&&(co=o)):(o=a,(e!==0||(f&3)!==0)&&(za=!0)),a=u}Dt!==0&&Dt!==5||us(e),zr!==0&&(zr=0)}function qm(e,t){for(var o=e.suspendedLanes,a=e.pingedLanes,u=e.expirationTimes,f=e.pendingLanes&-62914561;0<f;){var v=31-Be(f),_=1<<v,G=u[v];G===-1?((_&o)===0||(_&a)!==0)&&(u[v]=aS(_,t)):G<=t&&(e.expiredLanes|=_),f&=~_}if(t=mt,o=tt,o=qs(e,e===t?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a=e.callbackNode,o===0||e===t&&(ut===2||ut===9)||e.cancelPendingCommit!==null)return a!==null&&a!==null&&Ae(a),e.callbackNode=null,e.callbackPriority=0;if((o&3)===0||Ao(e,o)){if(t=o&-o,t===e.callbackPriority)return t;switch(a!==null&&Ae(a),Kc(o)){case 2:case 8:o=T;break;case 32:o=D;break;case 268435456:o=$;break;default:o=D}return a=$m.bind(null,e),o=Ee(o,a),e.callbackPriority=t,e.callbackNode=o,t}return a!==null&&a!==null&&Ae(a),e.callbackPriority=2,e.callbackNode=null,2}function $m(e,t){if(Dt!==0&&Dt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var o=e.callbackNode;if(Pa()&&e.callbackNode!==o)return null;var a=tt;return a=qs(e,e===mt?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),a===0?null:(xm(e,a,t),qm(e,$e()),e.callbackNode!=null&&e.callbackNode===o?$m.bind(null,e):null)}function Vm(e,t){if(Pa())return null;xm(e,t,!0)}function Dw(){Xw(function(){(at&6)!==0?Ee(O,Uw):Hm()})}function Pu(){if(zr===0){var e=Xi;e===0&&(e=Yt,Yt<<=1,(Yt&261888)===0&&(Yt=256)),zr=e}return zr}function Gm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Fs(""+e)}function Fm(e,t){var o=t.ownerDocument.createElement("input");return o.name=t.name,o.value=t.value,e.id&&o.setAttribute("form",e.id),t.parentNode.insertBefore(o,t),e=new FormData(e),o.parentNode.removeChild(o),e}function Pw(e,t,o,a,u){if(t==="submit"&&o&&o.stateNode===u){var f=Gm((u[an]||null).action),v=a.submitter;v&&(t=(t=v[an]||null)?Gm(t.formAction):v.getAttribute("formAction"),t!==null&&(f=t,v=null));var _=new Ks("action","action",null,a,u);e.push({event:_,listeners:[{instance:null,listener:function(){if(a.defaultPrevented){if(zr!==0){var G=v?Fm(u,v):new FormData(u);nu(o,{pending:!0,data:G,method:u.method,action:f},null,G)}}else typeof f=="function"&&(_.preventDefault(),G=v?Fm(u,v):new FormData(u),nu(o,{pending:!0,data:G,method:u.method,action:f},f,G))},currentTarget:u}]})}}for(var Iu=0;Iu<bl.length;Iu++){var zu=bl[Iu],Iw=zu.toLowerCase(),zw=zu[0].toUpperCase()+zu.slice(1);zn(Iw,"on"+zw)}zn(Ch,"onAnimationEnd"),zn(xh,"onAnimationIteration"),zn(Rh,"onAnimationStart"),zn("dblclick","onDoubleClick"),zn("focusin","onFocus"),zn("focusout","onBlur"),zn(ew,"onTransitionRun"),zn(tw,"onTransitionStart"),zn(nw,"onTransitionCancel"),zn(Eh,"onTransitionEnd"),Mi("onMouseEnter",["mouseout","mouseover"]),Mi("onMouseLeave",["mouseout","mouseover"]),Mi("onPointerEnter",["pointerout","pointerover"]),Mi("onPointerLeave",["pointerout","pointerover"]),ti("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ti("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ti("onBeforeInput",["compositionend","keypress","textInput","paste"]),ti("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ti("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ds="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ds));function Xm(e,t){t=(t&4)!==0;for(var o=0;o<e.length;o++){var a=e[o],u=a.event;a=a.listeners;e:{var f=void 0;if(t)for(var v=a.length-1;0<=v;v--){var _=a[v],G=_.instance,le=_.currentTarget;if(_=_.listener,G!==f&&u.isPropagationStopped())break e;f=_,u.currentTarget=le;try{f(u)}catch(be){Zs(be)}u.currentTarget=null,f=G}else for(v=0;v<a.length;v++){if(_=a[v],G=_.instance,le=_.currentTarget,_=_.listener,G!==f&&u.isPropagationStopped())break e;f=_,u.currentTarget=le;try{f(u)}catch(be){Zs(be)}u.currentTarget=null,f=G}}}}function Ze(e,t){var o=t[Qc];o===void 0&&(o=t[Qc]=new Set);var a=e+"__bubble";o.has(a)||(Ym(t,e,2,!1),o.add(a))}function Lu(e,t,o){var a=0;t&&(a|=4),Ym(o,e,a,t)}var La="_reactListening"+Math.random().toString(36).slice(2);function Bu(e){if(!e[La]){e[La]=!0,Hf.forEach(function(o){o!=="selectionchange"&&(Lw.has(o)||Lu(o,!1,e),Lu(o,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[La]||(t[La]=!0,Lu("selectionchange",!1,t))}}function Ym(e,t,o,a){switch(Cg(t)){case 2:var u=hT;break;case 8:u=pT;break;default:u=td}o=u.bind(null,t,o,e),u=void 0,!sl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(u=!0),a?u!==void 0?e.addEventListener(t,o,{capture:!0,passive:u}):e.addEventListener(t,o,!0):u!==void 0?e.addEventListener(t,o,{passive:u}):e.addEventListener(t,o,!1)}function Hu(e,t,o,a,u){var f=a;if((t&1)===0&&(t&2)===0&&a!==null)e:for(;;){if(a===null)return;var v=a.tag;if(v===3||v===4){var _=a.stateNode.containerInfo;if(_===u)break;if(v===4)for(v=a.return;v!==null;){var G=v.tag;if((G===3||G===4)&&v.stateNode.containerInfo===u)return;v=v.return}for(;_!==null;){if(v=Ni(_),v===null)return;if(G=v.tag,G===5||G===6||G===26||G===27){a=f=v;continue e}_=_.parentNode}}a=a.return}Zf(function(){var le=f,be=il(o),xe=[];e:{var fe=_h.get(e);if(fe!==void 0){var ye=Ks,Pe=e;switch(e){case"keypress":if(Ys(o)===0)break e;case"keydown":case"keyup":ye=jS;break;case"focusin":Pe="focus",ye=ul;break;case"focusout":Pe="blur",ye=ul;break;case"beforeblur":case"afterblur":ye=ul;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=nh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=SS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=DS;break;case Ch:case xh:case Rh:ye=CS;break;case Eh:ye=IS;break;case"scroll":case"scrollend":ye=vS;break;case"wheel":ye=LS;break;case"copy":case"cut":case"paste":ye=RS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=ih;break;case"toggle":case"beforetoggle":ye=HS}var Ve=(t&4)!==0,pt=!Ve&&(e==="scroll"||e==="scrollend"),oe=Ve?fe!==null?fe+"Capture":null:fe;Ve=[];for(var Z=le,ce;Z!==null;){var we=Z;if(ce=we.stateNode,we=we.tag,we!==5&&we!==26&&we!==27||ce===null||oe===null||(we=Mo(Z,oe),we!=null&&Ve.push(fs(Z,we,ce))),pt)break;Z=Z.return}0<Ve.length&&(fe=new ye(fe,Pe,null,o,be),xe.push({event:fe,listeners:Ve}))}}if((t&7)===0){e:{if(fe=e==="mouseover"||e==="pointerover",ye=e==="mouseout"||e==="pointerout",fe&&o!==rl&&(Pe=o.relatedTarget||o.fromElement)&&(Ni(Pe)||Pe[Ai]))break e;if((ye||fe)&&(fe=be.window===be?be:(fe=be.ownerDocument)?fe.defaultView||fe.parentWindow:window,ye?(Pe=o.relatedTarget||o.toElement,ye=le,Pe=Pe?Ni(Pe):null,Pe!==null&&(pt=l(Pe),Ve=Pe.tag,Pe!==pt||Ve!==5&&Ve!==27&&Ve!==6)&&(Pe=null)):(ye=null,Pe=le),ye!==Pe)){if(Ve=nh,we="onMouseLeave",oe="onMouseEnter",Z="mouse",(e==="pointerout"||e==="pointerover")&&(Ve=ih,we="onPointerLeave",oe="onPointerEnter",Z="pointer"),pt=ye==null?fe:jo(ye),ce=Pe==null?fe:jo(Pe),fe=new Ve(we,Z+"leave",ye,o,be),fe.target=pt,fe.relatedTarget=ce,we=null,Ni(be)===le&&(Ve=new Ve(oe,Z+"enter",Pe,o,be),Ve.target=ce,Ve.relatedTarget=pt,we=Ve),pt=we,ye&&Pe)t:{for(Ve=Bw,oe=ye,Z=Pe,ce=0,we=oe;we;we=Ve(we))ce++;we=0;for(var qe=Z;qe;qe=Ve(qe))we++;for(;0<ce-we;)oe=Ve(oe),ce--;for(;0<we-ce;)Z=Ve(Z),we--;for(;ce--;){if(oe===Z||Z!==null&&oe===Z.alternate){Ve=oe;break t}oe=Ve(oe),Z=Ve(Z)}Ve=null}else Ve=null;ye!==null&&Jm(xe,fe,ye,Ve,!1),Pe!==null&&pt!==null&&Jm(xe,pt,Pe,Ve,!0)}}e:{if(fe=le?jo(le):window,ye=fe.nodeName&&fe.nodeName.toLowerCase(),ye==="select"||ye==="input"&&fe.type==="file")var it=fh;else if(uh(fe))if(hh)it=QS;else{it=JS;var He=YS}else ye=fe.nodeName,!ye||ye.toLowerCase()!=="input"||fe.type!=="checkbox"&&fe.type!=="radio"?le&&nl(le.elementType)&&(it=fh):it=KS;if(it&&(it=it(e,le))){dh(xe,it,o,be);break e}He&&He(e,fe,le),e==="focusout"&&le&&fe.type==="number"&&le.memoizedProps.value!=null&&tl(fe,"number",fe.value)}switch(He=le?jo(le):window,e){case"focusin":(uh(He)||He.contentEditable==="true")&&(Li=He,gl=le,Ho=null);break;case"focusout":Ho=gl=Li=null;break;case"mousedown":yl=!0;break;case"contextmenu":case"mouseup":case"dragend":yl=!1,wh(xe,o,be);break;case"selectionchange":if(ZS)break;case"keydown":case"keyup":wh(xe,o,be)}var Ke;if(fl)e:{switch(e){case"compositionstart":var nt="onCompositionStart";break e;case"compositionend":nt="onCompositionEnd";break e;case"compositionupdate":nt="onCompositionUpdate";break e}nt=void 0}else zi?ch(e,o)&&(nt="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(nt="onCompositionStart");nt&&(oh&&o.locale!=="ko"&&(zi||nt!=="onCompositionStart"?nt==="onCompositionEnd"&&zi&&(Ke=eh()):(Tr=be,al="value"in Tr?Tr.value:Tr.textContent,zi=!0)),He=Ba(le,nt),0<He.length&&(nt=new rh(nt,e,null,o,be),xe.push({event:nt,listeners:He}),Ke?nt.data=Ke:(Ke=lh(o),Ke!==null&&(nt.data=Ke)))),(Ke=$S?VS(e,o):GS(e,o))&&(nt=Ba(le,"onBeforeInput"),0<nt.length&&(He=new rh("onBeforeInput","beforeinput",null,o,be),xe.push({event:He,listeners:nt}),He.data=Ke)),Pw(xe,e,le,o,be)}Xm(xe,t)})}function fs(e,t,o){return{instance:e,listener:t,currentTarget:o}}function Ba(e,t){for(var o=t+"Capture",a=[];e!==null;){var u=e,f=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||f===null||(u=Mo(e,o),u!=null&&a.unshift(fs(e,u,f)),u=Mo(e,t),u!=null&&a.push(fs(e,u,f))),e.tag===3)return a;e=e.return}return[]}function Bw(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Jm(e,t,o,a,u){for(var f=t._reactName,v=[];o!==null&&o!==a;){var _=o,G=_.alternate,le=_.stateNode;if(_=_.tag,G!==null&&G===a)break;_!==5&&_!==26&&_!==27||le===null||(G=le,u?(le=Mo(o,f),le!=null&&v.unshift(fs(o,le,G))):u||(le=Mo(o,f),le!=null&&v.push(fs(o,le,G)))),o=o.return}v.length!==0&&e.push({event:t,listeners:v})}var Hw=/\r\n?/g,qw=/\u0000|\uFFFD/g;function Km(e){return(typeof e=="string"?e:""+e).replace(Hw,`
`).replace(qw,"")}function Qm(e,t){return t=Km(t),Km(e)===t}function ht(e,t,o,a,u,f){switch(o){case"children":typeof a=="string"?t==="body"||t==="textarea"&&a===""||Di(e,a):(typeof a=="number"||typeof a=="bigint")&&t!=="body"&&Di(e,""+a);break;case"className":Vs(e,"class",a);break;case"tabIndex":Vs(e,"tabindex",a);break;case"dir":case"role":case"viewBox":case"width":case"height":Vs(e,o,a);break;case"style":Qf(e,a,f);break;case"data":if(t!=="object"){Vs(e,"data",a);break}case"src":case"href":if(a===""&&(t!=="a"||o!=="href")){e.removeAttribute(o);break}if(a==null||typeof a=="function"||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(o);break}a=Fs(""+a),e.setAttribute(o,a);break;case"action":case"formAction":if(typeof a=="function"){e.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(o==="formAction"?(t!=="input"&&ht(e,t,"name",u.name,u,null),ht(e,t,"formEncType",u.formEncType,u,null),ht(e,t,"formMethod",u.formMethod,u,null),ht(e,t,"formTarget",u.formTarget,u,null)):(ht(e,t,"encType",u.encType,u,null),ht(e,t,"method",u.method,u,null),ht(e,t,"target",u.target,u,null)));if(a==null||typeof a=="symbol"||typeof a=="boolean"){e.removeAttribute(o);break}a=Fs(""+a),e.setAttribute(o,a);break;case"onClick":a!=null&&(e.onclick=er);break;case"onScroll":a!=null&&Ze("scroll",e);break;case"onScrollEnd":a!=null&&Ze("scrollend",e);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(o=a.__html,o!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=o}}break;case"multiple":e.multiple=a&&typeof a!="function"&&typeof a!="symbol";break;case"muted":e.muted=a&&typeof a!="function"&&typeof a!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(a==null||typeof a=="function"||typeof a=="boolean"||typeof a=="symbol"){e.removeAttribute("xlink:href");break}o=Fs(""+a),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(o,""+a):e.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":a&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(o,""):e.removeAttribute(o);break;case"capture":case"download":a===!0?e.setAttribute(o,""):a!==!1&&a!=null&&typeof a!="function"&&typeof a!="symbol"?e.setAttribute(o,a):e.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":a!=null&&typeof a!="function"&&typeof a!="symbol"&&!isNaN(a)&&1<=a?e.setAttribute(o,a):e.removeAttribute(o);break;case"rowSpan":case"start":a==null||typeof a=="function"||typeof a=="symbol"||isNaN(a)?e.removeAttribute(o):e.setAttribute(o,a);break;case"popover":Ze("beforetoggle",e),Ze("toggle",e),$s(e,"popover",a);break;case"xlinkActuate":Zn(e,"http://www.w3.org/1999/xlink","xlink:actuate",a);break;case"xlinkArcrole":Zn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",a);break;case"xlinkRole":Zn(e,"http://www.w3.org/1999/xlink","xlink:role",a);break;case"xlinkShow":Zn(e,"http://www.w3.org/1999/xlink","xlink:show",a);break;case"xlinkTitle":Zn(e,"http://www.w3.org/1999/xlink","xlink:title",a);break;case"xlinkType":Zn(e,"http://www.w3.org/1999/xlink","xlink:type",a);break;case"xmlBase":Zn(e,"http://www.w3.org/XML/1998/namespace","xml:base",a);break;case"xmlLang":Zn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",a);break;case"xmlSpace":Zn(e,"http://www.w3.org/XML/1998/namespace","xml:space",a);break;case"is":$s(e,"is",a);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=gS.get(o)||o,$s(e,o,a))}}function qu(e,t,o,a,u,f){switch(o){case"style":Qf(e,a,f);break;case"dangerouslySetInnerHTML":if(a!=null){if(typeof a!="object"||!("__html"in a))throw Error(s(61));if(o=a.__html,o!=null){if(u.children!=null)throw Error(s(60));e.innerHTML=o}}break;case"children":typeof a=="string"?Di(e,a):(typeof a=="number"||typeof a=="bigint")&&Di(e,""+a);break;case"onScroll":a!=null&&Ze("scroll",e);break;case"onScrollEnd":a!=null&&Ze("scrollend",e);break;case"onClick":a!=null&&(e.onclick=er);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!qf.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(u=o.endsWith("Capture"),t=o.slice(2,u?o.length-7:void 0),f=e[an]||null,f=f!=null?f[o]:null,typeof f=="function"&&e.removeEventListener(t,f,u),typeof a=="function")){typeof f!="function"&&f!==null&&(o in e?e[o]=null:e.hasAttribute(o)&&e.removeAttribute(o)),e.addEventListener(t,a,u);break e}o in e?e[o]=a:a===!0?e.setAttribute(o,""):$s(e,o,a)}}}function Gt(e,t,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",e),Ze("load",e);var a=!1,u=!1,f;for(f in o)if(o.hasOwnProperty(f)){var v=o[f];if(v!=null)switch(f){case"src":a=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:ht(e,t,f,v,o,null)}}u&&ht(e,t,"srcSet",o.srcSet,o,null),a&&ht(e,t,"src",o.src,o,null);return;case"input":Ze("invalid",e);var _=f=v=u=null,G=null,le=null;for(a in o)if(o.hasOwnProperty(a)){var be=o[a];if(be!=null)switch(a){case"name":u=be;break;case"type":v=be;break;case"checked":G=be;break;case"defaultChecked":le=be;break;case"value":f=be;break;case"defaultValue":_=be;break;case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(s(137,t));break;default:ht(e,t,a,be,o,null)}}Xf(e,f,_,G,le,v,u,!1);return;case"select":Ze("invalid",e),a=v=f=null;for(u in o)if(o.hasOwnProperty(u)&&(_=o[u],_!=null))switch(u){case"value":f=_;break;case"defaultValue":v=_;break;case"multiple":a=_;default:ht(e,t,u,_,o,null)}t=f,o=v,e.multiple=!!a,t!=null?Ui(e,!!a,t,!1):o!=null&&Ui(e,!!a,o,!0);return;case"textarea":Ze("invalid",e),f=u=a=null;for(v in o)if(o.hasOwnProperty(v)&&(_=o[v],_!=null))switch(v){case"value":a=_;break;case"defaultValue":u=_;break;case"children":f=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:ht(e,t,v,_,o,null)}Jf(e,a,u,f);return;case"option":for(G in o)o.hasOwnProperty(G)&&(a=o[G],a!=null)&&(G==="selected"?e.selected=a&&typeof a!="function"&&typeof a!="symbol":ht(e,t,G,a,o,null));return;case"dialog":Ze("beforetoggle",e),Ze("toggle",e),Ze("cancel",e),Ze("close",e);break;case"iframe":case"object":Ze("load",e);break;case"video":case"audio":for(a=0;a<ds.length;a++)Ze(ds[a],e);break;case"image":Ze("error",e),Ze("load",e);break;case"details":Ze("toggle",e);break;case"embed":case"source":case"link":Ze("error",e),Ze("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in o)if(o.hasOwnProperty(le)&&(a=o[le],a!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,t));default:ht(e,t,le,a,o,null)}return;default:if(nl(t)){for(be in o)o.hasOwnProperty(be)&&(a=o[be],a!==void 0&&qu(e,t,be,a,o,void 0));return}}for(_ in o)o.hasOwnProperty(_)&&(a=o[_],a!=null&&ht(e,t,_,a,o,null))}function $w(e,t,o,a){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,f=null,v=null,_=null,G=null,le=null,be=null;for(ye in o){var xe=o[ye];if(o.hasOwnProperty(ye)&&xe!=null)switch(ye){case"checked":break;case"value":break;case"defaultValue":G=xe;default:a.hasOwnProperty(ye)||ht(e,t,ye,null,a,xe)}}for(var fe in a){var ye=a[fe];if(xe=o[fe],a.hasOwnProperty(fe)&&(ye!=null||xe!=null))switch(fe){case"type":f=ye;break;case"name":u=ye;break;case"checked":le=ye;break;case"defaultChecked":be=ye;break;case"value":v=ye;break;case"defaultValue":_=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(s(137,t));break;default:ye!==xe&&ht(e,t,fe,ye,a,xe)}}el(e,v,_,G,le,be,f,u);return;case"select":ye=v=_=fe=null;for(f in o)if(G=o[f],o.hasOwnProperty(f)&&G!=null)switch(f){case"value":break;case"multiple":ye=G;default:a.hasOwnProperty(f)||ht(e,t,f,null,a,G)}for(u in a)if(f=a[u],G=o[u],a.hasOwnProperty(u)&&(f!=null||G!=null))switch(u){case"value":fe=f;break;case"defaultValue":_=f;break;case"multiple":v=f;default:f!==G&&ht(e,t,u,f,a,G)}t=_,o=v,a=ye,fe!=null?Ui(e,!!o,fe,!1):!!a!=!!o&&(t!=null?Ui(e,!!o,t,!0):Ui(e,!!o,o?[]:"",!1));return;case"textarea":ye=fe=null;for(_ in o)if(u=o[_],o.hasOwnProperty(_)&&u!=null&&!a.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:ht(e,t,_,null,a,u)}for(v in a)if(u=a[v],f=o[v],a.hasOwnProperty(v)&&(u!=null||f!=null))switch(v){case"value":fe=u;break;case"defaultValue":ye=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(s(91));break;default:u!==f&&ht(e,t,v,u,a,f)}Yf(e,fe,ye);return;case"option":for(var Pe in o)fe=o[Pe],o.hasOwnProperty(Pe)&&fe!=null&&!a.hasOwnProperty(Pe)&&(Pe==="selected"?e.selected=!1:ht(e,t,Pe,null,a,fe));for(G in a)fe=a[G],ye=o[G],a.hasOwnProperty(G)&&fe!==ye&&(fe!=null||ye!=null)&&(G==="selected"?e.selected=fe&&typeof fe!="function"&&typeof fe!="symbol":ht(e,t,G,fe,a,ye));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in o)fe=o[Ve],o.hasOwnProperty(Ve)&&fe!=null&&!a.hasOwnProperty(Ve)&&ht(e,t,Ve,null,a,fe);for(le in a)if(fe=a[le],ye=o[le],a.hasOwnProperty(le)&&fe!==ye&&(fe!=null||ye!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(s(137,t));break;default:ht(e,t,le,fe,a,ye)}return;default:if(nl(t)){for(var pt in o)fe=o[pt],o.hasOwnProperty(pt)&&fe!==void 0&&!a.hasOwnProperty(pt)&&qu(e,t,pt,void 0,a,fe);for(be in a)fe=a[be],ye=o[be],!a.hasOwnProperty(be)||fe===ye||fe===void 0&&ye===void 0||qu(e,t,be,fe,a,ye);return}}for(var oe in o)fe=o[oe],o.hasOwnProperty(oe)&&fe!=null&&!a.hasOwnProperty(oe)&&ht(e,t,oe,null,a,fe);for(xe in a)fe=a[xe],ye=o[xe],!a.hasOwnProperty(xe)||fe===ye||fe==null&&ye==null||ht(e,t,xe,fe,a,ye)}function Wm(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Vw(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,o=performance.getEntriesByType("resource"),a=0;a<o.length;a++){var u=o[a],f=u.transferSize,v=u.initiatorType,_=u.duration;if(f&&_&&Wm(v)){for(v=0,_=u.responseEnd,a+=1;a<o.length;a++){var G=o[a],le=G.startTime;if(le>_)break;var be=G.transferSize,xe=G.initiatorType;be&&Wm(xe)&&(G=G.responseEnd,v+=be*(G<_?1:(_-le)/(G-le)))}if(--a,t+=8*(f+v)/(u.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var $u=null,Vu=null;function Ha(e){return e.nodeType===9?e:e.ownerDocument}function Zm(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Gu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Fu=null;function Gw(){var e=window.event;return e&&e.type==="popstate"?e===Fu?!1:(Fu=e,!0):(Fu=null,!1)}var tg=typeof setTimeout=="function"?setTimeout:void 0,Fw=typeof clearTimeout=="function"?clearTimeout:void 0,ng=typeof Promise=="function"?Promise:void 0,Xw=typeof queueMicrotask=="function"?queueMicrotask:typeof ng<"u"?function(e){return ng.resolve(null).then(e).catch(Yw)}:tg;function Yw(e){setTimeout(function(){throw e})}function Lr(e){return e==="head"}function rg(e,t){var o=t,a=0;do{var u=o.nextSibling;if(e.removeChild(o),u&&u.nodeType===8)if(o=u.data,o==="/$"||o==="/&"){if(a===0){e.removeChild(u),ho(t);return}a--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")a++;else if(o==="html")hs(e.ownerDocument.documentElement);else if(o==="head"){o=e.ownerDocument.head,hs(o);for(var f=o.firstChild;f;){var v=f.nextSibling,_=f.nodeName;f[Oo]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&f.rel.toLowerCase()==="stylesheet"||o.removeChild(f),f=v}}else o==="body"&&hs(e.ownerDocument.body);o=u}while(o);ho(t)}function ig(e,t){var o=e;e=0;do{var a=o.nextSibling;if(o.nodeType===1?t?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(t?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),a&&a.nodeType===8)if(o=a.data,o==="/$"){if(e===0)break;e--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||e++;o=a}while(o)}function Xu(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var o=t;switch(t=t.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Xu(o),Wc(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}e.removeChild(o)}}function Jw(e,t,o,a){for(;e.nodeType===1;){var u=o;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!a&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(a){if(!e[Oo])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(f=e.getAttribute("rel"),f==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(f!==u.rel||e.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||e.getAttribute("title")!==(u.title==null?null:u.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(f=e.getAttribute("src"),(f!==(u.src==null?null:u.src)||e.getAttribute("type")!==(u.type==null?null:u.type)||e.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&f&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var f=u.name==null?null:""+u.name;if(u.type==="hidden"&&e.getAttribute("name")===f)return e}else return e;if(e=Dn(e.nextSibling),e===null)break}return null}function Kw(e,t,o){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!o||(e=Dn(e.nextSibling),e===null))return null;return e}function og(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Dn(e.nextSibling),e===null))return null;return e}function Yu(e){return e.data==="$?"||e.data==="$~"}function Ju(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Qw(e,t){var o=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||o.readyState!=="loading")t();else{var a=function(){t(),o.removeEventListener("DOMContentLoaded",a)};o.addEventListener("DOMContentLoaded",a),e._reactRetry=a}}function Dn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Ku=null;function sg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"||o==="/&"){if(t===0)return Dn(e.nextSibling);t--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||t++}e=e.nextSibling}return null}function ag(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(t===0)return e;t--}else o!=="/$"&&o!=="/&"||t++}e=e.previousSibling}return null}function cg(e,t,o){switch(t=Ha(o),e){case"html":if(e=t.documentElement,!e)throw Error(s(452));return e;case"head":if(e=t.head,!e)throw Error(s(453));return e;case"body":if(e=t.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function hs(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Wc(e)}var Pn=new Map,lg=new Set;function qa(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var gr=U.d;U.d={f:Ww,r:Zw,D:eT,C:tT,L:nT,m:rT,X:oT,S:iT,M:sT};function Ww(){var e=gr.f(),t=Ma();return e||t}function Zw(e){var t=Oi(e);t!==null&&t.tag===5&&t.type==="form"?Ep(t):gr.r(e)}var lo=typeof document>"u"?null:document;function ug(e,t,o){var a=lo;if(a&&typeof t=="string"&&t){var u=kn(t);u='link[rel="'+e+'"][href="'+u+'"]',typeof o=="string"&&(u+='[crossorigin="'+o+'"]'),lg.has(u)||(lg.add(u),e={rel:e,crossOrigin:o,href:t},a.querySelector(u)===null&&(t=a.createElement("link"),Gt(t,"link",e),zt(t),a.head.appendChild(t)))}}function eT(e){gr.D(e),ug("dns-prefetch",e,null)}function tT(e,t){gr.C(e,t),ug("preconnect",e,t)}function nT(e,t,o){gr.L(e,t,o);var a=lo;if(a&&e&&t){var u='link[rel="preload"][as="'+kn(t)+'"]';t==="image"&&o&&o.imageSrcSet?(u+='[imagesrcset="'+kn(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(u+='[imagesizes="'+kn(o.imageSizes)+'"]')):u+='[href="'+kn(e)+'"]';var f=u;switch(t){case"style":f=uo(e);break;case"script":f=fo(e)}Pn.has(f)||(e=E({rel:"preload",href:t==="image"&&o&&o.imageSrcSet?void 0:e,as:t},o),Pn.set(f,e),a.querySelector(u)!==null||t==="style"&&a.querySelector(ps(f))||t==="script"&&a.querySelector(ms(f))||(t=a.createElement("link"),Gt(t,"link",e),zt(t),a.head.appendChild(t)))}}function rT(e,t){gr.m(e,t);var o=lo;if(o&&e){var a=t&&typeof t.as=="string"?t.as:"script",u='link[rel="modulepreload"][as="'+kn(a)+'"][href="'+kn(e)+'"]',f=u;switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=fo(e)}if(!Pn.has(f)&&(e=E({rel:"modulepreload",href:e},t),Pn.set(f,e),o.querySelector(u)===null)){switch(a){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(ms(f)))return}a=o.createElement("link"),Gt(a,"link",e),zt(a),o.head.appendChild(a)}}}function iT(e,t,o){gr.S(e,t,o);var a=lo;if(a&&e){var u=ji(a).hoistableStyles,f=uo(e);t=t||"default";var v=u.get(f);if(!v){var _={loading:0,preload:null};if(v=a.querySelector(ps(f)))_.loading=5;else{e=E({rel:"stylesheet",href:e,"data-precedence":t},o),(o=Pn.get(f))&&Qu(e,o);var G=v=a.createElement("link");zt(G),Gt(G,"link",e),G._p=new Promise(function(le,be){G.onload=le,G.onerror=be}),G.addEventListener("load",function(){_.loading|=1}),G.addEventListener("error",function(){_.loading|=2}),_.loading|=4,$a(v,t,a)}v={type:"stylesheet",instance:v,count:1,state:_},u.set(f,v)}}}function oT(e,t){gr.X(e,t);var o=lo;if(o&&e){var a=ji(o).hoistableScripts,u=fo(e),f=a.get(u);f||(f=o.querySelector(ms(u)),f||(e=E({src:e,async:!0},t),(t=Pn.get(u))&&Wu(e,t),f=o.createElement("script"),zt(f),Gt(f,"link",e),o.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},a.set(u,f))}}function sT(e,t){gr.M(e,t);var o=lo;if(o&&e){var a=ji(o).hoistableScripts,u=fo(e),f=a.get(u);f||(f=o.querySelector(ms(u)),f||(e=E({src:e,async:!0,type:"module"},t),(t=Pn.get(u))&&Wu(e,t),f=o.createElement("script"),zt(f),Gt(f,"link",e),o.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},a.set(u,f))}}function dg(e,t,o,a){var u=(u=A.current)?qa(u):null;if(!u)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(t=uo(o.href),o=ji(u).hoistableStyles,a=o.get(t),a||(a={type:"style",instance:null,count:0,state:null},o.set(t,a)),a):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){e=uo(o.href);var f=ji(u).hoistableStyles,v=f.get(e);if(v||(u=u.ownerDocument||u,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(e,v),(f=u.querySelector(ps(e)))&&!f._p&&(v.instance=f,v.state.loading=5),Pn.has(e)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},Pn.set(e,o),f||aT(u,e,o,v.state))),t&&a===null)throw Error(s(528,""));return v}if(t&&a!==null)throw Error(s(529,""));return null;case"script":return t=o.async,o=o.src,typeof o=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=fo(o),o=ji(u).hoistableScripts,a=o.get(t),a||(a={type:"script",instance:null,count:0,state:null},o.set(t,a)),a):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function uo(e){return'href="'+kn(e)+'"'}function ps(e){return'link[rel="stylesheet"]['+e+"]"}function fg(e){return E({},e,{"data-precedence":e.precedence,precedence:null})}function aT(e,t,o,a){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?a.loading=1:(t=e.createElement("link"),a.preload=t,t.addEventListener("load",function(){return a.loading|=1}),t.addEventListener("error",function(){return a.loading|=2}),Gt(t,"link",o),zt(t),e.head.appendChild(t))}function fo(e){return'[src="'+kn(e)+'"]'}function ms(e){return"script[async]"+e}function hg(e,t,o){if(t.count++,t.instance===null)switch(t.type){case"style":var a=e.querySelector('style[data-href~="'+kn(o.href)+'"]');if(a)return t.instance=a,zt(a),a;var u=E({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return a=(e.ownerDocument||e).createElement("style"),zt(a),Gt(a,"style",u),$a(a,o.precedence,e),t.instance=a;case"stylesheet":u=uo(o.href);var f=e.querySelector(ps(u));if(f)return t.state.loading|=4,t.instance=f,zt(f),f;a=fg(o),(u=Pn.get(u))&&Qu(a,u),f=(e.ownerDocument||e).createElement("link"),zt(f);var v=f;return v._p=new Promise(function(_,G){v.onload=_,v.onerror=G}),Gt(f,"link",a),t.state.loading|=4,$a(f,o.precedence,e),t.instance=f;case"script":return f=fo(o.src),(u=e.querySelector(ms(f)))?(t.instance=u,zt(u),u):(a=o,(u=Pn.get(f))&&(a=E({},o),Wu(a,u)),e=e.ownerDocument||e,u=e.createElement("script"),zt(u),Gt(u,"link",a),e.head.appendChild(u),t.instance=u);case"void":return null;default:throw Error(s(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(a=t.instance,t.state.loading|=4,$a(a,o.precedence,e));return t.instance}function $a(e,t,o){for(var a=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=a.length?a[a.length-1]:null,f=u,v=0;v<a.length;v++){var _=a[v];if(_.dataset.precedence===t)f=_;else if(f!==u)break}f?f.parentNode.insertBefore(e,f.nextSibling):(t=o.nodeType===9?o.head:o,t.insertBefore(e,t.firstChild))}function Qu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Wu(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Va=null;function pg(e,t,o){if(Va===null){var a=new Map,u=Va=new Map;u.set(o,a)}else u=Va,a=u.get(o),a||(a=new Map,u.set(o,a));if(a.has(e))return a;for(a.set(e,null),o=o.getElementsByTagName(e),u=0;u<o.length;u++){var f=o[u];if(!(f[Oo]||f[Ht]||e==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var v=f.getAttribute(t)||"";v=e+v;var _=a.get(v);_?_.push(f):a.set(v,[f])}}return a}function mg(e,t,o){e=e.ownerDocument||e,e.head.insertBefore(o,t==="title"?e.querySelector("head > title"):null)}function cT(e,t,o){if(o===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;return t.rel==="stylesheet"?(e=t.disabled,typeof t.precedence=="string"&&e==null):!0;case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function gg(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function lT(e,t,o,a){if(o.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var u=uo(a.href),f=t.querySelector(ps(u));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ga.bind(e),t.then(e,e)),o.state.loading|=4,o.instance=f,zt(f);return}f=t.ownerDocument||t,a=fg(a),(u=Pn.get(u))&&Qu(a,u),f=f.createElement("link"),zt(f);var v=f;v._p=new Promise(function(_,G){v.onload=_,v.onerror=G}),Gt(f,"link",a),o.instance=f}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(o,t),(t=o.state.preload)&&(o.state.loading&3)===0&&(e.count++,o=Ga.bind(e),t.addEventListener("load",o),t.addEventListener("error",o))}}var Zu=0;function uT(e,t){return e.stylesheets&&e.count===0&&Xa(e,e.stylesheets),0<e.count||0<e.imgCount?function(o){var a=setTimeout(function(){if(e.stylesheets&&Xa(e,e.stylesheets),e.unsuspend){var f=e.unsuspend;e.unsuspend=null,f()}},6e4+t);0<e.imgBytes&&Zu===0&&(Zu=62500*Vw());var u=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Xa(e,e.stylesheets),e.unsuspend)){var f=e.unsuspend;e.unsuspend=null,f()}},(e.imgBytes>Zu?50:800)+t);return e.unsuspend=o,function(){e.unsuspend=null,clearTimeout(a),clearTimeout(u)}}:null}function Ga(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Xa(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Fa=null;function Xa(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Fa=new Map,t.forEach(dT,e),Fa=null,Ga.call(e))}function dT(e,t){if(!(t.state.loading&4)){var o=Fa.get(e);if(o)var a=o.get(null);else{o=new Map,Fa.set(e,o);for(var u=e.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<u.length;f++){var v=u[f];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(o.set(v.dataset.precedence,v),a=v)}a&&o.set(null,a)}u=t.instance,v=u.getAttribute("data-precedence"),f=o.get(v)||a,f===a&&o.set(null,u),o.set(v,u),this.count++,a=Ga.bind(this),u.addEventListener("load",a),u.addEventListener("error",a),f?f.parentNode.insertBefore(u,f.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(u,e.firstChild)),t.state.loading|=4}}var gs={$$typeof:pe,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function fT(e,t,o,a,u,f,v,_,G){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yc(0),this.hiddenUpdates=Yc(null),this.identifierPrefix=a,this.onUncaughtError=u,this.onCaughtError=f,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=G,this.incompleteTransitions=new Map}function yg(e,t,o,a,u,f,v,_,G,le,be,xe){return e=new fT(e,t,o,v,G,le,be,xe,_),t=1,f===!0&&(t|=24),f=bn(3,null,null,t),e.current=f,f.stateNode=e,t=jl(),t.refCount++,e.pooledCache=t,t.refCount++,f.memoizedState={element:a,isDehydrated:o,cache:t},Pl(f),e}function vg(e){return e?(e=qi,e):qi}function bg(e,t,o,a,u,f){u=vg(u),a.context===null?a.context=u:a.pendingContext=u,a=kr(t),a.payload={element:o},f=f===void 0?null:f,f!==null&&(a.callback=f),o=Ar(e,a,t),o!==null&&(hn(o,e,t),Yo(o,e,t))}function Sg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<t?o:t}}function ed(e,t){Sg(e,t),(e=e.alternate)&&Sg(e,t)}function wg(e){if(e.tag===13||e.tag===31){var t=oi(e,67108864);t!==null&&hn(t,e,67108864),ed(e,67108864)}}function Tg(e){if(e.tag===13||e.tag===31){var t=xn();t=Jc(t);var o=oi(e,t);o!==null&&hn(o,e,t),ed(e,t)}}var Ya=!0;function hT(e,t,o,a){var u=q.T;q.T=null;var f=U.p;try{U.p=2,td(e,t,o,a)}finally{U.p=f,q.T=u}}function pT(e,t,o,a){var u=q.T;q.T=null;var f=U.p;try{U.p=8,td(e,t,o,a)}finally{U.p=f,q.T=u}}function td(e,t,o,a){if(Ya){var u=nd(a);if(u===null)Hu(e,t,a,Ja,o),xg(e,a);else if(gT(u,e,t,o,a))a.stopPropagation();else if(xg(e,a),t&4&&-1<mT.indexOf(e)){for(;u!==null;){var f=Oi(u);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var v=ei(f.pendingLanes);if(v!==0){var _=f;for(_.pendingLanes|=2,_.entangledLanes|=2;v;){var G=1<<31-Be(v);_.entanglements[1]|=G,v&=~G}Yn(f),(at&6)===0&&(Oa=$e()+500,us(0))}}break;case 31:case 13:_=oi(f,2),_!==null&&hn(_,f,2),Ma(),ed(f,2)}if(f=nd(a),f===null&&Hu(e,t,a,Ja,o),f===u)break;u=f}u!==null&&a.stopPropagation()}else Hu(e,t,a,null,o)}}function nd(e){return e=il(e),rd(e)}var Ja=null;function rd(e){if(Ja=null,e=Ni(e),e!==null){var t=l(e);if(t===null)e=null;else{var o=t.tag;if(o===13){if(e=d(t),e!==null)return e;e=null}else if(o===31){if(e=p(t),e!==null)return e;e=null}else if(o===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ja=e,null}function Cg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qe()){case O:return 2;case T:return 8;case D:case te:return 32;case $:return 268435456;default:return 32}default:return 32}}var id=!1,Br=null,Hr=null,qr=null,ys=new Map,vs=new Map,$r=[],mT="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function xg(e,t){switch(e){case"focusin":case"focusout":Br=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":qr=null;break;case"pointerover":case"pointerout":ys.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vs.delete(t.pointerId)}}function bs(e,t,o,a,u,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:o,eventSystemFlags:a,nativeEvent:f,targetContainers:[u]},t!==null&&(t=Oi(t),t!==null&&wg(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,u!==null&&t.indexOf(u)===-1&&t.push(u),e)}function gT(e,t,o,a,u){switch(t){case"focusin":return Br=bs(Br,e,t,o,a,u),!0;case"dragenter":return Hr=bs(Hr,e,t,o,a,u),!0;case"mouseover":return qr=bs(qr,e,t,o,a,u),!0;case"pointerover":var f=u.pointerId;return ys.set(f,bs(ys.get(f)||null,e,t,o,a,u)),!0;case"gotpointercapture":return f=u.pointerId,vs.set(f,bs(vs.get(f)||null,e,t,o,a,u)),!0}return!1}function Rg(e){var t=Ni(e.target);if(t!==null){var o=l(t);if(o!==null){if(t=o.tag,t===13){if(t=d(o),t!==null){e.blockedOn=t,Lf(e.priority,function(){Tg(o)});return}}else if(t===31){if(t=p(o),t!==null){e.blockedOn=t,Lf(e.priority,function(){Tg(o)});return}}else if(t===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ka(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var o=nd(e.nativeEvent);if(o===null){o=e.nativeEvent;var a=new o.constructor(o.type,o);rl=a,o.target.dispatchEvent(a),rl=null}else return t=Oi(o),t!==null&&wg(t),e.blockedOn=o,!1;t.shift()}return!0}function Eg(e,t,o){Ka(e)&&o.delete(t)}function yT(){id=!1,Br!==null&&Ka(Br)&&(Br=null),Hr!==null&&Ka(Hr)&&(Hr=null),qr!==null&&Ka(qr)&&(qr=null),ys.forEach(Eg),vs.forEach(Eg)}function Qa(e,t){e.blockedOn===t&&(e.blockedOn=null,id||(id=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,yT)))}var Wa=null;function _g(e){Wa!==e&&(Wa=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Wa===e&&(Wa=null);for(var t=0;t<e.length;t+=3){var o=e[t],a=e[t+1],u=e[t+2];if(typeof a!="function"){if(rd(a||o)===null)continue;break}var f=Oi(o);f!==null&&(e.splice(t,3),t-=3,nu(f,{pending:!0,data:u,method:o.method,action:a},a,u))}}))}function ho(e){function t(G){return Qa(G,e)}Br!==null&&Qa(Br,e),Hr!==null&&Qa(Hr,e),qr!==null&&Qa(qr,e),ys.forEach(t),vs.forEach(t);for(var o=0;o<$r.length;o++){var a=$r[o];a.blockedOn===e&&(a.blockedOn=null)}for(;0<$r.length&&(o=$r[0],o.blockedOn===null);)Rg(o),o.blockedOn===null&&$r.shift();if(o=(e.ownerDocument||e).$$reactFormReplay,o!=null)for(a=0;a<o.length;a+=3){var u=o[a],f=o[a+1],v=u[an]||null;if(typeof f=="function")v||_g(o);else if(v){var _=null;if(f&&f.hasAttribute("formAction")){if(u=f,v=f[an]||null)_=v.formAction;else if(rd(u)!==null)continue}else _=v.action;typeof _=="function"?o[a+1]=_:(o.splice(a,3),a-=3),_g(o)}}}function kg(){function e(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(v){return u=v})},focusReset:"manual",scroll:"manual"})}function t(){u!==null&&(u(),u=null),a||setTimeout(o,20)}function o(){if(!a&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var a=!1,u=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(o,100),function(){a=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),u!==null&&(u(),u=null)}}}function od(e){this._internalRoot=e}Za.prototype.render=od.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(s(409));var o=t.current,a=xn();bg(o,a,e,t,null,null)},Za.prototype.unmount=od.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;bg(e.current,2,null,e,null,null),Ma(),t[Ai]=null}};function Za(e){this._internalRoot=e}Za.prototype.unstable_scheduleHydration=function(e){if(e){var t=zf();e={blockedOn:null,target:e,priority:t};for(var o=0;o<$r.length&&t!==0&&t<$r[o].priority;o++);$r.splice(o,0,e),o===0&&Rg(e)}};var Ag=n.version;if(Ag!=="19.2.3")throw Error(s(527,Ag,"19.2.3"));U.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=g(t),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var vT={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ec.isDisabled&&ec.supportsFiber)try{ze=ec.inject(vT),je=ec}catch{}}return ws.createRoot=function(e,t){if(!c(e))throw Error(s(299));var o=!1,a="",u=Pp,f=Ip,v=zp;return t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onUncaughtError!==void 0&&(u=t.onUncaughtError),t.onCaughtError!==void 0&&(f=t.onCaughtError),t.onRecoverableError!==void 0&&(v=t.onRecoverableError)),t=yg(e,1,!1,null,null,o,a,null,u,f,v,kg),e[Ai]=t.current,Bu(e),new od(t)},ws.hydrateRoot=function(e,t,o){if(!c(e))throw Error(s(299));var a=!1,u="",f=Pp,v=Ip,_=zp,G=null;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(f=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(_=o.onRecoverableError),o.formState!==void 0&&(G=o.formState)),t=yg(e,1,!0,t,o??null,a,u,G,f,v,_,kg),t.context=vg(null),o=t.current,a=xn(),a=Jc(a),u=kr(a),u.callback=null,Ar(o,u,a),o=a,t.current.lanes=o,No(t,o),Yn(t),e[Ai]=t.current,Bu(e),new Za(t)},ws.version="19.2.3",ws}var Bg;function kT(){if(Bg)return cd.exports;Bg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),cd.exports=_T(),cd.exports}var AT=kT();var Hg="popstate";function NT(r={}){function n(s,c){let{pathname:l,search:d,hash:p}=s.location;return jd("",{pathname:l,search:d,hash:p},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function i(s,c){return typeof c=="string"?c:As(c)}return jT(n,i,null,r)}function St(r,n){if(r===!1||r===null||typeof r>"u")throw new Error(n)}function In(r,n){if(!r){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function OT(){return Math.random().toString(36).substring(2,10)}function qg(r,n){return{usr:r.state,key:r.key,idx:n}}function jd(r,n,i=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof n=="string"?To(n):n,state:i,key:n&&n.key||s||OT()}}function As({pathname:r="/",search:n="",hash:i=""}){return n&&n!=="?"&&(r+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(r+=i.charAt(0)==="#"?i:"#"+i),r}function To(r){let n={};if(r){let i=r.indexOf("#");i>=0&&(n.hash=r.substring(i),r=r.substring(0,i));let s=r.indexOf("?");s>=0&&(n.search=r.substring(s),r=r.substring(0,s)),r&&(n.pathname=r)}return n}function jT(r,n,i,s={}){let{window:c=document.defaultView,v5Compat:l=!1}=s,d=c.history,p="POP",m=null,g=y();g==null&&(g=0,d.replaceState({...d.state,idx:g},""));function y(){return(d.state||{idx:null}).idx}function E(){p="POP";let J=y(),de=J==null?null:J-g;g=J,m&&m({action:p,location:ee.location,delta:de})}function I(J,de){p="PUSH";let ue=jd(ee.location,J,de);g=y()+1;let pe=qg(ue,g),F=ee.createHref(ue);try{d.pushState(pe,"",F)}catch(ne){if(ne instanceof DOMException&&ne.name==="DataCloneError")throw ne;c.location.assign(F)}l&&m&&m({action:p,location:ee.location,delta:1})}function Y(J,de){p="REPLACE";let ue=jd(ee.location,J,de);g=y();let pe=qg(ue,g),F=ee.createHref(ue);d.replaceState(pe,"",F),l&&m&&m({action:p,location:ee.location,delta:0})}function M(J){return MT(J)}let ee={get action(){return p},get location(){return r(c,d)},listen(J){if(m)throw new Error("A history only accepts one active listener");return c.addEventListener(Hg,E),m=J,()=>{c.removeEventListener(Hg,E),m=null}},createHref(J){return n(c,J)},createURL:M,encodeLocation(J){let de=M(J);return{pathname:de.pathname,search:de.search,hash:de.hash}},push:I,replace:Y,go(J){return d.go(J)}};return ee}function MT(r,n=!1){let i="http://localhost";typeof window<"u"&&(i=window.location.origin!=="null"?window.location.origin:window.location.href),St(i,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:As(r);return s=s.replace(/ $/,"%20"),!n&&s.startsWith("//")&&(s=i+s),new URL(s,i)}function Qy(r,n,i="/"){return UT(r,n,i,!1)}function UT(r,n,i,s){let c=typeof n=="string"?To(n):n,l=br(c.pathname||"/",i);if(l==null)return null;let d=Wy(r);DT(d);let p=null;for(let m=0;p==null&&m<d.length;++m){let g=FT(l);p=VT(d[m],g,s)}return p}function Wy(r,n=[],i=[],s="",c=!1){let l=(d,p,m=c,g)=>{let y={relativePath:g===void 0?d.path||"":g,caseSensitive:d.caseSensitive===!0,childrenIndex:p,route:d};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(s)&&m)return;St(y.relativePath.startsWith(s),`Absolute route path "${y.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(s.length)}let E=vr([s,y.relativePath]),I=i.concat(y);d.children&&d.children.length>0&&(St(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),Wy(d.children,n,I,E,m)),!(d.path==null&&!d.index)&&n.push({path:E,score:qT(E,d.index),routesMeta:I})};return r.forEach((d,p)=>{if(d.path===""||!d.path?.includes("?"))l(d,p);else for(let m of Zy(d.path))l(d,p,!0,m)}),n}function Zy(r){let n=r.split("/");if(n.length===0)return[];let[i,...s]=n,c=i.endsWith("?"),l=i.replace(/\?$/,"");if(s.length===0)return c?[l,""]:[l];let d=Zy(s.join("/")),p=[];return p.push(...d.map(m=>m===""?l:[l,m].join("/"))),c&&p.push(...d),p.map(m=>r.startsWith("/")&&m===""?"/":m)}function DT(r){r.sort((n,i)=>n.score!==i.score?i.score-n.score:$T(n.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}var PT=/^:[\w-]+$/,IT=3,zT=2,LT=1,BT=10,HT=-2,$g=r=>r==="*";function qT(r,n){let i=r.split("/"),s=i.length;return i.some($g)&&(s+=HT),n&&(s+=zT),i.filter(c=>!$g(c)).reduce((c,l)=>c+(PT.test(l)?IT:l===""?LT:BT),s)}function $T(r,n){return r.length===n.length&&r.slice(0,-1).every((s,c)=>s===n[c])?r[r.length-1]-n[n.length-1]:0}function VT(r,n,i=!1){let{routesMeta:s}=r,c={},l="/",d=[];for(let p=0;p<s.length;++p){let m=s[p],g=p===s.length-1,y=l==="/"?n:n.slice(l.length)||"/",E=gc({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},y),I=m.route;if(!E&&g&&i&&!s[s.length-1].route.index&&(E=gc({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!E)return null;Object.assign(c,E.params),d.push({params:c,pathname:vr([l,E.pathname]),pathnameBase:KT(vr([l,E.pathnameBase])),route:I}),E.pathnameBase!=="/"&&(l=vr([l,E.pathnameBase]))}return d}function gc(r,n){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[i,s]=GT(r.path,r.caseSensitive,r.end),c=n.match(i);if(!c)return null;let l=c[0],d=l.replace(/(.)\/+$/,"$1"),p=c.slice(1);return{params:s.reduce((g,{paramName:y,isOptional:E},I)=>{if(y==="*"){let M=p[I]||"";d=l.slice(0,l.length-M.length).replace(/(.)\/+$/,"$1")}const Y=p[I];return E&&!Y?g[y]=void 0:g[y]=(Y||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:d,pattern:r}}function GT(r,n=!1,i=!0){In(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],c="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,p,m)=>(s.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(s.push({paramName:"*"}),c+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?c+="\\/*$":r!==""&&r!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,n?void 0:"i"),s]}function FT(r){try{return r.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return In(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),r}}function br(r,n){if(n==="/")return r;if(!r.toLowerCase().startsWith(n.toLowerCase()))return null;let i=n.endsWith("/")?n.length-1:n.length,s=r.charAt(i);return s&&s!=="/"?null:r.slice(i)||"/"}var ev=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,XT=r=>ev.test(r);function YT(r,n="/"){let{pathname:i,search:s="",hash:c=""}=typeof r=="string"?To(r):r,l;if(i)if(XT(i))l=i;else{if(i.includes("//")){let d=i;i=i.replace(/\/\/+/g,"/"),In(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${i}`)}i.startsWith("/")?l=Vg(i.substring(1),"/"):l=Vg(i,n)}else l=n;return{pathname:l,search:QT(s),hash:WT(c)}}function Vg(r,n){let i=n.replace(/\/+$/,"").split("/");return r.split("/").forEach(c=>{c===".."?i.length>1&&i.pop():c!=="."&&i.push(c)}),i.length>1?i.join("/"):"/"}function fd(r,n,i,s){return`Cannot include a '${r}' character in a manually specified \`to.${n}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function JT(r){return r.filter((n,i)=>i===0||n.route.path&&n.route.path.length>0)}function Jd(r){let n=JT(r);return n.map((i,s)=>s===n.length-1?i.pathname:i.pathnameBase)}function Kd(r,n,i,s=!1){let c;typeof r=="string"?c=To(r):(c={...r},St(!c.pathname||!c.pathname.includes("?"),fd("?","pathname","search",c)),St(!c.pathname||!c.pathname.includes("#"),fd("#","pathname","hash",c)),St(!c.search||!c.search.includes("#"),fd("#","search","hash",c)));let l=r===""||c.pathname==="",d=l?"/":c.pathname,p;if(d==null)p=i;else{let E=n.length-1;if(!s&&d.startsWith("..")){let I=d.split("/");for(;I[0]==="..";)I.shift(),E-=1;c.pathname=I.join("/")}p=E>=0?n[E]:"/"}let m=YT(c,p),g=d&&d!=="/"&&d.endsWith("/"),y=(l||d===".")&&i.endsWith("/");return!m.pathname.endsWith("/")&&(g||y)&&(m.pathname+="/"),m}var vr=r=>r.join("/").replace(/\/\/+/g,"/"),KT=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),QT=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,WT=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,ZT=class{constructor(r,n,i,s=!1){this.status=r,this.statusText=n||"",this.internal=s,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function eC(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function tC(r){return r.map(n=>n.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var tv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function nv(r,n){let i=r;if(typeof i!="string"||!ev.test(i))return{absoluteURL:void 0,isExternal:!1,to:i};let s=i,c=!1;if(tv)try{let l=new URL(window.location.href),d=i.startsWith("//")?new URL(l.protocol+i):new URL(i),p=br(d.pathname,n);d.origin===l.origin&&p!=null?i=p+d.search+d.hash:c=!0}catch{In(!1,`<Link to="${i}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:c,to:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var rv=["POST","PUT","PATCH","DELETE"];new Set(rv);var nC=["GET",...rv];new Set(nC);var Co=z.createContext(null);Co.displayName="DataRouter";var Ec=z.createContext(null);Ec.displayName="DataRouterState";var rC=z.createContext(!1),iv=z.createContext({isTransitioning:!1});iv.displayName="ViewTransition";var iC=z.createContext(new Map);iC.displayName="Fetchers";var oC=z.createContext(null);oC.displayName="Await";var En=z.createContext(null);En.displayName="Navigation";var Ms=z.createContext(null);Ms.displayName="Location";var $n=z.createContext({outlet:null,matches:[],isDataRoute:!1});$n.displayName="Route";var Qd=z.createContext(null);Qd.displayName="RouteError";var ov="REACT_ROUTER_ERROR",sC="REDIRECT",aC="ROUTE_ERROR_RESPONSE";function cC(r){if(r.startsWith(`${ov}:${sC}:{`))try{let n=JSON.parse(r.slice(28));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.location=="string"&&typeof n.reloadDocument=="boolean"&&typeof n.replace=="boolean")return n}catch{}}function lC(r){if(r.startsWith(`${ov}:${aC}:{`))try{let n=JSON.parse(r.slice(40));if(typeof n=="object"&&n&&typeof n.status=="number"&&typeof n.statusText=="string")return new ZT(n.status,n.statusText,n.data)}catch{}}function uC(r,{relative:n}={}){St(xo(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:s}=z.useContext(En),{hash:c,pathname:l,search:d}=Us(r,{relative:n}),p=l;return i!=="/"&&(p=l==="/"?i:vr([i,l])),s.createHref({pathname:p,search:d,hash:c})}function xo(){return z.useContext(Ms)!=null}function Wn(){return St(xo(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(Ms).location}var sv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function av(r){z.useContext(En).static||z.useLayoutEffect(r)}function Wr(){let{isDataRoute:r}=z.useContext($n);return r?CC():dC()}function dC(){St(xo(),"useNavigate() may be used only in the context of a <Router> component.");let r=z.useContext(Co),{basename:n,navigator:i}=z.useContext(En),{matches:s}=z.useContext($n),{pathname:c}=Wn(),l=JSON.stringify(Jd(s)),d=z.useRef(!1);return av(()=>{d.current=!0}),z.useCallback((m,g={})=>{if(In(d.current,sv),!d.current)return;if(typeof m=="number"){i.go(m);return}let y=Kd(m,JSON.parse(l),c,g.relative==="path");r==null&&n!=="/"&&(y.pathname=y.pathname==="/"?n:vr([n,y.pathname])),(g.replace?i.replace:i.push)(y,g.state,g)},[n,i,l,c,r])}z.createContext(null);function cv(){let{matches:r}=z.useContext($n),n=r[r.length-1];return n?n.params:{}}function Us(r,{relative:n}={}){let{matches:i}=z.useContext($n),{pathname:s}=Wn(),c=JSON.stringify(Jd(i));return z.useMemo(()=>Kd(r,JSON.parse(c),s,n==="path"),[r,c,s,n])}function fC(r,n){return lv(r,n)}function lv(r,n,i,s,c){St(xo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=z.useContext(En),{matches:d}=z.useContext($n),p=d[d.length-1],m=p?p.params:{},g=p?p.pathname:"/",y=p?p.pathnameBase:"/",E=p&&p.route;{let ue=E&&E.path||"";dv(g,!E||ue.endsWith("*")||ue.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${ue}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${ue}"> to <Route path="${ue==="/"?"*":`${ue}/*`}">.`)}let I=Wn(),Y;if(n){let ue=typeof n=="string"?To(n):n;St(y==="/"||ue.pathname?.startsWith(y),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${ue.pathname}" was given in the \`location\` prop.`),Y=ue}else Y=I;let M=Y.pathname||"/",ee=M;if(y!=="/"){let ue=y.replace(/^\//,"").split("/");ee="/"+M.replace(/^\//,"").split("/").slice(ue.length).join("/")}let J=Qy(r,{pathname:ee});In(E||J!=null,`No routes matched location "${Y.pathname}${Y.search}${Y.hash}" `),In(J==null||J[J.length-1].route.element!==void 0||J[J.length-1].route.Component!==void 0||J[J.length-1].route.lazy!==void 0,`Matched leaf route at location "${Y.pathname}${Y.search}${Y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let de=yC(J&&J.map(ue=>Object.assign({},ue,{params:Object.assign({},m,ue.params),pathname:vr([y,l.encodeLocation?l.encodeLocation(ue.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ue.pathname]),pathnameBase:ue.pathnameBase==="/"?y:vr([y,l.encodeLocation?l.encodeLocation(ue.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:ue.pathnameBase])})),d,i,s,c);return n&&de?z.createElement(Ms.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...Y},navigationType:"POP"}},de):de}function hC(){let r=TC(),n=eC(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),i=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",c={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",r),d=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:l},"ErrorBoundary")," or"," ",z.createElement("code",{style:l},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},n),i?z.createElement("pre",{style:c},i):null,d)}var pC=z.createElement(hC,null),uv=class extends z.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,n){return n.location!==r.location||n.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:n.error,location:n.location,revalidation:r.revalidation||n.revalidation}}componentDidCatch(r,n){this.props.onError?this.props.onError(r,n):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const i=lC(r.digest);i&&(r=i)}let n=r!==void 0?z.createElement($n.Provider,{value:this.props.routeContext},z.createElement(Qd.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?z.createElement(mC,{error:r},n):n}};uv.contextType=rC;var hd=new WeakMap;function mC({children:r,error:n}){let{basename:i}=z.useContext(En);if(typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){let s=cC(n.digest);if(s){let c=hd.get(n);if(c)throw c;let l=nv(s.location,i);if(tv&&!hd.get(n))if(l.isExternal||s.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:s.replace}));throw hd.set(n,d),d}return z.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return r}function gC({routeContext:r,match:n,children:i}){let s=z.useContext(Co);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),z.createElement($n.Provider,{value:r},i)}function yC(r,n=[],i=null,s=null,c=null){if(r==null){if(!i)return null;if(i.errors)r=i.matches;else if(n.length===0&&!i.initialized&&i.matches.length>0)r=i.matches;else return null}let l=r,d=i?.errors;if(d!=null){let y=l.findIndex(E=>E.route.id&&d?.[E.route.id]!==void 0);St(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let p=!1,m=-1;if(i)for(let y=0;y<l.length;y++){let E=l[y];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(m=y),E.route.id){let{loaderData:I,errors:Y}=i,M=E.route.loader&&!I.hasOwnProperty(E.route.id)&&(!Y||Y[E.route.id]===void 0);if(E.route.lazy||M){p=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let g=i&&s?(y,E)=>{s(y,{location:i.location,params:i.matches?.[0]?.params??{},unstable_pattern:tC(i.matches),errorInfo:E})}:void 0;return l.reduceRight((y,E,I)=>{let Y,M=!1,ee=null,J=null;i&&(Y=d&&E.route.id?d[E.route.id]:void 0,ee=E.route.errorElement||pC,p&&(m<0&&I===0?(dv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),M=!0,J=null):m===I&&(M=!0,J=E.route.hydrateFallbackElement||null)));let de=n.concat(l.slice(0,I+1)),ue=()=>{let pe;return Y?pe=ee:M?pe=J:E.route.Component?pe=z.createElement(E.route.Component,null):E.route.element?pe=E.route.element:pe=y,z.createElement(gC,{match:E,routeContext:{outlet:y,matches:de,isDataRoute:i!=null},children:pe})};return i&&(E.route.ErrorBoundary||E.route.errorElement||I===0)?z.createElement(uv,{location:i.location,revalidation:i.revalidation,component:ee,error:Y,children:ue(),routeContext:{outlet:null,matches:de,isDataRoute:!0},onError:g}):ue()},null)}function Wd(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vC(r){let n=z.useContext(Co);return St(n,Wd(r)),n}function bC(r){let n=z.useContext(Ec);return St(n,Wd(r)),n}function SC(r){let n=z.useContext($n);return St(n,Wd(r)),n}function Zd(r){let n=SC(r),i=n.matches[n.matches.length-1];return St(i.route.id,`${r} can only be used on routes that contain a unique "id"`),i.route.id}function wC(){return Zd("useRouteId")}function TC(){let r=z.useContext(Qd),n=bC("useRouteError"),i=Zd("useRouteError");return r!==void 0?r:n.errors?.[i]}function CC(){let{router:r}=vC("useNavigate"),n=Zd("useNavigate"),i=z.useRef(!1);return av(()=>{i.current=!0}),z.useCallback(async(c,l={})=>{In(i.current,sv),i.current&&(typeof c=="number"?await r.navigate(c):await r.navigate(c,{fromRouteId:n,...l}))},[r,n])}var Gg={};function dv(r,n,i){!n&&!Gg[r]&&(Gg[r]=!0,In(!1,i))}z.memo(xC);function xC({routes:r,future:n,state:i,onError:s}){return lv(r,void 0,i,s,n)}function yr({to:r,replace:n,state:i,relative:s}){St(xo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:c}=z.useContext(En);In(!c,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=z.useContext($n),{pathname:d}=Wn(),p=Wr(),m=Kd(r,Jd(l),d,s==="path"),g=JSON.stringify(m);return z.useEffect(()=>{p(JSON.parse(g),{replace:n,state:i,relative:s})},[p,g,s,n,i]),null}function pn(r){St(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function RC({basename:r="/",children:n=null,location:i,navigationType:s="POP",navigator:c,static:l=!1,unstable_useTransitions:d}){St(!xo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=r.replace(/^\/*/,"/"),m=z.useMemo(()=>({basename:p,navigator:c,static:l,unstable_useTransitions:d,future:{}}),[p,c,l,d]);typeof i=="string"&&(i=To(i));let{pathname:g="/",search:y="",hash:E="",state:I=null,key:Y="default"}=i,M=z.useMemo(()=>{let ee=br(g,p);return ee==null?null:{location:{pathname:ee,search:y,hash:E,state:I,key:Y},navigationType:s}},[p,g,y,E,I,Y,s]);return In(M!=null,`<Router basename="${p}"> is not able to match the URL "${g}${y}${E}" because it does not start with the basename, so the <Router> won't render anything.`),M==null?null:z.createElement(En.Provider,{value:m},z.createElement(Ms.Provider,{children:n,value:M}))}function EC({children:r,location:n}){return fC(Md(r),n)}function Md(r,n=[]){let i=[];return z.Children.forEach(r,(s,c)=>{if(!z.isValidElement(s))return;let l=[...n,c];if(s.type===z.Fragment){i.push.apply(i,Md(s.props.children,l));return}St(s.type===pn,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),St(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=Md(s.props.children,l)),i.push(d)}),i}var uc="get",dc="application/x-www-form-urlencoded";function _c(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function _C(r){return _c(r)&&r.tagName.toLowerCase()==="button"}function kC(r){return _c(r)&&r.tagName.toLowerCase()==="form"}function AC(r){return _c(r)&&r.tagName.toLowerCase()==="input"}function NC(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function OC(r,n){return r.button===0&&(!n||n==="_self")&&!NC(r)}var tc=null;function jC(){if(tc===null)try{new FormData(document.createElement("form"),0),tc=!1}catch{tc=!0}return tc}var MC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function pd(r){return r!=null&&!MC.has(r)?(In(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dc}"`),null):r}function UC(r,n){let i,s,c,l,d;if(kC(r)){let p=r.getAttribute("action");s=p?br(p,n):null,i=r.getAttribute("method")||uc,c=pd(r.getAttribute("enctype"))||dc,l=new FormData(r)}else if(_C(r)||AC(r)&&(r.type==="submit"||r.type==="image")){let p=r.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=r.getAttribute("formaction")||p.getAttribute("action");if(s=m?br(m,n):null,i=r.getAttribute("formmethod")||p.getAttribute("method")||uc,c=pd(r.getAttribute("formenctype"))||pd(p.getAttribute("enctype"))||dc,l=new FormData(p,r),!jC()){let{name:g,type:y,value:E}=r;if(y==="image"){let I=g?`${g}.`:"";l.append(`${I}x`,"0"),l.append(`${I}y`,"0")}else g&&l.append(g,E)}}else{if(_c(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=uc,s=null,c=dc,d=r}return l&&c==="text/plain"&&(d=l,l=void 0),{action:s,method:i.toLowerCase(),encType:c,formData:l,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ef(r,n){if(r===!1||r===null||typeof r>"u")throw new Error(n)}function DC(r,n,i){let s=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return s.pathname==="/"?s.pathname=`_root.${i}`:n&&br(s.pathname,n)==="/"?s.pathname=`${n.replace(/\/$/,"")}/_root.${i}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${i}`,s}async function PC(r,n){if(r.id in n)return n[r.id];try{let i=await import(r.module);return n[r.id]=i,i}catch(i){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function IC(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function zC(r,n,i){let s=await Promise.all(r.map(async c=>{let l=n.routes[c.route.id];if(l){let d=await PC(l,i);return d.links?d.links():[]}return[]}));return qC(s.flat(1).filter(IC).filter(c=>c.rel==="stylesheet"||c.rel==="preload").map(c=>c.rel==="stylesheet"?{...c,rel:"prefetch",as:"style"}:{...c,rel:"prefetch"}))}function Fg(r,n,i,s,c,l){let d=(m,g)=>i[g]?m.route.id!==i[g].route.id:!0,p=(m,g)=>i[g].pathname!==m.pathname||i[g].route.path?.endsWith("*")&&i[g].params["*"]!==m.params["*"];return l==="assets"?n.filter((m,g)=>d(m,g)||p(m,g)):l==="data"?n.filter((m,g)=>{let y=s.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(d(m,g)||p(m,g))return!0;if(m.route.shouldRevalidate){let E=m.route.shouldRevalidate({currentUrl:new URL(c.pathname+c.search+c.hash,window.origin),currentParams:i[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function LC(r,n,{includeHydrateFallback:i}={}){return BC(r.map(s=>{let c=n.routes[s.route.id];if(!c)return[];let l=[c.module];return c.clientActionModule&&(l=l.concat(c.clientActionModule)),c.clientLoaderModule&&(l=l.concat(c.clientLoaderModule)),i&&c.hydrateFallbackModule&&(l=l.concat(c.hydrateFallbackModule)),c.imports&&(l=l.concat(c.imports)),l}).flat(1))}function BC(r){return[...new Set(r)]}function HC(r){let n={},i=Object.keys(r).sort();for(let s of i)n[s]=r[s];return n}function qC(r,n){let i=new Set;return new Set(n),r.reduce((s,c)=>{let l=JSON.stringify(HC(c));return i.has(l)||(i.add(l),s.push({key:l,link:c})),s},[])}function fv(){let r=z.useContext(Co);return ef(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function $C(){let r=z.useContext(Ec);return ef(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var tf=z.createContext(void 0);tf.displayName="FrameworkContext";function hv(){let r=z.useContext(tf);return ef(r,"You must render this element inside a <HydratedRouter> element"),r}function VC(r,n){let i=z.useContext(tf),[s,c]=z.useState(!1),[l,d]=z.useState(!1),{onFocus:p,onBlur:m,onMouseEnter:g,onMouseLeave:y,onTouchStart:E}=n,I=z.useRef(null);z.useEffect(()=>{if(r==="render"&&d(!0),r==="viewport"){let ee=de=>{de.forEach(ue=>{d(ue.isIntersecting)})},J=new IntersectionObserver(ee,{threshold:.5});return I.current&&J.observe(I.current),()=>{J.disconnect()}}},[r]),z.useEffect(()=>{if(s){let ee=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(ee)}}},[s]);let Y=()=>{c(!0)},M=()=>{c(!1),d(!1)};return i?r!=="intent"?[l,I,{}]:[l,I,{onFocus:Ts(p,Y),onBlur:Ts(m,M),onMouseEnter:Ts(g,Y),onMouseLeave:Ts(y,M),onTouchStart:Ts(E,Y)}]:[!1,I,{}]}function Ts(r,n){return i=>{r&&r(i),i.defaultPrevented||n(i)}}function GC({page:r,...n}){let{router:i}=fv(),s=z.useMemo(()=>Qy(i.routes,r,i.basename),[i.routes,r,i.basename]);return s?z.createElement(XC,{page:r,matches:s,...n}):null}function FC(r){let{manifest:n,routeModules:i}=hv(),[s,c]=z.useState([]);return z.useEffect(()=>{let l=!1;return zC(r,n,i).then(d=>{l||c(d)}),()=>{l=!0}},[r,n,i]),s}function XC({page:r,matches:n,...i}){let s=Wn(),{manifest:c,routeModules:l}=hv(),{basename:d}=fv(),{loaderData:p,matches:m}=$C(),g=z.useMemo(()=>Fg(r,n,m,c,s,"data"),[r,n,m,c,s]),y=z.useMemo(()=>Fg(r,n,m,c,s,"assets"),[r,n,m,c,s]),E=z.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let M=new Set,ee=!1;if(n.forEach(de=>{let ue=c.routes[de.route.id];!ue||!ue.hasLoader||(!g.some(pe=>pe.route.id===de.route.id)&&de.route.id in p&&l[de.route.id]?.shouldRevalidate||ue.hasClientLoader?ee=!0:M.add(de.route.id))}),M.size===0)return[];let J=DC(r,d,"data");return ee&&M.size>0&&J.searchParams.set("_routes",n.filter(de=>M.has(de.route.id)).map(de=>de.route.id).join(",")),[J.pathname+J.search]},[d,p,s,c,g,n,r,l]),I=z.useMemo(()=>LC(y,c),[y,c]),Y=FC(y);return z.createElement(z.Fragment,null,E.map(M=>z.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...i})),I.map(M=>z.createElement("link",{key:M,rel:"modulepreload",href:M,...i})),Y.map(({key:M,link:ee})=>z.createElement("link",{key:M,nonce:i.nonce,...ee})))}function YC(...r){return n=>{r.forEach(i=>{typeof i=="function"?i(n):i!=null&&(i.current=n)})}}var JC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{JC&&(window.__reactRouterVersion="7.11.0")}catch{}function KC({basename:r,children:n,unstable_useTransitions:i,window:s}){let c=z.useRef();c.current==null&&(c.current=NT({window:s,v5Compat:!0}));let l=c.current,[d,p]=z.useState({action:l.action,location:l.location}),m=z.useCallback(g=>{i===!1?p(g):z.startTransition(()=>p(g))},[i]);return z.useLayoutEffect(()=>l.listen(m),[l,m]),z.createElement(RC,{basename:r,children:n,location:d.location,navigationType:d.action,navigator:l,unstable_useTransitions:i})}var pv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hn=z.forwardRef(function({onClick:n,discover:i="render",prefetch:s="none",relative:c,reloadDocument:l,replace:d,state:p,target:m,to:g,preventScrollReset:y,viewTransition:E,unstable_defaultShouldRevalidate:I,...Y},M){let{basename:ee,unstable_useTransitions:J}=z.useContext(En),de=typeof g=="string"&&pv.test(g),ue=nv(g,ee);g=ue.to;let pe=uC(g,{relative:c}),[F,ne,me]=VC(s,Y),ae=e1(g,{replace:d,state:p,target:m,preventScrollReset:y,relative:c,viewTransition:E,unstable_defaultShouldRevalidate:I,unstable_useTransitions:J});function _e(Re){n&&n(Re),Re.defaultPrevented||ae(Re)}let Ce=z.createElement("a",{...Y,...me,href:ue.absoluteURL||pe,onClick:ue.isExternal||l?n:_e,ref:YC(M,ne),target:m,"data-discover":!de&&i==="render"?"true":void 0});return F&&!de?z.createElement(z.Fragment,null,Ce,z.createElement(GC,{page:pe})):Ce});Hn.displayName="Link";var QC=z.forwardRef(function({"aria-current":n="page",caseSensitive:i=!1,className:s="",end:c=!1,style:l,to:d,viewTransition:p,children:m,...g},y){let E=Us(d,{relative:g.relative}),I=Wn(),Y=z.useContext(Ec),{navigator:M,basename:ee}=z.useContext(En),J=Y!=null&&o1(E)&&p===!0,de=M.encodeLocation?M.encodeLocation(E).pathname:E.pathname,ue=I.pathname,pe=Y&&Y.navigation&&Y.navigation.location?Y.navigation.location.pathname:null;i||(ue=ue.toLowerCase(),pe=pe?pe.toLowerCase():null,de=de.toLowerCase()),pe&&ee&&(pe=br(pe,ee)||pe);const F=de!=="/"&&de.endsWith("/")?de.length-1:de.length;let ne=ue===de||!c&&ue.startsWith(de)&&ue.charAt(F)==="/",me=pe!=null&&(pe===de||!c&&pe.startsWith(de)&&pe.charAt(de.length)==="/"),ae={isActive:ne,isPending:me,isTransitioning:J},_e=ne?n:void 0,Ce;typeof s=="function"?Ce=s(ae):Ce=[s,ne?"active":null,me?"pending":null,J?"transitioning":null].filter(Boolean).join(" ");let Re=typeof l=="function"?l(ae):l;return z.createElement(Hn,{...g,"aria-current":_e,className:Ce,ref:y,style:Re,to:d,viewTransition:p},typeof m=="function"?m(ae):m)});QC.displayName="NavLink";var WC=z.forwardRef(({discover:r="render",fetcherKey:n,navigate:i,reloadDocument:s,replace:c,state:l,method:d=uc,action:p,onSubmit:m,relative:g,preventScrollReset:y,viewTransition:E,unstable_defaultShouldRevalidate:I,...Y},M)=>{let{unstable_useTransitions:ee}=z.useContext(En),J=r1(),de=i1(p,{relative:g}),ue=d.toLowerCase()==="get"?"get":"post",pe=typeof p=="string"&&pv.test(p),F=ne=>{if(m&&m(ne),ne.defaultPrevented)return;ne.preventDefault();let me=ne.nativeEvent.submitter,ae=me?.getAttribute("formmethod")||d,_e=()=>J(me||ne.currentTarget,{fetcherKey:n,method:ae,navigate:i,replace:c,state:l,relative:g,preventScrollReset:y,viewTransition:E,unstable_defaultShouldRevalidate:I});ee&&i!==!1?z.startTransition(()=>_e()):_e()};return z.createElement("form",{ref:M,method:ue,action:de,onSubmit:s?m:F,...Y,"data-discover":!pe&&r==="render"?"true":void 0})});WC.displayName="Form";function ZC(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function mv(r){let n=z.useContext(Co);return St(n,ZC(r)),n}function e1(r,{target:n,replace:i,state:s,preventScrollReset:c,relative:l,viewTransition:d,unstable_defaultShouldRevalidate:p,unstable_useTransitions:m}={}){let g=Wr(),y=Wn(),E=Us(r,{relative:l});return z.useCallback(I=>{if(OC(I,n)){I.preventDefault();let Y=i!==void 0?i:As(y)===As(E),M=()=>g(r,{replace:Y,state:s,preventScrollReset:c,relative:l,viewTransition:d,unstable_defaultShouldRevalidate:p});m?z.startTransition(()=>M()):M()}},[y,g,E,i,s,n,r,c,l,d,p,m])}var t1=0,n1=()=>`__${String(++t1)}__`;function r1(){let{router:r}=mv("useSubmit"),{basename:n}=z.useContext(En),i=wC(),s=r.fetch,c=r.navigate;return z.useCallback(async(l,d={})=>{let{action:p,method:m,encType:g,formData:y,body:E}=UC(l,n);if(d.navigate===!1){let I=d.fetcherKey||n1();await s(I,i,d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:y,body:E,formMethod:d.method||m,formEncType:d.encType||g,flushSync:d.flushSync})}else await c(d.action||p,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:y,body:E,formMethod:d.method||m,formEncType:d.encType||g,replace:d.replace,state:d.state,fromRouteId:i,flushSync:d.flushSync,viewTransition:d.viewTransition})},[s,c,n,i])}function i1(r,{relative:n}={}){let{basename:i}=z.useContext(En),s=z.useContext($n);St(s,"useFormAction must be used inside a RouteContext");let[c]=s.matches.slice(-1),l={...Us(r||".",{relative:n})},d=Wn();if(r==null){l.search=d.search;let p=new URLSearchParams(l.search),m=p.getAll("index");if(m.some(y=>y==="")){p.delete("index"),m.filter(E=>E).forEach(E=>p.append("index",E));let y=p.toString();l.search=y?`?${y}`:""}}return(!r||r===".")&&c.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(l.pathname=l.pathname==="/"?i:vr([i,l.pathname])),As(l)}function o1(r,{relative:n}={}){let i=z.useContext(iv);St(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=mv("useViewTransitionState"),c=Us(r,{relative:n});if(!i.isTransitioning)return!1;let l=br(i.currentLocation.pathname,s)||i.currentLocation.pathname,d=br(i.nextLocation.pathname,s)||i.nextLocation.pathname;return gc(c.pathname,d)!=null||gc(c.pathname,l)!=null}const s1=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a1=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,i,s)=>s?s.toUpperCase():i.toLowerCase()),Xg=r=>{const n=a1(r);return n.charAt(0).toUpperCase()+n.slice(1)},gv=(...r)=>r.filter((n,i,s)=>!!n&&n.trim()!==""&&s.indexOf(n)===i).join(" ").trim(),c1=r=>{for(const n in r)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};var l1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const u1=z.forwardRef(({color:r="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:c="",children:l,iconNode:d,...p},m)=>z.createElement("svg",{ref:m,...l1,width:n,height:n,stroke:r,strokeWidth:s?Number(i)*24/Number(n):i,className:gv("lucide",c),...!l&&!c1(p)&&{"aria-hidden":"true"},...p},[...d.map(([g,y])=>z.createElement(g,y)),...Array.isArray(l)?l:[l]]));const ct=(r,n)=>{const i=z.forwardRef(({className:s,...c},l)=>z.createElement(u1,{ref:l,iconNode:n,className:gv(`lucide-${s1(Xg(r))}`,`lucide-${r}`,s),...c}));return i.displayName=Xg(r),i};const d1=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],nf=ct("arrow-left",d1);const f1=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],yv=ct("chevron-down",f1);const h1=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],vv=ct("chevron-right",h1);const p1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],m1=ct("circle-alert",p1);const g1=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Yg=ct("circle-check-big",g1);const y1=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],yc=ct("circle-question-mark",y1);const v1=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],b1=ct("clock",v1);const S1=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],w1=ct("copy",S1);const T1=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],bv=ct("eye-off",T1);const C1=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],kc=ct("eye",C1);const x1=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Sv=ct("funnel",x1);const R1=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],E1=ct("house",R1);const _1=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],k1=ct("layout-dashboard",_1);const A1=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],N1=ct("log-out",A1);const O1=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Jg=ct("mail",O1);const j1=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],M1=ct("map-pin",j1);const U1=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],D1=ct("menu",U1);const P1=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],vc=ct("message-circle",P1);const I1=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],z1=ct("message-square",I1);const L1=[["path",{d:"M5 12h14",key:"1ays0h"}]],wv=ct("minus",L1);const B1=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],H1=ct("phone",B1);const q1=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Tv=ct("plus",q1);const $1=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],mo=ct("send",$1);const V1=[["path",{d:"M12 2v13",key:"1km8f5"}],["path",{d:"m16 6-4-4-4 4",key:"13yo43"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}]],G1=ct("share",V1);const F1=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],X1=ct("shield-check",F1);const Y1=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],J1=ct("square-pen",Y1);const K1=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Ud=ct("star",K1);const Q1=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],W1=ct("upload",Q1);const Z1=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ex=ct("user",Z1);const tx=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Ac=ct("users",tx);const nx=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],rf=ct("x",nx),Cv=z.createContext(),rx=()=>{const r=z.useContext(Cv);if(!r)throw new Error("useNotifications must be used within NotificationProvider");return r},ix=({children:r})=>{const[n,i]=z.useState(0),s=()=>{i(0)};return h.jsx(Cv.Provider,{value:{unreadCount:n,clearUnreadCount:s},children:r})};function xv(r,n){return function(){return r.apply(n,arguments)}}const{toString:ox}=Object.prototype,{getPrototypeOf:of}=Object,{iterator:Nc,toStringTag:Rv}=Symbol,Oc=(r=>n=>{const i=ox.call(n);return r[i]||(r[i]=i.slice(8,-1).toLowerCase())})(Object.create(null)),Vn=r=>(r=r.toLowerCase(),n=>Oc(n)===r),jc=r=>n=>typeof n===r,{isArray:Ro}=Array,go=jc("undefined");function Ds(r){return r!==null&&!go(r)&&r.constructor!==null&&!go(r.constructor)&&gn(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const Ev=Vn("ArrayBuffer");function sx(r){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(r):n=r&&r.buffer&&Ev(r.buffer),n}const ax=jc("string"),gn=jc("function"),_v=jc("number"),Ps=r=>r!==null&&typeof r=="object",cx=r=>r===!0||r===!1,fc=r=>{if(Oc(r)!=="object")return!1;const n=of(r);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Rv in r)&&!(Nc in r)},lx=r=>{if(!Ps(r)||Ds(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},ux=Vn("Date"),dx=Vn("File"),fx=Vn("Blob"),hx=Vn("FileList"),px=r=>Ps(r)&&gn(r.pipe),mx=r=>{let n;return r&&(typeof FormData=="function"&&r instanceof FormData||gn(r.append)&&((n=Oc(r))==="formdata"||n==="object"&&gn(r.toString)&&r.toString()==="[object FormData]"))},gx=Vn("URLSearchParams"),[yx,vx,bx,Sx]=["ReadableStream","Request","Response","Headers"].map(Vn),wx=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Is(r,n,{allOwnKeys:i=!1}={}){if(r===null||typeof r>"u")return;let s,c;if(typeof r!="object"&&(r=[r]),Ro(r))for(s=0,c=r.length;s<c;s++)n.call(null,r[s],s,r);else{if(Ds(r))return;const l=i?Object.getOwnPropertyNames(r):Object.keys(r),d=l.length;let p;for(s=0;s<d;s++)p=l[s],n.call(null,r[p],p,r)}}function kv(r,n){if(Ds(r))return null;n=n.toLowerCase();const i=Object.keys(r);let s=i.length,c;for(;s-- >0;)if(c=i[s],n===c.toLowerCase())return c;return null}const vi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Av=r=>!go(r)&&r!==vi;function Dd(){const{caseless:r,skipUndefined:n}=Av(this)&&this||{},i={},s=(c,l)=>{const d=r&&kv(i,l)||l;fc(i[d])&&fc(c)?i[d]=Dd(i[d],c):fc(c)?i[d]=Dd({},c):Ro(c)?i[d]=c.slice():(!n||!go(c))&&(i[d]=c)};for(let c=0,l=arguments.length;c<l;c++)arguments[c]&&Is(arguments[c],s);return i}const Tx=(r,n,i,{allOwnKeys:s}={})=>(Is(n,(c,l)=>{i&&gn(c)?r[l]=xv(c,i):r[l]=c},{allOwnKeys:s}),r),Cx=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),xx=(r,n,i,s)=>{r.prototype=Object.create(n.prototype,s),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:n.prototype}),i&&Object.assign(r.prototype,i)},Rx=(r,n,i,s)=>{let c,l,d;const p={};if(n=n||{},r==null)return n;do{for(c=Object.getOwnPropertyNames(r),l=c.length;l-- >0;)d=c[l],(!s||s(d,r,n))&&!p[d]&&(n[d]=r[d],p[d]=!0);r=i!==!1&&of(r)}while(r&&(!i||i(r,n))&&r!==Object.prototype);return n},Ex=(r,n,i)=>{r=String(r),(i===void 0||i>r.length)&&(i=r.length),i-=n.length;const s=r.indexOf(n,i);return s!==-1&&s===i},_x=r=>{if(!r)return null;if(Ro(r))return r;let n=r.length;if(!_v(n))return null;const i=new Array(n);for(;n-- >0;)i[n]=r[n];return i},kx=(r=>n=>r&&n instanceof r)(typeof Uint8Array<"u"&&of(Uint8Array)),Ax=(r,n)=>{const s=(r&&r[Nc]).call(r);let c;for(;(c=s.next())&&!c.done;){const l=c.value;n.call(r,l[0],l[1])}},Nx=(r,n)=>{let i;const s=[];for(;(i=r.exec(n))!==null;)s.push(i);return s},Ox=Vn("HTMLFormElement"),jx=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(i,s,c){return s.toUpperCase()+c}),Kg=(({hasOwnProperty:r})=>(n,i)=>r.call(n,i))(Object.prototype),Mx=Vn("RegExp"),Nv=(r,n)=>{const i=Object.getOwnPropertyDescriptors(r),s={};Is(i,(c,l)=>{let d;(d=n(c,l,r))!==!1&&(s[l]=d||c)}),Object.defineProperties(r,s)},Ux=r=>{Nv(r,(n,i)=>{if(gn(r)&&["arguments","caller","callee"].indexOf(i)!==-1)return!1;const s=r[i];if(gn(s)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")})}})},Dx=(r,n)=>{const i={},s=c=>{c.forEach(l=>{i[l]=!0})};return Ro(r)?s(r):s(String(r).split(n)),i},Px=()=>{},Ix=(r,n)=>r!=null&&Number.isFinite(r=+r)?r:n;function zx(r){return!!(r&&gn(r.append)&&r[Rv]==="FormData"&&r[Nc])}const Lx=r=>{const n=new Array(10),i=(s,c)=>{if(Ps(s)){if(n.indexOf(s)>=0)return;if(Ds(s))return s;if(!("toJSON"in s)){n[c]=s;const l=Ro(s)?[]:{};return Is(s,(d,p)=>{const m=i(d,c+1);!go(m)&&(l[p]=m)}),n[c]=void 0,l}}return s};return i(r,0)},Bx=Vn("AsyncFunction"),Hx=r=>r&&(Ps(r)||gn(r))&&gn(r.then)&&gn(r.catch),Ov=((r,n)=>r?setImmediate:n?((i,s)=>(vi.addEventListener("message",({source:c,data:l})=>{c===vi&&l===i&&s.length&&s.shift()()},!1),c=>{s.push(c),vi.postMessage(i,"*")}))(`axios@${Math.random()}`,[]):i=>setTimeout(i))(typeof setImmediate=="function",gn(vi.postMessage)),qx=typeof queueMicrotask<"u"?queueMicrotask.bind(vi):typeof process<"u"&&process.nextTick||Ov,$x=r=>r!=null&&gn(r[Nc]),ge={isArray:Ro,isArrayBuffer:Ev,isBuffer:Ds,isFormData:mx,isArrayBufferView:sx,isString:ax,isNumber:_v,isBoolean:cx,isObject:Ps,isPlainObject:fc,isEmptyObject:lx,isReadableStream:yx,isRequest:vx,isResponse:bx,isHeaders:Sx,isUndefined:go,isDate:ux,isFile:dx,isBlob:fx,isRegExp:Mx,isFunction:gn,isStream:px,isURLSearchParams:gx,isTypedArray:kx,isFileList:hx,forEach:Is,merge:Dd,extend:Tx,trim:wx,stripBOM:Cx,inherits:xx,toFlatObject:Rx,kindOf:Oc,kindOfTest:Vn,endsWith:Ex,toArray:_x,forEachEntry:Ax,matchAll:Nx,isHTMLForm:Ox,hasOwnProperty:Kg,hasOwnProp:Kg,reduceDescriptors:Nv,freezeMethods:Ux,toObjectSet:Dx,toCamelCase:jx,noop:Px,toFiniteNumber:Ix,findKey:kv,global:vi,isContextDefined:Av,isSpecCompliantForm:zx,toJSONObject:Lx,isAsyncFn:Bx,isThenable:Hx,setImmediate:Ov,asap:qx,isIterable:$x};function Ye(r,n,i,s,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",n&&(this.code=n),i&&(this.config=i),s&&(this.request=s),c&&(this.response=c,this.status=c.status?c.status:null)}ge.inherits(Ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ge.toJSONObject(this.config),code:this.code,status:this.status}}});const jv=Ye.prototype,Mv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{Mv[r]={value:r}});Object.defineProperties(Ye,Mv);Object.defineProperty(jv,"isAxiosError",{value:!0});Ye.from=(r,n,i,s,c,l)=>{const d=Object.create(jv);ge.toFlatObject(r,d,function(y){return y!==Error.prototype},g=>g!=="isAxiosError");const p=r&&r.message?r.message:"Error",m=n==null&&r?r.code:n;return Ye.call(d,p,m,i,s,c),r&&d.cause==null&&Object.defineProperty(d,"cause",{value:r,configurable:!0}),d.name=r&&r.name||"Error",l&&Object.assign(d,l),d};const Vx=null;function Pd(r){return ge.isPlainObject(r)||ge.isArray(r)}function Uv(r){return ge.endsWith(r,"[]")?r.slice(0,-2):r}function Qg(r,n,i){return r?r.concat(n).map(function(c,l){return c=Uv(c),!i&&l?"["+c+"]":c}).join(i?".":""):n}function Gx(r){return ge.isArray(r)&&!r.some(Pd)}const Fx=ge.toFlatObject(ge,{},null,function(n){return/^is[A-Z]/.test(n)});function Mc(r,n,i){if(!ge.isObject(r))throw new TypeError("target must be an object");n=n||new FormData,i=ge.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ee,J){return!ge.isUndefined(J[ee])});const s=i.metaTokens,c=i.visitor||y,l=i.dots,d=i.indexes,m=(i.Blob||typeof Blob<"u"&&Blob)&&ge.isSpecCompliantForm(n);if(!ge.isFunction(c))throw new TypeError("visitor must be a function");function g(M){if(M===null)return"";if(ge.isDate(M))return M.toISOString();if(ge.isBoolean(M))return M.toString();if(!m&&ge.isBlob(M))throw new Ye("Blob is not supported. Use a Buffer instead.");return ge.isArrayBuffer(M)||ge.isTypedArray(M)?m&&typeof Blob=="function"?new Blob([M]):Buffer.from(M):M}function y(M,ee,J){let de=M;if(M&&!J&&typeof M=="object"){if(ge.endsWith(ee,"{}"))ee=s?ee:ee.slice(0,-2),M=JSON.stringify(M);else if(ge.isArray(M)&&Gx(M)||(ge.isFileList(M)||ge.endsWith(ee,"[]"))&&(de=ge.toArray(M)))return ee=Uv(ee),de.forEach(function(pe,F){!(ge.isUndefined(pe)||pe===null)&&n.append(d===!0?Qg([ee],F,l):d===null?ee:ee+"[]",g(pe))}),!1}return Pd(M)?!0:(n.append(Qg(J,ee,l),g(M)),!1)}const E=[],I=Object.assign(Fx,{defaultVisitor:y,convertValue:g,isVisitable:Pd});function Y(M,ee){if(!ge.isUndefined(M)){if(E.indexOf(M)!==-1)throw Error("Circular reference detected in "+ee.join("."));E.push(M),ge.forEach(M,function(de,ue){(!(ge.isUndefined(de)||de===null)&&c.call(n,de,ge.isString(ue)?ue.trim():ue,ee,I))===!0&&Y(de,ee?ee.concat(ue):[ue])}),E.pop()}}if(!ge.isObject(r))throw new TypeError("data must be an object");return Y(r),n}function Wg(r){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(s){return n[s]})}function sf(r,n){this._pairs=[],r&&Mc(r,this,n)}const Dv=sf.prototype;Dv.append=function(n,i){this._pairs.push([n,i])};Dv.toString=function(n){const i=n?function(s){return n.call(this,s,Wg)}:Wg;return this._pairs.map(function(c){return i(c[0])+"="+i(c[1])},"").join("&")};function Xx(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Pv(r,n,i){if(!n)return r;const s=i&&i.encode||Xx;ge.isFunction(i)&&(i={serialize:i});const c=i&&i.serialize;let l;if(c?l=c(n,i):l=ge.isURLSearchParams(n)?n.toString():new sf(n,i).toString(s),l){const d=r.indexOf("#");d!==-1&&(r=r.slice(0,d)),r+=(r.indexOf("?")===-1?"?":"&")+l}return r}class Zg{constructor(){this.handlers=[]}use(n,i,s){return this.handlers.push({fulfilled:n,rejected:i,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){ge.forEach(this.handlers,function(s){s!==null&&n(s)})}}const Iv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Yx=typeof URLSearchParams<"u"?URLSearchParams:sf,Jx=typeof FormData<"u"?FormData:null,Kx=typeof Blob<"u"?Blob:null,Qx={isBrowser:!0,classes:{URLSearchParams:Yx,FormData:Jx,Blob:Kx},protocols:["http","https","file","blob","url","data"]},af=typeof window<"u"&&typeof document<"u",Id=typeof navigator=="object"&&navigator||void 0,Wx=af&&(!Id||["ReactNative","NativeScript","NS"].indexOf(Id.product)<0),Zx=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",eR=af&&window.location.href||"http://localhost",tR=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:af,hasStandardBrowserEnv:Wx,hasStandardBrowserWebWorkerEnv:Zx,navigator:Id,origin:eR},Symbol.toStringTag,{value:"Module"})),nn={...tR,...Qx};function nR(r,n){return Mc(r,new nn.classes.URLSearchParams,{visitor:function(i,s,c,l){return nn.isNode&&ge.isBuffer(i)?(this.append(s,i.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...n})}function rR(r){return ge.matchAll(/\w+|\[(\w*)]/g,r).map(n=>n[0]==="[]"?"":n[1]||n[0])}function iR(r){const n={},i=Object.keys(r);let s;const c=i.length;let l;for(s=0;s<c;s++)l=i[s],n[l]=r[l];return n}function zv(r){function n(i,s,c,l){let d=i[l++];if(d==="__proto__")return!0;const p=Number.isFinite(+d),m=l>=i.length;return d=!d&&ge.isArray(c)?c.length:d,m?(ge.hasOwnProp(c,d)?c[d]=[c[d],s]:c[d]=s,!p):((!c[d]||!ge.isObject(c[d]))&&(c[d]=[]),n(i,s,c[d],l)&&ge.isArray(c[d])&&(c[d]=iR(c[d])),!p)}if(ge.isFormData(r)&&ge.isFunction(r.entries)){const i={};return ge.forEachEntry(r,(s,c)=>{n(rR(s),c,i,0)}),i}return null}function oR(r,n,i){if(ge.isString(r))try{return(n||JSON.parse)(r),ge.trim(r)}catch(s){if(s.name!=="SyntaxError")throw s}return(i||JSON.stringify)(r)}const zs={transitional:Iv,adapter:["xhr","http","fetch"],transformRequest:[function(n,i){const s=i.getContentType()||"",c=s.indexOf("application/json")>-1,l=ge.isObject(n);if(l&&ge.isHTMLForm(n)&&(n=new FormData(n)),ge.isFormData(n))return c?JSON.stringify(zv(n)):n;if(ge.isArrayBuffer(n)||ge.isBuffer(n)||ge.isStream(n)||ge.isFile(n)||ge.isBlob(n)||ge.isReadableStream(n))return n;if(ge.isArrayBufferView(n))return n.buffer;if(ge.isURLSearchParams(n))return i.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let p;if(l){if(s.indexOf("application/x-www-form-urlencoded")>-1)return nR(n,this.formSerializer).toString();if((p=ge.isFileList(n))||s.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return Mc(p?{"files[]":n}:n,m&&new m,this.formSerializer)}}return l||c?(i.setContentType("application/json",!1),oR(n)):n}],transformResponse:[function(n){const i=this.transitional||zs.transitional,s=i&&i.forcedJSONParsing,c=this.responseType==="json";if(ge.isResponse(n)||ge.isReadableStream(n))return n;if(n&&ge.isString(n)&&(s&&!this.responseType||c)){const d=!(i&&i.silentJSONParsing)&&c;try{return JSON.parse(n,this.parseReviver)}catch(p){if(d)throw p.name==="SyntaxError"?Ye.from(p,Ye.ERR_BAD_RESPONSE,this,null,this.response):p}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:nn.classes.FormData,Blob:nn.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ge.forEach(["delete","get","head","post","put","patch"],r=>{zs.headers[r]={}});const sR=ge.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),aR=r=>{const n={};let i,s,c;return r&&r.split(`
`).forEach(function(d){c=d.indexOf(":"),i=d.substring(0,c).trim().toLowerCase(),s=d.substring(c+1).trim(),!(!i||n[i]&&sR[i])&&(i==="set-cookie"?n[i]?n[i].push(s):n[i]=[s]:n[i]=n[i]?n[i]+", "+s:s)}),n},ey=Symbol("internals");function Cs(r){return r&&String(r).trim().toLowerCase()}function hc(r){return r===!1||r==null?r:ge.isArray(r)?r.map(hc):String(r)}function cR(r){const n=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=i.exec(r);)n[s[1]]=s[2];return n}const lR=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function md(r,n,i,s,c){if(ge.isFunction(s))return s.call(this,n,i);if(c&&(n=i),!!ge.isString(n)){if(ge.isString(s))return n.indexOf(s)!==-1;if(ge.isRegExp(s))return s.test(n)}}function uR(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,i,s)=>i.toUpperCase()+s)}function dR(r,n){const i=ge.toCamelCase(" "+n);["get","set","has"].forEach(s=>{Object.defineProperty(r,s+i,{value:function(c,l,d){return this[s].call(this,n,c,l,d)},configurable:!0})})}let yn=class{constructor(n){n&&this.set(n)}set(n,i,s){const c=this;function l(p,m,g){const y=Cs(m);if(!y)throw new Error("header name must be a non-empty string");const E=ge.findKey(c,y);(!E||c[E]===void 0||g===!0||g===void 0&&c[E]!==!1)&&(c[E||m]=hc(p))}const d=(p,m)=>ge.forEach(p,(g,y)=>l(g,y,m));if(ge.isPlainObject(n)||n instanceof this.constructor)d(n,i);else if(ge.isString(n)&&(n=n.trim())&&!lR(n))d(aR(n),i);else if(ge.isObject(n)&&ge.isIterable(n)){let p={},m,g;for(const y of n){if(!ge.isArray(y))throw TypeError("Object iterator must return a key-value pair");p[g=y[0]]=(m=p[g])?ge.isArray(m)?[...m,y[1]]:[m,y[1]]:y[1]}d(p,i)}else n!=null&&l(i,n,s);return this}get(n,i){if(n=Cs(n),n){const s=ge.findKey(this,n);if(s){const c=this[s];if(!i)return c;if(i===!0)return cR(c);if(ge.isFunction(i))return i.call(this,c,s);if(ge.isRegExp(i))return i.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,i){if(n=Cs(n),n){const s=ge.findKey(this,n);return!!(s&&this[s]!==void 0&&(!i||md(this,this[s],s,i)))}return!1}delete(n,i){const s=this;let c=!1;function l(d){if(d=Cs(d),d){const p=ge.findKey(s,d);p&&(!i||md(s,s[p],p,i))&&(delete s[p],c=!0)}}return ge.isArray(n)?n.forEach(l):l(n),c}clear(n){const i=Object.keys(this);let s=i.length,c=!1;for(;s--;){const l=i[s];(!n||md(this,this[l],l,n,!0))&&(delete this[l],c=!0)}return c}normalize(n){const i=this,s={};return ge.forEach(this,(c,l)=>{const d=ge.findKey(s,l);if(d){i[d]=hc(c),delete i[l];return}const p=n?uR(l):String(l).trim();p!==l&&delete i[l],i[p]=hc(c),s[p]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const i=Object.create(null);return ge.forEach(this,(s,c)=>{s!=null&&s!==!1&&(i[c]=n&&ge.isArray(s)?s.join(", "):s)}),i}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,i])=>n+": "+i).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...i){const s=new this(n);return i.forEach(c=>s.set(c)),s}static accessor(n){const s=(this[ey]=this[ey]={accessors:{}}).accessors,c=this.prototype;function l(d){const p=Cs(d);s[p]||(dR(c,d),s[p]=!0)}return ge.isArray(n)?n.forEach(l):l(n),this}};yn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ge.reduceDescriptors(yn.prototype,({value:r},n)=>{let i=n[0].toUpperCase()+n.slice(1);return{get:()=>r,set(s){this[i]=s}}});ge.freezeMethods(yn);function gd(r,n){const i=this||zs,s=n||i,c=yn.from(s.headers);let l=s.data;return ge.forEach(r,function(p){l=p.call(i,l,c.normalize(),n?n.status:void 0)}),c.normalize(),l}function Lv(r){return!!(r&&r.__CANCEL__)}function Eo(r,n,i){Ye.call(this,r??"canceled",Ye.ERR_CANCELED,n,i),this.name="CanceledError"}ge.inherits(Eo,Ye,{__CANCEL__:!0});function Bv(r,n,i){const s=i.config.validateStatus;!i.status||!s||s(i.status)?r(i):n(new Ye("Request failed with status code "+i.status,[Ye.ERR_BAD_REQUEST,Ye.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i))}function fR(r){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return n&&n[1]||""}function hR(r,n){r=r||10;const i=new Array(r),s=new Array(r);let c=0,l=0,d;return n=n!==void 0?n:1e3,function(m){const g=Date.now(),y=s[l];d||(d=g),i[c]=m,s[c]=g;let E=l,I=0;for(;E!==c;)I+=i[E++],E=E%r;if(c=(c+1)%r,c===l&&(l=(l+1)%r),g-d<n)return;const Y=y&&g-y;return Y?Math.round(I*1e3/Y):void 0}}function pR(r,n){let i=0,s=1e3/n,c,l;const d=(g,y=Date.now())=>{i=y,c=null,l&&(clearTimeout(l),l=null),r(...g)};return[(...g)=>{const y=Date.now(),E=y-i;E>=s?d(g,y):(c=g,l||(l=setTimeout(()=>{l=null,d(c)},s-E)))},()=>c&&d(c)]}const bc=(r,n,i=3)=>{let s=0;const c=hR(50,250);return pR(l=>{const d=l.loaded,p=l.lengthComputable?l.total:void 0,m=d-s,g=c(m),y=d<=p;s=d;const E={loaded:d,total:p,progress:p?d/p:void 0,bytes:m,rate:g||void 0,estimated:g&&p&&y?(p-d)/g:void 0,event:l,lengthComputable:p!=null,[n?"download":"upload"]:!0};r(E)},i)},ty=(r,n)=>{const i=r!=null;return[s=>n[0]({lengthComputable:i,total:r,loaded:s}),n[1]]},ny=r=>(...n)=>ge.asap(()=>r(...n)),mR=nn.hasStandardBrowserEnv?((r,n)=>i=>(i=new URL(i,nn.origin),r.protocol===i.protocol&&r.host===i.host&&(n||r.port===i.port)))(new URL(nn.origin),nn.navigator&&/(msie|trident)/i.test(nn.navigator.userAgent)):()=>!0,gR=nn.hasStandardBrowserEnv?{write(r,n,i,s,c,l,d){if(typeof document>"u")return;const p=[`${r}=${encodeURIComponent(n)}`];ge.isNumber(i)&&p.push(`expires=${new Date(i).toUTCString()}`),ge.isString(s)&&p.push(`path=${s}`),ge.isString(c)&&p.push(`domain=${c}`),l===!0&&p.push("secure"),ge.isString(d)&&p.push(`SameSite=${d}`),document.cookie=p.join("; ")},read(r){if(typeof document>"u")return null;const n=document.cookie.match(new RegExp("(?:^|; )"+r+"=([^;]*)"));return n?decodeURIComponent(n[1]):null},remove(r){this.write(r,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function yR(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function vR(r,n){return n?r.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):r}function Hv(r,n,i){let s=!yR(n);return r&&(s||i==!1)?vR(r,n):n}const ry=r=>r instanceof yn?{...r}:r;function Ci(r,n){n=n||{};const i={};function s(g,y,E,I){return ge.isPlainObject(g)&&ge.isPlainObject(y)?ge.merge.call({caseless:I},g,y):ge.isPlainObject(y)?ge.merge({},y):ge.isArray(y)?y.slice():y}function c(g,y,E,I){if(ge.isUndefined(y)){if(!ge.isUndefined(g))return s(void 0,g,E,I)}else return s(g,y,E,I)}function l(g,y){if(!ge.isUndefined(y))return s(void 0,y)}function d(g,y){if(ge.isUndefined(y)){if(!ge.isUndefined(g))return s(void 0,g)}else return s(void 0,y)}function p(g,y,E){if(E in n)return s(g,y);if(E in r)return s(void 0,g)}const m={url:l,method:l,data:l,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:p,headers:(g,y,E)=>c(ry(g),ry(y),E,!0)};return ge.forEach(Object.keys({...r,...n}),function(y){const E=m[y]||c,I=E(r[y],n[y],y);ge.isUndefined(I)&&E!==p||(i[y]=I)}),i}const qv=r=>{const n=Ci({},r);let{data:i,withXSRFToken:s,xsrfHeaderName:c,xsrfCookieName:l,headers:d,auth:p}=n;if(n.headers=d=yn.from(d),n.url=Pv(Hv(n.baseURL,n.url,n.allowAbsoluteUrls),r.params,r.paramsSerializer),p&&d.set("Authorization","Basic "+btoa((p.username||"")+":"+(p.password?unescape(encodeURIComponent(p.password)):""))),ge.isFormData(i)){if(nn.hasStandardBrowserEnv||nn.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if(ge.isFunction(i.getHeaders)){const m=i.getHeaders(),g=["content-type","content-length"];Object.entries(m).forEach(([y,E])=>{g.includes(y.toLowerCase())&&d.set(y,E)})}}if(nn.hasStandardBrowserEnv&&(s&&ge.isFunction(s)&&(s=s(n)),s||s!==!1&&mR(n.url))){const m=c&&l&&gR.read(l);m&&d.set(c,m)}return n},bR=typeof XMLHttpRequest<"u",SR=bR&&function(r){return new Promise(function(i,s){const c=qv(r);let l=c.data;const d=yn.from(c.headers).normalize();let{responseType:p,onUploadProgress:m,onDownloadProgress:g}=c,y,E,I,Y,M;function ee(){Y&&Y(),M&&M(),c.cancelToken&&c.cancelToken.unsubscribe(y),c.signal&&c.signal.removeEventListener("abort",y)}let J=new XMLHttpRequest;J.open(c.method.toUpperCase(),c.url,!0),J.timeout=c.timeout;function de(){if(!J)return;const pe=yn.from("getAllResponseHeaders"in J&&J.getAllResponseHeaders()),ne={data:!p||p==="text"||p==="json"?J.responseText:J.response,status:J.status,statusText:J.statusText,headers:pe,config:r,request:J};Bv(function(ae){i(ae),ee()},function(ae){s(ae),ee()},ne),J=null}"onloadend"in J?J.onloadend=de:J.onreadystatechange=function(){!J||J.readyState!==4||J.status===0&&!(J.responseURL&&J.responseURL.indexOf("file:")===0)||setTimeout(de)},J.onabort=function(){J&&(s(new Ye("Request aborted",Ye.ECONNABORTED,r,J)),J=null)},J.onerror=function(F){const ne=F&&F.message?F.message:"Network Error",me=new Ye(ne,Ye.ERR_NETWORK,r,J);me.event=F||null,s(me),J=null},J.ontimeout=function(){let F=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded";const ne=c.transitional||Iv;c.timeoutErrorMessage&&(F=c.timeoutErrorMessage),s(new Ye(F,ne.clarifyTimeoutError?Ye.ETIMEDOUT:Ye.ECONNABORTED,r,J)),J=null},l===void 0&&d.setContentType(null),"setRequestHeader"in J&&ge.forEach(d.toJSON(),function(F,ne){J.setRequestHeader(ne,F)}),ge.isUndefined(c.withCredentials)||(J.withCredentials=!!c.withCredentials),p&&p!=="json"&&(J.responseType=c.responseType),g&&([I,M]=bc(g,!0),J.addEventListener("progress",I)),m&&J.upload&&([E,Y]=bc(m),J.upload.addEventListener("progress",E),J.upload.addEventListener("loadend",Y)),(c.cancelToken||c.signal)&&(y=pe=>{J&&(s(!pe||pe.type?new Eo(null,r,J):pe),J.abort(),J=null)},c.cancelToken&&c.cancelToken.subscribe(y),c.signal&&(c.signal.aborted?y():c.signal.addEventListener("abort",y)));const ue=fR(c.url);if(ue&&nn.protocols.indexOf(ue)===-1){s(new Ye("Unsupported protocol "+ue+":",Ye.ERR_BAD_REQUEST,r));return}J.send(l||null)})},wR=(r,n)=>{const{length:i}=r=r?r.filter(Boolean):[];if(n||i){let s=new AbortController,c;const l=function(g){if(!c){c=!0,p();const y=g instanceof Error?g:this.reason;s.abort(y instanceof Ye?y:new Eo(y instanceof Error?y.message:y))}};let d=n&&setTimeout(()=>{d=null,l(new Ye(`timeout ${n} of ms exceeded`,Ye.ETIMEDOUT))},n);const p=()=>{r&&(d&&clearTimeout(d),d=null,r.forEach(g=>{g.unsubscribe?g.unsubscribe(l):g.removeEventListener("abort",l)}),r=null)};r.forEach(g=>g.addEventListener("abort",l));const{signal:m}=s;return m.unsubscribe=()=>ge.asap(p),m}},TR=function*(r,n){let i=r.byteLength;if(i<n){yield r;return}let s=0,c;for(;s<i;)c=s+n,yield r.slice(s,c),s=c},CR=async function*(r,n){for await(const i of xR(r))yield*TR(i,n)},xR=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const n=r.getReader();try{for(;;){const{done:i,value:s}=await n.read();if(i)break;yield s}}finally{await n.cancel()}},iy=(r,n,i,s)=>{const c=CR(r,n);let l=0,d,p=m=>{d||(d=!0,s&&s(m))};return new ReadableStream({async pull(m){try{const{done:g,value:y}=await c.next();if(g){p(),m.close();return}let E=y.byteLength;if(i){let I=l+=E;i(I)}m.enqueue(new Uint8Array(y))}catch(g){throw p(g),g}},cancel(m){return p(m),c.return()}},{highWaterMark:2})},oy=64*1024,{isFunction:nc}=ge,RR=(({Request:r,Response:n})=>({Request:r,Response:n}))(ge.global),{ReadableStream:sy,TextEncoder:ay}=ge.global,cy=(r,...n)=>{try{return!!r(...n)}catch{return!1}},ER=r=>{r=ge.merge.call({skipUndefined:!0},RR,r);const{fetch:n,Request:i,Response:s}=r,c=n?nc(n):typeof fetch=="function",l=nc(i),d=nc(s);if(!c)return!1;const p=c&&nc(sy),m=c&&(typeof ay=="function"?(M=>ee=>M.encode(ee))(new ay):async M=>new Uint8Array(await new i(M).arrayBuffer())),g=l&&p&&cy(()=>{let M=!1;const ee=new i(nn.origin,{body:new sy,method:"POST",get duplex(){return M=!0,"half"}}).headers.has("Content-Type");return M&&!ee}),y=d&&p&&cy(()=>ge.isReadableStream(new s("").body)),E={stream:y&&(M=>M.body)};c&&["text","arrayBuffer","blob","formData","stream"].forEach(M=>{!E[M]&&(E[M]=(ee,J)=>{let de=ee&&ee[M];if(de)return de.call(ee);throw new Ye(`Response type '${M}' is not supported`,Ye.ERR_NOT_SUPPORT,J)})});const I=async M=>{if(M==null)return 0;if(ge.isBlob(M))return M.size;if(ge.isSpecCompliantForm(M))return(await new i(nn.origin,{method:"POST",body:M}).arrayBuffer()).byteLength;if(ge.isArrayBufferView(M)||ge.isArrayBuffer(M))return M.byteLength;if(ge.isURLSearchParams(M)&&(M=M+""),ge.isString(M))return(await m(M)).byteLength},Y=async(M,ee)=>{const J=ge.toFiniteNumber(M.getContentLength());return J??I(ee)};return async M=>{let{url:ee,method:J,data:de,signal:ue,cancelToken:pe,timeout:F,onDownloadProgress:ne,onUploadProgress:me,responseType:ae,headers:_e,withCredentials:Ce="same-origin",fetchOptions:Re}=qv(M),Le=n||fetch;ae=ae?(ae+"").toLowerCase():"text";let Ie=wR([ue,pe&&pe.toAbortSignal()],F),Ne=null;const Se=Ie&&Ie.unsubscribe&&(()=>{Ie.unsubscribe()});let De;try{if(me&&g&&J!=="get"&&J!=="head"&&(De=await Y(_e,de))!==0){let S=new i(ee,{method:"POST",body:de,duplex:"half"}),j;if(ge.isFormData(de)&&(j=S.headers.get("content-type"))&&_e.setContentType(j),S.body){const[x,b]=ty(De,bc(ny(me)));de=iy(S.body,oy,x,b)}}ge.isString(Ce)||(Ce=Ce?"include":"omit");const q=l&&"credentials"in i.prototype,U={...Re,signal:Ie,method:J.toUpperCase(),headers:_e.normalize().toJSON(),body:de,duplex:"half",credentials:q?Ce:void 0};Ne=l&&new i(ee,U);let Q=await(l?Le(Ne,Re):Le(ee,U));const L=y&&(ae==="stream"||ae==="response");if(y&&(ne||L&&Se)){const S={};["status","statusText","headers"].forEach(C=>{S[C]=Q[C]});const j=ge.toFiniteNumber(Q.headers.get("content-length")),[x,b]=ne&&ty(j,bc(ny(ne),!0))||[];Q=new s(iy(Q.body,oy,x,()=>{b&&b(),Se&&Se()}),S)}ae=ae||"text";let W=await E[ge.findKey(E,ae)||"text"](Q,M);return!L&&Se&&Se(),await new Promise((S,j)=>{Bv(S,j,{data:W,headers:yn.from(Q.headers),status:Q.status,statusText:Q.statusText,config:M,request:Ne})})}catch(q){throw Se&&Se(),q&&q.name==="TypeError"&&/Load failed|fetch/i.test(q.message)?Object.assign(new Ye("Network Error",Ye.ERR_NETWORK,M,Ne),{cause:q.cause||q}):Ye.from(q,q&&q.code,M,Ne)}}},_R=new Map,$v=r=>{let n=r&&r.env||{};const{fetch:i,Request:s,Response:c}=n,l=[s,c,i];let d=l.length,p=d,m,g,y=_R;for(;p--;)m=l[p],g=y.get(m),g===void 0&&y.set(m,g=p?new Map:ER(n)),y=g;return g};$v();const cf={http:Vx,xhr:SR,fetch:{get:$v}};ge.forEach(cf,(r,n)=>{if(r){try{Object.defineProperty(r,"name",{value:n})}catch{}Object.defineProperty(r,"adapterName",{value:n})}});const ly=r=>`- ${r}`,kR=r=>ge.isFunction(r)||r===null||r===!1;function AR(r,n){r=ge.isArray(r)?r:[r];const{length:i}=r;let s,c;const l={};for(let d=0;d<i;d++){s=r[d];let p;if(c=s,!kR(s)&&(c=cf[(p=String(s)).toLowerCase()],c===void 0))throw new Ye(`Unknown adapter '${p}'`);if(c&&(ge.isFunction(c)||(c=c.get(n))))break;l[p||"#"+d]=c}if(!c){const d=Object.entries(l).map(([m,g])=>`adapter ${m} `+(g===!1?"is not supported by the environment":"is not available in the build"));let p=i?d.length>1?`since :
`+d.map(ly).join(`
`):" "+ly(d[0]):"as no adapter specified";throw new Ye("There is no suitable adapter to dispatch the request "+p,"ERR_NOT_SUPPORT")}return c}const Vv={getAdapter:AR,adapters:cf};function yd(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Eo(null,r)}function uy(r){return yd(r),r.headers=yn.from(r.headers),r.data=gd.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),Vv.getAdapter(r.adapter||zs.adapter,r)(r).then(function(s){return yd(r),s.data=gd.call(r,r.transformResponse,s),s.headers=yn.from(s.headers),s},function(s){return Lv(s)||(yd(r),s&&s.response&&(s.response.data=gd.call(r,r.transformResponse,s.response),s.response.headers=yn.from(s.response.headers))),Promise.reject(s)})}const Gv="1.13.2",Uc={};["object","boolean","number","function","string","symbol"].forEach((r,n)=>{Uc[r]=function(s){return typeof s===r||"a"+(n<1?"n ":" ")+r}});const dy={};Uc.transitional=function(n,i,s){function c(l,d){return"[Axios v"+Gv+"] Transitional option '"+l+"'"+d+(s?". "+s:"")}return(l,d,p)=>{if(n===!1)throw new Ye(c(d," has been removed"+(i?" in "+i:"")),Ye.ERR_DEPRECATED);return i&&!dy[d]&&(dy[d]=!0,console.warn(c(d," has been deprecated since v"+i+" and will be removed in the near future"))),n?n(l,d,p):!0}};Uc.spelling=function(n){return(i,s)=>(console.warn(`${s} is likely a misspelling of ${n}`),!0)};function NR(r,n,i){if(typeof r!="object")throw new Ye("options must be an object",Ye.ERR_BAD_OPTION_VALUE);const s=Object.keys(r);let c=s.length;for(;c-- >0;){const l=s[c],d=n[l];if(d){const p=r[l],m=p===void 0||d(p,l,r);if(m!==!0)throw new Ye("option "+l+" must be "+m,Ye.ERR_BAD_OPTION_VALUE);continue}if(i!==!0)throw new Ye("Unknown option "+l,Ye.ERR_BAD_OPTION)}}const pc={assertOptions:NR,validators:Uc},Jn=pc.validators;let bi=class{constructor(n){this.defaults=n||{},this.interceptors={request:new Zg,response:new Zg}}async request(n,i){try{return await this._request(n,i)}catch(s){if(s instanceof Error){let c={};Error.captureStackTrace?Error.captureStackTrace(c):c=new Error;const l=c.stack?c.stack.replace(/^.+\n/,""):"";try{s.stack?l&&!String(s.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+l):s.stack=l}catch{}}throw s}}_request(n,i){typeof n=="string"?(i=i||{},i.url=n):i=n||{},i=Ci(this.defaults,i);const{transitional:s,paramsSerializer:c,headers:l}=i;s!==void 0&&pc.assertOptions(s,{silentJSONParsing:Jn.transitional(Jn.boolean),forcedJSONParsing:Jn.transitional(Jn.boolean),clarifyTimeoutError:Jn.transitional(Jn.boolean)},!1),c!=null&&(ge.isFunction(c)?i.paramsSerializer={serialize:c}:pc.assertOptions(c,{encode:Jn.function,serialize:Jn.function},!0)),i.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?i.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:i.allowAbsoluteUrls=!0),pc.assertOptions(i,{baseUrl:Jn.spelling("baseURL"),withXsrfToken:Jn.spelling("withXSRFToken")},!0),i.method=(i.method||this.defaults.method||"get").toLowerCase();let d=l&&ge.merge(l.common,l[i.method]);l&&ge.forEach(["delete","get","head","post","put","patch","common"],M=>{delete l[M]}),i.headers=yn.concat(d,l);const p=[];let m=!0;this.interceptors.request.forEach(function(ee){typeof ee.runWhen=="function"&&ee.runWhen(i)===!1||(m=m&&ee.synchronous,p.unshift(ee.fulfilled,ee.rejected))});const g=[];this.interceptors.response.forEach(function(ee){g.push(ee.fulfilled,ee.rejected)});let y,E=0,I;if(!m){const M=[uy.bind(this),void 0];for(M.unshift(...p),M.push(...g),I=M.length,y=Promise.resolve(i);E<I;)y=y.then(M[E++],M[E++]);return y}I=p.length;let Y=i;for(;E<I;){const M=p[E++],ee=p[E++];try{Y=M(Y)}catch(J){ee.call(this,J);break}}try{y=uy.call(this,Y)}catch(M){return Promise.reject(M)}for(E=0,I=g.length;E<I;)y=y.then(g[E++],g[E++]);return y}getUri(n){n=Ci(this.defaults,n);const i=Hv(n.baseURL,n.url,n.allowAbsoluteUrls);return Pv(i,n.params,n.paramsSerializer)}};ge.forEach(["delete","get","head","options"],function(n){bi.prototype[n]=function(i,s){return this.request(Ci(s||{},{method:n,url:i,data:(s||{}).data}))}});ge.forEach(["post","put","patch"],function(n){function i(s){return function(l,d,p){return this.request(Ci(p||{},{method:n,headers:s?{"Content-Type":"multipart/form-data"}:{},url:l,data:d}))}}bi.prototype[n]=i(),bi.prototype[n+"Form"]=i(!0)});let OR=class Fv{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let i;this.promise=new Promise(function(l){i=l});const s=this;this.promise.then(c=>{if(!s._listeners)return;let l=s._listeners.length;for(;l-- >0;)s._listeners[l](c);s._listeners=null}),this.promise.then=c=>{let l;const d=new Promise(p=>{s.subscribe(p),l=p}).then(c);return d.cancel=function(){s.unsubscribe(l)},d},n(function(l,d,p){s.reason||(s.reason=new Eo(l,d,p),i(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const i=this._listeners.indexOf(n);i!==-1&&this._listeners.splice(i,1)}toAbortSignal(){const n=new AbortController,i=s=>{n.abort(s)};return this.subscribe(i),n.signal.unsubscribe=()=>this.unsubscribe(i),n.signal}static source(){let n;return{token:new Fv(function(c){n=c}),cancel:n}}};function jR(r){return function(i){return r.apply(null,i)}}function MR(r){return ge.isObject(r)&&r.isAxiosError===!0}const zd={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(zd).forEach(([r,n])=>{zd[n]=r});function Xv(r){const n=new bi(r),i=xv(bi.prototype.request,n);return ge.extend(i,bi.prototype,n,{allOwnKeys:!0}),ge.extend(i,n,null,{allOwnKeys:!0}),i.create=function(c){return Xv(Ci(r,c))},i}const _t=Xv(zs);_t.Axios=bi;_t.CanceledError=Eo;_t.CancelToken=OR;_t.isCancel=Lv;_t.VERSION=Gv;_t.toFormData=Mc;_t.AxiosError=Ye;_t.Cancel=_t.CanceledError;_t.all=function(n){return Promise.all(n)};_t.spread=jR;_t.isAxiosError=MR;_t.mergeConfig=Ci;_t.AxiosHeaders=yn;_t.formToJSON=r=>zv(ge.isHTMLForm(r)?new FormData(r):r);_t.getAdapter=Vv.getAdapter;_t.HttpStatusCode=zd;_t.default=_t;const{Axios:pj,AxiosError:mj,CanceledError:gj,isCancel:yj,CancelToken:vj,VERSION:bj,all:Sj,Cancel:wj,isAxiosError:Tj,spread:Cj,toFormData:xj,AxiosHeaders:Rj,HttpStatusCode:Ej,formToJSON:_j,getAdapter:kj,mergeConfig:Aj}=_t,UR=()=>"https://festive-guest-api.azurewebsites.net/api",Je=_t.create({baseURL:UR(),timeout:1e4});Je.interceptors.request.use(r=>(console.log("API Request:",{method:r.method?.toUpperCase(),url:r.baseURL+"/"+r.url,headers:{...r.headers,Authorization:r.headers.Authorization?"[HIDDEN]":void 0}}),r),r=>(console.error("Request Error:",r),Promise.reject(r)));Je.interceptors.request.use(r=>{try{const n=localStorage.getItem("user");if(n){const i=JSON.parse(n);i&&i.token&&(r.headers.Authorization=`Bearer ${i.token}`)}}catch{console.warn("Failed to read user from storage")}return r},r=>Promise.reject(r));Je.interceptors.response.use(r=>r,r=>(console.error("API Error Details:",{status:r.response?.status,statusText:r.response?.statusText,url:r.config?.url,method:r.config?.method,baseURL:r.config?.baseURL,data:r.response?.data,message:r.message}),(r.response?.status===401||r.response?.status===403)&&(localStorage.removeItem("user"),localStorage.removeItem("userId"),window.dispatchEvent(new Event("storage")),window.location.pathname!=="/login"&&window.location.pathname!=="/"&&(window.location.href="/login")),Promise.reject(r)));const Yv={sasCache:new Map,async getSasUrl(r,n="logos"){const i=`${n}/${r}`,s=this.sasCache.get(i);if(s&&s.expiresAt>Date.now())return s.url;try{const l=(await Je.get("storage/get-sas-url",{params:{fileName:r,container:n}})).data.url;return this.sasCache.set(i,{url:l,expiresAt:Date.now()+3e3*1e3}),l}catch(c){return console.error("Error fetching SAS URL:",c),null}},clearCache(){this.sasCache.clear()},needsSasToken(r){return r&&r.includes("blob.core.windows.net")&&!r.includes("?")}},DR=({className:r="",style:n={},alt:i="FestiveGuest Logo",isLoginLogo:s=!1})=>{const[c,l]=z.useState(""),[d,p]=z.useState(!0);return z.useEffect(()=>{(async()=>{try{const g=s?"login-logo.png":"logo.png",y=await Yv.getSasUrl(g,"logos");l(y)}catch(g){console.error("Error loading logo:",g),l(s?"/assets/login-logo.png":"/assets/logo.png")}finally{p(!1)}})()},[s]),d?h.jsx("div",{className:r,style:{...n,background:"#f0f0f0"}}):h.jsx("img",{src:c,alt:i,className:r,style:n})},PR=()=>h.jsx("div",{className:"loader-container",children:h.jsx("div",{className:"logo-loader",children:h.jsx("img",{src:"/assets/login-logo.png",alt:"FestiveGuest",className:"loader-logo"})})});class IR{constructor(){this.locations=null,this.loading=!1}async getLocations(){if(this.locations)return this.locations;if(this.loading){for(;this.loading;)await new Promise(n=>setTimeout(n,100));return this.locations}this.loading=!0;try{const n=await Je.get("location/states-with-cities");return this.locations=n.data,this.locations}catch(n){throw console.error("DEBUG: Failed to fetch locations from API:",n),new Error("Unable to load location data (API Error). Please try again later.")}finally{this.loading=!1}}async seedLocations(){try{const n=await Je.post("location/seed");return this.locations=null,n.data}catch(n){throw console.error("Failed to seed locations:",n),n}}clearCache(){this.locations=null}}const lf=new IR,zR=()=>{const[r,n]=z.useState([]),[i,s]=z.useState(!1),c=(p,m="info")=>{n(g=>[...g,{message:p,type:m,timestamp:new Date().toLocaleTimeString()}])},l=async()=>{s(!0),n([]);try{c(" Testing API connectivity...","info");try{c(` API Base URL: ${Je.defaults.baseURL}`,"info");const p=await Je.get("health");c(" API Health Check: SUCCESS","success")}catch(p){c(` API Health Check: ${p.message}`,"error")}try{c(" Testing location service...","info");const p=await lf.getLocations(),m=Object.keys(p||{}).length;c(` Locations loaded: ${m} states found`,"success")}catch(p){c(` Location service: ${p.message}`,"error")}try{c(" Testing direct location API...","info");const p=await Je.get("location/states-with-cities"),m=Object.keys(p.data||{}).length;c(` Direct API call: ${m} states found`,"success")}catch(p){c(` Direct API call: ${p.message}`,"error")}}catch(p){c(` Test suite failed: ${p.message}`,"error")}finally{s(!1)}},d=()=>{n([])};return h.jsxs("div",{style:{padding:"2rem",maxWidth:"800px",margin:"0 auto",fontFamily:"monospace"},children:[h.jsx("h2",{children:" API Connectivity Test"}),h.jsx("p",{children:"Use this tool to test your API connectivity and location loading."}),h.jsxs("div",{style:{marginBottom:"1rem"},children:[h.jsx("button",{onClick:l,disabled:i,style:{padding:"0.75rem 1.5rem",backgroundColor:i?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"0.5rem",cursor:i?"not-allowed":"pointer",marginRight:"1rem"},children:i?" Testing...":" Run Tests"}),h.jsx("button",{onClick:d,style:{padding:"0.75rem 1.5rem",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"0.5rem",cursor:"pointer"},children:" Clear Results"})]}),h.jsx("div",{style:{backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"0.5rem",padding:"1rem",minHeight:"200px",maxHeight:"400px",overflowY:"auto"},children:r.length===0?h.jsx("p",{style:{color:"#6c757d",fontStyle:"italic"},children:'Click "Run Tests" to start testing your API connectivity...'}):r.map((p,m)=>h.jsxs("div",{style:{marginBottom:"0.5rem",padding:"0.5rem",borderRadius:"0.25rem",backgroundColor:p.type==="success"?"#d4edda":p.type==="error"?"#f8d7da":"#d1ecf1",color:p.type==="success"?"#155724":p.type==="error"?"#721c24":"#0c5460"},children:[h.jsxs("span",{style:{fontSize:"0.8rem",opacity:.7},children:["[",p.timestamp,"]"]})," ",p.message]},m))}),h.jsxs("div",{style:{marginTop:"1rem",fontSize:"0.9rem",color:"#6c757d"},children:[h.jsxs("p",{children:[h.jsx("strong",{children:"Environment:"})," ","production"]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Current API Base:"})," ",Je.defaults.baseURL]})]})]})},LR=({user:r})=>{const n=Wr(),i=()=>{const s=r?.role||r?.userType||r?.partitionKey;return s==="Host"?"/host-dashboard":s==="Guest"?"/guest-dashboard":s==="Admin"?"/admin":"/"};return h.jsxs("div",{className:"landing-page",children:[h.jsxs("section",{className:"hero",children:[h.jsxs("div",{className:"hero-content",children:[h.jsx("h1",{className:"hero-title",children:"Celebrate Festivals with Local Friends"}),h.jsx("p",{className:"hero-subtitle",children:"Experience authentic Pongal celebrations in East & West Godavari districts"}),h.jsx("div",{className:"hero-buttons",children:r?h.jsx("button",{className:"btn btn-primary",onClick:()=>n(i()),children:"Go to My Dashboard"}):h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"btn btn-primary",onClick:()=>n("/register?role=Guest"),children:"Join as Guest"}),h.jsx("button",{className:"btn btn-secondary",onClick:()=>n("/register?role=Host"),children:"Become a Host"})]})})]}),h.jsx("div",{className:"hero-image",children:h.jsxs("div",{className:"festival-card",children:[h.jsx("h3",{children:" Festival Season"}),h.jsx("p",{children:"Connect with locals during Pongal, Diwali, and other celebrations"})]})})]}),h.jsx("section",{className:"features",children:h.jsxs("div",{className:"container",children:[h.jsx("h2",{children:"Why Choose Festive Guest?"}),h.jsxs("div",{className:"features-grid",children:[h.jsxs("div",{className:"feature-card",children:[h.jsx("div",{className:"feature-icon",children:""}),h.jsx("h3",{children:"Local Accommodation"}),h.jsx("p",{children:"Stay with friendly hosts who provide comfortable accommodation during festival season"})]}),h.jsxs("div",{className:"feature-card",children:[h.jsx("div",{className:"feature-icon",children:""}),h.jsx("h3",{children:"Guided Tours"}),h.jsx("p",{children:"Explore nearby temples, cultural sites, and hidden gems with local guides"})]}),h.jsxs("div",{className:"feature-card",children:[h.jsx("div",{className:"feature-icon",children:""}),h.jsx("h3",{children:"Make New Friends"}),h.jsx("p",{children:"Connect with locals and fellow travelers, create lasting friendships"})]}),h.jsxs("div",{className:"feature-card",children:[h.jsx("div",{className:"feature-icon",children:""}),h.jsx("h3",{children:"Authentic Experience"}),h.jsx("p",{children:"Participate in traditional celebrations, enjoy homemade festival food"})]})]})]})}),h.jsx("section",{className:"how-it-works",children:h.jsxs("div",{className:"container",children:[h.jsx("h2",{children:"How It Works"}),h.jsxs("div",{className:"steps",children:[h.jsxs("div",{className:"step",children:[h.jsx("div",{className:"step-number",children:"1"}),h.jsx("h3",{children:"Register"}),h.jsx("p",{children:"Sign up as a Guest or Host for free"})]}),h.jsxs("div",{className:"step",children:[h.jsx("div",{className:"step-number",children:"2"}),h.jsx("h3",{children:"Connect"}),h.jsx("p",{children:"Browse profiles and connect with hosts/guests"})]}),h.jsxs("div",{className:"step",children:[h.jsx("div",{className:"step-number",children:"3"}),h.jsx("h3",{children:"Celebrate"}),h.jsx("p",{children:"Enjoy authentic festival experiences together"})]})]})]})}),h.jsx("section",{className:"testimonials",children:h.jsxs("div",{className:"container",children:[h.jsx("h2",{children:"What Our Users Say"}),h.jsxs("div",{className:"testimonials-grid",children:[h.jsxs("div",{className:"testimonial",children:[h.jsx("p",{children:'"Amazing Pongal experience in Rajahmundry! The host family treated me like their own."'}),h.jsx("div",{className:"testimonial-author",children:"- Priya, Hyderabad"})]}),h.jsxs("div",{className:"testimonial",children:[h.jsx("p",{children:'"Met wonderful guests during Diwali. Sharing our traditions was so fulfilling."'}),h.jsx("div",{className:"testimonial-author",children:"- Ravi, Kakinada"})]})]})]})}),h.jsx("section",{className:"cta",children:h.jsxs("div",{className:"container",children:[h.jsx("h2",{children:"Ready to Start Your Festival Journey?"}),h.jsx("p",{children:"Join thousands of travelers and hosts celebrating together"}),h.jsx("div",{className:"cta-buttons",children:r?h.jsx("button",{className:"btn btn-primary",onClick:()=>n(i()),children:"Go to My Dashboard"}):h.jsxs(h.Fragment,{children:[h.jsx("button",{className:"btn btn-primary",onClick:()=>n("/register?role=Guest"),children:"Get Started"}),h.jsx("button",{className:"btn btn-primary",onClick:()=>n("/login"),children:"Already have an account?"})]})})]})}),h.jsx("footer",{className:"footer",children:h.jsx("div",{className:"container",children:h.jsx("p",{children:" 2024 Festive Guest Marketplace. Connecting hearts during festivals."})})})]})},BR=({setUser:r})=>{const[n,i]=z.useState(""),[s,c]=z.useState(""),[l,d]=z.useState(!1),[p,m]=z.useState(!1),[g,y]=z.useState(null),[E,I]=z.useState(""),[Y,M]=z.useState(""),ee=Wr(),J=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,de=F=>F?J.test(F)?(I(""),!0):(I("Please enter a valid email address"),!1):(I(""),!0);z.useEffect(()=>{const F=localStorage.getItem("user"),ne=localStorage.getItem("token");F&&ne&&ee("/"),M("/assets/login-logo.png")},[ee]);const ue=(F,ne="success")=>{y({message:F,type:ne}),ne==="success"&&setTimeout(()=>{y(me=>me?{...me,hiding:!0}:null),setTimeout(()=>y(null),300)},5e3)},pe=async F=>{F?.preventDefault(),m(!0);try{const ne=await Je.post("auth/login",{email:n,password:s});if(ne?.data?.success&&ne?.data?.token){const{token:me,user:ae}=ne.data,_e={...ae,token:me};localStorage.setItem("user",JSON.stringify(_e)),localStorage.setItem("userId",ae.userId),localStorage.setItem("token",me),r(_e),ue("Login successful! Redirecting...","success"),setTimeout(()=>ee("/"),1e3);return}ue("Login failed","error")}catch(ne){ne.response?.status===429?ue("Too many login attempts. Please wait 15 minutes and try again.","error"):ue("Login failed: "+(ne.response?.data?.message||ne.message),"error")}finally{m(!1)}};return h.jsxs("div",{className:"container",children:[g&&h.jsx("div",{className:"toast-container",children:h.jsxs("div",{className:`toast ${g.type} ${g.hiding?"hiding":""}`,children:[h.jsx("span",{className:"toast-icon",children:g.type==="success"?"":g.type==="error"?"":""}),h.jsx("div",{className:"toast-content",children:h.jsx("p",{className:"toast-message",children:g.message})}),g.type!=="success"&&h.jsx("button",{onClick:()=>y(null),style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.5rem"},children:""})]})}),h.jsxs("div",{className:"card",style:{maxWidth:"450px",margin:"50px auto",textAlign:"center"},children:[h.jsxs("div",{style:{marginBottom:"2rem"},children:[h.jsx("img",{src:"/assets/login-logo.png",alt:"Festive Guest Logo",style:{height:"150px",width:"auto",marginBottom:"1.5rem"}}),h.jsx("p",{style:{color:"#64748b",fontSize:"1.1rem"},children:"Connect Guests and Hosts for memorable experiences"})]}),h.jsxs("form",{onSubmit:pe,style:{marginTop:"30px"},children:[h.jsxs("div",{className:"form-group",children:[h.jsx("input",{type:"email",className:"form-control",placeholder:"Enter your email address",value:n,onChange:F=>{i(F.target.value),de(F.target.value)},onBlur:F=>de(F.target.value),required:!0,style:{fontSize:"1rem",padding:"1rem",borderColor:E?"#dc2626":"#cbd5e1"}}),E&&h.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",E]})]}),h.jsxs("div",{className:"form-group",style:{position:"relative"},children:[h.jsx("input",{type:l?"text":"password",className:"form-control",placeholder:"Enter your password",value:s,onChange:F=>c(F.target.value),required:!0,style:{fontSize:"1rem",padding:"1rem",paddingRight:"3rem"}}),h.jsx("button",{type:"button",onClick:()=>d(!l),style:{position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#64748b",display:"flex",alignItems:"center",padding:"0"},children:l?h.jsx(bv,{size:20}):h.jsx(kc,{size:20})})]}),h.jsx("button",{type:"submit",className:"btn btn-primary",style:{width:"100%",padding:"1rem",fontSize:"1.1rem"},disabled:p||E!=="",children:p?"Logging in...":"Login"})]}),h.jsx("div",{style:{marginTop:"2rem",padding:"1.5rem",background:"#f8fafc",borderRadius:"1rem",border:"1px solid #e2e8f0"},children:h.jsxs("p",{style:{margin:"0",color:"#64748b",fontSize:"1.05rem"},children:["New user? ",h.jsx("button",{className:"btn btn-primary",onClick:()=>ee("/register"),style:{marginLeft:"0.5rem",padding:"0.5rem 1.5rem"},children:"Register"})]})})]})]})},HR=({setUser:r})=>{const n=Wr(),i=Wn(),[s,c]=z.useState({}),[l,d]=z.useState({userId:crypto.randomUUID(),name:"",email:"",password:"",phone:"",state:"",city:"",otherCity:"",bio:"",role:"Guest",status:"Active"}),[p,m]=z.useState(!1),[g,y]=z.useState(null),[E,I]=z.useState(""),[Y,M]=z.useState(""),[ee,J]=z.useState(null),[de,ue]=z.useState(""),[pe,F]=z.useState(!1),[ne,me]=z.useState(""),[ae,_e]=z.useState(!1),[Ce,Re]=z.useState(!1),[Le,Ie]=z.useState(!1),[Ne,Se]=z.useState(""),[De,q]=z.useState(""),[U,Q]=z.useState(""),[L,W]=z.useState(!1),[S,j]=z.useState(!1),[x,b]=z.useState(null),C=[{label:"At least 8 characters",test:P=>P.length>=8},{label:"One uppercase letter",test:P=>/[A-Z]/.test(P)},{label:"One lowercase letter",test:P=>/[a-z]/.test(P)},{label:"One number",test:P=>/\d/.test(P)},{label:"One special character",test:P=>/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(P)}],A=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,N=/^[6-9]\d{9}$/,w=P=>P?A.test(P)?(Se(""),!0):(Se("Please enter a valid email address"),!1):(Se(""),!0),R=P=>{if(!P)return q(""),!0;const X=P.replace(/\D/g,"");return N.test(X)?(q(""),!0):(q("Please enter a valid 10-digit Indian mobile number (starting with 6-9). This helps other users contact you accurately."),!1)},k=(P,X="success")=>{y({message:P,type:X}),X==="success"&&setTimeout(()=>{y(Ee=>Ee?{...Ee,hiding:!0}:null),setTimeout(()=>y(null),300)},5e3)};z.useEffect(()=>{const X=new URLSearchParams(i.search).get("role");(X==="Guest"||X==="Host")&&d(Ee=>({...Ee,role:X}))},[i.search]),z.useEffect(()=>{(async()=>{try{console.log("Loading locations using locationService...");const X=await lf.getLocations();console.log("Locations loaded successfully:",X),c(X)}catch(X){console.error("DEBUG: Failed to load locations:",X),console.error("Error details:",{message:X.message,response:X.response?.data,status:X.response?.status,url:X.config?.url}),k("Registration Error: "+X.message,"error")}})().catch(X=>console.error("CRITICAL: loadLocations failed",X))},[]);const H=P=>{const X=P.target.value;K(P),w(X),X!==ne&&(_e(!1),F(!1),I(""))},K=P=>{const{name:X,value:Ee}=P.target;d(Ae=>{const ke={...Ae,[X]:Ee};return X==="state"&&(ke.city=""),ke})},V=P=>{P.preventDefault(),se()},B=P=>{const X=P.target.checked;j(X),b(X?Date.now():null)},se=async()=>{m(!0),J(null);try{if(!ae){J("Please verify your email before completing registration."),k("Please verify your email before registering","error"),m(!1);return}if(!S||!x){J("Please accept the terms and conditions to continue."),k("You must accept the agreement to register","error"),m(!1);return}if(Date.now()-x>3e5){J("Agreement acceptance expired. Please re-accept the terms."),j(!1),b(null),k("Please re-accept the agreement","error"),m(!1);return}const P=l.city==="Other"?l.otherCity:l.city,X={email:ne,password:l.password,name:l.name,phone:l.phone,userType:l.role,location:`${P}, ${l.state}`,bio:l.bio};console.log("Sending registration payload:",X);let Ae=(await Je.post("auth/register",X)).data;if(console.log("Registration response:",Ae),Ae.success||Ae.message==="User registered successfully")k(" Registration successful! Please login to continue.","success"),setTimeout(()=>n("/login"),2e3);else throw new Error(Ae.message||"Registration failed")}catch(P){console.error("Registration error:",P),console.error("Error response:",P.response?.data);const X=P.response?.data?.message||P.response?.data?.error||P.message;if(P.response?.status===429){const Ee="Too many attempts. Please wait 15 minutes and try again.";J(Ee),k(Ee,"error")}else if(P.response?.status===500){const Ee="Server error occurred. Please try again later or contact support if the issue persists.";J(`Server Error: ${X||"Internal server error"}`),k(Ee,"error")}else J(X),k("Registration failed: "+X,"error")}finally{m(!1)}},he=async()=>{if(!l.email){k("Please enter an email address first","error");return}Re(!0);try{console.log("Sending OTP request:",{email:l.email,purpose:"registration"});const P=await Je.post("email/send-otp",{email:l.email,purpose:"registration"});console.log("OTP response:",P.data),P.data.success&&(F(!0),M(l.email),k("OTP sent to your email","success"))}catch(P){console.error("OTP Error Details:",{status:P.response?.status,data:P.response?.data,message:P.message,fullResponse:P.response}),console.error("Full error object:",P);const X=P.response?.data?.message||P.response?.data?.error||P.response?.data||P.message;J(JSON.stringify(P.response?.data)||X),k("Failed to send OTP: "+X,"error")}finally{Re(!1)}},ie=async()=>{if(!E||E.length!==6){k("Please enter a valid 6-digit code","error");return}m(!0);try{const P=await Je.post("email/validate-otp",{email:l.email,otpCode:E});P.data.success&&(me(l.email),_e(!0),F(!1),ue(""),k(P.data?.message||"Email verified","success"))}catch(P){const X=P.response?.data?.message||P.message;k("Verification failed: "+X,"error")}finally{m(!1)}};return h.jsxs("div",{className:"container",children:[g&&h.jsx("div",{className:"toast-container",children:h.jsxs("div",{className:`toast ${g.type} ${g.hiding?"hiding":""}`,children:[h.jsx("span",{className:"toast-icon",children:g.type==="success"?"":g.type==="error"?"":""}),h.jsx("div",{className:"toast-content",children:h.jsx("p",{className:"toast-message",children:g.message})}),g.type!=="success"&&h.jsx("button",{onClick:()=>y(null),style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.5rem"},children:""})]})}),ee&&h.jsxs("div",{style:{maxWidth:"1200px",margin:"10px auto",color:"#b91c1c",background:"#fee2e2",padding:"10px",borderRadius:"6px"},children:[h.jsx("strong",{children:"Error:"})," ",ee]}),h.jsxs("div",{className:"registration-layout",children:[h.jsxs("div",{className:"disclaimer-section",children:[h.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[h.jsx("h2",{style:{color:"#1e293b",marginBottom:"0.5rem"},children:"Welcome to FestiveGuest"}),h.jsx("p",{style:{color:"#64748b"},children:"Connect with festival enthusiasts"})]}),h.jsxs("div",{style:{padding:"1.5rem",background:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"0.75rem",borderLeft:"4px solid #f59e0b",height:"fit-content",position:"sticky",top:"2rem"},children:[h.jsx("h4",{style:{margin:"0 0 1rem 0",color:"#92400e",fontSize:"1rem",fontWeight:"600"},children:" Important Disclaimer"}),h.jsxs("div",{style:{color:"#92400e",fontSize:"0.9rem",lineHeight:"1.5"},children:[h.jsxs("p",{style:{margin:"0 0 0.75rem 0"},children:[h.jsx("strong",{children:"FestiveGuest"})," is a platform that connects like-minded people for festival celebrations. By registering, you acknowledge and agree that:"]}),h.jsxs("ul",{style:{margin:"0",paddingLeft:"1.25rem"},children:[h.jsxs("li",{style:{marginBottom:"0.5rem"},children:["We are ",h.jsx("strong",{children:"not responsible"})," for any incidents, damages, or issues that may occur during your interactions or meetings."]}),h.jsxs("li",{style:{marginBottom:"0.5rem"},children:["We do ",h.jsx("strong",{children:"not guarantee"})," that you will find suitable hosts or guests, as this depends on availability and mutual compatibility."]}),h.jsxs("li",{style:{marginBottom:"0.5rem"},children:["We act solely as a ",h.jsx("strong",{children:"platform for introductions"})," and do not verify the background, intentions, or authenticity of users."]}),h.jsxs("li",{style:{marginBottom:"0.5rem"},children:["All interactions, arrangements, and meetings are ",h.jsx("strong",{children:"at your own risk and discretion"}),"."]}),h.jsxs("li",{style:{marginBottom:"0.5rem"},children:[h.jsx("strong",{children:"Payment & Financial Caution:"})," Hosts may request payment for services (accommodation, food, etc.). It is entirely your responsibility to decide whether to pay in advance or after services are rendered. Both hosts and guests should exercise caution and verify each other's authenticity before any financial transactions."]}),h.jsxs("li",{children:["We ",h.jsx("strong",{children:"strongly recommend"})," meeting in public places first and taking necessary safety precautions."]})]}),h.jsx("p",{style:{margin:"0.75rem 0 0 0",fontWeight:"600"},children:"By proceeding with registration, you accept full responsibility for your safety and interactions."})]})]})]}),h.jsx("div",{className:"registration-form-section",children:h.jsxs("div",{className:"card",style:{margin:"0",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},children:[h.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[h.jsx("h3",{style:{color:"#1e293b",marginBottom:"0.5rem"},children:"Complete Your Registration"}),h.jsx("p",{style:{color:"#64748b"},children:"Join our community of festival enthusiasts"})]}),h.jsxs("form",{onSubmit:V,children:[h.jsxs("div",{className:"form-group",children:[h.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Choose Your Role"}),h.jsxs("select",{name:"role",value:l.role,onChange:K,required:!0,style:{fontSize:"1rem",padding:"1rem"},children:[h.jsx("option",{value:"Guest",children:" Guest"}),h.jsx("option",{value:"Host",children:" Host"})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Full Name"}),h.jsx("input",{type:"text",name:"name",value:l.name,onChange:K,placeholder:"Enter your full name",required:!0,style:{fontSize:"1rem",padding:"1rem"}})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Email Address"}),h.jsx("input",{type:"email",name:"email",value:l.email,onChange:H,onBlur:P=>w(P.target.value),placeholder:"Enter your email address",required:!0,disabled:ae,style:{fontSize:"1rem",padding:"1rem",borderColor:Ne?"#dc2626":"#cbd5e1",backgroundColor:ae?"#f3f4f6":"white",cursor:ae?"not-allowed":"text"}}),Ne&&h.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",Ne]}),h.jsxs("div",{style:{marginTop:"0.75rem",display:"flex",gap:"0.5rem",alignItems:"center"},children:[!ae&&!pe&&h.jsx("button",{type:"button",className:"btn btn-secondary",onClick:he,disabled:Ce||Ne!=="",children:Ce?"Sending OTP...":"Send OTP"}),pe&&h.jsxs("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[h.jsx("input",{type:"text",value:E,onChange:P=>I(P.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter OTP",maxLength:6,style:{padding:"0.5rem",fontSize:"1rem",width:"160px"}}),h.jsx("button",{type:"button",className:"btn btn-primary",onClick:ie,disabled:p||E.length!==6,children:"Verify"})]}),ae&&h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx("span",{style:{color:"#16a34a",fontWeight:"600"},children:" Email verified"}),h.jsx("button",{type:"button",onClick:()=>{_e(!1),me(""),F(!1),I("")},className:"btn btn-outline",style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},children:"Change Email"})]})]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Password"}),h.jsxs("div",{style:{position:"relative"},children:[h.jsx("input",{type:Le?"text":"password",name:"password",value:l.password,onChange:K,placeholder:"Create a strong password",required:!0,style:{fontSize:"1rem",padding:"1rem",paddingRight:"2.5rem",width:"100%",boxSizing:"border-box"}}),h.jsx("button",{type:"button",onClick:()=>Ie(!Le),style:{position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"#64748b",display:"flex",alignItems:"center",padding:"0"},children:Le?h.jsx(bv,{size:20}):h.jsx(kc,{size:20})})]}),h.jsx("div",{style:{marginTop:"0.75rem",display:"grid",gridTemplateColumns:"1fr 1fr",gap:"0.5rem"},children:C.map((P,X)=>{const Ee=P.test(l.password);return h.jsxs("div",{style:{fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.25rem",color:Ee?"#16a34a":"#dc2626",transition:"color 0.2s"},children:[h.jsx("span",{style:{fontSize:"0.9rem"},children:Ee?"":""}),P.label]},X)})})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Phone Number"}),h.jsx("input",{type:"tel",name:"phone",value:l.phone,onChange:P=>{const X=P.target.value.replace(/\D/g,"").slice(0,10);K({target:{name:"phone",value:X}}),R(X)},onBlur:P=>R(P.target.value),placeholder:"Enter your 10-digit mobile number",required:!0,maxLength:10,style:{fontSize:"1rem",padding:"1rem",borderColor:De?"#dc2626":"#cbd5e1"}}),De&&h.jsxs("p",{style:{margin:"0.5rem 0 0 0",color:"#dc2626",fontSize:"0.875rem"},children:[" ",De]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"State"}),h.jsxs("select",{name:"state",value:l.state,onChange:K,required:!0,style:{fontSize:"1rem",padding:"1rem"},children:[h.jsx("option",{value:"",children:"Select State"}),Object.keys(s||{}).map(P=>h.jsx("option",{value:P,children:P},P))]})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"City"}),h.jsxs("select",{name:"city",value:l.city,onChange:K,required:!0,disabled:!l.state,style:{fontSize:"1rem",padding:"1rem"},children:[h.jsx("option",{value:"",children:"Select City"}),l.state&&s[l.state]&&s[l.state].map(P=>h.jsx("option",{value:P,children:P},P))]})]}),l.city==="Other"&&h.jsxs("div",{className:"form-group",children:[h.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:"Enter Your City"}),h.jsx("input",{type:"text",name:"otherCity",value:l.otherCity,onChange:K,placeholder:"Name of your city",required:!0,style:{fontSize:"1rem",padding:"1rem"}})]}),h.jsxs("div",{className:"form-group",children:[h.jsx("label",{style:{fontWeight:"600",color:"#374151"},children:l.role==="Host"?"Your Offerings":"Your Festival Wishes"}),h.jsx("textarea",{name:"bio",value:l.bio,onChange:K,placeholder:l.role==="Host"?"Tell guests what you offer (e.g., accommodation, traditional food, local tours)...":"Tell hosts what you are looking for (e.g., specific festivals, types of food, culture)...",required:!0,rows:"4",maxLength:250,style:{fontSize:"1rem",padding:"1rem",width:"100%",borderRadius:"0.5rem",border:"1px solid #cbd5e1"}}),h.jsxs("div",{style:{textAlign:"right",fontSize:"0.875rem",color:"#64748b",marginTop:"0.25rem"},children:[l.bio.length,"/250 characters"]})]}),h.jsx("div",{style:{marginTop:"2rem",padding:"1.5rem",background:"#f0f9ff",border:"2px solid #0ea5e9",borderRadius:"0.75rem"},children:h.jsxs("label",{style:{display:"flex",alignItems:"flex-start",gap:"1rem",cursor:"pointer",fontSize:"1rem",lineHeight:"1.5"},children:[h.jsx("input",{type:"checkbox",checked:S,onChange:B,required:!0,style:{width:"20px",height:"20px",marginTop:"2px",cursor:"pointer",accentColor:"#0ea5e9"}}),h.jsxs("span",{style:{color:"#0c4a6e",fontWeight:"500"},children:["I have read, understood, and agree to the ",h.jsx("strong",{children:"Important Disclaimer"})," above. I acknowledge that I am using this platform at my own risk and accept full responsibility for my safety and interactions."]})]})}),h.jsx("button",{type:"submit",className:"btn btn-primary",disabled:p||!S,style:{width:"100%",padding:"1rem",fontSize:"1.1rem",marginTop:"1.5rem",opacity:S?1:.5,cursor:S?"pointer":"not-allowed"},children:p?"Registering...":"Register Now"}),!1]}),h.jsx("div",{style:{marginTop:"2rem",textAlign:"center",padding:"1.5rem",background:"#f8fafc",borderRadius:"1rem",border:"1px solid #e2e8f0"},children:h.jsxs("p",{style:{margin:"0",color:"#64748b",fontSize:"1.05rem"},children:["Already have an account? ",h.jsx("button",{className:"btn btn-primary",onClick:()=>n("/login"),style:{marginLeft:"0.5rem",padding:"0.5rem 1.5rem"},children:"Login"})]})}),!1]})})]})]})};class Si extends Error{constructor(n,i){const s=new.target.prototype;super(`${n}: Status code '${i}'`),this.statusCode=i,this.__proto__=s}}class uf extends Error{constructor(n="A timeout occurred."){const i=new.target.prototype;super(n),this.__proto__=i}}let qn=class extends Error{constructor(n="An abort occurred."){const i=new.target.prototype;super(n),this.__proto__=i}};class qR extends Error{constructor(n,i){const s=new.target.prototype;super(n),this.transport=i,this.errorType="UnsupportedTransportError",this.__proto__=s}}class $R extends Error{constructor(n,i){const s=new.target.prototype;super(n),this.transport=i,this.errorType="DisabledTransportError",this.__proto__=s}}class VR extends Error{constructor(n,i){const s=new.target.prototype;super(n),this.transport=i,this.errorType="FailedToStartTransportError",this.__proto__=s}}class fy extends Error{constructor(n){const i=new.target.prototype;super(n),this.errorType="FailedToNegotiateWithServerError",this.__proto__=i}}class GR extends Error{constructor(n,i){const s=new.target.prototype;super(n),this.innerErrors=i,this.__proto__=s}}class Jv{constructor(n,i,s){this.statusCode=n,this.statusText=i,this.content=s}}class Dc{get(n,i){return this.send({...i,method:"GET",url:n})}post(n,i){return this.send({...i,method:"POST",url:n})}delete(n,i){return this.send({...i,method:"DELETE",url:n})}getCookieString(n){return""}}var Te;(function(r){r[r.Trace=0]="Trace",r[r.Debug=1]="Debug",r[r.Information=2]="Information",r[r.Warning=3]="Warning",r[r.Error=4]="Error",r[r.Critical=5]="Critical",r[r.None=6]="None"})(Te||(Te={}));class Ns{constructor(){}log(n,i){}}Ns.instance=new Ns;const FR="10.0.0";class jt{static isRequired(n,i){if(n==null)throw new Error(`The '${i}' argument is required.`)}static isNotEmpty(n,i){if(!n||n.match(/^\s*$/))throw new Error(`The '${i}' argument should not be empty.`)}static isIn(n,i,s){if(!(n in i))throw new Error(`Unknown ${s} value: ${n}.`)}}class wt{static get isBrowser(){return!wt.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!wt.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!wt.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}}function Os(r,n){let i="";return xi(r)?(i=`Binary data of length ${r.byteLength}`,n&&(i+=`. Content: '${XR(r)}'`)):typeof r=="string"&&(i=`String data of length ${r.length}`,n&&(i+=`. Content: '${r}'`)),i}function XR(r){const n=new Uint8Array(r);let i="";return n.forEach(s=>{const c=s<16?"0":"";i+=`0x${c}${s.toString(16)} `}),i.substring(0,i.length-1)}function xi(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}async function Kv(r,n,i,s,c,l){const d={},[p,m]=yo();d[p]=m,r.log(Te.Trace,`(${n} transport) sending data. ${Os(c,l.logMessageContent)}.`);const g=xi(c)?"arraybuffer":"text",y=await i.post(s,{content:c,headers:{...d,...l.headers},responseType:g,timeout:l.timeout,withCredentials:l.withCredentials});r.log(Te.Trace,`(${n} transport) request complete. Response status: ${y.statusCode}.`)}function YR(r){return r===void 0?new Sc(Te.Information):r===null?Ns.instance:r.log!==void 0?r:new Sc(r)}class JR{constructor(n,i){this._subject=n,this._observer=i}dispose(){const n=this._subject.observers.indexOf(this._observer);n>-1&&this._subject.observers.splice(n,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(i=>{})}}class Sc{constructor(n){this._minLevel=n,this.out=console}log(n,i){if(n>=this._minLevel){const s=`[${new Date().toISOString()}] ${Te[n]}: ${i}`;switch(n){case Te.Critical:case Te.Error:this.out.error(s);break;case Te.Warning:this.out.warn(s);break;case Te.Information:this.out.info(s);break;default:this.out.log(s);break}}}}function yo(){let r="X-SignalR-User-Agent";return wt.isNode&&(r="User-Agent"),[r,KR(FR,QR(),ZR(),WR())]}function KR(r,n,i,s){let c="Microsoft SignalR/";const l=r.split(".");return c+=`${l[0]}.${l[1]}`,c+=` (${r}; `,n&&n!==""?c+=`${n}; `:c+="Unknown OS; ",c+=`${i}`,s?c+=`; ${s}`:c+="; Unknown Runtime Version",c+=")",c}function QR(){if(wt.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function WR(){if(wt.isNode)return process.versions.node}function ZR(){return wt.isNode?"NodeJS":"Browser"}function vd(r){return r.stack?r.stack:r.message?r.message:`${r}`}function eE(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}let tE=class extends Dc{constructor(n){if(super(),this._logger=n,typeof fetch>"u"||wt.isNode){const i=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._jar=new(i("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=i("node-fetch"):this._fetchType=fetch,this._fetchType=i("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(eE());if(typeof AbortController>"u"){const i=typeof __webpack_require__=="function"?__non_webpack_require__:require;this._abortControllerType=i("abort-controller")}else this._abortControllerType=AbortController}async send(n){if(n.abortSignal&&n.abortSignal.aborted)throw new qn;if(!n.method)throw new Error("No method defined.");if(!n.url)throw new Error("No url defined.");const i=new this._abortControllerType;let s;n.abortSignal&&(n.abortSignal.onabort=()=>{i.abort(),s=new qn});let c=null;if(n.timeout){const m=n.timeout;c=setTimeout(()=>{i.abort(),this._logger.log(Te.Warning,"Timeout from HTTP request."),s=new uf},m)}n.content===""&&(n.content=void 0),n.content&&(n.headers=n.headers||{},xi(n.content)?n.headers["Content-Type"]="application/octet-stream":n.headers["Content-Type"]="text/plain;charset=UTF-8");let l;try{l=await this._fetchType(n.url,{body:n.content,cache:"no-cache",credentials:n.withCredentials===!0?"include":"same-origin",headers:{"X-Requested-With":"XMLHttpRequest",...n.headers},method:n.method,mode:"cors",redirect:"follow",signal:i.signal})}catch(m){throw s||(this._logger.log(Te.Warning,`Error from HTTP request. ${m}.`),m)}finally{c&&clearTimeout(c),n.abortSignal&&(n.abortSignal.onabort=null)}if(!l.ok){const m=await hy(l,"text");throw new Si(m||l.statusText,l.status)}const p=await hy(l,n.responseType);return new Jv(l.status,l.statusText,p)}getCookieString(n){let i="";return wt.isNode&&this._jar&&this._jar.getCookies(n,(s,c)=>i=c.join("; ")),i}};function hy(r,n){let i;switch(n){case"arraybuffer":i=r.arrayBuffer();break;case"text":i=r.text();break;case"blob":case"document":case"json":throw new Error(`${n} is not supported.`);default:i=r.text();break}return i}class nE extends Dc{constructor(n){super(),this._logger=n}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new qn):n.method?n.url?new Promise((i,s)=>{const c=new XMLHttpRequest;c.open(n.method,n.url,!0),c.withCredentials=n.withCredentials===void 0?!0:n.withCredentials,c.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.content===""&&(n.content=void 0),n.content&&(xi(n.content)?c.setRequestHeader("Content-Type","application/octet-stream"):c.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));const l=n.headers;l&&Object.keys(l).forEach(d=>{c.setRequestHeader(d,l[d])}),n.responseType&&(c.responseType=n.responseType),n.abortSignal&&(n.abortSignal.onabort=()=>{c.abort(),s(new qn)}),n.timeout&&(c.timeout=n.timeout),c.onload=()=>{n.abortSignal&&(n.abortSignal.onabort=null),c.status>=200&&c.status<300?i(new Jv(c.status,c.statusText,c.response||c.responseText)):s(new Si(c.response||c.responseText||c.statusText,c.status))},c.onerror=()=>{this._logger.log(Te.Warning,`Error from HTTP request. ${c.status}: ${c.statusText}.`),s(new Si(c.statusText,c.status))},c.ontimeout=()=>{this._logger.log(Te.Warning,"Timeout from HTTP request."),s(new uf)},c.send(n.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}}class rE extends Dc{constructor(n){if(super(),typeof fetch<"u"||wt.isNode)this._httpClient=new tE(n);else if(typeof XMLHttpRequest<"u")this._httpClient=new nE(n);else throw new Error("No usable HttpClient found.")}send(n){return n.abortSignal&&n.abortSignal.aborted?Promise.reject(new qn):n.method?n.url?this._httpClient.send(n):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(n){return this._httpClient.getCookieString(n)}}class Rn{static write(n){return`${n}${Rn.RecordSeparator}`}static parse(n){if(n[n.length-1]!==Rn.RecordSeparator)throw new Error("Message is incomplete.");const i=n.split(Rn.RecordSeparator);return i.pop(),i}}Rn.RecordSeparatorCode=30;Rn.RecordSeparator=String.fromCharCode(Rn.RecordSeparatorCode);class iE{writeHandshakeRequest(n){return Rn.write(JSON.stringify(n))}parseHandshakeResponse(n){let i,s;if(xi(n)){const p=new Uint8Array(n),m=p.indexOf(Rn.RecordSeparatorCode);if(m===-1)throw new Error("Message is incomplete.");const g=m+1;i=String.fromCharCode.apply(null,Array.prototype.slice.call(p.slice(0,g))),s=p.byteLength>g?p.slice(g).buffer:null}else{const p=n,m=p.indexOf(Rn.RecordSeparator);if(m===-1)throw new Error("Message is incomplete.");const g=m+1;i=p.substring(0,g),s=p.length>g?p.substring(g):null}const c=Rn.parse(i),l=JSON.parse(c[0]);if(l.type)throw new Error("Expected a handshake response from the server.");return[s,l]}}var Fe;(function(r){r[r.Invocation=1]="Invocation",r[r.StreamItem=2]="StreamItem",r[r.Completion=3]="Completion",r[r.StreamInvocation=4]="StreamInvocation",r[r.CancelInvocation=5]="CancelInvocation",r[r.Ping=6]="Ping",r[r.Close=7]="Close",r[r.Ack=8]="Ack",r[r.Sequence=9]="Sequence"})(Fe||(Fe={}));class oE{constructor(){this.observers=[]}next(n){for(const i of this.observers)i.next(n)}error(n){for(const i of this.observers)i.error&&i.error(n)}complete(){for(const n of this.observers)n.complete&&n.complete()}subscribe(n){return this.observers.push(n),new JR(this,n)}}class sE{constructor(n,i,s){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=n,this._connection=i,this._bufferSize=s}async _send(n){const i=this._protocol.writeMessage(n);let s=Promise.resolve();if(this._isInvocationMessage(n)){this._totalMessageCount++;let c=()=>{},l=()=>{};xi(i)?this._bufferedByteCount+=i.byteLength:this._bufferedByteCount+=i.length,this._bufferedByteCount>=this._bufferSize&&(s=new Promise((d,p)=>{c=d,l=p})),this._messages.push(new aE(i,this._totalMessageCount,c,l))}try{this._reconnectInProgress||await this._connection.send(i)}catch{this._disconnected()}await s}_ack(n){let i=-1;for(let s=0;s<this._messages.length;s++){const c=this._messages[s];if(c._id<=n.sequenceId)i=s,xi(c._message)?this._bufferedByteCount-=c._message.byteLength:this._bufferedByteCount-=c._message.length,c._resolver();else if(this._bufferedByteCount<this._bufferSize)c._resolver();else break}i!==-1&&(this._messages=this._messages.slice(i+1))}_shouldProcessMessage(n){if(this._waitForSequenceMessage)return n.type!==Fe.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(n))return!0;const i=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,i<=this._latestReceivedSequenceId?(i===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=i,this._ackTimer(),!0)}_resetSequence(n){if(n.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=n.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}async _resend(){const n=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;await this._connection.send(this._protocol.writeMessage({type:Fe.Sequence,sequenceId:n}));const i=this._messages;for(const s of i)await this._connection.send(s._message);this._reconnectInProgress=!1}_dispose(n){n??(n=new Error("Unable to reconnect to server."));for(const i of this._messages)i._rejector(n)}_isInvocationMessage(n){switch(n.type){case Fe.Invocation:case Fe.StreamItem:case Fe.Completion:case Fe.StreamInvocation:case Fe.CancelInvocation:return!0;case Fe.Close:case Fe.Sequence:case Fe.Ping:case Fe.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(async()=>{try{this._reconnectInProgress||await this._connection.send(this._protocol.writeMessage({type:Fe.Ack,sequenceId:this._latestReceivedSequenceId}))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0},1e3))}}class aE{constructor(n,i,s,c){this._message=n,this._id=i,this._resolver=s,this._rejector=c}}const cE=30*1e3,lE=15*1e3,uE=1e5;var vt;(function(r){r.Disconnected="Disconnected",r.Connecting="Connecting",r.Connected="Connected",r.Disconnecting="Disconnecting",r.Reconnecting="Reconnecting"})(vt||(vt={}));class df{static create(n,i,s,c,l,d,p){return new df(n,i,s,c,l,d,p)}constructor(n,i,s,c,l,d,p){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(Te.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},jt.isRequired(n,"connection"),jt.isRequired(i,"logger"),jt.isRequired(s,"protocol"),this.serverTimeoutInMilliseconds=l??cE,this.keepAliveIntervalInMilliseconds=d??lE,this._statefulReconnectBufferSize=p??uE,this._logger=i,this._protocol=s,this.connection=n,this._reconnectPolicy=c,this._handshakeProtocol=new iE,this.connection.onreceive=m=>this._processIncomingData(m),this.connection.onclose=m=>this._connectionClosed(m),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=vt.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:Fe.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(n){if(this._connectionState!==vt.Disconnected&&this._connectionState!==vt.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!n)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=n}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}async _startWithStateTransitions(){if(this._connectionState!==vt.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=vt.Connecting,this._logger.log(Te.Debug,"Starting HubConnection.");try{await this._startInternal(),wt.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=vt.Connected,this._connectionStarted=!0,this._logger.log(Te.Debug,"HubConnection connected successfully.")}catch(n){return this._connectionState=vt.Disconnected,this._logger.log(Te.Debug,`HubConnection failed to start successfully because of error '${n}'.`),Promise.reject(n)}}async _startInternal(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;const n=new Promise((i,s)=>{this._handshakeResolver=i,this._handshakeRejecter=s});await this.connection.start(this._protocol.transferFormat);try{let i=this._protocol.version;this.connection.features.reconnect||(i=1);const s={protocol:this._protocol.name,version:i};if(this._logger.log(Te.Debug,"Sending handshake request."),await this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(s)),this._logger.log(Te.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),await n,this._stopDuringStartError)throw this._stopDuringStartError;this.connection.features.reconnect&&(this._messageBuffer=new sE(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||await this._sendMessage(this._cachedPingMessage)}catch(i){throw this._logger.log(Te.Debug,`Hub handshake failed with error '${i}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),await this.connection.stop(i),i}}async stop(){const n=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),await this._stopPromise;try{await n}catch{}}_stopInternal(n){if(this._connectionState===vt.Disconnected)return this._logger.log(Te.Debug,`Call to HubConnection.stop(${n}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===vt.Disconnecting)return this._logger.log(Te.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;const i=this._connectionState;return this._connectionState=vt.Disconnecting,this._logger.log(Te.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(Te.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(i===vt.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=n||new qn("The connection was stopped before the hub handshake could complete."),this.connection.stop(n))}async _sendCloseMessage(){try{await this._sendWithProtocol(this._createCloseMessage())}catch{}}stream(n,...i){const[s,c]=this._replaceStreamingParams(i),l=this._createStreamInvocation(n,i,c);let d;const p=new oE;return p.cancelCallback=()=>{const m=this._createCancelInvocation(l.invocationId);return delete this._callbacks[l.invocationId],d.then(()=>this._sendWithProtocol(m))},this._callbacks[l.invocationId]=(m,g)=>{if(g){p.error(g);return}else m&&(m.type===Fe.Completion?m.error?p.error(new Error(m.error)):p.complete():p.next(m.item))},d=this._sendWithProtocol(l).catch(m=>{p.error(m),delete this._callbacks[l.invocationId]}),this._launchStreams(s,d),p}_sendMessage(n){return this._resetKeepAliveInterval(),this.connection.send(n)}_sendWithProtocol(n){return this._messageBuffer?this._messageBuffer._send(n):this._sendMessage(this._protocol.writeMessage(n))}send(n,...i){const[s,c]=this._replaceStreamingParams(i),l=this._sendWithProtocol(this._createInvocation(n,i,!0,c));return this._launchStreams(s,l),l}invoke(n,...i){const[s,c]=this._replaceStreamingParams(i),l=this._createInvocation(n,i,!1,c);return new Promise((p,m)=>{this._callbacks[l.invocationId]=(y,E)=>{if(E){m(E);return}else y&&(y.type===Fe.Completion?y.error?m(new Error(y.error)):p(y.result):m(new Error(`Unexpected message type: ${y.type}`)))};const g=this._sendWithProtocol(l).catch(y=>{m(y),delete this._callbacks[l.invocationId]});this._launchStreams(s,g)})}on(n,i){!n||!i||(n=n.toLowerCase(),this._methods[n]||(this._methods[n]=[]),this._methods[n].indexOf(i)===-1&&this._methods[n].push(i))}off(n,i){if(!n)return;n=n.toLowerCase();const s=this._methods[n];if(s)if(i){const c=s.indexOf(i);c!==-1&&(s.splice(c,1),s.length===0&&delete this._methods[n])}else delete this._methods[n]}onclose(n){n&&this._closedCallbacks.push(n)}onreconnecting(n){n&&this._reconnectingCallbacks.push(n)}onreconnected(n){n&&this._reconnectedCallbacks.push(n)}_processIncomingData(n){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(n=this._processHandshakeResponse(n),this._receivedHandshakeResponse=!0),n){const i=this._protocol.parseMessages(n,this._logger);for(const s of i)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(s)))switch(s.type){case Fe.Invocation:this._invokeClientMethod(s).catch(c=>{this._logger.log(Te.Error,`Invoke client method threw error: ${vd(c)}`)});break;case Fe.StreamItem:case Fe.Completion:{const c=this._callbacks[s.invocationId];if(c){s.type===Fe.Completion&&delete this._callbacks[s.invocationId];try{c(s)}catch(l){this._logger.log(Te.Error,`Stream callback threw error: ${vd(l)}`)}}break}case Fe.Ping:break;case Fe.Close:{this._logger.log(Te.Information,"Close message received from server.");const c=s.error?new Error("Server returned an error on close: "+s.error):void 0;s.allowReconnect===!0?this.connection.stop(c):this._stopPromise=this._stopInternal(c);break}case Fe.Ack:this._messageBuffer&&this._messageBuffer._ack(s);break;case Fe.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(s);break;default:this._logger.log(Te.Warning,`Invalid message type: ${s.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(n){let i,s;try{[s,i]=this._handshakeProtocol.parseHandshakeResponse(n)}catch(c){const l="Error parsing handshake response: "+c;this._logger.log(Te.Error,l);const d=new Error(l);throw this._handshakeRejecter(d),d}if(i.error){const c="Server returned handshake error: "+i.error;this._logger.log(Te.Error,c);const l=new Error(c);throw this._handshakeRejecter(l),l}else this._logger.log(Te.Debug,"Server handshake complete.");return this._handshakeResolver(),s}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if(!this.connection.features||!this.connection.features.inherentKeepAlive){this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds);let n=this._nextKeepAlive-new Date().getTime();if(n<0){this._connectionState===vt.Connected&&this._trySendPingMessage();return}this._pingServerHandle===void 0&&(n<0&&(n=0),this._pingServerHandle=setTimeout(async()=>{this._connectionState===vt.Connected&&await this._trySendPingMessage()},n))}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}async _invokeClientMethod(n){const i=n.target.toLowerCase(),s=this._methods[i];if(!s){this._logger.log(Te.Warning,`No client method with the name '${i}' found.`),n.invocationId&&(this._logger.log(Te.Warning,`No result given for '${i}' method and invocation ID '${n.invocationId}'.`),await this._sendWithProtocol(this._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)));return}const c=s.slice(),l=!!n.invocationId;let d,p,m;for(const g of c)try{const y=d;d=await g.apply(this,n.arguments),l&&d&&y&&(this._logger.log(Te.Error,`Multiple results provided for '${i}'. Sending error to server.`),m=this._createCompletionMessage(n.invocationId,"Client provided multiple results.",null)),p=void 0}catch(y){p=y,this._logger.log(Te.Error,`A callback for the method '${i}' threw error '${y}'.`)}m?await this._sendWithProtocol(m):l?(p?m=this._createCompletionMessage(n.invocationId,`${p}`,null):d!==void 0?m=this._createCompletionMessage(n.invocationId,null,d):(this._logger.log(Te.Warning,`No result given for '${i}' method and invocation ID '${n.invocationId}'.`),m=this._createCompletionMessage(n.invocationId,"Client didn't provide a result.",null)),await this._sendWithProtocol(m)):d&&this._logger.log(Te.Error,`Result given for '${i}' method but server is not expecting a result.`)}_connectionClosed(n){this._logger.log(Te.Debug,`HubConnection.connectionClosed(${n}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||n||new qn("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(n||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===vt.Disconnecting?this._completeClose(n):this._connectionState===vt.Connected&&this._reconnectPolicy?this._reconnect(n):this._connectionState===vt.Connected&&this._completeClose(n)}_completeClose(n){if(this._connectionStarted){this._connectionState=vt.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(n??new Error("Connection closed.")),this._messageBuffer=void 0),wt.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(i=>i.apply(this,[n]))}catch(i){this._logger.log(Te.Error,`An onclose callback called with error '${n}' threw error '${i}'.`)}}}async _reconnect(n){const i=Date.now();let s=0,c=n!==void 0?n:new Error("Attempting to reconnect due to a unknown error."),l=this._getNextRetryDelay(s,0,c);if(l===null){this._logger.log(Te.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(n);return}if(this._connectionState=vt.Reconnecting,n?this._logger.log(Te.Information,`Connection reconnecting because of error '${n}'.`):this._logger.log(Te.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(d=>d.apply(this,[n]))}catch(d){this._logger.log(Te.Error,`An onreconnecting callback called with error '${n}' threw error '${d}'.`)}if(this._connectionState!==vt.Reconnecting){this._logger.log(Te.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;l!==null;){if(this._logger.log(Te.Information,`Reconnect attempt number ${s+1} will start in ${l} ms.`),await new Promise(d=>{this._reconnectDelayHandle=setTimeout(d,l)}),this._reconnectDelayHandle=void 0,this._connectionState!==vt.Reconnecting){this._logger.log(Te.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(await this._startInternal(),this._connectionState=vt.Connected,this._logger.log(Te.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(d=>d.apply(this,[this.connection.connectionId]))}catch(d){this._logger.log(Te.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${d}'.`)}return}catch(d){if(this._logger.log(Te.Information,`Reconnect attempt failed because of error '${d}'.`),this._connectionState!==vt.Reconnecting){this._logger.log(Te.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===vt.Disconnecting&&this._completeClose();return}s++,c=d instanceof Error?d:new Error(d.toString()),l=this._getNextRetryDelay(s,Date.now()-i,c)}}this._logger.log(Te.Information,`Reconnect retries have been exhausted after ${Date.now()-i} ms and ${s} failed attempts. Connection disconnecting.`),this._completeClose()}_getNextRetryDelay(n,i,s){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:i,previousRetryCount:n,retryReason:s})}catch(c){return this._logger.log(Te.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${n}, ${i}) threw error '${c}'.`),null}}_cancelCallbacksWithError(n){const i=this._callbacks;this._callbacks={},Object.keys(i).forEach(s=>{const c=i[s];try{c(null,n)}catch(l){this._logger.log(Te.Error,`Stream 'error' callback called with '${n}' threw error: ${vd(l)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(n,i,s,c){if(s)return c.length!==0?{target:n,arguments:i,streamIds:c,type:Fe.Invocation}:{target:n,arguments:i,type:Fe.Invocation};{const l=this._invocationId;return this._invocationId++,c.length!==0?{target:n,arguments:i,invocationId:l.toString(),streamIds:c,type:Fe.Invocation}:{target:n,arguments:i,invocationId:l.toString(),type:Fe.Invocation}}}_launchStreams(n,i){if(n.length!==0){i||(i=Promise.resolve());for(const s in n)n[s].subscribe({complete:()=>{i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(s)))},error:c=>{let l;c instanceof Error?l=c.message:c&&c.toString?l=c.toString():l="Unknown error",i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(s,l)))},next:c=>{i=i.then(()=>this._sendWithProtocol(this._createStreamItemMessage(s,c)))}})}}_replaceStreamingParams(n){const i=[],s=[];for(let c=0;c<n.length;c++){const l=n[c];if(this._isObservable(l)){const d=this._invocationId;this._invocationId++,i[d]=l,s.push(d.toString()),n.splice(c,1)}}return[i,s]}_isObservable(n){return n&&n.subscribe&&typeof n.subscribe=="function"}_createStreamInvocation(n,i,s){const c=this._invocationId;return this._invocationId++,s.length!==0?{target:n,arguments:i,invocationId:c.toString(),streamIds:s,type:Fe.StreamInvocation}:{target:n,arguments:i,invocationId:c.toString(),type:Fe.StreamInvocation}}_createCancelInvocation(n){return{invocationId:n,type:Fe.CancelInvocation}}_createStreamItemMessage(n,i){return{invocationId:n,item:i,type:Fe.StreamItem}}_createCompletionMessage(n,i,s){return i?{error:i,invocationId:n,type:Fe.Completion}:{invocationId:n,result:s,type:Fe.Completion}}_createCloseMessage(){return{type:Fe.Close}}async _trySendPingMessage(){try{await this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}}const dE=[0,2e3,1e4,3e4,null];class py{constructor(n){this._retryDelays=n!==void 0?[...n,null]:dE}nextRetryDelayInMilliseconds(n){return this._retryDelays[n.previousRetryCount]}}class wi{}wi.Authorization="Authorization";wi.Cookie="Cookie";class fE extends Dc{constructor(n,i){super(),this._innerClient=n,this._accessTokenFactory=i}async send(n){let i=!0;this._accessTokenFactory&&(!this._accessToken||n.url&&n.url.indexOf("/negotiate?")>0)&&(i=!1,this._accessToken=await this._accessTokenFactory()),this._setAuthorizationHeader(n);const s=await this._innerClient.send(n);return i&&s.statusCode===401&&this._accessTokenFactory?(this._accessToken=await this._accessTokenFactory(),this._setAuthorizationHeader(n),await this._innerClient.send(n)):s}_setAuthorizationHeader(n){n.headers||(n.headers={}),this._accessToken?n.headers[wi.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&n.headers[wi.Authorization]&&delete n.headers[wi.Authorization]}getCookieString(n){return this._innerClient.getCookieString(n)}}var Pt;(function(r){r[r.None=0]="None",r[r.WebSockets=1]="WebSockets",r[r.ServerSentEvents=2]="ServerSentEvents",r[r.LongPolling=4]="LongPolling"})(Pt||(Pt={}));var tn;(function(r){r[r.Text=1]="Text",r[r.Binary=2]="Binary"})(tn||(tn={}));let hE=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};class my{get pollAborted(){return this._pollAbort.aborted}constructor(n,i,s){this._httpClient=n,this._logger=i,this._pollAbort=new hE,this._options=s,this._running=!1,this.onreceive=null,this.onclose=null}async connect(n,i){if(jt.isRequired(n,"url"),jt.isRequired(i,"transferFormat"),jt.isIn(i,tn,"transferFormat"),this._url=n,this._logger.log(Te.Trace,"(LongPolling transport) Connecting."),i===tn.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");const[s,c]=yo(),l={[s]:c,...this._options.headers},d={abortSignal:this._pollAbort.signal,headers:l,timeout:1e5,withCredentials:this._options.withCredentials};i===tn.Binary&&(d.responseType="arraybuffer");const p=`${n}&_=${Date.now()}`;this._logger.log(Te.Trace,`(LongPolling transport) polling: ${p}.`);const m=await this._httpClient.get(p,d);m.statusCode!==200?(this._logger.log(Te.Error,`(LongPolling transport) Unexpected response code: ${m.statusCode}.`),this._closeError=new Si(m.statusText||"",m.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,d)}async _poll(n,i){try{for(;this._running;)try{const s=`${n}&_=${Date.now()}`;this._logger.log(Te.Trace,`(LongPolling transport) polling: ${s}.`);const c=await this._httpClient.get(s,i);c.statusCode===204?(this._logger.log(Te.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):c.statusCode!==200?(this._logger.log(Te.Error,`(LongPolling transport) Unexpected response code: ${c.statusCode}.`),this._closeError=new Si(c.statusText||"",c.statusCode),this._running=!1):c.content?(this._logger.log(Te.Trace,`(LongPolling transport) data received. ${Os(c.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(c.content)):this._logger.log(Te.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(s){this._running?s instanceof uf?this._logger.log(Te.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=s,this._running=!1):this._logger.log(Te.Trace,`(LongPolling transport) Poll errored after shutdown: ${s.message}`)}}finally{this._logger.log(Te.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}}async send(n){return this._running?Kv(this._logger,"LongPolling",this._httpClient,this._url,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}async stop(){this._logger.log(Te.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{await this._receiving,this._logger.log(Te.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);const n={},[i,s]=yo();n[i]=s;const c={headers:{...n,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials};let l;try{await this._httpClient.delete(this._url,c)}catch(d){l=d}l?l instanceof Si&&(l.statusCode===404?this._logger.log(Te.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(Te.Trace,`(LongPolling transport) Error sending a DELETE request: ${l}`)):this._logger.log(Te.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(Te.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}}_raiseOnClose(){if(this.onclose){let n="(LongPolling transport) Firing onclose event.";this._closeError&&(n+=" Error: "+this._closeError),this._logger.log(Te.Trace,n),this.onclose(this._closeError)}}}class pE{constructor(n,i,s,c){this._httpClient=n,this._accessToken=i,this._logger=s,this._options=c,this.onreceive=null,this.onclose=null}async connect(n,i){return jt.isRequired(n,"url"),jt.isRequired(i,"transferFormat"),jt.isIn(i,tn,"transferFormat"),this._logger.log(Te.Trace,"(SSE transport) Connecting."),this._url=n,this._accessToken&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((s,c)=>{let l=!1;if(i!==tn.Text){c(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let d;if(wt.isBrowser||wt.isWebWorker)d=new this._options.EventSource(n,{withCredentials:this._options.withCredentials});else{const p=this._httpClient.getCookieString(n),m={};m.Cookie=p;const[g,y]=yo();m[g]=y,d=new this._options.EventSource(n,{withCredentials:this._options.withCredentials,headers:{...m,...this._options.headers}})}try{d.onmessage=p=>{if(this.onreceive)try{this._logger.log(Te.Trace,`(SSE transport) data received. ${Os(p.data,this._options.logMessageContent)}.`),this.onreceive(p.data)}catch(m){this._close(m);return}},d.onerror=p=>{l?this._close():c(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},d.onopen=()=>{this._logger.log(Te.Information,`SSE connected to ${this._url}`),this._eventSource=d,l=!0,s()}}catch(p){c(p);return}})}async send(n){return this._eventSource?Kv(this._logger,"SSE",this._httpClient,this._url,n,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))}stop(){return this._close(),Promise.resolve()}_close(n){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(n))}}class mE{constructor(n,i,s,c,l,d){this._logger=s,this._accessTokenFactory=i,this._logMessageContent=c,this._webSocketConstructor=l,this._httpClient=n,this.onreceive=null,this.onclose=null,this._headers=d}async connect(n,i){jt.isRequired(n,"url"),jt.isRequired(i,"transferFormat"),jt.isIn(i,tn,"transferFormat"),this._logger.log(Te.Trace,"(WebSockets transport) Connecting.");let s;return this._accessTokenFactory&&(s=await this._accessTokenFactory()),new Promise((c,l)=>{n=n.replace(/^http/,"ws");let d;const p=this._httpClient.getCookieString(n);let m=!1;if(wt.isNode||wt.isReactNative){const g={},[y,E]=yo();g[y]=E,s&&(g[wi.Authorization]=`Bearer ${s}`),p&&(g[wi.Cookie]=p),d=new this._webSocketConstructor(n,void 0,{headers:{...g,...this._headers}})}else s&&(n+=(n.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(s)}`);d||(d=new this._webSocketConstructor(n)),i===tn.Binary&&(d.binaryType="arraybuffer"),d.onopen=g=>{this._logger.log(Te.Information,`WebSocket connected to ${n}.`),this._webSocket=d,m=!0,c()},d.onerror=g=>{let y=null;typeof ErrorEvent<"u"&&g instanceof ErrorEvent?y=g.error:y="There was an error with the transport",this._logger.log(Te.Information,`(WebSockets transport) ${y}.`)},d.onmessage=g=>{if(this._logger.log(Te.Trace,`(WebSockets transport) data received. ${Os(g.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(g.data)}catch(y){this._close(y);return}},d.onclose=g=>{if(m)this._close(g);else{let y=null;typeof ErrorEvent<"u"&&g instanceof ErrorEvent?y=g.error:y="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",l(new Error(y))}}})}send(n){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(Te.Trace,`(WebSockets transport) sending data. ${Os(n,this._logMessageContent)}.`),this._webSocket.send(n),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(n){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(Te.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(n)&&(n.wasClean===!1||n.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${n.code} (${n.reason||"no reason given"}).`)):n instanceof Error?this.onclose(n):this.onclose())}_isCloseEvent(n){return n&&typeof n.wasClean=="boolean"&&typeof n.code=="number"}}const gy=100;class gE{constructor(n,i={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,jt.isRequired(n,"url"),this._logger=YR(i.logger),this.baseUrl=this._resolveUrl(n),i=i||{},i.logMessageContent=i.logMessageContent===void 0?!1:i.logMessageContent,typeof i.withCredentials=="boolean"||i.withCredentials===void 0)i.withCredentials=i.withCredentials===void 0?!0:i.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");i.timeout=i.timeout===void 0?100*1e3:i.timeout;let s=null,c=null;if(wt.isNode&&typeof require<"u"){const l=typeof __webpack_require__=="function"?__non_webpack_require__:require;s=l("ws"),c=l("eventsource")}!wt.isNode&&typeof WebSocket<"u"&&!i.WebSocket?i.WebSocket=WebSocket:wt.isNode&&!i.WebSocket&&s&&(i.WebSocket=s),!wt.isNode&&typeof EventSource<"u"&&!i.EventSource?i.EventSource=EventSource:wt.isNode&&!i.EventSource&&typeof c<"u"&&(i.EventSource=c),this._httpClient=new fE(i.httpClient||new rE(this._logger),i.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=i,this.onreceive=null,this.onclose=null}async start(n){if(n=n||tn.Binary,jt.isIn(n,tn,"transferFormat"),this._logger.log(Te.Debug,`Starting connection with transfer format '${tn[n]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(n),await this._startInternalPromise,this._connectionState==="Disconnecting"){const i="Failed to start the HttpConnection before stop() was called.";return this._logger.log(Te.Error,i),await this._stopPromise,Promise.reject(new qn(i))}else if(this._connectionState!=="Connected"){const i="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(Te.Error,i),Promise.reject(new qn(i))}this._connectionStarted=!0}send(n){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new ff(this.transport)),this._sendQueue.send(n))}async stop(n){if(this._connectionState==="Disconnected")return this._logger.log(Te.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(Te.Debug,`Call to HttpConnection.stop(${n}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(i=>{this._stopPromiseResolver=i}),await this._stopInternal(n),await this._stopPromise}async _stopInternal(n){this._stopError=n;try{await this._startInternalPromise}catch{}if(this.transport){try{await this.transport.stop()}catch(i){this._logger.log(Te.Error,`HttpConnection.transport.stop() threw error '${i}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(Te.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")}async _startInternal(n){let i=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===Pt.WebSockets)this.transport=this._constructTransport(Pt.WebSockets),await this._startTransport(i,n);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let s=null,c=0;do{if(s=await this._getNegotiationResponse(i),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new qn("The connection was stopped during negotiation.");if(s.error)throw new Error(s.error);if(s.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(s.url&&(i=s.url),s.accessToken){const l=s.accessToken;this._accessTokenFactory=()=>l,this._httpClient._accessToken=l,this._httpClient._accessTokenFactory=void 0}c++}while(s.url&&c<gy);if(c===gy&&s.url)throw new Error("Negotiate redirection limit exceeded.");await this._createTransport(i,this._options.transport,s,n)}this.transport instanceof my&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(Te.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(s){return this._logger.log(Te.Error,"Failed to start the connection: "+s),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(s)}}async _getNegotiationResponse(n){const i={},[s,c]=yo();i[s]=c;const l=this._resolveNegotiateUrl(n);this._logger.log(Te.Debug,`Sending negotiation request: ${l}.`);try{const d=await this._httpClient.post(l,{content:"",headers:{...i,...this._options.headers},timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(d.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${d.statusCode}'`));const p=JSON.parse(d.content);return(!p.negotiateVersion||p.negotiateVersion<1)&&(p.connectionToken=p.connectionId),p.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new fy("Client didn't negotiate Stateful Reconnect but the server did.")):p}catch(d){let p="Failed to complete negotiation with the server: "+d;return d instanceof Si&&d.statusCode===404&&(p=p+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(Te.Error,p),Promise.reject(new fy(p))}}_createConnectUrl(n,i){return i?n+(n.indexOf("?")===-1?"?":"&")+`id=${i}`:n}async _createTransport(n,i,s,c){let l=this._createConnectUrl(n,s.connectionToken);if(this._isITransport(i)){this._logger.log(Te.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=i,await this._startTransport(l,c),this.connectionId=s.connectionId;return}const d=[],p=s.availableTransports||[];let m=s;for(const g of p){const y=this._resolveTransportOrError(g,i,c,m?.useStatefulReconnect===!0);if(y instanceof Error)d.push(`${g.transport} failed:`),d.push(y);else if(this._isITransport(y)){if(this.transport=y,!m){try{m=await this._getNegotiationResponse(n)}catch(E){return Promise.reject(E)}l=this._createConnectUrl(n,m.connectionToken)}try{await this._startTransport(l,c),this.connectionId=m.connectionId;return}catch(E){if(this._logger.log(Te.Error,`Failed to start the transport '${g.transport}': ${E}`),m=void 0,d.push(new VR(`${g.transport} failed: ${E}`,Pt[g.transport])),this._connectionState!=="Connecting"){const I="Failed to select transport before stop() was called.";return this._logger.log(Te.Debug,I),Promise.reject(new qn(I))}}}}return d.length>0?Promise.reject(new GR(`Unable to connect to the server with any of the available transports. ${d.join(" ")}`,d)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))}_constructTransport(n){switch(n){case Pt.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new mE(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case Pt.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new pE(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case Pt.LongPolling:return new my(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${n}.`)}}_startTransport(n,i){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=async s=>{let c=!1;if(this.features.reconnect)try{this.features.disconnected(),await this.transport.connect(n,i),await this.features.resend()}catch{c=!0}else{this._stopConnection(s);return}c&&this._stopConnection(s)}:this.transport.onclose=s=>this._stopConnection(s),this.transport.connect(n,i)}_resolveTransportOrError(n,i,s,c){const l=Pt[n.transport];if(l==null)return this._logger.log(Te.Debug,`Skipping transport '${n.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${n.transport}' because it is not supported by this client.`);if(yE(i,l))if(n.transferFormats.map(p=>tn[p]).indexOf(s)>=0){if(l===Pt.WebSockets&&!this._options.WebSocket||l===Pt.ServerSentEvents&&!this._options.EventSource)return this._logger.log(Te.Debug,`Skipping transport '${Pt[l]}' because it is not supported in your environment.'`),new qR(`'${Pt[l]}' is not supported in your environment.`,l);this._logger.log(Te.Debug,`Selecting transport '${Pt[l]}'.`);try{return this.features.reconnect=l===Pt.WebSockets?c:void 0,this._constructTransport(l)}catch(p){return p}}else return this._logger.log(Te.Debug,`Skipping transport '${Pt[l]}' because it does not support the requested transfer format '${tn[s]}'.`),new Error(`'${Pt[l]}' does not support ${tn[s]}.`);else return this._logger.log(Te.Debug,`Skipping transport '${Pt[l]}' because it was disabled by the client.`),new $R(`'${Pt[l]}' is disabled by the client.`,l)}_isITransport(n){return n&&typeof n=="object"&&"connect"in n}_stopConnection(n){if(this._logger.log(Te.Debug,`HttpConnection.stopConnection(${n}) called while in state ${this._connectionState}.`),this.transport=void 0,n=this._stopError||n,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(Te.Debug,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(Te.Warning,`Call to HttpConnection.stopConnection(${n}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${n}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),n?this._logger.log(Te.Error,`Connection disconnected with error '${n}'.`):this._logger.log(Te.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(i=>{this._logger.log(Te.Error,`TransportSendQueue.stop() threw error '${i}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(n)}catch(i){this._logger.log(Te.Error,`HttpConnection.onclose(${n}) threw error '${i}'.`)}}}_resolveUrl(n){if(n.lastIndexOf("https://",0)===0||n.lastIndexOf("http://",0)===0)return n;if(!wt.isBrowser)throw new Error(`Cannot resolve '${n}'.`);const i=window.document.createElement("a");return i.href=n,this._logger.log(Te.Information,`Normalizing '${n}' to '${i.href}'.`),i.href}_resolveNegotiateUrl(n){const i=new URL(n);i.pathname.endsWith("/")?i.pathname+="negotiate":i.pathname+="/negotiate";const s=new URLSearchParams(i.searchParams);return s.has("negotiateVersion")||s.append("negotiateVersion",this._negotiateVersion.toString()),s.has("useStatefulReconnect")?s.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&s.append("useStatefulReconnect","true"),i.search=s.toString(),i.toString()}}function yE(r,n){return!r||(n&r)!==0}class ff{constructor(n){this._transport=n,this._buffer=[],this._executing=!0,this._sendBufferedData=new rc,this._transportResult=new rc,this._sendLoopPromise=this._sendLoop()}send(n){return this._bufferData(n),this._transportResult||(this._transportResult=new rc),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(n){if(this._buffer.length&&typeof this._buffer[0]!=typeof n)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof n}`);this._buffer.push(n),this._sendBufferedData.resolve()}async _sendLoop(){for(;;){if(await this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new rc;const n=this._transportResult;this._transportResult=void 0;const i=typeof this._buffer[0]=="string"?this._buffer.join(""):ff._concatBuffers(this._buffer);this._buffer.length=0;try{await this._transport.send(i),n.resolve()}catch(s){n.reject(s)}}}static _concatBuffers(n){const i=n.map(l=>l.byteLength).reduce((l,d)=>l+d),s=new Uint8Array(i);let c=0;for(const l of n)s.set(new Uint8Array(l),c),c+=l.byteLength;return s.buffer}}class rc{constructor(){this.promise=new Promise((n,i)=>[this._resolver,this._rejecter]=[n,i])}resolve(){this._resolver()}reject(n){this._rejecter(n)}}const vE="json";class bE{constructor(){this.name=vE,this.version=2,this.transferFormat=tn.Text}parseMessages(n,i){if(typeof n!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!n)return[];i===null&&(i=Ns.instance);const s=Rn.parse(n),c=[];for(const l of s){const d=JSON.parse(l);if(typeof d.type!="number")throw new Error("Invalid payload.");switch(d.type){case Fe.Invocation:this._isInvocationMessage(d);break;case Fe.StreamItem:this._isStreamItemMessage(d);break;case Fe.Completion:this._isCompletionMessage(d);break;case Fe.Ping:break;case Fe.Close:break;case Fe.Ack:this._isAckMessage(d);break;case Fe.Sequence:this._isSequenceMessage(d);break;default:i.log(Te.Information,"Unknown message type '"+d.type+"' ignored.");continue}c.push(d)}return c}writeMessage(n){return Rn.write(JSON.stringify(n))}_isInvocationMessage(n){this._assertNotEmptyString(n.target,"Invalid payload for Invocation message."),n.invocationId!==void 0&&this._assertNotEmptyString(n.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(n){if(this._assertNotEmptyString(n.invocationId,"Invalid payload for StreamItem message."),n.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(n){if(n.result&&n.error)throw new Error("Invalid payload for Completion message.");!n.result&&n.error&&this._assertNotEmptyString(n.error,"Invalid payload for Completion message."),this._assertNotEmptyString(n.invocationId,"Invalid payload for Completion message.")}_isAckMessage(n){if(typeof n.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(n){if(typeof n.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(n,i){if(typeof n!="string"||n==="")throw new Error(i)}}const SE={trace:Te.Trace,debug:Te.Debug,info:Te.Information,information:Te.Information,warn:Te.Warning,warning:Te.Warning,error:Te.Error,critical:Te.Critical,none:Te.None};function wE(r){const n=SE[r.toLowerCase()];if(typeof n<"u")return n;throw new Error(`Unknown log level: ${r}`)}class TE{configureLogging(n){if(jt.isRequired(n,"logging"),CE(n))this.logger=n;else if(typeof n=="string"){const i=wE(n);this.logger=new Sc(i)}else this.logger=new Sc(n);return this}withUrl(n,i){return jt.isRequired(n,"url"),jt.isNotEmpty(n,"url"),this.url=n,typeof i=="object"?this.httpConnectionOptions={...this.httpConnectionOptions,...i}:this.httpConnectionOptions={...this.httpConnectionOptions,transport:i},this}withHubProtocol(n){return jt.isRequired(n,"protocol"),this.protocol=n,this}withAutomaticReconnect(n){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return n?Array.isArray(n)?this.reconnectPolicy=new py(n):this.reconnectPolicy=n:this.reconnectPolicy=new py,this}withServerTimeout(n){return jt.isRequired(n,"milliseconds"),this._serverTimeoutInMilliseconds=n,this}withKeepAliveInterval(n){return jt.isRequired(n,"milliseconds"),this._keepAliveIntervalInMilliseconds=n,this}withStatefulReconnect(n){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=n?.bufferSize,this}build(){const n=this.httpConnectionOptions||{};if(n.logger===void 0&&(n.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");const i=new gE(this.url,n);return df.create(i,this.logger||Ns.instance,this.protocol||new bE,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}}function CE(r){return r.log!==void 0}class xE{constructor(){this.connection=null,this.isConnected=!1,this.messageHandlers=new Set}async connect(){if(!this.isConnected){this.connection=new TE().withUrl("http://localhost:7219/chathub",{accessTokenFactory:()=>{const n=localStorage.getItem("user");return n?JSON.parse(n).token:null}}).withAutomaticReconnect().build();try{await this.connection.start(),this.isConnected=!0,console.log("SignalR Connected")}catch(n){console.error("SignalR Connection Error:",n),this.isConnected=!1}}}async joinChat(n){this.isConnected||await this.connect();try{await this.connection.invoke("JoinChat",n)}catch(i){console.error("Error joining chat:",i)}}async sendMessage(n,i){this.isConnected||await this.connect();try{await this.connection.invoke("SendMessage",n,i)}catch(s){throw console.error("Error sending message:",s),s}}onReceiveMessage(n){this.connection&&!this.messageHandlers.has(n)&&(this.messageHandlers.add(n),this.connection.on("ReceiveMessage",n))}offReceiveMessage(n){this.connection&&this.messageHandlers.has(n)&&(this.messageHandlers.delete(n),this.connection.off("ReceiveMessage",n))}onError(n){this.connection&&this.connection.on("Error",n)}onMessageStatusUpdated(n){this.connection&&this.connection.on("MessageStatusUpdated",n)}async markDelivered(n,i){this.isConnected||await this.connect();try{await this.connection.invoke("MarkDelivered",n,i)}catch(s){console.error("Error marking delivered:",s)}}async markRead(n,i){this.isConnected||await this.connect();try{await this.connection.invoke("MarkRead",n,i)}catch(s){console.error("Error marking read:",s)}}async getMessageHistory(n){this.isConnected||await this.connect();try{return await this.connection.invoke("GetMessageHistory",n)}catch(i){return console.error("Error getting message history:",i),[]}}async disconnect(){this.connection&&this.isConnected&&(await this.connection.stop(),this.isConnected=!1)}}const Kn=new xE,Qn=({src:r,alt:n,className:i,style:s,fallbackText:c="No Image",userId:l=null})=>{const[d,p]=z.useState(null),[m,g]=z.useState(!0),[y,E]=z.useState(!1),I=`data:image/svg+xml;base64,${btoa(`
    <svg width="150" height="150" viewBox="0 0 150 150" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="150" height="150" rx="8" fill="#f1f5f9"/>
      <text x="75" y="80" text-anchor="middle" fill="#64748b" font-family="Arial" font-size="14">${c.replace(/[^\x00-\x7F]/g,"User")}</text>
    </svg>
  `)}`;z.useEffect(()=>{(async()=>{if(!r||y){p(I),g(!1);return}try{if(g(!0),r.includes("blob.core.windows.net")&&!r.includes("?")){const ee=r.split("/"),J=ee[ee.length-1],de=ee[ee.length-2]||"logos",ue=await Yv.getSasUrl(J,de);p(ue||I)}else p(r)}catch(ee){console.error("Error loading image with SAS:",ee),p(I),E(!0)}finally{g(!1)}})()},[r,y,I]);const Y=()=>{y||(E(!0),p(I),g(!1))};return m?h.jsx("div",{className:i,style:{...s,display:"flex",alignItems:"center",justifyContent:"center",background:"#f1f5f9",color:"#64748b",fontSize:"12px"},children:"Loading..."}):h.jsx("img",{src:d,alt:n,className:i,style:s,onError:Y})},Qv=({recipientId:r,recipientName:n,recipientImageUrl:i,onClose:s})=>{const[c,l]=z.useState([]),[d,p]=z.useState(""),[m,g]=z.useState(!1),[y,E]=z.useState(!1),[I,Y]=z.useState(!0),M=localStorage.getItem("userId"),ee=z.useRef(null),J=z.useRef(null);z.useEffect(()=>(de(),()=>{J.current&&Kn.offReceiveMessage(J.current)}),[r]);const de=async()=>{try{Y(!0),await Kn.connect(),console.log(" Joining chat with:",r),await Kn.joinChat(r),console.log(" Joined chat successfully"),J.current=F=>{console.log(" Message received:",F),F.senderId===r?l(ne=>{if(ne.find(_e=>_e.id===F.id))return ne;const me={id:F.id,sender:"Recipient",text:F.message,timestamp:new Date(F.timestamp),status:F.status?.toLowerCase()||"sent"},ae=`chat_${[M,r].sort().join("_")}`;return console.log(" Calling MarkDelivered:",F.id,ae),Kn.markDelivered(F.id,ae),setTimeout(async()=>{try{const _e=await Je.get(`chat/messages/${r}`);_e.data&&l(Ce=>Ce.map(Re=>{const Le=_e.data.find(Ie=>Ie.id===Re.id);return Le&&Re.sender==="Me"?(console.log(`Refreshed status for ${Re.id}: ${Le.status}`),{...Re,status:Le.status?.toLowerCase()}):Re}))}catch(_e){console.error("Failed to refresh status:",_e)}},500),[...ne,me]}):console.log(" Ignoring message from self or other user")},Kn.onReceiveMessage(J.current),Kn.onMessageStatusUpdated(F=>{console.log(" Status updated event received:",F),l(ne=>ne.map(ae=>ae.id===F.messageId?(console.log(`Updating message ${ae.id} from ${ae.status} to ${F.status}`),{...ae,status:F.status?.toLowerCase()||ae.status}):ae))}),Kn.onError(F=>{console.error("Chat error:",F)});try{const F=await Je.get(`chat/messages/${r}`);if(F.data&&F.data.length>0){const ne=F.data.map(me=>({id:me.id,sender:me.senderId===M?"Me":"Recipient",text:me.message,timestamp:new Date(me.timestamp),status:me.status?.toLowerCase()||"sent"}));l(ne)}}catch(F){console.error("Failed to load message history:",F)}E(!0)}catch(F){console.error("Failed to initialize chat:",F)}finally{Y(!1)}};z.useEffect(()=>{ue();const F=`chat_${[M,r].sort().join("_")}`;c.forEach(ne=>{ne.sender==="Recipient"&&ne.id&&ne.status!=="read"&&(console.log(" Marking as read:",ne.id,F),Kn.markRead(ne.id,F))})},[c,M,r]);const ue=()=>{ee.current?.scrollIntoView({behavior:"smooth"})},pe=async F=>{if(F.preventDefault(),!(!d.trim()||!y))try{g(!0);const ne=d;p(""),await Kn.sendMessage(r,ne),l(me=>[...me,{id:Date.now(),sender:"Me",text:ne,timestamp:new Date,status:"sent"}])}catch(ne){console.error("Failed to send message:",ne),alert("Failed to send message. Please try again."),p(messageText)}finally{g(!1)}};return h.jsxs("div",{className:"chat-widget",children:[h.jsxs("div",{className:"chat-header",children:[h.jsxs("div",{className:"chat-user-info",children:[h.jsx(Qn,{src:i,alt:n,className:"user-avatar",fallbackText:"User"}),h.jsxs("div",{children:[h.jsx("div",{className:"user-name",children:n||"Chat"}),h.jsxs("div",{className:"user-status",children:[" ",y?"Online":"Connecting..."]})]})]}),h.jsx("button",{onClick:s,className:"close-btn",children:h.jsx(rf,{size:16})})]}),h.jsxs("div",{className:"chat-messages",children:[I?h.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:"Loading messages..."}):c.length===0?h.jsxs("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:["Start a conversation with ",n]}):c.map((F,ne)=>(console.log("Rendering message:",{id:F.id,status:F.status,sender:F.sender}),h.jsxs("div",{className:`message ${F.sender==="Me"?"sent":"received"}`,children:[h.jsx("div",{className:"message-content",children:F.text}),h.jsxs("div",{style:{fontSize:"11px",color:"#65676b",marginTop:"2px",textAlign:"center"},children:[new Date(F.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),F.sender==="Me"&&h.jsx("span",{style:{marginLeft:"4px",color:F.status==="read"?"#4ade80":"#65676b",fontWeight:"500"},children:F.status==="read"?"Read":F.status==="delivered"?"Delivered":"Sent"})]})]},F.id||ne))),h.jsx("div",{ref:ee})]}),h.jsxs("form",{onSubmit:pe,className:"chat-input",children:[h.jsx("input",{type:"text",value:d,onChange:F=>p(F.target.value),placeholder:"Type a message...",className:"message-input"}),h.jsx("button",{type:"submit",className:"send-btn",disabled:m,children:h.jsx(mo,{size:16})})]})]})},yy=({user:r})=>{Wr();const[n,i]=z.useState([]),[s,c]=z.useState(!0),[l,d]=z.useState({}),[p,m]=z.useState([]),[g,y]=z.useState([]),[E,I]=z.useState(null),[Y,M]=z.useState(!1),[ee,J]=z.useState({}),[de,ue]=z.useState("Not connected"),[pe,F]=z.useState(null),[ne,me]=z.useState(!1),[ae,_e]=z.useState(!1),[Ce,Re]=z.useState({rating:0,comment:""}),[Le,Ie]=z.useState(!1),[Ne,Se]=z.useState("");z.useEffect(()=>{r&&r.token&&(W(),De())},[r]);const De=async()=>{try{const b=await Je.get("location/states-with-cities");J(b.data)}catch(b){console.error("Error fetching locations:",b),J({"Tamil Nadu":["Chennai","Coimbatore","Madurai","Other"],Karnataka:["Bangalore","Mysore","Mangalore","Other"],Kerala:["Kochi","Thiruvananthapuram","Kozhikode","Other"],"Andhra Pradesh":["Hyderabad","Visakhapatnam","Vijayawada","Other"],Maharashtra:["Mumbai","Pune","Nagpur","Other"],Delhi:["New Delhi","Other"]})}};z.useEffect(()=>{q()},[n,p]);const q=()=>{if(p.length===0)y(n);else{const b=n.filter(C=>p.some(A=>C.location?.toLowerCase().includes(A.toLowerCase())));y(b)}},U=b=>{d(C=>({...C,[b]:!C[b]}))},Q=b=>{m(C=>C.includes(b)?C.filter(A=>A!==b):[...C,b])},L=()=>{m([])},W=async()=>{try{const b=await Je.get("user/browse"),A=(Array.isArray(b.data)?b.data:[b.data]).filter(N=>N.status==="Active"||N.status==="Verified");i(A)}catch(b){console.error("Error fetching hosts:",b),b.response?.status===500?(console.error("Server error - API may be down or misconfigured"),i([])):b.response?.status!==401&&b.response?.status!==403&&i([])}finally{c(!1)}},S=async b=>{me(!0);try{const C=await Je.post("user/public-profile",{userId:b.userId}),A=r?.userId,N=C.data.reviews||[],w=N.find(K=>K.reviewerId===A),R=N.filter(K=>K.reviewerId!==A).sort((K,V)=>new Date(V.createdAt)-new Date(K.createdAt)),k=w?[w,...R]:R,H=!!w;F({...C.data,reviews:k,hasUserReview:H}),_e(!1),Re({rating:0,comment:""})}catch(C){console.error("Failed to fetch profile:",C)}finally{me(!1)}},j=b=>{I({id:b.userId,name:b.name})},x=async()=>{if(console.log("Submit clicked, reviewError before:",Ne),console.log("Rating:",Ce.rating,"Comment:",Ce.comment),Se(""),!Ce.comment.trim()||Ce.rating===0){console.log("Setting error message"),Se("Please provide both rating and comment"),console.log("reviewError after setting:","Please provide both rating and comment");return}Ie(!0);try{await Je.post("review",{userId:pe.userId,rating:Ce.rating,comment:Ce.comment.trim()});const b=await Je.post("user/public-profile",{userId:pe.userId}),C=r?.userId,A=b.data.reviews||[],N=A.find(H=>H.reviewerId===C),w=A.filter(H=>H.reviewerId!==C).sort((H,K)=>new Date(K.createdAt)-new Date(H.createdAt)),R=N?[N,...w]:w,k=!!N;F({...b.data,reviews:R,hasUserReview:k}),_e(!1),Re({rating:0,comment:""}),Se("")}catch(b){console.error("Failed to submit review:",b),b.response?.data?.message?Se(b.response.data.message):Se("Failed to submit review. Please try again.")}finally{Ie(!1)}};return s?h.jsx("div",{className:"container",children:h.jsxs("div",{className:"loading",style:{padding:"4rem",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),h.jsx("h3",{children:"Finding amazing hosts for you..."})]})}):h.jsxs("div",{className:"browse-layout",children:[h.jsxs("button",{className:"mobile-filter-toggle",onClick:()=>M(!Y),children:[Y?h.jsx(wv,{size:16}):h.jsx(Tv,{size:16}),"Filters ",p.length>0&&`(${p.length})`]}),h.jsxs("div",{className:`location-sidebar ${Y?"mobile-visible":""}`,children:[h.jsxs("div",{className:"filter-header",children:[h.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx(Sv,{size:20,style:{color:"var(--primary)"}}),"Filter by Location"]}),p.length>0&&h.jsxs("button",{onClick:L,className:"clear-filters-btn",children:["Clear (",p.length,")"]})]}),h.jsx("div",{className:"location-filters",children:Object.entries(ee).map(([b,C])=>h.jsxs("div",{className:"state-group",children:[h.jsxs("button",{className:"state-toggle",onClick:()=>U(b),children:[l[b]?h.jsx(yv,{size:16}):h.jsx(vv,{size:16}),h.jsx("span",{children:b})]}),l[b]&&h.jsx("div",{className:"cities-list",children:C.map(A=>h.jsxs("label",{className:"city-checkbox",children:[h.jsx("input",{type:"checkbox",checked:p.includes(A),onChange:()=>Q(A)}),h.jsx("span",{children:A})]},A))})]},b))})]}),h.jsxs("div",{className:"browse-main",children:[h.jsxs("div",{className:"browse-header",children:[h.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx(E1,{size:24,style:{color:"var(--primary)"}}),"Available Hosts"]}),h.jsx("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:h.jsx("div",{className:"results-count",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:!s&&h.jsxs(h.Fragment,{children:[h.jsx(Ac,{size:16,style:{color:"var(--text-light)"}}),h.jsxs("span",{children:[g.length," host",g.length!==1?"s":""," found"]})]})})})]}),s?h.jsxs("div",{className:"loading",style:{padding:"4rem",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),h.jsx("h3",{children:"Finding amazing hosts for you..."})]}):h.jsx("div",{children:g.length===0?h.jsxs("div",{className:"no-results",children:[h.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),h.jsxs("h3",{style:{color:"#1e293b"},children:["No hosts found",p.length>0?" for selected locations":" in this area yet"]}),h.jsx("p",{style:{color:"#64748b"},children:p.length>0?"Try selecting different locations or clear filters.":"We're growing fast! Check back tomorrow for new Pongal celebrations."}),p.length>0&&h.jsx("button",{onClick:L,className:"btn btn-outline",children:"Clear filters"})]}):h.jsx("div",{className:"compact-grid",children:g.map(b=>h.jsxs("div",{className:"host-card-horizontal",children:[h.jsxs("div",{className:"host-image-section",children:[h.jsx(Qn,{src:b.profileImageUrl,alt:b.name,className:"host-card-img",userId:b.userId,fallbackText:"Host"}),b.status==="Verified"&&h.jsx("div",{className:"verified-badge",children:" Verified"}),h.jsxs("button",{className:"btn btn-primary overlay-btn",onClick:()=>S(b),children:[h.jsx(kc,{size:14})," View"]})]}),h.jsxs("div",{className:"host-content-section",children:[h.jsx("h3",{className:"host-name",children:b.name}),h.jsxs("div",{className:"host-location",children:[" ",b.location.split(",")[0]]}),b.bio&&h.jsx("p",{className:"host-bio",children:b.bio}),h.jsxs("button",{className:"btn btn-primary",onClick:C=>{C.stopPropagation(),j(b)},style:{marginTop:"0.75rem",fontSize:"0.75rem",padding:"0.4rem 0.8rem",borderRadius:"0.375rem",minHeight:"32px",width:"auto",display:"inline-flex"},children:[h.jsx(vc,{size:14})," Chat"]})]})]},b.userId))})})]}),pe&&h.jsx("div",{className:"modal-overlay",onClick:()=>F(null),children:h.jsxs("div",{className:"modal-content",onClick:b=>b.stopPropagation(),style:{maxHeight:"90vh",overflowY:"auto"},children:[h.jsxs("div",{className:"modal-header",children:[h.jsx("h3",{children:pe.name}),h.jsx("button",{onClick:()=>F(null),className:"modal-close",children:""})]}),h.jsxs("div",{className:"modal-body",children:[h.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",alignItems:"flex-start"},children:[h.jsx(Qn,{src:pe.profileImageUrl,alt:pe.name,className:"modal-profile-image",fallbackText:"Profile",style:{flexShrink:0,width:"100px",height:"100px"}}),h.jsxs("div",{style:{flex:1},children:[h.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1.25rem"},children:pe.name}),h.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:h.jsxs("span",{style:{color:"#64748b"},children:[" ",pe.location]})}),h.jsxs("p",{style:{color:"#64748b",fontSize:"0.9rem",margin:"0"},children:[pe.userType,"  Joined ",new Date(pe.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"})]})]})]}),h.jsxs("div",{style:{marginBottom:"1.5rem"},children:[h.jsx("h4",{style:{marginBottom:"0.75rem",color:"var(--text)"},children:pe.userType==="Host"?" About My Hosting":" About Me"}),h.jsx("p",{style:{color:"#475569",lineHeight:"1.5",background:"#f8fafc",padding:"1rem",borderRadius:"0.5rem",margin:"0"},children:pe.bio||"No description provided."})]}),h.jsxs("div",{children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[h.jsxs("h4",{style:{margin:"0",color:"var(--text)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[" Reviews (",pe.totalReviews||pe.reviews?.length||0,")",pe.averageRating>0&&h.jsxs("span",{style:{fontSize:"0.9rem",color:"#64748b"},children:["(",pe.averageRating.toFixed(1)," avg)"]})]}),!pe.hasUserReview&&h.jsx("button",{className:"btn btn-outline",onClick:()=>_e(!ae),style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:ae?"Cancel":"Write Review"})]}),ae&&h.jsxs("div",{className:"review-form",children:[Ne&&h.jsx("div",{className:"review-error",children:Ne}),h.jsxs("div",{style:{marginBottom:"0.75rem"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Rating:"}),h.jsx("div",{className:"rating-input",children:Array.from({length:5},(b,C)=>h.jsx("button",{type:"button",className:"rating-star",onClick:()=>{Re(A=>({...A,rating:C+1})),Se("")},style:{color:C<Ce.rating?"#fbbf24":"#d1d5db"},children:""},C))})]}),h.jsxs("div",{style:{marginBottom:"0.75rem"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Comment:"}),h.jsx("textarea",{value:Ce.comment,onChange:b=>{Re(C=>({...C,comment:b.target.value})),Se("")},placeholder:"Share your experience...",rows:3,style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",resize:"vertical",fontFamily:"inherit"}})]}),h.jsx("button",{className:"btn btn-primary",onClick:x,disabled:Le,style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:Le?"Submitting...":"Submit Review"})]}),pe.reviews&&pe.reviews.length>0&&h.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:pe.reviews.map((b,C)=>{const A=b.reviewerId===r?.userId;return h.jsxs("div",{className:`review-item ${A?"user-review":""}`,children:[A&&h.jsx("div",{className:"user-review-badge",children:"Your Review"}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.25rem",paddingRight:A?"5rem":"0"},children:[h.jsx("strong",{style:{fontSize:"0.9rem"},children:b.reviewerName}),h.jsx("div",{className:"review-stars",children:Array.from({length:5},(N,w)=>h.jsx("span",{style:{color:w<b.rating?"#fbbf24":"#d1d5db"},children:""},w))})]}),h.jsx("p",{style:{margin:"0",fontSize:"0.85rem",color:"#475569",lineHeight:"1.4"},children:b.comment}),h.jsx("div",{className:"review-meta",children:new Date(b.createdAt).toLocaleDateString()})]},C)})}),(!pe.reviews||pe.reviews.length===0)&&!ae&&h.jsx("p",{style:{color:"#64748b",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:"No reviews yet. Be the first to share your experience!"})]})]})]})}),ne&&h.jsx("div",{className:"modal-overlay",children:h.jsx("div",{className:"loading",style:{color:"white"},children:"Loading profile..."})}),E&&h.jsx(Qv,{recipientId:E.id,recipientName:E.name,recipientImageUrl:n.find(b=>b.userId===E.id)?.profileImageUrl,onClose:()=>I(null)})]})},RE=({user:r})=>{const[n,i]=z.useState([]),[s,c]=z.useState(!0),[l,d]=z.useState({}),[p,m]=z.useState([]),[g,y]=z.useState([]),[E,I]=z.useState(null),[Y,M]=z.useState(!1),[ee,J]=z.useState({}),[de,ue]=z.useState(null),[pe,F]=z.useState(!1),[ne,me]=z.useState(!1),[ae,_e]=z.useState({rating:0,comment:""}),[Ce,Re]=z.useState(!1),[Le,Ie]=z.useState("");z.useEffect(()=>{r.status==="Active"||r.status==="Verified"?(Se(),Ne()):c(!1)},[r.status]);const Ne=async()=>{try{const S=await Je.get("location/states-with-cities");J(S.data)}catch(S){console.error("Error fetching locations:",S)}};z.useEffect(()=>{De()},[n,p]);const Se=async()=>{try{const S=await Je.get("user/browse"),j=Array.isArray(S.data)?S.data:[S.data];i(j)}catch(S){console.error("Error fetching guests:",S),i([])}finally{c(!1)}},De=()=>{if(p.length===0)y(n);else{const S=n.filter(j=>p.some(x=>j.location?.toLowerCase().includes(x.toLowerCase())));y(S)}},q=S=>{d(j=>({...j,[S]:!j[S]}))},U=S=>{m(j=>j.includes(S)?j.filter(x=>x!==S):[...j,S])},Q=()=>{m([])},L=async S=>{F(!0);try{const j=await Je.post("user/public-profile",{userId:S.userId}),x=r?.userId,b=j.data.reviews||[],C=b.find(R=>R.reviewerId===x),A=b.filter(R=>R.reviewerId!==x).sort((R,k)=>new Date(k.createdAt)-new Date(R.createdAt)),N=C?[C,...A]:A,w=!!C;ue({...j.data,reviews:N,hasUserReview:w}),me(!1),_e({rating:0,comment:""})}catch(j){console.error("Failed to fetch profile:",j)}finally{F(!1)}},W=async()=>{if(Ie(""),!ae.comment.trim()||ae.rating===0){Ie("Please provide both rating and comment");return}Re(!0);try{await Je.post("review",{userId:de.userId,rating:ae.rating,comment:ae.comment.trim()});const S=await Je.post("user/public-profile",{userId:de.userId}),j=r?.userId,x=S.data.reviews||[],b=x.find(w=>w.reviewerId===j),C=x.filter(w=>w.reviewerId!==j).sort((w,R)=>new Date(R.createdAt)-new Date(w.createdAt)),A=b?[b,...C]:C,N=!!b;ue({...S.data,reviews:A,hasUserReview:N}),me(!1),_e({rating:0,comment:""}),Ie("")}catch(S){console.error("Failed to submit review:",S),S.response?.data?.message?Ie(S.response.data.message):Ie("Failed to submit review. Please try again.")}finally{Re(!1)}};return r.status==="Pending"?h.jsx("div",{className:"container",style:{paddingTop:"5rem"},children:h.jsxs("div",{className:"card text-center",style:{maxWidth:"600px",margin:"0 auto",padding:"3rem 2rem",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)"},children:[h.jsx("div",{style:{fontSize:"4rem",marginBottom:"1.5rem"},children:""}),h.jsx("h2",{style:{color:"#1e293b",fontSize:"2rem",marginBottom:"1rem"},children:"Registration Pending"}),h.jsx("p",{style:{color:"#64748b",fontSize:"1.1rem",lineHeight:"1.6",marginBottom:"2rem"},children:"Thank you for joining as a Host! Your registration is currently being verified by our team. Once approved, you'll be able to see guests and start hosting."}),h.jsxs("div",{style:{padding:"1.5rem",background:"#f8fafc",borderRadius:"0.75rem",border:"1px solid #e2e8f0",color:"#475569",textAlign:"left"},children:[h.jsx("p",{style:{margin:"0 0 0.5rem 0"},children:h.jsx("strong",{children:"Next Steps:"})}),h.jsxs("ul",{style:{margin:0,paddingLeft:"1.25rem"},children:[h.jsx("li",{children:"Admin verifies your payment"}),h.jsx("li",{children:'Your profile becomes "Active"'}),h.jsx("li",{children:"You receive guests' contact requests"})]})]})]})}):s?h.jsx("div",{className:"container",children:h.jsxs("div",{className:"loading",style:{padding:"4rem",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),h.jsx("h3",{children:"Loading guests near you..."})]})}):h.jsxs("div",{className:"browse-layout",children:[h.jsxs("button",{className:"mobile-filter-toggle",onClick:()=>M(!Y),children:[Y?h.jsx(wv,{size:16}):h.jsx(Tv,{size:16}),"Filters ",p.length>0&&`(${p.length})`]}),h.jsxs("div",{className:`location-sidebar ${Y?"mobile-visible":""}`,children:[h.jsxs("div",{className:"filter-header",children:[h.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx(Sv,{size:20,style:{color:"var(--primary)"}}),"Filter by Location"]}),p.length>0&&h.jsxs("button",{onClick:Q,className:"clear-filters-btn",children:["Clear (",p.length,")"]})]}),h.jsx("div",{className:"location-filters",children:Object.entries(ee).map(([S,j])=>h.jsxs("div",{className:"state-group",children:[h.jsxs("button",{className:"state-toggle",onClick:()=>q(S),children:[l[S]?h.jsx(yv,{size:16}):h.jsx(vv,{size:16}),h.jsx("span",{children:S})]}),l[S]&&h.jsx("div",{className:"cities-list",children:j.map(x=>h.jsxs("label",{className:"city-checkbox",children:[h.jsx("input",{type:"checkbox",checked:p.includes(x),onChange:()=>U(x)}),h.jsx("span",{children:x})]},x))})]},S))})]}),h.jsxs("div",{className:"browse-main",children:[h.jsxs("div",{className:"browse-header",children:[h.jsxs("h2",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx(Ud,{size:24,style:{color:"var(--primary)"}}),"Guests Looking for Festivals"]}),h.jsx("div",{className:"results-count",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:!s&&h.jsxs(h.Fragment,{children:[h.jsx(Ac,{size:16,style:{color:"var(--text-light)"}}),h.jsxs("span",{children:[g.length," guest",g.length!==1?"s":""," found"]})]})})]}),g.length===0?h.jsxs("div",{className:"no-results",children:[h.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),h.jsx("h3",{style:{color:"#1e293b"},children:p.length>0?"No guests found for selected locations":"No guests found right now"}),h.jsx("p",{style:{color:"#64748b"},children:p.length>0?"Try adjusting your location filters or check back later.":"Check back soon as more travelers join the festival celebrations!"}),p.length>0&&h.jsx("button",{onClick:Q,className:"btn btn-outline",children:"Clear filters"})]}):h.jsx("div",{className:"compact-grid",children:g.map(S=>h.jsxs("div",{className:"host-card-horizontal",children:[h.jsxs("div",{className:"host-image-section",children:[h.jsx(Qn,{src:S.profileImageUrl,alt:S.name,className:"host-card-img",fallbackText:"Guest"}),h.jsxs("button",{className:"btn btn-primary overlay-btn",onClick:()=>L(S),children:[h.jsx(kc,{size:14})," View"]})]}),h.jsxs("div",{className:"host-content-section",children:[h.jsx("h3",{className:"host-name",children:S.name}),h.jsxs("div",{className:"host-location",children:[" ",S.location?.split(",")[0]||"Location not specified"]}),S.bio&&h.jsx("p",{className:"host-bio",children:S.bio}),h.jsxs("button",{className:"btn btn-primary",onClick:()=>I({id:S.userId,name:S.name}),style:{marginTop:"0.75rem",fontSize:"0.75rem",padding:"0.4rem 0.8rem",borderRadius:"0.375rem",minHeight:"32px",width:"auto",display:"inline-flex"},children:[h.jsx(vc,{size:14})," Chat"]})]})]},S.userId))})]}),de&&h.jsx("div",{className:"modal-overlay",onClick:()=>ue(null),children:h.jsxs("div",{className:"modal-content",onClick:S=>S.stopPropagation(),style:{maxHeight:"90vh",overflowY:"auto"},children:[h.jsxs("div",{className:"modal-header",children:[h.jsx("h3",{children:de.name}),h.jsx("button",{onClick:()=>ue(null),className:"modal-close",children:""})]}),h.jsxs("div",{className:"modal-body",children:[h.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[h.jsx(Qn,{src:de.profileImageUrl,alt:de.name,className:"modal-profile-image",fallbackText:"Guest"}),h.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"0.5rem"},children:h.jsx("span",{style:{color:"#64748b"},children:de.location})}),h.jsxs("p",{style:{color:"#64748b",fontSize:"0.9rem"},children:[de.userType,"  Joined ",new Date(de.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"})]})]}),h.jsxs("div",{style:{marginBottom:"1.5rem"},children:[h.jsx("h4",{style:{marginBottom:"0.75rem",color:"var(--text)"},children:de.userType==="Host"?" About My Hosting":" About Me"}),h.jsx("p",{style:{color:"#475569",lineHeight:"1.5",background:"#f8fafc",padding:"1rem",borderRadius:"0.5rem",margin:"0"},children:de.bio||"No description provided."})]}),h.jsxs("div",{children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem"},children:[h.jsxs("h4",{style:{margin:"0",color:"var(--text)",display:"flex",alignItems:"center",gap:"0.5rem"},children:[" Reviews (",de.totalReviews||de.reviews?.length||0,")",de.averageRating>0&&h.jsxs("span",{style:{fontSize:"0.9rem",color:"#64748b"},children:["(",de.averageRating.toFixed(1)," avg)"]})]}),!de.hasUserReview&&h.jsx("button",{className:"btn btn-outline",onClick:()=>me(!ne),style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:ne?"Cancel":"Write Review"})]}),ne&&h.jsxs("div",{className:"review-form",children:[Le&&h.jsx("div",{className:"review-error",children:Le}),h.jsxs("div",{style:{marginBottom:"0.75rem"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Rating:"}),h.jsx("div",{className:"rating-input",children:Array.from({length:5},(S,j)=>h.jsx("button",{type:"button",className:"rating-star",onClick:()=>{_e(x=>({...x,rating:j+1})),Ie("")},style:{color:j<ae.rating?"#fbbf24":"#d1d5db"},children:""},j))})]}),h.jsxs("div",{style:{marginBottom:"0.75rem"},children:[h.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Comment:"}),h.jsx("textarea",{value:ae.comment,onChange:S=>{_e(j=>({...j,comment:S.target.value})),Ie("")},placeholder:"Share your experience...",rows:3,style:{width:"100%",padding:"0.5rem",border:"1px solid var(--border)",borderRadius:"0.375rem",resize:"vertical",fontFamily:"inherit"}})]}),h.jsx("button",{className:"btn btn-primary",onClick:W,disabled:Ce,style:{fontSize:"0.8rem",padding:"0.4rem 0.8rem"},children:Ce?"Submitting...":"Submit Review"})]}),de.reviews&&de.reviews.length>0&&h.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:de.reviews.map((S,j)=>{const x=S.reviewerId===r?.userId;return h.jsxs("div",{className:`review-item ${x?"user-review":""}`,children:[x&&h.jsx("div",{className:"user-review-badge",children:"Your Review"}),h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.25rem",paddingRight:x?"5rem":"0"},children:[h.jsx("strong",{style:{fontSize:"0.9rem"},children:S.reviewerName}),h.jsx("div",{className:"review-stars",children:Array.from({length:5},(b,C)=>h.jsx("span",{style:{color:C<S.rating?"#fbbf24":"#d1d5db"},children:""},C))})]}),h.jsx("p",{style:{margin:"0",fontSize:"0.85rem",color:"#475569",lineHeight:"1.4"},children:S.comment}),h.jsx("div",{className:"review-meta",children:new Date(S.createdAt).toLocaleDateString()})]},j)})}),(!de.reviews||de.reviews.length===0)&&!ne&&h.jsx("p",{style:{color:"#64748b",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:"No reviews yet. Be the first to share your experience!"})]})]})]})}),pe&&h.jsx("div",{className:"modal-overlay",children:h.jsx("div",{className:"loading",style:{color:"white"},children:"Loading profile..."})}),E&&h.jsx(Qv,{recipientId:E.id,recipientName:E.name,recipientImageUrl:n.find(S=>S.userId===E.id)?.profileImageUrl,onClose:()=>I(null)})]})};function Sr(r,n){var i={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&n.indexOf(s)<0&&(i[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,s=Object.getOwnPropertySymbols(r);c<s.length;c++)n.indexOf(s[c])<0&&Object.prototype.propertyIsEnumerable.call(r,s[c])&&(i[s[c]]=r[s[c]]);return i}function vy(r){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&r[n],s=0;if(i)return i.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&s>=r.length&&(r=void 0),{value:r&&r[s++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function st(r){return this instanceof st?(this.v=r,this):new st(r)}function Xr(r,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=i.apply(r,n||[]),c,l=[];return c=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",d),c[Symbol.asyncIterator]=function(){return this},c;function d(Y){return function(M){return Promise.resolve(M).then(Y,E)}}function p(Y,M){s[Y]&&(c[Y]=function(ee){return new Promise(function(J,de){l.push([Y,ee,J,de])>1||m(Y,ee)})},M&&(c[Y]=M(c[Y])))}function m(Y,M){try{g(s[Y](M))}catch(ee){I(l[0][3],ee)}}function g(Y){Y.value instanceof st?Promise.resolve(Y.value.v).then(y,E):I(l[0][2],Y)}function y(Y){m("next",Y)}function E(Y){m("throw",Y)}function I(Y,M){Y(M),l.shift(),l.length&&m(l[0][0],l[0][1])}}function mc(r){var n,i;return n={},s("next"),s("throw",function(c){throw c}),s("return"),n[Symbol.iterator]=function(){return this},n;function s(c,l){n[c]=r[c]?function(d){return(i=!i)?{value:st(r[c](d)),done:!1}:l?l(d):d}:l}}function Yr(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r[Symbol.asyncIterator],i;return n?n.call(r):(r=typeof vy=="function"?vy(r):r[Symbol.iterator](),i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i);function s(l){i[l]=r[l]&&function(d){return new Promise(function(p,m){d=r[l](d),c(p,m,d.done,d.value)})}}function c(l,d,p,m){Promise.resolve(m).then(function(g){l({value:g,done:p})},d)}}var bd={exports:{}},ic,EE=new Uint8Array(16);function Wv(){if(!ic&&(ic=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!ic))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ic(EE)}const _E=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Pc(r){return typeof r=="string"&&_E.test(r)}var Ft=[];for(var Sd=0;Sd<256;++Sd)Ft.push((Sd+256).toString(16).substr(1));function Ic(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=(Ft[r[n+0]]+Ft[r[n+1]]+Ft[r[n+2]]+Ft[r[n+3]]+"-"+Ft[r[n+4]]+Ft[r[n+5]]+"-"+Ft[r[n+6]]+Ft[r[n+7]]+"-"+Ft[r[n+8]]+Ft[r[n+9]]+"-"+Ft[r[n+10]]+Ft[r[n+11]]+Ft[r[n+12]]+Ft[r[n+13]]+Ft[r[n+14]]+Ft[r[n+15]]).toLowerCase();if(!Pc(i))throw TypeError("Stringified UUID is invalid");return i}var by,wd,Td=0,Cd=0;function kE(r,n,i){var s=n&&i||0,c=n||new Array(16);r=r||{};var l=r.node||by,d=r.clockseq!==void 0?r.clockseq:wd;if(l==null||d==null){var p=r.random||(r.rng||Wv)();l==null&&(l=by=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),d==null&&(d=wd=(p[6]<<8|p[7])&16383)}var m=r.msecs!==void 0?r.msecs:Date.now(),g=r.nsecs!==void 0?r.nsecs:Cd+1,y=m-Td+(g-Cd)/1e4;if(y<0&&r.clockseq===void 0&&(d=d+1&16383),(y<0||m>Td)&&r.nsecs===void 0&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Td=m,Cd=g,wd=d,m+=122192928e5;var E=((m&268435455)*1e4+g)%4294967296;c[s++]=E>>>24&255,c[s++]=E>>>16&255,c[s++]=E>>>8&255,c[s++]=E&255;var I=m/4294967296*1e4&268435455;c[s++]=I>>>8&255,c[s++]=I&255,c[s++]=I>>>24&15|16,c[s++]=I>>>16&255,c[s++]=d>>>8|128,c[s++]=d&255;for(var Y=0;Y<6;++Y)c[s+Y]=l[Y];return n||Ic(c)}function Zv(r){if(!Pc(r))throw TypeError("Invalid UUID");var n,i=new Uint8Array(16);return i[0]=(n=parseInt(r.slice(0,8),16))>>>24,i[1]=n>>>16&255,i[2]=n>>>8&255,i[3]=n&255,i[4]=(n=parseInt(r.slice(9,13),16))>>>8,i[5]=n&255,i[6]=(n=parseInt(r.slice(14,18),16))>>>8,i[7]=n&255,i[8]=(n=parseInt(r.slice(19,23),16))>>>8,i[9]=n&255,i[10]=(n=parseInt(r.slice(24,36),16))/1099511627776&255,i[11]=n/4294967296&255,i[12]=n>>>24&255,i[13]=n>>>16&255,i[14]=n>>>8&255,i[15]=n&255,i}function AE(r){r=unescape(encodeURIComponent(r));for(var n=[],i=0;i<r.length;++i)n.push(r.charCodeAt(i));return n}var NE="6ba7b810-9dad-11d1-80b4-00c04fd430c8",OE="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function e0(r,n,i){function s(c,l,d,p){if(typeof c=="string"&&(c=AE(c)),typeof l=="string"&&(l=Zv(l)),l.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var m=new Uint8Array(16+c.length);if(m.set(l),m.set(c,l.length),m=i(m),m[6]=m[6]&15|n,m[8]=m[8]&63|128,d){p=p||0;for(var g=0;g<16;++g)d[p+g]=m[g];return d}return Ic(m)}try{s.name=r}catch{}return s.DNS=NE,s.URL=OE,s}function jE(r){if(typeof r=="string"){var n=unescape(encodeURIComponent(r));r=new Uint8Array(n.length);for(var i=0;i<n.length;++i)r[i]=n.charCodeAt(i)}return ME(UE(DE(r),r.length*8))}function ME(r){for(var n=[],i=r.length*32,s="0123456789abcdef",c=0;c<i;c+=8){var l=r[c>>5]>>>c%32&255,d=parseInt(s.charAt(l>>>4&15)+s.charAt(l&15),16);n.push(d)}return n}function t0(r){return(r+64>>>9<<4)+14+1}function UE(r,n){r[n>>5]|=128<<n%32,r[t0(n)-1]=n;for(var i=1732584193,s=-271733879,c=-1732584194,l=271733878,d=0;d<r.length;d+=16){var p=i,m=s,g=c,y=l;i=Kt(i,s,c,l,r[d],7,-680876936),l=Kt(l,i,s,c,r[d+1],12,-389564586),c=Kt(c,l,i,s,r[d+2],17,606105819),s=Kt(s,c,l,i,r[d+3],22,-1044525330),i=Kt(i,s,c,l,r[d+4],7,-176418897),l=Kt(l,i,s,c,r[d+5],12,1200080426),c=Kt(c,l,i,s,r[d+6],17,-1473231341),s=Kt(s,c,l,i,r[d+7],22,-45705983),i=Kt(i,s,c,l,r[d+8],7,1770035416),l=Kt(l,i,s,c,r[d+9],12,-1958414417),c=Kt(c,l,i,s,r[d+10],17,-42063),s=Kt(s,c,l,i,r[d+11],22,-1990404162),i=Kt(i,s,c,l,r[d+12],7,1804603682),l=Kt(l,i,s,c,r[d+13],12,-40341101),c=Kt(c,l,i,s,r[d+14],17,-1502002290),s=Kt(s,c,l,i,r[d+15],22,1236535329),i=Qt(i,s,c,l,r[d+1],5,-165796510),l=Qt(l,i,s,c,r[d+6],9,-1069501632),c=Qt(c,l,i,s,r[d+11],14,643717713),s=Qt(s,c,l,i,r[d],20,-373897302),i=Qt(i,s,c,l,r[d+5],5,-701558691),l=Qt(l,i,s,c,r[d+10],9,38016083),c=Qt(c,l,i,s,r[d+15],14,-660478335),s=Qt(s,c,l,i,r[d+4],20,-405537848),i=Qt(i,s,c,l,r[d+9],5,568446438),l=Qt(l,i,s,c,r[d+14],9,-1019803690),c=Qt(c,l,i,s,r[d+3],14,-187363961),s=Qt(s,c,l,i,r[d+8],20,1163531501),i=Qt(i,s,c,l,r[d+13],5,-1444681467),l=Qt(l,i,s,c,r[d+2],9,-51403784),c=Qt(c,l,i,s,r[d+7],14,1735328473),s=Qt(s,c,l,i,r[d+12],20,-1926607734),i=Wt(i,s,c,l,r[d+5],4,-378558),l=Wt(l,i,s,c,r[d+8],11,-2022574463),c=Wt(c,l,i,s,r[d+11],16,1839030562),s=Wt(s,c,l,i,r[d+14],23,-35309556),i=Wt(i,s,c,l,r[d+1],4,-1530992060),l=Wt(l,i,s,c,r[d+4],11,1272893353),c=Wt(c,l,i,s,r[d+7],16,-155497632),s=Wt(s,c,l,i,r[d+10],23,-1094730640),i=Wt(i,s,c,l,r[d+13],4,681279174),l=Wt(l,i,s,c,r[d],11,-358537222),c=Wt(c,l,i,s,r[d+3],16,-722521979),s=Wt(s,c,l,i,r[d+6],23,76029189),i=Wt(i,s,c,l,r[d+9],4,-640364487),l=Wt(l,i,s,c,r[d+12],11,-421815835),c=Wt(c,l,i,s,r[d+15],16,530742520),s=Wt(s,c,l,i,r[d+2],23,-995338651),i=Zt(i,s,c,l,r[d],6,-198630844),l=Zt(l,i,s,c,r[d+7],10,1126891415),c=Zt(c,l,i,s,r[d+14],15,-1416354905),s=Zt(s,c,l,i,r[d+5],21,-57434055),i=Zt(i,s,c,l,r[d+12],6,1700485571),l=Zt(l,i,s,c,r[d+3],10,-1894986606),c=Zt(c,l,i,s,r[d+10],15,-1051523),s=Zt(s,c,l,i,r[d+1],21,-2054922799),i=Zt(i,s,c,l,r[d+8],6,1873313359),l=Zt(l,i,s,c,r[d+15],10,-30611744),c=Zt(c,l,i,s,r[d+6],15,-1560198380),s=Zt(s,c,l,i,r[d+13],21,1309151649),i=Zt(i,s,c,l,r[d+4],6,-145523070),l=Zt(l,i,s,c,r[d+11],10,-1120210379),c=Zt(c,l,i,s,r[d+2],15,718787259),s=Zt(s,c,l,i,r[d+9],21,-343485551),i=Jr(i,p),s=Jr(s,m),c=Jr(c,g),l=Jr(l,y)}return[i,s,c,l]}function DE(r){if(r.length===0)return[];for(var n=r.length*8,i=new Uint32Array(t0(n)),s=0;s<n;s+=8)i[s>>5]|=(r[s/8]&255)<<s%32;return i}function Jr(r,n){var i=(r&65535)+(n&65535),s=(r>>16)+(n>>16)+(i>>16);return s<<16|i&65535}function PE(r,n){return r<<n|r>>>32-n}function zc(r,n,i,s,c,l){return Jr(PE(Jr(Jr(n,r),Jr(s,l)),c),i)}function Kt(r,n,i,s,c,l,d){return zc(n&i|~n&s,r,n,c,l,d)}function Qt(r,n,i,s,c,l,d){return zc(n&s|i&~s,r,n,c,l,d)}function Wt(r,n,i,s,c,l,d){return zc(n^i^s,r,n,c,l,d)}function Zt(r,n,i,s,c,l,d){return zc(i^(n|~s),r,n,c,l,d)}var IE=e0("v3",48,jE);function zE(r,n,i){r=r||{};var s=r.random||(r.rng||Wv)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,n){i=i||0;for(var c=0;c<16;++c)n[i+c]=s[c];return n}return Ic(s)}function LE(r,n,i,s){switch(r){case 0:return n&i^~n&s;case 1:return n^i^s;case 2:return n&i^n&s^i&s;case 3:return n^i^s}}function xd(r,n){return r<<n|r>>>32-n}function BE(r){var n=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof r=="string"){var s=unescape(encodeURIComponent(r));r=[];for(var c=0;c<s.length;++c)r.push(s.charCodeAt(c))}else Array.isArray(r)||(r=Array.prototype.slice.call(r));r.push(128);for(var l=r.length/4+2,d=Math.ceil(l/16),p=new Array(d),m=0;m<d;++m){for(var g=new Uint32Array(16),y=0;y<16;++y)g[y]=r[m*64+y*4]<<24|r[m*64+y*4+1]<<16|r[m*64+y*4+2]<<8|r[m*64+y*4+3];p[m]=g}p[d-1][14]=(r.length-1)*8/Math.pow(2,32),p[d-1][14]=Math.floor(p[d-1][14]),p[d-1][15]=(r.length-1)*8&4294967295;for(var E=0;E<d;++E){for(var I=new Uint32Array(80),Y=0;Y<16;++Y)I[Y]=p[E][Y];for(var M=16;M<80;++M)I[M]=xd(I[M-3]^I[M-8]^I[M-14]^I[M-16],1);for(var ee=i[0],J=i[1],de=i[2],ue=i[3],pe=i[4],F=0;F<80;++F){var ne=Math.floor(F/20),me=xd(ee,5)+LE(ne,J,de,ue)+pe+n[ne]+I[F]>>>0;pe=ue,ue=de,de=xd(J,30)>>>0,J=ee,ee=me}i[0]=i[0]+ee>>>0,i[1]=i[1]+J>>>0,i[2]=i[2]+de>>>0,i[3]=i[3]+ue>>>0,i[4]=i[4]+pe>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,i[0]&255,i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,i[1]&255,i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,i[2]&255,i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,i[3]&255,i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,i[4]&255]}var HE=e0("v5",80,BE);const qE="00000000-0000-0000-0000-000000000000";function $E(r){if(!Pc(r))throw TypeError("Invalid UUID");return parseInt(r.substr(14,1),16)}const VE=Object.freeze(Object.defineProperty({__proto__:null,NIL:qE,parse:Zv,stringify:Ic,v1:kE,v3:IE,v4:zE,v5:HE,validate:Pc,version:$E},Symbol.toStringTag,{value:"Module"})),GE=Rc(VE);function n0(r,n){return r=Math.ceil(r),n=Math.floor(n),Math.floor(Math.random()*(n-r+1))+r}function r0(r,n){const i=n.retryDelayInMs*Math.pow(2,r),s=Math.min(n.maxRetryDelayInMs,i);return{retryAfterInMs:s/2+n0(0,s/2)}}function hf(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&!(r instanceof RegExp)&&!(r instanceof Date)}function pf(r){if(hf(r)){const n=typeof r.name=="string",i=typeof r.message=="string";return n&&i}return!1}function Lc(r,n){switch(n){case"utf-8":return XE(r);case"base64":return i0(r);case"base64url":return FE(r);case"hex":return YE(r)}}function mn(r,n){switch(n){case"utf-8":return JE(r);case"base64":return o0(r);case"base64url":return KE(r);case"hex":return QE(r)}}function i0(r){return btoa([...r].map(n=>String.fromCharCode(n)).join(""))}function FE(r){return i0(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function XE(r){return new TextDecoder().decode(r)}function YE(r){return[...r].map(n=>n.toString(16).padStart(2,"0")).join("")}function JE(r){return new TextEncoder().encode(r)}function o0(r){return new Uint8Array([...atob(r)].map(n=>n.charCodeAt(0)))}function KE(r){const n=r.replace(/-/g,"+").replace(/_/g,"/");return o0(n)}const Sy=new Set("0123456789abcdefABCDEF");function QE(r){const n=new Uint8Array(r.length/2);for(let i=0;i<r.length/2;++i){const s=r[2*i],c=r[2*i+1];if(!Sy.has(s)||!Sy.has(c))return n.slice(0,i);n[i]=parseInt(`${s}${c}`,16)}return n}let oc;function s0(){if(oc)return oc;if(!self.crypto||!self.crypto.subtle)throw new Error("Your browser environment does not support cryptography functions.");return oc=self.crypto.subtle,oc}async function WE(r,n,i){const s=s0(),c=mn(r,"base64"),l=mn(n,"utf-8"),d=await s.importKey("raw",c,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),p=await s.sign({name:"HMAC",hash:{name:"SHA-256"}},d,l);return Lc(new Uint8Array(p),i)}async function ZE(r,n){const i=mn(r,"utf-8"),s=await s0().digest({name:"SHA-256"},i);return Lc(new Uint8Array(s),n)}function e_(){let r="";for(let n=0;n<32;n++){const i=Math.floor(Math.random()*16);n===12?r+="4":n===16?r+=i&3|8:r+=i.toString(16),(n===7||n===11||n===15||n===19)&&(r+="-")}return r}const t_=typeof globalThis?.crypto?.randomUUID=="function"?globalThis.crypto.randomUUID.bind(globalThis.crypto):e_;function mf(){return t_()}const n_=typeof window<"u"&&typeof window.document<"u",r_=typeof self=="object"&&typeof self?.importScripts=="function"&&(self.constructor?.name==="DedicatedWorkerGlobalScope"||self.constructor?.name==="ServiceWorkerGlobalScope"||self.constructor?.name==="SharedWorkerGlobalScope"),a0=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u",c0=typeof Bun<"u"&&typeof Bun.version<"u",Qr=typeof globalThis.process<"u"&&!!globalThis.process.version&&!!globalThis.process.versions?.node,i_=Qr&&!c0&&!a0,o_=typeof navigator<"u"&&navigator?.product==="ReactNative",Rd="REDACTED",s_=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],a_=["api-version"];class gf{allowedHeaderNames;allowedQueryParameters;constructor({additionalAllowedHeaderNames:n=[],additionalAllowedQueryParameters:i=[]}={}){n=s_.concat(n),i=a_.concat(i),this.allowedHeaderNames=new Set(n.map(s=>s.toLowerCase())),this.allowedQueryParameters=new Set(i.map(s=>s.toLowerCase()))}sanitize(n){const i=new Set;return JSON.stringify(n,(s,c)=>{if(c instanceof Error)return{...c,name:c.name,message:c.message};if(s==="headers")return this.sanitizeHeaders(c);if(s==="url")return this.sanitizeUrl(c);if(s==="query")return this.sanitizeQuery(c);if(s==="body")return;if(s==="response")return;if(s==="operationSpec")return;if(Array.isArray(c)||hf(c)){if(i.has(c))return"[Circular]";i.add(c)}return c},2)}sanitizeUrl(n){if(typeof n!="string"||n===null||n==="")return n;const i=new URL(n);if(!i.search)return n;for(const[s]of i.searchParams)this.allowedQueryParameters.has(s.toLowerCase())||i.searchParams.set(s,Rd);return i.toString()}sanitizeHeaders(n){const i={};for(const s of Object.keys(n))this.allowedHeaderNames.has(s.toLowerCase())?i[s]=n[s]:i[s]=Rd;return i}sanitizeQuery(n){if(typeof n!="object"||n===null)return n;const i={};for(const s of Object.keys(n))this.allowedQueryParameters.has(s.toLowerCase())?i[s]=n[s]:i[s]=Rd;return i}}async function c_(r,n){const i=new AbortController;function s(){i.abort()}n?.abortSignal?.addEventListener("abort",s);try{return await Promise.race(r.map(c=>c({abortSignal:i.signal})))}finally{i.abort(),n?.abortSignal?.removeEventListener("abort",s)}}let l_=class extends Error{constructor(n){super(n),this.name="AbortError"}};function l0(r,n){const{cleanupBeforeAbort:i,abortSignal:s,abortErrorMsg:c}=n??{};return new Promise((l,d)=>{function p(){d(new l_(c??"The operation was aborted."))}function m(){s?.removeEventListener("abort",g)}function g(){i?.(),m(),p()}if(s?.aborted)return p();try{r(y=>{m(),l(y)},y=>{m(),d(y)})}catch(y){d(y)}s?.addEventListener("abort",g)})}const u_="The delay was aborted.";function u0(r,n){let i;const{abortSignal:s,abortErrorMsg:c}=n??{};return l0(l=>{i=setTimeout(l,r)},{cleanupBeforeAbort:()=>clearTimeout(i),abortSignal:s,abortErrorMsg:c??u_})}function Ls(r){if(pf(r))return r.message;{let n;try{typeof r=="object"&&r?n=JSON.stringify(r):n=String(r)}catch{n="[unable to stringify input]"}return`Unknown error ${n}`}}function yf(r){return typeof r<"u"&&r!==null}function d_(r,n){if(!yf(r)||typeof r!="object")return!1;for(const i of n)if(!d0(r,i))return!1;return!0}function d0(r,n){return yf(r)&&typeof r=="object"&&n in r}function f_(r,n){return r0(r,n)}function h_(r,n){return ZE(r,n)}function p_(r,n,i){return WE(r,n,i)}function m_(r,n){return n0(r,n)}function f0(r){return pf(r)}function g_(r){return hf(r)}function h0(){return mf()}const y_=n_,v_=c0,b_=a0,S_=Qr,wc=Qr,w_=i_,T_=o_,C_=r_;function x_(r,n){return Lc(r,n)}function R_(r,n){return mn(r,n)}const E_=Object.freeze(Object.defineProperty({__proto__:null,calculateRetryDelay:f_,cancelablePromiseRace:c_,computeSha256Hash:h_,computeSha256Hmac:p_,createAbortablePromise:l0,delay:u0,getErrorMessage:Ls,getRandomIntegerInclusive:m_,isBrowser:y_,isBun:v_,isDefined:yf,isDeno:b_,isError:f0,isNode:S_,isNodeLike:wc,isNodeRuntime:w_,isObject:g_,isObjectWithProperties:d_,isReactNative:T_,isWebWorker:C_,objectHasProperty:d0,randomUUID:h0,stringToUint8Array:R_,uint8ArrayToString:x_},Symbol.toStringTag,{value:"Module"})),__=Rc(E_);function p0(r){let n="";for(let i=0;i<r.length;i++)n+=String.fromCharCode(r[i]);return btoa(n)}function m0(r){const n=atob(r),i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}function k_(r){return atob(r)}const Bt="$",vo="_";function A_(r,n){return n!=="Composite"&&n!=="Dictionary"&&(typeof r=="string"||typeof r=="number"||typeof r=="boolean"||n?.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i)!==null||r===void 0||r===null)}const N_=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function O_(r){return N_.test(r)}const j_=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function M_(r){return j_.test(r)}function U_(r){const n={...r.headers,...r.body};return r.hasNullableType&&Object.getOwnPropertyNames(n).length===0?r.shouldWrapBody?{body:null}:null:r.shouldWrapBody?{...r.headers,body:r.body}:n}function wy(r,n){const i=r.parsedHeaders;if(r.request.method==="HEAD")return{...i,body:r.parsedBody};const s=n&&n.bodyMapper,c=!!s?.nullable,l=s?.type.name;if(l==="Stream")return{...i,blobBody:r.blobBody,readableStreamBody:r.readableStreamBody};const d=l==="Composite"&&s.type.modelProperties||{},p=Object.keys(d).some(m=>d[m].serializedName==="");if(l==="Sequence"||p){const m=r.parsedBody??[];for(const g of Object.keys(d))d[g].serializedName&&(m[g]=r.parsedBody?.[g]);if(i)for(const g of Object.keys(i))m[g]=i[g];return c&&!r.parsedBody&&!i&&Object.getOwnPropertyNames(d).length===0?null:m}return U_({body:r.parsedBody,headers:i,hasNullableType:c,shouldWrapBody:A_(r.parsedBody,l)})}class D_{modelMappers;isXML;constructor(n={},i=!1){this.modelMappers=n,this.isXML=i}validateConstraints(n,i,s){const c=(l,d)=>{throw new Error(`"${s}" with value "${i}" should satisfy the constraint "${l}": ${d}.`)};if(n.constraints&&i!==void 0&&i!==null){const{ExclusiveMaximum:l,ExclusiveMinimum:d,InclusiveMaximum:p,InclusiveMinimum:m,MaxItems:g,MaxLength:y,MinItems:E,MinLength:I,MultipleOf:Y,Pattern:M,UniqueItems:ee}=n.constraints;if(l!==void 0&&i>=l&&c("ExclusiveMaximum",l),d!==void 0&&i<=d&&c("ExclusiveMinimum",d),p!==void 0&&i>p&&c("InclusiveMaximum",p),m!==void 0&&i<m&&c("InclusiveMinimum",m),g!==void 0&&i.length>g&&c("MaxItems",g),y!==void 0&&i.length>y&&c("MaxLength",y),E!==void 0&&i.length<E&&c("MinItems",E),I!==void 0&&i.length<I&&c("MinLength",I),Y!==void 0&&i%Y!==0&&c("MultipleOf",Y),M){const J=typeof M=="string"?new RegExp(M):M;(typeof i!="string"||i.match(J)===null)&&c("Pattern",M)}ee&&i.some((J,de,ue)=>ue.indexOf(J)!==de)&&c("UniqueItems",ee)}}serialize(n,i,s,c={xml:{}}){const l={xml:{rootName:c.xml.rootName??"",includeRoot:c.xml.includeRoot??!1,xmlCharKey:c.xml.xmlCharKey??vo}};let d={};const p=n.type.name;s||(s=n.serializedName),p.match(/^Sequence$/i)!==null&&(d=[]),n.isConstant&&(i=n.defaultValue);const{required:m,nullable:g}=n;if(m&&g&&i===void 0)throw new Error(`${s} cannot be undefined.`);if(m&&!g&&i==null)throw new Error(`${s} cannot be null or undefined.`);if(!m&&g===!1&&i===null)throw new Error(`${s} cannot be null.`);return i==null||p.match(/^any$/i)!==null?d=i:p.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)!==null?d=H_(p,s,i):p.match(/^Enum$/i)!==null?d=q_(s,n.type.allowedValues,i):p.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)!==null?d=G_(p,i,s):p.match(/^ByteArray$/i)!==null?d=$_(s,i):p.match(/^Base64Url$/i)!==null?d=V_(s,i):p.match(/^Sequence$/i)!==null?d=F_(this,n,i,s,!!this.isXML,l):p.match(/^Dictionary$/i)!==null?d=X_(this,n,i,s,!!this.isXML,l):p.match(/^Composite$/i)!==null&&(d=J_(this,n,i,s,!!this.isXML,l)),d}deserialize(n,i,s,c={xml:{}}){const l={xml:{rootName:c.xml.rootName??"",includeRoot:c.xml.includeRoot??!1,xmlCharKey:c.xml.xmlCharKey??vo},ignoreUnknownProperties:c.ignoreUnknownProperties??!1};if(i==null)return this.isXML&&n.type.name==="Sequence"&&!n.xmlIsWrapped&&(i=[]),n.defaultValue!==void 0&&(i=n.defaultValue),i;let d;const p=n.type.name;if(s||(s=n.serializedName),p.match(/^Composite$/i)!==null)d=Q_(this,n,i,s,l);else{if(this.isXML){const m=l.xml.xmlCharKey;i[Bt]!==void 0&&i[m]!==void 0&&(i=i[m])}p.match(/^Number$/i)!==null?(d=parseFloat(i),isNaN(d)&&(d=i)):p.match(/^Boolean$/i)!==null?i==="true"?d=!0:i==="false"?d=!1:d=i:p.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)!==null?d=i:p.match(/^(Date|DateTime|DateTimeRfc1123)$/i)!==null?d=new Date(i):p.match(/^UnixTime$/i)!==null?d=B_(i):p.match(/^ByteArray$/i)!==null?d=m0(i):p.match(/^Base64Url$/i)!==null?d=z_(i):p.match(/^Sequence$/i)!==null?d=Z_(this,n,i,s,l):p.match(/^Dictionary$/i)!==null&&(d=W_(this,n,i,s,l))}return n.isConstant&&(d=n.defaultValue),d}}function vf(r={},n=!1){return new D_(r,n)}function P_(r,n){let i=r.length;for(;i-1>=0&&r[i-1]===n;)--i;return r.substr(0,i)}function I_(r){if(!r)return;if(!(r instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");const n=p0(r);return P_(n,"=").replace(/\+/g,"-").replace(/\//g,"_")}function z_(r){if(r){if(r&&typeof r.valueOf()!="string")throw new Error("Please provide an input of type string for converting to Uint8Array");return r=r.replace(/-/g,"+").replace(/_/g,"/"),m0(r)}}function Ld(r){const n=[];let i="";if(r){const s=r.split(".");for(const c of s)c.charAt(c.length-1)==="\\"?i+=c.substr(0,c.length-1)+".":(i+=c,n.push(i),i="")}return n}function L_(r){if(r)return typeof r.valueOf()=="string"&&(r=new Date(r)),Math.floor(r.getTime()/1e3)}function B_(r){if(r)return new Date(r*1e3)}function H_(r,n,i){if(i!=null){if(r.match(/^Number$/i)!==null){if(typeof i!="number")throw new Error(`${n} with value ${i} must be of type number.`)}else if(r.match(/^String$/i)!==null){if(typeof i.valueOf()!="string")throw new Error(`${n} with value "${i}" must be of type string.`)}else if(r.match(/^Uuid$/i)!==null){if(!(typeof i.valueOf()=="string"&&M_(i)))throw new Error(`${n} with value "${i}" must be of type string and a valid uuid.`)}else if(r.match(/^Boolean$/i)!==null){if(typeof i!="boolean")throw new Error(`${n} with value ${i} must be of type boolean.`)}else if(r.match(/^Stream$/i)!==null){const s=typeof i;if(s!=="string"&&typeof i.pipe!="function"&&typeof i.tee!="function"&&!(i instanceof ArrayBuffer)&&!ArrayBuffer.isView(i)&&!((typeof Blob=="function"||typeof Blob=="object")&&i instanceof Blob)&&s!=="function")throw new Error(`${n} must be a string, Blob, ArrayBuffer, ArrayBufferView, ReadableStream, or () => ReadableStream.`)}}return i}function q_(r,n,i){if(!n)throw new Error(`Please provide a set of allowedValues to validate ${r} as an Enum Type.`);if(!n.some(c=>typeof c.valueOf()=="string"?c.toLowerCase()===i.toLowerCase():c===i))throw new Error(`${i} is not a valid value for ${r}. The valid values are: ${JSON.stringify(n)}.`);return i}function $_(r,n){if(n!=null){if(!(n instanceof Uint8Array))throw new Error(`${r} must be of type Uint8Array.`);n=p0(n)}return n}function V_(r,n){if(n!=null){if(!(n instanceof Uint8Array))throw new Error(`${r} must be of type Uint8Array.`);n=I_(n)}return n}function G_(r,n,i){if(n!=null){if(r.match(/^Date$/i)!==null){if(!(n instanceof Date||typeof n.valueOf()=="string"&&!isNaN(Date.parse(n))))throw new Error(`${i} must be an instanceof Date or a string in ISO8601 format.`);n=n instanceof Date?n.toISOString().substring(0,10):new Date(n).toISOString().substring(0,10)}else if(r.match(/^DateTime$/i)!==null){if(!(n instanceof Date||typeof n.valueOf()=="string"&&!isNaN(Date.parse(n))))throw new Error(`${i} must be an instanceof Date or a string in ISO8601 format.`);n=n instanceof Date?n.toISOString():new Date(n).toISOString()}else if(r.match(/^DateTimeRfc1123$/i)!==null){if(!(n instanceof Date||typeof n.valueOf()=="string"&&!isNaN(Date.parse(n))))throw new Error(`${i} must be an instanceof Date or a string in RFC-1123 format.`);n=n instanceof Date?n.toUTCString():new Date(n).toUTCString()}else if(r.match(/^UnixTime$/i)!==null){if(!(n instanceof Date||typeof n.valueOf()=="string"&&!isNaN(Date.parse(n))))throw new Error(`${i} must be an instanceof Date or a string in RFC-1123/ISO8601 format for it to be serialized in UnixTime/Epoch format.`);n=L_(n)}else if(r.match(/^TimeSpan$/i)!==null&&!O_(n))throw new Error(`${i} must be a string in ISO 8601 format. Instead was "${n}".`)}return n}function F_(r,n,i,s,c,l){if(!Array.isArray(i))throw new Error(`${s} must be of type Array.`);let d=n.type.element;if(!d||typeof d!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${s}.`);d.type.name==="Composite"&&d.type.className&&(d=r.modelMappers[d.type.className]??d);const p=[];for(let m=0;m<i.length;m++){const g=r.serialize(d,i[m],s,l);if(c&&d.xmlNamespace){const y=d.xmlNamespacePrefix?`xmlns:${d.xmlNamespacePrefix}`:"xmlns";d.type.name==="Composite"?(p[m]={...g},p[m][Bt]={[y]:d.xmlNamespace}):(p[m]={},p[m][l.xml.xmlCharKey]=g,p[m][Bt]={[y]:d.xmlNamespace})}else p[m]=g}return p}function X_(r,n,i,s,c,l){if(typeof i!="object")throw new Error(`${s} must be of type object.`);const d=n.type.value;if(!d||typeof d!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${s}.`);const p={};for(const m of Object.keys(i)){const g=r.serialize(d,i[m],s,l);p[m]=v0(d,g,c,l)}if(c&&n.xmlNamespace){const m=n.xmlNamespacePrefix?`xmlns:${n.xmlNamespacePrefix}`:"xmlns",g=p;return g[Bt]={[m]:n.xmlNamespace},g}return p}function Y_(r,n,i){const s=n.type.additionalProperties;return!s&&n.type.className?g0(r,n,i)?.type.additionalProperties:s}function g0(r,n,i){const s=n.type.className;if(!s)throw new Error(`Class name for model "${i}" is not provided in the mapper "${JSON.stringify(n,void 0,2)}".`);return r.modelMappers[s]}function y0(r,n,i){let s=n.type.modelProperties;if(!s){const c=g0(r,n,i);if(!c)throw new Error(`mapper() cannot be null or undefined for model "${n.type.className}".`);if(s=c?.type.modelProperties,!s)throw new Error(`modelProperties cannot be null or undefined in the mapper "${JSON.stringify(c)}" of type "${n.type.className}" for object "${i}".`)}return s}function J_(r,n,i,s,c,l){if(Tc(r,n)&&(n=b0(r,n,i,"clientName")),i!=null){const d={},p=y0(r,n,s);for(const g of Object.keys(p)){const y=p[g];if(y.readOnly)continue;let E,I=d;if(r.isXML)y.xmlIsWrapped?E=y.xmlName:E=y.xmlElementName||y.xmlName;else{const Y=Ld(y.serializedName);E=Y.pop();for(const M of Y){const ee=I[M];ee==null&&(i[g]!==void 0&&i[g]!==null||y.defaultValue!==void 0)&&(I[M]={}),I=I[M]}}if(I!=null){if(c&&n.xmlNamespace){const de=n.xmlNamespacePrefix?`xmlns:${n.xmlNamespacePrefix}`:"xmlns";I[Bt]={...I[Bt],[de]:n.xmlNamespace}}const Y=y.serializedName!==""?s+"."+y.serializedName:s;let M=i[g];const ee=Tc(r,n);ee&&ee.clientName===g&&M==null&&(M=n.serializedName);const J=r.serialize(y,M,Y,l);if(J!==void 0&&E!==void 0&&E!==null){const de=v0(y,J,c,l);c&&y.xmlIsAttribute?(I[Bt]=I[Bt]||{},I[Bt][E]=J):c&&y.xmlIsWrapped?I[E]={[y.xmlElementName]:de}:I[E]=de}}}const m=Y_(r,n,s);if(m){const g=Object.keys(p);for(const y in i)g.every(I=>I!==y)&&(d[y]=r.serialize(m,i[y],s+'["'+y+'"]',l))}return d}return i}function v0(r,n,i,s){if(!i||!r.xmlNamespace)return n;const l={[r.xmlNamespacePrefix?`xmlns:${r.xmlNamespacePrefix}`:"xmlns"]:r.xmlNamespace};if(["Composite"].includes(r.type.name)){if(n[Bt])return n;{const p={...n};return p[Bt]=l,p}}const d={};return d[s.xml.xmlCharKey]=n,d[Bt]=l,d}function K_(r,n){return[Bt,n.xml.xmlCharKey].includes(r)}function Q_(r,n,i,s,c){const l=c.xml.xmlCharKey??vo;Tc(r,n)&&(n=b0(r,n,i,"serializedName"));const d=y0(r,n,s);let p={};const m=[];for(const y of Object.keys(d)){const E=d[y],I=Ld(d[y].serializedName);m.push(I[0]);const{serializedName:Y,xmlName:M,xmlElementName:ee}=E;let J=s;Y!==""&&Y!==void 0&&(J=s+"."+Y);const de=E.headerCollectionPrefix;if(de){const ue={};for(const pe of Object.keys(i))pe.startsWith(de)&&(ue[pe.substring(de.length)]=r.deserialize(E.type.value,i[pe],J,c)),m.push(pe);p[y]=ue}else if(r.isXML)if(E.xmlIsAttribute&&i[Bt])p[y]=r.deserialize(E,i[Bt][M],J,c);else if(E.xmlIsMsText)i[l]!==void 0?p[y]=i[l]:typeof i=="string"&&(p[y]=i);else{const ue=ee||M||Y;if(E.xmlIsWrapped){const F=i[M]?.[ee]??[];p[y]=r.deserialize(E,F,J,c),m.push(M)}else{const pe=i[ue];p[y]=r.deserialize(E,pe,J,c),m.push(ue)}}else{let ue,pe=i,F=0;for(const ae of I){if(!pe)break;F++,pe=pe[ae]}pe===null&&F<I.length&&(pe=void 0),ue=pe;const ne=n.type.polymorphicDiscriminator;ne&&y===ne.clientName&&ue==null&&(ue=n.serializedName);let me;if(Array.isArray(i[y])&&d[y].serializedName===""){ue=i[y];const ae=r.deserialize(E,ue,J,c);for(const[_e,Ce]of Object.entries(p))Object.prototype.hasOwnProperty.call(ae,_e)||(ae[_e]=Ce);p=ae}else(ue!==void 0||E.defaultValue!==void 0)&&(me=r.deserialize(E,ue,J,c),p[y]=me)}}const g=n.type.additionalProperties;if(g){const y=E=>{for(const I in d)if(Ld(d[I].serializedName)[0]===E)return!1;return!0};for(const E in i)y(E)&&(p[E]=r.deserialize(g,i[E],s+'["'+E+'"]',c))}else if(i&&!c.ignoreUnknownProperties)for(const y of Object.keys(i))p[y]===void 0&&!m.includes(y)&&!K_(y,c)&&(p[y]=i[y]);return p}function W_(r,n,i,s,c){const l=n.type.value;if(!l||typeof l!="object")throw new Error(`"value" metadata for a Dictionary must be defined in the mapper and it must of type "object" in ${s}`);if(i){const d={};for(const p of Object.keys(i))d[p]=r.deserialize(l,i[p],s,c);return d}return i}function Z_(r,n,i,s,c){let l=n.type.element;if(!l||typeof l!="object")throw new Error(`element" metadata for an Array must be defined in the mapper and it must of type "object" in ${s}`);if(i){Array.isArray(i)||(i=[i]),l.type.name==="Composite"&&l.type.className&&(l=r.modelMappers[l.type.className]??l);const d=[];for(let p=0;p<i.length;p++)d[p]=r.deserialize(l,i[p],`${s}[${p}]`,c);return d}return i}function ek(r,n,i){const s=[i];for(;s.length;){const c=s.shift(),l=n===c?n:c+"."+n;if(Object.prototype.hasOwnProperty.call(r,l))return r[l];for(const[d,p]of Object.entries(r))d.startsWith(c+".")&&p.type.uberParent===c&&p.type.className&&s.push(p.type.className)}}function b0(r,n,i,s){const c=Tc(r,n);if(c){let l=c[s];if(l){s==="serializedName"&&(l=l.replace(/\\/gi,""));const d=i[l],p=n.type.uberParent??n.type.className;if(typeof d=="string"&&p){const m=ek(r.modelMappers.discriminators,d,p);m&&(n=m)}}}return n}function Tc(r,n){return n.type.polymorphicDiscriminator||Ty(r,n.type.uberParent)||Ty(r,n.type.className)}function Ty(r,n){return n&&r.modelMappers[n]&&r.modelMappers[n].type.polymorphicDiscriminator}const Ti={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};class bf extends Error{constructor(n){super(n),this.name="AbortError"}}function tk(...r){if(r.length>0){const n=String(r[0]);n.includes(":error")?console.error(...r):n.includes(":warning")?console.warn(...r):n.includes(":info")?console.info(...r):n.includes(":verbose")?console.debug(...r):console.debug(...r)}}var Cy={};const xy=typeof process<"u"&&Cy&&Cy.DEBUG||void 0;let S0,Bd=[],Hd=[];const Cc=[];xy&&Sf(xy);const po=Object.assign(r=>w0(r),{enable:Sf,enabled:wf,disable:nk,log:tk});function Sf(r){S0=r,Bd=[],Hd=[];const n=r.split(",").map(i=>i.trim());for(const i of n)i.startsWith("-")?Hd.push(i.substring(1)):Bd.push(i);for(const i of Cc)i.enabled=wf(i.namespace)}function wf(r){if(r.endsWith("*"))return!0;for(const n of Hd)if(Ry(r,n))return!1;for(const n of Bd)if(Ry(r,n))return!0;return!1}function Ry(r,n){if(n.indexOf("*")===-1)return r===n;let i=n;if(n.indexOf("**")!==-1){const I=[];let Y="";for(const M of n)M==="*"&&Y==="*"||(Y=M,I.push(M));i=I.join("")}let s=0,c=0;const l=i.length,d=r.length;let p=-1,m=-1;for(;s<d&&c<l;)if(i[c]==="*"){if(p=c,c++,c===l)return!0;for(;r[s]!==i[c];)if(s++,s===d)return!1;m=s,s++,c++;continue}else if(i[c]===r[s])c++,s++;else if(p>=0){if(c=p+1,s=m+1,s===d)return!1;for(;r[s]!==i[c];)if(s++,s===d)return!1;m=s,s++,c++;continue}else return!1;const g=s===r.length,y=c===i.length,E=c===i.length-1&&i[c]==="*";return g&&(y||E)}function nk(){const r=S0||"";return Sf(""),r}function w0(r){const n=Object.assign(i,{enabled:wf(r),destroy:rk,log:po.log,namespace:r,extend:ik});function i(...s){n.enabled&&(s.length>0&&(s[0]=`${r} ${s[0]}`),n.log(...s))}return Cc.push(n),n}function rk(){const r=Cc.indexOf(this);return r>=0?(Cc.splice(r,1),!0):!1}function ik(r){const n=w0(`${this.namespace}:${r}`);return n.log=this.log,n}var Ey={};const qd=["verbose","info","warning","error"],_y={verbose:400,info:300,warning:200,error:100};function ky(r,n){n.log=(...i)=>{r.log(...i)}}function Ay(r){return qd.includes(r)}function T0(r){const n=new Set,i=typeof process<"u"&&Ey&&Ey[r.logLevelEnvVarName]||void 0;let s;const c=po(r.namespace);c.log=(...y)=>{po.log(...y)};function l(y){if(y&&!Ay(y))throw new Error(`Unknown log level '${y}'. Acceptable values: ${qd.join(",")}`);s=y;const E=[];for(const I of n)d(I)&&E.push(I.namespace);po.enable(E.join(","))}i&&(Ay(i)?l(i):console.error(`${r.logLevelEnvVarName} set to unknown log level '${i}'; logging is not enabled. Acceptable values: ${qd.join(", ")}.`));function d(y){return!!(s&&_y[y.level]<=_y[s])}function p(y,E){const I=Object.assign(y.extend(E),{level:E});if(ky(y,I),d(I)){const Y=po.disable();po.enable(Y+","+I.namespace)}return n.add(I),I}function m(){return s}function g(y){const E=c.extend(y);return ky(c,E),{error:p(E,"error"),warning:p(E,"warning"),info:p(E,"info"),verbose:p(E,"verbose")}}return{setLogLevel:l,getLogLevel:m,createClientLogger:g,logger:c}}const ok=T0({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"});function C0(r){return ok.createClientLogger(r)}function sc(r){return r.toLowerCase()}function*sk(r){for(const n of r.values())yield[n.name,n.value]}class ak{_headersMap;constructor(n){if(this._headersMap=new Map,n)for(const i of Object.keys(n))this.set(i,n[i])}set(n,i){this._headersMap.set(sc(n),{name:n,value:String(i).trim()})}get(n){return this._headersMap.get(sc(n))?.value}has(n){return this._headersMap.has(sc(n))}delete(n){this._headersMap.delete(sc(n))}toJSON(n={}){const i={};if(n.preserveCase)for(const s of this._headersMap.values())i[s.name]=s.value;else for(const[s,c]of this._headersMap)i[s]=c.value;return i}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return sk(this._headersMap)}}function Ri(r){return new ak(r)}class ck{url;method;headers;timeout;withCredentials;body;multipartBody;formData;streamResponseStatusCodes;enableBrowserStreams;proxySettings;disableKeepAlive;abortSignal;requestId;allowInsecureConnection;onUploadProgress;onDownloadProgress;requestOverrides;authSchemes;constructor(n){this.url=n.url,this.body=n.body,this.headers=n.headers??Ri(),this.method=n.method??"GET",this.timeout=n.timeout??0,this.multipartBody=n.multipartBody,this.formData=n.formData,this.disableKeepAlive=n.disableKeepAlive??!1,this.proxySettings=n.proxySettings,this.streamResponseStatusCodes=n.streamResponseStatusCodes,this.withCredentials=n.withCredentials??!1,this.abortSignal=n.abortSignal,this.onUploadProgress=n.onUploadProgress,this.onDownloadProgress=n.onDownloadProgress,this.requestId=n.requestId||mf(),this.allowInsecureConnection=n.allowInsecureConnection??!1,this.enableBrowserStreams=n.enableBrowserStreams??!1,this.requestOverrides=n.requestOverrides,this.authSchemes=n.authSchemes}}function x0(r){return new ck(r)}const Ny=new Set(["Deserialize","Serialize","Retry","Sign"]);class xc{_policies=[];_orderedPolicies;constructor(n){this._policies=n?.slice(0)??[],this._orderedPolicies=void 0}addPolicy(n,i={}){if(i.phase&&i.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(i.phase&&!Ny.has(i.phase))throw new Error(`Invalid phase name: ${i.phase}`);if(i.afterPhase&&!Ny.has(i.afterPhase))throw new Error(`Invalid afterPhase name: ${i.afterPhase}`);this._policies.push({policy:n,options:i}),this._orderedPolicies=void 0}removePolicy(n){const i=[];return this._policies=this._policies.filter(s=>n.name&&s.policy.name===n.name||n.phase&&s.options.phase===n.phase?(i.push(s.policy),!1):!0),this._orderedPolicies=void 0,i}sendRequest(n,i){return this.getOrderedPolicies().reduceRight((l,d)=>p=>d.sendRequest(p,l),l=>n.sendRequest(l))(i)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new xc(this._policies)}static create(){return new xc}orderPolicies(){const n=[],i=new Map;function s(M){return{name:M,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}const c=s("Serialize"),l=s("None"),d=s("Deserialize"),p=s("Retry"),m=s("Sign"),g=[c,l,d,p,m];function y(M){return M==="Retry"?p:M==="Serialize"?c:M==="Deserialize"?d:M==="Sign"?m:l}for(const M of this._policies){const ee=M.policy,J=M.options,de=ee.name;if(i.has(de))throw new Error("Duplicate policy names not allowed in pipeline");const ue={policy:ee,dependsOn:new Set,dependants:new Set};J.afterPhase&&(ue.afterPhase=y(J.afterPhase),ue.afterPhase.hasAfterPolicies=!0),i.set(de,ue),y(J.phase).policies.add(ue)}for(const M of this._policies){const{policy:ee,options:J}=M,de=ee.name,ue=i.get(de);if(!ue)throw new Error(`Missing node for policy ${de}`);if(J.afterPolicies)for(const pe of J.afterPolicies){const F=i.get(pe);F&&(ue.dependsOn.add(F),F.dependants.add(ue))}if(J.beforePolicies)for(const pe of J.beforePolicies){const F=i.get(pe);F&&(F.dependsOn.add(ue),ue.dependants.add(F))}}function E(M){M.hasRun=!0;for(const ee of M.policies)if(!(ee.afterPhase&&(!ee.afterPhase.hasRun||ee.afterPhase.policies.size))&&ee.dependsOn.size===0){n.push(ee.policy);for(const J of ee.dependants)J.dependsOn.delete(ee);i.delete(ee.policy.name),M.policies.delete(ee)}}function I(){for(const M of g){if(E(M),M.policies.size>0&&M!==l){l.hasRun||E(l);return}M.hasAfterPolicies&&E(l)}}let Y=0;for(;i.size>0;){Y++;const M=n.length;if(I(),n.length<=M&&Y>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return n}}function R0(){return xc.create()}const lk=Symbol(),uk=new gf;let Ei=class E0 extends Error{static REQUEST_SEND_ERROR="REQUEST_SEND_ERROR";static PARSE_ERROR="PARSE_ERROR";code;statusCode;request;response;details;constructor(n,i={}){super(n),this.name="RestError",this.code=i.code,this.statusCode=i.statusCode,Object.defineProperty(this,"request",{value:i.request,enumerable:!1}),Object.defineProperty(this,"response",{value:i.response,enumerable:!1});const s=this.request?.agent?{maxFreeSockets:this.request.agent.maxFreeSockets,maxSockets:this.request.agent.maxSockets}:void 0;Object.defineProperty(this,lk,{value:()=>`RestError: ${this.message} 
 ${uk.sanitize({...this,request:{...this.request,agent:s},response:this.response})}`,enumerable:!1}),Object.setPrototypeOf(this,E0.prototype)}};function _0(r){return r instanceof Ei?!0:pf(r)&&r.name==="RestError"}function k0(r){return!!(r&&typeof r.pipe=="function")}function Bc(r){return!!(r&&typeof r.getReader=="function"&&typeof r.tee=="function")}function A0(r){return r!==void 0&&(r instanceof Uint8Array||N0(r)||typeof r=="function"||r instanceof Blob)}function N0(r){return k0(r)||Bc(r)}function dk(r){return typeof r.stream=="function"}function fk(r){if(r.buffer instanceof ArrayBuffer&&r.byteOffset===0&&r.byteLength===r.buffer.byteLength)return r.buffer;const n=new ArrayBuffer(r.byteLength),i=new Uint8Array(n),s=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);return i.set(s),i.buffer}function hk(r){return(typeof Blob=="function"||typeof Blob=="object")&&r instanceof Blob}class pk{async sendRequest(n){if(new URL(n.url).protocol!=="https:"&&!n.allowInsecureConnection)throw new Error(`Cannot connect to ${n.url} while allowInsecureConnection is false.`);if(n.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");try{return await mk(n)}catch(c){throw vk(c,n)}}}async function mk(r){const{abortController:n,abortControllerCleanup:i}=yk(r);try{const s=bk(r.headers),{streaming:c,body:l}=wk(r),d={body:l,method:r.method,headers:s,signal:n.signal,..."credentials"in Request.prototype?{credentials:r.withCredentials?"include":"same-origin"}:{},..."cache"in Request.prototype?{cache:"no-store"}:{}};c&&(d.duplex="half");const p=await fetch(r.url,{...d,...r.requestOverrides});return hk(r.body)&&r.onUploadProgress&&r.onUploadProgress({loadedBytes:r.body.size}),gk(p,r,i)}catch(s){throw i?.(),s}}async function gk(r,n,i){const s=Sk(r),c={request:n,headers:s,status:r.status},l=Bc(r.body)?O0(r.body,{onProgress:n.onDownloadProgress,onEnd:i}):r.body;if(n.streamResponseStatusCodes?.has(Number.POSITIVE_INFINITY)||n.streamResponseStatusCodes?.has(c.status))if(n.enableBrowserStreams)c.browserStreamBody=l??void 0;else{const d=new Response(l);c.blobBody=d.blob(),i?.()}else{const d=new Response(l);c.bodyAsText=await d.text(),i?.()}return c}function yk(r){const n=new AbortController;let i,s;if(r.abortSignal){if(r.abortSignal.aborted)throw new bf("The operation was aborted. Request has already been canceled.");s=c=>{c.type==="abort"&&n.abort()},r.abortSignal.addEventListener("abort",s),i=()=>{s&&r.abortSignal?.removeEventListener("abort",s)}}return r.timeout>0&&setTimeout(()=>{n.abort()},r.timeout),{abortController:n,abortControllerCleanup:i}}function vk(r,n){return r&&r?.name==="AbortError"?r:new Ei(`Error sending request: ${r.message}`,{code:r?.code??Ei.REQUEST_SEND_ERROR,request:n})}function bk(r){const n=new Headers;for(const[i,s]of r)n.append(i,s);return n}function Sk(r){const n=Ri();for(const[i,s]of r.headers)n.set(i,s);return n}function wk(r){const n=typeof r.body=="function"?r.body():r.body;if(k0(n))throw new Error("Node streams are not supported in browser environment.");return Bc(n)?{streaming:!0,body:O0(n,{onProgress:r.onUploadProgress})}:typeof n=="object"&&n&&"buffer"in n?{streaming:!1,body:fk(n)}:n===void 0?{streaming:!1}:{streaming:!1,body:n}}function O0(r,n={}){let i=0;const{onProgress:s,onEnd:c}=n;if(Ck(r))return r.pipeThrough(new TransformStream({transform(l,d){if(l===null){d.terminate();return}d.enqueue(l),i+=l.length,s&&s({loadedBytes:i})},flush(){c?.()}}));{const l=r.getReader();return new ReadableStream({async pull(d){const{done:p,value:m}=await l.read();if(p||!m){c?.(),d.close(),l.releaseLock();return}i+=m?.length??0,d.enqueue(m),s&&s({loadedBytes:i})},cancel(d){return c?.(),l.cancel(d)}})}}function Tk(){return new pk}function Ck(r){return r.pipeThrough!==void 0&&self.TransformStream!==void 0}function j0(){return Tk()}const M0=C0("ts-http-runtime"),U0="logPolicy";function D0(r={}){const n=r.logger??M0.info,i=new gf({additionalAllowedHeaderNames:r.additionalAllowedHeaderNames,additionalAllowedQueryParameters:r.additionalAllowedQueryParameters});return{name:U0,async sendRequest(s,c){if(!n.enabled)return c(s);n(`Request: ${i.sanitize(s)}`);const l=await c(s);return n(`Response status code: ${l.status}`),n(`Headers: ${i.sanitize(l.headers)}`),l}}}const P0="redirectPolicy",Oy=["GET","HEAD"];function I0(r={}){const{maxRetries:n=20}=r;return{name:P0,async sendRequest(i,s){const c=await s(i);return z0(s,c,n)}}}async function z0(r,n,i,s=0){const{request:c,status:l,headers:d}=n,p=d.get("location");if(p&&(l===300||l===301&&Oy.includes(c.method)||l===302&&Oy.includes(c.method)||l===303&&c.method==="POST"||l===307)&&s<i){const m=new URL(p,c.url);c.url=m.toString(),l===303&&(c.method="GET",c.headers.delete("Content-Length"),delete c.body),c.headers.delete("Authorization");const g=await r(c);return z0(r,g,i,s+1)}return n}function xk(){return"x-ms-useragent"}function Rk(r){const n=[{name:"Firefox",regex:/Firefox\/([\d.]+)/},{name:"Safari",regex:/Version\/([\d.]+).*Safari/}];for(const i of n){const s=r.match(i.regex);if(s)return{brand:i.name,version:s[1]}}}function Ek(r){const n=["Google Chrome","Microsoft Edge","Opera","Brave","Chromium"];for(const i of n){const s=r.find(c=>c.brand===i);if(s)return s}}async function _k(r){const n=globalThis.navigator;let i="unknown";if(n?.userAgentData){const s=await n.userAgentData.getHighEntropyValues(["architecture","platformVersion"]);i=`${s.platform} ${s.platformVersion}; ${s.architecture}`;const c=Ek(n.userAgentData.brands);c&&r.set(c.brand,`${c.version} (${i})`)}else if(n?.platform){i=n.platform;const s=Rk(n.userAgent);s&&r.set(s.brand,`${s.version} (${i})`)}else typeof globalThis.EdgeRuntime=="string"&&r.set("EdgeRuntime",`${globalThis.EdgeRuntime} (${i})`)}const kk="0.3.2",bo=3;function Ak(r){const n=[];for(const[i,s]of r){const c=s?`${i}/${s}`:i;n.push(c)}return n.join(" ")}function Nk(){return xk()}async function Ok(r){const n=new Map;n.set("ts-http-runtime",kk),await _k(n);const i=Ak(n);return r?`${r} ${i}`:i}const jy=Nk(),jk="userAgentPolicy";function Mk(r={}){const n=Ok(r.userAgentPrefix);return{name:jk,async sendRequest(i,s){return i.headers.has(jy)||i.headers.set(jy,await n),s(i)}}}const Uk="decompressResponsePolicy";function L0(){throw new Error("decompressResponsePolicy is not supported in browser environment")}const Dk="The operation was aborted.";function Pk(r,n,i){return new Promise((s,c)=>{let l,d;const p=()=>c(new bf(i?.abortErrorMsg?i?.abortErrorMsg:Dk)),m=()=>{i?.abortSignal&&d&&i.abortSignal.removeEventListener("abort",d)};if(d=()=>(l&&clearTimeout(l),m(),p()),i?.abortSignal&&i.abortSignal.aborted)return p();l=setTimeout(()=>{m(),s(n)},r),i?.abortSignal&&i.abortSignal.addEventListener("abort",d)})}function Ik(r,n){const i=r.headers.get(n);if(!i)return;const s=Number(i);if(!Number.isNaN(s))return s}const $d="Retry-After",zk=["retry-after-ms","x-ms-retry-after-ms",$d];function B0(r){if(r&&[429,503].includes(r.status))try{for(const c of zk){const l=Ik(r,c);if(l===0||l)return l*(c===$d?1e3:1)}const n=r.headers.get($d);if(!n)return;const s=Date.parse(n)-Date.now();return Number.isFinite(s)?Math.max(0,s):void 0}catch{return}}function Lk(r){return Number.isFinite(B0(r))}function H0(){return{name:"throttlingRetryStrategy",retry({response:r}){const n=B0(r);return Number.isFinite(n)?{retryAfterInMs:n}:{skipStrategy:!0}}}}const Bk=1e3,Hk=1e3*64;function Tf(r={}){const n=r.retryDelayInMs??Bk,i=r.maxRetryDelayInMs??Hk;return{name:"exponentialRetryStrategy",retry({retryCount:s,response:c,responseError:l}){const d=$k(l),p=d&&r.ignoreSystemErrors,m=qk(c),g=m&&r.ignoreHttpStatusCodes;return c&&(Lk(c)||!m)||g||p?{skipStrategy:!0}:l&&!d&&!m?{errorToThrow:l}:r0(s,{retryDelayInMs:n,maxRetryDelayInMs:i})}}}function qk(r){return!!(r&&r.status!==void 0&&(r.status>=500||r.status===408)&&r.status!==501&&r.status!==505)}function $k(r){return r?r.code==="ETIMEDOUT"||r.code==="ESOCKETTIMEDOUT"||r.code==="ECONNREFUSED"||r.code==="ECONNRESET"||r.code==="ENOENT"||r.code==="ENOTFOUND":!1}const Vk=C0("ts-http-runtime retryPolicy"),Gk="retryPolicy";function Bs(r,n={maxRetries:bo}){const i=n.logger||Vk;return{name:Gk,async sendRequest(s,c){let l,d,p=-1;e:for(;;){p+=1,l=void 0,d=void 0;try{i.info(`Retry ${p}: Attempting to send request`,s.requestId),l=await c(s),i.info(`Retry ${p}: Received a response from request`,s.requestId)}catch(m){if(i.error(`Retry ${p}: Received an error from request`,s.requestId),d=m,!m||d.name!=="RestError")throw m;l=d.response}if(s.abortSignal?.aborted)throw i.error(`Retry ${p}: Request aborted.`),new bf;if(p>=(n.maxRetries??bo)){if(i.info(`Retry ${p}: Maximum retries reached. Returning the last received response, or throwing the last received error.`),d)throw d;if(l)return l;throw new Error("Maximum retries reached with no response or error to throw")}i.info(`Retry ${p}: Processing ${r.length} retry strategies.`);t:for(const m of r){const g=m.logger||i;g.info(`Retry ${p}: Processing retry strategy ${m.name}.`);const y=m.retry({retryCount:p,response:l,responseError:d});if(y.skipStrategy){g.info(`Retry ${p}: Skipped.`);continue t}const{errorToThrow:E,retryAfterInMs:I,redirectTo:Y}=y;if(E)throw g.error(`Retry ${p}: Retry strategy ${m.name} throws error:`,E),E;if(I||I===0){g.info(`Retry ${p}: Retry strategy ${m.name} retries after ${I}`),await Pk(I,void 0,{abortSignal:s.abortSignal});continue e}if(Y){g.info(`Retry ${p}: Retry strategy ${m.name} redirects to ${Y}`),s.url=Y;continue e}}if(d)throw i.info("None of the retry strategies could work with the received error. Throwing it."),d;if(l)return i.info("None of the retry strategies could work with the received response. Returning it."),l}}}}const Fk="defaultRetryPolicy";function q0(r={}){return{name:Fk,sendRequest:Bs([H0(),Tf(r)],{maxRetries:r.maxRetries??bo}).sendRequest}}const $0="formDataPolicy";function Xk(r){const n={};for(const[i,s]of r.entries())n[i]??=[],n[i].push(s);return n}function V0(){return{name:$0,async sendRequest(r,n){if(Qr&&typeof FormData<"u"&&r.body instanceof FormData&&(r.formData=Xk(r.body),r.body=void 0),r.formData){const i=r.headers.get("Content-Type");i&&i.indexOf("application/x-www-form-urlencoded")!==-1?r.body=Yk(r.formData):await Jk(r.formData,r),r.formData=void 0}return n(r)}}}function Yk(r){const n=new URLSearchParams;for(const[i,s]of Object.entries(r))if(Array.isArray(s))for(const c of s)n.append(i,c.toString());else n.append(i,s.toString());return n.toString()}async function Jk(r,n){const i=n.headers.get("Content-Type");if(i&&!i.startsWith("multipart/form-data"))return;n.headers.set("Content-Type",i??"multipart/form-data");const s=[];for(const[c,l]of Object.entries(r))for(const d of Array.isArray(l)?l:[l])if(typeof d=="string")s.push({headers:Ri({"Content-Disposition":`form-data; name="${c}"`}),body:mn(d,"utf-8")});else{if(d==null||typeof d!="object")throw new Error(`Unexpected value for key ${c}: ${d}. Value should be serialized to string first.`);{const p=d.name||"blob",m=Ri();m.set("Content-Disposition",`form-data; name="${c}"; filename="${p}"`),m.set("Content-Type",d.type||"application/octet-stream"),s.push({headers:m,body:d})}}n.multipartBody={parts:s}}const Kk="proxyPolicy",G0="proxyPolicy is not supported in browser environment";function Qk(){throw new Error(G0)}function F0(){throw new Error(G0)}const X0="agentPolicy";function Y0(r){return{name:X0,sendRequest:async(n,i)=>(n.agent||(n.agent=r),i(n))}}const J0="tlsPolicy";function K0(r){return{name:J0,sendRequest:async(n,i)=>(n.tlsSettings||(n.tlsSettings=r),i(n))}}function Wk(r){return new Response(r).blob()}async function Zk(r){if(r instanceof Blob||r instanceof Uint8Array)return r;if(Bc(r))return Wk(r);throw new Error("Unsupported source type. Only Blob, Uint8Array, and ReadableStream are supported in browser.")}function eA(r){return"resize"in r.buffer?r:r.map(n=>n)}async function tA(r){const n=[];for(const i of r){const s=await Zk(typeof i=="function"?i():i);s instanceof Blob?n.push(s):n.push(new Blob([eA(s)]))}return new Blob(n)}function nA(){return`----AzSDKFormBoundary${mf()}`}function rA(r){let n="";for(const[i,s]of r)n+=`${i}: ${s}\r
`;return n}function iA(r){return r instanceof Uint8Array?r.byteLength:dk(r)?r.size===-1?void 0:r.size:void 0}function oA(r){let n=0;for(const i of r){const s=iA(i);if(s===void 0)return;n+=s}return n}async function sA(r,n,i){const s=[mn(`--${i}`,"utf-8"),...n.flatMap(l=>[mn(`\r
`,"utf-8"),mn(rA(l.headers),"utf-8"),mn(`\r
`,"utf-8"),l.body,mn(`\r
--${i}`,"utf-8")]),mn(`--\r
\r
`,"utf-8")],c=oA(s);c&&r.headers.set("Content-Length",c),r.body=await tA(s)}const Cf="multipartPolicy",aA=70,cA=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function lA(r){if(r.length>aA)throw new Error(`Multipart boundary "${r}" exceeds maximum length of 70 characters`);if(Array.from(r).some(n=>!cA.has(n)))throw new Error(`Multipart boundary "${r}" contains invalid characters`)}function Q0(){return{name:Cf,async sendRequest(r,n){if(!r.multipartBody)return n(r);if(r.body)throw new Error("multipartBody and regular body cannot be set at the same time");let i=r.multipartBody.boundary;const s=r.headers.get("Content-Type")??"multipart/mixed",c=s.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!c)throw new Error(`Got multipart request body, but content-type header was not multipart: ${s}`);const[,l,d]=c;if(d&&i&&d!==i)throw new Error(`Multipart boundary was specified as ${d} in the header, but got ${i} in the request body`);return i??=d,i?lA(i):i=nA(),r.headers.set("Content-Type",`${l}; boundary=${i}`),await sA(r,r.multipartBody.parts,i),r.multipartBody=void 0,n(r)}}}function uA(r){const n=R0();return Qr&&(r.agent&&n.addPolicy(Y0(r.agent)),r.tlsOptions&&n.addPolicy(K0(r.tlsOptions)),n.addPolicy(F0(r.proxyOptions)),n.addPolicy(L0())),n.addPolicy(V0(),{beforePolicies:[Cf]}),n.addPolicy(Mk(r.userAgentOptions)),n.addPolicy(Q0(),{afterPhase:"Deserialize"}),n.addPolicy(q0(r.retryOptions),{phase:"Retry"}),Qr&&n.addPolicy(I0(r.redirectOptions),{afterPhase:"Retry"}),n.addPolicy(D0(r.loggingOptions),{afterPhase:"Sign"}),n}const dA="ApiVersionPolicy";function fA(r){return{name:dA,sendRequest:(n,i)=>{const s=new URL(n.url);return!s.searchParams.get("api-version")&&r.apiVersion&&(n.url=`${n.url}${Array.from(s.searchParams.keys()).length>0?"&":"?"}api-version=${r.apiVersion}`),i(n)}}}function hA(r){return"getOAuth2Token"in r}function pA(r){return"getBearerToken"in r}function mA(r){return"username"in r&&"password"in r}function gA(r){return"key"in r}let My=!1;function yA(r,n){if(n.allowInsecureConnection&&r.allowInsecureConnection){const i=new URL(r.url);if(i.hostname==="localhost"||i.hostname==="127.0.0.1")return!0}return!1}function vA(){const r="Sending token over insecure transport. Assume any token issued is compromised.";M0.warning(r),typeof process?.emitWarning=="function"&&!My&&(My=!0,process.emitWarning(r))}function Hc(r,n){if(!r.url.toLowerCase().startsWith("https://"))if(yA(r,n))vA();else throw new Error("Authentication is not permitted for non-TLS protected (non-https) URLs when allowInsecureConnection is false.")}const bA="apiKeyAuthenticationPolicy";function SA(r){return{name:bA,async sendRequest(n,i){Hc(n,r);const s=(n.authSchemes??r.authSchemes)?.find(c=>c.kind==="apiKey");if(!s)return i(n);if(s.apiKeyLocation!=="header")throw new Error(`Unsupported API key location: ${s.apiKeyLocation}`);return n.headers.set(s.name,r.credential.key),i(n)}}}const wA="bearerAuthenticationPolicy";function TA(r){return{name:wA,async sendRequest(n,i){if(Hc(n,r),!(n.authSchemes??r.authSchemes)?.find(p=>p.kind==="http"&&p.scheme==="basic"))return i(n);const{username:c,password:l}=r.credential,d=Lc(mn(`${c}:${l}`,"utf-8"),"base64");return n.headers.set("Authorization",`Basic ${d}`),i(n)}}}const CA="bearerAuthenticationPolicy";function xA(r){return{name:CA,async sendRequest(n,i){if(Hc(n,r),!(n.authSchemes??r.authSchemes)?.find(l=>l.kind==="http"&&l.scheme==="bearer"))return i(n);const c=await r.credential.getBearerToken({abortSignal:n.abortSignal});return n.headers.set("Authorization",`Bearer ${c}`),i(n)}}}const RA="oauth2AuthenticationPolicy";function EA(r){return{name:RA,async sendRequest(n,i){Hc(n,r);const s=(n.authSchemes??r.authSchemes)?.find(l=>l.kind==="oauth2");if(!s)return i(n);const c=await r.credential.getOAuth2Token(s.flows,{abortSignal:n.abortSignal});return n.headers.set("Authorization",`Bearer ${c}`),i(n)}}}let Ed;function _A(r={}){const n=uA(r);n.addPolicy(fA(r));const{credential:i,authSchemes:s,allowInsecureConnection:c}=r;return i&&(gA(i)?n.addPolicy(SA({authSchemes:s,credential:i,allowInsecureConnection:c})):mA(i)?n.addPolicy(TA({authSchemes:s,credential:i,allowInsecureConnection:c})):pA(i)?n.addPolicy(xA({authSchemes:s,credential:i,allowInsecureConnection:c})):hA(i)&&n.addPolicy(EA({authSchemes:s,credential:i,allowInsecureConnection:c}))),n}function kA(){return Ed||(Ed=j0()),Ed}function W0(r,n){if(r.headers){const i=Object.keys(r.headers).find(s=>s.toLowerCase()===n.toLowerCase());if(i)return r.headers[i]}}function AA(r){const n=W0(r,"content-type");if(n)return n;if(r.contentType===null)return;if(r.contentType)return r.contentType;const{body:i}=r;if(i!=null)return typeof i=="string"||typeof i=="number"||typeof i=="boolean"?"text/plain; charset=UTF-8":i instanceof Blob?i.type||"application/octet-stream":A0(i)?"application/octet-stream":"application/json"}function Uy(r){return JSON.stringify(r)}function NA(r){const n=W0(r,"content-disposition");if(n)return n;if(r.dispositionType===void 0&&r.name===void 0&&r.filename===void 0)return;let s=r.dispositionType??"form-data";r.name&&(s+=`; name=${Uy(r.name)}`);let c;if(r.filename)c=r.filename;else if(typeof File<"u"&&r.body instanceof File){const l=r.body.name;l!==""&&(c=l)}return c&&(s+=`; filename=${Uy(c)}`),s}function OA(r,n){if(r===void 0)return new Uint8Array([]);if(A0(r))return r;if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return mn(String(r),"utf-8");if(n&&/application\/(.+\+)?json(;.+)?/i.test(String(n)))return mn(JSON.stringify(r),"utf-8");throw new Ei(`Unsupported body/content-type combination: ${r}, ${n}`)}function jA(r){const n=AA(r),i=NA(r),s=Ri(r.headers??{});n&&s.set("content-type",n),i&&s.set("content-disposition",i);const c=OA(r.body,n);return{headers:s,body:c}}function MA(r){return{parts:r.map(jA)}}async function _d(r,n,i,s={},c){const l=c??kA(),d=PA(r,n,s);try{const p=await i.sendRequest(l,d),m=p.headers.toJSON(),g=p.readableStreamBody??p.browserStreamBody,y=s.responseAsStream||g!==void 0?void 0:zA(p),E=g??y;return s?.onResponse&&s.onResponse({...p,request:d,rawHeaders:m,parsedBody:y}),{request:d,headers:m,status:`${p.status}`,body:E}}catch(p){if(_0(p)&&p.response&&s.onResponse){const{response:m}=p,g=m.headers.toJSON();s?.onResponse({...m,request:d,rawHeaders:g},p)}throw p}}function UA(r={}){return r.contentType??r.headers?.["content-type"]??DA(r.body)}function DA(r){if(ArrayBuffer.isView(r))return"application/octet-stream";if(typeof r=="string")try{return JSON.parse(r),"application/json"}catch{return}return"application/json"}function PA(r,n,i={}){const s=UA(i),{body:c,multipartBody:l}=IA(i.body,s),d=c!==void 0||l!==void 0,p=Ri({...i.headers?i.headers:{},accept:i.accept??i.headers?.accept??"application/json",...d&&s&&{"content-type":s}});return x0({url:n,method:r,body:c,multipartBody:l,headers:p,allowInsecureConnection:i.allowInsecureConnection,abortSignal:i.abortSignal,onUploadProgress:i.onUploadProgress,onDownloadProgress:i.onDownloadProgress,timeout:i.timeout,enableBrowserStreams:!0,streamResponseStatusCodes:i.responseAsStream?new Set([Number.POSITIVE_INFINITY]):void 0})}function IA(r,n=""){if(r===void 0)return{body:void 0};if(typeof FormData<"u"&&r instanceof FormData)return{body:r};if(N0(r))return{body:r};if(ArrayBuffer.isView(r))return{body:r instanceof Uint8Array?r:JSON.stringify(r)};switch(n.split(";")[0]){case"application/json":return{body:JSON.stringify(r)};case"multipart/form-data":return Array.isArray(r)?{multipartBody:MA(r)}:{body:JSON.stringify(r)};case"text/plain":return{body:String(r)};default:return typeof r=="string"?{body:r}:{body:JSON.stringify(r)}}}function zA(r){const i=(r.headers.get("content-type")??"").split(";")[0],s=r.bodyAsText??"";if(i==="text/plain")return String(s);try{return s?JSON.parse(s):void 0}catch(c){if(i==="application/json")throw LA(r,c);return String(s)}}function LA(r,n){const i=`Error "${n}" occurred while parsing the response body - ${r.bodyAsText}.`,s=n.code??Ei.PARSE_ERROR;return new Ei(i,{code:s,statusCode:r.status,request:r.request,response:r})}function BA(r){const n=r.value;return n!==void 0&&n.toString!==void 0&&typeof n.toString=="function"}function HA(r,n,i,s={}){if(n.startsWith("https://")||n.startsWith("http://"))return n;r=$A(r,s),n=VA(n,i,s);const c=qA(`${r}/${n}`,s);return new URL(c).toString().replace(/([^:]\/)\/+/g,"$1")}function kd(r,n,i,s){let c;i==="pipeDelimited"?c="|":i==="spaceDelimited"?c="%20":c=",";let l;Array.isArray(s)?l=s:typeof s=="object"&&s.toString===Object.prototype.toString?l=Object.entries(s).flat():l=[s];const d=l.map(p=>{if(p==null)return"";if(!p.toString||typeof p.toString!="function")throw new Error(`Query parameters must be able to be represented as string, ${r} can't`);const m=p.toISOString!==void 0?p.toISOString():p.toString();return n?m:encodeURIComponent(m)}).join(c);return`${n?r:encodeURIComponent(r)}=${d}`}function qA(r,n={}){if(!n.queryParameters)return r;const i=new URL(r),s=n.queryParameters,c=[];for(const l of Object.keys(s)){const d=s[l];if(d==null)continue;const p=BA(d),m=p?d.value:d,g=p?d.explode??!1:!1,y=p&&d.style?d.style:"form";if(g)if(Array.isArray(m))for(const E of m)c.push(kd(l,n.skipUrlEncoding??!1,y,E));else if(typeof m=="object")for(const[E,I]of Object.entries(m))c.push(kd(E,n.skipUrlEncoding??!1,y,I));else throw new Error("explode can only be set to true for objects and arrays");else c.push(kd(l,n.skipUrlEncoding??!1,y,m))}return i.search!==""&&(i.search+="&"),i.search+=c.join("&"),i.toString()}function $A(r,n){if(!n.pathParameters)return r;const i=n.pathParameters;for(const[s,c]of Object.entries(i)){if(c==null)throw new Error(`Path parameters ${s} must not be undefined or null`);if(!c.toString||typeof c.toString!="function")throw new Error(`Path parameters must be able to be represented as string, ${s} can't`);let l=c.toISOString!==void 0?c.toISOString():String(c);n.skipUrlEncoding||(l=encodeURIComponent(c)),r=GA(r,`{${s}}`,l)??""}return r}function VA(r,n,i={}){for(const s of n){const c=typeof s=="object"&&(s.allowReserved??!1);let l=typeof s=="object"?s.value:s;!i.skipUrlEncoding&&!c&&(l=encodeURIComponent(l)),r=r.replace(/\{[\w-]+\}/,String(l))}return r}function GA(r,n,i){return!r||!n?r:r.split(n).join(i||"")}function FA(r,n={}){const i=n.pipeline??_A(n);if(n.additionalPolicies?.length)for(const{policy:p,position:m}of n.additionalPolicies){const g=m==="perRetry"?"Sign":void 0;i.addPolicy(p,{afterPhase:g})}const{allowInsecureConnection:s,httpClient:c}=n,l=n.endpoint??r,d=(p,...m)=>{const g=y=>HA(l,p,m,{...y});return{get:(y={})=>Gr("GET",g(y),i,y,s,c),post:(y={})=>Gr("POST",g(y),i,y,s,c),put:(y={})=>Gr("PUT",g(y),i,y,s,c),patch:(y={})=>Gr("PATCH",g(y),i,y,s,c),delete:(y={})=>Gr("DELETE",g(y),i,y,s,c),head:(y={})=>Gr("HEAD",g(y),i,y,s,c),options:(y={})=>Gr("OPTIONS",g(y),i,y,s,c),trace:(y={})=>Gr("TRACE",g(y),i,y,s,c)}};return{path:d,pathUnchecked:d,pipeline:i}}function Gr(r,n,i,s,c,l){return c=s.allowInsecureConnection??c,{then:function(d,p){return _d(r,n,i,{...s,allowInsecureConnection:c},l).then(d,p)},async asBrowserStream(){if(Qr)throw new Error("`asBrowserStream` is supported only in the browser environment. Use `asNodeStream` instead to obtain the response body stream. If you require a Web stream of the response in Node, consider using `Readable.toWeb` on the result of `asNodeStream`.");return _d(r,n,i,{...s,allowInsecureConnection:c,responseAsStream:!0},l)},async asNodeStream(){if(Qr)return _d(r,n,i,{...s,allowInsecureConnection:c,responseAsStream:!0},l);throw new Error("`isNodeStream` is not supported in the browser environment. Use `asBrowserStream` to obtain the response body stream.")}}}function Z0(){return R0()}const XA=T0({logLevelEnvVarName:"AZURE_LOG_LEVEL",namespace:"azure"});function qc(r){return XA.createClientLogger(r)}const _i=qc("core-rest-pipeline"),YA="exponentialRetryPolicy";function JA(r={}){return Bs([Tf({...r,ignoreSystemErrors:!0})],{maxRetries:r.maxRetries??bo})}const eb="systemErrorRetryPolicy";function KA(r={}){return{name:eb,sendRequest:Bs([Tf({...r,ignoreHttpStatusCodes:!0})],{maxRetries:r.maxRetries??bo}).sendRequest}}const tb="throttlingRetryPolicy";function QA(r={}){return{name:tb,sendRequest:Bs([H0()],{maxRetries:r.maxRetries??bo}).sendRequest}}const WA=U0;function nb(r={}){return D0({logger:_i.info,...r})}const ZA=P0;function rb(r={}){return I0(r)}function eN(){return"x-ms-useragent"}function tN(r){const n=[{name:"Firefox",regex:/Firefox\/([\d.]+)/},{name:"Safari",regex:/Version\/([\d.]+).*Safari/}];for(const i of n){const s=r.match(i.regex);if(s)return{brand:i.name,version:s[1]}}}function nN(r){const n=["Google Chrome","Microsoft Edge","Opera","Brave","Chromium"];for(const i of n){const s=r.find(c=>c.brand===i);if(s)return s}}async function rN(r){const n=globalThis.navigator;let i="unknown";if(n?.userAgentData){const s=await n.userAgentData.getHighEntropyValues(["architecture","platformVersion"]);i=`${s.platform} ${s.platformVersion}; ${s.architecture}`;const c=nN(n.userAgentData.brands);c&&r.set(c.brand,`${c.version} (${i})`)}else if(n?.platform){i=n.platform;const s=tN(n.userAgent);s&&r.set(s.brand,`${s.version} (${i})`)}else typeof globalThis.EdgeRuntime=="string"&&r.set("EdgeRuntime",`${globalThis.EdgeRuntime} (${i})`)}const ib="1.22.2",iN=3;function oN(r){const n=[];for(const[i,s]of r){const c=s?`${i}/${s}`:i;n.push(c)}return n.join(" ")}function sN(){return eN()}async function ob(r){const n=new Map;n.set("core-rest-pipeline",ib),await rN(n);const i=oN(n);return r?`${r} ${i}`:i}const Dy=sN(),sb="userAgentPolicy";function ab(r={}){const n=ob(r.userAgentPrefix);return{name:sb,async sendRequest(i,s){return i.headers.has(Dy)||i.headers.set(Dy,await n),s(i)}}}function aN(r){return!!(r&&typeof r.pipe=="function")}const cb={arrayBuffer:()=>{throw new Error("Not implemented")},bytes:()=>{throw new Error("Not implemented")},slice:()=>{throw new Error("Not implemented")},text:()=>{throw new Error("Not implemented")}},$c=Symbol("rawContent");function lb(r){return typeof r[$c]=="function"}function cN(r){return lb(r)?r[$c]():r}function lN(r,n,i={}){return{...cb,type:i.type??"",lastModified:i.lastModified??new Date().getTime(),webkitRelativePath:i.webkitRelativePath??"",size:i.size??-1,name:n,stream:()=>{const s=r();if(aN(s))throw new Error("Not supported: a Node stream was provided as input to createFileFromStream.");return s},[$c]:r}}function uN(r,n,i={}){return wc?{...cb,type:i.type??"",lastModified:i.lastModified??new Date().getTime(),webkitRelativePath:i.webkitRelativePath??"",size:r.byteLength,name:n,arrayBuffer:async()=>r.buffer,stream:()=>new Blob([Py(r)]).stream(),[$c]:()=>r}:new File([Py(r)],n,i)}function Py(r){return"resize"in r.buffer?r:r.map(n=>n)}const xf=Cf;function ub(){const r=Q0();return{name:xf,sendRequest:async(n,i)=>{if(n.multipartBody)for(const s of n.multipartBody.parts)lb(s.body)&&(s.body=cN(s.body));return r.sendRequest(n,i)}}}const dN=Uk;function db(){return L0()}function fb(r={}){return q0(r)}const fN=$0;function hb(){return V0()}const hN=Kk;function pN(r){return Qk()}function pb(r,n){return F0()}const mb="setClientRequestIdPolicy";function gb(r="x-ms-client-request-id"){return{name:mb,async sendRequest(n,i){return n.headers.has(r)||n.headers.set(r,n.requestId),i(n)}}}const mN=X0;function yb(r){return Y0(r)}const gN=J0;function vb(r){return K0(r)}const Es={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function yN(r={}){let n=new _s(r.parentContext);return r.span&&(n=n.setValue(Es.span,r.span)),r.namespace&&(n=n.setValue(Es.namespace,r.namespace)),n}class _s{_contextMap;constructor(n){this._contextMap=n instanceof _s?new Map(n._contextMap):new Map}setValue(n,i){const s=new _s(this);return s._contextMap.set(n,i),s}getValue(n){return this._contextMap.get(n)}deleteValue(n){const i=new _s(this);return i._contextMap.delete(n),i}}const Ad={instrumenterImplementation:void 0};function vN(){return{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{},addEvent:()=>{}}}function bN(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(r,n)=>({span:vN(),tracingContext:yN({parentContext:n.tracingContext})}),withContext(r,n,...i){return n(...i)}}}function ac(){return Ad.instrumenterImplementation||(Ad.instrumenterImplementation=bN()),Ad.instrumenterImplementation}function bb(r){const{namespace:n,packageName:i,packageVersion:s}=r;function c(g,y,E){const I=ac().startSpan(g,{...E,packageName:i,packageVersion:s,tracingContext:y?.tracingOptions?.tracingContext});let Y=I.tracingContext;const M=I.span;Y.getValue(Es.namespace)||(Y=Y.setValue(Es.namespace,n)),M.setAttribute("az.namespace",Y.getValue(Es.namespace));const ee=Object.assign({},y,{tracingOptions:{...y?.tracingOptions,tracingContext:Y}});return{span:M,updatedOptions:ee}}async function l(g,y,E,I){const{span:Y,updatedOptions:M}=c(g,y,I);try{const ee=await d(M.tracingOptions.tracingContext,()=>Promise.resolve(E(M,Y)));return Y.setStatus({status:"success"}),ee}catch(ee){throw Y.setStatus({status:"error",error:ee}),ee}finally{Y.end()}}function d(g,y,...E){return ac().withContext(g,y,...E)}function p(g){return ac().parseTraceparentHeader(g)}function m(g){return ac().createRequestHeaders(g)}return{startSpan:c,withSpan:l,withContext:d,parseTraceparentHeader:p,createRequestHeaders:m}}const js=Ei;function Rf(r){return _0(r)}const Sb="tracingPolicy";function wb(r={}){const n=ob(r.userAgentPrefix),i=new gf({additionalAllowedQueryParameters:r.additionalAllowedQueryParameters}),s=SN();return{name:Sb,async sendRequest(c,l){if(!s)return l(c);const d=await n,p={"http.url":i.sanitizeUrl(c.url),"http.method":c.method,"http.user_agent":d,requestId:c.requestId};d&&(p["http.user_agent"]=d);const{span:m,tracingContext:g}=wN(s,c,p)??{};if(!m||!g)return l(c);try{const y=await s.withContext(g,l,c);return CN(m,y),y}catch(y){throw TN(m,y),y}}}}function SN(){try{return bb({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:ib})}catch(r){_i.warning(`Error when creating the TracingClient: ${Ls(r)}`);return}}function wN(r,n,i){try{const{span:s,updatedOptions:c}=r.startSpan(`HTTP ${n.method}`,{tracingOptions:n.tracingOptions},{spanKind:"client",spanAttributes:i});if(!s.isRecording()){s.end();return}const l=r.createRequestHeaders(c.tracingOptions.tracingContext);for(const[d,p]of Object.entries(l))n.headers.set(d,p);return{span:s,tracingContext:c.tracingOptions.tracingContext}}catch(s){_i.warning(`Skipping creating a tracing span due to an error: ${Ls(s)}`);return}}function TN(r,n){try{r.setStatus({status:"error",error:f0(n)?n:void 0}),Rf(n)&&n.statusCode&&r.setAttribute("http.status_code",n.statusCode),r.end()}catch(i){_i.warning(`Skipping tracing span processing due to an error: ${Ls(i)}`)}}function CN(r,n){try{r.setAttribute("http.status_code",n.status);const i=n.headers.get("x-ms-request-id");i&&r.setAttribute("serviceRequestId",i),n.status>=400&&r.setStatus({status:"error"}),r.end()}catch(i){_i.warning(`Skipping tracing span processing due to an error: ${Ls(i)}`)}}function Tb(r){if(r instanceof AbortSignal)return{abortSignal:r};if(r.aborted)return{abortSignal:AbortSignal.abort(r.reason)};const n=new AbortController;let i=!0;function s(){i&&(r.removeEventListener("abort",c),i=!1)}function c(){n.abort(r.reason),s()}return r.addEventListener("abort",c),{abortSignal:n.signal,cleanup:s}}const xN="wrapAbortSignalLikePolicy";function RN(){return{name:xN,sendRequest:async(r,n)=>{if(!r.abortSignal)return n(r);const{abortSignal:i,cleanup:s}=Tb(r.abortSignal);r.abortSignal=i;try{return await n(r)}finally{s?.()}}}}function Ef(r){const n=Z0();return wc&&(r.agent&&n.addPolicy(yb(r.agent)),r.tlsOptions&&n.addPolicy(vb(r.tlsOptions)),n.addPolicy(pb(r.proxyOptions)),n.addPolicy(db())),n.addPolicy(RN()),n.addPolicy(hb(),{beforePolicies:[xf]}),n.addPolicy(ab(r.userAgentOptions)),n.addPolicy(gb(r.telemetryOptions?.clientRequestIdHeaderName)),n.addPolicy(ub(),{afterPhase:"Deserialize"}),n.addPolicy(fb(r.retryOptions),{phase:"Retry"}),n.addPolicy(wb({...r.userAgentOptions,...r.loggingOptions}),{afterPhase:"Retry"}),wc&&n.addPolicy(rb(r.redirectOptions),{afterPhase:"Retry"}),n.addPolicy(nb(r.loggingOptions),{afterPhase:"Sign"}),n}function _f(){const r=j0();return{async sendRequest(n){const{abortSignal:i,cleanup:s}=n.abortSignal?Tb(n.abortSignal):{};try{return n.abortSignal=i,await r.sendRequest(n)}finally{s?.()}}}}function Cb(r){return Ri(r)}function kf(r){return x0(r)}const EN=YA;function _N(r={}){return JA(r)}const kN=eb;function AN(r={}){return KA(r)}const NN=tb;function ON(r={}){return QA(r)}const jN=qc("core-rest-pipeline retryPolicy");function MN(r,n={maxRetries:iN}){return Bs(r,{logger:jN,...n})}const UN={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:1e3*60*2};async function DN(r,n,i){async function s(){if(Date.now()<i)try{return await r()}catch{return null}else{const l=await r();if(l===null)throw new Error("Failed to refresh access token.");return l}}let c=await s();for(;c===null;)await u0(n),c=await s();return c}function xb(r,n){let i=null,s=null,c;const l={...UN,...n},d={get isRefreshing(){return i!==null},get shouldRefresh(){return d.isRefreshing?!1:s?.refreshAfterTimestamp&&s.refreshAfterTimestamp<Date.now()?!0:(s?.expiresOnTimestamp??0)-l.refreshWindowInMs<Date.now()},get mustRefresh(){return s===null||s.expiresOnTimestamp-l.forcedRefreshWindowInMs<Date.now()}};function p(m,g){return d.isRefreshing||(i=DN(()=>r.getToken(m,g),l.retryIntervalInMs,s?.expiresOnTimestamp??Date.now()).then(E=>(i=null,s=E,c=g.tenantId,s)).catch(E=>{throw i=null,s=null,c=void 0,E})),i}return async(m,g)=>{const y=!!g.claims,E=c!==g.tenantId;return y&&(s=null),E||y||d.mustRefresh?p(m,g):(d.shouldRefresh&&p(m,g),s)}}const Rb="bearerTokenAuthenticationPolicy";async function cc(r,n){try{return[await n(r),void 0]}catch(i){if(Rf(i)&&i.response)return[i.response,i];throw i}}async function PN(r){const{scopes:n,getAccessToken:i,request:s}=r,c={abortSignal:s.abortSignal,tracingOptions:s.tracingOptions,enableCae:!0},l=await i(n,c);l&&r.request.headers.set("Authorization",`Bearer ${l.token}`)}function Iy(r){return r.status===401&&r.headers.has("WWW-Authenticate")}async function zy(r,n){const{scopes:i}=r,s=await r.getAccessToken(i,{enableCae:!0,claims:n});return s?(r.request.headers.set("Authorization",`${s.tokenType??"Bearer"} ${s.token}`),!0):!1}function Vc(r){const{credential:n,scopes:i,challengeCallbacks:s}=r,c=r.logger||_i,l={authorizeRequest:s?.authorizeRequest?.bind(s)??PN,authorizeRequestOnChallenge:s?.authorizeRequestOnChallenge?.bind(s)},d=n?xb(n):()=>Promise.resolve(null);return{name:Rb,async sendRequest(p,m){if(!p.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");await l.authorizeRequest({scopes:Array.isArray(i)?i:[i],request:p,getAccessToken:d,logger:c});let g,y,E;if([g,y]=await cc(p,m),Iy(g)){let I=Ly(g.headers.get("WWW-Authenticate"));if(I){let Y;try{Y=atob(I)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${I}`),g}E=await zy({scopes:Array.isArray(i)?i:[i],response:g,request:p,getAccessToken:d,logger:c},Y),E&&([g,y]=await cc(p,m))}else if(l.authorizeRequestOnChallenge&&(E=await l.authorizeRequestOnChallenge({scopes:Array.isArray(i)?i:[i],request:p,response:g,getAccessToken:d,logger:c}),E&&([g,y]=await cc(p,m)),Iy(g)&&(I=Ly(g.headers.get("WWW-Authenticate")),I))){let Y;try{Y=atob(I)}catch{return c.warning(`The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: ${I}`),g}E=await zy({scopes:Array.isArray(i)?i:[i],response:g,request:p,getAccessToken:d,logger:c},Y),E&&([g,y]=await cc(p,m))}}if(y)throw y;return g}}}function IN(r){const n=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,i=/(\w+)="([^"]*)"/g,s=[];let c;for(;(c=n.exec(r))!==null;){const l=c[1],d=c[2],p={};let m;for(;(m=i.exec(d))!==null;)p[m[1]]=m[2];s.push({scheme:l,params:p})}return s}function Ly(r){return r?IN(r).find(i=>i.scheme==="Bearer"&&i.params.claims&&i.params.error==="insufficient_claims")?.params.claims:void 0}const Eb="ndJsonPolicy";function zN(){return{name:Eb,async sendRequest(r,n){if(typeof r.body=="string"&&r.body.startsWith("[")){const i=JSON.parse(r.body);Array.isArray(i)&&(r.body=i.map(s=>JSON.stringify(s)+`
`).join(""))}return n(r)}}}const Vd="auxiliaryAuthenticationHeaderPolicy",By="x-ms-authorization-auxiliary";async function LN(r){const{scopes:n,getAccessToken:i,request:s}=r,c={abortSignal:s.abortSignal,tracingOptions:s.tracingOptions};return(await i(n,c))?.token??""}function BN(r){const{credentials:n,scopes:i}=r,s=r.logger||_i,c=new WeakMap;return{name:Vd,async sendRequest(l,d){if(!l.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication for auxiliary header is not permitted for non-TLS protected (non-https) URLs.");if(!n||n.length===0)return s.info(`${Vd} header will not be set due to empty credentials.`),d(l);const p=[];for(const g of n){let y=c.get(g);y||(y=xb(g),c.set(g,y)),p.push(LN({scopes:Array.isArray(i)?i:[i],request:l,getAccessToken:y}))}const m=(await Promise.all(p)).filter(g=>!!g);return m.length===0?(s.warning(`None of the auxiliary tokens are valid. ${By} header will not be set.`),d(l)):(l.headers.set(By,m.map(g=>`Bearer ${g}`).join(", ")),d(l))}}}const HN=Object.freeze(Object.defineProperty({__proto__:null,RestError:js,agentPolicy:yb,agentPolicyName:mN,auxiliaryAuthenticationHeaderPolicy:BN,auxiliaryAuthenticationHeaderPolicyName:Vd,bearerTokenAuthenticationPolicy:Vc,bearerTokenAuthenticationPolicyName:Rb,createDefaultHttpClient:_f,createEmptyPipeline:Z0,createFile:uN,createFileFromStream:lN,createHttpHeaders:Cb,createPipelineFromOptions:Ef,createPipelineRequest:kf,decompressResponsePolicy:db,decompressResponsePolicyName:dN,defaultRetryPolicy:fb,exponentialRetryPolicy:_N,exponentialRetryPolicyName:EN,formDataPolicy:hb,formDataPolicyName:fN,getDefaultProxySettings:pN,isRestError:Rf,logPolicy:nb,logPolicyName:WA,multipartPolicy:ub,multipartPolicyName:xf,ndJsonPolicy:zN,ndJsonPolicyName:Eb,proxyPolicy:pb,proxyPolicyName:hN,redirectPolicy:rb,redirectPolicyName:ZA,retryPolicy:MN,setClientRequestIdPolicy:gb,setClientRequestIdPolicyName:mb,systemErrorRetryPolicy:AN,systemErrorRetryPolicyName:kN,throttlingRetryPolicy:ON,throttlingRetryPolicyName:NN,tlsPolicy:vb,tlsPolicyName:gN,tracingPolicy:wb,tracingPolicyName:Sb,userAgentPolicy:ab,userAgentPolicyName:sb},Symbol.toStringTag,{value:"Module"})),Hy={operationRequestMap:new WeakMap};function So(r,n,i){let s=n.parameterPath;const c=n.mapper;let l;if(typeof s=="string"&&(s=[s]),Array.isArray(s)){if(s.length>0)if(c.isConstant)l=c.defaultValue;else{let d=qy(r,s);!d.propertyFound&&i&&(d=qy(i,s));let p=!1;d.propertyFound||(p=c.required||s[0]==="options"&&s.length===2),l=p?c.defaultValue:d.propertyValue}}else{c.required&&(l={});for(const d in s){const p=c.type.modelProperties[d],m=s[d],g=So(r,{parameterPath:m,mapper:p},i);g!==void 0&&(l||(l={}),l[d]=g)}}return l}function qy(r,n){const i={propertyFound:!1};let s=0;for(;s<n.length;++s){const c=n[s];if(r&&c in r)r=r[c];else break}return s===n.length&&(i.propertyValue=r,i.propertyFound=!0),i}const _b=Symbol.for("@azure/core-client original request");function qN(r){return _b in r}function _o(r){if(qN(r))return _o(r[_b]);let n=Hy.operationRequestMap.get(r);return n||(n={},Hy.operationRequestMap.set(r,n)),n}const $N=["application/json","text/json"],VN=["application/xml","application/atom+xml"],kb="deserializationPolicy";function Ab(r={}){const n=r.expectedContentTypes?.json??$N,i=r.expectedContentTypes?.xml??VN,s=r.parseXML,c=r.serializerOptions,l={xml:{rootName:c?.xml.rootName??"",includeRoot:c?.xml.includeRoot??!1,xmlCharKey:c?.xml.xmlCharKey??vo}};return{name:kb,async sendRequest(d,p){const m=await p(d);return XN(n,i,m,l,s)}}}function GN(r){let n;const i=r.request,s=_o(i),c=s?.operationSpec;return c&&(s?.operationResponseGetter?n=s?.operationResponseGetter(c,r):n=c.responses[r.status]),n}function FN(r){const n=r.request,s=_o(n)?.shouldDeserialize;let c;return s===void 0?c=!0:typeof s=="boolean"?c=s:c=s(r),c}async function XN(r,n,i,s,c){const l=await KN(r,n,i,s,c);if(!FN(l))return l;const p=_o(l.request)?.operationSpec;if(!p||!p.responses)return l;const m=GN(l),{error:g,shouldReturnResponse:y}=JN(l,p,m,s);if(g)throw g;if(y)return l;if(m){if(m.bodyMapper){let E=l.parsedBody;p.isXML&&m.bodyMapper.type.name===Ti.Sequence&&(E=typeof E=="object"?E[m.bodyMapper.xmlElementName]:[]);try{l.parsedBody=p.serializer.deserialize(m.bodyMapper,E,"operationRes.parsedBody",s)}catch(I){throw new js(`Error ${I} occurred in deserializing the responseBody - ${l.bodyAsText}`,{statusCode:l.status,request:l.request,response:l})}}else p.httpMethod==="HEAD"&&(l.parsedBody=i.status>=200&&i.status<300);m.headersMapper&&(l.parsedHeaders=p.serializer.deserialize(m.headersMapper,l.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return l}function YN(r){const n=Object.keys(r.responses);return n.length===0||n.length===1&&n[0]==="default"}function JN(r,n,i,s){const c=200<=r.status&&r.status<300;if(YN(n)?c:!!i)if(i){if(!i.isError)return{error:null,shouldReturnResponse:!1}}else return{error:null,shouldReturnResponse:!1};const d=i??n.responses.default,p=r.request.streamResponseStatusCodes?.has(r.status)?`Unexpected status code: ${r.status}`:r.bodyAsText,m=new js(p,{statusCode:r.status,request:r.request,response:r});if(!d&&!(r.parsedBody?.error?.code&&r.parsedBody?.error?.message))throw m;const g=d?.bodyMapper,y=d?.headersMapper;try{if(r.parsedBody){const E=r.parsedBody;let I;if(g){let M=E;if(n.isXML&&g.type.name===Ti.Sequence){M=[];const ee=g.xmlElementName;typeof E=="object"&&ee&&(M=E[ee])}I=n.serializer.deserialize(g,M,"error.response.parsedBody",s)}const Y=E.error||I||E;m.code=Y.code,Y.message&&(m.message=Y.message),g&&(m.response.parsedBody=I)}r.headers&&y&&(m.response.parsedHeaders=n.serializer.deserialize(y,r.headers.toJSON(),"operationRes.parsedHeaders"))}catch(E){m.message=`Error "${E.message}" occurred in deserializing the responseBody - "${r.bodyAsText}" for the default response.`}return{error:m,shouldReturnResponse:!1}}async function KN(r,n,i,s,c){if(!i.request.streamResponseStatusCodes?.has(i.status)&&i.bodyAsText){const l=i.bodyAsText,d=i.headers.get("Content-Type")||"",p=d?d.split(";").map(m=>m.toLowerCase()):[];try{if(p.length===0||p.some(m=>r.indexOf(m)!==-1))return i.parsedBody=JSON.parse(l),i;if(p.some(m=>n.indexOf(m)!==-1)){if(!c)throw new Error("Parsing XML not supported.");const m=await c(l,s.xml);return i.parsedBody=m,i}}catch(m){const g=`Error "${m}" occurred while parsing the response body - ${i.bodyAsText}.`,y=m.code||js.PARSE_ERROR;throw new js(g,{code:y,statusCode:i.status,request:i.request,response:i})}}return i}function QN(r){const n=new Set;for(const i in r.responses){const s=r.responses[i];s.bodyMapper&&s.bodyMapper.type.name===Ti.Stream&&n.add(Number(i))}return n}function Kr(r){const{parameterPath:n,mapper:i}=r;let s;return typeof n=="string"?s=n:Array.isArray(n)?s=n.join("."):s=i.serializedName,s}const Nb="serializationPolicy";function Ob(r={}){const n=r.stringifyXML;return{name:Nb,async sendRequest(i,s){const c=_o(i),l=c?.operationSpec,d=c?.operationArguments;return l&&d&&(WN(i,d,l),ZN(i,d,l,n)),s(i)}}}function WN(r,n,i){if(i.headerParameters)for(const c of i.headerParameters){let l=So(n,c);if(l!=null||c.mapper.required){l=i.serializer.serialize(c.mapper,l,Kr(c));const d=c.mapper.headerCollectionPrefix;if(d)for(const p of Object.keys(l))r.headers.set(d+p,l[p]);else r.headers.set(c.mapper.serializedName||Kr(c),l)}}const s=n.options?.requestOptions?.customHeaders;if(s)for(const c of Object.keys(s))r.headers.set(c,s[c])}function ZN(r,n,i,s=function(){throw new Error("XML serialization unsupported!")}){const c=n.options?.serializerOptions,l={xml:{rootName:c?.xml.rootName??"",includeRoot:c?.xml.includeRoot??!1,xmlCharKey:c?.xml.xmlCharKey??vo}},d=l.xml.xmlCharKey;if(i.requestBody&&i.requestBody.mapper){r.body=So(n,i.requestBody);const p=i.requestBody.mapper,{required:m,serializedName:g,xmlName:y,xmlElementName:E,xmlNamespace:I,xmlNamespacePrefix:Y,nullable:M}=p,ee=p.type.name;try{if(r.body!==void 0&&r.body!==null||M&&r.body===null||m){const J=Kr(i.requestBody);r.body=i.serializer.serialize(p,r.body,J,l);const de=ee===Ti.Stream;if(i.isXML){const ue=Y?`xmlns:${Y}`:"xmlns",pe=e2(I,ue,ee,r.body,l);ee===Ti.Sequence?r.body=s(t2(pe,E||y||g,ue,I),{rootName:y||g,xmlCharKey:d}):de||(r.body=s(pe,{rootName:y||g,xmlCharKey:d}))}else{if(ee===Ti.String&&(i.contentType?.match("text/plain")||i.mediaType==="text"))return;de||(r.body=JSON.stringify(r.body))}}}catch(J){throw new Error(`Error "${J.message}" occurred in serializing the payload - ${JSON.stringify(g,void 0,"  ")}.`)}}else if(i.formDataParameters&&i.formDataParameters.length>0){r.formData={};for(const p of i.formDataParameters){const m=So(n,p);if(m!=null){const g=p.mapper.serializedName||Kr(p);r.formData[g]=i.serializer.serialize(p.mapper,m,Kr(p),l)}}}}function e2(r,n,i,s,c){if(r&&!["Composite","Sequence","Dictionary"].includes(i)){const l={};return l[c.xml.xmlCharKey]=s,l[Bt]={[n]:r},l}return s}function t2(r,n,i,s){if(Array.isArray(r)||(r=[r]),!i||!s)return{[n]:r};const c={[n]:r};return c[Bt]={[i]:s},c}function jb(r={}){const n=Ef(r??{});return r.credentialOptions&&n.addPolicy(Vc({credential:r.credentialOptions.credential,scopes:r.credentialOptions.credentialScopes})),n.addPolicy(Ob(r.serializationOptions),{phase:"Serialize"}),n.addPolicy(Ab(r.deserializationOptions),{phase:"Deserialize"}),n}let Nd;function n2(){return Nd||(Nd=_f()),Nd}const r2={CSV:",",SSV:" ",Multi:"Multi",TSV:"	",Pipes:"|"};function i2(r,n,i,s){const c=o2(n,i,s);let l=!1,d=$y(r,c);if(n.path){let g=$y(n.path,c);n.path==="/{nextLink}"&&g.startsWith("/")&&(g=g.substring(1)),s2(g)?(d=g,l=!0):d=a2(d,g)}const{queryParams:p,sequenceParams:m}=c2(n,i,s);return d=u2(d,p,m,l),d}function $y(r,n){let i=r;for(const[s,c]of n)i=i.split(s).join(c);return i}function o2(r,n,i){const s=new Map;if(r.urlParameters?.length)for(const c of r.urlParameters){let l=So(n,c,i);const d=Kr(c);l=r.serializer.serialize(c.mapper,l,d),c.skipEncoding||(l=encodeURIComponent(l)),s.set(`{${c.mapper.serializedName||d}}`,l)}return s}function s2(r){return r.includes("://")}function a2(r,n){if(!n)return r;const i=new URL(r);let s=i.pathname;s.endsWith("/")||(s=`${s}/`),n.startsWith("/")&&(n=n.substring(1));const c=n.indexOf("?");if(c!==-1){const l=n.substring(0,c),d=n.substring(c+1);s=s+l,d&&(i.search=i.search?`${i.search}&${d}`:d)}else s=s+n;return i.pathname=s,i.toString()}function c2(r,n,i){const s=new Map,c=new Set;if(r.queryParameters?.length)for(const l of r.queryParameters){l.mapper.type.name==="Sequence"&&l.mapper.serializedName&&c.add(l.mapper.serializedName);let d=So(n,l,i);if(d!=null||l.mapper.required){d=r.serializer.serialize(l.mapper,d,Kr(l));const p=l.collectionFormat?r2[l.collectionFormat]:"";if(Array.isArray(d)&&(d=d.map(m=>m??"")),l.collectionFormat==="Multi"&&d.length===0)continue;Array.isArray(d)&&(l.collectionFormat==="SSV"||l.collectionFormat==="TSV")&&(d=d.join(p)),l.skipEncoding||(Array.isArray(d)?d=d.map(m=>encodeURIComponent(m)):d=encodeURIComponent(d)),Array.isArray(d)&&(l.collectionFormat==="CSV"||l.collectionFormat==="Pipes")&&(d=d.join(p)),s.set(l.mapper.serializedName||Kr(l),d)}}return{queryParams:s,sequenceParams:c}}function l2(r){const n=new Map;if(!r||r[0]!=="?")return n;r=r.slice(1);const i=r.split("&");for(const s of i){const[c,l]=s.split("=",2),d=n.get(c);d?Array.isArray(d)?d.push(l):n.set(c,[d,l]):n.set(c,l)}return n}function u2(r,n,i,s=!1){if(n.size===0)return r;const c=new URL(r),l=l2(c.search);for(const[p,m]of n){const g=l.get(p);if(Array.isArray(g))if(Array.isArray(m)){g.push(...m);const y=new Set(g);l.set(p,Array.from(y))}else g.push(m);else g?(Array.isArray(m)?m.unshift(g):i.has(p)&&l.set(p,[g,m]),s||l.set(p,m)):l.set(p,m)}const d=[];for(const[p,m]of l)if(typeof m=="string")d.push(`${p}=${m}`);else if(Array.isArray(m))for(const g of m)d.push(`${p}=${g}`);else d.push(`${p}=${m}`);return c.search=d.length?`?${d.join("&")}`:"",c.toString()}const Mb=qc("core-client");class Ub{_endpoint;_requestContentType;_allowInsecureConnection;_httpClient;pipeline;constructor(n={}){if(this._requestContentType=n.requestContentType,this._endpoint=n.endpoint??n.baseUri,n.baseUri&&Mb.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=n.allowInsecureConnection,this._httpClient=n.httpClient||n2(),this.pipeline=n.pipeline||d2(n),n.additionalPolicies?.length)for(const{policy:i,position:s}of n.additionalPolicies){const c=s==="perRetry"?"Sign":void 0;this.pipeline.addPolicy(i,{afterPhase:c})}}async sendRequest(n){return this.pipeline.sendRequest(this._httpClient,n)}async sendOperationRequest(n,i){const s=i.baseUrl||this._endpoint;if(!s)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");const c=i2(s,i,n,this),l=kf({url:c});l.method=i.httpMethod;const d=_o(l);d.operationSpec=i,d.operationArguments=n;const p=i.contentType||this._requestContentType;p&&i.requestBody&&l.headers.set("Content-Type",p);const m=n.options;if(m){const g=m.requestOptions;g&&(g.timeout&&(l.timeout=g.timeout),g.onUploadProgress&&(l.onUploadProgress=g.onUploadProgress),g.onDownloadProgress&&(l.onDownloadProgress=g.onDownloadProgress),g.shouldDeserialize!==void 0&&(d.shouldDeserialize=g.shouldDeserialize),g.allowInsecureConnection&&(l.allowInsecureConnection=!0)),m.abortSignal&&(l.abortSignal=m.abortSignal),m.tracingOptions&&(l.tracingOptions=m.tracingOptions)}this._allowInsecureConnection&&(l.allowInsecureConnection=!0),l.streamResponseStatusCodes===void 0&&(l.streamResponseStatusCodes=QN(i));try{const g=await this.sendRequest(l),y=wy(g,i.responses[g.status]);return m?.onResponse&&m.onResponse(g,y),y}catch(g){if(typeof g=="object"&&g?.response){const y=g.response,E=wy(y,i.responses[g.statusCode]||i.responses.default);g.details=E,m?.onResponse&&m.onResponse(y,E,g)}throw g}}}function d2(r){const n=f2(r),i=r.credential&&n?{credentialScopes:n,credential:r.credential}:void 0;return jb({...r,credentialOptions:i})}function f2(r){if(r.credentialScopes)return r.credentialScopes;if(r.endpoint)return`${r.endpoint}/.default`;if(r.baseUri)return`${r.baseUri}/.default`;if(r.credential&&!r.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}function h2(r){return`, ${r.trim()}`.split(", Bearer ").filter(i=>i).map(i=>`${i.trim()}, `.split('", ').filter(l=>l).map(l=>(([d,p])=>({[d]:p}))(l.trim().split('="'))).reduce((l,d)=>({...l,...d}),{}))}async function p2(r){const{scopes:n,response:i}=r,s=r.logger||Mb,c=i.headers.get("WWW-Authenticate");if(!c)return s.info("The WWW-Authenticate header was missing. Failed to perform the Continuous Access Evaluation authentication flow."),!1;const d=(h2(c)||[]).find(m=>m.claims);if(!d)return s.info('The WWW-Authenticate header was missing the necessary "claims" to perform the Continuous Access Evaluation authentication flow.'),!1;const p=await r.getAccessToken(d.scope?[d.scope]:n,{claims:k_(d.claims)});return p?(r.request.headers.set("Authorization",`${p.tokenType??"Bearer"} ${p.token}`),!0):!1}const Db={DefaultScope:"/.default",HeaderConstants:{AUTHORIZATION:"authorization"}};function m2(r){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(r)}const g2=async r=>{const n=w2(r.request),i=b2(r.response);if(i){const s=S2(i),c=v2(r,s),l=y2(s);if(!l)return!1;const d=await r.getAccessToken(c,{...n,tenantId:l});return d?(r.request.headers.set(Db.HeaderConstants.AUTHORIZATION,`${d.tokenType??"Bearer"} ${d.token}`),!0):!1}return!1};function y2(r){const s=new URL(r.authorization_uri).pathname.split("/")[1];if(s&&m2(s))return s}function v2(r,n){if(!n.resource_id)return r.scopes;const i=new URL(n.resource_id);i.pathname=Db.DefaultScope;let s=i.toString();return s==="https://disk.azure.com/.default"&&(s="https://disk.azure.com//.default"),[s]}function b2(r){const n=r.headers.get("WWW-Authenticate");if(r.status===401&&n)return n}function S2(r){return`${r.slice(7).trim()} `.split(" ").filter(c=>c).map(c=>(([l,d])=>({[l]:d}))(c.trim().split("="))).reduce((c,l)=>({...c,...l}),{})}function w2(r){return{abortSignal:r.abortSignal,requestOptions:{timeout:r.timeout},tracingOptions:r.tracingOptions}}const T2=Object.freeze(Object.defineProperty({__proto__:null,MapperTypeNames:Ti,ServiceClient:Ub,XML_ATTRKEY:Bt,XML_CHARKEY:vo,authorizeRequestOnClaimChallenge:p2,authorizeRequestOnTenantChallenge:g2,createClientPipeline:jb,createSerializer:vf,deserializationPolicy:Ab,deserializationPolicyName:kb,serializationPolicy:Ob,serializationPolicyName:Nb},Symbol.toStringTag,{value:"Module"})),C2=Rc(T2),x2=Rc(HN);var Vy;function R2(){return Vy||(Vy=1,(function(r){var n=GE,i=__,s=C2,c=x2;function l(Ne){return Ne&&typeof Ne=="object"&&"default"in Ne?Ne:{default:Ne}}var d=l(n),p=l(i),m=l(s),g=l(c),y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof Ng<"u"?Ng:typeof self<"u"?self:{};function E(Ne){return Ne&&Ne.__esModule&&Object.prototype.hasOwnProperty.call(Ne,"default")?Ne.default:Ne}function I(Ne,Se){return Se={exports:{}},Ne(Se,Se.exports),Se.exports}var Y=I(function(Ne,Se){(function(De,q){Ne.exports=q()})(y,function(){return(function(De){function q(Q){if(U[Q])return U[Q].exports;var L=U[Q]={i:Q,l:!1,exports:{}};return De[Q].call(L.exports,L,L.exports,q),L.l=!0,L.exports}var U={};return q.m=De,q.c=U,q.i=function(Q){return Q},q.d=function(Q,L,W){q.o(Q,L)||Object.defineProperty(Q,L,{configurable:!1,enumerable:!0,get:W})},q.n=function(Q){var L=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return q.d(L,"a",L),L},q.o=function(Q,L){return Object.prototype.hasOwnProperty.call(Q,L)},q.p="",q(q.s=1)})([function(De,q,U){function Q(S,j){var x,b=new Promise(function(A,N){fetch(S).then(function(w){x!==void 0&&clearTimeout(x),A(w)}).catch(function(w){x!==void 0&&clearTimeout(x),N(w)})});if(j!==0){var C=new Promise(function(A,N){x=setTimeout(N,j,new Error("Fetch for '".concat(S.url,"' timed out")))});return Promise.race([b,C])}return b}function L(S){try{return JSON.stringify(S)}catch{return"Unable to serialize object of type ".concat(typeof S)}}Object.defineProperty(q,"__esModule",{value:!0}),q.Timespan=q.toJson=q.fetchWithTimeout=void 0,q.fetchWithTimeout=Q,q.toJson=L;var W=(function(){function S(){this.start=Date.now()}return Object.defineProperty(S.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"startTime",{get:function(){return this.start},enumerable:!1,configurable:!0}),S.prototype.reset=function(){this.start=Date.now()},S})();q.Timespan=W},function(De,q,U){function Q(w,R,k){return new N(w,R,k)}var L=this&&this.__extends||(function(){var w=function(R,k){return(w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,K){H.__proto__=K}||function(H,K){for(var V in K)Object.prototype.hasOwnProperty.call(K,V)&&(H[V]=K[V])})(R,k)};return function(R,k){function H(){this.constructor=R}if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");w(R,k),R.prototype=k===null?Object.create(k):(H.prototype=k.prototype,new H)}})(),W=this&&this.__assign||function(){return W=Object.assign||function(w){for(var R,k=1,H=arguments.length;k<H;k++){R=arguments[k];for(var K in R)Object.prototype.hasOwnProperty.call(R,K)&&(w[K]=R[K])}return w},W.apply(this,arguments)},S=this&&this.__awaiter||function(w,R,k,H){function K(V){return V instanceof k?V:new k(function(B){B(V)})}return new(k||(k=Promise))(function(V,B){function se(P){try{ie(H.next(P))}catch(X){B(X)}}function he(P){try{ie(H.throw(P))}catch(X){B(X)}}function ie(P){P.done?V(P.value):K(P.value).then(se,he)}ie((H=H.apply(w,R||[])).next())})},j=this&&this.__generator||function(w,R){function k(ie){return function(P){return H([ie,P])}}function H(ie){if(K)throw new TypeError("Generator is already executing.");for(;se&&(se=0,ie[0]&&(he=0)),he;)try{if(K=1,V&&(B=2&ie[0]?V.return:ie[0]?V.throw||((B=V.return)&&B.call(V),0):V.next)&&!(B=B.call(V,ie[1])).done)return B;switch(V=0,B&&(ie=[2&ie[0],B.value]),ie[0]){case 0:case 1:B=ie;break;case 4:return he.label++,{value:ie[1],done:!1};case 5:he.label++,V=ie[1],ie=[0];continue;case 7:ie=he.ops.pop(),he.trys.pop();continue;default:if(B=he.trys,!(B=B.length>0&&B[B.length-1])&&(ie[0]===6||ie[0]===2)){he=0;continue}if(ie[0]===3&&(!B||ie[1]>B[0]&&ie[1]<B[3])){he.label=ie[1];break}if(ie[0]===6&&he.label<B[1]){he.label=B[1],B=ie;break}if(B&&he.label<B[2]){he.label=B[2],he.ops.push(ie);break}B[2]&&he.ops.pop(),he.trys.pop();continue}ie=R.call(w,he)}catch(P){ie=[6,P],V=0}finally{K=B=0}if(5&ie[0])throw ie[1];return{value:ie[0]?ie[1]:void 0,done:!0}}var K,V,B,se,he={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]};return se={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(se[Symbol.iterator]=function(){return this}),se};Object.defineProperty(q,"__esModule",{value:!0}),q.createRegistrarClient=q.RegistrarClient=void 0;var x=U(0),b=["skype","aad","cae"],C=(function(w){function R(k){var H=w.call(this,k)||this;return H.name="CancelationError",H}return L(R,w),R})(Error),A=(function(){function w(R,k,H){this.logger=R,this.maxBackoffInMs=k,this.initialDelay=H,this.backoffCount=0,this.id=++w.idCounter}return w.prototype.delay=function(R){var k=this;if(this.timerHandle!==void 0)throw new Error("Retry sequence logical failure");if(this.backoffCount===-1)return new Promise(function(K,V){V(new C("Cancelled"))});var H=this.calculateNextBackoffMs();return this.backoffCount++,this.logger.info("[RegistrarClient] Backing off ".concat(R," for ").concat(H," milliseconds with ID ").concat(this.id)),new Promise(function(K,V){k.cancelFunc=V,k.timerHandle=setTimeout(function(){k.logger.info("[RegistrarClient] Back off for ".concat(R," with ID ").concat(k.id," complete")),k.timerHandle=void 0,K()},H)})},w.prototype.cancel=function(){this.timerHandle!==void 0&&(this.logger.debug("Resetting back off"),clearTimeout(this.timerHandle),this.cancelFunc!==void 0&&this.cancelFunc(new C("Cancelled"))),this.backoffCount=-1},w.prototype.calculateNextBackoffMs=function(){var R=1+.4*(Math.random()-.5),k=this.initialDelay*Math.pow(2,this.backoffCount)*R;return k=Math.round(k),Math.min(this.maxBackoffInMs,k)},w.idCounter=0,w})(),N=(function(){function w(R,k,H){var K;this.logger=R,this.tokenProvider=k,this.options=H,this.DEFAULT_MAX_RETRIES_FOR_GET_TOKEN=15,this.DEFAULT_MAX_BACKOFF_TIME_IN_MS=3e5,this.backoffs={},this.maxBackOffTime=this.options.maxRetryDelayMs>0?this.options.maxRetryDelayMs:this.DEFAULT_MAX_BACKOFF_TIME_IN_MS,this.maxRetriesForGetToken=H.maxRetriesForGetToken===void 0||H.maxRetriesForGetToken===null?this.DEFAULT_MAX_RETRIES_FOR_GET_TOKEN:H.maxRetriesForGetToken,this.proxyUrlRewrite=(K=H.proxyUrlRewrite)!==null&&K!==void 0?K:function(V){return V}}return w.prototype.setTelemetryLogger=function(R){this.eventLogger=R},w.prototype.register=function(R,k){return S(this,void 0,void 0,function(){return j(this,function(H){switch(H.label){case 0:return[4,this.performRegistration(R,k,"pr_set_registration")];case 1:return H.sent(),this.cachedRegistrationParams=[R,k],[2]}})})},w.prototype.unregister=function(){return S(this,void 0,void 0,function(){var R;return j(this,function(k){switch(k.label){case 0:return this.logger.info("[RegistrarClient] sending unregister request"),R=new Request(this.proxyUrlRewrite("".concat(this.options.registrarUrl,"/").concat(this.options.registrationId)),{method:"DELETE",mode:"cors",headers:new Headers(W(W({},this.options.extraRegistrationHeaders),{accept:"application/json, text/javascript"}))}),[4,this.callRegistrar(R,"pr_delete_registration")];case 1:return k.sent(),[2]}})})},w.prototype.cancelPendingRequests=function(){var R=this;Object.keys(this.backoffs).forEach(function(k){R.backoffs[k].cancel()}),this.backoffs={}},w.prototype.resendRegistration=function(){return S(this,void 0,void 0,function(){return j(this,function(R){switch(R.label){case 0:if(!this.cachedRegistrationParams)throw new Error("Re-registration failed because there is no registration parameters cached");return[4,this.performRegistration(this.cachedRegistrationParams[0],this.cachedRegistrationParams[1],"pr_resend_registration")];case 1:return R.sent(),[2]}})})},w.prototype.performRegistration=function(R,k,H){return S(this,void 0,void 0,function(){var K,V;return j(this,function(B){switch(B.label){case 0:return this.logger.info("[RegistrarClient] Sending register request"),K={clientDescription:R,registrationId:this.options.registrationId,nodeId:"",transports:k},V=new Request(this.proxyUrlRewrite(this.options.registrarUrl),{method:"POST",mode:"cors",headers:new Headers(W(W({},this.options.extraRegistrationHeaders),{"content-type":"application/json",accept:"application/json, text/javascript"})),body:(0,x.toJson)(K)}),[4,this.callRegistrar(V,H)];case 1:return B.sent(),[2]}})})},w.prototype.startBackoff=function(){var R=new A(this.logger,this.maxBackOffTime,this.options.initialRetryDelayMs);return this.backoffs[R.id]=R,R},w.prototype.stopBackoff=function(R){R.cancel(),delete this.backoffs[R.id]},w.prototype.getToken=function(R){return S(this,void 0,void 0,function(){var k,H,K,V,B,se,he;return j(this,function(ie){switch(ie.label){case 0:k=this.startBackoff(),H=0,ie.label=1;case 1:return ie.trys.push([1,3,,8]),this.logger.info("[RegistrarClient] Asking for a new token"),[4,this.tokenProvider({needFresh:!0,supportedTokenTypes:b,wwwAuthenticateHeader:R,purpose:"registrar"})];case 2:return K=ie.sent(),this.stopBackoff(k),[2,K];case 3:V=ie.sent(),ie.label=4;case 4:return ie.trys.push([4,6,,7]),H++,B=JSON.stringify(V),H>this.maxRetriesForGetToken?(se="[RegistrarClient] getToken retry limit hit. Will not retry now. Error: ".concat(B),this.logger.error(se),this.stopBackoff(k),[2,Promise.reject(se)]):(this.logger.warn("[RegistrarClient] Retrying for a new token. Retry Count: ".concat(H," Error: ").concat(B)),[4,k.delay("Fetching a new token")]);case 5:return ie.sent(),[3,8];case 6:throw he=ie.sent(),this.stopBackoff(k),he;case 7:return[3,8];case 8:return[3,1];case 9:return[2]}})})},w.prototype.callRegistrar=function(R,k){var H,K,V;return S(this,void 0,void 0,function(){var B,se,he,ie,P,X,Ee,Ae,ke,Oe,$e,Qe,O,T,D,te;return j(this,function($){switch($.label){case 0:return B=this.startBackoff(),[4,this.tokenProvider({needFresh:!1,supportedTokenTypes:b,wwwAuthenticateHeader:void 0,purpose:"registrar"})];case 1:se=$.sent(),this.setTokenHeader(R,se),he=new x.Timespan,ie=0,$.label=2;case 2:P=void 0,$.label=3;case 3:return $.trys.push([3,10,15,16]),X=R.clone(),[4,(0,x.fetchWithTimeout)(X,this.options.requestTimeoutMs)];case 4:return P=$.sent(),P.status!==401?[3,8]:++ie>this.maxRetriesForGetToken?(Ee="[RegistrarClient] getSkypeToken retry limit hit. Will not retry now. Request '".concat(R.url,"' failed with ").concat(P.status," ").concat(P.statusText),this.logger.error(Ee),this.stopBackoff(B),[2,Promise.reject(Ee)]):(this.logger.warn("[RegistrarClient] Retry Count ".concat(ie,". Request '").concat(R.url,"' failed with ").concat(P.status," ").concat(P.statusText)),Ae=(K=(H=P.headers)===null||H===void 0?void 0:H.get("www-authenticate"))!==null&&K!==void 0?K:void 0,ke=this.setTokenHeader,Oe=[R],[4,this.getToken(Ae)]);case 5:return ke.apply(this,Oe.concat([$.sent()])),ie>1?[4,B.delay("Registrar call retry after 401")]:[3,7];case 6:$.sent(),$.label=7;case 7:return[3,22];case 8:if(P.status>=500&&P.status<600)throw new Error("Fetch for '".concat(R.url,"' failed with ").concat(P.status," ").concat(P.statusText));$.label=9;case 9:return[3,16];case 10:$e=$.sent(),this.logger.error("[RegistrarClient] Request failed with ".concat($e)),$.label=11;case 11:return $.trys.push([11,13,,14]),[4,B.delay("Registrar call retry")];case 12:return $.sent(),[3,22];case 13:throw Qe=$.sent(),this.logger.error("[RegistrarClient] Request cancelled"),this.stopBackoff(B),Qe;case 14:return[3,16];case 15:return this.sendTelemetryEvent(k,R,P,he),[7];case 16:return this.stopBackoff(B),P.ok?[2,P]:[3,17];case 17:O=void 0,$.label=18;case 18:return $.trys.push([18,20,,21]),D=(T=JSON).stringify,[4,P.json()];case 19:return O=D.apply(T,[$.sent()]),[3,21];case 20:return $.sent(),O="no details",[3,21];case 21:throw te="Fetch for '".concat(R.url,"' failed with ").concat(P.status," ").concat(P.statusText," (").concat(O,", MS-CV: ").concat((V=P.headers)===null||V===void 0?void 0:V.get("MS-CV"),")"),this.logger.error("[RegistrarClient] ".concat(te)),new Error(te);case 22:return[3,2];case 23:return[2]}})})},w.prototype.setTokenHeader=function(R,k){switch(R.headers.delete("X-Skypetoken"),R.headers.delete("Authorization"),R.headers.delete("X-MS-Migration"),k.tokenType.toLowerCase()){case"skype":R.headers.set("X-Skypetoken",k.token);break;case"aad":case"cae":R.headers.set("Authorization","Bearer ".concat(k.token));break;default:throw new Error("unsupported token type: ".concat(k.tokenType))}this.options.usingLegacyTokenApi===!1&&R.headers.set("X-MS-Migration","True")},w.prototype.sendTelemetryEvent=function(R,k,H,K){if(this.eventLogger!==void 0){var V={name:R,properties:{url:{value:k.url},result_code:{value:H!==void 0?H.status:0},begin_timestamp:{value:K.startTime},elapsed:{value:K.duration}}};this.eventLogger.logEvent(V)}},w})();q.RegistrarClient=N,q.createRegistrarClient=Q}])})});E(Y);var M=I(function(Ne,Se){(function(De,q){Ne.exports=q(Y)})(y,function(De){return(function(q){function U(L){if(Q[L])return Q[L].exports;var W=Q[L]={i:L,l:!1,exports:{}};return q[L].call(W.exports,W,W.exports,U),W.l=!0,W.exports}var Q={};return U.m=q,U.c=Q,U.i=function(L){return L},U.d=function(L,W,S){U.o(L,W)||Object.defineProperty(L,W,{configurable:!1,enumerable:!0,get:S})},U.n=function(L){var W=L&&L.__esModule?function(){return L.default}:function(){return L};return U.d(W,"a",W),W},U.o=function(L,W){return Object.prototype.hasOwnProperty.call(L,W)},U.p="",U(U.s=20)})([function(q,U,Q){Object.defineProperty(U,"__esModule",{value:!0}),U.Logger=void 0;var L=(function(){function W(S,j){this.name=S,this.logger=j}return W.prototype.debug=function(S){this.logger.debug("[".concat(this.name,"] ").concat(S))},W.prototype.info=function(S){this.logger.info("[".concat(this.name,"] ").concat(S))},W.prototype.warn=function(S){this.logger.warn("[".concat(this.name,"] ").concat(S))},W.prototype.error=function(S){this.logger.error("[".concat(this.name,"] ").concat(S))},W})();U.Logger=L},function(q,U,Q){Object.defineProperty(U,"__esModule",{value:!0}),U.USER_AUTHENTICATE_EVENT_NAME=U.SUPPORTED_TOKEN_TYPES=U.FAILED_MESSAGE_ACK=U.UNHANDLED_MESSAGE_ACK=U.HANDLED_MESSAGE_ACK=U.CLIENT_VERSION=U.constants=void 0,U.constants={TROUTER_INIT:"trouterinit",TROUTER_READY_EVENT:"trouterReadyEvent",TROUTER_READY_TIMEOUT:"trouterReadyTimeout",TROUTER_TOKEN_REQUEST:"trouterTokenRequest",TROUTER_TOKEN_GET_SUCCEEDED:"trouterTokenGetSucceeded",TROUTER_TOKEN_GET_FAILED:"trouterTokenGetFailed",TROUTER_RECONNECTING:"trouterReconnecting",RENEWAL:"renewal",NEW_CONNECTION:"newConnection",ENDPOINT_REGISTRATION_FAILED:"endpointRegistrationFailed"},U.CLIENT_VERSION="2024.14.01.55",U.HANDLED_MESSAGE_ACK=200,U.UNHANDLED_MESSAGE_ACK=404,U.FAILED_MESSAGE_ACK=500,U.SUPPORTED_TOKEN_TYPES=["skype","aad","cae"],U.USER_AUTHENTICATE_EVENT_NAME="user.authenticate"},function(q,U,Q){Object.defineProperty(U,"__esModule",{value:!0}),U.TrouterState=U.UserActivityState=void 0;var L;(function(S){S[S.Unknown=0]="Unknown",S[S.Active=1]="Active",S[S.Inactive=2]="Inactive"})(L||(U.UserActivityState=L={}));var W;(function(S){S[S.Unknown=0]="Unknown",S[S.Connected=2]="Connected",S[S.Disconnected=3]="Disconnected",S[S.Switching=9]="Switching"})(W||(U.TrouterState=W={}))},function(q,U,Q){function L(N){try{return JSON.stringify(N)}catch{return"Unable to serialize object of type ".concat(typeof N)}}function W(N){var w=Math.round(new Date().getTime()/1e3);return N!==void 0&&N>w?N-w:0}function S(N){return Math.round(new Date().getTime()/1e3)+N}function j(N,w){return x(this,void 0,void 0,function(){var R,k,H;return b(this,function(K){return k=new Promise(function(V,B){fetch(N).then(function(se){clearTimeout(R),V(se)}).catch(function(se){clearTimeout(R),B(se)})}),w!==0?(H=new Promise(function(V,B){var se=new URL(N.url),he=new Error("".concat(N.method," ").concat(se.origin).concat(se.pathname," timed out"));R=setTimeout(B,w,he)}),[2,Promise.race([k,H])]):[2,k]})})}var x=this&&this.__awaiter||function(N,w,R,k){function H(K){return K instanceof R?K:new R(function(V){V(K)})}return new(R||(R=Promise))(function(K,V){function B(ie){try{he(k.next(ie))}catch(P){V(P)}}function se(ie){try{he(k.throw(ie))}catch(P){V(P)}}function he(ie){ie.done?K(ie.value):H(ie.value).then(B,se)}he((k=k.apply(N,w||[])).next())})},b=this&&this.__generator||function(N,w){function R(he){return function(ie){return k([he,ie])}}function k(he){if(H)throw new TypeError("Generator is already executing.");for(;B&&(B=0,he[0]&&(se=0)),se;)try{if(H=1,K&&(V=2&he[0]?K.return:he[0]?K.throw||((V=K.return)&&V.call(K),0):K.next)&&!(V=V.call(K,he[1])).done)return V;switch(K=0,V&&(he=[2&he[0],V.value]),he[0]){case 0:case 1:V=he;break;case 4:return se.label++,{value:he[1],done:!1};case 5:se.label++,K=he[1],he=[0];continue;case 7:he=se.ops.pop(),se.trys.pop();continue;default:if(V=se.trys,!(V=V.length>0&&V[V.length-1])&&(he[0]===6||he[0]===2)){se=0;continue}if(he[0]===3&&(!V||he[1]>V[0]&&he[1]<V[3])){se.label=he[1];break}if(he[0]===6&&se.label<V[1]){se.label=V[1],V=he;break}if(V&&se.label<V[2]){se.label=V[2],se.ops.push(he);break}V[2]&&se.ops.pop(),se.trys.pop();continue}he=w.call(N,se)}catch(ie){he=[6,ie],K=0}finally{H=V=0}if(5&he[0])throw he[1];return{value:he[0]?he[1]:void 0,done:!0}}var H,K,V,B,se={label:0,sent:function(){if(1&V[0])throw V[1];return V[1]},trys:[],ops:[]};return B={next:R(0),throw:R(1),return:R(2)},typeof Symbol=="function"&&(B[Symbol.iterator]=function(){return this}),B};Object.defineProperty(U,"__esModule",{value:!0}),U.Timespan=U.CorrelationVector=U.fetchWithTimeout=U.calculateExpireTsInSec=U.calculateTtlInSec=U.toJson=void 0,U.toJson=L,U.calculateTtlInSec=W,U.calculateExpireTsInSec=S,U.fetchWithTimeout=j;var C=(function(){function N(w){this.base=w!==void 0?w:this.createCorrelationVectorBase(),this.extension=0}return N.extend=function(w){return new N(w)},N.prototype.increase=function(){this.extension++},N.prototype.value=function(){return"".concat(this.base,".").concat(this.extension)},N.prototype.createCorrelationVectorBase=function(){for(var w="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0987654321/+",R="AQgw",k="",H=0;H<21;H++)k+=w.charAt(Math.floor(Math.random()*w.length));return k+=R.charAt(Math.floor(Math.random()*R.length))},N})();U.CorrelationVector=C;var A=(function(){function N(){this.start=Date.now()}return Object.defineProperty(N.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"startTime",{get:function(){return this.start},enumerable:!1,configurable:!0}),N.prototype.reset=function(){this.start=Date.now()},N})();U.Timespan=A},function(q,U,Q){Object.defineProperty(U,"__esModule",{value:!0}),U.TrouterManagerState=U.UserActivityEventReason=U.ServerState=void 0;var L=Q(3),W=(function(){function x(b,C,A,N,w,R,k){this.connectionId=b,this.connectedClientId=C,this.domId=A,this.unsecureUrl=N,this.url=w,this.c2cUrlBase=R,this.expirationTsSec=k}return x.prototype.getRemainingTtlInSec=function(){return(0,L.calculateTtlInSec)(this.expirationTsSec)},x})();U.ServerState=W;var S;(function(x){x[x.Unknown=0]="Unknown",x[x.Modified=1]="Modified",x[x.Snapshot=2]="Snapshot",x[x.Connected=3]="Connected"})(S||(U.UserActivityEventReason=S={}));var j;(function(x){x[x.Unknown=0]="Unknown",x[x.Connected=2]="Connected",x[x.Disconnected=3]="Disconnected",x[x.Switching=9]="Switching",x[x.TerminalError=10]="TerminalError"})(j||(U.TrouterManagerState=j={}))},function(q,U,Q){function L(w,R){return w==="skype"&&W(R?.scae)!=="1"?"v4a":"v4c"}function W(w){return typeof w=="string"?w:typeof w=="number"?w.toString():void 0}function S(w,R){return R?.kind==="v4c-websocket-failure"?"v4a":w}function j(w){return Object.prototype.hasOwnProperty.call(w,"connectparams")}function x(w,R){return R==="v4a"?w.replace(/\/v4\/c\b/,"/v4/a").replace("wss://","https://").replace("ws://","http://"):w.replace(/\/v4\/a\b/,"/v4/c").replace("https://","wss://").replace("http://","ws://")}function b(w){if(w!==void 0)return N(N({},w),{reconnectUrl:void 0,serviceUrl:void 0})}function C(w){return typeof w=="string"?parseInt(w,10):w}function A(w){if(w?.kind==="redirect"&&w.host!==void 0){var R=w.host;return R.endsWith("/")&&(R=R.substring(0,R.length-1)),R.endsWith("/v4/c")||R.endsWith("/v4/a")||(R+="/v4/c"),R}}var N=this&&this.__assign||function(){return N=Object.assign||function(w){for(var R,k=1,H=arguments.length;k<H;k++){R=arguments[k];for(var K in R)Object.prototype.hasOwnProperty.call(R,K)&&(w[K]=R[K])}return w},N.apply(this,arguments)};Object.defineProperty(U,"__esModule",{value:!0}),U.redirectUrlIfPresent=U.ensureNumber=U.reconnectParamsWithoutUrls=U.adaptUrl=U.isV4ConnectEvent=U.usedProtocolAfterFallback=U.usedProtocol=void 0,U.usedProtocol=L,U.usedProtocolAfterFallback=S,U.isV4ConnectEvent=j,U.adaptUrl=x,U.reconnectParamsWithoutUrls=b,U.ensureNumber=C,U.redirectUrlIfPresent=A},function(q,U,Q){Object.defineProperty(U,"__esModule",{value:!0}),U.TrouterFsm=U.State=void 0;var L,W=Q(4),S=Q(0),j=Q(5);(function(C){C[C.Initial=0]="Initial",C[C.RetrievingToken=1]="RetrievingToken",C[C.Allocating=2]="Allocating",C[C.Handshaking=3]="Handshaking",C[C.Connecting=4]="Connecting",C[C.AnonymousConnecting=5]="AnonymousConnecting",C[C.WebsocketAuthenticating=6]="WebsocketAuthenticating",C[C.Connected=7]="Connected",C[C.Unregistering=8]="Unregistering",C[C.TerminalError=9]="TerminalError"})(L||(U.State=L={}));var x;(function(C){C[C.Initial=0]="Initial",C[C.Registering=1]="Registering",C[C.RegisteringButResendPending=2]="RegisteringButResendPending",C[C.Retrying=3]="Retrying",C[C.Registered=4]="Registered",C[C.RegistrationDisabled=5]="RegistrationDisabled"})(x||(x={}));var b=(function(){function C(A,N,w,R){this.worker=N,this.incallModeEnabled=w,this.protocolSelector=R,this.state=L.Initial,this.autoReconnect=!0,this.logger=new S.Logger("ConnectionFsm",A),this.registrationState=x.Initial}return C.prototype.getState=function(){return this.state},C.prototype.isActive=function(){return this.state===L.Allocating||this.state===L.Connected||this.state===L.Handshaking||this.state===L.Connecting||this.state===L.RetrievingToken||this.state===L.AnonymousConnecting||this.state===L.WebsocketAuthenticating},C.prototype.isConnecting=function(){return this.state===L.Allocating||this.state===L.Handshaking||this.state===L.Connecting||this.state===L.AnonymousConnecting},C.prototype.start=function(){return this.state===L.Initial?(this.setState(L.RetrievingToken),this.worker.getToken(!0,!1,void 0),!0):(this.showIgnored("start"),!1)},C.prototype.stop=function(A,N){A&&(this.registrationState=x.Initial),this.worker.isIncallMode()&&this.worker.exitIncallMode(),this.worker.resetTokenBackoff(),this.worker.cancelPendingRegistrationRequests(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearSentEventTimers(),this.worker.stopRegistrationTimer(),this.worker.stopSocketIo(),this.state===L.Connected&&this.worker.sendDisconnectTelemetryEvent("connection stopped"),this.registrationState!==x.Registered&&this.registrationState!==x.Registering&&this.registrationState!==x.RegisteringButResendPending||this.state===L.Unregistering?N?(this.setState(L.TerminalError),this.worker.dispatchTerminalError()):(this.setState(L.Initial),this.worker.dispatchDisconnected()):(this.registrationState=x.Initial,this.setState(L.Unregistering),this.worker.sendUnregisterRequest())},C.prototype.onTokenReceived=function(A,N,w){this.state===L.RetrievingToken?(0,j.usedProtocolAfterFallback)(this.protocolSelector(A.tokenType,w),N)==="v4c"?(this.setState(L.AnonymousConnecting),this.worker.startConnectionTimer(),this.worker.connectV4c(A,N)):(this.setState(L.Allocating),this.worker.startConnectionTimer(),this.worker.sendAllocateRequest(A)):this.showIgnored("onTokenReceived")},C.prototype.checkConnection=function(A){A&&this.onPingInterval()},C.prototype.onAllocationSucceed=function(A){return this.state===L.Allocating&&this.registrationState===x.Registered&&this.worker.dispatchUnregistered(),this.state===L.Allocating?(this.setState(L.Handshaking),this.registrationState=x.Initial,this.worker.startSocketIo(A),!0):(this.showIgnored("onAllocationSucceed"),!1)},C.prototype.onAllocationFailed=function(A,N){this.state===L.Allocating?this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!A,claimsChallenge:N}):this.showIgnored("onAllocationFailed")},C.prototype.onV4cException=function(){this.state!==L.AnonymousConnecting&&this.state!==L.WebsocketAuthenticating||(this.logger.error("v4c exception, falling back to longpoll"),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"v4c-websocket-failure"}}))},C.prototype.onConnectingTimeout=function(){this.state===L.Allocating||this.state===L.Connecting||this.state===L.Handshaking||this.state===L.AnonymousConnecting||this.state===L.WebsocketAuthenticating?this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0}):this.showIgnored("onConnectingTimeout")},C.prototype.onConnecting=function(){this.state===L.Handshaking?this.setState(L.Connecting):this.showIgnored("onConnecting")},C.prototype.onSocketConnect=function(A){this.state===L.AnonymousConnecting?(this.setState(L.WebsocketAuthenticating),this.worker.sendV4cAuthenticationEvent(A)):this.showIgnored("onSocketConnect")},C.prototype.onConnectingFailed=function(){this.state===L.Connecting?this.onConnectingTimeout():this.state===L.Handshaking?(this.logger.error("Unexpected error in Socket.io - no valid transports"),this.onConnectingTimeout()):this.state===L.AnonymousConnecting||this.state===L.WebsocketAuthenticating?(this.logger.info("/v4/c falling back to longpoll"),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"v4c-websocket-failure"}})):this.showIgnored("onConnectingFailed")},C.prototype.onSocketDisconnect=function(A){this.state===L.Handshaking||this.state===L.Connected||this.state===L.WebsocketAuthenticating?(this.state===L.Connected&&this.worker.sendDisconnectTelemetryEvent(A?.toTelemetryString()),this.state===L.WebsocketAuthenticating&&this.worker.countDisconnectBeforeConnectionEstablishment(),A?.reason==="skypetoken-deprecated"?(this.logger.error("Skypetoken deprecated response, not retrying any further"),this.onTerminalError()):this.cleanUpAndInitiateReconnect({backoff:this.state!==L.Connected&&A?.reason!=="dup",allowCachedToken:A?.reason!=="unauthorized",claimsChallenge:A?.claims})):this.showIgnored("onSocketDisconnect")},C.prototype.onTrouterConnected=function(){this.state===L.Connecting||this.state===L.WebsocketAuthenticating?(this.setState(L.Connected),this.worker.resetTokenBackoff(),this.worker.stopConnectionTimer(),this.worker.sendUserActivityState(W.UserActivityEventReason.Connected,!0),this.worker.startPingTimer(),this.worker.dispatchConnected(),this.worker.shouldSkipRegistration()?(this.registrationState=x.RegistrationDisabled,this.worker.dispatchRegistered()):(this.registrationState=x.Registering,this.worker.sendRegisterRequest())):this.showIgnored("onTrouterConnected")},C.prototype.onReconnectRequired=function(A,N,w){this.state===L.AnonymousConnecting||this.state===L.WebsocketAuthenticating?w===void 0||w.target!=="host"||w.url===void 0||w.url===""?(this.logger.error("unexpected reconnect arguments: ".concat(w?.target," ").concat(w?.url,", reconnecting without cache")),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"redirect-no-host"}})):this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"redirect",host:w.url}}):this.worker.dispatchReconnectIsRequired(A,N)},C.prototype.disableAutoReconnect=function(){this.autoReconnect=!1},C.prototype.onDownstreamRequest=function(A){this.state===L.Connected?(this.switchToIncallModeIfEnabled(),this.worker.dispatchDownstreamRequest(A)):this.showIgnored("onDownstreamRequest")},C.prototype.onTrouterMessageLost=function(A){this.state===L.Connected?this.worker.dispatchTrouterMessageLost(A):this.showIgnored("onTrouterMessageLost")},C.prototype.onPingInterval=function(){this.state===L.Connected?this.worker.sendPingRequest():this.showIgnored("onPingInterval")},C.prototype.onPingResponseTimeout=function(){this.onMissedResponse("onPingResponseTimeout")},C.prototype.onPingResponse=function(){this.state===L.Connected||this.showIgnored("onPingResponse")},C.prototype.onRegistrationFailed=function(){this.state===L.Connected&&this.registrationState===x.Registering?(this.worker.dispatchUnregistered(),this.registrationState=x.Retrying,this.worker.startRegistrationRetryTimer()):this.state===L.Connected&&this.registrationState===x.RegisteringButResendPending?(this.registrationState=x.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationFailed")},C.prototype.onRetryRegistration=function(){this.state===L.Connected&&this.registrationState===x.Retrying?(this.registrationState=x.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRetryRegistration")},C.prototype.onRegistrationSucceeded=function(){this.state===L.Connected&&this.registrationState===x.Registering?(this.registrationState=x.Registered,this.worker.dispatchRegistered(),this.worker.startRegistrationTimer()):this.state===L.Connected&&this.registrationState===x.RegisteringButResendPending?(this.registrationState=x.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationSucceeded")},C.prototype.onRegistrationNearExpiry=function(){this.state===L.Connected&&this.registrationState===x.Registered?(this.registrationState=x.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationNearExpiry")},C.prototype.onUnregistrationDone=function(){this.state===L.Unregistering?(this.setState(L.Initial),this.worker.dispatchUnregistered(),this.worker.dispatchDisconnected()):this.showIgnored("onUnregistrationDone")},C.prototype.onResendRegistration=function(){this.worker.dispatchUnregistered(),this.state===L.Connected&&this.registrationState===x.Registered?(this.registrationState=x.Registering,this.worker.stopRegistrationTimer(),this.worker.sendRegisterRequest()):this.state===L.Connected&&this.registrationState===x.Registering&&(this.registrationState=x.RegisteringButResendPending)},C.prototype.onIncallModeTimer=function(){this.worker.exitIncallMode(),this.state===L.Connected?(this.worker.stopPingTimer(),this.worker.startPingTimer()):this.showIgnored("onIncallModeTimer")},C.prototype.onSetNewUserActivityState=function(){this.worker.sendUserActivityState(W.UserActivityEventReason.Modified,this.state===L.Connected)},C.prototype.onActivityStateResponseTimeout=function(){this.onMissedResponse("onActivityStateResponseTimeout")},C.prototype.forceReconnect=function(A){this.state===L.Connected&&this.worker.sendDisconnectTelemetryEvent(A),this.worker.resetTokenBackoff(),this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0})},C.prototype.onTerminalError=function(){this.logger.error("Cannot proceed, reached terminal state. Switching from state '".concat(L[this.state],"' to ").concat(L[L.TerminalError])),this.stop(!0,!0),this.setState(L.TerminalError)},C.prototype.onMissedResponse=function(A){this.state===L.Connected?(this.worker.sendDisconnectTelemetryEvent(A),this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0})):this.showIgnored(A)},C.prototype.showIgnored=function(A){this.logger.debug("Ignoring event '".concat(A,"' in state '").concat(L[this.state],"'"))},C.prototype.setState=function(A){if(this.logger.info("Switching from state '".concat(L[this.state],"' to state '").concat(L[A],"'")),this.state===A)return void this.logger.error("Attempt to switch to the current state '".concat(L[A],"'"));this.state=A},C.prototype.switchToIncallModeIfEnabled=function(){this.incallModeEnabled&&(this.worker.isIncallMode()||(this.worker.enterIncallMode(),this.worker.stopPingTimer(),this.worker.startPingTimer()),this.worker.restartIncallModeTimer())},C.prototype.cleanUpAndInitiateReconnect=function(A){if(!this.autoReconnect)return this.logger.info("Automatic reconnect is disabled, stopping this connection"),void this.stop(!0);this.worker.cancelPendingRegistrationRequests(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearSentEventTimers(),this.worker.stopRegistrationTimer(),this.worker.stopSocketIo(),this.setState(L.RetrievingToken),this.worker.dispatchReconnecting(),this.worker.getToken(A.allowCachedToken,A.backoff,A.claimsChallenge,A.fallbackReason)},C})();U.TrouterFsm=b},function(q,U,Q){function L(O,T){var D=T?void 0:{"X-MS-Migration":"True"};switch(O.tokenType.toLowerCase()){case"skype":return x({"X-Skypetoken":O.token},D);case"aad":case"cae":return x({Authorization:"Bearer ".concat(O.token)},D);default:throw new Error("unsupported token type: ".concat(O.tokenType))}}function W(O){return O!=null&&typeof O.toString=="function"?O.toString():"[".concat(typeof O,"]")}function S(O){return typeof O=="object"&&O!==null&&O.stack!==void 0?(0,w.toJson)(O.stack):'"(no error.stack)"'}function j(O){return typeof O=="object"&&O!==null&&typeof O.message=="string"?O.message:"(no error.message)"}var x=this&&this.__assign||function(){return x=Object.assign||function(O){for(var T,D=1,te=arguments.length;D<te;D++){T=arguments[D];for(var $ in T)Object.prototype.hasOwnProperty.call(T,$)&&(O[$]=T[$])}return O},x.apply(this,arguments)},b=this&&this.__awaiter||function(O,T,D,te){function $(re){return re instanceof D?re:new D(function(ve){ve(re)})}return new(D||(D=Promise))(function(re,ve){function ze(Be){try{Ue(te.next(Be))}catch(lt){ve(lt)}}function je(Be){try{Ue(te.throw(Be))}catch(lt){ve(lt)}}function Ue(Be){Be.done?re(Be.value):$(Be.value).then(ze,je)}Ue((te=te.apply(O,T||[])).next())})},C=this&&this.__generator||function(O,T){function D(Ue){return function(Be){return te([Ue,Be])}}function te(Ue){if($)throw new TypeError("Generator is already executing.");for(;ze&&(ze=0,Ue[0]&&(je=0)),je;)try{if($=1,re&&(ve=2&Ue[0]?re.return:Ue[0]?re.throw||((ve=re.return)&&ve.call(re),0):re.next)&&!(ve=ve.call(re,Ue[1])).done)return ve;switch(re=0,ve&&(Ue=[2&Ue[0],ve.value]),Ue[0]){case 0:case 1:ve=Ue;break;case 4:return je.label++,{value:Ue[1],done:!1};case 5:je.label++,re=Ue[1],Ue=[0];continue;case 7:Ue=je.ops.pop(),je.trys.pop();continue;default:if(ve=je.trys,!(ve=ve.length>0&&ve[ve.length-1])&&(Ue[0]===6||Ue[0]===2)){je=0;continue}if(Ue[0]===3&&(!ve||Ue[1]>ve[0]&&Ue[1]<ve[3])){je.label=Ue[1];break}if(Ue[0]===6&&je.label<ve[1]){je.label=ve[1],ve=Ue;break}if(ve&&je.label<ve[2]){je.label=ve[2],je.ops.push(Ue);break}ve[2]&&je.ops.pop(),je.trys.pop();continue}Ue=T.call(O,je)}catch(Be){Ue=[6,Be],re=0}finally{$=ve=0}if(5&Ue[0])throw Ue[1];return{value:Ue[0]?Ue[1]:void 0,done:!0}}var $,re,ve,ze,je={label:0,sent:function(){if(1&ve[0])throw ve[1];return ve[1]},trys:[],ops:[]};return ze={next:D(0),throw:D(1),return:D(2)},typeof Symbol=="function"&&(ze[Symbol.iterator]=function(){return this}),ze};Object.defineProperty(U,"__esModule",{value:!0}),U.TrouterConnection=U.ReconnectReason=void 0;var A,N=Q(21),w=Q(3),R=Q(15),k=Q(1),H=Q(16),K=Q(17),V=Q(2),B=Q(4),se=Q(0),he=Q(5),ie=Q(6),P=Q(12),X=(function(){function O(){this.cv=k.CLIENT_VERSION,this.ua="",this.hr="",this.v=""}return O})(),Ee=(function(){function O(){this["force new connection"]=!0,this.reconnect=!1,this.query="",this.ackTimeoutMs=5e3}return O.prototype.rewriteUrlForProxy=function(T){return T},O})(),Ae="MS-CV",ke=(function(){function O(T,D){this.logger=D,this.cvCounter=0;var te=JSON.parse(T);this.startTS=this.safeJsonNumber(te,"startTS",0),this.url=this.safeJsonString(te,"url",""),this.shortUrl=this.safeJsonString(te,"shortUrl",""),this.body=this.safeJsonString(te,"body",""),this.headers=this.safeJsonRecord(te,"headers",{}),this.id=this.safeJsonNumber(te,"id",-1),this.method=this.safeJsonString(te,"method",""),this.replied=!1,this.timedout=!1,this.receivedCv=this.headers[Ae],this.updateCvHeader()}return Object.defineProperty(O.prototype,"correlationVector",{get:function(){return this.receivedCv?"".concat(this.receivedCv,".").concat(this.cvCounter):""},enumerable:!1,configurable:!0}),O.prototype.on=function(T,D){T==="data"?this.dataCallback=D:T==="end"&&(typeof this.dataCallback=="function"&&this.dataCallback(this.body),D())},O.prototype.incrementCorrelationVector=function(){++this.cvCounter,this.updateCvHeader()},O.prototype.updateCvHeader=function(){var T=this.correlationVector;T&&(this.headers[Ae]=T)},O.prototype.safeJsonNumber=function(T,D,te){var $;if(T!=null&&Object.prototype.hasOwnProperty.call(T,D)){var re=T;if(typeof re[D]=="number")return re[D];if(typeof re[D]=="string")return parseFloat(re[D]);($=this.logger)===null||$===void 0||$.warn("unexpected type of '".concat(D,"': ").concat(typeof re[D]))}return te},O.prototype.safeJsonString=function(T,D,te){var $;if(T!=null&&Object.prototype.hasOwnProperty.call(T,D)){var re=T;if(typeof re[D]=="string")return re[D];($=this.logger)===null||$===void 0||$.warn("unexpected type of '".concat(D,"': ").concat(typeof re[D]))}return te},O.prototype.safeJsonRecord=function(T,D,te){var $;if(T!=null&&Object.prototype.hasOwnProperty.call(T,D)){var re=T;if(typeof re[D]=="object")return re[D];($=this.logger)===null||$===void 0||$.warn("unexpected type of '".concat(D,"': ").concat(typeof re[D]))}return te},O})(),Oe=(function(){function O(T,D,te){this.request=T,this.responseData=D,this.sendResponse=te}return O.prototype.writeHead=function(T,D){this.responseData.status=T,this.responseData.headers=D},O.prototype.write=function(T){this.responseData.body+=T},O.prototype.end=function(T){return T&&(this.responseData.body+=T),this.sendResponse(this.request,this.responseData)},O})(),$e=(function(){function O(T){this.name=T,this.args={},this.timeoutTimerId=0}return O})();(function(O){O[O.Configuration=0]="Configuration",O[O.ServerInitiated=1]="ServerInitiated"})(A||(U.ReconnectReason=A={}));var Qe=(function(){function O(T,D,te,$,re,ve,ze,je){var Ue,Be=this;this.options=D,this.manager=te,this.tokenProvider=$,this.usingLegacyTokenApi=re,this.protocolSelector=ze,this.audienceSubscriptionState=je,this.WEBSOCKET_TRANSPORT_NAME="websocket",this.XHR_POLLING_TRANSPORT_NAME="xhr-polling",this.AUDIENCE_SUBSCRIPTION_RESULT_ERROR="Error",this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED="Unsubscribed",this.AUDIENCE_SUBSCRIPTION_RESULT_TIMEOUT="Timeout",this.AUDIENCE_SUBSCRIPTION_RESULT_BAD_REQUEST="BadRequest",this.AUDIENCE_SUBSCRIPTION_STATE_QUERY_PARAM_REGEX=/&audienceSubscriptionState=[^&]*|^audienceSubscriptionState=[^&]*&?/,this.connectionId="",this.inIncallMode=!1,this.connectionAttempt=0,this.connectedClientId="",this.isNavigatorOnline=!0,this.onNavigatorOnlineStatusUpdateBound=this.onNavigatorOnlineStatusUpdate.bind(this),this.c2cUrlBase="",this.connectingErrorsInRow=0,this.unauthorizedErrorCount=0,this.pendingSentEventTimers={},this.lastDisconnectReason="",this.UNKNOWN_TRANSPORT="unknown_transport",this.connectingErrorsThreshold=3,this.pendingAudienceSubscription=void 0,this.logger=new se.Logger("Connection",T),this.timeoutOptions=this.options.timeoutOptions,this.tokenBackoff=new K.ExponentialBackoff(this.logger,this.timeoutOptions.maxBackoffMs),this.clientID=Date.now(),typeof window<"u"&&window.location&&(this.domId=window.location.hostname);var lt=new X;lt.cv=k.CLIENT_VERSION,lt.ua="",!((Ue=this.options)===null||Ue===void 0)&&Ue.clientInfo&&(lt.ua=this.safeString(this.options.clientInfo.ua),lt.v=this.safeString(this.options.clientInfo.v)),this.clientInfo=lt,this.connectionTracker=new R.ConnectionTracker(T,this.clientID,this.clientInfo,function(){return Be.getServerState()},this.options.endpointId,this.options.clientCorrelationID,this.options.environment),this.applyConnectionTrackerOptions(D);var xt=this.options.incallModeTimeoutMs>0;if(this.fsm=new ie.TrouterFsm(T,this,xt,this.protocolSelector),D.registration){var It={registrarUrl:D.registration.registrarUrl,proxyUrlRewrite:D.rewriteUrlForProxy,registrationId:D.registration.registrationId,requestTimeoutMs:D.timeoutOptions.fetchTimeoutMs,initialRetryDelayMs:1e3,maxRetryDelayMs:D.timeoutOptions.maxBackoffMs,usingLegacyTokenApi:this.usingLegacyTokenApi,maxRetriesForGetToken:D.retryLimitOnTokenFetch,extraRegistrationHeaders:D.extraConnectionHeaders};this.registrarClient=(0,N.createRegistrarClient)(T,this.tokenProvider,It)}this.userActivityState=ve}return O.prototype.start=function(T){this.logger.info("Starting"),this.reconnectParams=T,typeof window<"u"&&window.navigator&&window.addEventListener?(this.isNavigatorOnline=window.navigator.onLine,window.addEventListener("online",this.onNavigatorOnlineStatusUpdateBound),window.addEventListener("offline",this.onNavigatorOnlineStatusUpdateBound),this.logger.debug("Registered for browser online notifications - current state: ".concat(this.isNavigatorOnline))):this.isNavigatorOnline=!0,this.fsm.start()},O.prototype.stop=function(T){this.logger.info("Stopping"),typeof window<"u"&&window.navigator&&(window.removeEventListener("online",this.onNavigatorOnlineStatusUpdateBound),window.removeEventListener("offline",this.onNavigatorOnlineStatusUpdateBound)),this.fsm.stop(T),this.connectionTracker.close()},O.prototype.configure=function(T){var D=this.options.trouterUrl!==T.trouterUrl;this.options=T,this.applyConnectionTrackerOptions(T),D&&(this.logger.info("Configuration changed. Reconnection required."),this.fsm.onReconnectRequired(!1,A.Configuration))},O.prototype.checkConnection=function(T){this.logger.info("checkConnection called with ".concat(T)),this.fsm.checkConnection(T),T&&this.connectionTracker.sendTelemetry(R.ClientEventName.CheckConnection,{disconnectDetected:T},[])},O.prototype.disableRegistrationsAndAutoReconnect=function(){this.stopRegistrationTimer(),this.cancelPendingRegistrationRequests(),this.fsm.disableAutoReconnect()},O.prototype.getServerState=function(){return new B.ServerState(this.connectionId,this.connectedClientId,this.domId?this.domId:"",this.allocateResult?this.allocateResult.url:"",this.allocateResult?this.allocateResult.surl:"",this.c2cUrlBase,this.connectionExpireTimestampInSecs)},O.prototype.getState=function(){return this.fsm.getState()},O.prototype.getToken=function(T,D,te,$,re){var ve=this;re===void 0&&(re=0),this.logger.info("Getting token ".concat(D?"with backoff":"without backoff"));var ze=function(){ve.connectionTracker.trackStart("token");var je={needFresh:!T,wwwAuthenticateHeader:te,supportedTokenTypes:k.SUPPORTED_TOKEN_TYPES,purpose:"trouter"};ve.logger.info("Requesting token: needFresh=".concat(je.needFresh," ")+"types=[".concat(k.SUPPORTED_TOKEN_TYPES,"], ")+"wwwAuthenticateHeader is ".concat(je.wwwAuthenticateHeader?"non empty":"empty")),ve.tokenProvider(je).then(function(Ue){ve.logger.debug("".concat(Ue.tokenType," token is received")),ve.connectionTracker.trackEnd("token"),ve.fsm.onTokenReceived(Ue,$,ve.reconnectParams)}).catch(function(Ue){var Be=(0,w.toJson)(Ue.stack);if(ve.logger.error("Getting token failed, will retry after timeout. Error: ".concat(Be)),ve.connectionTracker.trackError("token",Be),!ve.canRetryTokenFetchRequest(re+ve.unauthorizedErrorCount))return ve.connectionTracker.trackError("token","getToken retry limit hit, reached terminal error state"),ve.resetTokenBackoff(),void ve.fsm.onTerminalError();ve.getToken(T,!0,te,$,re+1)})};D?this.tokenBackoff.backoff("getting token",ze):(this.resetTokenBackoff(),ze())},O.prototype.startConnectionTimer=function(){var T=this;this.stopConnectionTimer(),this.logger.debug("Starting connection timeout for ".concat(this.timeoutOptions.connectionTimeoutMs," ms")),this.connectionTimeoutId=setTimeout(function(){T.logger.info("Connection timeout is fired"),T.fsm.onConnectingTimeout()},this.timeoutOptions.connectionTimeoutMs)},O.prototype.stopConnectionTimer=function(){this.connectionTimeoutId&&(this.logger.debug("Stopping connection timeout"),clearTimeout(this.connectionTimeoutId),this.connectionTimeoutId=void 0)},O.prototype.startPingTimer=function(){var T=this;this.transportTypeName==="websocket"?(this.logger.debug("Starting ping timeout for ".concat(this.timeoutOptions.pingTimeoutMs," ms")),this.pingTimerId=setInterval(function(){T.logger.info("Ping interval fired"),T.fsm.onPingInterval()},this.timeoutOptions.pingTimeoutMs)):this.logger.debug("Not starting ping for transport ".concat(this.transportTypeName))},O.prototype.stopPingTimer=function(){this.pingTimerId&&(this.logger.debug("Stopping ping timeout"),this.clearPingResponseTimer(),clearInterval(this.pingTimerId),this.pingTimerId=void 0)},O.prototype.shouldSkipRegistration=function(){return this.options.registration===void 0},O.prototype.hasCustomRegistrationTtl=function(){var T,D;return((T=this.options.registration)===null||T===void 0?void 0:T.registrarTtlSec)!==void 0&&((D=this.options.registration)===null||D===void 0?void 0:D.registrarTtlSec)!==0},O.prototype.startRegistrationTimer=function(){var T=this;this.stopRegistrationTimer();var D=this.getRegistrationTtl(),te=D[0],$=D[1];if(te<=30||!$)return this.logger.debug("Starting registration expiration timer (TTL ".concat(te," sec)")),void(this.registrationTimerId=setTimeout(function(){T.registrationTimerId=void 0,T.logger.warn("Registration expired but the connection is still alive. Should never happen"),T.dispatchUnregistered()},1e3*te));var re=te-30;this.logger.debug("Starting registration extension timer for ".concat(re," sec")),this.registrationTimerId=setTimeout(function(){T.logger.info("Registration extension timer fired"),T.registrationTimerId=setTimeout(function(){T.registrationTimerId=void 0,T.logger.debug("Registration extension did not happen in time"),T.dispatchUnregistered()},3e4),T.fsm.onRegistrationNearExpiry()},1e3*re)},O.prototype.startRegistrationRetryTimer=function(){var T=this;this.stopRegistrationTimer(),this.registrationTimerId=setTimeout(function(){T.registrationTimerId=void 0,T.fsm.onRetryRegistration()},123e3)},O.prototype.stopRegistrationTimer=function(){this.registrationTimerId&&(this.logger.debug("Stopping registration timeout"),clearTimeout(this.registrationTimerId),this.registrationTimerId=void 0)},O.prototype.resendRegistration=function(){if(!this.registrarClient)throw new Error("Trouter Client not configured to handle registrations");return this.fsm.onResendRegistration(),Promise.resolve()},O.prototype.buildSocketIoUrlParams=function(T,D){if(!this.allocateResult)throw new Error("Allocate result is undefined in buildSocketIoUrlParams()");for(var te={},$=this.allocateResult.connectparams,re=0,ve=Object.keys($);re<ve.length;re++){var ze=ve[re];if($[ze]!==void 0){var je=$[ze];typeof je=="string"||typeof je=="number"?te[ze]=je:this.logger.error("signatureData[".concat(ze,"] has unsupported type ").concat(typeof je))}}return te.v="v4",te.tc=encodeURI((0,w.toJson)(this.clientInfo)),te.timeout=this.timeoutOptions.pingTimeoutMs/1e3,te.auth="true",this.options.endpointId&&(te.epid=this.options.endpointId),T&&(te.userActivity=encodeURI((0,w.toJson)(T))),D&&(te.audienceSubscriptionState=encodeURIComponent((0,w.toJson)(D))),this.appendConnectedClientIds(this.buildQuery(te),!0)},O.prototype.startSocketIo=function(T){var D,te;if(this.logger.debug("Starting socket io"),this.connectionTracker.trackStart("connectSocket"),!this.allocateResult)throw new Error("Allocate result is undefined in startSocketIo()");var $=this.options.ioOptions?x({},this.options.ioOptions):new Ee,re=this.userActivityState.state!==V.UserActivityState.Unknown?this.userActivityState.increaseCvAndGetEventObject():void 0,ve=(D=this.audienceSubscriptionState)===null||D===void 0?void 0:D.increaseCvAndGetEventObject();if($["force new connection"]=!0,$.reconnect=!1,$.rewriteUrlForProxy=this.options.rewriteUrlForProxy,$.requestHeaders=x(x({},this.options.extraConnectionHeaders),L(T,this.usingLegacyTokenApi)),$.query=this.buildSocketIoUrlParams(re,ve),this.logger.info("connecting to ".concat(this.allocateResult.socketio,"?").concat($.query)),this.stopSocketIo(),this.socket=((te=this.options.io)!==null&&te!==void 0?te:P).connect(this.allocateResult.socketio,$),this.socket===void 0)throw new Error("Can't create Socket.io object");this.attachSocketIoHandlers(this.socket,T,re,ve)},O.prototype.stopSocketIo=function(){if(this.socket){this.logger.debug("clearing socket.io");try{for(var T=0,D=["connecting","connect","connect_failed","close_during_connecting","disconnect","reconnect","reconnect_failed","reconnecting","error","message","trouter.connected","trouter.reconnect","trouter.message_loss"];T<D.length;T++){var te=D[T];this.socket.removeAllListeners(te)}this.socket.disconnect(),this.logger.debug("cleared socket"),this.socket=void 0}catch($){this.logger.error("exception in disconnecting previous socket. Error: ".concat(S($)))}}},O.prototype.dispatchConnected=function(){this.logger.info("dispatching connected"),this.manager.onConnected(this)},O.prototype.dispatchRegistered=function(){this.logger.info("dispatching registered"),this.manager.onRegistered(this)},O.prototype.dispatchUnregistered=function(){this.logger.info("dispatching unregistered"),this.manager.onUnregistered(this)},O.prototype.dispatchDownstreamRequest=function(T){var D=this;this.logger.debug("dispatching downstream request");try{var te=new Oe(T,new R.ResponseData(T.id),function($,re){return D.logger.debug("sending response to downstream"),D.sendResponse($,re)});this.manager.onDownstreamRequest(this,T,te)}catch($){this.logger.error("exception in socket.on message. Error : ".concat(S($)))}},O.prototype.dispatchReconnecting=function(){this.logger.info("dispatching reconnecting"),this.manager.onReconnecting(this)},O.prototype.dispatchReconnectIsRequired=function(T,D){this.logger.info("dispatching reconnect is required by server"),this.manager.onReconnectIsRequired(this,T,D)},O.prototype.dispatchDisconnected=function(){this.logger.info("dispatching disconnected"),this.manager.onDisconnected(this)},O.prototype.dispatchTerminalError=function(){this.logger.info("dispatching terminal error"),this.manager.onTerminalError(this)},O.prototype.dispatchTrouterMessageLost=function(T){this.logger.info("dispatching trouter message lost"),this.manager.onTrouterMessageLost(T)},O.prototype.countDisconnectBeforeConnectionEstablishment=function(){this.logger.warn("counting disconnect before connection was fully established as a connection failure"),++this.connectingErrorsInRow>=this.connectingErrorsThreshold&&this.resetReconnectParamsOnErrorThreshold()},O.prototype.sendProcessedDroppedIndicators=function(T){var D=this;try{this.logger.debug("emitting processed flow tags to the server");var te=new $e("trouter.processed_message_loss");te.args={droppedIndicators:T},this.sendDownstreamEvent(te,function(){D.logger.info("emitted processed flow tags to the server")})}catch(re){var $=S(re);this.logger.error("unable to send processed message loss event. Error: ".concat($)),this.connectionTracker.trackError("trouter.processed_message_loss",$,!1)}},O.prototype.sendAllocateRequest=function(T){var D=this;this.connectionAttempt++,this.connectionTracker.trackNewConnection();var te,$=this.options.trouterUrl,re=this.reconnectParams,ve=typeof re?.se=="string"?parseInt(re.se,10):typeof re?.se=="number"?re.se:void 0;ve&&ve<=Date.now()+36e5&&(this.logger.warn("Dropping expired cached connection parameters: ".concat(new Date(ve))),this.reconnectParams=re=void 0),re&&re.serviceUrl!==$&&(this.logger.warn("Dropping cached connection parameters for a different environment (".concat(re.serviceUrl,", now ").concat($,")")),this.reconnectParams=re=void 0),re?.reconnectUrl&&($=re.reconnectUrl),te=re?x(x({},re),{serviceUrl:void 0,reconnectUrl:void 0}):null,$=(0,he.adaptUrl)($,"v4a"),$=this.appendCorrelationIds($,!1),$=this.appendEndpointId($,!1),te&&($+="&".concat(this.buildQuery(te)),te.v||($+="&v=".concat("v4"))),$=this.options.rewriteUrlForProxy($);var ze=new Request($,{method:"POST",mode:"cors",headers:new Headers(x(x({"Content-Type":"text/plain"},this.options.extraConnectionHeaders),L(T,this.usingLegacyTokenApi)))});this.logger.info("sendAllocateRequest: POST ".concat($)),this.connectionTracker.trackStart("allocation");var je,Ue=Date.now(),Be=-1,lt=!1;(0,w.fetchWithTimeout)(ze,this.timeoutOptions.fetchTimeoutMs).then(function(xt){var It;if(Be=xt.status,!xt.ok)throw je=(It=xt.headers.get("www-authenticate"))!==null&&It!==void 0?It:void 0,lt=xt.headers.get("x-trouter-skypetoken-deprecated")==="1",D.logger.warn("Allocation request got response status ".concat(xt.status,", www-authenticate header was ").concat(je?"not empty":"empty")),new Error(xt.statusText);var Yt=xt.headers.get("content-type");if(!Yt||Yt!=="application/json"&&!Yt.startsWith("application/json;"))throw new Error("Content-type '".concat(Yt,"' is unexpected"));return D.connectionTracker.trackEnd("allocation"),xt.json()}).then(function(xt){D.unauthorizedErrorCount=0,D.onAllocationResponse(xt,T)}).catch(function(xt){D.connectingErrorsInRow++;var It="".concat(xt).concat(Be>=0?", status code ".concat(Be):"");if(D.logger.error("".concat(D.connectingErrorsInRow," failed connecting attempt(s) in a row. ").concat(It)),D.connectionTracker.trackError("allocation",It),lt){var Yt="Skypetoken deprecated response, not retrying any further";return D.logger.error(Yt),D.connectionTracker.trackError("allocation",Yt),void D.fsm.onTerminalError()}if(Be===401&&D.unauthorizedErrorCount++,!D.canRetryTokenFetchRequest(D.unauthorizedErrorCount)){var Yt="getToken retry limit hit, reached terminal error state";return D.connectionTracker.trackError("allocation",Yt),void D.fsm.onTerminalError()}if(Be!==-1||D.isNavigatorOnline){if(D.reconnectParams&&D.connectingErrorsInRow>=D.connectingErrorsThreshold){if(Be>=400&&Be<=599)D.resetReconnectParamsOnErrorThreshold();else if(D.reconnectParams.reconnectUrl&&D.connectingErrorsInRow%3==0){D.logger.warn("".concat(D.connectingErrorsInRow," connection attempts, testing nominal service URL"));var ki=Math.min(D.timeoutOptions.connectionTimeoutMs-(Date.now()-Ue)-500,D.timeoutOptions.fetchTimeoutMs);return void D.testNominalUrlConnectivity(ki).then(function(Zr){D.connectionTracker.trackProgress("nomcheck",Zr?"ok":"failed"),Zr?(D.logger.warn("Nominal service URL is reachable, erasing cached reconnect URL"),D.reconnectParams&&delete D.reconnectParams.reconnectUrl):D.logger.warn("Nominal service URL is not reachable either, keeping cached reconnect URL"),D.fsm.onAllocationFailed(!1,void 0)},function(){D.fsm.onAllocationFailed(!1,void 0)})}}}else D.logger.info("Expected failure, the browser says it is not online at the moment");D.fsm.onAllocationFailed(Be===401,je)})},O.prototype.testNominalUrlConnectivity=function(T){var D=this;if(T<1e3)return this.logger.warn("There is no time left to reasonably perform the nominal service URL connectivity check (".concat(T," ms), falling back to assuming that the connectivity is fine")),Promise.resolve(!0);var te;try{var $=new URL(this.options.trouterUrl);$.pathname="/",$.search="?"+this.buildQuery({check:Date.now(),cor_id:encodeURIComponent(this.options.clientCorrelationID),epid:encodeURIComponent(this.options.endpointId?this.options.endpointId:""),tc:encodeURIComponent((0,w.toJson)(this.clientInfo))}),te=new Request(this.options.rewriteUrlForProxy($.toString()),{method:"GET",headers:{Accept:"text/plain"}})}catch(re){return this.logger.warn("Nominal service URL connectivity test request could not be created (".concat(re,"), falling back to assuming that the connectivity is fine")),Promise.resolve(!0)}return(0,w.fetchWithTimeout)(te,T).then(function(re){if(re.status!==200)throw new Error("Not 200 OK: ".concat(re.status," ").concat(re.statusText));return re.text()}).then(function(re){if(re!=="Trouter")throw new Error('Not "Trouter": '.concat(re.substring(0,16)).concat(re.length>16?"...":""));return!0}).catch(function(re){return D.logger.error("Nominal service URL connectivity test failed: ".concat(re)),!1})},O.prototype.sendPingRequest=function(){var T=this;if(this.socket&&this.pingResponseTimerId===void 0)try{this.logger.debug("emitting ping event");var D=!1;this.socket.emit("ping",function(){D!==!0&&T.onPingResponse()}),this.pingResponseTimerId=setTimeout(function(){T.logger.error("Ping response timeout is fired"),D=!0,T.clearPingResponseTimer(),T.fsm.onPingResponseTimeout()},this.timeoutOptions.pongTimeoutMs)}catch($){var te=S($);this.logger.error("unable to send ping. Error: ".concat(te)),this.connectionTracker.trackError("ping",te,!1)}},O.prototype.connectV4c=function(T,D){var te,$,re,ve,ze,je,Ue=this.options.ioOptions?x({},this.options.ioOptions):new Ee;Ue["force new connection"]=!0,Ue.reconnect=!1,!((te=this.reconnectParams)===null||te===void 0)&&te.serviceUrl&&(0,he.adaptUrl)(this.reconnectParams.serviceUrl,"v4c")!==(0,he.adaptUrl)(this.options.trouterUrl,"v4c")&&(this.logger.warn("Dropping cached connection parameters for a different environment (".concat(this.reconnectParams.serviceUrl,", now ").concat(this.options.trouterUrl,")")),this.reconnectParams=void 0);var Be=(ve=($=(0,he.redirectUrlIfPresent)(D))!==null&&$!==void 0?$:D?.kind!=="redirect-no-host"?(re=this.reconnectParams)===null||re===void 0?void 0:re.reconnectUrl:void 0)!==null&&ve!==void 0?ve:this.options.trouterUrl,lt=(0,he.adaptUrl)(Be,"v4c");Ue["skipped handshake data"]={timeout:70,websocketUrl:lt},Ue.query=this.buildV4cUrlParams(),Ue.rewriteUrlForProxy=this.options.rewriteUrlForProxy;try{if(this.stopSocketIo(),this.transportTypeName="websocket",this.socket=((ze=this.options.io)!==null&&ze!==void 0?ze:P).connect(this.options.trouterUrl,Ue),this.socket===void 0)throw new Error("failed to create Socket.io object");var xt=(je=this.audienceSubscriptionState)===null||je===void 0?void 0:je.increaseCvAndGetEventObject();this.attachSocketIoHandlers(this.socket,T,void 0,xt)}catch(It){this.logger.error("".concat(It)),this.connectionTracker.trackError("v4c","".concat(It)),this.fsm.onV4cException()}},O.prototype.sendV4cAuthenticationEvent=function(T){var D,te={headers:x(x({},this.options.extraConnectionHeaders),L(T,this.usingLegacyTokenApi)),connectparams:(0,he.reconnectParamsWithoutUrls)(this.reconnectParams)};(D=this.socket)===null||D===void 0||D.emit(k.USER_AUTHENTICATE_EVENT_NAME,te)},O.prototype.setUserActivityState=function(T){var D=T.state!==this.userActivityState.state;this.userActivityState=T,D?(this.logger.info("Changing user activity state to '".concat(T.toEventJSON(),"'")),this.fsm.onSetNewUserActivityState()):(this.logger.debug("Not changing the same user activity state '".concat(T.toEventJSON(),"'")),this.manager.onUserActivityStateAccepted(T.correlationVector.value()))},O.prototype.sendUserActivityState=function(T,D){this.userActivityState.state!==V.UserActivityState.Unknown&&(this.transportTypeName==="websocket"&&D?T===B.UserActivityEventReason.Connected?this.sendUserActivityStateMultiple(2):this.sendUserActivityStateMultiple(1):this.transportTypeName==="xhr-polling"&&T===B.UserActivityEventReason.Modified&&this.fsm.forceReconnect("user activity/force reconnect"))},O.prototype.setAudienceSubscriptionsAsync=function(T,D){var te=this.audienceSubscriptionState;if(this.audienceSubscriptionState=T,this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME)return this.setAudienceSubscriptionsInternalAsync(T.increaseCvAndGetEventObject(),D);if(this.transportTypeName===this.XHR_POLLING_TRANSPORT_NAME){var $=this.setAudienceSubscriptionsLongpollInternalAsync(T.increaseCvAndGetEventObject(),D,te);return this.fsm.forceReconnect("set audience subscription force reconnect"),$}throw new Error("set audience subscription executed on an unknown transport")},O.prototype.setAudienceSubscriptionsUnsafeAsync=function(T){if(T)return this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME?this.setAudienceSubscriptionsInternalAsync(T,15e3):void 0},O.prototype.setAudienceSubscriptionsInternalAsync=function(T,D){return b(this,void 0,void 0,function(){var te,$,re=this;return C(this,function(ve){switch(ve.label){case 0:return this.logger.info("[WebSocket] Audience subscription set requested."),te=new $e("audience.subscribe"),te.args=T,[4,new Promise(function(ze){var je=!1,Ue=setTimeout(function(){return je=!0,ze(re.buildAudienceSubscriptionsTimeoutResponse(T))},D);re.sendDownstreamEvent(te,function(Be,lt){je||(clearTimeout(Ue),re.logger.debug("[Websocket] Audience subscription response: ".concat(lt)),re.pendingAudienceSubscription&&re.onAudienceSubscriptionResult(lt),ze(lt))})})];case 1:return $=ve.sent(),this.manager.onAudiencesSetResolved($,T.cv),[2,$]}})})},O.prototype.setAudienceSubscriptionsLongpollInternalAsync=function(T,D,te){var $;return b(this,void 0,void 0,function(){var re,ve,ze,je,Ue,Be,lt=this;return C(this,function(xt){switch(xt.label){case 0:return this.logger.info("[XHR Polling] Audience subscription set requested."),this.pendingAudienceSubscription&&(this.logger.error("Racing audience subscriptions occured. This situation resolves into undefined scenario and/or nasal demons."),clearTimeout(this.pendingAudienceSubscription.timeoutId)),T.audiences.length===0?[2,this.handleAudienceUnsubscribeLongpoll(T.cv,te)]:[4,new Promise(function(It){var Yt=setTimeout(function(){return lt.pendingAudienceSubscription=void 0,It(lt.buildAudienceSubscriptionsTimeoutResponse(T))},D);lt.pendingAudienceSubscription={audienceSetResolve:It,timeoutId:Yt}})];case 1:return re=xt.sent(),this.manager.getState()===V.TrouterState.Unknown||this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME?[2,re]:(ve=re.responses[0],ve?.result.audienceSubscriptionState===this.AUDIENCE_SUBSCRIPTION_RESULT_BAD_REQUEST?(this.clearAudienceSubscriptionStateQueryParam(),this.manager.onAudiencesSetResolved(re,T.cv),[2,re]):(ze=re.responses.find(function(It){return It.audienceId===T.audiences[0].id}),ze?.result.audienceSubscriptionState===this.AUDIENCE_SUBSCRIPTION_RESULT_ERROR?(this.clearAudienceSubscriptionStateQueryParam(),this.manager.onAudiencesSetResolved(re,T.cv),[2,re]):(je=(($=te?.audienceSubscriptionModel.audienceSubscriptions[0])===null||$===void 0?void 0:$.id)!==ve?.audienceId,te&&je&&(Ue=this.mapToSyntheticAudienceSubscriptionResponses(te.audienceSubscriptionModel.audienceSubscriptions,this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED,200),(Be=re.responses).push.apply(Be,Ue)),this.manager.onAudiencesSetResolved(re,T.cv),[2,re])))}})})},O.prototype.clearAudienceSubscriptionStateQueryParam=function(){var T,D,te;!((te=(D=(T=this.socket)===null||T===void 0?void 0:T.socket)===null||D===void 0?void 0:D.options)===null||te===void 0)&&te.query&&(this.socket.socket.options.query=this.socket.socket.options.query.replace(this.AUDIENCE_SUBSCRIPTION_STATE_QUERY_PARAM_REGEX,""))},O.prototype.handleAudienceUnsubscribeLongpoll=function(T,D){var te;this.audienceSubscriptionState=void 0;var $={responses:[]};if(D){var re=this.mapToSyntheticAudienceSubscriptionResponses(D.audienceSubscriptionModel.audienceSubscriptions,this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED,200);(te=$.responses).push.apply(te,re)}return this.manager.onAudiencesSetResolved($,T),$},O.prototype.buildAudienceSubscriptionsTimeoutResponse=function(T){return this.logger.error("Audience subscription attempt has timed out."),{responses:this.mapToSyntheticAudienceSubscriptionResponses(T.audiences,this.AUDIENCE_SUBSCRIPTION_RESULT_TIMEOUT)}},O.prototype.mapToSyntheticAudienceSubscriptionResponses=function(T,D,te){return T.map(function($){return{audienceId:$.id,result:{audienceSubscriptionState:D,responseStatus:te}}})},O.prototype.expediteBackoff=function(){this.tokenBackoff.expediteIfPending()},O.prototype.sendRegisterRequest=function(){var T=this;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");if(!this.allocateResult)throw new Error("Allocate result is undefined in sendRegisterRequest()");this.logger.info("sending register request");var D=new w.Timespan;this.connectionTracker.trackStart("registration");var te=this.getRegistrationTtl()[0];this.registrarClient.register({appId:this.options.registration.pnhAppId,aesKey:"",languageId:"en-US",platform:this.options.registration.platform,templateKey:this.options.registration.pnhTemplateKey,platformUIVersion:this.options.registration.platformUIVersion,productContext:this.options.registration.productContext},{TROUTER:[{context:this.options.registration.context,path:this.allocateResult.surl,ttl:te}]}).then(function(){T.logger.info("Register request successful"),T.connectionTracker.trackEnd("registration"),T.fsm.onRegistrationSucceeded(),T.connectionTracker.sendTelemetry(R.ClientEventName.Registration,{duration:D.duration},[])}).catch(function($){T.logger.error("Register request failed. Error: ".concat($)),T.connectionTracker.trackError("registration",j($)),T.fsm.onRegistrationFailed(),T.connectionTracker.sendTelemetry(R.ClientEventName.Registration,{duration:D.duration},[])})},O.prototype.sendUnregisterRequest=function(){var T=this;this.logger.info("sending unregister request");var D=new w.Timespan;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");this.connectionTracker.trackStart("unregistration"),this.registrarClient.unregister().then(function(){T.logger.info("Unregister request successful"),T.connectionTracker.trackEnd("unregistration"),T.fsm.onUnregistrationDone(),T.connectionTracker.sendTelemetry(R.ClientEventName.Unregistration,{duration:D.duration},[])}).catch(function(te){T.logger.error("Unregister request failed. Error: ".concat(te)),T.connectionTracker.trackError("unregistration",j(te)),T.fsm.onUnregistrationDone(),T.connectionTracker.sendTelemetry(R.ClientEventName.Unregistration,{duration:D.duration},[])})},O.prototype.resetTokenBackoff=function(){this.tokenBackoff.reset()},O.prototype.cancelPendingRegistrationRequests=function(){this.registrarClient&&this.registrarClient.cancelPendingRequests()},O.prototype.clearSentEventTimers=function(){var T=Object.keys(this.pendingSentEventTimers);if(T.length>0){this.logger.debug("Clearing all pending downstream events related timers");for(var D=0,te=T;D<te.length;D++){var $=te[D];this.clearSentEventTimer(Number($))}}},O.prototype.restartIncallModeTimer=function(){var T=this;this.clearIncallModeTimerId(),this.logger.debug("Restarting incall mode timer"),this.incallModeTimerId=setTimeout(function(){T.logger.info("Call mode timer fired"),T.fsm.onIncallModeTimer()},this.options.incallModeTimeoutMs)},O.prototype.enterIncallMode=function(){this.logger.info("Entering incall mode"),this.timeoutOptions=this.options.incallTimeoutOptions,this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!0},O.prototype.exitIncallMode=function(){this.logger.info("Exiting incall mode"),this.clearIncallModeTimerId(),this.timeoutOptions=this.options.timeoutOptions,this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!1},O.prototype.isIncallMode=function(){return this.inIncallMode},O.prototype.sendDisconnectTelemetryEvent=function(T){var D={reason:T,serverClosed:!this.fsm.isActive()};this.connectionTracker.trackDisconnected(D),this.connectionTracker.clearConnectedInfo()},O.prototype.forceReconnectDueToNoRegistration=function(){this.fsm.forceReconnect("force reconnect due to no registration")},O.prototype.resetReconnectParamsOnErrorThreshold=function(){this.logger.warn("".concat(this.connectingErrorsInRow," connection attempts, server-side failure: erasing cached connection parameters")),this.reconnectParams=void 0},O.prototype.onSocketConnecting=function(T){this.logger.info("onSocketConnecting(".concat(T,")")),this.transportTypeName=T,this.connectionTracker.trackProgress("connecting",this.transportTypeName),this.fsm.onConnecting()},O.prototype.onSocketConnect=function(T){this.logger.info("onSocketConnect"),this.fsm.onSocketConnect(T)},O.prototype.onSocketConnectFailed=function(T){this.logger.error("onSocketConnectFailed"),this.connectionTracker.trackError("connect_failed",T,!0,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),this.fsm.onConnectingFailed()},O.prototype.onSocketDisconnect=function(T){var D=this.connectionTracker.getSessionLength()||0,te=H.DisconnectReason.fromRawReason(T);this.logger.error("onSocketDisconnect, reason: ".concat(te.reason)),te.reason==="dup"&&this.lastDisconnectReason==="dup"&&D<this.options.duplicateDisconnectThresholdMs&&(this.logger.warn("Socket was closed by server as Duplicate for the second time in a row "+"after ".concat(D," ms which is below the threshold of ")+"".concat(this.options.duplicateDisconnectThresholdMs," ms. Resetting cached ")+"connection parameters and making a new allocation."),this.reconnectParams=void 0),this.lastDisconnectReason=te.reason,this.fsm.onSocketDisconnect(te),this.connectionExpireTimestampInSecs=void 0},O.prototype.onSocketReconnect=function(){this.logger.error("onSocketReconnect"),this.fsm.onTrouterConnected()},O.prototype.onSocketReconnectFailed=function(T){this.logger.error("onSocketReconnectFailed with '".concat(T,"'")),this.fsm.onSocketDisconnect(H.DisconnectReason.fromSocketIoEventData("reconnecterror",T))},O.prototype.onSocketReconnecting=function(){this.logger.error("onSocketReconnecting")},O.prototype.onSocketError=function(T){this.logger.error("onSocketError with '".concat((0,w.toJson)(T),"'")),this.fsm.isConnecting()&&++this.connectingErrorsInRow>=this.connectingErrorsThreshold&&this.resetReconnectParamsOnErrorThreshold(),this.connectionTracker.trackError("connectSocket",W(T)),this.fsm.onSocketDisconnect(H.DisconnectReason.fromSocketIoEventData("socketerror",T))},O.prototype.onSocketMessage=function(T){var D,te=this;this.logger.debug("onSocketMessage");var $;try{$=new ke(T,this.logger);var re=(D=$.headers)===null||D===void 0?void 0:D["X-Microsoft-Skype-Chain-ID"],ve=re?" Chain-Id ".concat(re):"";this.logger.info("Received request N ".concat($.id).concat(ve," CV ").concat($.correlationVector," to '").concat($.url,"'")),$.startTS=Date.now(),$.url&&this.urlPath&&$.url.startsWith(this.urlPath)&&($.shortUrl=$.url.substring(this.urlPath.length))}catch(je){var ze=S(je);return this.logger.error("unable to parse request. Error: ".concat(ze)),this.connectionTracker.trackRequest(void 0,ze),void this.connectionTracker.sendResponseError("unable to parse request, error: ".concat(je))}$.timeoutTimerId=setTimeout(function(){if(!$.replied){te.logger.error("Request ".concat($.id," timed out"));var je=new R.ResponseData($.id);je.status=504,je.headers={"Trouter-Responder":"ClientLib"},te.sendResponse($,je),$.timedout=!0}},this.timeoutOptions.requestTimeoutMs);try{this.connectionTracker.trackRequest($),this.fsm.onDownstreamRequest($)}catch(je){this.logger.error("exception in socket.on message. Error: ".concat(S(je))),this.connectionTracker.sendResponseError(j(je),$,void 0)}},O.prototype.onTrouterConnected=function(T,D,te){var $,re,ve,ze,je=this;if((0,he.isV4ConnectEvent)(T)){var Ue=T;this.allocateResult=x(x({},Ue),{ttl:T.ttl.toString()}),this.populateAndCacheReconnectParams(Ue,Ue.reconnectUrl),this.populateConnectionStateFields(Ue)}else if(!this.allocateResult)return void this.logger.error("Invalid internal state - received onTrouterConnected while allocateResult is not set");this.connectingErrorsInRow=0,this.logger.info("onTrouterConnected: ".concat(this.allocateResult.url)),this.transportTypeName==="xhr-polling"&&D&&this.manager.onUserActivityStateAccepted(D.cv),!((ve=(re=($=this.socket)===null||$===void 0?void 0:$.socket)===null||re===void 0?void 0:re.options)===null||ve===void 0)&&ve.query&&(this.socket.socket.options.query+="&connected=true"),this.urlPath=this.allocateResult.url.replace(/https?:\/\/([A-z0-9\:\$\-\_\.\+\!\*\"\(\)\,]*)\//,"/");var Be=this.connectedUrl!==this.allocateResult.url;this.connectedUrl=this.allocateResult.url,this.connectionExpireTimestampInSecs=(0,w.calculateExpireTsInSec)((0,he.ensureNumber)(T.ttl)),this.connectionTracker.trackEnd("connectSocket"),this.connectionTracker.trackConnected(Be,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),(ze=this.setAudienceSubscriptionsUnsafeAsync(te))===null||ze===void 0||ze.catch(function(lt){return je.logger.error("Re-subscribe to audiences has failed with ".concat(lt))}),this.fsm.onTrouterConnected()},O.prototype.onTrouterReconnect=function(T){var D=T.target;this.logger.info("onTrouterReconnect target: ".concat(D)),D==="self"?this.fsm.onReconnectRequired(!0,A.ServerInitiated):this.fsm.onReconnectRequired(!1,A.ServerInitiated,T)},O.prototype.onTrouterMessageLoss=function(T){this.logger.debug("onTrouterMessageLoss"),this.fsm.onTrouterMessageLost(T.droppedIndicators)},O.prototype.onAudienceSubscriptionResult=function(T){this.logger.info("onAudienceSubscriptionResult"),this.pendingAudienceSubscription&&(clearTimeout(this.pendingAudienceSubscription.timeoutId),this.pendingAudienceSubscription.audienceSetResolve(T),this.pendingAudienceSubscription=void 0)},O.prototype.buildV4cUrlParams=function(){var T={};return T.tc=encodeURI((0,w.toJson)(this.clientInfo)),T.timeout=Math.floor(this.timeoutOptions.pingTimeoutMs/1e3),this.options.endpointId&&(T.epid=this.options.endpointId),this.appendConnectedClientIds(this.buildQuery(T),!0)},O.prototype.attachSocketIoHandlers=function(T,D,te,$){var re=this;T.on("connecting",function(ve){re.onSocketConnecting(ve)}),T.on("connect",function(){re.onSocketConnect(D)}),T.on("connect_failed",function(ve){re.onSocketConnectFailed(ve)}),T.on("close_during_connecting",function(ve){re.onSocketConnectFailed(ve)}),T.on("disconnect",function(ve){re.onSocketDisconnect(ve)}),T.on("reconnect",function(){re.onSocketReconnect()}),T.on("reconnect_failed",function(ve){re.onSocketReconnectFailed(ve)}),T.on("reconnecting",function(){re.onSocketReconnecting()}),T.on("error",function(ve){re.onSocketError(ve)}),T.on("message",function(ve){re.onSocketMessage(ve)}),T.on("trouter.connected",function(ve){re.onTrouterConnected(ve,te,$)}),T.on("trouter.reconnect",function(ve){re.onTrouterReconnect(ve)}),T.on("trouter.message_loss",function(ve){re.onTrouterMessageLoss(ve)}),T.on("audience.subscriptionresult",function(ve,ze){re.onAudienceSubscriptionResult(ze)})},O.prototype.onNavigatorOnlineStatusUpdate=function(){var T=window.navigator.onLine;this.logger.debug("Browser online status update - new state: ".concat(T,", previously: ").concat(this.isNavigatorOnline)),T&&!this.isNavigatorOnline?(this.isNavigatorOnline=!0,this.tokenBackoff.expediteIfPending(),this.connectionTracker.trackProgress("browserNet","online")):!T&&this.isNavigatorOnline&&(this.isNavigatorOnline=!1,this.connectionTracker.trackProgress("browserNet","offline"))},O.prototype.onAllocationResponse=function(T,D){this.logger.info("Received allocation response ".concat(JSON.stringify(T))),this.allocateResult=T,this.populateAndCacheReconnectParams(this.allocateResult,"".concat(this.allocateResult.socketio,"v4/a")),this.populateConnectionStateFields(this.allocateResult),this.fsm.onAllocationSucceed(D)},O.prototype.populateAndCacheReconnectParams=function(T,D){this.reconnectParams=x({serviceUrl:this.options.trouterUrl,reconnectUrl:D},T.connectparams),this.manager.onConnectionParametersUpdated(this.reconnectParams)},O.prototype.populateConnectionStateFields=function(T){var D,te,$=typeof T.ttl=="string"?parseInt(T.ttl,10):T.ttl;if(this.connectionExpireTimestampInSecs=(0,w.calculateExpireTsInSec)($),this.connectionId=(D=T.id)!==null&&D!==void 0?D:"",this.connectedClientId=T.ccid,this.logger.debug("connected client id set {connectedClientId:".concat(this.connectedClientId,"}")),this.c2cUrlBase=(te=T.curlb)!==null&&te!==void 0?te:"",this.c2cUrlBase===""){var re=T.surl.indexOf("://");re>=0&&(re=T.surl.indexOf("/",re+3))>=5&&T.surl.substr(re-5,5)===":3443"&&(this.c2cUrlBase=T.surl.substr(0,re-5))}},O.prototype.onPingResponse=function(){this.logger.debug("onPingResponse"),this.connectionTracker.increasePingResponseCount(),this.clearPingResponseTimer(),this.fsm.onPingResponse()},O.prototype.clearPingResponseTimer=function(){this.pingResponseTimerId!==void 0&&(clearTimeout(this.pingResponseTimerId),this.pingResponseTimerId=void 0)},O.prototype.buildQuery=function(T){for(var D=[],te=0,$=Object.keys(T);te<$.length;te++){var re=$[te];T[re]!==void 0&&D.push("".concat(re,"=").concat(T[re]))}return D.join("&")},O.prototype.appendConnectedClientIds=function(T,D){var te="";T.includes("ccid=")||(te="ccid=".concat(this.connectedClientId,"&")),this.domId&&(te+="dom=".concat(this.domId,"&")),te.length>0&&(te=te.slice(0,-1));var $=D||T.includes("?")?"&":"?";return this.appendCorrelationIds(T+$+te,D)},O.prototype.appendEndpointId=function(T,D){var te=D||T.includes("?")?"&":"?";return!T.includes("epid")&&this.options.endpointId?"".concat(T).concat(te,"epid=").concat(this.options.endpointId):T},O.prototype.appendCorrelationIds=function(T,D){var te=D||T.includes("?")?"&":"?";return T.includes("cor_id")?T:"".concat(T).concat(te,"cor_id=").concat(this.options.clientCorrelationID)+"&con_num=".concat(this.clientID,"_").concat(this.connectionAttempt)},O.prototype.safeString=function(T){return typeof T=="string"?T:""},O.prototype.sendResponse=function(T,D){var te,$,re;if(T.timedout)return this.logger.error("Request ".concat(T.id," already timed out")),1;if(T.replied)return this.logger.error("Response for request ".concat(T.id," already sent")),2;clearTimeout(T.timeoutTimerId),T.timeoutTimerId=void 0,T.replied=!0,D.headers=(te=D.headers)!==null&&te!==void 0?te:{};var ve=T.correlationVector;this.logger.info("Sending response N ".concat(T.id," CV ").concat(ve," with status ").concat(D.status)),ve&&(D.headers[Ae]=ve),!(($=T.headers)===null||$===void 0)&&$["trouter-request"]&&(D.headers["trouter-request"]=T.headers["trouter-request"]);var ze=Date.now()-T.startTS;if(D.headers["trouter-client"]=(0,w.toJson)({cd:ze}),!((re=T.headers)===null||re===void 0)&&re["trouter-is-broadcast"]&&(D.headers["trouter-is-broadcast"]=T.headers["trouter-is-broadcast"]),this.logger.debug("response: ".concat((0,w.toJson)(D))),!this.socket)return this.connectionTracker.sendResponseError("no socket",T,D),4;try{return this.socket.send((0,w.toJson)(D)),D.sentTS=Date.now(),T.incrementCorrelationVector(),this.connectionTracker.trackResponse(T,ze,D),this.transportTypeName==="websocket"&&this.sendPingRequest(),0}catch(Ue){var je="unable to send data on response.end. Error: ".concat(S(Ue));return this.logger.error(je),this.connectionTracker.sendResponseError(je,T,D),4}},O.prototype.sendUserActivityStateMultiple=function(T){var D=this,te=new $e("user.activity"),$=this.userActivityState.increaseCvAndGetEventObject();te.args=$,this.logger.debug("Sending user activity '".concat(this.userActivityState.toEventJSON(),"', remaining ").concat(T-1));var re=!1;this.sendDownstreamEvent(te,function(){if(re!==!0&&(D.logger.info("User activity state: ".concat($.state,", cv: ").concat($.cv," accepted")),D.manager.onUserActivityStateAccepted($.cv),D.clearSentEventTimer(te.timeoutTimerId),T>1)){var ve=setTimeout(function(){D.clearSentEventTimer(ve),D.sendUserActivityStateMultiple(T-1)},D.options.userActivitySecondResendDelayMs);D.registerSentEventTimer(ve,"user.activity/resend")}}),te.timeoutTimerId=setTimeout(function(){D.logger.error("Activity state response timeout is fired"),re=!0,D.fsm.onActivityStateResponseTimeout(),D.clearSentEventTimer(te.timeoutTimerId)},this.timeoutOptions.userActivityResponseTimeoutMs),this.registerSentEventTimer(te.timeoutTimerId,"user.activity/response")},O.prototype.sendDownstreamEvent=function(T,D){this.logger.debug("Sending downstream event ".concat(T.name)),this.socket&&this.socket.emit(T.name,T.args,D)},O.prototype.registerSentEventTimer=function(T,D){this.logger.debug("registering timer ".concat(T," -> ").concat(D)),this.pendingSentEventTimers[T]=D},O.prototype.clearSentEventTimer=function(T){var D=this.pendingSentEventTimers[T];this.logger.debug("clearing timer ".concat(T," -> ").concat(D)),delete this.pendingSentEventTimers[T],clearTimeout(T)},O.prototype.getRegistrationTtl=function(){var T,D,te=(0,w.calculateTtlInSec)(this.connectionExpireTimestampInSecs);if(this.logger.debug("Current connectionID will expire in ".concat(te," seconds")),((T=this.options.registration)===null||T===void 0?void 0:T.registrarTtlSec)&&te>0){var $=this.options.registration.registrarTtlSec<te;return[Math.min(this.options.registration.registrarTtlSec,te),$]}return!((D=this.options.registration)===null||D===void 0)&&D.registrarTtlSec?[this.options.registration.registrarTtlSec,!1]:te>0?[te,!1]:[3600,!1]},O.prototype.clearIncallModeTimerId=function(){this.incallModeTimerId!==void 0&&(this.logger.debug("Clearing in-call mode timer"),clearTimeout(this.incallModeTimerId),this.incallModeTimerId=void 0)},O.prototype.applyConnectionTrackerOptions=function(T){try{T.eventLogger&&typeof T.eventLogger.logEvent=="function"?(this.connectionTracker.mergeSettings(T.telemetrySettings),this.connectionTracker.enable(T.eventLogger)):this.logger.warn("Trouter client event logging disabled due to invalid configuration.")}catch(D){this.logger.warn("Trouter client event logging disabled. Error: ".concat(S(D))),this.connectionTracker.disable()}},O.prototype.canRetryTokenFetchRequest=function(T){var D=this.options.retryLimitOnTokenFetch;return D==null||T<D||(this.logger.warn("Reached limit on maximum number of token fetch request. Current count: ".concat(T,", retry limit: ").concat(D)),!1)},O})();U.TrouterConnection=Qe},function(q,U,Q){Object.defineProperty(U,"__esModule",{value:!0}),U.MessageHandlerRegistry=void 0;var L=Q(1),W=Q(0),S=(function(){function j(x){this.messageHandlers=[],this.logger=new W.Logger("MessageHandlers",x)}return j.prototype.register=function(x){if(this.messageHandlers.some(function(b){return b===x}))throw new Error("Registering the same handler twice is not allowed");this.messageHandlers.push(x)},j.prototype.clear=function(){this.logger.debug("Clearing message handlers"),this.messageHandlers=[]},j.prototype.active=function(){return this.messageHandlers.length>0},j.prototype.handleMessage=function(x){for(var b={resultCode:L.UNHANDLED_MESSAGE_ACK,isHandled:!1},C=0,A=this.messageHandlers;C<A.length;C++){var N=A[C],w=this.safeExecuteHandle(N,x);if(w!==void 0&&(w.isHandled===void 0||w.isHandled))return w.resultCode===void 0&&(w.resultCode=L.HANDLED_MESSAGE_ACK),w}return b},j.prototype.safeExecuteHandle=function(x,b){try{return x.handleMessage(b)}catch(C){return void this.logger.warn("Trouter message handler threw an exception: ".concat(C))}},j})();U.MessageHandlerRegistry=S},function(q,U,Q){function L(j){var x,b=this;return function(C){return W(b,void 0,void 0,function(){return S(this,function(A){return C&&(x=void 0),[2,new Promise(function(N,w){j(C).then(function(R){x=R,N(R)}).catch(function(R){x!==void 0&&x.length>0&&N(x),w(R)})})]})})}}var W=this&&this.__awaiter||function(j,x,b,C){function A(N){return N instanceof b?N:new b(function(w){w(N)})}return new(b||(b=Promise))(function(N,w){function R(K){try{H(C.next(K))}catch(V){w(V)}}function k(K){try{H(C.throw(K))}catch(V){w(V)}}function H(K){K.done?N(K.value):A(K.value).then(R,k)}H((C=C.apply(j,x||[])).next())})},S=this&&this.__generator||function(j,x){function b(H){return function(K){return C([H,K])}}function C(H){if(A)throw new TypeError("Generator is already executing.");for(;R&&(R=0,H[0]&&(k=0)),k;)try{if(A=1,N&&(w=2&H[0]?N.return:H[0]?N.throw||((w=N.return)&&w.call(N),0):N.next)&&!(w=w.call(N,H[1])).done)return w;switch(N=0,w&&(H=[2&H[0],w.value]),H[0]){case 0:case 1:w=H;break;case 4:return k.label++,{value:H[1],done:!1};case 5:k.label++,N=H[1],H=[0];continue;case 7:H=k.ops.pop(),k.trys.pop();continue;default:if(w=k.trys,!(w=w.length>0&&w[w.length-1])&&(H[0]===6||H[0]===2)){k=0;continue}if(H[0]===3&&(!w||H[1]>w[0]&&H[1]<w[3])){k.label=H[1];break}if(H[0]===6&&k.label<w[1]){k.label=w[1],w=H;break}if(w&&k.label<w[2]){k.label=w[2],k.ops.push(H);break}w[2]&&k.ops.pop(),k.trys.pop();continue}H=x.call(j,k)}catch(K){H=[6,K],N=0}finally{A=w=0}if(5&H[0])throw H[1];return{value:H[0]?H[1]:void 0,done:!0}}var A,N,w,R,k={label:0,sent:function(){if(1&w[0])throw w[1];return w[1]},trys:[],ops:[]};return R={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R};Object.defineProperty(U,"__esModule",{value:!0}),U.addCacheAsBackupTo=void 0,U.addCacheAsBackupTo=L},function(q,U,Q){var L=this&&this.__awaiter||function(V,B,se,he){function ie(P){return P instanceof se?P:new se(function(X){X(P)})}return new(se||(se=Promise))(function(P,X){function Ee(Oe){try{ke(he.next(Oe))}catch($e){X($e)}}function Ae(Oe){try{ke(he.throw(Oe))}catch($e){X($e)}}function ke(Oe){Oe.done?P(Oe.value):ie(Oe.value).then(Ee,Ae)}ke((he=he.apply(V,B||[])).next())})},W=this&&this.__generator||function(V,B){function se(ke){return function(Oe){return he([ke,Oe])}}function he(ke){if(ie)throw new TypeError("Generator is already executing.");for(;Ee&&(Ee=0,ke[0]&&(Ae=0)),Ae;)try{if(ie=1,P&&(X=2&ke[0]?P.return:ke[0]?P.throw||((X=P.return)&&X.call(P),0):P.next)&&!(X=X.call(P,ke[1])).done)return X;switch(P=0,X&&(ke=[2&ke[0],X.value]),ke[0]){case 0:case 1:X=ke;break;case 4:return Ae.label++,{value:ke[1],done:!1};case 5:Ae.label++,P=ke[1],ke=[0];continue;case 7:ke=Ae.ops.pop(),Ae.trys.pop();continue;default:if(X=Ae.trys,!(X=X.length>0&&X[X.length-1])&&(ke[0]===6||ke[0]===2)){Ae=0;continue}if(ke[0]===3&&(!X||ke[1]>X[0]&&ke[1]<X[3])){Ae.label=ke[1];break}if(ke[0]===6&&Ae.label<X[1]){Ae.label=X[1],X=ke;break}if(X&&Ae.label<X[2]){Ae.label=X[2],Ae.ops.push(ke);break}X[2]&&Ae.ops.pop(),Ae.trys.pop();continue}ke=B.call(V,Ae)}catch(Oe){ke=[6,Oe],P=0}finally{ie=X=0}if(5&ke[0])throw ke[1];return{value:ke[0]?ke[1]:void 0,done:!0}}var ie,P,X,Ee,Ae={label:0,sent:function(){if(1&X[0])throw X[1];return X[1]},trys:[],ops:[]};return Ee={next:se(0),throw:se(1),return:se(2)},typeof Symbol=="function"&&(Ee[Symbol.iterator]=function(){return this}),Ee};Object.defineProperty(U,"__esModule",{value:!0}),U.TrouterManager=U.AudienceSubscriptionState=U.UserActivityObject=void 0;var S=Q(3),j=Q(2),x=Q(4),b=Q(0),C=Q(5),A=Q(18),N=Q(7),w=Q(6),R=Q(19),k=(function(){function V(B,se){this.state=B,this.correlationVector=se!==void 0?se:S.CorrelationVector.extend()}return V.prototype.getStateString=function(){switch(this.state){case j.UserActivityState.Active:return"active";case j.UserActivityState.Inactive:return"inactive";case j.UserActivityState.Unknown:return"unknown";default:return"undefined"}},V.prototype.increaseCvAndGetEventObject=function(){return this.correlationVector.increase(),this.toEventObject()},V.prototype.toEventObject=function(){return{state:this.getStateString(),cv:this.correlationVector.value()}},V.prototype.toEventJSON=function(){return(0,S.toJson)(this.toEventObject())},V})();U.UserActivityObject=k;var H=(function(){function V(B,se){se===void 0&&(se=S.CorrelationVector.extend()),this.audienceSubscriptionModel=B,this.correlationVector=se}return V.prototype.increaseCvAndGetEventObject=function(){return this.correlationVector.increase(),this.toEventObject()},V.prototype.toEventObject=function(){return{audiences:this.audienceSubscriptionModel.audienceSubscriptions,cv:this.correlationVector.value()}},V.prototype.toEventJSON=function(){return(0,S.toJson)(this.toEventObject())},V})();U.AudienceSubscriptionState=H;var K=(function(){function V(B,se,he,ie,P,X){var Ee=this;this.logFunc=B,this.options=se,this.tokenProvider=he,this.usingLegacyTokenApi=ie,this.listener=P,this.tokenTypeProtocolSelector=function(Ae,ke){return Ee.options.forceV4aProtocol?"v4a":(0,C.usedProtocol)(Ae,ke)},this.logger=new b.Logger("Manager",B),this.logger.info("Created TrouterManager with options ".concat((0,S.toJson)(this.options))),this.fsm=new R.TrouterManagerFsm(B,this),this.baseEndpointUrl="",this.processedMessageLoss={},this.userActivityObject=new k(j.UserActivityState.Unknown),this.protocolSelector=X??this.tokenTypeProtocolSelector.bind(this)}return V.prototype.start=function(){this.fsm.start()},V.prototype.stop=function(B){this.fsm.stop(B)},V.prototype.configure=function(B){this.options=B,this.firstConnection!==void 0&&this.firstConnection.configure(B),this.secondConnection!==void 0&&this.secondConnection.configure(B),this.logger.info("Reconfigured TrouterManager with options ".concat((0,S.toJson)(this.options)))},V.prototype.checkConnection=function(B){this.firstConnection!==void 0&&this.firstConnection.checkConnection(B),this.secondConnection!==void 0&&this.secondConnection.checkConnection(B)},V.prototype.resendRegistration=function(){return L(this,void 0,void 0,function(){return W(this,function(B){return this.secondConnection!==void 0?(this.logger.info("Resending registration on the second/new connection"),[2,this.secondConnection.resendRegistration()]):this.firstConnection!==void 0?(this.logger.info("Resending registration on the first/current connection"),[2,this.firstConnection.resendRegistration()]):(this.logger.info("No connection to resend registration on, will be done upon (re)connect"),[2])})})},V.prototype.getServerState=function(){if(this.firstConnection!==void 0)return this.firstConnection.getServerState()},V.prototype.getState=function(){return this.fsm.getState()},V.prototype.isInTerminalState=function(){return this.fsm.getInternalState()===x.TrouterManagerState.TerminalError},V.prototype.reportStateInfo=function(){var B=this.firstConnection?w.State[this.firstConnection.getState()]:"Unknown",se=x.TrouterManagerState[this.fsm.getInternalState()];if(this.secondConnection){var he=w.State[this.secondConnection.getState()];return"Manager ".concat(se,"; 1st ").concat(B,"; 2nd ").concat(he)}return"Manager ".concat(se,"; Connection ").concat(B)},V.prototype.startFirstConnection=function(){var B=new N.TrouterConnection(this.logFunc,this.options,this.configuredTrouterManager(),this.tokenProvider,this.usingLegacyTokenApi,this.userActivityObject,this.protocolSelector,this.audienceSubscriptionState);this.firstConnection=B,this.getConnectionCache().then(function(se){B.start(se)}).catch(function(){})},V.prototype.startSecondConnection=function(B){var se=new N.TrouterConnection(this.logFunc,this.options,this.configuredTrouterManager(),this.tokenProvider,this.usingLegacyTokenApi,this.userActivityObject,this.protocolSelector,this.audienceSubscriptionState);this.secondConnection=se,this.firstConnection!==void 0&&this.firstConnection.disableRegistrationsAndAutoReconnect(),B?this.getConnectionCache().then(function(he){se.start(he)}).catch(function(){}):se.start()},V.prototype.stopFirstConnection=function(B){this.firstConnection!==void 0&&(this.storedFirstConnection=this.firstConnection,this.firstConnection.stop(B),this.firstConnection=void 0)},V.prototype.stopSecondConnection=function(B){this.secondConnection!==void 0&&(this.secondConnection.stop(B),this.secondConnection=void 0)},V.prototype.stopSecondConnectionDelayed=function(){if(this.secondConnection!==void 0){var B=this.secondConnection;this.secondConnection=void 0,this.logger.info("Closing an inactive connection in ".concat(Math.round(this.options.lingeringConnectionDelayMs/1e3),"s")),setTimeout(function(){B.stop(!0)},this.options.lingeringConnectionDelayMs)}},V.prototype.forceStopLingeringConnection=function(){this.storedFirstConnection&&(this.storedFirstConnection.stop(!1),this.storedFirstConnection=void 0)},V.prototype.switchConnections=function(){var B=this.firstConnection;this.firstConnection=this.secondConnection,this.secondConnection=B},V.prototype.doesSecondConnectionExist=function(){return this.secondConnection!==void 0},V.prototype.dispatchConnected=function(){if(this.firstConnection!==void 0){var B=this.firstConnection.getServerState(),se=B.url.endsWith("/")?B.url.slice(0,-1):B.url,he={baseEndpointUrl:se,newEndpointUrl:se!==this.baseEndpointUrl,c2cUrlBase:B.c2cUrlBase,clientId:B.connectedClientId,connectionId:B.connectionId,connectionTtlSec:B.getRemainingTtlInSec()};this.baseEndpointUrl=se,this.listener.onTrouterConnected(B.url,he)}},V.prototype.dispatchDisconnected=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},V.prototype.dispatchTerminalError=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},V.prototype.dispatchRegistrationState=function(B){this.options.registrationStateCallback&&this.options.registrationStateCallback(B)},V.prototype.expediteBackoffOnConnections=function(){var B;if(this.lastExpediteBackoffCallAt!==void 0&&Date.now()-this.lastExpediteBackoffCallAt<((B=this.options.expediteBackoffOnStartMinimumDelayMs)!==null&&B!==void 0?B:1e4))return void this.logger.info("Expedite backoff due to start() too frequent, skipping");this.lastExpediteBackoffCallAt=Date.now(),this.firstConnection!==void 0&&this.firstConnection.expediteBackoff(),this.secondConnection!==void 0&&this.secondConnection.expediteBackoff()},V.prototype.onDownstreamRequest=function(B,se,he){var ie={id:se.id,method:se.method,path:"/".concat(se.shortUrl),body:se.body,headers:se.headers},P={id:se.id,status:0,headers:{},body:"",send:function(){return P.status<=100||P.status>=999?3:(he.writeHead(P.status,P.headers),he.end(P.body))}};this.listener.onTrouterRequest(ie,P)},V.prototype.onConnected=function(B){this.fsm.onConnected(B===this.firstConnection)},V.prototype.onRegistered=function(B){this.fsm.onRegistered(B===this.firstConnection)},V.prototype.onUnregistered=function(B){this.fsm.onUnregistered(B===this.firstConnection||B===this.storedFirstConnection)},V.prototype.onReconnecting=function(B){this.fsm.onReconnecting(B===this.firstConnection)},V.prototype.onReconnectIsRequired=function(B,se,he){this.fsm.onReconnectionRequired(B===this.firstConnection,se,he)},V.prototype.onDisconnected=function(B){this.fsm.onDisconnected(B===this.firstConnection||B==this.storedFirstConnection),this.storedFirstConnection=void 0},V.prototype.onTerminalError=function(){this.fsm.onTerminalError(),this.storedFirstConnection=void 0},V.prototype.onUserActivityStateAccepted=function(B){this.listener.onTrouterUserActivityStateAccepted&&this.listener.onTrouterUserActivityStateAccepted(B)},V.prototype.onAudiencesSetResolved=function(B,se){var he,ie;(ie=(he=this.listener).onAudiencesSetResolved)===null||ie===void 0||ie.call(he,B,se)},V.prototype.onConnectionParametersUpdated=function(B){this.setConnectionCache(B)},V.prototype.setUserActivityState=function(B,se){return this.userActivityObject=new k(B,S.CorrelationVector.extend(se)),this.secondConnection!==void 0?(this.logger.info("Setting user activity ".concat(this.userActivityObject.toEventJSON()," on the second/new connection")),void this.secondConnection.setUserActivityState(this.userActivityObject)):this.firstConnection!==void 0?(this.logger.info("Setting user activity ".concat(this.userActivityObject.toEventJSON()," on the first/current connection")),void this.firstConnection.setUserActivityState(this.userActivityObject)):void 0},V.prototype.setAudienceSubscriptionsAsync=function(B,se,he){if(this.audienceSubscriptionState=new H(B,S.CorrelationVector.extend(he)),this.secondConnection)return this.logger.info("Setting audience subscriptions ".concat(this.audienceSubscriptionState.toEventJSON()," on second/new connection")),this.secondConnection.setAudienceSubscriptionsAsync(this.audienceSubscriptionState,se);if(this.firstConnection)return this.logger.info("Setting audience subscriptions ".concat(this.audienceSubscriptionState.toEventJSON()," on first/current connection")),this.firstConnection.setAudienceSubscriptionsAsync(this.audienceSubscriptionState,se);throw new Error("No connection found")},V.prototype.onTrouterMessageLost=function(B){var se=this;if(this.listener.onTrouterMessageLoss)if(B?.length){var he=B.filter(function(P){return se.processedMessageLoss["".concat(P.tag,"-").concat(P.etag)]!==void 0});if(he.length&&(this.logger.info("onTrouterMessageLoss - immediately acknowledging ".concat(he.length," seen dropped indicators")),this.sendProcessedDroppedIndicators(he),B=B.filter(function(P){return se.processedMessageLoss["".concat(P.tag,"-").concat(P.etag)]===void 0}),!B.length))return void this.logger.info("onTrouterMessageLoss - all declared dropped indicators have been seen before");var ie=this.listener.onTrouterMessageLoss(B.map(function(P){return P.tag}));if(!ie)return void this.logger.warn("onTrouterMessageLoss - some flow tag(s) have not been processed by listeners");B.forEach(function(P){se.processedMessageLoss["".concat(P.tag,"-").concat(P.etag)]=""}),this.sendProcessedDroppedIndicators(B)}else this.logger.warn("onTrouterMessageLoss - no flow tags have been provided")},V.prototype.getConnectionCache=function(){var B=this;return this.options.connectionCache?(this.logger.debug("Querying host's connection cache"),this.options.connectionCache.onGetTrouterConnectionCache().then(function(se){var he=se?JSON.parse(se):void 0;return typeof he=="object"?he:void 0}).catch(function(se){return B.logger.warn("Invalid connection cache content provided: ".concat(se)),B.connectionCache})):Promise.resolve(this.connectionCache)},V.prototype.setConnectionCache=function(B){if(this.connectionCache=B,this.options.connectionCache)try{this.options.connectionCache.onSetTrouterConnectionCache(JSON.stringify(B))}catch(se){this.logger.warn("Error setting external connection cache: ".concat(se))}},V.prototype.sendProcessedDroppedIndicators=function(B){return this.firstConnection!==void 0?void this.firstConnection.sendProcessedDroppedIndicators(B):this.secondConnection!==void 0?void this.secondConnection.sendProcessedDroppedIndicators(B):void 0},V.prototype.configuredTrouterManager=function(){return new A.RegistrationEnforcer(this,this.options.connectionDependsOnRegistration,this.options.delayEventsUntilRegistered)},V})();U.TrouterManager=K},function(q,U,Q){Object.defineProperty(U,"__esModule",{value:!0}),U.TrouterUrlPromise=void 0;var L=Q(0),W=(function(){function S(j){this.logger=new L.Logger("UrlPromise",j)}return S.prototype.getPromise=function(){var j=this;return this.url!==void 0?(this.logger.debug("returning previously resolved url: ".concat(this.url)),Promise.resolve(this.url)):(this.pendingPromise===void 0?(this.logger.debug("creating and returning promise"),this.pendingPromise=new Promise(function(x,b){j.pendingPromiseResolveRef=x,j.pendingPromiseRejectRef=b})):this.logger.debug("returning existing promise"),this.pendingPromise)},S.prototype.resolveUrl=function(j){this.url=j,this.logger.debug("got url: ".concat(this.url));var x=this.pendingPromiseResolveRef;this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,x!==void 0&&(this.logger.debug("resolving promise"),x(j))},S.prototype.rejectUrl=function(j){this.logger.debug("aborting");var x=this.pendingPromiseRejectRef;this.url=void 0,this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,x!==void 0&&(this.logger.debug("rejecting promise"),x(j))},S.prototype.resetUrl=function(){this.logger.debug("resetting url"),this.url=void 0},S})();U.TrouterUrlPromise=W},function(q,U,Q){(function(L,W){(function(j,x){var b=j;b.version="0.9.6",b.protocol=1,b.transports=[],b.j=[],b.sockets={},b.connect=function(C,A){var N,w,R=b.util.parseUri(C);x&&x.location&&(R.protocol=R.protocol||x.location.protocol.slice(0,-1),R.host=R.host||(x.document?x.document.domain:x.location.hostname),R.port=R.port||x.location.port),N=b.util.uniqueUri(R);var k={host:R.host,secure:R.protocol=="https",port:R.port||(R.protocol=="https"?443:80),query:R.query||""};return b.util.merge(k,A),!k["force new connection"]&&b.sockets[N]||(w=new b.Socket(k)),!k["force new connection"]&&w&&(b.sockets[N]=w),w=w||b.sockets[N],k["skipped handshake data"]?w.of(""):w.of(R.path.length>1?R.path:"")}})(W.exports,L===void 0?window:L);var S=W.exports;(function(j,x){var b=j.util={},C=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,A=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];b.parseUri=function(w){for(var R=C.exec(w||""),k={},H=14;H--;)k[A[H]]=R[H]||"";return k},b.uniqueUri=function(w){var R=w.protocol,k=w.host,H=w.port;return"document"in x?(k=k||document.domain,H=H||(R=="https"&&document.location.protocol!=="https:"?443:document.location.port)):(k=k||"localhost",H||R!="https"||(H=443)),(R||"http")+"://"+k+":"+(H||80)},b.query=function(w,R){var k=b.chunkQuery(w||""),H=[];b.merge(k,b.chunkQuery(R||""));for(var K in k)k.hasOwnProperty(K)&&H.push(K+"="+k[K]);return H.length?"?"+H.join("&"):""},b.chunkQuery=function(w){for(var R,k={},H=w.split("&"),K=0,V=H.length;K<V;++K)R=H[K].split("="),R[0]&&(k[R[0]]=R[1]);return k};var N=!1;b.load=function(w){if("document"in x&&document.readyState==="complete"||N)return w();b.on(x,"load",w,!1)},b.on=function(w,R,k,H){w.attachEvent?w.attachEvent("on"+R,k):w.addEventListener&&w.addEventListener(R,k,H)},b.request=function(w){if(w&&typeof XDomainRequest<"u")return new XDomainRequest;if(typeof XMLHttpRequest<"u"&&(!w||b.ua.hasCORS))return new XMLHttpRequest;if(!w)try{return new window[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}return null},typeof window<"u"&&b.load(function(){N=!0}),b.defer=function(w){if(!b.ua.webkit||typeof importScripts<"u")return w();b.load(function(){setTimeout(w,100)})},b.merge=function(w,R,k,H){var K,V=H||[],B=k===void 0?2:k;for(K in R)R.hasOwnProperty(K)&&b.indexOf(V,K)<0&&(typeof w[K]=="object"&&B?b.merge(w[K],R[K],B-1,V):(w[K]=R[K],V.push(R[K])));return w},b.mixin=function(w,R){b.merge(w.prototype,R.prototype)},b.inherit=function(w,R){function k(){}k.prototype=R.prototype,w.prototype=new k},b.isArray=Array.isArray||function(w){return Object.prototype.toString.call(w)==="[object Array]"},b.intersect=function(w,R){for(var k=[],H=w.length>R.length?w:R,K=w.length>R.length?R:w,V=0,B=K.length;V<B;V++)~b.indexOf(H,K[V])&&k.push(K[V]);return k},b.indexOf=function(w,R,k){for(var H=w.length,k=k<0?k+H<0?0:k+H:k||0;k<H&&w[k]!==R;k++);return H<=k?-1:k},b.toArray=function(w){for(var R=[],k=0,H=w.length;k<H;k++)R.push(w[k]);return R},b.ua={},b.ua.hasCORS=typeof XMLHttpRequest<"u"&&(function(){try{var w=new XMLHttpRequest}catch{return!1}return w.withCredentials!=null})(),b.ua.webkit=typeof navigator<"u"&&/webkit/i.test(navigator.userAgent)})(S!==void 0?S:W.exports,L===void 0?window:L),(function(j,x){function b(){}j.EventEmitter=b,b.prototype.on=function(C,A){return this.$events||(this.$events={}),this.$events[C]?x.util.isArray(this.$events[C])?this.$events[C].push(A):this.$events[C]=[this.$events[C],A]:this.$events[C]=A,this},b.prototype.addListener=b.prototype.on,b.prototype.once=function(C,A){function N(){w.removeListener(C,N),A.apply(this,arguments)}var w=this;return N.listener=A,this.on(C,N),this},b.prototype.removeListener=function(C,A){if(this.$events&&this.$events[C]){var N=this.$events[C];if(x.util.isArray(N)){for(var w=-1,R=0,k=N.length;R<k;R++)if(N[R]===A||N[R].listener&&N[R].listener===A){w=R;break}if(w<0)return this;N.splice(w,1),N.length||delete this.$events[C]}else(N===A||N.listener&&N.listener===A)&&delete this.$events[C]}return this},b.prototype.removeAllListeners=function(C){return this.$events&&this.$events[C]&&(this.$events[C]=null),this},b.prototype.listeners=function(C){return this.$events||(this.$events={}),this.$events[C]||(this.$events[C]=[]),x.util.isArray(this.$events[C])||(this.$events[C]=[this.$events[C]]),this.$events[C]},b.prototype.emit=function(C){if(!this.$events)return!1;var A=this.$events[C];if(!A)return!1;var N=Array.prototype.slice.call(arguments,1);if(typeof A=="function")A.apply(this,N);else{if(!x.util.isArray(A))return!1;for(var w=A.slice(),R=0,k=w.length;R<k;R++)w[R].apply(this,N)}return!0}})(S!==void 0?S:W.exports,S!==void 0?S:W.parent.exports),(function(j,x){if(x&&x.parse)return j.JSON={parse:x.parse,stringify:x.stringify};throw new Error("JSON not available")})(S!==void 0?S:W.exports,typeof JSON<"u"?JSON:void 0),(function(j,x){var b=j.parser={},C=b.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],A=b.reasons=["transport not supported","client not handshaken","unauthorized"],N=b.advice=["reconnect"],w=x.JSON,R=x.util.indexOf;b.encodePacket=function(H){var K=R(C,H.type),V=H.id||"",B=H.endpoint||"",se=H.ack,he=null;switch(H.type){case"error":var ie=H.reason?R(A,H.reason):"",P=H.advice?R(N,H.advice):"";ie===""&&P===""||(he=ie+(P!==""?"+"+P:""));break;case"message":H.data!==""&&(he=H.data);break;case"event":var X={name:H.name};H.args&&H.args.length&&(X.args=H.args),he=w.stringify(X);break;case"json":he=w.stringify(H.data);break;case"connect":H.qs&&(he=H.qs);break;case"ack":he=H.ackId+(H.args&&H.args.length?"+"+w.stringify(H.args):"")}var Ee=[K,V+(se=="data"?"+":""),B];return he!=null&&Ee.push(he),Ee.join(":")},b.encodePayload=function(H){var K="";if(H.length==1)return H[0];for(var V=0,B=H.length;V<B;V++)K+=""+H[V].length+""+H[V];return K};var k=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;b.decodePacket=function(B){var K=B.match(k);if(!K)return{};var V=K[2]||"",B=K[5]||"",se={type:C[K[1]],endpoint:K[4]||""};switch(V&&(se.id=V,K[3]?se.ack="data":se.ack=!0),se.type){case"error":var K=B.split("+");se.reason=A[K[0]]||"",se.advice=N[K[1]]||"";break;case"message":se.data=B||"";break;case"event":try{var he=w.parse(B);se.name=he.name,se.args=he.args}catch{}se.args=se.args||[];break;case"json":try{se.data=w.parse(B)}catch{}break;case"connect":se.qs=B||"";break;case"ack":var K=B.match(/^([0-9]+)(\+)?(.*)/);if(K&&(se.ackId=K[1],se.args=[],K[3]))try{se.args=K[3]?w.parse(K[3]):[]}catch{}break;case"disconnect":se.reason=B}return se},b.decodePayload=function(H){if(H.charAt(0)==""){for(var K=[],V=1,B="";V<H.length;V++)H.charAt(V)==""?(K.push(b.decodePacket(H.substr(V+1).substr(0,B))),V+=Number(B)+1,B=""):B+=H.charAt(V);return K}return[b.decodePacket(H)]}})(S!==void 0?S:W.exports,S!==void 0?S:W.parent.exports),(function(j,x){function b(C,A){this.socket=C,this.sessid=A,this.connectErrorCallback=void 0,this.isOpened=!1}j.Transport=b,x.util.mixin(b,x.EventEmitter),b.prototype.onData=function(C){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),C!==""){var A=x.parser.decodePayload(C);if(A&&A.length)for(var N=0,w=A.length;N<w;N++)this.onPacket(A[N])}return this},b.prototype.onPacket=function(C){return this.socket.setHeartbeatTimeout(),C.type=="heartbeat"?this.onHeartbeat():(C.type=="connect"&&C.endpoint==""&&this.onConnect(),C.type=="error"&&C.advice=="reconnect"&&(this.isOpened=!1),this.socket.onPacket(C),this)},b.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var C=this;this.closeTimeout=setTimeout(function(){C.onDisconnect()},this.socket.closeTimeout)}},b.prototype.onDisconnect=function(){return this.close&&this.isOpened&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},b.prototype.onConnect=function(){return this.socket.onConnect(),this.connectErrorCallback=void 0,this},b.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},b.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},b.prototype.packet=function(C){this.send(x.parser.encodePacket(C))},b.prototype.onHeartbeat=function(C){this.packet({type:"heartbeat"})},b.prototype.onOpen=function(){this.isOpened=!0,this.clearCloseTimeout(),this.socket.onOpen()},b.prototype.onClose=function(){this.isOpened=!1,this.socket.onClose(),this.onDisconnect()},b.prototype.prepareUrl=function(C){var A=this.socket.options;if(A["skipped handshake data"])return A.rewriteUrlForProxy(A["skipped handshake data"].websocketUrl+(C||""));var N=this.scheme()+"://"+A.host+":"+A.port+"/"+A.resource+"/"+x.protocol+"/"+this.name+"/"+this.sessid+(C||"");return A.rewriteUrlForProxy(N)},b.prototype.ready=function(C,A){A.call(this)},b.prototype.clearEventHandlers=function(){return this}})(S!==void 0?S:W.exports,S!==void 0?S:W.parent.exports),(function(j,x,b){function C(N){if(this.options={port:80,secure:!1,document:"document"in b&&document,resource:"socket.io",transports:x.transports.slice(),"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843},x.util.merge(this.options,N),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.disconnected=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||x.util.ua.hasCORS)){var w=this;x.util.on(b,"unload",function(){w.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function A(){}j.Socket=C,x.util.mixin(C,x.EventEmitter),C.prototype.of=function(N){return this.namespaces[N]||(this.namespaces[N]=new x.SocketNamespace(this,N),N!==""&&this.namespaces[N].packet({type:"connect"})),this.namespaces[N]},C.prototype.publish=function(){this.emit.apply(this,arguments);var N;for(var w in this.namespaces)this.namespaces.hasOwnProperty(w)&&(N=this.of(w),N.$emit.apply(N,arguments))},C.prototype.handshake=function(N){function w(he){he instanceof Error?R.onError(he.message):N.apply(null,he.split(":"))}var R=this,k=this.options;if(!R.disconnected){var H=k.rewriteUrlForProxy(["http"+(k.secure?"s":"")+":/",k.host+":"+k.port,k.resource,x.protocol,x.util.query(this.options.query,"t="+ +new Date)].join("/"));if(this.isXDomain()&&!x.util.ua.hasCORS){var K=document.getElementsByTagName("script")[0],V=document.createElement("script");V.src=H+"&jsonp="+x.j.length,K.parentNode.insertBefore(V,K),x.j.push(function(he){w(he),V.parentNode.removeChild(V)})}else{var B=x.util.request();B.open("GET",H,!0);var se=this.options.requestHeaders;se!==void 0&&Object.keys(se).forEach(function(he){B.setRequestHeader(he,se[he])}),B.onreadystatechange=function(){B.readyState==4&&(B.onreadystatechange=A,B.status==200?w(B.responseText):!R.reconnecting&&R.onError(B.responseText))},B.send(null)}}},C.prototype.getTransport=function(N){for(var w,R=N||this.transports,k=0;w=R[k];k++)if(x.Transport[w]&&x.Transport[w].check(this)&&(!this.isXDomain()||x.Transport[w].xdomainCheck()))return new x.Transport[w](this,this.sessionid);return null},C.prototype.connect=function(N){if(this.connecting||this.disconnected)return this;var w=this,R=function(H,K,V,B){function se(){if(!w.connected&&!w.disconnected)if(w.connecting=!1,clearTimeout(w.connectTimeoutTimer),w.options["try multiple transports"]){for(;w.remainingTransports.length>0&&w.remainingTransports.splice(0,1)[0]!=w.transport.name;);w.remainingTransports.length?he(w.remainingTransports):w.publish("connect_failed")}else w.publish("connect_failed")}function he(ie){if(w.transport&&(w.transport.clearTimeouts(),w.transport.clearEventHandlers()),w.transport=w.getTransport(ie),!w.transport||w.disconnected)return w.publish("connect_failed");w.transport.ready(w,function(){w.connecting=!0,w.publish("connecting",w.transport.name),w.transport.open(se),w.options["connect timeout"]&&(w.connectTimeoutTimer=setTimeout(function(){se()},w.options["connect timeout"]))})}w.sessionid=H,w.closeTimeout=1e3*V+2e3,w.heartbeatTimeout=1e3*K+2e3,w.transports=B?x.util.intersect(B.split(","),w.options.transports):w.options.transports,w.setHeartbeatTimeout(),w.remainingTransports=w.transports.slice(0),he(w.transports),w.once("connect",function(){clearTimeout(w.connectTimeoutTimer),N&&typeof N=="function"&&N()})};if(this.options["skipped handshake data"]){var k=this.options["skipped handshake data"];R("v4c-"+new Date().getTime(),k.timeout,k.timeout,"websocket")}else this.handshake(R);return this},C.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);var N=this;this.heartbeatTimeoutTimer=setTimeout(function(){N.transport.onClose()},this.heartbeatTimeout)},C.prototype.packet=function(N){return this.connected&&!this.doBuffer?this.transport.packet(N):this.buffer.push(N),this},C.prototype.setBuffer=function(N){this.doBuffer=N,!N&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])},C.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this.disconnected=!0,this},C.prototype.disconnectSync=function(){var N=x.util.request(),w=this.resource+"/"+x.protocol+"/"+this.sessionid;N.open("GET",w,!0),this.onDisconnect("booted")},C.prototype.isXDomain=function(){var N=b.location.port||(b.location.protocol=="https:"?443:80);return this.options.host!==b.location.hostname||this.options.port!=N},C.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},C.prototype.onOpen=function(){this.open=!0},C.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},C.prototype.onPacket=function(N){this.of(N.endpoint).onPacket(N)},C.prototype.onError=function(N){N&&N.advice&&N.advice==="reconnect"&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",N&&N.reason?N.reason:N)},C.prototype.onDisconnect=function(N){var w=this.connected,R=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(w||R)&&(this.transport.close(),this.transport.clearTimeouts(),w?(this.publish("disconnect",N),N!="booted"&&this.options.reconnect&&!this.reconnecting&&this.reconnect()):this.publish("close_during_connecting",N))},C.prototype.reconnect=function(){function N(){if(R.connected){for(var V in R.namespaces)R.namespaces.hasOwnProperty(V)&&V!==""&&R.namespaces[V].packet({type:"connect"});R.publish("reconnect",R.transport.name,R.reconnectionAttempts)}clearTimeout(R.reconnectionTimer),R.removeListener("connect_failed",w),R.removeListener("connect",w),R.reconnecting=!1,delete R.reconnectionAttempts,delete R.reconnectionDelay,delete R.reconnectionTimer,delete R.redoTransports,R.options["try multiple transports"]=H}function w(){if(R.reconnecting)return R.connected?N():R.connecting&&R.reconnecting?R.reconnectionTimer=setTimeout(w,1e3):void(R.reconnectionAttempts++>=k?R.redoTransports?(R.publish("reconnect_failed"),N()):(R.on("connect_failed",w),R.options["try multiple transports"]=!0,R.transport=R.getTransport(),R.redoTransports=!0,R.connect()):(R.reconnectionDelay<K&&(R.reconnectionDelay*=2),R.connect(),R.publish("reconnecting",R.reconnectionDelay,R.reconnectionAttempts),R.reconnectionTimer=setTimeout(w,R.reconnectionDelay)))}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var R=this,k=this.options["max reconnection attempts"],H=this.options["try multiple transports"],K=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(w,this.reconnectionDelay),this.on("connect",w)}})(S!==void 0?S:W.exports,S!==void 0?S:W.parent.exports,L===void 0?window:L),(function(j,x){function b(A,N){this.socket=A,this.name=N||"",this.flags={},this.json=new C(this,"json"),this.ackPackets=0,this.acks={}}function C(A,N){this.namespace=A,this.name=N}j.SocketNamespace=b,x.util.mixin(b,x.EventEmitter),b.prototype.$emit=x.EventEmitter.prototype.emit,b.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},b.prototype.packet=function(A){return A.endpoint=this.name,this.socket.packet(A),this.flags={},this},b.prototype.send=function(A,N){var w={type:this.flags.json?"json":"message",data:A};return typeof N=="function"&&(w.id=++this.ackPackets,w.ack=!0,this.acks[w.id]=N),this.packet(w)},b.prototype.emit=function(A){var N=Array.prototype.slice.call(arguments,1),w=N[N.length-1],R={type:"event",name:A};return typeof w=="function"&&(R.id=++this.ackPackets,R.ack="data",this.acks[R.id]=w,N=N.slice(0,N.length-1)),R.args=N,this.packet(R)},b.prototype.disconnect=function(){return this.name===""?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},b.prototype.onPacket=function(A){function N(){w.packet({type:"ack",args:x.util.toArray(arguments),ackId:A.id})}var w=this;switch(A.type){case"connect":this.$emit("connect");break;case"disconnect":this.name===""?this.socket.onDisconnect(A.reason||"booted"):this.$emit("disconnect",A.reason||"");break;case"message":case"json":var R=["message",A.data];A.ack=="data"?R.push(N):A.ack&&this.packet({type:"ack",ackId:A.id}),this.$emit.apply(this,R);break;case"event":var R=[A.name].concat(A.args);A.ack=="data"&&R.push(N),this.$emit.apply(this,R);break;case"ack":this.acks[A.ackId]&&(this.acks[A.ackId].apply(this,A.args),delete this.acks[A.ackId]);break;case"error":A.advice?this.socket.onError(A):A.reason=="unauthorized"?this.$emit("connect_failed",A.reason):this.$emit("error",A.reason)}},C.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},C.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}})(S!==void 0?S:W.exports,S!==void 0?S:W.parent.exports),(function(j,x,b){function C(N){x.Transport.apply(this,arguments)}function A(){}j.websocket=C,x.util.inherit(C,x.Transport),C.prototype.name="websocket",C.prototype.open=function(N){var w,R=x.util.query(this.socket.options.query),k=this;return this.connectErrorCallback=N,w||(w=b.MozWebSocket||b.WebSocket),this.websocket=new w(this.prepareUrl(R)),this.websocket.onopen=function(){k.onOpen(),k.socket.setBuffer(!1)},this.websocket.onmessage=function(H){k.onData(H.data)},this.websocket.onclose=function(){k.onClose(),k.socket.setBuffer(!0)},this.websocket.onerror=function(H){k.onError(H)},this},C.prototype.send=function(N){return this.websocket.send(N),this},C.prototype.payload=function(N){for(var w=0,R=N.length;w<R;w++)this.packet(N[w]);return this},C.prototype.close=function(){return this.websocket.close(),this},C.prototype.onError=function(N){this.connectErrorCallback!==void 0&&(this.connectErrorCallback(),this.connectErrorCallback=void 0),this.socket.onError(N)},C.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},C.check=function(){return"WebSocket"in b&&!("__addTask"in WebSocket)||"MozWebSocket"in b},C.xdomainCheck=function(){return!0},C.prototype.clearEventHandlers=function(){return this.websocket&&(this.websocket.onopen=this.websocket.onmessage=this.websocket.onclose=this.websocket.onerror=A),this},x.transports.push("websocket")})(S!==void 0?S.Transport:W.exports,S!==void 0?S:W.parent.exports,L===void 0?window:L),(function(j,x,b){function C(N){N&&x.Transport.apply(this,arguments)}function A(){}j.XHR=C,x.util.inherit(C,x.Transport),C.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},C.prototype.payload=function(N){for(var w=[],R=0,k=N.length;R<k;R++)w.push(x.parser.encodePacket(N[R]));this.send(x.parser.encodePayload(w))},C.prototype.send=function(N){return this.post(N),this},C.prototype.post=function(N){function w(){this.readyState==4&&(this.onreadystatechange=A,this.status==200?(clearTimeout(this.ackTimeoutTimer),k.socket.setBuffer(!1)):k.onClose())}function R(){this.onload=A,k.socket.setBuffer(!1)}var k=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),b.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=R:this.sendXHR.onreadystatechange=w,this.sendXHR.send(N),k.sendXHR.ackTimeoutTimer=setTimeout(function(){k.onClose()},k.socket.options.ackTimeoutMs)},C.prototype.close=function(){return this.onClose(),this},C.prototype.request=function(N){var w=x.util.request(this.socket.isXDomain()),R=x.util.query(this.socket.options.query,"t="+ +new Date);w.open(N||"GET",this.prepareUrl(R),!0);var k=this.socket.options.requestHeaders;if(k!==void 0&&Object.keys(k).forEach(function(H){w.setRequestHeader(H,k[H])}),N=="POST")try{w.setRequestHeader?w.setRequestHeader("Content-type","text/plain;charset=UTF-8"):w.contentType="text/plain"}catch{}return w},C.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},C.check=function(N,w){try{var R=x.util.request(w),k=b.XDomainRequest&&R instanceof XDomainRequest,H=N&&N.options&&N.options.secure?"https:":"http:",K=H!=b.location.protocol;if(R&&(!k||!K))return!0}catch{}return!1},C.xdomainCheck=function(){return C.check(null,!0)},C.prototype.clearEventHandlers=function(){return this.sendXHR&&(this.sendXHR.onreadystatechange=this.sendXHR.onload=A),this}})(S!==void 0?S.Transport:W.exports,S!==void 0?S:W.parent.exports,L===void 0?window:L),(function(j,x,b){function C(){x.Transport.XHR.apply(this,arguments)}function A(){}j["xhr-polling"]=C,x.util.inherit(C,x.Transport.XHR),x.util.merge(C,x.Transport.XHR),C.prototype.name="xhr-polling",C.prototype.open=function(N){var w=this;return w.connectErrorCallback=N,x.Transport.XHR.prototype.open.call(w),!1},C.prototype.get=function(){function N(){this.readyState==4&&(this.onreadystatechange=A,this.status==200?(k.connectErrorCallback=void 0,k.onData(this.responseText),k.get()):(k.onClose(),k.connectErrorCallback!==void 0&&(k.connectErrorCallback(),k.connectErrorCallback=void 0)))}function w(){k.connectErrorCallback=void 0,this.onload=A,this.onerror=A,k.onData(this.responseText),k.get()}function R(){k.onClose(),k.connectErrorCallback!==void 0&&(k.connectErrorCallback(),k.connectErrorCallback=void 0)}if(this.isOpened){var k=this;this.xhr=this.request(),b.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=w,this.xhr.onerror=R):this.xhr.onreadystatechange=N,this.xhr.send(null)}},C.prototype.onClose=function(){if(x.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=A;try{this.xhr.abort()}catch{}this.xhr=null}},C.prototype.ready=function(N,w){var R=this;x.util.defer(function(){w.call(R)})},C.prototype.clearEventHandlers=function(){return x.Transport.XHR.prototype.clearEventHandlers.call(this),this.xhr&&(this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=A),this},x.transports.push("xhr-polling")})(S!==void 0?S.Transport:W.exports,S!==void 0?S:W.parent.exports,L===void 0?window:L),U.io=S}).call(U,Q(13),Q(14)(q))},function(q,U){var Q;Q=(function(){return this})();try{Q=Q||Function("return this")()||(0,eval)("this")}catch{typeof window=="object"&&(Q=window)}q.exports=Q},function(q,U){q.exports=function(Q){return Q.webpackPolyfill||(Q.deprecate=function(){},Q.paths=[],Q.children||(Q.children=[]),Object.defineProperty(Q,"loaded",{enumerable:!0,get:function(){return Q.l}}),Object.defineProperty(Q,"id",{enumerable:!0,get:function(){return Q.i}}),Q.webpackPolyfill=1),Q}},function(q,U,Q){Object.defineProperty(U,"__esModule",{value:!0}),U.ConnectionTracker=U.Properties=U.TrackerStep=U.ClientEventName=U.ResponseData=void 0;var L=Q(3),W=Q(1),S=Q(0),j=(function(){function R(k){this.id=k,this.status=200,this.headers={},this.body=""}return R})();U.ResponseData=j;var x;(function(R){R.Connected="trouter_js_client_connected",R.Disconnected="trouter_js_client_disconnected",R.Error="trouter_js_client_error",R.Progress="trouter_js_client_progress",R.Response="trouter_js_client_response",R.Request="trouter_js_client_request",R.CheckConnection="trouter_js_client_check_connection",R.Registration="trouter_js_client_registration",R.Unregistration="trouter_js_client_unregistration"})(x||(U.ClientEventName=x={}));var b=(function(){function R(k,H,K,V,B){this.stepName=k,this.operation=H,this.delta=K,this.ts=V,this.error=B}return R})();U.TrackerStep=b;var C=(function(){function R(){}return R})();U.Properties=C;var A=(function(){function R(){this.numberOfPingReplies=0,this.connectedTimestamp=0,this.isNewUrl=!1,this.transportType="",this.connectionNumber=0}return R})(),N=(function(){function R(){this.enabled=!1,this.numberOfStepsToMaintain=40,this.logHealthCheckError=!1,this.sendProgressTimeoutSecs=55,this.logSendPingError=!1,this.maxBackoffInMs=12e4,this.trouter_js_client_connected=!1,this.trouter_js_client_disconnected=!1,this.trouter_js_client_error=!1,this.trouter_js_client_progress=!1,this.trouter_js_client_response=!1,this.trouter_js_client_request=!1,this.trouter_js_client_registration=!1,this.trouter_js_client_unregistration=!1,this.trouter_js_client_check_connection=!0}return R})(),w=(function(){function R(k,H,K,V,B,se,he){this.clientId=H,this.clientInfo=K,this.getServerState=V,this.endpointId=B,this.clientCorrelationID=se,this.environment=he,this.logger=new S.Logger("ConnectionTracker",k),this.clientCorrelationID=se!==void 0?se:"",this.steps=[],this.connectionAttempt=0,this.totalStepCount=0,this.beginTimestamp=new L.Timespan,this.eventLogSettings=new N,this.connectedInfo=new A}return R.prototype.enable=function(k){this.eventLogSettings.enabled=!0,this.eventLogger=k},R.prototype.disable=function(){this.eventLogSettings.enabled=!1},R.prototype.sendProgress=function(k){this.steps.length>0&&this.sendTelemetry(x.Progress,k,this.steps)},R.prototype.cancelProgressTimer=function(){this.progressTimeout!==void 0&&(clearTimeout(this.progressTimeout),this.progressTimeout=void 0)},R.prototype.resetProgressSendTimer=function(){var k=this;this.cancelProgressTimer(),this.eventLogSettings.sendProgressTimeoutSecs!==void 0&&this.eventLogSettings.sendProgressTimeoutSecs>0&&(this.progressTimeout=setTimeout(function(){k.sendProgress({reason:"timeout",timeoutSecs:k.eventLogSettings.sendProgressTimeoutSecs})},1e3*this.eventLogSettings.sendProgressTimeoutSecs))},R.prototype.setConnectedInfo=function(k,H){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=Date.now(),this.connectedInfo.isNewUrl=k,this.connectedInfo.transportType=H,++this.connectedInfo.connectionNumber},R.prototype.clearConnectedInfo=function(){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=0,this.connectedInfo.isNewUrl=!0,this.connectedInfo.transportType=""},R.prototype.copyProperties=function(k,H){for(var K=0,V=Object.keys(H);K<V.length;K++){var B=V[K];H[B]!==void 0&&(k[B.replace(/-/g,"_")]={value:H[B]})}},R.prototype.increasePingResponseCount=function(){++this.connectedInfo.numberOfPingReplies},R.prototype.sendTelemetry=function(k,H,K){try{if(this.eventLogSettings.enabled===!0&&this.eventLogSettings[k]===!0&&this.eventLogger!==void 0){var V=this.getServerState(),B={name:k,properties:{connectionAttempt:{value:this.connectionAttempt},epid:{value:this.endpointId},clientCorrelationID:{value:this.clientCorrelationID},steps:{value:(0,L.toJson)(K)},clientID:{value:this.clientId},eventVersion:{value:3},environment:{value:this.environment},cv:{value:W.CLIENT_VERSION},ua:{value:this.clientInfo.ua},connectionId:{value:V.connectionId},connectedClientId:{value:V.connectedClientId},domId:{value:V.domId},url:{value:V.unsecureUrl},surl:{value:V.url},ttlInSecs:{value:V.getRemainingTtlInSec()},numberOfPingReplies:{value:this.connectedInfo.numberOfPingReplies},connectedTimestamp:{value:this.connectedInfo.connectedTimestamp},isNewUrl:{value:this.connectedInfo.isNewUrl},transportType:{value:this.connectedInfo.transportType},connectionNumber:{value:this.connectedInfo.connectionNumber}}};this.copyProperties(B.properties,H),this.eventLogger.logEvent(B)}}catch(se){this.logger.warn("error in sending event ".concat(k,": ").concat((0,L.toJson)(se)))}},R.prototype.createStep=function(k,H,K){return new b(k,H,this.beginTimestamp.duration,Date.now(),K)},R.prototype.addStep=function(k,H,K){if(this.eventLogSettings.enabled!==!1&&(this.steps.length===0&&this.beginTimestamp.reset(),this.steps.push(this.createStep(k,H,K)),++this.totalStepCount,this.eventLogSettings.numberOfStepsToMaintain!==void 0&&this.steps.length>this.eventLogSettings.numberOfStepsToMaintain)){var V=this.steps.slice(0);this.steps.length=0,this.sendTelemetry(x.Progress,{reason:"flush"},V)}},R.prototype.trackStart=function(k){this.addStep(k,"start")},R.prototype.trackEnd=function(k){this.addStep(k,"end")},R.prototype.trackError=function(k,H,K,V){K===void 0&&(K=!0),k==="health"&&this.eventLogSettings.logHealthCheckError!==!0||k==="ping"&&this.eventLogSettings.logSendPingError===!1||(V===void 0&&(V="error"),K===!0&&this.addStep(k,V,H),this.sendTelemetry(x.Error,{},[this.createStep(k,V,H)]))},R.prototype.trackProgress=function(k,H){this.addStep(k,H)},R.prototype.trackConnected=function(k,H){this.setConnectedInfo(k,H);var K=this.steps.slice(0),V=this.totalStepCount,B=this.beginTimestamp.duration;this.steps.length=0,this.totalStepCount=0,this.sendTelemetry(x.Connected,{stepCount:K.length,totalStepCount:V,connectionEstablishmentMs_Total:B},K),this.cancelProgressTimer()},R.prototype.getSessionLength=function(){return Date.now()-this.connectedInfo.connectedTimestamp},R.prototype.trackDisconnected=function(k){k.sessionLengthMS=this.getSessionLength(),this.sendTelemetry(x.Disconnected,k,[]),this.resetProgressSendTimer()},R.prototype.trackNewConnection=function(){++this.connectionAttempt},R.prototype.trackRequest=function(k,H){var K={};H!==void 0&&(K.hasError=!0,K.error=H);try{if(k){K.requestID=k.id,K.httpMethod=k.method,K.url=k.url,K.bodyLength=k.body.length,K.shortUrl=k.shortUrl,K.requestTimeStamp=k.startTS,K.correlationVector=k.correlationVector;for(var V=k.headers,B=0,se=Object.keys(V);B<se.length;B++){var he=se[B];K[he]=V[he]}}}catch(ie){K.hasError=!0,K.error="".concat(K.error," error creating request context ").concat((0,L.toJson)(ie))}this.sendTelemetry(x.Request,K,[])},R.prototype.trackResponse=function(k,H,K,V){var B={};V!==void 0&&(B.hasError=!0,B.error=V);try{if(B.responseTimestamp=K!==void 0?K.sentTS:Date.now(),k){B.requestID=k.id,B.httpMethod=k.method,B.shortUrl=k.shortUrl,B.correlationVector=k.correlationVector;for(var se=k.headers,he=0,ie=Object.keys(se);he<ie.length;he++){var P=ie[he];B[P]=se[P]}}K&&(B.latencyMS=H,B.responseCode=K.status,B.responseLength=K.body.length)}catch(X){B.hasError=!0,B.error="".concat(B.error," error creating response context ").concat((0,L.toJson)(X))}this.sendTelemetry(x.Response,B,[])},R.prototype.sendResponseError=function(k,H,K){this.trackResponse(H,void 0,K,k)},R.prototype.close=function(){this.sendProgress({reason:"closed"}),this.steps.length=0,this.cancelProgressTimer()},R.prototype.mergeSettings=function(k){if(k){this.eventLogSettings.numberOfStepsToMaintain=Math.min(40,Math.max(10,k.numberOfStepsToMaintain!==void 0?k.numberOfStepsToMaintain:0));var H=Math.min(3600,Math.max(55,k.sendProgressTimeoutSecs!==void 0?k.sendProgressTimeoutSecs:0));this.eventLogSettings.logHealthCheckError=k.logHealthCheckError,this.eventLogSettings.logSendPingError=k.logSendPingError;for(var K=0,V=Object.keys(x).map(function(se){return x[se]});K<V.length;K++){var B=V[K];k[B]!==void 0&&(this.eventLogSettings[B]=k[B])}this.eventLogSettings.sendProgressTimeoutSecs!==H&&(this.eventLogSettings.sendProgressTimeoutSecs=H,this.resetProgressSendTimer())}},R})();U.ConnectionTracker=w},function(q,U,Q){Object.defineProperty(U,"__esModule",{value:!0}),U.DisconnectReason=void 0;var L=(function(){function W(S,j,x){this.reason=S,this.claims=j,this.details=x}return W.fromRawReason=function(S,j){if(S===""||S==="dup")return new W(S);try{var x=JSON.parse(S);return typeof x!="object"||x.reason===void 0?(j?.error("invalid disconnect reason format"),new W("unknown",void 0,S)):new W(x.reason,x.claims,x.details)}catch{return new W("disconnect",void 0,S)}},W.fromSocketIoEventData=function(S,j){return typeof j=="string"?new W(S,void 0,j):void 0},W.prototype.toTelemetryString=function(){return this.reason==="socketerror"||this.reason==="reconnecterror"||this.reason==="disconnect"?this.details:this.reason},W})();U.DisconnectReason=L},function(q,U,Q){function L(S,j,x){if(S===void 0||j===void 0)return!1;var b=Date.now()-S;return b>j*x.tolerance&&b>x.minimumWaitMs}Object.defineProperty(U,"__esModule",{value:!0}),U.ExponentialBackoff=void 0;var W=(function(){function S(j,x,b){b===void 0&&(b={tolerance:2,minimumWaitMs:1e4}),this.logger=j,this.maxBackoffInMs=x,this.gapDetectionSettings=b,this.backoffId=0,this.backoffCount=0}return S.calculateNextBackoffMs=function(j,x){var b=1+.4*(Math.random()-.5),C=1e3*Math.pow(2,j)*b;return C=Math.round(C),Math.min(x,C)},S.prototype.setMaxBackoffMs=function(j){this.maxBackoffInMs=j},S.prototype.backoff=function(j,x){var b=this;if(this.timerHandle!==void 0&&(this.logger.debug("Clearing current back off"),clearTimeout(this.timerHandle),this.timerHandle=void 0),this.previousCompleteTime!==void 0){var C=Date.now()-this.previousCompleteTime;C>this.maxBackoffInMs*this.gapDetectionSettings.tolerance&&C>this.gapDetectionSettings.minimumWaitMs&&(this.logger.info("Back off for ".concat(j," with ID ").concat(this.backoffId," will be reset due to a lot of time having passed since the previous backoff (").concat(C," ms)")),this.backoffCount=0,this.previousCompleteTime=void 0)}var A=S.calculateNextBackoffMs(this.backoffCount,this.maxBackoffInMs);this.backoffId++,this.backoffCount++,this.logger.info("Backing off ".concat(j," for ").concat(A," milliseconds with ID ").concat(this.backoffId)),this.callback=function(w,R){L(w,R,b.gapDetectionSettings)&&(b.logger.info("Back off for ".concat(j," with ID ").concat(b.backoffId," will be reset due to the wait (").concat(Date.now()-(w??0)," ms) being longer than expected (").concat(R," ms)")),b.backoffCount=0),b.logger.info("Back off for ".concat(j," with ID ").concat(b.backoffId," complete, invoking handler")),b.timerHandle=void 0,b.callback=void 0,b.previousCompleteTime=Date.now(),x()};var N=Date.now();this.timerHandle=setTimeout(function(){var w;return(w=b.callback)===null||w===void 0?void 0:w.call(b,N,A)},A)},S.prototype.reset=function(){this.timerHandle!==void 0&&(this.logger.debug("Resetting back off with ID ".concat(this.backoffId)),clearTimeout(this.timerHandle),this.timerHandle=void 0,this.callback=void 0),this.backoffCount=0},S.prototype.expediteIfPending=function(){if(this.backoffCount=0,this.timerHandle!==void 0){this.logger.debug("Expediting back off with ID ".concat(this.backoffId)),clearTimeout(this.timerHandle),this.timerHandle=void 0;var j=this.callback;this.callback=void 0,j&&j()}},S})();U.ExponentialBackoff=W},function(q,U,Q){var L=this&&this.__spreadArray||function(x,b,C){if(C||arguments.length===2)for(var A,N=0,w=b.length;N<w;N++)!A&&N in b||(A||(A=Array.prototype.slice.call(b,0,N)),A[N]=b[N]);return x.concat(A||Array.prototype.slice.call(b))};Object.defineProperty(U,"__esModule",{value:!0}),U.LoggingManagerConsumer=U.RegistrationEnforcer=void 0;var W=Q(6),S=(function(){function x(b,C,A){this.wrapped=b,this.shouldConnectionDependOnRegistration=C,this.shouldHoldBackEvents=A,this.isRegistered=!1,this.heldBackEvents=[]}return x.prototype.onDownstreamRequest=function(b,C,A){this.passIfRegisteredOrNotNeeded("onDownstreamRequest",b,C,A)},x.prototype.onConnected=function(b){this.passIfRegisteredOrNotNeeded("onConnected",b)},x.prototype.onRegistered=function(b){this.isRegistered=!0,this.wrapped.onRegistered(b),this.fireHeldBackEvents()},x.prototype.onUnregistered=function(b){this.isRegistered=!1,this.wrapped.onUnregistered(b),b.getState()===W.State.Connected&&this.shouldConnectionDependOnRegistration()&&b.forceReconnectDueToNoRegistration()},x.prototype.onReconnecting=function(b){this.wrapped.onReconnecting(b)},x.prototype.onReconnectIsRequired=function(b,C,A){this.wrapped.onReconnectIsRequired(b,C,A)},x.prototype.onDisconnected=function(b){this.isRegistered=!1,this.dropHeldBackEvents(),this.wrapped.onDisconnected(b)},x.prototype.onTerminalError=function(b){this.wrapped.onTerminalError(b)},x.prototype.onConnectionParametersUpdated=function(b){this.wrapped.onConnectionParametersUpdated(b)},x.prototype.onTrouterMessageLost=function(b){this.passIfRegisteredOrNotNeeded("onTrouterMessageLost",b)},x.prototype.onUserActivityStateAccepted=function(b){this.passIfRegisteredOrNotNeeded("onUserActivityStateAccepted",b)},x.prototype.onAudiencesSetResolved=function(b,C){this.passIfRegisteredOrNotNeeded("onAudiencesSetResolved",b,C)},x.prototype.getState=function(){return this.wrapped.getState()},x.prototype.holdBackEvent=function(b){for(var C=[],A=1;A<arguments.length;A++)C[A-1]=arguments[A];this.heldBackEvents.push({kind:b,args:C})},x.prototype.passIfRegisteredOrNotNeeded=function(b){for(var C,A=[],N=1;N<arguments.length;N++)A[N-1]=arguments[N];var w=this.shouldConnectionDependOnRegistration(),R=this.shouldHoldBackEvents();w&&R||this.fireHeldBackEvents(w?function(k){return k.kind!=="onConnected"}:void 0),this.isRegistered||!w||R===!1&&b!=="onConnected"?(C=this.wrapped)[b].apply(C,A):this.holdBackEvent.apply(this,L([b],A,!1))},x.prototype.fireHeldBackEvents=function(b){for(var C,A=0,N=this.heldBackEvents;A<N.length;A++){var w=N[A];(b===void 0||b(w))&&(C=this.wrapped)[w.kind].apply(C,w.args)}this.heldBackEvents=b===void 0?[]:this.heldBackEvents.filter(function(R){return!b(R)})},x.prototype.dropHeldBackEvents=function(){this.heldBackEvents=[]},x})();U.RegistrationEnforcer=S;var j=(function(){function x(b,C,A,N){this.wrapped=b,this.prefix=C,this.logger=A,this.onEventAction=N}return x.prototype.onEvent=function(b,C){var A;this.onEventAction!==void 0?this.onEventAction(b,C):((A=this.logger)!==null&&A!==void 0?A:console).log("".concat(this.prefix," TracingEnforcer: ").concat(b,"(").concat(C,")"))},x.prototype.onDownstreamRequest=function(b,C,A){this.onEvent("onDownstreamRequest",JSON.stringify({request:C,response:A})),this.wrapped.onDownstreamRequest(b,C,A)},x.prototype.onConnected=function(b){this.onEvent("onConnected",b.getState().toString()),this.wrapped.onConnected(b)},x.prototype.onRegistered=function(b){this.onEvent("onRegistered",b.getState().toString()),this.wrapped.onRegistered(b)},x.prototype.onUnregistered=function(b){this.onEvent("onUnregistered",b.getState().toString()),this.wrapped.onUnregistered(b)},x.prototype.onReconnecting=function(b){this.onEvent("onReconnecting",b.getState().toString()),this.wrapped.onReconnecting(b)},x.prototype.onReconnectIsRequired=function(b,C,A){this.onEvent("onReconnectIsRequired",JSON.stringify({connection:b.getState().toString(),useConnectParamsFromCache:C,reason:A})),this.wrapped.onReconnectIsRequired(b,C,A)},x.prototype.onDisconnected=function(b){this.onEvent("onDisconnected",b.getState().toString()),this.wrapped.onDisconnected(b)},x.prototype.onTerminalError=function(b){this.onEvent("onTerminalError",JSON.stringify({connection:b})),this.wrapped.onTerminalError(b)},x.prototype.onConnectionParametersUpdated=function(b){this.onEvent("onConnectionParametersUpdated",JSON.stringify({connectParams:b})),this.wrapped.onConnectionParametersUpdated(b)},x.prototype.onTrouterMessageLost=function(b){this.onEvent("onTrouterMessageLost",JSON.stringify({flowTags:b})),this.wrapped.onTrouterMessageLost(b)},x.prototype.onUserActivityStateAccepted=function(b){this.onEvent("onUserActivityStateAccepted",JSON.stringify({cv:b})),this.wrapped.onUserActivityStateAccepted(b)},x.prototype.onAudiencesSetResolved=function(b,C){this.onEvent("onAudiencesSetResolved",JSON.stringify({audienceSubscriptionsResponse:b,cv:C})),this.wrapped.onAudiencesSetResolved(b,C)},x.prototype.getState=function(){return this.wrapped.getState()},x})();U.LoggingManagerConsumer=j},function(q,U,Q){Object.defineProperty(U,"__esModule",{value:!0}),U.TrouterManagerFsm=void 0;var L=Q(2),W=Q(4),S=Q(0),j=Q(7),x=(function(){function b(C,A){this.worker=A,this.state=W.TrouterManagerState.Unknown,this.logger=new S.Logger("ManagerFsm",C)}return b.prototype.start=function(){this.state===W.TrouterManagerState.Unknown?(this.setState(W.TrouterManagerState.Disconnected),this.worker.forceStopLingeringConnection(),this.worker.startFirstConnection()):(this.logger.info("start called in state '".concat(W.TrouterManagerState[this.state],"', expediting pending backoffs, if any")),this.worker.expediteBackoffOnConnections())},b.prototype.stop=function(C){this.state!==W.TrouterManagerState.Unknown?(this.setState(W.TrouterManagerState.Unknown),this.worker.stopFirstConnection(C===!0),this.worker.stopSecondConnection(C===!0)):this.showIgnored("stop")},b.prototype.getState=function(){switch(this.state){case W.TrouterManagerState.Unknown:case W.TrouterManagerState.Connected:case W.TrouterManagerState.Disconnected:case W.TrouterManagerState.Switching:return this.state;case W.TrouterManagerState.TerminalError:return L.TrouterState.Disconnected}},b.prototype.getInternalState=function(){return this.state},b.prototype.onConnected=function(C){this.state===W.TrouterManagerState.Disconnected&&C?this.worker.doesSecondConnectionExist()?this.setState(W.TrouterManagerState.Switching):(this.setState(W.TrouterManagerState.Connected),this.worker.dispatchConnected()):this.showIgnored("onConnected(".concat(C,")"))},b.prototype.onRegistered=function(C){this.state!==W.TrouterManagerState.Disconnected||C?this.state!==W.TrouterManagerState.Switching||C?this.state===W.TrouterManagerState.Disconnected&&C&&(this.setState(W.TrouterManagerState.Connected),this.worker.dispatchConnected()):(this.setState(W.TrouterManagerState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnectionDelayed(),this.worker.dispatchConnected()):(this.setState(W.TrouterManagerState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnection(!0),this.worker.dispatchConnected()),this.worker.dispatchRegistrationState(!0)},b.prototype.onUnregistered=function(C){C&&this.worker.dispatchRegistrationState(!1)},b.prototype.onReconnecting=function(C){this.state!==W.TrouterManagerState.Connected&&this.state!==W.TrouterManagerState.Switching||!C?this.showIgnored("onReconnecting(".concat(C,")")):(this.setState(W.TrouterManagerState.Disconnected),this.worker.dispatchDisconnected())},b.prototype.onReconnectionRequired=function(C,A,N){this.state===W.TrouterManagerState.Connected&&C?(this.setState(W.TrouterManagerState.Switching),this.worker.startSecondConnection(A)):this.state===W.TrouterManagerState.Disconnected&&C?this.worker.startSecondConnection(A):this.state===W.TrouterManagerState.Switching&&C&&N===j.ReconnectReason.Configuration?(this.logger.debug("onReconnectionRequired: switch requested while already in Switching state"),this.worker.stopSecondConnection(!0),this.worker.startSecondConnection(A)):this.showIgnored("onReconnectionRequired(".concat(C,")"))},b.prototype.onDisconnected=function(C){this.state==W.TrouterManagerState.Unknown&&C?this.worker.dispatchDisconnected():this.state==W.TrouterManagerState.Switching&&C?(this.worker.switchConnections(),this.worker.stopSecondConnection(!1),this.setState(W.TrouterManagerState.Disconnected),this.worker.dispatchDisconnected()):this.showIgnored("onDisconnected(".concat(C,")"))},b.prototype.onTerminalError=function(){this.setState(W.TrouterManagerState.TerminalError),this.worker.dispatchTerminalError()},b.prototype.showIgnored=function(C){this.logger.info("Ignoring event '".concat(C,"' in state '").concat(W.TrouterManagerState[this.state],"'"))},b.prototype.setState=function(C){if(this.logger.info("Switching from state '".concat(W.TrouterManagerState[this.state],"' to state '").concat(W.TrouterManagerState[C],"'")),this.state===C)return void this.logger.error("Attempt to switch to the current state '".concat(W.TrouterManagerState[C],"'"));this.state=C},b})();U.TrouterManagerFsm=x},function(q,U,Q){function L(ie,P){if(!P)return ie;var X=A(A({},ie),{enabled:P.TelemetryEnabled});return P.ClientTelemetryEventEnabled!==void 0&&(X=A(A({},X),P.ClientTelemetryEventEnabled)),X}function W(ie,P,X){var Ee,Ae,ke,Oe,$e,Qe,O,T,D,te,$=function(re){return ie.proxyUrlRewrite?(P.info("Using rewritten URL for proxy"),ie.proxyUrlRewrite(re)):re};return{clientInfo:{ua:ie.trouterSettings.productName,v:ie.trouterSettings.version},ioOptions:{ackTimeoutMs:5e3,rewriteUrlForProxy:$},clientCorrelationID:ie.trouterSettings.sessionId,environment:ie.trouterSettings.environment,telemetrySettings:L(ie.telemetryConfig.settings,X),eventLogger:ie.telemetryConfig.eventLogger,endpointId:ie.trouterSettings.registrationId,trouterUrl:X?.TrouterConnectionUrl||ie.trouterSettings.trouterServiceUrl,registration:ie.trouterSettings.registrarServiceUrl?{registrarUrl:ie.trouterSettings.registrarServiceUrl,registrationId:(Ee=ie.trouterSettings.registrationId)!==null&&Ee!==void 0?Ee:"",pnhAppId:(Ae=ie.trouterSettings.pnhAppId)!==null&&Ae!==void 0?Ae:"",platform:(ke=ie.trouterSettings.platform)!==null&&ke!==void 0?ke:"",pnhTemplateKey:(Oe=ie.trouterSettings.pnhTemplate)!==null&&Oe!==void 0?Oe:"",platformUIVersion:($e=ie.trouterSettings.platformUIVersion)!==null&&$e!==void 0?$e:"",productContext:ie.trouterSettings.pnhProductContext||void 0,context:(Qe=ie.trouterSettings.pnhContext)!==null&&Qe!==void 0?Qe:"",registrarTtlSec:((O=ie.trouterSettings.maxRegistrationTimeInMs)!==null&&O!==void 0?O:0)/1e3}:void 0,connectionDependsOnRegistration:ie.trouterSettings.registrarServiceUrl===void 0?function(){return!1}:(T=ie.trouterSettings.connectionDependsOnRegistration)!==null&&T!==void 0?T:function(){return!1},delayEventsUntilRegistered:(D=ie.trouterSettings.delayEventsUntilRegistered)!==null&&D!==void 0?D:function(){return!1},timeoutOptions:A({connectionTimeoutMs:ie.trouterSettings.trouterConnectTimeoutInMs||3e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:ie.trouterSettings.productName==="TeamsCDL"?3e5:3e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},ie.trouterSettings.timeoutOptions),incallTimeoutOptions:A({connectionTimeoutMs:1e4,fetchTimeoutMs:5e3,pingTimeoutMs:5e3,pongTimeoutMs:2e3,maxBackoffMs:ie.trouterSettings.productName==="TeamsCDL"?3e5:1e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},ie.trouterSettings.incallTimeoutOptions),incallModeTimeoutMs:(te=ie.trouterSettings.incallModeTimeoutMs)!==null&&te!==void 0?te:0,lingeringConnectionDelayMs:6e4,userActivitySecondResendDelayMs:ie.trouterSettings.userActivitySecondResendDelayMs||1e4,duplicateDisconnectThresholdMs:1e4,connectionCache:ie.connectionCache,registrationStateCallback:ie.registrationStateCallbackForAcsDoNotUse,rewriteUrlForProxy:$,retryLimitOnTokenFetch:ie.trouterSettings.retryLimitOnTokenFetch,extraConnectionHeaders:ie.trouterSettings.extraConnectionHeaders,expediteBackoffOnStartMinimumDelayMs:1e4,toJSON:function(){return A(A({},this),{connectionCache:this.connectionCache?{}:this.connectionCache})}}}function S(ie){return new he(ie)}function j(){return R.CLIENT_VERSION}function x(ie,P){var X=ie.indexOf("://");if(X>=0){var Ee=ie.indexOf("/",X+3);if(Ee>=0)return P+ie.substr(Ee)}return""}function b(ie){var P=this;return function(X){return N(P,void 0,void 0,function(){var Ee;return w(this,function(Ae){switch(Ae.label){case 0:return Ee={},[4,ie(X.needFresh)];case 1:return[2,(Ee.token=Ae.sent(),Ee.tokenType="skype",Ee)]}})})}}function C(ie,P){var X,Ee=this;return function(Ae){return N(Ee,void 0,void 0,function(){var ke,Oe,$e;return w(this,function(Qe){switch(Qe.label){case 0:ke=new Date,Oe=setInterval(function(){var O=Math.round((Date.now()-ke.getTime())/6e4);ie.warn("Note: Trouter auth token request promise from ".concat(ke.toISOString()," has not been resolved for ").concat(O," minutes. The client is blocked from operating properly"))},3e5),Qe.label=1;case 1:return Qe.trys.push([1,,3,4]),[4,P(Ae)];case 2:return $e=Qe.sent(),Ae.needFresh&&$e.token===X&&ie.error("API violation: Trouter auth token provider got a request with needRefresh=true, but returned the same token as last time anyway. Please fix the host app"),X=$e.token,[2,$e];case 3:return clearInterval(Oe),[7];case 4:return[2]}})})}}var A=this&&this.__assign||function(){return A=Object.assign||function(ie){for(var P,X=1,Ee=arguments.length;X<Ee;X++){P=arguments[X];for(var Ae in P)Object.prototype.hasOwnProperty.call(P,Ae)&&(ie[Ae]=P[Ae])}return ie},A.apply(this,arguments)},N=this&&this.__awaiter||function(ie,P,X,Ee){function Ae(ke){return ke instanceof X?ke:new X(function(Oe){Oe(ke)})}return new(X||(X=Promise))(function(ke,Oe){function $e(T){try{O(Ee.next(T))}catch(D){Oe(D)}}function Qe(T){try{O(Ee.throw(T))}catch(D){Oe(D)}}function O(T){T.done?ke(T.value):Ae(T.value).then($e,Qe)}O((Ee=Ee.apply(ie,P||[])).next())})},w=this&&this.__generator||function(ie,P){function X(O){return function(T){return Ee([O,T])}}function Ee(O){if(Ae)throw new TypeError("Generator is already executing.");for(;$e&&($e=0,O[0]&&(Qe=0)),Qe;)try{if(Ae=1,ke&&(Oe=2&O[0]?ke.return:O[0]?ke.throw||((Oe=ke.return)&&Oe.call(ke),0):ke.next)&&!(Oe=Oe.call(ke,O[1])).done)return Oe;switch(ke=0,Oe&&(O=[2&O[0],Oe.value]),O[0]){case 0:case 1:Oe=O;break;case 4:return Qe.label++,{value:O[1],done:!1};case 5:Qe.label++,ke=O[1],O=[0];continue;case 7:O=Qe.ops.pop(),Qe.trys.pop();continue;default:if(Oe=Qe.trys,!(Oe=Oe.length>0&&Oe[Oe.length-1])&&(O[0]===6||O[0]===2)){Qe=0;continue}if(O[0]===3&&(!Oe||O[1]>Oe[0]&&O[1]<Oe[3])){Qe.label=O[1];break}if(O[0]===6&&Qe.label<Oe[1]){Qe.label=Oe[1],Oe=O;break}if(Oe&&Qe.label<Oe[2]){Qe.label=Oe[2],Qe.ops.push(O);break}Oe[2]&&Qe.ops.pop(),Qe.trys.pop();continue}O=P.call(ie,Qe)}catch(T){O=[6,T],ke=0}finally{Ae=Oe=0}if(5&O[0])throw O[1];return{value:O[0]?O[1]:void 0,done:!0}}var Ae,ke,Oe,$e,Qe={label:0,sent:function(){if(1&Oe[0])throw Oe[1];return Oe[1]},trys:[],ops:[]};return $e={next:X(0),throw:X(1),return:X(2)},typeof Symbol=="function"&&($e[Symbol.iterator]=function(){return this}),$e};Object.defineProperty(U,"__esModule",{value:!0}),U.replaceTrouterUrlBase=U.getTrouterServiceVersion=U.createTrouterService=U.TrouterService=U.UserActivityState=U.TrouterState=void 0;var R=Q(1),k=Q(2);Object.defineProperty(U,"TrouterState",{enumerable:!0,get:function(){return k.TrouterState}}),Object.defineProperty(U,"UserActivityState",{enumerable:!0,get:function(){return k.UserActivityState}});var H=Q(0),K=Q(8),V=Q(9),B=Q(10),se=Q(11),he=(function(){function ie(P){this.logProvider=P,this.stateChangedListeners=[],this.logger=new H.Logger("Trouter",P),this.trouterUrlPromise=new se.TrouterUrlPromise(P),this.messageHandlers=new K.MessageHandlerRegistry(P),this.listeners={},this.connectionInfo=null,this.logger.info("Created TrouterService version ".concat(R.CLIENT_VERSION))}return ie.prototype.start=function(P){var X;if(this.logger.info("Start"),!P.skypeTokenProvider&&!P.authTokenProvider)throw new Error("no token provider has been configured, either skypeTokenProvider or authTokenProvider must be populated");P.skypeTokenProvider&&!P.trouterSettings.disableInternalSkypeTokenCache&&(P.skypeTokenProvider=(0,V.addCacheAsBackupTo)(P.skypeTokenProvider)),this.trouterCfg=P;var Ee=W(P,this.logger,this.ecsCfg);P.internalEnableV4cProtocol===!1&&(Ee.forceV4aProtocol=!0);var Ae=C(this.logger,(X=P.authTokenProvider)!==null&&X!==void 0?X:b(P.skypeTokenProvider));this.trouterServer===void 0&&(this.trouterServer=new B.TrouterManager(this.logProvider,Ee,Ae,P.authTokenProvider===void 0,this)),this.pendingActivityState!==void 0&&(this.trouterServer.setUserActivityState(this.pendingActivityState[0],this.pendingActivityState[1]),this.pendingActivityState=void 0),this.trouterServer.start()},ie.prototype.stop=function(P){this.logger.info("close connection"),this.trouterUrlPromise.rejectUrl(new Error("TrouterService is stopped")),this.trouterServer!==void 0&&this.trouterServer.stop(P)},ie.prototype.setEcsConfig=function(P){return N(this,void 0,void 0,function(){var X=this;return w(this,function(Ee){return[2,new Promise(function(Ae){if(X.ecsCfg=P.TrouterJScriptClient,X.logger.info("Setting ECS configuration to ".concat(JSON.stringify(X.ecsCfg))),X.trouterServer!==void 0&&X.trouterCfg!==void 0){var ke=W(X.trouterCfg,X.logger,X.ecsCfg);X.trouterServer.configure(ke)}Ae()})]})})},ie.prototype.checkConnection=function(P){this.trouterServer!==void 0&&this.trouterServer.checkConnection(P!=null&&P)},ie.prototype.resendRegistration=function(){return N(this,void 0,void 0,function(){return w(this,function(P){if(!this.trouterServer)throw new Error("resendRegistration called too early");return[2,this.trouterServer.resendRegistration()]})})},ie.prototype.registerListener=function(P,X){return X===""||!X.startsWith("/")||X.includes("?")||X.includes("#")?(this.logger.error("Listener path '".concat(X,"' is not valid")),!1):this.listeners[X]?(this.logger.error("Another listener is already registered for path '".concat(X,"'")),!1):(this.listeners[X]=P,this.logger.debug("Listener for path '".concat(X,"' registered")),this.connectionInfo&&P.onTrouterConnected(this.connectionInfo.baseEndpointUrl+X,this.connectionInfo),!0)},ie.prototype.unregisterListener=function(P){for(var X=[],Ee=0,Ae=Object.keys(this.listeners);Ee<Ae.length;Ee++){var ke=Ae[Ee];this.listeners[ke]===P&&X.push(ke)}if(X.length===0)return!1;for(var Oe=0,$e=X;Oe<$e.length;Oe++){var ke=$e[Oe];delete this.listeners[ke]}return this.logger.debug("Listener for path(s) '".concat(X.join("', '"),"' unregistered")),!0},ie.prototype.onTrouterConnected=function(P,X){this.logger.debug("Trouter is now connected");for(var Ee=0,Ae=Object.keys(this.listeners);Ee<Ae.length;Ee++){var ke=Ae[Ee];try{this.listeners[ke].onTrouterConnected(X.baseEndpointUrl+ke,X)}catch(Oe){this.logger.error("Listener '".concat(ke,"' threw an exception from onTrouterConnected(): ").concat(Oe))}}this.connectionInfo=X,this.trouterUrlPromise.resolveUrl(P),this.notifyStateChanged(k.TrouterState.Connected,{url:P,getRemainingTtlInSec:function(){return X.connectionTtlSec}})},ie.prototype.onTrouterDisconnected=function(){this.logger.debug("Trouter is now disconnected"),this.connectionInfo=null;for(var P=0,X=Object.keys(this.listeners);P<X.length;P++){var Ee=X[P],Ae=this.listeners[Ee];if(Ae.onTrouterDisconnected)try{Ae.onTrouterDisconnected()}catch(ke){this.logger.error("Listener '".concat(Ee,"' threw an exception from onTrouterDisconnected(): ").concat(ke))}}this.notifyStateChanged(k.TrouterState.Disconnected)},ie.prototype.onTrouterRequest=function(P,X){for(var Ee="",Ae=0,ke=Object.keys(this.listeners);Ae<ke.length;Ae++){var Oe=ke[Ae];P.path.startsWith(Oe)&&Oe.length>Ee.length&&(Ee=Oe)}if(Ee==="")this.tryMessageHandlers(P,X)||(X.status=404,X.headers={"Trouter-Responder":"ClientLib"},X.send());else try{this.listeners[Ee].onTrouterRequest(P,X)}catch($e){this.logger.error("Listener '".concat(Ee,"' threw an exception from onTrouterRequest(): ").concat($e)),X.status=500,X.headers={"Trouter-Responder":"ClientLib"},X.send()}},ie.prototype.onTrouterMessageLoss=function(P){this.logger.info("onTrouterMessageLoss called with tags [".concat(P,"]"));for(var X=!0,Ee=0,Ae=Object.keys(this.listeners);Ee<Ae.length;Ee++){var ke=Ae[Ee],Oe=this.listeners[ke];if(Oe.onTrouterMessageLoss)try{X=Oe.onTrouterMessageLoss(P)&&X,X===void 0&&(this.logger.error("Listener '".concat(ke,"' did not return a boolean value from onTrouterMessageLoss()")),X=!1)}catch($e){this.logger.error("Listener '".concat(ke,"' threw an exception from onTrouterMessageLoss(): ").concat($e)),X=!1}}return X},ie.prototype.onTrouterUserActivityStateAccepted=function(P){this.logger.debug("onTrouterUserActivityStateAccepted cv: ".concat(P));for(var X=0,Ee=Object.keys(this.listeners);X<Ee.length;X++){var Ae=Ee[X],ke=this.listeners[Ae];if(ke.onTrouterUserActivityStateAccepted)try{ke.onTrouterUserActivityStateAccepted(P)}catch(Oe){this.logger.error("Listener '".concat(Ae,"' threw an exception from onTrouterUserActivityStateAccepted(): ").concat(Oe))}}},ie.prototype.onAudiencesSetResolved=function(P,X){this.logger.debug("onAudiencesSetResolved cv: ".concat(X));for(var Ee=0,Ae=Object.keys(this.listeners);Ee<Ae.length;Ee++){var ke=Ae[Ee],Oe=this.listeners[ke];if(Oe.onAudiencesSetResolved)try{Oe.onAudiencesSetResolved(P,X)}catch($e){this.logger.error("Listener '".concat(ke,"' threw an exception from onAudienceSubscribed(): ").concat($e))}}},ie.prototype.setUserActivityState=function(P,X){if(P!==k.UserActivityState.Active&&P!==k.UserActivityState.Inactive)throw new Error("setUserActivityState called with unsupported value ".concat(P));this.logger.info("setUserActivityState called with value ".concat(k.UserActivityState[P])),this.trouterServer&&this.state()!==k.TrouterState.Unknown?this.trouterServer.setUserActivityState(P,X):(this.pendingActivityState=[P,X],this.logger.warn("setUserActivityState called before start() or after stop()"))},ie.prototype.setAudienceSubscriptions=function(P,X){if(P.audienceSubscriptions.length>1)throw new Error("Only singular audience subscription is supported");if(this.trouterServer&&this.state()!==k.TrouterState.Unknown)return this.trouterServer.setAudienceSubscriptionsAsync(P,15e3,X);throw new Error("audience subscribe called before start() or after stop()")},ie.prototype.state=function(){return this.trouterServer!==void 0?this.trouterServer.getState():k.TrouterState.Unknown},ie.prototype.isInTerminalState=function(){return this.trouterServer!==void 0&&this.trouterServer.isInTerminalState()},ie.prototype.reportStateInfo=function(){return this.trouterServer===void 0?"":this.trouterServer.reportStateInfo()},ie.prototype.getServerState=function(){if(this.trouterServer!==void 0)return this.trouterServer.getServerState()},ie.prototype.getTrouterUrlAsync=function(){return this.trouterServer!==void 0?this.trouterUrlPromise.getPromise():Promise.reject(new Error("TrouterService has not been started"))},ie.prototype.onStateChanged=function(P){if(this.logger.info("onStateChanged called"),P===void 0)this.stateChangedListeners=this.stateChangedListeners.filter(function(Ee){return Ee.wrappedCallback===void 0});else{this.offStateChanged(P);var X=function(Ee,Ae){P(Ee,Ae?Ae.url:"")};X.wrappedCallback=P,this.stateChangedListeners.push(X)}},ie.prototype.offStateChanged=function(P){this.logger.info("offStateChanged called");var X=this.stateChangedListeners.length;return this.stateChangedListeners=this.stateChangedListeners.filter(function(Ee){return Ee.wrappedCallback!==P}),X>this.stateChangedListeners.length},ie.prototype.addCallback=function(P){this.logger.info("addListener called"),this.stateChangedListeners.indexOf(P,0)===-1&&P!==void 0&&this.stateChangedListeners.push(P)},ie.prototype.removeCallback=function(P){this.logger.info("removeListener called");var X=this.stateChangedListeners.indexOf(P,0);return X>-1&&(this.stateChangedListeners.splice(X,1),!0)},ie.prototype.registerMessageHandler=function(P){this.logger.info("registerMessageHandler is called"),this.messageHandlers.register(P)},ie.prototype.clearMessageHandlers=function(){this.logger.info("clearMessageHandlers is called"),this.messageHandlers.clear()},ie.prototype.notifyStateChanged=function(P,X){var Ee=this;this.logger.info("notifyStateChanged called, will forward to ".concat(this.stateChangedListeners.length," listeners")),this.stateChangedListeners.forEach(function(Ae){try{Ae(P,X)}catch(ke){Ee.logger.error("Error in callback ".concat(ke))}})},ie.prototype.tryMessageHandlers=function(P,X){if(!this.messageHandlers.active())return!1;var Ee,Ae=null;try{Ee=JSON.parse(P.body),Ae=Ee&&(Ee.evt||Ee.eventId)||null}catch{}var ke={eventId:Ae,url:(this.connectionInfo?this.connectionInfo.baseEndpointUrl:"")+P.path,body:Ee,rawBody:P.body,headers:P.headers},Oe=this.messageHandlers.handleMessage(ke);return!!Oe.isHandled&&(X.status=Oe.resultCode,Oe.responseHeaders&&(X.headers=Oe.responseHeaders),Oe.responseBody&&(X.body=Oe.responseBody),X.send(),!0)},ie})();U.TrouterService=he,U.createTrouterService=S,U.getTrouterServiceVersion=j,U.replaceTrouterUrlBase=x},function(q,U){q.exports=De}])})});E(M);var ee=I(function(Ne,Se){Object.defineProperty(Se,"__esModule",{value:!0}),Se.DeleteReason=void 0;var De;(function(q){q.DeletedByPolicy="deletedByPolicy",q.DeletedByUser="deletedByUser"})(De||(Se.DeleteReason=De={}))});E(ee),ee.DeleteReason;var J=I(function(Ne,Se){Object.defineProperty(Se,"__esModule",{value:!0}),Se.PACKAGE_VERSION=Se.CONFIG_API_VERSION=Se.EudbCountries=Se.CloudPrefix=Se.CloudType=Se.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES=void 0,Se.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES=3;var De;(function(U){U.Public="Public",U.GccHigh="GCC High",U.Dod="DoD"})(De||(Se.CloudType=De={}));var q;(function(U){U.OrgId="orgid",U.Acs="acs",U.Spool="spool",U.GccHigh="gcch",U.GccHighAcs="gcch-acs",U.Dod="dod",U.DodAcs="dod-acs"})(q||(Se.CloudPrefix=q={})),Se.EudbCountries=["europe","france","germany","norway","switzerland","sweden"],Se.CONFIG_API_VERSION="2024-09-01",Se.PACKAGE_VERSION="1.0.0-beta.34"});E(J),J.PACKAGE_VERSION,J.CONFIG_API_VERSION,J.EudbCountries,J.CloudPrefix,J.CloudType,J.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES;var de=ee,ue=J,pe=I(function(Ne,Se){var De=y&&y.__awaiter||function(O,T,D,te){function $(re){return re instanceof D?re:new D(function(ve){ve(re)})}return new(D||(D=Promise))(function(re,ve){function ze(Be){try{Ue(te.next(Be))}catch(lt){ve(lt)}}function je(Be){try{Ue(te.throw(Be))}catch(lt){ve(lt)}}function Ue(Be){Be.done?re(Be.value):$(Be.value).then(ze,je)}Ue((te=te.apply(O,T||[])).next())})};Object.defineProperty(Se,"__esModule",{value:!0}),Se.isEudbLocation=Se.parseTokenCredential=Se.base64decode=Se.toTelemetrySender=Se.toLogProvider=Se.toMessageHandler=void 0,Se.generateUuid=Oe;const q=new Map([["chatMessageReceived",200],["typingIndicatorReceived",245],["readReceiptReceived",246],["chatMessageEdited",247],["chatMessageDeleted",248],["chatThreadCreated",257],["chatThreadPropertiesUpdated",258],["chatThreadDeleted",259],["participantsAdded",260],["participantsRemoved",261]]),U="8:orgid:",Q="8:dod:",L="8:gcch:",W="8:teamsvisitor:",S="4:",j="8:acs:",x="8:gcch-acs:",b="8:dod-acs:",C="8:spool:",A=(O,T,D,te)=>{const $=q.get(O);return{handleMessage(re){let ve=null;if(re?.rawBody&&(ve=JSON.parse(re.rawBody)),ve===null||ve.eventId!==$)return;const ze=R(O,ve,D,te);if(ze!==null)return T(ze),{isHandled:!0,resultCode:200}}}};Se.toMessageHandler=A;function N(O,T,D){return{threadId:O.groupId,sender:se(O.senderId),senderDisplayName:O.senderDisplayName,recipient:se(O.recipientMri),id:O.messageId,createdOn:new Date(O.originalArrivalTime),version:O.version,type:O.messageType,message:O.messageBody,metadata:he(O.acsChatMessageMetadata)||{},attachments:X(he(O.attachments)||[],T,D)}}function w(O,T,D){return Object.assign(Object.assign({},N(O,T,D)),{editedOn:new Date(O.edittime)})}const R=(O,T,D,te)=>{if(O==="chatMessageReceived")return N(T,D,te);if(O==="chatMessageEdited")return w(T,D,te);if(O==="chatMessageDeleted"){const $=T;return{threadId:$.groupId,sender:se($.senderId),senderDisplayName:$.senderDisplayName,recipient:se($.recipientMri),id:$.messageId,createdOn:new Date($.originalArrivalTime),version:$.version,deletedOn:new Date($.deletetime),type:$.messageType}}if(O==="typingIndicatorReceived"){const $=T;return{threadId:$.groupId,sender:se($.senderId),senderDisplayName:$.senderDisplayName,recipient:se($.recipientMri),version:$.version,receivedOn:new Date($.originalArrivalTime)}}if(O==="readReceiptReceived"){const $=T,ve=JSON.parse($.messageBody).consumptionhorizon.split(";");return{threadId:$.groupId,sender:se($.senderId),senderDisplayName:"",recipient:se($.recipientMri),chatMessageId:$.messageId,readOn:new Date(+ve[1])}}if(O==="chatThreadCreated"){const $=T,re=JSON.parse(unescape($.createdBy)),ve=JSON.parse(unescape($.members)),ze=k(re),je=ve.map(Be=>k(Be));return{threadId:$.threadId,createdOn:new Date($.createTime),createdBy:ze,version:$.version,participants:je,properties:H(JSON.parse(unescape($.properties))),retentionPolicy:K(JSON.parse(unescape($.properties)))}}if(O==="chatThreadPropertiesUpdated"){const $=T,re=JSON.parse(unescape($.editedBy)),ve=k(re);return{threadId:$.threadId,updatedOn:new Date($.editTime),updatedBy:ve,version:$.version,properties:H(JSON.parse(unescape($.properties))),retentionPolicy:K(JSON.parse(unescape($.properties)))}}if(O==="chatThreadDeleted"){const $=T,re=T.reason==de.DeleteReason.DeletedByPolicy?null:k(JSON.parse(unescape($.deletedBy)));return{threadId:$.threadId,deletedOn:new Date($.deleteTime),deletedBy:re,version:$.version,reason:$.reason}}if(O==="participantsAdded"){const $=T,re=JSON.parse(unescape($.addedBy)),ve=JSON.parse(unescape($.participantsAdded)),ze=k(re),je=ve.map(Be=>k(Be));return{threadId:$.threadId,addedOn:new Date($.time),addedBy:ze,version:$.version,participantsAdded:je}}if(O==="participantsRemoved"){const $=T,re=JSON.parse(unescape($.removedBy)),ve=JSON.parse(unescape($.participantsRemoved)),ze=k(re),je=ve.map(Be=>k(Be));return{threadId:$.threadId,removedOn:new Date($.time),removedBy:ze,version:$.version,participantsRemoved:je}}return null},k=O=>{var T;const D={id:se(O.participantId),displayName:O.displayName,metadata:he((T=O.memberMetaData)!==null&&T!==void 0?T:"")||{}};return O.shareHistoryTime&&(D.shareHistoryTime=new Date(O.shareHistoryTime)),D},H=O=>{var T;return{topic:O.topic,metadata:he((T=O.acsChatThreadMetadata)!==null&&T!==void 0?T:"")||{}}},K=O=>{const T=O.retentionPolicy;if(!T)return{kind:"none"};let D;try{D=JSON.parse(T)}catch{return{kind:"none"}}if(D.retentionPolicyType==="DeleteAfterCreationTime"&&typeof D.executeAfter=="string"){const te=D.executeAfter.trim().replace(/^[+-]/,""),$=te.includes(".")?te.split(".")[0]:"0",re=parseInt($,10);return{kind:"threadCreationDate",deleteThreadAfterDays:isNaN(re)?0:re}}return{kind:"none"}},V=O=>({log:(...T)=>O.info(T),warn:(...T)=>O.warning(T),error:(...T)=>O.error(T),debug:(...T)=>O.verbose(T),info:(...T)=>O.verbose(T)});Se.toLogProvider=V;const B=O=>({logEvent:T=>O.info(T)});Se.toTelemetrySender=B;const se=O=>O.startsWith(U)?{kind:"microsoftTeamsUser",rawId:O,microsoftTeamsUserId:O.substring(U.length),isAnonymous:!1,cloud:"public"}:O.startsWith(Q)?{kind:"microsoftTeamsUser",rawId:O,microsoftTeamsUserId:O.substring(Q.length),isAnonymous:!1,cloud:"dod"}:O.startsWith(L)?{kind:"microsoftTeamsUser",rawId:O,microsoftTeamsUserId:O.substring(L.length),isAnonymous:!1,cloud:"gcch"}:O.startsWith(W)?{kind:"microsoftTeamsUser",rawId:O,microsoftTeamsUserId:O.substring(W.length),isAnonymous:!0}:O.startsWith(S)?{kind:"phoneNumber",rawId:O,phoneNumber:O.substring(S.length)}:O.startsWith(j)||O.startsWith(x)||O.startsWith(b)||O.startsWith(C)?{kind:"communicationUser",communicationUserId:O}:{kind:"unknown",id:O},he=O=>{if(!(O==null||O===""||O==="null"||O==="{}"||O==="[]"))return JSON.parse(O)},ie=(O,T,D)=>{let te;try{te=new URL(O),(te.protocol==="http:"||te.protocol==="https:")&&(te=new URL(te.pathname,T))}catch{try{te=new URL(O,T)}catch{return O}}return te.searchParams.set("api-version",D),te.toString()},P=O=>{let T;try{T=new URL(O)}catch{return!1}return T.protocol==="http:"||T.protocol==="https:"},X=(O,T,D)=>(T==null||T===""||!P(T)||O.filter(te=>te.attachmentType.toLowerCase()==="image".toLowerCase()).map(te=>{te.previewUrl&&(te.previewUrl=ie(te.previewUrl,T,D)),te.url&&(te.url=ie(te.url,T,D))}),O),Ee=O=>p.default.isNodeLike?Buffer.from(O,"base64").toString():atob(O);Se.base64decode=Ee;const Ae=O=>{let[,T]=O?.split(".");if(T===void 0)throw new Error("Invalid token");return T=T.replace(/-/g,"+").replace(/_/g,"/"),JSON.parse(decodeURIComponent(escape((0,Se.base64decode)(T))))},ke=O=>De(void 0,void 0,void 0,function*(){const T=yield O.getToken(),D=T?.token,te=Ae(D),$=te.skypeid,re=te.resourceId,ve=Qe($),ze=te.resourceLocation||"";return{jwtToken:D,acsResourceId:re,identityMri:$,cloudType:ve,resourceLocation:ze}});Se.parseTokenCredential=ke;function Oe(){return(0,d.default.v4)()}const $e=O=>!!O&&!!ue.EudbCountries.find(T=>T===O);Se.isEudbLocation=$e;function Qe(O){switch(O.substring(0,O.indexOf(":"))){case ue.CloudPrefix.OrgId:case ue.CloudPrefix.Acs:case ue.CloudPrefix.Spool:return ue.CloudType.Public;case ue.CloudPrefix.GccHigh:case ue.CloudPrefix.GccHighAcs:return ue.CloudType.GccHigh;case ue.CloudPrefix.Dod:case ue.CloudPrefix.DodAcs:return ue.CloudType.Dod;default:return ue.CloudType.Public}}});E(pe),pe.isEudbLocation,pe.parseTokenCredential,pe.base64decode,pe.toTelemetrySender,pe.toLogProvider,pe.toMessageHandler,pe.generateUuid;var F=I(function(Ne,Se){var De=y&&y.__createBinding||(Object.create?(function(j,x,b,C){C===void 0&&(C=b);var A=Object.getOwnPropertyDescriptor(x,b);(!A||("get"in A?!x.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return x[b]}}),Object.defineProperty(j,C,A)}):(function(j,x,b,C){C===void 0&&(C=b),j[C]=x[b]})),q=y&&y.__setModuleDefault||(Object.create?(function(j,x){Object.defineProperty(j,"default",{enumerable:!0,value:x})}):function(j,x){j.default=x}),U=y&&y.__importStar||function(j){if(j&&j.__esModule)return j;var x={};if(j!=null)for(var b in j)b!=="default"&&Object.prototype.hasOwnProperty.call(j,b)&&De(x,j,b);return q(x,j),x},Q=y&&y.__awaiter||function(j,x,b,C){function A(N){return N instanceof b?N:new b(function(w){w(N)})}return new(b||(b=Promise))(function(N,w){function R(K){try{H(C.next(K))}catch(V){w(V)}}function k(K){try{H(C.throw(K))}catch(V){w(V)}}function H(K){K.done?N(K.value):A(K.value).then(R,k)}H((C=C.apply(j,x||[])).next())})};Object.defineProperty(Se,"__esModule",{value:!0}),Se.RealTimeNotificationConfiguration=Se.TrouterConfigClient=void 0;const L=U(m.default);class W extends L.ServiceClient{constructor(x,b){b||(b={});const C=`azsdk-js-communication-signaling/${ue.PACKAGE_VERSION}`,A=b.userAgentOptions&&b.userAgentOptions.userAgentPrefix?`${b.userAgentOptions.userAgentPrefix} ${C}`:`${C}`,N=Object.assign(Object.assign({},b),{userAgentOptions:{userAgentPrefix:A},additionalPolicies:b.additionalPolicies});super(N),this.apiVersion=ue.CONFIG_API_VERSION,this.endpoint=x,this.httpClient=(0,g.default.createDefaultHttpClient)()}fetchServiceUrls(x){return Q(this,void 0,void 0,function*(){try{const b=(yield x.getToken()).token,C=(0,g.default.createPipelineRequest)({url:`${this.endpoint}/chat/config/realTimeNotifications?api-version=${this.apiVersion}`,method:"GET",headers:(0,g.default.createHttpHeaders)({Authorization:`Bearer ${b}`})}),A=yield this.pipeline.sendRequest(this.httpClient,C);if(A.status!==200||!A.bodyAsText)throw new Error(`Failed to fetch service URLs. Status: ${A.status}, Body: ${A.bodyAsText||"No response body"}`);const N=JSON.parse(A.bodyAsText);if(!N.trouterServiceUrl||!N.registrarServiceUrl||!N.cloudType)throw new Error("One or more required fields are missing in the response data");return new S(N.trouterServiceUrl,N.registrarServiceUrl,N.cloudType)}catch(b){throw new Error(`Error fetching real-time notification configuration from Chat Gateway: ${b.message}`)}})}}Se.TrouterConfigClient=W;class S{constructor(x,b,C){this.trouterServiceUrl=x,this.registrarServiceUrl=b,this.cloudType=C}}Se.RealTimeNotificationConfiguration=S});E(F),F.RealTimeNotificationConfiguration,F.TrouterConfigClient;var ne=pe,me=F,ae=I(function(Ne,Se){var De=y&&y.__awaiter||function(Q,L,W,S){function j(x){return x instanceof W?x:new W(function(b){b(x)})}return new(W||(W=Promise))(function(x,b){function C(w){try{N(S.next(w))}catch(R){b(R)}}function A(w){try{N(S.throw(w))}catch(R){b(R)}}function N(w){w.done?x(w.value):j(w.value).then(C,A)}N((S=S.apply(Q,L||[])).next())})};Object.defineProperty(Se,"__esModule",{value:!0}),Se.defaultTelemetrySettings=Se.createSettings=void 0;const q={version:"1.0.0",registrationId:"",sessionId:"",pnhAppId:"AcsWeb",pnhTemplate:"AcsWeb_Chat_2.1",platform:"SPOOL",platformUIVersion:"0.0.0",environment:"",productName:"acs-chat-web",trouterServiceUrl:"",registrarServiceUrl:"",registrarRefreshTimeoutInMs:35e4,timeoutOptions:{connectionTimeoutMs:2e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:5e4,requestTimeoutMs:5e3},maxRegistrationTimeInMs:72e5},U=(Q,L)=>De(void 0,void 0,void 0,function*(){var W;const S=L?.resourceEndpoint;if(S===void 0)throw new Error("'endpoint' cannot be null");const j=Object.assign({},q);j.registrationId=(0,ne.generateUuid)(),j.sessionId=(0,ne.generateUuid)();const b=yield new me.TrouterConfigClient(S,L).fetchServiceUrls(Q);return j.trouterServiceUrl=`${b.trouterServiceUrl}/v4/a`,j.registrarServiceUrl=`${b.registrarServiceUrl}/v3/registrations`,b.cloudType==="int"&&(j.pnhAppId="cns-e2e-test",j.pnhTemplate="cns-e2e-test:1.8"),j.maxRegistrationTimeInMs=(W=L?.registrationTimeInMs)!==null&&W!==void 0?W:q.maxRegistrationTimeInMs,j});Se.createSettings=U,Se.defaultTelemetrySettings={enabled:!1}});E(ae),ae.defaultTelemetrySettings,ae.createSettings;var _e=ae,Ce=I(function(Ne,Se){var De=y&&y.__awaiter||function(Q,L,W,S){function j(x){return x instanceof W?x:new W(function(b){b(x)})}return new(W||(W=Promise))(function(x,b){function C(w){try{N(S.next(w))}catch(R){b(R)}}function A(w){try{N(S.throw(w))}catch(R){b(R)}}function N(w){w.done?x(w.value):j(w.value).then(C,A)}N((S=S.apply(Q,L||[])).next())})};Object.defineProperty(Se,"__esModule",{value:!0}),Se.CommunicationSignalingClient=Se.ConnectionState=void 0;var q;(function(Q){Q[Q.Unknown=0]="Unknown",Q[Q.Connected=2]="Connected",Q[Q.Disconnected=3]="Disconnected",Q[Q.Switching=9]="Switching"})(q||(Se.ConnectionState=q={}));class U{constructor(L,W,S){this.credential=L,this.logger=W,this.options=S,this.stateChangedListener=null,this.tokenFetchRetries=0,this.trouter=(0,M.createTrouterService)((0,ne.toLogProvider)(W))}start(){return De(this,void 0,void 0,function*(){var L,W;if(this.resourceEndpoint=(L=this.options)===null||L===void 0?void 0:L.resourceEndpoint,this.resourceEndpoint===void 0)throw new Error("'endpoint' cannot be null");this.gatewayApiVersion=((W=this.options)===null||W===void 0?void 0:W.gatewayApiVersion)||"2024-03-07",this.config===void 0&&(this.config={trouterSettings:yield(0,_e.createSettings)(this.credential,this.options),skypeTokenProvider:S=>De(this,void 0,void 0,function*(){if(S){if(this.tokenFetchRetries+=1,this.tokenFetchRetries>ue.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES)throw yield this.stop(!0),new Error(`Access token is expired and failed to fetch a valid one after ${ue.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES} retries`)}else this.tokenFetchRetries=0;return Promise.resolve((yield this.credential.getToken()).token)}),telemetryConfig:{eventLogger:(0,ne.toTelemetrySender)(this.logger),settings:_e.defaultTelemetrySettings}}),this.trouter.start(this.config),this.trouter.setUserActivityState(M.UserActivityState.Active)})}stop(L){return De(this,void 0,void 0,function*(){this.trouter.offStateChanged(this.stateChangedListener),this.trouter.clearMessageHandlers(),this.trouter.stop(L??this.tokenFetchRetries>ue.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES)})}on(L,W){if(L==="connectionChanged"){this.trouter.offStateChanged(this.stateChangedListener),this.stateChangedListener=(S,j)=>W(S),this.trouter.onStateChanged(this.stateChangedListener);return}this.trouter.registerMessageHandler((0,ne.toMessageHandler)(L,W,this.resourceEndpoint,this.gatewayApiVersion))}}Se.CommunicationSignalingClient=U});E(Ce),Ce.CommunicationSignalingClient,Ce.ConnectionState;var Re=Ce,Le=I(function(Ne,Se){var De=y&&y.__createBinding||(Object.create?(function(U,Q,L,W){W===void 0&&(W=L);var S=Object.getOwnPropertyDescriptor(Q,L);(!S||("get"in S?!Q.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return Q[L]}}),Object.defineProperty(U,W,S)}):(function(U,Q,L,W){W===void 0&&(W=L),U[W]=Q[L]})),q=y&&y.__exportStar||function(U,Q){for(var L in U)L!=="default"&&!Object.prototype.hasOwnProperty.call(Q,L)&&De(Q,U,L)};Object.defineProperty(Se,"__esModule",{value:!0}),q(Re,Se)}),Ie=E(Le);r.exports=Ie})(bd)),bd.exports}var Gd=R2();class Rs extends Error{}Rs.prototype.name="InvalidTokenError";function E2(r){return decodeURIComponent(atob(r).replace(/(.)/g,(n,i)=>{let s=i.charCodeAt(0).toString(16).toUpperCase();return s.length<2&&(s="0"+s),"%"+s}))}function _2(r){let n=r.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:n+="==";break;case 3:n+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return E2(n)}catch{return atob(n)}}function k2(r,n){if(typeof r!="string")throw new Rs("Invalid token specified: must be a string");n||(n={});const i=n.header===!0?0:1,s=r.split(".")[i];if(typeof s!="string")throw new Rs(`Invalid token specified: missing part #${i+1}`);let c;try{c=_2(s)}catch(l){throw new Rs(`Invalid token specified: invalid base64 for part #${i+1} (${l.message})`)}try{return JSON.parse(c)}catch(l){throw new Rs(`Invalid token specified: invalid json for part #${i+1} (${l.message})`)}}const Fd=r=>{const{exp:n}=k2(r);return{token:r,expiresOnTimestamp:n*1e3}},Gy={token:"",expiresOnTimestamp:-10},A2=r=>r*1e3*60,N2=A2(10),O2=.5;class j2{constructor(n){this.expiringSoonIntervalInMs=N2,this.refreshAfterLifetimePercentage=O2,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.disposed=!1;const{tokenRefresher:i,token:s,refreshProactively:c}=n;this.refresh=i,this.currentToken=s?Fd(s):Gy,this.refreshProactively=c??!1,this.refreshProactively&&this.scheduleRefresh()}async getToken(n){return this.isTokenExpiringSoon(this.currentToken)?(this.isTokenValid(this.currentToken)||await this.updateTokenAndReschedule(n?.abortSignal),this.currentToken):this.currentToken}dispose(){this.disposed=!0,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.currentToken=Gy,this.activeTimeout&&clearTimeout(this.activeTimeout)}async updateTokenAndReschedule(n){if(this.activeTokenUpdating)return this.activeTokenUpdating;this.activeTokenUpdating=this.refreshTokenAndReschedule(n);try{await this.activeTokenUpdating}finally{this.activeTokenUpdating=null}}async refreshTokenAndReschedule(n){const i=await this.refreshToken(n);if(!this.isTokenValid(i))throw new Error("The token returned from the tokenRefresher is expired.");this.currentToken=i,this.refreshProactively&&this.scheduleRefresh()}async refreshToken(n){try{return this.activeTokenFetching||(this.activeTokenFetching=this.refresh(n)),Fd(await this.activeTokenFetching)}finally{this.activeTokenFetching=null}}scheduleRefresh(){if(this.disposed)return;this.activeTimeout&&clearTimeout(this.activeTimeout);const n=this.currentToken.expiresOnTimestamp-Date.now();let i=null;this.isTokenExpiringSoon(this.currentToken)?i=n*this.refreshAfterLifetimePercentage:i=n-this.expiringSoonIntervalInMs,this.activeTimeout=setTimeout(()=>this.updateTokenAndReschedule(),i)}isTokenValid(n){return n&&Date.now()<n.expiresOnTimestamp}isTokenExpiringSoon(n){return!n||Date.now()>=n.expiresOnTimestamp-this.expiringSoonIntervalInMs}}class M2{constructor(n){this.token=n}async getToken(){return this.token}dispose(){}}function U2(r){const n=r;return n&&typeof n.getToken=="function"&&(n.signRequest===void 0||n.getToken.length>0)}const D2="ApiVersionPolicy";function P2(r){return{name:D2,sendRequest:(n,i)=>{const s=new URL(n.url);return!s.searchParams.get("api-version")&&r.apiVersion&&(n.url=`${n.url}${Array.from(s.searchParams.keys()).length>0?"&":"?"}api-version=${r.apiVersion}`),i(n)}}}const I2="keyCredentialAuthenticationPolicy";function z2(r,n){return{name:I2,async sendRequest(i,s){return i.headers.set(n,r.key),s(i)}}}function L2(r,n,i={}){const{credential:s,clientOptions:c}=i;if(s){if(U2(s)){const l=Vc({credential:s,scopes:c?.credentials?.scopes??`${n}/.default`});r.addPolicy(l)}else if(H2(s)){if(!c?.credentials?.apiKeyHeaderName)throw new Error("Missing API Key Header Name");const l=z2(s,c?.credentials?.apiKeyHeaderName);r.addPolicy(l)}}}function B2(r,n,i={}){const s=Ef(i);return s.addPolicy(P2(i)),L2(s,r,{credential:n,clientOptions:i}),s}function H2(r){return r.key!==void 0}function Fr(r){return r.onResponse?{...r,onResponse(n,i){r.onResponse?.(n,i,i)}}:r}function q2(r,n,i={}){const c=B2(r,void 0,i),l=FA(r,{...i,pipeline:c}),d=(p,...m)=>({get:(g={})=>l.path(p,...m).get(Fr(g)),post:(g={})=>l.path(p,...m).post(Fr(g)),put:(g={})=>l.path(p,...m).put(Fr(g)),patch:(g={})=>l.path(p,...m).patch(Fr(g)),delete:(g={})=>l.path(p,...m).delete(Fr(g)),head:(g={})=>l.path(p,...m).head(Fr(g)),options:(g={})=>l.path(p,...m).options(Fr(g)),trace:(g={})=>l.path(p,...m).trace(Fr(g))});return{path:d,pathUnchecked:d,pipeline:l.pipeline}}const $2="https://auth.msft.communication.azure.com/",V2="https://communication.azure.com/clients/",G2="/access/teamsExtension/:exchangeAccessToken",F2="2025-06-30",X2="/access/entra/:exchangeAccessToken",Y2="2025-03-02-preview";class J2{constructor(n){this.options=n,this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}},this.client=q2(n.resourceEndpoint),this.httpClient=_f(),this.options=n,this.options.scopes=this.options.scopes||["https://communication.azure.com/clients/.default"],this.isPending=this.getToken()}async getToken(n){var i;if(!((i=n?.abortSignal)===null||i===void 0)&&i.aborted)return{token:"",expiresOnTimestamp:0};this.isPending||(this.isPending=this.getTokenInternal(n));try{await this.isPending}finally{this.isPending=null}return this.result.acsToken}async getTokenInternal(n){const i=n?.abortSignal?{abortSignal:n.abortSignal}:void 0,s=await this.options.tokenCredential.getToken(this.options.scopes?this.options.scopes:["https://communication.azure.com/clients/.default"],i),c=new Date,l=new Date(this.result.acsToken.expiresOnTimestamp);if(s===null)this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}};else if(this.result.acsToken.token===""||s.token!==this.result.entraToken||l<c){const d=await this.exchangeEntraToken(this.options.resourceEndpoint,s.token,i);this.result={entraToken:s.token,acsToken:d}}return this.result.acsToken}dispose(){this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}}}async exchangeEntraToken(n,i,s){const c=kf({url:this.createRequestUri(n),method:"POST",headers:Cb({Authorization:`Bearer ${i}`,"Content-Type":"application/json",Accept:"application/json"}),abortSignal:s?.abortSignal,body:JSON.stringify({})}),l=await this.client.pipeline.sendRequest(this.httpClient,c);if(l.status!==200||!l.bodyAsText)throw new Error(`Service request failed. Status: ${l.status}, Body: ${l.bodyAsText}`);const d=JSON.parse(l.bodyAsText);return{token:d.accessToken.token,expiresOnTimestamp:Date.parse(d.accessToken.expiresOn)}}createRequestUri(n){const[i,s]=this.determineEndpointAndApiVersion();return`${n}${i}?api-version=${s}`}determineEndpointAndApiVersion(){if(!this.options.scopes||this.options.scopes.length===0)throw new Error("Scopes validation failed. Ensure all scopes start with either {TeamsExtensionScopePrefix} or {CommunicationClientsScopePrefix}.");if(this.options.scopes.every(n=>n.startsWith($2)))return[G2,F2];if(this.options.scopes.every(n=>n.startsWith(V2)))return[X2,Y2];throw new Error("Scopes validation failed. Ensure all scopes start with either {TeamsExtensionScopePrefix} or {CommunicationClientsScopePrefix}.")}}class K2{constructor(n){this.disposed=!1,typeof n=="string"?this.tokenCredential=new M2(Fd(n)):"tokenRefresher"in n?this.tokenCredential=new j2(n):this.tokenCredential=new J2(n)}async getToken(n){this.throwIfDisposed();const i=await this.tokenCredential.getToken(n);return this.throwIfDisposed(),i}dispose(){this.disposed=!0,this.tokenCredential.dispose()}throwIfDisposed(){if(this.disposed)throw new Error("User credential is disposed")}}const Q2=r=>typeof r.communicationUserId=="string",W2=r=>typeof r.phoneNumber=="string",Z2=r=>typeof r.microsoftTeamsUserId=="string",eO=r=>typeof r.teamsAppId=="string",tO=r=>{const n=typeof r.userId=="string",i=typeof r.tenantId=="string",s=typeof r.resourceId=="string";return n&&i&&s},Pb=r=>Q2(r)?Object.assign(Object.assign({},r),{kind:"communicationUser"}):W2(r)?Object.assign(Object.assign({},r),{kind:"phoneNumber"}):Z2(r)?Object.assign(Object.assign({},r),{kind:"microsoftTeamsUser"}):eO(r)?Object.assign(Object.assign({},r),{kind:"microsoftTeamsApp"}):tO(r)?Object.assign(Object.assign({},r),{kind:"teamsExtensionUser"}):Object.assign(Object.assign({},r),{kind:"unknown"}),xs=r=>{const n=Pb(r);switch(n.kind){case"communicationUser":return n.communicationUserId;case"microsoftTeamsUser":{const{microsoftTeamsUserId:i,rawId:s,cloud:c,isAnonymous:l}=n;if(s)return s;if(l)return`8:teamsvisitor:${i}`;switch(c){case"dod":return`8:dod:${i}`;case"gcch":return`8:gcch:${i}`;case"public":return`8:orgid:${i}`}return`8:orgid:${i}`}case"microsoftTeamsApp":{const{teamsAppId:i,rawId:s,cloud:c}=n;if(s)return s;switch(c){case"dod":return`28:dod:${i}`;case"gcch":return`28:gcch:${i}`}return`28:orgid:${i}`}case"phoneNumber":{const{phoneNumber:i,rawId:s}=n;return s||`4:${i}`}case"teamsExtensionUser":{const{userId:i,tenantId:s,resourceId:c,rawId:l,cloud:d}=n;if(l)return l;switch(d){case"dod":return`8:dod-acs:${c}_${s}_${i}`;case"gcch":return`8:gcch-acs:${c}_${s}_${i}`}return`8:acs:${c}_${s}_${i}`}case"unknown":return n.id}},en=(r,n)=>{const i=Object.keys(r)[0],s=r[i];if(n in s)return s[n];throw new Error(`Property ${n} is required for identifier of type ${i}.`)},nO=r=>{const n=[];if(r.communicationUser!==void 0&&n.push("communicationUser"),r.microsoftTeamsUser!==void 0&&n.push("microsoftTeamsUser"),r.microsoftTeamsApp!==void 0&&n.push("microsoftTeamsApp"),r.phoneNumber!==void 0&&n.push("phoneNumber"),r.teamsExtensionUser!==void 0&&n.push("teamsExtensionUser"),n.length>1)throw new Error(`Only one of the properties in ${JSON.stringify(n)} should be present.`)},Ib=r=>{var n,i,s,c,l,d,p,m,g;const y=Pb(r);switch(y.kind){case"communicationUser":return{rawId:xs(y),communicationUser:{id:y.communicationUserId}};case"phoneNumber":return{rawId:(n=y.rawId)!==null&&n!==void 0?n:xs(y),phoneNumber:{value:y.phoneNumber,isAnonymous:(i=y.isAnonymous)!==null&&i!==void 0?i:!1,assertedId:y.assertedId}};case"microsoftTeamsUser":return{rawId:(s=y.rawId)!==null&&s!==void 0?s:xs(y),microsoftTeamsUser:{userId:y.microsoftTeamsUserId,isAnonymous:(c=y.isAnonymous)!==null&&c!==void 0?c:!1,cloud:(l=y.cloud)!==null&&l!==void 0?l:"public"}};case"microsoftTeamsApp":return{rawId:(d=y.rawId)!==null&&d!==void 0?d:xs(y),microsoftTeamsApp:{appId:y.teamsAppId,cloud:(p=y.cloud)!==null&&p!==void 0?p:"public"}};case"teamsExtensionUser":return{rawId:(m=y.rawId)!==null&&m!==void 0?m:xs(y),teamsExtensionUser:{userId:y.userId,tenantId:y.tenantId,resourceId:y.resourceId,cloud:(g=y.cloud)!==null&&g!==void 0?g:"public"}};case"unknown":return{rawId:y.id};default:throw new Error(`Can't serialize an identifier with kind ${y.kind}`)}},rO=r=>r.communicationUser?"communicationUser":r.phoneNumber?"phoneNumber":r.microsoftTeamsUser?"microsoftTeamsUser":r.microsoftTeamsApp?"microsoftTeamsApp":r.teamsExtensionUser?"teamsExtensionUser":"unknown",Hs=r=>{var n,i;nO(r);const s=r.communicationUser,c=r.microsoftTeamsUser,l=r.microsoftTeamsApp,d=r.phoneNumber,p=r.teamsExtensionUser,m=(n=r.kind)!==null&&n!==void 0?n:rO(r);return m==="communicationUser"&&s?{kind:"communicationUser",communicationUserId:en({communicationUser:s},"id")}:m==="phoneNumber"&&d?{kind:"phoneNumber",phoneNumber:en({phoneNumber:d},"value"),rawId:en({phoneNumber:r},"rawId"),isAnonymous:(i=d.isAnonymous)!==null&&i!==void 0?i:!1,assertedId:d.assertedId}:m==="microsoftTeamsUser"&&c?{kind:"microsoftTeamsUser",microsoftTeamsUserId:en({microsoftTeamsUser:c},"userId"),isAnonymous:en({microsoftTeamsUser:c},"isAnonymous"),cloud:en({microsoftTeamsUser:c},"cloud"),rawId:en({microsoftTeamsUser:r},"rawId")}:m==="microsoftTeamsApp"&&l?{kind:"microsoftTeamsApp",teamsAppId:en({microsoftTeamsApp:l},"appId"),cloud:en({microsoftTeamsApp:l},"cloud"),rawId:en({microsoftTeamsApp:r},"rawId")}:m==="teamsExtensionUser"&&p?{kind:"teamsExtensionUser",userId:en({teamsExtensionUser:p},"userId"),tenantId:en({teamsExtensionUser:p},"tenantId"),resourceId:en({teamsExtensionUser:p},"resourceId"),cloud:en({teamsExtensionUser:p},"cloud"),rawId:en({teamsExtensionUser:r},"rawId")}:{kind:"unknown",id:en({unknown:r},"rawId")}},iO=r=>{const{participants:n,idempotencyToken:i}=r,s=Sr(r,["participants","idempotencyToken"]);return Object.assign({repeatabilityRequestId:i},s)},zb=r=>{const{id:n}=r,i=Sr(r,["id"]);return Object.assign(Object.assign({},i),{communicationIdentifier:Ib(n)})},oO=r=>{var n;return{participants:(n=r.participants)===null||n===void 0?void 0:n.map(i=>zb(i))}},Xd=r=>{const{communicationIdentifier:n}=r,i=Sr(r,["communicationIdentifier"]);return Object.assign(Object.assign({},i),{id:Hs(n)})},sO=r=>{const{participants:n,initiatorCommunicationIdentifier:i}=r,s=Sr(r,["participants","initiatorCommunicationIdentifier"]);let c=Object.assign({},s);if(i){const l=Hs(i);c=Object.assign(Object.assign({},c),{initiator:l})}return n&&(c=Object.assign(Object.assign({},c),{participants:n?.map(l=>Xd(l))})),c},Od=r=>{const{content:n,senderCommunicationIdentifier:i}=r,s=Sr(r,["content","senderCommunicationIdentifier"]);let c=Object.assign({},s);if(n&&(c=Object.assign(Object.assign({},c),{content:sO(n)})),i){const l=Hs(i);c=Object.assign(Object.assign({},c),{sender:l})}return c},aO=r=>{if(r.kind==="threadCreationDate"||r.kind==="none")return r;throw new Error(`Retention Policy ${r.kind} is not supported`)},Lb=r=>{const{createdByCommunicationIdentifier:n,retentionPolicy:i}=r,s=Sr(r,["createdByCommunicationIdentifier","retentionPolicy"]);let c=Object.assign({},s);return n&&(c=Object.assign(Object.assign({},c),{createdBy:Hs(n)})),i&&(c=Object.assign(Object.assign({},c),{retentionPolicy:aO(i)})),c},cO=r=>{const{chatThread:n}=r,i=Sr(r,["chatThread"]);return n?Object.assign(Object.assign({},i),{chatThread:Lb(n)}):Object.assign({},i)},Fy=r=>{const{senderCommunicationIdentifier:n}=r,i=Sr(r,["senderCommunicationIdentifier"]);return Object.assign(Object.assign({},i),{sender:Hs(n)})};var Xy;(function(r){r.Unknown="unknown",r.CommunicationUser="communicationUser",r.PhoneNumber="phoneNumber",r.MicrosoftTeamsUser="microsoftTeamsUser",r.MicrosoftTeamsApp="microsoftTeamsApp"})(Xy||(Xy={}));var Yy;(function(r){r.Public="public",r.Dod="dod",r.Gcch="gcch"})(Yy||(Yy={}));var Jy;(function(r){r.ThreadCreationDate="threadCreationDate",r.None="none"})(Jy||(Jy={}));const et=bb({namespace:"Azure.Communication",packageName:"@azure/communication-chat",packageVersion:"1.6.0"}),Af={type:{name:"Composite",className:"ChatMessageReadReceiptsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessageReadReceipt"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},lO={type:{name:"Composite",className:"ChatMessageReadReceipt",modelProperties:{senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}},readOn:{serializedName:"readOn",required:!0,type:{name:"DateTime"}}}}},Bb={type:{name:"Composite",className:"CommunicationIdentifierModel",modelProperties:{kind:{serializedName:"kind",type:{name:"String"}},rawId:{serializedName:"rawId",type:{name:"String"}},communicationUser:{serializedName:"communicationUser",type:{name:"Composite",className:"CommunicationUserIdentifierModel"}},phoneNumber:{serializedName:"phoneNumber",type:{name:"Composite",className:"PhoneNumberIdentifierModel"}},microsoftTeamsUser:{serializedName:"microsoftTeamsUser",type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel"}},microsoftTeamsApp:{serializedName:"microsoftTeamsApp",type:{name:"Composite",className:"MicrosoftTeamsAppIdentifierModel"}}}}},uO={type:{name:"Composite",className:"CommunicationUserIdentifierModel",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},dO={type:{name:"Composite",className:"PhoneNumberIdentifierModel",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"String"}}}}},fO={type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel",modelProperties:{userId:{serializedName:"userId",required:!0,type:{name:"String"}},isAnonymous:{serializedName:"isAnonymous",type:{name:"Boolean"}},cloud:{serializedName:"cloud",type:{name:"String"}}}}},hO={type:{name:"Composite",className:"MicrosoftTeamsAppIdentifierModel",modelProperties:{appId:{serializedName:"appId",required:!0,type:{name:"String"}},cloud:{serializedName:"cloud",type:{name:"String"}}}}},Me={type:{name:"Composite",className:"CommunicationErrorResponse",modelProperties:{error:{serializedName:"error",type:{name:"Composite",className:"ChatError"}}}}},pO={type:{name:"Composite",className:"ChatError",modelProperties:{code:{serializedName:"code",required:!0,type:{name:"String"}},message:{serializedName:"message",required:!0,type:{name:"String"}},target:{serializedName:"target",readOnly:!0,type:{name:"String"}},details:{serializedName:"details",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}},innerError:{serializedName:"innererror",type:{name:"Composite",className:"ChatError"}}}}},Hb={type:{name:"Composite",className:"SendReadReceiptRequest",modelProperties:{chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}}}},qb={type:{name:"Composite",className:"SendChatMessageRequest",modelProperties:{content:{serializedName:"content",required:!0,type:{name:"String"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},type:{serializedName:"type",type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},$b={type:{name:"Composite",className:"SendChatMessageResult",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},Nf={type:{name:"Composite",className:"ChatMessagesCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessage"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Vb={type:{name:"Composite",className:"ChatMessage",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},type:{serializedName:"type",required:!0,type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},sequenceId:{serializedName:"sequenceId",required:!0,type:{name:"String"}},version:{serializedName:"version",required:!0,type:{name:"String"}},content:{serializedName:"content",type:{name:"Composite",className:"ChatMessageContent"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},editedOn:{serializedName:"editedOn",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},mO={type:{name:"Composite",className:"ChatMessageContent",modelProperties:{message:{serializedName:"message",type:{name:"String"}},topic:{serializedName:"topic",type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},attachments:{serializedName:"attachments",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatAttachment"}}}},initiatorCommunicationIdentifier:{serializedName:"initiatorCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}}}}},gO={type:{name:"Composite",className:"ChatParticipant",modelProperties:{communicationIdentifier:{serializedName:"communicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},displayName:{serializedName:"displayName",type:{name:"String"}},shareHistoryTime:{serializedName:"shareHistoryTime",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},yO={type:{name:"Composite",className:"ChatAttachment",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},attachmentType:{serializedName:"attachmentType",required:!0,type:{name:"Enum",allowedValues:["image","file"]}},name:{serializedName:"name",type:{name:"String"}},url:{serializedName:"url",type:{name:"String"}},previewUrl:{serializedName:"previewUrl",type:{name:"String"}}}}},Gb={type:{name:"Composite",className:"UpdateChatMessageRequest",modelProperties:{content:{serializedName:"content",type:{name:"String"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},Of={type:{name:"Composite",className:"ChatParticipantsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},Fb={type:{name:"Composite",className:"AddChatParticipantsRequest",modelProperties:{participants:{serializedName:"participants",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}}}}},Xb={type:{name:"Composite",className:"AddChatParticipantsResult",modelProperties:{invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},Yb={type:{name:"Composite",className:"CreateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",required:!0,type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},wo={type:{name:"Composite",className:"ChatRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:{serializedName:"kind",clientName:"kind"},modelProperties:{kind:{serializedName:"kind",required:!0,type:{name:"String"}}}}},Jb={type:{name:"Composite",className:"CreateChatThreadResult",modelProperties:{chatThread:{serializedName:"chatThread",type:{name:"Composite",className:"ChatThreadProperties"}},invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},Kb={type:{name:"Composite",className:"ChatThreadProperties",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},createdByCommunicationIdentifier:{serializedName:"createdByCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},jf={type:{name:"Composite",className:"ChatThreadsItemCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatThreadItem"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},vO={type:{name:"Composite",className:"ChatThreadItem",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},lastMessageReceivedOn:{serializedName:"lastMessageReceivedOn",readOnly:!0,type:{name:"DateTime"}}}}},Qb={type:{name:"Composite",className:"UpdateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",type:{name:"String"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},Wb={type:{name:"Composite",className:"SendTypingNotificationRequest",modelProperties:{senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}}}}},Zb={serializedName:"threadCreationDate",type:{name:"Composite",className:"ThreadCreationDateRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:wo.type.polymorphicDiscriminator,modelProperties:Object.assign(Object.assign({},wo.type.modelProperties),{deleteThreadAfterDays:{serializedName:"deleteThreadAfterDays",required:!0,type:{name:"Number"}}})}},eS={serializedName:"none",type:{name:"Composite",className:"NoneRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:wo.type.polymorphicDiscriminator,modelProperties:Object.assign({},wo.type.modelProperties)}};let bO={ChatRetentionPolicy:wo,"ChatRetentionPolicy.threadCreationDate":Zb,"ChatRetentionPolicy.none":eS};const tS=Object.freeze(Object.defineProperty({__proto__:null,AddChatParticipantsRequest:Fb,AddChatParticipantsResult:Xb,ChatAttachment:yO,ChatError:pO,ChatMessage:Vb,ChatMessageContent:mO,ChatMessageReadReceipt:lO,ChatMessageReadReceiptsCollection:Af,ChatMessagesCollection:Nf,ChatParticipant:gO,ChatParticipantsCollection:Of,ChatRetentionPolicy:wo,ChatThreadItem:vO,ChatThreadProperties:Kb,ChatThreadsItemCollection:jf,CommunicationErrorResponse:Me,CommunicationIdentifierModel:Bb,CommunicationUserIdentifierModel:uO,CreateChatThreadRequest:Yb,CreateChatThreadResult:Jb,MicrosoftTeamsAppIdentifierModel:hO,MicrosoftTeamsUserIdentifierModel:fO,NoneRetentionPolicy:eS,PhoneNumberIdentifierModel:dO,SendChatMessageRequest:qb,SendChatMessageResult:$b,SendReadReceiptRequest:Hb,SendTypingNotificationRequest:Wb,ThreadCreationDateRetentionPolicy:Zb,UpdateChatMessageRequest:Gb,UpdateChatThreadRequest:Qb,discriminators:bO},Symbol.toStringTag,{value:"Module"})),Mt={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},Ut={parameterPath:"endpoint",mapper:{serializedName:"endpoint",required:!0,type:{name:"String"}},skipEncoding:!0},Xt={parameterPath:"chatThreadId",mapper:{serializedName:"chatThreadId",required:!0,type:{name:"String"}}},Gc={parameterPath:["options","maxPageSize"],mapper:{serializedName:"maxPageSize",type:{name:"Number"}}},nS={parameterPath:["options","skip"],mapper:{serializedName:"skip",type:{name:"Number"}}},rn={parameterPath:"apiVersion",mapper:{defaultValue:"2025-03-15",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},ko={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},SO={parameterPath:"sendReadReceiptRequest",mapper:Hb},wO={parameterPath:"sendChatMessageRequest",mapper:qb},rS={parameterPath:["options","startTime"],mapper:{serializedName:"startTime",type:{name:"DateTime"}}},Mf={parameterPath:"chatMessageId",mapper:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}},iS={parameterPath:["options","contentType"],mapper:{defaultValue:"application/merge-patch+json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},TO={parameterPath:"updateChatMessageRequest",mapper:Gb},CO={parameterPath:"participantCommunicationIdentifier",mapper:Bb},xO={parameterPath:"addChatParticipantsRequest",mapper:Fb},RO={parameterPath:"updateChatThreadRequest",mapper:Qb},EO={parameterPath:["options","sendTypingNotificationRequest"],mapper:Wb},Fc={parameterPath:"nextLink",mapper:{serializedName:"nextLink",required:!0,type:{name:"String"}},skipEncoding:!0},_O={parameterPath:"createChatThreadRequest",mapper:Yb},kO={parameterPath:["options","repeatabilityRequestId"],mapper:{serializedName:"repeatability-request-id",type:{name:"String"}}};class AO{constructor(n){this.client=n}async listChatReadReceipts(n,i){return et.withSpan("ChatApiClient.listChatReadReceipts",i??{},async s=>this.client.sendOperationRequest({chatThreadId:n,options:s},NO))}async sendChatReadReceipt(n,i,s){return et.withSpan("ChatApiClient.sendChatReadReceipt",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,sendReadReceiptRequest:i,options:c},OO))}async sendChatMessage(n,i,s){return et.withSpan("ChatApiClient.sendChatMessage",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,sendChatMessageRequest:i,options:c},jO))}async listChatMessages(n,i){return et.withSpan("ChatApiClient.listChatMessages",i??{},async s=>this.client.sendOperationRequest({chatThreadId:n,options:s},MO))}async getChatMessage(n,i,s){return et.withSpan("ChatApiClient.getChatMessage",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,chatMessageId:i,options:c},UO))}async updateChatMessage(n,i,s,c){return et.withSpan("ChatApiClient.updateChatMessage",c??{},async l=>this.client.sendOperationRequest({chatThreadId:n,chatMessageId:i,updateChatMessageRequest:s,options:l},DO))}async deleteChatMessage(n,i,s){return et.withSpan("ChatApiClient.deleteChatMessage",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,chatMessageId:i,options:c},PO))}async listChatParticipants(n,i){return et.withSpan("ChatApiClient.listChatParticipants",i??{},async s=>this.client.sendOperationRequest({chatThreadId:n,options:s},IO))}async removeChatParticipant(n,i,s){return et.withSpan("ChatApiClient.removeChatParticipant",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,participantCommunicationIdentifier:i,options:c},zO))}async addChatParticipants(n,i,s){return et.withSpan("ChatApiClient.addChatParticipants",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,addChatParticipantsRequest:i,options:c},LO))}async updateChatThreadProperties(n,i,s){return et.withSpan("ChatApiClient.updateChatThreadProperties",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,updateChatThreadRequest:i,options:c},BO))}async getChatThreadProperties(n,i){return et.withSpan("ChatApiClient.getChatThreadProperties",i??{},async s=>this.client.sendOperationRequest({chatThreadId:n,options:s},HO))}async sendTypingNotification(n,i){return et.withSpan("ChatApiClient.sendTypingNotification",i??{},async s=>this.client.sendOperationRequest({chatThreadId:n,options:s},qO))}async listChatReadReceiptsNext(n,i,s){return et.withSpan("ChatApiClient.listChatReadReceiptsNext",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,nextLink:i,options:c},$O))}async listChatMessagesNext(n,i,s){return et.withSpan("ChatApiClient.listChatMessagesNext",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,nextLink:i,options:c},VO))}async listChatParticipantsNext(n,i,s){return et.withSpan("ChatApiClient.listChatParticipantsNext",s??{},async c=>this.client.sendOperationRequest({chatThreadId:n,nextLink:i,options:c},GO))}}const on=vf(tS,!1),NO={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"GET",responses:{200:{bodyMapper:Af},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},queryParameters:[Gc,nS,rn],urlParameters:[Ut,Xt],headerParameters:[Mt],serializer:on},OO={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"POST",responses:{200:{},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},requestBody:SO,queryParameters:[rn],urlParameters:[Ut,Xt],headerParameters:[Mt,ko],mediaType:"json",serializer:on},jO={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"POST",responses:{201:{bodyMapper:$b},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},requestBody:wO,queryParameters:[rn],urlParameters:[Ut,Xt],headerParameters:[Mt,ko],mediaType:"json",serializer:on},MO={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"GET",responses:{200:{bodyMapper:Nf},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},queryParameters:[Gc,rn,rS],urlParameters:[Ut,Xt],headerParameters:[Mt],serializer:on},UO={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"GET",responses:{200:{bodyMapper:Vb},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},queryParameters:[rn],urlParameters:[Ut,Xt,Mf],headerParameters:[Mt],serializer:on},DO={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},requestBody:TO,queryParameters:[rn],urlParameters:[Ut,Xt,Mf],headerParameters:[Mt,iS],mediaType:"json",serializer:on},PO={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},queryParameters:[rn],urlParameters:[Ut,Xt,Mf],headerParameters:[Mt],serializer:on},IO={path:"/chat/threads/{chatThreadId}/participants",httpMethod:"GET",responses:{200:{bodyMapper:Of},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},queryParameters:[Gc,nS,rn],urlParameters:[Ut,Xt],headerParameters:[Mt],serializer:on},zO={path:"/chat/threads/{chatThreadId}/participants/:remove",httpMethod:"POST",responses:{204:{},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},requestBody:CO,queryParameters:[rn],urlParameters:[Ut,Xt],headerParameters:[Mt,ko],mediaType:"json",serializer:on},LO={path:"/chat/threads/{chatThreadId}/participants/:add",httpMethod:"POST",responses:{201:{bodyMapper:Xb},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},requestBody:xO,queryParameters:[rn],urlParameters:[Ut,Xt],headerParameters:[Mt,ko],mediaType:"json",serializer:on},BO={path:"/chat/threads/{chatThreadId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},requestBody:RO,queryParameters:[rn],urlParameters:[Ut,Xt],headerParameters:[Mt,iS],mediaType:"json",serializer:on},HO={path:"/chat/threads/{chatThreadId}",httpMethod:"GET",responses:{200:{bodyMapper:Kb},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},queryParameters:[rn],urlParameters:[Ut,Xt],headerParameters:[Mt],serializer:on},qO={path:"/chat/threads/{chatThreadId}/typing",httpMethod:"POST",responses:{200:{},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},requestBody:EO,queryParameters:[rn],urlParameters:[Ut,Xt],headerParameters:[Mt,ko],mediaType:"json",serializer:on},$O={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Af},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},urlParameters:[Ut,Xt,Fc],headerParameters:[Mt],serializer:on},VO={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Nf},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},urlParameters:[Ut,Xt,Fc],headerParameters:[Mt],serializer:on},GO={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:Of},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},urlParameters:[Ut,Xt,Fc],headerParameters:[Mt],serializer:on};class FO{constructor(n){this.client=n}async createChatThread(n,i){return et.withSpan("ChatApiClient.createChatThread",i??{},async s=>this.client.sendOperationRequest({createChatThreadRequest:n,options:s},XO))}async listChatThreads(n){return et.withSpan("ChatApiClient.listChatThreads",n??{},async i=>this.client.sendOperationRequest({options:i},YO))}async deleteChatThread(n,i){return et.withSpan("ChatApiClient.deleteChatThread",i??{},async s=>this.client.sendOperationRequest({chatThreadId:n,options:s},JO))}async listChatThreadsNext(n,i){return et.withSpan("ChatApiClient.listChatThreadsNext",i??{},async s=>this.client.sendOperationRequest({nextLink:n,options:s},KO))}}const Xc=vf(tS,!1),XO={path:"/chat/threads",httpMethod:"POST",responses:{201:{bodyMapper:Jb},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},requestBody:_O,queryParameters:[rn],urlParameters:[Ut],headerParameters:[Mt,ko,kO],mediaType:"json",serializer:Xc},YO={path:"/chat/threads",httpMethod:"GET",responses:{200:{bodyMapper:jf},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},queryParameters:[Gc,rn,rS],urlParameters:[Ut],headerParameters:[Mt],serializer:Xc},JO={path:"/chat/threads/{chatThreadId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},queryParameters:[rn],urlParameters:[Ut,Xt],headerParameters:[Mt],serializer:Xc},KO={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:jf},401:{bodyMapper:Me,isError:!0},403:{bodyMapper:Me,isError:!0},429:{bodyMapper:Me,isError:!0},503:{bodyMapper:Me,isError:!0}},urlParameters:[Ut,Fc],headerParameters:[Mt],serializer:Xc};class oS extends Ub{constructor(n,i){var s,c;if(n===void 0)throw new Error("'endpoint' cannot be null");i||(i={});const l={requestContentType:"application/json; charset=utf-8"},d="azsdk-js-communication-chat/1.6.0",p=i.userAgentOptions&&i.userAgentOptions.userAgentPrefix?`${i.userAgentOptions.userAgentPrefix} ${d}`:`${d}`,m=Object.assign(Object.assign(Object.assign({},l),i),{userAgentOptions:{userAgentPrefix:p},endpoint:(c=(s=i.endpoint)!==null&&s!==void 0?s:i.baseUri)!==null&&c!==void 0?c:"{endpoint}"});super(m),this.endpoint=n,this.apiVersion=i.apiVersion||"2025-03-15",this.chatThread=new AO(this),this.chat=new FO(this),this.addCustomApiVersionPolicy(i.apiVersion)}addCustomApiVersionPolicy(n){if(!n)return;const i={name:"CustomApiVersionPolicy",async sendRequest(s,c){const l=s.url.split("?");if(l.length>1){const d=l[1].split("&").map(p=>p.indexOf("api-version")>-1?"api-version="+n:p);s.url=l[0]+"?"+d.join("&")}return c(s)}};this.pipeline.addPolicy(i)}}const ks=qc("communication-chat"),sS=r=>Vc({credential:{getToken:(i,s)=>r.getToken({abortSignal:s?.abortSignal})},scopes:[]}),QO=8e3;class WO{constructor(n,i,s,c={}){this.endpoint=n,this.timeOfLastTypingRequest=void 0,this.threadId=i,this.tokenCredential=s;const l=Object.assign(Object.assign({},c),{loggingOptions:{logger:ks.info}});this.client=new oS(this.endpoint,Object.assign({endpoint:this.endpoint},l));const d=sS(this.tokenCredential);this.client.pipeline.addPolicy(d)}getProperties(n={}){return et.withSpan("ChatClient-GetProperties",n,async i=>{const s=await this.client.chatThread.getChatThreadProperties(this.threadId,i);return Lb(s)})}updateTopic(n,i={}){return et.withSpan("ChatThreadClient-UpdateTopic",i,async s=>{await this.client.chatThread.updateChatThreadProperties(this.threadId,{topic:n},s)})}updateProperties(n={}){return et.withSpan("ChatThreadClient-UpdateProperties",n,async i=>{await this.client.chatThread.updateChatThreadProperties(this.threadId,n,i)})}sendMessage(n,i={}){return et.withSpan("ChatThreadClient-SendMessage",i,async s=>(this.timeOfLastTypingRequest=void 0,await this.client.chatThread.sendChatMessage(this.threadId,Object.assign(Object.assign({},n),i),s)))}getMessage(n,i={}){return et.withSpan("ChatThreadClient-GetMessage",i,async s=>{const c=await this.client.chatThread.getChatMessage(this.threadId,n,s);return Od(c)})}listMessagesPage(n){return Xr(this,arguments,function*(s,c={}){if(!s.continuationToken){const l=yield st(this.client.chatThread.listChatMessages(this.threadId,c));s.continuationToken=l.nextLink,l.value&&(yield yield st(l.value.map(Od,this)))}for(;s.continuationToken;){const l=yield st(this.client.chatThread.listChatMessagesNext(this.threadId,s.continuationToken,c));if(s.continuationToken=l.nextLink,l.value)yield yield st(l.value.map(Od,this));else break}})}listMessagesAll(n){return Xr(this,arguments,function*(){var s,c,l,d;try{for(var p=!0,m=Yr(this.listMessagesPage({},n)),g;g=yield st(m.next()),s=g.done,!s;p=!0)d=g.value,p=!1,yield st(yield*mc(Yr(d)))}catch(y){c={error:y}}finally{try{!p&&!s&&(l=m.return)&&(yield st(l.call(m)))}finally{if(c)throw c.error}}})}listMessages(n={}){const{span:i,updatedOptions:s}=et.startSpan("ChatThreadClient-ListMessages",n);try{const c=this.listMessagesAll(s);return{next(){return c.next()},[Symbol.asyncIterator](){return this},byPage:(l={})=>this.listMessagesPage(l,s)}}catch(c){throw i.setStatus({status:"error",error:c}),c}finally{i.end()}}deleteMessage(n,i={}){return et.withSpan("ChatThreadClient-DeleteMessage",i,async s=>{await this.client.chatThread.deleteChatMessage(this.threadId,n,s)})}async updateMessage(n,i={}){return et.withSpan("ChatThreadClient-UpdateMessage",i,async s=>{await this.client.chatThread.updateChatMessage(this.threadId,n,i,s)})}async addParticipants(n,i={}){return et.withSpan("ChatThreadClient-AddParticipants",i,async s=>await this.client.chatThread.addChatParticipants(this.threadId,oO(n),s))}listParticipantsPage(n){return Xr(this,arguments,function*(s,c={}){if(!s.continuationToken){const l=yield st(this.client.chatThread.listChatParticipants(this.threadId,c));s.continuationToken=l.nextLink,l.value&&(yield yield st(l.value.map(Xd,this)))}for(;s.continuationToken;){const l=yield st(this.client.chatThread.listChatParticipantsNext(this.threadId,s.continuationToken,c));if(s.continuationToken=l.nextLink,l.value)yield yield st(l.value.map(Xd,this));else break}})}listParticipantsAll(n){return Xr(this,arguments,function*(){var s,c,l,d;try{for(var p=!0,m=Yr(this.listParticipantsPage({},n)),g;g=yield st(m.next()),s=g.done,!s;p=!0)d=g.value,p=!1,yield st(yield*mc(Yr(d)))}catch(y){c={error:y}}finally{try{!p&&!s&&(l=m.return)&&(yield st(l.call(m)))}finally{if(c)throw c.error}}})}listParticipants(n={}){const{span:i,updatedOptions:s}=et.startSpan("ChatThreadClient-ListParticipants",n);try{const c=this.listParticipantsAll(s);return{next(){return c.next()},[Symbol.asyncIterator](){return this},byPage:(l={})=>this.listParticipantsPage(l,s)}}catch(c){throw i.setStatus({status:"error",error:c}),c}finally{i.end()}}async removeParticipant(n,i={}){return et.withSpan("ChatThreadClient-RemoveParticipant",i,async s=>{await this.client.chatThread.removeChatParticipant(this.threadId,Ib(n),s)})}async sendTypingNotification(n={}){return et.withSpan("ChatThreadClient-SendTypingNotification",n,async i=>{const s=new Date,{senderDisplayName:c}=i,l=Sr(i,["senderDisplayName"]);return this.canPostTypingNotification(s)?(this.timeOfLastTypingRequest=s,await this.client.chatThread.sendTypingNotification(this.threadId,Object.assign({sendTypingNotificationRequest:{senderDisplayName:c}},l)),!0):(ks.info(`Typing Notification NOT Send. [thread_id=${this.threadId}]`),!1)})}async sendReadReceipt(n,i={}){return et.withSpan("ChatThreadClient-SendReadReceipt",i,async s=>{await this.client.chatThread.sendChatReadReceipt(this.threadId,n,s)})}listReadReceiptsPage(n){return Xr(this,arguments,function*(s,c={}){if(!s.continuationToken){const l=yield st(this.client.chatThread.listChatReadReceipts(this.threadId,c));s.continuationToken=l.nextLink,l.value&&(yield yield st(l.value.map(Fy,this)))}for(;s.continuationToken;){const l=yield st(this.client.chatThread.listChatReadReceiptsNext(this.threadId,s.continuationToken,c));if(s.continuationToken=l.nextLink,l.value)yield yield st(l.value.map(Fy,this));else break}})}listReadReceiptsAll(n){return Xr(this,arguments,function*(){var s,c,l,d;try{for(var p=!0,m=Yr(this.listReadReceiptsPage({},n)),g;g=yield st(m.next()),s=g.done,!s;p=!0)d=g.value,p=!1,yield st(yield*mc(Yr(d)))}catch(y){c={error:y}}finally{try{!p&&!s&&(l=m.return)&&(yield st(l.call(m)))}finally{if(c)throw c.error}}})}listReadReceipts(n={}){const{span:i,updatedOptions:s}=et.startSpan("ChatThreadClient-ListChatReadReceipts",n);try{const c=this.listReadReceiptsAll(s);return{next(){return c.next()},[Symbol.asyncIterator](){return this},byPage:(l={})=>this.listReadReceiptsPage(l,s)}}catch(c){throw i.setStatus({status:"error",error:c}),c}finally{i.end()}}canPostTypingNotification(n){return this.timeOfLastTypingRequest&&n.getTime()-this.timeOfLastTypingRequest.getTime()<QO?(ks.info(`Typing interval check failed. [last_request=${this.timeOfLastTypingRequest}]`),!1):!0}}var lc={exports:{}},Ky;function ZO(){if(Ky)return lc.exports;Ky=1;var r=typeof Reflect=="object"?Reflect:null,n=r&&typeof r.apply=="function"?r.apply:function(ne,me,ae){return Function.prototype.apply.call(ne,me,ae)},i;r&&typeof r.ownKeys=="function"?i=r.ownKeys:Object.getOwnPropertySymbols?i=function(ne){return Object.getOwnPropertyNames(ne).concat(Object.getOwnPropertySymbols(ne))}:i=function(ne){return Object.getOwnPropertyNames(ne)};function s(F){console&&console.warn&&console.warn(F)}var c=Number.isNaN||function(ne){return ne!==ne};function l(){l.init.call(this)}lc.exports=l,lc.exports.once=de,l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var d=10;function p(F){if(typeof F!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof F)}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return d},set:function(F){if(typeof F!="number"||F<0||c(F))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+F+".");d=F}}),l.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(ne){if(typeof ne!="number"||ne<0||c(ne))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+ne+".");return this._maxListeners=ne,this};function m(F){return F._maxListeners===void 0?l.defaultMaxListeners:F._maxListeners}l.prototype.getMaxListeners=function(){return m(this)},l.prototype.emit=function(ne){for(var me=[],ae=1;ae<arguments.length;ae++)me.push(arguments[ae]);var _e=ne==="error",Ce=this._events;if(Ce!==void 0)_e=_e&&Ce.error===void 0;else if(!_e)return!1;if(_e){var Re;if(me.length>0&&(Re=me[0]),Re instanceof Error)throw Re;var Le=new Error("Unhandled error."+(Re?" ("+Re.message+")":""));throw Le.context=Re,Le}var Ie=Ce[ne];if(Ie===void 0)return!1;if(typeof Ie=="function")n(Ie,this,me);else for(var Ne=Ie.length,Se=M(Ie,Ne),ae=0;ae<Ne;++ae)n(Se[ae],this,me);return!0};function g(F,ne,me,ae){var _e,Ce,Re;if(p(me),Ce=F._events,Ce===void 0?(Ce=F._events=Object.create(null),F._eventsCount=0):(Ce.newListener!==void 0&&(F.emit("newListener",ne,me.listener?me.listener:me),Ce=F._events),Re=Ce[ne]),Re===void 0)Re=Ce[ne]=me,++F._eventsCount;else if(typeof Re=="function"?Re=Ce[ne]=ae?[me,Re]:[Re,me]:ae?Re.unshift(me):Re.push(me),_e=m(F),_e>0&&Re.length>_e&&!Re.warned){Re.warned=!0;var Le=new Error("Possible EventEmitter memory leak detected. "+Re.length+" "+String(ne)+" listeners added. Use emitter.setMaxListeners() to increase limit");Le.name="MaxListenersExceededWarning",Le.emitter=F,Le.type=ne,Le.count=Re.length,s(Le)}return F}l.prototype.addListener=function(ne,me){return g(this,ne,me,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(ne,me){return g(this,ne,me,!0)};function y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function E(F,ne,me){var ae={fired:!1,wrapFn:void 0,target:F,type:ne,listener:me},_e=y.bind(ae);return _e.listener=me,ae.wrapFn=_e,_e}l.prototype.once=function(ne,me){return p(me),this.on(ne,E(this,ne,me)),this},l.prototype.prependOnceListener=function(ne,me){return p(me),this.prependListener(ne,E(this,ne,me)),this},l.prototype.removeListener=function(ne,me){var ae,_e,Ce,Re,Le;if(p(me),_e=this._events,_e===void 0)return this;if(ae=_e[ne],ae===void 0)return this;if(ae===me||ae.listener===me)--this._eventsCount===0?this._events=Object.create(null):(delete _e[ne],_e.removeListener&&this.emit("removeListener",ne,ae.listener||me));else if(typeof ae!="function"){for(Ce=-1,Re=ae.length-1;Re>=0;Re--)if(ae[Re]===me||ae[Re].listener===me){Le=ae[Re].listener,Ce=Re;break}if(Ce<0)return this;Ce===0?ae.shift():ee(ae,Ce),ae.length===1&&(_e[ne]=ae[0]),_e.removeListener!==void 0&&this.emit("removeListener",ne,Le||me)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(ne){var me,ae,_e;if(ae=this._events,ae===void 0)return this;if(ae.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):ae[ne]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete ae[ne]),this;if(arguments.length===0){var Ce=Object.keys(ae),Re;for(_e=0;_e<Ce.length;++_e)Re=Ce[_e],Re!=="removeListener"&&this.removeAllListeners(Re);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(me=ae[ne],typeof me=="function")this.removeListener(ne,me);else if(me!==void 0)for(_e=me.length-1;_e>=0;_e--)this.removeListener(ne,me[_e]);return this};function I(F,ne,me){var ae=F._events;if(ae===void 0)return[];var _e=ae[ne];return _e===void 0?[]:typeof _e=="function"?me?[_e.listener||_e]:[_e]:me?J(_e):M(_e,_e.length)}l.prototype.listeners=function(ne){return I(this,ne,!0)},l.prototype.rawListeners=function(ne){return I(this,ne,!1)},l.listenerCount=function(F,ne){return typeof F.listenerCount=="function"?F.listenerCount(ne):Y.call(F,ne)},l.prototype.listenerCount=Y;function Y(F){var ne=this._events;if(ne!==void 0){var me=ne[F];if(typeof me=="function")return 1;if(me!==void 0)return me.length}return 0}l.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function M(F,ne){for(var me=new Array(ne),ae=0;ae<ne;++ae)me[ae]=F[ae];return me}function ee(F,ne){for(;ne+1<F.length;ne++)F[ne]=F[ne+1];F.pop()}function J(F){for(var ne=new Array(F.length),me=0;me<ne.length;++me)ne[me]=F[me].listener||F[me];return ne}function de(F,ne){return new Promise(function(me,ae){function _e(Re){F.removeListener(ne,Ce),ae(Re)}function Ce(){typeof F.removeListener=="function"&&F.removeListener("error",_e),me([].slice.call(arguments))}pe(F,ne,Ce,{once:!0}),ne!=="error"&&ue(F,_e,{once:!0})})}function ue(F,ne,me){typeof F.on=="function"&&pe(F,"error",ne,me)}function pe(F,ne,me,ae){if(typeof F.on=="function")ae.once?F.once(ne,me):F.on(ne,me);else if(typeof F.addEventListener=="function")F.addEventListener(ne,function _e(Ce){ae.once&&F.removeEventListener(ne,_e),me(Ce)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof F)}return lc.exports}var ej=ZO();function tj(){return h0()}const nj=(r,n,i)=>{var s,c,l,d;return new Gd.CommunicationSignalingClient(r,n,{resourceEndpoint:(s=i?.resourceEndpoint)!==null&&s!==void 0?s:void 0,gatewayApiVersion:(c=i?.gatewayApiVersion)!==null&&c!==void 0?c:void 0,additionalPolicies:(l=i?.additionalPolicies)!==null&&l!==void 0?l:void 0,userAgentOptions:(d=i?.userAgentOptions)!==null&&d!==void 0?d:void 0})};class rj{constructor(n,i,s={}){this.endpoint=n,this.signalingClient=void 0,this.emitter=new ej.EventEmitter,this.isRealtimeNotificationsStarted=!1,this.tokenCredential=i;const c=Object.assign(Object.assign({},s),{loggingOptions:{logger:ks.info}});this.client=new oS(this.endpoint,Object.assign({endpoint:this.endpoint},c));const l=sS(this.tokenCredential);this.client.pipeline.addPolicy(l),this.clientOptions=Object.assign({},s),this.clientOptions.signalingClientOptions=Object.assign(Object.assign({},this.clientOptions.signalingClientOptions),{resourceEndpoint:this.endpoint,gatewayApiVersion:this.client.apiVersion}),this.signalingClient=nj(i,ks,this.clientOptions.signalingClientOptions)}getChatThreadClient(n){return new WO(this.endpoint,n,this.tokenCredential,this.clientOptions)}async createChatThread(n,i={}){return et.withSpan("ChatClient-CreateChatThread",i,async s=>{var c,l;s.idempotencyToken=(c=s.idempotencyToken)!==null&&c!==void 0?c:tj();const d=iO(s),p=await this.client.chat.createChatThread({topic:n.topic,participants:(l=i.participants)===null||l===void 0?void 0:l.map(m=>zb(m)),metadata:i.metadata,retentionPolicy:i.retentionPolicy},d);return cO(p)})}listChatThreadsPage(n){return Xr(this,arguments,function*(s,c={}){if(!s.continuationToken){const l=yield st(this.client.chat.listChatThreads(c));s.continuationToken=l.nextLink,l.value&&(yield yield st(l.value))}for(;s.continuationToken;){const l=yield st(this.client.chat.listChatThreadsNext(s.continuationToken,c));if(s.continuationToken=l.nextLink,l.value)yield yield st(l.value);else break}})}listChatThreadsAll(n){return Xr(this,arguments,function*(){var s,c,l,d;try{for(var p=!0,m=Yr(this.listChatThreadsPage({},n)),g;g=yield st(m.next()),s=g.done,!s;p=!0)d=g.value,p=!1,yield st(yield*mc(Yr(d)))}catch(y){c={error:y}}finally{try{!p&&!s&&(l=m.return)&&(yield st(l.call(m)))}finally{if(c)throw c.error}}})}listChatThreads(n={}){const{span:i,updatedOptions:s}=et.startSpan("ChatClient-ListChatThreads",n);try{const c=this.listChatThreadsAll(s);return{next(){return c.next()},[Symbol.asyncIterator](){return this},byPage:(l={})=>this.listChatThreadsPage(l,s)}}catch(c){throw i.setStatus({error:c,status:"error"}),c}finally{i.end()}}async deleteChatThread(n,i={}){return et.withSpan("ChatClient-DeleteChatThread",i,async s=>{await this.client.chat.deleteChatThread(n,s)})}async startRealtimeNotifications(){if(this.signalingClient===void 0)throw new Error("Realtime notifications are not supported in node js.");this.isRealtimeNotificationsStarted||(this.isRealtimeNotificationsStarted=!0,await this.signalingClient.start(),this.subscribeToSignalingEvents())}async stopRealtimeNotifications(){if(this.signalingClient===void 0)throw new Error("Realtime notifications are not supported in node js.");this.isRealtimeNotificationsStarted=!1,await this.signalingClient.stop(),this.emitter.removeAllListeners()}on(n,i){if(this.signalingClient===void 0)throw new Error("Realtime notifications are only supported in the browser.");if(!this.isRealtimeNotificationsStarted&&n!=="realTimeNotificationConnected"&&n!=="realTimeNotificationDisconnected")throw new Error("You must call startRealtimeNotifications before you can subscribe to events.");this.emitter.on(n,i)}off(n,i){if(this.signalingClient===void 0)throw new Error("Realtime notifications are only supported in the browser.");this.emitter.removeListener(n,i)}subscribeToSignalingEvents(){if(this.signalingClient===void 0)throw new Error("Realtime notifications are only supported in the browser.");this.signalingClient.on("connectionChanged",n=>{n===Gd.ConnectionState.Connected?this.emitter.emit("realTimeNotificationConnected"):n===Gd.ConnectionState.Disconnected&&this.emitter.emit("realTimeNotificationDisconnected")}),this.signalingClient.on("chatMessageReceived",n=>{this.emitter.emit("chatMessageReceived",n)}),this.signalingClient.on("chatMessageEdited",n=>{this.emitter.emit("chatMessageEdited",n)}),this.signalingClient.on("chatMessageDeleted",n=>{this.emitter.emit("chatMessageDeleted",n)}),this.signalingClient.on("typingIndicatorReceived",n=>{this.emitter.emit("typingIndicatorReceived",n)}),this.signalingClient.on("readReceiptReceived",n=>{this.emitter.emit("readReceiptReceived",n)}),this.signalingClient.on("chatThreadCreated",n=>{this.emitter.emit("chatThreadCreated",n)}),this.signalingClient.on("chatThreadDeleted",n=>{this.emitter.emit("chatThreadDeleted",n)}),this.signalingClient.on("chatThreadPropertiesUpdated",n=>{this.emitter.emit("chatThreadPropertiesUpdated",n)}),this.signalingClient.on("participantsAdded",n=>{this.emitter.emit("participantsAdded",n)}),this.signalingClient.on("participantsRemoved",n=>{this.emitter.emit("participantsRemoved",n)})}}function ij(){const{recipientId:r}=cv(),n=Wr(),[i,s]=z.useState(null),[c,l]=z.useState(null),[d,p]=z.useState(null),[m,g]=z.useState([]),[y,E]=z.useState(""),[I,Y]=z.useState(!0),[M,ee]=z.useState(!1),[J,de]=z.useState(null),ue=localStorage.getItem("userId"),pe=z.useRef(null),F=z.useRef(!1),ne=z.useRef(null),me=z.useRef(null),ae=z.useRef(null),_e=(Ne,Se="success")=>{de({message:Ne,type:Se}),Se==="success"&&setTimeout(()=>{de(De=>De?{...De,hiding:!0}:null),setTimeout(()=>de(null),300)},3e3)},Ce=Ne=>{console.log("Real-time message event received:",Ne),Ne.threadId===me.current&&Ne.sender.communicationUserId!==ae.current&&g(Se=>Se.find(De=>De.id===Ne.id)?Se:[...Se,{id:Ne.id,sender:"Recipient",text:Ne.message,timestamp:new Date}])};z.useEffect(()=>(ue&&r&&!F.current&&(F.current=!0,Le()),()=>{ne.current&&(console.log("Cleaning up chat real-time notifications..."),ne.current.off("chatMessageReceived",Ce),ne.current.stopRealtimeNotifications().catch(console.error),ne.current=null)}),[ue,r]),z.useEffect(()=>{Re()},[m]);const Re=()=>{pe.current?.scrollIntoView({behavior:"smooth"})},Le=async()=>{try{Y(!0),console.log("Initializing chat for user:",ue,"with recipient:",r),console.log("Fetching chat token...");const Ne=await Je.get("issuechattoken",{params:{userId:ue}}),{token:Se,user:De}=Ne.data;s(Se),ae.current=De.communicationUserId,console.log("Token received for ACS ID:",De.communicationUserId);const q=new K2(Se),U=new rj("https://acs-festive-guest.india.communication.azure.com/",q);ne.current=U,l(U),console.log("Getting or creating chat thread...");const L=(await Je.post("getorcreatechatthread",{userId:ue,recipientId:r})).data.threadId;console.log("Thread ID received:",L),me.current=L,p(L),console.log("Loading message history...");const S=U.getChatThreadClient(L).listMessages(),j=[];for await(const x of S)x.type==="text"&&j.push({id:x.id,sender:x.sender.communicationUserId===De.communicationUserId?"Me":"Recipient",text:x.content.message,timestamp:x.createdOn});g(j.reverse()),console.log("Starting real-time notifications..."),await U.startRealtimeNotifications(),U.on("chatMessageReceived",Ce),console.log("Chat initialization complete.")}catch(Ne){console.error("Failed to init chat:",Ne),_e("Failed to initialize chat: "+(Ne.response?.data?.error||Ne.message),"error")}finally{Y(!1)}},Ie=async Ne=>{if(Ne.preventDefault(),!!y.trim()){if(!ne.current||!me.current){_e("Chat not fully initialized. Please wait...","error");return}try{ee(!0);const Se=ne.current.getChatThreadClient(me.current),De=y;console.log("Attempting to send message to ACS...");const q=await Se.sendMessage({content:De});console.log("Message sent successfully. ID:",q.id),E(""),g(U=>U.find(Q=>Q.id===q.id)?U:[...U,{id:q.id,sender:"Me",text:De,timestamp:new Date}])}catch(Se){console.error("Failed to send message:",Se),_e("Failed to send message: "+Se.message,"error")}finally{ee(!1)}}};return I?h.jsxs("div",{className:"container",style:{textAlign:"center",padding:"5rem"},children:[h.jsx("div",{className:"spinner"}),h.jsx("p",{children:"Initializing secure chat..."})]}):h.jsxs("div",{className:"modern-chat-page",children:[J&&h.jsx("div",{className:"toast-container",children:h.jsxs("div",{className:`toast ${J.type} ${J.hiding?"hiding":""}`,children:[h.jsx("span",{className:"toast-icon",children:J.type==="success"?"":J.type==="error"?"":""}),h.jsx("div",{className:"toast-content",children:h.jsx("p",{className:"toast-message",children:J.message})}),J.type!=="success"&&h.jsx("button",{onClick:()=>de(null),style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.2rem",padding:"0 0.5rem"},children:""})]})}),h.jsxs("div",{className:"chat-window-full",children:[h.jsx("div",{className:"chat-header-full",children:h.jsxs("div",{className:"chat-user-info-full",children:[h.jsx("button",{onClick:()=>n(-1),className:"back-btn-modern",title:"Go Back",children:h.jsx(nf,{size:20})}),h.jsx("div",{className:"user-avatar",children:""}),h.jsxs("div",{className:"user-details",children:[h.jsx("h3",{children:"Secure Chat"}),h.jsx("span",{className:"user-status",children:" Online"})]})]})}),h.jsxs("div",{className:"chat-messages",children:[m.map((Ne,Se)=>h.jsxs("div",{className:`message-bubble ${Ne.sender==="Me"?"sent":"received"}`,children:[h.jsx("div",{className:"message-content",children:Ne.text}),h.jsx("div",{className:"message-time",children:new Date(Ne.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]},Ne.id||Se)),h.jsx("div",{ref:pe})]}),h.jsxs("form",{onSubmit:Ie,className:"chat-input",children:[h.jsx("input",{type:"text",value:y,onChange:Ne=>E(Ne.target.value),placeholder:"Type a message...",className:"message-input"}),h.jsx("button",{type:"submit",className:"send-btn",disabled:M,children:M?h.jsx("span",{className:"spinner-small"}):h.jsx(mo,{size:20})})]})]})]})}const oj=()=>{const[r,n]=z.useState([]),[i,s]=z.useState(null),[c,l]=z.useState([]),[d,p]=z.useState(""),[m,g]=z.useState(!1),[y,E]=z.useState(!1),[I,Y]=z.useState(!1),[M,ee]=z.useState(null),J=localStorage.getItem("userId"),de=z.useRef(null);z.useEffect(()=>{pe()},[]),z.useEffect(()=>{de.current?.scrollIntoView({behavior:"auto"})},[c]);const ue=async Ce=>{try{const Re=await Je.post("user/public-profile",{userId:Ce});ee(Re.data)}catch(Re){console.error("Failed to fetch profile:",Re)}},pe=async()=>{try{g(!0);const Ce=await Je.get("chat/conversations");n(Ce.data||[])}catch(Ce){console.error("Failed to fetch conversations:",Ce)}finally{g(!1)}},F=async Ce=>{s(Ce),l([]),await ne(Ce.otherUserId),Y(!0)},ne=async Ce=>{try{const Le=(await Je.get(`chat/messages/${Ce}`)).data.map(Ie=>({id:Ie.id,sender:Ie.senderId===J?"Me":"Recipient",text:Ie.message,timestamp:new Date(Ie.timestamp),status:Ie.status}));l(Le)}catch(Re){console.error("Failed to load messages:",Re)}},me=()=>{Y(!1),s(null)},ae=async Ce=>{if(Ce.preventDefault(),!(!d.trim()||!i))try{E(!0);const Re=d;p(""),l(Le=>[...Le,{id:Date.now(),sender:"Me",text:Re,timestamp:new Date,status:"Sent"}]),await Kn.sendMessage(i.otherUserId,Re)}catch(Re){console.error("Failed to send message:",Re)}finally{E(!1)}},_e=Ce=>{const Re=new Date(Ce),Ie=new Date-Re;return Math.floor(Ie/(1e3*60*60))<24?Re.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):Re.toLocaleDateString([],{month:"short",day:"numeric"})};return h.jsxs("div",{className:"chats-container",children:[h.jsxs("div",{className:`conversations-sidebar ${I?"mobile-hidden":""}`,children:[h.jsx("div",{className:"sidebar-header",children:h.jsx("h3",{children:" Messages"})}),h.jsx("div",{className:"conversations-list",children:m?h.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#64748b"},children:"Loading..."}):r.length===0?h.jsx("div",{className:"no-conversations",children:h.jsx("p",{children:"No conversations yet"})}):r.map(Ce=>h.jsxs("div",{className:`conversation-item ${i?.otherUserId===Ce.otherUserId?"active":""}`,onClick:()=>F(Ce),children:[h.jsx("div",{className:"conversation-avatar",children:h.jsx(Qn,{src:Ce.profileImageUrl,alt:Ce.otherUserName,style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"},fallbackText:"User"})}),h.jsxs("div",{className:"conversation-content",children:[h.jsxs("div",{className:"conversation-header",children:[h.jsx("div",{className:"conversation-name",children:Ce.otherUserName}),h.jsx("div",{className:"conversation-time",children:_e(Ce.timestamp)})]}),h.jsxs("div",{className:"conversation-preview",children:[Ce.lastSenderId===J?"You: ":"",Ce.lastMessage||"Start chatting"]})]}),Ce.unreadCount>0&&h.jsx("div",{style:{minWidth:"20px",height:"20px",borderRadius:"10px",background:"#6366f1",color:"white",fontSize:"11px",fontWeight:"600",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 6px"},children:Ce.unreadCount})]},Ce.chatRoom))})]}),h.jsx("div",{className:`chat-window ${I?"mobile-visible":""}`,children:i?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"chat-header",children:[h.jsx("button",{className:"mobile-back-btn",onClick:me,children:h.jsx(nf,{size:20})}),h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[h.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",background:"#e2e8f0",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",cursor:"pointer"},onClick:()=>ue(i.otherUserId),children:h.jsx(Qn,{src:i.profileImageUrl,alt:i.otherUserName,style:{width:"100%",height:"100%",objectFit:"cover"},fallbackText:"User"})}),h.jsx("h4",{style:{margin:0,cursor:"pointer"},onClick:()=>ue(i.otherUserId),children:i.otherUserName})]})]}),h.jsxs("div",{className:"chat-messages",children:[c.map((Ce,Re)=>h.jsxs("div",{className:`message ${Ce.sender==="Me"?"sent":"received"}`,children:[h.jsx("div",{className:"message-content",children:Ce.text}),h.jsxs("div",{className:"message-time",children:[new Date(Ce.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),Ce.sender==="Me"&&Ce.status&&h.jsxs("span",{style:{marginLeft:"4px",fontSize:"10px"},children:[" ",Ce.status]})]})]},Ce.id||Re)),h.jsx("div",{ref:de})]}),h.jsxs("form",{onSubmit:ae,className:"chat-input",children:[h.jsx("input",{type:"text",value:d,onChange:Ce=>p(Ce.target.value),placeholder:"Type a message...",className:"message-input"}),h.jsx("button",{type:"submit",className:"send-btn",disabled:y,children:h.jsx(mo,{size:16})})]})]}):h.jsxs("div",{className:"no-chat-selected",children:[h.jsx("div",{style:{fontSize:"4rem",marginBottom:"1rem"},children:""}),h.jsx("h3",{children:"Select a conversation"}),h.jsx("p",{children:"Choose a conversation from the list to start chatting"})]})}),M&&h.jsx("div",{className:"modal-overlay",onClick:()=>ee(null),children:h.jsxs("div",{className:"modal-content",onClick:Ce=>Ce.stopPropagation(),style:{maxHeight:"90vh",overflowY:"auto"},children:[h.jsxs("div",{className:"modal-header",children:[h.jsx("h3",{children:M.name}),h.jsx("button",{onClick:()=>ee(null),className:"modal-close",children:""})]}),h.jsxs("div",{className:"modal-body",children:[h.jsxs("div",{style:{display:"flex",gap:"1rem",marginBottom:"1.5rem",alignItems:"flex-start"},children:[h.jsx(Qn,{src:M.profileImageUrl,alt:M.name,className:"modal-profile-image",fallbackText:"Profile",style:{flexShrink:0,width:"100px",height:"100px"}}),h.jsxs("div",{style:{flex:1},children:[h.jsx("h3",{style:{margin:"0 0 0.5rem 0",fontSize:"1.25rem"},children:M.name}),h.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.25rem"},children:h.jsxs("span",{style:{color:"#64748b"},children:[" ",M.location]})}),h.jsxs("p",{style:{color:"#64748b",fontSize:"0.9rem",margin:"0"},children:[M.userType,"  Joined ",new Date(M.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long"})]})]})]}),h.jsxs("div",{style:{marginBottom:"1.5rem"},children:[h.jsx("h4",{style:{marginBottom:"0.75rem",color:"var(--text)"},children:M.userType==="Host"?" About My Hosting":" About Me"}),h.jsx("p",{style:{color:"#475569",lineHeight:"1.5",background:"#f8fafc",padding:"1rem",borderRadius:"0.5rem",margin:"0"},children:M.bio||"No description provided."})]})]})]})})]})};function sj(){const[r,n]=z.useState([]),[i,s]=z.useState(!0),[c,l]=z.useState(!1),[d,p]=z.useState(""),[m,g]=z.useState(!1);z.useEffect(()=>{y()},[]);const y=async()=>{try{const M=await Je.get("listpayments");n(M.data)}catch{console.error("Failed to fetch payments")}finally{s(!1)}},E=async()=>{g(!0);try{const M=await Je.post("seedlocations"),ee=await Je.get("getlocations");p(` APIs working! Seeded: ${M.data.count} locations. Retrieved: ${Object.keys(ee.data).length} states.`)}catch(M){p(` API Error: ${M.message}`)}finally{g(!1)}},I=async()=>{l(!0);try{const M=await lf.seedLocations();alert(`Locations seeded successfully! ${M.count} locations added.`)}catch(M){alert("Failed to seed locations: "+M.message)}finally{l(!1)}},Y=async(M,ee)=>{try{await Je.post("verifypayment",{paymentId:M,userId:ee}),alert("Payment verified and user updated!"),y()}catch(J){alert("Verification failed: "+J.message)}};return h.jsxs("div",{className:"admin-container",children:[h.jsx("h2",{children:"Admin Dashboard"}),h.jsxs("div",{className:"admin-section",style:{marginBottom:"2rem",padding:"1rem",border:"1px solid #e2e8f0",borderRadius:"0.5rem"},children:[h.jsx("h3",{children:"Location Management"}),h.jsx("p",{children:"Test and seed the locations table with initial data."}),h.jsxs("div",{style:{marginBottom:"1rem"},children:[h.jsx("button",{className:"btn btn-secondary",onClick:E,disabled:m,style:{marginRight:"1rem"},children:m?"Testing APIs...":"Test Location APIs"}),h.jsx("button",{className:"btn btn-primary",onClick:I,disabled:c,children:c?"Seeding Locations...":"Seed Locations Table"})]}),d&&h.jsx("div",{style:{padding:"0.5rem",background:d.includes("")?"#d1fae5":"#fee2e2",borderRadius:"0.25rem",fontSize:"0.9rem"},children:d})]}),h.jsxs("div",{className:"admin-section",children:[h.jsx("h3",{children:"Verify Payments"}),i?h.jsx("p",{children:"Loading..."}):h.jsx("div",{className:"payment-list",children:h.jsxs("table",{className:"admin-table",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"User ID"}),h.jsx("th",{children:"Type"}),h.jsx("th",{children:"UPI Ref"}),h.jsx("th",{children:"Amount"}),h.jsx("th",{children:"Action"})]})}),h.jsx("tbody",{children:r.length>0?r.map(M=>h.jsxs("tr",{children:[h.jsx("td",{children:M.partitionKey}),h.jsx("td",{children:M.type}),h.jsx("td",{children:M.upiRef}),h.jsxs("td",{children:["",M.amount]}),h.jsx("td",{children:h.jsx("button",{className:"btn btn-success btn-sm",onClick:()=>Y(M.rowKey,M.partitionKey),children:"Verify"})})]},M.rowKey)):h.jsx("tr",{children:h.jsx("td",{colSpan:"5",style:{textAlign:"center"},children:"No pending payments"})})})]})})]})]})}function aj(){const[r,n]=z.useState(null),[i,s]=z.useState(null),[c,l]=z.useState(""),[d,p]=z.useState(!1),[m,g]=z.useState(""),[y,E]=z.useState(!1),[I,Y]=z.useState({subject:"",message:""}),[M,ee]=z.useState(!1),[J,de]=z.useState(!1),ue=localStorage.getItem("userId");z.useEffect(()=>{ue&&pe()},[ue]);const pe=async()=>{try{let Le=(await Je.get("user/profile")).data;const Ie=JSON.parse(localStorage.getItem("user")),Ne={...Le,token:Ie?.token,role:Le.userType||Ie?.role};n(Ne),localStorage.setItem("user",JSON.stringify(Ne)),g(Ne.referralCode||"Loading..."),window.dispatchEvent(new Event("storage"))}catch{console.error("User not found")}},F=Re=>{const Le=Re.target.files[0];Le&&(s(Le),l(URL.createObjectURL(Le)))},ne=async()=>{if(!i||!r){alert("Please select a file and ensure your profile is loaded before uploading.");return}try{console.log("Step 1: Compressing image...");const Re=await me(i);console.log("Step 2: Getting SAS token from API...");const Le=await Je.get("user/upload-sas-token");console.log("SAS token response:",Le.data);const{sasUrl:Ie}=Le.data;console.log("Step 3: Uploading to blob storage...",Ie);const Ne=await fetch(Ie,{method:"PUT",headers:{"x-ms-blob-type":"BlockBlob","Content-Type":"image/jpeg"},body:Re});if(console.log("Upload response status:",Ne.status),!Ne.ok)throw new Error(`Upload failed: ${Ne.status} ${Ne.statusText}`);console.log("Step 4: Confirming upload with API...");const Se=Ie.split("?")[0];await Je.post("user/confirm-upload",{imageUrl:Se}),alert("Profile image uploaded successfully!"),s(null),l(""),p(!1),await pe()}catch(Re){console.error("Upload failed:",Re),console.error("Error details:",Re.response?.data),alert("Image upload failed: "+(Re.response?.data?.error||Re.message))}},me=Re=>new Promise(Le=>{const Ie=document.createElement("canvas"),Ne=Ie.getContext("2d"),Se=new Image;Se.onload=()=>{let{width:De,height:q}=Se;const U=800;De>q?De>U&&(q=q*U/De,De=U):q>U&&(De=De*U/q,q=U),Ie.width=De,Ie.height=q,Ne.drawImage(Se,0,0,De,q),Ie.toBlob(Q=>{Le(Q)},"image/jpeg",.8)},Se.src=URL.createObjectURL(Re)}),ae=()=>{navigator.clipboard.writeText(m),E(!0),setTimeout(()=>E(!1),2e3)},_e=()=>{const Re=`Join FestiveGuest and celebrate festivals with locals! Use my referral code: ${m}`;navigator.share?navigator.share({text:Re}):ae()},Ce=async Re=>{if(Re.preventDefault(),!I.subject||!I.message){alert("Please fill all fields");return}ee(!0);try{await Je.post("feedback",{name:r.name,email:r.email,subject:I.subject,message:I.message,userType:r.userType}),de(!0),Y({subject:"",message:""}),setTimeout(()=>de(!1),3e3)}catch(Le){console.error("Failed to send feedback:",Le),alert("Failed to send feedback. Please try again.")}finally{ee(!1)}};return r?h.jsxs("div",{className:"profile-container",children:[h.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[h.jsx("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:" My Profile"}),h.jsx("p",{style:{color:"#64748b",margin:"0"},children:"View your profile information"})]}),h.jsxs("div",{className:"profile-card",children:[h.jsxs("div",{className:"profile-image-section",children:[h.jsx(Qn,{src:c||r.profileImageUrl,alt:"Profile",className:"profile-img-preview",fallbackText:"Profile"}),h.jsx("div",{style:{marginTop:"0.75rem",display:"flex",flexDirection:"column",gap:"0.4rem",alignItems:"center"},children:d?h.jsxs(h.Fragment,{children:[h.jsx("label",{htmlFor:"file-input",className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.3rem",cursor:"pointer",padding:"0.4rem 0.8rem",fontSize:"0.875rem"},children:" Choose File"}),h.jsx("input",{id:"file-input",type:"file",accept:"image/*",onChange:F,style:{display:"none"}}),h.jsxs("button",{className:"btn btn-primary",onClick:ne,disabled:!i,style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.4rem 0.8rem",fontSize:"0.875rem"},children:[h.jsx(W1,{size:14})," Upload"]}),h.jsxs("button",{className:"btn btn-secondary",onClick:()=>{p(!1),s(null),l("")},style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.4rem 0.8rem",fontSize:"0.875rem"},children:[h.jsx(rf,{size:14})," Cancel"]})]}):h.jsxs("button",{className:"btn btn-secondary",onClick:()=>p(!0),style:{display:"flex",alignItems:"center",gap:"0.3rem",padding:"0.4rem 0.8rem",fontSize:"0.875rem"},children:[h.jsx(J1,{size:14})," Edit Photo"]})}),h.jsx("p",{style:{color:"#64748b",fontSize:"0.875rem",textAlign:"center"},children:"Upload a profile photo"})]}),h.jsx("div",{className:"profile-details",children:h.jsxs("div",{style:{display:"grid",gap:"1rem"},children:[h.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #3b82f6"},children:h.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx("strong",{children:" Email:"})," ",r.email]})}),h.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #ef4444"},children:h.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx("strong",{children:" Phone:"})," ",r.phone]})}),h.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #6366f1"},children:h.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx("strong",{children:" Name:"})," ",r.name]})}),h.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #10b981"},children:h.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx("strong",{children:" Role:"})," ",r.userType==="Host"?" Host":" Guest"]})}),h.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #f59e0b"},children:h.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx("strong",{children:" Location:"})," ",r.location]})}),h.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #ec4899"},children:h.jsxs("p",{style:{margin:"0",display:"flex",flexDirection:"column",gap:"0.5rem"},children:[h.jsx("strong",{children:r.userType==="Host"?" My Offerings:":" My Festival Wishes:"}),h.jsx("span",{style:{color:"#475569",fontSize:"0.95rem",lineHeight:"1.5"},children:r.bio||"Not specified"})]})}),h.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #f59e0b"},children:h.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx("strong",{children:" Status:"}),h.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.875rem",background:r.status==="Active"?"#dcfce7":"#fef3c7",color:r.status==="Active"?"#166534":"#92400e"},children:r.status})]})}),h.jsx("div",{style:{padding:"1rem",background:"#f8fafc",borderRadius:"0.75rem",borderLeft:"4px solid #8b5cf6"},children:h.jsxs("p",{style:{margin:"0",display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx("strong",{children:" Contact Enabled:"}),h.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"1rem",fontSize:"0.875rem",background:r.isVerified?"#dcfce7":"#fee2e2",color:r.isVerified?"#166534":"#dc2626"},children:r.isVerified?" Yes":" No"})]})})]})})]}),h.jsxs("div",{className:"profile-card",style:{marginTop:"2rem"},children:[h.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[h.jsxs("h3",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[h.jsx(Ac,{size:24,style:{color:"var(--primary)"}}),"Refer a Friend"]}),h.jsx("p",{style:{color:"#64748b",margin:"0"},children:"Share FestiveGuest with friends and earn rewards!"})]}),h.jsxs("div",{style:{background:"#f8fafc",padding:"1.5rem",borderRadius:"0.75rem",border:"2px dashed var(--primary)"},children:[h.jsxs("div",{style:{textAlign:"center",marginBottom:"1rem"},children:[h.jsx("p",{style:{margin:"0 0 0.5rem 0",fontWeight:"600"},children:"Your Referral Code:"}),h.jsx("div",{style:{background:"white",padding:"0.75rem 1rem",borderRadius:"0.5rem",border:"1px solid var(--border)",fontSize:"1.25rem",fontWeight:"bold",color:"var(--primary)",letterSpacing:"2px"},children:m})]}),h.jsxs("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"center",flexWrap:"wrap"},children:[h.jsxs("button",{onClick:ae,className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem"},children:[h.jsx(w1,{size:16}),y?"Copied!":"Copy Code"]}),h.jsxs("button",{onClick:_e,className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem"},children:[h.jsx(G1,{size:16}),"Share"]})]}),h.jsx("div",{style:{marginTop:"1rem",textAlign:"center"},children:h.jsx("p",{style:{margin:"0",fontSize:"0.875rem",color:"#64748b"},children:"When friends join using your code, you both get special benefits!"})})]})]}),h.jsxs("div",{className:"profile-card",style:{marginTop:"2rem"},children:[h.jsxs("div",{style:{textAlign:"center",marginBottom:"1.5rem"},children:[h.jsxs("h3",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[h.jsx(z1,{size:24,style:{color:"var(--primary)"}}),"Send Feedback"]}),h.jsx("p",{style:{color:"#64748b",margin:"0"},children:r.userType==="Host"?"Share your hosting experience or suggestions":"Tell us about your guest experience"})]}),J?h.jsxs("div",{style:{textAlign:"center",padding:"2rem",color:"var(--success)"},children:[h.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},children:""}),h.jsx("h4",{children:"Feedback Sent Successfully!"}),h.jsx("p",{children:"Thank you for your valuable feedback. We'll review it and get back to you if needed."})]}):h.jsx("form",{onSubmit:Ce,children:h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[h.jsxs("div",{children:[h.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Subject"}),h.jsxs("select",{value:I.subject,onChange:Re=>Y({...I,subject:Re.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"0.5rem",boxSizing:"border-box"},children:[h.jsx("option",{value:"",children:"Select feedback type..."}),r.userType==="Host"?h.jsxs(h.Fragment,{children:[h.jsx("option",{value:"hosting-experience",children:"Hosting Experience"}),h.jsx("option",{value:"guest-interaction",children:"Guest Interaction"}),h.jsx("option",{value:"platform-features",children:"Platform Features"}),h.jsx("option",{value:"payment-issues",children:"Payment Issues"}),h.jsx("option",{value:"safety-concerns",children:"Safety Concerns"}),h.jsx("option",{value:"suggestions",children:"Suggestions for Improvement"})]}):h.jsxs(h.Fragment,{children:[h.jsx("option",{value:"guest-experience",children:"Guest Experience"}),h.jsx("option",{value:"host-interaction",children:"Host Interaction"}),h.jsx("option",{value:"booking-process",children:"Booking Process"}),h.jsx("option",{value:"app-usability",children:"App Usability"}),h.jsx("option",{value:"safety-concerns",children:"Safety Concerns"}),h.jsx("option",{value:"suggestions",children:"Suggestions for Improvement"})]}),h.jsx("option",{value:"other",children:"Other"})]})]}),h.jsxs("div",{children:[h.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Message"}),h.jsx("textarea",{placeholder:r.userType==="Host"?"Share your hosting experience, challenges, or suggestions...":"Tell us about your experience as a guest, any issues, or suggestions...",value:I.message,onChange:Re=>Y({...I,message:Re.target.value}),rows:5,style:{width:"100%",padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"0.5rem",resize:"vertical",boxSizing:"border-box"}})]}),h.jsxs("button",{type:"submit",disabled:M,className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"center",alignSelf:"flex-start"},children:[h.jsx(mo,{size:16}),M?"Sending...":"Send Feedback"]})]})})]})]}):h.jsx("div",{className:"profile-container text-center",style:{padding:"3rem"},children:h.jsx("div",{className:"loading",children:"Loading profile..."})})}function cj(){const{userName:r}=cv(),n=Wr(),[i,s]=z.useState(null),[c,l]=z.useState([]),[d,p]=z.useState(!0);z.useEffect(()=>{m()},[r]);const m=async()=>{try{console.log("Fetching profile for userName:",r);const[I,Y]=await Promise.all([Je.get(`user/public-profile-by-name/${encodeURIComponent(r)}`),Je.get(`user/reviews-by-name/${encodeURIComponent(r)}`)]);s(I.data),l(Y.data||[])}catch(I){console.error("Failed to fetch profile:",I),console.error("Error details:",I.response?.data),console.error("Requested userName:",r)}finally{p(!1)}},g=I=>Array.from({length:5},(Y,M)=>h.jsx(Ud,{size:16,fill:M<I?"#fbbf24":"none",color:M<I?"#fbbf24":"#d1d5db"},M)),y=I=>new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"long"});if(d)return h.jsx("div",{className:"profile-container text-center",style:{padding:"3rem"},children:h.jsx("div",{className:"loading",children:"Loading profile..."})});if(!i)return h.jsxs("div",{className:"profile-container text-center",style:{padding:"3rem"},children:[h.jsx("h3",{children:"Profile not found"}),h.jsx("button",{onClick:()=>n(-1),className:"btn btn-primary",children:"Go Back"})]});const E=c.length>0?c.reduce((I,Y)=>I+Y.rating,0)/c.length:0;return h.jsxs("div",{className:"profile-container",children:[h.jsxs("div",{style:{marginBottom:"2rem"},children:[h.jsxs("button",{onClick:()=>n(-1),className:"btn btn-secondary",style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem"},children:[h.jsx(nf,{size:16})," Back"]}),h.jsxs("div",{style:{textAlign:"center"},children:[h.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",margin:"0 0 0.5rem 0"},children:[i.userType==="Host"?"":""," ",i.name]}),h.jsxs("p",{style:{color:"#64748b",margin:"0"},children:[i.userType,"  Joined ",y(i.createdAt)]})]})]}),h.jsxs("div",{className:"profile-card",children:[h.jsxs("div",{style:{textAlign:"center",marginBottom:"2rem"},children:[h.jsx(Qn,{src:i.profileImageUrl,alt:i.name,style:{width:"150px",height:"150px",borderRadius:"50%",objectFit:"cover",border:"4px solid var(--border)",marginBottom:"1rem"},fallbackText:"Profile"}),h.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[h.jsx(M1,{size:16,color:"#64748b"}),h.jsx("span",{style:{color:"#64748b"},children:i.location})]}),c.length>0&&h.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",marginBottom:"1rem"},children:[h.jsx("div",{style:{display:"flex",gap:"2px"},children:g(Math.round(E))}),h.jsx("span",{style:{fontWeight:"600"},children:E.toFixed(1)}),h.jsxs("span",{style:{color:"#64748b"},children:["(",c.length," reviews)"]})]})]}),h.jsxs("div",{style:{marginBottom:"2rem"},children:[h.jsx("h4",{style:{marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:i.userType==="Host"?" About My Hosting":" About Me"}),h.jsx("p",{style:{color:"#475569",lineHeight:"1.6",background:"#f8fafc",padding:"1rem",borderRadius:"0.75rem",borderLeft:"4px solid var(--primary)"},children:i.bio||"No description provided."})]})]}),c.length>0&&h.jsxs("div",{className:"profile-card",style:{marginTop:"2rem"},children:[h.jsxs("h3",{style:{marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx(Ud,{size:20,color:"#fbbf24"}),"Reviews (",c.length,")"]}),h.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:c.map((I,Y)=>h.jsxs("div",{style:{background:"#f8fafc",padding:"1rem",borderRadius:"0.75rem",border:"1px solid var(--border)"},children:[h.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[h.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx("strong",{children:I.reviewerName}),h.jsx("div",{style:{display:"flex",gap:"2px"},children:g(I.rating)})]}),h.jsx("span",{style:{color:"#64748b",fontSize:"0.875rem"},children:y(I.createdAt)})]}),h.jsx("p",{style:{margin:"0",color:"#475569",lineHeight:"1.5"},children:I.comment})]},Y))})]})]})}const lj=()=>{const[r,n]=z.useState({name:"",email:"",message:""}),[i,s]=z.useState(!1),[c,l]=z.useState(!1),d=async m=>{if(m.preventDefault(),!r.name||!r.email||!r.message){alert("Please fill all fields");return}s(!0);try{await Je.post("feedback",r),l(!0),n({name:"",email:"",message:""}),setTimeout(()=>l(!1),3e3)}catch(g){console.error("Failed to send feedback:",g),alert("Failed to send feedback. Please try again.")}finally{s(!1)}},p=()=>{window.open("https://wa.me/919966888484","_blank","noopener,noreferrer")};return h.jsx("div",{className:"help-page",children:h.jsxs("div",{className:"help-container",children:[h.jsxs("div",{className:"help-header",children:[h.jsx(yc,{size:48,className:"help-icon",style:{color:"var(--primary)"}}),h.jsxs("h1",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem"},children:[h.jsx(Ac,{size:32,style:{color:"var(--primary)"}}),"Help & Support"]}),h.jsx("p",{children:"We're here to help you with any questions or issues you may have."})]}),h.jsxs("div",{className:"help-content",children:[h.jsxs("div",{className:"help-card",children:[h.jsx(Jg,{size:32,className:"card-icon",style:{color:"var(--primary)"}}),h.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx(b1,{size:20}),"Email Support"]}),h.jsx("p",{children:"Send us an email and we'll get back to you as soon as possible."}),h.jsxs("a",{href:"mailto:support@festiveguest.com",className:"btn btn-outline",style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx(Jg,{size:16}),"Customer Support"]})]}),h.jsxs("div",{className:"help-card",children:[h.jsx(vc,{size:32,className:"card-icon",style:{color:"#25D366"}}),h.jsxs("h3",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx(H1,{size:20}),"WhatsApp Support"]}),h.jsx("p",{children:"Chat with our support team directly for quick assistance."}),h.jsxs("button",{onClick:p,className:"btn btn-primary whatsapp-btn",style:{cursor:"pointer",border:"none",display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx(vc,{size:16}),"Chat on WhatsApp"]})]})]}),h.jsx("div",{className:"feedback-section",style:{marginTop:"3rem",display:"flex",justifyContent:"center"},children:h.jsxs("div",{style:{width:"100%",maxWidth:"400px",background:"#f8fafc",padding:"2rem",borderRadius:"var(--radius)",boxShadow:"var(--shadow)",border:"1px solid var(--border)",transition:"all 0.3s ease",textAlign:"center"},onMouseEnter:m=>{m.target.style.transform="translateY(-5px)",m.target.style.borderColor="var(--primary)",m.target.style.boxShadow="var(--shadow)"},onMouseLeave:m=>{m.target.style.transform="translateY(0)",m.target.style.borderColor="var(--border)",m.target.style.boxShadow="var(--shadow)"},children:[h.jsx(mo,{size:32,className:"card-icon",style:{color:"var(--primary)",margin:"0 auto"}}),h.jsx("h3",{style:{textAlign:"center"},children:"Send Feedback"}),h.jsx("p",{style:{textAlign:"center"},children:"Share your thoughts or report issues directly with us."}),c?h.jsxs("div",{style:{color:"var(--success)",textAlign:"center",padding:"1rem"},children:[h.jsx(Yg,{size:24,style:{marginBottom:"0.5rem"}}),h.jsx("p",{children:"Feedback sent successfully!"})]}):h.jsx("form",{onSubmit:d,children:h.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[h.jsx("input",{type:"text",placeholder:"Your Name",value:r.name,onChange:m=>n({...r,name:m.target.value}),style:{padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"0.5rem",width:"100%",boxSizing:"border-box"}}),h.jsx("input",{type:"email",placeholder:"Your Email",value:r.email,onChange:m=>n({...r,email:m.target.value}),style:{padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"0.5rem",width:"100%",boxSizing:"border-box"}}),h.jsx("textarea",{placeholder:"Your feedback or message...",value:r.message,onChange:m=>n({...r,message:m.target.value}),rows:4,style:{padding:"0.75rem",border:"1px solid var(--border)",borderRadius:"0.5rem",resize:"vertical",width:"100%",boxSizing:"border-box"}}),h.jsxs("button",{type:"submit",disabled:i,className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"0.5rem",justifyContent:"center"},children:[h.jsx(mo,{size:16}),i?"Sending...":"Send Feedback"]})]})})]})}),h.jsxs("div",{className:"faq-section",children:[h.jsxs("h2",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem"},children:[h.jsx(yc,{size:28,style:{color:"var(--primary)"}}),"Frequently Asked Questions"]}),h.jsxs("div",{className:"faq-item",children:[h.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx(Yg,{size:20,style:{color:"var(--success)"}}),"How do I become a host?"]}),h.jsx("p",{children:'Go to the registration page, select "Become a Host", and fill out your profile details.'})]}),h.jsxs("div",{className:"faq-item",children:[h.jsxs("h4",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx(m1,{size:20,style:{color:"var(--warning)"}}),"Is it free to use?"]}),h.jsx("p",{children:"Registration is free for both guests and hosts. Specific festival experiences may have their own terms."})]})]})]})})},uj=()=>{const[r,n]=z.useState(!1),[i,s]=z.useState(null),[c,l]=z.useState(!0);z.useEffect(()=>{try{const Y=localStorage.getItem("user");if(Y){const M=JSON.parse(Y);M&&M.token&&M.email&&(M.role||M.userType)&&s(M)}}catch{console.warn("Invalid user data in localStorage"),localStorage.removeItem("user")}},[]);const{unreadCount:d,clearUnreadCount:p}=rx(),m=Wn();z.useEffect(()=>{const Y=setTimeout(()=>{l(!1)},3e3),M=()=>{try{const ee=localStorage.getItem("user");if(ee){const J=JSON.parse(ee);J&&J.token&&J.email&&(J.role||J.userType)?s(J):s(null)}else s(null)}catch{console.warn("Invalid user data in localStorage"),localStorage.removeItem("user"),s(null)}};return window.addEventListener("storage",M),()=>{clearTimeout(Y),window.removeEventListener("storage",M)}},[]);const g=Y=>{const M=Y?.role||Y?.userType||Y?.partitionKey;return M==="Host"?"/host-dashboard":M==="Guest"?"/guest-dashboard":M==="Admin"?"/admin":"/login"},y=()=>{localStorage.clear(),s(null),n(!1),window.location.href="/"},E=()=>{p(),n(!1)},I=Y=>Y==="/dashboard"?m.pathname===g(i)||m.pathname==="/browse":m.pathname===Y;return c?h.jsx(PR,{}):h.jsxs("div",{className:"app-container",style:{animation:"fadeIn 0.8s ease-out"},children:[h.jsxs("nav",{className:"navbar",children:[h.jsx(Hn,{to:"/",className:"nav-logo",onClick:()=>n(!1),children:h.jsx(DR,{className:"nav-logo-img",style:{height:"50px"}})}),h.jsx("button",{className:"menu-toggle",onClick:()=>n(!r),"aria-label":"Toggle menu",children:r?h.jsx(rf,{size:28}):h.jsx(D1,{size:28})}),h.jsx("div",{className:`nav-links ${r?"mobile-open":""}`,children:i?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"user-badge",children:h.jsxs("span",{className:"user-badge-text",children:[h.jsx("strong",{children:i.name})," ",h.jsxs("span",{className:"user-badge-role",children:["(",i.role||i.userType||i.partitionKey,")"]})]})}),h.jsxs(Hn,{to:g(i),className:`nav-item ${I("/dashboard")?"active":""}`,onClick:()=>n(!1),children:[h.jsx(k1,{size:20})," Dashboard"]}),h.jsxs(Hn,{to:"/chats",className:`nav-item chat-nav-item ${I("/chats")?"active":""}`,onClick:E,children:[" Chats",d>0&&h.jsx("span",{className:`unread-badge ${d>9?"large-count":""}`,children:d>99?"99+":d})]}),h.jsxs(Hn,{to:"/profile",className:`nav-item ${I("/profile")?"active":""}`,onClick:()=>n(!1),children:[h.jsx(ex,{size:20})," Profile"]}),h.jsxs(Hn,{to:"/help",className:`nav-item ${I("/help")?"active":""}`,onClick:()=>n(!1),children:[h.jsx(yc,{size:20})," Help"]}),(i.role==="Admin"||i.userType==="Admin")&&h.jsxs(Hn,{to:"/admin",className:`nav-item ${I("/admin")?"active":""}`,onClick:()=>n(!1),children:[h.jsx(X1,{size:20})," Admin"]}),h.jsxs("button",{onClick:y,className:"nav-item logout-btn",style:{background:"none",border:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem"},children:[h.jsx(N1,{size:20})," Logout"]})]}):h.jsxs(h.Fragment,{children:[h.jsxs(Hn,{to:"/help",className:"nav-item",onClick:()=>n(!1),children:[h.jsx(yc,{size:20})," Help"]}),h.jsx(Hn,{to:"/login",className:"nav-item",onClick:()=>n(!1),children:"Login"}),h.jsx(Hn,{to:"/register",className:"nav-item btn btn-primary",style:{color:"white",padding:"0.5rem 1rem"},onClick:()=>n(!1),children:"Register"})]})})]}),h.jsx("main",{className:"content full-width",children:h.jsxs(EC,{children:[h.jsx(pn,{path:"/",element:h.jsx(LR,{user:i})}),h.jsx(pn,{path:"/login",element:i?h.jsx(yr,{to:"/"}):h.jsx(BR,{setUser:s})}),h.jsx(pn,{path:"/register",element:i?h.jsx(yr,{to:"/"}):h.jsx(HR,{setUser:s})}),h.jsx(pn,{path:"/browse",element:i?.role==="Guest"||i?.userType==="Guest"?h.jsx(yy,{user:i}):h.jsx(yr,{to:"/login"})}),h.jsx(pn,{path:"/guest-dashboard",element:i?.role==="Guest"||i?.userType==="Guest"?h.jsx(yy,{user:i}):h.jsx(yr,{to:"/login"})}),h.jsx(pn,{path:"/host-dashboard",element:i?.role==="Host"||i?.userType==="Host"?h.jsx(RE,{user:i}):h.jsx(yr,{to:"/login"})}),h.jsx(pn,{path:"/chats",element:i?h.jsx(oj,{}):h.jsx(yr,{to:"/login"})}),h.jsx(pn,{path:"/profile",element:i?h.jsx(aj,{}):h.jsx(yr,{to:"/login"})}),h.jsx(pn,{path:"/profile/:userName",element:h.jsx(cj,{})}),h.jsx(pn,{path:"/admin",element:i?.role==="Admin"||i?.userType==="Admin"?h.jsx(sj,{}):h.jsx(yr,{to:"/login"})}),h.jsx(pn,{path:"/chat/:recipientId",element:i?h.jsx(ij,{user:i}):h.jsx(yr,{to:"/login"})}),h.jsx(pn,{path:"/help",element:h.jsx(lj,{})}),h.jsx(pn,{path:"/api-test",element:h.jsx(zR,{})})]})})]})};function dj(){return h.jsx(KC,{children:h.jsx(ix,{children:h.jsx(uj,{})})})}AT.createRoot(document.getElementById("root")).render(h.jsx(z.StrictMode,{children:h.jsx(dj,{})}));
